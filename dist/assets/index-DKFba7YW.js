var Ade=Object.defineProperty;var mde=(t,e,r)=>e in t?Ade(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var fr=(t,e,r)=>mde(t,typeof e!="symbol"?e+"":e,r);function pde(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Gst=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tz={exports:{}},LI={},kz={exports:{}},Ln={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw=Symbol.for("react.element"),gde=Symbol.for("react.portal"),xde=Symbol.for("react.fragment"),vde=Symbol.for("react.strict_mode"),yde=Symbol.for("react.profiler"),bde=Symbol.for("react.provider"),wde=Symbol.for("react.context"),Nde=Symbol.for("react.forward_ref"),Cde=Symbol.for("react.suspense"),_de=Symbol.for("react.memo"),Ede=Symbol.for("react.lazy"),iL=Symbol.iterator;function Sde(t){return t===null||typeof t!="object"?null:(t=iL&&t[iL]||t["@@iterator"],typeof t=="function"?t:null)}var Fz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Oz=Object.assign,Dz={};function Vv(t,e,r){this.props=t,this.context=e,this.refs=Dz,this.updater=r||Fz}Vv.prototype.isReactComponent={};Vv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Rz(){}Rz.prototype=Vv.prototype;function rO(t,e,r){this.props=t,this.context=e,this.refs=Dz,this.updater=r||Fz}var nO=rO.prototype=new Rz;nO.constructor=rO;Oz(nO,Vv.prototype);nO.isPureReactComponent=!0;var oL=Array.isArray,Mz=Object.prototype.hasOwnProperty,aO={current:null},Lz={key:!0,ref:!0,__self:!0,__source:!0};function Uz(t,e,r){var n,a={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Mz.call(e,n)&&!Lz.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:tw,type:t,key:s,ref:o,props:a,_owner:aO.current}}function Ide(t,e){return{$$typeof:tw,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sO(t){return typeof t=="object"&&t!==null&&t.$$typeof===tw}function jde(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var lL=/\/+/g;function jP(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jde(""+t.key):e.toString(36)}function S_(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tw:case gde:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+jP(o,0):n,oL(a)?(r="",t!=null&&(r=t.replace(lL,"$&/")+"/"),S_(a,e,r,"",function(u){return u})):a!=null&&(sO(a)&&(a=Ide(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(lL,"$&/")+"/")+t)),e.push(a)),1;if(o=0,n=n===""?".":n+":",oL(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+jP(s,l);o+=S_(s,e,r,c,a)}else if(c=Sde(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+jP(s,l++),o+=S_(s,e,r,c,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function EN(t,e,r){if(t==null)return t;var n=[],a=0;return S_(t,n,"","",function(s){return e.call(r,s,a++)}),n}function Pde(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lc={current:null},I_={transition:null},Bde={ReactCurrentDispatcher:lc,ReactCurrentBatchConfig:I_,ReactCurrentOwner:aO};function Qz(){throw Error("act(...) is not supported in production builds of React.")}Ln.Children={map:EN,forEach:function(t,e,r){EN(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return EN(t,function(){e++}),e},toArray:function(t){return EN(t,function(e){return e})||[]},only:function(t){if(!sO(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ln.Component=Vv;Ln.Fragment=xde;Ln.Profiler=yde;Ln.PureComponent=rO;Ln.StrictMode=vde;Ln.Suspense=Cde;Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bde;Ln.act=Qz;Ln.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Oz({},t.props),a=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=aO.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Mz.call(e,c)&&!Lz.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:tw,type:t.type,key:a,ref:s,props:n,_owner:o}};Ln.createContext=function(t){return t={$$typeof:wde,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bde,_context:t},t.Consumer=t};Ln.createElement=Uz;Ln.createFactory=function(t){var e=Uz.bind(null,t);return e.type=t,e};Ln.createRef=function(){return{current:null}};Ln.forwardRef=function(t){return{$$typeof:Nde,render:t}};Ln.isValidElement=sO;Ln.lazy=function(t){return{$$typeof:Ede,_payload:{_status:-1,_result:t},_init:Pde}};Ln.memo=function(t,e){return{$$typeof:_de,type:t,compare:e===void 0?null:e}};Ln.startTransition=function(t){var e=I_.transition;I_.transition={};try{t()}finally{I_.transition=e}};Ln.unstable_act=Qz;Ln.useCallback=function(t,e){return lc.current.useCallback(t,e)};Ln.useContext=function(t){return lc.current.useContext(t)};Ln.useDebugValue=function(){};Ln.useDeferredValue=function(t){return lc.current.useDeferredValue(t)};Ln.useEffect=function(t,e){return lc.current.useEffect(t,e)};Ln.useId=function(){return lc.current.useId()};Ln.useImperativeHandle=function(t,e,r){return lc.current.useImperativeHandle(t,e,r)};Ln.useInsertionEffect=function(t,e){return lc.current.useInsertionEffect(t,e)};Ln.useLayoutEffect=function(t,e){return lc.current.useLayoutEffect(t,e)};Ln.useMemo=function(t,e){return lc.current.useMemo(t,e)};Ln.useReducer=function(t,e,r){return lc.current.useReducer(t,e,r)};Ln.useRef=function(t){return lc.current.useRef(t)};Ln.useState=function(t){return lc.current.useState(t)};Ln.useSyncExternalStore=function(t,e,r){return lc.current.useSyncExternalStore(t,e,r)};Ln.useTransition=function(){return lc.current.useTransition()};Ln.version="18.3.1";kz.exports=Ln;var x=kz.exports;const So=dA(x),Tde=pde({__proto__:null,default:So},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kde=x,Fde=Symbol.for("react.element"),Ode=Symbol.for("react.fragment"),Dde=Object.prototype.hasOwnProperty,Rde=kde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mde={key:!0,ref:!0,__self:!0,__source:!0};function Vz(t,e,r){var n,a={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Dde.call(e,n)&&!Mde.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Fde,type:t,key:s,ref:o,props:a,_owner:Rde.current}}LI.Fragment=Ode;LI.jsx=Vz;LI.jsxs=Vz;Tz.exports=LI;var i=Tz.exports,vB={},Hz={exports:{}},gu={},$z={exports:{}},Gz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(pe,ne){var Pe=pe.length;pe.push(ne);e:for(;0<Pe;){var Be=Pe-1>>>1,O=pe[Be];if(0<a(O,ne))pe[Be]=ne,pe[Pe]=O,Pe=Be;else break e}}function r(pe){return pe.length===0?null:pe[0]}function n(pe){if(pe.length===0)return null;var ne=pe[0],Pe=pe.pop();if(Pe!==ne){pe[0]=Pe;e:for(var Be=0,O=pe.length,G=O>>>1;Be<G;){var q=2*(Be+1)-1,U=pe[q],Y=q+1,Z=pe[Y];if(0>a(U,Pe))Y<O&&0>a(Z,U)?(pe[Be]=Z,pe[Y]=Pe,Be=Y):(pe[Be]=U,pe[q]=Pe,Be=q);else if(Y<O&&0>a(Z,Pe))pe[Be]=Z,pe[Y]=Pe,Be=Y;else break e}}return ne}function a(pe,ne){var Pe=pe.sortIndex-ne.sortIndex;return Pe!==0?Pe:pe.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,A=3,h=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(pe){for(var ne=r(u);ne!==null;){if(ne.callback===null)n(u);else if(ne.startTime<=pe)n(u),ne.sortIndex=ne.expirationTime,e(c,ne);else break;ne=r(u)}}function w(pe){if(p=!1,b(pe),!m)if(r(c)!==null)m=!0,Ae(j);else{var ne=r(u);ne!==null&&me(w,ne.startTime-pe)}}function j(pe,ne){m=!1,p&&(p=!1,v(S),S=-1),h=!0;var Pe=A;try{for(b(ne),f=r(c);f!==null&&(!(f.expirationTime>ne)||pe&&!P());){var Be=f.callback;if(typeof Be=="function"){f.callback=null,A=f.priorityLevel;var O=Be(f.expirationTime<=ne);ne=t.unstable_now(),typeof O=="function"?f.callback=O:f===r(c)&&n(c),b(ne)}else n(c);f=r(c)}if(f!==null)var G=!0;else{var q=r(u);q!==null&&me(w,q.startTime-ne),G=!1}return G}finally{f=null,A=Pe,h=!1}}var I=!1,_=null,S=-1,E=5,F=-1;function P(){return!(t.unstable_now()-F<E)}function k(){if(_!==null){var pe=t.unstable_now();F=pe;var ne=!0;try{ne=_(!0,pe)}finally{ne?D():(I=!1,_=null)}}else I=!1}var D;if(typeof y=="function")D=function(){y(k)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,fe=J.port2;J.port1.onmessage=k,D=function(){fe.postMessage(null)}}else D=function(){g(k,0)};function Ae(pe){_=pe,I||(I=!0,D())}function me(pe,ne){S=g(function(){pe(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(pe){pe.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,Ae(j))},t.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<pe?Math.floor(1e3/pe):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(pe){switch(A){case 1:case 2:case 3:var ne=3;break;default:ne=A}var Pe=A;A=ne;try{return pe()}finally{A=Pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(pe,ne){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Pe=A;A=pe;try{return ne()}finally{A=Pe}},t.unstable_scheduleCallback=function(pe,ne,Pe){var Be=t.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?Be+Pe:Be):Pe=Be,pe){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Pe+O,pe={id:d++,callback:ne,priorityLevel:pe,startTime:Pe,expirationTime:O,sortIndex:-1},Pe>Be?(pe.sortIndex=Pe,e(u,pe),r(c)===null&&pe===r(u)&&(p?(v(S),S=-1):p=!0,me(w,Pe-Be))):(pe.sortIndex=O,e(c,pe),m||h||(m=!0,Ae(j))),pe},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(pe){var ne=A;return function(){var Pe=A;A=ne;try{return pe.apply(this,arguments)}finally{A=Pe}}}})(Gz);$z.exports=Gz;var Lde=$z.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ude=x,fu=Lde;function gr(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kz=new Set,Fb={};function hg(t,e){dv(t,e),dv(t+"Capture",e)}function dv(t,e){for(Fb[t]=e,t=0;t<e.length;t++)Kz.add(e[t])}var qh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yB=Object.prototype.hasOwnProperty,Qde=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cL={},uL={};function Vde(t){return yB.call(uL,t)?!0:yB.call(cL,t)?!1:Qde.test(t)?uL[t]=!0:(cL[t]=!0,!1)}function Hde(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $de(t,e,r,n){if(e===null||typeof e>"u"||Hde(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cc(t,e,r,n,a,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ol={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ol[t]=new cc(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ol[e]=new cc(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ol[t]=new cc(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ol[t]=new cc(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ol[t]=new cc(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ol[t]=new cc(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ol[t]=new cc(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ol[t]=new cc(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ol[t]=new cc(t,5,!1,t.toLowerCase(),null,!1,!1)});var iO=/[\-:]([a-z])/g;function oO(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(iO,oO);ol[e]=new cc(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(iO,oO);ol[e]=new cc(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(iO,oO);ol[e]=new cc(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ol[t]=new cc(t,1,!1,t.toLowerCase(),null,!1,!1)});ol.xlinkHref=new cc("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ol[t]=new cc(t,1,!1,t.toLowerCase(),null,!0,!0)});function lO(t,e,r,n){var a=ol.hasOwnProperty(e)?ol[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($de(e,r,a,n)&&(r=null),n||a===null?Vde(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var fA=Ude.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,SN=Symbol.for("react.element"),Ex=Symbol.for("react.portal"),Sx=Symbol.for("react.fragment"),cO=Symbol.for("react.strict_mode"),bB=Symbol.for("react.profiler"),qz=Symbol.for("react.provider"),zz=Symbol.for("react.context"),uO=Symbol.for("react.forward_ref"),wB=Symbol.for("react.suspense"),NB=Symbol.for("react.suspense_list"),dO=Symbol.for("react.memo"),o0=Symbol.for("react.lazy"),Wz=Symbol.for("react.offscreen"),dL=Symbol.iterator;function U1(t){return t===null||typeof t!="object"?null:(t=dL&&t[dL]||t["@@iterator"],typeof t=="function"?t:null)}var Vs=Object.assign,PP;function Ny(t){if(PP===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);PP=e&&e[1]||""}return`
`+PP+t}var BP=!1;function TP(t,e){if(!t||BP)return"";BP=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{BP=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ny(t):""}function Gde(t){switch(t.tag){case 5:return Ny(t.type);case 16:return Ny("Lazy");case 13:return Ny("Suspense");case 19:return Ny("SuspenseList");case 0:case 2:case 15:return t=TP(t.type,!1),t;case 11:return t=TP(t.type.render,!1),t;case 1:return t=TP(t.type,!0),t;default:return""}}function CB(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sx:return"Fragment";case Ex:return"Portal";case bB:return"Profiler";case cO:return"StrictMode";case wB:return"Suspense";case NB:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zz:return(t.displayName||"Context")+".Consumer";case qz:return(t._context.displayName||"Context")+".Provider";case uO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dO:return e=t.displayName||null,e!==null?e:CB(t.type)||"Memo";case o0:e=t._payload,t=t._init;try{return CB(t(e))}catch{}}return null}function Kde(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return CB(e);case 8:return e===cO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Y0(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xz(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qde(t){var e=Xz(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function IN(t){t._valueTracker||(t._valueTracker=qde(t))}function Yz(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Xz(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function pE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _B(t,e){var r=e.checked;return Vs({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function fL(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Y0(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jz(t,e){e=e.checked,e!=null&&lO(t,"checked",e,!1)}function EB(t,e){Jz(t,e);var r=Y0(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?SB(t,e.type,r):e.hasOwnProperty("defaultValue")&&SB(t,e.type,Y0(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hL(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function SB(t,e,r){(e!=="number"||pE(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Cy=Array.isArray;function qx(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Y0(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function IB(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(gr(91));return Vs({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function AL(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(gr(92));if(Cy(r)){if(1<r.length)throw Error(gr(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Y0(r)}}function Zz(t,e){var r=Y0(e.value),n=Y0(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function mL(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function eW(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jB(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?eW(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jN,tW=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jN=jN||document.createElement("div"),jN.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jN.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ob(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Wy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zde=["Webkit","ms","Moz","O"];Object.keys(Wy).forEach(function(t){zde.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wy[e]=Wy[t]})});function rW(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Wy.hasOwnProperty(t)&&Wy[t]?(""+e).trim():e+"px"}function nW(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=rW(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var Wde=Vs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function PB(t,e){if(e){if(Wde[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(gr(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(gr(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(gr(61))}if(e.style!=null&&typeof e.style!="object")throw Error(gr(62))}}function BB(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var TB=null;function fO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kB=null,zx=null,Wx=null;function pL(t){if(t=aw(t)){if(typeof kB!="function")throw Error(gr(280));var e=t.stateNode;e&&(e=$I(e),kB(t.stateNode,t.type,e))}}function aW(t){zx?Wx?Wx.push(t):Wx=[t]:zx=t}function sW(){if(zx){var t=zx,e=Wx;if(Wx=zx=null,pL(t),e)for(t=0;t<e.length;t++)pL(e[t])}}function iW(t,e){return t(e)}function oW(){}var kP=!1;function lW(t,e,r){if(kP)return t(e,r);kP=!0;try{return iW(t,e,r)}finally{kP=!1,(zx!==null||Wx!==null)&&(oW(),sW())}}function Db(t,e){var r=t.stateNode;if(r===null)return null;var n=$I(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(gr(231,e,typeof r));return r}var FB=!1;if(qh)try{var Q1={};Object.defineProperty(Q1,"passive",{get:function(){FB=!0}}),window.addEventListener("test",Q1,Q1),window.removeEventListener("test",Q1,Q1)}catch{FB=!1}function Xde(t,e,r,n,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Xy=!1,gE=null,xE=!1,OB=null,Yde={onError:function(t){Xy=!0,gE=t}};function Jde(t,e,r,n,a,s,o,l,c){Xy=!1,gE=null,Xde.apply(Yde,arguments)}function Zde(t,e,r,n,a,s,o,l,c){if(Jde.apply(this,arguments),Xy){if(Xy){var u=gE;Xy=!1,gE=null}else throw Error(gr(198));xE||(xE=!0,OB=u)}}function Ag(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function cW(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gL(t){if(Ag(t)!==t)throw Error(gr(188))}function efe(t){var e=t.alternate;if(!e){if(e=Ag(t),e===null)throw Error(gr(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return gL(a),t;if(s===n)return gL(a),e;s=s.sibling}throw Error(gr(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(gr(189))}}if(r.alternate!==n)throw Error(gr(190))}if(r.tag!==3)throw Error(gr(188));return r.stateNode.current===r?t:e}function uW(t){return t=efe(t),t!==null?dW(t):null}function dW(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dW(t);if(e!==null)return e;t=t.sibling}return null}var fW=fu.unstable_scheduleCallback,xL=fu.unstable_cancelCallback,tfe=fu.unstable_shouldYield,rfe=fu.unstable_requestPaint,xi=fu.unstable_now,nfe=fu.unstable_getCurrentPriorityLevel,hO=fu.unstable_ImmediatePriority,hW=fu.unstable_UserBlockingPriority,vE=fu.unstable_NormalPriority,afe=fu.unstable_LowPriority,AW=fu.unstable_IdlePriority,UI=null,Of=null;function sfe(t){if(Of&&typeof Of.onCommitFiberRoot=="function")try{Of.onCommitFiberRoot(UI,t,void 0,(t.current.flags&128)===128)}catch{}}var Hd=Math.clz32?Math.clz32:lfe,ife=Math.log,ofe=Math.LN2;function lfe(t){return t>>>=0,t===0?32:31-(ife(t)/ofe|0)|0}var PN=64,BN=4194304;function _y(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yE(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=_y(l):(s&=o,s!==0&&(n=_y(s)))}else o=r&~a,o!==0?n=_y(o):s!==0&&(n=_y(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Hd(e),a=1<<r,n|=t[r],e&=~a;return n}function cfe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ufe(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Hd(s),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=cfe(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function DB(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mW(){var t=PN;return PN<<=1,!(PN&4194240)&&(PN=64),t}function FP(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function rw(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hd(e),t[e]=r}function dfe(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Hd(r),s=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~s}}function AO(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Hd(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var Ta=0;function pW(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gW,mO,xW,vW,yW,RB=!1,TN=[],k0=null,F0=null,O0=null,Rb=new Map,Mb=new Map,h0=[],ffe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vL(t,e){switch(t){case"focusin":case"focusout":k0=null;break;case"dragenter":case"dragleave":F0=null;break;case"mouseover":case"mouseout":O0=null;break;case"pointerover":case"pointerout":Rb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mb.delete(e.pointerId)}}function V1(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=aw(e),e!==null&&mO(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function hfe(t,e,r,n,a){switch(e){case"focusin":return k0=V1(k0,t,e,r,n,a),!0;case"dragenter":return F0=V1(F0,t,e,r,n,a),!0;case"mouseover":return O0=V1(O0,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return Rb.set(s,V1(Rb.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Mb.set(s,V1(Mb.get(s)||null,t,e,r,n,a)),!0}return!1}function bW(t){var e=sp(t.target);if(e!==null){var r=Ag(e);if(r!==null){if(e=r.tag,e===13){if(e=cW(r),e!==null){t.blockedOn=e,yW(t.priority,function(){xW(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function j_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=MB(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);TB=n,r.target.dispatchEvent(n),TB=null}else return e=aw(r),e!==null&&mO(e),t.blockedOn=r,!1;e.shift()}return!0}function yL(t,e,r){j_(t)&&r.delete(e)}function Afe(){RB=!1,k0!==null&&j_(k0)&&(k0=null),F0!==null&&j_(F0)&&(F0=null),O0!==null&&j_(O0)&&(O0=null),Rb.forEach(yL),Mb.forEach(yL)}function H1(t,e){t.blockedOn===e&&(t.blockedOn=null,RB||(RB=!0,fu.unstable_scheduleCallback(fu.unstable_NormalPriority,Afe)))}function Lb(t){function e(a){return H1(a,t)}if(0<TN.length){H1(TN[0],t);for(var r=1;r<TN.length;r++){var n=TN[r];n.blockedOn===t&&(n.blockedOn=null)}}for(k0!==null&&H1(k0,t),F0!==null&&H1(F0,t),O0!==null&&H1(O0,t),Rb.forEach(e),Mb.forEach(e),r=0;r<h0.length;r++)n=h0[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<h0.length&&(r=h0[0],r.blockedOn===null);)bW(r),r.blockedOn===null&&h0.shift()}var Xx=fA.ReactCurrentBatchConfig,bE=!0;function mfe(t,e,r,n){var a=Ta,s=Xx.transition;Xx.transition=null;try{Ta=1,pO(t,e,r,n)}finally{Ta=a,Xx.transition=s}}function pfe(t,e,r,n){var a=Ta,s=Xx.transition;Xx.transition=null;try{Ta=4,pO(t,e,r,n)}finally{Ta=a,Xx.transition=s}}function pO(t,e,r,n){if(bE){var a=MB(t,e,r,n);if(a===null)$P(t,e,n,wE,r),vL(t,n);else if(hfe(a,t,e,r,n))n.stopPropagation();else if(vL(t,n),e&4&&-1<ffe.indexOf(t)){for(;a!==null;){var s=aw(a);if(s!==null&&gW(s),s=MB(t,e,r,n),s===null&&$P(t,e,n,wE,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else $P(t,e,n,null,r)}}var wE=null;function MB(t,e,r,n){if(wE=null,t=fO(n),t=sp(t),t!==null)if(e=Ag(t),e===null)t=null;else if(r=e.tag,r===13){if(t=cW(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wE=t,null}function wW(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nfe()){case hO:return 1;case hW:return 4;case vE:case afe:return 16;case AW:return 536870912;default:return 16}default:return 16}}var N0=null,gO=null,P_=null;function NW(){if(P_)return P_;var t,e=gO,r=e.length,n,a="value"in N0?N0.value:N0.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===a[s-n];n++);return P_=a.slice(t,1<n?1-n:void 0)}function B_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kN(){return!0}function bL(){return!1}function xu(t){function e(r,n,a,s,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?kN:bL,this.isPropagationStopped=bL,this}return Vs(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=kN)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=kN)},persist:function(){},isPersistent:kN}),e}var Hv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xO=xu(Hv),nw=Vs({},Hv,{view:0,detail:0}),gfe=xu(nw),OP,DP,$1,QI=Vs({},nw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$1&&($1&&t.type==="mousemove"?(OP=t.screenX-$1.screenX,DP=t.screenY-$1.screenY):DP=OP=0,$1=t),OP)},movementY:function(t){return"movementY"in t?t.movementY:DP}}),wL=xu(QI),xfe=Vs({},QI,{dataTransfer:0}),vfe=xu(xfe),yfe=Vs({},nw,{relatedTarget:0}),RP=xu(yfe),bfe=Vs({},Hv,{animationName:0,elapsedTime:0,pseudoElement:0}),wfe=xu(bfe),Nfe=Vs({},Hv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cfe=xu(Nfe),_fe=Vs({},Hv,{data:0}),NL=xu(_fe),Efe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sfe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ife={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jfe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ife[t])?!!e[t]:!1}function vO(){return jfe}var Pfe=Vs({},nw,{key:function(t){if(t.key){var e=Efe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=B_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Sfe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vO,charCode:function(t){return t.type==="keypress"?B_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?B_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bfe=xu(Pfe),Tfe=Vs({},QI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CL=xu(Tfe),kfe=Vs({},nw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vO}),Ffe=xu(kfe),Ofe=Vs({},Hv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dfe=xu(Ofe),Rfe=Vs({},QI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mfe=xu(Rfe),Lfe=[9,13,27,32],yO=qh&&"CompositionEvent"in window,Yy=null;qh&&"documentMode"in document&&(Yy=document.documentMode);var Ufe=qh&&"TextEvent"in window&&!Yy,CW=qh&&(!yO||Yy&&8<Yy&&11>=Yy),_L=" ",EL=!1;function _W(t,e){switch(t){case"keyup":return Lfe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EW(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ix=!1;function Qfe(t,e){switch(t){case"compositionend":return EW(e);case"keypress":return e.which!==32?null:(EL=!0,_L);case"textInput":return t=e.data,t===_L&&EL?null:t;default:return null}}function Vfe(t,e){if(Ix)return t==="compositionend"||!yO&&_W(t,e)?(t=NW(),P_=gO=N0=null,Ix=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return CW&&e.locale!=="ko"?null:e.data;default:return null}}var Hfe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Hfe[t.type]:e==="textarea"}function SW(t,e,r,n){aW(n),e=NE(e,"onChange"),0<e.length&&(r=new xO("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Jy=null,Ub=null;function $fe(t){MW(t,0)}function VI(t){var e=Bx(t);if(Yz(e))return t}function Gfe(t,e){if(t==="change")return e}var IW=!1;if(qh){var MP;if(qh){var LP="oninput"in document;if(!LP){var IL=document.createElement("div");IL.setAttribute("oninput","return;"),LP=typeof IL.oninput=="function"}MP=LP}else MP=!1;IW=MP&&(!document.documentMode||9<document.documentMode)}function jL(){Jy&&(Jy.detachEvent("onpropertychange",jW),Ub=Jy=null)}function jW(t){if(t.propertyName==="value"&&VI(Ub)){var e=[];SW(e,Ub,t,fO(t)),lW($fe,e)}}function Kfe(t,e,r){t==="focusin"?(jL(),Jy=e,Ub=r,Jy.attachEvent("onpropertychange",jW)):t==="focusout"&&jL()}function qfe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return VI(Ub)}function zfe(t,e){if(t==="click")return VI(e)}function Wfe(t,e){if(t==="input"||t==="change")return VI(e)}function Xfe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xd=typeof Object.is=="function"?Object.is:Xfe;function Qb(t,e){if(Xd(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!yB.call(e,a)||!Xd(t[a],e[a]))return!1}return!0}function PL(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function BL(t,e){var r=PL(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=PL(r)}}function PW(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?PW(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BW(){for(var t=window,e=pE();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=pE(t.document)}return e}function bO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Yfe(t){var e=BW(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&PW(r.ownerDocument.documentElement,r)){if(n!==null&&bO(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!t.extend&&s>n&&(a=n,n=s,s=a),a=BL(r,s);var o=BL(r,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jfe=qh&&"documentMode"in document&&11>=document.documentMode,jx=null,LB=null,Zy=null,UB=!1;function TL(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;UB||jx==null||jx!==pE(n)||(n=jx,"selectionStart"in n&&bO(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Zy&&Qb(Zy,n)||(Zy=n,n=NE(LB,"onSelect"),0<n.length&&(e=new xO("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=jx)))}function FN(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Px={animationend:FN("Animation","AnimationEnd"),animationiteration:FN("Animation","AnimationIteration"),animationstart:FN("Animation","AnimationStart"),transitionend:FN("Transition","TransitionEnd")},UP={},TW={};qh&&(TW=document.createElement("div").style,"AnimationEvent"in window||(delete Px.animationend.animation,delete Px.animationiteration.animation,delete Px.animationstart.animation),"TransitionEvent"in window||delete Px.transitionend.transition);function HI(t){if(UP[t])return UP[t];if(!Px[t])return t;var e=Px[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in TW)return UP[t]=e[r];return t}var kW=HI("animationend"),FW=HI("animationiteration"),OW=HI("animationstart"),DW=HI("transitionend"),RW=new Map,kL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mm(t,e){RW.set(t,e),hg(e,[t])}for(var QP=0;QP<kL.length;QP++){var VP=kL[QP],Zfe=VP.toLowerCase(),ehe=VP[0].toUpperCase()+VP.slice(1);mm(Zfe,"on"+ehe)}mm(kW,"onAnimationEnd");mm(FW,"onAnimationIteration");mm(OW,"onAnimationStart");mm("dblclick","onDoubleClick");mm("focusin","onFocus");mm("focusout","onBlur");mm(DW,"onTransitionEnd");dv("onMouseEnter",["mouseout","mouseover"]);dv("onMouseLeave",["mouseout","mouseover"]);dv("onPointerEnter",["pointerout","pointerover"]);dv("onPointerLeave",["pointerout","pointerover"]);hg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hg("onBeforeInput",["compositionend","keypress","textInput","paste"]);hg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ey="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),the=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ey));function FL(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Zde(n,e,void 0,t),t.currentTarget=null}function MW(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;FL(a,l,u),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;FL(a,l,u),s=c}}}if(xE)throw t=OB,xE=!1,OB=null,t}function as(t,e){var r=e[GB];r===void 0&&(r=e[GB]=new Set);var n=t+"__bubble";r.has(n)||(LW(e,t,2,!1),r.add(n))}function HP(t,e,r){var n=0;e&&(n|=4),LW(r,t,n,e)}var ON="_reactListening"+Math.random().toString(36).slice(2);function Vb(t){if(!t[ON]){t[ON]=!0,Kz.forEach(function(r){r!=="selectionchange"&&(the.has(r)||HP(r,!1,t),HP(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ON]||(e[ON]=!0,HP("selectionchange",!1,e))}}function LW(t,e,r,n){switch(wW(e)){case 1:var a=mfe;break;case 4:a=pfe;break;default:a=pO}r=a.bind(null,e,r,t),a=void 0,!FB||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function $P(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=sp(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}lW(function(){var u=s,d=fO(r),f=[];e:{var A=RW.get(t);if(A!==void 0){var h=xO,m=t;switch(t){case"keypress":if(B_(r)===0)break e;case"keydown":case"keyup":h=Bfe;break;case"focusin":m="focus",h=RP;break;case"focusout":m="blur",h=RP;break;case"beforeblur":case"afterblur":h=RP;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=wL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=vfe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Ffe;break;case kW:case FW:case OW:h=wfe;break;case DW:h=Dfe;break;case"scroll":h=gfe;break;case"wheel":h=Mfe;break;case"copy":case"cut":case"paste":h=Cfe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=CL}var p=(e&4)!==0,g=!p&&t==="scroll",v=p?A!==null?A+"Capture":null:A;p=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,v!==null&&(w=Db(y,v),w!=null&&p.push(Hb(y,w,b)))),g)break;y=y.return}0<p.length&&(A=new h(A,m,null,r,d),f.push({event:A,listeners:p}))}}if(!(e&7)){e:{if(A=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",A&&r!==TB&&(m=r.relatedTarget||r.fromElement)&&(sp(m)||m[zh]))break e;if((h||A)&&(A=d.window===d?d:(A=d.ownerDocument)?A.defaultView||A.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=u,m=m?sp(m):null,m!==null&&(g=Ag(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(p=wL,w="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=CL,w="onPointerLeave",v="onPointerEnter",y="pointer"),g=h==null?A:Bx(h),b=m==null?A:Bx(m),A=new p(w,y+"leave",h,r,d),A.target=g,A.relatedTarget=b,w=null,sp(d)===u&&(p=new p(v,y+"enter",m,r,d),p.target=b,p.relatedTarget=g,w=p),g=w,h&&m)t:{for(p=h,v=m,y=0,b=p;b;b=Ug(b))y++;for(b=0,w=v;w;w=Ug(w))b++;for(;0<y-b;)p=Ug(p),y--;for(;0<b-y;)v=Ug(v),b--;for(;y--;){if(p===v||v!==null&&p===v.alternate)break t;p=Ug(p),v=Ug(v)}p=null}else p=null;h!==null&&OL(f,A,h,p,!1),m!==null&&g!==null&&OL(f,g,m,p,!0)}}e:{if(A=u?Bx(u):window,h=A.nodeName&&A.nodeName.toLowerCase(),h==="select"||h==="input"&&A.type==="file")var j=Gfe;else if(SL(A))if(IW)j=Wfe;else{j=qfe;var I=Kfe}else(h=A.nodeName)&&h.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(j=zfe);if(j&&(j=j(t,u))){SW(f,j,r,d);break e}I&&I(t,A,u),t==="focusout"&&(I=A._wrapperState)&&I.controlled&&A.type==="number"&&SB(A,"number",A.value)}switch(I=u?Bx(u):window,t){case"focusin":(SL(I)||I.contentEditable==="true")&&(jx=I,LB=u,Zy=null);break;case"focusout":Zy=LB=jx=null;break;case"mousedown":UB=!0;break;case"contextmenu":case"mouseup":case"dragend":UB=!1,TL(f,r,d);break;case"selectionchange":if(Jfe)break;case"keydown":case"keyup":TL(f,r,d)}var _;if(yO)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ix?_W(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(CW&&r.locale!=="ko"&&(Ix||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ix&&(_=NW()):(N0=d,gO="value"in N0?N0.value:N0.textContent,Ix=!0)),I=NE(u,S),0<I.length&&(S=new NL(S,t,null,r,d),f.push({event:S,listeners:I}),_?S.data=_:(_=EW(r),_!==null&&(S.data=_)))),(_=Ufe?Qfe(t,r):Vfe(t,r))&&(u=NE(u,"onBeforeInput"),0<u.length&&(d=new NL("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=_))}MW(f,e)})}function Hb(t,e,r){return{instance:t,listener:e,currentTarget:r}}function NE(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Db(t,r),s!=null&&n.unshift(Hb(t,s,a)),s=Db(t,e),s!=null&&n.push(Hb(t,s,a))),t=t.return}return n}function Ug(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function OL(t,e,r,n,a){for(var s=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Db(r,s),c!=null&&o.unshift(Hb(r,c,l))):a||(c=Db(r,s),c!=null&&o.push(Hb(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var rhe=/\r\n?/g,nhe=/\u0000|\uFFFD/g;function DL(t){return(typeof t=="string"?t:""+t).replace(rhe,`
`).replace(nhe,"")}function DN(t,e,r){if(e=DL(e),DL(t)!==e&&r)throw Error(gr(425))}function CE(){}var QB=null,VB=null;function HB(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $B=typeof setTimeout=="function"?setTimeout:void 0,ahe=typeof clearTimeout=="function"?clearTimeout:void 0,RL=typeof Promise=="function"?Promise:void 0,she=typeof queueMicrotask=="function"?queueMicrotask:typeof RL<"u"?function(t){return RL.resolve(null).then(t).catch(ihe)}:$B;function ihe(t){setTimeout(function(){throw t})}function GP(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),Lb(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Lb(e)}function D0(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ML(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var $v=Math.random().toString(36).slice(2),_f="__reactFiber$"+$v,$b="__reactProps$"+$v,zh="__reactContainer$"+$v,GB="__reactEvents$"+$v,ohe="__reactListeners$"+$v,lhe="__reactHandles$"+$v;function sp(t){var e=t[_f];if(e)return e;for(var r=t.parentNode;r;){if(e=r[zh]||r[_f]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=ML(t);t!==null;){if(r=t[_f])return r;t=ML(t)}return e}t=r,r=t.parentNode}return null}function aw(t){return t=t[_f]||t[zh],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bx(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(gr(33))}function $I(t){return t[$b]||null}var KB=[],Tx=-1;function pm(t){return{current:t}}function us(t){0>Tx||(t.current=KB[Tx],KB[Tx]=null,Tx--)}function Ya(t,e){Tx++,KB[Tx]=t.current,t.current=e}var J0={},Fl=pm(J0),Ec=pm(!1),Op=J0;function fv(t,e){var r=t.type.contextTypes;if(!r)return J0;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Sc(t){return t=t.childContextTypes,t!=null}function _E(){us(Ec),us(Fl)}function LL(t,e,r){if(Fl.current!==J0)throw Error(gr(168));Ya(Fl,e),Ya(Ec,r)}function UW(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(gr(108,Kde(t)||"Unknown",a));return Vs({},r,n)}function EE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||J0,Op=Fl.current,Ya(Fl,t),Ya(Ec,Ec.current),!0}function UL(t,e,r){var n=t.stateNode;if(!n)throw Error(gr(169));r?(t=UW(t,e,Op),n.__reactInternalMemoizedMergedChildContext=t,us(Ec),us(Fl),Ya(Fl,t)):us(Ec),Ya(Ec,r)}var bh=null,GI=!1,KP=!1;function QW(t){bh===null?bh=[t]:bh.push(t)}function che(t){GI=!0,QW(t)}function gm(){if(!KP&&bh!==null){KP=!0;var t=0,e=Ta;try{var r=bh;for(Ta=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}bh=null,GI=!1}catch(a){throw bh!==null&&(bh=bh.slice(t+1)),fW(hO,gm),a}finally{Ta=e,KP=!1}}return null}var kx=[],Fx=0,SE=null,IE=0,qu=[],zu=0,Dp=null,Eh=1,Sh="";function Vm(t,e){kx[Fx++]=IE,kx[Fx++]=SE,SE=t,IE=e}function VW(t,e,r){qu[zu++]=Eh,qu[zu++]=Sh,qu[zu++]=Dp,Dp=t;var n=Eh;t=Sh;var a=32-Hd(n)-1;n&=~(1<<a),r+=1;var s=32-Hd(e)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Eh=1<<32-Hd(e)+a|r<<a|n,Sh=s+t}else Eh=1<<s|r<<a|n,Sh=t}function wO(t){t.return!==null&&(Vm(t,1),VW(t,1,0))}function NO(t){for(;t===SE;)SE=kx[--Fx],kx[Fx]=null,IE=kx[--Fx],kx[Fx]=null;for(;t===Dp;)Dp=qu[--zu],qu[zu]=null,Sh=qu[--zu],qu[zu]=null,Eh=qu[--zu],qu[zu]=null}var cu=null,su=null,ys=!1,Od=null;function HW(t,e){var r=Xu(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function QL(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cu=t,su=D0(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cu=t,su=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Dp!==null?{id:Eh,overflow:Sh}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Xu(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,cu=t,su=null,!0):!1;default:return!1}}function qB(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zB(t){if(ys){var e=su;if(e){var r=e;if(!QL(t,e)){if(qB(t))throw Error(gr(418));e=D0(r.nextSibling);var n=cu;e&&QL(t,e)?HW(n,r):(t.flags=t.flags&-4097|2,ys=!1,cu=t)}}else{if(qB(t))throw Error(gr(418));t.flags=t.flags&-4097|2,ys=!1,cu=t}}}function VL(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cu=t}function RN(t){if(t!==cu)return!1;if(!ys)return VL(t),ys=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!HB(t.type,t.memoizedProps)),e&&(e=su)){if(qB(t))throw $W(),Error(gr(418));for(;e;)HW(t,e),e=D0(e.nextSibling)}if(VL(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(gr(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){su=D0(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}su=null}}else su=cu?D0(t.stateNode.nextSibling):null;return!0}function $W(){for(var t=su;t;)t=D0(t.nextSibling)}function hv(){su=cu=null,ys=!1}function CO(t){Od===null?Od=[t]:Od.push(t)}var uhe=fA.ReactCurrentBatchConfig;function G1(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(gr(309));var n=r.stateNode}if(!n)throw Error(gr(147,t));var a=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(gr(284));if(!r._owner)throw Error(gr(290,t))}return t}function MN(t,e){throw t=Object.prototype.toString.call(e),Error(gr(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function HL(t){var e=t._init;return e(t._payload)}function GW(t){function e(v,y){if(t){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function r(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function a(v,y){return v=U0(v,y),v.index=0,v.sibling=null,v}function s(v,y,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,y,b,w){return y===null||y.tag!==6?(y=ZP(b,v.mode,w),y.return=v,y):(y=a(y,b),y.return=v,y)}function c(v,y,b,w){var j=b.type;return j===Sx?d(v,y,b.props.children,w,b.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===o0&&HL(j)===y.type)?(w=a(y,b.props),w.ref=G1(v,y,b),w.return=v,w):(w=M_(b.type,b.key,b.props,null,v.mode,w),w.ref=G1(v,y,b),w.return=v,w)}function u(v,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=e3(b,v.mode,w),y.return=v,y):(y=a(y,b.children||[]),y.return=v,y)}function d(v,y,b,w,j){return y===null||y.tag!==7?(y=xp(b,v.mode,w,j),y.return=v,y):(y=a(y,b),y.return=v,y)}function f(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ZP(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case SN:return b=M_(y.type,y.key,y.props,null,v.mode,b),b.ref=G1(v,null,y),b.return=v,b;case Ex:return y=e3(y,v.mode,b),y.return=v,y;case o0:var w=y._init;return f(v,w(y._payload),b)}if(Cy(y)||U1(y))return y=xp(y,v.mode,b,null),y.return=v,y;MN(v,y)}return null}function A(v,y,b,w){var j=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case SN:return b.key===j?c(v,y,b,w):null;case Ex:return b.key===j?u(v,y,b,w):null;case o0:return j=b._init,A(v,y,j(b._payload),w)}if(Cy(b)||U1(b))return j!==null?null:d(v,y,b,w,null);MN(v,b)}return null}function h(v,y,b,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(b)||null,l(y,v,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case SN:return v=v.get(w.key===null?b:w.key)||null,c(y,v,w,j);case Ex:return v=v.get(w.key===null?b:w.key)||null,u(y,v,w,j);case o0:var I=w._init;return h(v,y,b,I(w._payload),j)}if(Cy(w)||U1(w))return v=v.get(b)||null,d(y,v,w,j,null);MN(y,w)}return null}function m(v,y,b,w){for(var j=null,I=null,_=y,S=y=0,E=null;_!==null&&S<b.length;S++){_.index>S?(E=_,_=null):E=_.sibling;var F=A(v,_,b[S],w);if(F===null){_===null&&(_=E);break}t&&_&&F.alternate===null&&e(v,_),y=s(F,y,S),I===null?j=F:I.sibling=F,I=F,_=E}if(S===b.length)return r(v,_),ys&&Vm(v,S),j;if(_===null){for(;S<b.length;S++)_=f(v,b[S],w),_!==null&&(y=s(_,y,S),I===null?j=_:I.sibling=_,I=_);return ys&&Vm(v,S),j}for(_=n(v,_);S<b.length;S++)E=h(_,v,S,b[S],w),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?S:E.key),y=s(E,y,S),I===null?j=E:I.sibling=E,I=E);return t&&_.forEach(function(P){return e(v,P)}),ys&&Vm(v,S),j}function p(v,y,b,w){var j=U1(b);if(typeof j!="function")throw Error(gr(150));if(b=j.call(b),b==null)throw Error(gr(151));for(var I=j=null,_=y,S=y=0,E=null,F=b.next();_!==null&&!F.done;S++,F=b.next()){_.index>S?(E=_,_=null):E=_.sibling;var P=A(v,_,F.value,w);if(P===null){_===null&&(_=E);break}t&&_&&P.alternate===null&&e(v,_),y=s(P,y,S),I===null?j=P:I.sibling=P,I=P,_=E}if(F.done)return r(v,_),ys&&Vm(v,S),j;if(_===null){for(;!F.done;S++,F=b.next())F=f(v,F.value,w),F!==null&&(y=s(F,y,S),I===null?j=F:I.sibling=F,I=F);return ys&&Vm(v,S),j}for(_=n(v,_);!F.done;S++,F=b.next())F=h(_,v,S,F.value,w),F!==null&&(t&&F.alternate!==null&&_.delete(F.key===null?S:F.key),y=s(F,y,S),I===null?j=F:I.sibling=F,I=F);return t&&_.forEach(function(k){return e(v,k)}),ys&&Vm(v,S),j}function g(v,y,b,w){if(typeof b=="object"&&b!==null&&b.type===Sx&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case SN:e:{for(var j=b.key,I=y;I!==null;){if(I.key===j){if(j=b.type,j===Sx){if(I.tag===7){r(v,I.sibling),y=a(I,b.props.children),y.return=v,v=y;break e}}else if(I.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===o0&&HL(j)===I.type){r(v,I.sibling),y=a(I,b.props),y.ref=G1(v,I,b),y.return=v,v=y;break e}r(v,I);break}else e(v,I);I=I.sibling}b.type===Sx?(y=xp(b.props.children,v.mode,w,b.key),y.return=v,v=y):(w=M_(b.type,b.key,b.props,null,v.mode,w),w.ref=G1(v,y,b),w.return=v,v=w)}return o(v);case Ex:e:{for(I=b.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(v,y.sibling),y=a(y,b.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else e(v,y);y=y.sibling}y=e3(b,v.mode,w),y.return=v,v=y}return o(v);case o0:return I=b._init,g(v,y,I(b._payload),w)}if(Cy(b))return m(v,y,b,w);if(U1(b))return p(v,y,b,w);MN(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(v,y.sibling),y=a(y,b),y.return=v,v=y):(r(v,y),y=ZP(b,v.mode,w),y.return=v,v=y),o(v)):r(v,y)}return g}var Av=GW(!0),KW=GW(!1),jE=pm(null),PE=null,Ox=null,_O=null;function EO(){_O=Ox=PE=null}function SO(t){var e=jE.current;us(jE),t._currentValue=e}function WB(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Yx(t,e){PE=t,_O=Ox=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nc=!0),t.firstContext=null)}function od(t){var e=t._currentValue;if(_O!==t)if(t={context:t,memoizedValue:e,next:null},Ox===null){if(PE===null)throw Error(gr(308));Ox=t,PE.dependencies={lanes:0,firstContext:t}}else Ox=Ox.next=t;return e}var ip=null;function IO(t){ip===null?ip=[t]:ip.push(t)}function qW(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,IO(e)):(r.next=a.next,a.next=r),e.interleaved=r,Wh(t,n)}function Wh(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var l0=!1;function jO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zW(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function R0(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ea&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,Wh(t,r)}return a=n.interleaved,a===null?(e.next=e,IO(n)):(e.next=a.next,a.next=e),n.interleaved=e,Wh(t,r)}function T_(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,AO(t,r)}}function $L(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function BE(t,e,r,n){var a=t.updateQueue;l0=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;o=0,d=u=c=null,l=s;do{var A=l.lane,h=l.eventTime;if((n&A)===A){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,p=l;switch(A=e,h=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){f=m.call(h,f,A);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,A=typeof m=="function"?m.call(h,f,A):m,A==null)break e;f=Vs({},f,A);break e;case 2:l0=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,A=a.effects,A===null?a.effects=[l]:A.push(l))}else h={eventTime:h,lane:A,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=A;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;A=l,l=A.next,A.next=null,a.lastBaseUpdate=A,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);Mp|=o,t.lanes=o,t.memoizedState=f}}function GL(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(gr(191,a));a.call(n)}}}var sw={},Df=pm(sw),Gb=pm(sw),Kb=pm(sw);function op(t){if(t===sw)throw Error(gr(174));return t}function PO(t,e){switch(Ya(Kb,e),Ya(Gb,t),Ya(Df,sw),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jB(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jB(e,t)}us(Df),Ya(Df,e)}function mv(){us(Df),us(Gb),us(Kb)}function WW(t){op(Kb.current);var e=op(Df.current),r=jB(e,t.type);e!==r&&(Ya(Gb,t),Ya(Df,r))}function BO(t){Gb.current===t&&(us(Df),us(Gb))}var Rs=pm(0);function TE(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qP=[];function TO(){for(var t=0;t<qP.length;t++)qP[t]._workInProgressVersionPrimary=null;qP.length=0}var k_=fA.ReactCurrentDispatcher,zP=fA.ReactCurrentBatchConfig,Rp=0,Qs=null,Wi=null,Eo=null,kE=!1,eb=!1,qb=0,dhe=0;function dl(){throw Error(gr(321))}function kO(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Xd(t[r],e[r]))return!1;return!0}function FO(t,e,r,n,a,s){if(Rp=s,Qs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,k_.current=t===null||t.memoizedState===null?mhe:phe,t=r(n,a),eb){s=0;do{if(eb=!1,qb=0,25<=s)throw Error(gr(301));s+=1,Eo=Wi=null,e.updateQueue=null,k_.current=ghe,t=r(n,a)}while(eb)}if(k_.current=FE,e=Wi!==null&&Wi.next!==null,Rp=0,Eo=Wi=Qs=null,kE=!1,e)throw Error(gr(300));return t}function OO(){var t=qb!==0;return qb=0,t}function Cf(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Eo===null?Qs.memoizedState=Eo=t:Eo=Eo.next=t,Eo}function ld(){if(Wi===null){var t=Qs.alternate;t=t!==null?t.memoizedState:null}else t=Wi.next;var e=Eo===null?Qs.memoizedState:Eo.next;if(e!==null)Eo=e,Wi=t;else{if(t===null)throw Error(gr(310));Wi=t,t={memoizedState:Wi.memoizedState,baseState:Wi.baseState,baseQueue:Wi.baseQueue,queue:Wi.queue,next:null},Eo===null?Qs.memoizedState=Eo=t:Eo=Eo.next=t}return Eo}function zb(t,e){return typeof e=="function"?e(t):e}function WP(t){var e=ld(),r=e.queue;if(r===null)throw Error(gr(311));r.lastRenderedReducer=t;var n=Wi,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((Rp&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Qs.lanes|=d,Mp|=d}u=u.next}while(u!==null&&u!==s);c===null?o=n:c.next=l,Xd(n,e.memoizedState)||(Nc=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do s=a.lane,Qs.lanes|=s,Mp|=s,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function XP(t){var e=ld(),r=e.queue;if(r===null)throw Error(gr(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do s=t(s,o.action),o=o.next;while(o!==a);Xd(s,e.memoizedState)||(Nc=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function XW(){}function YW(t,e){var r=Qs,n=ld(),a=e(),s=!Xd(n.memoizedState,a);if(s&&(n.memoizedState=a,Nc=!0),n=n.queue,DO(eX.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Eo!==null&&Eo.memoizedState.tag&1){if(r.flags|=2048,Wb(9,ZW.bind(null,r,n,a,e),void 0,null),Bo===null)throw Error(gr(349));Rp&30||JW(r,e,a)}return a}function JW(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Qs.updateQueue,e===null?(e={lastEffect:null,stores:null},Qs.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function ZW(t,e,r,n){e.value=r,e.getSnapshot=n,tX(e)&&rX(t)}function eX(t,e,r){return r(function(){tX(e)&&rX(t)})}function tX(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Xd(t,r)}catch{return!0}}function rX(t){var e=Wh(t,1);e!==null&&$d(e,t,1,-1)}function KL(t){var e=Cf();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zb,lastRenderedState:t},e.queue=t,t=t.dispatch=Ahe.bind(null,Qs,t),[e.memoizedState,t]}function Wb(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Qs.updateQueue,e===null?(e={lastEffect:null,stores:null},Qs.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function nX(){return ld().memoizedState}function F_(t,e,r,n){var a=Cf();Qs.flags|=t,a.memoizedState=Wb(1|e,r,void 0,n===void 0?null:n)}function KI(t,e,r,n){var a=ld();n=n===void 0?null:n;var s=void 0;if(Wi!==null){var o=Wi.memoizedState;if(s=o.destroy,n!==null&&kO(n,o.deps)){a.memoizedState=Wb(e,r,s,n);return}}Qs.flags|=t,a.memoizedState=Wb(1|e,r,s,n)}function qL(t,e){return F_(8390656,8,t,e)}function DO(t,e){return KI(2048,8,t,e)}function aX(t,e){return KI(4,2,t,e)}function sX(t,e){return KI(4,4,t,e)}function iX(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oX(t,e,r){return r=r!=null?r.concat([t]):null,KI(4,4,iX.bind(null,e,t),r)}function RO(){}function lX(t,e){var r=ld();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&kO(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function cX(t,e){var r=ld();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&kO(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function uX(t,e,r){return Rp&21?(Xd(r,e)||(r=mW(),Qs.lanes|=r,Mp|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nc=!0),t.memoizedState=r)}function fhe(t,e){var r=Ta;Ta=r!==0&&4>r?r:4,t(!0);var n=zP.transition;zP.transition={};try{t(!1),e()}finally{Ta=r,zP.transition=n}}function dX(){return ld().memoizedState}function hhe(t,e,r){var n=L0(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},fX(t))hX(e,r);else if(r=qW(t,e,r,n),r!==null){var a=nc();$d(r,t,n,a),AX(r,e,n)}}function Ahe(t,e,r){var n=L0(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(fX(t))hX(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,Xd(l,o)){var c=e.interleaved;c===null?(a.next=a,IO(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=qW(t,e,a,n),r!==null&&(a=nc(),$d(r,t,n,a),AX(r,e,n))}}function fX(t){var e=t.alternate;return t===Qs||e!==null&&e===Qs}function hX(t,e){eb=kE=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function AX(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,AO(t,r)}}var FE={readContext:od,useCallback:dl,useContext:dl,useEffect:dl,useImperativeHandle:dl,useInsertionEffect:dl,useLayoutEffect:dl,useMemo:dl,useReducer:dl,useRef:dl,useState:dl,useDebugValue:dl,useDeferredValue:dl,useTransition:dl,useMutableSource:dl,useSyncExternalStore:dl,useId:dl,unstable_isNewReconciler:!1},mhe={readContext:od,useCallback:function(t,e){return Cf().memoizedState=[t,e===void 0?null:e],t},useContext:od,useEffect:qL,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,F_(4194308,4,iX.bind(null,e,t),r)},useLayoutEffect:function(t,e){return F_(4194308,4,t,e)},useInsertionEffect:function(t,e){return F_(4,2,t,e)},useMemo:function(t,e){var r=Cf();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Cf();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=hhe.bind(null,Qs,t),[n.memoizedState,t]},useRef:function(t){var e=Cf();return t={current:t},e.memoizedState=t},useState:KL,useDebugValue:RO,useDeferredValue:function(t){return Cf().memoizedState=t},useTransition:function(){var t=KL(!1),e=t[0];return t=fhe.bind(null,t[1]),Cf().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Qs,a=Cf();if(ys){if(r===void 0)throw Error(gr(407));r=r()}else{if(r=e(),Bo===null)throw Error(gr(349));Rp&30||JW(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,qL(eX.bind(null,n,s,t),[t]),n.flags|=2048,Wb(9,ZW.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Cf(),e=Bo.identifierPrefix;if(ys){var r=Sh,n=Eh;r=(n&~(1<<32-Hd(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=qb++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=dhe++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},phe={readContext:od,useCallback:lX,useContext:od,useEffect:DO,useImperativeHandle:oX,useInsertionEffect:aX,useLayoutEffect:sX,useMemo:cX,useReducer:WP,useRef:nX,useState:function(){return WP(zb)},useDebugValue:RO,useDeferredValue:function(t){var e=ld();return uX(e,Wi.memoizedState,t)},useTransition:function(){var t=WP(zb)[0],e=ld().memoizedState;return[t,e]},useMutableSource:XW,useSyncExternalStore:YW,useId:dX,unstable_isNewReconciler:!1},ghe={readContext:od,useCallback:lX,useContext:od,useEffect:DO,useImperativeHandle:oX,useInsertionEffect:aX,useLayoutEffect:sX,useMemo:cX,useReducer:XP,useRef:nX,useState:function(){return XP(zb)},useDebugValue:RO,useDeferredValue:function(t){var e=ld();return Wi===null?e.memoizedState=t:uX(e,Wi.memoizedState,t)},useTransition:function(){var t=XP(zb)[0],e=ld().memoizedState;return[t,e]},useMutableSource:XW,useSyncExternalStore:YW,useId:dX,unstable_isNewReconciler:!1};function kd(t,e){if(t&&t.defaultProps){e=Vs({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function XB(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Vs({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var qI={isMounted:function(t){return(t=t._reactInternals)?Ag(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=nc(),a=L0(t),s=Dh(n,a);s.payload=e,r!=null&&(s.callback=r),e=R0(t,s,a),e!==null&&($d(e,t,a,n),T_(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=nc(),a=L0(t),s=Dh(n,a);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=R0(t,s,a),e!==null&&($d(e,t,a,n),T_(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=nc(),n=L0(t),a=Dh(r,n);a.tag=2,e!=null&&(a.callback=e),e=R0(t,a,n),e!==null&&($d(e,t,n,r),T_(e,t,n))}};function zL(t,e,r,n,a,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qb(r,n)||!Qb(a,s):!0}function mX(t,e,r){var n=!1,a=J0,s=e.contextType;return typeof s=="object"&&s!==null?s=od(s):(a=Sc(e)?Op:Fl.current,n=e.contextTypes,s=(n=n!=null)?fv(t,a):J0),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qI,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function WL(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&qI.enqueueReplaceState(e,e.state,null)}function YB(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},jO(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=od(s):(s=Sc(e)?Op:Fl.current,a.context=fv(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(XB(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&qI.enqueueReplaceState(a,a.state,null),BE(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function pv(t,e){try{var r="",n=e;do r+=Gde(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function YP(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function JB(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var xhe=typeof WeakMap=="function"?WeakMap:Map;function pX(t,e,r){r=Dh(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){DE||(DE=!0,lT=n),JB(t,e)},r}function gX(t,e,r){r=Dh(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){JB(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){JB(t,e),typeof n!="function"&&(M0===null?M0=new Set([this]):M0.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function XL(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new xhe;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=The.bind(null,t,e,r),e.then(t,t))}function YL(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function JL(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Dh(-1,1),e.tag=2,R0(r,e,1))),r.lanes|=1),t)}var vhe=fA.ReactCurrentOwner,Nc=!1;function Yl(t,e,r,n){e.child=t===null?KW(e,null,r,n):Av(e,t.child,r,n)}function ZL(t,e,r,n,a){r=r.render;var s=e.ref;return Yx(e,a),n=FO(t,e,r,n,s,a),r=OO(),t!==null&&!Nc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Xh(t,e,a)):(ys&&r&&wO(e),e.flags|=1,Yl(t,e,n,a),e.child)}function eU(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!GO(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,xX(t,e,s,n,a)):(t=M_(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Qb,r(o,n)&&t.ref===e.ref)return Xh(t,e,a)}return e.flags|=1,t=U0(s,n),t.ref=e.ref,t.return=e,e.child=t}function xX(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(Qb(s,n)&&t.ref===e.ref)if(Nc=!1,e.pendingProps=n=s,(t.lanes&a)!==0)t.flags&131072&&(Nc=!0);else return e.lanes=t.lanes,Xh(t,e,a)}return ZB(t,e,r,n,a)}function vX(t,e,r){var n=e.pendingProps,a=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ya(Rx,Jc),Jc|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ya(Rx,Jc),Jc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ya(Rx,Jc),Jc|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ya(Rx,Jc),Jc|=n;return Yl(t,e,a,r),e.child}function yX(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ZB(t,e,r,n,a){var s=Sc(r)?Op:Fl.current;return s=fv(e,s),Yx(e,a),r=FO(t,e,r,n,s,a),n=OO(),t!==null&&!Nc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Xh(t,e,a)):(ys&&n&&wO(e),e.flags|=1,Yl(t,e,r,a),e.child)}function tU(t,e,r,n,a){if(Sc(r)){var s=!0;EE(e)}else s=!1;if(Yx(e,a),e.stateNode===null)O_(t,e),mX(e,r,n),YB(e,r,n,a),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=od(u):(u=Sc(r)?Op:Fl.current,u=fv(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&WL(e,o,n,u),l0=!1;var A=e.memoizedState;o.state=A,BE(e,n,o,a),c=e.memoizedState,l!==n||A!==c||Ec.current||l0?(typeof d=="function"&&(XB(e,r,d,n),c=e.memoizedState),(l=l0||zL(e,r,l,n,A,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,zW(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:kd(e.type,l),o.props=u,f=e.pendingProps,A=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=od(c):(c=Sc(r)?Op:Fl.current,c=fv(e,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||A!==c)&&WL(e,o,n,c),l0=!1,A=e.memoizedState,o.state=A,BE(e,n,o,a);var m=e.memoizedState;l!==f||A!==m||Ec.current||l0?(typeof h=="function"&&(XB(e,r,h,n),m=e.memoizedState),(u=l0||zL(e,r,u,n,A,m,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),n=!1)}return eT(t,e,r,n,s,a)}function eT(t,e,r,n,a,s){yX(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return a&&UL(e,r,!1),Xh(t,e,s);n=e.stateNode,vhe.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Av(e,t.child,null,s),e.child=Av(e,null,l,s)):Yl(t,e,l,s),e.memoizedState=n.state,a&&UL(e,r,!0),e.child}function bX(t){var e=t.stateNode;e.pendingContext?LL(t,e.pendingContext,e.pendingContext!==e.context):e.context&&LL(t,e.context,!1),PO(t,e.containerInfo)}function rU(t,e,r,n,a){return hv(),CO(a),e.flags|=256,Yl(t,e,r,n),e.child}var tT={dehydrated:null,treeContext:null,retryLane:0};function rT(t){return{baseLanes:t,cachePool:null,transitions:null}}function wX(t,e,r){var n=e.pendingProps,a=Rs.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Ya(Rs,a&1),t===null)return zB(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=XI(o,n,0,null),t=xp(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rT(r),e.memoizedState=tT,t):MO(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return yhe(t,e,o,n,l,a,r);if(s){s=n.fallback,o=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=U0(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=U0(l,s):(s=xp(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?rT(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=tT,n}return s=t.child,t=s.sibling,n=U0(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function MO(t,e){return e=XI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function LN(t,e,r,n){return n!==null&&CO(n),Av(e,t.child,null,r),t=MO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yhe(t,e,r,n,a,s,o){if(r)return e.flags&256?(e.flags&=-257,n=YP(Error(gr(422))),LN(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,a=e.mode,n=XI({mode:"visible",children:n.children},a,0,null),s=xp(s,a,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Av(e,t.child,null,o),e.child.memoizedState=rT(o),e.memoizedState=tT,s);if(!(e.mode&1))return LN(t,e,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(gr(419)),n=YP(s,n,void 0),LN(t,e,o,n)}if(l=(o&t.childLanes)!==0,Nc||l){if(n=Bo,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,Wh(t,a),$d(n,t,a,-1))}return $O(),n=YP(Error(gr(421))),LN(t,e,o,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=khe.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,su=D0(a.nextSibling),cu=e,ys=!0,Od=null,t!==null&&(qu[zu++]=Eh,qu[zu++]=Sh,qu[zu++]=Dp,Eh=t.id,Sh=t.overflow,Dp=e),e=MO(e,n.children),e.flags|=4096,e)}function nU(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),WB(t.return,e,r)}function JP(t,e,r,n,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function NX(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;if(Yl(t,e,n.children,r),n=Rs.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nU(t,r,e);else if(t.tag===19)nU(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ya(Rs,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&TE(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),JP(e,!1,a,r,s);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&TE(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}JP(e,!0,r,null,s);break;case"together":JP(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function O_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xh(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Mp|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(gr(153));if(e.child!==null){for(t=e.child,r=U0(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=U0(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function bhe(t,e,r){switch(e.tag){case 3:bX(e),hv();break;case 5:WW(e);break;case 1:Sc(e.type)&&EE(e);break;case 4:PO(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;Ya(jE,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ya(Rs,Rs.current&1),e.flags|=128,null):r&e.child.childLanes?wX(t,e,r):(Ya(Rs,Rs.current&1),t=Xh(t,e,r),t!==null?t.sibling:null);Ya(Rs,Rs.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return NX(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ya(Rs,Rs.current),n)break;return null;case 22:case 23:return e.lanes=0,vX(t,e,r)}return Xh(t,e,r)}var CX,nT,_X,EX;CX=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};nT=function(){};_X=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,op(Df.current);var s=null;switch(r){case"input":a=_B(t,a),n=_B(t,n),s=[];break;case"select":a=Vs({},a,{value:void 0}),n=Vs({},n,{value:void 0}),s=[];break;case"textarea":a=IB(t,a),n=IB(t,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=CE)}PB(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fb.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fb.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&as("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};EX=function(t,e,r,n){r!==n&&(e.flags|=4)};function K1(t,e){if(!ys)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function fl(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function whe(t,e,r){var n=e.pendingProps;switch(NO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fl(e),null;case 1:return Sc(e.type)&&_E(),fl(e),null;case 3:return n=e.stateNode,mv(),us(Ec),us(Fl),TO(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(RN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Od!==null&&(dT(Od),Od=null))),nT(t,e),fl(e),null;case 5:BO(e);var a=op(Kb.current);if(r=e.type,t!==null&&e.stateNode!=null)_X(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(gr(166));return fl(e),null}if(t=op(Df.current),RN(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[_f]=e,n[$b]=s,t=(e.mode&1)!==0,r){case"dialog":as("cancel",n),as("close",n);break;case"iframe":case"object":case"embed":as("load",n);break;case"video":case"audio":for(a=0;a<Ey.length;a++)as(Ey[a],n);break;case"source":as("error",n);break;case"img":case"image":case"link":as("error",n),as("load",n);break;case"details":as("toggle",n);break;case"input":fL(n,s),as("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},as("invalid",n);break;case"textarea":AL(n,s),as("invalid",n)}PB(r,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&DN(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&DN(n.textContent,l,t),a=["children",""+l]):Fb.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&as("scroll",n)}switch(r){case"input":IN(n),hL(n,s,!0);break;case"textarea":IN(n),mL(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=CE)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=eW(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[_f]=e,t[$b]=n,CX(t,e,!1,!1),e.stateNode=t;e:{switch(o=BB(r,n),r){case"dialog":as("cancel",t),as("close",t),a=n;break;case"iframe":case"object":case"embed":as("load",t),a=n;break;case"video":case"audio":for(a=0;a<Ey.length;a++)as(Ey[a],t);a=n;break;case"source":as("error",t),a=n;break;case"img":case"image":case"link":as("error",t),as("load",t),a=n;break;case"details":as("toggle",t),a=n;break;case"input":fL(t,n),a=_B(t,n),as("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Vs({},n,{value:void 0}),as("invalid",t);break;case"textarea":AL(t,n),a=IB(t,n),as("invalid",t);break;default:a=n}PB(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?nW(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&tW(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ob(t,c):typeof c=="number"&&Ob(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fb.hasOwnProperty(s)?c!=null&&s==="onScroll"&&as("scroll",t):c!=null&&lO(t,s,c,o))}switch(r){case"input":IN(t),hL(t,n,!1);break;case"textarea":IN(t),mL(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Y0(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?qx(t,!!n.multiple,s,!1):n.defaultValue!=null&&qx(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=CE)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fl(e),null;case 6:if(t&&e.stateNode!=null)EX(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(gr(166));if(r=op(Kb.current),op(Df.current),RN(e)){if(n=e.stateNode,r=e.memoizedProps,n[_f]=e,(s=n.nodeValue!==r)&&(t=cu,t!==null))switch(t.tag){case 3:DN(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&DN(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[_f]=e,e.stateNode=n}return fl(e),null;case 13:if(us(Rs),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ys&&su!==null&&e.mode&1&&!(e.flags&128))$W(),hv(),e.flags|=98560,s=!1;else if(s=RN(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(gr(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(gr(317));s[_f]=e}else hv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fl(e),s=!1}else Od!==null&&(dT(Od),Od=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Rs.current&1?ao===0&&(ao=3):$O())),e.updateQueue!==null&&(e.flags|=4),fl(e),null);case 4:return mv(),nT(t,e),t===null&&Vb(e.stateNode.containerInfo),fl(e),null;case 10:return SO(e.type._context),fl(e),null;case 17:return Sc(e.type)&&_E(),fl(e),null;case 19:if(us(Rs),s=e.memoizedState,s===null)return fl(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)K1(s,!1);else{if(ao!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=TE(t),o!==null){for(e.flags|=128,K1(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ya(Rs,Rs.current&1|2),e.child}t=t.sibling}s.tail!==null&&xi()>gv&&(e.flags|=128,n=!0,K1(s,!1),e.lanes=4194304)}else{if(!n)if(t=TE(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),K1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ys)return fl(e),null}else 2*xi()-s.renderingStartTime>gv&&r!==1073741824&&(e.flags|=128,n=!0,K1(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=xi(),e.sibling=null,r=Rs.current,Ya(Rs,n?r&1|2:r&1),e):(fl(e),null);case 22:case 23:return HO(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Jc&1073741824&&(fl(e),e.subtreeFlags&6&&(e.flags|=8192)):fl(e),null;case 24:return null;case 25:return null}throw Error(gr(156,e.tag))}function Nhe(t,e){switch(NO(e),e.tag){case 1:return Sc(e.type)&&_E(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mv(),us(Ec),us(Fl),TO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return BO(e),null;case 13:if(us(Rs),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(gr(340));hv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return us(Rs),null;case 4:return mv(),null;case 10:return SO(e.type._context),null;case 22:case 23:return HO(),null;case 24:return null;default:return null}}var UN=!1,Il=!1,Che=typeof WeakSet=="function"?WeakSet:Set,Lr=null;function Dx(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ri(t,e,n)}else r.current=null}function aT(t,e,r){try{r()}catch(n){ri(t,e,n)}}var aU=!1;function _he(t,e){if(QB=bE,t=BW(),bO(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=t,A=null;t:for(;;){for(var h;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==s||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)A=f,f=h;for(;;){if(f===t)break t;if(A===r&&++u===a&&(l=o),A===s&&++d===n&&(c=o),(h=f.nextSibling)!==null)break;f=A,A=f.parentNode}f=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(VB={focusedElem:t,selectionRange:r},bE=!1,Lr=e;Lr!==null;)if(e=Lr,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Lr=t;else for(;Lr!==null;){e=Lr;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?p:kd(e.type,p),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(gr(163))}}catch(w){ri(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Lr=t;break}Lr=e.return}return m=aU,aU=!1,m}function tb(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&aT(e,r,s)}a=a.next}while(a!==n)}}function zI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function sT(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function SX(t){var e=t.alternate;e!==null&&(t.alternate=null,SX(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_f],delete e[$b],delete e[GB],delete e[ohe],delete e[lhe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function IX(t){return t.tag===5||t.tag===3||t.tag===4}function sU(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||IX(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function iT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=CE));else if(n!==4&&(t=t.child,t!==null))for(iT(t,e,r),t=t.sibling;t!==null;)iT(t,e,r),t=t.sibling}function oT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(oT(t,e,r),t=t.sibling;t!==null;)oT(t,e,r),t=t.sibling}var Wo=null,Fd=!1;function GA(t,e,r){for(r=r.child;r!==null;)jX(t,e,r),r=r.sibling}function jX(t,e,r){if(Of&&typeof Of.onCommitFiberUnmount=="function")try{Of.onCommitFiberUnmount(UI,r)}catch{}switch(r.tag){case 5:Il||Dx(r,e);case 6:var n=Wo,a=Fd;Wo=null,GA(t,e,r),Wo=n,Fd=a,Wo!==null&&(Fd?(t=Wo,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Wo.removeChild(r.stateNode));break;case 18:Wo!==null&&(Fd?(t=Wo,r=r.stateNode,t.nodeType===8?GP(t.parentNode,r):t.nodeType===1&&GP(t,r),Lb(t)):GP(Wo,r.stateNode));break;case 4:n=Wo,a=Fd,Wo=r.stateNode.containerInfo,Fd=!0,GA(t,e,r),Wo=n,Fd=a;break;case 0:case 11:case 14:case 15:if(!Il&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&aT(r,e,o),a=a.next}while(a!==n)}GA(t,e,r);break;case 1:if(!Il&&(Dx(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ri(r,e,l)}GA(t,e,r);break;case 21:GA(t,e,r);break;case 22:r.mode&1?(Il=(n=Il)||r.memoizedState!==null,GA(t,e,r),Il=n):GA(t,e,r);break;default:GA(t,e,r)}}function iU(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Che),e.forEach(function(n){var a=Fhe.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Cd(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Wo=l.stateNode,Fd=!1;break e;case 3:Wo=l.stateNode.containerInfo,Fd=!0;break e;case 4:Wo=l.stateNode.containerInfo,Fd=!0;break e}l=l.return}if(Wo===null)throw Error(gr(160));jX(s,o,a),Wo=null,Fd=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){ri(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)PX(e,t),e=e.sibling}function PX(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cd(e,t),mf(t),n&4){try{tb(3,t,t.return),zI(3,t)}catch(p){ri(t,t.return,p)}try{tb(5,t,t.return)}catch(p){ri(t,t.return,p)}}break;case 1:Cd(e,t),mf(t),n&512&&r!==null&&Dx(r,r.return);break;case 5:if(Cd(e,t),mf(t),n&512&&r!==null&&Dx(r,r.return),t.flags&32){var a=t.stateNode;try{Ob(a,"")}catch(p){ri(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Jz(a,s),BB(l,o);var u=BB(l,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?nW(a,f):d==="dangerouslySetInnerHTML"?tW(a,f):d==="children"?Ob(a,f):lO(a,d,f,u)}switch(l){case"input":EB(a,s);break;case"textarea":Zz(a,s);break;case"select":var A=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?qx(a,!!s.multiple,h,!1):A!==!!s.multiple&&(s.defaultValue!=null?qx(a,!!s.multiple,s.defaultValue,!0):qx(a,!!s.multiple,s.multiple?[]:"",!1))}a[$b]=s}catch(p){ri(t,t.return,p)}}break;case 6:if(Cd(e,t),mf(t),n&4){if(t.stateNode===null)throw Error(gr(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(p){ri(t,t.return,p)}}break;case 3:if(Cd(e,t),mf(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Lb(e.containerInfo)}catch(p){ri(t,t.return,p)}break;case 4:Cd(e,t),mf(t);break;case 13:Cd(e,t),mf(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(QO=xi())),n&4&&iU(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Il=(u=Il)||d,Cd(e,t),Il=u):Cd(e,t),mf(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Lr=t,d=t.child;d!==null;){for(f=Lr=d;Lr!==null;){switch(A=Lr,h=A.child,A.tag){case 0:case 11:case 14:case 15:tb(4,A,A.return);break;case 1:Dx(A,A.return);var m=A.stateNode;if(typeof m.componentWillUnmount=="function"){n=A,r=A.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){ri(n,r,p)}}break;case 5:Dx(A,A.return);break;case 22:if(A.memoizedState!==null){lU(f);continue}}h!==null?(h.return=A,Lr=h):lU(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=rW("display",o))}catch(p){ri(t,t.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){ri(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Cd(e,t),mf(t),n&4&&iU(t);break;case 21:break;default:Cd(e,t),mf(t)}}function mf(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(IX(r)){var n=r;break e}r=r.return}throw Error(gr(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Ob(a,""),n.flags&=-33);var s=sU(t);oT(t,s,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=sU(t);iT(t,l,o);break;default:throw Error(gr(161))}}catch(c){ri(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ehe(t,e,r){Lr=t,BX(t)}function BX(t,e,r){for(var n=(t.mode&1)!==0;Lr!==null;){var a=Lr,s=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||UN;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Il;l=UN;var u=Il;if(UN=o,(Il=c)&&!u)for(Lr=a;Lr!==null;)o=Lr,c=o.child,o.tag===22&&o.memoizedState!==null?cU(a):c!==null?(c.return=o,Lr=c):cU(a);for(;s!==null;)Lr=s,BX(s),s=s.sibling;Lr=a,UN=l,Il=u}oU(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,Lr=s):oU(t)}}function oU(t){for(;Lr!==null;){var e=Lr;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Il||zI(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Il)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:kd(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&GL(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}GL(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Lb(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(gr(163))}Il||e.flags&512&&sT(e)}catch(A){ri(e,e.return,A)}}if(e===t){Lr=null;break}if(r=e.sibling,r!==null){r.return=e.return,Lr=r;break}Lr=e.return}}function lU(t){for(;Lr!==null;){var e=Lr;if(e===t){Lr=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Lr=r;break}Lr=e.return}}function cU(t){for(;Lr!==null;){var e=Lr;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{zI(4,e)}catch(c){ri(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){ri(e,a,c)}}var s=e.return;try{sT(e)}catch(c){ri(e,s,c)}break;case 5:var o=e.return;try{sT(e)}catch(c){ri(e,o,c)}}}catch(c){ri(e,e.return,c)}if(e===t){Lr=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Lr=l;break}Lr=e.return}}var She=Math.ceil,OE=fA.ReactCurrentDispatcher,LO=fA.ReactCurrentOwner,rd=fA.ReactCurrentBatchConfig,ea=0,Bo=null,Fi=null,il=0,Jc=0,Rx=pm(0),ao=0,Xb=null,Mp=0,WI=0,UO=0,rb=null,bc=null,QO=0,gv=1/0,yh=null,DE=!1,lT=null,M0=null,QN=!1,C0=null,RE=0,nb=0,cT=null,D_=-1,R_=0;function nc(){return ea&6?xi():D_!==-1?D_:D_=xi()}function L0(t){return t.mode&1?ea&2&&il!==0?il&-il:uhe.transition!==null?(R_===0&&(R_=mW()),R_):(t=Ta,t!==0||(t=window.event,t=t===void 0?16:wW(t.type)),t):1}function $d(t,e,r,n){if(50<nb)throw nb=0,cT=null,Error(gr(185));rw(t,r,n),(!(ea&2)||t!==Bo)&&(t===Bo&&(!(ea&2)&&(WI|=r),ao===4&&A0(t,il)),Ic(t,n),r===1&&ea===0&&!(e.mode&1)&&(gv=xi()+500,GI&&gm()))}function Ic(t,e){var r=t.callbackNode;ufe(t,e);var n=yE(t,t===Bo?il:0);if(n===0)r!==null&&xL(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&xL(r),e===1)t.tag===0?che(uU.bind(null,t)):QW(uU.bind(null,t)),she(function(){!(ea&6)&&gm()}),r=null;else{switch(pW(n)){case 1:r=hO;break;case 4:r=hW;break;case 16:r=vE;break;case 536870912:r=AW;break;default:r=vE}r=LX(r,TX.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function TX(t,e){if(D_=-1,R_=0,ea&6)throw Error(gr(327));var r=t.callbackNode;if(Jx()&&t.callbackNode!==r)return null;var n=yE(t,t===Bo?il:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ME(t,n);else{e=n;var a=ea;ea|=2;var s=FX();(Bo!==t||il!==e)&&(yh=null,gv=xi()+500,gp(t,e));do try{Phe();break}catch(l){kX(t,l)}while(!0);EO(),OE.current=s,ea=a,Fi!==null?e=0:(Bo=null,il=0,e=ao)}if(e!==0){if(e===2&&(a=DB(t),a!==0&&(n=a,e=uT(t,a))),e===1)throw r=Xb,gp(t,0),A0(t,n),Ic(t,xi()),r;if(e===6)A0(t,n);else{if(a=t.current.alternate,!(n&30)&&!Ihe(a)&&(e=ME(t,n),e===2&&(s=DB(t),s!==0&&(n=s,e=uT(t,s))),e===1))throw r=Xb,gp(t,0),A0(t,n),Ic(t,xi()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(gr(345));case 2:Hm(t,bc,yh);break;case 3:if(A0(t,n),(n&130023424)===n&&(e=QO+500-xi(),10<e)){if(yE(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){nc(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=$B(Hm.bind(null,t,bc,yh),e);break}Hm(t,bc,yh);break;case 4:if(A0(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var o=31-Hd(n);s=1<<o,o=e[o],o>a&&(a=o),n&=~s}if(n=a,n=xi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*She(n/1960))-n,10<n){t.timeoutHandle=$B(Hm.bind(null,t,bc,yh),n);break}Hm(t,bc,yh);break;case 5:Hm(t,bc,yh);break;default:throw Error(gr(329))}}}return Ic(t,xi()),t.callbackNode===r?TX.bind(null,t):null}function uT(t,e){var r=rb;return t.current.memoizedState.isDehydrated&&(gp(t,e).flags|=256),t=ME(t,e),t!==2&&(e=bc,bc=r,e!==null&&dT(e)),t}function dT(t){bc===null?bc=t:bc.push.apply(bc,t)}function Ihe(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!Xd(s(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function A0(t,e){for(e&=~UO,e&=~WI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Hd(e),n=1<<r;t[r]=-1,e&=~n}}function uU(t){if(ea&6)throw Error(gr(327));Jx();var e=yE(t,0);if(!(e&1))return Ic(t,xi()),null;var r=ME(t,e);if(t.tag!==0&&r===2){var n=DB(t);n!==0&&(e=n,r=uT(t,n))}if(r===1)throw r=Xb,gp(t,0),A0(t,e),Ic(t,xi()),r;if(r===6)throw Error(gr(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hm(t,bc,yh),Ic(t,xi()),null}function VO(t,e){var r=ea;ea|=1;try{return t(e)}finally{ea=r,ea===0&&(gv=xi()+500,GI&&gm())}}function Lp(t){C0!==null&&C0.tag===0&&!(ea&6)&&Jx();var e=ea;ea|=1;var r=rd.transition,n=Ta;try{if(rd.transition=null,Ta=1,t)return t()}finally{Ta=n,rd.transition=r,ea=e,!(ea&6)&&gm()}}function HO(){Jc=Rx.current,us(Rx)}function gp(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,ahe(r)),Fi!==null)for(r=Fi.return;r!==null;){var n=r;switch(NO(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&_E();break;case 3:mv(),us(Ec),us(Fl),TO();break;case 5:BO(n);break;case 4:mv();break;case 13:us(Rs);break;case 19:us(Rs);break;case 10:SO(n.type._context);break;case 22:case 23:HO()}r=r.return}if(Bo=t,Fi=t=U0(t.current,null),il=Jc=e,ao=0,Xb=null,UO=WI=Mp=0,bc=rb=null,ip!==null){for(e=0;e<ip.length;e++)if(r=ip[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=a,n.next=o}r.pending=n}ip=null}return t}function kX(t,e){do{var r=Fi;try{if(EO(),k_.current=FE,kE){for(var n=Qs.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}kE=!1}if(Rp=0,Eo=Wi=Qs=null,eb=!1,qb=0,LO.current=null,r===null||r.return===null){ao=1,Xb=e,Fi=null;break}e:{var s=t,o=r.return,l=r,c=e;if(e=il,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var A=d.alternate;A?(d.updateQueue=A.updateQueue,d.memoizedState=A.memoizedState,d.lanes=A.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=YL(o);if(h!==null){h.flags&=-257,JL(h,o,l,s,e),h.mode&1&&XL(s,u,e),e=h,c=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(c),e.updateQueue=p}else m.add(c);break e}else{if(!(e&1)){XL(s,u,e),$O();break e}c=Error(gr(426))}}else if(ys&&l.mode&1){var g=YL(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),JL(g,o,l,s,e),CO(pv(c,l));break e}}s=c=pv(c,l),ao!==4&&(ao=2),rb===null?rb=[s]:rb.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=pX(s,c,e);$L(s,v);break e;case 1:l=c;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(M0===null||!M0.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=gX(s,l,e);$L(s,w);break e}}s=s.return}while(s!==null)}DX(r)}catch(j){e=j,Fi===r&&r!==null&&(Fi=r=r.return);continue}break}while(!0)}function FX(){var t=OE.current;return OE.current=FE,t===null?FE:t}function $O(){(ao===0||ao===3||ao===2)&&(ao=4),Bo===null||!(Mp&268435455)&&!(WI&268435455)||A0(Bo,il)}function ME(t,e){var r=ea;ea|=2;var n=FX();(Bo!==t||il!==e)&&(yh=null,gp(t,e));do try{jhe();break}catch(a){kX(t,a)}while(!0);if(EO(),ea=r,OE.current=n,Fi!==null)throw Error(gr(261));return Bo=null,il=0,ao}function jhe(){for(;Fi!==null;)OX(Fi)}function Phe(){for(;Fi!==null&&!tfe();)OX(Fi)}function OX(t){var e=MX(t.alternate,t,Jc);t.memoizedProps=t.pendingProps,e===null?DX(t):Fi=e,LO.current=null}function DX(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Nhe(r,e),r!==null){r.flags&=32767,Fi=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ao=6,Fi=null;return}}else if(r=whe(r,e,Jc),r!==null){Fi=r;return}if(e=e.sibling,e!==null){Fi=e;return}Fi=e=t}while(e!==null);ao===0&&(ao=5)}function Hm(t,e,r){var n=Ta,a=rd.transition;try{rd.transition=null,Ta=1,Bhe(t,e,r,n)}finally{rd.transition=a,Ta=n}return null}function Bhe(t,e,r,n){do Jx();while(C0!==null);if(ea&6)throw Error(gr(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(gr(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(dfe(t,s),t===Bo&&(Fi=Bo=null,il=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||QN||(QN=!0,LX(vE,function(){return Jx(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=rd.transition,rd.transition=null;var o=Ta;Ta=1;var l=ea;ea|=4,LO.current=null,_he(t,r),PX(r,t),Yfe(VB),bE=!!QB,VB=QB=null,t.current=r,Ehe(r),rfe(),ea=l,Ta=o,rd.transition=s}else t.current=r;if(QN&&(QN=!1,C0=t,RE=a),s=t.pendingLanes,s===0&&(M0=null),sfe(r.stateNode),Ic(t,xi()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(DE)throw DE=!1,t=lT,lT=null,t;return RE&1&&t.tag!==0&&Jx(),s=t.pendingLanes,s&1?t===cT?nb++:(nb=0,cT=t):nb=0,gm(),null}function Jx(){if(C0!==null){var t=pW(RE),e=rd.transition,r=Ta;try{if(rd.transition=null,Ta=16>t?16:t,C0===null)var n=!1;else{if(t=C0,C0=null,RE=0,ea&6)throw Error(gr(331));var a=ea;for(ea|=4,Lr=t.current;Lr!==null;){var s=Lr,o=s.child;if(Lr.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Lr=u;Lr!==null;){var d=Lr;switch(d.tag){case 0:case 11:case 15:tb(8,d,s)}var f=d.child;if(f!==null)f.return=d,Lr=f;else for(;Lr!==null;){d=Lr;var A=d.sibling,h=d.return;if(SX(d),d===u){Lr=null;break}if(A!==null){A.return=h,Lr=A;break}Lr=h}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Lr=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Lr=o;else e:for(;Lr!==null;){if(s=Lr,s.flags&2048)switch(s.tag){case 0:case 11:case 15:tb(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Lr=v;break e}Lr=s.return}}var y=t.current;for(Lr=y;Lr!==null;){o=Lr;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Lr=b;else e:for(o=y;Lr!==null;){if(l=Lr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:zI(9,l)}}catch(j){ri(l,l.return,j)}if(l===o){Lr=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Lr=w;break e}Lr=l.return}}if(ea=a,gm(),Of&&typeof Of.onPostCommitFiberRoot=="function")try{Of.onPostCommitFiberRoot(UI,t)}catch{}n=!0}return n}finally{Ta=r,rd.transition=e}}return!1}function dU(t,e,r){e=pv(r,e),e=pX(t,e,1),t=R0(t,e,1),e=nc(),t!==null&&(rw(t,1,e),Ic(t,e))}function ri(t,e,r){if(t.tag===3)dU(t,t,r);else for(;e!==null;){if(e.tag===3){dU(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(M0===null||!M0.has(n))){t=pv(r,t),t=gX(e,t,1),e=R0(e,t,1),t=nc(),e!==null&&(rw(e,1,t),Ic(e,t));break}}e=e.return}}function The(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=nc(),t.pingedLanes|=t.suspendedLanes&r,Bo===t&&(il&r)===r&&(ao===4||ao===3&&(il&130023424)===il&&500>xi()-QO?gp(t,0):UO|=r),Ic(t,e)}function RX(t,e){e===0&&(t.mode&1?(e=BN,BN<<=1,!(BN&130023424)&&(BN=4194304)):e=1);var r=nc();t=Wh(t,e),t!==null&&(rw(t,e,r),Ic(t,r))}function khe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),RX(t,r)}function Fhe(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(gr(314))}n!==null&&n.delete(e),RX(t,r)}var MX;MX=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ec.current)Nc=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Nc=!1,bhe(t,e,r);Nc=!!(t.flags&131072)}else Nc=!1,ys&&e.flags&1048576&&VW(e,IE,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;O_(t,e),t=e.pendingProps;var a=fv(e,Fl.current);Yx(e,r),a=FO(null,e,n,t,a,r);var s=OO();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sc(n)?(s=!0,EE(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,jO(e),a.updater=qI,e.stateNode=a,a._reactInternals=e,YB(e,n,t,r),e=eT(null,e,n,!0,s,r)):(e.tag=0,ys&&s&&wO(e),Yl(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(O_(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Dhe(n),t=kd(n,t),a){case 0:e=ZB(null,e,n,t,r);break e;case 1:e=tU(null,e,n,t,r);break e;case 11:e=ZL(null,e,n,t,r);break e;case 14:e=eU(null,e,n,kd(n.type,t),r);break e}throw Error(gr(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:kd(n,a),ZB(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:kd(n,a),tU(t,e,n,a,r);case 3:e:{if(bX(e),t===null)throw Error(gr(387));n=e.pendingProps,s=e.memoizedState,a=s.element,zW(t,e),BE(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=pv(Error(gr(423)),e),e=rU(t,e,n,r,a);break e}else if(n!==a){a=pv(Error(gr(424)),e),e=rU(t,e,n,r,a);break e}else for(su=D0(e.stateNode.containerInfo.firstChild),cu=e,ys=!0,Od=null,r=KW(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hv(),n===a){e=Xh(t,e,r);break e}Yl(t,e,n,r)}e=e.child}return e;case 5:return WW(e),t===null&&zB(e),n=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,o=a.children,HB(n,a)?o=null:s!==null&&HB(n,s)&&(e.flags|=32),yX(t,e),Yl(t,e,o,r),e.child;case 6:return t===null&&zB(e),null;case 13:return wX(t,e,r);case 4:return PO(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Av(e,null,n,r):Yl(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:kd(n,a),ZL(t,e,n,a,r);case 7:return Yl(t,e,e.pendingProps,r),e.child;case 8:return Yl(t,e,e.pendingProps.children,r),e.child;case 12:return Yl(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,s=e.memoizedProps,o=a.value,Ya(jE,n._currentValue),n._currentValue=o,s!==null)if(Xd(s.value,o)){if(s.children===a.children&&!Ec.current){e=Xh(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Dh(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),WB(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(gr(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),WB(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Yl(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,Yx(e,r),a=od(a),n=n(a),e.flags|=1,Yl(t,e,n,r),e.child;case 14:return n=e.type,a=kd(n,e.pendingProps),a=kd(n.type,a),eU(t,e,n,a,r);case 15:return xX(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:kd(n,a),O_(t,e),e.tag=1,Sc(n)?(t=!0,EE(e)):t=!1,Yx(e,r),mX(e,n,a),YB(e,n,a,r),eT(null,e,n,!0,t,r);case 19:return NX(t,e,r);case 22:return vX(t,e,r)}throw Error(gr(156,e.tag))};function LX(t,e){return fW(t,e)}function Ohe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xu(t,e,r,n){return new Ohe(t,e,r,n)}function GO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dhe(t){if(typeof t=="function")return GO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uO)return 11;if(t===dO)return 14}return 2}function U0(t,e){var r=t.alternate;return r===null?(r=Xu(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function M_(t,e,r,n,a,s){var o=2;if(n=t,typeof t=="function")GO(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Sx:return xp(r.children,a,s,e);case cO:o=8,a|=8;break;case bB:return t=Xu(12,r,e,a|2),t.elementType=bB,t.lanes=s,t;case wB:return t=Xu(13,r,e,a),t.elementType=wB,t.lanes=s,t;case NB:return t=Xu(19,r,e,a),t.elementType=NB,t.lanes=s,t;case Wz:return XI(r,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qz:o=10;break e;case zz:o=9;break e;case uO:o=11;break e;case dO:o=14;break e;case o0:o=16,n=null;break e}throw Error(gr(130,t==null?t:typeof t,""))}return e=Xu(o,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function xp(t,e,r,n){return t=Xu(7,t,n,e),t.lanes=r,t}function XI(t,e,r,n){return t=Xu(22,t,n,e),t.elementType=Wz,t.lanes=r,t.stateNode={isHidden:!1},t}function ZP(t,e,r){return t=Xu(6,t,null,e),t.lanes=r,t}function e3(t,e,r){return e=Xu(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Rhe(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=FP(0),this.expirationTimes=FP(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=FP(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function KO(t,e,r,n,a,s,o,l,c){return t=new Rhe(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xu(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},jO(s),t}function Mhe(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ex,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function UX(t){if(!t)return J0;t=t._reactInternals;e:{if(Ag(t)!==t||t.tag!==1)throw Error(gr(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(gr(171))}if(t.tag===1){var r=t.type;if(Sc(r))return UW(t,r,e)}return e}function QX(t,e,r,n,a,s,o,l,c){return t=KO(r,n,!0,t,a,s,o,l,c),t.context=UX(null),r=t.current,n=nc(),a=L0(r),s=Dh(n,a),s.callback=e??null,R0(r,s,a),t.current.lanes=a,rw(t,a,n),Ic(t,n),t}function YI(t,e,r,n){var a=e.current,s=nc(),o=L0(a);return r=UX(r),e.context===null?e.context=r:e.pendingContext=r,e=Dh(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=R0(a,e,o),t!==null&&($d(t,a,o,s),T_(t,a,o)),o}function LE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fU(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function qO(t,e){fU(t,e),(t=t.alternate)&&fU(t,e)}function Lhe(){return null}var VX=typeof reportError=="function"?reportError:function(t){console.error(t)};function zO(t){this._internalRoot=t}JI.prototype.render=zO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(gr(409));YI(t,e,null,null)};JI.prototype.unmount=zO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lp(function(){YI(null,t,null,null)}),e[zh]=null}};function JI(t){this._internalRoot=t}JI.prototype.unstable_scheduleHydration=function(t){if(t){var e=vW();t={blockedOn:null,target:t,priority:e};for(var r=0;r<h0.length&&e!==0&&e<h0[r].priority;r++);h0.splice(r,0,t),r===0&&bW(t)}};function WO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ZI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hU(){}function Uhe(t,e,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=LE(o);s.call(u)}}var o=QX(e,n,t,0,null,!1,!1,"",hU);return t._reactRootContainer=o,t[zh]=o.current,Vb(t.nodeType===8?t.parentNode:t),Lp(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=LE(c);l.call(u)}}var c=KO(t,0,!1,null,null,!1,!1,"",hU);return t._reactRootContainer=c,t[zh]=c.current,Vb(t.nodeType===8?t.parentNode:t),Lp(function(){YI(e,c,r,n)}),c}function ej(t,e,r,n,a){var s=r._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=LE(o);l.call(c)}}YI(e,o,t,a)}else o=Uhe(r,e,t,a,n);return LE(o)}gW=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=_y(e.pendingLanes);r!==0&&(AO(e,r|1),Ic(e,xi()),!(ea&6)&&(gv=xi()+500,gm()))}break;case 13:Lp(function(){var n=Wh(t,1);if(n!==null){var a=nc();$d(n,t,1,a)}}),qO(t,1)}};mO=function(t){if(t.tag===13){var e=Wh(t,134217728);if(e!==null){var r=nc();$d(e,t,134217728,r)}qO(t,134217728)}};xW=function(t){if(t.tag===13){var e=L0(t),r=Wh(t,e);if(r!==null){var n=nc();$d(r,t,e,n)}qO(t,e)}};vW=function(){return Ta};yW=function(t,e){var r=Ta;try{return Ta=t,e()}finally{Ta=r}};kB=function(t,e,r){switch(e){case"input":if(EB(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=$I(n);if(!a)throw Error(gr(90));Yz(n),EB(n,a)}}}break;case"textarea":Zz(t,r);break;case"select":e=r.value,e!=null&&qx(t,!!r.multiple,e,!1)}};iW=VO;oW=Lp;var Qhe={usingClientEntryPoint:!1,Events:[aw,Bx,$I,aW,sW,VO]},q1={findFiberByHostInstance:sp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vhe={bundleType:q1.bundleType,version:q1.version,rendererPackageName:q1.rendererPackageName,rendererConfig:q1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=uW(t),t===null?null:t.stateNode},findFiberByHostInstance:q1.findFiberByHostInstance||Lhe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var VN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!VN.isDisabled&&VN.supportsFiber)try{UI=VN.inject(Vhe),Of=VN}catch{}}gu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qhe;gu.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!WO(e))throw Error(gr(200));return Mhe(t,e,null,r)};gu.createRoot=function(t,e){if(!WO(t))throw Error(gr(299));var r=!1,n="",a=VX;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=KO(t,1,!1,null,null,r,!1,n,a),t[zh]=e.current,Vb(t.nodeType===8?t.parentNode:t),new zO(e)};gu.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(gr(188)):(t=Object.keys(t).join(","),Error(gr(268,t)));return t=uW(e),t=t===null?null:t.stateNode,t};gu.flushSync=function(t){return Lp(t)};gu.hydrate=function(t,e,r){if(!ZI(e))throw Error(gr(200));return ej(null,t,e,!0,r)};gu.hydrateRoot=function(t,e,r){if(!WO(t))throw Error(gr(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",o=VX;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=QX(e,null,t,1,r??null,a,!1,s,o),t[zh]=e.current,Vb(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new JI(e)};gu.render=function(t,e,r){if(!ZI(e))throw Error(gr(200));return ej(null,t,e,!1,r)};gu.unmountComponentAtNode=function(t){if(!ZI(t))throw Error(gr(40));return t._reactRootContainer?(Lp(function(){ej(null,null,t,!1,function(){t._reactRootContainer=null,t[zh]=null})}),!0):!1};gu.unstable_batchedUpdates=VO;gu.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ZI(r))throw Error(gr(200));if(t==null||t._reactInternals===void 0)throw Error(gr(38));return ej(t,e,r,!1,n)};gu.version="18.3.1-next-f1338f8080-20240426";function HX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HX)}catch(t){console.error(t)}}HX(),Hz.exports=gu;var uu=Hz.exports,AU=uu;vB.createRoot=AU.createRoot,vB.hydrateRoot=AU.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mU="popstate";function Hhe(t={}){function e(n,a){let{pathname:s,search:o,hash:l}=n.location;return fT("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Yb(a)}return Ghe(e,r,null,t)}function _s(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $he(){return Math.random().toString(36).substring(2,10)}function pU(t,e){return{usr:t.state,key:t.key,idx:e}}function fT(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Gv(e):e,state:r,key:e&&e.key||n||$he()}}function Yb({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Gv(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function Ghe(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,o=a.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let g=d(),v=g==null?null:g-u;u=g,c&&c({action:l,location:p.location,delta:v})}function A(g,v){l="PUSH";let y=fT(p.location,g,v);u=d()+1;let b=pU(y,u),w=p.createHref(y);try{o.pushState(b,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(w)}s&&c&&c({action:l,location:p.location,delta:1})}function h(g,v){l="REPLACE";let y=fT(p.location,g,v);u=d();let b=pU(y,u),w=p.createHref(y);o.replaceState(b,"",w),s&&c&&c({action:l,location:p.location,delta:0})}function m(g){return Khe(g)}let p={get action(){return l},get location(){return t(a,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(mU,f),c=g,()=>{a.removeEventListener(mU,f),c=null}},createHref(g){return e(a,g)},createURL:m,encodeLocation(g){let v=m(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:A,replace:h,go(g){return o.go(g)}};return p}function Khe(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),_s(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Yb(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function $X(t,e,r="/"){return qhe(t,e,r,!1)}function qhe(t,e,r,n){let a=typeof e=="string"?Gv(e):e,s=Yh(a.pathname||"/",r);if(s==null)return null;let o=GX(t);zhe(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=sAe(s);l=nAe(o[c],u,n)}return l}function GX(t,e=[],r=[],n="",a=!1){let s=(o,l,c=a,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;_s(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=Rh([n,d.relativePath]),A=r.concat(d);o.children&&o.children.length>0&&(_s(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),GX(o.children,e,A,f,c)),!(o.path==null&&!o.index)&&e.push({path:f,score:tAe(f,o.index),routesMeta:A})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let u of KX(o.path))s(o,l,!0,u)}),e}function KX(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let o=KX(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function zhe(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:rAe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Whe=/^:[\w-]+$/,Xhe=3,Yhe=2,Jhe=1,Zhe=10,eAe=-2,gU=t=>t==="*";function tAe(t,e){let r=t.split("/"),n=r.length;return r.some(gU)&&(n+=eAe),e&&(n+=Yhe),r.filter(a=>!gU(a)).reduce((a,s)=>a+(Whe.test(s)?Xhe:s===""?Jhe:Zhe),n)}function rAe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function nAe(t,e,r=!1){let{routesMeta:n}=t,a={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=UE({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),A=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=UE({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Rh([s,f.pathname]),pathnameBase:cAe(Rh([s,f.pathnameBase])),route:A}),f.pathnameBase!=="/"&&(s=Rh([s,f.pathnameBase]))}return o}function UE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=aAe(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},A)=>{if(d==="*"){let m=l[A]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const h=l[A];return f&&!h?u[d]=void 0:u[d]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function aAe(t,e=!1,r=!0){Yd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function sAe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yd(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Yh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function iAe(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Gv(t):t;return{pathname:r?r.startsWith("/")?r:oAe(r,e):e,search:uAe(n),hash:dAe(a)}}function oAe(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function t3(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lAe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function XO(t){let e=lAe(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function YO(t,e,r,n=!1){let a;typeof t=="string"?a=Gv(t):(a={...t},_s(!a.pathname||!a.pathname.includes("?"),t3("?","pathname","search",a)),_s(!a.pathname||!a.pathname.includes("#"),t3("#","pathname","hash",a)),_s(!a.search||!a.search.includes("#"),t3("#","search","hash",a)));let s=t===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let A=o.split("/");for(;A[0]==="..";)A.shift(),f-=1;a.pathname=A.join("/")}l=f>=0?e[f]:"/"}let c=iAe(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Rh=t=>t.join("/").replace(/\/\/+/g,"/"),cAe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uAe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dAe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fAe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var qX=["POST","PUT","PATCH","DELETE"];new Set(qX);var hAe=["GET",...qX];new Set(hAe);var Kv=x.createContext(null);Kv.displayName="DataRouter";var tj=x.createContext(null);tj.displayName="DataRouterState";x.createContext(!1);var zX=x.createContext({isTransitioning:!1});zX.displayName="ViewTransition";var AAe=x.createContext(new Map);AAe.displayName="Fetchers";var mAe=x.createContext(null);mAe.displayName="Await";var tf=x.createContext(null);tf.displayName="Navigation";var iw=x.createContext(null);iw.displayName="Location";var rf=x.createContext({outlet:null,matches:[],isDataRoute:!1});rf.displayName="Route";var JO=x.createContext(null);JO.displayName="RouteError";function pAe(t,{relative:e}={}){_s(qv(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=x.useContext(tf),{hash:a,pathname:s,search:o}=lw(t,{relative:e}),l=s;return r!=="/"&&(l=s==="/"?r:Rh([r,s])),n.createHref({pathname:l,search:o,hash:a})}function qv(){return x.useContext(iw)!=null}function hA(){return _s(qv(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(iw).location}var WX="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function XX(t){x.useContext(tf).static||x.useLayoutEffect(t)}function ow(){let{isDataRoute:t}=x.useContext(rf);return t?BAe():gAe()}function gAe(){_s(qv(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(Kv),{basename:e,navigator:r}=x.useContext(tf),{matches:n}=x.useContext(rf),{pathname:a}=hA(),s=JSON.stringify(XO(n)),o=x.useRef(!1);return XX(()=>{o.current=!0}),x.useCallback((c,u={})=>{if(Yd(o.current,WX),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=YO(c,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Rh([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}var xAe=x.createContext(null);function vAe(t){let e=x.useContext(rf).outlet;return e&&x.createElement(xAe.Provider,{value:t},e)}function lw(t,{relative:e}={}){let{matches:r}=x.useContext(rf),{pathname:n}=hA(),a=JSON.stringify(XO(r));return x.useMemo(()=>YO(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function yAe(t,e){return YX(t,e)}function YX(t,e,r,n){var v;_s(qv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=x.useContext(tf),{matches:s}=x.useContext(rf),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let y=d&&d.path||"";JX(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=hA(),A;if(e){let y=typeof e=="string"?Gv(e):e;_s(u==="/"||((v=y.pathname)==null?void 0:v.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),A=y}else A=f;let h=A.pathname||"/",m=h;if(u!=="/"){let y=u.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=$X(t,{pathname:m});Yd(d||p!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Yd(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=_Ae(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Rh([u,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Rh([u,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&g?x.createElement(iw.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},g):g}function bAe(){let t=PAe(),e=fAe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:s},"ErrorBoundary")," or"," ",x.createElement("code",{style:s},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),r?x.createElement("pre",{style:a},r):null,o)}var wAe=x.createElement(bAe,null),NAe=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?x.createElement(rf.Provider,{value:this.props.routeContext},x.createElement(JO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CAe({routeContext:t,match:e,children:r}){let n=x.useContext(Kv);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(rf.Provider,{value:t},r)}function _Ae(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);_s(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=r,A=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||A){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let f,A=!1,h=null,m=null;r&&(f=s&&u.route.id?s[u.route.id]:void 0,h=u.route.errorElement||wAe,o&&(l<0&&d===0?(JX("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,m=null):l===d&&(A=!0,m=u.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,d+1)),g=()=>{let v;return f?v=h:A?v=m:u.route.Component?v=x.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=c,x.createElement(CAe,{match:u,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:v})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?x.createElement(NAe,{location:r.location,revalidation:r.revalidation,component:h,error:f,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function ZO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function EAe(t){let e=x.useContext(Kv);return _s(e,ZO(t)),e}function SAe(t){let e=x.useContext(tj);return _s(e,ZO(t)),e}function IAe(t){let e=x.useContext(rf);return _s(e,ZO(t)),e}function eD(t){let e=IAe(t),r=e.matches[e.matches.length-1];return _s(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function jAe(){return eD("useRouteId")}function PAe(){var n;let t=x.useContext(JO),e=SAe("useRouteError"),r=eD("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function BAe(){let{router:t}=EAe("useNavigate"),e=eD("useNavigate"),r=x.useRef(!1);return XX(()=>{r.current=!0}),x.useCallback(async(a,s={})=>{Yd(r.current,WX),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var xU={};function JX(t,e,r){!e&&!xU[t]&&(xU[t]=!0,Yd(!1,r))}x.memo(TAe);function TAe({routes:t,future:e,state:r}){return YX(t,void 0,r,e)}function xh({to:t,replace:e,state:r,relative:n}){_s(qv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=x.useContext(tf);Yd(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=x.useContext(rf),{pathname:o}=hA(),l=ow(),c=YO(t,XO(s),o,n==="path"),u=JSON.stringify(c);return x.useEffect(()=>{l(JSON.parse(u),{replace:e,state:r,relative:n})},[l,u,n,e,r]),null}function ZX(t){return vAe(t.context)}function bn(t){_s(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function kAe({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){_s(!qv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=x.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);typeof r=="string"&&(r=Gv(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:A="default"}=r,h=x.useMemo(()=>{let m=Yh(c,o);return m==null?null:{location:{pathname:m,search:u,hash:d,state:f,key:A},navigationType:n}},[o,c,u,d,f,A,n]);return Yd(h!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:x.createElement(tf.Provider,{value:l},x.createElement(iw.Provider,{children:e,value:h}))}function FAe({children:t,location:e}){return yAe(hT(t),e)}function hT(t,e=[]){let r=[];return x.Children.forEach(t,(n,a)=>{if(!x.isValidElement(n))return;let s=[...e,a];if(n.type===x.Fragment){r.push.apply(r,hT(n.props.children,s));return}_s(n.type===bn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_s(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=hT(n.props.children,s)),r.push(o)}),r}var L_="get",U_="application/x-www-form-urlencoded";function rj(t){return t!=null&&typeof t.tagName=="string"}function OAe(t){return rj(t)&&t.tagName.toLowerCase()==="button"}function DAe(t){return rj(t)&&t.tagName.toLowerCase()==="form"}function RAe(t){return rj(t)&&t.tagName.toLowerCase()==="input"}function MAe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LAe(t,e){return t.button===0&&(!e||e==="_self")&&!MAe(t)}var HN=null;function UAe(){if(HN===null)try{new FormData(document.createElement("form"),0),HN=!1}catch{HN=!0}return HN}var QAe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function r3(t){return t!=null&&!QAe.has(t)?(Yd(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${U_}"`),null):t}function VAe(t,e){let r,n,a,s,o;if(DAe(t)){let l=t.getAttribute("action");n=l?Yh(l,e):null,r=t.getAttribute("method")||L_,a=r3(t.getAttribute("enctype"))||U_,s=new FormData(t)}else if(OAe(t)||RAe(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?Yh(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||L_,a=r3(t.getAttribute("formenctype"))||r3(l.getAttribute("enctype"))||U_,s=new FormData(l,t),!UAe()){let{name:u,type:d,value:f}=t;if(d==="image"){let A=u?`${u}.`:"";s.append(`${A}x`,"0"),s.append(`${A}y`,"0")}else u&&s.append(u,f)}}else{if(rj(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=L_,n=null,a=U_,o=t}return s&&a==="text/plain"&&(o=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function HAe(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&Yh(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function $Ae(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GAe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function KAe(t,e,r){let n=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let o=await $Ae(s,r);return o.links?o.links():[]}return[]}));return XAe(n.flat(1).filter(GAe).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function vU(t,e,r,n,a,s){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let A=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function qAe(t,e,{includeHydrateFallback:r}={}){return zAe(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function zAe(t){return[...new Set(t)]}function WAe(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function XAe(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let s=JSON.stringify(WAe(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function eY(){let t=x.useContext(Kv);return tD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function YAe(){let t=x.useContext(tj);return tD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var rD=x.createContext(void 0);rD.displayName="FrameworkContext";function tY(){let t=x.useContext(rD);return tD(t,"You must render this element inside a <HydratedRouter> element"),t}function JAe(t,e){let r=x.useContext(rD),[n,a]=x.useState(!1),[s,o]=x.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,A=x.useRef(null);x.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let p=v=>{v.forEach(y=>{o(y.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return A.current&&g.observe(A.current),()=>{g.disconnect()}}},[t]),x.useEffect(()=>{if(n){let p=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(p)}}},[n]);let h=()=>{a(!0)},m=()=>{a(!1),o(!1)};return r?t!=="intent"?[s,A,{}]:[s,A,{onFocus:z1(l,h),onBlur:z1(c,m),onMouseEnter:z1(u,h),onMouseLeave:z1(d,m),onTouchStart:z1(f,h)}]:[!1,A,{}]}function z1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function ZAe({page:t,...e}){let{router:r}=eY(),n=x.useMemo(()=>$X(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?x.createElement(t0e,{page:t,matches:n,...e}):null}function e0e(t){let{manifest:e,routeModules:r}=tY(),[n,a]=x.useState([]);return x.useEffect(()=>{let s=!1;return KAe(t,e,r).then(o=>{s||a(o)}),()=>{s=!0}},[t,e,r]),n}function t0e({page:t,matches:e,...r}){let n=hA(),{manifest:a,routeModules:s}=tY(),{basename:o}=eY(),{loaderData:l,matches:c}=YAe(),u=x.useMemo(()=>vU(t,e,c,a,n,"data"),[t,e,c,a,n]),d=x.useMemo(()=>vU(t,e,c,a,n,"assets"),[t,e,c,a,n]),f=x.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let m=new Set,p=!1;if(e.forEach(v=>{var b;let y=a.routes[v.route.id];!y||!y.hasLoader||(!u.some(w=>w.route.id===v.route.id)&&v.route.id in l&&((b=s[v.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?p=!0:m.add(v.route.id))}),m.size===0)return[];let g=HAe(t,o,"data");return p&&m.size>0&&g.searchParams.set("_routes",e.filter(v=>m.has(v.route.id)).map(v=>v.route.id).join(",")),[g.pathname+g.search]},[o,l,n,a,u,e,t,s]),A=x.useMemo(()=>qAe(d,a),[d,a]),h=e0e(d);return x.createElement(x.Fragment,null,f.map(m=>x.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),A.map(m=>x.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),h.map(({key:m,link:p})=>x.createElement("link",{key:m,nonce:r.nonce,...p})))}function r0e(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var rY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rY&&(window.__reactRouterVersion="7.8.1")}catch{}function n0e({basename:t,children:e,window:r}){let n=x.useRef();n.current==null&&(n.current=Hhe({window:r,v5Compat:!0}));let a=n.current,[s,o]=x.useState({action:a.action,location:a.location}),l=x.useCallback(c=>{x.startTransition(()=>o(c))},[o]);return x.useLayoutEffect(()=>a.listen(l),[a,l]),x.createElement(kAe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var nY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aY=x.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...A},h){let{basename:m}=x.useContext(tf),p=typeof u=="string"&&nY.test(u),g,v=!1;if(typeof u=="string"&&p&&(g=u,rY))try{let E=new URL(window.location.href),F=u.startsWith("//")?new URL(E.protocol+u):new URL(u),P=Yh(F.pathname,m);F.origin===E.origin&&P!=null?u=P+F.search+F.hash:v=!0}catch{Yd(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=pAe(u,{relative:a}),[b,w,j]=JAe(n,A),I=i0e(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function _(E){e&&e(E),E.defaultPrevented||I(E)}let S=x.createElement("a",{...A,...j,href:g||y,onClick:v||s?e:_,ref:r0e(h,w),target:c,"data-discover":!p&&r==="render"?"true":void 0});return b&&!p?x.createElement(x.Fragment,null,S,x.createElement(ZAe,{page:y})):S});aY.displayName="Link";var sn=x.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:o,viewTransition:l,children:c,...u},d){let f=lw(o,{relative:u.relative}),A=hA(),h=x.useContext(tj),{navigator:m,basename:p}=x.useContext(tf),g=h!=null&&d0e(f)&&l===!0,v=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,y=A.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&p&&(b=Yh(b,p)||b);const w=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let j=y===v||!a&&y.startsWith(v)&&y.charAt(w)==="/",I=b!=null&&(b===v||!a&&b.startsWith(v)&&b.charAt(v.length)==="/"),_={isActive:j,isPending:I,isTransitioning:g},S=j?e:void 0,E;typeof n=="function"?E=n(_):E=[n,j?"active":null,I?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let F=typeof s=="function"?s(_):s;return x.createElement(aY,{...u,"aria-current":S,className:E,ref:d,style:F,to:o,viewTransition:l},typeof c=="function"?c(_):c)});sn.displayName="NavLink";var a0e=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:s,method:o=L_,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...A},h)=>{let m=c0e(),p=u0e(l,{relative:u}),g=o.toLowerCase()==="get"?"get":"post",v=typeof l=="string"&&nY.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||o;m(w||b.currentTarget,{fetcherKey:e,method:j,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:f})};return x.createElement("form",{ref:h,method:g,action:p,onSubmit:n?c:y,...A,"data-discover":!v&&t==="render"?"true":void 0})});a0e.displayName="Form";function s0e(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sY(t){let e=x.useContext(Kv);return _s(e,s0e(t)),e}function i0e(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:o}={}){let l=ow(),c=hA(),u=lw(t,{relative:s});return x.useCallback(d=>{if(LAe(d,e)){d.preventDefault();let f=r!==void 0?r:Yb(c)===Yb(u);l(t,{replace:f,state:n,preventScrollReset:a,relative:s,viewTransition:o})}},[c,l,u,r,n,e,t,a,s,o])}var o0e=0,l0e=()=>`__${String(++o0e)}__`;function c0e(){let{router:t}=sY("useSubmit"),{basename:e}=x.useContext(tf),r=jAe();return x.useCallback(async(n,a={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=VAe(n,e);if(a.navigate===!1){let d=a.fetcherKey||l0e();await t.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function u0e(t,{relative:e}={}){let{basename:r}=x.useContext(tf),n=x.useContext(rf);_s(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...lw(t||".",{relative:e})},o=hA();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:Rh([r,s.pathname])),Yb(s)}function d0e(t,{relative:e}={}){let r=x.useContext(zX);_s(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=sY("useViewTransitionState"),a=lw(t,{relative:e});if(!r.isTransitioning)return!1;let s=Yh(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Yh(r.nextLocation.pathname,n)||r.nextLocation.pathname;return UE(a.pathname,o)!=null||UE(a.pathname,s)!=null}function on(t,e){if(!t)return!1;const r=String(e);if(Array.isArray(t))return t.map(String).includes(r);const n=String(t);return n===r||n==="vendedor"&&r==="vendedor_pollo"}var yU={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iY=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},f0e=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],o=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return e.join("")},oY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],o=a+1<t.length,l=o?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let A=(l&15)<<2|u>>6,h=u&63;c||(h=64,o||(A=64)),n.push(r[d],r[f],r[A],r[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iY(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):f0e(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new h0e;const A=s<<2|l>>4;if(n.push(A),u!==64){const h=l<<4&240|u>>2;if(n.push(h),f!==64){const m=u<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h0e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const A0e=function(t){const e=iY(t);return oY.encodeByteArray(e,!0)},QE=function(t){return A0e(t).replace(/\./g,"")},lY=function(t){try{return oY.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0e=()=>m0e().__FIREBASE_DEFAULTS__,g0e=()=>{if(typeof process>"u"||typeof yU>"u")return;const t=yU.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},x0e=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lY(t[1]);return e&&JSON.parse(e)},nj=()=>{try{return p0e()||g0e()||x0e()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cY=t=>{var e,r;return(r=(e=nj())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},v0e=t=>{const e=cY(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},uY=()=>{var t;return(t=nj())===null||t===void 0?void 0:t.config},dY=t=>{var e;return(e=nj())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0e(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[QE(JSON.stringify(r)),QE(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w0e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(io())}function N0e(){var t;const e=(t=nj())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C0e(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _0e(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function E0e(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S0e(){const t=io();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fY(){return!N0e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hY(){try{return typeof indexedDB=="object"}catch{return!1}}function I0e(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0e="FirebaseError";class AA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=j0e,Object.setPrototypeOf(this,AA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cw.prototype.create)}}class cw{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],o=s?P0e(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new AA(a,l,n)}}function P0e(t,e){return t.replace(B0e,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const B0e=/\{\$([^}]+)}/g;function T0e(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jb(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],o=e[a];if(bU(s)&&bU(o)){if(!Jb(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function bU(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Sy(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function Iy(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function k0e(t,e){const r=new F0e(t,e);return r.subscribe.bind(r)}class F0e{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");O0e(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=n3),a.error===void 0&&(a.error=n3),a.complete===void 0&&(a.complete=n3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function O0e(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function n3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(t){return t&&t._delegate?t._delegate:t}class Up{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D0e=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new y0e;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M0e(e))try{this.getOrInitializeService({instanceIdentifier:$m})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=$m){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$m){return this.instances.has(e)}getOptions(e=$m){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const o=this.instances.get(a);return o&&e(o,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:R0e(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=$m){return this.component?this.component.multipleInstances?e:$m:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function R0e(t){return t===$m?void 0:t}function M0e(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new D0e(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Hn||(Hn={}));const U0e={debug:Hn.DEBUG,verbose:Hn.VERBOSE,info:Hn.INFO,warn:Hn.WARN,error:Hn.ERROR,silent:Hn.SILENT},Q0e=Hn.INFO,V0e={[Hn.DEBUG]:"log",[Hn.VERBOSE]:"log",[Hn.INFO]:"info",[Hn.WARN]:"warn",[Hn.ERROR]:"error"},H0e=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=V0e[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let nD=class{constructor(e){this.name=e,this._logLevel=Q0e,this._logHandler=H0e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Hn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U0e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Hn.DEBUG,...e),this._logHandler(this,Hn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Hn.VERBOSE,...e),this._logHandler(this,Hn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Hn.INFO,...e),this._logHandler(this,Hn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Hn.WARN,...e),this._logHandler(this,Hn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Hn.ERROR,...e),this._logHandler(this,Hn.ERROR,...e)}};const $0e=(t,e)=>e.some(r=>t instanceof r);let wU,NU;function G0e(){return wU||(wU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function K0e(){return NU||(NU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AY=new WeakMap,AT=new WeakMap,mY=new WeakMap,a3=new WeakMap,aD=new WeakMap;function q0e(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(Q0(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&AY.set(r,t)}).catch(()=>{}),aD.set(e,t),e}function z0e(t){if(AT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});AT.set(t,e)}let mT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return AT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mY.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Q0(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W0e(t){mT=t(mT)}function X0e(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(s3(this),e,...r);return mY.set(n,e.sort?e.sort():[e]),Q0(n)}:K0e().includes(t)?function(...e){return t.apply(s3(this),e),Q0(AY.get(this))}:function(...e){return Q0(t.apply(s3(this),e))}}function Y0e(t){return typeof t=="function"?X0e(t):(t instanceof IDBTransaction&&z0e(t),$0e(t,G0e())?new Proxy(t,mT):t)}function Q0(t){if(t instanceof IDBRequest)return q0e(t);if(a3.has(t))return a3.get(t);const e=Y0e(t);return e!==t&&(a3.set(t,e),aD.set(e,t)),e}const s3=t=>aD.get(t);function J0e(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(t,e),l=Q0(o);return n&&o.addEventListener("upgradeneeded",c=>{n(Q0(o.result),c.oldVersion,c.newVersion,Q0(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Z0e=["get","getKey","getAll","getAllKeys","count"],eme=["put","add","delete","clear"],i3=new Map;function CU(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(i3.get(e))return i3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=eme.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Z0e.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return i3.set(e,s),s}W0e(t=>({...t,get:(e,r,n)=>CU(e,r)||t.get(e,r,n),has:(e,r)=>!!CU(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tme{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(rme(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function rme(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pT="@firebase/app",_U="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new nD("@firebase/app"),nme="@firebase/app-compat",ame="@firebase/analytics-compat",sme="@firebase/analytics",ime="@firebase/app-check-compat",ome="@firebase/app-check",lme="@firebase/auth",cme="@firebase/auth-compat",ume="@firebase/database",dme="@firebase/data-connect",fme="@firebase/database-compat",hme="@firebase/functions",Ame="@firebase/functions-compat",mme="@firebase/installations",pme="@firebase/installations-compat",gme="@firebase/messaging",xme="@firebase/messaging-compat",vme="@firebase/performance",yme="@firebase/performance-compat",bme="@firebase/remote-config",wme="@firebase/remote-config-compat",Nme="@firebase/storage",Cme="@firebase/storage-compat",_me="@firebase/firestore",Eme="@firebase/vertexai-preview",Sme="@firebase/firestore-compat",Ime="firebase",jme="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="[DEFAULT]",Pme={[pT]:"fire-core",[nme]:"fire-core-compat",[sme]:"fire-analytics",[ame]:"fire-analytics-compat",[ome]:"fire-app-check",[ime]:"fire-app-check-compat",[lme]:"fire-auth",[cme]:"fire-auth-compat",[ume]:"fire-rtdb",[dme]:"fire-data-connect",[fme]:"fire-rtdb-compat",[hme]:"fire-fn",[Ame]:"fire-fn-compat",[mme]:"fire-iid",[pme]:"fire-iid-compat",[gme]:"fire-fcm",[xme]:"fire-fcm-compat",[vme]:"fire-perf",[yme]:"fire-perf-compat",[bme]:"fire-rc",[wme]:"fire-rc-compat",[Nme]:"fire-gcs",[Cme]:"fire-gcs-compat",[_me]:"fire-fst",[Sme]:"fire-fst-compat",[Eme]:"fire-vertex","fire-js":"fire-js",[Ime]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map,xT=new Map,vT=new Map;function EU(t,e){try{t.container.addComponent(e)}catch(r){Jh.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function vv(t){const e=t.name;if(vT.has(e))return Jh.debug(`There were multiple attempts to register component ${e}.`),!1;vT.set(e,t);for(const r of xv.values())EU(r,t);for(const r of xT.values())EU(r,t);return!0}function sD(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function If(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bme={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},V0=new cw("app","Firebase",Bme);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tme{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Up("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw V0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=jme;function iD(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:gT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw V0.create("bad-app-name",{appName:String(a)});if(r||(r=uY()),!r)throw V0.create("no-options");const s=xv.get(a);if(s){if(Jb(r,s.options)&&Jb(n,s.config))return s;throw V0.create("duplicate-app",{appName:a})}const o=new L0e(a);for(const c of vT.values())o.addComponent(c);const l=new Tme(r,n,o);return xv.set(a,l),l}function oD(t=gT){const e=xv.get(t);if(!e&&t===gT&&uY())return iD();if(!e)throw V0.create("no-app",{appName:t});return e}async function kme(t){let e=!1;const r=t.name;xv.has(r)?(e=!0,xv.delete(r)):xT.has(r)&&t.decRefCount()<=0&&(xT.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function H0(t,e,r){var n;let a=(n=Pme[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${a}" with version "${e}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jh.warn(l.join(" "));return}vv(new Up(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fme="firebase-heartbeat-database",Ome=1,Zb="firebase-heartbeat-store";let o3=null;function pY(){return o3||(o3=J0e(Fme,Ome,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zb)}catch(r){console.warn(r)}}}}).catch(t=>{throw V0.create("idb-open",{originalErrorMessage:t.message})})),o3}async function Dme(t){try{const r=(await pY()).transaction(Zb),n=await r.objectStore(Zb).get(gY(t));return await r.done,n}catch(e){if(e instanceof AA)Jh.warn(e.message);else{const r=V0.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jh.warn(r.message)}}}async function SU(t,e){try{const n=(await pY()).transaction(Zb,"readwrite");await n.objectStore(Zb).put(e,gY(t)),await n.done}catch(r){if(r instanceof AA)Jh.warn(r.message);else{const n=V0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Jh.warn(n.message)}}}function gY(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rme=1024,Mme=30*24*60*60*1e3;class Lme{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Qme(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=IU();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Mme}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Jh.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=IU(),{heartbeatsToSend:n,unsentEntries:a}=Ume(this._heartbeatsCache.heartbeats),s=QE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Jh.warn(r),""}}}function IU(){return new Date().toISOString().substring(0,10)}function Ume(t,e=Rme){const r=[];let n=t.slice();for(const a of t){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),jU(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),jU(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Qme{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hY()?I0e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Dme(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return SU(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return SU(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function jU(t){return QE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vme(t){vv(new Up("platform-logger",e=>new tme(e),"PRIVATE")),vv(new Up("heartbeat",e=>new Lme(e),"PRIVATE")),H0(pT,_U,t),H0(pT,_U,"esm2017"),H0("fire-js","")}Vme("");function lD(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function xY(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hme=xY,vY=new cw("auth","Firebase",xY());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=new nD("@firebase/auth");function $me(t,...e){VE.logLevel<=Hn.WARN&&VE.warn(`Auth (${zv}): ${t}`,...e)}function Q_(t,...e){VE.logLevel<=Hn.ERROR&&VE.error(`Auth (${zv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t,...e){throw cD(t,...e)}function Rf(t,...e){return cD(t,...e)}function yY(t,e,r){const n=Object.assign(Object.assign({},Hme()),{[e]:r});return new cw("auth","Firebase",n).create(e,{appName:t.name})}function Mh(t){return yY(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cD(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return vY.create(t,...e)}function mn(t,e,...r){if(!t)throw cD(e,...r)}function Ih(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Q_(e),new Error(e)}function Zh(t,e){t||Ih(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Gme(){return PU()==="http:"||PU()==="https:"}function PU(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Gme()||_0e()||"connection"in navigator)?navigator.onLine:!0}function qme(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,r){this.shortDelay=e,this.longDelay=r,Zh(r>e,"Short delay should be less than long delay!"),this.isMobile=w0e()||E0e()}get(){return Kme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t,e){Zh(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bY{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ih("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ih("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ih("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zme={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wme=new dw(3e4,6e4);function mA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function pA(t,e,r,n,a={}){return wY(t,a,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const l=uw(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return C0e()||(u.referrerPolicy="no-referrer"),bY.fetch()(NY(t,t.config.apiHost,r,l),u)})}async function wY(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},zme),e);try{const a=new Yme(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw $N(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $N(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw $N(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw $N(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw yY(t,d,u);Jd(t,d)}}catch(a){if(a instanceof AA)throw a;Jd(t,"network-request-failed",{message:String(a)})}}async function fw(t,e,r,n,a={}){const s=await pA(t,e,r,n,a);return"mfaPendingCredential"in s&&Jd(t,"multi-factor-auth-required",{_serverResponse:s}),s}function NY(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?uD(t.config,a):`${t.config.apiScheme}://${a}`}function Xme(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Yme{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Rf(this.auth,"network-request-failed")),Wme.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $N(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Rf(t,e,n);return a.customData._tokenResponse=r,a}function BU(t){return t!==void 0&&t.enterprise!==void 0}class Jme{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return Xme(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Zme(t,e){return pA(t,"GET","/v2/recaptchaConfig",mA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function epe(t,e){return pA(t,"POST","/v1/accounts:delete",e)}async function CY(t,e){return pA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tpe(t,e=!1){const r=Hs(t),n=await r.getIdToken(e),a=dD(n);mn(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:ab(l3(a.auth_time)),issuedAtTime:ab(l3(a.iat)),expirationTime:ab(l3(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function l3(t){return Number(t)*1e3}function dD(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Q_("JWT malformed, contained fewer than 3 sections"),null;try{const a=lY(r);return a?JSON.parse(a):(Q_("Failed to decode base64 JWT payload"),null)}catch(a){return Q_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function TU(t){const e=dD(t);return mn(e,"internal-error"),mn(typeof e.exp<"u","internal-error"),mn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof AA&&rpe(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function rpe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class npe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ab(this.lastLoginAt),this.creationTime=ab(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HE(t){var e;const r=t.auth,n=await t.getIdToken(),a=await e2(t,CY(r,{idToken:n}));mn(a==null?void 0:a.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?_Y(s.providerUserInfo):[],l=spe(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new bT(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function ape(t){const e=Hs(t);await HE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function spe(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function _Y(t){return t.map(e=>{var{providerId:r}=e,n=lD(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ipe(t,e){const r=await wY(t,{},async()=>{const n=uw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,o=NY(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",bY.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function ope(t,e){return pA(t,"POST","/v2/accounts:revokeToken",mA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mn(e.idToken,"internal-error"),mn(typeof e.idToken<"u","internal-error"),mn(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){mn(e.length!==0,"internal-error");const r=TU(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(mn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await ipe(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new Zx;return n&&(mn(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(mn(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),s&&(mn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zx,this.toJSON())}_performRefresh(){return Ih("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t,e){mn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jh{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=lD(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new npe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await e2(this,this.stsTokenManager.getToken(this.auth,e));return mn(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return tpe(this,e)}reload(){return ape(this)}_assign(e){this!==e&&(mn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new jh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){mn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await HE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(If(this.auth.app))return Promise.reject(Mh(this.auth));const e=await this.getIdToken();return await e2(this,epe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,o,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,A=(a=r.email)!==null&&a!==void 0?a:void 0,h=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=r.photoURL)!==null&&o!==void 0?o:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,g=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,v=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:w,isAnonymous:j,providerData:I,stsTokenManager:_}=r;mn(b&&_,e,"internal-error");const S=Zx.fromJSON(this.name,_);mn(typeof b=="string",e,"internal-error"),KA(f,e.name),KA(A,e.name),mn(typeof w=="boolean",e,"internal-error"),mn(typeof j=="boolean",e,"internal-error"),KA(h,e.name),KA(m,e.name),KA(p,e.name),KA(g,e.name),KA(v,e.name),KA(y,e.name);const E=new jh({uid:b,auth:e,email:A,emailVerified:w,displayName:f,isAnonymous:j,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:v,lastLoginAt:y});return I&&Array.isArray(I)&&(E.providerData=I.map(F=>Object.assign({},F))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,r,n=!1){const a=new Zx;a.updateFromServerResponse(r);const s=new jh({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await HE(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];mn(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?_Y(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Zx;l.updateFromIdToken(n);const c=new jh({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new bT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=new Map;function Ph(t){Zh(t instanceof Function,"Expected a class definition");let e=kU.get(t);return e?(Zh(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kU.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EY{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}EY.type="NONE";const FU=EY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t,e,r){return`firebase:${t}:${e}:${r}`}class ev{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=V_(this.userKey,a.apiKey,s),this.fullPersistenceKey=V_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jh._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new ev(Ph(FU),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Ph(FU);const o=V_(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){const f=jh._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ev(s,e,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ev(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PY(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SY(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TY(e))return"Blackberry";if(kY(e))return"Webos";if(IY(e))return"Safari";if((e.includes("chrome/")||jY(e))&&!e.includes("edge/"))return"Chrome";if(BY(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function SY(t=io()){return/firefox\//i.test(t)}function IY(t=io()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jY(t=io()){return/crios\//i.test(t)}function PY(t=io()){return/iemobile/i.test(t)}function BY(t=io()){return/android/i.test(t)}function TY(t=io()){return/blackberry/i.test(t)}function kY(t=io()){return/webos/i.test(t)}function fD(t=io()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lpe(t=io()){var e;return fD(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cpe(){return S0e()&&document.documentMode===10}function FY(t=io()){return fD(t)||BY(t)||kY(t)||TY(t)||/windows phone/i.test(t)||PY(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OY(t,e=[]){let r;switch(t){case"Browser":r=OU(io());break;case"Worker":r=`${OU(io())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${zv}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class upe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dpe(t,e={}){return pA(t,"GET","/v2/passwordPolicy",mA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fpe=6;class hpe{constructor(e){var r,n,a,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:fpe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ape{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DU(this),this.idTokenSubscription=new DU(this),this.beforeStateQueue=new upe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ph(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await ev.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await CY(this,{idToken:e}),n=await jh._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(If(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return mn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await HE(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qme()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(If(this.app))return Promise.reject(Mh(this));const r=e?Hs(e):null;return r&&mn(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&mn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return If(this.app)?Promise.reject(Mh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return If(this.app)?Promise.reject(Mh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ph(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dpe(this),r=new hpe(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cw("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await ope(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ph(e)||this._popupRedirectResolver;mn(r,this,"argument-error"),this.redirectPersistenceManager=await ev.create(this,[Ph(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(mn(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OY(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&$me(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function xm(t){return Hs(t)}class DU{constructor(e){this.auth=e,this.observer=null,this.addObserver=k0e(r=>this.observer=r)}get next(){return mn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aj={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mpe(t){aj=t}function DY(t){return aj.loadJS(t)}function ppe(){return aj.recaptchaEnterpriseScript}function gpe(){return aj.gapiScript}function xpe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const vpe="recaptcha-enterprise",ype="NO_RECAPTCHA";class bpe{constructor(e){this.type=vpe,this.auth=xm(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Zme(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Jme(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;BU(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(ype)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&BU(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=ppe();c.length!==0&&(c+=l),DY(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function RU(t,e,r,n=!1){const a=new bpe(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function $E(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await RU(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await RU(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wpe(t,e){const r=sD(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(Jb(s,e??{}))return a;Jd(a,"already-initialized")}return r.initialize({options:e})}function Npe(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ph);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Cpe(t,e,r){const n=xm(t);mn(n._canInitEmulator,n,"emulator-config-failed"),mn(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=RY(e),{host:o,port:l}=_pe(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${s}//${o}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),Epe()}function RY(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _pe(t){const e=RY(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:MU(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:MU(o)}}}function MU(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Epe(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ih("not implemented")}_getIdTokenResponse(e){return Ih("not implemented")}_linkToIdToken(e,r){return Ih("not implemented")}_getReauthenticationResolver(e){return Ih("not implemented")}}async function Spe(t,e){return pA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ipe(t,e){return fw(t,"POST","/v1/accounts:signInWithPassword",mA(t,e))}async function jpe(t,e){return pA(t,"POST","/v1/accounts:sendOobCode",mA(t,e))}async function Ppe(t,e){return jpe(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bpe(t,e){return fw(t,"POST","/v1/accounts:signInWithEmailLink",mA(t,e))}async function Tpe(t,e){return fw(t,"POST","/v1/accounts:signInWithEmailLink",mA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2 extends hD{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new t2(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new t2(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $E(e,r,"signInWithPassword",Ipe);case"emailLink":return Bpe(e,{email:this._email,oobCode:this._password});default:Jd(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $E(e,n,"signUpPassword",Spe);case"emailLink":return Tpe(e,{idToken:r,email:this._email,oobCode:this._password});default:Jd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tv(t,e){return fw(t,"POST","/v1/accounts:signInWithIdp",mA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kpe="http://localhost";class Qp extends hD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Qp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Jd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=lD(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Qp(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return tv(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,tv(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,tv(e,r)}buildRequest(){const e={requestUri:kpe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=uw(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fpe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ope(t){const e=Sy(Iy(t)).link,r=e?Sy(Iy(e)).deep_link_id:null,n=Sy(Iy(t)).deep_link_id;return(n?Sy(Iy(n)).link:null)||n||r||e||t}class AD{constructor(e){var r,n,a,s,o,l;const c=Sy(Iy(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,f=Fpe((a=c.mode)!==null&&a!==void 0?a:null);mn(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=Ope(e);try{return new AD(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this.providerId=Wv.PROVIDER_ID}static credential(e,r){return t2._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=AD.parseLink(r);return mn(n,"argument-error"),t2._fromEmailAndCode(e,n.code,n.tenantId)}}Wv.PROVIDER_ID="password";Wv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MY{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw extends MY{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0 extends hw{constructor(){super("facebook.com")}static credential(e){return Qp._fromParams({providerId:m0.PROVIDER_ID,signInMethod:m0.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return m0.credentialFromTaggedObject(e)}static credentialFromError(e){return m0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return m0.credential(e.oauthAccessToken)}catch{return null}}}m0.FACEBOOK_SIGN_IN_METHOD="facebook.com";m0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends hw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Qp._fromParams({providerId:p0.PROVIDER_ID,signInMethod:p0.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return p0.credentialFromTaggedObject(e)}static credentialFromError(e){return p0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return p0.credential(r,n)}catch{return null}}}p0.GOOGLE_SIGN_IN_METHOD="google.com";p0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends hw{constructor(){super("github.com")}static credential(e){return Qp._fromParams({providerId:g0.PROVIDER_ID,signInMethod:g0.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return g0.credentialFromTaggedObject(e)}static credentialFromError(e){return g0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return g0.credential(e.oauthAccessToken)}catch{return null}}}g0.GITHUB_SIGN_IN_METHOD="github.com";g0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0 extends hw{constructor(){super("twitter.com")}static credential(e,r){return Qp._fromParams({providerId:x0.PROVIDER_ID,signInMethod:x0.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return x0.credentialFromTaggedObject(e)}static credentialFromError(e){return x0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return x0.credential(r,n)}catch{return null}}}x0.TWITTER_SIGN_IN_METHOD="twitter.com";x0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dpe(t,e){return fw(t,"POST","/v1/accounts:signUp",mA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await jh._fromIdTokenResponse(e,n,a),o=LU(n);return new Vp({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=LU(n);return new Vp({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function LU(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE extends AA{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,GE.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new GE(e,r,n,a)}}function LY(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?GE._fromErrorAndOperation(t,s,e,n):s})}async function Rpe(t,e,r=!1){const n=await e2(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Vp._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mpe(t,e,r=!1){const{auth:n}=t;if(If(n.app))return Promise.reject(Mh(n));const a="reauthenticate";try{const s=await e2(t,LY(n,a,e,t),r);mn(s.idToken,n,"internal-error");const o=dD(s.idToken);mn(o,n,"internal-error");const{sub:l}=o;return mn(t.uid===l,n,"user-mismatch"),Vp._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Jd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UY(t,e,r=!1){if(If(t.app))return Promise.reject(Mh(t));const n="signIn",a=await LY(t,n,e),s=await Vp._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function Lpe(t,e){return UY(xm(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QY(t){const e=xm(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Upe(t,e,r){const n=xm(t);await $E(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Ppe)}async function Qpe(t,e,r){if(If(t.app))return Promise.reject(Mh(t));const n=xm(t),o=await $E(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dpe).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&QY(t),c}),l=await Vp._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function Vpe(t,e,r){return If(t.app)?Promise.reject(Mh(t)):Lpe(Hs(t),Wv.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&QY(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t,e){return Hs(t).setPersistence(e)}function Hpe(t,e,r,n){return Hs(t).onIdTokenChanged(e,r,n)}function $pe(t,e,r){return Hs(t).beforeAuthStateChanged(e,r)}function mD(t,e,r,n){return Hs(t).onAuthStateChanged(e,r,n)}function pD(t){return Hs(t).signOut()}const KE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VY{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(KE,"1"),this.storage.removeItem(KE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gpe=1e3,Kpe=10;class HY extends VY{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FY(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);cpe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Kpe):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Gpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}HY.type="LOCAL";const gD=HY;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Y extends VY{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}$Y.type="SESSION";const xD=$Y;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qpe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new sj(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await qpe(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sj.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zpe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=vD("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(f){const A=f;if(A.data.eventId===u)switch(A.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(A.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(){return window}function Wpe(t){Mf().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GY(){return typeof Mf().WorkerGlobalScope<"u"&&typeof Mf().importScripts=="function"}async function Xpe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ype(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Jpe(){return GY()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KY="firebaseLocalStorageDb",Zpe=1,qE="firebaseLocalStorage",qY="fbase_key";class Aw{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function ij(t,e){return t.transaction([qE],e?"readwrite":"readonly").objectStore(qE)}function ege(){const t=indexedDB.deleteDatabase(KY);return new Aw(t).toPromise()}function wT(){const t=indexedDB.open(KY,Zpe);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(qE,{keyPath:qY})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(qE)?e(n):(n.close(),await ege(),e(await wT()))})})}async function UU(t,e,r){const n=ij(t,!0).put({[qY]:e,value:r});return new Aw(n).toPromise()}async function tge(t,e){const r=ij(t,!1).get(e),n=await new Aw(r).toPromise();return n===void 0?null:n.value}function QU(t,e){const r=ij(t,!0).delete(e);return new Aw(r).toPromise()}const rge=800,nge=3;class zY{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>nge)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GY()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sj._getInstance(Jpe()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Xpe(),!this.activeServiceWorker)return;this.sender=new zpe(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ype()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wT();return await UU(e,KE,"1"),await QU(e,KE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>UU(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>tge(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>QU(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=ij(a,!1).getAll();return new Aw(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zY.type="LOCAL";const WY=zY;new dw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function age(t,e){return e?Ph(e):(mn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD extends hD{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tv(e,this._buildIdpRequest())}_linkToIdToken(e,r){return tv(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return tv(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function sge(t){return UY(t.auth,new yD(t),t.bypassAuthState)}function ige(t){const{auth:e,user:r}=t;return mn(r,e,"internal-error"),Mpe(r,new yD(t),t.bypassAuthState)}async function oge(t){const{auth:e,user:r}=t;return mn(r,e,"internal-error"),Rpe(r,new yD(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XY{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sge;case"linkViaPopup":case"linkViaRedirect":return oge;case"reauthViaPopup":case"reauthViaRedirect":return ige;default:Jd(this.auth,"internal-error")}}resolve(e){Zh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lge=new dw(2e3,1e4);class Mx extends XY{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,Mx.currentPopupAction&&Mx.currentPopupAction.cancel(),Mx.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mn(e,this.auth,"internal-error"),e}async onExecution(){Zh(this.filter.length===1,"Popup operations only handle one event");const e=vD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Rf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Rf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mx.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lge.get())};e()}}Mx.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cge="pendingRedirect",$_=new Map;class uge extends XY{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=$_.get(this.auth._key());if(!e){try{const n=await dge(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}$_.set(this.auth._key(),e)}return this.bypassAuthState||$_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dge(t,e){const r=Age(e),n=hge(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function fge(t,e){$_.set(t._key(),e)}function hge(t){return Ph(t._redirectPersistence)}function Age(t){return V_(cge,t.config.apiKey,t.name)}async function mge(t,e,r=!1){if(If(t.app))return Promise.reject(Mh(t));const n=xm(t),a=age(n,e),o=await new uge(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pge=10*60*1e3;class gge{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xge(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!YY(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Rf(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pge&&this.cachedEventUids.clear(),this.cachedEventUids.has(VU(e))}saveEventToCache(e){this.cachedEventUids.add(VU(e)),this.lastProcessedEventTime=Date.now()}}function VU(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YY({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xge(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YY(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vge(t,e={}){return pA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yge=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bge=/^https?/;async function wge(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vge(t);for(const r of e)try{if(Nge(r))return}catch{}Jd(t,"unauthorized-domain")}function Nge(t){const e=yT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!bge.test(r))return!1;if(yge.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cge=new dw(3e4,6e4);function HU(){const t=Mf().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function _ge(t){return new Promise((e,r)=>{var n,a,s;function o(){HU(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HU(),r(Rf(t,"network-request-failed"))},timeout:Cge.get()})}if(!((a=(n=Mf().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=Mf().gapi)===null||s===void 0)&&s.load)o();else{const l=xpe("iframefcb");return Mf()[l]=()=>{gapi.load?o():r(Rf(t,"network-request-failed"))},DY(`${gpe()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw G_=null,e})}let G_=null;function Ege(t){return G_=G_||_ge(t),G_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sge=new dw(5e3,15e3),Ige="__/auth/iframe",jge="emulator/auth/iframe",Pge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bge=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tge(t){const e=t.config;mn(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?uD(e,jge):`https://${t.config.authDomain}/${Ige}`,n={apiKey:e.apiKey,appName:t.name,v:zv},a=Bge.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${uw(n).slice(1)}`}async function kge(t){const e=await Ege(t),r=Mf().gapi;return mn(r,t,"internal-error"),e.open({where:document.body,url:Tge(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pge,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=Rf(t,"network-request-failed"),l=Mf().setTimeout(()=>{s(o)},Sge.get());function c(){Mf().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Oge=500,Dge=600,Rge="_blank",Mge="http://localhost";class $U{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lge(t,e,r,n=Oge,a=Dge){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Fge),{width:n.toString(),height:a.toString(),top:s,left:o}),u=io().toLowerCase();r&&(l=jY(u)?Rge:r),SY(u)&&(e=e||Mge,c.scrollbars="yes");const d=Object.entries(c).reduce((A,[h,m])=>`${A}${h}=${m},`,"");if(lpe(u)&&l!=="_self")return Uge(e||"",l),new $U(null);const f=window.open(e||"",l,d);mn(f,t,"popup-blocked");try{f.focus()}catch{}return new $U(f)}function Uge(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qge="__/auth/handler",Vge="emulator/auth/handler",Hge=encodeURIComponent("fac");async function GU(t,e,r,n,a,s){mn(t.config.authDomain,t,"auth-domain-config-required"),mn(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:zv,eventId:a};if(e instanceof MY){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",T0e(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof hw){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${Hge}=${encodeURIComponent(c)}`:"";return`${$ge(t)}?${uw(l).slice(1)}${u}`}function $ge({config:t}){return t.emulator?uD(t,Vge):`https://${t.authDomain}/${Qge}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3="webStorageSupport";class Gge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xD,this._completeRedirectFn=mge,this._overrideRedirectResult=fge}async _openPopup(e,r,n,a){var s;Zh((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await GU(e,r,n,yT(),a);return Lge(e,o,vD())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await GU(e,r,n,yT(),a);return Wpe(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(Zh(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await kge(e),n=new gge(e);return r.register("authEvent",a=>(mn(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(c3,{type:c3},a=>{var s;const o=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s[c3];o!==void 0&&r(!!o),Jd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=wge(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return FY()||IY()||fD()}}const Kge=Gge;var KU="@firebase/auth",qU="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qge{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){mn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zge(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Wge(t){vv(new Up("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;mn(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OY(t)},u=new Ape(n,a,s,c);return Npe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),vv(new Up("auth-internal",e=>{const r=xm(e.getProvider("auth").getImmediate());return(n=>new qge(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),H0(KU,qU,zge(t)),H0(KU,qU,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xge=5*60,Yge=dY("authIdTokenMaxAge")||Xge;let zU=null;const Jge=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Yge)return;const a=r==null?void 0:r.token;zU!==a&&(zU=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function NT(t=oD()){const e=sD(t,"auth");if(e.isInitialized())return e.getImmediate();const r=wpe(t,{popupRedirectResolver:Kge,persistence:[WY,gD,xD]}),n=dY("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=Jge(s.toString());$pe(r,o,()=>o(r.currentUser)),Hpe(r,l=>o(l))}}const a=cY("auth");return a&&Cpe(r,`http://${a}`),r}function Zge(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mpe({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=Rf("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Zge().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Wge("Browser");var exe="firebase",txe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */H0(exe,txe,"app");var WU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vp,JY;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,S){function E(){}E.prototype=S.prototype,_.D=S.prototype,_.prototype=new E,_.prototype.constructor=_,_.C=function(F,P,k){for(var D=Array(arguments.length-2),J=2;J<arguments.length;J++)D[J-2]=arguments[J];return S.prototype[P].apply(F,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(_,S,E){E||(E=0);var F=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)F[P]=S.charCodeAt(E++)|S.charCodeAt(E++)<<8|S.charCodeAt(E++)<<16|S.charCodeAt(E++)<<24;else for(P=0;16>P;++P)F[P]=S[E++]|S[E++]<<8|S[E++]<<16|S[E++]<<24;S=_.g[0],E=_.g[1],P=_.g[2];var k=_.g[3],D=S+(k^E&(P^k))+F[0]+3614090360&4294967295;S=E+(D<<7&4294967295|D>>>25),D=k+(P^S&(E^P))+F[1]+3905402710&4294967295,k=S+(D<<12&4294967295|D>>>20),D=P+(E^k&(S^E))+F[2]+606105819&4294967295,P=k+(D<<17&4294967295|D>>>15),D=E+(S^P&(k^S))+F[3]+3250441966&4294967295,E=P+(D<<22&4294967295|D>>>10),D=S+(k^E&(P^k))+F[4]+4118548399&4294967295,S=E+(D<<7&4294967295|D>>>25),D=k+(P^S&(E^P))+F[5]+1200080426&4294967295,k=S+(D<<12&4294967295|D>>>20),D=P+(E^k&(S^E))+F[6]+2821735955&4294967295,P=k+(D<<17&4294967295|D>>>15),D=E+(S^P&(k^S))+F[7]+4249261313&4294967295,E=P+(D<<22&4294967295|D>>>10),D=S+(k^E&(P^k))+F[8]+1770035416&4294967295,S=E+(D<<7&4294967295|D>>>25),D=k+(P^S&(E^P))+F[9]+2336552879&4294967295,k=S+(D<<12&4294967295|D>>>20),D=P+(E^k&(S^E))+F[10]+4294925233&4294967295,P=k+(D<<17&4294967295|D>>>15),D=E+(S^P&(k^S))+F[11]+2304563134&4294967295,E=P+(D<<22&4294967295|D>>>10),D=S+(k^E&(P^k))+F[12]+1804603682&4294967295,S=E+(D<<7&4294967295|D>>>25),D=k+(P^S&(E^P))+F[13]+4254626195&4294967295,k=S+(D<<12&4294967295|D>>>20),D=P+(E^k&(S^E))+F[14]+2792965006&4294967295,P=k+(D<<17&4294967295|D>>>15),D=E+(S^P&(k^S))+F[15]+1236535329&4294967295,E=P+(D<<22&4294967295|D>>>10),D=S+(P^k&(E^P))+F[1]+4129170786&4294967295,S=E+(D<<5&4294967295|D>>>27),D=k+(E^P&(S^E))+F[6]+3225465664&4294967295,k=S+(D<<9&4294967295|D>>>23),D=P+(S^E&(k^S))+F[11]+643717713&4294967295,P=k+(D<<14&4294967295|D>>>18),D=E+(k^S&(P^k))+F[0]+3921069994&4294967295,E=P+(D<<20&4294967295|D>>>12),D=S+(P^k&(E^P))+F[5]+3593408605&4294967295,S=E+(D<<5&4294967295|D>>>27),D=k+(E^P&(S^E))+F[10]+38016083&4294967295,k=S+(D<<9&4294967295|D>>>23),D=P+(S^E&(k^S))+F[15]+3634488961&4294967295,P=k+(D<<14&4294967295|D>>>18),D=E+(k^S&(P^k))+F[4]+3889429448&4294967295,E=P+(D<<20&4294967295|D>>>12),D=S+(P^k&(E^P))+F[9]+568446438&4294967295,S=E+(D<<5&4294967295|D>>>27),D=k+(E^P&(S^E))+F[14]+3275163606&4294967295,k=S+(D<<9&4294967295|D>>>23),D=P+(S^E&(k^S))+F[3]+4107603335&4294967295,P=k+(D<<14&4294967295|D>>>18),D=E+(k^S&(P^k))+F[8]+1163531501&4294967295,E=P+(D<<20&4294967295|D>>>12),D=S+(P^k&(E^P))+F[13]+2850285829&4294967295,S=E+(D<<5&4294967295|D>>>27),D=k+(E^P&(S^E))+F[2]+4243563512&4294967295,k=S+(D<<9&4294967295|D>>>23),D=P+(S^E&(k^S))+F[7]+1735328473&4294967295,P=k+(D<<14&4294967295|D>>>18),D=E+(k^S&(P^k))+F[12]+2368359562&4294967295,E=P+(D<<20&4294967295|D>>>12),D=S+(E^P^k)+F[5]+4294588738&4294967295,S=E+(D<<4&4294967295|D>>>28),D=k+(S^E^P)+F[8]+2272392833&4294967295,k=S+(D<<11&4294967295|D>>>21),D=P+(k^S^E)+F[11]+1839030562&4294967295,P=k+(D<<16&4294967295|D>>>16),D=E+(P^k^S)+F[14]+4259657740&4294967295,E=P+(D<<23&4294967295|D>>>9),D=S+(E^P^k)+F[1]+2763975236&4294967295,S=E+(D<<4&4294967295|D>>>28),D=k+(S^E^P)+F[4]+1272893353&4294967295,k=S+(D<<11&4294967295|D>>>21),D=P+(k^S^E)+F[7]+4139469664&4294967295,P=k+(D<<16&4294967295|D>>>16),D=E+(P^k^S)+F[10]+3200236656&4294967295,E=P+(D<<23&4294967295|D>>>9),D=S+(E^P^k)+F[13]+681279174&4294967295,S=E+(D<<4&4294967295|D>>>28),D=k+(S^E^P)+F[0]+3936430074&4294967295,k=S+(D<<11&4294967295|D>>>21),D=P+(k^S^E)+F[3]+3572445317&4294967295,P=k+(D<<16&4294967295|D>>>16),D=E+(P^k^S)+F[6]+76029189&4294967295,E=P+(D<<23&4294967295|D>>>9),D=S+(E^P^k)+F[9]+3654602809&4294967295,S=E+(D<<4&4294967295|D>>>28),D=k+(S^E^P)+F[12]+3873151461&4294967295,k=S+(D<<11&4294967295|D>>>21),D=P+(k^S^E)+F[15]+530742520&4294967295,P=k+(D<<16&4294967295|D>>>16),D=E+(P^k^S)+F[2]+3299628645&4294967295,E=P+(D<<23&4294967295|D>>>9),D=S+(P^(E|~k))+F[0]+4096336452&4294967295,S=E+(D<<6&4294967295|D>>>26),D=k+(E^(S|~P))+F[7]+1126891415&4294967295,k=S+(D<<10&4294967295|D>>>22),D=P+(S^(k|~E))+F[14]+2878612391&4294967295,P=k+(D<<15&4294967295|D>>>17),D=E+(k^(P|~S))+F[5]+4237533241&4294967295,E=P+(D<<21&4294967295|D>>>11),D=S+(P^(E|~k))+F[12]+1700485571&4294967295,S=E+(D<<6&4294967295|D>>>26),D=k+(E^(S|~P))+F[3]+2399980690&4294967295,k=S+(D<<10&4294967295|D>>>22),D=P+(S^(k|~E))+F[10]+4293915773&4294967295,P=k+(D<<15&4294967295|D>>>17),D=E+(k^(P|~S))+F[1]+2240044497&4294967295,E=P+(D<<21&4294967295|D>>>11),D=S+(P^(E|~k))+F[8]+1873313359&4294967295,S=E+(D<<6&4294967295|D>>>26),D=k+(E^(S|~P))+F[15]+4264355552&4294967295,k=S+(D<<10&4294967295|D>>>22),D=P+(S^(k|~E))+F[6]+2734768916&4294967295,P=k+(D<<15&4294967295|D>>>17),D=E+(k^(P|~S))+F[13]+1309151649&4294967295,E=P+(D<<21&4294967295|D>>>11),D=S+(P^(E|~k))+F[4]+4149444226&4294967295,S=E+(D<<6&4294967295|D>>>26),D=k+(E^(S|~P))+F[11]+3174756917&4294967295,k=S+(D<<10&4294967295|D>>>22),D=P+(S^(k|~E))+F[2]+718787259&4294967295,P=k+(D<<15&4294967295|D>>>17),D=E+(k^(P|~S))+F[9]+3951481745&4294967295,_.g[0]=_.g[0]+S&4294967295,_.g[1]=_.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,_.g[2]=_.g[2]+P&4294967295,_.g[3]=_.g[3]+k&4294967295}n.prototype.u=function(_,S){S===void 0&&(S=_.length);for(var E=S-this.blockSize,F=this.B,P=this.h,k=0;k<S;){if(P==0)for(;k<=E;)a(this,_,k),k+=this.blockSize;if(typeof _=="string"){for(;k<S;)if(F[P++]=_.charCodeAt(k++),P==this.blockSize){a(this,F),P=0;break}}else for(;k<S;)if(F[P++]=_[k++],P==this.blockSize){a(this,F),P=0;break}}this.h=P,this.o+=S},n.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var S=1;S<_.length-8;++S)_[S]=0;var E=8*this.o;for(S=_.length-8;S<_.length;++S)_[S]=E&255,E/=256;for(this.u(_),_=Array(16),S=E=0;4>S;++S)for(var F=0;32>F;F+=8)_[E++]=this.g[S]>>>F&255;return _};function s(_,S){var E=l;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=S(_)}function o(_,S){this.h=S;for(var E=[],F=!0,P=_.length-1;0<=P;P--){var k=_[P]|0;F&&k==S||(E[P]=k,F=!1)}this.g=E}var l={};function c(_){return-128<=_&&128>_?s(_,function(S){return new o([S|0],0>S?-1:0)}):new o([_|0],0>_?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return f;if(0>_)return g(u(-_));for(var S=[],E=1,F=0;_>=E;F++)S[F]=_/E|0,E*=4294967296;return new o(S,0)}function d(_,S){if(_.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_.charAt(0)=="-")return g(d(_.substring(1),S));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(S,8)),F=f,P=0;P<_.length;P+=8){var k=Math.min(8,_.length-P),D=parseInt(_.substring(P,P+k),S);8>k?(k=u(Math.pow(S,k)),F=F.j(k).add(u(D))):(F=F.j(E),F=F.add(u(D)))}return F}var f=c(0),A=c(1),h=c(16777216);t=o.prototype,t.m=function(){if(p(this))return-g(this).m();for(var _=0,S=1,E=0;E<this.g.length;E++){var F=this.i(E);_+=(0<=F?F:4294967296+F)*S,S*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+g(this).toString(_);for(var S=u(Math.pow(_,6)),E=this,F="";;){var P=w(E,S).g;E=v(E,P.j(S));var k=((0<E.g.length?E.g[0]:E.h)>>>0).toString(_);if(E=P,m(E))return k+F;for(;6>k.length;)k="0"+k;F=k+F}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var S=0;S<_.g.length;S++)if(_.g[S]!=0)return!1;return!0}function p(_){return _.h==-1}t.l=function(_){return _=v(this,_),p(_)?-1:m(_)?0:1};function g(_){for(var S=_.g.length,E=[],F=0;F<S;F++)E[F]=~_.g[F];return new o(E,~_.h).add(A)}t.abs=function(){return p(this)?g(this):this},t.add=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],F=0,P=0;P<=S;P++){var k=F+(this.i(P)&65535)+(_.i(P)&65535),D=(k>>>16)+(this.i(P)>>>16)+(_.i(P)>>>16);F=D>>>16,k&=65535,D&=65535,E[P]=D<<16|k}return new o(E,E[E.length-1]&-2147483648?-1:0)};function v(_,S){return _.add(g(S))}t.j=function(_){if(m(this)||m(_))return f;if(p(this))return p(_)?g(this).j(g(_)):g(g(this).j(_));if(p(_))return g(this.j(g(_)));if(0>this.l(h)&&0>_.l(h))return u(this.m()*_.m());for(var S=this.g.length+_.g.length,E=[],F=0;F<2*S;F++)E[F]=0;for(F=0;F<this.g.length;F++)for(var P=0;P<_.g.length;P++){var k=this.i(F)>>>16,D=this.i(F)&65535,J=_.i(P)>>>16,fe=_.i(P)&65535;E[2*F+2*P]+=D*fe,y(E,2*F+2*P),E[2*F+2*P+1]+=k*fe,y(E,2*F+2*P+1),E[2*F+2*P+1]+=D*J,y(E,2*F+2*P+1),E[2*F+2*P+2]+=k*J,y(E,2*F+2*P+2)}for(F=0;F<S;F++)E[F]=E[2*F+1]<<16|E[2*F];for(F=S;F<2*S;F++)E[F]=0;return new o(E,0)};function y(_,S){for(;(_[S]&65535)!=_[S];)_[S+1]+=_[S]>>>16,_[S]&=65535,S++}function b(_,S){this.g=_,this.h=S}function w(_,S){if(m(S))throw Error("division by zero");if(m(_))return new b(f,f);if(p(_))return S=w(g(_),S),new b(g(S.g),g(S.h));if(p(S))return S=w(_,g(S)),new b(g(S.g),S.h);if(30<_.g.length){if(p(_)||p(S))throw Error("slowDivide_ only works with positive integers.");for(var E=A,F=S;0>=F.l(_);)E=j(E),F=j(F);var P=I(E,1),k=I(F,1);for(F=I(F,2),E=I(E,2);!m(F);){var D=k.add(F);0>=D.l(_)&&(P=P.add(E),k=D),F=I(F,1),E=I(E,1)}return S=v(_,P.j(S)),new b(P,S)}for(P=f;0<=_.l(S);){for(E=Math.max(1,Math.floor(_.m()/S.m())),F=Math.ceil(Math.log(E)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),k=u(E),D=k.j(S);p(D)||0<D.l(_);)E-=F,k=u(E),D=k.j(S);m(k)&&(k=A),P=P.add(k),_=v(_,D)}return new b(P,_)}t.A=function(_){return w(this,_).h},t.and=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],F=0;F<S;F++)E[F]=this.i(F)&_.i(F);return new o(E,this.h&_.h)},t.or=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],F=0;F<S;F++)E[F]=this.i(F)|_.i(F);return new o(E,this.h|_.h)},t.xor=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],F=0;F<S;F++)E[F]=this.i(F)^_.i(F);return new o(E,this.h^_.h)};function j(_){for(var S=_.g.length+1,E=[],F=0;F<S;F++)E[F]=_.i(F)<<1|_.i(F-1)>>>31;return new o(E,_.h)}function I(_,S){var E=S>>5;S%=32;for(var F=_.g.length-E,P=[],k=0;k<F;k++)P[k]=0<S?_.i(k+E)>>>S|_.i(k+E+1)<<32-S:_.i(k+E);return new o(P,_.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,JY=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,vp=o}).apply(typeof WU<"u"?WU:typeof self<"u"?self:typeof window<"u"?window:{});var GN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZY,jy,eJ,K_,CT,tJ,rJ,nJ;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,X,ge){return C==Array.prototype||C==Object.prototype||(C[X]=ge.value),C};function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof GN=="object"&&GN];for(var X=0;X<C.length;++X){var ge=C[X];if(ge&&ge.Math==Math)return ge}throw Error("Cannot find global object")}var n=r(this);function a(C,X){if(X)e:{var ge=n;C=C.split(".");for(var $e=0;$e<C.length-1;$e++){var Bt=C[$e];if(!(Bt in ge))break e;ge=ge[Bt]}C=C[C.length-1],$e=ge[C],X=X($e),X!=$e&&X!=null&&e(ge,C,{configurable:!0,writable:!0,value:X})}}function s(C,X){C instanceof String&&(C+="");var ge=0,$e=!1,Bt={next:function(){if(!$e&&ge<C.length){var Kt=ge++;return{value:X(Kt,C[Kt]),done:!1}}return $e=!0,{done:!0,value:void 0}}};return Bt[Symbol.iterator]=function(){return Bt},Bt}a("Array.prototype.values",function(C){return C||function(){return s(this,function(X,ge){return ge})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(C){var X=typeof C;return X=X!="object"?X:C?Array.isArray(C)?"array":X:"null",X=="array"||X=="object"&&typeof C.length=="number"}function u(C){var X=typeof C;return X=="object"&&C!=null||X=="function"}function d(C,X,ge){return C.call.apply(C.bind,arguments)}function f(C,X,ge){if(!C)throw Error();if(2<arguments.length){var $e=Array.prototype.slice.call(arguments,2);return function(){var Bt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Bt,$e),C.apply(X,Bt)}}return function(){return C.apply(X,arguments)}}function A(C,X,ge){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,A.apply(null,arguments)}function h(C,X){var ge=Array.prototype.slice.call(arguments,1);return function(){var $e=ge.slice();return $e.push.apply($e,arguments),C.apply(this,$e)}}function m(C,X){function ge(){}ge.prototype=X.prototype,C.aa=X.prototype,C.prototype=new ge,C.prototype.constructor=C,C.Qb=function($e,Bt,Kt){for(var yr=Array(arguments.length-2),Kn=2;Kn<arguments.length;Kn++)yr[Kn-2]=arguments[Kn];return X.prototype[Bt].apply($e,yr)}}function p(C){const X=C.length;if(0<X){const ge=Array(X);for(let $e=0;$e<X;$e++)ge[$e]=C[$e];return ge}return[]}function g(C,X){for(let ge=1;ge<arguments.length;ge++){const $e=arguments[ge];if(c($e)){const Bt=C.length||0,Kt=$e.length||0;C.length=Bt+Kt;for(let yr=0;yr<Kt;yr++)C[Bt+yr]=$e[yr]}else C.push($e)}}class v{constructor(X,ge){this.i=X,this.j=ge,this.h=0,this.g=null}get(){let X;return 0<this.h?(this.h--,X=this.g,this.g=X.next,X.next=null):X=this.i(),X}}function y(C){return/^[\s\xa0]*$/.test(C)}function b(){var C=l.navigator;return C&&(C=C.userAgent)?C:""}function w(C){return w[" "](C),C}w[" "]=function(){};var j=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function I(C,X,ge){for(const $e in C)X.call(ge,C[$e],$e,C)}function _(C,X){for(const ge in C)X.call(void 0,C[ge],ge,C)}function S(C){const X={};for(const ge in C)X[ge]=C[ge];return X}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(C,X){let ge,$e;for(let Bt=1;Bt<arguments.length;Bt++){$e=arguments[Bt];for(ge in $e)C[ge]=$e[ge];for(let Kt=0;Kt<E.length;Kt++)ge=E[Kt],Object.prototype.hasOwnProperty.call($e,ge)&&(C[ge]=$e[ge])}}function P(C){var X=1;C=C.split(":");const ge=[];for(;0<X&&C.length;)ge.push(C.shift()),X--;return C.length&&ge.push(C.join(":")),ge}function k(C){l.setTimeout(()=>{throw C},0)}function D(){var C=ne;let X=null;return C.g&&(X=C.g,C.g=C.g.next,C.g||(C.h=null),X.next=null),X}class J{constructor(){this.h=this.g=null}add(X,ge){const $e=fe.get();$e.set(X,ge),this.h?this.h.next=$e:this.g=$e,this.h=$e}}var fe=new v(()=>new Ae,C=>C.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(X,ge){this.h=X,this.g=ge,this.next=null}reset(){this.next=this.g=this.h=null}}let me,pe=!1,ne=new J,Pe=()=>{const C=l.Promise.resolve(void 0);me=()=>{C.then(Be)}};var Be=()=>{for(var C;C=D();){try{C.h.call(C.g)}catch(ge){k(ge)}var X=fe;X.j(C),100>X.h&&(X.h++,C.next=X.g,X.g=C)}pe=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(C,X){this.type=C,this.g=this.target=X,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var C=!1,X=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const ge=()=>{};l.addEventListener("test",ge,X),l.removeEventListener("test",ge,X)}catch{}return C}();function U(C,X){if(G.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var ge=this.type=C.type,$e=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=X,X=C.relatedTarget){if(j){e:{try{w(X.nodeName);var Bt=!0;break e}catch{}Bt=!1}Bt||(X=null)}}else ge=="mouseover"?X=C.fromElement:ge=="mouseout"&&(X=C.toElement);this.relatedTarget=X,$e?(this.clientX=$e.clientX!==void 0?$e.clientX:$e.pageX,this.clientY=$e.clientY!==void 0?$e.clientY:$e.pageY,this.screenX=$e.screenX||0,this.screenY=$e.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:Y[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&U.aa.h.call(this)}}m(U,G);var Y={2:"touch",3:"pen",4:"mouse"};U.prototype.h=function(){U.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),R=0;function H(C,X,ge,$e,Bt){this.listener=C,this.proxy=null,this.src=X,this.type=ge,this.capture=!!$e,this.ha=Bt,this.key=++R,this.da=this.fa=!1}function te(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function ye(C){this.src=C,this.g={},this.h=0}ye.prototype.add=function(C,X,ge,$e,Bt){var Kt=C.toString();C=this.g[Kt],C||(C=this.g[Kt]=[],this.h++);var yr=Ge(C,X,$e,Bt);return-1<yr?(X=C[yr],ge||(X.fa=!1)):(X=new H(X,this.src,Kt,!!$e,Bt),X.fa=ge,C.push(X)),X};function Q(C,X){var ge=X.type;if(ge in C.g){var $e=C.g[ge],Bt=Array.prototype.indexOf.call($e,X,void 0),Kt;(Kt=0<=Bt)&&Array.prototype.splice.call($e,Bt,1),Kt&&(te(X),C.g[ge].length==0&&(delete C.g[ge],C.h--))}}function Ge(C,X,ge,$e){for(var Bt=0;Bt<C.length;++Bt){var Kt=C[Bt];if(!Kt.da&&Kt.listener==X&&Kt.capture==!!ge&&Kt.ha==$e)return Bt}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),ee={};function Ie(C,X,ge,$e,Bt){if(Array.isArray(X)){for(var Kt=0;Kt<X.length;Kt++)Ie(C,X[Kt],ge,$e,Bt);return null}return ge=Ct(ge),C&&C[Z]?C.K(X,ge,u($e)?!!$e.capture:!1,Bt):ue(C,X,ge,!1,$e,Bt)}function ue(C,X,ge,$e,Bt,Kt){if(!X)throw Error("Invalid event type");var yr=u(Bt)?!!Bt.capture:!!Bt,Kn=pt(C);if(Kn||(C[ie]=Kn=new ye(C)),ge=Kn.add(X,ge,$e,yr,Kt),ge.proxy)return ge;if($e=se(),ge.proxy=$e,$e.src=C,$e.listener=ge,C.addEventListener)q||(Bt=yr),Bt===void 0&&(Bt=!1),C.addEventListener(X.toString(),$e,Bt);else if(C.attachEvent)C.attachEvent(it(X.toString()),$e);else if(C.addListener&&C.removeListener)C.addListener($e);else throw Error("addEventListener and attachEvent are unavailable.");return ge}function se(){function C(ge){return X.call(C.src,C.listener,ge)}const X=At;return C}function Ee(C,X,ge,$e,Bt){if(Array.isArray(X))for(var Kt=0;Kt<X.length;Kt++)Ee(C,X[Kt],ge,$e,Bt);else $e=u($e)?!!$e.capture:!!$e,ge=Ct(ge),C&&C[Z]?(C=C.i,X=String(X).toString(),X in C.g&&(Kt=C.g[X],ge=Ge(Kt,ge,$e,Bt),-1<ge&&(te(Kt[ge]),Array.prototype.splice.call(Kt,ge,1),Kt.length==0&&(delete C.g[X],C.h--)))):C&&(C=pt(C))&&(X=C.g[X.toString()],C=-1,X&&(C=Ge(X,ge,$e,Bt)),(ge=-1<C?X[C]:null)&&je(ge))}function je(C){if(typeof C!="number"&&C&&!C.da){var X=C.src;if(X&&X[Z])Q(X.i,C);else{var ge=C.type,$e=C.proxy;X.removeEventListener?X.removeEventListener(ge,$e,C.capture):X.detachEvent?X.detachEvent(it(ge),$e):X.addListener&&X.removeListener&&X.removeListener($e),(ge=pt(X))?(Q(ge,C),ge.h==0&&(ge.src=null,X[ie]=null)):te(C)}}}function it(C){return C in ee?ee[C]:ee[C]="on"+C}function At(C,X){if(C.da)C=!0;else{X=new U(X,this);var ge=C.listener,$e=C.ha||C.src;C.fa&&je(C),C=ge.call($e,X)}return C}function pt(C){return C=C[ie],C instanceof ye?C:null}var yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(C){return typeof C=="function"?C:(C[yt]||(C[yt]=function(X){return C.handleEvent(X)}),C[yt])}function Et(){O.call(this),this.i=new ye(this),this.M=this,this.F=null}m(Et,O),Et.prototype[Z]=!0,Et.prototype.removeEventListener=function(C,X,ge,$e){Ee(this,C,X,ge,$e)};function Re(C,X){var ge,$e=C.F;if($e)for(ge=[];$e;$e=$e.F)ge.push($e);if(C=C.M,$e=X.type||X,typeof X=="string")X=new G(X,C);else if(X instanceof G)X.target=X.target||C;else{var Bt=X;X=new G($e,C),F(X,Bt)}if(Bt=!0,ge)for(var Kt=ge.length-1;0<=Kt;Kt--){var yr=X.g=ge[Kt];Bt=We(yr,$e,!0,X)&&Bt}if(yr=X.g=C,Bt=We(yr,$e,!0,X)&&Bt,Bt=We(yr,$e,!1,X)&&Bt,ge)for(Kt=0;Kt<ge.length;Kt++)yr=X.g=ge[Kt],Bt=We(yr,$e,!1,X)&&Bt}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var C=this.i,X;for(X in C.g){for(var ge=C.g[X],$e=0;$e<ge.length;$e++)te(ge[$e]);delete C.g[X],C.h--}}this.F=null},Et.prototype.K=function(C,X,ge,$e){return this.i.add(String(C),X,!1,ge,$e)},Et.prototype.L=function(C,X,ge,$e){return this.i.add(String(C),X,!0,ge,$e)};function We(C,X,ge,$e){if(X=C.i.g[String(X)],!X)return!0;X=X.concat();for(var Bt=!0,Kt=0;Kt<X.length;++Kt){var yr=X[Kt];if(yr&&!yr.da&&yr.capture==ge){var Kn=yr.listener,Bs=yr.ha||yr.src;yr.fa&&Q(C.i,yr),Bt=Kn.call(Bs,$e)!==!1&&Bt}}return Bt&&!$e.defaultPrevented}function et(C,X,ge){if(typeof C=="function")ge&&(C=A(C,ge));else if(C&&typeof C.handleEvent=="function")C=A(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(X)?-1:l.setTimeout(C,X||0)}function xe(C){C.g=et(()=>{C.g=null,C.i&&(C.i=!1,xe(C))},C.l);const X=C.h;C.h=null,C.m.apply(null,X)}class de extends O{constructor(X,ge){super(),this.m=X,this.l=ge,this.h=null,this.i=!1,this.g=null}j(X){this.h=arguments,this.g?this.i=!0:xe(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ue(C){O.call(this),this.h=C,this.g={}}m(Ue,O);var Ke=[];function Ne(C){I(C.g,function(X,ge){this.g.hasOwnProperty(ge)&&je(X)},C),C.g={}}Ue.prototype.N=function(){Ue.aa.N.call(this),Ne(this)},Ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mt=l.JSON.stringify,wt=l.JSON.parse,we=class{stringify(C){return l.JSON.stringify(C,void 0)}parse(C){return l.JSON.parse(C,void 0)}};function ae(){}ae.prototype.h=null;function be(C){return C.h||(C.h=C.i())}function ve(){}var Ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ce(){G.call(this,"d")}m(ce,G);function ke(){G.call(this,"c")}m(ke,G);var dt={},ft=null;function gt(){return ft=ft||new Et}dt.La="serverreachability";function Rt(C){G.call(this,dt.La,C)}m(Rt,G);function ot(C){const X=gt();Re(X,new Rt(X))}dt.STAT_EVENT="statevent";function Se(C,X){G.call(this,dt.STAT_EVENT,C),this.stat=X}m(Se,G);function ht(C){const X=gt();Re(X,new Se(X,C))}dt.Ma="timingevent";function W(C,X){G.call(this,dt.Ma,C),this.size=X}m(W,G);function Te(C,X){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){C()},X)}function Ze(){this.g=!0}Ze.prototype.xa=function(){this.g=!1};function tt(C,X,ge,$e,Bt,Kt){C.info(function(){if(C.g)if(Kt)for(var yr="",Kn=Kt.split("&"),Bs=0;Bs<Kn.length;Bs++){var On=Kn[Bs].split("=");if(1<On.length){var na=On[0];On=On[1];var qa=na.split("_");yr=2<=qa.length&&qa[1]=="type"?yr+(na+"="+On+"&"):yr+(na+"=redacted&")}}else yr=null;else yr=Kt;return"XMLHTTP REQ ("+$e+") [attempt "+Bt+"]: "+X+`
`+ge+`
`+yr})}function ut(C,X,ge,$e,Bt,Kt,yr){C.info(function(){return"XMLHTTP RESP ("+$e+") [ attempt "+Bt+"]: "+X+`
`+ge+`
`+Kt+" "+yr})}function T(C,X,ge,$e){C.info(function(){return"XMLHTTP TEXT ("+X+"): "+L(C,ge)+($e?" "+$e:"")})}function M(C,X){C.info(function(){return"TIMEOUT: "+X})}Ze.prototype.info=function(){};function L(C,X){if(!C.g)return X;if(!X)return null;try{var ge=JSON.parse(X);if(ge){for(C=0;C<ge.length;C++)if(Array.isArray(ge[C])){var $e=ge[C];if(!(2>$e.length)){var Bt=$e[1];if(Array.isArray(Bt)&&!(1>Bt.length)){var Kt=Bt[0];if(Kt!="noop"&&Kt!="stop"&&Kt!="close")for(var yr=1;yr<Bt.length;yr++)Bt[yr]=""}}}}return mt(ge)}catch{return X}}var K={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},le;function Me(){}m(Me,ae),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},le=new Me;function qe(C,X,ge,$e){this.j=C,this.i=X,this.l=ge,this.R=$e||1,this.U=new Ue(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lt}function lt(){this.i=null,this.g="",this.h=!1}var Fe={},Xe={};function he(C,X,ge){C.L=1,C.v=vr(Dt(X)),C.m=ge,C.P=!0,He(C,null)}function He(C,X){C.F=Date.now(),Nt(C),C.A=Dt(C.v);var ge=C.A,$e=C.R;Array.isArray($e)||($e=[String($e)]),Fg(ge.i,"t",$e),C.C=0,ge=C.j.J,C.h=new lt,C.g=Ws(C.j,ge?X:null,!C.m),0<C.O&&(C.M=new de(A(C.Y,C,C.g),C.O)),X=C.U,ge=C.g,$e=C.ca;var Bt="readystatechange";Array.isArray(Bt)||(Bt&&(Ke[0]=Bt.toString()),Bt=Ke);for(var Kt=0;Kt<Bt.length;Kt++){var yr=Ie(ge,Bt[Kt],$e||X.handleEvent,!1,X.h||X);if(!yr)break;X.g[yr.key]=yr}X=C.H?S(C.H):{},C.m?(C.u||(C.u="POST"),X["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,X)):(C.u="GET",C.g.ea(C.A,C.u,null,X)),ot(),tt(C.i,C.u,C.A,C.l,C.R,C.m)}qe.prototype.ca=function(C){C=C.target;const X=this.M;X&&Ul(C)==3?X.j():this.Y(C)},qe.prototype.Y=function(C){try{if(C==this.g)e:{const qa=Ul(this.g);var X=this.g.Ba();const Mc=this.g.Z();if(!(3>qa)&&(qa!=3||this.g&&(this.h.h||this.g.oa()||Im(this.g)))){this.J||qa!=4||X==7||(X==8||0>=Mc?ot(3):ot(2)),hr(this);var ge=this.g.Z();this.X=ge;t:if(Ye(this)){var $e=Im(this.g);C="";var Bt=$e.length,Kt=Ul(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ft(this),Ot(this);var yr="";break t}this.h.i=new l.TextDecoder}for(X=0;X<Bt;X++)this.h.h=!0,C+=this.h.i.decode($e[X],{stream:!(Kt&&X==Bt-1)});$e.length=0,this.h.g+=C,this.C=0,yr=this.h.g}else yr=this.g.oa();if(this.o=ge==200,ut(this.i,this.u,this.A,this.l,this.R,qa,ge),this.o){if(this.T&&!this.K){t:{if(this.g){var Kn,Bs=this.g;if((Kn=Bs.g?Bs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Kn)){var On=Kn;break t}}On=null}if(ge=On)T(this.i,this.l,ge,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lr(this,ge);else{this.o=!1,this.s=3,ht(12),Ft(this),Ot(this);break e}}if(this.P){ge=!0;let cl;for(;!this.J&&this.C<yr.length;)if(cl=ct(this,yr),cl==Xe){qa==4&&(this.s=4,ht(14),ge=!1),T(this.i,this.l,null,"[Incomplete Response]");break}else if(cl==Fe){this.s=4,ht(15),T(this.i,this.l,yr,"[Invalid Chunk]"),ge=!1;break}else T(this.i,this.l,cl,null),lr(this,cl);if(Ye(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qa!=4||yr.length!=0||this.h.h||(this.s=1,ht(16),ge=!1),this.o=this.o&&ge,!ge)T(this.i,this.l,yr,"[Invalid Chunked Response]"),Ft(this),Ot(this);else if(0<yr.length&&!this.W){this.W=!0;var na=this.j;na.g==this&&na.ba&&!na.M&&(na.j.info("Great, no buffering proxy detected. Bytes received: "+yr.length),Rr(na),na.M=!0,ht(11))}}else T(this.i,this.l,yr,null),lr(this,yr);qa==4&&Ft(this),this.o&&!this.J&&(qa==4?yn(this.j,this):(this.o=!1,Nt(this)))}else Dg(this.g),ge==400&&0<yr.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),Ft(this),Ot(this)}}}catch{}finally{}};function Ye(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function ct(C,X){var ge=C.C,$e=X.indexOf(`
`,ge);return $e==-1?Xe:(ge=Number(X.substring(ge,$e)),isNaN(ge)?Fe:($e+=1,$e+ge>X.length?Xe:(X=X.slice($e,$e+ge),C.C=$e+ge,X)))}qe.prototype.cancel=function(){this.J=!0,Ft(this)};function Nt(C){C.S=Date.now()+C.I,It(C,C.I)}function It(C,X){if(C.B!=null)throw Error("WatchDog timer not null");C.B=Te(A(C.ba,C),X)}function hr(C){C.B&&(l.clearTimeout(C.B),C.B=null)}qe.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(M(this.i,this.A),this.L!=2&&(ot(),ht(17)),Ft(this),this.s=2,Ot(this)):It(this,this.S-C)};function Ot(C){C.j.G==0||C.J||yn(C.j,C)}function Ft(C){hr(C);var X=C.M;X&&typeof X.ma=="function"&&X.ma(),C.M=null,Ne(C.U),C.g&&(X=C.g,C.g=null,X.abort(),X.ma())}function lr(C,X){try{var ge=C.j;if(ge.G!=0&&(ge.g==C||jr(ge.h,C))){if(!C.K&&jr(ge.h,C)&&ge.G==3){try{var $e=ge.Da.g.parse(X)}catch{$e=null}if(Array.isArray($e)&&$e.length==3){var Bt=$e;if(Bt[0]==0){e:if(!ge.u){if(ge.g)if(ge.g.F+3e3<C.F)dn(ge),Cu(ge);else break e;or(ge),ht(18)}}else ge.za=Bt[1],0<ge.za-ge.T&&37500>Bt[2]&&ge.F&&ge.v==0&&!ge.C&&(ge.C=Te(A(ge.Za,ge),6e3));if(1>=Fr(ge.h)&&ge.ca){try{ge.ca()}catch{}ge.ca=void 0}}else ca(ge,11)}else if((C.K||ge.g==C)&&dn(ge),!y(X))for(Bt=ge.Da.g.parse(X),X=0;X<Bt.length;X++){let On=Bt[X];if(ge.T=On[0],On=On[1],ge.G==2)if(On[0]=="c"){ge.K=On[1],ge.ia=On[2];const na=On[3];na!=null&&(ge.la=na,ge.j.info("VER="+ge.la));const qa=On[4];qa!=null&&(ge.Aa=qa,ge.j.info("SVER="+ge.Aa));const Mc=On[5];Mc!=null&&typeof Mc=="number"&&0<Mc&&($e=1.5*Mc,ge.L=$e,ge.j.info("backChannelRequestTimeoutMs_="+$e)),$e=ge;const cl=C.g;if(cl){const Ro=cl.g?cl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ro){var Kt=$e.h;Kt.g||Ro.indexOf("spdy")==-1&&Ro.indexOf("quic")==-1&&Ro.indexOf("h2")==-1||(Kt.j=Kt.l,Kt.g=new Set,Kt.h&&(Qr(Kt,Kt.h),Kt.h=null))}if($e.D){const yd=cl.g?cl.g.getResponseHeader("X-HTTP-Session-Id"):null;yd&&($e.ya=yd,Wt($e.I,$e.D,yd))}}ge.G=3,ge.l&&ge.l.ua(),ge.ba&&(ge.R=Date.now()-C.F,ge.j.info("Handshake RTT: "+ge.R+"ms")),$e=ge;var yr=C;if($e.qa=xa($e,$e.J?$e.ia:null,$e.W),yr.K){Dr($e.h,yr);var Kn=yr,Bs=$e.L;Bs&&(Kn.I=Bs),Kn.B&&(hr(Kn),Nt(Kn)),$e.g=yr}else tr($e);0<ge.i.length&&V(ge)}else On[0]!="stop"&&On[0]!="close"||ca(ge,7);else ge.G==3&&(On[0]=="stop"||On[0]=="close"?On[0]=="stop"?ca(ge,7):BA(ge):On[0]!="noop"&&ge.l&&ge.l.ta(On),ge.v=0)}}ot(4)}catch{}}var ir=class{constructor(C,X){this.g=C,this.map=X}};function Pt(C){this.l=C||10,l.PerformanceNavigationTiming?(C=l.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mr(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function Fr(C){return C.h?1:C.g?C.g.size:0}function jr(C,X){return C.h?C.h==X:C.g?C.g.has(X):!1}function Qr(C,X){C.g?C.g.add(X):C.h=X}function Dr(C,X){C.h&&C.h==X?C.h=null:C.g&&C.g.has(X)&&C.g.delete(X)}Pt.prototype.cancel=function(){if(this.i=nn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function nn(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let X=C.i;for(const ge of C.g.values())X=X.concat(ge.D);return X}return p(C.i)}function zn(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(c(C)){for(var X=[],ge=C.length,$e=0;$e<ge;$e++)X.push(C[$e]);return X}X=[],ge=0;for($e in C)X[ge++]=C[$e];return X}function xt(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(c(C)||typeof C=="string"){var X=[];C=C.length;for(var ge=0;ge<C;ge++)X.push(ge);return X}X=[],ge=0;for(const $e in C)X[ge++]=$e;return X}}}function wr(C,X){if(C.forEach&&typeof C.forEach=="function")C.forEach(X,void 0);else if(c(C)||typeof C=="string")Array.prototype.forEach.call(C,X,void 0);else for(var ge=xt(C),$e=zn(C),Bt=$e.length,Kt=0;Kt<Bt;Kt++)X.call(void 0,$e[Kt],ge&&ge[Kt],C)}var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mt(C,X){if(C){C=C.split("&");for(var ge=0;ge<C.length;ge++){var $e=C[ge].indexOf("="),Bt=null;if(0<=$e){var Kt=C[ge].substring(0,$e);Bt=C[ge].substring($e+1)}else Kt=C[ge];X(Kt,Bt?decodeURIComponent(Bt.replace(/\+/g," ")):"")}}}function $t(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof $t){this.h=C.h,kt(this,C.j),this.o=C.o,this.g=C.g,qt(this,C.s),this.l=C.l;var X=C.i,ge=new zs;ge.i=X.i,X.g&&(ge.g=new Map(X.g),ge.h=X.h),Xt(this,ge),this.m=C.m}else C&&(X=String(C).match(st))?(this.h=!1,kt(this,X[1]||"",!0),this.o=Nr(X[2]||""),this.g=Nr(X[3]||"",!0),qt(this,X[4]),this.l=Nr(X[5]||"",!0),Xt(this,X[6]||"",!0),this.m=Nr(X[7]||"")):(this.h=!1,this.i=new zs(null,this.h))}$t.prototype.toString=function(){var C=[],X=this.j;X&&C.push(Vr(X,qs,!0),":");var ge=this.g;return(ge||X=="file")&&(C.push("//"),(X=this.o)&&C.push(Vr(X,qs,!0),"@"),C.push(encodeURIComponent(String(ge)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ge=this.s,ge!=null&&C.push(":",String(ge))),(ge=this.l)&&(this.g&&ge.charAt(0)!="/"&&C.push("/"),C.push(Vr(ge,ge.charAt(0)=="/"?rs:ts,!0))),(ge=this.i.toString())&&C.push("?",ge),(ge=this.m)&&C.push("#",Vr(ge,yu)),C.join("")};function Dt(C){return new $t(C)}function kt(C,X,ge){C.j=ge?Nr(X,!0):X,C.j&&(C.j=C.j.replace(/:$/,""))}function qt(C,X){if(X){if(X=Number(X),isNaN(X)||0>X)throw Error("Bad port number "+X);C.s=X}else C.s=null}function Xt(C,X,ge){X instanceof zs?(C.i=X,w1(C.i,C.h)):(ge||(X=Vr(X,Ml)),C.i=new zs(X,C.h))}function Wt(C,X,ge){C.i.set(X,ge)}function vr(C){return Wt(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function Nr(C,X){return C?X?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function Vr(C,X,ge){return typeof C=="string"?(C=encodeURI(C).replace(X,Gn),ge&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function Gn(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var qs=/[#\/\?@]/g,ts=/[#\?:]/g,rs=/[#\?]/g,Ml=/[#\?@]/g,yu=/#/g;function zs(C,X){this.h=this.g=null,this.i=C||null,this.j=!!X}function Ll(C){C.g||(C.g=new Map,C.h=0,C.i&&Mt(C.i,function(X,ge){C.add(decodeURIComponent(X.replace(/\+/g," ")),ge)}))}t=zs.prototype,t.add=function(C,X){Ll(this),this.i=null,C=un(this,C);var ge=this.g.get(C);return ge||this.g.set(C,ge=[]),ge.push(X),this.h+=1,this};function Dc(C,X){Ll(C),X=un(C,X),C.g.has(X)&&(C.i=null,C.h-=C.g.get(X).length,C.g.delete(X))}function gd(C,X){return Ll(C),X=un(C,X),C.g.has(X)}t.forEach=function(C,X){Ll(this),this.g.forEach(function(ge,$e){ge.forEach(function(Bt){C.call(X,Bt,$e,this)},this)},this)},t.na=function(){Ll(this);const C=Array.from(this.g.values()),X=Array.from(this.g.keys()),ge=[];for(let $e=0;$e<X.length;$e++){const Bt=C[$e];for(let Kt=0;Kt<Bt.length;Kt++)ge.push(X[$e])}return ge},t.V=function(C){Ll(this);let X=[];if(typeof C=="string")gd(this,C)&&(X=X.concat(this.g.get(un(this,C))));else{C=Array.from(this.g.values());for(let ge=0;ge<C.length;ge++)X=X.concat(C[ge])}return X},t.set=function(C,X){return Ll(this),this.i=null,C=un(this,C),gd(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[X]),this.h+=1,this},t.get=function(C,X){return C?(C=this.V(C),0<C.length?String(C[0]):X):X};function Fg(C,X,ge){Dc(C,X),0<ge.length&&(C.i=null,C.g.set(un(C,X),p(ge)),C.h+=ge.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],X=Array.from(this.g.keys());for(var ge=0;ge<X.length;ge++){var $e=X[ge];const Kt=encodeURIComponent(String($e)),yr=this.V($e);for($e=0;$e<yr.length;$e++){var Bt=Kt;yr[$e]!==""&&(Bt+="="+encodeURIComponent(String(yr[$e]))),C.push(Bt)}}return this.i=C.join("&")};function un(C,X){return X=String(X),C.j&&(X=X.toLowerCase()),X}function w1(C,X){X&&!C.j&&(Ll(C),C.i=null,C.g.forEach(function(ge,$e){var Bt=$e.toLowerCase();$e!=Bt&&(Dc(this,$e),Fg(this,Bt,ge))},C)),C.j=X}function N1(C,X){const ge=new Ze;if(l.Image){const $e=new Image;$e.onload=h(Ao,ge,"TestLoadImage: loaded",!0,X,$e),$e.onerror=h(Ao,ge,"TestLoadImage: error",!1,X,$e),$e.onabort=h(Ao,ge,"TestLoadImage: abort",!1,X,$e),$e.ontimeout=h(Ao,ge,"TestLoadImage: timeout",!1,X,$e),l.setTimeout(function(){$e.ontimeout&&$e.ontimeout()},1e4),$e.src=C}else X(!1)}function C1(C,X){const ge=new Ze,$e=new AbortController,Bt=setTimeout(()=>{$e.abort(),Ao(ge,"TestPingServer: timeout",!1,X)},1e4);fetch(C,{signal:$e.signal}).then(Kt=>{clearTimeout(Bt),Kt.ok?Ao(ge,"TestPingServer: ok",!0,X):Ao(ge,"TestPingServer: server error",!1,X)}).catch(()=>{clearTimeout(Bt),Ao(ge,"TestPingServer: error",!1,X)})}function Ao(C,X,ge,$e,Bt){try{Bt&&(Bt.onload=null,Bt.onerror=null,Bt.onabort=null,Bt.ontimeout=null),$e(ge)}catch{}}function xd(){this.g=new we}function _1(C,X,ge){const $e=ge||"";try{wr(C,function(Bt,Kt){let yr=Bt;u(Bt)&&(yr=mt(Bt)),X.push($e+Kt+"="+encodeURIComponent(yr))})}catch(Bt){throw X.push($e+"type="+encodeURIComponent("_badmap")),Bt}}function IA(C){this.l=C.Ub||null,this.j=C.eb||!1}m(IA,ae),IA.prototype.g=function(){return new vd(this.l,this.j)},IA.prototype.i=function(C){return function(){return C}}({});function vd(C,X){Et.call(this),this.D=C,this.o=X,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(vd,Et),t=vd.prototype,t.open=function(C,X){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=X,this.readyState=1,eh(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const X={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(X.body=C),(this.D||l).fetch(new Request(this.A,X)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rc(this)),this.readyState=0},t.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,eh(this)),this.g&&(this.readyState=3,eh(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jA(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function jA(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}t.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var X=C.value?C.value:new Uint8Array(0);(X=this.v.decode(X,{stream:!C.done}))&&(this.response=this.responseText+=X)}C.done?Rc(this):eh(this),this.readyState==3&&jA(this)}},t.Ra=function(C){this.g&&(this.response=this.responseText=C,Rc(this))},t.Qa=function(C){this.g&&(this.response=C,Rc(this))},t.ga=function(){this.g&&Rc(this)};function Rc(C){C.readyState=4,C.l=null,C.j=null,C.v=null,eh(C)}t.setRequestHeader=function(C,X){this.u.append(C,X)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],X=this.h.entries();for(var ge=X.next();!ge.done;)ge=ge.value,C.push(ge[0]+": "+ge[1]),ge=X.next();return C.join(`\r
`)};function eh(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(vd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function bu(C){let X="";return I(C,function(ge,$e){X+=$e,X+=":",X+=ge,X+=`\r
`}),X}function Em(C,X,ge){e:{for($e in ge){var $e=!1;break e}$e=!0}$e||(ge=bu(ge),typeof C=="string"?ge!=null&&encodeURIComponent(String(ge)):Wt(C,X,ge))}function Fa(C){Et.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Fa,Et);var Sm=/^https?$/i,Og=["POST","PUT"];t=Fa.prototype,t.Ha=function(C){this.J=C},t.ea=function(C,X,ge,$e){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);X=X?X.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():le.g(),this.v=this.o?be(this.o):be(le),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(X,String(C),!0),this.B=!1}catch(Kt){wu(this,Kt);return}if(C=ge||"",ge=new Map(this.headers),$e)if(Object.getPrototypeOf($e)===Object.prototype)for(var Bt in $e)ge.set(Bt,$e[Bt]);else if(typeof $e.keys=="function"&&typeof $e.get=="function")for(const Kt of $e.keys())ge.set(Kt,$e.get(Kt));else throw Error("Unknown input type for opt_headers: "+String($e));$e=Array.from(ge.keys()).find(Kt=>Kt.toLowerCase()=="content-type"),Bt=l.FormData&&C instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Og,X,void 0))||$e||Bt||ge.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Kt,yr]of ge)this.g.setRequestHeader(Kt,yr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{df(this),this.u=!0,this.g.send(C),this.u=!1}catch(Kt){wu(this,Kt)}};function wu(C,X){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=X,C.m=5,PA(C),uf(C)}function PA(C){C.A||(C.A=!0,Re(C,"complete"),Re(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,Re(this,"complete"),Re(this,"abort"),uf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uf(this,!0)),Fa.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?th(this):this.bb())},t.bb=function(){th(this)};function th(C){if(C.h&&typeof o<"u"&&(!C.v[1]||Ul(C)!=4||C.Z()!=2)){if(C.u&&Ul(C)==4)et(C.Ea,0,C);else if(Re(C,"readystatechange"),Ul(C)==4){C.h=!1;try{const yr=C.Z();e:switch(yr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var X=!0;break e;default:X=!1}var ge;if(!(ge=X)){var $e;if($e=yr===0){var Bt=String(C.D).match(st)[1]||null;!Bt&&l.self&&l.self.location&&(Bt=l.self.location.protocol.slice(0,-1)),$e=!Sm.test(Bt?Bt.toLowerCase():"")}ge=$e}if(ge)Re(C,"complete"),Re(C,"success");else{C.m=6;try{var Kt=2<Ul(C)?C.g.statusText:""}catch{Kt=""}C.l=Kt+" ["+C.Z()+"]",PA(C)}}finally{uf(C)}}}}function uf(C,X){if(C.g){df(C);const ge=C.g,$e=C.v[0]?()=>{}:null;C.g=null,C.v=null,X||Re(C,"ready");try{ge.onreadystatechange=$e}catch{}}}function df(C){C.I&&(l.clearTimeout(C.I),C.I=null)}t.isActive=function(){return!!this.g};function Ul(C){return C.g?C.g.readyState:0}t.Z=function(){try{return 2<Ul(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(C){if(this.g){var X=this.g.responseText;return C&&X.indexOf(C)==0&&(X=X.substring(C.length)),wt(X)}};function Im(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function Dg(C){const X={};C=(C.g&&2<=Ul(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let $e=0;$e<C.length;$e++){if(y(C[$e]))continue;var ge=P(C[$e]);const Bt=ge[0];if(ge=ge[1],typeof ge!="string")continue;ge=ge.trim();const Kt=X[Bt]||[];X[Bt]=Kt,Kt.push(ge)}_(X,function($e){return $e.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ql(C,X,ge){return ge&&ge.internalChannelParams&&ge.internalChannelParams[C]||X}function Nu(C){this.Aa=0,this.i=[],this.j=new Ze,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ql("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ql("baseRetryDelayMs",5e3,C),this.cb=Ql("retryDelaySeedMs",1e4,C),this.Wa=Ql("forwardChannelMaxRetries",2,C),this.wa=Ql("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new Pt(C&&C.concurrentRequestLimit),this.Da=new xd,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Nu.prototype,t.la=8,t.G=1,t.connect=function(C,X,ge,$e){ht(0),this.W=C,this.H=X||{},ge&&$e!==void 0&&(this.H.OSID=ge,this.H.OAID=$e),this.F=this.X,this.I=xa(this,null,this.W),V(this)};function BA(C){if(jm(C),C.G==3){var X=C.U++,ge=Dt(C.I);if(Wt(ge,"SID",C.K),Wt(ge,"RID",X),Wt(ge,"TYPE","terminate"),vt(C,ge),X=new qe(C,C.j,X),X.L=2,X.v=vr(Dt(ge)),ge=!1,l.navigator&&l.navigator.sendBeacon)try{ge=l.navigator.sendBeacon(X.v.toString(),"")}catch{}!ge&&l.Image&&(new Image().src=X.v,ge=!0),ge||(X.g=Ws(X.j,null),X.g.ea(X.v)),X.F=Date.now(),Nt(X)}Is(C)}function Cu(C){C.g&&(Rr(C),C.g.cancel(),C.g=null)}function jm(C){Cu(C),C.u&&(l.clearTimeout(C.u),C.u=null),dn(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&l.clearTimeout(C.s),C.s=null)}function V(C){if(!mr(C.h)&&!C.s){C.s=!0;var X=C.Ga;me||Pe(),pe||(me(),pe=!0),ne.add(X,C),C.B=0}}function Ce(C,X){return Fr(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=X.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=Te(A(C.Ga,C,X),Un(C,C.B)),C.B++,!0)}t.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const Bt=new qe(this,this.j,C);let Kt=this.o;if(this.S&&(Kt?(Kt=S(Kt),F(Kt,this.S)):Kt=this.S),this.m!==null||this.O||(Bt.H=Kt,Kt=null),this.P)e:{for(var X=0,ge=0;ge<this.i.length;ge++){t:{var $e=this.i[ge];if("__data__"in $e.map&&($e=$e.map.__data__,typeof $e=="string")){$e=$e.length;break t}$e=void 0}if($e===void 0)break;if(X+=$e,4096<X){X=ge;break e}if(X===4096||ge===this.i.length-1){X=ge+1;break e}}X=1e3}else X=1e3;X=jt(this,Bt,X),ge=Dt(this.I),Wt(ge,"RID",C),Wt(ge,"CVER",22),this.D&&Wt(ge,"X-HTTP-Session-Id",this.D),vt(this,ge),Kt&&(this.O?X="headers="+encodeURIComponent(String(bu(Kt)))+"&"+X:this.m&&Em(ge,this.m,Kt)),Qr(this.h,Bt),this.Ua&&Wt(ge,"TYPE","init"),this.P?(Wt(ge,"$req",X),Wt(ge,"SID","null"),Bt.T=!0,he(Bt,ge,null)):he(Bt,ge,X),this.G=2}}else this.G==3&&(C?rt(this,C):this.i.length==0||mr(this.h)||rt(this))};function rt(C,X){var ge;X?ge=X.l:ge=C.U++;const $e=Dt(C.I);Wt($e,"SID",C.K),Wt($e,"RID",ge),Wt($e,"AID",C.T),vt(C,$e),C.m&&C.o&&Em($e,C.m,C.o),ge=new qe(C,C.j,ge,C.B+1),C.m===null&&(ge.H=C.o),X&&(C.i=X.D.concat(C.i)),X=jt(C,ge,1e3),ge.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Qr(C.h,ge),he(ge,$e,X)}function vt(C,X){C.H&&I(C.H,function(ge,$e){Wt(X,$e,ge)}),C.l&&wr({},function(ge,$e){Wt(X,$e,ge)})}function jt(C,X,ge){ge=Math.min(C.i.length,ge);var $e=C.l?A(C.l.Na,C.l,C):null;e:{var Bt=C.i;let Kt=-1;for(;;){const yr=["count="+ge];Kt==-1?0<ge?(Kt=Bt[0].g,yr.push("ofs="+Kt)):Kt=0:yr.push("ofs="+Kt);let Kn=!0;for(let Bs=0;Bs<ge;Bs++){let On=Bt[Bs].g;const na=Bt[Bs].map;if(On-=Kt,0>On)Kt=Math.max(0,Bt[Bs].g-100),Kn=!1;else try{_1(na,yr,"req"+On+"_")}catch{$e&&$e(na)}}if(Kn){$e=yr.join("&");break e}}}return C=C.i.splice(0,ge),X.D=C,$e}function tr(C){if(!C.g&&!C.u){C.Y=1;var X=C.Fa;me||Pe(),pe||(me(),pe=!0),ne.add(X,C),C.v=0}}function or(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=Te(A(C.Fa,C),Un(C,C.v)),C.v++,!0)}t.Fa=function(){if(this.u=null,Kr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=Te(A(this.ab,this),C)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Cu(this),Kr(this))};function Rr(C){C.A!=null&&(l.clearTimeout(C.A),C.A=null)}function Kr(C){C.g=new qe(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var X=Dt(C.qa);Wt(X,"RID","rpc"),Wt(X,"SID",C.K),Wt(X,"AID",C.T),Wt(X,"CI",C.F?"0":"1"),!C.F&&C.ja&&Wt(X,"TO",C.ja),Wt(X,"TYPE","xmlhttp"),vt(C,X),C.m&&C.o&&Em(X,C.m,C.o),C.L&&(C.g.I=C.L);var ge=C.g;C=C.ia,ge.L=1,ge.v=vr(Dt(X)),ge.m=null,ge.P=!0,He(ge,C)}t.Za=function(){this.C!=null&&(this.C=null,Cu(this),or(this),ht(19))};function dn(C){C.C!=null&&(l.clearTimeout(C.C),C.C=null)}function yn(C,X){var ge=null;if(C.g==X){dn(C),Rr(C),C.g=null;var $e=2}else if(jr(C.h,X))ge=X.D,Dr(C.h,X),$e=1;else return;if(C.G!=0){if(X.o)if($e==1){ge=X.m?X.m.length:0,X=Date.now()-X.F;var Bt=C.B;$e=gt(),Re($e,new W($e,ge)),V(C)}else tr(C);else if(Bt=X.s,Bt==3||Bt==0&&0<X.X||!($e==1&&Ce(C,X)||$e==2&&or(C)))switch(ge&&0<ge.length&&(X=C.h,X.i=X.i.concat(ge)),Bt){case 1:ca(C,5);break;case 4:ca(C,10);break;case 3:ca(C,6);break;default:ca(C,2)}}}function Un(C,X){let ge=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(ge*=2),ge*X}function ca(C,X){if(C.j.info("Error code "+X),X==2){var ge=A(C.fb,C),$e=C.Xa;const Bt=!$e;$e=new $t($e||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||kt($e,"https"),vr($e),Bt?N1($e.toString(),ge):C1($e.toString(),ge)}else ht(2);C.G=0,C.l&&C.l.sa(X),Is(C),jm(C)}t.fb=function(C){C?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Is(C){if(C.G=0,C.ka=[],C.l){const X=nn(C.h);(X.length!=0||C.i.length!=0)&&(g(C.ka,X),g(C.ka,C.i),C.h.i.length=0,p(C.i),C.i.length=0),C.l.ra()}}function xa(C,X,ge){var $e=ge instanceof $t?Dt(ge):new $t(ge);if($e.g!="")X&&($e.g=X+"."+$e.g),qt($e,$e.s);else{var Bt=l.location;$e=Bt.protocol,X=X?X+"."+Bt.hostname:Bt.hostname,Bt=+Bt.port;var Kt=new $t(null);$e&&kt(Kt,$e),X&&(Kt.g=X),Bt&&qt(Kt,Bt),ge&&(Kt.l=ge),$e=Kt}return ge=C.D,X=C.ya,ge&&X&&Wt($e,ge,X),Wt($e,"VER",C.la),vt(C,$e),$e}function Ws(C,X,ge){if(X&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return X=C.Ca&&!C.pa?new Fa(new IA({eb:ge})):new Fa(C.pa),X.Ha(C.J),X}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function js(){}t=js.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xs(){}Xs.prototype.g=function(C,X){return new Ps(C,X)};function Ps(C,X){Et.call(this),this.g=new Nu(X),this.l=C,this.h=X&&X.messageUrlParams||null,C=X&&X.messageHeaders||null,X&&X.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=X&&X.initMessageHeaders||null,X&&X.messageContentType&&(C?C["X-WebChannel-Content-Type"]=X.messageContentType:C={"X-WebChannel-Content-Type":X.messageContentType}),X&&X.va&&(C?C["X-WebChannel-Client-Profile"]=X.va:C={"X-WebChannel-Client-Profile":X.va}),this.g.S=C,(C=X&&X.Sb)&&!y(C)&&(this.g.m=C),this.v=X&&X.supportsCrossDomainXhr||!1,this.u=X&&X.sendRawJson||!1,(X=X&&X.httpSessionIdParam)&&!y(X)&&(this.g.D=X,C=this.h,C!==null&&X in C&&(C=this.h,X in C&&delete C[X])),this.j=new Eu(this)}m(Ps,Et),Ps.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ps.prototype.close=function(){BA(this.g)},Ps.prototype.o=function(C){var X=this.g;if(typeof C=="string"){var ge={};ge.__data__=C,C=ge}else this.u&&(ge={},ge.__data__=mt(C),C=ge);X.i.push(new ir(X.Ya++,C)),X.G==3&&V(X)},Ps.prototype.N=function(){this.g.l=null,delete this.j,BA(this.g),delete this.g,Ps.aa.N.call(this)};function uc(C){ce.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var X=C.__sm__;if(X){e:{for(const ge in X){C=ge;break e}C=void 0}(this.i=C)&&(C=this.i,X=X!==null&&C in X?X[C]:void 0),this.data=X}else this.data=C}m(uc,ce);function _u(){ke.call(this),this.status=1}m(_u,ke);function Eu(C){this.g=C}m(Eu,js),Eu.prototype.ua=function(){Re(this.g,"a")},Eu.prototype.ta=function(C){Re(this.g,new uc(C))},Eu.prototype.sa=function(C){Re(this.g,new _u)},Eu.prototype.ra=function(){Re(this.g,"b")},Xs.prototype.createWebChannel=Xs.prototype.g,Ps.prototype.send=Ps.prototype.o,Ps.prototype.open=Ps.prototype.m,Ps.prototype.close=Ps.prototype.close,nJ=function(){return new Xs},rJ=function(){return gt()},tJ=dt,CT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},K.NO_ERROR=0,K.TIMEOUT=8,K.HTTP_ERROR=6,K_=K,re.COMPLETE="complete",eJ=re,ve.EventType=Ve,Ve.OPEN="a",Ve.CLOSE="b",Ve.ERROR="c",Ve.MESSAGE="d",Et.prototype.listen=Et.prototype.K,jy=ve,Fa.prototype.listenOnce=Fa.prototype.L,Fa.prototype.getLastError=Fa.prototype.Ka,Fa.prototype.getLastErrorCode=Fa.prototype.Ba,Fa.prototype.getStatus=Fa.prototype.Z,Fa.prototype.getResponseJson=Fa.prototype.Oa,Fa.prototype.getResponseText=Fa.prototype.oa,Fa.prototype.send=Fa.prototype.ea,Fa.prototype.setWithCredentials=Fa.prototype.Ha,ZY=Fa}).apply(typeof GN<"u"?GN:typeof self<"u"?self:typeof window<"u"?window:{});const XU="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jo.UNAUTHENTICATED=new Jo(null),Jo.GOOGLE_CREDENTIALS=new Jo("google-credentials-uid"),Jo.FIRST_PARTY=new Jo("first-party-uid"),Jo.MOCK_USER=new Jo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xv="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=new nD("@firebase/firestore");function Ax(){return Hp.logLevel}function pr(t,...e){if(Hp.logLevel<=Hn.DEBUG){const r=e.map(bD);Hp.debug(`Firestore (${Xv}): ${t}`,...r)}}function tc(t,...e){if(Hp.logLevel<=Hn.ERROR){const r=e.map(bD);Hp.error(`Firestore (${Xv}): ${t}`,...r)}}function Z0(t,...e){if(Hp.logLevel<=Hn.WARN){const r=e.map(bD);Hp.warn(`Firestore (${Xv}): ${t}`,...r)}}function bD(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t="Unexpected state"){const e=`FIRESTORE (${Xv}) INTERNAL ASSERTION FAILED: `+t;throw tc(e),new Error(e)}function Yr(t,e){t||Gr()}function vn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Cr extends AA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aJ{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Jo.UNAUTHENTICATED))}shutdown(){}}class rxe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class nxe{constructor(e){this.t=e,this.currentUser=Jo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Yr(this.o===void 0);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new Gd;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gd,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{pr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(pr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gd)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(pr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Yr(typeof n.accessToken=="string"),new aJ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Yr(e===null||typeof e=="string"),new Jo(e)}}class axe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Jo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sxe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new axe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Jo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ixe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oxe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Yr(this.o===void 0);const n=s=>{s.error!=null&&pr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,pr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{pr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):pr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Yr(typeof r.token=="string"),this.R=r.token,new ixe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lxe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=lxe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function Cn(t,e){return t<e?-1:t>e?1:0}function yv(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function iJ(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Cr(er.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Cr(er.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Cr(er.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Cr(er.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ur.fromMillis(Date.now())}static fromDate(e){return ur.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new ur(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Cn(this.nanoseconds,e.nanoseconds):Cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tn(e)}static min(){return new tn(new ur(0,0))}static max(){return new tn(new ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,r,n){r===void 0?r=0:r>e.length&&Gr(),n===void 0?n=e.length-r:n>e.length-r&&Gr(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return r2.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof r2?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),o=r.get(a);if(s<o)return-1;if(s>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ia extends r2{construct(e,r,n){return new ia(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Cr(er.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new ia(r)}static emptyPath(){return new ia([])}}const cxe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ws extends r2{construct(e,r,n){return new ws(e,r,n)}static isValidIdentifier(e){return cxe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ws.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ws(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Cr(er.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new Cr(er.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Cr(er.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new Cr(er.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ws(r)}static emptyPath(){return new ws([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.path=e}static fromPath(e){return new Tr(ia.fromString(e))}static fromName(e){return new Tr(ia.fromString(e).popFirst(5))}static empty(){return new Tr(ia.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ia.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ia.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Tr(new ia(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function _T(t){return t.fields.find(e=>e.kind===2)}function Gm(t){return t.fields.filter(e=>e.kind!==2)}zE.UNKNOWN_ID=-1;class q_{constructor(e,r){this.fieldPath=e,this.kind=r}}class n2{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new n2(0,hu.min())}}function uxe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=tn.fromTimestamp(n===1e9?new ur(r+1,0):new ur(r,n));return new hu(a,Tr.empty(),e)}function oJ(t){return new hu(t.readTime,t.key,-1)}class hu{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new hu(tn.min(),Tr.empty(),-1)}static max(){return new hu(tn.max(),Tr.empty(),-1)}}function ND(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Tr.comparator(t.documentKey,e.documentKey),r!==0?r:Cn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mg(t){if(t.code!==er.FAILED_PRECONDITION||t.message!==lJ)throw t;pr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Gr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ht((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ht?r:Ht.resolve(r)}catch(r){return Ht.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ht.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ht.reject(r)}static resolve(e){return new Ht((r,n)=>{r(e)})}static reject(e){return new Ht((r,n)=>{n(e)})}static waitFor(e){return new Ht((r,n)=>{let a=0,s=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(e){let r=Ht.resolve(!1);for(const n of e)r=r.next(a=>a?Ht.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new Ht((n,a)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(e,r){return new Ht((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Gd,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new sb(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=CD(n.target.error);this.V.reject(new sb(e,a))}}static open(e,r,n,a){try{return new oj(r,e.transaction(a,n))}catch(s){throw new sb(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(pr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new fxe(r)}}class $0{constructor(e,r,n){this.name=e,this.version=r,this.p=n,$0.S(io())===12.2&&tc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return pr("SimpleDb","Removing database:",e),Zm(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!hY())return!1;if($0.v())return!0;const e=io(),r=$0.S(e),n=0<r&&r<10,a=uJ(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(pr("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const o=s.target.result;r(o)},a.onblocked=()=>{n(new sb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const o=s.target.error;o.name==="VersionError"?n(new Cr(er.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new Cr(er.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new sb(e,o))},a.onupgradeneeded=s=>{pr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,a.transaction,s.oldVersion,this.version).next(()=>{pr("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=oj.open(this.db,e,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),Ht.reject(u))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&o<3;if(pr("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function uJ(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class dxe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Zm(this.B.delete())}}class sb extends Cr{constructor(e,r){super(er.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function vm(t){return t.name==="IndexedDbTransactionError"}class fxe{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(pr("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(pr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Zm(n)}add(e){return pr("SimpleDb","ADD",this.store.name,e,e),Zm(this.store.add(e))}get(e){return Zm(this.store.get(e)).next(r=>(r===void 0&&(r=null),pr("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return pr("SimpleDb","DELETE",this.store.name,e),Zm(this.store.delete(e))}count(){return pr("SimpleDb","COUNT",this.store.name),Zm(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new Ht((o,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(n),o=[];return this.W(s,(l,c)=>{o.push(c)}).next(()=>o)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ht((a,s)=>{n.onerror=o=>{s(o.target.error)},n.onsuccess=o=>{a(o.target.result)}})}j(e,r){pr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,(s,o,l)=>l.delete())}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Ht((n,a)=>{r.onerror=s=>{const o=CD(s.target.error);a(o)},r.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():n()}):n()}})}W(e,r){const n=[];return new Ht((a,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void a();const c=new dxe(l),u=r(l.primaryKey,l.value,c);if(u instanceof Ht){const d=u.catch(f=>(c.done(),Ht.reject(f)));n.push(d)}c.isDone?a():c.K===null?l.continue():l.continue(c.K)}}).next(()=>Ht.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Zm(t){return new Ht((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=CD(n.target.error);r(a)}})}let YU=!1;function CD(t){const e=$0.S(io());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Cr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YU||(YU=!0,setTimeout(()=>{throw n},0)),n}}return t}class hxe{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){pr("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{pr("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){vm(r)?pr("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await mg(r)}await this.X(6e4)})}}class Axe{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let a=r,s=!0;return Ht.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!n.has(o))return pr("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,a).next(l=>{a-=l,n.add(o)});s=!1})).next(()=>r-a)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(a,s)).next(l=>(pr("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>o.size)}))}re(e,r){let n=e;return r.changes.forEach((a,s)=>{const o=oJ(s);ND(o,n)>0&&(n=o)}),new hu(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yu.oe=-1;function mw(t){return t==null}function a2(t){return t===0&&1/t==-1/0}function mxe(t){return typeof t=="number"&&Number.isInteger(t)&&!a2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=JU(e)),e=pxe(t.get(r),e);return JU(e)}function pxe(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function JU(t){return t+""}function jf(t){const e=t.length;if(Yr(e>=2),e===2)return Yr(t.charAt(0)===""&&t.charAt(1)===""),ia.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>r)&&Gr(),t.charAt(o+1)){case"":const l=t.substring(s,o);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,o),a+="\0";break;case"":a+=t.substring(s,o+1);break;default:Gr()}s=o+2}return new ia(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t,e){return[t,ac(e)]}function dJ(t,e,r){return[t,ac(e),r]}const gxe={},xxe=["prefixPath","collectionGroup","readTime","documentId"],vxe=["prefixPath","collectionGroup","documentId"],yxe=["collectionGroup","readTime","prefixPath","documentId"],bxe=["canonicalId","targetId"],wxe=["targetId","path"],Nxe=["path","targetId"],Cxe=["collectionId","parent"],_xe=["indexId","uid"],Exe=["uid","sequenceNumber"],Sxe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ixe=["indexId","uid","orderedDocumentKey"],jxe=["userId","collectionPath","documentId"],Pxe=["userId","collectionPath","largestBatchId"],Bxe=["userId","collectionGroup","largestBatchId"],fJ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Txe=[...fJ,"documentOverlays"],hJ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],AJ=hJ,_D=[...AJ,"indexConfiguration","indexState","indexEntries"],kxe=_D,Fxe=[..._D,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET extends cJ{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function lo(t,e){const r=vn(t);return $0.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function pg(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function mJ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,r){this.comparator=e,this.root=r||Zo.EMPTY}insert(e,r){return new Es(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Zo.BLACK,null,null))}remove(e){return new Es(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zo.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new KN(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new KN(this.root,e,this.comparator,!1)}getReverseIterator(){return new KN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new KN(this.root,e,this.comparator,!0)}}class KN{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zo{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??Zo.RED,this.left=a??Zo.EMPTY,this.right=s??Zo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new Zo(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Zo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return Zo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Gr();const e=this.left.check();if(e!==this.right.check())throw Gr();return e+(this.isRed()?0:1)}}Zo.EMPTY=null,Zo.RED=!0,Zo.BLACK=!1;Zo.EMPTY=new class{constructor(){this.size=0}get key(){throw Gr()}get value(){throw Gr()}get color(){throw Gr()}get left(){throw Gr()}get right(){throw Gr()}copy(e,r,n,a,s){return this}insert(e,r,n){return new Zo(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.comparator=e,this.data=new Es(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new t7(this.data.getIterator())}getIteratorFrom(e){return new t7(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof La)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new La(this.comparator);return r.data=e,r}}class t7{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qg(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.fields=e,e.sort(ws.comparator)}static empty(){return new Cc([])}unionWith(e){let r=new La(ws.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Cc(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return yv(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pJ("Invalid base64 string: "+s):s}}(e);return new Ei(r)}static fromUint8Array(e){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(e);return new Ei(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ei.EMPTY_BYTE_STRING=new Ei("");const Oxe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eA(t){if(Yr(!!t),typeof t=="string"){let e=0;const r=Oxe.exec(t);if(Yr(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:vs(t.seconds),nanos:vs(t.nanos)}}function vs(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function em(t){return typeof t=="string"?Ei.fromBase64String(t):Ei.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function SD(t){const e=t.mapValue.fields.__previous_value__;return ED(e)?SD(e):e}function s2(t){const e=eA(t.mapValue.fields.__local_write_time__.timestampValue);return new ur(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dxe{constructor(e,r,n,a,s,o,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class tm{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new tm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof tm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},W_={nullValue:"NULL_VALUE"};function $p(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ED(t)?4:gJ(t)?9007199254740991:lj(t)?10:11:Gr()}function Qf(t,e){if(t===e)return!0;const r=$p(t);if(r!==$p(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return s2(t).isEqual(s2(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=eA(a.timestampValue),l=eA(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return em(a.bytesValue).isEqual(em(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return vs(a.geoPointValue.latitude)===vs(s.geoPointValue.latitude)&&vs(a.geoPointValue.longitude)===vs(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return vs(a.integerValue)===vs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=vs(a.doubleValue),l=vs(s.doubleValue);return o===l?a2(o)===a2(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return yv(t.arrayValue.values||[],e.arrayValue.values||[],Qf);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(e7(o)!==e7(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Qf(o[c],l[c])))return!1;return!0}(t,e);default:return Gr()}}function i2(t,e){return(t.values||[]).find(r=>Qf(r,e))!==void 0}function rm(t,e){if(t===e)return 0;const r=$p(t),n=$p(e);if(r!==n)return Cn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Cn(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=vs(s.integerValue||s.doubleValue),c=vs(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return r7(t.timestampValue,e.timestampValue);case 4:return r7(s2(t),s2(e));case 5:return Cn(t.stringValue,e.stringValue);case 6:return function(s,o){const l=em(s),c=em(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Cn(l[u],c[u]);if(d!==0)return d}return Cn(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Cn(vs(s.latitude),vs(o.latitude));return l!==0?l:Cn(vs(s.longitude),vs(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return n7(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,c,u,d;const f=s.fields||{},A=o.fields||{},h=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=(c=A.value)===null||c===void 0?void 0:c.arrayValue,p=Cn(((u=h==null?void 0:h.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:n7(h,m)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===_0.mapValue&&o===_0.mapValue)return 0;if(s===_0.mapValue)return 1;if(o===_0.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const A=Cn(c[f],d[f]);if(A!==0)return A;const h=rm(l[c[f]],u[d[f]]);if(h!==0)return h}return Cn(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Gr()}}function r7(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Cn(t,e);const r=eA(t),n=eA(e),a=Cn(r.seconds,n.seconds);return a!==0?a:Cn(r.nanos,n.nanos)}function n7(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=rm(r[a],n[a]);if(s)return s}return Cn(r.length,n.length)}function bv(t){return ST(t)}function ST(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=eA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return em(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Tr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=ST(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${ST(r.fields[o])}`;return a+"}"}(t.mapValue):Gr()}function o2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function IT(t){return!!t&&"integerValue"in t}function l2(t){return!!t&&"arrayValue"in t}function a7(t){return!!t&&"nullValue"in t}function s7(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function X_(t){return!!t&&"mapValue"in t}function lj(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function ib(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pg(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=ib(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ib(t.arrayValue.values[r]);return e}return Object.assign({},t)}function gJ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const xJ={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Rxe(t){return"nullValue"in t?W_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?o2(tm.empty(),Tr.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?lj(t)?xJ:{mapValue:{}}:Gr()}function Mxe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?o2(tm.empty(),Tr.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?xJ:"mapValue"in t?lj(t)?{mapValue:{}}:_0:Gr()}function i7(t,e){const r=rm(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function o7(t,e){const r=rm(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.value=e}static empty(){return new tl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!X_(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ib(r)}setAll(e){let r=ws.emptyPath(),n={},a=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=ib(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());X_(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Qf(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];X_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){pg(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new tl(ib(this.value))}}function vJ(t){const e=[];return pg(t.fields,(r,n)=>{const a=new ws([r]);if(X_(n)){const s=vJ(n.mapValue).fields;if(s.length===0)e.push(a);else for(const o of s)e.push(a.child(o))}else e.push(a)}),new Cc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,r,n,a,s,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new bs(e,0,tn.min(),tn.min(),tn.min(),tl.empty(),0)}static newFoundDocument(e,r,n,a){return new bs(e,1,r,tn.min(),n,a,0)}static newNoDocument(e,r){return new bs(e,2,r,tn.min(),tn.min(),tl.empty(),0)}static newUnknownDocument(e,r){return new bs(e,3,r,tn.min(),tn.min(),tl.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(tn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,r){this.position=e,this.inclusive=r}}function l7(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],o=t.position[a];if(s.field.isKeyField()?n=Tr.comparator(Tr.fromName(o.referenceValue),r.key):n=rm(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function c7(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Qf(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,r="asc"){this.field=e,this.dir=r}}function Lxe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yJ{}class $n extends yJ{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Uxe(e,r,n):r==="array-contains"?new Hxe(e,n):r==="in"?new EJ(e,n):r==="not-in"?new $xe(e,n):r==="array-contains-any"?new Gxe(e,n):new $n(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Qxe(e,n):new Vxe(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(rm(r,this.value)):r!==null&&$p(this.value)===$p(r)&&this.matchesComparison(rm(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Gr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pa extends yJ{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Pa(e,r)}matches(e){return Nv(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Nv(t){return t.op==="and"}function jT(t){return t.op==="or"}function ID(t){return bJ(t)&&Nv(t)}function bJ(t){for(const e of t.filters)if(e instanceof Pa)return!1;return!0}function PT(t){if(t instanceof $n)return t.field.canonicalString()+t.op.toString()+bv(t.value);if(ID(t))return t.filters.map(e=>PT(e)).join(",");{const e=t.filters.map(r=>PT(r)).join(",");return`${t.op}(${e})`}}function wJ(t,e){return t instanceof $n?function(n,a){return a instanceof $n&&n.op===a.op&&n.field.isEqual(a.field)&&Qf(n.value,a.value)}(t,e):t instanceof Pa?function(n,a){return a instanceof Pa&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&wJ(o,a.filters[l]),!0):!1}(t,e):void Gr()}function NJ(t,e){const r=t.filters.concat(e);return Pa.create(r,t.op)}function CJ(t){return t instanceof $n?function(r){return`${r.field.canonicalString()} ${r.op} ${bv(r.value)}`}(t):t instanceof Pa?function(r){return r.op.toString()+" {"+r.getFilters().map(CJ).join(" ,")+"}"}(t):"Filter"}class Uxe extends $n{constructor(e,r,n){super(e,r,n),this.key=Tr.fromName(n.referenceValue)}matches(e){const r=Tr.comparator(e.key,this.key);return this.matchesComparison(r)}}class Qxe extends $n{constructor(e,r){super(e,"in",r),this.keys=_J("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Vxe extends $n{constructor(e,r){super(e,"not-in",r),this.keys=_J("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function _J(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Tr.fromName(n.referenceValue))}class Hxe extends $n{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return l2(r)&&i2(r.arrayValue,this.value)}}class EJ extends $n{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&i2(this.value.arrayValue,r)}}class $xe extends $n{constructor(e,r){super(e,"not-in",r)}matches(e){if(i2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!i2(this.value.arrayValue,r)}}class Gxe extends $n{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!l2(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>i2(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kxe{constructor(e,r=null,n=[],a=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function BT(t,e=null,r=[],n=[],a=null,s=null,o=null){return new Kxe(t,e,r,n,a,s,o)}function Gp(t){const e=vn(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>PT(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),mw(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>bv(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>bv(n)).join(",")),e.ue=r}return e.ue}function pw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Lxe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!wJ(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!c7(t.startAt,e.startAt)&&c7(t.endAt,e.endAt)}function WE(t){return Tr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function XE(t,e){return t.filters.filter(r=>r instanceof $n&&r.field.isEqual(e))}function u7(t,e,r){let n=W_,a=!0;for(const s of XE(t,e)){let o=W_,l=!0;switch(s.op){case"<":case"<=":o=Rxe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=W_}i7({value:n,inclusive:a},{value:o,inclusive:l})<0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];i7({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function d7(t,e,r){let n=_0,a=!0;for(const s of XE(t,e)){let o=_0,l=!0;switch(s.op){case">=":case">":o=Mxe(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=_0}o7({value:n,inclusive:a},{value:o,inclusive:l})>0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];o7({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qxe(t,e,r,n,a,s,o,l){return new Yv(t,e,r,n,a,s,o,l)}function gw(t){return new Yv(t)}function f7(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function SJ(t){return t.collectionGroup!==null}function ob(t){const e=vn(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new La(ws.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new c2(s,n))}),r.has(ws.keyField().canonicalString())||e.ce.push(new c2(ws.keyField(),n))}return e.ce}function nd(t){const e=vn(t);return e.le||(e.le=zxe(e,ob(t))),e.le}function zxe(t,e){if(t.limitType==="F")return BT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new c2(a.field,s)});const r=t.endAt?new wv(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new wv(t.startAt.position,t.startAt.inclusive):null;return BT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function TT(t,e){const r=t.filters.concat([e]);return new Yv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function YE(t,e,r){return new Yv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function cj(t,e){return pw(nd(t),nd(e))&&t.limitType===e.limitType}function IJ(t){return`${Gp(nd(t))}|lt:${t.limitType}`}function mx(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>CJ(a)).join(", ")}]`),mw(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>bv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>bv(a)).join(",")),`Target(${n})`}(nd(t))}; limitType=${t.limitType})`}function xw(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Tr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of ob(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=l7(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,ob(n),a)||n.endAt&&!function(o,l,c){const u=l7(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,ob(n),a))}(t,e)}function Wxe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jJ(t){return(e,r)=>{let n=!1;for(const a of ob(t)){const s=Xxe(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Xxe(t,e,r){const n=t.field.isKeyField()?Tr.comparator(e.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?rm(c,u):Gr()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Gr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){pg(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return mJ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yxe=new Es(Tr.comparator);function iu(){return Yxe}const PJ=new Es(Tr.comparator);function Py(...t){let e=PJ;for(const r of t)e=e.insert(r.key,r);return e}function BJ(t){let e=PJ;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Pf(){return lb()}function TJ(){return lb()}function lb(){return new ym(t=>t.toString(),(t,e)=>t.isEqual(e))}const Jxe=new Es(Tr.comparator),Zxe=new La(Tr.comparator);function Fn(...t){let e=Zxe;for(const r of t)e=e.add(r);return e}const eve=new La(Cn);function tve(){return eve}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:a2(e)?"-0":e}}function kJ(t){return{integerValue:""+t}}function rve(t,e){return mxe(e)?kJ(e):jD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(){this._=void 0}}function nve(t,e,r){return t instanceof u2?function(a,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&ED(s)&&(s=SD(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(r,e):t instanceof Kp?OJ(t,e):t instanceof Cv?DJ(t,e):function(a,s){const o=FJ(a,s),l=h7(o)+h7(a.Pe);return IT(o)&&IT(a.Pe)?kJ(l):jD(a.serializer,l)}(t,e)}function ave(t,e,r){return t instanceof Kp?OJ(t,e):t instanceof Cv?DJ(t,e):r}function FJ(t,e){return t instanceof d2?function(n){return IT(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class u2 extends uj{}class Kp extends uj{constructor(e){super(),this.elements=e}}function OJ(t,e){const r=RJ(e);for(const n of t.elements)r.some(a=>Qf(a,n))||r.push(n);return{arrayValue:{values:r}}}class Cv extends uj{constructor(e){super(),this.elements=e}}function DJ(t,e){let r=RJ(e);for(const n of t.elements)r=r.filter(a=>!Qf(a,n));return{arrayValue:{values:r}}}class d2 extends uj{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function h7(t){return vs(t.integerValue||t.doubleValue)}function RJ(t){return l2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MJ{constructor(e,r){this.field=e,this.transform=r}}function sve(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof Kp&&a instanceof Kp||n instanceof Cv&&a instanceof Cv?yv(n.elements,a.elements,Qf):n instanceof d2&&a instanceof d2?Qf(n.Pe,a.Pe):n instanceof u2&&a instanceof u2}(t.transform,e.transform)}class ive{constructor(e,r){this.version=e,this.transformResults=r}}class Ns{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ns}static exists(e){return new Ns(void 0,e)}static updateTime(e){return new Ns(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Y_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dj{}function LJ(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zv(t.key,Ns.none()):new Jv(t.key,t.data,Ns.none());{const r=t.data,n=tl.empty();let a=new La(ws.comparator);for(let s of e.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new gA(t.key,n,new Cc(a.toArray()),Ns.none())}}function ove(t,e,r){t instanceof Jv?function(a,s,o){const l=a.value.clone(),c=m7(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof gA?function(a,s,o){if(!Y_(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=m7(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(UJ(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function cb(t,e,r,n){return t instanceof Jv?function(s,o,l,c){if(!Y_(s.precondition,o))return l;const u=s.value.clone(),d=p7(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof gA?function(s,o,l,c){if(!Y_(s.precondition,o))return l;const u=p7(s.fieldTransforms,c,o),d=o.data;return d.setAll(UJ(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(s,o,l){return Y_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function lve(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=FJ(n.transform,a||null);s!=null&&(r===null&&(r=tl.empty()),r.set(n.field,s))}return r||null}function A7(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&yv(n,a,(s,o)=>sve(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Jv extends dj{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class gA extends dj{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function UJ(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function m7(t,e,r){const n=new Map;Yr(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],o=s.transform,l=e.data.field(s.field);n.set(s.field,ave(o,l,r[a]))}return n}function p7(t,e,r){const n=new Map;for(const a of t){const s=a.transform,o=r.data.field(a.field);n.set(a.field,nve(s,o,e))}return n}class Zv extends dj{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PD extends dj{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&ove(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=cb(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=cb(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=TJ();return this.mutations.forEach(a=>{const s=e.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=LJ(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(tn.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Fn())}isEqual(e){return this.batchId===e.batchId&&yv(this.mutations,e.mutations,(r,n)=>A7(r,n))&&yv(this.baseMutations,e.baseMutations,(r,n)=>A7(r,n))}}class TD{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Yr(e.mutations.length===n.length);let a=function(){return Jxe}();const s=e.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new TD(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cve{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ji,Xn;function QJ(t){switch(t){default:return Gr();case er.CANCELLED:case er.UNKNOWN:case er.DEADLINE_EXCEEDED:case er.RESOURCE_EXHAUSTED:case er.INTERNAL:case er.UNAVAILABLE:case er.UNAUTHENTICATED:return!1;case er.INVALID_ARGUMENT:case er.NOT_FOUND:case er.ALREADY_EXISTS:case er.PERMISSION_DENIED:case er.FAILED_PRECONDITION:case er.ABORTED:case er.OUT_OF_RANGE:case er.UNIMPLEMENTED:case er.DATA_LOSS:return!0}}function VJ(t){if(t===void 0)return tc("GRPC error has no .code"),er.UNKNOWN;switch(t){case ji.OK:return er.OK;case ji.CANCELLED:return er.CANCELLED;case ji.UNKNOWN:return er.UNKNOWN;case ji.DEADLINE_EXCEEDED:return er.DEADLINE_EXCEEDED;case ji.RESOURCE_EXHAUSTED:return er.RESOURCE_EXHAUSTED;case ji.INTERNAL:return er.INTERNAL;case ji.UNAVAILABLE:return er.UNAVAILABLE;case ji.UNAUTHENTICATED:return er.UNAUTHENTICATED;case ji.INVALID_ARGUMENT:return er.INVALID_ARGUMENT;case ji.NOT_FOUND:return er.NOT_FOUND;case ji.ALREADY_EXISTS:return er.ALREADY_EXISTS;case ji.PERMISSION_DENIED:return er.PERMISSION_DENIED;case ji.FAILED_PRECONDITION:return er.FAILED_PRECONDITION;case ji.ABORTED:return er.ABORTED;case ji.OUT_OF_RANGE:return er.OUT_OF_RANGE;case ji.UNIMPLEMENTED:return er.UNIMPLEMENTED;case ji.DATA_LOSS:return er.DATA_LOSS;default:return Gr()}}(Xn=ji||(ji={}))[Xn.OK=0]="OK",Xn[Xn.CANCELLED=1]="CANCELLED",Xn[Xn.UNKNOWN=2]="UNKNOWN",Xn[Xn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xn[Xn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xn[Xn.NOT_FOUND=5]="NOT_FOUND",Xn[Xn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xn[Xn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xn[Xn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xn[Xn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xn[Xn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xn[Xn.ABORTED=10]="ABORTED",Xn[Xn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xn[Xn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xn[Xn.INTERNAL=13]="INTERNAL",Xn[Xn.UNAVAILABLE=14]="UNAVAILABLE",Xn[Xn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uve(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dve=new vp([4294967295,4294967295],0);function g7(t){const e=uve().encode(t),r=new JY;return r.update(e),new Uint8Array(r.digest())}function x7(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new vp([r,n],0),new vp([a,s],0)]}class FD{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new By(`Invalid padding: ${r}`);if(n<0)throw new By(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new By(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new By(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=vp.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(vp.fromNumber(n)));return a.compare(dve)===1&&(a=new vp([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=g7(e),[n,a]=x7(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new FD(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const r=g7(e),[n,a]=x7(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class By extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,vw.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new fj(tn.min(),a,new Es(Cn),iu(),Fn())}}class vw{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new vw(n,r,Fn(),Fn(),Fn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class HJ{constructor(e,r){this.targetId=e,this.me=r}}class $J{constructor(e,r,n=Ei.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class v7{constructor(){this.fe=0,this.ge=b7(),this.pe=Ei.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Fn(),r=Fn(),n=Fn();return this.ge.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Gr()}}),new vw(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=b7()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Yr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class fve{constructor(e){this.Le=e,this.Be=new Map,this.ke=iu(),this.qe=y7(),this.Qe=new Es(Cn)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Gr()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,a)=>{this.ze(a)&&r(a)})}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if(WE(s))if(n===0){const o=new Tr(s.path);this.Ue(r,o,bs.newNoDocument(o,tn.min()))}else Yr(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=em(n).toUint8Array()}catch(c){if(c instanceof pJ)return Z0("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new FD(o,a,s)}catch(c){return Z0(c instanceof By?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,s,null),a++)}),a}rt(e){const r=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&WE(l.target)){const c=new Tr(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,bs.newNoDocument(c,e))}s.be&&(r.set(o,s.ve()),s.Ce())}});let n=Fn();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const a=new fj(e,r,this.Qe,this.ke,n);return this.ke=iu(),this.qe=y7(),this.Qe=new Es(Cn),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new v7,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new La(Cn),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||pr("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new v7),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function y7(){return new Es(Tr.comparator)}function b7(){return new Es(Tr.comparator)}const hve={asc:"ASCENDING",desc:"DESCENDING"},Ave={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mve={and:"AND",or:"OR"};class pve{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function kT(t,e){return t.useProto3Json||mw(e)?e:{value:e}}function _v(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GJ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gve(t,e){return _v(t,e.toTimestamp())}function To(t){return Yr(!!t),tn.fromTimestamp(function(r){const n=eA(r);return new ur(n.seconds,n.nanos)}(t))}function OD(t,e){return FT(t,e).canonicalString()}function FT(t,e){const r=function(a){return new ia(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function KJ(t){const e=ia.fromString(t);return Yr(tZ(e)),e}function f2(t,e){return OD(t.databaseId,e.path)}function Lh(t,e){const r=KJ(e);if(r.get(1)!==t.databaseId.projectId)throw new Cr(er.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Cr(er.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Tr(WJ(r))}function qJ(t,e){return OD(t.databaseId,e)}function zJ(t){const e=KJ(t);return e.length===4?ia.emptyPath():WJ(e)}function OT(t){return new ia(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WJ(t){return Yr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function w7(t,e,r){return{name:f2(t,e),fields:r.value.mapValue.fields}}function xve(t,e,r){const n=Lh(t,e.name),a=To(e.updateTime),s=e.createTime?To(e.createTime):tn.min(),o=new tl({mapValue:{fields:e.fields}}),l=bs.newFoundDocument(n,a,s,o);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function vve(t,e){return"found"in e?function(n,a){Yr(!!a.found),a.found.name,a.found.updateTime;const s=Lh(n,a.found.name),o=To(a.found.updateTime),l=a.found.createTime?To(a.found.createTime):tn.min(),c=new tl({mapValue:{fields:a.found.fields}});return bs.newFoundDocument(s,o,l,c)}(t,e):"missing"in e?function(n,a){Yr(!!a.missing),Yr(!!a.readTime);const s=Lh(n,a.missing),o=To(a.readTime);return bs.newNoDocument(s,o)}(t,e):Gr()}function yve(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Gr()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Yr(d===void 0||typeof d=="string"),Ei.fromBase64String(d||"")):(Yr(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ei.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?er.UNKNOWN:VJ(u.code);return new Cr(d,u.message||"")}(o);r=new $J(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Lh(t,n.document.name),s=To(n.document.updateTime),o=n.document.createTime?To(n.document.createTime):tn.min(),l=new tl({mapValue:{fields:n.document.fields}}),c=bs.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new J_(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Lh(t,n.document),s=n.readTime?To(n.readTime):tn.min(),o=bs.newNoDocument(a,s),l=n.removedTargetIds||[];r=new J_([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Lh(t,n.document),s=n.removedTargetIds||[];r=new J_([],s,a,null)}else{if(!("filter"in e))return Gr();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new cve(a,s),l=n.targetId;r=new HJ(l,o)}}return r}function h2(t,e){let r;if(e instanceof Jv)r={update:w7(t,e.key,e.value)};else if(e instanceof Zv)r={delete:f2(t,e.key)};else if(e instanceof gA)r={update:w7(t,e.key,e.data),updateMask:Eve(e.fieldMask)};else{if(!(e instanceof PD))return Gr();r={verify:f2(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof u2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Kp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Cv)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof d2)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Gr()}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:gve(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Gr()}(t,e.precondition)),r}function DT(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?Ns.updateTime(To(s.updateTime)):s.exists!==void 0?Ns.exists(s.exists):Ns.none()}(e.currentDocument):Ns.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(o,l){let c=null;if("setToServerValue"in l)Yr(l.setToServerValue==="REQUEST_TIME"),c=new u2;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new Kp(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new Cv(d)}else"increment"in l?c=new d2(o,l.increment):Gr();const u=ws.fromServerFormat(l.fieldPath);return new MJ(u,c)}(t,a)):[];if(e.update){e.update.name;const a=Lh(t,e.update.name),s=new tl({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new Cc(u.map(d=>ws.fromServerFormat(d)))}(e.updateMask);return new gA(a,s,o,r,n)}return new Jv(a,s,r,n)}if(e.delete){const a=Lh(t,e.delete);return new Zv(a,r)}if(e.verify){const a=Lh(t,e.verify);return new PD(a,r)}return Gr()}function bve(t,e){return t&&t.length>0?(Yr(e!==void 0),t.map(r=>function(a,s){let o=a.updateTime?To(a.updateTime):To(s);return o.isEqual(tn.min())&&(o=To(s)),new ive(o,a.transformResults||[])}(r,e))):[]}function XJ(t,e){return{documents:[qJ(t,e.path)]}}function YJ(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=qJ(t,a);const s=function(u){if(u.length!==0)return eZ(Pa.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(A){return{field:px(A.field),direction:Nve(A.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=kT(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:a}}function JJ(t){let e=zJ(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Yr(n===1);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(f){const A=ZJ(f);return A instanceof Pa&&ID(A)?A.getFilters():[A]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(A=>function(m){return new c2(gx(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(A))}(r.orderBy));let l=null;r.limit&&(l=function(f){let A;return A=typeof f=="object"?f.value:f,mw(A)?null:A}(r.limit));let c=null;r.startAt&&(c=function(f){const A=!!f.before,h=f.values||[];return new wv(h,A)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const A=!f.before,h=f.values||[];return new wv(h,A)}(r.endAt)),qxe(e,a,o,s,l,"F",c,u)}function wve(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Gr()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function ZJ(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=gx(r.unaryFilter.field);return $n.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=gx(r.unaryFilter.field);return $n.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=gx(r.unaryFilter.field);return $n.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gx(r.unaryFilter.field);return $n.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Gr()}}(t):t.fieldFilter!==void 0?function(r){return $n.create(gx(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Gr()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Pa.create(r.compositeFilter.filters.map(n=>ZJ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Gr()}}(r.compositeFilter.op))}(t):Gr()}function Nve(t){return hve[t]}function Cve(t){return Ave[t]}function _ve(t){return mve[t]}function px(t){return{fieldPath:t.canonicalString()}}function gx(t){return ws.fromServerFormat(t.fieldPath)}function eZ(t){return t instanceof $n?function(r){if(r.op==="=="){if(s7(r.value))return{unaryFilter:{field:px(r.field),op:"IS_NAN"}};if(a7(r.value))return{unaryFilter:{field:px(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(s7(r.value))return{unaryFilter:{field:px(r.field),op:"IS_NOT_NAN"}};if(a7(r.value))return{unaryFilter:{field:px(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:px(r.field),op:Cve(r.op),value:r.value}}}(t):t instanceof Pa?function(r){const n=r.getFilters().map(a=>eZ(a));return n.length===1?n[0]:{compositeFilter:{op:_ve(r.op),filters:n}}}(t):Gr()}function Eve(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function tZ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,r,n,a,s=tn.min(),o=tn.min(),l=Ei.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Bh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Bh(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(e){this.ct=e}}function Sve(t,e){let r;if(e.document)r=xve(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Tr.fromSegments(e.noDocument.path),a=zp(e.noDocument.readTime);r=bs.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Gr();{const n=Tr.fromSegments(e.unknownDocument.path),a=zp(e.unknownDocument.version);r=bs.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new ur(a[0],a[1]);return tn.fromTimestamp(s)}(e.readTime)),r}function N7(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:JE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,o){return{name:f2(s,o.key),fields:o.data.value.mapValue.fields,updateTime:_v(s,o.version.toTimestamp()),createTime:_v(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:qp(e.version)};else{if(!e.isUnknownDocument())return Gr();n.unknownDocument={path:r.path.toArray(),version:qp(e.version)}}return n}function JE(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function qp(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zp(t){const e=new ur(t.seconds,t.nanoseconds);return tn.fromTimestamp(e)}function ep(t,e){const r=(e.baseMutations||[]).map(s=>DT(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>DT(t.ct,s)),a=ur.fromMillis(e.localWriteTimeMs);return new BD(e.batchId,a,r,n)}function Ty(t){const e=zp(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?zp(t.lastLimboFreeSnapshotVersion):tn.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return Yr(s.documents.length===1),nd(gw(zJ(s.documents[0])))}(t.query):function(s){return nd(JJ(s))}(t.query),new Bh(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Ei.fromBase64String(t.resumeToken))}function nZ(t,e){const r=qp(e.snapshotVersion),n=qp(e.lastLimboFreeSnapshotVersion);let a;a=WE(e.target)?XJ(t.ct,e.target):YJ(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gp(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function aZ(t){const e=JJ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?YE(e,e.limit,"L"):e}function u3(t,e){return new kD(e.largestBatchId,DT(t.ct,e.overlayMutation))}function C7(t,e){const r=e.path.lastSegment();return[t,ac(e.path.popLast()),r]}function _7(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:qp(n.readTime),documentKey:ac(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ive{getBundleMetadata(e,r){return E7(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:zp(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return E7(e).put(function(a){return{bundleId:a.id,createTime:qp(To(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return S7(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:aZ(s.bundledQuery),readTime:zp(s.readTime)}}(n)})}saveNamedQuery(e,r){return S7(e).put(function(a){return{name:a.name,readTime:qp(To(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function E7(t){return lo(t,"bundles")}function S7(t){return lo(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new hj(e,n)}getOverlay(e,r){return W1(e).get(C7(this.userId,r)).next(n=>n?u3(this.serializer,n):null)}getOverlays(e,r){const n=Pf();return Ht.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,o)=>{const l=new kD(r,o);a.push(this.ht(e,l))}),Ht.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(o=>a.add(ac(o.getCollectionPath())));const s=[];return a.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);s.push(W1(e).j("collectionPathOverlayIndex",l))}),Ht.waitFor(s)}getOverlaysForCollection(e,r,n){const a=Pf(),s=ac(r),o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return W1(e).U("collectionPathOverlayIndex",o).next(l=>{for(const c of l){const u=u3(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=Pf();let o;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return W1(e).J({index:"collectionGroupOverlayIndex",range:l},(c,u,d)=>{const f=u3(this.serializer,u);s.size()<a||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return W1(e).put(function(a,s,o){const[l,c,u]=C7(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:h2(a.ct,o.mutation)}}(this.serializer,this.userId,r))}}function W1(t){return lo(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jve{Pt(e){return lo(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Ei.fromUint8Array(n):Ei.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(vs(e.integerValue));else if("doubleValue"in e){const n=vs(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),a2(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=eA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(em(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?gJ(e)?this.dt(r,Number.MAX_SAFE_INTEGER):lj(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Gr()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const s=e.fields||{};this.dt(r,53);const o="value",l=((a=(n=s[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(vs(l)),this.Vt(o,r),this.Tt(s[o],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),Tr.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}tp.vt=new tp;function Pve(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function I7(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const o=Pve(255&n[s]);if(a+=o,o!==8)break}return a}(t);return Math.ceil(e/8)}class Bve{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=I7(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=I7(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class Tve{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class kve{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class X1{constructor(){this.jt=new Bve,this.Ht=new Tve(this.jt),this.Jt=new kve(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new rp(this.indexId,this.documentKey,this.arrayValue,n)}}function qA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=j7(t.arrayValue,e.arrayValue),r!==0?r:(r=j7(t.directionalValue,e.directionalValue),r!==0?r:Tr.comparator(t.documentKey,e.documentKey)))}function j7(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e){this.Xt=new La((r,n)=>ws.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Yr(e.collectionGroup===this.collectionId),this.nn)return!1;const r=_T(e);if(r!==void 0&&!this.sn(r))return!1;const n=Gm(e);let a=new Set,s=0,o=0;for(;s<n.length&&this.sn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.on(l,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(o>=this.en.length||!this._n(this.en[o++],l))return!1}return!0}an(){if(this.nn)return null;let e=new La(ws.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new q_(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new q_(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new q_(n.field,n.dir==="asc"?0:1)));return new zE(zE.UNKNOWN_ID,this.collectionId,r,n2.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sZ(t){var e,r;if(Yr(t instanceof $n||t instanceof Pa),t instanceof $n){if(t instanceof EJ){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>$n.create(t.field,"==",s)))||[];return Pa.create(a,"or")}return t}const n=t.filters.map(a=>sZ(a));return Pa.create(n,t.op)}function Fve(t){if(t.getFilters().length===0)return[];const e=LT(sZ(t));return Yr(iZ(e)),RT(e)||MT(e)?[e]:e.getFilters()}function RT(t){return t instanceof $n}function MT(t){return t instanceof Pa&&ID(t)}function iZ(t){return RT(t)||MT(t)||function(r){if(r instanceof Pa&&jT(r)){for(const n of r.getFilters())if(!RT(n)&&!MT(n))return!1;return!0}return!1}(t)}function LT(t){if(Yr(t instanceof $n||t instanceof Pa),t instanceof $n)return t;if(t.filters.length===1)return LT(t.filters[0]);const e=t.filters.map(n=>LT(n));let r=Pa.create(e,t.op);return r=ZE(r),iZ(r)?r:(Yr(r instanceof Pa),Yr(Nv(r)),Yr(r.filters.length>1),r.filters.reduce((n,a)=>DD(n,a)))}function DD(t,e){let r;return Yr(t instanceof $n||t instanceof Pa),Yr(e instanceof $n||e instanceof Pa),r=t instanceof $n?e instanceof $n?function(a,s){return Pa.create([a,s],"and")}(t,e):B7(t,e):e instanceof $n?B7(e,t):function(a,s){if(Yr(a.filters.length>0&&s.filters.length>0),Nv(a)&&Nv(s))return NJ(a,s.getFilters());const o=jT(a)?a:s,l=jT(a)?s:a,c=o.filters.map(u=>DD(u,l));return Pa.create(c,"or")}(t,e),ZE(r)}function B7(t,e){if(Nv(e))return NJ(e,t.getFilters());{const r=e.filters.map(n=>DD(t,n));return Pa.create(r,"or")}}function ZE(t){if(Yr(t instanceof $n||t instanceof Pa),t instanceof $n)return t;const e=t.getFilters();if(e.length===1)return ZE(e[0]);if(bJ(t))return t;const r=e.map(a=>ZE(a)),n=[];return r.forEach(a=>{a instanceof $n?n.push(a):a instanceof Pa&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:Pa.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ove{constructor(){this.un=new RD}addToCollectionParentIndex(e,r){return this.un.add(r),Ht.resolve()}getCollectionParents(e,r){return Ht.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ht.resolve()}deleteFieldIndex(e,r){return Ht.resolve()}deleteAllFieldIndexes(e){return Ht.resolve()}createTargetIndexes(e,r){return Ht.resolve()}getDocumentsMatchingTarget(e,r){return Ht.resolve(null)}getIndexType(e,r){return Ht.resolve(0)}getFieldIndexes(e,r){return Ht.resolve([])}getNextCollectionGroupToUpdate(e){return Ht.resolve(null)}getMinOffset(e,r){return Ht.resolve(hu.min())}getMinOffsetFromCollectionGroup(e,r){return Ht.resolve(hu.min())}updateCollectionGroup(e,r,n){return Ht.resolve()}updateIndexEntries(e,r){return Ht.resolve()}}class RD{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new La(ia.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new La(ia.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=new Uint8Array(0);class Dve{constructor(e,r){this.databaseId=r,this.cn=new RD,this.ln=new ym(n=>Gp(n),(n,a)=>pw(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:ac(a)};return T7(e).put(s)}return Ht.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[iJ(r),""],!1,!0);return T7(e).U(a).next(s=>{for(const o of s){if(o.collectionId!==r)break;n.push(jf(o.parent))}return n})}addFieldIndex(e,r){const n=Y1(e),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const o=Hg(e);return s.next(l=>{o.put(_7(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=Y1(e),a=Hg(e),s=Vg(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Y1(e),n=Vg(e),a=Hg(e);return r.j().next(()=>n.j()).next(()=>a.j())}createTargetIndexes(e,r){return Ht.forEach(this.hn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new P7(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=Vg(e);let a=!0;const s=new Map;return Ht.forEach(this.hn(r),o=>this.Pn(e,o).next(l=>{a&&(a=!!l),s.set(o,l)})).next(()=>{if(a){let o=Fn();const l=[];return Ht.forEach(s,(c,u)=>{pr("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(c)} to execute ${Gp(r)}`);const d=function(b,w){const j=_T(w);if(j===void 0)return null;for(const I of XE(b,j.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(u,c),f=function(b,w){const j=new Map;for(const I of Gm(w))for(const _ of XE(b,I.fieldPath))switch(_.op){case"==":case"in":j.set(I.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return j.set(I.fieldPath.canonicalString(),_.value),Array.from(j.values())}return null}(u,c),A=function(b,w){const j=[];let I=!0;for(const _ of Gm(w)){const S=_.kind===0?u7(b,_.fieldPath,b.startAt):d7(b,_.fieldPath,b.startAt);j.push(S.value),I&&(I=S.inclusive)}return new wv(j,I)}(u,c),h=function(b,w){const j=[];let I=!0;for(const _ of Gm(w)){const S=_.kind===0?d7(b,_.fieldPath,b.endAt):u7(b,_.fieldPath,b.endAt);j.push(S.value),I&&(I=S.inclusive)}return new wv(j,I)}(u,c),m=this.In(c,u,A),p=this.In(c,u,h),g=this.Tn(c,u,f),v=this.En(c.indexId,d,m,A.inclusive,p,h.inclusive,g);return Ht.forEach(v,y=>n.G(y,r.limit).next(b=>{b.forEach(w=>{const j=Tr.fromSegments(w.documentKey);o.has(j)||(o=o.add(j),l.push(j))})}))}).next(()=>l)}return Ht.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Fve(Pa.create(e.filters,"and")).map(n=>BT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,a,s,o,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let f=0;f<c;++f){const A=r?this.dn(r[f/u]):qN,h=this.An(e,A,n[f%u],a),m=this.Rn(e,A,s[f%u],o),p=l.map(g=>this.An(e,A,g,!0));d.push(...this.createRange(h,m,p))}return d}An(e,r,n,a){const s=new rp(e,Tr.empty(),r,n);return a?s:s.Zt()}Rn(e,r,n,a){const s=new rp(e,Tr.empty(),r,n);return a?s.Zt():s}Pn(e,r){const n=new P7(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let o=null;for(const l of s)n.rn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,r){let n=2;const a=this.hn(r);return Ht.forEach(a,s=>this.Pn(e,s).next(o=>{o?n!==0&&o.fields.length<function(c){let u=new La(ws.comparator),d=!1;for(const f of c.filters)for(const A of f.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?d=!0:u=u.add(A.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(o){return o.limit!==null}(r)&&a.length>1&&n===2?1:n)}Vn(e,r){const n=new X1;for(const a of Gm(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const o=n.Yt(a.kind);tp.vt.It(s,o)}return n.zt()}dn(e){const r=new X1;return tp.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new X1;return tp.vt.It(o2(this.databaseId,r),n.Yt(function(s){const o=Gm(s);return o.length===0?0:o[o.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new X1);let s=0;for(const o of Gm(e)){const l=n[s++];for(const c of a)if(this.fn(r,o.fieldPath)&&l2(l))a=this.gn(a,o,l);else{const u=c.Yt(o.kind);tp.vt.It(l,u)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],s=[];for(const o of n.arrayValue.values||[])for(const l of a){const c=new X1;c.seed(l.zt()),tp.vt.It(o,c.Yt(r.kind)),s.push(c)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof $n&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Y1(e),a=Hg(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const o=[];return Ht.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{o.push(function(d,f){const A=f?new n2(f.sequenceNumber,new hu(zp(f.readTime),new Tr(jf(f.documentKey)),f.largestBatchId)):n2.empty(),h=d.fields.map(([m,p])=>new q_(ws.fromServerFormat(m),p));return new zE(d.indexId,d.collectionGroup,h,A)}(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:Cn(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=Y1(e),s=Hg(e);return this.yn(e).next(o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>Ht.forEach(l,c=>s.put(_7(c.indexId,this.uid,o,n)))))}updateIndexEntries(e,r){const n=new Map;return Ht.forEach(r,(a,s)=>{const o=n.get(a.collectionGroup);return(o?Ht.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),Ht.forEach(l,c=>this.wn(e,a,c).next(u=>{const d=this.Sn(s,c);return u.isEqual(d)?Ht.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,r,n,a){return Vg(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return Vg(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=Vg(e);let s=new La(qA);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(o,l)=>{s=s.add(new rp(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(e,r){let n=new La(qA);const a=this.Vn(r,e);if(a==null)return n;const s=_T(r);if(s!=null){const o=e.data.field(s.fieldPath);if(l2(o))for(const l of o.arrayValue.values||[])n=n.add(new rp(r.indexId,e.key,this.dn(l),a))}else n=n.add(new rp(r.indexId,e.key,qN,a));return n}bn(e,r,n,a,s){pr("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return function(c,u,d,f,A){const h=c.getIterator(),m=u.getIterator();let p=Qg(h),g=Qg(m);for(;p||g;){let v=!1,y=!1;if(p&&g){const b=d(p,g);b<0?y=!0:b>0&&(v=!0)}else p!=null?y=!0:v=!0;v?(f(g),g=Qg(m)):y?(A(p),p=Qg(h)):(p=Qg(h),g=Qg(m))}}(a,s,qA,l=>{o.push(this.Dn(e,r,n,l))},l=>{o.push(this.vn(e,r,n,l))}),Ht.waitFor(o)}yn(e){let r=1;return Hg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((o,l)=>qA(o,l)).filter((o,l,c)=>!l||qA(o,c[l-1])!==0);const a=[];a.push(e);for(const o of n){const l=qA(o,e),c=qA(o,r);if(l===0)a[0]=e.Zt();else if(l>0&&c<0)a.push(o),a.push(o.Zt());else if(c>0)break}a.push(r);const s=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const l=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,qN,[]],c=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,qN,[]];s.push(IDBKeyRange.bound(l,c))}return s}Cn(e,r){return qA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(k7)}getMinOffset(e,r){return Ht.mapArray(this.hn(r),n=>this.Pn(e,n).next(a=>a||Gr())).next(k7)}}function T7(t){return lo(t,"collectionParents")}function Vg(t){return lo(t,"indexEntries")}function Y1(t){return lo(t,"indexConfiguration")}function Hg(t){return lo(t,"indexState")}function k7(t){Yr(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;ND(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new hu(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vc{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new vc(e,vc.DEFAULT_COLLECTION_PERCENTILE,vc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oZ(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),s=[],o=IDBKeyRange.only(r.batchId);let l=0;const c=n.J({range:o},(d,f,A)=>(l++,A.delete()));s.push(c.next(()=>{Yr(l===1)}));const u=[];for(const d of r.mutations){const f=dJ(e,d.key.path,r.batchId);s.push(a.delete(f)),u.push(d.key)}return Ht.waitFor(s).next(()=>u)}function eS(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Gr();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vc.DEFAULT_COLLECTION_PERCENTILE=10,vc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vc.DEFAULT=new vc(41943040,vc.DEFAULT_COLLECTION_PERCENTILE,vc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vc.DISABLED=new vc(-1,0,0);class Aj{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Yr(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Aj(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zA(e).J({index:"userMutationsIndex",range:n},(a,s,o)=>{r=!1,o.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=xx(e),o=zA(e);return o.add({}).next(l=>{Yr(typeof l=="number");const c=new BD(l,r,n,a),u=function(h,m,p){const g=p.baseMutations.map(y=>h2(h.ct,y)),v=p.mutations.map(y=>h2(h.ct,y));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:v}}(this.serializer,this.userId,c),d=[];let f=new La((A,h)=>Cn(A.canonicalString(),h.canonicalString()));for(const A of a){const h=dJ(this.userId,A.key.path,l);f=f.add(A.key.path.popLast()),d.push(o.put(u)),d.push(s.put(h,gxe))}return f.forEach(A=>{d.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Fn[l]=c.keys()}),Ht.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return zA(e).get(r).next(n=>n?(Yr(n.userId===this.userId),ep(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Ht.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return zA(e).J({index:"userMutationsIndex",range:a},(o,l,c)=>{l.userId===this.userId&&(Yr(l.batchId>=n),s=ep(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return zA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(a,s,o)=>{n=s.batchId,o.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zA(e).U("userMutationsIndex",r).next(n=>n.map(a=>ep(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=z_(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return xx(e).J({range:a},(o,l,c)=>{const[u,d,f]=o,A=jf(d);if(u===this.userId&&r.path.isEqual(A))return zA(e).get(f).next(h=>{if(!h)throw Gr();Yr(h.userId===this.userId),s.push(ep(this.serializer,h))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new La(Cn);const a=[];return r.forEach(s=>{const o=z_(this.userId,s.path),l=IDBKeyRange.lowerBound(o),c=xx(e).J({range:l},(u,d,f)=>{const[A,h,m]=u,p=jf(h);A===this.userId&&s.path.isEqual(p)?n=n.add(m):f.done()});a.push(c)}),Ht.waitFor(a).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=z_(this.userId,n),o=IDBKeyRange.lowerBound(s);let l=new La(Cn);return xx(e).J({range:o},(c,u,d)=>{const[f,A,h]=c,m=jf(A);f===this.userId&&n.isPrefixOf(m)?m.length===a&&(l=l.add(h)):d.done()}).next(()=>this.xn(e,l))}xn(e,r){const n=[],a=[];return r.forEach(s=>{a.push(zA(e).get(s).next(o=>{if(o===null)throw Gr();Yr(o.userId===this.userId),n.push(ep(this.serializer,o))}))}),Ht.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return oZ(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Ht.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Ht.resolve();const n=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),a=[];return xx(e).J({range:n},(s,o,l)=>{if(s[0]===this.userId){const c=jf(s[1]);a.push(c)}else l.done()}).next(()=>{Yr(a.length===0)})})}containsKey(e,r){return lZ(e,this.userId,r)}Nn(e){return cZ(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lZ(t,e,r){const n=z_(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let o=!1;return xx(t).J({range:s,H:!0},(l,c,u)=>{const[d,f,A]=l;d===e&&f===a&&(o=!0),u.done()}).next(()=>o)}function zA(t){return lo(t,"mutations")}function xx(t){return lo(t,"documentMutations")}function cZ(t){return lo(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wp(0)}static kn(){return new Wp(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rve{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Wp(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>tn.fromTimestamp(new ur(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>$g(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Yr(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return $g(e).J((o,l)=>{const c=Ty(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>Ht.waitFor(s)).next(()=>a)}forEachTarget(e,r){return $g(e).J((n,a)=>{const s=Ty(a);r(s)})}qn(e){return O7(e).get("targetGlobalKey").next(r=>(Yr(r!==null),r))}Qn(e,r){return O7(e).put("targetGlobalKey",r)}Kn(e,r){return $g(e).put(nZ(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Gp(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return $g(e).J({range:a,index:"queryTargetsIndex"},(o,l,c)=>{const u=Ty(l);pw(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=v0(e);return r.forEach(o=>{const l=ac(o.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(e,n,o))}),Ht.waitFor(a)}removeMatchingKeys(e,r,n){const a=v0(e);return Ht.forEach(r,s=>{const o=ac(s.path);return Ht.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=v0(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=v0(e);let s=Fn();return a.J({range:n,H:!0},(o,l,c)=>{const u=jf(o[1]),d=new Tr(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=ac(r.path),a=IDBKeyRange.bound([n],[iJ(n)],!1,!0);let s=0;return v0(e).J({index:"documentTargetsIndex",H:!0,range:a},([o,l],c,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,r){return $g(e).get(r).next(n=>n?Ty(n):null)}}function $g(t){return lo(t,"targets")}function O7(t){return lo(t,"targetGlobal")}function v0(t){return lo(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7([t,e],[r,n]){const a=Cn(t,r);return a===0?Cn(e,n):a}class Mve{constructor(e){this.Un=e,this.buffer=new La(D7),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();D7(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Lve{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){pr("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){vm(r)?pr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await mg(r)}await this.Hn(3e5)})}}class Uve{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ht.resolve(Yu.oe);const n=new Mve(r);return this.Jn.forEachTarget(e,a=>n.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(e,a=>n.zn(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(pr("LruGarbageCollector","Garbage collection skipped; disabled"),Ht.resolve(F7)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(pr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),F7):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(pr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,o=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),Ax()<=Hn.DEBUG&&pr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Ht.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function Qve(t,e){return new Uve(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vve{constructor(e,r){this.db=e,this.garbageCollector=Qve(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,a)=>r(a))}addReference(e,r,n){return zN(e,n)}removeReference(e,r,n){return zN(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return zN(e,r)}nr(e,r){return function(a,s){let o=!1;return cZ(a).Y(l=>lZ(a,l,s).next(c=>(c&&(o=!0),Ht.resolve(!c)))).next(()=>o)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.tr(e,(o,l)=>{if(l<=r){const c=this.nr(e,o).next(u=>{if(!u)return s++,n.getEntry(e,o).next(()=>(n.removeEntry(o,tn.min()),v0(e).delete(function(f){return[0,ac(f.path)]}(o))))});a.push(c)}}).next(()=>Ht.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return zN(e,r)}tr(e,r){const n=v0(e);let a,s=Yu.oe;return n.J({index:"documentTargetsIndex"},([o,l],{path:c,sequenceNumber:u})=>{o===0?(s!==Yu.oe&&r(new Tr(jf(a)),s),s=u,a=c):s=Yu.oe}).next(()=>{s!==Yu.oe&&r(new Tr(jf(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zN(t,e){return v0(t).put(function(n,a){return{targetId:0,path:ac(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uZ{constructor(){this.changes=new ym(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,bs.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ht.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hve{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Fm(e).put(n)}removeEntry(e,r,n){return Fm(e).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],JE(o),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=bs.newInvalidDocument(r);return Fm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(J1(r))},(a,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:bs.newInvalidDocument(r)};return Fm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(J1(r))},(a,s)=>{n={document:this.ir(r,s),size:eS(s)}}).next(()=>n)}getEntries(e,r){let n=iu();return this._r(e,r,(a,s)=>{const o=this.ir(a,s);n=n.insert(a,o)}).next(()=>n)}ar(e,r){let n=iu(),a=new Es(Tr.comparator);return this._r(e,r,(s,o)=>{const l=this.ir(s,o);n=n.insert(s,l),a=a.insert(s,eS(o))}).next(()=>({documents:n,ur:a}))}_r(e,r,n){if(r.isEmpty())return Ht.resolve();let a=new La(L7);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(J1(a.first()),J1(a.last())),o=a.getIterator();let l=o.getNext();return Fm(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{const f=Tr.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&L7(l,f)<0;)n(l,null),l=o.getNext();l&&l.isEqual(f)&&(n(l,u),l=o.hasNext()?o.getNext():null),l?d.$(J1(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const o=r.path,l=[o.popLast().toArray(),o.lastSegment(),JE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fm(e).U(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=iu();for(const f of u){const A=this.ir(Tr.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);A.isFoundDocument()&&(xw(r,A)||a.has(A.key))&&(d=d.insert(A.key,A))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=iu();const o=M7(r,n),l=M7(r,hu.max());return Fm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(c,u,d)=>{const f=this.ir(Tr.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new $ve(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return R7(e).get("remoteDocumentGlobalKey").next(r=>(Yr(!!r),r))}rr(e,r){return R7(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Sve(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(tn.min())))return n}return bs.newInvalidDocument(e)}}function dZ(t){return new Hve(t)}class $ve extends uZ{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new ym(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new La((s,o)=>Cn(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,l.readTime)),o.isValidDocument()){const c=N7(this.cr.serializer,o);a=a.add(s.path.popLast());const u=eS(c);n+=u-l.size,r.push(this.cr.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){const c=N7(this.cr.serializer,o.convertToNoDocument(tn.min()));r.push(this.cr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),Ht.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:a})=>(a.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:n.get(s).readTime})}),n))}}function R7(t){return lo(t,"remoteDocumentGlobal")}function Fm(t){return lo(t,"remoteDocumentsV14")}function J1(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function M7(t,e){const r=e.documentKey.path.toArray();return[t,JE(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function L7(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=Cn(r[s],n[s]),a)return a;return a=Cn(r.length,n.length),a||(a=Cn(r[r.length-2],n[n.length-2]),a||Cn(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gve{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&cb(n.mutation,a,Cc.empty(),ur.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Fn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Fn()){const a=Pf();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let o=Py();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Pf();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Fn()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,a){let s=iu();const o=lb(),l=function(){return lb()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof gA)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),cb(d.mutation,u,d.mutation.getFieldMask(),ur.now())):o.set(u.key,Cc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>{var f;return l.set(u,new Gve(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=lb();let a=new Es((o,l)=>o-l),s=Fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Cc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||Fn()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=TJ();d.forEach(A=>{if(!s.has(A)){const h=LJ(r.get(A),n.get(A));h!==null&&f.set(A,h),s=s.add(A)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Ht.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(o){return Tr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):SJ(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):Ht.resolve(Pf());let l=-1,c=s;return o.next(u=>Ht.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?Ht.resolve():this.remoteDocumentCache.getEntry(e,d).next(A=>{c=c.insert(d,A)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Fn())).next(d=>({batchId:l,changes:BJ(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Tr(r)).next(n=>{let a=Py();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let o=Py();return this.indexManager.getCollectionParents(e,s).next(l=>Ht.forEach(l,c=>{const u=function(f,A){return new Yv(A,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((f,A)=>{o=o.insert(f,A)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,bs.newInvalidDocument(d)))});let l=Py();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&cb(d.mutation,u,Cc.empty(),ur.now()),xw(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kve{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ht.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:To(a.createTime)}}(r)),Ht.resolve()}getNamedQuery(e,r){return Ht.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(a){return{name:a.name,query:aZ(a.bundledQuery),readTime:To(a.readTime)}}(r)),Ht.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qve{constructor(){this.overlays=new Es(Tr.comparator),this.Ir=new Map}getOverlay(e,r){return Ht.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Pf();return Ht.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.ht(e,r,s)}),Ht.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),Ht.resolve()}getOverlaysForCollection(e,r,n){const a=Pf(),s=r.length+1,o=new Tr(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Ht.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new Es((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Pf(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Pf(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Ht.resolve(l)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new kD(r,n));let s=this.Ir.get(r);s===void 0&&(s=Fn(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zve{constructor(){this.sessionToken=Ei.EMPTY_BYTE_STRING}getSessionToken(e){return Ht.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ht.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.Tr=new La(No.Er),this.dr=new La(No.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new No(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new No(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Tr(new ia([])),n=new No(r,e),a=new No(r,e+1),s=[];return this.dr.forEachInRange([n,a],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Tr(new ia([])),n=new No(r,e),a=new No(r,e+1);let s=Fn();return this.dr.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(e){const r=new No(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class No{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Tr.comparator(e.key,r.key)||Cn(e.wr,r.wr)}static Ar(e,r){return Cn(e.wr,r.wr)||Tr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wve{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new La(No.Er)}checkEmpty(e){return Ht.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new BD(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.br=this.br.add(new No(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Ht.resolve(o)}lookupMutationBatch(e,r){return Ht.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return Ht.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ht.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ht.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new No(r,0),a=new No(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],o=>{const l=this.Dr(o.wr);s.push(l)}),Ht.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new La(Cn);return r.forEach(a=>{const s=new No(a,0),o=new No(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{n=n.add(l.wr)})}),Ht.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;Tr.isDocumentKey(s)||(s=s.child(""));const o=new No(new Tr(s),0);let l=new La(Cn);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.wr)),!0)},o),Ht.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const a=this.Dr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Yr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ht.forEach(r.mutations,a=>{const s=new No(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new No(r,0),a=this.br.firstAfterOrEqual(n);return Ht.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ht.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xve{constructor(e){this.Mr=e,this.docs=function(){return new Es(Tr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ht.resolve(n?n.document.mutableCopy():bs.newInvalidDocument(r))}getEntries(e,r){let n=iu();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():bs.newInvalidDocument(a))}),Ht.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=iu();const o=r.path,l=new Tr(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||ND(oJ(d),n)<=0||(a.has(d.key)||xw(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ht.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Gr()}Or(e,r){return Ht.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new Yve(this)}getSize(e){return Ht.resolve(this.size)}}class Yve extends uZ{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)}),Ht.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jve{constructor(e){this.persistence=e,this.Nr=new ym(r=>Gp(r),pw),this.lastRemoteSnapshotVersion=tn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new MD,this.targetCount=0,this.kr=Wp.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,a)=>r(a)),Ht.resolve()}getLastRemoteSnapshotVersion(e){return Ht.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ht.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ht.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ht.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Wp(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ht.resolve()}updateTargetData(e,r){return this.Kn(r),Ht.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ht.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),Ht.waitFor(s).next(()=>a)}getTargetCount(e){return Ht.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ht.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ht.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(e,o))}),Ht.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ht.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ht.resolve(n)}containsKey(e,r){return Ht.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Yu(0),this.Kr=!1,this.Kr=!0,this.$r=new zve,this.referenceDelegate=e(this),this.Ur=new Jve(this),this.indexManager=new Ove,this.remoteDocumentCache=function(a){return new Xve(a)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new rZ(r),this.Gr=new Kve(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new qve,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new Wve(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){pr("MemoryPersistence","Starting transaction:",e);const a=new Zve(this.Qr.next());return this.referenceDelegate.zr(),n(a).next(s=>this.referenceDelegate.jr(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Hr(e,r){return Ht.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class Zve extends cJ{constructor(e){super(),this.currentSequenceNumber=e}}class mj{constructor(e){this.persistence=e,this.Jr=new MD,this.Yr=null}static Zr(e){return new mj(e)}get Xr(){if(this.Yr)return this.Yr;throw Gr()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ht.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ht.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ht.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(a=>this.Xr.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ht.forEach(this.Xr,n=>{const a=Tr.fromPath(n);return this.ei(e,a).next(s=>{s||r.removeEntry(a,tn.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Ht.or([()=>Ht.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1e{constructor(e){this.serializer=e}O(e,r,n,a){const s=new oj("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZU,{unique:!0}),c.createObjectStore("documentMutations")}(e),U7(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=Ht.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),U7(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:tn.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),n<4&&a>=4&&(n!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZU,{unique:!0});const f=u.store("mutations"),A=d.map(h=>f.put(h));return Ht.waitFor(A)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&a>=5&&(o=o.next(()=>this.ni(s))),n<6&&a>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&a>=7&&(o=o.next(()=>this.ii(s))),n<8&&a>=8&&(o=o.next(()=>this.si(e,s))),n<9&&a>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(o=o.next(()=>this.oi(s))),n<11&&a>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&a>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:jxe});u.createIndex("collectionPathOverlayIndex",Pxe,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Bxe,{unique:!1})})(e)})),n<13&&a>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:xxe});u.createIndex("documentKeyIndex",vxe),u.createIndex("collectionGroupIndex",yxe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&a>=14&&(o=o.next(()=>this.ai(e,s))),n<15&&a>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:_xe}).createIndex("sequenceNumberIndex",Exe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Sxe}).createIndex("documentKeyIndex",Ixe,{unique:!1})}(e))),n<16&&a>=16&&(o=o.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&a>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let r=0;return e.store("remoteDocuments").J((n,a)=>{r+=eS(a)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(a=>Ht.forEach(a,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next(l=>Ht.forEach(l,c=>{Yr(c.userId===s.userId);const u=ep(this.serializer,c);return oZ(e,s.userId,u).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const s=[];return n.J((o,l)=>{const c=new ia(o),u=function(f){return[0,ac(f)]}(c);s.push(r.get(u).next(d=>d?Ht.resolve():(f=>r.put({targetId:0,path:ac(f),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>Ht.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:Cxe});const n=r.store("collectionParents"),a=new RD,s=o=>{if(a.add(o)){const l=o.lastSegment(),c=o.popLast();return n.put({collectionId:l,parent:ac(c)})}};return r.store("remoteDocuments").J({H:!0},(o,l)=>{const c=new ia(o);return s(c.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([o,l,c],u)=>{const d=jf(l);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,a)=>{const s=Ty(a),o=nZ(this.serializer,s);return r.put(o)})}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J((s,o)=>{const l=r.store("remoteDocumentsV14"),c=function(f){return f.document?new Tr(ia.fromString(f.document.name).popFirst(5)):f.noDocument?Tr.fromSegments(f.noDocument.path):f.unknownDocument?Tr.fromSegments(f.unknownDocument.path):Gr()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(l.put(u))}).next(()=>Ht.waitFor(a))}ai(e,r){const n=r.store("mutations"),a=dZ(this.serializer),s=new hZ(mj.Zr,this.serializer.ct);return n.U().next(o=>{const l=new Map;return o.forEach(c=>{var u;let d=(u=l.get(c.userId))!==null&&u!==void 0?u:Fn();ep(this.serializer,c).keys().forEach(f=>d=d.add(f)),l.set(c.userId,d)}),Ht.forEach(l,(c,u)=>{const d=new Jo(u),f=hj.lt(this.serializer,d),A=s.getIndexManager(d),h=Aj.lt(d,this.serializer,A,s.referenceDelegate);return new fZ(a,h,f,A).recalculateAndSaveOverlaysForDocumentKeys(new ET(r,Yu.oe),c).next()})})}}function U7(t){t.createObjectStore("targetDocuments",{keyPath:wxe}).createIndex("documentTargetsIndex",Nxe,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bxe,{unique:!0}),t.createObjectStore("targetGlobal")}const d3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class LD{constructor(e,r,n,a,s,o,l,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=o,this.document=l,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=A=>Promise.resolve(),!LD.D())throw new Cr(er.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vve(this,a),this.Ai=r+"main",this.serializer=new rZ(c),this.Ri=new $0(this.Ai,this.hi,new e1e(this.serializer)),this.$r=new jve,this.Ur=new Rve(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dZ(this.serializer),this.Gr=new Ive,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&tc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Cr(er.FAILED_PRECONDITION,d3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Yu(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>WN(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(vm(e))return pr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Z1(e).get("owner").next(r=>Ht.resolve(this.vi(r)))}Ci(e){return WN(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=lo(r,"clientMetadata");return n.U().next(a=>{const s=this.xi(a,18e5),o=a.filter(l=>s.indexOf(l)===-1);return Ht.forEach(o,l=>n.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ht.resolve(!0):Z1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Cr(er.FAILED_PRECONDITION,d3);return!1}}return!(!this.networkEnabled||!this.inForeground)||WN(e).U().next(n=>this.xi(n,5e3).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&pr("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new ET(e,Yu.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>WN(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Aj.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Dve(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hj.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){pr("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===17?Fxe:c===16?kxe:c===15?_D:c===14?AJ:c===13?hJ:c===12?Txe:c===11?fJ:void Gr()}(this.hi);let o;return this.Ri.runTransaction(e,a,s,l=>(o=new ET(l,this.Qr?this.Qr.next():Yu.oe),r==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw tc(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Cr(er.FAILED_PRECONDITION,lJ);return n(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>n(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e){return Z1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Cr(er.FAILED_PRECONDITION,d3)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Z1(e).put("owner",r)}static D(){return $0.D()}bi(e){const r=Z1(e);return r.get("owner").next(n=>this.vi(n)?(pr("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ht.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(tc(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;fY()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return pr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return tc("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){tc("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Z1(t){return lo(t,"owner")}function WN(t){return lo(t,"clientMetadata")}function t1e(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=Fn(),a=Fn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new UD(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AZ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return fY()?8:uJ(io())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new r1e;return this.Xi(e,r,o).next(l=>{if(s.result=l,this.zi)return this.es(e,r,o,l.size)})}).next(()=>s.result)}es(e,r,n,a){return n.documentReadCount<this.ji?(Ax()<=Hn.DEBUG&&pr("QueryEngine","SDK will not create cache indexes for query:",mx(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ht.resolve()):(Ax()<=Hn.DEBUG&&pr("QueryEngine","Query:",mx(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(Ax()<=Hn.DEBUG&&pr("QueryEngine","The SDK decides to create cache indexes for query:",mx(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nd(r))):Ht.resolve())}Yi(e,r){if(f7(r))return Ht.resolve(null);let n=nd(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=YE(r,null,"F"),n=nd(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=Fn(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,o,c.readTime)?this.Yi(e,YE(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,a){return f7(r)||a.isEqual(tn.min())?Ht.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const o=this.ts(r,s);return this.ns(r,o,n,a)?Ht.resolve(null):(Ax()<=Hn.DEBUG&&pr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),mx(r)),this.rs(e,o,r,uxe(a,-1)).next(l=>l))})}ts(e,r){let n=new La(jJ(e));return r.forEach((a,s)=>{xw(e,s)&&(n=n.add(s))}),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return Ax()<=Hn.DEBUG&&pr("QueryEngine","Using full collection scan to execute query:",mx(r)),this.Ji.getDocumentsMatchingQuery(e,r,hu.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1e{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Es(Cn),this._s=new ym(s=>Gp(s),pw),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fZ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function mZ(t,e,r,n){return new n1e(t,e,r,n)}async function pZ(t,e){const r=vn(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=Fn();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function a1e(t,e){const r=vn(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,A=f.keys();let h=Ht.resolve();return A.forEach(m=>{h=h.next(()=>d.getEntry(c,m)).next(p=>{const g=u.docVersions.get(m);Yr(g!==null),p.version.compareTo(g)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),h.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Fn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function gZ(t){const e=vn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function s1e(t,e){const r=vn(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const l=[];e.targetChanges.forEach((d,f)=>{const A=a.get(f);if(!A)return;l.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,f)));let h=A.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?h=h.withResumeToken(Ei.EMPTY_BYTE_STRING,tn.min()).withLastLimboFreeSnapshotVersion(tn.min()):d.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(d.resumeToken,n)),a=a.insert(f,h),function(p,g,v){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(A,h,d)&&l.push(r.Ur.updateTargetData(s,h))});let c=iu(),u=Fn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(i1e(s,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(tn.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(f=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Ht.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.os=a,s))}function i1e(t,e,r){let n=Fn(),a=Fn();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let o=iu();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(tn.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):pr("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:a}})}function o1e(t,e){const r=vn(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function l1e(t,e){const r=vn(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Ur.getTargetData(n,e).next(s=>s?(a=s,Ht.resolve(a)):r.Ur.allocateTargetId(n).next(o=>(a=new Bh(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function UT(t,e,r){const n=vn(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!vm(o))throw o;pr("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function Q7(t,e,r){const n=vn(t);let a=tn.min(),s=Fn();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=vn(c),A=f._s.get(d);return A!==void 0?Ht.resolve(f.os.get(A)):f.Ur.getTargetData(u,d)}(n,o,nd(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:tn.min(),r?s:Fn())).next(l=>(c1e(n,Wxe(e),l),{documents:l,Ts:s})))}function c1e(t,e,r){let n=t.us.get(e)||tn.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}class V7{constructor(){this.activeTargetIds=tve()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xZ{constructor(){this.so=new V7,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new V7,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1e{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XN=null;function f3(){return XN===null?XN=function(){return 268435456+Math.round(2147483648*Math.random())}():XN++,"0x"+XN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1e{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl="WebChannelConnection";class h1e extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,o){const l=f3(),c=this.xo(r,n.toUriEncodedString());pr("RestConnection",`Sending RPC '${r}' ${l}:`,c,a);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(r,c,u,a).then(d=>(pr("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw Z0("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",a),d})}Lo(r,n,a,s,o,l){return this.Mo(r,n,a,s,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xv}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>r[o]=s),a&&a.headers.forEach((s,o)=>r[o]=s)}xo(r,n){const a=d1e[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=f3();return new Promise((o,l)=>{const c=new ZY;c.setWithCredentials(!0),c.listenOnce(eJ.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case K_.NO_ERROR:const d=c.getResponseJson();pr(hl,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case K_.TIMEOUT:pr(hl,`RPC '${e}' ${s} timed out`),l(new Cr(er.DEADLINE_EXCEEDED,"Request time out"));break;case K_.HTTP_ERROR:const f=c.getStatus();if(pr(hl,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let A=c.getResponseJson();Array.isArray(A)&&(A=A[0]);const h=A==null?void 0:A.error;if(h&&h.status&&h.message){const m=function(g){const v=g.toLowerCase().replace(/_/g,"-");return Object.values(er).indexOf(v)>=0?v:er.UNKNOWN}(h.status);l(new Cr(m,h.message))}else l(new Cr(er.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Cr(er.UNAVAILABLE,"Connection failed."));break;default:Gr()}}finally{pr(hl,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(a);pr(hl,`RPC '${e}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const a=f3(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nJ(),l=rJ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");pr(hl,`Creating RPC '${e}' stream ${a}: ${d}`,c);const f=o.createWebChannel(d,c);let A=!1,h=!1;const m=new f1e({Io:g=>{h?pr(hl,`Not sending because RPC '${e}' stream ${a} is closed:`,g):(A||(pr(hl,`Opening RPC '${e}' stream ${a} transport.`),f.open(),A=!0),pr(hl,`RPC '${e}' stream ${a} sending:`,g),f.send(g))},To:()=>f.close()}),p=(g,v,y)=>{g.listen(v,b=>{try{y(b)}catch(w){setTimeout(()=>{throw w},0)}})};return p(f,jy.EventType.OPEN,()=>{h||(pr(hl,`RPC '${e}' stream ${a} transport opened.`),m.yo())}),p(f,jy.EventType.CLOSE,()=>{h||(h=!0,pr(hl,`RPC '${e}' stream ${a} transport closed`),m.So())}),p(f,jy.EventType.ERROR,g=>{h||(h=!0,Z0(hl,`RPC '${e}' stream ${a} transport errored:`,g),m.So(new Cr(er.UNAVAILABLE,"The operation could not be completed")))}),p(f,jy.EventType.MESSAGE,g=>{var v;if(!h){const y=g.data[0];Yr(!!y);const b=y,w=b.error||((v=b[0])===null||v===void 0?void 0:v.error);if(w){pr(hl,`RPC '${e}' stream ${a} received error:`,w);const j=w.status;let I=function(E){const F=ji[E];if(F!==void 0)return VJ(F)}(j),_=w.message;I===void 0&&(I=er.INTERNAL,_="Unknown error status: "+j+" with message "+w.message),h=!0,m.So(new Cr(I,_)),f.close()}else pr(hl,`RPC '${e}' stream ${a} received:`,y),m.bo(y)}}),p(l,tJ.STAT_EVENT,g=>{g.stat===CT.PROXY?pr(hl,`RPC '${e}' stream ${a} detected buffering proxy`):g.stat===CT.NOPROXY&&pr(hl,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1e(){return typeof window<"u"?window:null}function Z_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(t){return new pve(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&pr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vZ{constructor(e,r,n,a,s,o,l,c){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new QD(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===er.RESOURCE_EXHAUSTED?(tc(r.toString()),tc("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===er.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.Yo===r&&this.P_(n,a)},n=>{e(()=>{const a=new Cr(er.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{n(()=>this.I_(a))}),this.stream.onMessage(a=>{n(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return pr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(pr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class m1e extends vZ{constructor(e,r,n,a,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=yve(this.serializer,e),n=function(s){if(!("targetChange"in s))return tn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?tn.min():o.readTime?To(o.readTime):tn.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=OT(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=WE(c)?{documents:XJ(s,c)}:{query:YJ(s,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=GJ(s,o.resumeToken);const u=kT(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(tn.min())>0){l.readTime=_v(s,o.snapshotVersion.toTimestamp());const u=kT(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=wve(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=OT(this.serializer),r.removeTarget=e,this.a_(r)}}class p1e extends vZ{constructor(e,r,n,a,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Yr(!!e.streamToken),this.lastStreamToken=e.streamToken,Yr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Yr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=bve(e.writeResults,e.commitTime),n=To(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=OT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>h2(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1e extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new Cr(er.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,FT(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===er.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Cr(er.UNKNOWN,s.toString())})}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,FT(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===er.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Cr(er.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class x1e{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(tc(r),this.D_=!1):pr("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1e{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{n.enqueueAndForget(async()=>{gg(this)&&(pr("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=vn(c);u.L_.add(4),await yw(u),u.q_.set("Unknown"),u.L_.delete(4),await gj(u)}(this))})}),this.q_=new x1e(n,a)}}async function gj(t){if(gg(t))for(const e of t.B_)await e(!0)}async function yw(t){for(const e of t.B_)await e(!1)}function yZ(t,e){const r=vn(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),GD(r)?$D(r):e1(r).r_()&&HD(r,e))}function VD(t,e){const r=vn(t),n=e1(r);r.N_.delete(e),n.r_()&&bZ(r,e),r.N_.size===0&&(n.r_()?n.o_():gg(r)&&r.q_.set("Unknown"))}function HD(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tn.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}e1(t).A_(e)}function bZ(t,e){t.Q_.xe(e),e1(t).R_(e)}function $D(t){t.Q_=new fve({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),e1(t).start(),t.q_.v_()}function GD(t){return gg(t)&&!e1(t).n_()&&t.N_.size>0}function gg(t){return vn(t).L_.size===0}function wZ(t){t.Q_=void 0}async function y1e(t){t.q_.set("Online")}async function b1e(t){t.N_.forEach((e,r)=>{HD(t,e)})}async function w1e(t,e){wZ(t),GD(t)?(t.q_.M_(e),$D(t)):t.q_.set("Unknown")}async function N1e(t,e,r){if(t.q_.set("Online"),e instanceof $J&&e.state===2&&e.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.N_.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.N_.delete(l),a.Q_.removeTarget(l))}(t,e)}catch(n){pr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await tS(t,n)}else if(e instanceof J_?t.Q_.Ke(e):e instanceof HJ?t.Q_.He(e):t.Q_.We(e),!r.isEqual(tn.min()))try{const n=await gZ(t.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Ei.EMPTY_BYTE_STRING,d.snapshotVersion)),bZ(s,c);const f=new Bh(d.target,c,u,d.sequenceNumber);HD(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){pr("RemoteStore","Failed to raise snapshot:",n),await tS(t,n)}}async function tS(t,e,r){if(!vm(e))throw e;t.L_.add(1),await yw(t),t.q_.set("Offline"),r||(r=()=>gZ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pr("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await gj(t)})}function NZ(t,e){return e().catch(r=>tS(t,r,e))}async function bw(t){const e=vn(t),r=nm(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;C1e(e);)try{const a=await o1e(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,_1e(e,a)}catch(a){await tS(e,a)}CZ(e)&&_Z(e)}function C1e(t){return gg(t)&&t.O_.length<10}function _1e(t,e){t.O_.push(e);const r=nm(t);r.r_()&&r.V_&&r.m_(e.mutations)}function CZ(t){return gg(t)&&!nm(t).n_()&&t.O_.length>0}function _Z(t){nm(t).start()}async function E1e(t){nm(t).p_()}async function S1e(t){const e=nm(t);for(const r of t.O_)e.m_(r.mutations)}async function I1e(t,e,r){const n=t.O_.shift(),a=TD.from(n,e,r);await NZ(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await bw(t)}async function j1e(t,e){e&&nm(t).V_&&await async function(n,a){if(function(o){return QJ(o)&&o!==er.ABORTED}(a.code)){const s=n.O_.shift();nm(n).s_(),await NZ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await bw(n)}}(t,e),CZ(t)&&_Z(t)}async function $7(t,e){const r=vn(t);r.asyncQueue.verifyOperationInProgress(),pr("RemoteStore","RemoteStore received new credentials");const n=gg(r);r.L_.add(3),await yw(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await gj(r)}async function P1e(t,e){const r=vn(t);e?(r.L_.delete(2),await gj(r)):e||(r.L_.add(2),await yw(r),r.q_.set("Unknown"))}function e1(t){return t.K_||(t.K_=function(r,n,a){const s=vn(r);return s.w_(),new m1e(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:y1e.bind(null,t),Ro:b1e.bind(null,t),mo:w1e.bind(null,t),d_:N1e.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),GD(t)?$D(t):t.q_.set("Unknown")):(await t.K_.stop(),wZ(t))})),t.K_}function nm(t){return t.U_||(t.U_=function(r,n,a){const s=vn(r);return s.w_(),new p1e(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:E1e.bind(null,t),mo:j1e.bind(null,t),f_:S1e.bind(null,t),g_:I1e.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bw(t)):(await t.U_.stop(),t.O_.length>0&&(pr("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Gd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const o=Date.now()+n,l=new KD(e,r,o,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Cr(er.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qD(t,e){if(tc("AsyncQueue",`${e}: ${t}`),vm(t))return new Cr(er.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Tr.comparator(r.key,n.key):(r,n)=>Tr.comparator(r.key,n.key),this.keyedMap=Py(),this.sortedSet=new Es(this.comparator)}static emptySet(e){return new rv(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof rv)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new rv;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(){this.W_=new Es(Tr.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Gr():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ev{constructor(e,r,n,a,s,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Ev(e,r,rv.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cj(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1e{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class T1e{constructor(){this.queries=K7(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=vn(r),s=a.queries;a.queries=K7(),s.forEach((o,l)=>{for(const c of l.j_)c.onError(n)})})(this,new Cr(er.ABORTED,"Firestore shutting down"))}}function K7(){return new ym(t=>IJ(t),cj)}async function zD(t,e){const r=vn(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new B1e,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=qD(o,`Initialization of query '${mx(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&XD(r)}async function WD(t,e){const r=vn(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function k1e(t,e){const r=vn(t);let n=!1;for(const a of e){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.j_)l.X_(a)&&(n=!0);o.z_=a}}n&&XD(r)}function F1e(t,e,r){const n=vn(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function XD(t){t.Y_.forEach(e=>{e.next()})}var QT,q7;(q7=QT||(QT={})).ea="default",q7.Cache="cache";class YD{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Ev(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Ev.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==QT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(e){this.key=e}}class SZ{constructor(e){this.key=e}}class O1e{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Fn(),this.mutatedKeys=Fn(),this.Aa=jJ(e),this.Ra=new rv(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new G7,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,f)=>{const A=a.get(d),h=xw(this.query,f)?f:null,m=!!A&&this.mutatedKeys.has(A.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;A&&h?A.data.isEqual(h.data)?m!==p&&(n.track({type:3,doc:h}),g=!0):this.ga(A,h)||(n.track({type:2,doc:h}),g=!0,(c&&this.Aa(h,c)>0||u&&this.Aa(h,u)<0)&&(l=!0)):!A&&h?(n.track({type:0,doc:h}),g=!0):A&&!h&&(n.track({type:1,doc:A}),g=!0,(c||u)&&(l=!0)),g&&(h?(o=o.add(h),s=p?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:o,fa:n,ns:l,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(h,m){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gr()}};return p(h)-p(m)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(n),a=a!=null&&a;const l=r&&!a?this.ya():[],c=this.da.size===0&&this.current&&!a?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Ev(this.query,e.Ra,s,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new G7,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Fn(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new SZ(n))}),this.da.forEach(n=>{e.has(n)||r.push(new EZ(n))}),r}ba(e){this.Ta=e.Ts,this.da=Fn();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Ev.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class D1e{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class R1e{constructor(e){this.key=e,this.va=!1}}class M1e{constructor(e,r,n,a,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ym(l=>IJ(l),cj),this.Ma=new Map,this.xa=new Set,this.Oa=new Es(Tr.comparator),this.Na=new Map,this.La=new MD,this.Ba={},this.ka=new Map,this.qa=Wp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function L1e(t,e,r=!0){const n=kZ(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await IZ(n,e,r,!0),a}async function U1e(t,e){const r=kZ(t);await IZ(r,e,!0,!1)}async function IZ(t,e,r,n){const a=await l1e(t.localStore,nd(e)),s=a.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await Q1e(t,e,s,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&yZ(t.remoteStore,a),l}async function Q1e(t,e,r,n,a){t.Ka=(f,A,h)=>async function(p,g,v,y){let b=g.view.ma(v);b.ns&&(b=await Q7(p.localStore,g.query,!1).then(({documents:_})=>g.view.ma(_,b)));const w=y&&y.targetChanges.get(g.targetId),j=y&&y.targetMismatches.get(g.targetId)!=null,I=g.view.applyChanges(b,p.isPrimaryClient,w,j);return W7(p,g.targetId,I.wa),I.snapshot}(t,f,A,h);const s=await Q7(t.localStore,e,!0),o=new O1e(e,s.Ts),l=o.ma(s.documents),c=vw.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=o.applyChanges(l,t.isPrimaryClient,c);W7(t,r,u.wa);const d=new D1e(e,r,o);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function V1e(t,e,r){const n=vn(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter(o=>!cj(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await UT(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&VD(n.remoteStore,a.targetId),VT(n,a.targetId)}).catch(mg)):(VT(n,a.targetId),await UT(n.localStore,a.targetId,!0))}async function H1e(t,e){const r=vn(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),VD(r.remoteStore,n.targetId))}async function $1e(t,e,r){const n=FZ(t);try{const a=await function(o,l){const c=vn(o),u=ur.now(),d=l.reduce((h,m)=>h.add(m.key),Fn());let f,A;return c.persistence.runTransaction("Locally write mutations","readwrite",h=>{let m=iu(),p=Fn();return c.cs.getEntries(h,d).next(g=>{m=g,m.forEach((v,y)=>{y.isValidDocument()||(p=p.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(h,m)).next(g=>{f=g;const v=[];for(const y of l){const b=lve(y,f.get(y.key).overlayedDocument);b!=null&&v.push(new gA(y.key,b,vJ(b.value.mapValue),Ns.exists(!0)))}return c.mutationQueue.addMutationBatch(h,u,v,l)}).next(g=>{A=g;const v=g.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(h,g.batchId,v)})}).then(()=>({batchId:A.batchId,changes:BJ(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Es(Cn)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(n,a.batchId,r),await ww(n,a.changes),await bw(n.remoteStore)}catch(a){const s=qD(a,"Failed to persist write");r.reject(s)}}async function jZ(t,e){const r=vn(t);try{const n=await s1e(r.localStore,e);e.targetChanges.forEach((a,s)=>{const o=r.Na.get(s);o&&(Yr(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?Yr(o.va):a.removedDocuments.size>0&&(Yr(o.va),o.va=!1))}),await ww(r,n,e)}catch(n){await mg(n)}}function z7(t,e,r){const n=vn(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=vn(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const A of f.j_)A.Z_(l)&&(u=!0)}),u&&XD(c)}(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function G1e(t,e,r){const n=vn(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let o=new Es(Tr.comparator);o=o.insert(s,bs.newNoDocument(s,tn.min()));const l=Fn().add(s),c=new fj(tn.min(),new Map,new Es(Cn),o,l);await jZ(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),JD(n)}else await UT(n.localStore,e,!1).then(()=>VT(n,e,r)).catch(mg)}async function K1e(t,e){const r=vn(t),n=e.batch.batchId;try{const a=await a1e(r.localStore,e);BZ(r,n,null),PZ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await ww(r,a)}catch(a){await mg(a)}}async function q1e(t,e,r){const n=vn(t);try{const a=await function(o,l){const c=vn(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Yr(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);BZ(n,e,r),PZ(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await ww(n,a)}catch(a){await mg(a)}}function PZ(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function BZ(t,e,r){const n=vn(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function VT(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||TZ(t,n)})}function TZ(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(VD(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),JD(t))}function W7(t,e,r){for(const n of r)n instanceof EZ?(t.La.addReference(n.key,e),z1e(t,n)):n instanceof SZ?(pr("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||TZ(t,n.key)):Gr()}function z1e(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(pr("SyncEngine","New document in limbo: "+r),t.xa.add(n),JD(t))}function JD(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Tr(ia.fromString(e)),n=t.qa.next();t.Na.set(n,new R1e(r)),t.Oa=t.Oa.insert(r,n),yZ(t.remoteStore,new Bh(nd(gw(r.path)),n,"TargetPurposeLimboResolution",Yu.oe))}}async function ww(t,e,r){const n=vn(t),a=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{o.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=UD.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(o),n.Ca.d_(a),await async function(c,u){const d=vn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ht.forEach(u,A=>Ht.forEach(A.$i,h=>d.persistence.referenceDelegate.addReference(f,A.targetId,h)).next(()=>Ht.forEach(A.Ui,h=>d.persistence.referenceDelegate.removeReference(f,A.targetId,h)))))}catch(f){if(!vm(f))throw f;pr("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const A=f.targetId;if(!f.fromCache){const h=d.os.get(A),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(A,p)}}}(n.localStore,s))}async function W1e(t,e){const r=vn(t);if(!r.currentUser.isEqual(e)){pr("SyncEngine","User change. New user:",e.toKey());const n=await pZ(r.localStore,e);r.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new Cr(er.CANCELLED,o))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await ww(r,n.hs)}}function X1e(t,e){const r=vn(t),n=r.Na.get(e);if(n&&n.va)return Fn().add(n.key);{let a=Fn();const s=r.Ma.get(e);if(!s)return a;for(const o of s){const l=r.Fa.get(o);a=a.unionWith(l.view.Va)}return a}}function kZ(t){const e=vn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jZ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X1e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G1e.bind(null,e),e.Ca.d_=k1e.bind(null,e.eventManager),e.Ca.$a=F1e.bind(null,e.eventManager),e}function FZ(t){const e=vn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K1e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q1e.bind(null,e),e}class A2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pj(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return mZ(this.persistence,new AZ,e.initialUser,this.serializer)}Ga(e){return new hZ(mj.Zr,this.serializer)}Wa(e){return new xZ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}A2.provider={build:()=>new A2};class Y1e extends A2{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await FZ(this.Ja.syncEngine),await bw(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return mZ(this.persistence,new AZ,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new Lve(n,e.asyncQueue,r)}Ha(e,r){const n=new Axe(r,this.persistence);return new hxe(e.asyncQueue,n)}Ga(e){const r=t1e(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?vc.withCacheSize(this.cacheSizeBytes):vc.DEFAULT;return new LD(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,A1e(),Z_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new xZ}}class rS{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>z7(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=W1e.bind(null,this.syncEngine),await P1e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new T1e}()}createDatastore(e){const r=pj(e.databaseInfo.databaseId),n=function(s){return new h1e(s)}(e.databaseInfo);return function(s,o,l,c){return new g1e(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,o,l){return new v1e(n,a,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>z7(this.syncEngine,r,0),function(){return H7.D()?new H7:new u1e}())}createSyncEngine(e,r){return function(a,s,o,l,c,u,d){const f=new M1e(a,s,o,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=vn(a);pr("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await yw(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}rS.provider={build:()=>new rS};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):tc("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1e{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Cr(er.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(a,s){const o=vn(a),l={documents:s.map(f=>f2(o.serializer,f))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,ia.emptyPath(),l,s.length),u=new Map;c.forEach(f=>{const A=vve(o.serializer,f);u.set(A.key.toString(),A)});const d=[];return s.forEach(f=>{const A=u.get(f.toString());Yr(!!A),d.push(A)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const a=Tr.fromPath(n);this.mutations.push(new PD(a,this.precondition(a)))}),await async function(n,a){const s=vn(n),o={writes:a.map(l=>h2(s.serializer,l))};await s.Mo("Commit",s.serializer.databaseId,ia.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Gr();r=tn.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Cr(er.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(tn.min())?Ns.exists(!1):Ns.updateTime(r):Ns.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(tn.min()))throw new Cr(er.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ns.updateTime(r)}return Ns.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1e{constructor(e,r,n,a,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=s,this._u=n.maxAttempts,this.t_=new QD(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new J1e(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.lu(a)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!mw(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!QJ(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eye{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Jo.UNAUTHENTICATED,this.clientId=wD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{pr("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(pr("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=qD(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function h3(t,e){t.asyncQueue.verifyOperationInProgress(),pr("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await pZ(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function X7(t,e){t.asyncQueue.verifyOperationInProgress();const r=await tye(t);pr("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>$7(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>$7(e.remoteStore,a)),t._onlineComponents=e}async function tye(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pr("FirestoreClient","Using user provided OfflineComponentProvider");try{await h3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===er.FAILED_PRECONDITION||a.code===er.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Z0("Error using user provided cache. Falling back to memory cache: "+r),await h3(t,new A2)}}else pr("FirestoreClient","Using default OfflineComponentProvider"),await h3(t,new A2);return t._offlineComponents}async function e6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pr("FirestoreClient","Using user provided OnlineComponentProvider"),await X7(t,t._uninitializedComponentsProvider._online)):(pr("FirestoreClient","Using default OnlineComponentProvider"),await X7(t,new rS))),t._onlineComponents}function rye(t){return e6(t).then(e=>e.syncEngine)}function nye(t){return e6(t).then(e=>e.datastore)}async function nS(t){const e=await e6(t),r=e.eventManager;return r.onListen=L1e.bind(null,e.syncEngine),r.onUnlisten=V1e.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=U1e.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=H1e.bind(null,e.syncEngine),r}function aye(t,e,r={}){const n=new Gd;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new ZD({next:A=>{d.Za(),o.enqueueAndForget(()=>WD(s,f));const h=A.docs.has(l);!h&&A.fromCache?u.reject(new Cr(er.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&A.fromCache&&c&&c.source==="server"?u.reject(new Cr(er.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new YD(gw(l.path),d,{includeMetadataChanges:!0,_a:!0});return zD(s,f)}(await nS(t),t.asyncQueue,e,r,n)),n.promise}function sye(t,e,r={}){const n=new Gd;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new ZD({next:A=>{d.Za(),o.enqueueAndForget(()=>WD(s,f)),A.fromCache&&c.source==="server"?u.reject(new Cr(er.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new YD(l,d,{includeMetadataChanges:!0,_a:!0});return zD(s,f)}(await nS(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OZ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DZ(t,e,r){if(!r)throw new Cr(er.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RZ(t,e,r,n){if(e===!0&&n===!0)throw new Cr(er.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function J7(t){if(!Tr.isDocumentKey(t))throw new Cr(er.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Z7(t){if(Tr.isDocumentKey(t))throw new Cr(er.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xj(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Gr()}function ko(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Cr(er.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=xj(t);throw new Cr(er.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Cr(er.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Cr(er.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OZ((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Cr(er.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Cr(er.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Cr(er.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vj{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e9({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Cr(er.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Cr(er.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e9(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new sJ;switch(n.type){case"firstParty":return new sxe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Cr(er.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Y7.get(r);n&&(pr("ComponentProvider","Removing Datastore"),Y7.delete(r),n.terminate())}(this),Promise.resolve()}}function MZ(t,e,r,n={}){var a;const s=(t=ko(t,vj))._getSettings(),o=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Z0("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=Jo.MOCK_USER;else{l=b0e(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new Cr(er.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Jo(u)}t._authCredentials=new rxe(new aJ(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new qf(this.firestore,e,this._query)}}class Fo{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fo(this.firestore,e,this._key)}}class Uh extends qf{constructor(e,r,n){super(e,r,gw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fo(this.firestore,null,new Tr(e))}withConverter(e){return new Uh(this.firestore,e,this._path)}}function bt(t,e,...r){if(t=Hs(t),DZ("collection","path",e),t instanceof vj){const n=ia.fromString(e,...r);return Z7(n),new Uh(t,null,n)}{if(!(t instanceof Fo||t instanceof Uh))throw new Cr(er.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ia.fromString(e,...r));return Z7(n),new Uh(t.firestore,null,n)}}function zt(t,e,...r){if(t=Hs(t),arguments.length===1&&(e=wD.newId()),DZ("doc","path",e),t instanceof vj){const n=ia.fromString(e,...r);return J7(n),new Fo(t,null,new Tr(n))}{if(!(t instanceof Fo||t instanceof Uh))throw new Cr(er.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ia.fromString(e,...r));return J7(n),new Fo(t.firestore,t instanceof Uh?t.converter:null,new Tr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new QD(this,"async_queue_retry"),this.Vu=()=>{const n=Z_();n&&pr("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Z_();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Z_();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Gd;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!vm(e))throw e;pr("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const a=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw tc("INTERNAL UNHANDLED ERROR: ",a),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=KD.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(a),a}fu(){this.Eu&&Gr()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function r9(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Au extends vj{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new t9,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new t9(e),this._firestoreClient=void 0,await e}}}function LZ(t,e){const r=typeof t=="object"?t:oD(),n=typeof t=="string"?t:"(default)",a=sD(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=v0e("firestore");s&&MZ(a,...s)}return a}function xg(t){if(t._terminated)throw new Cr(er.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UZ(t),t._firestoreClient}function UZ(t){var e,r,n;const a=t._freezeSettings(),s=function(l,c,u,d){return new Dxe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,OZ(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new eye(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function QZ(t,e){Z0("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return iye(t,rS.provider,{build:n=>new Y1e(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function iye(t,e,r){if((t=ko(t,Au))._firestoreClient||t._terminated)throw new Cr(er.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Cr(er.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},UZ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this._byteString=e}static fromBase64String(e){try{return new am(Ei.fromBase64String(e))}catch(r){throw new Cr(er.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new am(Ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Cr(er.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ws(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Cr(er.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Cr(er.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Cn(this._lat,e._lat)||Cn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oye=/^__.*__$/;class lye{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new gA(e,this.data,this.fieldMask,r,this.fieldTransforms):new Jv(e,this.data,r,this.fieldTransforms)}}class VZ{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new gA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function HZ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gr()}}class wj{constructor(e,r,n,a,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new wj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return aS(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HZ(this.Cu)&&oye.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cye{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||pj(e)}Qu(e,r,n,a=!1){return new wj({Cu:e,methodName:r,qu:n,path:ws.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function t1(t){const e=t._freezeSettings(),r=pj(t._databaseId);return new cye(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Nj(t,e,r,n,a,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);a6("Data must be an object, but it was:",o,n);const l=$Z(n,o);let c,u;if(s.merge)c=new Cc(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const A=HT(e,f,r);if(!o.contains(A))throw new Cr(er.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);KZ(d,A)||d.push(A)}c=new Cc(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new lye(new tl(l),c,u)}class Cj extends Nw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cj}}function uye(t,e,r){return new wj({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class t6 extends Nw{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=uye(this,e,!0),n=this.Ku.map(s=>r1(s,r)),a=new Kp(n);return new MJ(e.path,a)}isEqual(e){return e instanceof t6&&Jb(this.Ku,e.Ku)}}function r6(t,e,r,n){const a=t.Qu(1,e,r);a6("Data must be an object, but it was:",a,n);const s=[],o=tl.empty();pg(n,(c,u)=>{const d=s6(e,c,r);u=Hs(u);const f=a.Nu(d);if(u instanceof Cj)s.push(d);else{const A=r1(u,f);A!=null&&(s.push(d),o.set(d,A))}});const l=new Cc(s);return new VZ(o,l,a.fieldTransforms)}function n6(t,e,r,n,a,s){const o=t.Qu(1,e,r),l=[HT(e,n,r)],c=[a];if(s.length%2!=0)throw new Cr(er.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)l.push(HT(e,s[A])),c.push(s[A+1]);const u=[],d=tl.empty();for(let A=l.length-1;A>=0;--A)if(!KZ(u,l[A])){const h=l[A];let m=c[A];m=Hs(m);const p=o.Nu(h);if(m instanceof Cj)u.push(h);else{const g=r1(m,p);g!=null&&(u.push(h),d.set(h,g))}}const f=new Cc(u);return new VZ(d,f,o.fieldTransforms)}function dye(t,e,r,n=!1){return r1(r,t.Qu(n?4:3,e))}function r1(t,e){if(GZ(t=Hs(t)))return a6("Unsupported field value:",e,t),$Z(t,e);if(t instanceof Nw)return function(n,a){if(!HZ(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=r1(l,a.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=Hs(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return rve(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ur.fromDate(n);return{timestampValue:_v(a.serializer,s)}}if(n instanceof ur){const s=new ur(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:_v(a.serializer,s)}}if(n instanceof yj)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof am)return{bytesValue:GJ(a.serializer,n._byteString)};if(n instanceof Fo){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:OD(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof bj)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return jD(l.serializer,c)})}}}}}}(n,a);throw a.Bu(`Unsupported field value: ${xj(n)}`)}(t,e)}function $Z(t,e){const r={};return mJ(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pg(t,(n,a)=>{const s=r1(a,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function GZ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ur||t instanceof yj||t instanceof am||t instanceof Fo||t instanceof Nw||t instanceof bj)}function a6(t,e,r){if(!GZ(r)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(r)){const n=xj(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function HT(t,e,r){if((e=Hs(e))instanceof vg)return e._internalPath;if(typeof e=="string")return s6(t,e);throw aS("Field path arguments must be of type string or ",t,!1,void 0,r)}const fye=new RegExp("[~\\*/\\[\\]]");function s6(t,e,r){if(e.search(fye)>=0)throw aS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new vg(...e.split("."))._internalPath}catch{throw aS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function aS(t,e,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new Cr(er.INVALID_ARGUMENT,l+t+c)}function KZ(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Fo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hye(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(_j("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class hye extends sS{data(){return super.data()}}function _j(t,e){return typeof e=="string"?s6(t,e):e instanceof vg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qZ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Cr(er.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class i6{}class Ej extends i6{}function nr(t,e,...r){let n=[];e instanceof i6&&n.push(e),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof Sj).length,l=s.filter(c=>c instanceof Cw).length;if(o>1||o>0&&l>0)throw new Cr(er.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class Cw extends Ej{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Cw(e,r,n)}_apply(e){const r=this._parse(e);return zZ(e._query,r),new qf(e.firestore,e.converter,TT(e._query,r))}_parse(e){const r=t1(e.firestore);return function(s,o,l,c,u,d,f){let A;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Cr(er.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){a9(f,d);const h=[];for(const m of f)h.push(n9(c,s,m));A={arrayValue:{values:h}}}else A=n9(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||a9(f,d),A=dye(l,o,f,d==="in"||d==="not-in");return $n.create(u,d,A)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function sr(t,e,r){const n=e,a=_j("where",t);return Cw._create(a,n,r)}class Sj extends i6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Sj(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Pa.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)zZ(o,c),o=TT(o,c)}(e._query,r),new qf(e.firestore,e.converter,TT(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ij extends Ej{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Ij(e,r)}_apply(e){const r=function(a,s,o){if(a.startAt!==null)throw new Cr(er.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Cr(er.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new c2(s,o)}(e._query,this._field,this._direction);return new qf(e.firestore,e.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new Yv(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function xn(t,e="asc"){const r=e,n=_j("orderBy",t);return Ij._create(n,r)}class jj extends Ej{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new jj(e,r,n)}_apply(e){return new qf(e.firestore,e.converter,YE(e._query,this._limit,this._limitType))}}function iS(t){return jj._create("limit",t,"F")}function n9(t,e,r){if(typeof(r=Hs(r))=="string"){if(r==="")throw new Cr(er.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SJ(e)&&r.indexOf("/")!==-1)throw new Cr(er.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ia.fromString(r));if(!Tr.isDocumentKey(n))throw new Cr(er.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return o2(t,new Tr(n))}if(r instanceof Fo)return o2(t,r._key);throw new Cr(er.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xj(r)}.`)}function a9(t,e){if(!Array.isArray(t)||t.length===0)throw new Cr(er.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zZ(t,e){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Cr(er.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Cr(er.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class o6{convertValue(e,r="none"){switch($p(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(em(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Gr()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return pg(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(o=>vs(o.doubleValue));return new bj(s)}convertGeoPoint(e){return new yj(vs(e.latitude),vs(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=SD(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(s2(e));default:return null}}convertTimestamp(e){const r=eA(e);return new ur(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ia.fromString(e);Yr(tZ(n));const a=new tm(n.get(1),n.get(3)),s=new Tr(n.popFirst(5));return a.isEqual(r)||tc(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Aye extends o6{constructor(e){super(),this.firestore=e}convertBytes(e){return new am(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Fo(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bj extends sS{constructor(e,r,n,a,s,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ub(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(_j("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ub extends Bj{data(e={}){return super.data(e)}}class l6{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new lp(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new ub(this._firestore,this._userDataWriter,n.key,n,new lp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Cr(er.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new ub(a._firestore,a._userDataWriter,l.doc.key,l.doc,new lp(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new ub(a._firestore,a._userDataWriter,l.doc.key,l.doc,new lp(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:mye(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function mye(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t){t=ko(t,Fo);const e=ko(t.firestore,Au);return aye(xg(e),t._key).then(r=>XZ(e,t,r))}class Tj extends o6{constructor(e){super(),this.firestore=e}convertBytes(e){return new am(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Fo(this.firestore,null,r)}}function Qt(t){t=ko(t,qf);const e=ko(t.firestore,Au),r=xg(e),n=new Tj(e);return qZ(t._query),sye(r,t._query).then(a=>new l6(e,n,t,a))}function WZ(t,e,r){t=ko(t,Fo);const n=ko(t.firestore,Au),a=Pj(t.converter,e,r);return n1(n,[Nj(t1(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,Ns.none())])}function pn(t,e,r,...n){t=ko(t,Fo);const a=ko(t.firestore,Au),s=t1(a);let o;return o=typeof(e=Hs(e))=="string"||e instanceof vg?n6(s,"updateDoc",t._key,e,r,n):r6(s,"updateDoc",t._key,e),n1(a,[o.toMutation(t._key,Ns.exists(!0))])}function Pn(t){return n1(ko(t.firestore,Au),[new Zv(t._key,Ns.none())])}function Bn(t,e){const r=ko(t.firestore,Au),n=zt(t),a=Pj(t.converter,e);return n1(r,[Nj(t1(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Ns.exists(!1))]).then(()=>n)}function ad(t,...e){var r,n,a;t=Hs(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||r9(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(r9(e[o])){const f=e[o];e[o]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[o+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[o+2]=(a=f.complete)===null||a===void 0?void 0:a.bind(f)}let c,u,d;if(t instanceof Fo)u=ko(t.firestore,Au),d=gw(t._key.path),c={next:f=>{e[o]&&e[o](XZ(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=ko(t,qf);u=ko(f.firestore,Au),d=f._query;const A=new Tj(u);c={next:h=>{e[o]&&e[o](new l6(u,A,f,h))},error:e[o+1],complete:e[o+2]},qZ(t._query)}return function(A,h,m,p){const g=new ZD(p),v=new YD(h,g,m);return A.asyncQueue.enqueueAndForget(async()=>zD(await nS(A),v)),()=>{g.Za(),A.asyncQueue.enqueueAndForget(async()=>WD(await nS(A),v))}}(xg(u),d,l,c)}function n1(t,e){return function(n,a){const s=new Gd;return n.asyncQueue.enqueueAndForget(async()=>$1e(await rye(n),a,s)),s.promise}(xg(t),e)}function XZ(t,e,r){const n=r.docs.get(e._key),a=new Tj(t);return new Bj(t,a,e._key,n,new lp(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pye={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YZ{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=t1(e)}set(e,r,n){this._verifyNotCommitted();const a=y0(e,this._firestore),s=Pj(a.converter,r,n),o=Nj(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,Ns.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=y0(e,this._firestore);let o;return o=typeof(r=Hs(r))=="string"||r instanceof vg?n6(this._dataReader,"WriteBatch.update",s._key,r,n,a):r6(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,Ns.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=y0(e,this._firestore);return this._mutations=this._mutations.concat(new Zv(r._key,Ns.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Cr(er.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function y0(t,e){if((t=Hs(t)).firestore!==e)throw new Cr(er.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZ extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=t1(r)}get(r){const n=y0(r,this._firestore),a=new Aye(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Gr();const o=s[0];if(o.isFoundDocument())return new sS(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new sS(this._firestore,a,n._key,null,n.converter);throw Gr()})}set(r,n,a){const s=y0(r,this._firestore),o=Pj(s.converter,n,a),l=Nj(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,a);return this._transaction.set(s._key,l),this}update(r,n,a,...s){const o=y0(r,this._firestore);let l;return l=typeof(n=Hs(n))=="string"||n instanceof vg?n6(this._dataReader,"Transaction.update",o._key,n,a,s):r6(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,l),this}delete(r){const n=y0(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=y0(e,this._firestore),n=new Tj(this._firestore);return super.get(e).then(a=>new Bj(this._firestore,n,r._key,a._document,new lp(!1,!1),r.converter))}}function Di(t,e,r){t=ko(t,Au);const n=Object.assign(Object.assign({},pye),r);return function(s){if(s.maxAttempts<1)throw new Cr(er.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,o,l){const c=new Gd;return s.asyncQueue.enqueueAndForget(async()=>{const u=await nye(s);new Z1e(s.asyncQueue,u,l,o,c).au()}),c.promise}(xg(t),a=>e(new JZ(t,a)),n)}function ZZ(...t){return new t6("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){return xg(t=ko(t,Au)),new YZ(t,e=>n1(t,e))}(function(e,r=!0){(function(a){Xv=a})(zv),vv(new Up("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Au(new nxe(n.getProvider("auth-internal")),new oxe(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Cr(er.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tm(u.options.projectId,d)}(o,a),o);return s=Object.assign({useFetchStreams:r},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),H0(XU,"4.7.3",e),H0(XU,"4.7.3","esm2017")})();const gye=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:o6,Bytes:am,CollectionReference:Uh,DocumentReference:Fo,DocumentSnapshot:Bj,FieldPath:vg,FieldValue:Nw,Firestore:Au,FirestoreError:Cr,GeoPoint:yj,Query:qf,QueryCompositeFilterConstraint:Sj,QueryConstraint:Ej,QueryDocumentSnapshot:ub,QueryFieldFilterConstraint:Cw,QueryLimitConstraint:jj,QueryOrderByConstraint:Ij,QuerySnapshot:l6,SnapshotMetadata:lp,Timestamp:ur,Transaction:JZ,VectorValue:bj,WriteBatch:YZ,_AutoId:wD,_ByteString:Ei,_DatabaseId:tm,_DocumentKey:Tr,_EmptyAuthCredentialsProvider:sJ,_FieldPath:ws,_cast:ko,_logWarn:Z0,_validateIsNotUsedTogether:RZ,addDoc:Bn,arrayUnion:ZZ,collection:bt,connectFirestoreEmulator:MZ,deleteDoc:Pn,doc:zt,enableIndexedDbPersistence:QZ,ensureFirestoreConfigured:xg,executeWrite:n1,getDoc:Ci,getDocs:Qt,getFirestore:LZ,limit:iS,onSnapshot:ad,orderBy:xn,query:nr,runTransaction:Di,setDoc:WZ,updateDoc:pn,where:sr,writeBatch:Kd},Symbol.toStringTag,{value:"Module"})),xye={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},eee=iD(xye),Oe=LZ(eee),Lf=NT(eee),vye=(async()=>{try{return await H_(Lf,gD),console.info(" Auth persistence: browserLocalPersistence enabled"),"local"}catch(t){console.warn(" browserLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await H_(Lf,WY),console.info(" Auth persistence: indexedDBLocalPersistence enabled"),"indexeddb"}catch(t){console.warn(" indexedDBLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await H_(Lf,xD),console.info(" Auth persistence: browserSessionPersistence enabled (session only)"),"session"}catch(t){console.warn(" browserSessionPersistence failed:",(t==null?void 0:t.code)||t)}return console.warn(" No se pudo establecer ninguna persistencia para Auth."),"none"})();QZ(Oe).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function yye(){const[t,e]=x.useState(""),[r,n]=x.useState(""),[a,s]=x.useState(!1),[o,l]=x.useState(""),[c,u]=x.useState(!1),d=ow(),f=h=>{if(Array.isArray(h)){if(h.length!==1)return localStorage.setItem("role",h[0]||""),d("/admin");h=h[0]||""}const m=String(h||"");if(localStorage.setItem("role",m),on(m,"admin"))return d("/admin");if(on(m,"vendedor_pollo"))return d("/admin/salesV2");if(on(m,"vendedor_ropa"))return d("/admin/salesClothes");if(on(m,"vendedor_dulces"))return d("/admin/salesCandies");if(on(m,"supervisor_pollo")||on(m,"contador"))return d("/admin/batches")},A=async h=>{if(h.preventDefault(),l(""),!t.trim()){l("Ingresa el correo.");return}if(r.length<6){l("La contrasea debe tener al menos 6 caracteres.");return}try{u(!0),console.info&&console.info("[Login] attempting signIn",{email:t}),await H_(Lf,gD);const m=await Vpe(Lf,t,r);console.info&&console.info("[Login] signInWithEmailAndPassword success",{uid:m.user.uid,email:m.user.email});const p=m.user.uid;localStorage.setItem("POSYS_LOGIN_AT",String(Date.now()));const g=await Ci(zt(Oe,"users",p));if(console.info&&console.info("[Login] firestore users doc snap: exists=",g.exists()),!g.exists()){console.warn&&console.warn("[Login] user doc missing for uid",p),l("Tu usuario no tiene perfil en la base de datos.");return}const v=g.data();console.info&&console.info("[Login] user profile:",v);const y=Array.isArray(v.roles)?v.roles:v.role?[v.role]:[],b=y[0]||"",w=v.name||"",j=["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"];if(!y.some(I=>j.includes(I))){l("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",m.user.email||""),w&&localStorage.setItem("user_name",w),localStorage.setItem("roles",JSON.stringify(y)),y.length===1?f(b):d("/admin")}catch(m){console.error&&console.error("[Login] sign-in error:",m);const p=String((m==null?void 0:m.code)||"");l(p==="auth/invalid-credential"||p==="auth/wrong-password"?"Credenciales incorrectas. ("+p+")":p==="auth/user-not-found"?"Usuario no encontrado. ("+p+")":p==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde. ("+p+")":((m==null?void 0:m.message)||"Error al iniciar sesin.")+(p?` (${p})`:""))}finally{u(!1)}};return i.jsx("div",{className:"min-h-screen grid place-items-center ",children:i.jsxs("form",{onSubmit:A,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),i.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),i.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:h=>e(h.target.value),autoComplete:"username"}),i.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx("input",{type:a?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:h=>n(h.target.value),minLength:6,autoComplete:"current-password"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>s(h=>!h),children:a?"Ocultar":"Mostrar"})]}),i.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),i.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:c,children:c?"Entrando...":"Entrar"}),o&&i.jsx("p",{className:`mt-3 text-sm ${o.startsWith("Error")||o.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:o})]})})}function In({children:t,allowedRoles:e}){const[r,n]=x.useState(!0),[a,s]=x.useState(!1);return x.useEffect(()=>{const o=mD(Lf,async l=>{if(l){const c=zt(Oe,"users",l.uid),u=await Ci(c);if(u.exists()){const d=u.data(),f=Array.isArray(d.roles)?d.roles:d.role?[d.role]:[];try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e):console.debug&&console.debug("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e)}catch{}let A=!1;for(const h of e)if(on(f,h)){A=!0;break}s(A)}else try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] no user doc for uid:",l.uid):console.debug&&console.debug("[PrivateRoute] no user doc for uid:",l.uid)}catch{}}n(!1)});return()=>o()},[e]),r?i.jsx("div",{className:"p-4",children:"Cargando..."}):a?t:i.jsx(xh,{to:"/"})}const bye={admin:{},supervisor_pollo:{bills:{view:!0,edit:!1},customersPollo:{view:!0,edit:!1},transactionsPollo:{view:!0,edit:!1},batches:{view:!0,edit:!1}},contador:{salesV2:{view:!0,edit:!0},customersPollo:{view:!0,edit:!0},batches:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1},financialDashboard:{view:!0,edit:!1}},vendedor_pollo:{salesV2:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1},customersPollo:{view:!0,edit:!0}},vendedor_dulces:{salesCandies:{view:!0,edit:!0},productsVendorsCandies:{view:!0,edit:!1},productsPricesCandies:{view:!0,edit:!1},transactionCandies:{view:!0,edit:!1},cierreVentasCandies:{view:!0,edit:!1},customersCandies:{view:!0,edit:!0}},vendedor_ropa:{}};function tee(t){return t?Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean):[]}function Vn(t,e,r="view"){const n=tee(t);return n.some(a=>a==="admin")?!0:n.some(a=>{var s,o;return!!((o=(s=bye[a])==null?void 0:s[e])!=null&&o[r])})}const wye={admin:{},supervisor_pollo:{bills:{cerrarVentas:!1},batches:{create:!1,update:!1,delete:!1,export:!1}},contador:{batches:{create:!0,update:!1,delete:!1,export:!0},bills:{cerrarVentas:!1}},vendedor_pollo:{salesV2:{create:!0,update:!0},customersPollo:{update:!0},bills:{cerrarVentas:!0}},vendedor_dulces:{salesCandies:{create:!0,update:!0},productsVendorsCandies:{create:!0,update:!1,delete:!1},customersCandies:{update:!0},productsPricesCandies:{price_edit:!1}},vendedor_ropa:{}};function Nye(t,e,r){const n=tee(t);return n.some(a=>a==="admin")?!0:Vn(t,e,"view")?n.some(a=>{var o;const s=(o=wye[a])==null?void 0:o[e];return!!(s!=null&&s[r])}):!1}function Cye({role:t,roles:e}){const r="/admin",n=({isActive:ie})=>`block rounded px-3 py-2 text-sm ${ie?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,a=ow(),[s,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,A]=x.useState(!1),[h,m]=x.useState(!1),[p,g]=x.useState(!1),[v,y]=x.useState(!1),[b,w]=x.useState(!1),[j,I]=x.useState(!1),[_,S]=x.useState(!1),[E,F]=x.useState(!1),[P,k]=x.useState(!1),[D,J]=x.useState(!1),[fe,Ae]=x.useState(!1),[me,pe]=x.useState(!1),[ne,Pe]=x.useState(!1),[Be,O]=x.useState(!1),[G,q]=x.useState(!1),U=async()=>{q(!0)},Y=async()=>{try{await pD(Lf)}catch(ie){console.error("signOut error:",ie)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}q(!1),a("/")}},Z=({open:ie,onClick:ee,children:Ie})=>i.jsxs("button",{type:"button",onClick:ee,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[i.jsx("span",{children:Ie}),i.jsx("span",{className:"text-xs",children:ie?"":""})]}),R=({open:ie,onClick:ee,title:Ie})=>i.jsxs("button",{type:"button",onClick:ee,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[i.jsx("span",{className:"text-blue-500 font-medium ",children:Ie}),i.jsx("span",{className:"text-xs",children:ie?"":""})]}),H=e&&e.length?e:t,te=on(H,"admin");on(H,"vendedor_pollo");const ye=on(H,"vendedor_ropa");on(H,"vendedor_dulces"),on(H,"supervisor_pollo")||on(H,"contador"),on(H,"contador");const Q=Vn(H,"salesV2","view")||Vn(H,"customersPollo","view")||Vn(H,"transactionsPollo","view")||Vn(H,"bills","view")||Vn(H,"batches","view"),Ge=Vn(H,"salesCandies","view")||Vn(H,"productsVendorsCandies","view")||Vn(H,"customersCandies","view")||Vn(H,"productsPricesCandies","view")||Vn(H,"transactionCandies","view")||Vn(H,"cierreVentasCandies","view");return i.jsxs("div",{className:"min-h-screen flex",children:[i.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-[#f1f3f7] border-r p-3 transition-all duration-300 flex flex-col`,children:[i.jsx("button",{onClick:()=>o(!s),className:"mb-2 p-2 rounded-2xl shadow-2xl bg-gray-300 hover:bg-gray-400","aria-label":s?"Expandir men":"Colapsar men",children:s?i.jsx("span",{title:"Expandir men",children:"Menu "}):i.jsx("span",{title:"Colapsar men",children:"Cerrar "})}),!s&&i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:"space-y-1",children:[te&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(Z,{open:l,onClick:()=>c(ie=>!ie),children:"Pollos Bea"}),l&&i.jsxs("div",{className:"pb-2",children:[i.jsx(R,{open:p,onClick:()=>g(ie=>!ie),title:"Operaciones"}),p&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(sn,{to:`${r}/salesV2`,className:n,children:"Vender"}),i.jsx(sn,{to:`${r}/customersPollo`,className:n,children:"Saldo Pendientes"}),i.jsx(sn,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),i.jsx(sn,{to:`${r}/bills`,className:n,children:"Cierre Ventas"})]}),i.jsx(R,{open:u,onClick:()=>d(ie=>!ie),title:"Inventarios"}),u&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(sn,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),i.jsx(sn,{to:`${r}/paidBatches`,className:n,children:"Inventarios Pagados"})]}),i.jsx(R,{open:f,onClick:()=>A(ie=>!ie),title:"Finanzas"}),f&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(sn,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),i.jsx(sn,{to:`${r}/billing`,className:n,children:"Facturacion"}),i.jsx(sn,{to:`${r}/expenses`,className:n,children:"Gastos"}),i.jsx(sn,{to:`${r}/salesV2`,className:n,children:"Venta"}),i.jsx(sn,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),i.jsx(sn,{to:`${r}/billhistoric`,className:n,children:"Historial de Cierres"})]}),i.jsx(R,{open:h,onClick:()=>m(ie=>!ie),title:"Productos"}),h&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/products`,className:n,children:"Productos"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(Z,{open:v,onClick:()=>y(ie=>!ie),children:"Gonper"}),v&&i.jsxs("div",{className:"pb-2",children:[i.jsx(R,{open:b,onClick:()=>w(ie=>!ie),title:"Inventarios"}),b&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/notebooksInventory`,className:n,children:"Productos y Precios"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(Z,{open:D,onClick:()=>J(ie=>!ie),children:"CandyShop"}),D&&i.jsxs("div",{className:"pb-2",children:[i.jsx(R,{open:me,onClick:()=>pe(ie=>!ie),title:"Vendedores"}),me&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),me&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/productsVendorsCandies`,className:n,children:"Sub ordenes"})}),me&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})}),i.jsx(R,{open:fe,onClick:()=>Ae(ie=>!ie),title:"Inventario"}),fe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/mainordersCandies`,className:n,children:"Ordenes Maestras"})}),fe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/inventoryMainOrderCandies`,className:n,children:"Lista de Ordenes"})}),fe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/inventoryCandies`,className:n,children:"Lista Productos"})}),fe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/productsCandies`,className:n,children:"Productos"})}),i.jsx(R,{open:ne,onClick:()=>Pe(ie=>!ie),title:"Finanzas"}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/datacenter`,className:n,children:"Data Center"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/cashDeliveries`,className:n,children:"Entregas Cash"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/transactionCandies`,className:n,children:"Transacciones"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierres"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/reporteCierresCandies`,className:n,children:"Reporte Cierres"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/billingsCandies`,className:n,children:"Facturas"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/consolidatedVendors`,className:n,children:"Consolidado Vendedores"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/dashboardCandies`,className:n,children:"Dashboard"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/vendorsCandies`,className:n,children:"Vendedores"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/expensesCandies`,className:n,children:"Gastos"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(Z,{open:Be,onClick:()=>O(ie=>!ie),children:"Operaciones Otras"}),Be&&i.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[i.jsx(sn,{to:`${r}/users`,className:n,children:"Usuarios"}),i.jsx(sn,{to:`${r}/fix`,className:n,children:"Fix de lotes"}),i.jsx(sn,{to:`${r}/transactionclose`,className:n,children:"Liquidaciones"})]})]})]}),!te&&Q&&i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(Z,{open:l,onClick:()=>c(ie=>!ie),children:"Pollos Bea"}),l&&i.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[Vn(H,"salesV2")&&i.jsx(sn,{to:`${r}/salesV2`,className:n,children:"Vender"}),Vn(H,"financialDashboard")&&i.jsx(sn,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),Vn(H,"batches")&&i.jsx(sn,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),Vn(H,"bills")&&i.jsx(sn,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),Vn(H,"transactionsPollo")&&i.jsx(sn,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),Vn(H,"customersPollo")&&i.jsx(sn,{to:`${r}/customersPollo`,className:n,children:"Saldos Pendientes"})]})]}),!te&&Ge&&i.jsxs("div",{className:"border rounded",children:[i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:Vn(H,"salesCandies")&&i.jsx(sn,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:Vn(H,"transactionCandies")&&i.jsx(sn,{to:`${r}/transactionCandies`,className:n,children:"Ventas del dia"})}),i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:Vn(H,"cierreVentasCandies")&&i.jsx(sn,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierre de Ventas"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Vn(H,"productsVendorsCandies")&&i.jsx(sn,{to:`${r}/productsVendorsCandies`,className:n,children:"Pedidos"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Vn(H,"customersCandies")&&i.jsx(sn,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Vn(H,"productsPricesCandies")&&i.jsx(sn,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})})]}),ye&&i.jsxs("div",{className:"border rounded",children:[i.jsx(Z,{open:v,onClick:()=>y(ie=>!ie),children:"Operaciones Ropa"}),v&&i.jsxs("div",{className:"pb-2",children:[i.jsx(R,{open:E,onClick:()=>F(ie=>!ie),title:"Ventas"}),E&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(sn,{to:`${r}/salesClothes`,className:n,children:"Venta Ropa"}),i.jsx(sn,{to:`${r}/TransactionsReportClothes`,className:n,children:"Transacciones"})]}),i.jsx(R,{open:j,onClick:()=>I(ie=>!ie),title:"Productos"}),j&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/productsClothes`,className:n,children:"Agregar Productos"})}),i.jsx(R,{open:_,onClick:()=>S(ie=>!ie),title:"Clientes"}),_&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(sn,{to:`${r}/CustomersClothes`,className:n,children:"Listado de Clientes"})})]})]})]}),i.jsx("button",{onClick:U,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded-2xl shadow-2xl hover:bg-red-600",children:"Cerrar sesin"}),i.jsx("div",{className:"mt-2 text-[20px] text-gray-700",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))}),G&&i.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>q(!1)}),i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[i.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{onClick:()=>q(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),i.jsx("button",{onClick:Y,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]}),i.jsx("main",{className:"flex-1 p-6",children:i.jsx(ZX,{})})]})}function ey(...t){return t.filter(Boolean).join(" ")}function _ye({role:t,roles:e}){const r=ow(),n=hA(),a="/admin",s=e&&e.length?e:t,o=on(s,"admin"),l=on(s,"vendedor_pollo"),c=on(s,"vendedor_dulces"),u=on(s,"supervisor_pollo")||on(s,"contador"),d=on(s,"contador"),f=Vn(s,"salesV2","view")||Vn(s,"batches","view")||Vn(s,"bills","view")||Vn(s,"transactionsPollo","view")||Vn(s,"customersPollo","view"),A=Vn(s,"salesCandies","view")||Vn(s,"productsVendorsCandies","view")||Vn(s,"customersCandies","view")||Vn(s,"productsPricesCandies","view")||Vn(s,"transactionCandies","view")||Vn(s,"cierreVentasCandies","view"),h=f&&A,[m,p]=x.useState(()=>{try{const F=typeof window<"u"?localStorage.getItem("rubro"):null;if(F==="POLLO"||F==="DULCES")return F}catch{}return f?"POLLO":A?"DULCES":"POLLO"}),[g,v]=x.useState(!1),[y,b]=x.useState(!1),w=x.useMemo(()=>{let F=[];if(o||h){if(m==="POLLO")if(o)F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"invPag",label:"Factura",to:`${a}/paidBatches`},{key:"gastos",label:"Gastos",to:`${a}/expenses`}];else if(u){const D=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`}];on(s,"contador")&&(F=D)}else l?F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:d?F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:F=[{key:"home",label:"Inicio",to:`${a}`}];m==="DULCES"&&(o?F=[{key:"dc",label:"Data Center Reporte",to:`${a}/datacenter`},{key:"maes",label:"Inventario Maestro",to:`${a}/mainordersCandies`},{key:"ord",label:"Inventario Vendedor",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas del dia",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre de ventas",to:`${a}/cierreVentasCandies`},{key:"cash",label:"Entregas Efectivo ",to:`${a}/cashDeliveries`},{key:"items",label:"Productos",to:`${a}/productsCandies`},{key:"precios",label:"Precio Ventas",to:`${a}/productsPricesCandies`},{key:"gonper",label:"Productos Gonper",to:`${a}/notebooksInventory`}]:c?F=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:F=[{key:"home",label:"Inicio",to:`${a}`}])}else if(u){const D=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre",to:`${a}/bills`}];on(s,"contador"),F=D}else l?F=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"cierre",label:"Cierre",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:c?F=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:F=[{key:"home",label:"Inicio",to:`${a}`}];const P=new Set(["bills","customersPollo","transactionsPollo","batches","salesV2","financialDashboard","salesCandies","productsVendorsCandies","productsPricesCandies","transactionCandies","cierreVentasCandies","customersCandies"]);return F.filter(D=>{const fe=D.to.replace(`${a}/`,"");return P.has(fe)?Vn(s,fe,"view"):!0})},[a,m,o,h,u,l,c,d,s]);x.useEffect(()=>{if((o||h)&&w.length){try{localStorage.setItem("rubro",m)}catch{}r(w[0].to,{replace:!0})}},[m]),x.useEffect(()=>{g&&v(!1)},[n.pathname]),x.useEffect(()=>{const F=P=>{P.key==="Escape"&&v(!1)};return g&&window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[g]);const j=async()=>{b(!0)},I=async()=>{try{await pD(Lf)}catch(F){console.error("signOut error:",F)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}b(!1),v(!1),r("/")}},_=({isActive:F})=>ey("flex-1 text-center text-[11px] py-1.5 rounded-lg","leading-none select-none",F?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),S=w.length<=2,E=({isActive:F})=>ey("w-full flex items-center justify-between px-4 py-3 rounded-xl border",F?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50");return i.jsxs("div",{className:"min-h-screen bg-[#f1f3f7] flex flex-col",children:[i.jsx("header",{className:"sticky top-0 z-50 bg-white border-b shadow-sm",children:i.jsxs("div",{className:"px-3 py-3 flex items-center gap-2",children:[o||h?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>p("POLLO"),className:ey("px-3 py-2 rounded-2xl text-sm font-semibold",m==="POLLO"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Carniceria"}),i.jsx("button",{type:"button",onClick:()=>p("DULCES"),className:ey("px-3 py-2 rounded-2xl text-sm font-semibold",m==="DULCES"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Mr. Candy"})]}):i.jsx("div",{className:"text-sm font-semibold text-gray-800",children:l?"Pollos Bea":c?"CandyShop":"Posys"}),i.jsx("div",{className:"ml-auto flex items-center gap-2",children:i.jsx("button",{type:"button",onClick:()=>v(!0),className:"px-3 py-2 rounded-2xl bg-gray-100 text-gray-800 text-sm font-bold shadow hover:bg-gray-200","aria-label":"Abrir men",title:"Men",children:""})})]})}),g&&i.jsxs("div",{className:"fixed inset-0 z-[80]",children:[i.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>v(!1),"aria-label":"Cerrar men"}),i.jsxs("aside",{className:"absolute right-0 top-0 h-full w-[86%] max-w-sm bg-white shadow-2xl border-l flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"font-bold text-gray-900",children:"Men"}),i.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200",children:""})]}),i.jsx("div",{className:"mt-2 text-[20px] text-gray-600",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))})]}),i.jsx("div",{className:"p-3 flex-1 overflow-y-auto space-y-2",children:w.map(F=>i.jsxs(sn,{to:F.to,className:E,children:[i.jsx("span",{className:"font-semibold",children:F.label}),i.jsx("span",{className:"text-sm opacity-80",children:""})]},F.key))}),i.jsxs("div",{className:"p-3 border-t space-y-2 pb-[calc(12px+env(safe-area-inset-bottom))]",children:[i.jsx("button",{onClick:j,className:"w-full px-4 py-3 rounded-xl bg-red-500 text-white font-semibold shadow hover:bg-red-600",children:"Cerrar sesin"}),y&&i.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>b(!1)}),i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[i.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{onClick:()=>b(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),i.jsx("button",{onClick:I,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]})]}),i.jsx("main",{className:ey("flex-1 overflow-y-auto px-3 pt-3",S?"pb-[calc(92px+env(safe-area-inset-bottom))]":"pb-[calc(16px+env(safe-area-inset-bottom))]"),children:i.jsx(ZX,{})}),S&&i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-md pb-[env(safe-area-inset-bottom)]",children:i.jsx("div",{className:"max-w-3xl mx-auto px-2 py-1.5 flex gap-1.5",children:w.map(F=>i.jsx(sn,{to:F.to,className:_,children:F.label},F.key))})})]})}const ree=6048e5,Eye=864e5,Sye=6e4,Iye=36e5,jye=1e3,s9=Symbol.for("constructDateFrom");function Li(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&s9 in t?t[s9](e):t instanceof Date?new t.constructor(e):new Date(e)}function $s(t,e){return Li(e||t,t)}function c6(t,e,r){const n=$s(t,r==null?void 0:r.in);return isNaN(e)?Li((r==null?void 0:r.in)||t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Pye(t,e,r){const n=$s(t,r==null?void 0:r.in);if(isNaN(e))return Li(t,NaN);const a=n.getDate(),s=Li(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const o=s.getDate();return a>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let Bye={};function a1(){return Bye}function sm(t,e){var l,c,u,d;const r=a1(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=$s(t,e==null?void 0:e.in),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Sv(t,e){return sm(t,{...e,weekStartsOn:1})}function nee(t,e){const r=$s(t,e==null?void 0:e.in),n=r.getFullYear(),a=Li(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=Sv(a),o=Li(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=Sv(o);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function oS(t){const e=$s(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Tye(t,...e){const r=Li.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function i9(t,e){const r=$s(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function kye(t,e,r){const[n,a]=Tye(r==null?void 0:r.in,t,e),s=i9(n),o=i9(a),l=+s-oS(s),c=+o-oS(o);return Math.round((l-c)/Eye)}function Fye(t,e){const r=nee(t,e),n=Li(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Sv(n)}function Oye(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function u6(t){return!(!Oye(t)&&typeof t!="number"||isNaN(+$s(t)))}function nf(t,e){const r=$s(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function af(t,e){const r=$s(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Dye(t,e){const r=$s(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Rye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Mye=(t,e,r)=>{let n;const a=Rye[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function A3(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Lye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Uye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Qye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Vye={date:A3({formats:Lye,defaultWidth:"full"}),time:A3({formats:Uye,defaultWidth:"full"}),dateTime:A3({formats:Qye,defaultWidth:"full"})},Hye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$ye=(t,e,r,n)=>Hye[t];function ty(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const Gye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Kye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zye={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Wye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Xye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Yye=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Jye={ordinalNumber:Yye,era:ty({values:Gye,defaultWidth:"wide"}),quarter:ty({values:Kye,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ty({values:qye,defaultWidth:"wide"}),day:ty({values:zye,defaultWidth:"wide"}),dayPeriod:ty({values:Wye,defaultWidth:"wide",formattingValues:Xye,defaultFormattingWidth:"wide"})};function ry(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const o=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?ebe(l,f=>f.test(o)):Zye(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function Zye(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function ebe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function tbe(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const rbe=/^(\d+)(th|st|nd|rd)?/i,nbe=/\d+/i,abe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sbe={any:[/^b/i,/^(a|c)/i]},ibe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},obe={any:[/1/i,/2/i,/3/i,/4/i]},lbe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cbe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ube={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dbe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fbe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hbe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Abe={ordinalNumber:tbe({matchPattern:rbe,parsePattern:nbe,valueCallback:t=>parseInt(t,10)}),era:ry({matchPatterns:abe,defaultMatchWidth:"wide",parsePatterns:sbe,defaultParseWidth:"any"}),quarter:ry({matchPatterns:ibe,defaultMatchWidth:"wide",parsePatterns:obe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ry({matchPatterns:lbe,defaultMatchWidth:"wide",parsePatterns:cbe,defaultParseWidth:"any"}),day:ry({matchPatterns:ube,defaultMatchWidth:"wide",parsePatterns:dbe,defaultParseWidth:"any"}),dayPeriod:ry({matchPatterns:fbe,defaultMatchWidth:"any",parsePatterns:hbe,defaultParseWidth:"any"})},aee={code:"en-US",formatDistance:Mye,formatLong:Vye,formatRelative:$ye,localize:Jye,match:Abe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mbe(t,e){const r=$s(t,e==null?void 0:e.in);return kye(r,Dye(r))+1}function see(t,e){const r=$s(t,e==null?void 0:e.in),n=+Sv(r)-+Fye(r);return Math.round(n/ree)+1}function d6(t,e){var d,f,A,h;const r=$s(t,e==null?void 0:e.in),n=r.getFullYear(),a=a1(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(A=a.locale)==null?void 0:A.options)==null?void 0:h.firstWeekContainsDate)??1,o=Li((e==null?void 0:e.in)||t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=sm(o,e),c=Li((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=sm(c,e);return+r>=+l?n+1:+r>=+u?n:n-1}function pbe(t,e){var l,c,u,d;const r=a1(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=d6(t,e),s=Li((e==null?void 0:e.in)||t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),sm(s,e)}function iee(t,e){const r=$s(t,e==null?void 0:e.in),n=+sm(r,e)-+pbe(r,e);return Math.round(n/ree)+1}function Ea(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const WA={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Ea(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Ea(r+1,2)},d(t,e){return Ea(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Ea(t.getHours()%12||12,e.length)},H(t,e){return Ea(t.getHours(),e.length)},m(t,e){return Ea(t.getMinutes(),e.length)},s(t,e){return Ea(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Ea(a,e.length)}},Gg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},o9={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return WA.y(t,e)},Y:function(t,e,r,n){const a=d6(t,n),s=a>0?a:1-a;if(e==="YY"){const o=s%100;return Ea(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):Ea(s,e.length)},R:function(t,e){const r=nee(t);return Ea(r,e.length)},u:function(t,e){const r=t.getFullYear();return Ea(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Ea(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Ea(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return WA.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Ea(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=iee(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):Ea(a,e.length)},I:function(t,e,r){const n=see(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Ea(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):WA.d(t,e)},D:function(t,e,r){const n=mbe(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ea(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ea(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ea(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return Ea(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=Gg.noon:n===0?a=Gg.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=Gg.evening:n>=12?a=Gg.afternoon:n>=4?a=Gg.morning:a=Gg.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return WA.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):WA.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ea(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ea(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):WA.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):WA.s(t,e)},S:function(t,e){return WA.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return c9(n);case"XXXX":case"XX":return Km(n);case"XXXXX":case"XXX":default:return Km(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return c9(n);case"xxxx":case"xx":return Km(n);case"xxxxx":case"xxx":default:return Km(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+l9(n,":");case"OOOO":default:return"GMT"+Km(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+l9(n,":");case"zzzz":default:return"GMT"+Km(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Ea(n,e.length)},T:function(t,e,r){return Ea(+t,e.length)}};function l9(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+Ea(s,2)}function c9(t,e){return t%60===0?(t>0?"-":"+")+Ea(Math.abs(t)/60,2):Km(t,e)}function Km(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Ea(Math.trunc(n/60),2),s=Ea(n%60,2);return r+a+e+s}const u9=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},oee=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},gbe=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return u9(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",u9(n,e)).replace("{{time}}",oee(a,e))},$T={p:oee,P:gbe},xbe=/^D+$/,vbe=/^Y+$/,ybe=["D","DD","YY","YYYY"];function lee(t){return xbe.test(t)}function cee(t){return vbe.test(t)}function GT(t,e,r){const n=bbe(t,e,r);if(console.warn(n),ybe.includes(t))throw new RangeError(n)}function bbe(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const wbe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Nbe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cbe=/^'([^]*?)'?$/,_be=/''/g,Ebe=/[a-zA-Z]/;function Ir(t,e,r){var d,f,A,h;const n=a1(),a=n.locale??aee,s=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=n.weekStartsOn??((h=(A=n.locale)==null?void 0:A.options)==null?void 0:h.weekStartsOn)??0,l=$s(t,r==null?void 0:r.in);if(!u6(l))throw new RangeError("Invalid time value");let c=e.match(Nbe).map(m=>{const p=m[0];if(p==="p"||p==="P"){const g=$T[p];return g(m,a.formatLong)}return m}).join("").match(wbe).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:Sbe(m)};if(o9[p])return{isToken:!0,value:m};if(p.match(Ebe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(cee(p)||lee(p))&&GT(p,e,String(t));const g=o9[p[0]];return g(l,p,a.localize,u)}).join("")}function Sbe(t){const e=t.match(Cbe);return e?e[1].replace(_be,"'"):t}function Ibe(){return Object.assign({},a1())}function jbe(t,e){const r=$s(t,e==null?void 0:e.in).getDay();return r===0?7:r}function Pbe(t,e){const r=Bbe(e)?new e(0):Li(e,0);return r.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),r.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),r}function Bbe(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const Tbe=10;class uee{constructor(){fr(this,"subPriority",0)}validate(e,r){return!0}}class kbe extends uee{constructor(e,r,n,a,s){super(),this.value=e,this.validateValue=r,this.setValue=n,this.priority=a,s&&(this.subPriority=s)}validate(e,r){return this.validateValue(e,this.value,r)}set(e,r,n){return this.setValue(e,r,this.value,n)}}class Fbe extends uee{constructor(r,n){super();fr(this,"priority",Tbe);fr(this,"subPriority",-1);this.context=r||(a=>Li(n,a))}set(r,n){return n.timestampIsSet?r:Li(r,Pbe(r,this.context))}}let Aa=class{run(e,r,n,a){const s=this.parse(e,r,n,a);return s?{setter:new kbe(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,r,n){return!0}};class Obe extends Aa{constructor(){super(...arguments);fr(this,"priority",140);fr(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,a){switch(n){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})||a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"})}}set(r,n,a){return n.era=a,r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}const wi={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ef={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ni(t,e){return t&&{value:e(t.value),rest:t.rest}}function Ms(t,e){const r=e.match(t);return r?{value:parseInt(r[0],10),rest:e.slice(r[0].length)}:null}function Sf(t,e){const r=e.match(t);if(!r)return null;if(r[0]==="Z")return{value:0,rest:e.slice(1)};const n=r[1]==="+"?1:-1,a=r[2]?parseInt(r[2],10):0,s=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(a*Iye+s*Sye+o*jye),rest:e.slice(r[0].length)}}function dee(t){return Ms(wi.anyDigitsSigned,t)}function ii(t,e){switch(t){case 1:return Ms(wi.singleDigit,e);case 2:return Ms(wi.twoDigits,e);case 3:return Ms(wi.threeDigits,e);case 4:return Ms(wi.fourDigits,e);default:return Ms(new RegExp("^\\d{1,"+t+"}"),e)}}function lS(t,e){switch(t){case 1:return Ms(wi.singleDigitSigned,e);case 2:return Ms(wi.twoDigitsSigned,e);case 3:return Ms(wi.threeDigitsSigned,e);case 4:return Ms(wi.fourDigitsSigned,e);default:return Ms(new RegExp("^-?\\d{1,"+t+"}"),e)}}function f6(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function fee(t,e){const r=e>0,n=r?e:1-e;let a;if(n<=50)a=t||100;else{const s=n+50,o=Math.trunc(s/100)*100,l=t>=s%100;a=t+o-(l?100:0)}return r?a:1-a}function hee(t){return t%400===0||t%4===0&&t%100!==0}class Dbe extends Aa{constructor(){super(...arguments);fr(this,"priority",130);fr(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,a){const s=o=>({year:o,isTwoDigitYear:n==="yy"});switch(n){case"y":return Ni(ii(4,r),s);case"yo":return Ni(a.ordinalNumber(r,{unit:"year"}),s);default:return Ni(ii(n.length,r),s)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a){const s=r.getFullYear();if(a.isTwoDigitYear){const l=fee(a.year,s);return r.setFullYear(l,0,1),r.setHours(0,0,0,0),r}const o=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}}class Rbe extends Aa{constructor(){super(...arguments);fr(this,"priority",130);fr(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,a){const s=o=>({year:o,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Ni(ii(4,r),s);case"Yo":return Ni(a.ordinalNumber(r,{unit:"year"}),s);default:return Ni(ii(n.length,r),s)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a,s){const o=d6(r,s);if(a.isTwoDigitYear){const c=fee(a.year,o);return r.setFullYear(c,0,s.firstWeekContainsDate),r.setHours(0,0,0,0),sm(r,s)}const l=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(l,0,s.firstWeekContainsDate),r.setHours(0,0,0,0),sm(r,s)}}class Mbe extends Aa{constructor(){super(...arguments);fr(this,"priority",130);fr(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return lS(n==="R"?4:n.length,r)}set(r,n,a){const s=Li(r,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),Sv(s)}}class Lbe extends Aa{constructor(){super(...arguments);fr(this,"priority",130);fr(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return lS(n==="u"?4:n.length,r)}set(r,n,a){return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}class Ube extends Aa{constructor(){super(...arguments);fr(this,"priority",120);fr(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"Q":case"QQ":return ii(n.length,r);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})||a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class Qbe extends Aa{constructor(){super(...arguments);fr(this,"priority",120);fr(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"q":case"qq":return ii(n.length,r);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})||a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class Vbe extends Aa{constructor(){super(...arguments);fr(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);fr(this,"priority",110)}parse(r,n,a){const s=o=>o-1;switch(n){case"M":return Ni(Ms(wi.month,r),s);case"MM":return Ni(ii(2,r),s);case"Mo":return Ni(a.ordinalNumber(r,{unit:"month"}),s);case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})||a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}class Hbe extends Aa{constructor(){super(...arguments);fr(this,"priority",110);fr(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,a){const s=o=>o-1;switch(n){case"L":return Ni(Ms(wi.month,r),s);case"LL":return Ni(ii(2,r),s);case"Lo":return Ni(a.ordinalNumber(r,{unit:"month"}),s);case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})||a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}function $be(t,e,r){const n=$s(t,r==null?void 0:r.in),a=iee(n,r)-e;return n.setDate(n.getDate()-a*7),$s(n,r==null?void 0:r.in)}class Gbe extends Aa{constructor(){super(...arguments);fr(this,"priority",100);fr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,a){switch(n){case"w":return Ms(wi.week,r);case"wo":return a.ordinalNumber(r,{unit:"week"});default:return ii(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a,s){return sm($be(r,a,s),s)}}function Kbe(t,e,r){const n=$s(t,r==null?void 0:r.in),a=see(n,r)-e;return n.setDate(n.getDate()-a*7),n}class qbe extends Aa{constructor(){super(...arguments);fr(this,"priority",100);fr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,a){switch(n){case"I":return Ms(wi.week,r);case"Io":return a.ordinalNumber(r,{unit:"week"});default:return ii(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a){return Sv(Kbe(r,a))}}const zbe=[31,28,31,30,31,30,31,31,30,31,30,31],Wbe=[31,29,31,30,31,30,31,31,30,31,30,31];class Xbe extends Aa{constructor(){super(...arguments);fr(this,"priority",90);fr(this,"subPriority",1);fr(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"d":return Ms(wi.date,r);case"do":return a.ordinalNumber(r,{unit:"date"});default:return ii(n.length,r)}}validate(r,n){const a=r.getFullYear(),s=hee(a),o=r.getMonth();return s?n>=1&&n<=Wbe[o]:n>=1&&n<=zbe[o]}set(r,n,a){return r.setDate(a),r.setHours(0,0,0,0),r}}class Ybe extends Aa{constructor(){super(...arguments);fr(this,"priority",90);fr(this,"subpriority",1);fr(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,a){switch(n){case"D":case"DD":return Ms(wi.dayOfYear,r);case"Do":return a.ordinalNumber(r,{unit:"date"});default:return ii(n.length,r)}}validate(r,n){const a=r.getFullYear();return hee(a)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,a){return r.setMonth(0,a),r.setHours(0,0,0,0),r}}function h6(t,e,r){var f,A,h,m;const n=a1(),a=(r==null?void 0:r.weekStartsOn)??((A=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:A.weekStartsOn)??n.weekStartsOn??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,s=$s(t,r==null?void 0:r.in),o=s.getDay(),c=(e%7+7)%7,u=7-a,d=e<0||e>6?e-(o+u)%7:(c+u)%7-(o+u)%7;return c6(s,d,r)}class Jbe extends Aa{constructor(){super(...arguments);fr(this,"priority",90);fr(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=h6(r,a,s),r.setHours(0,0,0,0),r}}class Zbe extends Aa{constructor(){super(...arguments);fr(this,"priority",90);fr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,a,s){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return Ni(ii(n.length,r),o);case"eo":return Ni(a.ordinalNumber(r,{unit:"day"}),o);case"eee":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=h6(r,a,s),r.setHours(0,0,0,0),r}}class e2e extends Aa{constructor(){super(...arguments);fr(this,"priority",90);fr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,a,s){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return Ni(ii(n.length,r),o);case"co":return Ni(a.ordinalNumber(r,{unit:"day"}),o);case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})||a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=h6(r,a,s),r.setHours(0,0,0,0),r}}function t2e(t,e,r){const n=$s(t,r==null?void 0:r.in),a=jbe(n,r),s=e-a;return c6(n,s,r)}class r2e extends Aa{constructor(){super(...arguments);fr(this,"priority",90);fr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,a){const s=o=>o===0?7:o;switch(n){case"i":case"ii":return ii(n.length,r);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return Ni(a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s);case"iiiii":return Ni(a.day(r,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Ni(a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Ni(a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s)}}validate(r,n){return n>=1&&n<=7}set(r,n,a){return r=t2e(r,a),r.setHours(0,0,0,0),r}}class n2e extends Aa{constructor(){super(...arguments);fr(this,"priority",80);fr(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,a){switch(n){case"a":case"aa":case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(f6(a),0,0,0),r}}class a2e extends Aa{constructor(){super(...arguments);fr(this,"priority",80);fr(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,a){switch(n){case"b":case"bb":case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(f6(a),0,0,0),r}}class s2e extends Aa{constructor(){super(...arguments);fr(this,"priority",80);fr(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,a){switch(n){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(f6(a),0,0,0),r}}class i2e extends Aa{constructor(){super(...arguments);fr(this,"priority",70);fr(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,a){switch(n){case"h":return Ms(wi.hour12h,r);case"ho":return a.ordinalNumber(r,{unit:"hour"});default:return ii(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,a){const s=r.getHours()>=12;return s&&a<12?r.setHours(a+12,0,0,0):!s&&a===12?r.setHours(0,0,0,0):r.setHours(a,0,0,0),r}}class o2e extends Aa{constructor(){super(...arguments);fr(this,"priority",70);fr(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,a){switch(n){case"H":return Ms(wi.hour23h,r);case"Ho":return a.ordinalNumber(r,{unit:"hour"});default:return ii(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,a){return r.setHours(a,0,0,0),r}}class l2e extends Aa{constructor(){super(...arguments);fr(this,"priority",70);fr(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,a){switch(n){case"K":return Ms(wi.hour11h,r);case"Ko":return a.ordinalNumber(r,{unit:"hour"});default:return ii(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.getHours()>=12&&a<12?r.setHours(a+12,0,0,0):r.setHours(a,0,0,0),r}}class c2e extends Aa{constructor(){super(...arguments);fr(this,"priority",70);fr(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,a){switch(n){case"k":return Ms(wi.hour24h,r);case"ko":return a.ordinalNumber(r,{unit:"hour"});default:return ii(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,a){const s=a<=24?a%24:a;return r.setHours(s,0,0,0),r}}class u2e extends Aa{constructor(){super(...arguments);fr(this,"priority",60);fr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"m":return Ms(wi.minute,r);case"mo":return a.ordinalNumber(r,{unit:"minute"});default:return ii(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setMinutes(a,0,0),r}}class d2e extends Aa{constructor(){super(...arguments);fr(this,"priority",50);fr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"s":return Ms(wi.second,r);case"so":return a.ordinalNumber(r,{unit:"second"});default:return ii(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setSeconds(a,0),r}}class f2e extends Aa{constructor(){super(...arguments);fr(this,"priority",30);fr(this,"incompatibleTokens",["t","T"])}parse(r,n){const a=s=>Math.trunc(s*Math.pow(10,-n.length+3));return Ni(ii(n.length,r),a)}set(r,n,a){return r.setMilliseconds(a),r}}class h2e extends Aa{constructor(){super(...arguments);fr(this,"priority",10);fr(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return Sf(Ef.basicOptionalMinutes,r);case"XX":return Sf(Ef.basic,r);case"XXXX":return Sf(Ef.basicOptionalSeconds,r);case"XXXXX":return Sf(Ef.extendedOptionalSeconds,r);case"XXX":default:return Sf(Ef.extended,r)}}set(r,n,a){return n.timestampIsSet?r:Li(r,r.getTime()-oS(r)-a)}}class A2e extends Aa{constructor(){super(...arguments);fr(this,"priority",10);fr(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return Sf(Ef.basicOptionalMinutes,r);case"xx":return Sf(Ef.basic,r);case"xxxx":return Sf(Ef.basicOptionalSeconds,r);case"xxxxx":return Sf(Ef.extendedOptionalSeconds,r);case"xxx":default:return Sf(Ef.extended,r)}}set(r,n,a){return n.timestampIsSet?r:Li(r,r.getTime()-oS(r)-a)}}class m2e extends Aa{constructor(){super(...arguments);fr(this,"priority",40);fr(this,"incompatibleTokens","*")}parse(r){return dee(r)}set(r,n,a){return[Li(r,a*1e3),{timestampIsSet:!0}]}}class p2e extends Aa{constructor(){super(...arguments);fr(this,"priority",20);fr(this,"incompatibleTokens","*")}parse(r){return dee(r)}set(r,n,a){return[Li(r,a),{timestampIsSet:!0}]}}const g2e={G:new Obe,y:new Dbe,Y:new Rbe,R:new Mbe,u:new Lbe,Q:new Ube,q:new Qbe,M:new Vbe,L:new Hbe,w:new Gbe,I:new qbe,d:new Xbe,D:new Ybe,E:new Jbe,e:new Zbe,c:new e2e,i:new r2e,a:new n2e,b:new a2e,B:new s2e,h:new i2e,H:new o2e,K:new l2e,k:new c2e,m:new u2e,s:new d2e,S:new f2e,X:new h2e,x:new A2e,t:new m2e,T:new p2e},x2e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,v2e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,y2e=/^'([^]*?)'?$/,b2e=/''/g,w2e=/\S/,N2e=/[a-zA-Z]/;function Aee(t,e,r,n){var g,v,y,b;const a=()=>Li(r,NaN),s=Ibe(),o=s.locale??aee,l=s.firstWeekContainsDate??((v=(g=s.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,c=s.weekStartsOn??((b=(y=s.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??0;if(!e)return t?a():$s(r,n==null?void 0:n.in);const u={firstWeekContainsDate:l,weekStartsOn:c,locale:o},d=[new Fbe(n==null?void 0:n.in,r)],f=e.match(v2e).map(w=>{const j=w[0];if(j in $T){const I=$T[j];return I(w,o.formatLong)}return w}).join("").match(x2e),A=[];for(let w of f){cee(w)&&GT(w,e,t),lee(w)&&GT(w,e,t);const j=w[0],I=g2e[j];if(I){const{incompatibleTokens:_}=I;if(Array.isArray(_)){const E=A.find(F=>_.includes(F.token)||F.token===j);if(E)throw new RangeError(`The format string mustn't contain \`${E.fullToken}\` and \`${w}\` at the same time`)}else if(I.incompatibleTokens==="*"&&A.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);A.push({token:j,fullToken:w});const S=I.run(t,w,o.match,u);if(!S)return a();d.push(S.setter),t=S.rest}else{if(j.match(N2e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(w==="''"?w="'":j==="'"&&(w=C2e(w)),t.indexOf(w)===0)t=t.slice(w.length);else return a()}}if(t.length>0&&w2e.test(t))return a();const h=d.map(w=>w.priority).sort((w,j)=>j-w).filter((w,j,I)=>I.indexOf(w)===j).map(w=>d.filter(j=>j.priority===w).sort((j,I)=>I.subPriority-j.subPriority)).map(w=>w[0]);let m=$s(r,n==null?void 0:n.in);if(isNaN(+m))return a();const p={};for(const w of h){if(!w.validate(m,u))return a();const j=w.set(m,p,u);Array.isArray(j)?(m=j[0],Object.assign(p,j[1])):m=j}return m}function C2e(t){return t.match(y2e)[1].replace(b2e,"'")}function mee(t,e,r){return c6(t,-14,r)}function _2e(t,e,r){return Pye(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var KT=function(t,e){return KT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},KT(t,e)};function sf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");KT(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var qT=function(){return qT=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},qT.apply(this,arguments)};function Wl(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function Nl(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function YN(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var tA=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),kj=function(t,e){return tA.fromClientRect(t,e.getBoundingClientRect())},E2e=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new tA(0,0,n,a)},Fj=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},pi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=t[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},d9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var JN=0;JN<d9.length;JN++)S2e[d9.charCodeAt(JN)]=JN;var f9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ky=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ZN=0;ZN<f9.length;ZN++)ky[f9.charCodeAt(ZN)]=ZN;var I2e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=ky[t.charCodeAt(n)],o=ky[t.charCodeAt(n+1)],l=ky[t.charCodeAt(n+2)],c=ky[t.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},j2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},P2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},yp=5,A6=11,m3=2,B2e=A6-yp,pee=65536>>yp,T2e=1<<yp,p3=T2e-1,k2e=1024>>yp,F2e=pee+k2e,O2e=F2e,D2e=32,R2e=O2e+D2e,M2e=65536>>A6,L2e=1<<B2e,U2e=L2e-1,h9=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Q2e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},V2e=function(t,e){var r=I2e(t),n=Array.isArray(r)?P2e(r):new Uint32Array(r),a=Array.isArray(r)?j2e(r):new Uint16Array(r),s=24,o=h9(a,s/2,n[4]/2),l=n[5]===2?h9(a,(s+n[4])/2):Q2e(n,Math.ceil((s+n[4])/4));return new H2e(n[0],n[1],n[2],n[3],o,l)},H2e=function(){function t(e,r,n,a,s,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>yp],r=(r<<m3)+(e&p3),this.data[r];if(e<=65535)return r=this.index[pee+(e-55296>>yp)],r=(r<<m3)+(e&p3),this.data[r];if(e<this.highStart)return r=R2e-M2e+(e>>A6),r=this.index[r],r+=e>>yp&U2e,r=this.index[r],r=(r<<m3)+(e&p3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),A9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var eC=0;eC<A9.length;eC++)$2e[A9.charCodeAt(eC)]=eC;var G2e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",m9=50,K2e=1,gee=2,xee=3,q2e=4,z2e=5,p9=7,vee=8,g9=9,E0=10,zT=11,x9=12,WT=13,W2e=14,Fy=15,XT=16,tC=17,ny=18,X2e=19,v9=20,YT=21,ay=22,g3=23,Kg=24,Yc=25,Oy=26,Dy=27,qg=28,Y2e=29,np=30,J2e=31,rC=32,nC=33,JT=34,ZT=35,ek=36,m2=37,tk=38,eE=39,tE=40,x3=41,yee=42,Z2e=43,ewe=[9001,65288],bee="!",Qn="",aC="",rk=V2e(G2e),oh=[np,ek],nk=[K2e,gee,xee,z2e],wee=[E0,vee],y9=[Dy,Oy],twe=nk.concat(wee),b9=[tk,eE,tE,JT,ZT],rwe=[Fy,WT],nwe=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,o){var l=rk.get(s);if(l>m9?(a.push(!0),l-=m9):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),r.push(XT);if(l===q2e||l===zT){if(o===0)return n.push(o),r.push(np);var c=r[o-1];return twe.indexOf(c)===-1?(n.push(n[o-1]),r.push(c)):(n.push(o),r.push(np))}if(n.push(o),l===J2e)return r.push(e==="strict"?YT:m2);if(l===yee||l===Y2e)return r.push(np);if(l===Z2e)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(m2):r.push(np);r.push(l)}),[n,r,a]},v3=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var o=n[s];if(o===e)return!0;if(o!==E0)break}if(a===E0)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var c=r;c<=n.length;){c++;var o=n[c];if(o===e)return!0;if(o!==E0)break}if(l!==E0)break}return!1},w9=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===E0)r--;else return n}return 0},awe=function(t,e,r,n,a){if(r[n]===0)return Qn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Qn;var o=s-1,l=s+1,c=e[s],u=o>=0?e[o]:0,d=e[l];if(c===gee&&d===xee)return Qn;if(nk.indexOf(c)!==-1)return bee;if(nk.indexOf(d)!==-1||wee.indexOf(d)!==-1)return Qn;if(w9(s,e)===vee)return aC;if(rk.get(t[s])===zT||(c===rC||c===nC)&&rk.get(t[l])===zT||c===p9||d===p9||c===g9||[E0,WT,Fy].indexOf(c)===-1&&d===g9||[tC,ny,X2e,Kg,qg].indexOf(d)!==-1||w9(s,e)===ay||v3(g3,ay,s,e)||v3([tC,ny],YT,s,e)||v3(x9,x9,s,e))return Qn;if(c===E0)return aC;if(c===g3||d===g3)return Qn;if(d===XT||c===XT)return aC;if([WT,Fy,YT].indexOf(d)!==-1||c===W2e||u===ek&&rwe.indexOf(c)!==-1||c===qg&&d===ek||d===v9||oh.indexOf(d)!==-1&&c===Yc||oh.indexOf(c)!==-1&&d===Yc||c===Dy&&[m2,rC,nC].indexOf(d)!==-1||[m2,rC,nC].indexOf(c)!==-1&&d===Oy||oh.indexOf(c)!==-1&&y9.indexOf(d)!==-1||y9.indexOf(c)!==-1&&oh.indexOf(d)!==-1||[Dy,Oy].indexOf(c)!==-1&&(d===Yc||[ay,Fy].indexOf(d)!==-1&&e[l+1]===Yc)||[ay,Fy].indexOf(c)!==-1&&d===Yc||c===Yc&&[Yc,qg,Kg].indexOf(d)!==-1)return Qn;if([Yc,qg,Kg,tC,ny].indexOf(d)!==-1)for(var f=s;f>=0;){var A=e[f];if(A===Yc)return Qn;if([qg,Kg].indexOf(A)!==-1)f--;else break}if([Dy,Oy].indexOf(d)!==-1)for(var f=[tC,ny].indexOf(c)!==-1?o:s;f>=0;){var A=e[f];if(A===Yc)return Qn;if([qg,Kg].indexOf(A)!==-1)f--;else break}if(tk===c&&[tk,eE,JT,ZT].indexOf(d)!==-1||[eE,JT].indexOf(c)!==-1&&[eE,tE].indexOf(d)!==-1||[tE,ZT].indexOf(c)!==-1&&d===tE||b9.indexOf(c)!==-1&&[v9,Oy].indexOf(d)!==-1||b9.indexOf(d)!==-1&&c===Dy||oh.indexOf(c)!==-1&&oh.indexOf(d)!==-1||c===Kg&&oh.indexOf(d)!==-1||oh.concat(Yc).indexOf(c)!==-1&&d===ay&&ewe.indexOf(t[l])===-1||oh.concat(Yc).indexOf(d)!==-1&&c===ny)return Qn;if(c===x3&&d===x3){for(var h=r[s],m=1;h>0&&(h--,e[h]===x3);)m++;if(m%2!==0)return Qn}return c===rC&&d===nC?Qn:aC},swe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=nwe(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(l){return[Yc,np,yee].indexOf(l)!==-1?m2:l}));var o=e.wordBreak==="keep-all"?s.map(function(l,c){return l&&t[c]>=19968&&t[c]<=40959}):void 0;return[n,a,o]},iwe=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===bee,this.start=n,this.end=a}return t.prototype.slice=function(){return pi.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),owe=function(t,e){var r=Fj(t),n=swe(r,e),a=n[0],s=n[1],o=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=Qn;u<l&&(d=awe(r,s,a,++u,o))===Qn;);if(d!==Qn||u===l){var f=new iwe(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},lwe=1,cwe=2,_w=4,N9=8,cS=10,C9=47,db=92,uwe=9,dwe=32,sC=34,sy=61,fwe=35,hwe=36,Awe=37,iC=39,oC=40,iy=41,mwe=95,yc=45,pwe=33,gwe=60,xwe=62,vwe=64,ywe=91,bwe=93,wwe=61,Nwe=123,lC=63,Cwe=125,_9=124,_we=126,Ewe=128,E9=65533,y3=42,cp=43,Swe=44,Iwe=58,jwe=59,p2=46,Pwe=0,Bwe=8,Twe=11,kwe=14,Fwe=31,Owe=127,pf=-1,Nee=48,Cee=97,_ee=101,Dwe=102,Rwe=117,Mwe=122,Eee=65,See=69,Iee=70,Lwe=85,Uwe=90,El=function(t){return t>=Nee&&t<=57},Qwe=function(t){return t>=55296&&t<=57343},zg=function(t){return El(t)||t>=Eee&&t<=Iee||t>=Cee&&t<=Dwe},Vwe=function(t){return t>=Cee&&t<=Mwe},Hwe=function(t){return t>=Eee&&t<=Uwe},$we=function(t){return Vwe(t)||Hwe(t)},Gwe=function(t){return t>=Ewe},cC=function(t){return t===cS||t===uwe||t===dwe},uS=function(t){return $we(t)||Gwe(t)||t===mwe},S9=function(t){return uS(t)||El(t)||t===yc},Kwe=function(t){return t>=Pwe&&t<=Bwe||t===Twe||t>=kwe&&t<=Fwe||t===Owe},c0=function(t,e){return t!==db?!1:e!==cS},uC=function(t,e,r){return t===yc?uS(e)||c0(e,r):uS(t)?!0:!!(t===db&&c0(t,e))},b3=function(t,e,r){return t===cp||t===yc?El(e)?!0:e===p2&&El(r):El(t===p2?e:t)},qwe=function(t){var e=0,r=1;(t[e]===cp||t[e]===yc)&&(t[e]===yc&&(r=-1),e++);for(var n=[];El(t[e]);)n.push(t[e++]);var a=n.length?parseInt(pi.apply(void 0,n),10):0;t[e]===p2&&e++;for(var s=[];El(t[e]);)s.push(t[e++]);var o=s.length,l=o?parseInt(pi.apply(void 0,s),10):0;(t[e]===See||t[e]===_ee)&&e++;var c=1;(t[e]===cp||t[e]===yc)&&(t[e]===yc&&(c=-1),e++);for(var u=[];El(t[e]);)u.push(t[e++]);var d=u.length?parseInt(pi.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,c*d)},zwe={type:2},Wwe={type:3},Xwe={type:4},Ywe={type:13},Jwe={type:8},Zwe={type:21},eNe={type:9},tNe={type:10},rNe={type:11},nNe={type:12},aNe={type:14},dC={type:23},sNe={type:1},iNe={type:25},oNe={type:24},lNe={type:26},cNe={type:27},uNe={type:28},dNe={type:29},fNe={type:31},ak={type:32},jee=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Fj(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==ak;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case sC:return this.consumeStringToken(sC);case fwe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(S9(r)||c0(n,a)){var s=uC(r,n,a)?cwe:lwe,o=this.consumeName();return{type:5,value:o,flags:s}}break;case hwe:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),Ywe;break;case iC:return this.consumeStringToken(iC);case oC:return zwe;case iy:return Wwe;case y3:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),aNe;break;case cp:if(b3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Swe:return Xwe;case yc:var l=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(b3(l,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(uC(l,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===yc&&u===xwe)return this.consumeCodePoint(),this.consumeCodePoint(),oNe;break;case p2:if(b3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case C9:if(this.peekCodePoint(0)===y3)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===y3&&(d=this.consumeCodePoint(),d===C9))return this.consumeToken();if(d===pf)return this.consumeToken()}break;case Iwe:return lNe;case jwe:return cNe;case gwe:if(this.peekCodePoint(0)===pwe&&this.peekCodePoint(1)===yc&&this.peekCodePoint(2)===yc)return this.consumeCodePoint(),this.consumeCodePoint(),iNe;break;case vwe:var f=this.peekCodePoint(0),A=this.peekCodePoint(1),h=this.peekCodePoint(2);if(uC(f,A,h)){var o=this.consumeName();return{type:7,value:o}}break;case ywe:return uNe;case db:if(c0(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case bwe:return dNe;case wwe:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),Jwe;break;case Nwe:return rNe;case Cwe:return nNe;case Rwe:case Lwe:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===cp&&(zg(p)||p===lC)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case _9:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),eNe;if(this.peekCodePoint(0)===_9)return this.consumeCodePoint(),Zwe;break;case _we:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),tNe;break;case pf:return ak}return cC(e)?(this.consumeWhiteSpace(),fNe):El(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):uS(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:pi(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();zg(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===lC&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(pi.apply(void 0,e.map(function(c){return c===lC?Nee:c})),16),s=parseInt(pi.apply(void 0,e.map(function(c){return c===lC?Iee:c})),16);return{type:30,start:a,end:s}}var o=parseInt(pi.apply(void 0,e),16);if(this.peekCodePoint(0)===yc&&zg(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];zg(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(pi.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===oC?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===oC?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===pf)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===iC||r===sC){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===pf||this.peekCodePoint(0)===iy)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),dC)}for(;;){var a=this.consumeCodePoint();if(a===pf||a===iy)return{type:22,value:pi.apply(void 0,e)};if(cC(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===pf||this.peekCodePoint(0)===iy?(this.consumeCodePoint(),{type:22,value:pi.apply(void 0,e)}):(this.consumeBadUrlRemnants(),dC);if(a===sC||a===iC||a===oC||Kwe(a))return this.consumeBadUrlRemnants(),dC;if(a===db)if(c0(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),dC;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;cC(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===iy||e===pf)return;c0(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=pi.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===pf||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===cS)return this._value.splice(0,n),sNe;if(a===db){var s=this._value[n+1];s!==pf&&s!==void 0&&(s===cS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):c0(a,s)&&(r+=this.consumeStringSlice(n),r+=pi(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=_w,n=this.peekCodePoint(0);for((n===cp||n===yc)&&e.push(this.consumeCodePoint());El(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===p2&&El(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=N9;El(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===See||n===_ee)&&((a===cp||a===yc)&&El(s)||El(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=N9;El(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[qwe(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(uC(a,s,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===Awe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(zg(e)){for(var r=pi(e);zg(this.peekCodePoint(0))&&r.length<6;)r+=pi(this.consumeCodePoint());cC(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Qwe(n)||n>1114111?E9:n}return e===pf?E9:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(S9(r))e+=pi(r);else if(c0(r,this.peekCodePoint(0)))e+=pi(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),Pee=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new jee;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||ANe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?ak:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Ew=function(t){return t.type===15},s1=function(t){return t.type===17},Ra=function(t){return t.type===20},hNe=function(t){return t.type===0},sk=function(t,e){return Ra(t)&&t.value===e},Bee=function(t){return t.type!==31},Iv=function(t){return t.type!==31&&t.type!==4},zf=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},ANe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},im=function(t){return t.type===17||t.type===15},ki=function(t){return t.type===16||im(t)},Tee=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},nl={type:17,number:0,flags:_w},m6={type:16,number:50,flags:_w},S0={type:16,number:100,flags:_w},Ry=function(t,e,r){var n=t[0],a=t[1];return[Xa(n,e),Xa(typeof a<"u"?a:n,r)]},Xa=function(t,e){if(t.type===16)return t.number/100*e;if(Ew(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},kee="deg",Fee="grad",Oee="rad",Dee="turn",Oj={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case kee:return Math.PI*e.number/180;case Fee:return Math.PI/200*e.number;case Oee:return e.number;case Dee:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Ree=function(t){return t.type===15&&(t.unit===kee||t.unit===Fee||t.unit===Oee||t.unit===Dee)},Mee=function(t){var e=t.filter(Ra).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[nl,nl];case"to top":case"bottom":return Ju(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[nl,S0];case"to right":case"left":return Ju(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[S0,S0];case"to bottom":case"top":return Ju(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[S0,nl];case"to left":case"right":return Ju(270)}return 0},Ju=function(t){return Math.PI*t/180},G0={name:"color",parse:function(t,e){if(e.type===18){var r=mNe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return I0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),o=e.value.substring(3,4);return I0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return I0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return I0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(o,16)/255)}}if(e.type===20){var l=Qh[e.value.toUpperCase()];if(typeof l<"u")return l}return Qh.TRANSPARENT}},K0=function(t){return(255&t)===0},xo=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},I0=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},I9=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},j9=function(t,e){var r=e.filter(Iv);if(r.length===3){var n=r.map(I9),a=n[0],s=n[1],o=n[2];return I0(a,s,o,1)}if(r.length===4){var l=r.map(I9),a=l[0],s=l[1],o=l[2],c=l[3];return I0(a,s,o,c)}return 0};function w3(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var P9=function(t,e){var r=e.filter(Iv),n=r[0],a=r[1],s=r[2],o=r[3],l=(n.type===17?Ju(n.number):Oj.parse(t,n))/(Math.PI*2),c=ki(a)?a.number/100:0,u=ki(s)?s.number/100:0,d=typeof o<"u"&&ki(o)?Xa(o,1):1;if(c===0)return I0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,A=u*2-f,h=w3(A,f,l+1/3),m=w3(A,f,l),p=w3(A,f,l-1/3);return I0(h*255,m*255,p*255,d)},mNe={hsl:P9,hsla:P9,rgb:j9,rgba:j9},fb=function(t,e){return G0.parse(t,Pee.create(e).parseComponentValue())},Qh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},pNe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ra(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},gNe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Dj=function(t,e){var r=G0.parse(t,e[0]),n=e[1];return n&&ki(n)?{color:r,stop:n}:{color:r,stop:null}},B9=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=nl),n.stop===null&&(n.stop=S0);for(var a=[],s=0,o=0;o<t.length;o++){var l=t[o].stop;if(l!==null){var c=Xa(l,e);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var d=a[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var f=o-u,A=a[u-1],h=(d-A)/(f+1),m=1;m<=f;m++)a[u+m-1]=h*m;u=null}}return t.map(function(p,g){var v=p.color;return{color:v,stop:Math.max(Math.min(1,a[g]/e),0)}})},xNe=function(t,e,r){var n=e/2,a=r/2,s=Xa(t[0],e)-n,o=a-Xa(t[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},vNe=function(t,e,r){var n=typeof t=="number"?t:xNe(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,o=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,o-c,o+c]},Td=function(t,e){return Math.sqrt(t*t+e*e)},T9=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(o,l){var c=l[0],u=l[1],d=Td(r-c,n-u);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},yNe=function(t,e,r,n,a){var s=0,o=0;switch(t.size){case 0:t.shape===0?s=o=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=o=Math.min(Td(e,r),Td(e,r-a),Td(e-n,r),Td(e-n,r-a));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),c=T9(n,a,e,r,!0),u=c[0],d=c[1];s=Td(u-e,(d-r)/l),o=l*s}break;case 1:t.shape===0?s=o=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=o=Math.max(Td(e,r),Td(e,r-a),Td(e-n,r),Td(e-n,r-a));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),f=T9(n,a,e,r,!1),u=f[0],d=f[1];s=Td(u-e,(d-r)/l),o=l*s}break}return Array.isArray(t.size)&&(s=Xa(t.size[0],n),o=t.size.length===2?Xa(t.size[1],a):s),[s,o]},bNe=function(t,e){var r=Ju(180),n=[];return zf(e).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&o.value==="to"){r=Mee(a);return}else if(Ree(o)){r=Oj.parse(t,o);return}}var l=Dj(t,a);n.push(l)}),{angle:r,stops:n,type:1}},fC=function(t,e){var r=Ju(180),n=[];return zf(e).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=Mee(a);return}else if(Ree(o)){r=(Oj.parse(t,o)+Ju(270))%Ju(360);return}}var l=Dj(t,a);n.push(l)}),{angle:r,stops:n,type:1}},wNe=function(t,e){var r=Ju(180),n=[],a=1,s=0,o=3,l=[];return zf(e).forEach(function(c,u){var d=c[0];if(u===0){if(Ra(d)&&d.value==="linear"){a=1;return}else if(Ra(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=G0.parse(t,d.values[0]);n.push({stop:nl,color:f})}else if(d.name==="to"){var f=G0.parse(t,d.values[0]);n.push({stop:S0,color:f})}else if(d.name==="color-stop"){var A=d.values.filter(Iv);if(A.length===2){var f=G0.parse(t,A[1]),h=A[0];s1(h)&&n.push({stop:{type:16,number:h.number*100,flags:h.flags},color:f})}}}}),a===1?{angle:(r+Ju(180))%Ju(360),stops:n,type:a}:{size:o,shape:s,stops:n,position:l,type:a}},Lee="closest-side",Uee="farthest-side",Qee="closest-corner",Vee="farthest-corner",Hee="circle",$ee="ellipse",Gee="cover",Kee="contain",NNe=function(t,e){var r=0,n=3,a=[],s=[];return zf(e).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(f,A){if(u)if(Ra(A))switch(A.value){case"center":return s.push(m6),f;case"top":case"left":return s.push(nl),f;case"right":case"bottom":return s.push(S0),f}else(ki(A)||im(A))&&s.push(A);else if(Ra(A))switch(A.value){case Hee:return r=0,!1;case $ee:return r=1,!1;case"at":return u=!0,!1;case Lee:return n=0,!1;case Gee:case Uee:return n=1,!1;case Kee:case Qee:return n=2,!1;case Vee:return n=3,!1}else if(im(A)||ki(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return f},c)}if(c){var d=Dj(t,o);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},hC=function(t,e){var r=0,n=3,a=[],s=[];return zf(e).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,f){if(Ra(f))switch(f.value){case"center":return s.push(m6),!1;case"top":case"left":return s.push(nl),!1;case"right":case"bottom":return s.push(S0),!1}else if(ki(f)||im(f))return s.push(f),!1;return d},c):l===1&&(c=o.reduce(function(d,f){if(Ra(f))switch(f.value){case Hee:return r=0,!1;case $ee:return r=1,!1;case Kee:case Lee:return n=0,!1;case Uee:return n=1,!1;case Qee:return n=2,!1;case Gee:case Vee:return n=3,!1}else if(im(f)||ki(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=Dj(t,o);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},CNe=function(t){return t.type===1},_Ne=function(t){return t.type===2},p6={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=qee[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function ENe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!qee[t.name])}var qee={"linear-gradient":bNe,"-moz-linear-gradient":fC,"-ms-linear-gradient":fC,"-o-linear-gradient":fC,"-webkit-linear-gradient":fC,"radial-gradient":NNe,"-moz-radial-gradient":hC,"-ms-radial-gradient":hC,"-o-radial-gradient":hC,"-webkit-radial-gradient":hC,"-webkit-gradient":wNe},SNe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Iv(n)&&ENe(n)}).map(function(n){return p6.parse(t,n)})}},INe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ra(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},jNe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return zf(e).map(function(r){return r.filter(ki)}).map(Tee)}},PNe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return zf(e).map(function(r){return r.filter(Ra).map(function(n){return n.value}).join(" ")}).map(BNe)}},BNe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},nv;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(nv||(nv={}));var TNe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return zf(e).map(function(r){return r.filter(kNe)})}},kNe=function(t){return Ra(t)||ki(t)},Rj=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},FNe=Rj("top"),ONe=Rj("right"),DNe=Rj("bottom"),RNe=Rj("left"),Mj=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return Tee(r.filter(ki))}}},MNe=Mj("top-left"),LNe=Mj("top-right"),UNe=Mj("bottom-right"),QNe=Mj("bottom-left"),Lj=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},VNe=Lj("top"),HNe=Lj("right"),$Ne=Lj("bottom"),GNe=Lj("left"),Uj=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Ew(r)?r.number:0}}},KNe=Uj("top"),qNe=Uj("right"),zNe=Uj("bottom"),WNe=Uj("left"),XNe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},YNe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},JNe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ra).reduce(function(r,n){return r|ZNe(n.value)},0)}},ZNe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},eCe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},tCe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},dS;(function(t){t.NORMAL="normal",t.STRICT="strict"})(dS||(dS={}));var rCe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return dS.STRICT;case"normal":default:return dS.NORMAL}}},nCe={name:"line-height",initialValue:"normal",prefix:!1,type:4},k9=function(t,e){return Ra(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:ki(t)?Xa(t,e):e},aCe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:p6.parse(t,e)}},sCe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},ik={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Qj=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},iCe=Qj("top"),oCe=Qj("right"),lCe=Qj("bottom"),cCe=Qj("left"),uCe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ra).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},dCe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Vj=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},fCe=Vj("top"),hCe=Vj("right"),ACe=Vj("bottom"),mCe=Vj("left"),pCe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},gCe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},xCe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&sk(e[0],"none")?[]:zf(e).map(function(r){for(var n={color:Qh.TRANSPARENT,offsetX:nl,offsetY:nl,blur:nl},a=0,s=0;s<r.length;s++){var o=r[s];im(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=G0.parse(t,o)}return n})}},vCe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},yCe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=NCe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},bCe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},wCe=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,a,s,o,l]:null},NCe={matrix:bCe,matrix3d:wCe},F9={type:16,number:50,flags:_w},CCe=[F9,F9],_Ce={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(ki);return r.length!==2?CCe:[r[0],r[1]]}},ECe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},hb;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(hb||(hb={}));var SCe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return hb.BREAK_ALL;case"keep-all":return hb.KEEP_ALL;case"normal":default:return hb.NORMAL}}},ICe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(s1(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},zee={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},jCe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return s1(e)?e.number:1}},PCe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},BCe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ra).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},TCe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},kCe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},FCe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(s1(e))return e.number;if(Ra(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},OCe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ra).map(function(r){return r.value})}},DCe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},eo=function(t,e){return(t&e)!==0},RCe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},MCe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(Bee),s=0;s<a.length;s++){var o=a[s],l=a[s+1];if(o.type===20){var c=l&&s1(l)?l.number:1;n.push({counter:o.value,increment:c})}}return n}},LCe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(Bee),a=0;a<n.length;a++){var s=n[a],o=n[a+1];if(Ra(s)&&s.value!=="none"){var l=o&&s1(o)?o.number:0;r.push({counter:s.value,reset:l})}}return r}},UCe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Ew).map(function(r){return zee.parse(t,r)})}},QCe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(hNe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var o=a[s].value,l=a[s+1].value;n.push({open:o,close:l})}return n}},O9=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},VCe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&sk(e[0],"none")?[]:zf(e).map(function(r){for(var n={color:255,offsetX:nl,offsetY:nl,blur:nl,spread:nl,inset:!1},a=0,s=0;s<r.length;s++){var o=r[s];sk(o,"inset")?n.inset=!0:im(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=G0.parse(t,o)}return n})}},HCe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Ra).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},$Ce={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},GCe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Ew(e)?e.number:0}},KCe=function(){function t(e,r){var n,a;this.animationDuration=Or(e,UCe,r.animationDuration),this.backgroundClip=Or(e,pNe,r.backgroundClip),this.backgroundColor=Or(e,gNe,r.backgroundColor),this.backgroundImage=Or(e,SNe,r.backgroundImage),this.backgroundOrigin=Or(e,INe,r.backgroundOrigin),this.backgroundPosition=Or(e,jNe,r.backgroundPosition),this.backgroundRepeat=Or(e,PNe,r.backgroundRepeat),this.backgroundSize=Or(e,TNe,r.backgroundSize),this.borderTopColor=Or(e,FNe,r.borderTopColor),this.borderRightColor=Or(e,ONe,r.borderRightColor),this.borderBottomColor=Or(e,DNe,r.borderBottomColor),this.borderLeftColor=Or(e,RNe,r.borderLeftColor),this.borderTopLeftRadius=Or(e,MNe,r.borderTopLeftRadius),this.borderTopRightRadius=Or(e,LNe,r.borderTopRightRadius),this.borderBottomRightRadius=Or(e,UNe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Or(e,QNe,r.borderBottomLeftRadius),this.borderTopStyle=Or(e,VNe,r.borderTopStyle),this.borderRightStyle=Or(e,HNe,r.borderRightStyle),this.borderBottomStyle=Or(e,$Ne,r.borderBottomStyle),this.borderLeftStyle=Or(e,GNe,r.borderLeftStyle),this.borderTopWidth=Or(e,KNe,r.borderTopWidth),this.borderRightWidth=Or(e,qNe,r.borderRightWidth),this.borderBottomWidth=Or(e,zNe,r.borderBottomWidth),this.borderLeftWidth=Or(e,WNe,r.borderLeftWidth),this.boxShadow=Or(e,VCe,r.boxShadow),this.color=Or(e,XNe,r.color),this.direction=Or(e,YNe,r.direction),this.display=Or(e,JNe,r.display),this.float=Or(e,eCe,r.cssFloat),this.fontFamily=Or(e,TCe,r.fontFamily),this.fontSize=Or(e,kCe,r.fontSize),this.fontStyle=Or(e,DCe,r.fontStyle),this.fontVariant=Or(e,OCe,r.fontVariant),this.fontWeight=Or(e,FCe,r.fontWeight),this.letterSpacing=Or(e,tCe,r.letterSpacing),this.lineBreak=Or(e,rCe,r.lineBreak),this.lineHeight=Or(e,nCe,r.lineHeight),this.listStyleImage=Or(e,aCe,r.listStyleImage),this.listStylePosition=Or(e,sCe,r.listStylePosition),this.listStyleType=Or(e,ik,r.listStyleType),this.marginTop=Or(e,iCe,r.marginTop),this.marginRight=Or(e,oCe,r.marginRight),this.marginBottom=Or(e,lCe,r.marginBottom),this.marginLeft=Or(e,cCe,r.marginLeft),this.opacity=Or(e,jCe,r.opacity);var s=Or(e,uCe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Or(e,dCe,r.overflowWrap),this.paddingTop=Or(e,fCe,r.paddingTop),this.paddingRight=Or(e,hCe,r.paddingRight),this.paddingBottom=Or(e,ACe,r.paddingBottom),this.paddingLeft=Or(e,mCe,r.paddingLeft),this.paintOrder=Or(e,HCe,r.paintOrder),this.position=Or(e,gCe,r.position),this.textAlign=Or(e,pCe,r.textAlign),this.textDecorationColor=Or(e,PCe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Or(e,BCe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Or(e,xCe,r.textShadow),this.textTransform=Or(e,vCe,r.textTransform),this.transform=Or(e,yCe,r.transform),this.transformOrigin=Or(e,_Ce,r.transformOrigin),this.visibility=Or(e,ECe,r.visibility),this.webkitTextStrokeColor=Or(e,$Ce,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Or(e,GCe,r.webkitTextStrokeWidth),this.wordBreak=Or(e,SCe,r.wordBreak),this.zIndex=Or(e,ICe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return K0(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return eo(this.display,4)||eo(this.display,33554432)||eo(this.display,268435456)||eo(this.display,536870912)||eo(this.display,67108864)||eo(this.display,134217728)},t}(),qCe=function(){function t(e,r){this.content=Or(e,RCe,r.content),this.quotes=Or(e,QCe,r.quotes)}return t}(),D9=function(){function t(e,r){this.counterIncrement=Or(e,MCe,r.counterIncrement),this.counterReset=Or(e,LCe,r.counterReset)}return t}(),Or=function(t,e,r){var n=new jee,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new Pee(n.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(t,Ra(o)?o.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Oj.parse(t,s.parseComponentValue());case"color":return G0.parse(t,s.parseComponentValue());case"image":return p6.parse(t,s.parseComponentValue());case"length":var l=s.parseComponentValue();return im(l)?l:nl;case"length-percentage":var c=s.parseComponentValue();return ki(c)?c:nl;case"time":return zee.parse(t,s.parseComponentValue())}break}},zCe="data-html2canvas-debug",WCe=function(t){var e=t.getAttribute(zCe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ok=function(t,e){var r=WCe(t);return r===1||e===r},Wf=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,ok(r,3))debugger;this.styles=new KCe(e,window.getComputedStyle(r,null)),uk(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=kj(this.context,r),ok(r,4)&&(this.flags|=16)}return t}(),XCe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",R9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",My=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var AC=0;AC<R9.length;AC++)My[R9.charCodeAt(AC)]=AC;var YCe=function(t){var e=t.length*.75,r=t.length,n,a=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=My[t.charCodeAt(n)],o=My[t.charCodeAt(n+1)],l=My[t.charCodeAt(n+2)],c=My[t.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},JCe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},ZCe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},bp=5,g6=11,N3=2,e_e=g6-bp,Wee=65536>>bp,t_e=1<<bp,C3=t_e-1,r_e=1024>>bp,n_e=Wee+r_e,a_e=n_e,s_e=32,i_e=a_e+s_e,o_e=65536>>g6,l_e=1<<e_e,c_e=l_e-1,M9=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},u_e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},d_e=function(t,e){var r=YCe(t),n=Array.isArray(r)?ZCe(r):new Uint32Array(r),a=Array.isArray(r)?JCe(r):new Uint16Array(r),s=24,o=M9(a,s/2,n[4]/2),l=n[5]===2?M9(a,(s+n[4])/2):u_e(n,Math.ceil((s+n[4])/4));return new f_e(n[0],n[1],n[2],n[3],o,l)},f_e=function(){function t(e,r,n,a,s,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>bp],r=(r<<N3)+(e&C3),this.data[r];if(e<=65535)return r=this.index[Wee+(e-55296>>bp)],r=(r<<N3)+(e&C3),this.data[r];if(e<this.highStart)return r=i_e-o_e+(e>>g6),r=this.index[r],r+=e>>bp&c_e,r=this.index[r],r=(r<<N3)+(e&C3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),L9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h_e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var mC=0;mC<L9.length;mC++)h_e[L9.charCodeAt(mC)]=mC;var A_e=1,_3=2,E3=3,U9=4,Q9=5,m_e=7,V9=8,S3=9,I3=10,H9=11,$9=12,G9=13,K9=14,j3=15,p_e=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},g_e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=t[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},x_e=d_e(XCe),$u="",P3="",v_e=function(t){return x_e.get(t)},y_e=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],o=e[r];if(s===_3&&o===E3)return $u;if(s===_3||s===E3||s===U9||o===_3||o===E3||o===U9)return P3;if(s===V9&&[V9,S3,H9,$9].indexOf(o)!==-1||(s===H9||s===S3)&&(o===S3||o===I3)||(s===$9||s===I3)&&o===I3||o===G9||o===Q9||o===m_e||s===A_e)return $u;if(s===G9&&o===K9){for(;a===Q9;)a=e[--n];if(a===K9)return $u}if(s===j3&&o===j3){for(var l=0;a===j3;)l++,a=e[--n];if(l%2===0)return $u}return P3},b_e=function(t){var e=p_e(t),r=e.length,n=0,a=0,s=e.map(v_e);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=$u;n<r&&(o=y_e(e,s,++n))===$u;);if(o!==$u||n===r){var l=g_e.apply(null,e.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},w_e=function(t){for(var e=b_e(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},N_e=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},C_e=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=Fj(n.data).map(function(c){return pi(c)}),s=0,o={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,u===0?!0:f});return t.body.removeChild(e),l},__e=function(){return typeof new Image().crossOrigin<"u"},E_e=function(){return typeof new XMLHttpRequest().responseType=="string"},S_e=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},q9=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},I_e=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var o=lk(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),z9(o).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",q9(c)?z9(lk(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),q9(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},lk=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},z9=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Yo={get SUPPORT_RANGE_BOUNDS(){var t=N_e(document);return Object.defineProperty(Yo,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Yo.SUPPORT_RANGE_BOUNDS&&C_e(document);return Object.defineProperty(Yo,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=S_e(document);return Object.defineProperty(Yo,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?I_e(document):Promise.resolve(!1);return Object.defineProperty(Yo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=__e();return Object.defineProperty(Yo,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=E_e();return Object.defineProperty(Yo,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Yo,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Yo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Ab=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),j_e=function(t,e,r,n){var a=T_e(e,r),s=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(Yo.SUPPORT_RANGE_BOUNDS){var c=W9(n,o,l.length).getClientRects();if(c.length>1){var u=x6(l),d=0;u.forEach(function(A){s.push(new Ab(A,tA.fromDOMRectList(t,W9(n,d+o,A.length).getClientRects()))),d+=A.length})}else s.push(new Ab(l,tA.fromDOMRectList(t,c)))}else{var f=n.splitText(l.length);s.push(new Ab(l,P_e(t,n))),n=f}else Yo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),s},P_e=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=kj(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return tA.EMPTY},W9=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},x6=function(t){if(Yo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return w_e(t)},B_e=function(t,e){if(Yo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return F_e(t,e)},T_e=function(t,e){return e.letterSpacing!==0?x6(t):B_e(t,e)},k_e=[32,160,4961,65792,65793,4153,4241],F_e=function(t,e){for(var r=owe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var o=a.value.slice(),l=Fj(o),c="";l.forEach(function(u){k_e.indexOf(u)===-1?c+=pi(u):(c.length&&n.push(c),n.push(pi(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},O_e=function(){function t(e,r,n){this.text=D_e(r.data,n.textTransform),this.textBounds=j_e(e,this.text,n,r)}return t}(),D_e=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(R_e,M_e);case 2:return t.toUpperCase();default:return t}},R_e=/(^|\s|:|-|\(|\))([a-z])/g,M_e=function(t,e,r){return t.length>0?e+r.toUpperCase():t},Xee=function(t){sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(Wf),Yee=function(t){sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(Wf),Jee=function(t){sf(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,o=kj(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(Wf),Zee=function(t){sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Wf),ck=function(t){sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(Wf),L_e=[{type:15,flags:0,unit:"px",number:3}],U_e=[{type:16,flags:0,number:50}],Q_e=function(t){return t.width>t.height?new tA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new tA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},V_e=function(t){var e=t.type===H_e?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},fS="checkbox",hS="radio",H_e="password",X9=707406591,v6=function(t){sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=V_e(n),(a.type===fS||a.type===hS)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=Q_e(a.bounds)),a.type){case fS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=L_e;break;case hS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=U_e;break}return a}return e}(Wf),ete=function(t){sf(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(Wf),tte=function(t){sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Wf),rte=function(t){sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=ate(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?fb(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Qh.TRANSPARENT,o=n.contentWindow.document.body?fb(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Qh.TRANSPARENT;a.backgroundColor=K0(s)?K0(o)?a.styles.backgroundColor:o:s}}catch{}return a}return e}(Wf),$_e=["OL","UL","MENU"],rE=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,ste(a)&&a.data.trim().length>0)r.textNodes.push(new O_e(t,a,r.styles));else if(Lx(a))if(cte(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return rE(t,l,r,n)});else{var o=nte(t,a);o.styles.isVisible()&&(G_e(a,o,n)?o.flags|=4:K_e(o.styles)&&(o.flags|=2),$_e.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?rE(t,a.shadowRoot,o,n):!AS(a)&&!ite(a)&&!mS(a)&&rE(t,a,o,n))}},nte=function(t,e){return dk(e)?new Xee(t,e):ote(e)?new Yee(t,e):ite(e)?new Jee(t,e):q_e(e)?new Zee(t,e):z_e(e)?new ck(t,e):W_e(e)?new v6(t,e):mS(e)?new ete(t,e):AS(e)?new tte(t,e):lte(e)?new rte(t,e):new Wf(t,e)},ate=function(t,e){var r=nte(t,e);return r.flags|=4,rE(t,e,r,r),r},G_e=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||y6(t)&&r.styles.isTransparent()},K_e=function(t){return t.isPositioned()||t.isFloating()},ste=function(t){return t.nodeType===Node.TEXT_NODE},Lx=function(t){return t.nodeType===Node.ELEMENT_NODE},uk=function(t){return Lx(t)&&typeof t.style<"u"&&!nE(t)},nE=function(t){return typeof t.className=="object"},q_e=function(t){return t.tagName==="LI"},z_e=function(t){return t.tagName==="OL"},W_e=function(t){return t.tagName==="INPUT"},X_e=function(t){return t.tagName==="HTML"},ite=function(t){return t.tagName==="svg"},y6=function(t){return t.tagName==="BODY"},ote=function(t){return t.tagName==="CANVAS"},Y9=function(t){return t.tagName==="VIDEO"},dk=function(t){return t.tagName==="IMG"},lte=function(t){return t.tagName==="IFRAME"},J9=function(t){return t.tagName==="STYLE"},Y_e=function(t){return t.tagName==="SCRIPT"},AS=function(t){return t.tagName==="TEXTAREA"},mS=function(t){return t.tagName==="SELECT"},cte=function(t){return t.tagName==="SLOT"},Z9=function(t){return t.tagName.indexOf("-")>0},J_e=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},t}(),eQ={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},tQ={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Z_e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},eEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Wg=function(t,e,r,n,a,s){return t<e||t>r?g2(t,a,s.length>0):n.integers.reduce(function(o,l,c){for(;t>=l;)t-=l,o+=n.values[c];return o},"")+s},ute=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},fi=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(ute(Math.abs(t),s,n,function(o){return pi(Math.floor(o%s)+e)})+a)},Om=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return ute(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},vx=1,s0=2,i0=4,Ly=8,lh=function(t,e,r,n,a,s){if(t<-9999||t>9999)return g2(t,4,a.length>0);var o=Math.abs(t),l=a;if(o===0)return e[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&eo(s,vx)&&l!==""?l=e[u]+l:u>1||u===1&&c===0||u===1&&c===1&&eo(s,s0)||u===1&&c===1&&eo(s,i0)&&t>100||u===1&&c>1&&eo(s,Ly)?l=e[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(t<0?n:"")+l},rQ="",nQ="",aQ="",B3="",g2=function(t,e,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",o=r?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=fi(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return Om(t,"",a);case 6:return Wg(t,1,3999,eQ,3,n).toLowerCase();case 7:return Wg(t,1,3999,eQ,3,n);case 8:return fi(t,945,969,!1,n);case 9:return fi(t,97,122,!1,n);case 10:return fi(t,65,90,!1,n);case 11:return fi(t,1632,1641,!0,n);case 12:case 49:return Wg(t,1,9999,tQ,3,n);case 35:return Wg(t,1,9999,tQ,3,n).toLowerCase();case 13:return fi(t,2534,2543,!0,n);case 14:case 30:return fi(t,6112,6121,!0,n);case 15:return Om(t,"",a);case 16:return Om(t,"",a);case 17:case 48:return lh(t,"",rQ,"",a,s0|i0|Ly);case 47:return lh(t,"",nQ,"",a,vx|s0|i0|Ly);case 42:return lh(t,"",rQ,"",a,s0|i0|Ly);case 41:return lh(t,"",nQ,"",a,vx|s0|i0|Ly);case 26:return lh(t,"","",aQ,a,0);case 25:return lh(t,"","",aQ,a,vx|s0|i0);case 31:return lh(t,"","",B3,s,vx|s0|i0);case 33:return lh(t,"","",B3,s,0);case 32:return lh(t,"","",B3,s,vx|s0|i0);case 18:return fi(t,2406,2415,!0,n);case 20:return Wg(t,1,19999,eEe,3,n);case 21:return fi(t,2790,2799,!0,n);case 22:return fi(t,2662,2671,!0,n);case 22:return Wg(t,1,10999,Z_e,3,n);case 23:return Om(t,"");case 24:return Om(t,"");case 27:return fi(t,3302,3311,!0,n);case 28:return Om(t,"",a);case 29:return Om(t,"",a);case 34:return fi(t,3792,3801,!0,n);case 37:return fi(t,6160,6169,!0,n);case 38:return fi(t,4160,4169,!0,n);case 39:return fi(t,2918,2927,!0,n);case 40:return fi(t,1776,1785,!0,n);case 43:return fi(t,3046,3055,!0,n);case 44:return fi(t,3174,3183,!0,n);case 45:return fi(t,3664,3673,!0,n);case 46:return fi(t,3872,3881,!0,n);case 3:default:return fi(t,48,57,!0,n)}},dte="data-html2canvas-ignore",sQ=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new J_e,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=tEe(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=aEe(a).then(function(){return Wl(n,void 0,void 0,function(){var d,f;return Nl(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(lEe),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,nEe(c)]:[3,4];case 3:A.sent(),A.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(iEe(document.doctype)+"<html></html>"),oEe(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(ok(e,2))debugger;if(ote(e))return this.createCanvasClone(e);if(Y9(e))return this.createVideoClone(e);if(J9(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return dk(r)&&(dk(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),Z9(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return T3(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!Lx(r)||!Y_e(r)&&!r.hasAttribute(dte)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Lx(r)||!J9(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Lx(s)&&cte(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(ste(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Lx(e)&&(uk(e)||nE(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),o=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&uk(a)&&(this.clonedReferenceElement=a),y6(a)&&dEe(a);var c=this.counters.parse(new D9(this.context,s)),u=this.resolvePseudoContent(e,a,o,mb.BEFORE);Z9(e)&&(r=!0),Y9(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,l,mb.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||nE(e))&&!lte(e)||r)&&T3(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(AS(e)||mS(e))&&(AS(a)||mS(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new D9(this.context,n));var c=new qCe(this.context,n),u=l.createElement("html2canvaspseudoelement");T3(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var A=l.createElement("img");A.src=f.value,A.style.opacity="1",u.appendChild(A)}else if(f.type===18){if(f.name==="attr"){var h=f.values.filter(Ra);h.length&&u.appendChild(l.createTextNode(e.getAttribute(h[0].value)||""))}else if(f.name==="counter"){var m=f.values.filter(Iv),p=m[0],g=m[1];if(p&&Ra(p)){var v=s.counters.getCounterValue(p.value),y=g&&Ra(g)?ik.parse(s.context,g.value):3;u.appendChild(l.createTextNode(g2(v,y,!1)))}}else if(f.name==="counters"){var b=f.values.filter(Iv),p=b[0],w=b[1],g=b[2];if(p&&Ra(p)){var j=s.counters.getCounterValues(p.value),I=g&&Ra(g)?ik.parse(s.context,g.value):3,_=w&&w.type===0?w.value:"",S=j.map(function(P){return g2(P,I,!1)}).join(_);u.appendChild(l.createTextNode(S))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(O9(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(O9(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=fk+" "+hk;var d=a===mb.BEFORE?" "+fk:" "+hk;return nE(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),mb;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(mb||(mb={}));var tEe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(dte,"true"),t.body.appendChild(r),r},rEe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},nEe=function(t){return Promise.all([].slice.call(t.images,0).map(rEe))},aEe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},sEe=["all","d","content"],T3=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);sEe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},iEe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},oEe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},lEe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},cEe=":before",uEe=":after",fk="___html2canvas___pseudoelement_before",hk="___html2canvas___pseudoelement_after",iQ=`{
    content: "" !important;
    display: none !important;
}`,dEe=function(t){fEe(t,"."+fk+cEe+iQ+`
         .`+hk+uEe+iQ)},fEe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},fte=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),hEe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(F3(e)||gEe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Wl(this,void 0,void 0,function(){var r,n,a,s,o=this;return Nl(this,function(l){switch(l.label){case 0:return r=fte.isSameOrigin(e),n=!k3(e)&&this._options.useCORS===!0&&Yo.SUPPORT_CORS_IMAGES&&!r,a=!k3(e)&&!r&&!F3(e)&&typeof this._options.proxy=="string"&&Yo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!k3(e)&&!F3(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(xEe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,o){var l=Yo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(A){return o(A)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}c.send()})},t}(),AEe=/^data:image\/svg\+xml/i,mEe=/^data:image\/.*;base64,/i,pEe=/^data:image\/.*/i,gEe=function(t){return Yo.SUPPORT_SVG_DRAWING||!vEe(t)},k3=function(t){return pEe.test(t)},xEe=function(t){return mEe.test(t)},F3=function(t){return t.substr(0,4)==="blob"},vEe=function(t){return t.substr(-3).toLowerCase()==="svg"||AEe.test(t)},kr=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Xg=function(t,e,r){return new kr(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},pC=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=Xg(this.start,this.startControl,e),a=Xg(this.startControl,this.endControl,e),s=Xg(this.endControl,this.end,e),o=Xg(n,a,e),l=Xg(a,s,e),c=Xg(o,l,e);return r?new t(this.start,n,o,c):new t(c,l,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Wu=function(t){return t.type===1},yEe=function(){function t(e){var r=e.styles,n=e.bounds,a=Ry(r.borderTopLeftRadius,n.width,n.height),s=a[0],o=a[1],l=Ry(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=Ry(r.borderBottomRightRadius,n.width,n.height),f=d[0],A=d[1],h=Ry(r.borderBottomLeftRadius,n.width,n.height),m=h[0],p=h[1],g=[];g.push((s+c)/n.width),g.push((m+f)/n.width),g.push((o+p)/n.height),g.push((u+A)/n.height);var v=Math.max.apply(Math,g);v>1&&(s/=v,o/=v,c/=v,u/=v,f/=v,A/=v,m/=v,p/=v);var y=n.width-c,b=n.height-A,w=n.width-f,j=n.height-p,I=r.borderTopWidth,_=r.borderRightWidth,S=r.borderBottomWidth,E=r.borderLeftWidth,F=Xa(r.paddingTop,e.bounds.width),P=Xa(r.paddingRight,e.bounds.width),k=Xa(r.paddingBottom,e.bounds.width),D=Xa(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?As(n.left+E/3,n.top+I/3,s-E/3,o-I/3,ga.TOP_LEFT):new kr(n.left+E/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||o>0?As(n.left+y,n.top+I/3,c-_/3,u-I/3,ga.TOP_RIGHT):new kr(n.left+n.width-_/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||A>0?As(n.left+w,n.top+b,f-_/3,A-S/3,ga.BOTTOM_RIGHT):new kr(n.left+n.width-_/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?As(n.left+E/3,n.top+j,m-E/3,p-S/3,ga.BOTTOM_LEFT):new kr(n.left+E/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?As(n.left+E*2/3,n.top+I*2/3,s-E*2/3,o-I*2/3,ga.TOP_LEFT):new kr(n.left+E*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?As(n.left+y,n.top+I*2/3,c-_*2/3,u-I*2/3,ga.TOP_RIGHT):new kr(n.left+n.width-_*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||A>0?As(n.left+w,n.top+b,f-_*2/3,A-S*2/3,ga.BOTTOM_RIGHT):new kr(n.left+n.width-_*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?As(n.left+E*2/3,n.top+j,m-E*2/3,p-S*2/3,ga.BOTTOM_LEFT):new kr(n.left+E*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=s>0||o>0?As(n.left+E/2,n.top+I/2,s-E/2,o-I/2,ga.TOP_LEFT):new kr(n.left+E/2,n.top+I/2),this.topRightBorderStroke=s>0||o>0?As(n.left+y,n.top+I/2,c-_/2,u-I/2,ga.TOP_RIGHT):new kr(n.left+n.width-_/2,n.top+I/2),this.bottomRightBorderStroke=f>0||A>0?As(n.left+w,n.top+b,f-_/2,A-S/2,ga.BOTTOM_RIGHT):new kr(n.left+n.width-_/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=m>0||p>0?As(n.left+E/2,n.top+j,m-E/2,p-S/2,ga.BOTTOM_LEFT):new kr(n.left+E/2,n.top+n.height-S/2),this.topLeftBorderBox=s>0||o>0?As(n.left,n.top,s,o,ga.TOP_LEFT):new kr(n.left,n.top),this.topRightBorderBox=c>0||u>0?As(n.left+y,n.top,c,u,ga.TOP_RIGHT):new kr(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||A>0?As(n.left+w,n.top+b,f,A,ga.BOTTOM_RIGHT):new kr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?As(n.left,n.top+j,m,p,ga.BOTTOM_LEFT):new kr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?As(n.left+E,n.top+I,Math.max(0,s-E),Math.max(0,o-I),ga.TOP_LEFT):new kr(n.left+E,n.top+I),this.topRightPaddingBox=c>0||u>0?As(n.left+Math.min(y,n.width-_),n.top+I,y>n.width+_?0:Math.max(0,c-_),Math.max(0,u-I),ga.TOP_RIGHT):new kr(n.left+n.width-_,n.top+I),this.bottomRightPaddingBox=f>0||A>0?As(n.left+Math.min(w,n.width-E),n.top+Math.min(b,n.height-S),Math.max(0,f-_),Math.max(0,A-S),ga.BOTTOM_RIGHT):new kr(n.left+n.width-_,n.top+n.height-S),this.bottomLeftPaddingBox=m>0||p>0?As(n.left+E,n.top+Math.min(j,n.height-S),Math.max(0,m-E),Math.max(0,p-S),ga.BOTTOM_LEFT):new kr(n.left+E,n.top+n.height-S),this.topLeftContentBox=s>0||o>0?As(n.left+E+D,n.top+I+F,Math.max(0,s-(E+D)),Math.max(0,o-(I+F)),ga.TOP_LEFT):new kr(n.left+E+D,n.top+I+F),this.topRightContentBox=c>0||u>0?As(n.left+Math.min(y,n.width+E+D),n.top+I+F,y>n.width+E+D?0:c-E+D,u-(I+F),ga.TOP_RIGHT):new kr(n.left+n.width-(_+P),n.top+I+F),this.bottomRightContentBox=f>0||A>0?As(n.left+Math.min(w,n.width-(E+D)),n.top+Math.min(b,n.height+I+F),Math.max(0,f-(_+P)),A-(S+k),ga.BOTTOM_RIGHT):new kr(n.left+n.width-(_+P),n.top+n.height-(S+k)),this.bottomLeftContentBox=m>0||p>0?As(n.left+E+D,n.top+j,Math.max(0,m-(E+D)),p-(S+k),ga.BOTTOM_LEFT):new kr(n.left+E+D,n.top+n.height-(S+k))}return t}(),ga;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ga||(ga={}));var As=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),o=r*s,l=n*s,c=t+r,u=e+n;switch(a){case ga.TOP_LEFT:return new pC(new kr(t,u),new kr(t,u-l),new kr(c-o,e),new kr(c,e));case ga.TOP_RIGHT:return new pC(new kr(t,e),new kr(t+o,e),new kr(c,u-l),new kr(c,u));case ga.BOTTOM_RIGHT:return new pC(new kr(c,e),new kr(c,e+l),new kr(t+o,u),new kr(t,u));case ga.BOTTOM_LEFT:default:return new pC(new kr(c,u),new kr(c-o,u),new kr(t,e+l),new kr(t,e))}},pS=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},bEe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},gS=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},wEe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),gC=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),NEe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),CEe=function(t){return t.type===0},hte=function(t){return t.type===1},_Ee=function(t){return t.type===2},oQ=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},EEe=function(t,e,r,n,a){return t.map(function(s,o){switch(o){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},Ate=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),mte=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new yEe(this.container),this.container.styles.opacity<1&&this.effects.push(new NEe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new wEe(n,a,s))}if(this.container.styles.overflowX!==0){var o=pS(this.curves),l=gS(this.curves);oQ(o,l)?this.effects.push(new gC(o,6)):(this.effects.push(new gC(o,2)),this.effects.push(new gC(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!hte(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=pS(n.curves),l=gS(n.curves);oQ(o,l)||a.unshift(new gC(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return eo(c.target,e)})},t}(),Ak=function(t,e,r,n){t.container.elements.forEach(function(a){var s=eo(a.flags,4),o=eo(a.flags,2),l=new mte(a,t);eo(a.styles.display,2048)&&n.push(l);var c=eo(a.flags,8)?[]:n;if(s||o){var u=s||a.styles.isPositioned()?r:e,d=new Ate(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var A=0;u.negativeZIndex.some(function(m,p){return f>m.element.container.styles.zIndex.order?(A=p,!1):A>0}),u.negativeZIndex.splice(A,0,d)}else if(f>0){var h=0;u.positiveZIndex.some(function(m,p){return f>=m.element.container.styles.zIndex.order?(h=p+1,!1):h>0}),u.positiveZIndex.splice(h,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);Ak(l,d,s?d:r,c)}else a.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),Ak(l,e,r,c);eo(a.flags,8)&&pte(a,c)})},pte=function(t,e){for(var r=t instanceof ck?t.start:1,n=t instanceof ck?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof Zee&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=g2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},SEe=function(t){var e=new mte(t,null),r=new Ate(e),n=[];return Ak(e,r,r,n),pte(e.container,n),r},lQ=function(t,e){switch(e){case 0:return Zu(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Zu(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Zu(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Zu(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},IEe=function(t,e){switch(e){case 0:return Zu(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Zu(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Zu(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Zu(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},jEe=function(t,e){switch(e){case 0:return Zu(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Zu(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Zu(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Zu(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},PEe=function(t,e){switch(e){case 0:return xC(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return xC(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return xC(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return xC(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},xC=function(t,e){var r=[];return Wu(t)?r.push(t.subdivide(.5,!1)):r.push(t),Wu(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Zu=function(t,e,r,n){var a=[];return Wu(t)?a.push(t.subdivide(.5,!1)):a.push(t),Wu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Wu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Wu(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},gte=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},xS=function(t){var e=t.styles,r=t.bounds,n=Xa(e.paddingLeft,r.width),a=Xa(e.paddingRight,r.width),s=Xa(e.paddingTop,r.width),o=Xa(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+o))},BEe=function(t,e){return t===0?e.bounds:t===2?xS(e):gte(e)},TEe=function(t,e){return t===0?e.bounds:t===2?xS(e):gte(e)},O3=function(t,e,r){var n=BEe(yx(t.styles.backgroundOrigin,e),t),a=TEe(yx(t.styles.backgroundClip,e),t),s=kEe(yx(t.styles.backgroundSize,e),r,n),o=s[0],l=s[1],c=Ry(yx(t.styles.backgroundPosition,e),n.width-o,n.height-l),u=FEe(yx(t.styles.backgroundRepeat,e),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,o,l]},Yg=function(t){return Ra(t)&&t.value===nv.AUTO},vC=function(t){return typeof t=="number"},kEe=function(t,e,r){var n=e[0],a=e[1],s=e[2],o=t[0],l=t[1];if(!o)return[0,0];if(ki(o)&&l&&ki(l))return[Xa(o,r.width),Xa(l,r.height)];var c=vC(s);if(Ra(o)&&(o.value===nv.CONTAIN||o.value===nv.COVER)){if(vC(s)){var u=r.width/r.height;return u<s!=(o.value===nv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=vC(n),f=vC(a),A=d||f;if(Yg(o)&&(!l||Yg(l))){if(d&&f)return[n,a];if(!c&&!A)return[r.width,r.height];if(A&&c){var h=d?n:a*s,m=f?a:n/s;return[h,m]}var p=d?n:r.width,g=f?a:r.height;return[p,g]}if(c){var v=0,y=0;return ki(o)?v=Xa(o,r.width):ki(l)&&(y=Xa(l,r.height)),Yg(o)?v=y*s:(!l||Yg(l))&&(y=v/s),[v,y]}var b=null,w=null;if(ki(o)?b=Xa(o,r.width):l&&ki(l)&&(w=Xa(l,r.height)),b!==null&&(!l||Yg(l))&&(w=d&&f?b/n*a:r.height),w!==null&&Yg(o)&&(b=d&&f?w/a*n:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},yx=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},FEe=function(t,e,r,n,a){var s=e[0],o=e[1],l=r[0],c=r[1];switch(t){case 2:return[new kr(Math.round(n.left),Math.round(n.top+o)),new kr(Math.round(n.left+n.width),Math.round(n.top+o)),new kr(Math.round(n.left+n.width),Math.round(c+n.top+o)),new kr(Math.round(n.left),Math.round(c+n.top+o))];case 3:return[new kr(Math.round(n.left+s),Math.round(n.top)),new kr(Math.round(n.left+s+l),Math.round(n.top)),new kr(Math.round(n.left+s+l),Math.round(n.height+n.top)),new kr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new kr(Math.round(n.left+s),Math.round(n.top+o)),new kr(Math.round(n.left+s+l),Math.round(n.top+o)),new kr(Math.round(n.left+s+l),Math.round(n.top+o+c)),new kr(Math.round(n.left+s),Math.round(n.top+o+c))];default:return[new kr(Math.round(a.left),Math.round(a.top)),new kr(Math.round(a.left+a.width),Math.round(a.top)),new kr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new kr(Math.round(a.left),Math.round(a.height+a.top))]}},OEe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",cQ="Hidden Text",DEe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=OEe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(cQ)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(cQ)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:c}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),xte=function(){function t(e,r){this.context=e,this.options=r}return t}(),REe=1e4,MEe=function(t){sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new DEe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),_Ee(r)&&(this.ctx.globalAlpha=r.opacity),CEe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),hte(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Wl(this,void 0,void 0,function(){var n;return Nl(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Wl(this,void 0,void 0,function(){return Nl(this,function(n){switch(n.label){case 0:if(eo(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=x6(r.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=HEe(r.fontFamily).join(", "),s=Ew(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return Wl(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,A=this;return Nl(this,function(h){return a=this.createFontStyle(n),s=a[0],o=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(m){f.forEach(function(p){switch(p){case 0:A.ctx.fillStyle=xo(n.color),A.renderTextWithLetterSpacing(m,n.letterSpacing,u);var g=n.textShadow;g.length&&m.text.trim().length&&(g.slice(0).reverse().forEach(function(v){A.ctx.shadowColor=xo(v.color),A.ctx.shadowOffsetX=v.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=v.offsetY.number*A.options.scale,A.ctx.shadowBlur=v.blur.number,A.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),n.textDecorationLine.length&&(A.ctx.fillStyle=xo(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(v){switch(v){case 1:A.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:A.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:A.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(A.ctx.strokeStyle=xo(n.webkitTextStrokeColor),A.ctx.lineWidth=n.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=xS(r),o=gS(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Wl(this,void 0,void 0,function(){var n,a,s,o,l,c,y,y,u,d,f,A,w,h,m,j,p,g,v,y,b,w,j;return Nl(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,o=0,l=n.textNodes,I.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof Xee))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Yee&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof Jee))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof rte&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof v6&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===fS?n.checked&&(this.ctx.save(),this.path([new kr(n.bounds.left+f*.39363,n.bounds.top+f*.79),new kr(n.bounds.left+f*.16,n.bounds.top+f*.5549),new kr(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new kr(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new kr(n.bounds.left+f*.72983,n.bounds.top+f*.23),new kr(n.bounds.left+f*.84,n.bounds.top+f*.34085),new kr(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=xo(X9),this.ctx.fill(),this.ctx.restore()):n.type===hS&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=xo(X9),this.ctx.fill(),this.ctx.restore())),LEe(n)&&n.value.length){switch(A=this.createFontStyle(s),w=A[0],h=A[1],m=this.fontMetrics.getMetrics(w,h).baseline,this.ctx.font=w,this.ctx.fillStyle=xo(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=QEe(n.styles.textAlign),j=xS(n),p=0,n.styles.textAlign){case 1:p+=j.width/2;break;case 2:p+=j.width;break}g=j.add(p,0,0,-j.height/2+1),this.ctx.save(),this.path([new kr(j.left,j.top),new kr(j.left+j.width,j.top),new kr(j.left+j.width,j.top+j.height),new kr(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ab(n.value,g),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!eo(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(v=n.styles.listStyleImage,v.type!==0)return[3,18];y=void 0,b=v.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=I.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=xo(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new tA(n.bounds.left,n.bounds.top+Xa(n.styles.paddingTop,n.bounds.width),n.bounds.width,k9(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ab(r.listValue,j),s.letterSpacing,k9(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Wl(this,void 0,void 0,function(){var n,a,v,s,o,v,l,c,v,u,d,v,f,A,v,h,m,v,p,g,v;return Nl(this,function(y){switch(y.label){case 0:if(eo(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,a=r.negativeZIndex,y.label=2;case 2:return n<a.length?(v=a[n],[4,this.renderStack(v)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),s=0,o=r.nonInlineLevel,y.label=7;case 7:return s<o.length?(v=o[s],[4,this.renderNode(v)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,y.label=11;case 11:return l<c.length?(v=c[l],[4,this.renderStack(v)]):[3,14];case 12:y.sent(),y.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return u<d.length?(v=d[u],[4,this.renderStack(v)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:f=0,A=r.inlineLevel,y.label=19;case 19:return f<A.length?(v=A[f],[4,this.renderNode(v)]):[3,22];case 20:y.sent(),y.label=21;case 21:return f++,[3,19];case 22:h=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return h<m.length?(v=m[h],[4,this.renderStack(v)]):[3,26];case 24:y.sent(),y.label=25;case 25:return h++,[3,23];case 26:p=0,g=r.positiveZIndex,y.label=27;case 27:return p<g.length?(v=g[p],[4,this.renderStack(v)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var o=Wu(a)?a.start:a;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),Wu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},e.prototype.renderBackgroundImage=function(r){return Wl(this,void 0,void 0,function(){var n,a,s,o,l,c;return Nl(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,A,h,F,Ae,me,D,J,S,m,F,Ae,me,D,J,p,g,v,y,b,w,j,I,_,S,E,F,P,k,D,J,fe,Ae,me,pe,ne,Pe,Be,O,G,q,U;return Nl(this,function(Y){switch(Y.label){case 0:if(d.type!==0)return[3,5];f=void 0,A=d.url,Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,s.context.cache.match(A)];case 2:return f=Y.sent(),[3,4];case 3:return Y.sent(),s.context.logger.error("Error loading background-image "+A),[3,4];case 4:return f&&(h=O3(r,n,[f.width,f.height,f.width/f.height]),F=h[0],Ae=h[1],me=h[2],D=h[3],J=h[4],S=s.ctx.createPattern(s.resizeImage(f,D,J),"repeat"),s.renderRepeat(F,S,Ae,me)),[3,6];case 5:CNe(d)?(m=O3(r,n,[null,null,null]),F=m[0],Ae=m[1],me=m[2],D=m[3],J=m[4],p=vNe(d.angle,D,J),g=p[0],v=p[1],y=p[2],b=p[3],w=p[4],j=document.createElement("canvas"),j.width=D,j.height=J,I=j.getContext("2d"),_=I.createLinearGradient(v,b,y,w),B9(d.stops,g).forEach(function(Z){return _.addColorStop(Z.stop,xo(Z.color))}),I.fillStyle=_,I.fillRect(0,0,D,J),D>0&&J>0&&(S=s.ctx.createPattern(j,"repeat"),s.renderRepeat(F,S,Ae,me))):_Ne(d)&&(E=O3(r,n,[null,null,null]),F=E[0],P=E[1],k=E[2],D=E[3],J=E[4],fe=d.position.length===0?[m6]:d.position,Ae=Xa(fe[0],D),me=Xa(fe[fe.length-1],J),pe=yNe(d,Ae,me,D,J),ne=pe[0],Pe=pe[1],ne>0&&Pe>0&&(Be=s.ctx.createRadialGradient(P+Ae,k+me,0,P+Ae,k+me,ne),B9(d.stops,ne*2).forEach(function(Z){return Be.addColorStop(Z.stop,xo(Z.color))}),s.path(F),s.ctx.fillStyle=Be,ne!==Pe?(O=r.bounds.left+.5*r.bounds.width,G=r.bounds.top+.5*r.bounds.height,q=Pe/ne,U=1/q,s.ctx.save(),s.ctx.translate(O,G),s.ctx.transform(1,0,0,q,0,0),s.ctx.translate(-O,-G),s.ctx.fillRect(P,U*(k-G)+G,D,J*U),s.ctx.restore()):s.ctx.fill())),Y.label=6;case 6:return n--,[2]}})},s=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return Wl(this,void 0,void 0,function(){return Nl(this,function(s){return this.path(lQ(a,n)),this.ctx.fillStyle=xo(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return Wl(this,void 0,void 0,function(){var o,l;return Nl(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=IEe(s,a),this.path(o),this.ctx.fillStyle=xo(r),this.ctx.fill(),l=jEe(s,a),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Wl(this,void 0,void 0,function(){var n,a,s,o,l,c,u,d,f=this;return Nl(this,function(A){switch(A.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!K0(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=UEe(yx(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),K0(n.backgroundColor)||(this.ctx.fillStyle=xo(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(h){f.ctx.save();var m=pS(r.curves),p=h.inset?0:REe,g=EEe(m,-p+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(f.path(m),f.ctx.clip(),f.mask(g)):(f.mask(m),f.ctx.clip(),f.path(g)),f.ctx.shadowOffsetX=h.offsetX.number+p,f.ctx.shadowOffsetY=h.offsetY.number,f.ctx.shadowColor=xo(h.color),f.ctx.shadowBlur=h.blur.number,f.ctx.fillStyle=h.inset?xo(h.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),A.label=2;case 2:l=0,c=0,u=s,A.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!K0(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return A.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return A.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:A.sent(),A.label=11;case 11:l++,A.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,o){return Wl(this,void 0,void 0,function(){var l,c,u,d,f,A,h,m,p,g,v,y,b,w,j,I,j,I;return Nl(this,function(_){return this.ctx.save(),l=PEe(s,a),c=lQ(s,a),o===2&&(this.path(c),this.ctx.clip()),Wu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Wu(c[1])?(f=c[1].end.x,A=c[1].end.y):(f=c[1].x,A=c[1].y),a===0||a===2?h=Math.abs(u-f):h=Math.abs(d-A),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,o===3&&(m=n,p=n),g=!0,h<=m*2?g=!1:h<=m*2+p?(v=h/(2*m+p),m*=v,p*=v):(y=Math.floor((h+p)/(m+p)),b=(h-y*m)/(y-1),w=(h-(y+1)*m)/y,p=w<=0||Math.abs(p-b)<Math.abs(p-w)?b:w),g&&(o===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=xo(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Wu(c[0])&&(j=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new kr(j.end.x,j.end.y),new kr(I.start.x,I.start.y)]),this.ctx.stroke()),Wu(c[1])&&(j=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new kr(j.end.x,j.end.y),new kr(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Wl(this,void 0,void 0,function(){var n;return Nl(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=xo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=SEe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(xte),LEe=function(t){return t instanceof tte||t instanceof ete?!0:t instanceof v6&&t.type!==hS&&t.type!==fS},UEe=function(t,e){switch(t){case 0:return pS(e);case 2:return bEe(e);case 1:default:return gS(e)}},QEe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},VEe=["-apple-system","system-ui"],HEe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return VEe.indexOf(e)===-1}):t},$Ee=function(t){sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return Wl(this,void 0,void 0,function(){var n,a;return Nl(this,function(s){switch(s.label){case 0:return n=lk(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,GEe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=xo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(xte),GEe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},KEe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,YN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,YN([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,YN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,YN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),qEe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new KEe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new hEe(this,e)}return t.instanceCount=1,t}(),yg=function(t,e){return e===void 0&&(e={}),zEe(t,e)};typeof window<"u"&&fte.setContext(window);var zEe=function(t,e){return Wl(void 0,void 0,void 0,function(){var r,n,a,s,o,l,c,u,d,f,A,h,m,p,g,v,y,b,w,j,_,I,_,S,E,F,P,k,D,J,fe,Ae,me,pe,ne,Pe,Be,O,G,q;return Nl(this,function(U){switch(U.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=e.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(E=e.imageTimeout)!==null&&E!==void 0?E:15e3,proxy:e.proxy,useCORS:(F=e.useCORS)!==null&&F!==void 0?F:!1},s=qT({logging:(P=e.logging)!==null&&P!==void 0?P:!0,cache:e.cache},a),o={windowWidth:(k=e.windowWidth)!==null&&k!==void 0?k:n.innerWidth,windowHeight:(D=e.windowHeight)!==null&&D!==void 0?D:n.innerHeight,scrollX:(J=e.scrollX)!==null&&J!==void 0?J:n.pageXOffset,scrollY:(fe=e.scrollY)!==null&&fe!==void 0?fe:n.pageYOffset},l=new tA(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new qEe(s,l),u=(Ae=e.foreignObjectRendering)!==null&&Ae!==void 0?Ae:!1,d={allowTaint:(me=e.allowTaint)!==null&&me!==void 0?me:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new sQ(c,t,d),A=f.clonedReferenceElement,A?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=U.sent(),m=y6(A)||X_e(A)?E2e(A.ownerDocument):kj(c,A),p=m.width,g=m.height,v=m.left,y=m.top,b=WEe(c,A,e.backgroundColor),w={canvas:e.canvas,backgroundColor:b,scale:(ne=(pe=e.scale)!==null&&pe!==void 0?pe:n.devicePixelRatio)!==null&&ne!==void 0?ne:1,x:((Pe=e.x)!==null&&Pe!==void 0?Pe:0)+v,y:((Be=e.y)!==null&&Be!==void 0?Be:0)+y,width:(O=e.width)!==null&&O!==void 0?O:Math.ceil(p),height:(G=e.height)!==null&&G!==void 0?G:Math.ceil(g)},u?(c.logger.debug("Document cloned, using foreign object rendering"),_=new $Ee(c,w),[4,_.render(A)]):[3,3];case 2:return j=U.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+v+","+y+" with size "+p+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=ate(c,A),b===I.styles.backgroundColor&&(I.styles.backgroundColor=Qh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),_=new MEe(c,w),[4,_.render(I)];case 4:j=U.sent(),U.label=5;case 5:return(!((q=e.removeContainer)!==null&&q!==void 0)||q)&&(sQ.destroy(h)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,j]}})})},WEe=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?fb(t,getComputedStyle(n.documentElement).backgroundColor):Qh.TRANSPARENT,s=n.body?fb(t,getComputedStyle(n.body).backgroundColor):Qh.TRANSPARENT,o=typeof r=="string"?fb(t,r):r===null?Qh.TRANSPARENT:4294967295;return e===n.documentElement?K0(a)?K0(s)?o:s:a:o};const b6=Object.freeze(Object.defineProperty({__proto__:null,default:yg},Symbol.toStringTag,{value:"Module"})),XEe="modulepreload",YEe=function(t){return"/"+t},uQ={},Vh=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=YEe(c),c in uQ)return;uQ[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":XEe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((A,h)=>{f.addEventListener("load",A),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function ja(t){"@babel/helpers - typeof";return ja=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ja(t)}var Zd=Uint8Array,ou=Uint16Array,w6=Int32Array,N6=new Zd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),C6=new Zd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dQ=new Zd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vte=function(t,e){for(var r=new ou(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new w6(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},yte=vte(N6,2),JEe=yte.b,mk=yte.r;JEe[28]=258,mk[258]=28;var ZEe=vte(C6,0),fQ=ZEe.r,pk=new ou(32768);for(var cs=0;cs<32768;++cs){var XA=(cs&43690)>>1|(cs&21845)<<1;XA=(XA&52428)>>2|(XA&13107)<<2,XA=(XA&61680)>>4|(XA&3855)<<4,pk[cs]=((XA&65280)>>8|(XA&255)<<8)>>1}var pb=function(t,e,r){for(var n=t.length,a=0,s=new ou(e);a<n;++a)t[a]&&++s[t[a]-1];var o=new ou(e);for(a=1;a<e;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new ou(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],f=o[t[a]-1]++<<d,A=f|(1<<d)-1;f<=A;++f)l[pk[f]>>c]=u}else for(l=new ou(n),a=0;a<n;++a)t[a]&&(l[a]=pk[o[t[a]-1]++]>>15-t[a]);return l},Xp=new Zd(288);for(var cs=0;cs<144;++cs)Xp[cs]=8;for(var cs=144;cs<256;++cs)Xp[cs]=9;for(var cs=256;cs<280;++cs)Xp[cs]=7;for(var cs=280;cs<288;++cs)Xp[cs]=8;var vS=new Zd(32);for(var cs=0;cs<32;++cs)vS[cs]=5;var eSe=pb(Xp,9,0),tSe=pb(vS,5,0),bte=function(t){return(t+7)/8|0},rSe=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Zd(t.subarray(e,r))},ch=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},oy=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},D3=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:Nte,l:0};if(a==1){var o=new Zd(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(j,I){return j.f-I.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var A=s[0].s,n=1;n<a;++n)s[n].s>A&&(A=s[n].s);var h=new ou(A+1),m=gk(r[d-1],h,0);if(m>e){var n=0,p=0,g=m-e,v=1<<g;for(s.sort(function(I,_){return h[_.s]-h[I.s]||I.f-_.f});n<a;++n){var y=s[n].s;if(h[y]>e)p+=v-(1<<m-h[y]),h[y]=e;else break}for(p>>=g;p>0;){var b=s[n].s;h[b]<e?p-=1<<e-h[b]++-1:++n}for(;n>=0&&p;--n){var w=s[n].s;h[w]==e&&(--h[w],++p)}m=e}return{t:new Zd(h),l:m}},gk=function(t,e,r){return t.s==-1?Math.max(gk(t.l,e,r+1),gk(t.r,e,r+1)):e[t.s]=r},hQ=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ou(++e),n=0,a=t[0],s=1,o=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[l]}return{c:r.subarray(0,n),n:e}},ly=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},wte=function(t,e,r){var n=r.length,a=bte(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},AQ=function(t,e,r,n,a,s,o,l,c,u,d){ch(e,d++,r),++a[256];for(var f=D3(a,15),A=f.t,h=f.l,m=D3(s,15),p=m.t,g=m.l,v=hQ(A),y=v.c,b=v.n,w=hQ(p),j=w.c,I=w.n,_=new ou(19),S=0;S<y.length;++S)++_[y[S]&31];for(var S=0;S<j.length;++S)++_[j[S]&31];for(var E=D3(_,7),F=E.t,P=E.l,k=19;k>4&&!F[dQ[k-1]];--k);var D=u+5<<3,J=ly(a,Xp)+ly(s,vS)+o,fe=ly(a,A)+ly(s,p)+o+14+3*k+ly(_,F)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&D<=J&&D<=fe)return wte(e,d,t.subarray(c,c+u));var Ae,me,pe,ne;if(ch(e,d,1+(fe<J)),d+=2,fe<J){Ae=pb(A,h,0),me=A,pe=pb(p,g,0),ne=p;var Pe=pb(F,P,0);ch(e,d,b-257),ch(e,d+5,I-1),ch(e,d+10,k-4),d+=14;for(var S=0;S<k;++S)ch(e,d+3*S,F[dQ[S]]);d+=3*k;for(var Be=[y,j],O=0;O<2;++O)for(var G=Be[O],S=0;S<G.length;++S){var q=G[S]&31;ch(e,d,Pe[q]),d+=F[q],q>15&&(ch(e,d,G[S]>>5&127),d+=G[S]>>12)}}else Ae=eSe,me=Xp,pe=tSe,ne=vS;for(var S=0;S<l;++S){var U=n[S];if(U>255){var q=U>>18&31;oy(e,d,Ae[q+257]),d+=me[q+257],q>7&&(ch(e,d,U>>23&31),d+=N6[q]);var Y=U&31;oy(e,d,pe[Y]),d+=ne[Y],Y>3&&(oy(e,d,U>>5&8191),d+=C6[Y])}else oy(e,d,Ae[U]),d+=me[U]}return oy(e,d,Ae[256]),d+me[256]},nSe=new w6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Nte=new Zd(0),aSe=function(t,e,r,n,a,s){var o=s.z||t.length,l=new Zd(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var f=nSe[e-1],A=f>>13,h=f&8191,m=(1<<r)-1,p=s.p||new ou(32768),g=s.h||new ou(m+1),v=Math.ceil(r/3),y=2*v,b=function(ie){return(t[ie]^t[ie+1]<<v^t[ie+2]<<y)&m},w=new w6(25e3),j=new ou(288),I=new ou(32),_=0,S=0,E=s.i||0,F=0,P=s.w||0,k=0;E+2<o;++E){var D=b(E),J=E&32767,fe=g[D];if(p[J]=fe,g[D]=J,P<=E){var Ae=o-E;if((_>7e3||F>24576)&&(Ae>423||!u)){d=AQ(t,c,0,w,j,I,S,F,k,E-k,d),F=_=S=0,k=E;for(var me=0;me<286;++me)j[me]=0;for(var me=0;me<30;++me)I[me]=0}var pe=2,ne=0,Pe=h,Be=J-fe&32767;if(Ae>2&&D==b(E-Be))for(var O=Math.min(A,Ae)-1,G=Math.min(32767,E),q=Math.min(258,Ae);Be<=G&&--Pe&&J!=fe;){if(t[E+pe]==t[E+pe-Be]){for(var U=0;U<q&&t[E+U]==t[E+U-Be];++U);if(U>pe){if(pe=U,ne=Be,U>O)break;for(var Y=Math.min(Be,U-2),Z=0,me=0;me<Y;++me){var R=E-Be+me&32767,H=p[R],te=R-H&32767;te>Z&&(Z=te,fe=R)}}}J=fe,fe=p[J],Be+=J-fe&32767}if(ne){w[F++]=268435456|mk[pe]<<18|fQ[ne];var ye=mk[pe]&31,Q=fQ[ne]&31;S+=N6[ye]+C6[Q],++j[257+ye],++I[Q],P=E+pe,++_}else w[F++]=t[E],++j[t[E]]}}for(E=Math.max(E,P);E<o;++E)w[F++]=t[E],++j[t[E]];d=AQ(t,c,u,w,j,I,S,F,k,E-k,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=g,s.p=p,s.i=E,s.w=P)}else{for(var E=s.w||0;E<o+u;E+=65535){var Ge=E+65535;Ge>=o&&(c[d/8|0]=u,Ge=o),d=wte(c,d+1,t.subarray(E,Ge))}s.i=o}return rSe(l,0,n+bte(d)+a)},Cte=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},sSe=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Zd(s.length+t.length);o.set(s),o.set(t,s.length),t=o,a.w=s.length}return aSe(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},_te=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},iSe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=Cte();a.p(e.dictionary),_te(t,2,a.d())}};function xk(t,e){e||(e={});var r=Cte();r.p(t);var n=sSe(t,e,e.dictionary?6:2,4);return iSe(n,e),_te(n,n.length-4,r.d()),n}var oSe=typeof TextDecoder<"u"&&new TextDecoder,lSe=0;try{oSe.decode(Nte,{stream:!0}),lSe=1}catch{}function cSe(t){if(Array.isArray(t))return t}function uSe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function mQ(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function dSe(t,e){if(t){if(typeof t=="string")return mQ(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mQ(t,e):void 0}}function fSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pQ(t,e){return cSe(t)||uSe(t,e)||dSe(t,e)||fSe()}function gQ(t,e="utf8"){return new TextDecoder(e).decode(t)}const hSe=new TextEncoder;function ASe(t){return hSe.encode(t)}const mSe=1024*8,pSe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),R3={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class _6{constructor(e=mSe,r={}){fr(this,"buffer");fr(this,"byteLength");fr(this,"byteOffset");fr(this,"length");fr(this,"offset");fr(this,"lastWrittenByte");fr(this,"littleEndian");fr(this,"_data");fr(this,"_mark");fr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let o=a;(ArrayBuffer.isView(e)||e instanceof _6)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=R3[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===pSe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new R3[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new R3[r](s);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return gQ(this.readBytes(e))}decodeText(e=1,r="utf8"){return gQ(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(ASe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function i1(t){let e=t.length;for(;--e>=0;)t[e]=0}const gSe=3,xSe=258,Ete=29,vSe=256,ySe=vSe+1+Ete,Ste=30,bSe=512,wSe=new Array((ySe+2)*2);i1(wSe);const NSe=new Array(Ste*2);i1(NSe);const CSe=new Array(bSe);i1(CSe);const _Se=new Array(xSe-gSe+1);i1(_Se);const ESe=new Array(Ete);i1(ESe);const SSe=new Array(Ste);i1(SSe);const ISe=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+e[n++]|0,s=s+a|0;while(--o);a%=65521,s%=65521}return a|s<<16|0};var vk=ISe;const jSe=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},PSe=new Uint32Array(jSe()),BSe=(t,e,r,n)=>{const a=PSe,s=n+r;t^=-1;for(let o=n;o<s;o++)t=t>>>8^a[(t^e[o])&255];return t^-1};var gf=BSe,yk={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ite={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const TSe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var kSe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)TSe(r,n)&&(t[n]=r[n])}}return t},FSe=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let o=t[n];r.set(o,a),a+=o.length}return r},jte={assign:kSe,flattenChunks:FSe};let Pte=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Pte=!1}const x2=new Uint8Array(256);for(let t=0;t<256;t++)x2[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;x2[254]=x2[254]=1;var OSe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,o=t.length,l=0;for(a=0;a<o;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const DSe=(t,e)=>{if(e<65534&&t.subarray&&Pte)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var RSe=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let o=t[n++];if(o<128){s[a++]=o;continue}let l=x2[o];if(l>4){s[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){s[a++]=65533;continue}o<65536?s[a++]=o:(o-=65536,s[a++]=55296|o>>10&1023,s[a++]=56320|o&1023)}return DSe(s,a)},MSe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+x2[t[r]]>e?r:e},bk={string2buf:OSe,buf2string:RSe,utf8border:MSe};function LSe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var USe=LSe;const yC=16209,QSe=16191;var VSe=function(e,r){let n,a,s,o,l,c,u,d,f,A,h,m,p,g,v,y,b,w,j,I,_,S,E,F;const P=e.state;n=e.next_in,E=e.input,a=n+(e.avail_in-5),s=e.next_out,F=e.output,o=s-(r-e.avail_out),l=s+(e.avail_out-257),c=P.dmax,u=P.wsize,d=P.whave,f=P.wnext,A=P.window,h=P.hold,m=P.bits,p=P.lencode,g=P.distcode,v=(1<<P.lenbits)-1,y=(1<<P.distbits)-1;e:do{m<15&&(h+=E[n++]<<m,m+=8,h+=E[n++]<<m,m+=8),b=p[h&v];t:for(;;){if(w=b>>>24,h>>>=w,m-=w,w=b>>>16&255,w===0)F[s++]=b&65535;else if(w&16){j=b&65535,w&=15,w&&(m<w&&(h+=E[n++]<<m,m+=8),j+=h&(1<<w)-1,h>>>=w,m-=w),m<15&&(h+=E[n++]<<m,m+=8,h+=E[n++]<<m,m+=8),b=g[h&y];r:for(;;){if(w=b>>>24,h>>>=w,m-=w,w=b>>>16&255,w&16){if(I=b&65535,w&=15,m<w&&(h+=E[n++]<<m,m+=8,m<w&&(h+=E[n++]<<m,m+=8)),I+=h&(1<<w)-1,I>c){e.msg="invalid distance too far back",P.mode=yC;break e}if(h>>>=w,m-=w,w=s-o,I>w){if(w=I-w,w>d&&P.sane){e.msg="invalid distance too far back",P.mode=yC;break e}if(_=0,S=A,f===0){if(_+=u-w,w<j){j-=w;do F[s++]=A[_++];while(--w);_=s-I,S=F}}else if(f<w){if(_+=u+f-w,w-=f,w<j){j-=w;do F[s++]=A[_++];while(--w);if(_=0,f<j){w=f,j-=w;do F[s++]=A[_++];while(--w);_=s-I,S=F}}}else if(_+=f-w,w<j){j-=w;do F[s++]=A[_++];while(--w);_=s-I,S=F}for(;j>2;)F[s++]=S[_++],F[s++]=S[_++],F[s++]=S[_++],j-=3;j&&(F[s++]=S[_++],j>1&&(F[s++]=S[_++]))}else{_=s-I;do F[s++]=F[_++],F[s++]=F[_++],F[s++]=F[_++],j-=3;while(j>2);j&&(F[s++]=F[_++],j>1&&(F[s++]=F[_++]))}}else if(w&64){e.msg="invalid distance code",P.mode=yC;break e}else{b=g[(b&65535)+(h&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){P.mode=QSe;break e}else{e.msg="invalid literal/length code",P.mode=yC;break e}else{b=p[(b&65535)+(h&(1<<w)-1)];continue t}break}}while(n<a&&s<l);j=m>>3,n-=j,m-=j<<3,h&=(1<<m)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<l?257+(l-s):257-(s-l),P.hold=h,P.bits=m};const Jg=15,xQ=852,vQ=592,yQ=0,M3=1,bQ=2,HSe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$Se=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),GSe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),KSe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),qSe=(t,e,r,n,a,s,o,l)=>{const c=l.bits;let u=0,d=0,f=0,A=0,h=0,m=0,p=0,g=0,v=0,y=0,b,w,j,I,_,S=null,E;const F=new Uint16Array(Jg+1),P=new Uint16Array(Jg+1);let k=null,D,J,fe;for(u=0;u<=Jg;u++)F[u]=0;for(d=0;d<n;d++)F[e[r+d]]++;for(h=c,A=Jg;A>=1&&F[A]===0;A--);if(h>A&&(h=A),A===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<A&&F[f]===0;f++);for(h<f&&(h=f),g=1,u=1;u<=Jg;u++)if(g<<=1,g-=F[u],g<0)return-1;if(g>0&&(t===yQ||A!==1))return-1;for(P[1]=0,u=1;u<Jg;u++)P[u+1]=P[u]+F[u];for(d=0;d<n;d++)e[r+d]!==0&&(o[P[e[r+d]]++]=d);if(t===yQ?(S=k=o,E=20):t===M3?(S=HSe,k=$Se,E=257):(S=GSe,k=KSe,E=0),y=0,d=0,u=f,_=s,m=h,p=0,j=-1,v=1<<h,I=v-1,t===M3&&v>xQ||t===bQ&&v>vQ)return 1;for(;;){D=u-p,o[d]+1<E?(J=0,fe=o[d]):o[d]>=E?(J=k[o[d]-E],fe=S[o[d]-E]):(J=96,fe=0),b=1<<u-p,w=1<<m,f=w;do w-=b,a[_+(y>>p)+w]=D<<24|J<<16|fe|0;while(w!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,d++,--F[u]===0){if(u===A)break;u=e[r+o[d]]}if(u>h&&(y&I)!==j){for(p===0&&(p=h),_+=f,m=u-p,g=1<<m;m+p<A&&(g-=F[m+p],!(g<=0));)m++,g<<=1;if(v+=1<<m,t===M3&&v>xQ||t===bQ&&v>vQ)return 1;j=y&I,a[j]=h<<24|m<<16|_-s|0}}return y!==0&&(a[_+y]=u-p<<24|64<<16|0),l.bits=h,0};var gb=qSe;const zSe=0,Bte=1,Tte=2,{Z_FINISH:wQ,Z_BLOCK:WSe,Z_TREES:bC,Z_OK:Yp,Z_STREAM_END:XSe,Z_NEED_DICT:YSe,Z_STREAM_ERROR:cd,Z_DATA_ERROR:kte,Z_MEM_ERROR:Fte,Z_BUF_ERROR:JSe,Z_DEFLATED:NQ}=Ite,Hj=16180,CQ=16181,_Q=16182,EQ=16183,SQ=16184,IQ=16185,jQ=16186,PQ=16187,BQ=16188,TQ=16189,yS=16190,uh=16191,L3=16192,kQ=16193,U3=16194,FQ=16195,OQ=16196,DQ=16197,RQ=16198,wC=16199,NC=16200,MQ=16201,LQ=16202,UQ=16203,QQ=16204,VQ=16205,Q3=16206,HQ=16207,$Q=16208,ms=16209,Ote=16210,Dte=16211,ZSe=852,eIe=592,tIe=15,rIe=tIe,GQ=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function nIe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const bg=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Hj||e.mode>Dte?1:0},Rte=t=>{if(bg(t))return cd;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Hj,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(ZSe),e.distcode=e.distdyn=new Int32Array(eIe),e.sane=1,e.back=-1,Yp},Mte=t=>{if(bg(t))return cd;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Rte(t)},Lte=(t,e)=>{let r;if(bg(t))return cd;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?cd:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Mte(t))},Ute=(t,e)=>{if(!t)return cd;const r=new nIe;t.state=r,r.strm=t,r.window=null,r.mode=Hj;const n=Lte(t,e);return n!==Yp&&(t.state=null),n},aIe=t=>Ute(t,rIe);let KQ=!0,V3,H3;const sIe=t=>{if(KQ){V3=new Int32Array(512),H3=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(gb(Bte,t.lens,0,288,V3,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;gb(Tte,t.lens,0,32,H3,0,t.work,{bits:5}),KQ=!1}t.lencode=V3,t.lenbits=9,t.distcode=H3,t.distbits=5},Qte=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},iIe=(t,e)=>{let r,n,a,s,o,l,c,u,d,f,A,h,m,p,g=0,v,y,b,w,j,I,_,S;const E=new Uint8Array(4);let F,P;const k=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(bg(t)||!t.output||!t.input&&t.avail_in!==0)return cd;r=t.state,r.mode===uh&&(r.mode=L3),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,f=l,A=c,S=Yp;e:for(;;)switch(r.mode){case Hj:if(r.wrap===0){r.mode=L3;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,E[0]=u&255,E[1]=u>>>8&255,r.check=gf(r.check,E,2,0),u=0,d=0,r.mode=CQ;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=ms;break}if((u&15)!==NQ){t.msg="unknown compression method",r.mode=ms;break}if(u>>>=4,d-=4,_=(u&15)+8,r.wbits===0&&(r.wbits=_),_>15||_>r.wbits){t.msg="invalid window size",r.mode=ms;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?TQ:uh,u=0,d=0;break;case CQ:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==NQ){t.msg="unknown compression method",r.mode=ms;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=ms;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=gf(r.check,E,2,0)),u=0,d=0,r.mode=_Q;case _Q:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=gf(r.check,E,4,0)),u=0,d=0,r.mode=EQ;case EQ:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=gf(r.check,E,2,0)),u=0,d=0,r.mode=SQ;case SQ:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=gf(r.check,E,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=IQ;case IQ:if(r.flags&1024&&(h=r.length,h>l&&(h=l),h&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+h),_)),r.flags&512&&r.wrap&4&&(r.check=gf(r.check,n,h,s)),l-=h,s+=h,r.length-=h),r.length))break e;r.length=0,r.mode=jQ;case jQ:if(r.flags&2048){if(l===0)break e;h=0;do _=n[s+h++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_));while(_&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=gf(r.check,n,h,s)),l-=h,s+=h,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=PQ;case PQ:if(r.flags&4096){if(l===0)break e;h=0;do _=n[s+h++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_));while(_&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=gf(r.check,n,h,s)),l-=h,s+=h,_)break e}else r.head&&(r.head.comment=null);r.mode=BQ;case BQ:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=ms;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=uh;break;case TQ:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=GQ(u),u=0,d=0,r.mode=yS;case yS:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,YSe;t.adler=r.check=1,r.mode=uh;case uh:if(e===WSe||e===bC)break e;case L3:if(r.last){u>>>=d&7,d-=d&7,r.mode=Q3;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=kQ;break;case 1:if(sIe(r),r.mode=wC,e===bC){u>>>=2,d-=2;break e}break;case 2:r.mode=OQ;break;case 3:t.msg="invalid block type",r.mode=ms}u>>>=2,d-=2;break;case kQ:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ms;break}if(r.length=u&65535,u=0,d=0,r.mode=U3,e===bC)break e;case U3:r.mode=FQ;case FQ:if(h=r.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;a.set(n.subarray(s,s+h),o),l-=h,s+=h,c-=h,o+=h,r.length-=h;break}r.mode=uh;break;case OQ:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ms;break}r.have=0,r.mode=DQ;case DQ:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[k[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[k[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,F={bits:r.lenbits},S=gb(zSe,r.lens,0,19,r.lencode,0,r.work,F),r.lenbits=F.bits,S){t.msg="invalid code lengths set",r.mode=ms;break}r.have=0,r.mode=RQ;case RQ:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],v=g>>>24,y=g>>>16&255,b=g&65535,!(v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(b<16)u>>>=v,d-=v,r.lens[r.have++]=b;else{if(b===16){for(P=v+2;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=v,d-=v,r.have===0){t.msg="invalid bit length repeat",r.mode=ms;break}_=r.lens[r.have-1],h=3+(u&3),u>>>=2,d-=2}else if(b===17){for(P=v+3;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=v,d-=v,_=0,h=3+(u&7),u>>>=3,d-=3}else{for(P=v+7;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=v,d-=v,_=0,h=11+(u&127),u>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ms;break}for(;h--;)r.lens[r.have++]=_}}if(r.mode===ms)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=ms;break}if(r.lenbits=9,F={bits:r.lenbits},S=gb(Bte,r.lens,0,r.nlen,r.lencode,0,r.work,F),r.lenbits=F.bits,S){t.msg="invalid literal/lengths set",r.mode=ms;break}if(r.distbits=6,r.distcode=r.distdyn,F={bits:r.distbits},S=gb(Tte,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,F),r.distbits=F.bits,S){t.msg="invalid distances set",r.mode=ms;break}if(r.mode=wC,e===bC)break e;case wC:r.mode=NC;case NC:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,VSe(t,A),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===uh&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],v=g>>>24,y=g>>>16&255,b=g&65535,!(v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(y&&!(y&240)){for(w=v,j=y,I=b;g=r.lencode[I+((u&(1<<w+j)-1)>>w)],v=g>>>24,y=g>>>16&255,b=g&65535,!(w+v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=v,d-=v,r.back+=v,r.length=b,y===0){r.mode=VQ;break}if(y&32){r.back=-1,r.mode=uh;break}if(y&64){t.msg="invalid literal/length code",r.mode=ms;break}r.extra=y&15,r.mode=MQ;case MQ:if(r.extra){for(P=r.extra;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=LQ;case LQ:for(;g=r.distcode[u&(1<<r.distbits)-1],v=g>>>24,y=g>>>16&255,b=g&65535,!(v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(y&240)){for(w=v,j=y,I=b;g=r.distcode[I+((u&(1<<w+j)-1)>>w)],v=g>>>24,y=g>>>16&255,b=g&65535,!(w+v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=v,d-=v,r.back+=v,y&64){t.msg="invalid distance code",r.mode=ms;break}r.offset=b,r.extra=y&15,r.mode=UQ;case UQ:if(r.extra){for(P=r.extra;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ms;break}r.mode=QQ;case QQ:if(c===0)break e;if(h=A-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ms;break}h>r.wnext?(h-=r.wnext,m=r.wsize-h):m=r.wnext-h,h>r.length&&(h=r.length),p=r.window}else p=a,m=o-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do a[o++]=p[m++];while(--h);r.length===0&&(r.mode=NC);break;case VQ:if(c===0)break e;a[o++]=r.length,c--,r.mode=NC;break;case Q3:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(A-=c,t.total_out+=A,r.total+=A,r.wrap&4&&A&&(t.adler=r.check=r.flags?gf(r.check,a,A,o-A):vk(r.check,a,A,o-A)),A=c,r.wrap&4&&(r.flags?u:GQ(u))!==r.check){t.msg="incorrect data check",r.mode=ms;break}u=0,d=0}r.mode=HQ;case HQ:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=ms;break}u=0,d=0}r.mode=$Q;case $Q:S=XSe;break e;case ms:S=kte;break e;case Ote:return Fte;case Dte:default:return cd}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||A!==t.avail_out&&r.mode<ms&&(r.mode<Q3||e!==wQ))&&Qte(t,t.output,t.next_out,A-t.avail_out),f-=t.avail_in,A-=t.avail_out,t.total_in+=f,t.total_out+=A,r.total+=A,r.wrap&4&&A&&(t.adler=r.check=r.flags?gf(r.check,a,A,t.next_out-A):vk(r.check,a,A,t.next_out-A)),t.data_type=r.bits+(r.last?64:0)+(r.mode===uh?128:0)+(r.mode===wC||r.mode===U3?256:0),(f===0&&A===0||e===wQ)&&S===Yp&&(S=JSe),S},oIe=t=>{if(bg(t))return cd;let e=t.state;return e.window&&(e.window=null),t.state=null,Yp},lIe=(t,e)=>{if(bg(t))return cd;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Yp):cd},cIe=(t,e)=>{const r=e.length;let n,a,s;return bg(t)||(n=t.state,n.wrap!==0&&n.mode!==yS)?cd:n.mode===yS&&(a=1,a=vk(a,e,r,0),a!==n.check)?kte:(s=Qte(t,e,r,r),s?(n.mode=Ote,Fte):(n.havedict=1,Yp))};var uIe=Mte,dIe=Lte,fIe=Rte,hIe=aIe,AIe=Ute,mIe=iIe,pIe=oIe,gIe=lIe,xIe=cIe,vIe="pako inflate (from Nodeca project)",wh={inflateReset:uIe,inflateReset2:dIe,inflateResetKeep:fIe,inflateInit:hIe,inflateInit2:AIe,inflate:mIe,inflateEnd:pIe,inflateGetHeader:gIe,inflateSetDictionary:xIe,inflateInfo:vIe};function yIe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var bIe=yIe;const Vte=Object.prototype.toString,{Z_NO_FLUSH:wIe,Z_FINISH:NIe,Z_OK:v2,Z_STREAM_END:$3,Z_NEED_DICT:G3,Z_STREAM_ERROR:CIe,Z_DATA_ERROR:qQ,Z_MEM_ERROR:_Ie}=Ite;function Sw(t){this.options=jte.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new USe,this.strm.avail_out=0;let r=wh.inflateInit2(this.strm,e.windowBits);if(r!==v2)throw new Error(yk[r]);if(this.header=new bIe,wh.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=bk.string2buf(e.dictionary):Vte.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=wh.inflateSetDictionary(this.strm,e.dictionary),r!==v2)))throw new Error(yk[r])}Sw.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?NIe:wIe,Vte.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=wh.inflate(r,o),s===G3&&a&&(s=wh.inflateSetDictionary(r,a),s===v2?s=wh.inflate(r,o):s===qQ&&(s=G3));r.avail_in>0&&s===$3&&r.state.wrap>0&&t[r.next_in]!==0;)wh.inflateReset(r),s=wh.inflate(r,o);switch(s){case CIe:case qQ:case G3:case _Ie:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===$3))if(this.options.to==="string"){let c=bk.utf8border(r.output,r.next_out),u=r.next_out-c,d=bk.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===v2&&l===0)){if(s===$3)return s=wh.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Sw.prototype.onData=function(t){this.chunks.push(t)};Sw.prototype.onEnd=function(t){t===v2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=jte.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function EIe(t,e){const r=new Sw(e);if(r.push(t),r.err)throw r.msg||yk[r.err];return r.result}var SIe=Sw,IIe=EIe,jIe={Inflate:SIe,inflate:IIe};const{Inflate:PIe,inflate:BIe}=jIe;var zQ=PIe,TIe=BIe;const Hte=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;Hte[t]=e}const WQ=4294967295;function kIe(t,e,r){let n=t;for(let a=0;a<r;a++)n=Hte[(n^e[a])&255]^n>>>8;return n}function FIe(t,e){return(kIe(WQ,t,e)^WQ)>>>0}function XQ(t,e,r){const n=t.readUint32(),a=FIe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function $te(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function Gte(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function Kte(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function qte(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function zte(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+OIe(e[s-a],r[s],r[s-a])&255}}function OIe(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),o=Math.abs(n-r);return a<=s&&a<=o?t:s<=o?e:r}function DIe(t,e,r,n,a,s){switch(t){case 0:$te(e,r,a);break;case 1:Gte(e,r,a,s);break;case 2:Kte(e,r,n,a);break;case 3:qte(e,r,n,a,s);break;case 4:zte(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const RIe=new Uint16Array([255]),MIe=new Uint8Array(RIe.buffer),LIe=MIe[0]===255;function UIe(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=o[d],A=Math.ceil((r-f.x)/f.xStep),h=Math.ceil((n-f.y)/f.yStep);if(A<=0||h<=0)continue;const m=A*l,p=new Uint8Array(m);for(let g=0;g<h;g++){const v=e[u++],y=e.subarray(u,u+m);u+=m;const b=new Uint8Array(m);DIe(v,y,b,p,m,l),p.set(b);for(let w=0;w<A;w++){const j=f.x+w*f.xStep,I=f.y+g*f.yStep;if(!(j>=r||I>=n))for(let _=0;_<l;_++)c[(I*r+j)*l+_]=b[w*l+_]}}}if(s===16){const d=new Uint16Array(c.buffer);if(LIe)for(let f=0;f<d.length;f++)d[f]=QIe(d[f]);return d}else return c}function QIe(t){return(t&255)<<8|t>>8&255}const VIe=new Uint16Array([255]),HIe=new Uint8Array(VIe.buffer),$Ie=HIe[0]===255,GIe=new Uint8Array(0);function YQ(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=GIe,d=0,f,A;for(let h=0;h<n;h++){switch(f=e.subarray(d+1,d+1+l),A=c.subarray(h*l,(h+1)*l),e[d]){case 0:$te(f,A,l);break;case 1:Gte(f,A,l,o);break;case 2:Kte(f,A,u,l);break;case 3:qte(f,A,u,l,o);break;case 4:zte(f,A,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=A,d+=l+1}if(s===16){const h=new Uint16Array(c.buffer);if($Ie)for(let m=0;m<h.length;m++)h[m]=KIe(h[m]);return h}else return c}function KIe(t){return(t&255)<<8|t>>8&255}const aE=Uint8Array.of(137,80,78,71,13,10,26,10);function JQ(t){if(!qIe(t.readBytes(aE.length)))throw new Error("wrong PNG signature")}function qIe(t){if(t.length<aE.length)return!1;for(let e=0;e<aE.length;e++)if(t[e]!==aE[e])return!1;return!0}const zIe="tEXt",WIe=0,Wte=new TextDecoder("latin1");function XIe(t){if(JIe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const YIe=/^[\u0000-\u00FF]*$/;function JIe(t){if(!YIe.test(t))throw new Error("invalid latin1 text")}function ZIe(t,e,r){const n=Xte(e);t[n]=eje(e,r-n.length-1)}function Xte(t){for(t.mark();t.readByte()!==WIe;);const e=t.offset;t.reset();const r=Wte.decode(t.readBytes(e-t.offset-1));return t.skip(1),XIe(r),r}function eje(t,e){return Wte.decode(t.readBytes(e))}const qc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},K3={UNKNOWN:-1,DEFLATE:0},ZQ={UNKNOWN:-1,ADAPTIVE:0},q3={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},CC={NONE:0,BACKGROUND:1,PREVIOUS:2},z3={SOURCE:0,OVER:1};class tje extends _6{constructor(r,n={}){super(r);fr(this,"_checkCrc");fr(this,"_inflator");fr(this,"_png");fr(this,"_apng");fr(this,"_end");fr(this,"_hasPalette");fr(this,"_palette");fr(this,"_hasTransparency");fr(this,"_transparency");fr(this,"_compressionMethod");fr(this,"_filterMethod");fr(this,"_interlaceMethod");fr(this,"_colorType");fr(this,"_isAnimated");fr(this,"_numberOfFrames");fr(this,"_numberOfPlays");fr(this,"_frames");fr(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new zQ,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=K3.UNKNOWN,this._filterMethod=ZQ.UNKNOWN,this._interlaceMethod=q3.UNKNOWN,this._colorType=qc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(JQ(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(JQ(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case zIe:ZIe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?XQ(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?XQ(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=rje(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case qc.GREYSCALE:a=1;break;case qc.TRUECOLOUR:a=3;break;case qc.INDEXED_COLOUR:a=1;break;case qc.GREYSCALE_ALPHA:a=2;break;case qc.TRUECOLOUR_ALPHA:a=4;break;case qc.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==K3.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case qc.GREYSCALE:case qc.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case qc.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case qc.UNKNOWN:case qc.GREYSCALE_ALPHA:case qc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=Xte(this),a=this.readUint8();if(a!==K3.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:TIe(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=YQ({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case CC.NONE:break;case CC.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case CC.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case z3.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case z3.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,A=d%(this._png.channels-1)===0?1:n.data[u+d],h=Math.floor(f*A+(1-f)*r.data[c+d]);r.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==ZQ.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===q3.NO_INTERLACE)this._png.data=YQ({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===q3.ADAM7)this._png.data=UIe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:CC.NONE,blendOp:z3.SOURCE,data:r}),this._inflator=new zQ,this._writingDataChunks=!1}}function rje(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var eV;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(eV||(eV={}));function nje(t,e){return new tje(t,e).decode()}var gn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function W3(){gn.console&&typeof gn.console.log=="function"&&gn.console.log.apply(gn.console,arguments)}var Ha={log:W3,warn:function(t){gn.console&&(typeof gn.console.warn=="function"?gn.console.warn.apply(gn.console,arguments):W3.call(null,arguments))},error:function(t){gn.console&&(typeof gn.console.error=="function"?gn.console.error.apply(gn.console,arguments):W3(t))}};function X3(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){qm(n.response,e,r)},n.onerror=function(){Ha.error("could not download file")},n.send()}function tV(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function _C(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var qm=gn.saveAs||((typeof window>"u"?"undefined":ja(window))!=="object"||window!==gn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=gn.URL||gn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?tV(a.href)?X3(t,e,r):_C(a,a.target="_blank"):_C(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){_C(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(tV(t))X3(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){_C(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ja(s)!=="object"&&(Ha.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return X3(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(gn.HTMLElement)||gn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":ja(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=gn.URL||gn.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Yte(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var sE=gn.atob.bind(gn),rV=gn.btoa.bind(gn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Y3(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=Al(r,n,a,s,e[0],7,-680876936),s=Al(s,r,n,a,e[1],12,-389564586),a=Al(a,s,r,n,e[2],17,606105819),n=Al(n,a,s,r,e[3],22,-1044525330),r=Al(r,n,a,s,e[4],7,-176418897),s=Al(s,r,n,a,e[5],12,1200080426),a=Al(a,s,r,n,e[6],17,-1473231341),n=Al(n,a,s,r,e[7],22,-45705983),r=Al(r,n,a,s,e[8],7,1770035416),s=Al(s,r,n,a,e[9],12,-1958414417),a=Al(a,s,r,n,e[10],17,-42063),n=Al(n,a,s,r,e[11],22,-1990404162),r=Al(r,n,a,s,e[12],7,1804603682),s=Al(s,r,n,a,e[13],12,-40341101),a=Al(a,s,r,n,e[14],17,-1502002290),r=ml(r,n=Al(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=ml(s,r,n,a,e[6],9,-1069501632),a=ml(a,s,r,n,e[11],14,643717713),n=ml(n,a,s,r,e[0],20,-373897302),r=ml(r,n,a,s,e[5],5,-701558691),s=ml(s,r,n,a,e[10],9,38016083),a=ml(a,s,r,n,e[15],14,-660478335),n=ml(n,a,s,r,e[4],20,-405537848),r=ml(r,n,a,s,e[9],5,568446438),s=ml(s,r,n,a,e[14],9,-1019803690),a=ml(a,s,r,n,e[3],14,-187363961),n=ml(n,a,s,r,e[8],20,1163531501),r=ml(r,n,a,s,e[13],5,-1444681467),s=ml(s,r,n,a,e[2],9,-51403784),a=ml(a,s,r,n,e[7],14,1735328473),r=pl(r,n=ml(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=pl(s,r,n,a,e[8],11,-2022574463),a=pl(a,s,r,n,e[11],16,1839030562),n=pl(n,a,s,r,e[14],23,-35309556),r=pl(r,n,a,s,e[1],4,-1530992060),s=pl(s,r,n,a,e[4],11,1272893353),a=pl(a,s,r,n,e[7],16,-155497632),n=pl(n,a,s,r,e[10],23,-1094730640),r=pl(r,n,a,s,e[13],4,681279174),s=pl(s,r,n,a,e[0],11,-358537222),a=pl(a,s,r,n,e[3],16,-722521979),n=pl(n,a,s,r,e[6],23,76029189),r=pl(r,n,a,s,e[9],4,-640364487),s=pl(s,r,n,a,e[12],11,-421815835),a=pl(a,s,r,n,e[15],16,530742520),r=gl(r,n=pl(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=gl(s,r,n,a,e[7],10,1126891415),a=gl(a,s,r,n,e[14],15,-1416354905),n=gl(n,a,s,r,e[5],21,-57434055),r=gl(r,n,a,s,e[12],6,1700485571),s=gl(s,r,n,a,e[3],10,-1894986606),a=gl(a,s,r,n,e[10],15,-1051523),n=gl(n,a,s,r,e[1],21,-2054922799),r=gl(r,n,a,s,e[8],6,1873313359),s=gl(s,r,n,a,e[15],10,-30611744),a=gl(a,s,r,n,e[6],15,-1560198380),n=gl(n,a,s,r,e[13],21,1309151649),r=gl(r,n,a,s,e[4],6,-145523070),s=gl(s,r,n,a,e[11],10,-1120210379),a=gl(a,s,r,n,e[2],15,718787259),n=gl(n,a,s,r,e[9],21,-343485551),t[0]=j0(r,t[0]),t[1]=j0(n,t[1]),t[2]=j0(a,t[2]),t[3]=j0(s,t[3])}function $j(t,e,r,n,a,s){return e=j0(j0(e,t),j0(n,s)),j0(e<<a|e>>>32-a,r)}function Al(t,e,r,n,a,s,o){return $j(e&r|~e&n,t,e,a,s,o)}function ml(t,e,r,n,a,s,o){return $j(e&n|r&~n,t,e,a,s,o)}function pl(t,e,r,n,a,s,o){return $j(e^r^n,t,e,a,s,o)}function gl(t,e,r,n,a,s,o){return $j(r^(e|~n),t,e,a,s,o)}function Jte(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Y3(n,aje(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Y3(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,Y3(n,a),n}function aje(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var nV="0123456789abcdef".split("");function sje(t){for(var e="",r=0;r<4;r++)e+=nV[t>>8*r+4&15]+nV[t>>8*r&15];return e}function ije(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function wk(t){return Jte(t).map(ije).join("")}var oje=function(t){for(var e=0;e<t.length;e++)t[e]=sje(t[e]);return t.join("")}(Jte("hello"))!="5d41402abc4b2a76b9719d911017c592";function j0(t,e){if(oje){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Nk(t,e){var r,n,a,s;if(t!==r){for(var o=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var f=e.length,A=0,h=0,m="";for(c=0;c<f;c++)h=(h+(d=l[A=(A+1)%256]))%256,l[A]=l[h],l[h]=d,o=l[(l[A]+l[h])%256],m+=String.fromCharCode(e.charCodeAt(c)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var aV={print:4,modify:8,copy:16,"annot-forms":32};function bx(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(aV.perm!==void 0)throw new Error("Invalid permission: "+l);a+=aV[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=wk(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Nk(this.encryptionKey,this.padding)}function wx(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function sV(t){if(ja(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var o=e[r][s];try{o[0].apply(t,n)}catch(l){gn.console&&Ha.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function y2(t){if(!(this instanceof y2))return new y2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Zte(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function b0(t,e,r,n,a){if(!(this instanceof b0))return new b0(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Zte.call(this,n,a)}function up(t,e,r,n,a){if(!(this instanceof up))return new up(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Zte.call(this,n,a)}function Mr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;ja(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,A={},h={internal:{},__private__:{}};h.__private__.PubSub=sV;var m="1.3",p=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(V){m=V};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return g};var v=h.__private__.getPageFormat=function(V){return g[V]};a=a||"a4";var y="compat",b="advanced",w=y;function j(){this.saveGraphicsState(),ee(new Se(xe,0,0,-xe,0,Cu()*xe).toString()+" cm"),this.setFontSize(this.getFontSize()/xe),u="n",w=b}function I(){this.restoreGraphicsState(),u="S",w=y}var _=h.__private__.combineFontStyleAndFontWeight=function(V,Ce){if(V=="bold"&&Ce=="normal"||V=="bold"&&Ce==400||V=="normal"&&Ce=="italic"||V=="bold"&&Ce=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ce&&(V=Ce==400||Ce==="normal"?V==="italic"?"italic":"normal":Ce!=700&&Ce!=="bold"||V!=="normal"?(Ce==700?"bold":Ce)+""+V:"bold"),V};h.advancedAPI=function(V){var Ce=w===y;return Ce&&j.call(this),typeof V!="function"||(V(this),Ce&&I.call(this)),this},h.compatAPI=function(V){var Ce=w===b;return Ce&&I.call(this),typeof V!="function"||(V(this),Ce&&j.call(this)),this},h.isAdvancedAPI=function(){return w===b};var S,E=function(V){if(w!==b)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=h.roundToPrecision=h.__private__.roundToPrecision=function(V,Ce){var rt=e||Ce;if(isNaN(V)||isNaN(rt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(rt).replace(/0+$/,"")};S=h.hpf=h.__private__.hpf=typeof c=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return F(V,c)}:c==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return F(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return F(V,16)};var P=h.f2=h.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return F(V,2)},k=h.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return F(V,3)},D=h.scale=h.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?V*xe:w===b?V:void 0},J=function(V){return D(function(Ce){return w===y?Cu()-Ce:w===b?Ce:void 0}(V))};h.__private__.setPrecision=h.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(e=parseInt(V,10))};var fe,Ae="00000000000000000000000000000000",me=h.__private__.getFileId=function(){return Ae},pe=h.__private__.setFileId=function(V){return Ae=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():Ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&($t=new bx(d.userPermissions,d.userPassword,d.ownerPassword,Ae)),Ae};h.setFileId=function(V){return pe(V),this},h.getFileId=function(){return me()};var ne=h.__private__.convertDateToPDFDate=function(V){var Ce=V.getTimezoneOffset(),rt=Ce<0?"+":"-",vt=Math.floor(Math.abs(Ce/60)),jt=Math.abs(Ce%60),tr=[rt,q(vt),"'",q(jt),"'"].join("");return["D:",V.getFullYear(),q(V.getMonth()+1),q(V.getDate()),q(V.getHours()),q(V.getMinutes()),q(V.getSeconds()),tr].join("")},Pe=h.__private__.convertPDFDateToDate=function(V){var Ce=parseInt(V.substr(2,4),10),rt=parseInt(V.substr(6,2),10)-1,vt=parseInt(V.substr(8,2),10),jt=parseInt(V.substr(10,2),10),tr=parseInt(V.substr(12,2),10),or=parseInt(V.substr(14,2),10);return new Date(Ce,rt,vt,jt,tr,or,0)},Be=h.__private__.setCreationDate=function(V){var Ce;if(V===void 0&&(V=new Date),V instanceof Date)Ce=ne(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ce=V}return fe=Ce},O=h.__private__.getCreationDate=function(V){var Ce=fe;return V==="jsDate"&&(Ce=Pe(fe)),Ce};h.setCreationDate=function(V){return Be(V),this},h.getCreationDate=function(V){return O(V)};var G,q=h.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},U=h.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},Y=0,Z=[],R=[],H=0,te=[],ye=[],Q=!1,Ge=R;h.__private__.setCustomOutputDestination=function(V){Q=!0,Ge=V};var ie=function(V){Q||(Ge=V)};h.__private__.resetCustomOutputDestination=function(){Q=!1,Ge=R};var ee=h.__private__.out=function(V){return V=V.toString(),H+=V.length+1,Ge.push(V),Ge},Ie=h.__private__.write=function(V){return ee(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},ue=h.__private__.getArrayBuffer=function(V){for(var Ce=V.length,rt=new ArrayBuffer(Ce),vt=new Uint8Array(rt);Ce--;)vt[Ce]=V.charCodeAt(Ce);return rt},se=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return se};var Ee=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(V){return Ee=w===b?V/xe:V,this};var je,it=h.__private__.getFontSize=h.getFontSize=function(){return w===y?Ee:Ee*xe},At=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(V){return At=V,this},h.__private__.getR2L=h.getR2L=function(){return At};var pt,yt=h.__private__.setZoomMode=function(V){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))je=V;else if(isNaN(V)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');je=V}else je=parseInt(V,10)};h.__private__.getZoomMode=function(){return je};var Ct,Et=h.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');pt=V};h.__private__.getPageMode=function(){return pt};var Re=h.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');Ct=V};h.__private__.getLayoutMode=function(){return Ct},h.__private__.setDisplayMode=h.setDisplayMode=function(V,Ce,rt){return yt(V),Re(Ce),Et(rt),this};var We={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(V){if(Object.keys(We).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return We[V]},h.__private__.getDocumentProperties=function(){return We},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(V){for(var Ce in We)We.hasOwnProperty(Ce)&&V[Ce]&&(We[Ce]=V[Ce]);return this},h.__private__.setDocumentProperty=function(V,Ce){if(Object.keys(We).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return We[V]=Ce};var et,xe,de,Ue,Ke,Ne={},mt={},wt=[],we={},ae={},be={},ve={},Ve=null,ce=0,ke=[],dt=new sV(h),ft=t.hotfixes||[],gt={},Rt={},ot=[],Se=function V(Ce,rt,vt,jt,tr,or){if(!(this instanceof V))return new V(Ce,rt,vt,jt,tr,or);isNaN(Ce)&&(Ce=1),isNaN(rt)&&(rt=0),isNaN(vt)&&(vt=0),isNaN(jt)&&(jt=1),isNaN(tr)&&(tr=0),isNaN(or)&&(or=0),this._matrix=[Ce,rt,vt,jt,tr,or]};Object.defineProperty(Se.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Se.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Se.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Se.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Se.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Se.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Se.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Se.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Se.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Se.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Se.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Se.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Se.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Se.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Se.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Se.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Se.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(V)},Se.prototype.multiply=function(V){var Ce=V.sx*this.sx+V.shy*this.shx,rt=V.sx*this.shy+V.shy*this.sy,vt=V.shx*this.sx+V.sy*this.shx,jt=V.shx*this.shy+V.sy*this.sy,tr=V.tx*this.sx+V.ty*this.shx+this.tx,or=V.tx*this.shy+V.ty*this.sy+this.ty;return new Se(Ce,rt,vt,jt,tr,or)},Se.prototype.decompose=function(){var V=this.sx,Ce=this.shy,rt=this.shx,vt=this.sy,jt=this.tx,tr=this.ty,or=Math.sqrt(V*V+Ce*Ce),Rr=(V/=or)*rt+(Ce/=or)*vt;rt-=V*Rr,vt-=Ce*Rr;var Kr=Math.sqrt(rt*rt+vt*vt);return Rr/=Kr,V*(vt/=Kr)<Ce*(rt/=Kr)&&(V=-V,Ce=-Ce,Rr=-Rr,or=-or),{scale:new Se(or,0,0,Kr,0,0),translate:new Se(1,0,0,1,jt,tr),rotate:new Se(V,Ce,-Ce,V,0,0),skew:new Se(1,0,Rr,1,0,0)}},Se.prototype.toString=function(V){return this.join(" ")},Se.prototype.inversed=function(){var V=this.sx,Ce=this.shy,rt=this.shx,vt=this.sy,jt=this.tx,tr=this.ty,or=1/(V*vt-Ce*rt),Rr=vt*or,Kr=-Ce*or,dn=-rt*or,yn=V*or;return new Se(Rr,Kr,dn,yn,-Rr*jt-dn*tr,-Kr*jt-yn*tr)},Se.prototype.applyToPoint=function(V){var Ce=V.x*this.sx+V.y*this.shx+this.tx,rt=V.x*this.shy+V.y*this.sy+this.ty;return new wu(Ce,rt)},Se.prototype.applyToRectangle=function(V){var Ce=this.applyToPoint(V),rt=this.applyToPoint(new wu(V.x+V.w,V.y+V.h));return new PA(Ce.x,Ce.y,rt.x-Ce.x,rt.y-Ce.y)},Se.prototype.clone=function(){var V=this.sx,Ce=this.shy,rt=this.shx,vt=this.sy,jt=this.tx,tr=this.ty;return new Se(V,Ce,rt,vt,jt,tr)},h.Matrix=Se;var ht=h.matrixMult=function(V,Ce){return Ce.multiply(V)},W=new Se(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=W;var Te=function(V,Ce){if(!ae[V]){var rt=(Ce instanceof b0?"Sh":"P")+(Object.keys(we).length+1).toString(10);Ce.id=rt,ae[V]=rt,we[rt]=Ce,dt.publish("addPattern",Ce)}};h.ShadingPattern=b0,h.TilingPattern=up,h.addShadingPattern=function(V,Ce){return E("addShadingPattern()"),Te(V,Ce),this},h.beginTilingPattern=function(V){E("beginTilingPattern()"),uf(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},h.endTilingPattern=function(V,Ce){E("endTilingPattern()"),Ce.stream=ye[G].join(`
`),Te(V,Ce),dt.publish("endTilingPattern",Ce),ot.pop().restore()};var Ze,tt=h.__private__.newObject=function(){var V=ut();return T(V,!0),V},ut=h.__private__.newObjectDeferred=function(){return Y++,Z[Y]=function(){return H},Y},T=function(V,Ce){return Ce=typeof Ce=="boolean"&&Ce,Z[V]=H,Ce&&ee(V+" 0 obj"),V},M=h.__private__.newAdditionalObject=function(){var V={objId:ut(),content:""};return te.push(V),V},L=ut(),K=ut(),re=h.__private__.decodeColorString=function(V){var Ce=V.split(" ");if(Ce.length!==2||Ce[1]!=="g"&&Ce[1]!=="G")Ce.length!==5||Ce[4]!=="k"&&Ce[4]!=="K"||(Ce=[(1-Ce[0])*(1-Ce[3]),(1-Ce[1])*(1-Ce[3]),(1-Ce[2])*(1-Ce[3]),"r"]);else{var rt=parseFloat(Ce[0]);Ce=[rt,rt,rt,"r"]}for(var vt="#",jt=0;jt<3;jt++)vt+=("0"+Math.floor(255*parseFloat(Ce[jt])).toString(16)).slice(-2);return vt},le=h.__private__.encodeColorString=function(V){var Ce;typeof V=="string"&&(V={ch1:V});var rt=V.ch1,vt=V.ch2,jt=V.ch3,tr=V.ch4,or=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof rt=="string"&&rt.charAt(0)!=="#"){var Rr=new Yte(rt);if(Rr.ok)rt=Rr.toHex();else if(!/^\d*\.?\d*$/.test(rt))throw new Error('Invalid color "'+rt+'" passed to jsPDF.encodeColorString.')}if(typeof rt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(rt)&&(rt="#"+rt[1]+rt[1]+rt[2]+rt[2]+rt[3]+rt[3]),typeof rt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(rt)){var Kr=parseInt(rt.substr(1),16);rt=Kr>>16&255,vt=Kr>>8&255,jt=255&Kr}if(vt===void 0||tr===void 0&&rt===vt&&vt===jt)Ce=typeof rt=="string"?rt+" "+or[0]:V.precision===2?P(rt/255)+" "+or[0]:k(rt/255)+" "+or[0];else if(tr===void 0||ja(tr)==="object"){if(tr&&!isNaN(tr.a)&&tr.a===0)return["1.","1.","1.",or[1]].join(" ");Ce=typeof rt=="string"?[rt,vt,jt,or[1]].join(" "):V.precision===2?[P(rt/255),P(vt/255),P(jt/255),or[1]].join(" "):[k(rt/255),k(vt/255),k(jt/255),or[1]].join(" ")}else Ce=typeof rt=="string"?[rt,vt,jt,tr,or[2]].join(" "):V.precision===2?[P(rt),P(vt),P(jt),P(tr),or[2]].join(" "):[k(rt),k(vt),k(jt),k(tr),or[2]].join(" ");return Ce},Me=h.__private__.getFilters=function(){return o},qe=h.__private__.putStream=function(V){var Ce=(V=V||{}).data||"",rt=V.filters||Me(),vt=V.alreadyAppliedFilters||[],jt=V.addLength1||!1,tr=Ce.length,or=V.objectId,Rr=function(Ws){return Ws};if(d!==null&&or===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Rr=$t.encryptor(or,0));var Kr={};rt===!0&&(rt=["FlateEncode"]);var dn=V.additionalKeyValues||[],yn=(Kr=Mr.API.processDataByFilters!==void 0?Mr.API.processDataByFilters(Ce,rt):{data:Ce,reverseChain:[]}).reverseChain+(Array.isArray(vt)?vt.join(" "):vt.toString());if(Kr.data.length!==0&&(dn.push({key:"Length",value:Kr.data.length}),jt===!0&&dn.push({key:"Length1",value:tr})),yn.length!=0)if(yn.split("/").length-1==1)dn.push({key:"Filter",value:yn});else{dn.push({key:"Filter",value:"["+yn+"]"});for(var Un=0;Un<dn.length;Un+=1)if(dn[Un].key==="DecodeParms"){for(var ca=[],Is=0;Is<Kr.reverseChain.split("/").length-1;Is+=1)ca.push("null");ca.push(dn[Un].value),dn[Un].value="["+ca.join(" ")+"]"}}ee("<<");for(var xa=0;xa<dn.length;xa++)ee("/"+dn[xa].key+" "+dn[xa].value);ee(">>"),Kr.data.length!==0&&(ee("stream"),ee(Rr(Kr.data)),ee("endstream"))},lt=h.__private__.putPage=function(V){var Ce=V.number,rt=V.data,vt=V.objId,jt=V.contentsObjId;T(vt,!0),ee("<</Type /Page"),ee("/Parent "+V.rootDictionaryObjId+" 0 R"),ee("/Resources "+V.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(S(V.mediaBox.bottomLeftX))+" "+parseFloat(S(V.mediaBox.bottomLeftY))+" "+S(V.mediaBox.topRightX)+" "+S(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&ee("/CropBox ["+S(V.cropBox.bottomLeftX)+" "+S(V.cropBox.bottomLeftY)+" "+S(V.cropBox.topRightX)+" "+S(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&ee("/BleedBox ["+S(V.bleedBox.bottomLeftX)+" "+S(V.bleedBox.bottomLeftY)+" "+S(V.bleedBox.topRightX)+" "+S(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&ee("/TrimBox ["+S(V.trimBox.bottomLeftX)+" "+S(V.trimBox.bottomLeftY)+" "+S(V.trimBox.topRightX)+" "+S(V.trimBox.topRightY)+"]"),V.artBox!==null&&ee("/ArtBox ["+S(V.artBox.bottomLeftX)+" "+S(V.artBox.bottomLeftY)+" "+S(V.artBox.topRightX)+" "+S(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&ee("/UserUnit "+V.userUnit),dt.publish("putPage",{objId:vt,pageContext:ke[Ce],pageNumber:Ce,page:rt}),ee("/Contents "+jt+" 0 R"),ee(">>"),ee("endobj");var tr=rt.join(`
`);return w===b&&(tr+=`
Q`),T(jt,!0),qe({data:tr,filters:Me(),objectId:jt}),ee("endobj"),vt},Fe=h.__private__.putPages=function(){var V,Ce,rt=[];for(V=1;V<=ce;V++)ke[V].objId=ut(),ke[V].contentsObjId=ut();for(V=1;V<=ce;V++)rt.push(lt({number:V,data:ye[V],objId:ke[V].objId,contentsObjId:ke[V].contentsObjId,mediaBox:ke[V].mediaBox,cropBox:ke[V].cropBox,bleedBox:ke[V].bleedBox,trimBox:ke[V].trimBox,artBox:ke[V].artBox,userUnit:ke[V].userUnit,rootDictionaryObjId:L,resourceDictionaryObjId:K}));T(L,!0),ee("<</Type /Pages");var vt="/Kids [";for(Ce=0;Ce<ce;Ce++)vt+=rt[Ce]+" 0 R ";ee(vt+"]"),ee("/Count "+ce),ee(">>"),ee("endobj"),dt.publish("postPutPages")},Xe=function(V){dt.publish("putFont",{font:V,out:ee,newObject:tt,putStream:qe}),V.isAlreadyPutted!==!0&&(V.objectNumber=tt(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+wx(V.postScriptName)),ee("/Subtype /Type1"),typeof V.encoding=="string"&&ee("/Encoding /"+V.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},he=function(V){V.objectNumber=tt();var Ce=[];Ce.push({key:"Type",value:"/XObject"}),Ce.push({key:"Subtype",value:"/Form"}),Ce.push({key:"BBox",value:"["+[S(V.x),S(V.y),S(V.x+V.width),S(V.y+V.height)].join(" ")+"]"}),Ce.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var rt=V.pages[1].join(`
`);qe({data:rt,additionalKeyValues:Ce,objectId:V.objectNumber}),ee("endobj")},He=function(V,Ce){Ce||(Ce=21);var rt=tt(),vt=function(or,Rr){var Kr,dn=[],yn=1/(Rr-1);for(Kr=0;Kr<1;Kr+=yn)dn.push(Kr);if(dn.push(1),or[0].offset!=0){var Un={offset:0,color:or[0].color};or.unshift(Un)}if(or[or.length-1].offset!=1){var ca={offset:1,color:or[or.length-1].color};or.push(ca)}for(var Is="",xa=0,Ws=0;Ws<dn.length;Ws++){for(Kr=dn[Ws];Kr>or[xa+1].offset;)xa++;var js=or[xa].offset,Xs=(Kr-js)/(or[xa+1].offset-js),Ps=or[xa].color,uc=or[xa+1].color;Is+=U(Math.round((1-Xs)*Ps[0]+Xs*uc[0]).toString(16))+U(Math.round((1-Xs)*Ps[1]+Xs*uc[1]).toString(16))+U(Math.round((1-Xs)*Ps[2]+Xs*uc[2]).toString(16))}return Is.trim()}(V.colors,Ce),jt=[];jt.push({key:"FunctionType",value:"0"}),jt.push({key:"Domain",value:"[0.0 1.0]"}),jt.push({key:"Size",value:"["+Ce+"]"}),jt.push({key:"BitsPerSample",value:"8"}),jt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),jt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qe({data:vt,additionalKeyValues:jt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:rt}),ee("endobj"),V.objectNumber=tt(),ee("<< /ShadingType "+V.type),ee("/ColorSpace /DeviceRGB");var tr="/Coords ["+S(parseFloat(V.coords[0]))+" "+S(parseFloat(V.coords[1]))+" ";V.type===2?tr+=S(parseFloat(V.coords[2]))+" "+S(parseFloat(V.coords[3])):tr+=S(parseFloat(V.coords[2]))+" "+S(parseFloat(V.coords[3]))+" "+S(parseFloat(V.coords[4]))+" "+S(parseFloat(V.coords[5])),ee(tr+="]"),V.matrix&&ee("/Matrix ["+V.matrix.toString()+"]"),ee("/Function "+rt+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},Ye=function(V,Ce){var rt=ut(),vt=tt();Ce.push({resourcesOid:rt,objectOid:vt}),V.objectNumber=vt;var jt=[];jt.push({key:"Type",value:"/Pattern"}),jt.push({key:"PatternType",value:"1"}),jt.push({key:"PaintType",value:"1"}),jt.push({key:"TilingType",value:"1"}),jt.push({key:"BBox",value:"["+V.boundingBox.map(S).join(" ")+"]"}),jt.push({key:"XStep",value:S(V.xStep)}),jt.push({key:"YStep",value:S(V.yStep)}),jt.push({key:"Resources",value:rt+" 0 R"}),V.matrix&&jt.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),qe({data:V.stream,additionalKeyValues:jt,objectId:V.objectNumber}),ee("endobj")},ct=function(V){for(var Ce in V.objectNumber=tt(),ee("<<"),V)switch(Ce){case"opacity":ee("/ca "+P(V[Ce]));break;case"stroke-opacity":ee("/CA "+P(V[Ce]))}ee(">>"),ee("endobj")},Nt=function(V){T(V.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Ce in ee("/Font <<"),Ne)Ne.hasOwnProperty(Ce)&&(f===!1||f===!0&&A.hasOwnProperty(Ce))&&ee("/"+Ce+" "+Ne[Ce].objectNumber+" 0 R");ee(">>")}(),function(){if(Object.keys(we).length>0){for(var Ce in ee("/Shading <<"),we)we.hasOwnProperty(Ce)&&we[Ce]instanceof b0&&we[Ce].objectNumber>=0&&ee("/"+Ce+" "+we[Ce].objectNumber+" 0 R");dt.publish("putShadingPatternDict"),ee(">>")}}(),function(Ce){if(Object.keys(we).length>0){for(var rt in ee("/Pattern <<"),we)we.hasOwnProperty(rt)&&we[rt]instanceof h.TilingPattern&&we[rt].objectNumber>=0&&we[rt].objectNumber<Ce&&ee("/"+rt+" "+we[rt].objectNumber+" 0 R");dt.publish("putTilingPatternDict"),ee(">>")}}(V.objectOid),function(){if(Object.keys(be).length>0){var Ce;for(Ce in ee("/ExtGState <<"),be)be.hasOwnProperty(Ce)&&be[Ce].objectNumber>=0&&ee("/"+Ce+" "+be[Ce].objectNumber+" 0 R");dt.publish("putGStateDict"),ee(">>")}}(),function(){for(var Ce in ee("/XObject <<"),gt)gt.hasOwnProperty(Ce)&&gt[Ce].objectNumber>=0&&ee("/"+Ce+" "+gt[Ce].objectNumber+" 0 R");dt.publish("putXobjectDict"),ee(">>")}(),ee(">>"),ee("endobj")},It=function(V){mt[V.fontName]=mt[V.fontName]||{},mt[V.fontName][V.fontStyle]=V.id},hr=function(V,Ce,rt,vt,jt){var tr={id:"F"+(Object.keys(Ne).length+1).toString(10),postScriptName:V,fontName:Ce,fontStyle:rt,encoding:vt,isStandardFont:jt||!1,metadata:{}};return dt.publish("addFont",{font:tr,instance:this}),Ne[tr.id]=tr,It(tr),tr.id},Ot=h.__private__.pdfEscape=h.pdfEscape=function(V,Ce){return function(rt,vt){var jt,tr,or,Rr,Kr,dn,yn,Un,ca;if(or=(vt=vt||{}).sourceEncoding||"Unicode",Kr=vt.outputEncoding,(vt.autoencode||Kr)&&Ne[et].metadata&&Ne[et].metadata[or]&&Ne[et].metadata[or].encoding&&(Rr=Ne[et].metadata[or].encoding,!Kr&&Ne[et].encoding&&(Kr=Ne[et].encoding),!Kr&&Rr.codePages&&(Kr=Rr.codePages[0]),typeof Kr=="string"&&(Kr=Rr[Kr]),Kr)){for(yn=!1,dn=[],jt=0,tr=rt.length;jt<tr;jt++)(Un=Kr[rt.charCodeAt(jt)])?dn.push(String.fromCharCode(Un)):dn.push(rt[jt]),dn[jt].charCodeAt(0)>>8&&(yn=!0);rt=dn.join("")}for(jt=rt.length;yn===void 0&&jt!==0;)rt.charCodeAt(jt-1)>>8&&(yn=!0),jt--;if(!yn)return rt;for(dn=vt.noBOM?[]:[254,255],jt=0,tr=rt.length;jt<tr;jt++){if((ca=(Un=rt.charCodeAt(jt))>>8)>>8)throw new Error("Character at position "+jt+" of string '"+rt+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");dn.push(ca),dn.push(Un-(ca<<8))}return String.fromCharCode.apply(void 0,dn)}(V,Ce).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ft=h.__private__.beginPage=function(V){ye[++ce]=[],ke[ce]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},Pt(ce),ie(ye[G])},lr=function(V,Ce){var rt,vt,jt;switch(r=Ce||r,typeof V=="string"&&(rt=v(V.toLowerCase()),Array.isArray(rt)&&(vt=rt[0],jt=rt[1])),Array.isArray(V)&&(vt=V[0]*xe,jt=V[1]*xe),isNaN(vt)&&(vt=a[0],jt=a[1]),(vt>14400||jt>14400)&&(Ha.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),vt=Math.min(14400,vt),jt=Math.min(14400,jt)),a=[vt,jt],r.substr(0,1)){case"l":jt>vt&&(a=[jt,vt]);break;case"p":vt>jt&&(a=[jt,vt])}Ft(a),un(gd),ee(vd),Fa!==0&&ee(Fa+" J"),Sm!==0&&ee(Sm+" j"),dt.publish("addPage",{pageNumber:ce})},ir=function(V){V>0&&V<=ce&&(ye.splice(V,1),ke.splice(V,1),ce--,G>ce&&(G=ce),this.setPage(G))},Pt=function(V){V>0&&V<=ce&&(G=V)},mr=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return ye.length-1},Fr=function(V,Ce,rt){var vt,jt=void 0;return rt=rt||{},V=V!==void 0?V:Ne[et].fontName,Ce=Ce!==void 0?Ce:Ne[et].fontStyle,vt=V.toLowerCase(),mt[vt]!==void 0&&mt[vt][Ce]!==void 0?jt=mt[vt][Ce]:mt[V]!==void 0&&mt[V][Ce]!==void 0?jt=mt[V][Ce]:rt.disableWarning===!1&&Ha.warn("Unable to look up font label for font '"+V+"', '"+Ce+"'. Refer to getFontList() for available fonts."),jt||rt.noFallback||(jt=mt.times[Ce])==null&&(jt=mt.times.normal),jt},jr=h.__private__.putInfo=function(){var V=tt(),Ce=function(vt){return vt};for(var rt in d!==null&&(Ce=$t.encryptor(V,0)),ee("<<"),ee("/Producer ("+Ot(Ce("jsPDF "+Mr.version))+")"),We)We.hasOwnProperty(rt)&&We[rt]&&ee("/"+rt.substr(0,1).toUpperCase()+rt.substr(1)+" ("+Ot(Ce(We[rt]))+")");ee("/CreationDate ("+Ot(Ce(fe))+")"),ee(">>"),ee("endobj")},Qr=h.__private__.putCatalog=function(V){var Ce=(V=V||{}).rootDictionaryObjId||L;switch(tt(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+Ce+" 0 R"),je||(je="fullwidth"),je){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var rt=""+je;rt.substr(rt.length-1)==="%"&&(je=parseInt(je)/100),typeof je=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+P(je)+"]")}switch(Ct||(Ct="continuous"),Ct){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}pt&&ee("/PageMode /"+pt),dt.publish("putCatalog"),ee(">>"),ee("endobj")},Dr=h.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(Y+1)),ee("/Root "+Y+" 0 R"),ee("/Info "+(Y-1)+" 0 R"),d!==null&&ee("/Encrypt "+$t.oid+" 0 R"),ee("/ID [ <"+Ae+"> <"+Ae+"> ]"),ee(">>")},nn=h.__private__.putHeader=function(){ee("%PDF-"+m),ee("%")},zn=h.__private__.putXRef=function(){var V="0000000000";ee("xref"),ee("0 "+(Y+1)),ee("0000000000 65535 f ");for(var Ce=1;Ce<=Y;Ce++)typeof Z[Ce]=="function"?ee((V+Z[Ce]()).slice(-10)+" 00000 n "):Z[Ce]!==void 0?ee((V+Z[Ce]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},xt=h.__private__.buildDocument=function(){var V;Y=0,H=0,R=[],Z=[],te=[],L=ut(),K=ut(),ie(R),dt.publish("buildDocument"),nn(),Fe(),function(){dt.publish("putAdditionalObjects");for(var rt=0;rt<te.length;rt++){var vt=te[rt];T(vt.objId,!0),ee(vt.content),ee("endobj")}dt.publish("postPutAdditionalObjects")}(),V=[],function(){for(var rt in Ne)Ne.hasOwnProperty(rt)&&(f===!1||f===!0&&A.hasOwnProperty(rt))&&Xe(Ne[rt])}(),function(){var rt;for(rt in be)be.hasOwnProperty(rt)&&ct(be[rt])}(),function(){for(var rt in gt)gt.hasOwnProperty(rt)&&he(gt[rt])}(),function(rt){var vt;for(vt in we)we.hasOwnProperty(vt)&&(we[vt]instanceof b0?He(we[vt]):we[vt]instanceof up&&Ye(we[vt],rt))}(V),dt.publish("putResources"),V.forEach(Nt),Nt({resourcesOid:K,objectOid:Number.MAX_SAFE_INTEGER}),dt.publish("postPutResources"),d!==null&&($t.oid=tt(),ee("<<"),ee("/Filter /Standard"),ee("/V "+$t.v),ee("/R "+$t.r),ee("/U <"+$t.toHexString($t.U)+">"),ee("/O <"+$t.toHexString($t.O)+">"),ee("/P "+$t.P),ee(">>"),ee("endobj")),jr(),Qr();var Ce=H;return zn(),Dr(),ee("startxref"),ee(""+Ce),ee("%%EOF"),ie(ye[G]),R.join(`
`)},wr=h.__private__.getBlob=function(V){return new Blob([ue(V)],{type:"application/pdf"})},st=h.output=h.__private__.output=(Ze=function(V,Ce){switch(typeof(Ce=Ce||{})=="string"?Ce={filename:Ce}:Ce.filename=Ce.filename||"generated.pdf",V){case void 0:return xt();case"save":h.save(Ce.filename);break;case"arraybuffer":return ue(xt());case"blob":return wr(xt());case"bloburi":case"bloburl":if(gn.URL!==void 0&&typeof gn.URL.createObjectURL=="function")return gn.URL&&gn.URL.createObjectURL(wr(xt()))||void 0;Ha.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var rt="",vt=xt();try{rt=rV(vt)}catch{rt=rV(unescape(encodeURIComponent(vt)))}return"data:application/pdf;filename="+Ce.filename+";base64,"+rt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(gn)==="[object Window]"){var jt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",tr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ce.pdfObjectUrl&&(jt=Ce.pdfObjectUrl,tr="");var or='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+jt+'"'+tr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ce)+");<\/script></body></html>",Rr=gn.open();return Rr!==null&&Rr.document.write(or),Rr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(gn)==="[object Window]"){var Kr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ce.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ce.filename+'" width="500px" height="400px" /></body></html>',dn=gn.open();if(dn!==null){dn.document.write(Kr);var yn=this;dn.document.documentElement.querySelector("#pdfViewer").onload=function(){dn.document.title=Ce.filename,dn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(yn.output("bloburl"))}}return dn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(gn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Un='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ce)+'"></iframe></body></html>',ca=gn.open();if(ca!==null&&(ca.document.write(Un),ca.document.title=Ce.filename),ca||typeof safari>"u")return ca;break;case"datauri":case"dataurl":return gn.document.location.href=this.output("datauristring",Ce);default:return null}},Ze.foo=function(){try{return Ze.apply(this,arguments)}catch(rt){var V=rt.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var Ce="Error in function "+V.split(`
`)[0].split("<")[0]+": "+rt.message;if(!gn.console)throw new Error(Ce);gn.console.error(Ce,rt),gn.alert&&alert(Ce)}},Ze.foo.bar=Ze,Ze.foo),Mt=function(V){return Array.isArray(ft)===!0&&ft.indexOf(V)>-1};switch(n){case"pt":xe=1;break;case"mm":xe=72/25.4;break;case"cm":xe=72/2.54;break;case"in":xe=72;break;case"px":xe=Mt("px_scaling")==1?.75:96/72;break;case"pc":case"em":xe=12;break;case"ex":xe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xe=n}var $t=null;Be(),pe();var Dt=h.__private__.getPageInfo=h.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ke[V].objId,pageNumber:V,pageContext:ke[V]}},kt=h.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ce in ke)if(ke[Ce].objId===V)break;return Dt(Ce)},qt=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:ke[G].objId,pageNumber:G,pageContext:ke[G]}};h.addPage=function(){return lr.apply(this,arguments),this},h.setPage=function(){return Pt.apply(this,arguments),ie.call(this,ye[G]),this},h.insertPage=function(V){return this.addPage(),this.movePage(G,V),this},h.movePage=function(V,Ce){var rt,vt;if(V>Ce){rt=ye[V],vt=ke[V];for(var jt=V;jt>Ce;jt--)ye[jt]=ye[jt-1],ke[jt]=ke[jt-1];ye[Ce]=rt,ke[Ce]=vt,this.setPage(Ce)}else if(V<Ce){rt=ye[V],vt=ke[V];for(var tr=V;tr<Ce;tr++)ye[tr]=ye[tr+1],ke[tr]=ke[tr+1];ye[Ce]=rt,ke[Ce]=vt,this.setPage(Ce)}return this},h.deletePage=function(){return ir.apply(this,arguments),this},h.__private__.text=h.text=function(V,Ce,rt,vt,jt){var tr,or,Rr,Kr,dn,yn,Un,ca,Is,xa=(vt=vt||{}).scope||this;if(typeof V=="number"&&typeof Ce=="number"&&(typeof rt=="string"||Array.isArray(rt))){var Ws=rt;rt=Ce,Ce=V,V=Ws}if(arguments[3]instanceof Se==0?(Rr=arguments[4],Kr=arguments[5],ja(Un=arguments[3])==="object"&&Un!==null||(typeof Rr=="string"&&(Kr=Rr,Rr=null),typeof Un=="string"&&(Kr=Un,Un=null),typeof Un=="number"&&(Rr=Un,Un=null),vt={flags:Un,angle:Rr,align:Kr})):(E("The transform parameter of text() with a Matrix value"),Is=jt),isNaN(Ce)||isNaN(rt)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return xa;var js,Xs="",Ps=typeof vt.lineHeightFactor=="number"?vt.lineHeightFactor:Dc,uc=xa.internal.scaleFactor;function _u(ma){return ma=ma.split("	").join(Array(vt.TabLen||9).join(" ")),Ot(ma,Un)}function Eu(ma){for(var Ua,ci=ma.concat(),Ui=[],nh=ci.length;nh--;)typeof(Ua=ci.shift())=="string"?Ui.push(Ua):Array.isArray(ma)&&(Ua.length===1||Ua[1]===void 0&&Ua[2]===void 0)?Ui.push(Ua[0]):Ui.push([Ua[0],Ua[1],Ua[2]]);return Ui}function C(ma,Ua){var ci;if(typeof ma=="string")ci=Ua(ma)[0];else if(Array.isArray(ma)){for(var Ui,nh,k1=ma.concat(),Mg=[],cN=k1.length;cN--;)typeof(Ui=k1.shift())=="string"?Mg.push(Ua(Ui)[0]):Array.isArray(Ui)&&typeof Ui[0]=="string"&&(nh=Ua(Ui[0],Ui[1],Ui[2]),Mg.push([nh[0],nh[1],nh[2]]));ci=Mg}return ci}var X=!1,ge=!0;if(typeof V=="string")X=!0;else if(Array.isArray(V)){var $e=V.concat();or=[];for(var Bt,Kt=$e.length;Kt--;)(typeof(Bt=$e.shift())!="string"||Array.isArray(Bt)&&typeof Bt[0]!="string")&&(ge=!1);X=ge}if(X===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var yr=Ee/xa.internal.scaleFactor,Kn=yr*(Ps-1);switch(vt.baseline){case"bottom":rt-=Kn;break;case"top":rt+=yr-Kn;break;case"hanging":rt+=yr-2*Kn;break;case"middle":rt+=yr/2-Kn}if((yn=vt.maxWidth||0)>0&&(typeof V=="string"?V=xa.splitTextToSize(V,yn):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(ma,Ua){return ma.concat(xa.splitTextToSize(Ua,yn))},[]))),tr={text:V,x:Ce,y:rt,options:vt,mutex:{pdfEscape:Ot,activeFontKey:et,fonts:Ne,activeFontSize:Ee}},dt.publish("preProcessText",tr),V=tr.text,Rr=(vt=tr.options).angle,Is instanceof Se==0&&Rr&&typeof Rr=="number"){Rr*=Math.PI/180,vt.rotationDirection===0&&(Rr=-Rr),w===b&&(Rr=-Rr);var Bs=Math.cos(Rr),On=Math.sin(Rr);Is=new Se(Bs,On,-On,Bs,0,0)}else Rr&&Rr instanceof Se&&(Is=Rr);w!==b||Is||(Is=W),(dn=vt.charSpace||bu)!==void 0&&(Xs+=S(D(dn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ca=vt.horizontalScale)!==void 0&&(Xs+=S(100*ca)+` Tz
`),vt.lang;var na=-1,qa=vt.renderingMode!==void 0?vt.renderingMode:vt.stroke,Mc=xa.internal.getCurrentPageInfo().pageContext;switch(qa){case 0:case!1:case"fill":na=0;break;case 1:case!0:case"stroke":na=1;break;case 2:case"fillThenStroke":na=2;break;case 3:case"invisible":na=3;break;case 4:case"fillAndAddForClipping":na=4;break;case 5:case"strokeAndAddPathForClipping":na=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":na=6;break;case 7:case"addToPathForClipping":na=7}var cl=Mc.usedRenderingMode!==void 0?Mc.usedRenderingMode:-1;na!==-1?Xs+=na+` Tr
`:cl!==-1&&(Xs+=`0 Tr
`),na!==-1&&(Mc.usedRenderingMode=na),Kr=vt.align||"left";var Ro,yd=Ee*Ps,E1=xa.internal.pageSize.getWidth(),S1=Ne[et];dn=vt.charSpace||bu,yn=vt.maxWidth||0,Un=Object.assign({autoencode:!0,noBOM:!0},vt.flags);var TA=[],Pm=function(ma){return xa.getStringUnitWidth(ma,{font:S1,charSpace:dn,fontSize:Ee,doKerning:!1})*Ee/uc};if(Object.prototype.toString.call(V)==="[object Array]"){var Lc;or=Eu(V),Kr!=="left"&&(Ro=or.map(Pm));var Uc,kA=0;if(Kr==="right"){Ce-=Ro[0],V=[],Kt=or.length;for(var rh=0;rh<Kt;rh++)rh===0?(Uc=Ao(Ce),Lc=xd(rt)):(Uc=D(kA-Ro[rh]),Lc=-yd),V.push([or[rh],Uc,Lc]),kA=Ro[rh]}else if(Kr==="center"){Ce-=Ro[0]/2,V=[],Kt=or.length;for(var FA=0;FA<Kt;FA++)FA===0?(Uc=Ao(Ce),Lc=xd(rt)):(Uc=D((kA-Ro[FA])/2),Lc=-yd),V.push([or[FA],Uc,Lc]),kA=Ro[FA]}else if(Kr==="left"){V=[],Kt=or.length;for(var I1=0;I1<Kt;I1++)V.push(or[I1])}else if(Kr==="justify"&&S1.encoding==="Identity-H"){V=[],Kt=or.length,yn=yn!==0?yn:E1;for(var Rg=0,li=0;li<Kt;li++)if(Lc=li===0?xd(rt):-yd,Uc=li===0?Ao(Ce):Rg,li<Kt-1){var lN=D((yn-Ro[li])/(or[li].split(" ").length-1)),ff=or[li].split(" ");V.push([ff[0]+" ",Uc,Lc]),Rg=0;for(var hf=1;hf<ff.length;hf++){var j1=(Pm(ff[hf-1]+" "+ff[hf])-Pm(ff[hf]))*uc+lN;hf==ff.length-1?V.push([ff[hf],j1,0]):V.push([ff[hf]+" ",j1,0]),Rg-=j1}}else V.push([or[li],Uc,Lc]);V.push(["",Rg,0])}else{if(Kr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Kt=or.length,yn=yn!==0?yn:E1,li=0;li<Kt;li++){Lc=li===0?xd(rt):-yd,Uc=li===0?Ao(Ce):0;var P1=or[li].split(" ").length-1,B1=P1>0?(yn-Ro[li])/P1:0;li<Kt-1?TA.push(S(D(B1))):TA.push(0),V.push([or[li],Uc,Lc])}}}(typeof vt.R2L=="boolean"?vt.R2L:At)===!0&&(V=C(V,function(ma,Ua,ci){return[ma.split("").reverse().join(""),Ua,ci]})),tr={text:V,x:Ce,y:rt,options:vt,mutex:{pdfEscape:Ot,activeFontKey:et,fonts:Ne,activeFontSize:Ee}},dt.publish("postProcessText",tr),V=tr.text,js=tr.mutex.isHex||!1;var T1=Ne[et].encoding;T1!=="WinAnsiEncoding"&&T1!=="StandardEncoding"||(V=C(V,function(ma,Ua,ci){return[_u(ma),Ua,ci]})),or=Eu(V),V=[];for(var OA,DA,RA,Bm=Array.isArray(or[0])?1:0,MA="",Tm=function(ma,Ua,ci){var Ui="";return ci instanceof Se?(ci=typeof vt.angle=="number"?ht(ci,new Se(1,0,0,1,ma,Ua)):ht(new Se(1,0,0,1,ma,Ua),ci),w===b&&(ci=ht(new Se(1,0,0,-1,0,0),ci)),Ui=ci.join(" ")+` Tm
`):Ui=S(ma)+" "+S(Ua)+` Td
`,Ui},Su=0;Su<or.length;Su++){switch(MA="",Bm){case 1:RA=(js?"<":"(")+or[Su][0]+(js?">":")"),OA=parseFloat(or[Su][1]),DA=parseFloat(or[Su][2]);break;case 0:RA=(js?"<":"(")+or[Su]+(js?">":")"),OA=Ao(Ce),DA=xd(rt)}TA!==void 0&&TA[Su]!==void 0&&(MA=TA[Su]+` Tw
`),Su===0?V.push(MA+Tm(OA,DA,Is)+RA):Bm===0?V.push(MA+RA):Bm===1&&V.push(MA+Tm(OA,DA,Is)+RA)}V=Bm===0?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Af=`BT
/`;return Af+=et+" "+Ee+` Tf
`,Af+=S(Ee*Ps)+` TL
`,Af+=Rc+`
`,Af+=Xs,Af+=V,ee(Af+="ET"),A[et]=!0,xa};var Xt=h.__private__.clip=h.clip=function(V){return ee(V==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return Xt("evenodd")},h.__private__.discardPath=h.discardPath=function(){return ee("n"),this};var Wt=h.__private__.isValidStyle=function(V){var Ce=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(Ce=!0),Ce};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(V){return Wt(V)&&(u=V),this};var vr=h.__private__.getStyle=h.getStyle=function(V){var Ce=u;switch(V){case"D":case"S":Ce="S";break;case"F":Ce="f";break;case"FD":case"DF":Ce="B";break;case"f":case"f*":case"B":case"B*":Ce=V}return Ce},Nr=h.close=function(){return ee("h"),this};h.stroke=function(){return ee("S"),this},h.fill=function(V){return Vr("f",V),this},h.fillEvenOdd=function(V){return Vr("f*",V),this},h.fillStroke=function(V){return Vr("B",V),this},h.fillStrokeEvenOdd=function(V){return Vr("B*",V),this};var Vr=function(V,Ce){ja(Ce)==="object"?ts(Ce,V):ee(V)},Gn=function(V){V===null||w===b&&V===void 0||(V=vr(V),ee(V))};function qs(V,Ce,rt,vt,jt){var tr=new up(Ce||this.boundingBox,rt||this.xStep,vt||this.yStep,this.gState,jt||this.matrix);tr.stream=this.stream;var or=V+"$$"+this.cloneIndex+++"$$";return Te(or,tr),tr}var ts=function(V,Ce){var rt=ae[V.key],vt=we[rt];if(vt instanceof b0)ee("q"),ee(rs(Ce)),vt.gState&&h.setGState(vt.gState),ee(V.matrix.toString()+" cm"),ee("/"+rt+" sh"),ee("Q");else if(vt instanceof up){var jt=new Se(1,0,0,-1,0,Cu());V.matrix&&(jt=jt.multiply(V.matrix||W),rt=qs.call(vt,V.key,V.boundingBox,V.xStep,V.yStep,jt).id),ee("q"),ee("/Pattern cs"),ee("/"+rt+" scn"),vt.gState&&h.setGState(vt.gState),ee(Ce),ee("Q")}},rs=function(V){switch(V){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ml=h.moveTo=function(V,Ce){return ee(S(D(V))+" "+S(J(Ce))+" m"),this},yu=h.lineTo=function(V,Ce){return ee(S(D(V))+" "+S(J(Ce))+" l"),this},zs=h.curveTo=function(V,Ce,rt,vt,jt,tr){return ee([S(D(V)),S(J(Ce)),S(D(rt)),S(J(vt)),S(D(jt)),S(J(tr)),"c"].join(" ")),this};h.__private__.line=h.line=function(V,Ce,rt,vt,jt){if(isNaN(V)||isNaN(Ce)||isNaN(rt)||isNaN(vt)||!Wt(jt))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[rt-V,vt-Ce]],V,Ce,[1,1],jt||"S"):this.lines([[rt-V,vt-Ce]],V,Ce,[1,1]).stroke()},h.__private__.lines=h.lines=function(V,Ce,rt,vt,jt,tr){var or,Rr,Kr,dn,yn,Un,ca,Is,xa,Ws,js,Xs;if(typeof V=="number"&&(Xs=rt,rt=Ce,Ce=V,V=Xs),vt=vt||[1,1],tr=tr||!1,isNaN(Ce)||isNaN(rt)||!Array.isArray(V)||!Array.isArray(vt)||!Wt(jt)||typeof tr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ml(Ce,rt),or=vt[0],Rr=vt[1],dn=V.length,Ws=Ce,js=rt,Kr=0;Kr<dn;Kr++)(yn=V[Kr]).length===2?(Ws=yn[0]*or+Ws,js=yn[1]*Rr+js,yu(Ws,js)):(Un=yn[0]*or+Ws,ca=yn[1]*Rr+js,Is=yn[2]*or+Ws,xa=yn[3]*Rr+js,Ws=yn[4]*or+Ws,js=yn[5]*Rr+js,zs(Un,ca,Is,xa,Ws,js));return tr&&Nr(),Gn(jt),this},h.path=function(V){for(var Ce=0;Ce<V.length;Ce++){var rt=V[Ce],vt=rt.c;switch(rt.op){case"m":Ml(vt[0],vt[1]);break;case"l":yu(vt[0],vt[1]);break;case"c":zs.apply(this,vt);break;case"h":Nr()}}return this},h.__private__.rect=h.rect=function(V,Ce,rt,vt,jt){if(isNaN(V)||isNaN(Ce)||isNaN(rt)||isNaN(vt)||!Wt(jt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(vt=-vt),ee([S(D(V)),S(J(Ce)),S(D(rt)),S(D(vt)),"re"].join(" ")),Gn(jt),this},h.__private__.triangle=h.triangle=function(V,Ce,rt,vt,jt,tr,or){if(isNaN(V)||isNaN(Ce)||isNaN(rt)||isNaN(vt)||isNaN(jt)||isNaN(tr)||!Wt(or))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[rt-V,vt-Ce],[jt-rt,tr-vt],[V-jt,Ce-tr]],V,Ce,[1,1],or,!0),this},h.__private__.roundedRect=h.roundedRect=function(V,Ce,rt,vt,jt,tr,or){if(isNaN(V)||isNaN(Ce)||isNaN(rt)||isNaN(vt)||isNaN(jt)||isNaN(tr)||!Wt(or))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Rr=4/3*(Math.SQRT2-1);return jt=Math.min(jt,.5*rt),tr=Math.min(tr,.5*vt),this.lines([[rt-2*jt,0],[jt*Rr,0,jt,tr-tr*Rr,jt,tr],[0,vt-2*tr],[0,tr*Rr,-jt*Rr,tr,-jt,tr],[2*jt-rt,0],[-jt*Rr,0,-jt,-tr*Rr,-jt,-tr],[0,2*tr-vt],[0,-tr*Rr,jt*Rr,-tr,jt,-tr]],V+jt,Ce,[1,1],or,!0),this},h.__private__.ellipse=h.ellipse=function(V,Ce,rt,vt,jt){if(isNaN(V)||isNaN(Ce)||isNaN(rt)||isNaN(vt)||!Wt(jt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var tr=4/3*(Math.SQRT2-1)*rt,or=4/3*(Math.SQRT2-1)*vt;return Ml(V+rt,Ce),zs(V+rt,Ce-or,V+tr,Ce-vt,V,Ce-vt),zs(V-tr,Ce-vt,V-rt,Ce-or,V-rt,Ce),zs(V-rt,Ce+or,V-tr,Ce+vt,V,Ce+vt),zs(V+tr,Ce+vt,V+rt,Ce+or,V+rt,Ce),Gn(jt),this},h.__private__.circle=h.circle=function(V,Ce,rt,vt){if(isNaN(V)||isNaN(Ce)||isNaN(rt)||!Wt(vt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,Ce,rt,rt,vt)},h.setFont=function(V,Ce,rt){return rt&&(Ce=_(Ce,rt)),et=Fr(V,Ce,{disableWarning:!1}),this};var Ll=h.__private__.getFont=h.getFont=function(){return Ne[Fr.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var V,Ce,rt={};for(V in mt)if(mt.hasOwnProperty(V))for(Ce in rt[V]=[],mt[V])mt[V].hasOwnProperty(Ce)&&rt[V].push(Ce);return rt},h.addFont=function(V,Ce,rt,vt,jt){var tr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&tr.indexOf(arguments[3])!==-1?jt=arguments[3]:arguments[3]&&tr.indexOf(arguments[3])==-1&&(rt=_(rt,vt)),hr.call(this,V,Ce,rt,jt=jt||"Identity-H")};var Dc,gd=t.lineWidth||.200025,Fg=h.__private__.getLineWidth=h.getLineWidth=function(){return gd},un=h.__private__.setLineWidth=h.setLineWidth=function(V){return gd=V,ee(S(D(V))+" w"),this};h.__private__.setLineDash=Mr.API.setLineDash=Mr.API.setLineDashPattern=function(V,Ce){if(V=V||[],Ce=Ce||0,isNaN(Ce)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(rt){return S(D(rt))}).join(" "),Ce=S(D(Ce)),ee("["+V+"] "+Ce+" d"),this};var w1=h.__private__.getLineHeight=h.getLineHeight=function(){return Ee*Dc};h.__private__.getLineHeight=h.getLineHeight=function(){return Ee*Dc};var N1=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(Dc=V),this},C1=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Dc};N1(t.lineHeight);var Ao=h.__private__.getHorizontalCoordinate=function(V){return D(V)},xd=h.__private__.getVerticalCoordinate=function(V){return w===b?V:ke[G].mediaBox.topRightY-ke[G].mediaBox.bottomLeftY-D(V)},_1=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(V){return S(Ao(V))},IA=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(V){return S(xd(V))},vd=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return re(vd)},h.__private__.setStrokeColor=h.setDrawColor=function(V,Ce,rt,vt){return vd=le({ch1:V,ch2:Ce,ch3:rt,ch4:vt,pdfColorType:"draw",precision:2}),ee(vd),this};var jA=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return re(jA)},h.__private__.setFillColor=h.setFillColor=function(V,Ce,rt,vt){return jA=le({ch1:V,ch2:Ce,ch3:rt,ch4:vt,pdfColorType:"fill",precision:2}),ee(jA),this};var Rc=t.textColor||"0 g",eh=h.__private__.getTextColor=h.getTextColor=function(){return re(Rc)};h.__private__.setTextColor=h.setTextColor=function(V,Ce,rt,vt){return Rc=le({ch1:V,ch2:Ce,ch3:rt,ch4:vt,pdfColorType:"text",precision:3}),this};var bu=t.charSpace,Em=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(bu||0)};h.__private__.setCharSpace=h.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return bu=V,this};var Fa=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(V){var Ce=h.CapJoinStyles[V];if(Ce===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fa=Ce,ee(Ce+" J"),this};var Sm=0;h.__private__.setLineJoin=h.setLineJoin=function(V){var Ce=h.CapJoinStyles[V];if(Ce===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sm=Ce,ee(Ce+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(S(D(V))+" M"),this},h.GState=y2,h.setGState=function(V){(V=typeof V=="string"?be[ve[V]]:Og(null,V)).equals(Ve)||(ee("/"+V.id+" gs"),Ve=V)};var Og=function(V,Ce){if(!V||!ve[V]){var rt=!1;for(var vt in be)if(be.hasOwnProperty(vt)&&be[vt].equals(Ce)){rt=!0;break}if(rt)Ce=be[vt];else{var jt="GS"+(Object.keys(be).length+1).toString(10);be[jt]=Ce,Ce.id=jt}return V&&(ve[V]=Ce.id),dt.publish("addGState",Ce),Ce}};h.addGState=function(V,Ce){return Og(V,Ce),this},h.saveGraphicsState=function(){return ee("q"),wt.push({key:et,size:Ee,color:Rc}),this},h.restoreGraphicsState=function(){ee("Q");var V=wt.pop();return et=V.key,Ee=V.size,Rc=V.color,Ve=null,this},h.setCurrentTransformationMatrix=function(V){return ee(V.toString()+" cm"),this},h.comment=function(V){return ee("#"+V),this};var wu=function(V,Ce){var rt=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return rt},set:function(tr){isNaN(tr)||(rt=parseFloat(tr))}});var vt=Ce||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return vt},set:function(tr){isNaN(tr)||(vt=parseFloat(tr))}});var jt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return jt},set:function(tr){jt=tr.toString()}}),this},PA=function(V,Ce,rt,vt){wu.call(this,V,Ce),this.type="rect";var jt=rt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return jt},set:function(or){isNaN(or)||(jt=parseFloat(or))}});var tr=vt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return tr},set:function(or){isNaN(or)||(tr=parseFloat(or))}}),this},th=function(){this.page=ce,this.currentPage=G,this.pages=ye.slice(0),this.pagesContext=ke.slice(0),this.x=de,this.y=Ue,this.matrix=Ke,this.width=Ul(G),this.height=Dg(G),this.outputDestination=Ge,this.id="",this.objectNumber=-1};th.prototype.restore=function(){ce=this.page,G=this.currentPage,ke=this.pagesContext,ye=this.pages,de=this.x,Ue=this.y,Ke=this.matrix,Im(G,this.width),Ql(G,this.height),Ge=this.outputDestination};var uf=function(V,Ce,rt,vt,jt){ot.push(new th),ce=G=0,ye=[],de=V,Ue=Ce,Ke=jt,Ft([rt,vt])};for(var df in h.beginFormObject=function(V,Ce,rt,vt,jt){return uf(V,Ce,rt,vt,jt),this},h.endFormObject=function(V){return function(Ce){if(Rt[Ce])ot.pop().restore();else{var rt=new th,vt="Xo"+(Object.keys(gt).length+1).toString(10);rt.id=vt,Rt[Ce]=vt,gt[vt]=rt,dt.publish("addFormObject",rt),ot.pop().restore()}}(V),this},h.doFormObject=function(V,Ce){var rt=gt[Rt[V]];return ee("q"),ee(Ce.toString()+" cm"),ee("/"+rt.id+" Do"),ee("Q"),this},h.getFormObject=function(V){var Ce=gt[Rt[V]];return{x:Ce.x,y:Ce.y,width:Ce.width,height:Ce.height,matrix:Ce.matrix}},h.save=function(V,Ce){return V=V||"generated.pdf",(Ce=Ce||{}).returnPromise=Ce.returnPromise||!1,Ce.returnPromise===!1?(qm(wr(xt()),V),typeof qm.unload=="function"&&gn.setTimeout&&setTimeout(qm.unload,911),this):new Promise(function(rt,vt){try{var jt=qm(wr(xt()),V);typeof qm.unload=="function"&&gn.setTimeout&&setTimeout(qm.unload,911),rt(jt)}catch(tr){vt(tr.message)}})},Mr.API)Mr.API.hasOwnProperty(df)&&(df==="events"&&Mr.API.events.length?function(V,Ce){var rt,vt,jt;for(jt=Ce.length-1;jt!==-1;jt--)rt=Ce[jt][0],vt=Ce[jt][1],V.subscribe.apply(V,[rt].concat(typeof vt=="function"?[vt]:vt))}(dt,Mr.API.events):h[df]=Mr.API[df]);function Ul(V){return ke[V].mediaBox.topRightX-ke[V].mediaBox.bottomLeftX}function Im(V,Ce){ke[V].mediaBox.topRightX=Ce+ke[V].mediaBox.bottomLeftX}function Dg(V){return ke[V].mediaBox.topRightY-ke[V].mediaBox.bottomLeftY}function Ql(V,Ce){ke[V].mediaBox.topRightY=Ce+ke[V].mediaBox.bottomLeftY}var Nu=h.getPageWidth=function(V){return Ul(V=V||G)/xe},BA=h.setPageWidth=function(V,Ce){Im(V,Ce*xe)},Cu=h.getPageHeight=function(V){return Dg(V=V||G)/xe},jm=h.setPageHeight=function(V,Ce){Ql(V,Ce*xe)};return h.internal={pdfEscape:Ot,getStyle:vr,getFont:Ll,getFontSize:it,getCharSpace:Em,getTextColor:eh,getLineHeight:w1,getLineHeightFactor:C1,getLineWidth:Fg,write:Ie,getHorizontalCoordinate:Ao,getVerticalCoordinate:xd,getCoordinateString:_1,getVerticalCoordinateString:IA,collections:{},newObject:tt,newAdditionalObject:M,newObjectDeferred:ut,newObjectDeferredBegin:T,getFilters:Me,putStream:qe,events:dt,scaleFactor:xe,pageSize:{getWidth:function(){return Nu(G)},setWidth:function(V){BA(G,V)},getHeight:function(){return Cu(G)},setHeight:function(V){jm(G,V)}},encryptionOptions:d,encryption:$t,getEncryptor:function(V){return d!==null?$t.encryptor(V,0):function(Ce){return Ce}},output:st,getNumberOfPages:mr,get pages(){return ye},out:ee,f2:P,f3:k,getPageInfo:Dt,getPageInfoByObjId:kt,getCurrentPageInfo:qt,getPDFVersion:p,Point:wu,Rectangle:PA,Matrix:Se,hasHotfix:Mt},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Nu(G)},set:function(V){BA(G,V)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Cu(G)},set:function(V){jm(G,V)},enumerable:!0,configurable:!0}),(function(V){for(var Ce=0,rt=se.length;Ce<rt;Ce++){var vt=hr.call(this,V[Ce][0],V[Ce][1],V[Ce][2],se[Ce][3],!0);f===!1&&(A[vt]=!0);var jt=V[Ce][0].split("-");It({id:vt,fontName:jt[0],fontStyle:jt[1]||""})}dt.publish("addFonts",{fonts:Ne,dictionary:mt})}).call(h,se),et="F1",lr(a,r),dt.publish("initialized"),h}bx.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},bx.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},bx.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},bx.prototype.processOwnerPassword=function(t,e){return Nk(wk(e).substr(0,5),t)},bx.prototype.encryptor=function(t,e){var r=wk(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Nk(r,n)}},y2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||ja(t)!==ja(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Mr.API={events:[]},Mr.version="3.0.4";var ei=Mr.API,E6=1,wg=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zg=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},wn=function(t){return t.toFixed(2)},YA=function(t){return t.toFixed(5)};ei.__acroform__={};var Bc=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},iV=function(t){return t*E6},bf=function(t){var e=new tre,r=$r.internal.getHeight(t)||0,n=$r.internal.getWidth(t)||0;return e.BBox=[0,0,Number(wn(n)),Number(wn(r))],e},lje=ei.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},cje=ei.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},uje=ei.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},vi=ei.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return uje(t,e-1)},yi=ei.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return lje(t,e-1)},bi=ei.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return cje(t,e-1)},dje=ei.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(wn(c.lowerLeft_X)),Number(wn(c.lowerLeft_Y)),Number(wn(c.upperRight_X)),Number(wn(c.upperRight_Y))]},fje=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Ck(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+wn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=bf(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Ck=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var s=r,o=$r.internal.getHeight(t)||0;o=o<0?-o:o;var l=$r.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(P,k,D){if(P+1<a.length){var J=k+" "+a[P+1][0];return EC(J,t,D).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,f=EC("3",t,s).height,A=t.multiline?o-s:(o-f)/2,h=A+=2,m=0,p=0,g=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+EC(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var v="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(a[b].length!==1&&g!==a[b].length-1){if((f+2)*(y+2)+2>o)continue e;v+=a[b][g],w=!0,p=b,b--}else{v=(v+=a[b][g]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var j=parseInt(b),I=c(j,v,s),_=b>=a.length-1;if(I&&!_){v+=" ",g=0;continue}if(I||_){if(_)p=j;else if(t.multiline&&(f+2)*(y+2)+2>o)continue e}else{if(!t.multiline||(f+2)*(y+2)+2>o)continue e;p=j}}for(var S="",E=m;E<=p;E++){var F=a[E];if(t.multiline){if(E===p){S+=F[g]+" ",g=(g+1)%F.length;continue}if(E===m){S+=F[F.length-1]+" ";continue}}S+=F[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=EC(S,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=wn(u)+" "+wn(h)+` Td
`,e+="("+wg(S)+`) Tj
`,e+=-wn(u)+` 0 Td
`,h=-(s+2),d=0,m=w?p:p+1,y++,v=""}break}return n.text=e,n.fontSize=s,n},EC=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},hje={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Aje=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},mje=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(of.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(hje)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");E6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new rre,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&Aje(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=dje(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=$r.createDefaultAppearanceStream(l),ja(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=fje(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var A in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(A)){var h=l.appearanceStreamContent[A];if(f+="/"+A+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var m=h[o];typeof m=="function"&&(m=m.call(a,l)),f+="/"+o+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(a,l)),f+="/"+o+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(p,g){for(var v in p)if(p.hasOwnProperty(v)){var y=v,b=p[v];g.internal.newObjectDeferredBegin(b.objId,!0),ja(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete p[y]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},ere=ei.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),ja(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+wg(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},J3=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+wg(n(t))+")"},Bf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Bf.prototype.toString=function(){return this.objId+" 0 R"},Bf.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Bf.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:ere(a,this.objId,this.scope)}):a instanceof Bf?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var tre=function(){Bf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Bc(tre,Bf);var rre=function(){Bf.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+wg(r(t))+")"}},set:function(r){t=r}})};Bc(rre,Bf);var of=function t(){Bf.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!vi(e,3)},set:function(v){v?this.F=yi(e,3):this.F=bi(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof bS)return;s="FieldObject"+t.FieldNum++}var v=function(y){return y};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+wg(v(s))+")"},set:function(v){s=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(v){s=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/E6:u},set:function(v){u=v}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(v){d=v}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof bS||this instanceof q0))return J3(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=v}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof Xi==0?J3(A,this.objId,this.scope):A},set:function(v){v=v.toString(),A=this instanceof Xi==0?v.substr(0,1)==="("?Zg(v.substr(1,v.length-2)):Zg(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xi==1?Zg(A.substr(1,A.length-1)):A},set:function(v){v=v.toString(),A=this instanceof Xi==1?"/"+v:v}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Xi==0?J3(h,this.objId,this.scope):h},set:function(v){v=v.toString(),h=this instanceof Xi==0?v.substr(0,1)==="("?Zg(v.substr(1,v.length-2)):Zg(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xi==1?Zg(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof Xi==1?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(v){v=!!v,p=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(v){m=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,1)},set:function(v){v?this.Ff=yi(this.Ff,1):this.Ff=bi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,2)},set:function(v){v?this.Ff=yi(this.Ff,2):this.Ff=bi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,3)},set:function(v){v?this.Ff=yi(this.Ff,3):this.Ff=bi(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');g=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(g){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Bc(of,Bf);var wp=function(){of.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ere(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,18)},set:function(r){r?this.Ff=yi(this.Ff,18):this.Ff=bi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=yi(this.Ff,19):this.Ff=bi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,20)},set:function(r){r?(this.Ff=yi(this.Ff,20),e.sort()):this.Ff=bi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,22)},set:function(r){r?this.Ff=yi(this.Ff,22):this.Ff=bi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,23)},set:function(r){r?this.Ff=yi(this.Ff,23):this.Ff=bi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,27)},set:function(r){r?this.Ff=yi(this.Ff,27):this.Ff=bi(this.Ff,27)}}),this.hasAppearanceStream=!1};Bc(wp,of);var Np=function(){wp.call(this),this.fontName="helvetica",this.combo=!1};Bc(Np,wp);var Cp=function(){Np.call(this),this.combo=!0};Bc(Cp,Np);var xb=function(){Cp.call(this),this.edit=!0};Bc(xb,Cp);var Xi=function(){of.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,15)},set:function(r){r?this.Ff=yi(this.Ff,15):this.Ff=bi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,16)},set:function(r){r?this.Ff=yi(this.Ff,16):this.Ff=bi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,17)},set:function(r){r?this.Ff=yi(this.Ff,17):this.Ff=bi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,26)},set:function(r){r?this.Ff=yi(this.Ff,26):this.Ff=bi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+wg(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ja(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Bc(Xi,of);var vb=function(){Xi.call(this),this.pushButton=!0};Bc(vb,Xi);var _p=function(){Xi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Bc(_p,Xi);var bS=function(){var t,e;of.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+wg(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){ja(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=$r.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Bc(bS,of),_p.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},_p.prototype.createOption=function(t){var e=new bS;return e.Parent=this,e.optionName=t,this.Kids.push(e),pje.call(this.scope,e),e};var yb=function(){Xi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=$r.CheckBox.createAppearanceStream()};Bc(yb,Xi);var q0=function(){of.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,13)},set:function(e){e?this.Ff=yi(this.Ff,13):this.Ff=bi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,21)},set:function(e){e?this.Ff=yi(this.Ff,21):this.Ff=bi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,23)},set:function(e){e?this.Ff=yi(this.Ff,23):this.Ff=bi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,24)},set:function(e){e?this.Ff=yi(this.Ff,24):this.Ff=bi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,25)},set:function(e){e?this.Ff=yi(this.Ff,25):this.Ff=bi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,26)},set:function(e){e?this.Ff=yi(this.Ff,26):this.Ff=bi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Bc(q0,of);var bb=function(){q0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,14)},set:function(t){t?this.Ff=yi(this.Ff,14):this.Ff=bi(this.Ff,14)}}),this.password=!0};Bc(bb,q0);var $r={CheckBox:{createAppearanceStream:function(){return{N:{On:$r.CheckBox.YesNormal},D:{On:$r.CheckBox.YesPushDown,Off:$r.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=bf(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=Ck(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+wn($r.internal.getWidth(t))+" "+wn($r.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+wn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=bf(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=$r.internal.getHeight(t),o=$r.internal.getWidth(t),l=Ck(t,t.caption);return a.push("1 g"),a.push("0 0 "+wn(o)+" "+wn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+wn(o-1)+" "+wn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+wn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=bf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+wn($r.internal.getWidth(t))+" "+wn($r.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:$r.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=$r.RadioButton.Circle.YesNormal,e.D[t]=$r.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=bf(t);e.scope=t.scope;var r=[],n=$r.internal.getWidth(t)<=$r.internal.getHeight(t)?$r.internal.getWidth(t)/4:$r.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=$r.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+YA($r.internal.getWidth(t)/2)+" "+YA($r.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=bf(t);e.scope=t.scope;var r=[],n=$r.internal.getWidth(t)<=$r.internal.getHeight(t)?$r.internal.getWidth(t)/4:$r.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*$r.internal.Bezier_C).toFixed(5)),o=Number((n*$r.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+YA($r.internal.getWidth(t)/2)+" "+YA($r.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+YA($r.internal.getWidth(t)/2)+" "+YA($r.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=bf(t);e.scope=t.scope;var r=[],n=$r.internal.getWidth(t)<=$r.internal.getHeight(t)?$r.internal.getWidth(t)/4:$r.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*$r.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+YA($r.internal.getWidth(t)/2)+" "+YA($r.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:$r.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=$r.RadioButton.Cross.YesNormal,e.D[t]=$r.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=bf(t);e.scope=t.scope;var r=[],n=$r.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+wn($r.internal.getWidth(t)-2)+" "+wn($r.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(wn(n.x1.x)+" "+wn(n.x1.y)+" m"),r.push(wn(n.x2.x)+" "+wn(n.x2.y)+" l"),r.push(wn(n.x4.x)+" "+wn(n.x4.y)+" m"),r.push(wn(n.x3.x)+" "+wn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=bf(t);e.scope=t.scope;var r=$r.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+wn($r.internal.getWidth(t))+" "+wn($r.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+wn($r.internal.getWidth(t)-2)+" "+wn($r.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(wn(r.x1.x)+" "+wn(r.x1.y)+" m"),n.push(wn(r.x2.x)+" "+wn(r.x2.y)+" l"),n.push(wn(r.x4.x)+" "+wn(r.x4.y)+" m"),n.push(wn(r.x3.x)+" "+wn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=bf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+wn($r.internal.getWidth(t))+" "+wn($r.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};$r.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=$r.internal.getWidth(t),r=$r.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},$r.internal.getWidth=function(t){var e=0;return ja(t)==="object"&&(e=iV(t.Rect[2])),e},$r.internal.getHeight=function(t){var e=0;return ja(t)==="object"&&(e=iV(t.Rect[3])),e};var pje=ei.addField=function(t){if(mje(this,t),!(t instanceof of))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ei.AcroFormChoiceField=wp,ei.AcroFormListBox=Np,ei.AcroFormComboBox=Cp,ei.AcroFormEditBox=xb,ei.AcroFormButton=Xi,ei.AcroFormPushButton=vb,ei.AcroFormRadioButton=_p,ei.AcroFormCheckBox=yb,ei.AcroFormTextField=q0,ei.AcroFormPasswordField=bb,ei.AcroFormAppearance=$r,ei.AcroForm={ChoiceField:wp,ListBox:Np,ComboBox:Cp,EditBox:xb,Button:Xi,PushButton:vb,RadioButton:_p,CheckBox:yb,TextField:q0,PasswordField:bb,Appearance:$r},Mr.AcroForm={ChoiceField:wp,ListBox:Np,ComboBox:Cp,EditBox:xb,Button:Xi,PushButton:vb,RadioButton:_p,CheckBox:yb,TextField:q0,PasswordField:bb,Appearance:$r};var gje=Mr.AcroForm;function nre(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(P,k){var D,J,fe,Ae,me,pe=r;if((k=k||r)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(I(P))for(me in n)for(fe=n[me],D=0;D<fe.length;D+=1){for(Ae=!0,J=0;J<fe[D].length;J+=1)if(fe[D][J]!==void 0&&fe[D][J]!==P[J]){Ae=!1;break}if(Ae===!0){pe=me;break}}else for(me in n)for(fe=n[me],D=0;D<fe.length;D+=1){for(Ae=!0,J=0;J<fe[D].length;J+=1)if(fe[D][J]!==void 0&&fe[D][J]!==P.charCodeAt(J)){Ae=!1;break}if(Ae===!0){pe=me;break}}return pe===r&&k!==r&&(pe=k),pe},s=function P(k){for(var D=this.internal.write,J=this.internal.putStream,fe=(0,this.internal.getFilters)();fe.indexOf("FlateEncode")!==-1;)fe.splice(fe.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var Ae=[];if(Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Image"}),Ae.push({key:"Width",value:k.width}),Ae.push({key:"Height",value:k.height}),k.colorSpace===v.INDEXED?Ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(Ae.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===v.DEVICE_CMYK&&Ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ae.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&Ae.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)&&k.transparency.length>0){for(var me="",pe=0,ne=k.transparency.length;pe<ne;pe++)me+=k.transparency[pe]+" "+k.transparency[pe]+" ";Ae.push({key:"Mask",value:"["+me+"]"})}k.sMask!==void 0&&Ae.push({key:"SMask",value:k.objectId+1+" 0 R"});var Pe=k.filter!==void 0?["/"+k.filter]:void 0;if(J({data:k.data,additionalKeyValues:Ae,alreadyAppliedFilters:Pe,objectId:k.objectId}),D("endobj"),"sMask"in k&&k.sMask!==void 0){var Be,O=(Be=k.sMaskBitsPerComponent)!==null&&Be!==void 0?Be:k.bitsPerComponent,G={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:k.sMask};"filter"in k&&(G.decodeParameters="/Predictor ".concat(k.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(k.width),G.filter=k.filter),P.call(this,G)}if(k.colorSpace===v.INDEXED){var q=this.internal.newObject();J({data:S(new Uint8Array(k.palette)),objectId:q}),D("endobj")}},o=function(){var P=this.internal.collections[e+"images"];for(var k in P)s.call(this,P[k])},l=function(){var P,k=this.internal.collections[e+"images"],D=this.internal.write;for(var J in k)D("/I"+(P=k[J]).index,P.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var P=this.internal.collections[e+"images"];return c.call(this),P},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(P){return typeof t["process"+P.toUpperCase()]=="function"},A=function(P){return ja(P)==="object"&&P.nodeType===1},h=function(P,k){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var D=""+P.getAttribute("src");if(D.indexOf("data:image/")===0)return sE(unescape(D).split("base64,").pop());var J=t.loadFile(D,!0);if(J!==void 0)return J}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var fe;switch(k){case"PNG":fe="image/png";break;case"WEBP":fe="image/webp";break;default:fe="image/jpeg"}return sE(P.toDataURL(fe,1).split("base64,").pop())}},m=function(P){var k=this.internal.collections[e+"images"];if(k){for(var D in k)if(P===k[D].alias)return k[D]}},p=function(P,k,D){return P||k||(P=-96,k=-96),P<0&&(P=-1*D.width*72/P/this.internal.scaleFactor),k<0&&(k=-1*D.height*72/k/this.internal.scaleFactor),P===0&&(P=k*D.width/D.height),k===0&&(k=P*D.height/D.width),[P,k]},g=function(P,k,D,J,fe,Ae){var me=p.call(this,D,J,fe),pe=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,Pe=u.call(this);if(D=me[0],J=me[1],Pe[fe.index]=fe,Ae){Ae*=Math.PI/180;var Be=Math.cos(Ae),O=Math.sin(Ae),G=function(U){return U.toFixed(4)},q=[G(Be),G(O),G(-1*O),G(Be),0,0,"cm"]}this.internal.write("q"),Ae?(this.internal.write([1,"0","0",1,pe(P),ne(k+J),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([pe(D),"0","0",pe(J),"0","0","cm"].join(" "))):this.internal.write([pe(D),"0","0",pe(J),pe(P),ne(k+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+fe.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(P){var k,D,J=0;if(typeof P=="string")for(D=P.length,k=0;k<D;k++)J=(J<<5)-J+P.charCodeAt(k),J|=0;else if(I(P))for(D=P.byteLength/2,k=0;k<D;k++)J=(J<<5)-J+P[k],J|=0;return J},w=t.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var k=!0;return P.length===0&&(k=!1),P.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(k=!1),k},j=t.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var k=P.indexOf(",");return k<0?null:P.substring(0,k).trim().endsWith("base64")?P.substring(k+1):null};t.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},_=t.__addimage__.binaryStringToUint8Array=function(P){for(var k=P.length,D=new Uint8Array(k),J=0;J<k;J++)D[J]=P.charCodeAt(J);return D},S=t.__addimage__.arrayBufferToBinaryString=function(P){for(var k="",D=I(P)?P:new Uint8Array(P),J=0;J<D.length;J+=8192)k+=String.fromCharCode.apply(null,D.subarray(J,J+8192));return k};t.addImage=function(){var P,k,D,J,fe,Ae,me,pe,ne;if(typeof arguments[1]=="number"?(k=r,D=arguments[1],J=arguments[2],fe=arguments[3],Ae=arguments[4],me=arguments[5],pe=arguments[6],ne=arguments[7]):(k=arguments[1],D=arguments[2],J=arguments[3],fe=arguments[4],Ae=arguments[5],me=arguments[6],pe=arguments[7],ne=arguments[8]),ja(P=arguments[0])==="object"&&!A(P)&&"imageData"in P){var Pe=P;P=Pe.imageData,k=Pe.format||k||r,D=Pe.x||D||0,J=Pe.y||J||0,fe=Pe.w||Pe.width||fe,Ae=Pe.h||Pe.height||Ae,me=Pe.alias||me,pe=Pe.compression||pe,ne=Pe.rotation||Pe.angle||ne}var Be=this.internal.getFilters();if(pe===void 0&&Be.indexOf("FlateEncode")!==-1&&(pe="SLOW"),isNaN(D)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var O=E.call(this,P,k,me,pe);return g.call(this,D,J,fe,Ae,O,ne),this};var E=function(P,k,D,J){var fe,Ae,me;if(typeof P=="string"&&a(P)===r){P=unescape(P);var pe=F(P,!1);(pe!==""||(pe=t.loadFile(P,!0))!==void 0)&&(P=pe)}if(A(P)&&(P=h(P,k)),k=a(P,k),!f(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((me=D)==null||me.length===0)&&(D=function(ne){return typeof ne=="string"||I(ne)?b(ne):I(ne.data)?b(ne.data):null}(P)),(fe=m.call(this,D))||(P instanceof Uint8Array||k==="RGBA"||(Ae=P,P=_(P)),fe=this["process"+k.toUpperCase()](P,d.call(this),D,function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in t.image_compression?ne:y.NONE}(J),Ae)),!fe)throw new Error("An unknown error occurred whilst processing the image.");return fe},F=t.__addimage__.convertBase64ToBinaryString=function(P,k){k=typeof k!="boolean"||k;var D,J="";if(typeof P=="string"){var fe;D=(fe=j(P))!==null&&fe!==void 0?fe:P;try{J=sE(D)}catch(Ae){if(k)throw w(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};t.getImageProperties=function(P){var k,D,J="";if(A(P)&&(P=h(P)),typeof P=="string"&&a(P)===r&&((J=F(P,!1))===""&&(J=t.loadFile(P)||""),P=J),D=a(P),!f(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(P instanceof Uint8Array||(P=_(P)),!(k=this["process"+D.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=D,k}})(Mr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Mr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var A=0;A<u.length;A++){n=u[A];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(p.objId),y=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(v(n.contents))+")",s+=" /Popup "+g.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+h(v(y))+") >>",p.content=s;var b=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(s+=" /Open true"),s+=" >>",g.content=s,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var I=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},t.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Mr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=t.__arabicParser__.isArabicEndLetter=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return o(p)&&a.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(p){var g=0,v=r,y="",b=0;for(g=0;g<p.length;g+=1)v[p.charCodeAt(g)]!==void 0?(b++,typeof(v=v[p.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(v),v=r,b=0),g===p.length-1&&(v=r,y+=p.charAt(g-(b-1)),g-=b-1,b=0)):(v=r,y+=p.charAt(g-b),g-=b,b=0);return y};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var A=t.__arabicParser__.getCorrectForm=function(p,g,v){return o(p)?s(p)===!1?-1:!u(p)||!o(g)&&!o(v)||!o(v)&&l(g)||l(p)&&!o(g)||l(p)&&c(g)||l(p)&&l(g)?0:d(p)&&o(g)&&!l(g)&&o(v)&&u(v)?3:l(p)||!o(v)?1:2:-1},h=function(p){var g=0,v=0,y=0,b="",w="",j="",I=(p=p||"").split("\\s+"),_=[];for(g=0;g<I.length;g+=1){for(_.push(""),v=0;v<I[g].length;v+=1)b=I[g][v],w=I[g][v-1],j=I[g][v+1],o(b)?(y=A(b,w,j),_[g]+=y!==-1?String.fromCharCode(e[b.charCodeAt(0)][y]):b):_[g]+=b;_[g]=f(_[g])}return _.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(g)){var y=0;for(v=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?v.push([h(g[y][0]),g[y][1],g[y][2]]):v.push([h(g[y])]);p=v}else p=h(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",m])}(Mr.API),Mr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Mr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),A=u.scaleFactor||this.internal.scaleFactor,h=0,m=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=u.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,w){return b.concat(g.splitTextToSize(w,v))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)h<(p=this.getStringUnitWidth(c[y],{font:f})*d)&&(h=p);return h!==0&&(m=c.length),{w:h/=A,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/A,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,A=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&A&&(this.printHeaderRow(c.lineNumber,!0),c.y+=A[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,A){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,m,p,g,v=[],y=[],b=[],w={},j={},I=[],_=[],S=(A=A||{}).autoSize||!1,E=A.printHeaders!==!1,F=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,P=A.margins||Object.assign({width:this.getPageWidth()},e),k=typeof A.padding=="number"?A.padding:3,D=A.headerBackgroundColor||"#c8c8c8",J=A.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=J,this.setFontSize(F),f==null)y=v=Object.keys(d[0]),b=v.map(function(){return"left"});else if(Array.isArray(f)&&ja(f[0])==="object")for(v=f.map(function(Pe){return Pe.name}),y=f.map(function(Pe){return Pe.prompt||Pe.name||""}),b=f.map(function(Pe){return Pe.align||"left"}),h=0;h<f.length;h+=1)j[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(y=v=f,b=v.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<v.length;h+=1){for(w[g=v[h]]=d.map(function(Pe){return Pe[g]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(y[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[g],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)I.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[g]=Math.max.apply(null,I)+k+k,I=[]}if(E){var fe={};for(h=0;h<v.length;h+=1)fe[v[h]]={},fe[v[h]].text=y[h],fe[v[h]].align=b[h];var Ae=l.call(this,fe,j);_=v.map(function(Pe){return new s(c,u,j[Pe],Ae,fe[Pe].text,void 0,fe[Pe].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var me=f.reduce(function(Pe,Be){return Pe[Be.name]=Be.align,Pe},{});for(h=0;h<d.length;h+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:h,data:d[h]},this);var pe=l.call(this,d[h],j);for(p=0;p<v.length;p+=1){var ne=d[h][v[p]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:h,col:p,data:ne},this),o.call(this,new s(c,u,j[v[p]],pe,ne,h+2,me[v[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(c).map(function(h){var m=c[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/A+d+d},this).reduce(function(h,m){return Math.max(h,m)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,A.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(m)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),r=!1}}(Mr.API);var are={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},sre=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],_k=nre(sre),ire=[100,200,300,400,500,600,700,800,900],xje=nre(ire);function Z3(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return are[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof _k[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function oV(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var vje={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},lV={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function cV(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function uV(t){return t.trimLeft()}function yje(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function bje(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var SC,dV,fV,ex,IC,hV,AV,mV,e5=["times"];function pV(t,e,r,n,a){var s=4,o=xV;switch(a){case Mr.API.image_compression.FAST:s=1,o=gV;break;case Mr.API.image_compression.MEDIUM:s=6,o=vV;break;case Mr.API.image_compression.SLOW:s=9,o=yV}t=function(c,u,d,f){for(var A,h=c.length/u,m=new Uint8Array(c.length+h),p=[wje,gV,xV,vV,yV],g=0;g<h;g+=1){var v=g*u,y=c.subarray(v,v+u);if(f)m.set(f(y,d,A),v+g);else{for(var b=p.length,w=[],j=0;j<b;j+=1)w[j]=p[j](y,d,A);var I=Cje(w.concat());m.set(w[I],v+g)}A=y}return m}(t,e,Math.ceil(r*n/8),o);var l=xk(t,{level:s});return Mr.API.__addimage__.arrayBufferToBinaryString(l)}function wje(t){var e=Array.apply([],t);return e.unshift(0),e}function gV(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function xV(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var o=r&&r[s]||0;a[s+1]=t[s]-o+256&255}return a}function vV(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var o=t[s-e]||0,l=r&&r[s]||0;a[s+1]=t[s]+256-(o+l>>>1)&255}return a}function yV(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var o=Nje(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-o+256&255}return a}function Nje(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function Cje(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function t5(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),o=(1<<r)-1;return ore(t,a)>>s&o}function bV(t,e,r,n){var a=r*n,s=Math.floor(a/8),o=16-(a-8*s+n),l=(1<<n)-1,c=(e&l)<<o;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var A=f>>8&255;u.setUint8(d,A)}})(t,s,ore(t,s)&~(l<<o)&65535|c)}function ore(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function _je(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,o=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=o,e+=3*o);var u=!0,d=[],f=0,A=null,h=0,m=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];f=t[e++]|t[e++]<<8,A=t[e++],1&p||(A=null),h=p>>2&7,e++;break;case 254:for(;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],j=w>>6&1,I=1<<1+(7&w),_=l,S=c,E=!1;w>>7&&(E=!0,_=e,S=I,e+=3*I);var F=e;for(e++;;){var P;if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}d.push({x:g,y:v,width:y,height:b,has_local_palette:E,palette_offset:_,palette_size:S,data_offset:F,data_length:e-F,transparent_index:A,interlaced:!!j,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(k){if(k<0||k>=d.length)throw new Error("Frame index out of range.");return d[k]},this.decodeAndBlitFrameBGRA=function(k,D){var J=this.frameInfo(k),fe=J.width*J.height,Ae=new Uint8Array(fe);wV(t,J.data_offset,Ae,fe);var me=J.palette_offset,pe=J.transparent_index;pe===null&&(pe=256);var ne=J.width,Pe=r-ne,Be=ne,O=4*(J.y*r+J.x),G=4*((J.y+J.height)*r+J.x),q=O,U=4*Pe;J.interlaced===!0&&(U+=4*r*7);for(var Y=8,Z=0,R=Ae.length;Z<R;++Z){var H=Ae[Z];if(Be===0&&(Be=ne,(q+=U)>=G&&(U=4*Pe+4*r*(Y-1),q=O+(ne+Pe)*(Y<<1),Y>>=1)),H===pe)q+=4;else{var te=t[me+3*H],ye=t[me+3*H+1],Q=t[me+3*H+2];D[q++]=Q,D[q++]=ye,D[q++]=te,D[q++]=255}--Be}},this.decodeAndBlitFrameRGBA=function(k,D){var J=this.frameInfo(k),fe=J.width*J.height,Ae=new Uint8Array(fe);wV(t,J.data_offset,Ae,fe);var me=J.palette_offset,pe=J.transparent_index;pe===null&&(pe=256);var ne=J.width,Pe=r-ne,Be=ne,O=4*(J.y*r+J.x),G=4*((J.y+J.height)*r+J.x),q=O,U=4*Pe;J.interlaced===!0&&(U+=4*r*7);for(var Y=8,Z=0,R=Ae.length;Z<R;++Z){var H=Ae[Z];if(Be===0&&(Be=ne,(q+=U)>=G&&(U=4*Pe+4*r*(Y-1),q=O+(ne+Pe)*(Y<<1),Y>>=1)),H===pe)q+=4;else{var te=t[me+3*H],ye=t[me+3*H+1],Q=t[me+3*H+2];D[q++]=te,D[q++]=ye,D[q++]=Q,D[q++]=255}--Be}}}function wV(t,e,r,n){for(var a=t[e++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,A=0,h=t[e++],m=new Int32Array(4096),p=null;;){for(;d<16&&h!==0;)f|=t[e++]<<d,d+=8,h===1?h=t[e++]:--h;if(d<c)break;var g=f&u;if(f>>=c,d-=c,g!==s){if(g===o)break;for(var v=g<l?g:p,y=0,b=v;b>s;)b=m[b]>>8,++y;var w=b;if(A+y+(v!==g?1:0)>n)return void Ha.log("Warning, gif stream longer than expected.");r[A++]=w;var j=A+=y;for(v!==g&&(r[A++]=w),b=v;y--;)b=m[b],r[--j]=255&b,b>>=8;p!==null&&l<4096&&(m[l++]=p<<8|w,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=g}else l=o+1,u=(1<<(c=a+1))-1,p=null}return A!==n&&Ha.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function r5(t){var e,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),A=new Array(65535),h=new Array(64),m=new Array(64),p=[],g=0,v=7,y=new Array(64),b=new Array(64),w=new Array(64),j=new Array(256),I=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],fe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ae(O,G){for(var q=0,U=0,Y=new Array,Z=1;Z<=16;Z++){for(var R=1;R<=O[Z];R++)Y[G[U]]=[],Y[G[U]][0]=q,Y[G[U]][1]=Z,U++,q++;q*=2}return Y}function me(O){for(var G=O[0],q=O[1]-1;q>=0;)G&1<<q&&(g|=1<<v),q--,--v<0&&(g==255?(pe(255),pe(0)):pe(g),v=7,g=0)}function pe(O){p.push(O)}function ne(O){pe(O>>8&255),pe(255&O)}function Pe(O,G,q,U,Y){for(var Z,R=Y[0],H=Y[240],te=function(Ee,je){var it,At,pt,yt,Ct,Et,Re,We,et,xe,de=0;for(et=0;et<8;++et){it=Ee[de],At=Ee[de+1],pt=Ee[de+2],yt=Ee[de+3],Ct=Ee[de+4],Et=Ee[de+5],Re=Ee[de+6];var Ue=it+(We=Ee[de+7]),Ke=it-We,Ne=At+Re,mt=At-Re,wt=pt+Et,we=pt-Et,ae=yt+Ct,be=yt-Ct,ve=Ue+ae,Ve=Ue-ae,ce=Ne+wt,ke=Ne-wt;Ee[de]=ve+ce,Ee[de+4]=ve-ce;var dt=.707106781*(ke+Ve);Ee[de+2]=Ve+dt,Ee[de+6]=Ve-dt;var ft=.382683433*((ve=be+we)-(ke=mt+Ke)),gt=.5411961*ve+ft,Rt=1.306562965*ke+ft,ot=.707106781*(ce=we+mt),Se=Ke+ot,ht=Ke-ot;Ee[de+5]=ht+gt,Ee[de+3]=ht-gt,Ee[de+1]=Se+Rt,Ee[de+7]=Se-Rt,de+=8}for(de=0,et=0;et<8;++et){it=Ee[de],At=Ee[de+8],pt=Ee[de+16],yt=Ee[de+24],Ct=Ee[de+32],Et=Ee[de+40],Re=Ee[de+48];var W=it+(We=Ee[de+56]),Te=it-We,Ze=At+Re,tt=At-Re,ut=pt+Et,T=pt-Et,M=yt+Ct,L=yt-Ct,K=W+M,re=W-M,le=Ze+ut,Me=Ze-ut;Ee[de]=K+le,Ee[de+32]=K-le;var qe=.707106781*(Me+re);Ee[de+16]=re+qe,Ee[de+48]=re-qe;var lt=.382683433*((K=L+T)-(Me=tt+Te)),Fe=.5411961*K+lt,Xe=1.306562965*Me+lt,he=.707106781*(le=T+tt),He=Te+he,Ye=Te-he;Ee[de+40]=Ye+Fe,Ee[de+24]=Ye-Fe,Ee[de+8]=He+Xe,Ee[de+56]=He-Xe,de++}for(et=0;et<64;++et)xe=Ee[et]*je[et],h[et]=xe>0?xe+.5|0:xe-.5|0;return h}(O,G),ye=0;ye<64;++ye)m[_[ye]]=te[ye];var Q=m[0]-q;q=m[0],Q==0?me(U[0]):(me(U[A[Z=32767+Q]]),me(f[Z]));for(var Ge=63;Ge>0&&m[Ge]==0;)Ge--;if(Ge==0)return me(R),q;for(var ie,ee=1;ee<=Ge;){for(var Ie=ee;m[ee]==0&&ee<=Ge;)++ee;var ue=ee-Ie;if(ue>=16){ie=ue>>4;for(var se=1;se<=ie;++se)me(H);ue&=15}Z=32767+m[ee],me(Y[(ue<<4)+A[Z]]),me(f[Z]),ee++}return Ge!=63&&me(R),q}function Be(O){O=Math.min(Math.max(O,1),100),s!=O&&(function(G){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var Y=o((q[U]*G+50)/100);Y=Math.min(Math.max(Y,1),255),l[_[U]]=Y}for(var Z=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],R=0;R<64;R++){var H=o((Z[R]*G+50)/100);H=Math.min(Math.max(H,1),255),c[_[R]]=H}for(var te=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ye=0,Q=0;Q<8;Q++)for(var Ge=0;Ge<8;Ge++)u[ye]=1/(l[_[ye]]*te[Q]*te[Ge]*8),d[ye]=1/(c[_[ye]]*te[Q]*te[Ge]*8),ye++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,G){G&&Be(G),p=new Array,g=0,v=7,ne(65496),ne(65504),ne(16),pe(74),pe(70),pe(73),pe(70),pe(0),pe(1),pe(1),pe(0),ne(1),ne(1),pe(0),pe(0),function(){ne(65499),ne(132),pe(0);for(var At=0;At<64;At++)pe(l[At]);pe(1);for(var pt=0;pt<64;pt++)pe(c[pt])}(),function(At,pt){ne(65472),ne(17),pe(8),ne(pt),ne(At),pe(3),pe(1),pe(17),pe(0),pe(2),pe(17),pe(1),pe(3),pe(17),pe(1)}(O.width,O.height),function(){ne(65476),ne(418),pe(0);for(var At=0;At<16;At++)pe(S[At+1]);for(var pt=0;pt<=11;pt++)pe(E[pt]);pe(16);for(var yt=0;yt<16;yt++)pe(F[yt+1]);for(var Ct=0;Ct<=161;Ct++)pe(P[Ct]);pe(1);for(var Et=0;Et<16;Et++)pe(k[Et+1]);for(var Re=0;Re<=11;Re++)pe(D[Re]);pe(17);for(var We=0;We<16;We++)pe(J[We+1]);for(var et=0;et<=161;et++)pe(fe[et])}(),ne(65498),ne(12),pe(3),pe(1),pe(0),pe(2),pe(17),pe(3),pe(17),pe(0),pe(63),pe(0);var q=0,U=0,Y=0;g=0,v=7,this.encode.displayName="_encode_";for(var Z,R,H,te,ye,Q,Ge,ie,ee,Ie=O.data,ue=O.width,se=O.height,Ee=4*ue,je=0;je<se;){for(Z=0;Z<Ee;){for(ye=Ee*je+Z,Ge=-1,ie=0,ee=0;ee<64;ee++)Q=ye+(ie=ee>>3)*Ee+(Ge=4*(7&ee)),je+ie>=se&&(Q-=Ee*(je+1+ie-se)),Z+Ge>=Ee&&(Q-=Z+Ge-Ee+4),R=Ie[Q++],H=Ie[Q++],te=Ie[Q++],y[ee]=(I[R]+I[H+256|0]+I[te+512|0]>>16)-128,b[ee]=(I[R+768|0]+I[H+1024|0]+I[te+1280|0]>>16)-128,w[ee]=(I[R+1280|0]+I[H+1536|0]+I[te+1792|0]>>16)-128;q=Pe(y,u,q,e,n),U=Pe(b,d,U,r,a),Y=Pe(w,d,Y,r,a),Z+=32}je+=8}if(v>=0){var it=[];it[1]=v+1,it[0]=(1<<v+1)-1,me(it)}return ne(65497),new Uint8Array(p)},t=t||50,function(){for(var O=String.fromCharCode,G=0;G<256;G++)j[G]=O(G)}(),e=Ae(S,E),r=Ae(k,D),n=Ae(F,P),a=Ae(J,fe),function(){for(var O=1,G=2,q=1;q<=15;q++){for(var U=O;U<G;U++)A[32767+U]=q,f[32767+U]=[],f[32767+U][1]=q,f[32767+U][0]=U;for(var Y=-(G-1);Y<=-O;Y++)A[32767+Y]=q,f[32767+Y]=[],f[32767+Y][1]=q,f[32767+Y][0]=G-1+Y;O<<=1,G<<=1}}(),function(){for(var O=0;O<256;O++)I[O]=19595*O,I[O+256|0]=38470*O,I[O+512|0]=7471*O+32768,I[O+768|0]=-11059*O,I[O+1024|0]=-21709*O,I[O+1280|0]=32768*O+8421375,I[O+1536|0]=-27439*O,I[O+1792|0]=-5329*O}(),Be(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function _d(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function NV(t){function e(E){if(!E)throw Error("assert :P")}function r(E,F,P){for(var k=0;4>k;k++)if(E[F+k]!=P.charCodeAt(k))return!0;return!1}function n(E,F,P,k,D){for(var J=0;J<D;J++)E[F+J]=P[k+J]}function a(E,F,P,k){for(var D=0;D<k;D++)E[F+D]=P}function s(E){return new Int32Array(E)}function o(E,F){for(var P=[],k=0;k<E;k++)P.push(new F);return P}function l(E,F){var P=[];return function k(D,J,fe){for(var Ae=fe[J],me=0;me<Ae&&(D.push(fe.length>J+1?[]:new F),!(fe.length<J+1));me++)k(D[me],J+1,fe)}(P,0,E),P}var c=function(){var E=this;function F(N,B){for(var z=1<<B-1>>>0;N&z;)z>>>=1;return z?(N&z-1)+z:N}function P(N,B,z,oe,_e){e(!(oe%z));do N[B+(oe-=z)]=_e;while(0<oe)}function k(N,B,z,oe,_e){if(e(2328>=_e),512>=_e)var De=s(512);else if((De=s(_e))==null)return 0;return function(Le,Qe,ze,nt,_t,Vt){var at,St,Tt=Qe,Zt=1<<ze,Ut=s(16),rr=s(16);for(e(_t!=0),e(nt!=null),e(Le!=null),e(0<ze),St=0;St<_t;++St){if(15<nt[St])return 0;++Ut[nt[St]]}if(Ut[0]==_t)return 0;for(rr[1]=0,at=1;15>at;++at){if(Ut[at]>1<<at)return 0;rr[at+1]=rr[at]+Ut[at]}for(St=0;St<_t;++St)at=nt[St],0<nt[St]&&(Vt[rr[at]++]=St);if(rr[15]==1)return(nt=new D).g=0,nt.value=Vt[0],P(Le,Tt,1,Zt,nt),Zt;var ar,Ar=-1,dr=Zt-1,Zr=0,Hr=1,En=1,zr=1<<ze;for(St=0,at=1,_t=2;at<=ze;++at,_t<<=1){if(Hr+=En<<=1,0>(En-=Ut[at]))return 0;for(;0<Ut[at];--Ut[at])(nt=new D).g=at,nt.value=Vt[St++],P(Le,Tt+Zr,_t,zr,nt),Zr=F(Zr,at)}for(at=ze+1,_t=2;15>=at;++at,_t<<=1){if(Hr+=En<<=1,0>(En-=Ut[at]))return 0;for(;0<Ut[at];--Ut[at]){if(nt=new D,(Zr&dr)!=Ar){for(Tt+=zr,ar=1<<(Ar=at)-ze;15>Ar&&!(0>=(ar-=Ut[Ar]));)++Ar,ar<<=1;Zt+=zr=1<<(ar=Ar-ze),Le[Qe+(Ar=Zr&dr)].g=ar+ze,Le[Qe+Ar].value=Tt-Qe-Ar}nt.g=at-ze,nt.value=Vt[St++],P(Le,Tt+(Zr>>ze),_t,zr,nt),Zr=F(Zr,at)}}return Hr!=2*rr[15]-1?0:Zt}(N,B,z,oe,_e,De)}function D(){this.value=this.g=0}function J(){this.value=this.g=0}function fe(){this.G=o(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Pm,J)}function Ae(N,B,z,oe){e(N!=null),e(B!=null),e(2147483648>oe),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=B,N.pa=z,N.Jd=B,N.Yc=z+oe,N.Zc=4<=oe?z+oe-4+1:z,R(N)}function me(N,B){for(var z=0;0<B--;)z|=te(N,128)<<B;return z}function pe(N,B){var z=me(N,B);return H(N)?-z:z}function ne(N,B,z,oe){var _e,De=0;for(e(N!=null),e(B!=null),e(4294967288>oe),N.Sb=oe,N.Ra=0,N.u=0,N.h=0,4<oe&&(oe=4),_e=0;_e<oe;++_e)De+=B[z+_e]<<8*_e;N.Ra=De,N.bb=oe,N.oa=B,N.pa=z}function Pe(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<kA-8>>>0,++N.bb,N.u-=8;U(N)&&(N.h=1,N.u=0)}function Be(N,B){if(e(0<=B),!N.h&&B<=Uc){var z=q(N)&Lc[B];return N.u+=B,Pe(N),z}return N.h=1,N.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(N){return N.Ra>>>(N.u&kA-1)>>>0}function U(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>kA}function Y(N,B){N.u=B,N.h=U(N)}function Z(N){N.u>=rh&&(e(N.u>=rh),Pe(N))}function R(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function H(N){return me(N,1)}function te(N,B){var z=N.Ca;0>N.b&&R(N);var oe=N.b,_e=z*B>>>8,De=(N.I>>>oe>_e)+0;for(De?(z-=_e,N.I-=_e+1<<oe>>>0):z=_e+1,oe=z,_e=0;256<=oe;)_e+=8,oe>>=8;return oe=7^_e+FA[oe],N.b-=oe,N.Ca=(z<<oe)-1,De}function ye(N,B,z){N[B+0]=z>>24&255,N[B+1]=z>>16&255,N[B+2]=z>>8&255,N[B+3]=255&z}function Q(N,B){return N[B+0]|N[B+1]<<8}function Ge(N,B){return Q(N,B)|N[B+2]<<16}function ie(N,B){return Q(N,B)|Q(N,B+2)<<16}function ee(N,B){var z=1<<B;return e(N!=null),e(0<B),N.X=s(z),N.X==null?0:(N.Mb=32-B,N.Xa=B,1)}function Ie(N,B){e(N!=null),e(B!=null),e(N.Xa==B.Xa),n(B.X,0,N.X,0,1<<B.Xa)}function ue(){this.X=[],this.Xa=this.Mb=0}function se(N,B,z,oe){e(z!=null),e(oe!=null);var _e=z[0],De=oe[0];return _e==0&&(_e=(N*De+B/2)/B),De==0&&(De=(B*_e+N/2)/N),0>=_e||0>=De?0:(z[0]=_e,oe[0]=De,1)}function Ee(N,B){return N+(1<<B)-1>>>B}function je(N,B){return((4278255360&N)+(4278255360&B)>>>0&4278255360)+((16711935&N)+(16711935&B)>>>0&16711935)>>>0}function it(N,B){E[B]=function(z,oe,_e,De,Le,Qe,ze){var nt;for(nt=0;nt<Le;++nt){var _t=E[N](Qe[ze+nt-1],_e,De+nt);Qe[ze+nt]=je(z[oe+nt],_t)}}}function At(){this.ud=this.hd=this.jd=0}function pt(N,B){return((4278124286&(N^B))>>>1)+(N&B)>>>0}function yt(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function Ct(N,B){return yt(N+(N-B+.5>>1))}function Et(N,B,z){return Math.abs(B-z)-Math.abs(N-z)}function Re(N,B,z,oe,_e,De,Le){for(oe=De[Le-1],z=0;z<_e;++z)De[Le+z]=oe=je(N[B+z],oe)}function We(N,B,z,oe,_e){var De;for(De=0;De<z;++De){var Le=N[B+De],Qe=Le>>8&255,ze=16711935&(ze=(ze=16711935&Le)+((Qe<<16)+Qe));oe[_e+De]=(4278255360&Le)+ze>>>0}}function et(N,B){B.jd=255&N,B.hd=N>>8&255,B.ud=N>>16&255}function xe(N,B,z,oe,_e,De){var Le;for(Le=0;Le<oe;++Le){var Qe=B[z+Le],ze=Qe>>>8,nt=Qe,_t=255&(_t=(_t=Qe>>>16)+((N.jd<<24>>24)*(ze<<24>>24)>>>5));nt=255&(nt=(nt+=(N.hd<<24>>24)*(ze<<24>>24)>>>5)+((N.ud<<24>>24)*(_t<<24>>24)>>>5)),_e[De+Le]=(4278255360&Qe)+(_t<<16)+nt}}function de(N,B,z,oe,_e){E[B]=function(De,Le,Qe,ze,nt,_t,Vt,at,St){for(ze=Vt;ze<at;++ze)for(Vt=0;Vt<St;++Vt)nt[_t++]=_e(Qe[oe(De[Le++])])},E[N]=function(De,Le,Qe,ze,nt,_t,Vt){var at=8>>De.b,St=De.Ea,Tt=De.K[0],Zt=De.w;if(8>at)for(De=(1<<De.b)-1,Zt=(1<<at)-1;Le<Qe;++Le){var Ut,rr=0;for(Ut=0;Ut<St;++Ut)Ut&De||(rr=oe(ze[nt++])),_t[Vt++]=_e(Tt[rr&Zt]),rr>>=at}else E["VP8LMapColor"+z](ze,nt,Tt,Zt,_t,Vt,Le,Qe,St)}}function Ue(N,B,z,oe,_e){for(z=B+z;B<z;){var De=N[B++];oe[_e++]=De>>16&255,oe[_e++]=De>>8&255,oe[_e++]=255&De}}function Ke(N,B,z,oe,_e){for(z=B+z;B<z;){var De=N[B++];oe[_e++]=De>>16&255,oe[_e++]=De>>8&255,oe[_e++]=255&De,oe[_e++]=De>>24&255}}function Ne(N,B,z,oe,_e){for(z=B+z;B<z;){var De=(Le=N[B++])>>16&240|Le>>12&15,Le=240&Le|Le>>28&15;oe[_e++]=De,oe[_e++]=Le}}function mt(N,B,z,oe,_e){for(z=B+z;B<z;){var De=(Le=N[B++])>>16&248|Le>>13&7,Le=Le>>5&224|Le>>3&31;oe[_e++]=De,oe[_e++]=Le}}function wt(N,B,z,oe,_e){for(z=B+z;B<z;){var De=N[B++];oe[_e++]=255&De,oe[_e++]=De>>8&255,oe[_e++]=De>>16&255}}function we(N,B,z,oe,_e,De){if(De==0)for(z=B+z;B<z;)ye(oe,((De=N[B++])[0]>>24|De[1]>>8&65280|De[2]<<8&16711680|De[3]<<24)>>>0),_e+=32;else n(oe,_e,N,B,z)}function ae(N,B){E[B][0]=E[N+"0"],E[B][1]=E[N+"1"],E[B][2]=E[N+"2"],E[B][3]=E[N+"3"],E[B][4]=E[N+"4"],E[B][5]=E[N+"5"],E[B][6]=E[N+"6"],E[B][7]=E[N+"7"],E[B][8]=E[N+"8"],E[B][9]=E[N+"9"],E[B][10]=E[N+"10"],E[B][11]=E[N+"11"],E[B][12]=E[N+"12"],E[B][13]=E[N+"13"],E[B][14]=E[N+"0"],E[B][15]=E[N+"0"]}function be(N){return N==mP||N==pP||N==mN||N==gP}function ve(){this.eb=[],this.size=this.A=this.fb=0}function Ve(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ce(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ve,this.f.kb=new Ve,this.sd=null}function ke(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ft(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function gt(N,B){var z=N.T,oe=B.ba.f.RGBA,_e=oe.eb,De=oe.fb+N.ka*oe.A,Le=ju[B.ba.S],Qe=N.y,ze=N.O,nt=N.f,_t=N.N,Vt=N.ea,at=N.W,St=B.cc,Tt=B.dc,Zt=B.Mc,Ut=B.Nc,rr=N.ka,ar=N.ka+N.T,Ar=N.U,dr=Ar+1>>1;for(rr==0?Le(Qe,ze,null,null,nt,_t,Vt,at,nt,_t,Vt,at,_e,De,null,null,Ar):(Le(B.ec,B.fc,Qe,ze,St,Tt,Zt,Ut,nt,_t,Vt,at,_e,De-oe.A,_e,De,Ar),++z);rr+2<ar;rr+=2)St=nt,Tt=_t,Zt=Vt,Ut=at,_t+=N.Rc,at+=N.Rc,De+=2*oe.A,Le(Qe,(ze+=2*N.fa)-N.fa,Qe,ze,St,Tt,Zt,Ut,nt,_t,Vt,at,_e,De-oe.A,_e,De,Ar);return ze+=N.fa,N.j+ar<N.o?(n(B.ec,B.fc,Qe,ze,Ar),n(B.cc,B.dc,nt,_t,dr),n(B.Mc,B.Nc,Vt,at,dr),z--):1&ar||Le(Qe,ze,null,null,nt,_t,Vt,at,nt,_t,Vt,at,_e,De+oe.A,null,null,Ar),z}function Rt(N,B,z){var oe=N.F,_e=[N.J];if(oe!=null){var De=N.U,Le=B.ba.S,Qe=Le==AN||Le==mN;B=B.ba.f.RGBA;var ze=[0],nt=N.ka;ze[0]=N.T,N.Kb&&(nt==0?--ze[0]:(--nt,_e[0]-=N.width),N.j+N.ka+N.T==N.o&&(ze[0]=N.o-N.j-nt));var _t=B.eb;nt=B.fb+nt*B.A,N=PM(oe,_e[0],N.width,De,ze,_t,nt+(Qe?0:3),B.A),e(z==ze),N&&be(Le)&&F1(_t,nt,Qe,De,ze,B.A)}return 0}function ot(N){var B=N.ma,z=B.ba.S,oe=11>z,_e=z==fN||z==hN||z==AN||z==AP||z==12||be(z);if(B.memory=null,B.Ib=null,B.Jb=null,B.Nd=null,!E1(B.Oa,N,_e?11:12))return 0;if(_e&&be(z)&&Eu(),N.da)alert("todo:use_scaling");else{if(oe){if(B.Ib=ft,N.Kb){if(z=N.U+1>>1,B.memory=s(N.U+2*z),B.memory==null)return 0;B.ec=B.memory,B.fc=0,B.cc=B.ec,B.dc=B.fc+N.U,B.Mc=B.cc,B.Nc=B.dc+z,B.Ib=gt,Eu()}}else alert("todo:EmitYUV");_e&&(B.Jb=Rt,oe&&uc())}if(oe&&!KM){for(N=0;256>N;++N)Wue[N]=89858*(N-128)+gN>>pN,Jue[N]=-22014*(N-128)+gN,Yue[N]=-45773*(N-128),Xue[N]=113618*(N-128)+gN>>pN;for(N=D1;N<yP;++N)B=76283*(N-16)+gN>>pN,Zue[N-D1]=jr(B,255),ede[N-D1]=jr(B+8>>4,15);KM=1}return 1}function Se(N){var B=N.ma,z=N.U,oe=N.T;return e(!(1&N.ka)),0>=z||0>=oe?0:(z=B.Ib(N,B),B.Jb!=null&&B.Jb(N,B,z),B.Dc+=z,1)}function ht(N){N.ma.memory=null}function W(N,B,z,oe){return Be(N,8)!=47?0:(B[0]=Be(N,14)+1,z[0]=Be(N,14)+1,oe[0]=Be(N,1),Be(N,3)!=0?0:!N.h)}function Te(N,B){if(4>N)return N+1;var z=N-2>>1;return(2+(1&N)<<z)+Be(B,z)+1}function Ze(N,B){return 120<B?B-120:1<=(z=((z=Oue[B-1])>>4)*N+(8-(15&z)))?z:1;var z}function tt(N,B,z){var oe=q(z),_e=N[B+=255&oe].g-8;return 0<_e&&(Y(z,z.u+8),oe=q(z),B+=N[B].value,B+=oe&(1<<_e)-1),Y(z,z.u+N[B].g),N[B].value}function ut(N,B,z){return z.g+=N.g,z.value+=N.value<<B>>>0,e(8>=z.g),N.g}function T(N,B,z){var oe=N.xc;return e((B=oe==0?0:N.vc[N.md*(z>>oe)+(B>>oe)])<N.Wb),N.Ya[B]}function M(N,B,z,oe){var _e=N.ab,De=N.c*B,Le=N.C;B=Le+B;var Qe=z,ze=oe;for(oe=N.Ta,z=N.Ua;0<_e--;){var nt=N.gc[_e],_t=Le,Vt=B,at=Qe,St=ze,Tt=(ze=oe,Qe=z,nt.Ea);switch(e(_t<Vt),e(Vt<=nt.nc),nt.hc){case 2:li(at,St,(Vt-_t)*Tt,ze,Qe);break;case 0:var Zt=_t,Ut=Vt,rr=ze,ar=Qe,Ar=(zr=nt).Ea;Zt==0&&(I1(at,St,null,null,1,rr,ar),Re(at,St+1,0,0,Ar-1,rr,ar+1),St+=Ar,ar+=Ar,++Zt);for(var dr=1<<zr.b,Zr=dr-1,Hr=Ee(Ar,zr.b),En=zr.K,zr=zr.w+(Zt>>zr.b)*Hr;Zt<Ut;){var qn=En,Qi=zr,Sn=1;for(Rg(at,St,rr,ar-Ar,1,rr,ar);Sn<Ar;){var Wr=(Sn&~Zr)+dr;Wr>Ar&&(Wr=Ar),(0,P1[qn[Qi++]>>8&15])(at,St+ +Sn,rr,ar+Sn-Ar,Wr-Sn,rr,ar+Sn),Sn=Wr}St+=Ar,ar+=Ar,++Zt&Zr||(zr+=Hr)}Vt!=nt.nc&&n(ze,Qe-Tt,ze,Qe+(Vt-_t-1)*Tt,Tt);break;case 1:for(Tt=at,Ut=St,Ar=(at=nt.Ea)-(ar=at&~(rr=(St=1<<nt.b)-1)),Zt=Ee(at,nt.b),dr=nt.K,nt=nt.w+(_t>>nt.b)*Zt;_t<Vt;){for(Zr=dr,Hr=nt,En=new At,zr=Ut+ar,qn=Ut+at;Ut<zr;)et(Zr[Hr++],En),B1(En,Tt,Ut,St,ze,Qe),Ut+=St,Qe+=St;Ut<qn&&(et(Zr[Hr++],En),B1(En,Tt,Ut,Ar,ze,Qe),Ut+=Ar,Qe+=Ar),++_t&rr||(nt+=Zt)}break;case 3:if(at==ze&&St==Qe&&0<nt.b){for(Ut=ze,at=Tt=Qe+(Vt-_t)*Tt-(ar=(Vt-_t)*Ee(nt.Ea,nt.b)),St=ze,rr=Qe,Zt=[],ar=(Ar=ar)-1;0<=ar;--ar)Zt[ar]=St[rr+ar];for(ar=Ar-1;0<=ar;--ar)Ut[at+ar]=Zt[ar];lN(nt,_t,Vt,ze,Tt,ze,Qe)}else lN(nt,_t,Vt,at,St,ze,Qe)}Qe=oe,ze=z}ze!=z&&n(oe,z,Qe,ze,De)}function L(N,B){var z=N.V,oe=N.Ba+N.c*N.C,_e=B-N.C;if(e(B<=N.l.o),e(16>=_e),0<_e){var De=N.l,Le=N.Ta,Qe=N.Ua,ze=De.width;if(M(N,_e,z,oe),_e=Qe=[Qe],e((z=N.C)<(oe=B)),e(De.v<De.va),oe>De.o&&(oe=De.o),z<De.j){var nt=De.j-z;z=De.j,_e[0]+=nt*ze}if(z>=oe?z=0:(_e[0]+=4*De.v,De.ka=z-De.j,De.U=De.va-De.v,De.T=oe-z,z=1),z){if(Qe=Qe[0],11>(z=N.ca).S){var _t=z.f.RGBA,Vt=(oe=z.S,_e=De.U,De=De.T,nt=_t.eb,_t.A),at=De;for(_t=_t.fb+N.Ma*_t.A;0<at--;){var St=Le,Tt=Qe,Zt=_e,Ut=nt,rr=_t;switch(oe){case dN:T1(St,Tt,Zt,Ut,rr);break;case fN:OA(St,Tt,Zt,Ut,rr);break;case mP:OA(St,Tt,Zt,Ut,rr),F1(Ut,rr,0,Zt,1,0);break;case RM:Bm(St,Tt,Zt,Ut,rr);break;case hN:we(St,Tt,Zt,Ut,rr,1);break;case pP:we(St,Tt,Zt,Ut,rr,1),F1(Ut,rr,0,Zt,1,0);break;case AN:we(St,Tt,Zt,Ut,rr,0);break;case mN:we(St,Tt,Zt,Ut,rr,0),F1(Ut,rr,1,Zt,1,0);break;case AP:DA(St,Tt,Zt,Ut,rr);break;case gP:DA(St,Tt,Zt,Ut,rr),jM(Ut,rr,Zt,1,0);break;case MM:RA(St,Tt,Zt,Ut,rr);break;default:e(0)}Qe+=ze,_t+=Vt}N.Ma+=De}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=z.height)}}N.C=B,e(N.C<=N.i)}function K(N){var B;if(0<N.ua)return 0;for(B=0;B<N.Wb;++B){var z=N.Ya[B].G,oe=N.Ya[B].H;if(0<z[1][oe[1]+0].g||0<z[2][oe[2]+0].g||0<z[3][oe[3]+0].g)return 0}return 1}function re(N,B,z,oe,_e,De){if(N.Z!=0){var Le=N.qd,Qe=N.rd;for(e(UA[N.Z]!=null);B<z;++B)UA[N.Z](Le,Qe,oe,_e,oe,_e,De),Le=oe,Qe=_e,_e+=De;N.qd=Le,N.rd=Qe}}function le(N,B){var z=N.l.ma,oe=z.Z==0||z.Z==1?N.l.j:N.C;if(oe=N.C<oe?oe:N.C,e(B<=N.l.o),B>oe){var _e=N.l.width,De=z.ca,Le=z.tb+_e*oe,Qe=N.V,ze=N.Ba+N.c*oe,nt=N.gc;e(N.ab==1),e(nt[0].hc==3),hf(nt[0],oe,B,Qe,ze,De,Le),re(z,oe,B,De,Le,_e)}N.C=N.Ma=B}function Me(N,B,z,oe,_e,De,Le){var Qe=N.$/oe,ze=N.$%oe,nt=N.m,_t=N.s,Vt=z+N.$,at=Vt;_e=z+oe*_e;var St=z+oe*De,Tt=280+_t.ua,Zt=N.Pb?Qe:16777216,Ut=0<_t.ua?_t.Wa:null,rr=_t.wc,ar=Vt<St?T(_t,ze,Qe):null;e(N.C<De),e(St<=_e);var Ar=!1;e:for(;;){for(;Ar||Vt<St;){var dr=0;if(Qe>=Zt){var Zr=Vt-z;e((Zt=N).Pb),Zt.wd=Zt.m,Zt.xd=Zr,0<Zt.s.ua&&Ie(Zt.s.Wa,Zt.s.vb),Zt=Qe+Rue}if(ze&rr||(ar=T(_t,ze,Qe)),e(ar!=null),ar.Qb&&(B[Vt]=ar.qb,Ar=!0),!Ar)if(Z(nt),ar.jc){dr=nt,Zr=B;var Hr=Vt,En=ar.pd[q(dr)&Pm-1];e(ar.jc),256>En.g?(Y(dr,dr.u+En.g),Zr[Hr]=En.value,dr=0):(Y(dr,dr.u+En.g-256),e(256<=En.value),dr=En.value),dr==0&&(Ar=!0)}else dr=tt(ar.G[0],ar.H[0],nt);if(nt.h)break;if(Ar||256>dr){if(!Ar)if(ar.nd)B[Vt]=(ar.qb|dr<<8)>>>0;else{if(Z(nt),Ar=tt(ar.G[1],ar.H[1],nt),Z(nt),Zr=tt(ar.G[2],ar.H[2],nt),Hr=tt(ar.G[3],ar.H[3],nt),nt.h)break;B[Vt]=(Hr<<24|Ar<<16|dr<<8|Zr)>>>0}if(Ar=!1,++Vt,++ze>=oe&&(ze=0,++Qe,Le!=null&&Qe<=De&&!(Qe%16)&&Le(N,Qe),Ut!=null))for(;at<Vt;)dr=B[at++],Ut.X[(506832829*dr&4294967295)>>>Ut.Mb]=dr}else if(280>dr){if(dr=Te(dr-256,nt),Zr=tt(ar.G[4],ar.H[4],nt),Z(nt),Zr=Ze(oe,Zr=Te(Zr,nt)),nt.h)break;if(Vt-z<Zr||_e-Vt<dr)break e;for(Hr=0;Hr<dr;++Hr)B[Vt+Hr]=B[Vt+Hr-Zr];for(Vt+=dr,ze+=dr;ze>=oe;)ze-=oe,++Qe,Le!=null&&Qe<=De&&!(Qe%16)&&Le(N,Qe);if(e(Vt<=_e),ze&rr&&(ar=T(_t,ze,Qe)),Ut!=null)for(;at<Vt;)dr=B[at++],Ut.X[(506832829*dr&4294967295)>>>Ut.Mb]=dr}else{if(!(dr<Tt))break e;for(Ar=dr-280,e(Ut!=null);at<Vt;)dr=B[at++],Ut.X[(506832829*dr&4294967295)>>>Ut.Mb]=dr;dr=Vt,e(!(Ar>>>(Zr=Ut).Xa)),B[dr]=Zr.X[Ar],Ar=!0}Ar||e(nt.h==U(nt))}if(N.Pb&&nt.h&&Vt<_e)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&Ie(N.s.vb,N.s.Wa);else{if(nt.h)break e;Le!=null&&Le(N,Qe>De?De:Qe),N.a=0,N.$=Vt-z}return 1}return N.a=3,0}function qe(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var B=N.Wa;B!=null&&(B.X=null),N.vb=null,e(N!=null)}function lt(){var N=new dn;return N==null?null:(N.a=0,N.xb=QM,ae("Predictor","VP8LPredictors"),ae("Predictor","VP8LPredictors_C"),ae("PredictorAdd","VP8LPredictorsAdd"),ae("PredictorAdd","VP8LPredictorsAdd_C"),li=We,B1=xe,T1=Ue,OA=Ke,DA=Ne,RA=mt,Bm=wt,E.VP8LMapColor32b=ff,E.VP8LMapColor8b=j1,N)}function Fe(N,B,z,oe,_e){var De=1,Le=[N],Qe=[B],ze=oe.m,nt=oe.s,_t=null,Vt=0;e:for(;;){if(z)for(;De&&Be(ze,1);){var at=Le,St=Qe,Tt=oe,Zt=1,Ut=Tt.m,rr=Tt.gc[Tt.ab],ar=Be(Ut,2);if(Tt.Oc&1<<ar)De=0;else{switch(Tt.Oc|=1<<ar,rr.hc=ar,rr.Ea=at[0],rr.nc=St[0],rr.K=[null],++Tt.ab,e(4>=Tt.ab),ar){case 0:case 1:rr.b=Be(Ut,3)+2,Zt=Fe(Ee(rr.Ea,rr.b),Ee(rr.nc,rr.b),0,Tt,rr.K),rr.K=rr.K[0];break;case 3:var Ar,dr=Be(Ut,8)+1,Zr=16<dr?0:4<dr?1:2<dr?2:3;if(at[0]=Ee(rr.Ea,Zr),rr.b=Zr,Ar=Zt=Fe(dr,1,0,Tt,rr.K)){var Hr,En=dr,zr=rr,qn=1<<(8>>zr.b),Qi=s(qn);if(Qi==null)Ar=0;else{var Sn=zr.K[0],Wr=zr.w;for(Qi[0]=zr.K[0][0],Hr=1;Hr<1*En;++Hr)Qi[Hr]=je(Sn[Wr+Hr],Qi[Hr-1]);for(;Hr<4*qn;++Hr)Qi[Hr]=0;zr.K[0]=null,zr.K[0]=Qi,Ar=1}}Zt=Ar;break;case 2:break;default:e(0)}De=Zt}}if(Le=Le[0],Qe=Qe[0],De&&Be(ze,1)&&!(De=1<=(Vt=Be(ze,4))&&11>=Vt)){oe.a=3;break e}var Br;if(Br=De)t:{var ui,Nn,Wn,ns=oe,Mo=Le,Vl=Qe,Ys=Vt,ul=z,Hl=ns.m,Vi=ns.s,Jn=[null],va=1,Js=0,ya=Due[Ys];r:for(;;){if(ul&&Be(Hl,1)){var Lo=Be(Hl,3)+2,wd=Ee(Mo,Lo),di=Ee(Vl,Lo),dc=wd*di;if(!Fe(wd,di,0,ns,Jn))break r;for(Jn=Jn[0],Vi.xc=Lo,ui=0;ui<dc;++ui){var Qa=Jn[ui]>>8&65535;Jn[ui]=Qa,Qa>=va&&(va=Qa+1)}}if(Hl.h)break r;for(Nn=0;5>Nn;++Nn){var Hi=LM[Nn];!Nn&&0<Ys&&(Hi+=1<<Ys),Js<Hi&&(Js=Hi)}var Vc=o(va*ya,D),$l=va,Hc=o($l,fe);if(Hc==null)var $c=null;else e(65536>=$l),$c=Hc;var fc=s(Js);if($c==null||fc==null||Vc==null){ns.a=1;break r}var Gc=Vc;for(ui=Wn=0;ui<va;++ui){var za=$c[ui],Kc=za.G,Nd=za.H,km=0,sh=1,Uo=0;for(Nn=0;5>Nn;++Nn){Hi=LM[Nn],Kc[Nn]=Gc,Nd[Nn]=Wn,!Nn&&0<Ys&&(Hi+=1<<Ys);a:{var vN,bP=Hi,yN=ns,R1=fc,nde=Gc,ade=Wn,wP=0,QA=yN.m,sde=Be(QA,1);if(a(R1,0,0,bP),sde){var ide=Be(QA,1)+1,ode=Be(QA,1),WM=Be(QA,ode==0?1:8);R1[WM]=1,ide==2&&(R1[WM=Be(QA,8)]=1);var bN=1}else{var XM=s(19),YM=Be(QA,4)+4;if(19<YM){yN.a=3;var wN=0;break a}for(vN=0;vN<YM;++vN)XM[Fue[vN]]=Be(QA,3);var NP=void 0,M1=void 0,JM=yN,lde=XM,NN=bP,ZM=R1,CP=0,VA=JM.m,eL=8,tL=o(128,D);n:for(;k(tL,0,7,lde,19);){if(Be(VA,1)){var cde=2+2*Be(VA,3);if((NP=2+Be(VA,cde))>NN)break n}else NP=NN;for(M1=0;M1<NN&&NP--;){Z(VA);var rL=tL[0+(127&q(VA))];Y(VA,VA.u+rL.g);var Lg=rL.value;if(16>Lg)ZM[M1++]=Lg,Lg!=0&&(eL=Lg);else{var ude=Lg==16,nL=Lg-16,dde=Tue[nL],aL=Be(VA,Bue[nL])+dde;if(M1+aL>NN)break n;for(var fde=ude?eL:0;0<aL--;)ZM[M1++]=fde}}CP=1;break n}CP||(JM.a=3),bN=CP}(bN=bN&&!QA.h)&&(wP=k(nde,ade,8,R1,bP)),bN&&wP!=0?wN=wP:(yN.a=3,wN=0)}if(wN==0)break r;if(sh&&kue[Nn]==1&&(sh=Gc[Wn].g==0),km+=Gc[Wn].g,Wn+=wN,3>=Nn){var L1,_P=fc[0];for(L1=1;L1<Hi;++L1)fc[L1]>_P&&(_P=fc[L1]);Uo+=_P}}if(za.nd=sh,za.Qb=0,sh&&(za.qb=(Kc[3][Nd[3]+0].value<<24|Kc[1][Nd[1]+0].value<<16|Kc[2][Nd[2]+0].value)>>>0,km==0&&256>Kc[0][Nd[0]+0].value&&(za.Qb=1,za.qb+=Kc[0][Nd[0]+0].value<<8)),za.jc=!za.Qb&&6>Uo,za.jc){var CN,ih=za;for(CN=0;CN<Pm;++CN){var HA=CN,$A=ih.pd[HA],_N=ih.G[0][ih.H[0]+HA];256<=_N.value?($A.g=_N.g+256,$A.value=_N.value):($A.g=0,$A.value=0,HA>>=ut(_N,8,$A),HA>>=ut(ih.G[1][ih.H[1]+HA],16,$A),HA>>=ut(ih.G[2][ih.H[2]+HA],0,$A),ut(ih.G[3][ih.H[3]+HA],24,$A))}}}Vi.vc=Jn,Vi.Wb=va,Vi.Ya=$c,Vi.yc=Vc,Br=1;break t}Br=0}if(!(De=Br)){oe.a=3;break e}if(0<Vt){if(nt.ua=1<<Vt,!ee(nt.Wa,Vt)){oe.a=1,De=0;break e}}else nt.ua=0;var EP=oe,sL=Le,hde=Qe,SP=EP.s,IP=SP.xc;if(EP.c=sL,EP.i=hde,SP.md=Ee(sL,IP),SP.wc=IP==0?-1:(1<<IP)-1,z){oe.xb=$ue;break e}if((_t=s(Le*Qe))==null){oe.a=1,De=0;break e}De=(De=Me(oe,_t,0,Le,Qe,Qe,null))&&!ze.h;break e}return De?(_e!=null?_e[0]=_t:(e(_t==null),e(z)),oe.$=0,z||qe(nt)):qe(nt),De}function Xe(N,B){var z=N.c*N.i,oe=z+B+16*B;return e(N.c<=B),N.V=s(oe),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+z+B,1)}function he(N,B){var z=N.C,oe=B-z,_e=N.V,De=N.Ba+N.c*z;for(e(B<=N.l.o);0<oe;){var Le=16<oe?16:oe,Qe=N.l.ma,ze=N.l.width,nt=ze*Le,_t=Qe.ca,Vt=Qe.tb+ze*z,at=N.Ta,St=N.Ua;M(N,Le,_e,De),BM(at,St,_t,Vt,nt),re(Qe,z,z+Le,_t,Vt,ze),oe-=Le,_e+=Le*N.c,z+=Le}e(z==B),N.C=N.Ma=B}function He(){this.ub=this.yd=this.td=this.Rb=0}function Ye(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ct(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Nt(){this.Yb=function(){var N=[];return function B(z,oe,_e){for(var De=_e[oe],Le=0;Le<De&&(z.push(_e.length>oe+1?[]:0),!(_e.length<oe+1));Le++)B(z[Le],oe+1,_e)}(N,0,[3,11]),N}()}function It(){this.jb=s(3),this.Wc=l([4,8],Nt),this.Xc=l([4,17],Nt)}function hr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ot(){this.ld=this.La=this.dd=this.tc=0}function Ft(){this.Na=this.la=0}function lr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ir(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Pt(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ot),this.Y=0,this.ya=Array(new ir),this.aa=0,this.l=new Qr}function mr(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Fr(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new He,this.Kc=new Ye,this.ed=new hr,this.Qa=new ct,this.Ic=this.$c=this.Aa=0,this.D=new Pt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,O),this.ia=0,this.pb=o(4,lr),this.Pa=new It,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new mr),this.Hd=0,this.rb=Array(new Ft),this.sb=0,this.wa=Array(new Ot),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ir),this.L=this.aa=0,this.gd=l([4,2],Ot),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function jr(N,B){return 0>N?0:N>B?B:N}function Qr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Dr(){var N=new Fr;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,O1||(O1=wr)),N}function nn(N,B,z){return N.a==0&&(N.a=B,N.sc=z,N.cb=0),0}function zn(N,B,z){return 3<=z&&N[B+0]==157&&N[B+1]==1&&N[B+2]==42}function xt(N,B){if(N==null)return 0;if(N.a=0,N.sc="OK",B==null)return nn(N,2,"null VP8Io passed to VP8GetHeaders()");var z=B.data,oe=B.w,_e=B.ha;if(4>_e)return nn(N,7,"Truncated header.");var De=z[oe+0]|z[oe+1]<<8|z[oe+2]<<16,Le=N.Od;if(Le.Rb=!(1&De),Le.td=De>>1&7,Le.yd=De>>4&1,Le.ub=De>>5,3<Le.td)return nn(N,3,"Incorrect keyframe parameters.");if(!Le.yd)return nn(N,4,"Frame not displayable.");oe+=3,_e-=3;var Qe=N.Kc;if(Le.Rb){if(7>_e)return nn(N,7,"cannot parse picture header");if(!zn(z,oe,_e))return nn(N,3,"Bad code word");Qe.c=16383&(z[oe+4]<<8|z[oe+3]),Qe.Td=z[oe+4]>>6,Qe.i=16383&(z[oe+6]<<8|z[oe+5]),Qe.Ud=z[oe+6]>>6,oe+=7,_e-=7,N.za=Qe.c+15>>4,N.Ub=Qe.i+15>>4,B.width=Qe.c,B.height=Qe.i,B.Da=0,B.j=0,B.v=0,B.va=B.width,B.o=B.height,B.da=0,B.ib=B.width,B.hb=B.height,B.U=B.width,B.T=B.height,a((De=N.Pa).jb,0,255,De.jb.length),e((De=N.Qa)!=null),De.Cb=0,De.Bb=0,De.Fb=1,a(De.Zb,0,0,De.Zb.length),a(De.Lb,0,0,De.Lb)}if(Le.ub>_e)return nn(N,7,"bad partition length");Ae(De=N.m,z,oe,Le.ub),oe+=Le.ub,_e-=Le.ub,Le.Rb&&(Qe.Ld=H(De),Qe.Kd=H(De)),Qe=N.Qa;var ze,nt=N.Pa;if(e(De!=null),e(Qe!=null),Qe.Cb=H(De),Qe.Cb){if(Qe.Bb=H(De),H(De)){for(Qe.Fb=H(De),ze=0;4>ze;++ze)Qe.Zb[ze]=H(De)?pe(De,7):0;for(ze=0;4>ze;++ze)Qe.Lb[ze]=H(De)?pe(De,6):0}if(Qe.Bb)for(ze=0;3>ze;++ze)nt.jb[ze]=H(De)?me(De,8):255}else Qe.Bb=0;if(De.Ka)return nn(N,3,"cannot parse segment header");if((Qe=N.ed).zd=H(De),Qe.Tb=me(De,6),Qe.wb=me(De,3),Qe.Pc=H(De),Qe.Pc&&H(De)){for(nt=0;4>nt;++nt)H(De)&&(Qe.vd[nt]=pe(De,6));for(nt=0;4>nt;++nt)H(De)&&(Qe.od[nt]=pe(De,6))}if(N.L=Qe.Tb==0?0:Qe.zd?1:2,De.Ka)return nn(N,3,"cannot parse filter header");var _t=_e;if(_e=ze=oe,oe=ze+_t,Qe=_t,N.Xb=(1<<me(N.m,2))-1,_t<3*(nt=N.Xb))z=7;else{for(ze+=3*nt,Qe-=3*nt,_t=0;_t<nt;++_t){var Vt=z[_e+0]|z[_e+1]<<8|z[_e+2]<<16;Vt>Qe&&(Vt=Qe),Ae(N.Jc[+_t],z,ze,Vt),ze+=Vt,Qe-=Vt,_e+=3}Ae(N.Jc[+nt],z,ze,Qe),z=ze<oe?0:5}if(z!=0)return nn(N,z,"cannot parse partitions");for(z=me(ze=N.m,7),_e=H(ze)?pe(ze,4):0,oe=H(ze)?pe(ze,4):0,Qe=H(ze)?pe(ze,4):0,nt=H(ze)?pe(ze,4):0,ze=H(ze)?pe(ze,4):0,_t=N.Qa,Vt=0;4>Vt;++Vt){if(_t.Cb){var at=_t.Zb[Vt];_t.Fb||(at+=z)}else{if(0<Vt){N.pb[Vt]=N.pb[0];continue}at=z}var St=N.pb[Vt];St.Sc[0]=xP[jr(at+_e,127)],St.Sc[1]=vP[jr(at+0,127)],St.Eb[0]=2*xP[jr(at+oe,127)],St.Eb[1]=101581*vP[jr(at+Qe,127)]>>16,8>St.Eb[1]&&(St.Eb[1]=8),St.Qc[0]=xP[jr(at+nt,117)],St.Qc[1]=vP[jr(at+ze,127)],St.lc=at+ze}if(!Le.Rb)return nn(N,4,"Not a key frame.");for(H(De),Le=N.Pa,z=0;4>z;++z){for(_e=0;8>_e;++_e)for(oe=0;3>oe;++oe)for(Qe=0;11>Qe;++Qe)nt=te(De,Vue[z][_e][oe][Qe])?me(De,8):Uue[z][_e][oe][Qe],Le.Wc[z][_e].Yb[oe][Qe]=nt;for(_e=0;17>_e;++_e)Le.Xc[z][_e]=Le.Wc[z][Hue[_e]]}return N.kc=H(De),N.kc&&(N.Bd=me(De,8)),N.cb=1}function wr(N,B,z,oe,_e,De,Le){var Qe=B[_e].Yb[z];for(z=0;16>_e;++_e){if(!te(N,Qe[z+0]))return _e;for(;!te(N,Qe[z+1]);)if(Qe=B[++_e].Yb[0],z=0,_e==16)return 16;var ze=B[_e+1].Yb;if(te(N,Qe[z+2])){var nt=N,_t=0;if(te(nt,(at=Qe)[(Vt=z)+3]))if(te(nt,at[Vt+6])){for(Qe=0,Vt=2*(_t=te(nt,at[Vt+8]))+(at=te(nt,at[Vt+9+_t])),_t=0,at=Mue[Vt];at[Qe];++Qe)_t+=_t+te(nt,at[Qe]);_t+=3+(8<<Vt)}else te(nt,at[Vt+7])?(_t=7+2*te(nt,165),_t+=te(nt,145)):_t=5+te(nt,159);else _t=te(nt,at[Vt+4])?3+te(nt,at[Vt+5]):2;Qe=ze[2]}else _t=1,Qe=ze[1];ze=Le+Lue[_e],0>(nt=N).b&&R(nt);var Vt,at=nt.b,St=(Vt=nt.Ca>>1)-(nt.I>>at)>>31;--nt.b,nt.Ca+=St,nt.Ca|=1,nt.I-=(Vt+1&St)<<at,De[ze]=((_t^St)-St)*oe[(0<_e)+0]}return 16}function st(N){var B=N.rb[N.sb-1];B.la=0,B.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function Mt(N,B,z,oe,_e){_e=N[B+z+32*oe]+(_e>>3),N[B+z+32*oe]=-256&_e?0>_e?0:255:_e}function $t(N,B,z,oe,_e,De){Mt(N,B,0,z,oe+_e),Mt(N,B,1,z,oe+De),Mt(N,B,2,z,oe-De),Mt(N,B,3,z,oe-_e)}function Dt(N){return(20091*N>>16)+N}function kt(N,B,z,oe){var _e,De=0,Le=s(16);for(_e=0;4>_e;++_e){var Qe=N[B+0]+N[B+8],ze=N[B+0]-N[B+8],nt=(35468*N[B+4]>>16)-Dt(N[B+12]),_t=Dt(N[B+4])+(35468*N[B+12]>>16);Le[De+0]=Qe+_t,Le[De+1]=ze+nt,Le[De+2]=ze-nt,Le[De+3]=Qe-_t,De+=4,B++}for(_e=De=0;4>_e;++_e)Qe=(N=Le[De+0]+4)+Le[De+8],ze=N-Le[De+8],nt=(35468*Le[De+4]>>16)-Dt(Le[De+12]),Mt(z,oe,0,0,Qe+(_t=Dt(Le[De+4])+(35468*Le[De+12]>>16))),Mt(z,oe,1,0,ze+nt),Mt(z,oe,2,0,ze-nt),Mt(z,oe,3,0,Qe-_t),De++,oe+=32}function qt(N,B,z,oe){var _e=N[B+0]+4,De=35468*N[B+4]>>16,Le=Dt(N[B+4]),Qe=35468*N[B+1]>>16;$t(z,oe,0,_e+Le,N=Dt(N[B+1]),Qe),$t(z,oe,1,_e+De,N,Qe),$t(z,oe,2,_e-De,N,Qe),$t(z,oe,3,_e-Le,N,Qe)}function Xt(N,B,z,oe,_e){kt(N,B,z,oe),_e&&kt(N,B+16,z,oe+4)}function Wt(N,B,z,oe){Tm(N,B+0,z,oe,1),Tm(N,B+32,z,oe+128,1)}function vr(N,B,z,oe){var _e;for(N=N[B+0]+4,_e=0;4>_e;++_e)for(B=0;4>B;++B)Mt(z,oe,B,_e,N)}function Nr(N,B,z,oe){N[B+0]&&ma(N,B+0,z,oe),N[B+16]&&ma(N,B+16,z,oe+4),N[B+32]&&ma(N,B+32,z,oe+128),N[B+48]&&ma(N,B+48,z,oe+128+4)}function Vr(N,B,z,oe){var _e,De=s(16);for(_e=0;4>_e;++_e){var Le=N[B+0+_e]+N[B+12+_e],Qe=N[B+4+_e]+N[B+8+_e],ze=N[B+4+_e]-N[B+8+_e],nt=N[B+0+_e]-N[B+12+_e];De[0+_e]=Le+Qe,De[8+_e]=Le-Qe,De[4+_e]=nt+ze,De[12+_e]=nt-ze}for(_e=0;4>_e;++_e)Le=(N=De[0+4*_e]+3)+De[3+4*_e],Qe=De[1+4*_e]+De[2+4*_e],ze=De[1+4*_e]-De[2+4*_e],nt=N-De[3+4*_e],z[oe+0]=Le+Qe>>3,z[oe+16]=nt+ze>>3,z[oe+32]=Le-Qe>>3,z[oe+48]=nt-ze>>3,oe+=64}function Gn(N,B,z){var oe,_e=B-32,De=Qc,Le=255-N[_e-1];for(oe=0;oe<z;++oe){var Qe,ze=De,nt=Le+N[B-1];for(Qe=0;Qe<z;++Qe)N[B+Qe]=ze[nt+N[_e+Qe]];B+=32}}function qs(N,B){Gn(N,B,4)}function ts(N,B){Gn(N,B,8)}function rs(N,B){Gn(N,B,16)}function Ml(N,B){var z;for(z=0;16>z;++z)n(N,B+32*z,N,B-32,16)}function yu(N,B){var z;for(z=16;0<z;--z)a(N,B,N[B-1],16),B+=32}function zs(N,B,z){var oe;for(oe=0;16>oe;++oe)a(B,z+32*oe,N,16)}function Ll(N,B){var z,oe=16;for(z=0;16>z;++z)oe+=N[B-1+32*z]+N[B+z-32];zs(oe>>5,N,B)}function Dc(N,B){var z,oe=8;for(z=0;16>z;++z)oe+=N[B-1+32*z];zs(oe>>4,N,B)}function gd(N,B){var z,oe=8;for(z=0;16>z;++z)oe+=N[B+z-32];zs(oe>>4,N,B)}function Fg(N,B){zs(128,N,B)}function un(N,B,z){return N+2*B+z+2>>2}function w1(N,B){var z,oe=B-32;for(oe=new Uint8Array([un(N[oe-1],N[oe+0],N[oe+1]),un(N[oe+0],N[oe+1],N[oe+2]),un(N[oe+1],N[oe+2],N[oe+3]),un(N[oe+2],N[oe+3],N[oe+4])]),z=0;4>z;++z)n(N,B+32*z,oe,0,oe.length)}function N1(N,B){var z=N[B-1],oe=N[B-1+32],_e=N[B-1+64],De=N[B-1+96];ye(N,B+0,16843009*un(N[B-1-32],z,oe)),ye(N,B+32,16843009*un(z,oe,_e)),ye(N,B+64,16843009*un(oe,_e,De)),ye(N,B+96,16843009*un(_e,De,De))}function C1(N,B){var z,oe=4;for(z=0;4>z;++z)oe+=N[B+z-32]+N[B-1+32*z];for(oe>>=3,z=0;4>z;++z)a(N,B+32*z,oe,4)}function Ao(N,B){var z=N[B-1+0],oe=N[B-1+32],_e=N[B-1+64],De=N[B-1-32],Le=N[B+0-32],Qe=N[B+1-32],ze=N[B+2-32],nt=N[B+3-32];N[B+0+96]=un(oe,_e,N[B-1+96]),N[B+1+96]=N[B+0+64]=un(z,oe,_e),N[B+2+96]=N[B+1+64]=N[B+0+32]=un(De,z,oe),N[B+3+96]=N[B+2+64]=N[B+1+32]=N[B+0+0]=un(Le,De,z),N[B+3+64]=N[B+2+32]=N[B+1+0]=un(Qe,Le,De),N[B+3+32]=N[B+2+0]=un(ze,Qe,Le),N[B+3+0]=un(nt,ze,Qe)}function xd(N,B){var z=N[B+1-32],oe=N[B+2-32],_e=N[B+3-32],De=N[B+4-32],Le=N[B+5-32],Qe=N[B+6-32],ze=N[B+7-32];N[B+0+0]=un(N[B+0-32],z,oe),N[B+1+0]=N[B+0+32]=un(z,oe,_e),N[B+2+0]=N[B+1+32]=N[B+0+64]=un(oe,_e,De),N[B+3+0]=N[B+2+32]=N[B+1+64]=N[B+0+96]=un(_e,De,Le),N[B+3+32]=N[B+2+64]=N[B+1+96]=un(De,Le,Qe),N[B+3+64]=N[B+2+96]=un(Le,Qe,ze),N[B+3+96]=un(Qe,ze,ze)}function _1(N,B){var z=N[B-1+0],oe=N[B-1+32],_e=N[B-1+64],De=N[B-1-32],Le=N[B+0-32],Qe=N[B+1-32],ze=N[B+2-32],nt=N[B+3-32];N[B+0+0]=N[B+1+64]=De+Le+1>>1,N[B+1+0]=N[B+2+64]=Le+Qe+1>>1,N[B+2+0]=N[B+3+64]=Qe+ze+1>>1,N[B+3+0]=ze+nt+1>>1,N[B+0+96]=un(_e,oe,z),N[B+0+64]=un(oe,z,De),N[B+0+32]=N[B+1+96]=un(z,De,Le),N[B+1+32]=N[B+2+96]=un(De,Le,Qe),N[B+2+32]=N[B+3+96]=un(Le,Qe,ze),N[B+3+32]=un(Qe,ze,nt)}function IA(N,B){var z=N[B+0-32],oe=N[B+1-32],_e=N[B+2-32],De=N[B+3-32],Le=N[B+4-32],Qe=N[B+5-32],ze=N[B+6-32],nt=N[B+7-32];N[B+0+0]=z+oe+1>>1,N[B+1+0]=N[B+0+64]=oe+_e+1>>1,N[B+2+0]=N[B+1+64]=_e+De+1>>1,N[B+3+0]=N[B+2+64]=De+Le+1>>1,N[B+0+32]=un(z,oe,_e),N[B+1+32]=N[B+0+96]=un(oe,_e,De),N[B+2+32]=N[B+1+96]=un(_e,De,Le),N[B+3+32]=N[B+2+96]=un(De,Le,Qe),N[B+3+64]=un(Le,Qe,ze),N[B+3+96]=un(Qe,ze,nt)}function vd(N,B){var z=N[B-1+0],oe=N[B-1+32],_e=N[B-1+64],De=N[B-1+96];N[B+0+0]=z+oe+1>>1,N[B+2+0]=N[B+0+32]=oe+_e+1>>1,N[B+2+32]=N[B+0+64]=_e+De+1>>1,N[B+1+0]=un(z,oe,_e),N[B+3+0]=N[B+1+32]=un(oe,_e,De),N[B+3+32]=N[B+1+64]=un(_e,De,De),N[B+3+64]=N[B+2+64]=N[B+0+96]=N[B+1+96]=N[B+2+96]=N[B+3+96]=De}function jA(N,B){var z=N[B-1+0],oe=N[B-1+32],_e=N[B-1+64],De=N[B-1+96],Le=N[B-1-32],Qe=N[B+0-32],ze=N[B+1-32],nt=N[B+2-32];N[B+0+0]=N[B+2+32]=z+Le+1>>1,N[B+0+32]=N[B+2+64]=oe+z+1>>1,N[B+0+64]=N[B+2+96]=_e+oe+1>>1,N[B+0+96]=De+_e+1>>1,N[B+3+0]=un(Qe,ze,nt),N[B+2+0]=un(Le,Qe,ze),N[B+1+0]=N[B+3+32]=un(z,Le,Qe),N[B+1+32]=N[B+3+64]=un(oe,z,Le),N[B+1+64]=N[B+3+96]=un(_e,oe,z),N[B+1+96]=un(De,_e,oe)}function Rc(N,B){var z;for(z=0;8>z;++z)n(N,B+32*z,N,B-32,8)}function eh(N,B){var z;for(z=0;8>z;++z)a(N,B,N[B-1],8),B+=32}function bu(N,B,z){var oe;for(oe=0;8>oe;++oe)a(B,z+32*oe,N,8)}function Em(N,B){var z,oe=8;for(z=0;8>z;++z)oe+=N[B+z-32]+N[B-1+32*z];bu(oe>>4,N,B)}function Fa(N,B){var z,oe=4;for(z=0;8>z;++z)oe+=N[B+z-32];bu(oe>>3,N,B)}function Sm(N,B){var z,oe=4;for(z=0;8>z;++z)oe+=N[B-1+32*z];bu(oe>>3,N,B)}function Og(N,B){bu(128,N,B)}function wu(N,B,z){var oe=N[B-z],_e=N[B+0],De=3*(_e-oe)+hP[1020+N[B-2*z]-N[B+z]],Le=uN[112+(De+4>>3)];N[B-z]=Qc[255+oe+uN[112+(De+3>>3)]],N[B+0]=Qc[255+_e-Le]}function PA(N,B,z,oe){var _e=N[B+0],De=N[B+z];return Iu[255+N[B-2*z]-N[B-z]]>oe||Iu[255+De-_e]>oe}function th(N,B,z,oe){return 4*Iu[255+N[B-z]-N[B+0]]+Iu[255+N[B-2*z]-N[B+z]]<=oe}function uf(N,B,z,oe,_e){var De=N[B-3*z],Le=N[B-2*z],Qe=N[B-z],ze=N[B+0],nt=N[B+z],_t=N[B+2*z],Vt=N[B+3*z];return 4*Iu[255+Qe-ze]+Iu[255+Le-nt]>oe?0:Iu[255+N[B-4*z]-De]<=_e&&Iu[255+De-Le]<=_e&&Iu[255+Le-Qe]<=_e&&Iu[255+Vt-_t]<=_e&&Iu[255+_t-nt]<=_e&&Iu[255+nt-ze]<=_e}function df(N,B,z,oe){var _e=2*oe+1;for(oe=0;16>oe;++oe)th(N,B+oe,z,_e)&&wu(N,B+oe,z)}function Ul(N,B,z,oe){var _e=2*oe+1;for(oe=0;16>oe;++oe)th(N,B+oe*z,1,_e)&&wu(N,B+oe*z,1)}function Im(N,B,z,oe){var _e;for(_e=3;0<_e;--_e)df(N,B+=4*z,z,oe)}function Dg(N,B,z,oe){var _e;for(_e=3;0<_e;--_e)Ul(N,B+=4,z,oe)}function Ql(N,B,z,oe,_e,De,Le,Qe){for(De=2*De+1;0<_e--;){if(uf(N,B,z,De,Le))if(PA(N,B,z,Qe))wu(N,B,z);else{var ze=N,nt=B,_t=z,Vt=ze[nt-2*_t],at=ze[nt-_t],St=ze[nt+0],Tt=ze[nt+_t],Zt=ze[nt+2*_t],Ut=27*(ar=hP[1020+3*(St-at)+hP[1020+Vt-Tt]])+63>>7,rr=18*ar+63>>7,ar=9*ar+63>>7;ze[nt-3*_t]=Qc[255+ze[nt-3*_t]+ar],ze[nt-2*_t]=Qc[255+Vt+rr],ze[nt-_t]=Qc[255+at+Ut],ze[nt+0]=Qc[255+St-Ut],ze[nt+_t]=Qc[255+Tt-rr],ze[nt+2*_t]=Qc[255+Zt-ar]}B+=oe}}function Nu(N,B,z,oe,_e,De,Le,Qe){for(De=2*De+1;0<_e--;){if(uf(N,B,z,De,Le))if(PA(N,B,z,Qe))wu(N,B,z);else{var ze=N,nt=B,_t=z,Vt=ze[nt-_t],at=ze[nt+0],St=ze[nt+_t],Tt=uN[112+(4+(Zt=3*(at-Vt))>>3)],Zt=uN[112+(Zt+3>>3)],Ut=Tt+1>>1;ze[nt-2*_t]=Qc[255+ze[nt-2*_t]+Ut],ze[nt-_t]=Qc[255+Vt+Zt],ze[nt+0]=Qc[255+at-Tt],ze[nt+_t]=Qc[255+St-Ut]}B+=oe}}function BA(N,B,z,oe,_e,De){Ql(N,B,z,1,16,oe,_e,De)}function Cu(N,B,z,oe,_e,De){Ql(N,B,1,z,16,oe,_e,De)}function jm(N,B,z,oe,_e,De){var Le;for(Le=3;0<Le;--Le)Nu(N,B+=4*z,z,1,16,oe,_e,De)}function V(N,B,z,oe,_e,De){var Le;for(Le=3;0<Le;--Le)Nu(N,B+=4,1,z,16,oe,_e,De)}function Ce(N,B,z,oe,_e,De,Le,Qe){Ql(N,B,_e,1,8,De,Le,Qe),Ql(z,oe,_e,1,8,De,Le,Qe)}function rt(N,B,z,oe,_e,De,Le,Qe){Ql(N,B,1,_e,8,De,Le,Qe),Ql(z,oe,1,_e,8,De,Le,Qe)}function vt(N,B,z,oe,_e,De,Le,Qe){Nu(N,B+4*_e,_e,1,8,De,Le,Qe),Nu(z,oe+4*_e,_e,1,8,De,Le,Qe)}function jt(N,B,z,oe,_e,De,Le,Qe){Nu(N,B+4,1,_e,8,De,Le,Qe),Nu(z,oe+4,1,_e,8,De,Le,Qe)}function tr(){this.ba=new ce,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function or(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Rr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Kr(){this.ua=0,this.Wa=new ue,this.vb=new ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new fe,this.yc=new D}function dn(){this.xb=this.a=0,this.l=new Qr,this.ca=new ce,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Kr,this.ab=0,this.gc=o(4,Rr),this.Oc=0}function yn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Un(N,B,z,oe,_e,De,Le){for(N=N==null?0:N[B+0],B=0;B<Le;++B)_e[De+B]=N+z[oe+B]&255,N=_e[De+B]}function ca(N,B,z,oe,_e,De,Le){var Qe;if(N==null)Un(null,null,z,oe,_e,De,Le);else for(Qe=0;Qe<Le;++Qe)_e[De+Qe]=N[B+Qe]+z[oe+Qe]&255}function Is(N,B,z,oe,_e,De,Le){if(N==null)Un(null,null,z,oe,_e,De,Le);else{var Qe,ze=N[B+0],nt=ze,_t=ze;for(Qe=0;Qe<Le;++Qe)nt=_t+(ze=N[B+Qe])-nt,_t=z[oe+Qe]+(-256&nt?0>nt?0:255:nt)&255,nt=ze,_e[De+Qe]=_t}}function xa(N,B,z,oe){var _e=B.width,De=B.o;if(e(N!=null&&B!=null),0>z||0>=oe||z+oe>De)return null;if(!N.Cc){if(N.ga==null){var Le;if(N.ga=new yn,(Le=N.ga==null)||(Le=B.width*B.o,e(N.Gb.length==0),N.Gb=s(Le),N.Uc=0,N.Gb==null?Le=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Le=1),Le=!Le),!Le){Le=N.ga;var Qe=N.Fa,ze=N.P,nt=N.qc,_t=N.mb,Vt=N.nb,at=ze+1,St=nt-1,Tt=Le.l;if(e(Qe!=null&&_t!=null&&B!=null),UA[0]=null,UA[1]=Un,UA[2]=ca,UA[3]=Is,Le.ca=_t,Le.tb=Vt,Le.c=B.width,Le.i=B.height,e(0<Le.c&&0<Le.i),1>=nt)B=0;else if(Le.$a=3&Qe[ze+0],Le.Z=Qe[ze+0]>>2&3,Le.Lc=Qe[ze+0]>>4&3,ze=Qe[ze+0]>>6&3,0>Le.$a||1<Le.$a||4<=Le.Z||1<Le.Lc||ze)B=0;else if(Tt.put=Se,Tt.ac=ot,Tt.bc=ht,Tt.ma=Le,Tt.width=B.width,Tt.height=B.height,Tt.Da=B.Da,Tt.v=B.v,Tt.va=B.va,Tt.j=B.j,Tt.o=B.o,Le.$a)e:{e(Le.$a==1),B=lt();t:for(;;){if(B==null){B=0;break e}if(e(Le!=null),Le.mc=B,B.c=Le.c,B.i=Le.i,B.l=Le.l,B.l.ma=Le,B.l.width=Le.c,B.l.height=Le.i,B.a=0,ne(B.m,Qe,at,St),!Fe(Le.c,Le.i,1,B,null)||(B.ab==1&&B.gc[0].hc==3&&K(B.s)?(Le.ic=1,Qe=B.c*B.i,B.Ta=null,B.Ua=0,B.V=s(Qe),B.Ba=0,B.V==null?(B.a=1,B=0):B=1):(Le.ic=0,B=Xe(B,Le.c)),!B))break t;B=1;break e}Le.mc=null,B=0}else B=St>=Le.c*Le.i;Le=!B}if(Le)return null;N.ga.Lc!=1?N.Ga=0:oe=De-z}e(N.ga!=null),e(z+oe<=De);e:{if(B=(Qe=N.ga).c,De=Qe.l.o,Qe.$a==0){if(at=N.rc,St=N.Vc,Tt=N.Fa,ze=N.P+1+z*B,nt=N.mb,_t=N.nb+z*B,e(ze<=N.P+N.qc),Qe.Z!=0)for(e(UA[Qe.Z]!=null),Le=0;Le<oe;++Le)UA[Qe.Z](at,St,Tt,ze,nt,_t,B),at=nt,St=_t,_t+=B,ze+=B;else for(Le=0;Le<oe;++Le)n(nt,_t,Tt,ze,B),at=nt,St=_t,_t+=B,ze+=B;N.rc=at,N.Vc=St}else{if(e(Qe.mc!=null),B=z+oe,e((Le=Qe.mc)!=null),e(B<=Le.i),Le.C>=B)B=1;else if(Qe.ic||uc(),Qe.ic){Qe=Le.V,at=Le.Ba,St=Le.c;var Zt=Le.i,Ut=(Tt=1,ze=Le.$/St,nt=Le.$%St,_t=Le.m,Vt=Le.s,Le.$),rr=St*Zt,ar=St*B,Ar=Vt.wc,dr=Ut<ar?T(Vt,nt,ze):null;e(Ut<=rr),e(B<=Zt),e(K(Vt));t:for(;;){for(;!_t.h&&Ut<ar;){if(nt&Ar||(dr=T(Vt,nt,ze)),e(dr!=null),Z(_t),256>(Zt=tt(dr.G[0],dr.H[0],_t)))Qe[at+Ut]=Zt,++Ut,++nt>=St&&(nt=0,++ze<=B&&!(ze%16)&&le(Le,ze));else{if(!(280>Zt)){Tt=0;break t}Zt=Te(Zt-256,_t);var Zr,Hr=tt(dr.G[4],dr.H[4],_t);if(Z(_t),!(Ut>=(Hr=Ze(St,Hr=Te(Hr,_t)))&&rr-Ut>=Zt)){Tt=0;break t}for(Zr=0;Zr<Zt;++Zr)Qe[at+Ut+Zr]=Qe[at+Ut+Zr-Hr];for(Ut+=Zt,nt+=Zt;nt>=St;)nt-=St,++ze<=B&&!(ze%16)&&le(Le,ze);Ut<ar&&nt&Ar&&(dr=T(Vt,nt,ze))}e(_t.h==U(_t))}le(Le,ze>B?B:ze);break t}!Tt||_t.h&&Ut<rr?(Tt=0,Le.a=_t.h?5:3):Le.$=Ut,B=Tt}else B=Me(Le,Le.V,Le.Ba,Le.c,Le.i,B,he);if(!B){oe=0;break e}}z+oe>=De&&(N.Cc=1),oe=1}if(!oe)return null;if(N.Cc&&((oe=N.ga)!=null&&(oe.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+z*_e}function Ws(N,B,z,oe,_e,De){for(;0<_e--;){var Le,Qe=N,ze=B+(z?1:0),nt=N,_t=B+(z?0:3);for(Le=0;Le<oe;++Le){var Vt=nt[_t+4*Le];Vt!=255&&(Vt*=32897,Qe[ze+4*Le+0]=Qe[ze+4*Le+0]*Vt>>23,Qe[ze+4*Le+1]=Qe[ze+4*Le+1]*Vt>>23,Qe[ze+4*Le+2]=Qe[ze+4*Le+2]*Vt>>23)}B+=De}}function js(N,B,z,oe,_e){for(;0<oe--;){var De;for(De=0;De<z;++De){var Le=N[B+2*De+0],Qe=15&(nt=N[B+2*De+1]),ze=4369*Qe,nt=(240&nt|nt>>4)*ze>>16;N[B+2*De+0]=(240&Le|Le>>4)*ze>>16&240|(15&Le|Le<<4)*ze>>16>>4&15,N[B+2*De+1]=240&nt|Qe}B+=_e}}function Xs(N,B,z,oe,_e,De,Le,Qe){var ze,nt,_t=255;for(nt=0;nt<_e;++nt){for(ze=0;ze<oe;++ze){var Vt=N[B+ze];De[Le+4*ze]=Vt,_t&=Vt}B+=z,Le+=Qe}return _t!=255}function Ps(N,B,z,oe,_e){var De;for(De=0;De<_e;++De)z[oe+De]=N[B+De]>>8}function uc(){F1=Ws,jM=js,PM=Xs,BM=Ps}function _u(N,B,z){E[N]=function(oe,_e,De,Le,Qe,ze,nt,_t,Vt,at,St,Tt,Zt,Ut,rr,ar,Ar){var dr,Zr=Ar-1>>1,Hr=Qe[ze+0]|nt[_t+0]<<16,En=Vt[at+0]|St[Tt+0]<<16;e(oe!=null);var zr=3*Hr+En+131074>>2;for(B(oe[_e+0],255&zr,zr>>16,Zt,Ut),De!=null&&(zr=3*En+Hr+131074>>2,B(De[Le+0],255&zr,zr>>16,rr,ar)),dr=1;dr<=Zr;++dr){var qn=Qe[ze+dr]|nt[_t+dr]<<16,Qi=Vt[at+dr]|St[Tt+dr]<<16,Sn=Hr+qn+En+Qi+524296,Wr=Sn+2*(qn+En)>>3;zr=Wr+Hr>>1,Hr=(Sn=Sn+2*(Hr+Qi)>>3)+qn>>1,B(oe[_e+2*dr-1],255&zr,zr>>16,Zt,Ut+(2*dr-1)*z),B(oe[_e+2*dr-0],255&Hr,Hr>>16,Zt,Ut+(2*dr-0)*z),De!=null&&(zr=Sn+En>>1,Hr=Wr+Qi>>1,B(De[Le+2*dr-1],255&zr,zr>>16,rr,ar+(2*dr-1)*z),B(De[Le+2*dr+0],255&Hr,Hr>>16,rr,ar+(2*dr+0)*z)),Hr=qn,En=Qi}1&Ar||(zr=3*Hr+En+131074>>2,B(oe[_e+Ar-1],255&zr,zr>>16,Zt,Ut+(Ar-1)*z),De!=null&&(zr=3*En+Hr+131074>>2,B(De[Le+Ar-1],255&zr,zr>>16,rr,ar+(Ar-1)*z)))}}function Eu(){ju[dN]=Gue,ju[fN]=VM,ju[RM]=Kue,ju[hN]=HM,ju[AN]=$M,ju[AP]=GM,ju[MM]=que,ju[mP]=VM,ju[pP]=HM,ju[mN]=$M,ju[gP]=GM}function C(N){return N&-16384?0>N?0:255:N>>zue}function X(N,B){return C((19077*N>>8)+(26149*B>>8)-14234)}function ge(N,B,z){return C((19077*N>>8)-(6419*B>>8)-(13320*z>>8)+8708)}function $e(N,B){return C((19077*N>>8)+(33050*B>>8)-17685)}function Bt(N,B,z,oe,_e){oe[_e+0]=X(N,z),oe[_e+1]=ge(N,B,z),oe[_e+2]=$e(N,B)}function Kt(N,B,z,oe,_e){oe[_e+0]=$e(N,B),oe[_e+1]=ge(N,B,z),oe[_e+2]=X(N,z)}function yr(N,B,z,oe,_e){var De=ge(N,B,z);B=De<<3&224|$e(N,B)>>3,oe[_e+0]=248&X(N,z)|De>>5,oe[_e+1]=B}function Kn(N,B,z,oe,_e){var De=240&$e(N,B)|15;oe[_e+0]=240&X(N,z)|ge(N,B,z)>>4,oe[_e+1]=De}function Bs(N,B,z,oe,_e){oe[_e+0]=255,Bt(N,B,z,oe,_e+1)}function On(N,B,z,oe,_e){Kt(N,B,z,oe,_e),oe[_e+3]=255}function na(N,B,z,oe,_e){Bt(N,B,z,oe,_e),oe[_e+3]=255}function qa(N,B,z){E[N]=function(oe,_e,De,Le,Qe,ze,nt,_t,Vt){for(var at=_t+(-2&Vt)*z;_t!=at;)B(oe[_e+0],De[Le+0],Qe[ze+0],nt,_t),B(oe[_e+1],De[Le+0],Qe[ze+0],nt,_t+z),_e+=2,++Le,++ze,_t+=2*z;1&Vt&&B(oe[_e+0],De[Le+0],Qe[ze+0],nt,_t)}}function Mc(N,B,z){return z==0?N==0?B==0?6:5:B==0?4:0:z}function cl(N,B,z,oe,_e){switch(N>>>30){case 3:Tm(B,z,oe,_e,0);break;case 2:Su(B,z,oe,_e);break;case 1:ma(B,z,oe,_e)}}function Ro(N,B){var z,oe,_e=B.M,De=B.Nb,Le=N.oc,Qe=N.pc+40,ze=N.oc,nt=N.pc+584,_t=N.oc,Vt=N.pc+600;for(z=0;16>z;++z)Le[Qe+32*z-1]=129;for(z=0;8>z;++z)ze[nt+32*z-1]=129,_t[Vt+32*z-1]=129;for(0<_e?Le[Qe-1-32]=ze[nt-1-32]=_t[Vt-1-32]=129:(a(Le,Qe-32-1,127,21),a(ze,nt-32-1,127,9),a(_t,Vt-32-1,127,9)),oe=0;oe<N.za;++oe){var at=B.ya[B.aa+oe];if(0<oe){for(z=-1;16>z;++z)n(Le,Qe+32*z-4,Le,Qe+32*z+12,4);for(z=-1;8>z;++z)n(ze,nt+32*z-4,ze,nt+32*z+4,4),n(_t,Vt+32*z-4,_t,Vt+32*z+4,4)}var St=N.Gd,Tt=N.Hd+oe,Zt=at.ad,Ut=at.Hc;if(0<_e&&(n(Le,Qe-32,St[Tt].y,0,16),n(ze,nt-32,St[Tt].f,0,8),n(_t,Vt-32,St[Tt].ea,0,8)),at.Za){var rr=Le,ar=Qe-32+16;for(0<_e&&(oe>=N.za-1?a(rr,ar,St[Tt].y[15],4):n(rr,ar,St[Tt+1].y,0,4)),z=0;4>z;z++)rr[ar+128+z]=rr[ar+256+z]=rr[ar+384+z]=rr[ar+0+z];for(z=0;16>z;++z,Ut<<=2)rr=Le,ar=Qe+qM[z],bd[at.Ob[z]](rr,ar),cl(Ut,Zt,16*+z,rr,ar)}else if(rr=Mc(oe,_e,at.Ob[0]),LA[rr](Le,Qe),Ut!=0)for(z=0;16>z;++z,Ut<<=2)cl(Ut,Zt,16*+z,Le,Qe+qM[z]);for(z=at.Gc,rr=Mc(oe,_e,at.Dd),ah[rr](ze,nt),ah[rr](_t,Vt),Ut=Zt,rr=ze,ar=nt,255&(at=0|z)&&(170&at?Af(Ut,256,rr,ar):Ua(Ut,256,rr,ar)),at=_t,Ut=Vt,255&(z>>=8)&&(170&z?Af(Zt,320,at,Ut):Ua(Zt,320,at,Ut)),_e<N.Ub-1&&(n(St[Tt].y,0,Le,Qe+480,16),n(St[Tt].f,0,ze,nt+224,8),n(St[Tt].ea,0,_t,Vt+224,8)),z=8*De*N.B,St=N.sa,Tt=N.ta+16*oe+16*De*N.R,Zt=N.qa,at=N.ra+8*oe+z,Ut=N.Ha,rr=N.Ia+8*oe+z,z=0;16>z;++z)n(St,Tt+z*N.R,Le,Qe+32*z,16);for(z=0;8>z;++z)n(Zt,at+z*N.B,ze,nt+32*z,8),n(Ut,rr+z*N.B,_t,Vt+32*z,8)}}function yd(N,B,z,oe,_e,De,Le,Qe,ze){var nt=[0],_t=[0],Vt=0,at=ze!=null?ze.kd:0,St=ze??new or;if(N==null||12>z)return 7;St.data=N,St.w=B,St.ha=z,B=[B],z=[z],St.gb=[St.gb];e:{var Tt=B,Zt=z,Ut=St.gb;if(e(N!=null),e(Zt!=null),e(Ut!=null),Ut[0]=0,12<=Zt[0]&&!r(N,Tt[0],"RIFF")){if(r(N,Tt[0]+8,"WEBP")){Ut=3;break e}var rr=ie(N,Tt[0]+4);if(12>rr||4294967286<rr){Ut=3;break e}if(at&&rr>Zt[0]-8){Ut=7;break e}Ut[0]=rr,Tt[0]+=12,Zt[0]-=12}Ut=0}if(Ut!=0)return Ut;for(rr=0<St.gb[0],z=z[0];;){e:{var ar=N;Zt=B,Ut=z;var Ar=nt,dr=_t,Zr=Tt=[0];if((zr=Vt=[Vt])[0]=0,8>Ut[0])Ut=7;else{if(!r(ar,Zt[0],"VP8X")){if(ie(ar,Zt[0]+4)!=10){Ut=3;break e}if(18>Ut[0]){Ut=7;break e}var Hr=ie(ar,Zt[0]+8),En=1+Ge(ar,Zt[0]+12);if(2147483648<=En*(ar=1+Ge(ar,Zt[0]+15))){Ut=3;break e}Zr!=null&&(Zr[0]=Hr),Ar!=null&&(Ar[0]=En),dr!=null&&(dr[0]=ar),Zt[0]+=18,Ut[0]-=18,zr[0]=1}Ut=0}}if(Vt=Vt[0],Tt=Tt[0],Ut!=0)return Ut;if(Zt=!!(2&Tt),!rr&&Vt)return 3;if(De!=null&&(De[0]=!!(16&Tt)),Le!=null&&(Le[0]=Zt),Qe!=null&&(Qe[0]=0),Le=nt[0],Tt=_t[0],Vt&&Zt&&ze==null){Ut=0;break}if(4>z){Ut=7;break}if(rr&&Vt||!rr&&!Vt&&!r(N,B[0],"ALPH")){z=[z],St.na=[St.na],St.P=[St.P],St.Sa=[St.Sa];e:{Hr=N,Ut=B,rr=z;var zr=St.gb;Ar=St.na,dr=St.P,Zr=St.Sa,En=22,e(Hr!=null),e(rr!=null),ar=Ut[0];var qn=rr[0];for(e(Ar!=null),e(Zr!=null),Ar[0]=null,dr[0]=null,Zr[0]=0;;){if(Ut[0]=ar,rr[0]=qn,8>qn){Ut=7;break e}var Qi=ie(Hr,ar+4);if(4294967286<Qi){Ut=3;break e}var Sn=8+Qi+1&-2;if(En+=Sn,0<zr&&En>zr){Ut=3;break e}if(!r(Hr,ar,"VP8 ")||!r(Hr,ar,"VP8L")){Ut=0;break e}if(qn[0]<Sn){Ut=7;break e}r(Hr,ar,"ALPH")||(Ar[0]=Hr,dr[0]=ar+8,Zr[0]=Qi),ar+=Sn,qn-=Sn}}if(z=z[0],St.na=St.na[0],St.P=St.P[0],St.Sa=St.Sa[0],Ut!=0)break}z=[z],St.Ja=[St.Ja],St.xa=[St.xa];e:if(zr=N,Ut=B,rr=z,Ar=St.gb[0],dr=St.Ja,Zr=St.xa,Hr=Ut[0],ar=!r(zr,Hr,"VP8 "),En=!r(zr,Hr,"VP8L"),e(zr!=null),e(rr!=null),e(dr!=null),e(Zr!=null),8>rr[0])Ut=7;else{if(ar||En){if(zr=ie(zr,Hr+4),12<=Ar&&zr>Ar-12){Ut=3;break e}if(at&&zr>rr[0]-8){Ut=7;break e}dr[0]=zr,Ut[0]+=8,rr[0]-=8,Zr[0]=En}else Zr[0]=5<=rr[0]&&zr[Hr+0]==47&&!(zr[Hr+4]>>5),dr[0]=rr[0];Ut=0}if(z=z[0],St.Ja=St.Ja[0],St.xa=St.xa[0],B=B[0],Ut!=0)break;if(4294967286<St.Ja)return 3;if(Qe==null||Zt||(Qe[0]=St.xa?2:1),Le=[Le],Tt=[Tt],St.xa){if(5>z){Ut=7;break}Qe=Le,at=Tt,Zt=De,N==null||5>z?N=0:5<=z&&N[B+0]==47&&!(N[B+4]>>5)?(rr=[0],zr=[0],Ar=[0],ne(dr=new G,N,B,z),W(dr,rr,zr,Ar)?(Qe!=null&&(Qe[0]=rr[0]),at!=null&&(at[0]=zr[0]),Zt!=null&&(Zt[0]=Ar[0]),N=1):N=0):N=0}else{if(10>z){Ut=7;break}Qe=Tt,N==null||10>z||!zn(N,B+3,z-3)?N=0:(at=N[B+0]|N[B+1]<<8|N[B+2]<<16,Zt=16383&(N[B+7]<<8|N[B+6]),N=16383&(N[B+9]<<8|N[B+8]),1&at||3<(at>>1&7)||!(at>>4&1)||at>>5>=St.Ja||!Zt||!N?N=0:(Le&&(Le[0]=Zt),Qe&&(Qe[0]=N),N=1))}if(!N||(Le=Le[0],Tt=Tt[0],Vt&&(nt[0]!=Le||_t[0]!=Tt)))return 3;ze!=null&&(ze[0]=St,ze.offset=B-ze.w,e(4294967286>B-ze.w),e(ze.offset==ze.ha-z));break}return Ut==0||Ut==7&&Vt&&ze==null?(De!=null&&(De[0]|=St.na!=null&&0<St.na.length),oe!=null&&(oe[0]=Le),_e!=null&&(_e[0]=Tt),0):Ut}function E1(N,B,z){var oe=B.width,_e=B.height,De=0,Le=0,Qe=oe,ze=_e;if(B.Da=N!=null&&0<N.Da,B.Da&&(Qe=N.cd,ze=N.bd,De=N.v,Le=N.j,11>z||(De&=-2,Le&=-2),0>De||0>Le||0>=Qe||0>=ze||De+Qe>oe||Le+ze>_e))return 0;if(B.v=De,B.j=Le,B.va=De+Qe,B.o=Le+ze,B.U=Qe,B.T=ze,B.da=N!=null&&0<N.da,B.da){if(!se(Qe,ze,z=[N.ib],De=[N.hb]))return 0;B.ib=z[0],B.hb=De[0]}return B.ob=N!=null&&N.ob,B.Kb=N==null||!N.Sd,B.da&&(B.ob=B.ib<3*oe/4&&B.hb<3*_e/4,B.Kb=0),1}function S1(N){if(N==null)return 2;if(11>N.S){var B=N.f.RGBA;B.fb+=(N.height-1)*B.A,B.A=-B.A}else B=N.f.kb,N=N.height,B.O+=(N-1)*B.fa,B.fa=-B.fa,B.N+=(N-1>>1)*B.Ab,B.Ab=-B.Ab,B.W+=(N-1>>1)*B.Db,B.Db=-B.Db,B.F!=null&&(B.J+=(N-1)*B.lb,B.lb=-B.lb);return 0}function TA(N,B,z,oe){if(oe==null||0>=N||0>=B)return 2;if(z!=null){if(z.Da){var _e=z.cd,De=z.bd,Le=-2&z.v,Qe=-2&z.j;if(0>Le||0>Qe||0>=_e||0>=De||Le+_e>N||Qe+De>B)return 2;N=_e,B=De}if(z.da){if(!se(N,B,_e=[z.ib],De=[z.hb]))return 2;N=_e[0],B=De[0]}}oe.width=N,oe.height=B;e:{var ze=oe.width,nt=oe.height;if(N=oe.S,0>=ze||0>=nt||!(N>=dN&&13>N))N=2;else{if(0>=oe.Rd&&oe.sd==null){Le=De=_e=B=0;var _t=(Qe=ze*zM[N])*nt;if(11>N||(De=(nt+1)/2*(B=(ze+1)/2),N==12&&(Le=(_e=ze)*nt)),(nt=s(_t+2*De+Le))==null){N=1;break e}oe.sd=nt,11>N?((ze=oe.f.RGBA).eb=nt,ze.fb=0,ze.A=Qe,ze.size=_t):((ze=oe.f.kb).y=nt,ze.O=0,ze.fa=Qe,ze.Fd=_t,ze.f=nt,ze.N=0+_t,ze.Ab=B,ze.Cd=De,ze.ea=nt,ze.W=0+_t+De,ze.Db=B,ze.Ed=De,N==12&&(ze.F=nt,ze.J=0+_t+2*De),ze.Tc=Le,ze.lb=_e)}if(B=1,_e=oe.S,De=oe.width,Le=oe.height,_e>=dN&&13>_e)if(11>_e)N=oe.f.RGBA,B&=(Qe=Math.abs(N.A))*(Le-1)+De<=N.size,B&=Qe>=De*zM[_e],B&=N.eb!=null;else{N=oe.f.kb,Qe=(De+1)/2,_t=(Le+1)/2,ze=Math.abs(N.fa),nt=Math.abs(N.Ab);var Vt=Math.abs(N.Db),at=Math.abs(N.lb),St=at*(Le-1)+De;B&=ze*(Le-1)+De<=N.Fd,B&=nt*(_t-1)+Qe<=N.Cd,B=(B&=Vt*(_t-1)+Qe<=N.Ed)&ze>=De&nt>=Qe&Vt>=Qe,B&=N.y!=null,B&=N.f!=null,B&=N.ea!=null,_e==12&&(B&=at>=De,B&=St<=N.Tc,B&=N.F!=null)}else B=0;N=B?0:2}}return N!=0||z!=null&&z.fd&&(N=S1(oe)),N}var Pm=64,Lc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Uc=24,kA=32,rh=8,FA=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];it("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(N){return N},E.Predictor2=function(N,B,z){return B[z+0]},E.Predictor3=function(N,B,z){return B[z+1]},E.Predictor4=function(N,B,z){return B[z-1]},E.Predictor5=function(N,B,z){return pt(pt(N,B[z+1]),B[z+0])},E.Predictor6=function(N,B,z){return pt(N,B[z-1])},E.Predictor7=function(N,B,z){return pt(N,B[z+0])},E.Predictor8=function(N,B,z){return pt(B[z-1],B[z+0])},E.Predictor9=function(N,B,z){return pt(B[z+0],B[z+1])},E.Predictor10=function(N,B,z){return pt(pt(N,B[z-1]),pt(B[z+0],B[z+1]))},E.Predictor11=function(N,B,z){var oe=B[z+0];return 0>=Et(oe>>24&255,N>>24&255,(B=B[z-1])>>24&255)+Et(oe>>16&255,N>>16&255,B>>16&255)+Et(oe>>8&255,N>>8&255,B>>8&255)+Et(255&oe,255&N,255&B)?oe:N},E.Predictor12=function(N,B,z){var oe=B[z+0];return(yt((N>>24&255)+(oe>>24&255)-((B=B[z-1])>>24&255))<<24|yt((N>>16&255)+(oe>>16&255)-(B>>16&255))<<16|yt((N>>8&255)+(oe>>8&255)-(B>>8&255))<<8|yt((255&N)+(255&oe)-(255&B)))>>>0},E.Predictor13=function(N,B,z){var oe=B[z-1];return(Ct((N=pt(N,B[z+0]))>>24&255,oe>>24&255)<<24|Ct(N>>16&255,oe>>16&255)<<16|Ct(N>>8&255,oe>>8&255)<<8|Ct(255&N,255&oe))>>>0};var I1=E.PredictorAdd0;E.PredictorAdd1=Re,it("Predictor2","PredictorAdd2"),it("Predictor3","PredictorAdd3"),it("Predictor4","PredictorAdd4"),it("Predictor5","PredictorAdd5"),it("Predictor6","PredictorAdd6"),it("Predictor7","PredictorAdd7"),it("Predictor8","PredictorAdd8"),it("Predictor9","PredictorAdd9"),it("Predictor10","PredictorAdd10"),it("Predictor11","PredictorAdd11"),it("Predictor12","PredictorAdd12"),it("Predictor13","PredictorAdd13");var Rg=E.PredictorAdd2;de("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),de("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var li,lN=E.ColorIndexInverseTransform,ff=E.MapARGB,hf=E.VP8LColorIndexInverseTransformAlpha,j1=E.MapAlpha,P1=E.VP8LPredictorsAdd=[];P1.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var B1,T1,OA,DA,RA,Bm,MA,Tm,Su,Af,ma,Ua,ci,Ui,nh,k1,Mg,cN,NM,CM,_M,EM,SM,IM,F1,jM,PM,BM,TM=s(511),kM=s(2041),FM=s(225),OM=s(767),DM=0,hP=kM,uN=FM,Qc=OM,Iu=TM,dN=0,fN=1,RM=2,hN=3,AN=4,AP=5,MM=6,mP=7,pP=8,mN=9,gP=10,Bue=[2,3,7],Tue=[3,3,11],LM=[280,256,256,256,40],kue=[0,1,1,1,0],Fue=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Oue=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Due=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Rue=8,xP=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],vP=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],O1=null,Mue=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Lue=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],UM=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Uue=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Que=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Vue=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Hue=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],LA=[],bd=[],ah=[],$ue=1,QM=2,UA=[],ju=[];_u("UpsampleRgbLinePair",Bt,3),_u("UpsampleBgrLinePair",Kt,3),_u("UpsampleRgbaLinePair",na,4),_u("UpsampleBgraLinePair",On,4),_u("UpsampleArgbLinePair",Bs,4),_u("UpsampleRgba4444LinePair",Kn,2),_u("UpsampleRgb565LinePair",yr,2);var Gue=E.UpsampleRgbLinePair,Kue=E.UpsampleBgrLinePair,VM=E.UpsampleRgbaLinePair,HM=E.UpsampleBgraLinePair,$M=E.UpsampleArgbLinePair,GM=E.UpsampleRgba4444LinePair,que=E.UpsampleRgb565LinePair,pN=16,gN=1<<pN-1,D1=-227,yP=482,zue=6,KM=0,Wue=s(256),Xue=s(256),Yue=s(256),Jue=s(256),Zue=s(yP-D1),ede=s(yP-D1);qa("YuvToRgbRow",Bt,3),qa("YuvToBgrRow",Kt,3),qa("YuvToRgbaRow",na,4),qa("YuvToBgraRow",On,4),qa("YuvToArgbRow",Bs,4),qa("YuvToRgba4444Row",Kn,2),qa("YuvToRgb565Row",yr,2);var qM=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],xN=[0,2,8],tde=[8,7,6,4,4,2,2,2,1,1,1,1],rde=1;this.WebPDecodeRGBA=function(N,B,z,oe,_e){var De=fN,Le=new tr,Qe=new ce;Le.ba=Qe,Qe.S=De,Qe.width=[Qe.width],Qe.height=[Qe.height];var ze=Qe.width,nt=Qe.height,_t=new ke;if(_t==null||N==null)var Vt=2;else e(_t!=null),Vt=yd(N,B,z,_t.width,_t.height,_t.Pd,_t.Qd,_t.format,null);if(Vt!=0?ze=0:(ze!=null&&(ze[0]=_t.width[0]),nt!=null&&(nt[0]=_t.height[0]),ze=1),ze){Qe.width=Qe.width[0],Qe.height=Qe.height[0],oe!=null&&(oe[0]=Qe.width),_e!=null&&(_e[0]=Qe.height);e:{if(oe=new Qr,(_e=new or).data=N,_e.w=B,_e.ha=z,_e.kd=1,B=[0],e(_e!=null),((N=yd(_e.data,_e.w,_e.ha,null,null,null,B,null,_e))==0||N==7)&&B[0]&&(N=4),(B=N)==0){if(e(Le!=null),oe.data=_e.data,oe.w=_e.w+_e.offset,oe.ha=_e.ha-_e.offset,oe.put=Se,oe.ac=ot,oe.bc=ht,oe.ma=Le,_e.xa){if((N=lt())==null){Le=1;break e}if(function(at,St){var Tt=[0],Zt=[0],Ut=[0];t:for(;;){if(at==null)return 0;if(St==null)return at.a=2,0;if(at.l=St,at.a=0,ne(at.m,St.data,St.w,St.ha),!W(at.m,Tt,Zt,Ut)){at.a=3;break t}if(at.xb=QM,St.width=Tt[0],St.height=Zt[0],!Fe(Tt[0],Zt[0],1,at,null))break t;return 1}return e(at.a!=0),0}(N,oe)){if(oe=(B=TA(oe.width,oe.height,Le.Oa,Le.ba))==0){t:{oe=N;r:for(;;){if(oe==null){oe=0;break t}if(e(oe.s.yc!=null),e(oe.s.Ya!=null),e(0<oe.s.Wb),e((z=oe.l)!=null),e((_e=z.ma)!=null),oe.xb!=0){if(oe.ca=_e.ba,oe.tb=_e.tb,e(oe.ca!=null),!E1(_e.Oa,z,hN)){oe.a=2;break r}if(!Xe(oe,z.width)||z.da)break r;if((z.da||be(oe.ca.S))&&uc(),11>oe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),oe.ca.f.kb.F!=null&&uc()),oe.Pb&&0<oe.s.ua&&oe.s.vb.X==null&&!ee(oe.s.vb,oe.s.Wa.Xa)){oe.a=1;break r}oe.xb=0}if(!Me(oe,oe.V,oe.Ba,oe.c,oe.i,z.o,L))break r;_e.Dc=oe.Ma,oe=1;break t}e(oe.a!=0),oe=0}oe=!oe}oe&&(B=N.a)}else B=N.a}else{if((N=new Dr)==null){Le=1;break e}if(N.Fa=_e.na,N.P=_e.P,N.qc=_e.Sa,xt(N,oe)){if((B=TA(oe.width,oe.height,Le.Oa,Le.ba))==0){if(N.Aa=0,z=Le.Oa,e((_e=N)!=null),z!=null){if(0<(ze=0>(ze=z.Md)?0:100<ze?255:255*ze/100)){for(nt=_t=0;4>nt;++nt)12>(Vt=_e.pb[nt]).lc&&(Vt.ia=ze*tde[0>Vt.lc?0:Vt.lc]>>3),_t|=Vt.ia;_t&&(alert("todo:VP8InitRandom"),_e.ia=1)}_e.Ga=z.Id,100<_e.Ga?_e.Ga=100:0>_e.Ga&&(_e.Ga=0)}(function(at,St){if(at==null)return 0;if(St==null)return nn(at,2,"NULL VP8Io parameter in VP8Decode().");if(!at.cb&&!xt(at,St))return 0;if(e(at.cb),St.ac==null||St.ac(St)){St.ob&&(at.L=0);var Tt=xN[at.L];if(at.L==2?(at.yb=0,at.zb=0):(at.yb=St.v-Tt>>4,at.zb=St.j-Tt>>4,0>at.yb&&(at.yb=0),0>at.zb&&(at.zb=0)),at.Va=St.o+15+Tt>>4,at.Hb=St.va+15+Tt>>4,at.Hb>at.za&&(at.Hb=at.za),at.Va>at.Ub&&(at.Va=at.Ub),0<at.L){var Zt=at.ed;for(Tt=0;4>Tt;++Tt){var Ut;if(at.Qa.Cb){var rr=at.Qa.Lb[Tt];at.Qa.Fb||(rr+=Zt.Tb)}else rr=Zt.Tb;for(Ut=0;1>=Ut;++Ut){var ar=at.gd[Tt][Ut],Ar=rr;if(Zt.Pc&&(Ar+=Zt.vd[0],Ut&&(Ar+=Zt.od[0])),0<(Ar=0>Ar?0:63<Ar?63:Ar)){var dr=Ar;0<Zt.wb&&(dr=4<Zt.wb?dr>>2:dr>>1)>9-Zt.wb&&(dr=9-Zt.wb),1>dr&&(dr=1),ar.dd=dr,ar.tc=2*Ar+dr,ar.ld=40<=Ar?2:15<=Ar?1:0}else ar.tc=0;ar.La=Ut}}}Tt=0}else nn(at,6,"Frame setup failed"),Tt=at.a;if(Tt=Tt==0){if(Tt){at.$c=0,0<at.Aa||(at.Ic=rde);t:{Tt=at.Ic,Zt=4*(dr=at.za);var Zr=32*dr,Hr=dr+1,En=0<at.L?dr*(0<at.Aa?2:1):0,zr=(at.Aa==2?2:1)*dr;if((ar=Zt+832+(Ut=3*(16*Tt+xN[at.L])/2*Zr)+(rr=at.Fa!=null&&0<at.Fa.length?at.Kc.c*at.Kc.i:0))!=ar)Tt=0;else{if(ar>at.Vb){if(at.Vb=0,at.Ec=s(ar),at.Fc=0,at.Ec==null){Tt=nn(at,1,"no memory during frame initialization.");break t}at.Vb=ar}ar=at.Ec,Ar=at.Fc,at.Ac=ar,at.Bc=Ar,Ar+=Zt,at.Gd=o(Zr,mr),at.Hd=0,at.rb=o(Hr+1,Ft),at.sb=1,at.wa=En?o(En,Ot):null,at.Y=0,at.D.Nb=0,at.D.wa=at.wa,at.D.Y=at.Y,0<at.Aa&&(at.D.Y+=dr),e(!0),at.oc=ar,at.pc=Ar,Ar+=832,at.ya=o(zr,ir),at.aa=0,at.D.ya=at.ya,at.D.aa=at.aa,at.Aa==2&&(at.D.aa+=dr),at.R=16*dr,at.B=8*dr,dr=(Zr=xN[at.L])*at.R,Zr=Zr/2*at.B,at.sa=ar,at.ta=Ar+dr,at.qa=at.sa,at.ra=at.ta+16*Tt*at.R+Zr,at.Ha=at.qa,at.Ia=at.ra+8*Tt*at.B+Zr,at.$c=0,Ar+=Ut,at.mb=rr?ar:null,at.nb=rr?Ar:null,e(Ar+rr<=at.Fc+at.Vb),st(at),a(at.Ac,at.Bc,0,Zt),Tt=1}}if(Tt){if(St.ka=0,St.y=at.sa,St.O=at.ta,St.f=at.qa,St.N=at.ra,St.ea=at.Ha,St.Vd=at.Ia,St.fa=at.R,St.Rc=at.B,St.F=null,St.J=0,!DM){for(Tt=-255;255>=Tt;++Tt)TM[255+Tt]=0>Tt?-Tt:Tt;for(Tt=-1020;1020>=Tt;++Tt)kM[1020+Tt]=-128>Tt?-128:127<Tt?127:Tt;for(Tt=-112;112>=Tt;++Tt)FM[112+Tt]=-16>Tt?-16:15<Tt?15:Tt;for(Tt=-255;510>=Tt;++Tt)OM[255+Tt]=0>Tt?0:255<Tt?255:Tt;DM=1}MA=Vr,Tm=Xt,Af=Wt,ma=vr,Ua=Nr,Su=qt,ci=BA,Ui=Cu,nh=Ce,k1=rt,Mg=jm,cN=V,NM=vt,CM=jt,_M=df,EM=Ul,SM=Im,IM=Dg,bd[0]=C1,bd[1]=qs,bd[2]=w1,bd[3]=N1,bd[4]=Ao,bd[5]=_1,bd[6]=xd,bd[7]=IA,bd[8]=jA,bd[9]=vd,LA[0]=Ll,LA[1]=rs,LA[2]=Ml,LA[3]=yu,LA[4]=Dc,LA[5]=gd,LA[6]=Fg,ah[0]=Em,ah[1]=ts,ah[2]=Rc,ah[3]=eh,ah[4]=Sm,ah[5]=Fa,ah[6]=Og,Tt=1}else Tt=0}Tt&&(Tt=function(qn,Qi){for(qn.M=0;qn.M<qn.Va;++qn.M){var Sn,Wr=qn.Jc[qn.M&qn.Xb],Br=qn.m,ui=qn;for(Sn=0;Sn<ui.za;++Sn){var Nn=Br,Wn=ui,ns=Wn.Ac,Mo=Wn.Bc+4*Sn,Vl=Wn.zc,Ys=Wn.ya[Wn.aa+Sn];if(Wn.Qa.Bb?Ys.$b=te(Nn,Wn.Pa.jb[0])?2+te(Nn,Wn.Pa.jb[2]):te(Nn,Wn.Pa.jb[1]):Ys.$b=0,Wn.kc&&(Ys.Ad=te(Nn,Wn.Bd)),Ys.Za=!te(Nn,145)+0,Ys.Za){var ul=Ys.Ob,Hl=0;for(Wn=0;4>Wn;++Wn){var Vi,Jn=Vl[0+Wn];for(Vi=0;4>Vi;++Vi){Jn=Que[ns[Mo+Vi]][Jn];for(var va=UM[te(Nn,Jn[0])];0<va;)va=UM[2*va+te(Nn,Jn[va])];Jn=-va,ns[Mo+Vi]=Jn}n(ul,Hl,ns,Mo,4),Hl+=4,Vl[0+Wn]=Jn}}else Jn=te(Nn,156)?te(Nn,128)?1:3:te(Nn,163)?2:0,Ys.Ob[0]=Jn,a(ns,Mo,Jn,4),a(Vl,0,Jn,4);Ys.Dd=te(Nn,142)?te(Nn,114)?te(Nn,183)?1:3:2:0}if(ui.m.Ka)return nn(qn,7,"Premature end-of-partition0 encountered.");for(;qn.ja<qn.za;++qn.ja){if(ui=Wr,Nn=(Br=qn).rb[Br.sb-1],ns=Br.rb[Br.sb+Br.ja],Sn=Br.ya[Br.aa+Br.ja],Mo=Br.kc?Sn.Ad:0)Nn.la=ns.la=0,Sn.Za||(Nn.Na=ns.Na=0),Sn.Hc=0,Sn.Gc=0,Sn.ia=0;else{var Js,ya;if(Nn=ns,ns=ui,Mo=Br.Pa.Xc,Vl=Br.ya[Br.aa+Br.ja],Ys=Br.pb[Vl.$b],Wn=Vl.ad,ul=0,Hl=Br.rb[Br.sb-1],Jn=Vi=0,a(Wn,ul,0,384),Vl.Za)var Lo=0,wd=Mo[3];else{va=s(16);var di=Nn.Na+Hl.Na;if(di=O1(ns,Mo[1],di,Ys.Eb,0,va,0),Nn.Na=Hl.Na=(0<di)+0,1<di)MA(va,0,Wn,ul);else{var dc=va[0]+3>>3;for(va=0;256>va;va+=16)Wn[ul+va]=dc}Lo=1,wd=Mo[0]}var Qa=15&Nn.la,Hi=15&Hl.la;for(va=0;4>va;++va){var Vc=1&Hi;for(dc=ya=0;4>dc;++dc)Qa=Qa>>1|(Vc=(di=O1(ns,wd,di=Vc+(1&Qa),Ys.Sc,Lo,Wn,ul))>Lo)<<7,ya=ya<<2|(3<di?3:1<di?2:Wn[ul+0]!=0),ul+=16;Qa>>=4,Hi=Hi>>1|Vc<<7,Vi=(Vi<<8|ya)>>>0}for(wd=Qa,Lo=Hi>>4,Js=0;4>Js;Js+=2){for(ya=0,Qa=Nn.la>>4+Js,Hi=Hl.la>>4+Js,va=0;2>va;++va){for(Vc=1&Hi,dc=0;2>dc;++dc)di=Vc+(1&Qa),Qa=Qa>>1|(Vc=0<(di=O1(ns,Mo[2],di,Ys.Qc,0,Wn,ul)))<<3,ya=ya<<2|(3<di?3:1<di?2:Wn[ul+0]!=0),ul+=16;Qa>>=2,Hi=Hi>>1|Vc<<5}Jn|=ya<<4*Js,wd|=Qa<<4<<Js,Lo|=(240&Hi)<<Js}Nn.la=wd,Hl.la=Lo,Vl.Hc=Vi,Vl.Gc=Jn,Vl.ia=43690&Jn?0:Ys.ia,Mo=!(Vi|Jn)}if(0<Br.L&&(Br.wa[Br.Y+Br.ja]=Br.gd[Sn.$b][Sn.Za],Br.wa[Br.Y+Br.ja].La|=!Mo),ui.Ka)return nn(qn,7,"Premature end-of-file encountered.")}if(st(qn),Br=Qi,ui=1,Sn=(Wr=qn).D,Nn=0<Wr.L&&Wr.M>=Wr.zb&&Wr.M<=Wr.Va,Wr.Aa==0)t:{if(Sn.M=Wr.M,Sn.uc=Nn,Ro(Wr,Sn),ui=1,Sn=(ya=Wr.D).Nb,Nn=(Jn=xN[Wr.L])*Wr.R,ns=Jn/2*Wr.B,va=16*Sn*Wr.R,dc=8*Sn*Wr.B,Mo=Wr.sa,Vl=Wr.ta-Nn+va,Ys=Wr.qa,Wn=Wr.ra-ns+dc,ul=Wr.Ha,Hl=Wr.Ia-ns+dc,Hi=(Qa=ya.M)==0,Vi=Qa>=Wr.Va-1,Wr.Aa==2&&Ro(Wr,ya),ya.uc)for(Vc=(di=Wr).D.M,e(di.D.uc),ya=di.yb;ya<di.Hb;++ya){Lo=ya,wd=Vc;var $l=(Hc=(Uo=di).D).Nb;Js=Uo.R;var Hc=Hc.wa[Hc.Y+Lo],$c=Uo.sa,fc=Uo.ta+16*$l*Js+16*Lo,Gc=Hc.dd,za=Hc.tc;if(za!=0)if(e(3<=za),Uo.L==1)0<Lo&&EM($c,fc,Js,za+4),Hc.La&&IM($c,fc,Js,za),0<wd&&_M($c,fc,Js,za+4),Hc.La&&SM($c,fc,Js,za);else{var Kc=Uo.B,Nd=Uo.qa,km=Uo.ra+8*$l*Kc+8*Lo,sh=Uo.Ha,Uo=Uo.Ia+8*$l*Kc+8*Lo;$l=Hc.ld,0<Lo&&(Ui($c,fc,Js,za+4,Gc,$l),k1(Nd,km,sh,Uo,Kc,za+4,Gc,$l)),Hc.La&&(cN($c,fc,Js,za,Gc,$l),CM(Nd,km,sh,Uo,Kc,za,Gc,$l)),0<wd&&(ci($c,fc,Js,za+4,Gc,$l),nh(Nd,km,sh,Uo,Kc,za+4,Gc,$l)),Hc.La&&(Mg($c,fc,Js,za,Gc,$l),NM(Nd,km,sh,Uo,Kc,za,Gc,$l))}}if(Wr.ia&&alert("todo:DitherRow"),Br.put!=null){if(ya=16*Qa,Qa=16*(Qa+1),Hi?(Br.y=Wr.sa,Br.O=Wr.ta+va,Br.f=Wr.qa,Br.N=Wr.ra+dc,Br.ea=Wr.Ha,Br.W=Wr.Ia+dc):(ya-=Jn,Br.y=Mo,Br.O=Vl,Br.f=Ys,Br.N=Wn,Br.ea=ul,Br.W=Hl),Vi||(Qa-=Jn),Qa>Br.o&&(Qa=Br.o),Br.F=null,Br.J=null,Wr.Fa!=null&&0<Wr.Fa.length&&ya<Qa&&(Br.J=xa(Wr,Br,ya,Qa-ya),Br.F=Wr.mb,Br.F==null&&Br.F.length==0)){ui=nn(Wr,3,"Could not decode alpha data.");break t}ya<Br.j&&(Jn=Br.j-ya,ya=Br.j,e(!(1&Jn)),Br.O+=Wr.R*Jn,Br.N+=Wr.B*(Jn>>1),Br.W+=Wr.B*(Jn>>1),Br.F!=null&&(Br.J+=Br.width*Jn)),ya<Qa&&(Br.O+=Br.v,Br.N+=Br.v>>1,Br.W+=Br.v>>1,Br.F!=null&&(Br.J+=Br.v),Br.ka=ya-Br.j,Br.U=Br.va-Br.v,Br.T=Qa-ya,ui=Br.put(Br))}Sn+1!=Wr.Ic||Vi||(n(Wr.sa,Wr.ta-Nn,Mo,Vl+16*Wr.R,Nn),n(Wr.qa,Wr.ra-ns,Ys,Wn+8*Wr.B,ns),n(Wr.Ha,Wr.Ia-ns,ul,Hl+8*Wr.B,ns))}if(!ui)return nn(qn,6,"Output aborted.")}return 1}(at,St)),St.bc!=null&&St.bc(St),Tt&=1}return Tt?(at.cb=0,Tt):0})(N,oe)||(B=N.a)}}else B=N.a}B==0&&Le.Oa!=null&&Le.Oa.fd&&(B=S1(Le.ba))}Le=B}De=Le!=0?null:11>De?Qe.f.RGBA.eb:Qe.f.kb.y}else De=null;return De};var zM=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,F){for(var P="",k=0;k<4;k++)P+=String.fromCharCode(E[F++]);return P}function d(E,F){return E[F+0]|E[F+1]<<8}function f(E,F){return(E[F+0]|E[F+1]<<8|E[F+2]<<16)>>>0}function A(E,F){return(E[F+0]|E[F+1]<<8|E[F+2]<<16|E[F+3]<<24)>>>0}new c;var h=[0],m=[0],p=[],g=new c,v=t,y=function(E,F){var P={},k=0,D=!1,J=0,fe=0;if(P.frames=[],!function(O,G){for(var q=0;q<4;q++)if(O[G+q]!="RIFF".charCodeAt(q))return!0;return!1}(E,F)){for(A(E,F+=4),F+=8;F<E.length;){var Ae=u(E,F),me=A(E,F+=4);F+=4;var pe=me+(1&me);switch(Ae){case"VP8 ":case"VP8L":P.frames[k]===void 0&&(P.frames[k]={}),(Be=P.frames[k]).src_off=D?fe:F-8,Be.src_size=J+me+8,k++,D&&(D=!1,J=0,fe=0);break;case"VP8X":(Be=P.header={}).feature_flags=E[F];var ne=F+4;Be.canvas_width=1+f(E,ne),ne+=3,Be.canvas_height=1+f(E,ne),ne+=3;break;case"ALPH":D=!0,J=pe+8,fe=F-8;break;case"ANIM":(Be=P.header).bgcolor=A(E,F),ne=F+4,Be.loop_count=d(E,ne),ne+=2;break;case"ANMF":var Pe,Be;(Be=P.frames[k]={}).offset_x=2*f(E,F),F+=3,Be.offset_y=2*f(E,F),F+=3,Be.width=1+f(E,F),F+=3,Be.height=1+f(E,F),F+=3,Be.duration=f(E,F),F+=3,Pe=E[F++],Be.dispose=1&Pe,Be.blend=Pe>>1&1}Ae!="ANMF"&&(F+=pe)}return P}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,w=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],m=[b.canvas_width];for(var j=0;j<w.length&&w[j].blend!=0;j++);}var I=w[0],_=g.WebPDecodeRGBA(v,I.src_off,I.src_size,m,h);I.rgba=_,I.imgwidth=m[0],I.imgheight=h[0];for(var S=0;S<m[0]*h[0]*4;S++)p[S]=_[S];return this.width=m,this.height=h,this.data=p,this}(function(t){var e,r,n,a,s,o,l,c,u,d=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=O;Object.defineProperty(this,"pdf",{get:function(){return G}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(ee){q=!!ee}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(ee){U=!!ee}});var Y=0;Object.defineProperty(this,"posX",{get:function(){return Y},set:function(ee){isNaN(ee)||(Y=ee)}});var Z=0;Object.defineProperty(this,"posY",{get:function(){return Z},set:function(ee){isNaN(ee)||(Z=ee)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ee){var Ie;typeof ee=="number"?Ie=[ee,ee,ee,ee]:((Ie=new Array(4))[0]=ee[0],Ie[1]=ee.length>=2?ee[1]:Ie[0],Ie[2]=ee.length>=3?ee[2]:Ie[0],Ie[3]=ee.length>=4?ee[3]:Ie[1]),u.margin=Ie}});var R=!1;Object.defineProperty(this,"autoPaging",{get:function(){return R},set:function(ee){R=ee}});var H=0;Object.defineProperty(this,"lastBreak",{get:function(){return H},set:function(ee){H=ee}});var te=[];Object.defineProperty(this,"pageBreaks",{get:function(){return te},set:function(ee){te=ee}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ee){ee instanceof d&&(u=ee)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ee){u.path=ee}});var ye=[];Object.defineProperty(this,"ctxStack",{get:function(){return ye},set:function(ee){ye=ee}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ee){var Ie;Ie=A(ee),this.ctx.fillStyle=Ie.style,this.ctx.isFillTransparent=Ie.a===0,this.ctx.fillOpacity=Ie.a,this.pdf.setFillColor(Ie.r,Ie.g,Ie.b,{a:Ie.a}),this.pdf.setTextColor(Ie.r,Ie.g,Ie.b,{a:Ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ee){var Ie=A(ee);this.ctx.strokeStyle=Ie.style,this.ctx.isStrokeTransparent=Ie.a===0,this.ctx.strokeOpacity=Ie.a,Ie.a===0?this.pdf.setDrawColor(255,255,255):(Ie.a,this.pdf.setDrawColor(Ie.r,Ie.g,Ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ee){["butt","round","square"].indexOf(ee)!==-1&&(this.ctx.lineCap=ee,this.pdf.setLineCap(ee))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ee){isNaN(ee)||(this.ctx.lineWidth=ee,this.pdf.setLineWidth(ee))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ee){["bevel","round","miter"].indexOf(ee)!==-1&&(this.ctx.lineJoin=ee,this.pdf.setLineJoin(ee))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ee){isNaN(ee)||(this.ctx.miterLimit=ee,this.pdf.setMiterLimit(ee))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ee){this.ctx.textBaseline=ee}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ee){["right","end","center","left","start"].indexOf(ee)!==-1&&(this.ctx.textAlign=ee)}});var Q=null,Ge=null,ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return ie},set:function(ee){Q=null,Ge=null,ie=ee}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ee){var Ie;if(this.ctx.font=ee,(Ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ee))!==null){var ue=Ie[1];Ie[2];var se=Ie[3],Ee=Ie[4];Ie[5];var je=Ie[6],it=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ee)[2];Ee=Math.floor(it==="px"?parseFloat(Ee)*this.pdf.internal.scaleFactor:it==="em"?parseFloat(Ee)*this.pdf.getFontSize():parseFloat(Ee)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ee);var At=function(de){var Ue,Ke,Ne=[],mt=de.trim();if(mt==="")return e5;if(mt in lV)return[lV[mt]];for(;mt!=="";){switch(Ke=null,Ue=(mt=uV(mt)).charAt(0)){case'"':case"'":Ke=yje(mt.substring(1),Ue);break;default:Ke=bje(mt)}if(Ke===null||(Ne.push(Ke[0]),(mt=uV(Ke[1]))!==""&&mt.charAt(0)!==","))return e5;mt=mt.replace(/^,/,"")}return Ne}(je);if(this.fontFaces){var pt=function(de,Ue){var Ke=de.getFontList(),Ne=JSON.stringify(Ke);if(Q===null||Ge!==Ne){var mt=function(wt){var we=[];return Object.keys(wt).forEach(function(ae){wt[ae].forEach(function(be){var ve=null;switch(be){case"bold":ve={family:ae,weight:"bold"};break;case"italic":ve={family:ae,style:"italic"};break;case"bolditalic":ve={family:ae,weight:"bold",style:"italic"};break;case"":case"normal":ve={family:ae}}ve!==null&&(ve.ref={name:ae,style:be},we.push(ve))})}),we}(Ke);Q=function(wt){for(var we={},ae=0;ae<wt.length;++ae){var be=Z3(wt[ae]),ve=be.family,Ve=be.stretch,ce=be.style,ke=be.weight;we[ve]=we[ve]||{},we[ve][Ve]=we[ve][Ve]||{},we[ve][Ve][ce]=we[ve][Ve][ce]||{},we[ve][Ve][ce][ke]=be}return we}(mt.concat(Ue)),Ge=Ne}return Q}(this.pdf,this.fontFaces),yt=At.map(function(de){return{family:de,stretch:"normal",weight:se,style:ue}}),Ct=function(de,Ue,Ke){for(var Ne=(Ke=Ke||{}).defaultFontFamily||"times",mt=Object.assign({},vje,Ke.genericFontFamilies||{}),wt=null,we=null,ae=0;ae<Ue.length;++ae)if(mt[(wt=Z3(Ue[ae])).family]&&(wt.family=mt[wt.family]),de.hasOwnProperty(wt.family)){we=de[wt.family];break}if(!(we=we||de[Ne]))throw new Error("Could not find a font-family for the rule '"+cV(wt)+"' and default family '"+Ne+"'.");if(we=function(be,ve){if(ve[be])return ve[be];var Ve=_k[be],ce=Ve<=_k.normal?-1:1,ke=oV(ve,sre,Ve,ce);if(!ke)throw new Error("Could not find a matching font-stretch value for "+be);return ke}(wt.stretch,we),we=function(be,ve){if(ve[be])return ve[be];for(var Ve=are[be],ce=0;ce<Ve.length;++ce)if(ve[Ve[ce]])return ve[Ve[ce]];throw new Error("Could not find a matching font-style for "+be)}(wt.style,we),!(we=function(be,ve){if(ve[be])return ve[be];if(be===400&&ve[500])return ve[500];if(be===500&&ve[400])return ve[400];var Ve=xje[be],ce=oV(ve,ire,Ve,be<400?-1:1);if(!ce)throw new Error("Could not find a matching font-weight for value "+be);return ce}(wt.weight,we)))throw new Error("Failed to resolve a font for the rule '"+cV(wt)+"'.");return we}(pt,yt);this.pdf.setFont(Ct.ref.name,Ct.ref.style)}else{var Et="";(se==="bold"||parseInt(se,10)>=700||ue==="bold")&&(Et="bold"),ue==="italic"&&(Et+="italic"),Et.length===0&&(Et="normal");for(var Re="",We={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},et=0;et<At.length;et++){if(this.pdf.internal.getFont(At[et],Et,{noFallback:!0,disableWarning:!0})!==void 0){Re=At[et];break}if(Et==="bolditalic"&&this.pdf.internal.getFont(At[et],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Re=At[et],Et="bold";else if(this.pdf.internal.getFont(At[et],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Re=At[et],Et="normal";break}}if(Re===""){for(var xe=0;xe<At.length;xe++)if(We[At[xe]]){Re=We[At[xe]];break}}Re=Re===""?"Times":Re,this.pdf.setFont(Re,Et)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ee){this.ctx.globalCompositeOperation=ee}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ee){this.ctx.globalAlpha=ee}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ee){this.ctx.lineDashOffset=ee,Be.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ee){this.ctx.lineDash=ee,Be.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ee){this.ctx.ignoreClearRect=!!ee}})};f.prototype.setLineDash=function(O){this.lineDash=O},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){w.call(this,"fill",!1)},f.prototype.stroke=function(){w.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(O,G){if(isNaN(O)||isNaN(G))throw Ha.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new o(O,G));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(O,G)},f.prototype.closePath=function(){var O=new o(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&ja(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){O=new o(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},f.prototype.lineTo=function(O,G){if(isNaN(O)||isNaN(G))throw Ha.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new o(O,G));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(q.x,q.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},f.prototype.quadraticCurveTo=function(O,G,q,U){if(isNaN(q)||isNaN(U)||isNaN(O)||isNaN(G))throw Ha.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Y=this.ctx.transform.applyToPoint(new o(q,U)),Z=this.ctx.transform.applyToPoint(new o(O,G));this.path.push({type:"qct",x1:Z.x,y1:Z.y,x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},f.prototype.bezierCurveTo=function(O,G,q,U,Y,Z){if(isNaN(Y)||isNaN(Z)||isNaN(O)||isNaN(G)||isNaN(q)||isNaN(U))throw Ha.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var R=this.ctx.transform.applyToPoint(new o(Y,Z)),H=this.ctx.transform.applyToPoint(new o(O,G)),te=this.ctx.transform.applyToPoint(new o(q,U));this.path.push({type:"bct",x1:H.x,y1:H.y,x2:te.x,y2:te.y,x:R.x,y:R.y}),this.ctx.lastPoint=new o(R.x,R.y)},f.prototype.arc=function(O,G,q,U,Y,Z){if(isNaN(O)||isNaN(G)||isNaN(q)||isNaN(U)||isNaN(Y))throw Ha.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Z=!!Z,!this.ctx.transform.isIdentity){var R=this.ctx.transform.applyToPoint(new o(O,G));O=R.x,G=R.y;var H=this.ctx.transform.applyToPoint(new o(0,q)),te=this.ctx.transform.applyToPoint(new o(0,0));q=Math.sqrt(Math.pow(H.x-te.x,2)+Math.pow(H.y-te.y,2))}Math.abs(Y-U)>=2*Math.PI&&(U=0,Y=2*Math.PI),this.path.push({type:"arc",x:O,y:G,radius:q,startAngle:U,endAngle:Y,counterclockwise:Z})},f.prototype.arcTo=function(O,G,q,U,Y){throw new Error("arcTo not implemented.")},f.prototype.rect=function(O,G,q,U){if(isNaN(O)||isNaN(G)||isNaN(q)||isNaN(U))throw Ha.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,G),this.lineTo(O+q,G),this.lineTo(O+q,G+U),this.lineTo(O,G+U),this.lineTo(O,G),this.lineTo(O+q,G),this.lineTo(O,G)},f.prototype.fillRect=function(O,G,q,U){if(isNaN(O)||isNaN(G)||isNaN(q)||isNaN(U))throw Ha.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var Y={};this.lineCap!=="butt"&&(Y.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Y.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,G,q,U),this.fill(),Y.hasOwnProperty("lineCap")&&(this.lineCap=Y.lineCap),Y.hasOwnProperty("lineJoin")&&(this.lineJoin=Y.lineJoin)}},f.prototype.strokeRect=function(O,G,q,U){if(isNaN(O)||isNaN(G)||isNaN(q)||isNaN(U))throw Ha.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(O,G,q,U),this.stroke())},f.prototype.clearRect=function(O,G,q,U){if(isNaN(O)||isNaN(G)||isNaN(q)||isNaN(U))throw Ha.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,G,q,U))},f.prototype.save=function(O){O=typeof O!="boolean"||O;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},f.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(G),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(O){var G,q,U,Y;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))G=0,q=0,U=0,Y=0;else{var Z=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(Z!==null)G=parseInt(Z[1]),q=parseInt(Z[2]),U=parseInt(Z[3]),Y=1;else if((Z=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)G=parseInt(Z[1]),q=parseInt(Z[2]),U=parseInt(Z[3]),Y=parseFloat(Z[4]);else{if(Y=1,typeof O=="string"&&O.charAt(0)!=="#"){var R=new Yte(O);O=R.ok?R.toHex():"#000000"}O.length===4?(G=O.substring(1,2),G+=G,q=O.substring(2,3),q+=q,U=O.substring(3,4),U+=U):(G=O.substring(1,3),q=O.substring(3,5),U=O.substring(5,7)),G=parseInt(G,16),q=parseInt(q,16),U=parseInt(U,16)}}return{r:G,g:q,b:U,a:Y,style:O}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(O,G,q,U){if(isNaN(G)||isNaN(q)||typeof O!="string")throw Ha.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!h.call(this)){var Y=pe(this.ctx.transform.rotation),Z=this.ctx.transform.scaleX;k.call(this,{text:O,x:G,y:q,scale:Z,angle:Y,align:this.textAlign,maxWidth:U})}},f.prototype.strokeText=function(O,G,q,U){if(isNaN(G)||isNaN(q)||typeof O!="string")throw Ha.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){U=isNaN(U)?void 0:U;var Y=pe(this.ctx.transform.rotation),Z=this.ctx.transform.scaleX;k.call(this,{text:O,x:G,y:q,scale:Z,renderingMode:"stroke",angle:Y,align:this.textAlign,maxWidth:U})}},f.prototype.measureText=function(O){if(typeof O!="string")throw Ha.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,q=this.pdf.internal.scaleFactor,U=G.internal.getFontSize(),Y=G.getStringUnitWidth(O)*U/G.internal.scaleFactor;return new function(Z){var R=(Z=Z||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return R}}),this}({width:Y*=Math.round(96*q/72*1e4)/1e4})},f.prototype.scale=function(O,G){if(isNaN(O)||isNaN(G))throw Ha.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new c(O,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.rotate=function(O){if(isNaN(O))throw Ha.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.translate=function(O,G){if(isNaN(O)||isNaN(G))throw Ha.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new c(1,0,0,1,O,G);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.transform=function(O,G,q,U,Y,Z){if(isNaN(O)||isNaN(G)||isNaN(q)||isNaN(U)||isNaN(Y)||isNaN(Z))throw Ha.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var R=new c(O,G,q,U,Y,Z);this.ctx.transform=this.ctx.transform.multiply(R)},f.prototype.setTransform=function(O,G,q,U,Y,Z){O=isNaN(O)?1:O,G=isNaN(G)?0:G,q=isNaN(q)?0:q,U=isNaN(U)?1:U,Y=isNaN(Y)?0:Y,Z=isNaN(Z)?0:Z,this.ctx.transform=new c(O,G,q,U,Y,Z)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(O,G,q,U,Y,Z,R,H,te){var ye=this.pdf.getImageProperties(O),Q=1,Ge=1,ie=1,ee=1;U!==void 0&&H!==void 0&&(ie=H/U,ee=te/Y,Q=ye.width/U*H/U,Ge=ye.height/Y*te/Y),Z===void 0&&(Z=G,R=q,G=0,q=0),U!==void 0&&H===void 0&&(H=U,te=Y),U===void 0&&H===void 0&&(H=ye.width,te=ye.height);var Ie=this.ctx.transform.decompose(),ue=pe(Ie.rotate.shx),se=new c,Ee=(se=(se=(se=se.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new l(Z-G*ie,R-q*ee,U*Q,Y*Ge));if(this.autoPaging){for(var je,it=g.call(this,Ee),At=[],pt=0;pt<it.length;pt+=1)At.indexOf(it[pt])===-1&&At.push(it[pt]);b(At);for(var yt=At[0],Ct=At[At.length-1],Et=yt;Et<Ct+1;Et++){this.pdf.setPage(Et);var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],We=Et===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],de=Et===1?0:et+(Et-2)*xe;if(this.ctx.clip_path.length!==0){var Ue=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(je,this.posX+this.margin[3],-de+We+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Ue}var Ke=JSON.parse(JSON.stringify(Ee));Ke=y([Ke],this.posX+this.margin[3],-de+We+this.ctx.prevPageLastElemOffset)[0];var Ne=(Et>yt||Et<Ct)&&p.call(this);Ne&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,xe,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,ue),Ne&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(O,"JPEG",Ee.x,Ee.y,Ee.w,Ee.h,null,null,ue)};var g=function(O,G,q){var U=[];G=G||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Y=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":U.push(Math.floor((O.y+Y)/q)+1);break;case"arc":U.push(Math.floor((O.y+Y-O.radius)/q)+1),U.push(Math.floor((O.y+Y+O.radius)/q)+1);break;case"qct":var Z=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);U.push(Math.floor((Z.y+Y)/q)+1),U.push(Math.floor((Z.y+Z.h+Y)/q)+1);break;case"bct":var R=Pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);U.push(Math.floor((R.y+Y)/q)+1),U.push(Math.floor((R.y+R.h+Y)/q)+1);break;case"rect":U.push(Math.floor((O.y+Y)/q)+1),U.push(Math.floor((O.y+O.h+Y)/q)+1)}for(var H=0;H<U.length;H+=1)for(;this.pdf.internal.getNumberOfPages()<U[H];)v.call(this);return U},v=function(){var O=this.fillStyle,G=this.strokeStyle,q=this.font,U=this.lineCap,Y=this.lineWidth,Z=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=G,this.font=q,this.lineCap=U,this.lineWidth=Y,this.lineJoin=Z},y=function(O,G,q){for(var U=0;U<O.length;U++)switch(O[U].type){case"bct":O[U].x2+=G,O[U].y2+=q;case"qct":O[U].x1+=G,O[U].y1+=q;default:O[U].x+=G,O[U].y+=q}return O},b=function(O){return O.sort(function(G,q){return G-q})},w=function(O,G){var q=this.fillStyle,U=this.strokeStyle,Y=this.lineCap,Z=this.lineWidth,R=Math.abs(Z*this.ctx.transform.scaleX),H=this.lineJoin;if(this.autoPaging){for(var te,ye,Q=JSON.parse(JSON.stringify(this.path)),Ge=JSON.parse(JSON.stringify(this.path)),ie=[],ee=0;ee<Ge.length;ee++)if(Ge[ee].x!==void 0)for(var Ie=g.call(this,Ge[ee]),ue=0;ue<Ie.length;ue+=1)ie.indexOf(Ie[ue])===-1&&ie.push(Ie[ue]);for(var se=0;se<ie.length;se++)for(;this.pdf.internal.getNumberOfPages()<ie[se];)v.call(this);b(ie);for(var Ee=ie[0],je=ie[ie.length-1],it=Ee;it<je+1;it++){this.pdf.setPage(it),this.fillStyle=q,this.strokeStyle=U,this.lineCap=Y,this.lineWidth=R,this.lineJoin=H;var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pt=it===1?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Et=it===1?0:yt+(it-2)*Ct;if(this.ctx.clip_path.length!==0){var Re=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(te,this.posX+this.margin[3],-Et+pt+this.ctx.prevPageLastElemOffset),j.call(this,O,!0),this.path=Re}if(ye=JSON.parse(JSON.stringify(Q)),this.path=y(ye,this.posX+this.margin[3],-Et+pt+this.ctx.prevPageLastElemOffset),G===!1||it===0){var We=(it>Ee||it<je)&&p.call(this);We&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,Ct,null).clip().discardPath()),j.call(this,O,G),We&&this.pdf.restoreGraphicsState()}this.lineWidth=Z}this.path=Q}else this.lineWidth=R,j.call(this,O,G),this.lineWidth=Z},j=function(O,G){if((O!=="stroke"||G||!m.call(this))&&(O==="stroke"||G||!h.call(this))){for(var q,U,Y=[],Z=this.path,R=0;R<Z.length;R++){var H=Z[R];switch(H.type){case"begin":Y.push({begin:!0});break;case"close":Y.push({close:!0});break;case"mt":Y.push({start:H,deltas:[],abs:[]});break;case"lt":var te=Y.length;if(Z[R-1]&&!isNaN(Z[R-1].x)&&(q=[H.x-Z[R-1].x,H.y-Z[R-1].y],te>0)){for(;te>=0;te--)if(Y[te-1].close!==!0&&Y[te-1].begin!==!0){Y[te-1].deltas.push(q),Y[te-1].abs.push(H);break}}break;case"bct":q=[H.x1-Z[R-1].x,H.y1-Z[R-1].y,H.x2-Z[R-1].x,H.y2-Z[R-1].y,H.x-Z[R-1].x,H.y-Z[R-1].y],Y[Y.length-1].deltas.push(q);break;case"qct":var ye=Z[R-1].x+2/3*(H.x1-Z[R-1].x),Q=Z[R-1].y+2/3*(H.y1-Z[R-1].y),Ge=H.x+2/3*(H.x1-H.x),ie=H.y+2/3*(H.y1-H.y),ee=H.x,Ie=H.y;q=[ye-Z[R-1].x,Q-Z[R-1].y,Ge-Z[R-1].x,ie-Z[R-1].y,ee-Z[R-1].x,Ie-Z[R-1].y],Y[Y.length-1].deltas.push(q);break;case"arc":Y.push({deltas:[],abs:[],arc:!0}),Array.isArray(Y[Y.length-1].abs)&&Y[Y.length-1].abs.push(H)}}U=G?null:O==="stroke"?"stroke":"fill";for(var ue=!1,se=0;se<Y.length;se++)if(Y[se].arc)for(var Ee=Y[se].abs,je=0;je<Ee.length;je++){var it=Ee[je];it.type==="arc"?S.call(this,it.x,it.y,it.radius,it.startAngle,it.endAngle,it.counterclockwise,void 0,G,!ue):D.call(this,it.x,it.y),ue=!0}else if(Y[se].close===!0)this.pdf.internal.out("h"),ue=!1;else if(Y[se].begin!==!0){var At=Y[se].start.x,pt=Y[se].start.y;J.call(this,Y[se].deltas,At,pt),ue=!0}U&&E.call(this,U),G&&F.call(this)}},I=function(O){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-q;case"top":return O+G-q;case"hanging":return O+G-2*q;case"middle":return O+G/2-q;default:return O}},_=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(G,q){this.colorStops.push([G,q])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(O,G,q,U,Y,Z,R,H,te){for(var ye=Ae.call(this,q,U,Y,Z),Q=0;Q<ye.length;Q++){var Ge=ye[Q];Q===0&&(te?P.call(this,Ge.x1+O,Ge.y1+G):D.call(this,Ge.x1+O,Ge.y1+G)),fe.call(this,O,G,Ge.x2,Ge.y2,Ge.x3,Ge.y3,Ge.x4,Ge.y4)}H?F.call(this):E.call(this,R)},E=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(O,G){this.pdf.internal.out(r(O)+" "+n(G)+" m")},k=function(O){var G;switch(O.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var q,U,Y,Z=this.pdf.getTextDimensions(O.text),R=I.call(this,O.y),H=_.call(this,R)-Z.h,te=this.ctx.transform.applyToPoint(new o(O.x,R));if(this.autoPaging){var ye=this.ctx.transform.decompose(),Q=new c;Q=(Q=(Q=Q.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale);for(var Ge=this.ctx.transform.applyToRectangle(new l(O.x,R,Z.w,Z.h)),ie=Q.applyToRectangle(new l(O.x,H,Z.w,Z.h)),ee=g.call(this,ie),Ie=[],ue=0;ue<ee.length;ue+=1)Ie.indexOf(ee[ue])===-1&&Ie.push(ee[ue]);b(Ie);for(var se=Ie[0],Ee=Ie[Ie.length-1],je=se;je<Ee+1;je++){this.pdf.setPage(je);var it=je===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pt=this.pdf.internal.pageSize.height-this.margin[2],yt=pt-this.margin[0],Ct=this.pdf.internal.pageSize.width-this.margin[1],Et=Ct-this.margin[3],Re=je===1?0:At+(je-2)*yt;if(this.ctx.clip_path.length!==0){var We=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(q,this.posX+this.margin[3],-1*Re+it),j.call(this,"fill",!0),this.path=We}var et=y([JSON.parse(JSON.stringify(ie))],this.posX+this.margin[3],-Re+it+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(U=this.pdf.internal.getFontSize(),this.pdf.setFontSize(U*O.scale),Y=this.lineWidth,this.lineWidth=Y*O.scale);var xe=this.autoPaging!=="text";if(xe||et.y+et.h<=pt){if(xe||et.y>=it&&et.x<=Ct){var de=xe?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Ct-et.x)[0],Ue=y([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-Re+it+this.ctx.prevPageLastElemOffset)[0],Ke=xe&&(je>se||je<Ee)&&p.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Et,yt,null).clip().discardPath()),this.pdf.text(de,Ue.x,Ue.y,{angle:O.angle,align:G,renderingMode:O.renderingMode}),Ke&&this.pdf.restoreGraphicsState()}}else et.y<pt&&(this.ctx.prevPageLastElemOffset+=pt-et.y);O.scale>=.01&&(this.pdf.setFontSize(U),this.lineWidth=Y)}}else O.scale>=.01&&(U=this.pdf.internal.getFontSize(),this.pdf.setFontSize(U*O.scale),Y=this.lineWidth,this.lineWidth=Y*O.scale),this.pdf.text(O.text,te.x+this.posX,te.y+this.posY,{angle:O.angle,align:G,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(U),this.lineWidth=Y)},D=function(O,G,q,U){q=q||0,U=U||0,this.pdf.internal.out(r(O+q)+" "+n(G+U)+" l")},J=function(O,G,q){return this.pdf.lines(O,G,q,null,null)},fe=function(O,G,q,U,Y,Z,R,H){this.pdf.internal.out([e(a(q+O)),e(s(U+G)),e(a(Y+O)),e(s(Z+G)),e(a(R+O)),e(s(H+G)),"c"].join(" "))},Ae=function(O,G,q,U){for(var Y=2*Math.PI,Z=Math.PI/2;G>q;)G-=Y;var R=Math.abs(q-G);R<Y&&U&&(R=Y-R);for(var H=[],te=U?-1:1,ye=G;R>1e-5;){var Q=ye+te*Math.min(R,Z);H.push(me.call(this,O,ye,Q)),R-=Math.abs(Q-ye),ye=Q}return H},me=function(O,G,q){var U=(q-G)/2,Y=O*Math.cos(U),Z=O*Math.sin(U),R=Y,H=-Z,te=R*R+H*H,ye=te+R*Y+H*Z,Q=4/3*(Math.sqrt(2*te*ye)-ye)/(R*Z-H*Y),Ge=R-Q*H,ie=H+Q*R,ee=Ge,Ie=-ie,ue=U+G,se=Math.cos(ue),Ee=Math.sin(ue);return{x1:O*Math.cos(G),y1:O*Math.sin(G),x2:Ge*se-ie*Ee,y2:Ge*Ee+ie*se,x3:ee*se-Ie*Ee,y3:ee*Ee+Ie*se,x4:O*Math.cos(q),y4:O*Math.sin(q)}},pe=function(O){return 180*O/Math.PI},ne=function(O,G,q,U,Y,Z){var R=O+.5*(q-O),H=G+.5*(U-G),te=Y+.5*(q-Y),ye=Z+.5*(U-Z),Q=Math.min(O,Y,R,te),Ge=Math.max(O,Y,R,te),ie=Math.min(G,Z,H,ye),ee=Math.max(G,Z,H,ye);return new l(Q,ie,Ge-Q,ee-ie)},Pe=function(O,G,q,U,Y,Z,R,H){var te,ye,Q,Ge,ie,ee,Ie,ue,se,Ee,je,it,At,pt,yt=q-O,Ct=U-G,Et=Y-q,Re=Z-U,We=R-Y,et=H-Z;for(ye=0;ye<41;ye++)se=(Ie=(Q=O+(te=ye/40)*yt)+te*((ie=q+te*Et)-Q))+te*(ie+te*(Y+te*We-ie)-Ie),Ee=(ue=(Ge=G+te*Ct)+te*((ee=U+te*Re)-Ge))+te*(ee+te*(Z+te*et-ee)-ue),ye==0?(je=se,it=Ee,At=se,pt=Ee):(je=Math.min(je,se),it=Math.min(it,Ee),At=Math.max(At,se),pt=Math.max(pt,Ee));return new l(Math.round(je),Math.round(it),Math.round(At-je),Math.round(pt-it))},Be=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,G,q=(O=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:G}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(Mr.API),function(t){var e=function(o){var l,c,u,d,f,A,h,m,p,g;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(f=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(A=(f=((f=((f=((f=(f-(g=f%85))/85)-(p=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)%85,c.push(A+33,h+33,m+33,p+33,g+33)):c.push(122);return function(v,y){for(var b=y;b>0;b--)v.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,f,A=String,h="length",m=255,p="charCodeAt",g="slice",v="replace";for(o[g](-2),o=o[g](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),u=[],d=0,f=(o+=l="uuuuu"[g](o[h]%5||5))[h];f>d;d+=5)c=52200625*(o[p](d)-33)+614125*(o[p](d+1)-33)+7225*(o[p](d+2)-33)+85*(o[p](d+3)-33)+(o[p](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(y,b){for(var w=b;w>0;w--)y.pop()}(u,l[h]),A.fromCharCode.apply(A,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=xk(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Mr.API),function(t){t.loadFile=function(e,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,A=0,h=function(m){var p=m.length,g=[],v=String.fromCharCode;for(A=0;A<p;A+=1)g.push(v(255&m.charCodeAt(A)));return g.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(a,s,o)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(Mr.API),function(t){function e(){return(gn.html2canvas?Promise.resolve(gn.html2canvas):Vh(()=>Promise.resolve().then(()=>b6),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(gn.DOMPurify?Promise.resolve(gn.DOMPurify):Vh(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=ja(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var m=d[h],p=m.src.find(function(g){return g.format==="truetype"});p&&u.addFont(p.url,m.ref.name,m.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,u.context2d.save(!0),c(this.prop.container,A)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Mr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(A){return u.updateProgress(null,d),A}).then(d,f).then(function(A){return u.updateProgress(1),A})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),A=u.call(f,l,c);return o.convert(A,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Mr.getPageSize=function(l,c,u){if(ja(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,A=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var m,p=0,g=0;if(h.hasOwnProperty(A))p=h[A][1]/f,g=h[A][0]/f;else try{p=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",g>p&&(m=g,g=p,p=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>g&&(m=g,g=p,p=m)}return{width:g,height:p,unit:c,k:f,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Z3):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}(Mr.API),Mr.API.addJS=function(t){return fV=t,this.internal.events.subscribe("postPutResources",function(){SC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(SC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),dV=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+fV+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){SC!==void 0&&dV!==void 0&&this.internal.out("/Names <</JavaScript "+SC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var A=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(Mr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var A,h=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,p={width:0,height:0,numcomponents:1},g=4;g<m;g+=2){if(g+=h,e.indexOf(f.charCodeAt(g+1))!==-1){A=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),p={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:A,numcomponents:f.charCodeAt(g+9)};break}h=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Mr.API),Mr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=nje(t,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(S){for(var E=S.width,F=S.height,P=S.data,k=S.palette,D=S.depth,J=!1,fe=[],Ae=[],me=void 0,pe=!1,ne=0,Pe=0;Pe<k.length;Pe++){var Be=pQ(k[Pe],4),O=Be[0],G=Be[1],q=Be[2],U=Be[3];fe.push(O,G,q),U!=null&&(U===0?(ne++,Ae.length<1&&Ae.push(Pe)):U<255&&(pe=!0))}if(pe||ne>1){J=!0,Ae=void 0;var Y=E*F;me=new Uint8Array(Y);for(var Z=new DataView(P.buffer),R=0;R<Y;R++){var H=t5(Z,R,D),te=pQ(k[H],4)[3];me[R]=te}}else ne===0&&(Ae=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:J?8:void 0,colorBytes:P,alphaBytes:me,needSMask:J,palette:fe,mask:Ae}}(s):c===2||c===4?function(S){for(var E=S.data,F=S.width,P=S.height,k=S.channels,D=S.depth,J=k===2?"DeviceGray":"DeviceRGB",fe=k-1,Ae=F*P,me=fe,pe=Ae*me,ne=1*Ae,Pe=Math.ceil(pe*D/8),Be=Math.ceil(ne*D/8),O=new Uint8Array(Pe),G=new Uint8Array(Be),q=new DataView(E.buffer),U=new DataView(O.buffer),Y=new DataView(G.buffer),Z=!1,R=0;R<Ae;R++){for(var H=R*k,te=0;te<me;te++)bV(U,t5(q,H+te,D),R*me+te,D);var ye=t5(q,H+me,D);ye<(1<<D)-1&&(Z=!0),bV(Y,ye,1*R,D)}return{colorSpace:J,colorsPerPixel:fe,sMaskBitsPerComponent:Z?D:void 0,colorBytes:O,alphaBytes:G,needSMask:Z}}(s):function(S){var E=S.data,F=S.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:E instanceof Uint16Array?function(P){for(var k=P.length,D=new Uint8Array(2*k),J=new DataView(D.buffer,D.byteOffset,D.byteLength),fe=0;fe<k;fe++)J.setUint16(2*fe,P[fe],!1);return D}(E):E,needSMask:!1}}(s);var f,A,h,m=a,p=m.colorSpace,g=m.colorsPerPixel,v=m.sMaskBitsPerComponent,y=m.colorBytes,b=m.alphaBytes,w=m.needSMask,j=m.palette,I=m.mask,_=null;return n!==Mr.API.image_compression.NONE&&typeof xk=="function"?(_=function(S){var E;switch(S){case Mr.API.image_compression.FAST:E=11;break;case Mr.API.image_compression.MEDIUM:E=13;break;case Mr.API.image_compression.SLOW:E=14;break;default:E=12}return E}(n),f=this.decode.FLATE_DECODE,A="/Predictor ".concat(_," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(o),t=pV(y,Math.ceil(o*g*d/8),g,d,n),w&&(h=pV(b,Math.ceil(o*v/8),1,v,n))):(f=void 0,A=void 0,t=y,w&&(h=b)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:t,index:e,filter:f,decodeParameters:A,transparency:I,palette:j,sMask:h,predictor:_,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:v,colorSpace:p}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new _je(e),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new r5(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(Mr.API),_d.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_d.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Ha.log("bit decode error:"+r)}},_d.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},_d.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},_d.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},_d.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},_d.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},_d.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},_d.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},_d.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new _d(e,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new r5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Mr.API),NV.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new NV(e),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new r5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Mr.API),Mr.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],A=n[u+2],h=n[u+3];s[l++]=d,s[l++]=f,s[l++]=A,o[c++]=h}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Mr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ex=Mr.API,IC=ex.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,A=0,h=t.length,m=0,p=l[0]||c,g=[];for(r=0;r<h;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(A=f&&ja(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,g.push((l[n]||p)/c+A)),m=n;return g},hV=ex.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return ex.processArabic&&(t=ex.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:IC.apply(this,arguments).reduce(function(s,o){return s+o},0)},AV=function(t,e,r,n){for(var a=[],s=0,o=t.length,l=0;s!==o&&l+e[s]<r;)l+=e[s],s++;a.push(t.slice(0,s));var c=s;for(l=0;s!==o;)l+e[s]>n&&(a.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},mV=function(t,e,r){r||(r={});var n,a,s,o,l,c,u,d=[],f=[d],A=r.textIndent||0,h=0,m=0,p=t.split(" "),g=IC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),y=[];p.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(j,I){return(I&&j.length?`
`:"")+j})):y.push(w[0])}),p=y,c=hV.apply(this,[v,r])}for(s=0,o=p.length;s<o;s++){var b=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),b=1),A+h+(m=(a=IC.apply(this,[n,r])).reduce(function(w,j){return w+j},0))>e||b){if(m>e){for(l=AV.apply(this,[n,a,e-(A+h),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(w,j){return w+j},0)}else d=[n];f.push(d),A=m+c,h=g}else d.push(n),A+=h+m,h=g}return u=c?function(w,j){return(j?v:"")+w.join(" ")}:function(w){return w.join(" ")},f.map(u)},ex.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),A="Unicode";return f.metadata[A]?{widths:f.metadata[A].widths||{0:1},kerning:f.metadata[A].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(mV.apply(this,[n[l],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var o=function(A){return"0x"+parseInt(A,10).toString(16)},l=t.__fontmetrics__.compress=function(A){var h,m,p,g,v=["{"];for(var y in A){if(h=A[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=o(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof h=="number")h<0?(p=o(h).slice(3),g="-"):(p=o(h).slice(2),g=""),p=g+p.slice(0,-1)+a[p.slice(-1)];else{if(ja(h)!=="object")throw new Error("Don't know what to do with value type "+ja(h)+".");p=l(h)}v.push(m+p)}return v.push("}"),v.join("")},c=t.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,p,g,v={},y=1,b=v,w=[],j="",I="",_=A.length-1,S=1;S<_;S+=1)(g=A[S])=="'"?h?(p=h.join(""),h=void 0):h=[]:h?h.push(g):g=="{"?(w.push([b,p]),b={},p=void 0):g=="}"?((m=w.pop())[0][m[1]]=b,p=void 0,b=m[0]):g=="-"?y=-1:p===void 0?n.hasOwnProperty(g)?(j+=n[g],p=parseInt(j,16)*y,y=1,j=""):j+=g:n.hasOwnProperty(g)?(I+=n[g],b[p]=parseInt(I,16)*y,y=1,p=void 0,I=""):I+=g;return v},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(A){var h=A.font,m=f.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode.encoding=p,h.encoding=p.codePages[0])}])}(Mr.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(sE(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(Mr),Mr.API.addSvgAsImage=function(t,e,r,n,a,s,o,l){if(isNaN(e)||isNaN(r))throw Ha.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Ha.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(gn.canvg?Promise.resolve(gn.canvg):Vh(()=>import("./index.es-DApmBhg8.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load canvg: "+A))}).then(function(A){return A.default?A.default:A}).then(function(A){return A.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(A){return A.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,o,l)})},Mr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},Mr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function A(m,p){var g,v=!1;for(g=0;g<m.length;g+=1)m[g]===p&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=l.length;for(f=0;f<h;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(ja(t)==="object"){for(a in t)if(s=t[a],A(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&A(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Mr.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,A=s.length;f<A;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,f,A;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,A=(l=Object.keys(s).sort(function(h,m){return h-m})).length;f<A;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,A=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",m=0;m<A.length;m++)h+=String.fromCharCode(A[m]);var p=u();d({data:h,addLength1:!0,objectId:p}),c("endobj");var g=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var v=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+wx(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+wx(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+wx(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,A="",h=0;h<f.length;h++)A+=String.fromCharCode(f[h]);var m=u();d({data:A,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+wx(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+wx(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},A=f.pdfEscape,h=f.activeFontKey,m=f.fonts,p=h,g="",v=0,y="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(y=l,p=h,Array.isArray(l)&&(y=l[0]),v=0;v<y.length;v+=1)m[p].metadata.hasOwnProperty("cmap")&&(o=m[p].metadata.cmap.unicode.codeMap[y[v].charCodeAt(0)]),o||y[v].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?g+=y[v]:g+="";var w="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?w=A(g,p).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(w=r(g,m[p])),f.isHex=!0,{text:w,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(Mr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Mr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,f=e,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var w=function(P){var k=P.charCodeAt(),D=k>>8,J=p[D];return J!==void 0?f[256*J+(255&k)]:D===252||D===253?"AL":v.test(D)?"L":D===8?"R":"N"},j=function(P){for(var k,D=0;D<P.length;D++){if((k=w(P.charAt(D)))==="L")return!1;if(k==="R")return!0}return!1},I=function(P,k,D,J){var fe,Ae,me,pe,ne=k[J];switch(ne){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(ne="AN");break;case"AL":y=!0,ne="R";break;case"WS":case"BN":ne="N";break;case"CS":J<1||J+1>=k.length||(fe=D[J-1])!=="EN"&&fe!=="AN"||(Ae=k[J+1])!=="EN"&&Ae!=="AN"?ne="N":y&&(Ae="AN"),ne=Ae===fe?Ae:"N";break;case"ES":ne=(fe=J>0?D[J-1]:"B")==="EN"&&J+1<k.length&&k[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&D[J-1]==="EN"){ne="EN";break}if(y){ne="N";break}for(me=J+1,pe=k.length;me<pe&&k[me]==="ET";)me++;ne=me<pe&&k[me]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(pe=k.length,me=J+1;me<pe&&k[me]==="NSM";)me++;if(me<pe){var Pe=P[J],Be=Pe>=1425&&Pe<=2303||Pe===64286;if(fe=k[me],Be&&(fe==="R"||fe==="AL")){ne="R";break}}}ne=J<1||(fe=k[J-1])==="B"?"N":D[J-1];break;case"B":y=!1,a=!0,ne=b;break;case"S":s=!0,ne="N"}return ne},_=function(P,k,D){var J=P.split("");return D&&S(J,D,{hiLevel:b}),J.reverse(),k&&k.reverse(),J.join("")},S=function(P,k,D){var J,fe,Ae,me,pe,ne=-1,Pe=P.length,Be=0,O=[],G=b?h:A,q=[];for(y=!1,a=!1,s=!1,fe=0;fe<Pe;fe++)q[fe]=w(P[fe]);for(Ae=0;Ae<Pe;Ae++){if(pe=Be,O[Ae]=I(P,q,O,Ae),J=240&(Be=G[pe][m[O[Ae]]]),Be&=15,k[Ae]=me=G[Be][5],J>0)if(J===16){for(fe=ne;fe<Ae;fe++)k[fe]=1;ne=-1}else ne=-1;if(G[Be][6])ne===-1&&(ne=Ae);else if(ne>-1){for(fe=ne;fe<Ae;fe++)k[fe]=me;ne=-1}q[Ae]==="B"&&(k[Ae]=0),D.hiLevel|=me}s&&function(U,Y,Z){for(var R=0;R<Z;R++)if(U[R]==="S"){Y[R]=b;for(var H=R-1;H>=0&&U[H]==="WS";H--)Y[H]=b}}(q,k,Pe)},E=function(P,k,D,J,fe){if(!(fe.hiLevel<P)){if(P===1&&b===1&&!a)return k.reverse(),void(D&&D.reverse());for(var Ae,me,pe,ne,Pe=k.length,Be=0;Be<Pe;){if(J[Be]>=P){for(pe=Be+1;pe<Pe&&J[pe]>=P;)pe++;for(ne=Be,me=pe-1;ne<me;ne++,me--)Ae=k[ne],k[ne]=k[me],k[me]=Ae,D&&(Ae=D[ne],D[ne]=D[me],D[me]=Ae);Be=pe}Be++}}},F=function(P,k,D){var J=P.split(""),fe={hiLevel:b};return D||(D=[]),S(J,D,fe),function(Ae,me,pe){if(pe.hiLevel!==0&&d)for(var ne,Pe=0;Pe<Ae.length;Pe++)me[Pe]===1&&(ne=g.indexOf(Ae[Pe]))>=0&&(Ae[Pe]=g[ne+1])}(J,D,fe),E(2,J,k,D,fe),E(1,J,k,D,fe),J.join("")};return this.__bidiEngine__.doBidiReorder=function(P,k,D){if(function(fe,Ae){if(Ae)for(var me=0;me<fe.length;me++)Ae[me]=me;l===void 0&&(l=j(fe)),u===void 0&&(u=j(fe))}(P,k),o||!c||u)if(o&&c&&l^u)b=l?1:0,P=_(P,k,D);else if(!o&&c&&u)b=l?1:0,P=F(P,k,D),P=_(P,k);else if(!o||l||c||u){if(o&&!c&&l^u)P=_(P,k),l?(b=0,P=F(P,k,D)):(b=1,P=F(P,k,D),P=_(P,k));else if(o&&l&&!c&&u)b=1,P=F(P,k,D),P=_(P,k);else if(!o&&!c&&l^u){var J=d;l?(b=1,P=F(P,k,D),b=0,d=!1,P=F(P,k,D),d=J):(b=0,P=F(P,k,D),P=_(P,k),b=1,d=!1,P=F(P,k,D),d=J,P=_(P,k))}}else b=0,P=F(P,k,D);else b=l?1:0,P=F(P,k,D);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Mr),Mr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new om(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Uje(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Eje(this.contents),this.head=new Ije(this),this.name=new kje(this),this.cmap=new lre(this),this.toUnicode={},this.hhea=new jje(this),this.maxp=new Fje(this),this.hmtx=new Oje(this),this.post=new Bje(this),this.os2=new Pje(this),this.loca=new Lje(this),this.glyf=new Dje(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var lf,om=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,o,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),Eje=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,o,l,c,u,d,f,A,h,m,p;for(p in h=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),o=Math.floor(f/c),d=16*h-f,(a=new om).writeInt(this.scalarType),a.writeShort(h),a.writeShort(f),a.writeShort(o),a.writeShort(d),s=16*h,u=a.pos+s,l=null,m=[],r)for(A=r[p],a.writeString(p),a.writeInt(t(A)),a.writeInt(u),a.writeInt(A.length),m=m.concat(A),p==="head"&&(l=u),u+=A.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,o;for(r=cre.call(r);r.length%4;)r.push(0);for(s=new om(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),Sje={}.hasOwnProperty,Xf=function(t,e){for(var r in e)Sje.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};lf=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Ije=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,lf),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new om).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),CV=function(){function t(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,g,v,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(h=e.readUInt16(),A=h/2,e.pos+=6,s=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),e.pos+=2,p=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),u=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),d=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),a=(this.length-e.pos+this.offset)/2,l=function(){var w,j;for(j=[],c=w=0;0<=a?w<a:w>a;c=0<=a?++w:--w)j.push(e.readUInt16());return j}(),c=v=0,b=s.length;v<b;c=++v)for(g=s[c],n=y=m=p[c];m<=g?y<=g:y>=g;n=m<=g?++y:--y)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-m)-(A-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}e.pos=f}return t.encode=function(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,g,v,y,b,w,j,I,_,S,E,F,P,k,D,J,fe,Ae,me,pe,ne,Pe,Be,O,G,q,U,Y,Z,R,H,te,ye,Q;switch(J=new om,o=Object.keys(e).sort(function(Ge,ie){return Ge-ie}),r){case"macroman":for(p=0,g=function(){var Ge=[];for(m=0;m<256;++m)Ge.push(0);return Ge}(),y={0:0},s={},fe=0,ne=o.length;fe<ne;fe++)y[H=e[a=o[fe]]]==null&&(y[H]=++p),s[a]={old:e[a],new:y[e[a]]},g[a]=y[e[a]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(g),{charMap:s,subtable:J.data,maxGlyphID:p+1};case"unicode":for(k=[],f=[],b=0,y={},n={},v=u=null,Ae=0,Pe=o.length;Ae<Pe;Ae++)y[j=e[a=o[Ae]]]==null&&(y[j]=++b),n[a]={old:j,new:y[j]},l=y[j]-a,v!=null&&l===u||(v&&f.push(v),k.push(a),u=l),v=a;for(v&&f.push(v),f.push(65535),k.push(65535),F=2*(E=k.length),S=2*Math.pow(Math.log(E)/Math.LN2,2),A=Math.log(S/2)/Math.LN2,_=2*E-S,c=[],I=[],h=[],m=me=0,Be=k.length;me<Be;m=++me){if(P=k[m],d=f[m],P===65535){c.push(0),I.push(0);break}if(P-(D=n[P].new)>=32768)for(c.push(0),I.push(2*(h.length+E-m)),a=pe=P;P<=d?pe<=d:pe>=d;a=P<=d?++pe:--pe)h.push(n[a].new);else c.push(D-P),I.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*E+2*h.length),J.writeUInt16(0),J.writeUInt16(F),J.writeUInt16(S),J.writeUInt16(A),J.writeUInt16(_),Z=0,O=f.length;Z<O;Z++)a=f[Z],J.writeUInt16(a);for(J.writeUInt16(0),R=0,G=k.length;R<G;R++)a=k[R],J.writeUInt16(a);for(te=0,q=c.length;te<q;te++)l=c[te],J.writeUInt16(l);for(ye=0,U=I.length;ye<U;ye++)w=I[ye],J.writeUInt16(w);for(Q=0,Y=h.length;Q<Y;Q++)p=h[Q],J.writeUInt16(p);return{charMap:n,subtable:J.data,maxGlyphID:b+1}}},t}(),lre=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,lf),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new CV(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=CV.encode(e,r),(a=new om).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),jje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,lf),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),Pje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,lf),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),Bje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,lf),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t}(),Tje=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},kje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,lf),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,o,l,c,u,d,f,A;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,f=n.length;d<f;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),o=new Tje(u,a),c[A=a.nameID]==null&&(c[A]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),Fje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,lf),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),Oje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,lf),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,o,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,f,A;for(A=[],u=0,d=(f=this.metrics).length;u<d;u++)s=f[u],A.push(s.advance);return A}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),cre=[].slice,Dje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,lf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,o,l,c,u,d,f;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(l=new om(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new Mje(l,u,f,c,d):new Rje(l,o,u,f,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,o,l,c;for(o=[],s=[],l=0,c=r.length;l<c;l++)a=e[r[l]],s.push(o.length),a&&(o=o.concat(a.encode(n)));return s.push(o.length),{table:o,offsets:s}},t}(),Rje=function(){function t(e,r,n,a,s,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Mje=function(){function t(e,r,n,a,s){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new om(cre.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),Lje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,lf),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,o=0;o<n.length;++o)if(n[o]=a,s<r.length&&r[s]==o){++s,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),Uje=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,o,l,c;for(a={},o=0,l=e.length;o<l;o++)a[s=e[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,g,v;for(a in n=lre.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},v=n.charMap)h[(c=v[a]).old]=c.new;for(m in A=n.maxGlyphID,o)m in h||(h[m]=A++);return d=function(y){var b,w;for(b in w={},y)w[y[b]]=b;return w}(h),f=Object.keys(d).sort(function(y,b){return y-b}),p=function(){var y,b,w;for(w=[],y=0,b=f.length;y<b;y++)l=f[y],w.push(d[l]);return w}(),s=this.font.glyf.encode(o,p,h),u=this.font.loca.encode(s.offsets,p),g={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();Mr.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+r},e}();const Ek=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:gje,AcroFormAppearance:$r,AcroFormButton:Xi,AcroFormCheckBox:yb,AcroFormChoiceField:wp,AcroFormComboBox:Cp,AcroFormEditBox:xb,AcroFormListBox:Np,AcroFormPasswordField:bb,AcroFormPushButton:vb,AcroFormRadioButton:_p,AcroFormTextField:q0,GState:y2,ShadingPattern:b0,TilingPattern:up,default:Mr,jsPDF:Mr},Symbol.toStringTag,{value:"Module"}));async function _V(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:ur.now()};return Bn(bt(Oe,"inventory_batches"),e)}async function ure(t,e){await pn(zt(Oe,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:ur.now()})}async function Qje(t,e){const r=nr(bt(Oe,"batch_allocations"),sr("saleDate",">=",t),sr("saleDate","<=",e)),n=await Qt(r),a={};return n.forEach(s=>{const o=s.data(),l=o.batchId;a[l]||(a[l]={batchId:o.batchId,batchDate:o.batchDate,productName:o.productName,quantity:0,amountCharged:0}),a[l].quantity+=Number(o.quantity||0),a[l].amountCharged+=Number(o.amountCharged||0)}),Object.values(a)}async function dre(t){const e=zt(Oe,"salesV2",t),r=await Ci(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)){for(const l of n.items)if(Array.isArray(l==null?void 0:l.allocations))for(const c of l.allocations){const u=String((c==null?void 0:c.batchId)||"").trim(),d=Number((c==null?void 0:c.qty)||0);u&&d&&a.push({batchId:u,qty:d})}}if(Array.isArray(n.allocations))for(const l of n.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&a.push({batchId:c,qty:u})}if(a.length===0)return await Di(Oe,async l=>{l.delete(e)}),{restored:0};const s=new Map;for(const l of a)s.set(l.batchId,Number((s.get(l.batchId)||0)+l.qty));let o=0;return await Di(Oe,async l=>{const c=Array.from(s.entries()),u=c.map(([f])=>zt(Oe,"inventory_batches",f)),d=await Promise.all(u.map(f=>l.get(f)));c.forEach(([f,A],h)=>{const m=d[h];if(!m.exists())return;const p=m.data(),g=Number((p==null?void 0:p.remaining)??0),v=Number((g+Number(A||0)).toFixed(3));l.update(u[h],{remaining:v}),o+=Number(A||0)}),l.delete(e)}),{restored:o}}var fre={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},EV=So.createContext&&So.createContext(fre),Vje=["attr","size","title"];function Hje(t,e){if(t==null)return{};var r=$je(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $je(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function wS(){return wS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wS.apply(this,arguments)}function SV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function NS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SV(Object(r),!0).forEach(function(n){Gje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gje(t,e,r){return e=Kje(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kje(t){var e=qje(t,"string");return typeof e=="symbol"?e:e+""}function qje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hre(t){return t&&t.map((e,r)=>So.createElement(e.tag,NS({key:r},e.attr),hre(e.child)))}function zje(t){return e=>So.createElement(Wje,wS({attr:NS({},t.attr)},e),hre(t.child))}function Wje(t){var e=r=>{var{attr:n,size:a,title:s}=t,o=Hje(t,Vje),l=a||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),So.createElement("svg",wS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:NS(NS({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&So.createElement("title",null,s),t.children)};return EV!==void 0?So.createElement(EV.Consumer,null,r=>e(r)):e(fre)}function Xje(t){return zje({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Tc({onClick:t,loading:e,className:r=""}){return i.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[i.jsx(Xje,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}function kc(){const[t,e]=x.useState(0),r=x.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const Ho=t=>Math.round((Number(t)||0)*100)/100,dh=t=>Math.round((Number(t)||0)*1e3)/1e3,Pu=t=>Number(t??0).toFixed(2),fh=t=>Number(t??0).toFixed(3),IV=(t,e)=>{var a;const r=t.date??((a=t.timestamp)!=null&&a.toDate?Ir(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.type??"CONTADO";return Array.isArray(t.items)&&t.items.length>0?t.items.map((s,o)=>{const l=Number((s==null?void 0:s.qty)??0),c=Number((s==null?void 0:s.lineFinal)??0)||Math.max(0,Number((s==null?void 0:s.unitPrice)||0)*l-Number((s==null?void 0:s.discount)||0));return{id:`${e}#${o}`,productName:String((s==null?void 0:s.productName)??"(sin nombre)"),quantity:l,amount:Ho(c),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",type:n,measurement:String((s==null?void 0:s.measurement)??t.measurement??""),allocations:Array.isArray(s==null?void 0:s.allocations)?s.allocations:t.allocations,avgUnitCost:Number((s==null?void 0:s.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((s==null?void 0:s.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",type:n,measurement:String(t.measurement??""),allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]};function Yje({role:t,roles:e}){const[r,n]=x.useState([]),[a,s]=x.useState([]),[o,l]=x.useState(null),[c,u]=x.useState(!0),[d,f]=x.useState(""),[A,h]=x.useState("ALL"),[m,p]=x.useState("ALL"),[g,v]=x.useState({}),[y,b]=x.useState(null),[w,j]=x.useState(0),[I,_]=x.useState(0),[S,E]=x.useState(""),[F,P]=x.useState(0),[k,D]=x.useState("0"),J=Ir(new Date,"yyyy-MM-dd"),[fe,Ae]=x.useState(J),[me,pe]=x.useState(J),[ne,Pe]=x.useState(!1),[Be,O]=x.useState(!1),[G,q]=x.useState(!1),[U,Y]=x.useState(""),Z=x.useRef(null),{refreshKey:R,refresh:H}=kc(),te=e&&e.length?e:t,ye=Nye(te,"bills","cerrarVentas"),Q=on(te,"admin"),Ge=({title:ce,open:ke,onToggle:dt,right:ft})=>i.jsxs("button",{type:"button",onClick:dt,className:"w-full flex items-center justify-between gap-3 px-4 py-3 rounded-xl border bg-gray-50 hover:bg-gray-100 active:bg-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[i.jsx("span",{className:"font-semibold truncate",children:ce}),ft?i.jsx("span",{className:"text-xs text-gray-600",children:ft}):null]}),i.jsx("div",{className:"shrink-0 text-lg font-bold leading-none",children:ke?"":"+"})]});x.useEffect(()=>{if(!fe||!me)return;u(!0);const ce=nr(bt(Oe,"salesV2"),sr("date",">=",fe),sr("date","<=",me)),ke=ad(ce,dt=>{const ft=[];dt.forEach(gt=>{const Rt=IV(gt.data(),gt.id);ft.push(...Rt)}),n(ft),u(!1)},dt=>{console.error("Error cargando ventas por periodo:",dt),n([]),u(!1)});return()=>ke()},[fe,me,R]),x.useEffect(()=>{if(!fe||!me)return;const ce=nr(bt(Oe,"salesV2"),sr("status","==","FLOTANTE"),sr("date",">=",fe),sr("date","<=",me)),ke=ad(ce,dt=>{const ft=[];dt.forEach(gt=>{const Rt=IV(gt.data(),gt.id);ft.push(...Rt)}),s(ft)});return()=>ke()},[fe,me,R]),x.useEffect(()=>{(async()=>{try{const ce=await Qt(bt(Oe,"users")),ke={};ce.forEach(dt=>{const ft=dt.data(),gt=String(ft.email||"").trim().toLowerCase(),Rt=String(ft.name||"").trim();gt&&(ke[gt]=Rt||ft.email||"")}),v(ke)}catch(ce){console.error("Error cargando usuarios:",ce),v({})}})()},[]);const ie=ce=>{const ke=String(ce||"").trim().toLowerCase();return g[ke]||ce||""};x.useEffect(()=>{(async()=>{const ke=nr(bt(Oe,"daily_closures"),sr("date","==",J)),dt=await Qt(ke);if(dt.empty)l(null);else{const ft=dt.docs[0];l({id:ft.id,...ft.data()})}})()},[J,R]);const ee=So.useMemo(()=>{let ce=[];if(A==="FLOTANTE"){const dt=[...r,...a],ft=new Map;for(const gt of dt)gt.status==="FLOTANTE"&&ft.set(gt.id,gt);ce=Array.from(ft.values())}else if(A==="ALL"){const dt=[...r,...a],ft=new Map;for(const gt of dt)ft.set(gt.id,gt);ce=Array.from(ft.values())}else ce=r.filter(dt=>dt.status==="PROCESADA");m!=="ALL"&&(ce=ce.filter(dt=>dt.type===m));const ke=U.trim().toLowerCase();if(ke){const dt=gt=>String(gt||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),ft=dt(ke);ce=ce.filter(gt=>dt(gt.productName).includes(ft))}return ce},[A,r,a,U,m]),Ie=Ho(ee.reduce((ce,ke)=>ce+(ke.amount||0),0)),ue=Ho(ee.reduce((ce,ke)=>ce+Number(ke.cogsAmount??0),0)),se=ce=>String(ce||"").trim().toLowerCase()!=="lb",Ee=ee.filter(ce=>ce.type==="CONTADO"),je=ee.filter(ce=>ce.type==="CREDITO"),it=dh(Ee.filter(ce=>se(ce.measurement)).reduce((ce,ke)=>ce+(ke.quantity||0),0)),At=dh(Ee.filter(ce=>!se(ce.measurement)).reduce((ce,ke)=>ce+(ke.quantity||0),0)),pt=dh(je.filter(ce=>se(ce.measurement)).reduce((ce,ke)=>ce+(ke.quantity||0),0)),yt=dh(je.filter(ce=>!se(ce.measurement)).reduce((ce,ke)=>ce+(ke.quantity||0),0)),Ct=Ho(Ee.reduce((ce,ke)=>ce+(ke.amount||0),0)),Et=Ho(je.reduce((ce,ke)=>ce+(ke.amount||0),0)),Re=Ho(Ee.reduce((ce,ke)=>ce+Number(ke.cogsAmount??0),0)),We=Ho(je.reduce((ce,ke)=>ce+Number(ke.cogsAmount??0),0)),et=Ho(Ct-Re),xe=Ho(Et-We),de=dh(it+pt),Ue=dh(At+yt),Ke=Ho(Ct+Et),Ne={};ee.forEach(ce=>{const ke=ce.productName||"(sin nombre)";Ne[ke]||(Ne[ke]={totalQuantity:0,totalAmount:0}),Ne[ke].totalQuantity=dh(Ne[ke].totalQuantity+(ce.quantity||0)),Ne[ke].totalAmount=Ho(Ne[ke].totalAmount+(ce.amount||0))});const mt=Object.entries(Ne).map(([ce,ke])=>({productName:ce,totalQuantity:ke.totalQuantity,totalAmount:ke.totalAmount})),wt=async()=>{try{const ce=ee.filter(Se=>Se.status==="FLOTANTE"),ke=ce.length>0?ce:r.filter(Se=>Se.status!=="PROCESADA");if(ke.length===0){f("No hay ventas para procesar.");return}const dt={totalCharged:Ho(ke.reduce((Se,ht)=>Se+(ht.amount||0),0)),totalSuggested:Ho(ke.reduce((Se,ht)=>Se+(ht.amountSuggested||0),0)),totalUnits:dh(ke.reduce((Se,ht)=>Se+(ht.quantity||0),0)),totalCOGS:Ho(ke.reduce((Se,ht)=>Se+Number(ht.cogsAmount??0),0))},ft=Ho(dt.totalCharged-dt.totalSuggested),gt=Ho(dt.totalCharged-dt.totalCOGS),Rt=await Bn(bt(Oe,"daily_closures"),{date:J,createdAt:ur.now(),periodStart:fe,periodEnd:me,totalCharged:dt.totalCharged,totalSuggested:dt.totalSuggested,totalDifference:ft,totalUnits:dt.totalUnits,totalCOGS:dt.totalCOGS,grossProfit:gt,products:ke.map(Se=>({productName:Se.productName,quantity:Se.quantity,amount:Se.amount})),salesV2:ke.map(Se=>({id:Se.id,productName:Se.productName,quantity:Se.quantity,amount:Se.amount,amountSuggested:Se.amountSuggested,userEmail:Se.userEmail,clientName:Se.clientName,amountReceived:Se.amountReceived,change:Se.change,status:Se.status,cogsAmount:Se.cogsAmount??0,avgUnitCost:Se.avgUnitCost??null,allocations:Se.allocations??[],date:Se.date})),productSummary:Object.entries(ke.reduce((Se,ht)=>{const W=ht.productName||"(sin nombre)";return Se[W]||(Se[W]={totalQuantity:0,totalAmount:0}),Se[W].totalQuantity=dh(Se[W].totalQuantity+(ht.quantity||0)),Se[W].totalAmount=Ho(Se[W].totalAmount+(ht.amount||0)),Se},{})).map(([Se,ht])=>({productName:Se,totalQuantity:ht.totalQuantity,totalAmount:ht.totalAmount}))}),ot=Kd(Oe);ke.forEach(Se=>{ot.update(zt(Oe,"salesV2",Se.id.split("#")[0]),{status:"PROCESADA",closureId:Rt.id,closureDate:J})}),await ot.commit(),f(` Cierre guardado. Ventas procesadas: ${ke.length}.`)}catch(ce){console.error(ce),f(" Error al guardar el cierre.")}},we=async ce=>{if(!Q){f(" No tienes permisos para revertir esta venta.");return}if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await pn(zt(Oe,"salesV2",ce.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),f(" Venta revertida a FLOTANTE.")}catch(ke){console.error(ke),f(" No se pudo revertir la venta.")}},ae=ce=>{if(!Q){f(" No tienes permisos para editar esta venta.");return}b(ce),j(ce.quantity),_(ce.amount),E(ce.clientName),P(ce.amountReceived),D(ce.change)},be=async()=>{if(!Q){f(" No tienes permisos para guardar cambios.");return}if(y)try{await pn(zt(Oe,"salesV2",y.id.split("#")[0]),{quantity:w,amount:I,amountCharged:I,clientName:S,amountReceived:F,change:k}),b(null),f(" Venta actualizada.")}catch(ce){console.error(ce),f(" No se pudo actualizar la venta.")}},ve=async ce=>{if(!Q){f(" No tienes permisos para eliminar esta venta.");return}if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:ke}=await dre(ce.split("#")[0]);f(` Venta eliminada. Stock restaurado: ${Number(ke).toFixed(2)}.`)}catch(ke){console.error(ke),f(" No se pudo eliminar la venta.")}},Ve=async()=>{if(Z.current){Z.current.classList.add("force-pdf-colors"),Z.current.classList.add("pdf-print-mode");try{const ke=(await yg(Z.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),dt=new Mr;dt.addImage(ke,"PNG",10,10,190,0),dt.save(`cierre_${J}.pdf`)}finally{Z.current.classList.remove("pdf-print-mode"),Z.current.classList.remove("force-pdf-colors")}}};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[i.jsxs("h2",{className:"text-2xl font-bold",children:["Cierre de Ventas - ",fe,"  ",me]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Tc,{onClick:H})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(Ge,{title:"Filtros",open:ne,onToggle:()=>Pe(ce=>!ce),right:i.jsxs("span",{className:"ml-1",children:[fe,"  ",me,A!=="ALL"?`  ${A}`:"",m!=="ALL"?`  ${m==="CREDITO"?"Crdito":"Cash"}`:"",U.trim()?`  "${U.trim()}"`:""]})}),ne&&i.jsx("div",{className:"mt-3 border rounded-xl p-3 bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Periodo desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:fe,onChange:ce=>Ae(ce.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:me,onChange:ce=>pe(ce.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Estado"}),i.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:A,onChange:ce=>h(ce.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Tipo Operacin"}),i.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:m,onChange:ce=>p(ce.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),i.jsx("option",{value:"CREDITO",children:"Crdito"}),i.jsx("option",{value:"CONTADO",children:"Cash"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),i.jsx("input",{type:"text",className:"border rounded px-2 py-2 w-full",placeholder:"Buscar por producto...",value:U,onChange:ce=>Y(ce.target.value)})]})]})})]}),c?i.jsx("p",{children:"Cargando ventas..."}):i.jsxs("div",{ref:Z,children:[i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Estado"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[ee.map(ce=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ce.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ce.status})}),i.jsx("td",{className:"border p-1",children:ce.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:ce.productName}),i.jsx("td",{className:"border p-1",children:fh(ce.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Pu(ce.amount)]}),i.jsx("td",{className:"border p-1",children:ce.date}),i.jsx("td",{className:"border p-1",children:ie(ce.userEmail)}),i.jsx("td",{className:"border p-1",children:ce.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2 justify-center",children:Q?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>ae(ce),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>ve(ce.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):ce.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2 justify-center",children:Q?i.jsx("button",{onClick:()=>we(ce.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):i.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},ce.id)),ee.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden mb-4",children:[i.jsx(Ge,{title:"Ventas",open:Be,onToggle:()=>O(ce=>!ce),right:i.jsxs("span",{className:"ml-1",children:[ee.length,"  C$",Pu(Ie)]})}),Be&&i.jsxs("div",{className:"mt-3 space-y-3",children:[ee.map(ce=>i.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[i.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:ce.productName}),i.jsx("div",{className:"text-xs text-gray-500",children:ce.date})]}),i.jsxs("div",{className:"text-right shrink-0 ml-3",children:[i.jsxs("div",{className:"font-bold",children:["C$",Pu(ce.amount)]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${ce.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ce.status})]})]}),i.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Cantidad"}),i.jsx("strong",{children:fh(ce.quantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("strong",{children:ce.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("strong",{className:"text-right break-all",children:ie(ce.userEmail)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("strong",{className:"text-right break-all",children:ce.clientName||""})]}),i.jsx("div",{className:"pt-2",children:ce.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2",children:Q?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>ae(ce),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>ve(ce.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):ce.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2",children:Q?i.jsx("button",{onClick:()=>we(ce.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},ce.id)),ee.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-6",children:[i.jsxs("div",{children:["Total libras Cash: ",i.jsx("strong",{children:fh(At)})]}),i.jsxs("div",{children:["Total Unidades cash: ",i.jsx("strong",{children:fh(it)})]}),i.jsxs("div",{children:["Total libras credito: ",i.jsx("strong",{children:fh(yt)})]}),i.jsxs("div",{children:["Total Unidades credito: ",i.jsx("strong",{children:fh(pt)})]}),i.jsxs("div",{children:["Total facturado Cash: ",i.jsxs("strong",{children:["C$",Pu(Re)]})]}),i.jsxs("div",{children:["Total facturado credito:"," ",i.jsxs("strong",{children:["C$",Pu(We)]})]}),i.jsxs("div",{children:["Total venta Cash: ",i.jsxs("strong",{children:["C$",Pu(Ct)]})]}),i.jsxs("div",{children:["Total venta Credito: ",i.jsxs("strong",{children:["C$",Pu(Et)]})]}),i.jsxs("div",{children:["Utilidad bruta Cash: ",i.jsxs("strong",{children:["C$",Pu(et)]})]}),i.jsxs("div",{children:["Utilidad bruta credito:"," ",i.jsxs("strong",{children:["C$",Pu(xe)]})]}),i.jsxs("div",{children:["Total libras cash y credito: ",i.jsx("strong",{children:fh(Ue)})]}),i.jsxs("div",{children:["Total unidades cash y credito:"," ",i.jsx("strong",{children:fh(de)})]}),i.jsxs("div",{children:["Total ventas Cash y credito:"," ",i.jsxs("strong",{children:["C$",Pu(Ke)]})]}),i.jsxs("div",{children:["Total facturado a precio compra:"," ",i.jsxs("strong",{children:["C$",Pu(ue)]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(Ge,{title:"Consolidado por producto",open:G,onToggle:()=>q(ce=>!ce),right:i.jsx("span",{className:"ml-1",children:mt.length})}),G&&i.jsx("div",{className:"mt-3",children:i.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),i.jsxs("tbody",{children:[mt.map(ce=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:ce.productName}),i.jsx("td",{className:"border p-1",children:fh(ce.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Pu(ce.totalAmount)]})]},ce.productName)),mt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[i.jsx("button",{disabled:!ye,onClick:wt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),i.jsx("button",{onClick:Ve,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[y.productName,"  ",ie(y.userEmail)]}),i.jsx("label",{className:"text-sm",children:"Cantidad"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:w,onChange:ce=>j(parseFloat(ce.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Monto cobrado"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:I,onChange:ce=>_(parseFloat(ce.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Cliente"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:S,onChange:ce=>E(ce.target.value)}),i.jsx("label",{className:"text-sm",children:"Paga con"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:F,onChange:ce=>P(parseFloat(ce.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Vuelto"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:k,onChange:ce=>D(ce.target.value)}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{onClick:()=>b(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),i.jsx("button",{onClick:be,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Bu=t=>Number(t??0).toFixed(2),tx=t=>Number(t??0).toFixed(3);function Jje(){var y,b,w,j;const t=async I=>{if(!window.confirm(`Eliminar el cierre del ${I.date}?`))return;const _=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(_){const S=await Qt(nr(bt(Oe,"salesV2"),sr("closureId","==",I.id)));if(!S.empty){const E=Kd(Oe);S.forEach(F=>{E.update(zt(Oe,"salesV2",F.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await E.commit()}}await Pn(zt(Oe,"daily_closures",I.id)),(u==null?void 0:u.id)===I.id&&d(null),await m(),A(` Cierre eliminado${_?" y ventas reabiertas.":"."}`)}catch(S){console.error(S),A(" No se pudo eliminar el cierre.")}},[e,r]=x.useState(Ir(mee(new Date),"yyyy-MM-dd")),[n,a]=x.useState(Ir(new Date,"yyyy-MM-dd")),[s,o]=x.useState(!0),[l,c]=x.useState([]),[u,d]=x.useState(null),[f,A]=x.useState(""),h=x.useRef(null),m=async()=>{try{o(!0);const I=nr(bt(Oe,"daily_closures"),sr("date",">=",e),sr("date","<=",n)),_=await Qt(I),S=[];_.forEach(E=>S.push({id:E.id,...E.data()})),S.sort((E,F)=>E.date<F.date?1:E.date>F.date?-1:0),c(S)}catch(I){console.error(I),A(" Error cargando el historial.")}finally{o(!1)}};x.useEffect(()=>{m()},[]);const p=async I=>{I.preventDefault(),m()},g=x.useMemo(()=>{if(!u)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const I=Number(u.totalUnits??0),_=Number(u.totalSuggested??0),S=Number(u.totalCharged??0),E=Number(u.totalDifference??(isFinite(S-_)?S-_:0)),F=Number(u.totalCOGS??0),P=Number(u.grossProfit??(isFinite(S-F)?S-F:0));return{units:I,sug:_,chg:S,diff:E,cogs:F,profit:P}},[u]),v=async()=>{if(!h.current||!u)return;const I=h.current;I.classList.add("force-pdf-colors");try{const[{default:_},{jsPDF:S}]=await Promise.all([Vh(()=>Promise.resolve().then(()=>b6),void 0),Vh(()=>Promise.resolve().then(()=>Ek),void 0)]),F=(await _(I,{backgroundColor:"#ffffff",onclone:D=>{const J=D.defaultView;D.body.querySelectorAll("*").forEach(Ae=>{const me=J.getComputedStyle(Ae);me.color&&(Ae.style.color=me.color),me.backgroundColor&&me.backgroundColor!=="rgba(0, 0, 0, 0)"&&(Ae.style.backgroundColor=me.backgroundColor),me.borderColor&&(Ae.style.borderColor=me.borderColor)})}})).toDataURL("image/png"),{jsPDF:P}=await Vh(async()=>{const{jsPDF:D}=await Promise.resolve().then(()=>Ek);return{jsPDF:D}},void 0),k=new P;k.addImage(F,"PNG",10,10,190,0),k.save(`cierre_${u.date}.pdf`)}finally{I.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),i.jsxs("form",{onSubmit:p,className:"flex flex-wrap items-end gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:I=>r(I.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:I=>a(I.target.value)})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),s?i.jsx("p",{children:"Cargando..."}):l.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):i.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Monto de venta"}),i.jsx("th",{className:"border p-2",children:"Monto al costo"}),i.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsx("tbody",{children:l.map(I=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.date}),i.jsx("td",{className:"border p-1",children:tx(I.totalUnits)}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.totalCharged)]}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.totalCOGS)]}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.grossProfit??Number(I.totalCharged??0)-Number(I.totalCOGS??0))]}),i.jsx("td",{className:"border p-1",children:i.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(I),children:"Ver detalle"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(I),children:"Eliminar"})]})})]},I.id))})]}),u&&i.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",u.date]}),i.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),i.jsx("button",{onClick:v,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),i.jsxs("div",{ref:h,className:"space-y-4",children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:i.jsxs("div",{children:["Total Libras/Unidades: ",i.jsx("strong",{children:tx(g.units)})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[i.jsxs("div",{children:["Monto al costo:"," ",i.jsxs("strong",{children:["C$",Bu(g.cogs)]})]}),i.jsxs("div",{children:["Ganancia sin gastos:"," ",i.jsxs("strong",{children:["C$",Bu(g.profit)]})]})]}),(y=u.salesV2)!=null&&y.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto de ventas"}),i.jsx("th",{className:"border p-2",children:"Monto al costo"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),i.jsx("tbody",{children:u.salesV2.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),i.jsx("td",{className:"border p-1",children:tx(I.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.amount)]}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.cogsAmount)]}),i.jsx("td",{className:"border p-1",children:I.date??""}),i.jsx("td",{className:"border p-1",children:I.userEmail??""})]},_))})]})]}):(b=u.sales)!=null&&b.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Paga con"}),i.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),i.jsx("tbody",{children:u.sales.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),i.jsx("td",{className:"border p-1",children:tx(I.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.amount)]}),i.jsx("td",{className:"border p-1",children:I.userEmail??""}),i.jsx("td",{className:"border p-1",children:I.clientName??""}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.amountReceived)]}),i.jsx("td",{className:"border p-1",children:typeof I.change=="number"?Bu(I.change):I.change??"0"})]},_))})]})]}):(w=u.products)!=null&&w.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto"})]})}),i.jsx("tbody",{children:u.products.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName}),i.jsx("td",{className:"border p-1",children:tx(I.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.amount)]})]},_))})]})]}):i.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(j=u.productSummary)!=null&&j.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),i.jsx("tbody",{children:u.productSummary.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName}),i.jsx("td",{className:"border p-1",children:tx(I.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.totalAmount)]})]},_))})]})]}):null]})]}),f&&i.jsx("p",{className:"mt-3 text-sm",children:f})]})}function Zje(){const[t,e]=x.useState(""),[r,n]=x.useState(""),[a,s]=x.useState(""),[o,l]=x.useState(!1),[c,u]=x.useState(["vendedor_pollo"]),[d,f]=x.useState(""),[A,h]=x.useState(""),[m,p]=x.useState([]),[g,v]=x.useState(!0),[y,b]=x.useState(null),[w,j]=x.useState(["vendedor_pollo"]),[I,_]=x.useState(""),[S,E]=x.useState(""),[F,P]=x.useState(!1),[k,D]=x.useState([]),J=U=>!U||U==="vendedor"?"vendedor_pollo":U==="admin"||U==="supervisor_pollo"||U==="contador"||U==="vendedor_pollo"||U==="vendedor_ropa"||U==="vendedor_dulces"?U:"vendedor_pollo",fe=U=>U?Array.isArray(U)?U.map(Y=>J(String(Y))):[J(String(U))]:["vendedor_pollo"],Ae=async()=>{v(!0);const U=await Qt(bt(Oe,"users")),Y=[];U.forEach(Z=>{const R=Z.data();Y.push({id:Z.id,email:R.email??"",name:R.name??"",roles:fe(R.roles??R.role),sellerCandyId:R.sellerCandyId??""})}),p(Y),v(!1)},me=async()=>{try{const U=await Qt(bt(Oe,"sellers_candies")),Y=[];U.forEach(Z=>{const R=Z.data();Y.push({id:Z.id,name:R.name??"(sin nombre)",branchLabel:R.branch??"",commissionPercent:Number(R.commissionPercent??0)})}),D(Y)}catch(U){console.error("Error cargando sellers_candies:",U)}};x.useEffect(()=>{Ae(),me()},[]);const pe=()=>{e(""),n(""),s(""),u(["vendedor_pollo"]),h("")},ne=async U=>{if(U.preventDefault(),f(""),y){if(a&&a.length>0&&a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}}else if(a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}if(!t.trim()){f(" El nombre es obligatorio.");return}try{if(y){const Q=zt(Oe,"users",y),Ge=w.length?w:["vendedor_pollo"],ie=Ge.includes("vendedor_dulces")&&(I||A)||"";if(await pn(Q,{email:r,name:t.trim(),roles:Ge,role:Ge[0]||"vendedor_pollo",sellerCandyId:ie}),p(ee=>ee.map(Ie=>Ie.id===y?{...Ie,email:r,name:t.trim(),roles:Ge,sellerCandyId:ie}:Ie)),a&&a.length>=6)try{const ee=NT(),Ie=S||r;await Upe(ee,Ie),f(` Usuario actualizado. Se envi correo de restablecimiento a ${Ie}`)}catch(ee){console.error("Error sending password reset:",ee),f(" Usuario actualizado. No se pudo enviar correo de restablecimiento.")}else f(" Usuario actualizado correctamente.");Be();return}const Y=oD(),Z=iD(Y.options,"Secondary"),R=NT(Z),H=await Qpe(R,r,a),te=c.length?c:["vendedor_pollo"],ye=te.includes("vendedor_dulces")&&A||"";await WZ(zt(bt(Oe,"users"),H.user.uid),{email:r,name:t.trim(),roles:te,role:te[0]||"vendedor_pollo",sellerCandyId:ye}),await pD(R),await kme(Z),p(Q=>[{id:H.user.uid,email:r,name:t.trim(),roles:te,sellerCandyId:ye},...Q]),f(" Usuario creado correctamente."),pe(),P(!1)}catch(Y){console.error(Y),f(" Error al crear el usuario: "+Y.message)}},Pe=U=>{b(U.id),e(U.name||""),n(U.email||""),E(U.email||""),j(U.roles&&U.roles.length?U.roles:["vendedor_pollo"]),h(U.sellerCandyId||""),_(U.sellerCandyId||""),s(""),P(!0)},Be=()=>{b(null),j(["vendedor_pollo"]),_(""),E(""),pe(),P(!1)},O=async U=>{confirm("Eliminar este usuario del listado?")&&(await Pn(zt(Oe,"users",U)),p(Z=>Z.filter(R=>R.id!==U)))},G=U=>{const Y=U==="admin"?"admin":U==="supervisor_pollo"?"supervisor_pollo":U==="vendedor_ropa"?"vendedor_ropa":U==="vendedor_dulces"?"vendedor_dulces":"vendedor_pollo",Z=Y==="admin"?"bg-blue-100 text-blue-700":Y==="supervisor_pollo"?"bg-amber-100 text-amber-700":Y==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":Y==="vendedor_dulces"?"bg-pink-100 text-pink-700":"bg-green-100 text-green-700";return i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Z}`,children:Y})},q=U=>`${U.name}  ${U.branchLabel||"Sin sucursal"}  ${U.commissionPercent.toFixed(2)}%`;return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),i.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>P(!0),type:"button",children:"Crear usuario"})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Email"}),i.jsx("th",{className:"p-2 border",children:"Rol"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:g?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(U=>{const Y=y===U.id,Z=(Y?w:U.roles).includes("vendedor_dulces");return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:U.name||""}),i.jsx("td",{className:"p-2 border",children:U.email}),i.jsx("td",{className:"p-2 border",children:Y?i.jsxs("div",{className:"space-y-2 text-left",children:[["supervisor_pollo","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(R=>i.jsxs("label",{className:"inline-flex items-center mr-3",children:[i.jsx("input",{type:"checkbox",className:"mr-2",checked:w.includes(R),onChange:()=>j(H=>H.includes(R)?H.filter(te=>te!==R):[...H,R])}),i.jsx("span",{className:"text-sm",children:R})]},R)),w.includes("vendedor_dulces")&&i.jsxs("select",{className:"w-full border p-1 rounded text-xs mt-1",value:I,onChange:R=>_(R.target.value),children:[i.jsx("option",{value:"",children:"Selecciona vendedor de dulces"}),k.map(R=>i.jsx("option",{value:R.id,children:q(R)},R.id))]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex gap-2 justify-center",children:U.roles.map(R=>i.jsx("span",{children:G(R)},R))}),Z&&U.sellerCandyId&&i.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Vendedor asignado"})]})}),i.jsx("td",{className:"p-2 border space-x-2",children:i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Pe(U),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>O(U.id),children:"Eliminar"})]})})]},U.id)})})]})}),d&&i.jsx("p",{className:"text-sm mt-2",children:d}),F&&i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>P(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:y?"Editar usuario":"Registrar nuevo usuario"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Be,type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:U=>e(U.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),i.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:U=>n(U.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-1 relative",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),i.jsx("input",{type:o?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:a,onChange:U=>s(U.target.value),required:!y}),i.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>l(U=>!U),children:o?"":""})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Roles"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:["supervisor_pollo","contador","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(U=>i.jsxs("label",{className:"inline-flex items-center mr-3",children:[i.jsx("input",{type:"checkbox",className:"mr-2",checked:y?w.includes(U):c.includes(U),onChange:()=>{y?j(Y=>Y.includes(U)?Y.filter(Z=>Z!==U):[...Y,U]):u(Y=>Y.includes(U)?Y.filter(Z=>Z!==U):[...Y,U])}}),i.jsx("span",{className:"text-sm",children:U})]},U))})]}),(y?w.includes("vendedor_dulces"):c.includes("vendedor_dulces"))&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Vendedor (dulces)"}),i.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:A,onChange:U=>h(U.target.value),children:[i.jsx("option",{value:"",children:"Selecciona vendedor de dulces asignado"}),k.map(U=>i.jsx("option",{value:U.id,children:q(U)},U.id))]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Be,children:"Cancelar"}),i.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:y?"Guardar cambios":"Crear usuario"})]})]}),d&&i.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const jV=t=>`C$${(Number(t)||0).toFixed(2)}`;function e4e(){const[t,e]=x.useState(""),[r,n]=x.useState(0),[a,s]=x.useState(0),[o,l]=x.useState(""),[c,u]=x.useState(""),[d,f]=x.useState(""),[A,h]=x.useState([]),[m,p]=x.useState(!0),[g,v]=x.useState(!1),[y,b]=x.useState(null),[w,j]=x.useState(""),[I,_]=x.useState(""),[S,E]=x.useState(""),[F,P]=x.useState(0),[k,D]=x.useState(0),[J,fe]=x.useState(!1),Ae=async()=>{p(!0);const q=await Qt(bt(Oe,"products")),U=[];q.forEach(Y=>{const Z=Y.data();U.push({id:Y.id,name:Z.name??"",price:Number(Z.price??0),providerPrice:Number(Z.providerPrice??0),category:Z.category??"",measurement:Z.measurement??"",active:Z.active!==!1})}),h(U),p(!1)};x.useEffect(()=>{Ae()},[]);const me=async q=>{if(q.preventDefault(),l(""),!t||r<=0||!d){l(" Completa nombre, precio vlido y unidad de medida");return}try{const U={name:t,price:parseFloat(r.toFixed(2)),providerPrice:parseFloat((a||0).toFixed(2)),category:c,measurement:d,active:!0},Y=await Bn(bt(Oe,"products"),U);h(Z=>[{id:Y.id,...U},...Z]),l(" Producto registrado con exito."),e(""),n(0),s(0),f(""),u(""),fe(!1)}catch(U){l(" Error: "+U.message)}},pe=q=>{b(q.id),j(q.name),_(q.category),E(q.measurement),P(q.price),D(q.providerPrice||0)},ne=()=>{b(null),j(""),_(""),E(""),P(0)},Pe=async()=>{if(!y)return;const q=zt(Oe,"products",y);await pn(q,{name:w,category:I,measurement:S,price:parseFloat((F||0).toFixed(2)),providerPrice:parseFloat((k||0).toFixed(2))}),h(U=>U.map(Y=>Y.id===y?{...Y,name:w,category:I,measurement:S,price:parseFloat((F||0).toFixed(2)),providerPrice:parseFloat((k||0).toFixed(2))}:Y)),ne()},Be=async q=>{const U=zt(Oe,"products",q.id),Y=q.active===!1;await pn(U,{active:Y}),h(Z=>Z.map(R=>R.id===q.id?{...R,active:Y}:R))},O=async q=>{const U=nr(bt(Oe,"inventory_batches"),sr("productId","==",q),iS(1));if(!(await Qt(U)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await Pn(zt(Oe,"products",q)),h(R=>R.filter(H=>H.id!==q)))},G=g?A:A.filter(q=>q.active!==!1);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{l(""),fe(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),J&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>fe(!1)}),i.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[i.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>fe(!1),children:"Cerrar"})]}),i.jsxs("form",{onSubmit:me,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),i.jsxs("select",{value:c,onChange:q=>u(q.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"pollo",children:"Pollo"}),i.jsx("option",{value:"cerdo",children:"Cerdo"}),i.jsx("option",{value:"huevo",children:"Huevos"}),i.jsx("option",{value:"ropa",children:"Ropa"}),i.jsx("option",{value:"otros",children:"Otros"})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:q=>e(q.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),i.jsxs("select",{value:d,onChange:q=>f(q.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"lb",children:"Libra"}),i.jsx("option",{value:"kg",children:"Kilogramo"}),i.jsx("option",{value:"unidad",children:"Unidad"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Precio proveedor (ej: 40.00)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(a)?"":a,onChange:q=>s(parseFloat(q.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:q=>n(parseFloat(q.target.value)),onFocus:q=>q.target.value==="0"?n(NaN):null})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),o&&i.jsx("p",{className:"text-sm mt-2",children:o})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),i.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:g,onChange:q=>v(q.target.checked)}),"Mostrar inactivos"]})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):G.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):G.map(q=>{const U=y===q.id,Y=q.active!==!1;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:U?i.jsx("input",{className:"w-full border p-1 rounded",value:w,onChange:Z=>j(Z.target.value)}):q.name}),i.jsx("td",{className:"p-2 border",children:U?i.jsxs("select",{className:"w-full border p-1 rounded",value:I,onChange:Z=>_(Z.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"pollo",children:"Pollo"}),i.jsx("option",{value:"cerdo",children:"Cerdo"}),i.jsx("option",{value:"huevo",children:"Huevos"}),i.jsx("option",{value:"ropa",children:"Ropa"}),i.jsx("option",{value:"otros",children:"Otros"})]}):q.category}),i.jsx("td",{className:"p-2 border",children:U?i.jsxs("select",{className:"w-full border p-1 rounded",value:S,onChange:Z=>E(Z.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"lb",children:"Libra"}),i.jsx("option",{value:"kg",children:"Kilogramo"}),i.jsx("option",{value:"unidad",children:"Unidad"})]}):q.measurement}),i.jsx("td",{className:"p-2 border",children:U?i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(k)?"":k,onChange:Z=>D(parseFloat(Z.target.value))}):jV(q.providerPrice||0)}),i.jsx("td",{className:"p-2 border",children:U?i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(F)?"":F,onChange:Z=>P(parseFloat(Z.target.value))}):jV(q.price)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Y?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:Y?"Activo":"Inactivo"})}),i.jsx("td",{className:"p-2 border space-x-2",children:U?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Pe,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ne,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>pe(q),children:"Editar"}),i.jsx("button",{className:`px-2 py-1 rounded ${Y?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>Be(q),children:Y?"Desactivar":"Activar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>O(q.id),children:"Eliminar"})]})})]},q.id)})})]})})]})}const $o=[];for(let t=0;t<256;++t)$o.push((t+256).toString(16).slice(1));function t4e(t,e=0){return($o[t[e+0]]+$o[t[e+1]]+$o[t[e+2]]+$o[t[e+3]]+"-"+$o[t[e+4]]+$o[t[e+5]]+"-"+$o[t[e+6]]+$o[t[e+7]]+"-"+$o[t[e+8]]+$o[t[e+9]]+"-"+$o[t[e+10]]+$o[t[e+11]]+$o[t[e+12]]+$o[t[e+13]]+$o[t[e+14]]+$o[t[e+15]]).toLowerCase()}let n5;const r4e=new Uint8Array(16);function n4e(){if(!n5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n5=crypto.getRandomValues.bind(crypto)}return n5(r4e)}const a4e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),PV={randomUUID:a4e};function s4e(t,e,r){var a;if(PV.randomUUID&&!t)return PV.randomUUID();t=t||{};const n=t.random??((a=t.rng)==null?void 0:a.call(t))??n4e();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,t4e(n)}async function i4e(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const a=bt(t,"inventory_batches"),s=nr(a,sr("productName","==",e)),c=(await Qt(s)).docs.map(u=>({id:u.id,data:u.data()})).sort((u,d)=>{var p,g;const f=u.data.date??"",A=d.data.date??"";if(f!==A)return f<A?-1:1;const h=((p=u.data.createdAt)==null?void 0:p.seconds)??0,m=((g=d.data.createdAt)==null?void 0:g.seconds)??0;return h-m}).map(u=>zt(t,"inventory_batches",u.id));return Di(t,async u=>{let d=Number(r);const f=[],A=await Promise.all(c.map(g=>u.get(g)));for(let g=0;g<c.length&&d>0;g++){const v=c[g],y=A[g];if(!y.exists())continue;const b=y.data(),w=Number(b.quantity??0),j=Number(b.remaining??w??0),I=Number(b.purchasePrice??0);if(j<=0)continue;const _=Math.min(j,d),S=Number((j-_).toFixed(3));u.update(v,{remaining:S}),f.push({batchId:v.id,qty:_,unitCost:I,lineCost:Number((_*I).toFixed(2))}),d=Number((d-_).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const h=Number(f.reduce((g,v)=>g+v.lineCost,0).toFixed(2)),m=f.reduce((g,v)=>g+v.qty,0),p=m>0?Number((h/m).toFixed(4)):0;return{allocations:f,avgUnitCost:p,cogsAmount:h}})}const Are=3,o4e=.5*10**-Are;function $a(t){const e=Number(t??0);return Number(e.toFixed(Are))}function a5(t,e){return $a((t??0)+(e??0))}function jC(t,e){return $a(t)+o4e>=$a(e)}async function l4e(t,e){const r=await Qt(bt(Oe,"inventory_batches")),n=t.trim().toLowerCase();let a=0;for(const s of r.docs){const o=s.data();(o.productName||"").trim().toLowerCase()===n&&o.productId!==e&&(await pn(zt(Oe,"inventory_batches",s.id),{productId:e}),a++)}return a}const JA=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function BV({user:t,role:e,roles:r}){r&&r.length;const[n,a]=x.useState([]),[s,o]=x.useState([]),[l,c]=x.useState(""),[u,d]=x.useState(Ir(new Date,"yyyy-MM-dd")),[f,A]=x.useState(""),[h,m]=x.useState(""),[p,g]=x.useState([]),[v,y]=x.useState(0),[b,w]=x.useState(0),[j,I]=x.useState("0"),[_,S]=x.useState(""),[E,F]=x.useState(!1),[P,k]=x.useState({}),D=Re=>Math.round(Re*100)/100,J=Re=>$a(Re).toFixed(3),[fe,Ae]=x.useState("CONTADO"),[me,pe]=x.useState([]),[ne,Pe]=x.useState(""),[Be,O]=x.useState(0),G=Re=>{Ae(Re),Re==="CREDITO"?(A(""),w(0),I("0.00")):(Pe(""),O(0))},q=Re=>{const We=Number(Re.specialPrice||0);return We>0?We:Number(Re.price||0)},U=async Re=>{if(!Re)return 0;const We=nr(bt(Oe,"inventory_batches"),sr("productId","==",Re)),et=await Qt(We);let xe=0;return et.forEach(de=>{const Ue=de.data();xe=a5(xe,Number(Ue.remaining||0))}),$a(xe)},Y=async Re=>{if(!Re)return 0;const We=await Qt(bt(Oe,"inventory_batches"));let et=0;return We.forEach(xe=>{const de=xe.data();(de.productName||"").trim().toLowerCase()===Re.trim().toLowerCase()&&(et=a5(et,Number(de.remaining||0)))}),$a(et)};x.useEffect(()=>{(async()=>{const Re=await Qt(bt(Oe,"products")),We=[];Re.forEach(et=>{const xe=et.data();(xe==null?void 0:xe.active)!==!1&&We.push({id:et.id,productName:xe.name??xe.productName??"(sin nombre)",price:Number(xe.price??0),measurement:xe.measurement??"(sin unidad)",category:xe.category??"(sin categora)"})}),a(We)})()},[]),x.useEffect(()=>{(async()=>{const Re=await Qt(bt(Oe,"inventory_batches")),We={};Re.forEach(et=>{const xe=et.data(),de=xe.productId,Ue=Number(xe.remaining||0);de&&(We[de]=a5(We[de]||0,Ue))}),Object.keys(We).forEach(et=>We[et]=$a(We[et])),k(We)})()},[]),x.useEffect(()=>{(async()=>{const Re=await Qt(bt(Oe,"users")),We=[];Re.forEach(et=>{const xe=et.data();We.push({id:et.id,email:xe.email??"(sin email)",role:xe.role??"USER"})}),o(We)})()},[]);const Z=async()=>{if(!l)return;const Re=n.find(et=>et.id===l);if(!Re)return;if(p.some(et=>et.productId===Re.id)){c("");return}const We=await U(Re.id);g(et=>[...et,{productId:Re.id,productName:Re.productName,measurement:Re.measurement,price:Number(Re.price||0),specialPrice:0,stock:We,qty:0,qtyInput:"",specialPriceInput:"",discount:0,discountInput:""}]),c("")},R=async Re=>{if(!Re)return;const We=n.find(xe=>xe.id===Re);if(!We||p.some(xe=>xe.productId===We.id))return;const et=await U(We.id);g(xe=>[...xe,{productId:We.id,productName:We.productName,measurement:We.measurement,price:Number(We.price||0),specialPrice:0,stock:et,qty:0,qtyInput:"",specialPriceInput:"",discount:0,discountInput:""}]),c("")},H=Re=>{g(We=>We.filter(et=>et.productId!==Re))},te=Re=>{const We=String(Re||"").replace(",",".");if(We==="")return"";const et=We.split(".");return et.length===1?We:`${et[0]}.${et.slice(1).join("")}`},ye=async(Re,We)=>{g(et=>et.map(xe=>{if(xe.productId!==Re)return xe;const de=(xe.measurement||"").toLowerCase()!=="lb",Ue=te(We);if(Ue.trim()==="")return{...xe,qty:0,qtyInput:""};if(!de&&Ue===".")return{...xe,qty:0,qtyInput:"0."};const Ke=Number(Ue),Ne=Number.isFinite(Ke)?Ke:0;let mt=de?Math.max(0,Math.round(Ne)):$a(Ne);const wt=de?Math.max(0,Math.floor(Number(xe.stock||0))):$a(Number(xe.stock||0));if(mt>wt){mt=wt,S(` Cantidad limitada a existencias (${wt})`);const ae=de?String(mt):mt===0?"":String(mt);return{...xe,qty:mt,qtyInput:ae}}const we=de?String(mt):Ue.endsWith(".")?Ue:String(mt);return{...xe,qty:mt,qtyInput:we}}))},Q=(Re,We)=>{g(et=>et.map(xe=>{if(xe.productId!==Re)return xe;const de=te(We);if(de.trim()==="")return{...xe,specialPrice:0,specialPriceInput:""};if(de===".")return{...xe,specialPrice:0,specialPriceInput:"0."};const Ue=Number(de),Ke=Number.isFinite(Ue)?Math.max(0,D(Ue)):0,Ne=de.endsWith(".")?de:String(Ke);return{...xe,specialPrice:Ke,specialPriceInput:Ne}}))},Ge=(Re,We)=>{g(et=>et.map(xe=>{if(xe.productId!==Re)return xe;const de=te(We);if(de.trim()==="")return{...xe,discount:0,discountInput:""};if(de===".")return{...xe,discount:0,discountInput:"0."};const Ue=Number(de),Ke=Number.isFinite(Ue)?Math.max(0,Math.floor(Ue)):0,Ne=de.endsWith(".")?de:String(Ke);return{...xe,discount:Ke,discountInput:Ne}}))},ie=x.useMemo(()=>{let Re=0;for(const We of p){const et=q(We),xe=Number(et||0)*Number(We.qty||0),de=Math.max(0,xe-Math.max(0,Number(We.discount||0)));Re+=de}return D(Re)},[p]);x.useEffect(()=>{y(ie)},[ie]),x.useEffect(()=>{const Re=Number(b)||0,We=Number(v)||0;I((Re-We).toFixed(2))},[b,v]);const ee=Re=>{Re.key===","&&(Re.preventDefault(),Re.target.value+=".")},[Ie,ue]=x.useState(!1);x.useEffect(()=>{var et;const Re=window.matchMedia("(max-width: 900px)"),We=()=>ue(Re.matches);return We(),(et=Re.addEventListener)==null||et.call(Re,"change",We),()=>{var xe;return(xe=Re.removeEventListener)==null?void 0:xe.call(Re,"change",We)}},[]),x.useEffect(()=>{(async()=>{try{const Re=await Qt(bt(Oe,"customers_pollo")),We=[];Re.forEach(et=>{const xe=et.data();We.push({id:et.id,name:xe.name??"",phone:xe.phone??"",status:xe.status??"ACTIVO",creditLimit:Number(xe.creditLimit??0),vendorId:xe.vendorId??"",vendorName:xe.vendorName??"",balance:0})});for(const et of We)try{const xe=nr(bt(Oe,"ar_movements_pollo"),sr("customerId","==",et.id)),de=await Qt(xe);let Ue=0;de.forEach(Ne=>{Ue+=Number(Ne.data().amount||0)});const Ke=Number(et.initialDebt||0);et.balance=Ue+Ke}catch{et.balance=0}We.sort((et,xe)=>(et.name||"").localeCompare(xe.name||"")),pe(We)}catch(Re){console.error("Error cargando customers_pollo:",Re),pe([])}})()},[]);const se=x.useMemo(()=>me.find(Re=>Re.id===ne)||null,[me,ne]),Ee=Number((se==null?void 0:se.balance)||0),je=fe==="CREDITO"?Math.max(0,Number(Ee||0)+Math.max(0,Number(v||0))):0;x.useEffect(()=>{fe==="CREDITO"&&O(Re=>Math.min(Math.max(0,Number(Re||0)),je))},[fe,je]),x.useEffect(()=>{fe==="CREDITO"&&(w(Number(Be||0)),I("0.00"))},[fe,Be]);const it=fe==="CREDITO"?Ee+Math.max(0,Number(v||0))-Math.max(0,Number(Be||0)):0,At=async()=>{if(p.length===0)return"Agrega al menos un producto.";for(const Re of p){if(!Re.qty||Re.qty<=0)return`Cantidad invlida para "${Re.productName}".`;const We=await U(Re.productId);if(!jC(We,Re.qty)){const et=await Y(Re.productName);if(jC(et,0)&&!jC(We,0)){const xe=await l4e(Re.productName,Re.productId),de=await U(Re.productId);if(!jC(de,Re.qty))return`Stock insuficiente tras corregir ${xe} lote(s) para "${Re.productName}".`}else return`Stock insuficiente para "${Re.productName}". Disponible: ${We}`}}return null},pt=async Re=>{var et,xe;Re.preventDefault(),S("");const We=await At();if(We){S(" "+We);return}try{F(!0);const de=[];if(fe==="CONTADO"){if(!f.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!ne)return"Selecciona un cliente (crdito).";if(Be<0)return"El pago inicial no puede ser negativo.";if(Be>v)return"El pago inicial no puede superar el total.";if((se==null?void 0:se.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede fiar."}for(const ae of p){const be=ae.qty,{allocations:ve,avgUnitCost:Ve,cogsAmount:ce}=await i4e(Oe,ae.productName,be,!1),ke=q(ae),dt=Number(ke||0)*Number(be||0),ft=Math.max(0,Number(ae.discount||0)),gt=Math.max(0,dt-ft);de.push({productId:ae.productId,productName:ae.productName,measurement:ae.measurement,unitPrice:Number(ke||0),regularPrice:Number(ae.price||0),specialPrice:Number(ae.specialPrice||0)>0?Number(ae.specialPrice):null,qty:be,discount:ft,lineTotal:D(dt),lineFinal:D(gt),allocations:ve,avgUnitCost:Ve,cogsAmount:ce})}const Ue=de.reduce((ae,be)=>ae+be.lineFinal,0),Ke=de.reduce((ae,be)=>ae+Number(be.qty||0),0),Ne=Number(fe==="CREDITO"?Be||0:b||0),mt=fe==="CREDITO"?"0.00":j,wt={id:s4e(),quantity:Ke,amount:Ue,amountCharged:Ue,timestamp:ur.now(),date:u,userEmail:(t==null?void 0:t.email)??((et=s[0])==null?void 0:et.email)??"sin usuario",vendor:e??((xe=s[0])==null?void 0:xe.role)??"sin usuario",status:"FLOTANTE",items:de,itemsTotal:Ue,type:fe,amountReceived:Ne,change:mt};if(fe==="CONTADO"){if(!f.trim()){S(" Ingresa el nombre del cliente (contado).");return}}else{if(!ne){S(" Selecciona un cliente (crdito).");return}if(Be<0){S(" El pago inicial no puede ser negativo.");return}if(Be>v){S(" El pago inicial no puede superar el total.");return}if((se==null?void 0:se.status)==="BLOQUEADO"){S(" El cliente est BLOQUEADO. No se puede fiar.");return}const ae=Number((se==null?void 0:se.creditLimit)||0);if(ae>0&&it>ae){S(` Supera el lmite de crdito (C$ ${ae.toFixed(2)}).`);return}}const we=await Bn(bt(Oe,"salesV2"),wt);if(fe==="CREDITO"&&ne){const ae={customerId:ne,date:u,createdAt:ur.now(),ref:{saleId:we.id}};await Bn(bt(Oe,"ar_movements_pollo"),{...ae,type:"CARGO",amount:Number(Ue)||0}),Number(Be)>0&&await Bn(bt(Oe,"ar_movements_pollo"),{...ae,type:"ABONO",amount:-Number(Be)}),pe(be=>be.map(ve=>ve.id===ne?{...ve,balance:Number(ve.balance||0)+Number(Ue||0)-Number(Be||0)}:ve))}S(" Venta registrada y asignada a inventario (FIFO)."),g([]),c(""),y(0),w(0),I("0"),A(""),d(Ir(new Date,"yyyy-MM-dd")),Pe(""),O(0),Ae("CONTADO")}catch(de){console.error(de),S(` ${(de==null?void 0:de.message)||"Error al registrar la venta."}`)}finally{F(!1)}},yt=x.useMemo(()=>new Set(p.map(Re=>Re.productId)),[p]),Ct=x.useMemo(()=>n.filter(Re=>(P[Re.id]||0)>0),[n,P]),Et=x.useMemo(()=>{const Re=String(h||"").trim().toLowerCase();return Re?Ct.filter(We=>`${We.productName||""}`.toLowerCase().includes(Re)):Ct},[Ct,h]);return Ie?i.jsx("div",{className:"w-full max-w-lg mx-auto p-3",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"font-bold text-lg text-blue-700",children:"Registrar venta (Pollo)"}),i.jsx("input",{type:"date",className:"text-sm text-gray-700 border rounded px-2 py-1",value:u,onChange:Re=>d(Re.target.value),"aria-label":"Fecha de la venta"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:fe,onChange:Re=>G(Re.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),fe==="CONTADO"?i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Contado)"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:f,onChange:Re=>A(Re.target.value),placeholder:"Ej: Cliente Mostrador"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Crdito)"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:ne,onChange:Re=>Pe(Re.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),me.map(Re=>i.jsxs("option",{value:Re.status==="ACTIVO"?Re.id:"",disabled:Re.status==="BLOQUEADO",children:[Re.name,"  Saldo: ",JA(Re.balance||0)]},Re.id))]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-base font-semibold",children:JA(Ee)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-base font-semibold",children:JA(it)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-semibold",children:"Pago inicial"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",type:"number",step:"0.01",inputMode:"decimal",max:je,value:Be===0?"":Be,onChange:Re=>{const We=Math.max(0,Number(Re.target.value||0)),et=Math.min(We,je);O(et)},placeholder:"0.00"}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",JA(je)]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 mb-2",placeholder:"Buscar producto por nombre...",value:h,onChange:Re=>m(Re.target.value)}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("select",{className:"flex-1 border rounded px-1 py-2 text-sm",value:l,onChange:async Re=>{const We=Re.target.value;c(We),await R(We)},children:[i.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),Et.map(Re=>i.jsxs("option",{value:Re.id,disabled:yt.has(Re.id),children:[Re.productName," | C$ ",Re.price," | Disp:"," ",J(P[Re.id]||0)]},Re.id))]})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Items"}),p.length===0?i.jsx("div",{className:"text-gray-500",children:"Agrega productos al carrito."}):i.jsx("div",{className:"space-y-2",children:p.map(Re=>{const We=q(Re),et=Number(We||0)*Number(Re.qty||0),xe=Math.max(0,et-Math.max(0,Number(Re.discount||0))),de=(Re.measurement||"").toLowerCase()!=="lb";return i.jsxs("div",{className:"border rounded p-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"font-semibold",children:Re.productName}),i.jsxs("div",{className:"text-sm",children:["C$ ",D(We).toFixed(2)]})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 items-center",children:[i.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:de?"numeric":"decimal",step:de?1:.01,value:Re.qtyInput??(Re.qty===0?"":Re.qty),onKeyDown:ee,onChange:Ue=>ye(Re.productId,Ue.target.value),placeholder:de?"Unid":"Libras",title:de?"Unidades":"Libras"}),i.jsx("input",{className:"border rounded px-1 py-1 text-right",inputMode:"numeric",value:Re.discountInput??(Re.discount===0?"":Re.discount),onChange:Ue=>Ge(Re.productId,Ue.target.value),placeholder:"Descuento",title:"Descuento (C$)"}),i.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:"decimal",value:Re.specialPriceInput??(Re.specialPrice===0?"":Re.specialPrice),onChange:Ue=>Q(Re.productId,Ue.target.value),placeholder:"Sugerido",title:"Precio sugerido (opcional)"})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Exist:"," ",$a(Number(Re.stock)-Number(Re.qty||0)).toFixed(3)]}),i.jsxs("div",{className:"font-semibold",children:["C$ ",D(xe).toFixed(2)]})]}),i.jsx("div",{className:"mt-2 text-right",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600",onClick:()=>H(Re.productId),children:"Quitar"})})]},Re.productId)})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Monto total"}),i.jsxs("div",{className:"text-xl font-bold",children:["C$ ",v.toFixed(2)]})]}),fe==="CONTADO"&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{className:"border rounded px-2 py-2",inputMode:"decimal",value:b===0?"":b,onChange:Re=>w(Number(Re.target.value||0)),placeholder:"Monto recibido"}),i.jsxs("div",{className:"border rounded px-2 py-2 bg-gray-100",children:["Cambio: C$ ",j]})]}),i.jsx("button",{onClick:pt,disabled:p.length===0||E,className:"w-full bg-blue-600 text-white px-4 py-2 rounded",children:E?"Guardando...":"Guardar venta"}),_&&i.jsx("div",{className:`text-sm ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]})}):i.jsxs("div",{className:"relative",children:[i.jsxs("form",{onSubmit:pt,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl\r
                 p-4 sm:p-6 md:p-8\r
                 max-w-5xl space-y-4`,children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:l,onChange:Re=>c(Re.target.value),children:[i.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),Ct.map(Re=>i.jsxs("option",{value:Re.id,disabled:yt.has(Re.id),title:yt.has(Re.id)?"Ya est en la lista":`Disponible: ${J(P[Re.id]||0)}`,children:[Re.productName,"  ",Re.measurement,"  C$ ",Re.price," (disp:"," ",J(P[Re.id]||0),")"]},Re.id))]}),i.jsx("button",{type:"button",onClick:Z,disabled:!l||yt.has(l),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:u,onChange:Re=>d(Re.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:fe,onChange:Re=>G(Re.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),fe==="CONTADO"?i.jsxs("div",{className:"md:col-span-2 space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Contado)"}),i.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:f,onChange:Re=>A(Re.target.value),placeholder:"Ej: Cliente Mostrador"})]}):i.jsxs("div",{className:"md:col-span-2 space-y-2",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Crdito)"}),i.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:ne,onChange:Re=>Pe(Re.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),me.map(Re=>i.jsxs("option",{value:Re.status==="ACTIVO"?Re.id:"",disabled:Re.status==="BLOQUEADO",children:[Re.name,"  Saldo: ",JA(Re.balance||0)]},Re.id))]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:JA(Ee)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Pago inicial"}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",JA(je)]}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:je,className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:Be===0?"":Be,onChange:Re=>{const We=Math.max(0,Number(Re.target.value||0)),et=Math.min(We,je);O(et)},placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:JA(it)})]})]})]})]}),i.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:i.jsxs("table",{className:"min-w-full text-sm r",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"text-center",children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio especial"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:""})]})}),i.jsx("tbody",{children:p.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):p.map(Re=>{const We=q(Re),et=Number(We||0)*Number(Re.qty||0),xe=Math.max(0,et-Math.max(0,Number(Re.discount||0))),de=(Re.measurement||"").toLowerCase()!=="lb",Ue=$a(Number(Re.stock)-Number(Re.qty||0));return i.jsxs("tr",{className:"text-center",children:[i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[Re.productName,"  ",Re.measurement]}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",D(Re.price).toFixed(2)]}),i.jsxs("td",{className:"p-2 border",children:[i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Re.specialPrice===0?"":Re.specialPrice,onKeyDown:ee,onChange:Ke=>Q(Re.productId,Ke.target.value),placeholder:"",title:"Precio especial (si se deja vaco, se usa el precio normal)"}),i.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Aplicado: C$ ",D(We).toFixed(2)]})]}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ue.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:de?1:.01,inputMode:de?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:Re.qtyInput??(Re.qty===0?"":Re.qty),onKeyDown:ee,onChange:Ke=>ye(Re.productId,Ke.target.value),placeholder:"0",title:"Cantidad"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:Re.discount===0?"":Re.discount,onChange:Ke=>Ge(Re.productId,Ke.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",D(xe).toFixed(2)]}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>H(Re.productId),title:"Quitar",children:""})})]},Re.productId)})})]})}),i.jsxs("div",{className:"space-y-1 ",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${v.toFixed(2)}`,readOnly:!0,title:"Suma de (precio aplicado  cantidad  descuento) de cada producto."})]}),fe==="CONTADO"&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:b===0?"":b,onChange:Re=>w(Number(Re.target.value||0))})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${j}`,readOnly:!0})]})]})}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:p.length===0||E,children:E?"Guardando...":"Guardar venta"}),_&&i.jsx("p",{className:`text-sm mt-2 ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]}),E&&i.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}const mo=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function s5(t="LOT"){return`${t}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function c4e({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const[a,s]=x.useState([]),[o,l]=x.useState([]),[c,u]=x.useState(!0),[d,f]=x.useState(""),{refreshKey:A,refresh:h}=kc(),m=e&&e.length?e:t,p=on(m,"admin"),g=p||on(m,"contador"),[v,y]=x.useState(Ir(af(new Date),"yyyy-MM-dd")),[b,w]=x.useState(Ir(nf(new Date),"yyyy-MM-dd")),[j,I]=x.useState(""),[_,S]=x.useState(!1),[E,F]=x.useState(""),[P,k]=x.useState(Ir(new Date,"yyyy-MM-dd")),[D,J]=x.useState("lb"),[fe,Ae]=x.useState(""),[me,pe]=x.useState(0),[ne,Pe]=x.useState(NaN),[Be,O]=x.useState(0),[G,q]=x.useState([]),[U,Y]=x.useState(null),[Z,R]=x.useState([]),[H,te]=x.useState(!1),[ye,Q]=x.useState(null),[Ge,ie]=x.useState(!1),[ee,Ie]=x.useState(null),[ue,se]=x.useState(null),Ee=ve=>se(Ve=>Ve===ve?null:ve),[je,it]=x.useState(!1),At=()=>it(ve=>!ve),pt=ve=>{const Ve=(ve||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(Ve)||Ve==="lb"};x.useEffect(()=>{(async()=>{u(!0),f("");const ve=await Qt(bt(Oe,"products")),Ve=[];ve.forEach(ft=>{const gt=ft.data();gt.active===!0&&Ve.push({id:ft.id,name:gt.name??gt.productName??"(sin nombre)",category:gt.category??"(sin categora)",measurement:gt.measurement??"lb",price:Number(gt.price??0),providerPrice:Object.prototype.hasOwnProperty.call(gt,"providerPrice")?Number(gt.providerPrice):void 0})}),s(Ve);const ce=nr(bt(Oe,"inventory_batches"),xn("date","desc")),ke=await Qt(ce),dt=[];ke.forEach(ft=>{const gt=ft.data(),Rt=$a(Number(gt.quantity||0)),ot=Number(gt.purchasePrice||0),Se=Number(gt.salePrice||0),ht=Number((Rt*ot).toFixed(2)),W=Number((Rt*Se).toFixed(2));dt.push({id:ft.id,productId:gt.productId,productName:gt.productName,category:gt.category,unit:gt.unit,quantity:Rt,remaining:$a(Number(gt.remaining||0)),purchasePrice:ot,salePrice:Se,invoiceTotal:gt.invoiceTotal!=null?Number(gt.invoiceTotal):ht,expectedTotal:gt.expectedTotal!=null?Number(gt.expectedTotal):W,date:gt.date,createdAt:gt.createdAt,status:gt.status,notes:gt.notes,paidAmount:Number(gt.paidAmount||0),paidAt:gt.paidAt,batchGroupId:gt.batchGroupId,orderName:gt.orderName})}),l(dt),u(!1)})()},[A]);const yt=x.useMemo(()=>o.filter(ve=>!(v&&ve.date<v||b&&ve.date>b||j&&ve.productId!==j)),[o,v,b,j]),Ct=x.useMemo(()=>{const ve=yt.reduce((ot,Se)=>ot+Number(Se.invoiceTotal||0),0),Ve=yt.reduce((ot,Se)=>ot+Number(Se.expectedTotal||0),0);let ce=0,ke=0,dt=0,ft=0;for(const ot of yt)pt(ot.unit)?(ce+=ot.quantity,ke+=ot.remaining):(dt+=ot.quantity,ft+=ot.remaining);const gt=yt.reduce((ot,Se)=>ot+Se.quantity,0),Rt=yt.reduce((ot,Se)=>ot+Se.remaining,0);return{lbsIng:ce,lbsRem:ke,udsIng:dt,udsRem:ft,qty:gt,rem:Rt,totalFacturado:ve,totalEsperado:Ve}},[yt]),Et=x.useMemo(()=>{var ce,ke;const ve=new Map;for(const dt of yt){const ft=dt.batchGroupId&&String(dt.batchGroupId).trim()||dt.id;ve.has(ft)||ve.set(ft,[]),ve.get(ft).push(dt)}const Ve=[];for(const[dt,ft]of ve.entries()){const gt=[...ft].sort((K,re)=>{var qe,lt;const le=((qe=K.createdAt)==null?void 0:qe.seconds)??0;return(((lt=re.createdAt)==null?void 0:lt.seconds)??0)-le}),Rt=((ce=gt[0])==null?void 0:ce.date)||"",ot=String(((ke=gt[0])==null?void 0:ke.orderName)||"").trim()||`Pedido ${Rt||""}`.trim()||"Pedido",Se=new Set(gt.map(K=>String(K.category||"").trim()).filter(Boolean)),ht=Se.size===1?Array.from(Se)[0].toUpperCase():"MIXTO",W=gt.some(K=>K.status==="PENDIENTE")?"PENDIENTE":"PAGADO",Te=$a(gt.reduce((K,re)=>K+(pt(re.unit)?Number(re.quantity||0):0),0)),Ze=$a(gt.reduce((K,re)=>K+(pt(re.unit)?Number(re.remaining||0):0),0)),tt=$a(gt.reduce((K,re)=>K+(pt(re.unit)?0:Number(re.quantity||0)),0)),ut=$a(gt.reduce((K,re)=>K+(pt(re.unit)?0:Number(re.remaining||0)),0)),T=Number(gt.reduce((K,re)=>K+Number(re.invoiceTotal||0),0).toFixed(2)),M=Number(gt.reduce((K,re)=>K+Number(re.expectedTotal||0),0).toFixed(2)),L=Number((M-T).toFixed(2));Ve.push({groupId:dt,orderName:ot,date:Rt,typeLabel:ht,status:W,lbsIn:Te,lbsRem:Ze,udsIn:tt,udsRem:ut,totalFacturado:T,totalEsperado:M,utilidadBruta:L,items:gt})}return Ve.sort((dt,ft)=>dt.date===ft.date?dt.groupId<ft.groupId?1:-1:dt.date<ft.date?1:-1),Ve},[yt]),Re=x.useMemo(()=>{const ve=String(D||"").toLowerCase().trim();return a.filter(ce=>String(ce.measurement||"").toLowerCase().trim()===ve).sort((ce,ke)=>ce.name.localeCompare(ke.name,"es"))},[a,D]);x.useEffect(()=>{const ve=G.find(ce=>ce.productId===fe);if(ve){pe(Number(ve.quantity||0)),Pe(Number(ve.purchasePrice||0)),O(Number(ve.salePrice||0));return}const Ve=a.find(ce=>ce.id===fe);Ve?(pe(0),O(Number(Ve.price||0)),Ve.providerPrice!=null&&Number.isFinite(Number(Ve.providerPrice))?Pe(Number(Ve.providerPrice)):Pe(NaN)):(pe(0),O(0),Pe(NaN))},[fe,a,A,G]);const We=()=>{f("");const ve=a.find(Rt=>Rt.id===fe);if(!ve)return f("Selecciona un producto.");if(me<=0||!Number.isFinite(ne)||ne<=0)return f("Completa libras a ingresar y precio proveedor.");const Ve=$a(me),ce=ve.measurement,ke=Number((Ve*Number(ne||0)).toFixed(2)),dt=Number((Ve*Number(Be||0)).toFixed(2)),ft=Number((dt-ke).toFixed(2)),gt=G.findIndex(Rt=>Rt.productId===ve.id);gt>=0?q(Rt=>Rt.map((ot,Se)=>Se!==gt?ot:{...ot,quantity:Ve,remaining:Ve,purchasePrice:Number(ne||0),salePrice:Number(Be||0),invoiceTotal:ke,expectedTotal:dt,utilidadBruta:ft})):q(Rt=>[...Rt,{tempId:s5("IT"),productId:ve.id,productName:ve.name,category:ve.category,unit:ce,quantity:Ve,remaining:Ve,purchasePrice:Number(ne||0),salePrice:Number(Be||0),invoiceTotal:ke,expectedTotal:dt,utilidadBruta:ft}]),Ae(""),pe(0),Pe(NaN),O(0)},et=ve=>{q(Ve=>Ve.filter(ce=>ce.tempId!==ve))},xe=(ve,Ve,ce)=>{q(ke=>ke.map(dt=>{if(dt.tempId!==ve)return dt;const ft={...dt};return Ve==="quantity"&&(ft.quantity=$a(Math.max(0,ce)),U||(ft.remaining=ft.quantity)),Ve==="purchasePrice"&&(ft.purchasePrice=Math.max(0,Number(ce||0))),Ve==="salePrice"&&(ft.salePrice=Math.max(0,Number(ce||0))),ft.invoiceTotal=Number((ft.quantity*ft.purchasePrice).toFixed(2)),ft.expectedTotal=Number((ft.quantity*ft.salePrice).toFixed(2)),ft.utilidadBruta=Number((ft.expectedTotal-ft.invoiceTotal).toFixed(2)),ft}))},de=x.useMemo(()=>{const ve=$a(G.reduce((ft,gt)=>ft+(pt(gt.unit)?Number(gt.quantity||0):0),0)),Ve=$a(G.reduce((ft,gt)=>ft+(pt(gt.unit)?Number(gt.remaining||0):0),0)),ce=Number(G.reduce((ft,gt)=>ft+Number(gt.invoiceTotal||0),0).toFixed(2)),ke=Number(G.reduce((ft,gt)=>ft+Number(gt.expectedTotal||0),0).toFixed(2)),dt=Number((ke-ce).toFixed(2));return{lbsIn:ve,lbsRem:Ve,totalFacturado:ce,totalEsperado:ke,utilidadBruta:dt}},[G]),Ue=()=>{Y(null),R([]),F(""),k(Ir(new Date,"yyyy-MM-dd")),J("lb"),Ae(""),pe(0),Pe(NaN),O(0),q([])},Ke=async()=>{if(f(""),!G.length)return f("Agrega al menos un producto al pedido.");const ve=P||Ir(new Date,"yyyy-MM-dd"),Ve=String(E||"").trim()||`Pedido ${ve}`,ce=U||s5("BATCH");try{if(!U){for(const gt of G)await _V({productId:gt.productId,productName:gt.productName,category:gt.category,unit:gt.unit,quantity:$a(gt.quantity),purchasePrice:Number(gt.purchasePrice||0),salePrice:Number(gt.salePrice||0),invoiceTotal:Number(gt.invoiceTotal||0),expectedTotal:Number(gt.expectedTotal||0),date:ve,notes:"",batchGroupId:ce,orderName:Ve});f(" Pedido creado"),S(!1),Ue(),h();return}const ke=Z,dt=new Map;for(const gt of ke)dt.set(gt.productId,gt);const ft=new Set(G.map(gt=>gt.productId));for(const gt of G){const Rt=dt.get(gt.productId),ot=$a(gt.quantity);if(Rt){const Se=$a(Rt.quantity-Rt.remaining),ht=Math.max(0,$a(ot-Se));await pn(zt(Oe,"inventory_batches",Rt.id),{date:ve,orderName:Ve,batchGroupId:ce,quantity:ot,purchasePrice:Number(gt.purchasePrice||0),salePrice:Number(gt.salePrice||0),invoiceTotal:Number(gt.invoiceTotal||0),expectedTotal:Number(gt.expectedTotal||0),remaining:ht})}else await _V({productId:gt.productId,productName:gt.productName,category:gt.category,unit:gt.unit,quantity:ot,purchasePrice:Number(gt.purchasePrice||0),salePrice:Number(gt.salePrice||0),invoiceTotal:Number(gt.invoiceTotal||0),expectedTotal:Number(gt.expectedTotal||0),date:ve,notes:"",batchGroupId:ce,orderName:Ve})}for(const gt of ke)ft.has(gt.productId)||await Pn(zt(Oe,"inventory_batches",gt.id));f(" Pedido actualizado"),S(!1),Ue(),h()}catch(ke){console.error(ke),f(" Error al guardar pedido")}},Ne=ve=>{Q(ve),te(!0)},mt=ve=>{Y(ve.groupId),R(ve.items),F(ve.orderName),k(ve.date||Ir(new Date,"yyyy-MM-dd"));const Ve=ve.items.map(ce=>{const ke=Number(ce.invoiceTotal||0),dt=Number(ce.expectedTotal||0);return{tempId:s5("IT"),productId:ce.productId,productName:ce.productName,category:ce.category,unit:ce.unit,quantity:$a(ce.quantity),remaining:$a(ce.remaining),purchasePrice:Number(ce.purchasePrice||0),salePrice:Number(ce.salePrice||0),invoiceTotal:ke,expectedTotal:dt,utilidadBruta:Number((dt-ke).toFixed(2))}});q(Ve),S(!0)},wt=async ve=>{if(confirm(`Eliminar el pedido "${ve.orderName}" del ${ve.date}?`))try{for(const ce of ve.items)await Pn(zt(Oe,"inventory_batches",ce.id));f(" Pedido eliminado"),h()}catch(ce){console.error(ce),f(" Error al eliminar pedido")}},we=ve=>{Ie(ve),ie(!0)},ae=async()=>{if(ee)try{for(const ve of ee.items){if(ve.status!=="PENDIENTE")continue;await ure(ve.id),await pn(zt(Oe,"inventory_batches",ve.id),{remaining:0});const Ve={date:ve.date,productName:ve.productName,quantity:ve.quantity,amount:Number((ve.expectedTotal??ve.salePrice*ve.quantity).toFixed(2)),allocations:[{batchId:ve.id,qty:ve.quantity,unitCost:ve.purchasePrice,lineCost:Number((ve.purchasePrice*ve.quantity).toFixed(2))}],avgUnitCost:ve.purchasePrice,measurement:ve.unit,createdAt:ur.now(),autoGeneratedFromInventory:!0};await Bn(bt(Oe,"salesV2"),Ve)}f(" Pedido pagado y reflejado como venta"),h()}catch(ve){console.error(ve),f(" Error al pagar pedido")}finally{ie(!1),Ie(null)}},be=()=>{ie(!1),Ie(null)};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario"}),g&&i.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>{Ue(),S(!0)},children:"Crear Lote"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:v,onChange:ve=>y(ve.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:b,onChange:ve=>w(ve.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:j,onChange:ve=>I(ve.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),a.map(ve=>i.jsxs("option",{value:ve.id,children:[ve.name,"  ",ve.category]},ve.id))]})]}),i.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{y(""),w(""),I("")},children:"Quitar filtro"}),i.jsx("div",{className:"ml-auto",children:i.jsx(Tc,{onClick:()=>h(),loading:c})})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:At,role:"button","aria-expanded":je,children:[i.jsxs("div",{className:"flex gap-6 items-center",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Ct.lbsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Ct.lbsRem.toFixed(3)]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:je?"Cerrar":"Ver ms"})]}),je&&i.jsx("div",{className:"mt-3",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Ct.lbsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Ct.lbsRem.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Ct.udsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Ct.udsRem.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ","C$ ",Ct.totalEsperado.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",Ct.totalFacturado.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(Ct.totalEsperado-Ct.totalFacturado).toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",yt.length.toLocaleString()]})]})})]}),i.jsx("div",{className:"md:hidden space-y-3",children:c?i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow",children:"Cargando"}):Et.length===0?i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow text-center",children:"Sin lotes"}):Et.map(ve=>{const Ve=ue===ve.groupId;return i.jsxs("div",{className:"bg-white border rounded-2xl",children:[i.jsxs("div",{className:"p-4 flex items-start justify-between gap-3 cursor-pointer",onClick:()=>Ee(ve.groupId),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold text-lg",children:ve.date}),i.jsx("div",{className:"text-xs text-gray-500 truncate",children:ve.orderName})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${ve.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ve.status}),i.jsx("div",{className:"text-sm text-gray-500",children:ve.typeLabel})]})]}),Ve&&i.jsxs("div",{className:"p-4 pt-0",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Tipo"}),i.jsx("div",{className:"font-semibold",children:ve.typeLabel})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Utilidad bruta"}),i.jsx("div",{className:"font-semibold",children:mo(ve.utilidadBruta)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs ingresadas"}),i.jsx("div",{className:"font-semibold",children:ve.lbsIn.toFixed(3)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs restantes"}),i.jsx("div",{className:"font-semibold",children:ve.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 col-span-2",children:[i.jsxs("div",{className:"flex justify-between text-[11px] text-gray-500",children:[i.jsx("span",{children:"Total facturado"}),i.jsx("span",{children:"Total esperado"})]}),i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:mo(ve.totalFacturado)}),i.jsx("span",{children:mo(ve.totalEsperado)})]})]})]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>Ne(ve),children:"Ver detalle"}),p?i.jsxs(i.Fragment,{children:[ve.status==="PENDIENTE"&&i.jsx("button",{className:"px-3 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-sm",onClick:()=>we(ve),children:"Pagar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-yellow-600 hover:bg-yellow-700 text-white text-sm",onClick:()=>mt(ve),children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white text-sm",onClick:()=>wt(ve),children:"Borrar"})]}):null]})]})]},ve.groupId)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Libras restantes"}),i.jsx("th",{className:"p-2 border",children:"Unidades ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Unidades restantes"}),i.jsx("th",{className:"p-2 border",children:"Total Facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:c?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):Et.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin lotes"})}):Et.map(ve=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsxs("td",{className:"p-2 border",children:[i.jsx("button",{className:"underline text-blue-700 hover:text-blue-900",onClick:()=>Ne(ve),title:ve.orderName,children:ve.date}),i.jsx("div",{className:"text-[11px] text-gray-500",children:ve.orderName})]}),i.jsx("td",{className:"p-2 border",children:ve.typeLabel}),i.jsx("td",{className:"p-2 border",children:ve.lbsIn.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:ve.lbsRem.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:ve.udsIn.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:ve.udsRem.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:mo(ve.totalFacturado)}),i.jsx("td",{className:"p-2 border",children:mo(ve.totalEsperado)}),i.jsx("td",{className:"p-2 border",children:mo(ve.utilidadBruta)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ve.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ve.status})}),i.jsx("td",{className:"p-2 border",children:p?i.jsxs("div",{className:"flex gap-2 justify-center",children:[ve.status==="PENDIENTE"&&i.jsx("button",{onClick:()=>we(ve),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>mt(ve),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>wt(ve),children:"Borrar"})]}):i.jsx("span",{className:"text-xs text-gray-500",children:"Solo vista"})})]},ve.groupId))})]})}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),_&&uu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>S(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:U?"Editar pedido":"Crear pedido"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de pedido"}),i.jsx("input",{className:"w-full border p-2 rounded",value:E,onChange:ve=>F(ve.target.value),placeholder:"Ej: Pedido Pollo - Semana 1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:P,onChange:ve=>k(ve.target.value)})]})]}),i.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Unidad"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:D,onChange:ve=>{J(ve.target.value),Ae(""),pe(0),Pe(NaN),O(0)},children:[i.jsx("option",{value:"lb",children:"lb"}),i.jsx("option",{value:"unidad",children:"unidad"}),i.jsx("option",{value:"kg",children:"kg"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (solo activos)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:fe,onChange:ve=>Ae(ve.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),Re.map(ve=>i.jsxs("option",{value:ve.id,children:[ve.name,"  ",ve.category,"  ",ve.measurement]},ve.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Libras a ingresar"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:me===0?"":me,onChange:ve=>{const Ve=ve.target.value.replace(",","."),ce=parseFloat(Ve),ke=Number.isFinite(ce)?parseFloat(ce.toFixed(3)):0;pe(Math.max(0,ke));const dt=G.find(ft=>ft.productId===fe);dt&&xe(dt.tempId,"quantity",ke)},disabled:!fe})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Number.isNaN(ne)?"":ne,onChange:ve=>{const Ve=ve.target.value.replace(",",".");if(Ve==="")return Pe(NaN);const ce=parseFloat(Ve),ke=Number.isFinite(ce)?parseFloat(ce.toFixed(2)):NaN;Pe(Number.isFinite(ke)?Math.max(0,ke):NaN);const dt=G.find(ft=>ft.productId===fe);dt&&Number.isFinite(ke)&&xe(dt.tempId,"purchasePrice",ke)},disabled:!fe})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio venta (editable)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Be===0?"":Be,onChange:ve=>{const Ve=ve.target.value.replace(",","."),ce=parseFloat(Ve),ke=Number.isFinite(ce)?parseFloat(ce.toFixed(2)):0;O(Math.max(0,ke));const dt=G.find(ft=>ft.productId===fe);dt&&xe(dt.tempId,"salePrice",ke)},disabled:!fe})]})]}),i.jsx("div",{className:"flex justify-end mt-3",children:i.jsx("button",{type:"button",onClick:We,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Libras restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:G.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-500",children:"No hay productos agregados."})}):G.map(ve=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsxs("td",{className:"p-2 border text-left",children:[ve.productName,i.jsxs("div",{className:"text-[11px] text-gray-500",children:[ve.category,"  ",ve.unit]})]}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:ve.quantity,onChange:Ve=>{const ce=Ve.target.value.replace(",","."),ke=parseFloat(ce),dt=Number.isFinite(ke)?parseFloat(ke.toFixed(3)):0;xe(ve.tempId,"quantity",dt)}})}),i.jsx("td",{className:"p-2 border",children:Number(ve.remaining||0).toFixed(3)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:ve.purchasePrice,onChange:Ve=>{const ce=Ve.target.value.replace(",","."),ke=parseFloat(ce),dt=Number.isFinite(ke)?parseFloat(ke.toFixed(2)):0;xe(ve.tempId,"purchasePrice",dt)}})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:ve.salePrice,onChange:Ve=>{const ce=Ve.target.value.replace(",","."),ke=parseFloat(ce),dt=Number.isFinite(ke)?parseFloat(ke.toFixed(2)):0;xe(ve.tempId,"salePrice",dt)}})}),i.jsx("td",{className:"p-2 border",children:mo(ve.invoiceTotal)}),i.jsx("td",{className:"p-2 border",children:mo(ve.expectedTotal)}),i.jsx("td",{className:"p-2 border",children:mo(ve.utilidadBruta)}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>et(ve.tempId),children:"Quitar"})})]},ve.tempId))})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),i.jsx("div",{className:"text-lg font-semibold",children:de.lbsIn.toFixed(3)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Libras restantes"}),i.jsx("div",{className:"text-lg font-semibold",children:de.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado"}),i.jsx("div",{className:"text-lg font-semibold",children:mo(de.totalFacturado)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Total esperado"}),i.jsx("div",{className:"text-lg font-semibold",children:mo(de.totalEsperado)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Utilidad bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:mo(de.utilidadBruta)})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),children:"Cancelar"}),i.jsx("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:Ke,disabled:G.length===0,children:U?"Editar pedido":"Crear pedido"})]})]})]}),document.body),H&&ye&&uu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[75] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{te(!1),Q(null)}}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold",children:"Detalle del pedido"}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:ye.orderName})," "," ",ye.date]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{te(!1),Q(null)},type:"button",children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Ingresado"}),i.jsx("th",{className:"p-2 border",children:"Restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Compra"}),i.jsx("th",{className:"p-2 border",children:"Precio Venta"}),i.jsx("th",{className:"p-2 border",children:"Total factura"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:ye.items.map(ve=>{const Ve=Number(ve.invoiceTotal||0),ce=Number(ve.expectedTotal||0);return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border text-left",children:ve.productName}),i.jsx("td",{className:"p-2 border",children:(ve.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:ve.quantity.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:ve.remaining.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:mo(ve.purchasePrice)}),i.jsx("td",{className:"p-2 border",children:mo(ve.salePrice)}),i.jsx("td",{className:"p-2 border",children:mo(Ve)}),i.jsx("td",{className:"p-2 border",children:mo(ce)}),i.jsx("td",{className:"p-2 border",children:mo(ce-Ve)}),i.jsx("td",{className:"p-2 border",children:ve.status})]},ve.id)})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),i.jsx("div",{className:"text-lg font-semibold",children:ye.lbsIn.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras restantes"}),i.jsx("div",{className:"text-lg font-semibold",children:ye.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:mo(ye.utilidadBruta)})]})]})]})]}),document.body),Ge&&ee&&uu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:be}),i.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),i.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este pedido?",i.jsx("br",{}),i.jsx("strong",{children:ee.orderName})," "," ",ee.date,i.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("button",{onClick:ae,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),i.jsx("button",{onClick:be,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const hh=t=>`C$${(Number(t)||0).toFixed(2)}`;function u4e(){const t=_2e(new Date),[e,r]=x.useState(Ir(t,"yyyy-MM")),[n,a]=x.useState([]),[s,o]=x.useState(!1),[l,c]=x.useState(""),u=x.useRef(null),d=x.useMemo(()=>{const[g,v]=e.split("-").map(w=>parseInt(w,10)),y=Ir(af(new Date(g,v-1,1)),"yyyy-MM-dd"),b=Ir(nf(new Date(g,v-1,1)),"yyyy-MM-dd");return{from:y,to:b}},[e]),f=async()=>{o(!0);try{const g=await Qje(d.from,d.to),v=[];for(const y of g){const b=zt(Oe,"inventory_batches",y.batchId),w=await Ci(b);if(!w.exists())continue;const j=w.data();v.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:j.status??"PENDIENTE",purchasePrice:Number(j.purchasePrice||0),salePrice:Number(j.salePrice||0),supplier:j.supplier})}a(v)}catch(g){console.error(g),c(" Error al cargar liquidaciones")}finally{o(!1)}};x.useEffect(()=>{f()},[e]);const A=async g=>{confirm("Marcar este lote como PAGADO?")&&(await ure(g),a(y=>y.map(b=>b.batchId===g?{...b,status:"PAGADO"}:b)))},h=x.useMemo(()=>{const g=n.reduce((w,j)=>w+j.soldQty,0),v=n.reduce((w,j)=>w+j.soldAmount,0),y=n.reduce((w,j)=>w+j.soldQty*j.purchasePrice,0),b=v-y;return{q:g,amt:v,cogs:y,profit:b}},[n]),m=x.useMemo(()=>{const g=new Map;for(const v of n){const y=v.productName||"(sin nombre)";g.has(y)||g.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const b=g.get(y);b.qty+=v.soldQty,b.revenue+=v.soldAmount;const w=v.soldQty*v.purchasePrice;b.cogs+=w,b.profit=b.revenue-b.cogs}return Array.from(g.values()).sort((v,y)=>v.productName.localeCompare(y.productName))},[n]),p=async()=>{if(!u.current)return;const g=u.current;g.classList.add("force-pdf-colors");try{const[{default:v},{jsPDF:y}]=await Promise.all([Vh(()=>Promise.resolve().then(()=>b6),void 0),Vh(()=>Promise.resolve().then(()=>Ek),void 0)]),w=(await v(g,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),j=new y("p","mm","a4"),I=190,_=j.getImageProperties(w),S=I,E=_.height*S/_.width;j.addImage(w,"PNG",10,10,S,E),j.save(`liquidaciones_${e}.pdf`)}catch(v){console.error(v),alert("No se pudo generar el PDF")}finally{g.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),i.jsx("button",{onClick:p,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),i.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:g=>r(g.target.value)}),i.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),i.jsxs("div",{ref:u,children:[i.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",h.q]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",hh(h.amt)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",hh(h.cogs)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",hh(h.profit)]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Proveedor"}),i.jsx("th",{className:"p-2 border",children:"Vendido"}),i.jsx("th",{className:"p-2 border",children:"Monto vendido"}),i.jsx("th",{className:"p-2 border",children:"COGS"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:s?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(g=>{const v=g.soldQty*g.purchasePrice,y=g.soldAmount-v;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:g.batchDate}),i.jsx("td",{className:"p-2 border",children:g.productName}),i.jsx("td",{className:"p-2 border",children:g.supplier||"-"}),i.jsx("td",{className:"p-2 border",children:g.soldQty}),i.jsx("td",{className:"p-2 border",children:hh(g.soldAmount)}),i.jsx("td",{className:"p-2 border",children:hh(v)}),i.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:hh(y)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${g.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status})}),i.jsx("td",{className:"p-2 border",children:g.status==="PENDIENTE"&&i.jsx("button",{onClick:()=>A(g.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},g.batchId)})})]})}),i.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),i.jsx("th",{className:"p-2 border",children:"Ingreso"}),i.jsx("th",{className:"p-2 border",children:"COGS"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),i.jsx("tbody",{children:m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):m.map(g=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:g.productName}),i.jsx("td",{className:"p-2 border",children:g.qty}),i.jsx("td",{className:"p-2 border",children:hh(g.revenue)}),i.jsx("td",{className:"p-2 border",children:hh(g.cogs)}),i.jsx("td",{className:`p-2 border ${g.profit>=0?"text-green-700":"text-red-700"}`,children:hh(g.profit)})]},g.productName))})]})})]}),l&&i.jsx("p",{className:"mt-2 text-sm",children:l})]})}function mre(t,e,r,n,a){n=n||{};var s=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",A=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof t=="string"?t.split(d):t,A=f.length||1),r+=l*(2-s),n.valign==="middle"?r-=A/2*u:n.valign==="bottom"&&(r-=A*u),n.halign==="center"||n.halign==="right"){var h=l;if(n.halign==="center"&&(h*=.5),f&&A>=1){for(var m=0;m<f.length;m++)a.text(f[m],e-a.getStringUnitWidth(f[m])*h,r),r+=u;return a}e-=a.getStringUnitWidth(t)*h}return n.halign==="justify"?a.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(t,e,r),a}var TV={},av=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:TV=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,a,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){l=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,a,s){return this.jsPDFDocument.rect(e,r,n,a,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return TV||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),Sk=function(t,e){return Sk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},Sk(t,e)};function pre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Sk(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var gre=function(t){pre(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function d4e(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function f4e(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function CS(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return a}function xre(t,e,r,n){var a=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:a,lineColor:s});var o=vre(a,!1);o&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,o)}function vre(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function Gj(t,e){var r,n,a,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(a=t.right)!==null&&a!==void 0?a:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function yre(t,e){var r=Gj(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function h4e(t,e,r,n,a){var s={},o=1.3333333333333333,l=i5(e,function(b){return a.getComputedStyle(b).backgroundColor});l!=null&&(s.fillColor=l);var c=i5(e,function(b){return a.getComputedStyle(b).color});c!=null&&(s.textColor=c);var u=m4e(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=o*r,A=n.borderTopWidth;if(n.borderBottomWidth===A&&n.borderRightWidth===A&&n.borderLeftWidth===A){var h=(parseFloat(A)||0)/f;h&&(s.lineWidth=h)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var m=i5(e,function(b){return a.getComputedStyle(b)[d]});m!=null&&(s.lineColor=m);var p=["left","right","center","justify"];p.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),p=["middle","bottom","top"],p.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var g=parseInt(n.fontSize||"");isNaN(g)||(s.fontSize=g/o);var v=A4e(n);v&&(s.fontStyle=v);var y=(n.fontFamily||"").toLowerCase();return t.indexOf(y)!==-1&&(s.font=y),s}function A4e(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function i5(t,e){var r=bre(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function bre(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:bre(t.parentElement,e):r}function m4e(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),a=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=Gj(s,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function wre(t,e,r,n,a){var s,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof e=="string"?l=r.document.querySelector(e):l=e;var c=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],f=[],A=[];if(!l)return console.error("Html table could not be found with input: ",e),{head:d,body:f,foot:A};for(var h=0;h<l.rows.length;h++){var m=l.rows[h],p=(o=(s=m==null?void 0:m.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),g=p4e(c,u,r,m,n,a);g&&(p==="thead"?d.push(g):p==="tfoot"?A.push(g):f.push(g))}return{head:d,body:f,foot:A}}function p4e(t,e,r,n,a,s){for(var o=new gre(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=h4e(t,c,e,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:g4e(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function g4e(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function x4e(t,e,r){for(var n=0,a=[t,e,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Th(t,e,r,n,a){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function Nre(t,e){var r=new av(t),n=r.getDocumentOptions(),a=r.getGlobalOptions();x4e(a,n,e);var s=Th({},a,n,e),o;typeof window<"u"&&(o=window);var l=v4e(a,n,e),c=y4e(a,n,e),u=b4e(r,s),d=N4e(r,s,o);return{id:e.tableId,content:d,hooks:c,styles:l,settings:u}}function v4e(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=t[c],d=e[c],f=r[c];n.columnStyles=Th({},u,d,f)}else{var A=[t,e,r],h=A.map(function(m){return m[c]||{}});n[c]=Th({},h[0],h[1],h[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];a(l)}return n}function y4e(t,e,r){for(var n=[t,e,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function b4e(t,e){var r,n,a,s,o,l,c,u,d,f,A,h,m=Gj(e.margin,40/t.scaleFactor()),p=(r=w4e(t,e.startY))!==null&&r!==void 0?r:m.top,g;e.showFoot===!0?g="everyPage":e.showFoot===!1?g="never":g=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var v;e.showHead===!0?v="everyPage":e.showHead===!1?v="never":v=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var y=(s=e.useCss)!==null&&s!==void 0?s:!1,b=e.theme||(y?"plain":"striped"),w=!!e.horizontalPageBreak,j=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=e.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:y,theme:b,startY:p,margin:m,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:v,showFoot:g,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(A=e.tableLineColor)!==null&&A!==void 0?A:200,horizontalPageBreak:w,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function w4e(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),a=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===a}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function N4e(t,e,r){var n=e.head||[],a=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(r){var l=wre(t,e.html,r,o,e.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||C4e(n,a,s);return{columns:c,head:n,body:a,foot:s}}function C4e(t,e,r){var n=t[0]||e[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var Ik=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),_4e=function(t){pre(e,t);function e(r,n,a,s,o,l){var c=t.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=o,c.section=s.section,c}return e}(Ik),E4e=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,a,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new _4e(e,this,n,a,s,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new Ik(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new Ik(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),Cre=function(){function t(e,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof gre&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(a,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},t}(),_re=function(){function t(e,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=Gj(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),S4e=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,a=e.allRows();n<a.length;n++){var s=a[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},t}();function I4e(t,e){j4e(t,e);var r=[],n=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=e.getWidth(t.pageSize().width)-n;a&&(a=jk(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=jk(r,a,function(s){return s.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/t.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),B4e(e),T4e(e,t),P4e(e)}function j4e(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,a=yre(t,e);e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=CS(u.text,u.styles,t)+f;var A=CS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=A+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/r;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function jk(t,e,r){for(var n=e,a=t.reduce(function(h,m){return h+m.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;e-=f-o.width,o.width=f}if(e=Math.round(e*1e10)/1e10,e){var A=t.filter(function(h){return e<0?h.width>r(h):!0});A.length&&(e=jk(A,e,r))}return e}function P4e(t){for(var e={},r=1,n=t.allRows(),a=0;a<n.length;a++)for(var s=n[a],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=e[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,A=d.rowSpan>f?f:d.rowSpan;e[c.index]={cell:d,left:A,row:s}}}}}function B4e(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],a=null,s=0,o=0,l=0;l<t.columns.length;l++){var c=t.columns[l];if(o-=1,o>1&&t.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function T4e(t,e){for(var r={count:0,height:0},n=0,a=t.allRows();n<a.length;n++){for(var s=a[n],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=kV(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=kV(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var A=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<A*u.rowSpan?r={height:A,count:u.rowSpan}:r&&r.count>0&&r.height>A&&(A=r.height),A>s.height&&(s.height=A)}}r.count--}}function kV(t,e,r,n,a){return t.map(function(s){return k4e(s,e,r,n,a)})}function k4e(t,e,r,n,a){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=CS(t,r,n))return t;for(;e<CS(t+a,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+a}function Ere(t,e){var r=new av(t),n=F4e(e,r.scaleFactor()),a=new E4e(e,n);return I4e(r,a),r.applyStyles(r.userStyles),a}function F4e(t,e){var r=t.content,n=D4e(r.columns);if(r.head.length===0){var a=FV(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=FV(n,"foot");a&&r.foot.push(a)}var s=t.settings.theme,o=t.styles;return{columns:n,head:o5("head",r.head,n,o,s,e),body:o5("body",r.body,n,o,s,e),foot:o5("foot",r.foot,n,o,s,e)}}function o5(t,e,r,n,a,s){var o={},l=e.map(function(c,u){for(var d=0,f={},A=0,h=0,m=0,p=r;m<p.length;m++){var g=p[m];if(o[g.index]==null||o[g.index].left===0)if(h===0){var v=void 0;Array.isArray(c)?v=c[g.index-A-d]:v=c[g.dataKey];var y={};typeof v=="object"&&!Array.isArray(v)&&(y=(v==null?void 0:v.styles)||{});var b=R4e(t,g,u,a,n,s,y),w=new _re(v,b,t);f[g.dataKey]=w,f[g.index]=w,h=w.colSpan-1,o[g.index]={left:w.rowSpan-1,times:h}}else h--,A++;else o[g.index].left--,h=o[g.index].times,d++}return new Cre(c,u,t,f)});return l}function FV(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var a=O4e(e,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function O4e(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function D4e(t){return t.map(function(e,r){var n,a;return typeof e=="object"?a=(n=e.dataKey)!==null&&n!==void 0?n:r:a=r,new S4e(a,e,r)})}function R4e(t,e,r,n,a,s,o){var l=f4e(n),c;t==="head"?c=a.headStyles:t==="body"?c=a.bodyStyles:t==="foot"&&(c=a.footStyles);var u=Th({},l.table,l[t],a.styles,c),d=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},f=t==="body"?d:{},A=t==="body"&&r%2===0?Th({},l.alternateRow,a.alternateRowStyles):{},h=d4e(s),m=Th({},h,u,A,f);return Th(m,o)}function M4e(t,e,r){var n;r===void 0&&(r={});var a=yre(t,e),s=new Map,o=[],l=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(A){var h=e.columns.find(function(m){return m.dataKey===A||m.index===A});h&&!s.has(h.index)&&(s.set(h.index,!0),o.push(h.index),l.push(e.columns[h.index]),a-=h.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(s.has(d)){d++;continue}var f=e.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),l.push(e.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function L4e(t,e){for(var r=[],n=0;n<e.columns.length;n++){var a=M4e(t,e,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function Sre(t,e){var r=e.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(A,h){return A+h.height},0);l+=u}var d=new av(t);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(jre(d),s.y=a.top),e.callWillDrawPageHooks(d,s);var f=Th({},s);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?U4e(d,e,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(A){return rA(d,e,A,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(A,h){var m=h===e.body.length-1;_S(d,e,A,m,f,s,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(A){return rA(d,e,A,s,e.columns)})),xre(d,e,f,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function U4e(t,e,r,n){var a=L4e(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?wb(t,e,r,n,u.columns,!0):OV(t,e,n,u.columns),Q4e(t,e,r,n,u.columns),l5(t,e,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){t.applyStyles(t.userStyles);var d=l.columns;o>=0?wb(t,e,r,n,d,!0):OV(t,e,n,d),u=DV(t,e,o+1,n,d),l5(t,e,n,d)}var f=u-o;a.slice(1).forEach(function(A){t.applyStyles(t.userStyles),wb(t,e,r,n,A.columns,!0),DV(t,e,o+1,n,A.columns,f),l5(t,e,n,A.columns)}),o=u};o<e.body.length-1;)c()}function OV(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(s){return rA(t,e,s,r,n)})}function Q4e(t,e,r,n,a){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var l=o===e.body.length-1;_S(t,e,s,l,r,n,a)})}function DV(t,e,r,n,a,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(r+s,e.body.length),l=-1;return e.body.slice(r,o).forEach(function(c,u){var d=r+u===e.body.length-1,f=Ire(t,e,d,n);c.canEntireRowFit(f,a)&&(rA(t,e,c,n,a),l=r+u)}),l}function l5(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(s){return rA(t,e,s,r,n)})}function V4e(t,e,r){var n=r.getLineHeight(t.styles.fontSize),a=t.padding("vertical"),s=Math.floor((e-a)/n);return Math.max(0,s)}function H4e(t,e,r,n){var a={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=t.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new _re(u.raw,u.styles,u.section);d=Th(d,u),d.text=[];var f=V4e(u,e,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var A=n.scaleFactor(),h=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(A,h),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(A,h),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var m=new Cre(t.raw,-1,t.section,a,!0);m.height=s;for(var p=0,g=r.columns;p<g.length;p++){var c=g[p],d=m.cells[c.index];d&&(d.height=m.height);var u=t.cells[c.index];u&&(u.height=t.height)}return m}function $4e(t,e,r,n){var a=t.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=a-o;e.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,t),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),f=e.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function _S(t,e,r,n,a,s,o){var l=Ire(t,e,n,s);if(r.canEntireRowFit(l,o))rA(t,e,r,s,o);else if($4e(t,r,l,e)){var c=H4e(r,l,e,t);rA(t,e,r,s,o),wb(t,e,a,s,o),_S(t,e,c,n,a,s,o)}else wb(t,e,a,s,o),_S(t,e,r,n,a,s,o)}function rA(t,e,r,n,a){n.x=e.settings.margin.left;for(var s=0,o=a;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}t.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}G4e(t,c,n);var d=c.getTextPos();mre(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function G4e(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=vre(n.lineWidth,n.fillColor);a&&t.rect(e.x,r.y,e.width,e.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),K4e(t,e,r,n.lineWidth))}function K4e(t,e,r,n){var a,s,o,l;n.top&&(a=r.x,s=r.y,o=r.x+e.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,o,l)),n.bottom&&(a=r.x,s=r.y+e.height,o=r.x+e.width,l=r.y+e.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,o,l)),n.left&&(a=r.x,s=r.y,o=r.x,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,o,l)),n.right&&(a=r.x+e.width,s=r.y,o=r.x+e.width,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,o,l));function c(u,d,f,A,h){t.getDocument().setLineWidth(u),t.getDocument().line(d,f,A,h,"S")}}function Ire(t,e,r,n){var a=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-a}function wb(t,e,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(l){return rA(t,e,l,n,a)}),e.callEndPageHooks(t,n);var o=e.settings.margin;xre(t,e,r,n),jre(t),e.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(l){return rA(t,e,l,n,a)}),t.applyStyles(t.userStyles))}function jre(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function q4e(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],a=Nre(this,n),s=Ere(this,a);return Sre(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,a){mre(e,r,n,a,this)},t.API.autoTableSetDefaults=function(e){return av.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){av.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new av(this),s=wre(a,e,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var c5;function PC(t,e){var r=Nre(t,e),n=Ere(t,r);Sre(t,n)}try{if(typeof window<"u"&&window){var RV=window,MV=RV.jsPDF||((c5=RV.jspdf)===null||c5===void 0?void 0:c5.jsPDF);MV&&q4e(MV)}}catch(t){console.error("Could not apply autoTable plugin",t)}const Xr=t=>`C$${Number(t??0).toFixed(2)}`,z4e=()=>Ir(new Date,"yyyy-MM-dd"),ba=t=>Number(t||0).toFixed(3);function W4e(){const[t,e]=x.useState(()=>{const we=new Date,ae=new Date(we.getFullYear(),we.getMonth(),1);return Ir(ae,"yyyy-MM-dd")}),[r,n]=x.useState(z4e()),[a,s]=x.useState(!0),[o,l]=x.useState([]),[c,u]=x.useState([]),[d,f]=x.useState([]),[A,h]=x.useState(!1),[m,p]=x.useState(null),[g,v]=x.useState(0),[y,b]=x.useState(0),[w,j]=x.useState({}),{refreshKey:I,refresh:_}=kc(),[S,E]=x.useState({}),[F,P]=x.useState({}),[k,D]=x.useState(!1),J=()=>D(we=>!we),[fe,Ae]=x.useState(!1),me=()=>Ae(we=>!we),[pe,ne]=x.useState(!1),[Pe,Be]=x.useState(!1),[O,G]=x.useState(!1),q=()=>ne(we=>!we),U=()=>Be(we=>!we),Y=()=>G(we=>!we),[Z,R]=x.useState("");x.useEffect(()=>{(async()=>{s(!0);const ae=nr(bt(Oe,"salesV2"),sr("date",">=",t),sr("date","<=",r)),be=await Qt(ae),ve=[];be.forEach(dt=>{const ft=dt.data(),gt=ft.date??"";if(Array.isArray(ft.items)&&ft.items.length>0){ft.items.forEach((Rt,ot)=>{const Se=String(Rt.productName??"(sin nombre)"),ht=Number(Rt.qty??0),W=Number(Rt.lineFinal??0)||Math.max(0,Number(Rt.unitPrice||0)*ht-Number(Rt.discount||0));ve.push({id:`${dt.id}#${ot}`,date:gt,productName:Se,quantity:ht,amount:W,allocations:Array.isArray(Rt.allocations)?Rt.allocations:ft.allocations,avgUnitCost:Number(Rt.avgUnitCost??ft.avgUnitCost??0),measurement:Rt.measurement??ft.measurement??"",type:ft.type??"CONTADO"})});return}ve.push({id:dt.id,date:gt,productName:ft.productName??"(sin nombre)",quantity:Number(ft.quantity??0),amount:Number(ft.amount??ft.amountCharged??0),allocations:Array.isArray(ft.allocations)?ft.allocations:[],avgUnitCost:Number(ft.avgUnitCost??0),measurement:ft.measurement??"",type:ft.type??"CONTADO"})}),l(ve);const Ve=nr(bt(Oe,"expenses"),sr("date",">=",t),sr("date","<=",r)),ce=await Qt(Ve),ke=[];ce.forEach(dt=>{const ft=dt.data();ke.push({id:dt.id,date:ft.date??"",category:ft.category??"(sin categora)",description:ft.description??"",amount:Number(ft.amount??0),status:ft.status??"PAGADO",createdAt:ft.createdAt})}),u(ke),s(!1)})()},[t,r,I]),x.useMemo(()=>{const we=o.reduce((ce,ke)=>ce+(ke.amount||0),0);let ae=0;o.forEach(ce=>{var ke;(ke=ce.allocations)!=null&&ke.length?ae+=ce.allocations.reduce((dt,ft)=>dt+Number(ft.lineCost||0),0):ce.avgUnitCost&&ce.quantity&&(ae+=Number(ce.avgUnitCost)*Number(ce.quantity))});const be=we-ae,ve=c.reduce((ce,ke)=>ce+(ke.amount||0),0),Ve=be-ve;return{revenue:we,cogsReal:ae,grossProfit:be,expensesSum:ve,netProfit:Ve}},[o,c]);const H=x.useMemo(()=>Z?o.filter(we=>(we.productName||"")===Z):o,[o,Z]),te=x.useMemo(()=>{const we=H.reduce((ce,ke)=>ce+(ke.amount||0),0);let ae=0;H.forEach(ce=>{var ke;(ke=ce.allocations)!=null&&ke.length?ae+=ce.allocations.reduce((dt,ft)=>dt+Number(ft.lineCost||0),0):ce.avgUnitCost&&ce.quantity&&(ae+=Number(ce.avgUnitCost)*Number(ce.quantity))});const be=we-ae,ve=c.reduce((ce,ke)=>ce+(ke.amount||0),0),Ve=be-ve;return{revenue:we,cogsReal:ae,grossProfit:be,expensesSum:ve,netProfit:Ve}},[H,c]),ye=x.useMemo(()=>{const we=H.filter(ke=>ke.type==="CONTADO"),ae=we.reduce((ke,dt)=>ke+(dt.amount||0),0);let be=0;we.forEach(ke=>{var dt;(dt=ke.allocations)!=null&&dt.length?be+=ke.allocations.reduce((ft,gt)=>ft+Number(gt.lineCost||0),0):ke.avgUnitCost&&ke.quantity&&(be+=Number(ke.avgUnitCost)*Number(ke.quantity))});const ve=ae-be,Ve=c.reduce((ke,dt)=>ke+(dt.amount||0),0),ce=ve-Ve;return{revenue:ae,cogsReal:be,grossProfit:ve,expensesSum:Ve,netProfit:ce}},[H,c]),Q=x.useMemo(()=>{const we=H.filter(Ve=>Ve.type==="CREDITO"),ae=we.reduce((Ve,ce)=>Ve+(ce.amount||0),0);let be=0;we.forEach(Ve=>{var ce;(ce=Ve.allocations)!=null&&ce.length?be+=Ve.allocations.reduce((ke,dt)=>ke+Number(dt.lineCost||0),0):Ve.avgUnitCost&&Ve.quantity&&(be+=Number(Ve.avgUnitCost)*Number(Ve.quantity))});const ve=ae-be;return{revenue:ae,cogsReal:be,grossProfit:ve}},[H]),Ge=we=>String(we??"").toLowerCase().trim(),ie=we=>Number(we.qty??we.quantity??0),ee=we=>["lb","lbs","libra","libras"].includes(Ge(we)),Ie=we=>["unidad","unidades","ud","uds","pieza","piezas"].includes(Ge(we)),ue=we=>we?typeof we=="string"?we:we!=null&&we.toDate?Ir(we.toDate(),"yyyy-MM-dd"):"":"";x.useEffect(()=>{(async()=>{h(!0);try{const ae=await Qt(bt(Oe,"customers_pollo")),be={};ae.forEach(L=>{const K=L.data();be[L.id]=String(K.name??"(sin nombre)")});const ve=await Qt(bt(Oe,"ar_movements_pollo")),Ve={},ce={},ke={},dt={},ft=new Set,gt={},Rt={};let ot=0;ve.forEach(L=>{var lt,Fe,Xe;const K=L.data(),re=String(K.customerId??"").trim();if(!re)return;const le=Number(K.amount??0);Ve[re]=(Ve[re]||0)+le;const Me=String(K.type??"").toUpperCase(),qe=K.createdAt??null;if(Me==="ABONO"){ot+=Math.abs(le);const he=(lt=K==null?void 0:K.ref)!=null&&lt.saleId?String(K.ref.saleId):"";he?(gt[he]=(gt[he]||0)+Math.abs(le),ft.add(he)):Rt[re]=(Rt[re]||0)+Math.abs(le);const He=ke[re],Ye=!(He!=null&&He.ts)||(qe!=null&&qe.toDate&&((Fe=He.ts)!=null&&Fe.toDate)?qe.toDate()>He.ts.toDate():!1);(!He||Ye)&&(ke[re]={amount:Math.abs(le),date:K.date??"",ts:qe})}if(Me==="CARGO"){ce[re]=(ce[re]||0)+Math.abs(le);const he=(Xe=K==null?void 0:K.ref)!=null&&Xe.saleId?String(K.ref.saleId):"";he&&(dt[re]||(dt[re]=new Set),dt[re].add(he),ft.add(he))}});const Se=new Map;await Promise.all(Array.from(ft).map(async L=>{const K=await Ci(zt(Oe,"salesV2",L));K.exists()&&Se.set(L,K.data())}));let ht=0;const W=L=>{const K=Number(L.qty??L.quantity??0);return Number(L.lineFinal??0)||Math.max(0,Number(L.unitPrice||0)*K-Number(L.discount||0))},Te=L=>{if(Array.isArray(L.items)&&L.items.length>0){let Me=0,qe=0;return L.items.forEach(lt=>{const Fe=Number(lt.qty??lt.quantity??0);if(Me+=W(lt),Array.isArray(lt.allocations)&&lt.allocations.length>0)qe+=lt.allocations.reduce((Xe,he)=>Xe+Number(he.lineCost||0),0);else{const Xe=Number(lt.avgUnitCost??L.avgUnitCost??0);qe+=Xe*Fe}}),{total:Me,cogs:qe}}const K=Number(L.quantity??0),re=Number(L.amount??L.amountCharged??0)||0;let le=0;return Array.isArray(L.allocations)&&L.allocations.length>0?le=L.allocations.reduce((Me,qe)=>Me+Number(qe.lineCost||0),0):L.avgUnitCost&&(le=Number(L.avgUnitCost)*K),{total:re,cogs:le}},Ze=new Map;Se.forEach((L,K)=>{const{total:re,cogs:le}=Te(L);Ze.set(K,{total:re,cogs:le,grossProfit:re-le})});const tt={},ut={};Object.keys(gt).forEach(L=>{const K=Ze.get(L);if(!(K!=null&&K.total))return;const re=Number(gt[L]||0);ut[L]=re;const le=Math.min(1,re/K.total),Me=K.grossProfit*le;tt[L]=Me,ht+=Me}),Object.keys(Rt).forEach(L=>{const K=dt[L];if(!K||K.size===0)return;let re=0,le=0,Me=0,qe=0;K.forEach(He=>{const Ye=Ze.get(He);Ye&&(re+=Ye.total,le+=Ye.grossProfit,ut[He]&&(Me+=Math.min(Ye.total,ut[He])),qe+=tt[He]||0)});const lt=Math.max(0,re-Me),Fe=Math.max(0,le-qe);if(!lt||!Fe)return;const Xe=Number(Rt[L]||0),he=Math.min(1,Xe/lt);ht+=Fe*he});const T=[];Object.keys(Ve).forEach(L=>{const K=Number(Ve[L]||0);if(K<=0)return;const re=new Map;let le=0,Me=0,qe="";(dt[L]||new Set).forEach(Xe=>{const he=Se.get(Xe);if(!he)return;const He=String(he.date??"");He&&(!qe||He>qe)&&(qe=He),(Array.isArray(he.items)&&he.items.length>0?he.items:[{productName:he.productName,qty:he.quantity,unitPrice:he.unitPrice,discount:he.discount,lineFinal:he.amount??he.amountCharged,measurement:he.measurement}]).forEach(ct=>{const Nt=String(ct.productName??"(sin nombre)"),It=Number(ct.qty??ct.quantity??0),hr=String(ct.measurement??""),Ot=Number(ct.lineFinal??0)||Math.max(0,Number(ct.unitPrice||0)*It-Number(ct.discount||0));ee(hr)?le+=It:Me+=It;const Ft=`${Nt}||${hr}`,lr=re.get(Ft)||{productName:Nt,qty:0,amount:0,measurement:hr};lr.qty+=It,lr.amount+=Ot,re.set(Ft,lr)})});const Fe=ke[L];T.push({customerId:L,name:be[L]||"(sin nombre)",balance:K,globalBalance:Number(ce[L]||0),lbs:le,units:Me,lastPaymentAmount:Number((Fe==null?void 0:Fe.amount)||0),lastSaleDate:qe||"",lastPaymentDate:ue((Fe==null?void 0:Fe.ts)||(Fe==null?void 0:Fe.date)),products:Array.from(re.values()).sort((Xe,he)=>Xe.productName.localeCompare(he.productName))})});const M=T.filter(L=>L.products.length);M.sort((L,K)=>K.balance-L.balance),f(M),v(ot),b(ht)}catch(ae){console.error("Error cargando saldos pendientes:",ae),f([]),v(0)}finally{h(!1)}})()},[I]),x.useEffect(()=>{(async()=>{try{const ae=await Qt(nr(bt(Oe,"inventory_batches"),sr("date",">=",t),sr("date","<=",r))),be={};ae.forEach(ve=>{const Ve=ve.data(),ce=String(Ve.productName??"(sin nombre)"),ke=Number(Ve.quantity??0),dt=Number(Ve.remaining??0);be[ce]||(be[ce]={incomingQty:0,remainingQty:0}),be[ce].incomingQty+=ke,be[ce].remainingQty+=dt}),j(be)}catch(ae){console.error("Error cargando inventario:",ae),j({})}})()},[I,t,r]),x.useMemo(()=>o.reduce((we,ae)=>ee(ae.measurement)?we+ie(ae):we,0),[o]),x.useMemo(()=>H.reduce((we,ae)=>ee(ae.measurement)?we+ie(ae):we,0),[H]);const se=x.useMemo(()=>H.filter(we=>we.type==="CONTADO"),[H]),Ee=x.useMemo(()=>H.filter(we=>we.type==="CREDITO"),[H]),je=x.useMemo(()=>se.reduce((we,ae)=>we+(ae.amount||0),0),[se]),it=x.useMemo(()=>Ee.reduce((we,ae)=>we+(ae.amount||0),0),[Ee]),At=x.useMemo(()=>d.reduce((we,ae)=>we+Number(ae.balance||0),0),[d]),pt=x.useMemo(()=>ye.revenue+g,[ye.revenue,g]),yt=x.useMemo(()=>je+g,[je,g]),Ct=x.useMemo(()=>ye.grossProfit+y,[ye.grossProfit,y]),Et=x.useMemo(()=>ye.netProfit+y,[ye.netProfit,y]),Re=x.useMemo(()=>se.reduce((we,ae)=>ee(ae.measurement)?we+ie(ae):we,0),[se]),We=x.useMemo(()=>Ee.reduce((we,ae)=>ee(ae.measurement)?we+ie(ae):we,0),[Ee]);x.useMemo(()=>o.reduce((we,ae)=>Ie(ae.measurement)?we+ie(ae):we,0),[o]),x.useMemo(()=>H.reduce((we,ae)=>Ie(ae.measurement)?we+ie(ae):we,0),[H]);const et=x.useMemo(()=>se.reduce((we,ae)=>Ie(ae.measurement)?we+ie(ae):we,0),[se]),xe=x.useMemo(()=>Ee.reduce((we,ae)=>Ie(ae.measurement)?we+ie(ae):we,0),[Ee]),de=x.useMemo(()=>Array.from(new Set(o.map(we=>we.productName||"(sin nombre)"))).sort(),[o]),Ue=x.useMemo(()=>{var ae;const we=new Map;for(const be of H){const ve=be.productName||"(sin nombre)";we.has(ve)||we.set(ve,{productName:ve,units:0,revenue:0,cogs:0,profit:0,firstDate:be.date||"",lastDate:be.date||""});const Ve=we.get(ve);Ve.units+=Number(be.quantity||0),Ve.revenue+=Number(be.amount||0),(!Ve.firstDate||be.date<(Ve.firstDate||be.date))&&(Ve.firstDate=be.date),(!Ve.lastDate||be.date>(Ve.lastDate||be.date))&&(Ve.lastDate=be.date);let ce=0;(ae=be.allocations)!=null&&ae.length?ce=be.allocations.reduce((ke,dt)=>ke+Number(dt.lineCost||0),0):be.avgUnitCost&&(ce=Number(be.avgUnitCost)*Number(be.quantity||0)),Ve.cogs+=ce,Ve.profit=Ve.revenue-Ve.cogs}return Array.from(we.values()).sort((be,ve)=>be.productName.localeCompare(ve.productName))},[H]),Ke=x.useMemo(()=>[...Ue].sort((we,ae)=>ae.units-we.units).slice(0,3).map((we,ae)=>({idx:ae+1,name:we.productName,units:we.units})),[Ue]),Ne=we=>E(ae=>({...ae,[we]:!ae[we]})),mt=we=>P(ae=>({...ae,[we]:!ae[we]})),wt=()=>{var ce,ke,dt;const we=new Mr({unit:"pt",format:"a4"}),ae="Dashboard Financiero",be=`Rango: ${t} a ${r}`,ve=Z?`Producto: ${Z}`:"Producto: Todos";we.setFontSize(16),we.text(ae,40,40),we.setFontSize(10),we.text(be,40,58),we.text(ve,40,72);let Ve=90;PC(we,{startY:Ve,head:[["KPI","Valor"]],body:[["Ventas (rango)",Xr(te.revenue)],["Costo",Xr(te.cogsReal)],["Utilidad Bruta",Xr(te.grossProfit)],["Gastos",Xr(te.expensesSum)],["Utilidad Neta",Xr(te.netProfit)],["CxC",Xr(At)],["Recaudacin (Abonos)",Xr(g)],["Utilidad Neta Crdito (Caja)",Xr(y)],["Utilidad Bruta Cash + Crdito",Xr(Ct)],["Utilidad Neta Cash + Crdito",Xr(Et)]],styles:{fontSize:9},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),Ve=(ce=we.lastAutoTable)!=null&&ce.finalY?we.lastAutoTable.finalY+18:110,PC(we,{startY:Ve,head:[["Cliente","Libras","Unidades","Saldo Global","Saldo pendiente","ltimo abono","Fecha ult. abono"]],body:d.map(ft=>[ft.name,ba(ft.lbs),ba(ft.units),Xr(ft.globalBalance),Xr(ft.balance),Xr(ft.lastPaymentAmount),ft.lastPaymentDate||""]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]},didDrawPage:ft=>{ft.pageNumber>1&&(we.setFontSize(10),we.text(ae,40,30))}}),Ve=(ke=we.lastAutoTable)!=null&&ke.finalY?we.lastAutoTable.finalY+18:110,PC(we,{startY:Ve,head:[["Producto","Ingresado","Disponibilidad","Fechas","Cantidad","Venta","Costo","Utilidad"]],body:Ue.map(ft=>{var gt,Rt;return[ft.productName,ba(((gt=w[ft.productName])==null?void 0:gt.incomingQty)||0),ba(((Rt=w[ft.productName])==null?void 0:Rt.remainingQty)||0),ft.firstDate&&ft.lastDate?ft.firstDate===ft.lastDate?ft.firstDate:`${ft.firstDate}  ${ft.lastDate}`:"",ba(ft.units),Xr(ft.revenue),Xr(ft.cogs),Xr(ft.profit)]}),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),Ve=(dt=we.lastAutoTable)!=null&&dt.finalY?we.lastAutoTable.finalY+18:110,PC(we,{startY:Ve,head:[["Fecha","Categora","Descripcin","Monto","Estado"]],body:c.map(ft=>[ft.date,ft.category,ft.description||"",Xr(ft.amount),ft.status||""]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),we.save(`dashboard_${t}_a_${r}.pdf`)};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Dashboard Financiero"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:wt,className:"px-3 py-2 rounded-lg text-sm bg-gray-900 text-white hover:bg-black",children:"Exportar PDF"}),i.jsx(Tc,{onClick:_,loading:a})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:t,onChange:we=>e(we.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:r,onChange:we=>n(we.target.value)})]})]}),a?i.jsx("p",{children:"Cargando"}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:q,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Kpi Financiero"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Ventas: ",i.jsx("b",{children:Xr(te.revenue)}),"  Utilidad Neta:"," ",i.jsx("b",{children:Xr(te.netProfit)})]})]}),i.jsx("div",{className:"text-gray-500",children:pe?"":""})]}),pe&&i.jsxs("div",{className:"mt-3",children:[i.jsx("div",{className:"flex gap-2 mb-2 items-center",children:i.jsxs("select",{className:"w-full border rounded px-2 py-2 text-sm",value:Z,onChange:we=>R(we.target.value),children:[i.jsx("option",{value:"",children:"Todos los productos"}),de.map(we=>i.jsx("option",{value:we,children:we},we))]})}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(ps,{title:"Ventas",subtitle:"Ventas cash",value:Xr(pt),valueClass:"text-[#1E4D2B]"}),i.jsx(ps,{title:"Costo",value:Xr(ye.cogsReal)}),i.jsx(ps,{title:"Utilidad Bruta Cash",value:Xr(ye.grossProfit),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(ps,{title:"Ventas Crdito",value:Xr(Q.revenue)}),i.jsx(ps,{title:"Costo",value:Xr(Q.cogsReal),negative:!0}),i.jsx(ps,{title:"Utilidad Bruta Crdito",value:Xr(Q.grossProfit),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(ps,{title:"CxC",value:Xr(At)}),i.jsx(ps,{title:"Recaudacin (Abonos)",value:Xr(g)})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(ps,{title:"Utilidad Neta Crdito (Caja)",value:Xr(y),valueClass:"text-[#BF5700]"}),i.jsx(ps,{title:"Utilidad Bruta Cash + Crdito",value:Xr(Ct),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(ps,{title:"Gastos",value:Xr(ye.expensesSum),negative:!0}),i.jsx(ps,{title:"Utilidad Neta Cash + Crdito",value:Xr(Et),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(xl,{title:"Ventas Cash",value:Xr(yt)}),i.jsx(xl,{title:"Ventas Crdito",value:Xr(it)}),i.jsx(xl,{title:"Libras Cash",value:ba(Re)}),i.jsx(xl,{title:"Libras Crdito",value:ba(We)}),i.jsx(xl,{title:"Unidades Cash",value:ba(et)}),i.jsx(xl,{title:"Unidades Crdito",value:ba(xe)})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[i.jsx(xl,{title:"Libras Cash + Credito",value:ba(Re+We)}),i.jsx(xl,{title:"Unidades Cash + Credito",value:ba(et+xe)}),i.jsx(LV,{title:"Productos ms vendidos",items:Ke.map(we=>({key:`${we.idx}`,label:`${we.idx}. ${we.name}`,value:`(${ba(we.units)})`}))})]})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(ps,{title:"Ventas Cash",value:Xr(pt),positive:!0}),i.jsx(ps,{title:"Costo",value:Xr(ye.cogsReal),negative:!0}),i.jsx(ps,{title:"Utilidad Bruta Cash",value:Xr(ye.grossProfit),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(ps,{title:"Ventas Crdito",value:Xr(Q.revenue),positive:!0}),i.jsx(ps,{title:"Costo",value:Xr(Q.cogsReal),negative:!0}),i.jsx(ps,{title:"Utilidad Bruta Crdito",value:Xr(Q.grossProfit),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(ps,{title:"CxC",value:Xr(At),negative:!0}),i.jsx(ps,{title:"Recaudacin (Abonos)",value:Xr(g),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-4 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(ps,{title:"Utilidad Neta Crdito (Caja)",value:Xr(y),valueClass:"text-[#BF5700]"}),i.jsx(ps,{title:"Utilidad Bruta Cash + Crdito",value:Xr(Ct),positive:!0}),i.jsx(ps,{title:"Gastos",value:Xr(ye.expensesSum),negative:!0}),i.jsx(ps,{title:"Utilidad Neta Cash + Crdito",value:Xr(Et),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(xl,{title:"Ventas Cash",value:Xr(yt)}),i.jsx(xl,{title:"Ventas Crdito",value:Xr(it)}),i.jsx(xl,{title:"Libras Cash",value:ba(Re)}),i.jsx(xl,{title:"Libras Crdito",value:ba(We)}),i.jsx(xl,{title:"Unidades Cash",value:ba(et)}),i.jsx(xl,{title:"Unidades Crdito",value:ba(xe)})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[i.jsx(xl,{title:"Libras Cash + Credito",value:ba(Re+We)}),i.jsx(xl,{title:"Unidades Cash + Credito",value:ba(et+xe)}),i.jsx(LV,{title:"Productos ms vendidos",items:Ke.map(we=>({key:`${we.idx}`,label:`${we.idx}. ${we.name}`,value:`(${ba(we.units)})`}))})]})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:U,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsx("div",{className:"font-semibold",children:"Saldos pendientes"}),i.jsx("div",{className:"text-gray-500",children:Pe?"":""})]}),Pe&&i.jsx("div",{className:"border rounded-2xl p-3 sm:p-4 bg-gray-50 mt-3",children:A?i.jsx("div",{className:"text-sm text-gray-600",children:"Cargando saldos"}):d.length===0?i.jsx("div",{className:"text-sm text-gray-600",children:"Sin saldos pendientes."}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-white",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Libras"}),i.jsx("th",{className:"border p-2",children:"Unidades"}),i.jsx("th",{className:"border p-2",children:"Saldo Global"}),i.jsx("th",{className:"border p-2",children:"Saldo pendiente"}),i.jsx("th",{className:"border p-2",children:"ltimo abono"}),i.jsx("th",{className:"border p-2",children:"Fecha ult. abono"}),i.jsx("th",{className:"border p-2",children:"Ver"})]})}),i.jsx("tbody",{children:d.map(we=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1 text-left",children:we.name}),i.jsx("td",{className:"border p-1",children:ba(we.lbs)}),i.jsx("td",{className:"border p-1",children:ba(we.units)}),i.jsx("td",{className:"border p-1",children:Xr(we.globalBalance)}),i.jsx("td",{className:"border p-1",children:Xr(we.balance)}),i.jsx("td",{className:"border p-1",children:Xr(we.lastPaymentAmount)}),i.jsx("td",{className:"border p-1",children:we.lastPaymentDate||""}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",onClick:()=>p(we),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},we.customerId))})]})})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:Y,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsx("div",{className:"font-semibold",children:"Consolidado y gastos"}),i.jsx("div",{className:"text-gray-500",children:O?"":""})]}),O&&i.jsxs("div",{className:"mt-3",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto Libras - Unidades"}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Ingresado Lb/Un"}),i.jsx("th",{className:"border p-2",children:"Disponibilidad"}),i.jsx("th",{className:"border p-2",children:"Fecha Venta"}),i.jsx("th",{className:"border p-2",children:"Cantidad Lb/Un"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Costo"}),i.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),i.jsxs("tbody",{children:[Ue.map(we=>{var ae,be;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:we.productName}),i.jsx("td",{className:"border p-1",children:ba(((ae=w[we.productName])==null?void 0:ae.incomingQty)||0)}),i.jsx("td",{className:"border p-1",children:ba(((be=w[we.productName])==null?void 0:be.remainingQty)||0)}),i.jsx("td",{className:"border p-1",children:we.firstDate&&we.lastDate?we.firstDate===we.lastDate?we.firstDate:`${we.firstDate}  ${we.lastDate}`:""}),i.jsx("td",{className:"border p-1",children:ba(we.units)}),i.jsx("td",{className:"border p-1",children:Xr(we.revenue)}),i.jsx("td",{className:"border p-1",children:Xr(we.cogs)}),i.jsx("td",{className:`border p-1 ${we.profit>=0?"text-green-700":"text-red-700"}`,children:Xr(we.profit)})]},we.productName)}),Ue.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]})}),i.jsxs("div",{className:"md:hidden mb-6",children:[i.jsxs("button",{type:"button",onClick:J,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Consolidado por producto Libras - Unidades"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[Ue.length," productos"]})]}),i.jsx("div",{className:"text-gray-500",children:k?"":""})]}),k&&i.jsx("div",{className:"space-y-2 mt-3",children:Ue.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin datos en el rango seleccionado."}):Ue.map(we=>{var ve,Ve;const ae=!!S[we.productName],be=we.firstDate&&we.lastDate?we.firstDate===we.lastDate?we.firstDate:`${we.firstDate}  ${we.lastDate}`:"";return i.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>Ne(we.productName),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:we.productName}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Total: ",i.jsx("b",{children:ba(we.units)}),"  Utilidad:"," ",i.jsx("b",{className:we.profit>=0?"text-green-700":"text-red-700",children:Xr(we.profit)})]})]}),i.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:ae?"":""})]}),ae&&i.jsx("div",{className:"px-3 pb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(Tu,{label:"Ingresadas",value:ba(((ve=w[we.productName])==null?void 0:ve.incomingQty)||0)}),i.jsx(Tu,{label:"Disponibilidad",value:ba(((Ve=w[we.productName])==null?void 0:Ve.remainingQty)||0)}),i.jsx(Tu,{label:"Fechas",value:be}),i.jsx(Tu,{label:"Total",value:ba(we.units)}),i.jsx(Tu,{label:"Ingreso",value:Xr(we.revenue)}),i.jsx(Tu,{label:"Costo",value:Xr(we.cogs)}),i.jsx(Tu,{label:"Utilidad",value:Xr(we.profit),valueClass:we.profit>=0?"text-green-700 font-semibold":"text-red-700 font-semibold"})]})})]},we.productName)})})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Categora"}),i.jsx("th",{className:"border p-2",children:"Descripcin"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Estado"})]})}),i.jsxs("tbody",{children:[c.map(we=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:we.date}),i.jsx("td",{className:"border p-1",children:we.category}),i.jsx("td",{className:"border p-1",children:we.description}),i.jsx("td",{className:"border p-1",children:Xr(we.amount)}),i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${we.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:we.status})})]},we.id)),c.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})}),i.jsxs("div",{className:"md:hidden mb-6",children:[i.jsxs("button",{type:"button",onClick:me,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Gastos del periodo"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[c.length," registros"]})]}),i.jsx("div",{className:"text-gray-500",children:fe?"":""})]}),fe&&i.jsx("div",{className:"space-y-2 mt-3",children:c.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin gastos en el rango seleccionado."}):c.map(we=>{const ae=!!F[we.id],be=we.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return i.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>mt(we.id),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:we.category}),i.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] ${be}`,children:we.status})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[we.date,"  ",i.jsx("b",{children:Xr(we.amount)})]})]}),i.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:ae?"":""})]}),ae&&i.jsx("div",{className:"px-3 pb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[i.jsx(Tu,{label:"Fecha",value:we.date}),i.jsx(Tu,{label:"Categora",value:we.category}),i.jsx(Tu,{label:"Descripcin",value:we.description||""}),i.jsx(Tu,{label:"Monto",value:Xr(we.amount)}),i.jsx(Tu,{label:"Estado",value:we.status||""})]})})]},we.id)})})]})]})]})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:m.name}),i.jsx("button",{type:"button",onClick:()=>p(null),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Libras/Unidades"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Fecha Venta"})]})}),i.jsx("tbody",{children:m.products.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"border p-2 text-center text-gray-500",children:"Sin productos asociados."})}):m.products.map(we=>i.jsxs("tr",{children:[i.jsx("td",{className:"border p-1",children:we.productName}),i.jsx("td",{className:"border p-1 text-center",children:ba(we.qty)}),i.jsx("td",{className:"border p-1 text-center",children:Xr(we.amount)}),i.jsx("td",{className:"border p-1 text-center",children:m.lastSaleDate||""})]},`${we.productName}-${we.measurement}`))})]})})]})})]})}function ps({title:t,value:e,positive:r,negative:n,valueClass:a,subtitle:s}){const o=a||(r?"text-[#568203]":n?"text-[#AB274F]":"");return i.jsxs("div",{className:"border rounded-2xl p-3 bg-white",children:[i.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),s?i.jsx("div",{className:"text-[11px] sm:text-[12px] text-gray-400",children:s}):null,i.jsx("div",{className:`text-[26px] sm:text-[30px] font-bold ${o}`,children:e})]})}function xl({title:t,value:e}){return i.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[i.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),i.jsx("div",{className:"text-[18px] sm:text-[20px] font-semibold",children:e})]})}function LV({title:t,items:e}){return i.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[i.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),i.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?i.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>i.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}function Tu({label:t,value:e,valueClass:r}){return i.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:t}),i.jsx("div",{className:`text-sm mt-0.5 ${r||""}`,children:e})]})}const BC=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],rx=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function X4e(){const{refreshKey:t,refresh:e}=kc(),[r,n]=x.useState(Ir(af(new Date),"yyyy-MM-dd")),[a,s]=x.useState(Ir(nf(new Date),"yyyy-MM-dd")),[o,l]=x.useState(Ir(new Date,"yyyy-MM-dd")),[c,u]=x.useState(""),[d,f]=x.useState(""),[A,h]=x.useState(0),[m,p]=x.useState("PENDIENTE"),[g,v]=x.useState(""),[y,b]=x.useState([]),[w,j]=x.useState(!0),[I,_]=x.useState(""),[S,E]=x.useState(null),[F,P]=x.useState(""),[k,D]=x.useState(""),[J,fe]=x.useState(""),[Ae,me]=x.useState(0),[pe,ne]=x.useState("PENDIENTE"),[Pe,Be]=x.useState(""),[O,G]=x.useState(!1),q=()=>G(ue=>!ue),[U,Y]=x.useState(null),Z=ue=>Y(se=>se===ue?null:ue);x.useEffect(()=>{(async()=>{j(!0),_("");try{const ue=nr(bt(Oe,"expenses"),xn("date","desc")),se=await Qt(ue),Ee=[];se.forEach(je=>{const it=je.data();Ee.push({id:je.id,date:it.date||Ir(new Date,"yyyy-MM-dd"),category:it.category||"",description:it.description||"",amount:Number(it.amount||0),status:it.status||"PENDIENTE",notes:it.notes||"",createdAt:it.createdAt??ur.now()})}),b(Ee)}catch(ue){console.error(ue),_(" Error al cargar gastos")}finally{j(!1)}})()},[t]);const R=x.useMemo(()=>y.filter(ue=>!(r&&ue.date<r||a&&ue.date>a)),[y,r,a]),H=x.useMemo(()=>{const ue=R.reduce((je,it)=>je+(it.amount||0),0),se=R.filter(je=>je.status==="PAGADO").reduce((je,it)=>je+(it.amount||0),0),Ee=ue-se;return{total:ue,pagado:se,pendiente:Ee}},[R]),te=()=>{l(Ir(new Date,"yyyy-MM-dd")),u(""),f(""),h(0),p("PENDIENTE"),v("")},ye=async ue=>{if(ue.preventDefault(),_(""),!c)return _("Selecciona una categora.");if(!d.trim())return _("Ingresa una descripcin.");if(!A||A<=0)return _("Ingresa un monto vlido.");try{const se={date:o,category:c,description:d.trim(),amount:Number(Number(A||0).toFixed(2)),status:m,notes:g||"",createdAt:ur.now()},Ee=await Bn(bt(Oe,"expenses"),se);b(je=>[{id:Ee.id,...se},...je]),te(),_(" Gasto registrado")}catch(se){console.error(se),_(" Error al guardar gasto")}},Q=ue=>{_(""),E(ue.id),P(ue.date),D(ue.category||""),fe(ue.description||""),me(Number(ue.amount||0)),ne(ue.status||"PENDIENTE"),Be(ue.notes||"")},Ge=()=>{E(null),P(""),D(""),fe(""),me(0),ne("PENDIENTE"),Be("")},ie=async()=>{if(S){if(!k)return _("Selecciona una categora.");if(!J.trim())return _("Ingresa una descripcin.");if(!Ae||Ae<=0)return _("Ingresa un monto vlido.");try{const ue={date:F,category:k,description:J.trim(),amount:Number(Number(Ae||0).toFixed(2)),status:pe,notes:Pe||""};await pn(zt(Oe,"expenses",S),ue),b(se=>se.map(Ee=>Ee.id===S?{...Ee,...ue}:Ee)),Ge(),_(" Gasto actualizado")}catch(ue){console.error(ue),_(" Error al actualizar gasto")}}},ee=async ue=>{if(confirm(`Eliminar el gasto "${ue.description}"?`))try{await Pn(zt(Oe,"expenses",ue.id)),b(Ee=>Ee.filter(je=>je.id!==ue.id)),_(" Gasto borrado")}catch(Ee){console.error(Ee),_(" Error al borrar gasto")}},Ie=ue=>ue==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return i.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Gastos (Pollo)"}),i.jsx(Tc,{onClick:e,loading:w})]}),i.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:ue=>n(ue.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ue=>s(ue.target.value)})]})]}),i.jsxs("div",{className:"sm:ml-auto text-sm bg-gray-50 border rounded-xl p-3",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",rx(H.total)]}),i.jsxs("div",{children:["Pagado: ",rx(H.pagado)]}),i.jsxs("div",{children:["Pendiente: ",rx(H.pendiente)]})]})]}),i.jsxs("div",{className:"md:hidden mb-4",children:[i.jsxs("button",{type:"button",onClick:q,className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white border rounded-2xl",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Crear gasto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha: ",o,"  Monto: ",A===0?"":rx(A)]})]}),i.jsx("div",{className:"text-gray-500",children:O?"":""})]}),O&&i.jsxs("form",{onSubmit:ye,className:"mt-3 bg-white p-4 rounded-2xl shadow-2xl border grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:o,onChange:ue=>l(ue.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:ue=>u(ue.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),BC.map(ue=>i.jsx("option",{value:ue,children:ue},ue))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:ue=>f(ue.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:A===0?"":A,onChange:ue=>{const se=String(ue.target.value||"").replace(",","."),Ee=parseFloat(se);h(Number.isFinite(Ee)?Math.max(0,Ee):0)},placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:ue=>p(ue.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:ue=>v(ue.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),i.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:te,children:"Limpiar"})]})]})]}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("form",{onSubmit:ye,className:"bg-white p-4 rounded-2xl shadow-2xl border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:o,onChange:ue=>l(ue.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:ue=>u(ue.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),BC.map(ue=>i.jsx("option",{value:ue,children:ue},ue))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:ue=>f(ue.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:A===0?"":A,onChange:ue=>{const se=String(ue.target.value||"").replace(",","."),Ee=parseFloat(se);h(Number.isFinite(Ee)?Math.max(0,Ee):0)},placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:ue=>p(ue.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:ue=>v(ue.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),i.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:te,children:"Limpiar"})]})]})}),i.jsx("div",{className:"block md:hidden space-y-3",children:w?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):R.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin gastos en el rango seleccionado."}):R.map(ue=>{const se=U===ue.id,Ee=S===ue.id;return i.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full text-left px-3 py-3 flex items-start justify-between bg-white",onClick:()=>Z(ue.id),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:ue.description}),i.jsxs("div",{className:"text-xs text-gray-500",children:[ue.category||"","  ",ue.date]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-bold",children:rx(ue.amount)}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ie(ue.status)}`,children:ue.status})]})]}),se&&i.jsxs("div",{className:"p-3",children:[i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:ue.notes?ue.notes:""}),Ee?i.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm",children:[i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:F,onChange:je=>P(je.target.value)}),i.jsxs("select",{className:"w-full border p-2 rounded",value:k,onChange:je=>D(je.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),BC.map(je=>i.jsx("option",{value:je,children:je},je))]}),i.jsx("input",{className:"w-full border p-2 rounded",value:J,onChange:je=>fe(je.target.value)}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(Ae)?"":Ae,onChange:je=>{const it=String(je.target.value||"").replace(",","."),At=parseFloat(it);me(Number.isFinite(At)?Math.max(0,At):0)}}),i.jsxs("select",{className:"w-full border p-2 rounded",value:pe,onChange:je=>ne(je.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Pe,onChange:je=>Be(je.target.value),maxLength:500}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Ge,children:"Cancelar"})]})]}):i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Q(ue),children:"Editar"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ee(ue),children:"Borrar"})]})]})]},ue.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded-2xl shadow-2xl border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:w?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):R.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):R.map(ue=>{const se=S===ue.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:se?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:F,onChange:Ee=>P(Ee.target.value)}):ue.date}),i.jsx("td",{className:"p-2 border",children:se?i.jsxs("select",{className:"w-full border p-1 rounded",value:k,onChange:Ee=>D(Ee.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),BC.map(Ee=>i.jsx("option",{value:Ee,children:Ee},Ee))]}):ue.category||""}),i.jsx("td",{className:"p-2 border",children:se?i.jsx("input",{className:"w-full border p-1 rounded",value:J,onChange:Ee=>fe(Ee.target.value)}):i.jsx("span",{title:ue.description,children:ue.description.length>45?ue.description.slice(0,45)+"":ue.description})}),i.jsx("td",{className:"p-2 border",children:se?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ae)?"":Ae,onChange:Ee=>{const je=String(Ee.target.value||"").replace(",","."),it=parseFloat(je);me(Number.isFinite(it)?Math.max(0,it):0)}}):rx(ue.amount)}),i.jsx("td",{className:"p-2 border",children:se?i.jsxs("select",{className:"w-full border p-1 rounded",value:pe,onChange:Ee=>ne(Ee.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ie(ue.status)}`,children:ue.status})}),i.jsx("td",{className:"p-2 border",children:se?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:Pe,onChange:Ee=>Be(Ee.target.value),maxLength:500}):i.jsx("span",{title:ue.notes||"",children:(ue.notes||"").length>45?(ue.notes||"").slice(0,45)+"":ue.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:se?i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ge,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Q(ue),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ee(ue),children:"Borrar"})]})})})]},ue.id)})})]})}),I&&i.jsx("p",{className:"mt-2 text-sm",children:I})]})}function ES(t){return(t||"").trim().toLowerCase()}async function Pre(){const t=await Qt(bt(Oe,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),a=ES(n.name??n.productName);a&&e.set(a,r.id)}),e}async function Y4e(t=!1){const e=await Pre(),r=await Qt(bt(Oe,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const a of r.docs){n.checked++;const s=a.data(),o=ES(s.productName);if(!o){n.missingName++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"missingName"});continue}const l=e.get(o);if(!l){n.withoutMatch++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"withoutMatch"});continue}if(s.productId===l){n.alreadyOk++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"alreadyOk"});continue}t||await pn(zt(Oe,"inventory_batches",a.id),{productId:l}),n.fixed++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function J4e(t,e=!1){const r=ES(t),a=(await Pre()).get(r);if(!a)throw new Error(`No existe un producto activo con nombre "${t}".`);const s=await Qt(bt(Oe,"inventory_batches"));let o=0;for(const l of s.docs){const c=l.data();ES(c.productName)===r&&c.productId!==a&&(e||await pn(zt(Oe,"inventory_batches",l.id),{productId:a}),o++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${o} lote(s)`),o}function Z4e(){const[t,e]=x.useState(!1),[r,n]=x.useState(""),a=async()=>{try{e(!0),n("");const c=await Y4e(!1);n(` Hecho. Revisados: ${c.checked}, Corregidos: ${c.fixed}, Ok: ${c.alreadyOk}, Sin nombre: ${c.missingName}, Sin match: ${c.withoutMatch}. (Mira consola para detalles)`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}},[s,o]=x.useState(""),l=async()=>{if(!s.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const c=await J4e(s.trim(),!1);n(` Hecho. Corregidos ${c} lote(s) para "${s}".`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}};return i.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[i.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",i.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),i.jsx("div",{className:"space-y-2",children:i.jsx("button",{onClick:a,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),i.jsx("hr",{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),i.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:s,onChange:c=>o(c.target.value)}),i.jsx("button",{onClick:l,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&i.jsx("p",{className:"text-sm",children:r})]})}const zc=t=>`C$${Number(t||0).toFixed(2)}`,nx=t=>Number(t||0).toFixed(3),ePe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),u5=()=>{const t=new Date;return Ir(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},TC=()=>Ir(new Date,"yyyy-MM-dd");function tPe({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=x.useState(u5()),[o,l]=x.useState(TC()),[c,u]=x.useState(""),d=x.useMemo(()=>{const xe=new Map;return n.forEach(de=>xe.set(de.productId,{id:de.productId,name:de.productName})),Array.from(xe.values()).sort((de,Ue)=>de.name.localeCompare(Ue.name))},[n]),f=x.useMemo(()=>n.filter(xe=>!(a&&xe.date<a||o&&xe.date>o||c&&xe.productId!==c)),[n,a,o,c]),[A,h]=x.useState(TC()),[m,p]=x.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[g,v]=x.useState(""),[y,b]=x.useState([]);x.useEffect(()=>{b(xe=>{const de=xe.filter(Ue=>f.some(Ke=>Ke.id===Ue));return de.length===0&&f.length>0?f.map(Ue=>Ue.id):de})},[f]);const[w,j]=x.useState([]),[I,_]=x.useState([]),[S,E]=x.useState(!1),[F,P]=x.useState(u5()),[k,D]=x.useState(TC());x.useEffect(()=>{(async()=>{try{E(!0);const xe=nr(bt(Oe,"expenses"),xn("date","desc")),de=await Qt(xe),Ue=[];de.forEach(Ke=>{const Ne=Ke.data();Ue.push({id:Ke.id,date:Ne.date,description:Ne.description,amount:Number(Ne.amount||0)})}),j(Ue)}catch(xe){console.error(xe)}finally{E(!1)}})()},[]);const J=x.useMemo(()=>w.filter(xe=>!(!xe.date||F&&xe.date<F||k&&xe.date>k)),[w,F,k]),[fe,Ae]=x.useState([]),[me,pe]=x.useState(!1),[ne,Pe]=x.useState(""),[Be,O]=x.useState("DEBITO"),[G,q]=x.useState(""),U=()=>{const xe=Number(G);!ne.trim()||!isFinite(xe)||xe<=0||(Ae(de=>[...de,{id:`${Date.now()}_${de.length+1}`,description:ne.trim(),type:Be,amount:Number(xe.toFixed(2))}]),Pe(""),q(""))},[Y,Z]=x.useState(null),[R,H]=x.useState(""),[te,ye]=x.useState("DEBITO"),[Q,Ge]=x.useState(""),ie=xe=>{Z(xe.id),H(xe.description),ye(xe.type),Ge(xe.amount.toFixed(2))},ee=()=>{Z(null),H(""),ye("DEBITO"),Ge("")},Ie=()=>{if(!Y)return;const xe=Number(Q);!isFinite(xe)||xe<=0||(Ae(de=>de.map(Ue=>Ue.id===Y?{...Ue,description:R.trim(),type:te,amount:Number(xe.toFixed(2))}:Ue)),ee())},ue=xe=>{Ae(de=>de.filter(Ue=>Ue.id!==xe)),Y===xe&&ee()},se=(xe,de)=>{b(Ue=>de?[...new Set([...Ue,xe])]:Ue.filter(Ke=>Ke!==xe))},Ee=xe=>{b(xe?f.map(de=>de.id):[])},je=(xe,de)=>{_(Ue=>de?[...new Set([...Ue,xe])]:Ue.filter(Ke=>Ke!==xe))},it=x.useMemo(()=>f.filter(xe=>y.includes(xe.id)),[f,y]),At=x.useMemo(()=>fe.filter(xe=>xe.type==="DEBITO").reduce((xe,de)=>xe+de.amount,0),[fe]),pt=x.useMemo(()=>fe.filter(xe=>xe.type==="CREDITO").reduce((xe,de)=>xe+de.amount,0),[fe]),yt=x.useMemo(()=>{let xe=0,de=0,Ue=0,Ke=0;for(const wt of it){ePe(wt.unit)?xe+=Number(wt.quantity||0):de+=Number(wt.quantity||0);const we=wt.expectedTotal??Number((Number(wt.quantity||0)*Number(wt.salePrice||0)).toFixed(2)),ae=wt.invoiceTotal!==void 0&&wt.invoiceTotal!==null?Number(wt.invoiceTotal):Number((Number(wt.quantity||0)*Number(wt.purchasePrice||0)).toFixed(2));Ue+=Number(we||0),Ke+=Number(ae||0)}const Ne=J.filter(wt=>I.includes(wt.id)).reduce((wt,we)=>wt+Number(we.amount||0),0),mt=Ue-Ne-At+pt;return{totalLbs:xe,totalUnits:de,totalExpected:Number(Ue.toFixed(2)),totalInvoiced:Number(Ke.toFixed(2)),totalGastos:Number(Ne.toFixed(2)),debits:Number(At.toFixed(2)),credits:Number(pt.toFixed(2)),finalAmount:Number(mt.toFixed(2)),grossProfit:Number((Ue-Ke).toFixed(2))}},[it,J,I,At,pt]),[Ct,Et]=x.useState(!1),[Re,We]=x.useState(""),et=async()=>{if(We(""),it.length===0){We("Selecciona al menos 1 lote pagado.");return}try{Et(!0);const xe={number:m.trim(),date:A,description:g.trim(),status:"PENDIENTE",createdAt:ur.now(),totalLbs:Number(nx(yt.totalLbs)),totalUnits:Number(nx(yt.totalUnits)),totalAmount:yt.totalExpected,invoiceTotal:yt.totalInvoiced,totalExpenses:yt.totalGastos,totalDebits:yt.debits,totalCredits:yt.credits,finalAmount:yt.finalAmount,batches:it.map(de=>{var Ue;return{id:de.id,productId:de.productId,productName:de.productName,unit:de.unit,quantity:Number(nx(de.quantity)),salePrice:Number(Number(de.salePrice||0).toFixed(2)),purchasePrice:Number(Number(de.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(de.quantity||0)*Number(de.salePrice||0)).toFixed(2)),invoiceTotal:de.invoiceTotal!==void 0&&de.invoiceTotal!==null?Number(de.invoiceTotal):Number((Number(de.quantity||0)*Number(de.purchasePrice||0)).toFixed(2)),batchDate:de.date,paidAt:(Ue=de.paidAt)!=null&&Ue.toDate?Ir(de.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:J.filter(de=>I.includes(de.id)).map(de=>({id:de.id,date:de.date||null,description:de.description||"",amount:Number(Number(de.amount||0).toFixed(2))})),adjustments:fe.map(de=>({id:de.id,description:de.description,type:de.type,amount:Number(de.amount.toFixed(2))}))};await Bn(bt(Oe,"invoices"),xe),We(" Factura creada."),r()}catch(xe){console.error(xe),We(` Error al crear factura: ${(xe==null?void 0:xe.message)||"desconocido"}`)}finally{Et(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),i.jsx("button",{type:"button",onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:A,onChange:xe=>h(xe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:m,onChange:xe=>p(xe.target.value),placeholder:"FAC-001"})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:g,onChange:xe=>v(xe.target.value),placeholder:"Comentarios de la factura"})]})]}),i.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:i.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:xe=>s(xe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:o,onChange:xe=>l(xe.target.value)})]}),i.jsxs("div",{className:"min-w-[220px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:c,onChange:xe=>u(xe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),d.map(xe=>i.jsx("option",{value:xe.id,children:xe.name},xe.id))]})]}),i.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{s(u5()),l(TC()),u("")},children:"Quitar filtro"})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),i.jsxs("label",{className:"text-sm flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:f.length>0&&y.length===f.length,onChange:xe=>Ee(xe.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),f.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):i.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha lote"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Cantidad"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),i.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),i.jsx("tbody",{children:f.map(xe=>{var mt;const de=y.includes(xe.id),Ue=xe.expectedTotal??Number((Number(xe.quantity||0)*Number(xe.salePrice||0)).toFixed(2)),Ke=xe.invoiceTotal!==void 0&&xe.invoiceTotal!==null?Number(xe.invoiceTotal):Number((Number(xe.quantity||0)*Number(xe.purchasePrice||0)).toFixed(2)),Ne=Ue-Ke;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:de,onChange:wt=>se(xe.id,wt.target.checked)})}),i.jsx("td",{className:"p-2 border",children:xe.date}),i.jsx("td",{className:"p-2 border",children:xe.productName}),i.jsx("td",{className:"p-2 border",children:(xe.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:nx(xe.quantity)}),i.jsx("td",{className:"p-2 border",children:zc(xe.salePrice)}),i.jsx("td",{className:"p-2 border",children:zc(Ke)}),i.jsx("td",{className:"p-2 border",children:zc(Ue)}),i.jsx("td",{className:"p-2 border",children:zc(Ne)}),i.jsx("td",{className:"p-2 border",children:(mt=xe.paidAt)!=null&&mt.toDate?Ir(xe.paidAt.toDate(),"yyyy-MM-dd"):""})]},xe.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),S&&i.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),i.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:F,onChange:xe=>P(xe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:k,onChange:xe=>D(xe.target.value)})]})]})]}),J.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):i.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:J.map(xe=>{const de=I.includes(xe.id);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:de,onChange:Ue=>je(xe.id,Ue.target.checked)})}),i.jsx("td",{className:"p-2 border",children:xe.date||""}),i.jsx("td",{className:"p-2 border",children:xe.description||""}),i.jsx("td",{className:"p-2 border",children:zc(Number(xe.amount||0))})]},xe.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),i.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>pe(!0),children:"Crear Cargo"})]}),fe.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):i.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:fe.map(xe=>{const de=Y===xe.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:de?i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:R,onChange:Ue=>H(Ue.target.value)}):i.jsx("span",{title:xe.description,children:xe.description.length>60?`${xe.description.slice(0,60)}`:xe.description})}),i.jsx("td",{className:"p-2 border",children:de?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:te,onChange:Ue=>ye(Ue.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${xe.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:xe.type})}),i.jsx("td",{className:"p-2 border",children:de?i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Q,onChange:Ue=>Ge(Ue.target.value)}):zc(xe.amount)}),i.jsx("td",{className:"p-2 border",children:de?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:Ie,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:ee,children:"Cancelar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ue(xe.id),children:"Eliminar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>ie(xe),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ue(xe.id),children:"Eliminar"})]})})]},xe.id)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total libras: ",i.jsx("strong",{children:nx(yt.totalLbs)})]}),i.jsxs("div",{children:["Total unidades: ",i.jsx("strong",{children:nx(yt.totalUnits)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total facturado (costo):"," ",i.jsx("strong",{children:zc(yt.totalInvoiced)})]}),i.jsxs("div",{children:["Total esperado (ventas):"," ",i.jsx("strong",{children:zc(yt.totalExpected)})]}),i.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",i.jsx("strong",{children:zc(yt.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:zc(yt.totalGastos)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:zc(yt.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:zc(yt.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",i.jsx("span",{className:"text-blue-700",children:zc(yt.finalAmount)})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:Ct,onClick:et,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Ct?"Creando":"Crear factura"}),i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Re&&i.jsx("span",{className:"text-sm ml-2",children:Re})]}),Ct&&i.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),me&&i.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),i.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>pe(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:ne,onChange:xe=>Pe(xe.target.value),placeholder:"Detalle del cargo"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Be,onChange:xe=>O(xe.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:G,onChange:xe=>q(xe.target.value),placeholder:"0.00"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:U,children:"Agregar"})})]})]})})]})}const ku=t=>`C$ ${Number(t||0).toFixed(2)}`,hc=t=>Number(t||0).toFixed(3),rPe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function nPe(){const[t,e]=x.useState([]),[r,n]=x.useState(!0),[a,s]=x.useState(!1),[o,l]=x.useState(null),[c,u]=x.useState(Ir(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[d,f]=x.useState(Ir(new Date,"yyyy-MM-dd")),[A,h]=x.useState(""),[m,p]=x.useState(!1),{refreshKey:g,refresh:v}=kc(),[y,b]=x.useState(!1),w=()=>b(D=>!D),[j,I]=x.useState(null),_=D=>I(J=>J===D?null:D);x.useEffect(()=>{(async()=>{n(!0);const D=nr(bt(Oe,"inventory_batches"),sr("status","==","PAGADO"),xn("date","desc")),J=await Qt(D),fe=[];J.forEach(Ae=>{const me=Ae.data(),pe=Number(me.quantity||0),ne=Number(me.remaining||0),Pe=Number(me.purchasePrice||0),Be=Number(me.salePrice||0),O=Number((pe*Pe).toFixed(2)),G=Number((pe*Be).toFixed(2));fe.push({id:Ae.id,productId:me.productId,productName:me.productName,category:me.category,unit:me.unit,quantity:pe,remaining:ne,purchasePrice:Pe,salePrice:Be,invoiceTotal:me.invoiceTotal!=null?Number(me.invoiceTotal):O,expectedTotal:me.expectedTotal!=null?Number(me.expectedTotal):G,date:me.date,status:me.status,paidAt:me.paidAt})}),e(fe),n(!1)})()},[g]);const S=x.useMemo(()=>t.filter(D=>!(c&&D.date<c||d&&D.date>d||A&&D.productId!==A)),[t,c,d,A]),E=x.useMemo(()=>{let D=0,J=0,fe=0,Ae=0,me=0,pe=0;for(const ne of S)rPe(ne.unit)?(D+=ne.quantity,J+=ne.remaining):(fe+=ne.quantity,Ae+=ne.remaining),me+=Number(ne.expectedTotal||0),pe+=Number(ne.invoiceTotal||0);return{lbsIng:D,lbsRem:J,udsIng:fe,udsRem:Ae,totalEsperado:me,totalFact:pe,gross:me-pe}},[S]),F=D=>{l(D),s(!0)},P=async()=>{if(o)try{const D=zt(Oe,"inventory_batches",o.id);await pn(D,{status:"PENDIENTE",remaining:o.quantity});const J=bt(Oe,"salesV2"),fe=await Qt(nr(J,sr("batchId","==",o.id))),Ae=await Qt(nr(J,sr("productName","==",o.productName),sr("date","==",o.date))),me=[...fe.docs,...Ae.docs];for(const pe of me)await Pn(zt(Oe,"salesV2",pe.id));s(!1),l(null),v()}catch(D){console.error("Error al marcar pendiente:",D)}},k=x.useMemo(()=>{const D=new Map;return t.forEach(J=>D.set(J.productId,{id:J.productId,name:J.productName})),Array.from(D.values()).sort((J,fe)=>J.name.localeCompare(fe.name))},[t]);return i.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),i.jsx(Tc,{onClick:v,loading:r})]}),i.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:D=>u(D.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:D=>f(D.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:D=>h(D.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),k.map(D=>i.jsx("option",{value:D.id,children:D.name},D.id))]})]}),i.jsx("button",{type:"button",className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h("")},children:"Quitar filtro"})]}),i.jsx("button",{type:"button",className:"sm:ml-auto px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>p(!0),children:"Crear factura"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"md:hidden",children:[i.jsxs("button",{type:"button",onClick:w,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Totales"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Libras: ",i.jsx("b",{children:hc(E.lbsIng)}),"  Restantes:"," ",i.jsx("b",{children:hc(E.lbsRem)})]})]}),i.jsx("div",{className:"text-gray-500",children:y?"":""})]}),y&&i.jsx("div",{className:"mt-3 bg-gray-50 p-3 rounded-2xl shadow-2xl border text-base",children:i.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",hc(E.lbsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",hc(E.udsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",ku(E.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",hc(E.lbsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",hc(E.udsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",ku(E.totalFact)]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",ku(E.gross)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",S.length.toLocaleString()]})]})})]}),i.jsx("div",{className:"hidden md:block bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",hc(E.lbsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",hc(E.udsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",ku(E.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",hc(E.lbsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",hc(E.udsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",ku(E.totalFact)]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",ku(E.gross)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",S.length.toLocaleString()]})]})})]}),i.jsx("div",{className:"block md:hidden space-y-3",children:r?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):S.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin lotes pagados"}):S.map(D=>{var fe;const J=j===D.id;return i.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>_(D.id),className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:D.productName}),i.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[(D.category||"").toUpperCase(),"  ",D.date," "," ",(D.unit||"").toUpperCase()]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-bold",children:ku(D.expectedTotal||0)}),i.jsx("div",{className:"text-[11px] text-gray-500",children:J?"Detalles":"Esperado"})]})]}),J&&i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ingresado"}),i.jsx("div",{className:"font-semibold",children:hc(D.quantity)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:hc(D.remaining)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Costo"}),i.jsx("div",{className:"font-semibold",children:ku(D.invoiceTotal||0)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Fecha pago"}),i.jsx("div",{className:"font-semibold",children:(fe=D.paidAt)!=null&&fe.toDate?Ir(D.paidAt.toDate(),"yyyy-MM-dd"):""})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>F(D),children:"Marcar PENDIENTE"})})]})]},D.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow-2xl border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Ingresado"}),i.jsx("th",{className:"p-2 border",children:"Restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Compra"}),i.jsx("th",{className:"p-2 border",children:"Precio Venta"}),i.jsx("th",{className:"p-2 border",children:"Total factura"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Fecha pago"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):S.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):S.map(D=>{var J;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:D.date}),i.jsx("td",{className:"p-2 border",children:(D.category||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:D.productName}),i.jsx("td",{className:"p-2 border",children:(D.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:hc(D.quantity)}),i.jsx("td",{className:"p-2 border",children:hc(D.remaining)}),i.jsx("td",{className:"p-2 border",children:ku(D.purchasePrice)}),i.jsx("td",{className:"p-2 border",children:ku(D.salePrice)}),i.jsx("td",{className:"p-2 border",children:ku(D.invoiceTotal||0)}),i.jsx("td",{className:"p-2 border",children:ku(D.expectedTotal||0)}),i.jsx("td",{className:"p-2 border",children:(J=D.paidAt)!=null&&J.toDate?Ir(D.paidAt.toDate(),"yyyy-MM-dd"):""}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>F(D),children:"Marcar PENDIENTE"})})]},D.id)})})]})}),m&&i.jsx(tPe,{paidBatches:t,onClose:()=>p(!1),onCreated:()=>p(!1)}),a&&o&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-3",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),i.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",i.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded-xl",children:"Confirmar"})]})]})})]})}const po=t=>`C$ ${(Number(t)||0).toFixed(2)}`,aPe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function kC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function sPe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function iPe(t){const e="ROP",r=kC(t.subcat).slice(0,3)||"GEN",n=sPe(t.gender),a=kC(t.color).slice(0,3)||"COL",s=kC(t.size)||"TLL",o=kC(t.brand).slice(0,4)||"BRD",l=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${a}-${s}-${o}-${l}`}const cy=/^[A-Za-z0-9._-]{0,32}$/;function oPe(){const[t,e]=x.useState([]),[r,n]=x.useState([]),[a,s]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState(Ir(af(new Date),"yyyy-MM-dd")),[d,f]=x.useState(Ir(nf(new Date),"yyyy-MM-dd")),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState(Ir(new Date,"yyyy-MM-dd")),[y,b]=x.useState(0),[w,j]=x.useState(0),[I,_]=x.useState(0),[S,E]=x.useState(0),[F,P]=x.useState(0),[k,D]=x.useState(""),[J,fe]=x.useState(""),[Ae,me]=x.useState(""),[pe,ne]=x.useState(""),[Pe,Be]=x.useState(""),[O,G]=x.useState(""),[q,U]=x.useState(""),[Y,Z]=x.useState(!1),[R,H]=x.useState(""),[te,ye]=x.useState("Camisa"),[Q,Ge]=x.useState(null),[ie,ee]=x.useState(""),[Ie,ue]=x.useState(0),[se,Ee]=x.useState(0),[je,it]=x.useState(0),[At,pt]=x.useState(0),[yt,Ct]=x.useState(0),[Et,Re]=x.useState(""),[We,et]=x.useState(""),[xe,de]=x.useState(""),[Ue,Ke]=x.useState(""),[Ne,mt]=x.useState(""),[wt,we]=x.useState(""),[ae,be]=x.useState(""),[ve,Ve]=x.useState(null),[ce,ke]=x.useState({x:0,y:0}),[dt,ft]=x.useState(!1);x.useEffect(()=>{const M=()=>Ve(null),L=K=>K.key==="Escape"&&Ve(null);return document.addEventListener("click",M),document.addEventListener("keydown",L),()=>{document.removeEventListener("click",M),document.removeEventListener("keydown",L)}},[]);const gt=(M,L,K=192,re=160)=>{let Me=M;M+K+8>window.innerWidth&&(Me=M-K),Me=Math.max(8,Math.min(Me,window.innerWidth-K-8));let qe=L;return L+re+8>window.innerHeight&&(qe=window.innerHeight-re-8),qe=Math.max(8,Math.min(qe,window.innerHeight-re-8)),{x:Me,y:qe}},Rt=(M,L)=>{M.stopPropagation();const K=M.currentTarget.getBoundingClientRect(),re=K.right,le=K.bottom,Me=gt(re,le);ke(Me),Ve(qe=>qe===L?null:L)};x.useEffect(()=>{const M=()=>Ve(null),L=K=>{K.key==="Escape"&&Ve(null)};return document.addEventListener("click",M),document.addEventListener("keydown",L),()=>{document.removeEventListener("click",M),document.removeEventListener("keydown",L)}},[]),x.useEffect(()=>{if(!ve)return;const M=()=>Ve(null);return window.addEventListener("scroll",M,!0),window.addEventListener("resize",M),()=>{window.removeEventListener("scroll",M,!0),window.removeEventListener("resize",M)}},[ve]),x.useEffect(()=>{(async()=>{const M=await Qt(bt(Oe,"products_clothes")),L=[];M.forEach(Me=>{const qe=Me.data();L.push({id:Me.id,name:qe.name??"(sin nombre)",category:qe.category??"(sin categora)",measurement:qe.measurement??"unidad",price:Number(qe.price??0),sku:qe.sku||"",size:qe.size||"",color:qe.color||"",gender:qe.gender||"",brand:qe.brand||""})}),e(L);const K=nr(bt(Oe,"inventory_clothes_batches"),xn("date","desc")),re=await Qt(K),le=[];re.forEach(Me=>{const qe=Me.data();le.push({id:Me.id,productId:qe.productId,productName:qe.productName,category:qe.category,unit:qe.unit,quantity:Number(qe.quantity||0),remaining:Number(qe.remaining??qe.quantity??0),purchasePrice:Number(qe.purchasePrice||0),salePrice:Number(qe.salePrice||0),invoiceTotal:Number(qe.invoiceTotal??Number(qe.quantity||0)*Number(qe.purchasePrice||0)),expectedTotal:Number(qe.expectedTotal??Number(qe.quantity||0)*Number(qe.salePrice||0)),date:qe.date,createdAt:qe.createdAt,status:qe.status,notes:qe.notes||"",sku:qe.sku||"",size:qe.size||"",color:qe.color||"",gender:qe.gender||"",brand:qe.brand||"",clientCode:qe.clientCode||""})}),n(le),s(!1)})()},[]),x.useEffect(()=>{const M=t.find(L=>L.id===m);M&&(_(Number(M.price||0)),M.sku&&fe(M.sku),M.size&&me(L=>L||M.size),M.color&&ne(L=>L||M.color),M.gender&&Be(L=>L||M.gender),M.brand&&G(L=>L||M.brand))},[m,t]),x.useEffect(()=>{E(Math.floor(y*w*100)/100)},[y,w]),x.useEffect(()=>{P(Math.floor(y*I*100)/100)},[y,I]),x.useEffect(()=>{const M=t.find(re=>re.id===m);if(M!=null&&M.sku){fe(M.sku);return}const L=Y&&te?te:(M==null?void 0:M.category)||"";if(!L&&!Pe&&!pe&&!Ae&&!O){fe("");return}const K=iPe({subcat:L,gender:Pe||"",color:pe||"",size:Ae||"",brand:O||""});fe(K)},[Y,te,m,Pe,pe,Ae,O,t]);const ot=x.useMemo(()=>r.filter(M=>!(c&&M.date<c||d&&M.date>d||A&&M.productId!==A)),[r,c,d,A]),Se=x.useMemo(()=>{const M=ot.reduce((le,Me)=>le+(Me.invoiceTotal||0),0),L=ot.reduce((le,Me)=>le+(Me.expectedTotal||0),0),K=ot.reduce((le,Me)=>le+Me.quantity,0),re=ot.reduce((le,Me)=>le+Me.remaining,0);return{udsIng:K,udsRem:re,totalFacturado:M,totalEsperado:L}},[ot]),ht=async M=>{M.preventDefault(),l("");const L=!!m&&!Y,K=t.find(qe=>qe.id===m),re=L?(K==null?void 0:K.name)||"":R||"",le=L?(K==null?void 0:K.category)||"":te||"General",Me=L&&(K==null?void 0:K.measurement)||"unidad";if(!re||y<=0||w<=0){l("Completa nombre/cantidad/costo.");return}if(q&&!cy.test(q)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const qe=await Bn(bt(Oe,"inventory_clothes_batches"),{productId:L?K.id:"",productName:re,category:le,unit:Me,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:S,expectedTotal:F,date:g,createdAt:ur.now(),status:"PENDIENTE",notes:k||"",sku:J||"",size:Ae||"",color:pe||"",gender:Pe||"",brand:O||"",clientCode:q||""});n(lt=>[{id:qe.id,productId:L?K.id:"",productName:re,category:le,unit:Me,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:S,expectedTotal:F,date:g,createdAt:ur.now(),status:"PENDIENTE",notes:k||"",sku:J||"",size:Ae||"",color:pe||"",gender:Pe||"",brand:O||"",clientCode:q||""},...lt]),l(" Lote de ropa creado"),p(""),v(Ir(new Date,"yyyy-MM-dd")),b(0),j(0),_(0),E(0),P(0),D(""),fe(""),me(""),ne(""),Be(""),G(""),U(""),Z(!1),H(""),ye("Camisa")}catch(qe){console.error(qe),l(" Error al crear lote")}},W=async M=>{confirm(`Marcar PAGADO el lote del ${M.date} (${M.productName})?`)&&(await pn(zt(Oe,"inventory_clothes_batches",M.id),{status:"PAGADO"}),n(K=>K.map(re=>re.id===M.id?{...re,status:"PAGADO"}:re)))},Te=M=>{Ge(M.id),ee(M.date),ue(M.quantity),Ee(M.purchasePrice),it(M.salePrice),pt(Number((M.quantity*M.purchasePrice).toFixed(2))),Ct(Number((M.quantity*M.salePrice).toFixed(2))),Re(M.notes||""),et(M.sku||""),de(M.size||""),Ke(M.color||""),mt(M.gender||""),we(M.brand||""),be(M.clientCode||"")},Ze=()=>{Ge(null),ee(""),ue(0),Ee(0),it(0),pt(0),Ct(0),Re(""),et(""),de(""),Ke(""),mt(""),we(""),be("")};x.useEffect(()=>{Q&&pt(Math.floor(Ie*se*100)/100)},[Q,Ie,se]),x.useEffect(()=>{Q&&Ct(Math.floor(Ie*je*100)/100)},[Q,Ie,je]);const tt=async()=>{if(!Q)return;const M=r.find(le=>le.id===Q);if(!M)return;const L=Math.max(0,M.quantity-M.remaining),K=Math.max(0,Ie-L);if(ae&&!cy.test(ae)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const re=zt(Oe,"inventory_clothes_batches",Q);await pn(re,{date:ie,quantity:Ie,purchasePrice:se,salePrice:je,invoiceTotal:At,expectedTotal:yt,notes:Et,remaining:K,sku:We,size:xe,color:Ue,gender:Ne||"",brand:wt||"",clientCode:ae||""}),n(le=>le.map(Me=>Me.id===Q?{...Me,date:ie,quantity:Ie,purchasePrice:se,salePrice:je,invoiceTotal:At,expectedTotal:yt,notes:Et,remaining:K,sku:We,size:xe,color:Ue,gender:Ne||"",brand:wt||"",clientCode:ae||""}:Me)),Ze(),l(" Lote actualizado")},ut=async M=>{confirm(`Eliminar el lote del ${M.date} (${M.productName})?`)&&(await Pn(zt(Oe,"inventory_clothes_batches",M.id)),n(K=>K.filter(re=>re.id!==M.id)),l(" Lote eliminado"))},T=()=>{const M=(c?`Desde ${c}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),L=Me=>(Me||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),K=ot.map(Me=>`
      <tr>
        <td>${Me.date}</td>
        <td>${(Me.category||"").toUpperCase()}</td>
        <td>${L(Me.productName)}</td>
        <td>${L(Me.sku||"")}</td>
        <td>${L(Me.size||"")}</td>
        <td>${L(Me.color||"")}</td>
        <td>${L(Me.clientCode||"")}</td>
        <td>${L(Me.gender||"")}</td>
        <td>${(Me.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${Me.quantity.toFixed(0)}</td>
        <td style="text-align:right">${Me.remaining.toFixed(0)}</td>
        <td style="text-align:right">${po(Me.purchasePrice)}</td>
        <td style="text-align:right">${po(Me.salePrice)}</td>
        <td style="text-align:right">${po(Me.invoiceTotal||0)}</td>
        <td style="text-align:right">${po(Me.expectedTotal||0)}</td>
        <td>${L((Me.notes||"").slice(0,120))}</td>
        <td>${Me.status}</td>
      </tr>`).join(""),re=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${M}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${Se.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${Se.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${po(Se.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${po(Se.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${po(Number((Se.totalEsperado-Se.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${K||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,le=window.open("","_blank");le&&(le.document.open(),le.document.write(re),le.document.close())};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ft(!0),type:"button",children:"Crear Inventario"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:M=>u(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:M=>f(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:M=>h(M.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),t.map(M=>i.jsxs("option",{value:M.id,children:[M.name,"  ",M.category]},M.id))]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h("")},children:"Quitar filtro"}),i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:T,children:"Imprimir PDF"})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Se.udsIng.toFixed(0)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Se.udsRem.toFixed(0)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",po(Se.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",po(Se.totalFacturado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",po(Number((Se.totalEsperado-Se.totalFacturado).toFixed(2)))]})]})}),i.jsx("div",{className:"bg-white rounded shadow border",children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),i.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):ot.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):ot.map(M=>{const L=Q===M.id;return i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 md:p-3 border align-top",children:L?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ie,onChange:K=>ee(K.target.value)}):M.date}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(M.category||"").toUpperCase()}),i.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:i.jsx("span",{className:"block truncate",title:M.productName,children:M.productName})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:We,onChange:K=>et(K.target.value)}):i.jsx("span",{className:"block truncate",title:M.sku||"",children:M.sku||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:xe,onChange:K=>de(K.target.value)}):M.size||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:Ue,onChange:K=>Ke(K.target.value)}):M.color||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:ae,onChange:K=>{const re=K.target.value;cy.test(re)&&be(re)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):i.jsx("span",{className:"block truncate",title:M.clientCode||"",children:M.clientCode||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:L?i.jsx("select",{className:"w-full border p-1 rounded",value:Ne,onChange:K=>mt(K.target.value),children:aPe.map(K=>i.jsx("option",{value:K,children:K||""},K))}):M.gender||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(M.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:L?i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(Ie)?"":Ie,onChange:K=>ue(Math.max(0,parseInt(K.target.value||"0",10)))}):M.quantity.toFixed(0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:L?M.remaining:M.remaining.toFixed(0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:L?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(se)?"":se,onChange:K=>Ee(Math.max(0,parseFloat(K.target.value||"0")))}):po(M.purchasePrice)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:L?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(je)?"":je,onChange:K=>it(Math.max(0,parseFloat(K.target.value||"0")))}):po(M.salePrice)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:po(L?At:M.invoiceTotal||0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:po(L?yt:M.expectedTotal||0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:L?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:Et,onChange:K=>Re(K.target.value),maxLength:500}):i.jsx("span",{className:"block truncate",title:M.notes||"",children:M.notes||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${M.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:M.status})}),i.jsx("td",{className:"p-2 md:p-3 border align-top",children:L?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:tt,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ze,children:"Cancelar"})]}):i.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:K=>Rt(K,M.id),children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),i.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),i.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},M.id)})})]})})}),ve&&uu.createPortal(i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>Ve(null),className:"fixed inset-0 z-[60]"}),i.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:ce.x,top:ce.y},onClick:M=>M.stopPropagation(),role:"menu","aria-orientation":"vertical",children:i.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const M=ot.find(L=>L.id===ve);return(M==null?void 0:M.status)==="PENDIENTE"?i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{Ve(null),W(M)},children:" Pagar"}):null})(),i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const M=ot.find(L=>L.id===ve);M&&(Ve(null),Te(M))},children:" Editar"}),i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const M=ot.find(L=>L.id===ve);M&&(Ve(null),ut(M))},children:" Borrar"})]})})]}),document.body),dt&&uu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ft(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ft(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:ht,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:M=>p(M.target.value),children:[i.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(M=>i.jsxs("option",{value:M.id,children:[M.name,"  ",M.category,"  ",M.sku?`SKU: ${M.sku}`:""]},M.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:g,onChange:M=>v(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:M=>b(Math.max(0,parseInt(M.target.value||"0",10))),placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:M=>j(Math.max(0,parseFloat(M.target.value||"0")))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:I===0?"":I,onChange:M=>_(Math.max(0,parseFloat(M.target.value||"0")))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:J,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Ae,readOnly:!0,onChange:M=>me(M.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:pe,readOnly:!0,onChange:M=>ne(M.target.value),placeholder:"Negro, Azul, Rojo"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Pe,readOnly:!0,onChange:M=>Be(M.target.value),placeholder:"Masculino, Femenino, Otro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:O,onChange:M=>G(M.target.value),placeholder:"Shein, Usado, Otro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:q,onChange:M=>{const L=M.target.value;cy.test(L)&&U(L)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!cy.test(q)&&q.length>0&&i.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:k,onChange:M=>D(M.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[k.length,"/500"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:po(S),readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:po(F),readOnly:!0})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ft(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),o&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const lPe=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],cPe=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],uPe=["XS","S","M","L","XL","2XL"],dPe=["2","4","6","8","10","12","14"],fPe=["26","28","30","32","34","36","38"],hPe=["Shein","Usado","Otro"],APe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function FC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function mPe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function pPe(t){const e="ROP",r=FC(t.subcat).slice(0,3)||"GEN",n=mPe(t.gender),a=FC(t.color).slice(0,3)||"COL",s=FC(t.size)||"TLL",o=FC(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${a}-${s}-${o}`}const gPe=/^[A-Za-z0-9._-]{0,32}$/;function xPe(){const[t,e]=x.useState(""),[r,n]=x.useState("Camisa"),[a,s]=x.useState(""),[o,l]=x.useState(""),[c,u]=x.useState("Shein"),[d,f]=x.useState(""),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState(""),[y,b]=x.useState(""),[w,j]=x.useState("0"),[I,_]=x.useState(""),[S,E]=x.useState(""),F=x.useMemo(()=>{const U=Number(w||0),Y=Number(y||0);return Math.floor(U*Y*100)/100},[w,y]),[P,k]=x.useState([]),[D,J]=x.useState(!0),[fe,Ae]=x.useState(""),{refreshKey:me,refresh:pe}=kc(),[ne,Pe]=x.useState(!1),Be=x.useMemo(()=>r.toLowerCase()==="jean"?fPe:d==="NINO"||d==="NINA"?dPe:uPe,[r,d]);x.useEffect(()=>{p(pPe({subcat:r,gender:d,color:o,size:a,brand:c}))},[r,d,o,a,c]),x.useEffect(()=>{(async()=>{J(!0);const U=nr(bt(Oe,"products_clothes"),xn("createdAt","desc")),Y=await Qt(U),Z=[];Y.forEach(R=>{const H=R.data();Z.push({id:R.id,name:H.name??"(sin nombre)",category:H.category??"",measurement:H.measurement??"unidad",sku:H.sku??"",size:H.size||"",color:H.color||"",brand:H.brand||"",gender:H.gender||"",clientCode:H.clientCode||"",notes:H.notes||"",createdAt:H.createdAt??ur.now()})}),k(Z),J(!1)})()},[me]);const O=()=>{e(""),n("Camisa"),s(""),l(""),u("Shein"),f(""),h(""),v(""),b(""),j("0"),_(""),E("")},G=async U=>{if(U.preventDefault(),Ae(""),!t.trim()){Ae("Ingresa el nombre del producto.");return}if(A&&!gPe.test(A)){Ae("Cdigo del cliente invlido");return}const Y=Number(w||0),Z=Number(y||0);if(Y<0){Ae("La cantidad de piezas debe ser 0 o mayor.");return}if(Z<0){Ae("El precio de venta no puede ser negativo.");return}try{const R=await Bn(bt(Oe,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:o||"",brand:c||"",gender:d||"",clientCode:A||"",notes:g||"",createdAt:ur.now(),price:Z||0});if(k(H=>[{id:R.id,name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:o||"",brand:c||"",gender:d||"",clientCode:A||"",notes:g||"",createdAt:ur.now()},...H]),Y>0){const H=new Date().toISOString().slice(0,10),te=I||H;await Bn(bt(Oe,"inventory_clothes_batches"),{productId:R.id,productName:t.trim(),category:r,unit:"unidad",quantity:Y,remaining:Y,purchasePrice:0,salePrice:Z||0,invoiceTotal:0,expectedTotal:F||0,date:te,createdAt:ur.now(),status:"PENDIENTE",notes:S||"",sku:m||"",size:a||"",color:o||"",gender:d||"",brand:c||"",clientCode:A||""})}Ae(Y>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),O()}catch(R){console.error(R),Ae(" Error al crear producto")}},q=async U=>{confirm(`Eliminar el producto "${U.name}"?`)&&(await Pn(zt(Oe,"products_clothes",U.id)),k(Z=>Z.filter(R=>R.id!==U.id)))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Tc,{onClick:pe,loading:D}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{Pe(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),ne&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),i.jsxs("form",{onSubmit:G,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:U=>e(U.target.value),placeholder:"Ej: Blusa floral"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),i.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:U=>n(U.target.value),children:lPe.map(U=>i.jsx("option",{value:U,children:U},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),i.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:U=>f(U.target.value),children:APe.map(U=>i.jsx("option",{value:U,children:U||""},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:U=>s(U.target.value),children:[i.jsx("option",{value:"",children:""}),Be.map(U=>i.jsx("option",{value:U,children:U},U))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:U=>l(U.target.value),children:[i.jsx("option",{value:"",children:""}),cPe.map(U=>i.jsx("option",{value:U,children:U},U))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),i.jsx("select",{className:"w-full border p-2 rounded",value:c,onChange:U=>u(U.target.value),children:hPe.map(U=>i.jsx("option",{value:U,children:U},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:m,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),i.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:U=>h(U.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:y,onChange:U=>b(U.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:w,onChange:U=>j(U.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:I,onChange:U=>_(U.target.value)})]}),i.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(F)?"":F.toFixed(2)]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[i.jsx("button",{type:"button",onClick:O,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),i.jsx("button",{type:"button",onClick:()=>Pe(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Subcat."}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Talla"}),i.jsx("th",{className:"p-2 border",children:"Color"}),i.jsx("th",{className:"p-2 border",children:"Marca"}),i.jsx("th",{className:"p-2 border",children:"Gnero"}),i.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:D?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):P.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):P.map(U=>{var Y;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(Y=U.createdAt)!=null&&Y.toDate?U.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border",children:U.category}),i.jsx("td",{className:"p-2 border",children:U.name}),i.jsx("td",{className:"p-2 border",children:U.sku}),i.jsx("td",{className:"p-2 border",children:U.size||""}),i.jsx("td",{className:"p-2 border",children:U.color||""}),i.jsx("td",{className:"p-2 border",children:U.brand||""}),i.jsx("td",{className:"p-2 border",children:U.gender||""}),i.jsx("td",{className:"p-2 border",children:U.clientCode||""}),i.jsx("td",{className:"p-2 border",children:U.notes||""}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>q(U),children:"Borrar"})})]},U.id)})})]})}),fe&&i.jsx("p",{className:"mt-2 text-sm",children:fe})]})}async function vPe(t){const{productId:e,quantity:r,saleDate:n,saleId:a}=t,s=Math.max(0,Math.floor(Number(r||0)));if(!e||s<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const o=nr(bt(Oe,"inventory_clothes_batches"),sr("productId","==",e)),u=(await Qt(o)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,A)=>{var v,y;const h=String(f.data.date||""),m=String(A.data.date||"");if(h!==m)return h<m?-1:1;const p=((v=f.data.createdAt)==null?void 0:v.seconds)??0,g=((y=A.data.createdAt)==null?void 0:y.seconds)??0;return p-g}).map(f=>zt(Oe,"inventory_clothes_batches",f.id)),d=[];return await Di(Oe,async f=>{const A=await Promise.all(u.map(m=>f.get(m)));let h=s;for(let m=0;m<u.length&&h>0;m++){const p=u[m],g=A[m];if(!g.exists())continue;const v=g.data(),y=Math.max(0,Math.floor(Number(v.quantity||0))),b=Number.isFinite(Number(v.remaining))?Math.max(0,Math.floor(Number(v.remaining||0))):y;if(b<=0)continue;const w=Math.min(b,h),j=Math.max(0,b-w);f.update(p,{remaining:j}),d.push({batchId:p.id,qty:w,batchDate:String(v.date||""),productName:String(v.productName||"")}),h-=w}if(h>0)throw new Error(`Inventario insuficiente. Faltan ${h} unidades.`);if(a)for(const m of d)await Bn(bt(Oe,"batch_clothes_allocations"),{saleId:a,saleDate:n,productId:e,productName:m.productName??"",batchId:m.batchId,batchDate:m.batchDate??"",quantity:m.qty,createdAt:ur.now()})}),{allocations:d}}async function Pk(t){const e=zt(Oe,"sales_clothes",t),r=await Ci(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)&&n.items.length>0){const l={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const c of Object.keys(n.allocationsByItem)){const u=n.allocationsByItem[c],d=String((u==null?void 0:u.productId)||c||"");if(!d)continue;const f=Array.isArray(u==null?void 0:u.allocations)?u.allocations:[];l[d]=f.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const c of n.allocationsByItem){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];l[u]=d.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const c of n.items){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Math.max(0,Math.floor(Number((c==null?void 0:c.qty)||(c==null?void 0:c.quantity)||0))),f=Array.isArray(c==null?void 0:c.allocations)?c.allocations.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))})):l[u]||[];a.push({productId:u,productName:String((c==null?void 0:c.productName)||""),qty:d,allocations:f.length?f:void 0})}}else{const l=n.item||{},c=String(l.productId||n.productId||""),u=Math.max(0,Math.floor(Number(l.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];c&&u>0&&a.push({productId:c,productName:String(l.productName||n.productName||""),qty:u,allocations:d.length?d:void 0})}return a.length===0?(await Di(Oe,async l=>{l.delete(e)}),{restored:0}):a.every(l=>Array.isArray(l.allocations)&&l.allocations.length>0)?(await Di(Oe,async c=>{const u=[];for(const f of a)for(const A of f.allocations||[])u.push({ref:zt(Oe,"inventory_clothes_batches",A.batchId),addBack:Math.max(0,Math.floor(Number(A.qty||0)))});const d=await Promise.all(u.map(f=>c.get(f.ref)));for(let f=0;f<u.length;f++){const A=d[f];if(!A.exists())continue;const h=A.data(),m=Math.max(0,Math.floor(Number(h.remaining||0)));c.update(u[f].ref,{remaining:m+u[f].addBack})}c.delete(e)}),{restored:a.reduce((c,u)=>c+(u.allocations||[]).reduce((d,f)=>d+f.qty,0),0)}):(await Di(Oe,async l=>{const c={};for(const h of a){if(!h.productId||h.qty<=0)continue;const m=nr(bt(Oe,"inventory_clothes_batches"),sr("productId","==",h.productId)),g=(await Qt(m)).docs.map(v=>{const y=v.data(),b=Math.max(0,Math.floor(Number(y.quantity||0))),w=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):b;return{id:v.id,date:String(y.date||""),quantity:b,remaining:w}}).sort((v,y)=>v.date.localeCompare(y.date));c[h.productId]=g}const u=[];for(const h of a){if(!h.productId||h.qty<=0)continue;if(Array.isArray(h.allocations)&&h.allocations.length>0){for(const g of h.allocations)u.push({id:g.batchId,addBack:Math.max(0,Math.floor(Number(g.qty||0)))});continue}const m=c[h.productId]||[];let p=h.qty;for(const g of m){if(p<=0)break;const v=Math.max(0,g.quantity-g.remaining);if(v<=0)continue;const y=Math.min(v,p);u.push({id:g.id,addBack:y}),p-=y}for(const g of m){if(p<=0)break;const v=Math.min(p,h.qty);u.push({id:g.id,addBack:v}),p-=v}}const d={};for(const h of u)d[h.id]=(d[h.id]||0)+Math.max(0,Math.floor(Number(h.addBack||0)));const f=Object.keys(d).map(h=>zt(Oe,"inventory_clothes_batches",h)),A=await Promise.all(f.map(h=>l.get(h)));for(let h=0;h<f.length;h++){const m=A[h];if(!m.exists())continue;const p=m.data(),g=Math.max(0,Math.floor(Number(p.remaining||0))),v=Math.max(0,Math.floor(Number(d[f[h].id]||0)));l.update(f[h],{remaining:g+v})}l.delete(e)}),{restored:a.reduce((l,c)=>l+c.qty,0)})}const UV=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Ah=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function OC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function QV(t){const e=nr(bt(Oe,"ar_movements"),sr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Pn(zt(Oe,"ar_movements",n.id))))}function yPe(){const[t,e]=x.useState(!1),[r,n]=x.useState(!1),[a,s]=x.useState(null),[o,l]=x.useState([]),c=async Se=>{e(!0),n(!0),s(Se),l([]);try{const W=(await Qt(nr(bt(Oe,"sales_clothes"),sr("__name__","==",Se)))).docs[0],Te=W==null?void 0:W.data(),tt=(Array.isArray(Te==null?void 0:Te.items)?Te.items:Te!=null&&Te.item?[Te.item]:[]).map(ut=>({productName:String(ut.productName||""),qty:Number(ut.qty||0),unitPrice:Number(ut.unitPrice||0),discount:Number(ut.discount||0),total:Number(ut.total||0)}));l(tt)}catch(ht){console.error(ht)}finally{n(!1)}},[u,d]=x.useState(""),[f,A]=x.useState("+505 "),[h,m]=x.useState(""),[p,g]=x.useState(""),[v,y]=x.useState("ACTIVO"),[b,w]=x.useState(0),[j,I]=x.useState([]),[_,S]=x.useState(!0),[E,F]=x.useState(""),[P,k]=x.useState(null),[D,J]=x.useState(""),[fe,Ae]=x.useState("+505 "),[me,pe]=x.useState(""),[ne,Pe]=x.useState(""),[Be,O]=x.useState("ACTIVO"),[G,q]=x.useState(0),[U,Y]=x.useState(!1),[Z,R]=x.useState(null),[H,te]=x.useState(!1),[ye,Q]=x.useState([]),[Ge,ie]=x.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[ee,Ie]=x.useState(!1),[ue,se]=x.useState(0),[Ee,je]=x.useState(new Date().toISOString().slice(0,10)),[it,At]=x.useState(""),[pt,yt]=x.useState(!1),[Ct,Et]=x.useState(null),[Re,We]=x.useState(""),[et,xe]=x.useState(0),[de,Ue]=x.useState(""),[Ke,Ne]=x.useState(!1);x.useEffect(()=>{(async()=>{const Se=nr(bt(Oe,"customers_clothes"),xn("createdAt","desc")),ht=await Qt(Se),W=[];ht.forEach(Te=>{const Ze=Te.data();W.push({id:Te.id,name:Ze.name??"",phone:Ze.phone??"+505 ",place:Ze.place??"",notes:Ze.notes??"",status:Ze.status??"ACTIVO",creditLimit:Number(Ze.creditLimit??0),createdAt:Ze.createdAt??ur.now(),balance:0})});for(const Te of W)try{const Ze=nr(bt(Oe,"ar_movements"),sr("customerId","==",Te.id)),tt=await Qt(Ze);let ut=0;tt.forEach(T=>ut+=Number(T.data().amount||0)),Te.balance=ut}catch{Te.balance=0}I(W),S(!1)})()},[]);const mt=()=>{d(""),A("+505 "),m(""),g(""),y("ACTIVO"),w(0)},wt=async Se=>{if(Se.preventDefault(),F(""),!u.trim()){F("Ingresa el nombre.");return}const ht=OC(f);if(ht.length<6){F("Telfono incompleto.");return}try{const W=await Bn(bt(Oe,"customers_clothes"),{name:u.trim(),phone:ht,place:h||"",notes:p||"",status:v,creditLimit:Number(b||0),createdAt:ur.now()});I(Te=>[{id:W.id,name:u.trim(),phone:ht,place:h||"",notes:p||"",status:v,creditLimit:Number(b||0),createdAt:ur.now(),balance:0},...Te]),mt(),Ne(!1),F(" Cliente creado")}catch(W){console.error(W),F(" Error al crear cliente")}},we=Se=>{k(Se.id),J(Se.name),Ae(Se.phone||"+505 "),pe(Se.place||""),Pe(Se.notes||""),O(Se.status||"ACTIVO"),q(Number(Se.creditLimit||0))},ae=()=>{k(null),J(""),Ae("+505 "),pe(""),Pe(""),O("ACTIVO"),q(0)},be=async()=>{if(!P)return;const Se=OC(fe);if(!D.trim()){F("Ingresa el nombre.");return}try{await pn(zt(Oe,"customers_clothes",P),{name:D.trim(),phone:Se,place:me||"",notes:ne||"",status:Be,creditLimit:Number(G||0)}),I(ht=>ht.map(W=>W.id===P?{...W,name:D.trim(),phone:Se,place:me||"",notes:ne||"",status:Be,creditLimit:Number(G||0)}:W)),ae(),F(" Cliente actualizado")}catch(ht){console.error(ht),F(" Error al actualizar")}},ve=async Se=>{if(confirm(`Eliminar al cliente "${Se.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{S(!0);const W=nr(bt(Oe,"sales_clothes"),sr("customerId","==",Se.id)),Te=await Qt(W);for(const ut of Te.docs){const T=ut.id;try{await Pk(T)}catch(M){console.warn("restoreSaleAndDeleteClothes error",M);try{await Pn(zt(Oe,"sales_clothes",T))}catch{}}await QV(T)}const Ze=nr(bt(Oe,"ar_movements"),sr("customerId","==",Se.id)),tt=await Qt(Ze);await Promise.all(tt.docs.map(ut=>Pn(zt(Oe,"ar_movements",ut.id)))),await Pn(zt(Oe,"customers_clothes",Se.id)),I(ut=>ut.filter(T=>T.id!==Se.id)),F(" Cliente eliminado y prendas devueltas al inventario")}catch(W){console.error(W),F(" No se pudo eliminar el cliente.")}finally{S(!1)}},Ve=async Se=>{R(Se),Q([]),ie({saldoActual:0,totalAbonado:0,totalCargos:0}),Y(!0),Ie(!1),se(0),je(new Date().toISOString().slice(0,10)),At(""),Et(null),te(!0);try{const ht=nr(bt(Oe,"ar_movements"),sr("customerId","==",Se.id)),W=await Qt(ht),Te=[];W.forEach(Ze=>{var ut,T;const tt=Ze.data();Te.push({id:Ze.id,date:tt.date??((T=(ut=tt.createdAt)==null?void 0:ut.toDate)!=null&&T.call(ut)?tt.createdAt.toDate().toISOString().slice(0,10):""),type:tt.type??"CARGO",amount:Number(tt.amount||0),ref:tt.ref||{},comment:tt.comment||"",createdAt:tt.createdAt})}),Te.sort((Ze,tt)=>{var M,L;if(Ze.date!==tt.date)return Ze.date.localeCompare(tt.date);const ut=((M=Ze.createdAt)==null?void 0:M.seconds)||0,T=((L=tt.createdAt)==null?void 0:L.seconds)||0;return ut-T}),Q(Te),ce(Te)}catch(ht){console.error(ht),F(" No se pudo cargar el estado de cuenta")}finally{te(!1)}},ce=Se=>{const ht=Se.reduce((Ze,tt)=>Ze+(Number(tt.amount)||0),0),W=Se.filter(Ze=>Number(Ze.amount)<0).reduce((Ze,tt)=>Ze+Math.abs(Number(tt.amount)||0),0),Te=Se.filter(Ze=>Number(Ze.amount)>0).reduce((Ze,tt)=>Ze+Number(tt.amount)||0,0);ie({saldoActual:ht,totalAbonado:W,totalCargos:Te})},ke=async()=>{if(!Z)return;F("");const Se=Number(ue||0);if(!(Se>0)){F("Ingresa un monto de abono mayor a 0.");return}const ht=parseFloat(Se.toFixed(2));if(!Ee){F("Selecciona la fecha del abono.");return}try{yt(!0);const W={customerId:Z.id,type:"ABONO",amount:-ht,date:Ee,comment:it||"",createdAt:ur.now()},Ze={id:(await Bn(bt(Oe,"ar_movements"),W)).id,date:Ee,type:"ABONO",amount:-ht,comment:it||"",createdAt:ur.now()},tt=[...ye,Ze].sort((ut,T)=>{var K,re;if(ut.date!==T.date)return ut.date.localeCompare(T.date);const M=((K=ut.createdAt)==null?void 0:K.seconds)||0,L=((re=T.createdAt)==null?void 0:re.seconds)||0;return M-L});Q(tt),ce(tt),I(ut=>ut.map(T=>T.id===Z.id?{...T,balance:(T.balance||0)-ht}:T)),R(ut=>ut&&{...ut,balance:(ut.balance||0)-ht}),se(0),At(""),je(new Date().toISOString().slice(0,10)),Ie(!1),F(" Abono registrado")}catch(W){console.error(W),F(" Error al registrar el abono")}finally{yt(!1)}},dt=Se=>{Et(Se.id),We(Se.date||new Date().toISOString().slice(0,10)),xe(Math.abs(Number(Se.amount||0))),Ue(Se.comment||"")},ft=()=>{Et(null),We(""),xe(0),Ue("")},gt=async()=>{if(!Ct)return;const Se=ye.findIndex(Ze=>Ze.id===Ct);if(Se===-1)return;const ht=ye[Se],W=Number(et||0);if(!(W>0)){F("El monto debe ser mayor a 0.");return}const Te=ht.type==="ABONO"?-parseFloat(W.toFixed(2)):+parseFloat(W.toFixed(2));try{await pn(zt(Oe,"ar_movements",Ct),{date:Re,amount:Te,comment:de||""});const Ze=[...ye];Ze[Se]={...ht,date:Re,amount:Te,comment:de||""},Ze.sort((ut,T)=>{var K,re;if(ut.date!==T.date)return ut.date.localeCompare(T.date);const M=((K=ut.createdAt)==null?void 0:K.seconds)||0,L=((re=T.createdAt)==null?void 0:re.seconds)||0;return M-L}),Q(Ze),ce(Ze);const tt=Ze.reduce((ut,T)=>ut+(Number(T.amount)||0),0);I(ut=>ut.map(T=>T.id===(Z==null?void 0:Z.id)?{...T,balance:tt}:T)),R(ut=>ut&&{...ut,balance:tt}),ft(),F(" Movimiento actualizado")}catch(Ze){console.error(Ze),F(" Error al actualizar movimiento")}},Rt=async Se=>{var W,Te;if(confirm(`Eliminar este movimiento (${Se.type==="ABONO"?"Abono":"Compra"}) del ${Se.date}?${Se.type==="CARGO"&&((W=Se.ref)!=null&&W.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(S(!0),Se.type==="CARGO"&&((Te=Se.ref)!=null&&Te.saleId)){try{await Pk(Se.ref.saleId)}catch(ut){console.warn("restoreSaleAndDeleteClothes error",ut),S(!1),F(" No se pudo devolver inventario de la venta.");return}await QV(Se.ref.saleId)}else await Pn(zt(Oe,"ar_movements",Se.id));const Ze=ye.filter(ut=>{var T,M;return Se.type==="CARGO"&&((T=Se.ref)!=null&&T.saleId)?((M=ut.ref)==null?void 0:M.saleId)!==Se.ref.saleId:ut.id!==Se.id});Q(Ze),ce(Ze);const tt=Ze.reduce((ut,T)=>ut+(Number(T.amount)||0),0);I(ut=>ut.map(T=>T.id===(Z==null?void 0:Z.id)?{...T,balance:tt}:T)),R(ut=>ut&&{...ut,balance:tt}),F(" Movimiento eliminado")}catch(Ze){console.error(Ze),F(" Error al eliminar movimiento")}finally{S(!1)}},ot=x.useMemo(()=>[...j].sort((Se,ht)=>{var W,Te;return Se.status!==ht.status?Se.status==="BLOQUEADO"?1:-1:(((W=ht.createdAt)==null?void 0:W.seconds)||0)-(((Te=Se.createdAt)==null?void 0:Te.seconds)||0)}),[j]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Ne(!0),type:"button",children:"Crear Cliente"})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:_?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):ot.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):ot.map(Se=>{var W;const ht=P===Se.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(W=Se.createdAt)!=null&&W.toDate?Se.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border",children:ht?i.jsx("input",{className:"w-full border p-1 rounded",value:D,onChange:Te=>J(Te.target.value)}):Se.name}),i.jsx("td",{className:"p-2 border",children:ht?i.jsx("input",{className:"w-full border p-1 rounded",value:fe,onChange:Te=>Ae(OC(Te.target.value))}):Se.phone}),i.jsx("td",{className:"p-2 border",children:ht?i.jsxs("select",{className:"w-full border p-1 rounded",value:me,onChange:Te=>pe(Te.target.value),children:[i.jsx("option",{value:"",children:""}),UV.map(Te=>i.jsx("option",{value:Te,children:Te},Te))]}):Se.place||""}),i.jsx("td",{className:"p-2 border",children:ht?i.jsxs("select",{className:"w-full border p-1 rounded",value:Be,onChange:Te=>O(Te.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Se.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Se.status})}),i.jsx("td",{className:"p-2 border",children:ht?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(G)?"":G,onChange:Te=>q(Math.max(0,Number(Te.target.value||0)))}):Ah(Se.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:Ah(Se.balance||0)}),i.jsx("td",{className:"p-2 border",children:ht?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ne,onChange:Te=>Pe(Te.target.value),maxLength:500}):i.jsx("span",{title:Se.notes||"",children:(Se.notes||"").length>40?(Se.notes||"").slice(0,40)+"":Se.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:ht?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:be,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ae,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>we(Se),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ve(Se),children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Ve(Se),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},Se.id)})})]})}),E&&i.jsx("p",{className:"mt-2 text-sm",children:E}),Ke&&uu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ne(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:wt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:u,onChange:Se=>d(Se.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:Se=>A(OC(Se.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:Se=>m(Se.target.value),children:[i.jsx("option",{value:"",children:""}),UV.map(Se=>i.jsx("option",{value:Se,children:Se},Se))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:v,onChange:Se=>y(Se.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:Se=>w(Math.max(0,Number(Se.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:p,onChange:Se=>g(Se.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),U&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(Z==null?void 0:Z.name)||""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{se(0),je(new Date().toISOString().slice(0,10)),At(""),Ie(!0)},children:"Abonar"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Y(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Ah(Ge.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:Ah(Ge.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:Ah(Ge.saldoActual)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:H?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ye.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):ye.map(Se=>{var W,Te;const ht=Ct===Se.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ht?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Re,onChange:Ze=>We(Ze.target.value)}):Se.date||""}),i.jsx("td",{className:"p-2 border",children:Se.amount>=0?(W=Se.ref)!=null&&W.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>c(Se.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(Te=Se.ref)!=null&&Te.saleId?`Venta #${Se.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:ht?i.jsx("input",{className:"w-full border p-1 rounded",value:de,onChange:Ze=>Ue(Ze.target.value),placeholder:"Comentario"}):i.jsx("span",{title:Se.comment||"",children:(Se.comment||"").length>40?(Se.comment||"").slice(0,40)+"":Se.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:ht?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(et)?"":et,onChange:Ze=>{const tt=Number(Ze.target.value||0),ut=Number.isFinite(tt)?Math.max(0,parseFloat(tt.toFixed(2))):0;xe(ut)},placeholder:"0.00",title:Se.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):Ah(Se.amount)}),i.jsx("td",{className:"p-2 border",children:ht?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:gt,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ft,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>dt(Se),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Rt(Se),children:"Borrar"})]})})]},Se.id)})})]})})]})}),ee&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(Z==null?void 0:Z.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Ee,onChange:Se=>je(Se.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ue===0?"":ue,onChange:Se=>{const ht=Number(Se.target.value||0),W=Number.isFinite(ht)?Math.max(0,parseFloat(ht.toFixed(2))):0;se(W)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:it,onChange:Se=>At(Se.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[it.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ie(!1),disabled:pt,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:ke,disabled:pt,children:pt?"Guardando...":"Guardar abono"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):o.map((Se,ht)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:Se.productName}),i.jsx("td",{className:"p-2 border text-right",children:Se.qty}),i.jsx("td",{className:"p-2 border text-right",children:Ah(Se.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Ah(Se.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Ah(Se.total)})]},ht))})]})})]})})]})}const ax=t=>`C$ ${(Number(t)||0).toFixed(2)}`,bPe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function wPe(t){if(!t)return 0;const e=nr(bt(Oe,"inventory_clothes_batches"),sr("productId","==",t)),r=await Qt(e);let n="0000-00-00",a=-1,s=0;return r.forEach(o=>{const l=o.data(),c=String(l.date||"0000-00-00"),u=Number(l.salePrice||0),d=l.createdAt,f=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;c>n?(n=c,a=f,s=u):c===n&&f>a&&(a=f,s=u)}),Number(s||0)}async function VV(t){if(!t)return 0;const e=nr(bt(Oe,"inventory_clothes_batches"),sr("productId","==",t)),r=await Qt(e);let n=0;return r.forEach(a=>n+=Number(a.data().remaining||0)),n}function HV(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function NPe({role:t="",roles:e}={role:""}){const r=e&&e.length?e:t;on(r,"admin"),on(r,"vendedor_ropa");const[n,a]=x.useState([]),[s,o]=x.useState([]),[l,c]=x.useState({}),[u,d]=x.useState("CONTADO"),[f,A]=x.useState(""),[h,m]=x.useState(""),[p,g]=x.useState(new Date().toISOString().slice(0,10)),[v,y]=x.useState(""),[b,w]=x.useState([]),j=x.useMemo(()=>b.reduce((ue,se)=>ue+(se.qty||0),0),[b]),I=x.useMemo(()=>{const ue=b.reduce((se,Ee)=>{const je=Math.max(0,(Number(Ee.unitPrice)||0)*(Ee.qty||0)-(Number(Ee.discount)||0));return se+je},0);return Math.floor(ue*100)/100},[b]),[_,S]=x.useState(0),[E,F]=x.useState(""),[P,k]=x.useState(!1),[D,J]=x.useState(!1),[fe,Ae]=x.useState(""),[me,pe]=x.useState("+505 "),[ne,Pe]=x.useState(""),[Be,O]=x.useState(""),[G,q]=x.useState("ACTIVO"),[U,Y]=x.useState(0),Z=()=>{Ae(""),pe("+505 "),Pe(""),O(""),q("ACTIVO"),Y(0)};x.useEffect(()=>{(async()=>{const ue=nr(bt(Oe,"customers_clothes"),xn("createdAt","desc")),se=await Qt(ue),Ee=[];se.forEach(Et=>{const Re=Et.data();Ee.push({id:Et.id,name:Re.name??"",phone:Re.phone??"+505 ",place:Re.place??"",status:Re.status??"ACTIVO",creditLimit:Number(Re.creditLimit??0),balance:0})});for(const Et of Ee)try{const Re=nr(bt(Oe,"ar_movements"),sr("customerId","==",Et.id)),We=await Qt(Re);let et=0;We.forEach(xe=>et+=Number(xe.data().amount||0)),Et.balance=et}catch{Et.balance=0}a(Ee);const je=nr(bt(Oe,"products_clothes"),xn("createdAt","desc")),it=await Qt(je),At=[];it.forEach(Et=>{const Re=Et.data();At.push({id:Et.id,name:Re.name??"(sin nombre)",sku:Re.sku??""})}),o(At);const pt=nr(bt(Oe,"inventory_clothes_batches"),sr("remaining",">",0)),yt=await Qt(pt),Ct={};yt.forEach(Et=>{const Re=Et.data(),We=Re.productId||"",et=Number(Re.remaining||0);We&&(Ct[We]=(Ct[We]||0)+et)}),c(Ct)})()},[]);const R=x.useMemo(()=>n.find(ue=>ue.id===f),[n,f]),H=(R==null?void 0:R.balance)||0,te=u==="CREDITO"?H+Math.max(0,Number(I||0))-Math.max(0,Number(_||0)):0,ye=async ue=>{if(!ue)return;if(b.some(At=>At.productId===ue)){y("");return}const se=s.find(At=>At.id===ue);if(!se){y("");return}let Ee=await wPe(ue);Ee||(Ee=Number((se==null?void 0:se.price)||0));const je=await VV(ue),it={productId:ue,productName:se.name||"",sku:se.sku||"",unitPrice:Number(Ee)||0,available:Number(je)||0,qty:0,discount:0};w(At=>[...At,it]),y("")},Q=(ue,se)=>{w(Ee=>Ee.map(je=>{if(je.productId!==ue)return je;if(se==="")return{...je,qty:0};const it=Math.max(0,Math.floor(Number(se)));return{...je,qty:it}}))},Ge=(ue,se)=>{w(Ee=>Ee.map(je=>{if(je.productId!==ue)return je;if(se==="")return{...je,discount:0};const it=Math.max(0,Math.floor(Number(se)));return{...je,discount:it}}))},ie=ue=>w(se=>se.filter(Ee=>Ee.productId!==ue)),ee=async()=>{if(!p)return"Selecciona la fecha.";if(b.length===0)return"Agrega al menos un producto.";const ue=b.filter(se=>(se.qty||0)>0);if(ue.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(I>0))return"El total debe ser mayor a cero.";if(u==="CONTADO"){if(!h.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!f)return"Selecciona un cliente (crdito).";if(_<0)return"El pago inicial no puede ser negativo.";if(_>I)return"El pago inicial no puede superar el total.";if((R==null?void 0:R.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const se of ue){const Ee=await VV(se.productId);if(se.qty>Ee)return`Inventario insuficiente para "${se.productName}". Disponible: ${Ee} unidades.`;const je=(Number(se.unitPrice)||0)*(se.qty||0),it=Number(se.discount)||0;if(!Number.isInteger(it)||it<0)return`El descuento en "${se.productName}" debe ser entero y  0.`;if(it>je)return`El descuento en "${se.productName}" no puede exceder C$ ${je.toFixed(2)}.`}return null},Ie=async ue=>{ue.preventDefault(),F("");const se=await ee();if(se){F(" "+se);return}try{k(!0);const Ee=b.filter(pt=>(pt.qty||0)>0).map(pt=>{const yt=(Number(pt.unitPrice)||0)*(pt.qty||0),Ct=Math.max(0,Math.floor(Number(pt.discount)||0)),Et=Math.max(0,yt-Ct);return{productId:pt.productId,productName:pt.productName,sku:pt.sku||"",qty:pt.qty,unitPrice:Number(pt.unitPrice)||0,discount:Ct,total:Math.floor(Et*100)/100}}),je={type:u,date:p,createdAt:ur.now(),itemsTotal:Number(I)||0,total:Number(I)||0,quantity:Number(j)||0,items:Ee};u==="CONTADO"?je.customerName=h.trim():(je.customerId=f,je.downPayment=Number(_)||0);const it=await Bn(bt(Oe,"sales_clothes"),je);if(u==="CREDITO"&&f){const pt={customerId:f,date:p,createdAt:ur.now(),ref:{saleId:it.id}};await Bn(bt(Oe,"ar_movements"),{...pt,type:"CARGO",amount:Number(I)||0}),Number(_)>0&&await Bn(bt(Oe,"ar_movements"),{...pt,type:"ABONO",amount:-Number(_)})}const At={};for(const pt of Ee)if(pt.qty>0){const{allocations:yt}=await vPe({productId:pt.productId,quantity:pt.qty,saleDate:p,saleId:it.id});At[pt.productId]={productId:pt.productId,allocations:yt}}await pn(zt(Oe,"sales_clothes",it.id),{allocationsByItem:At}),d("CONTADO"),A(""),m(""),g(new Date().toISOString().slice(0,10)),w([]),S(0),u==="CREDITO"&&f&&a(pt=>pt.map(yt=>yt.id===f?{...yt,balance:(yt.balance||0)+(Number(I)||0)-(Number(_)||0)}:yt)),F(" Venta registrada"),(async()=>{const pt=nr(bt(Oe,"inventory_clothes_batches"),sr("remaining",">",0)),yt=await Qt(pt),Ct={};yt.forEach(Et=>{const Re=Et.data(),We=Re.productId||"",et=Number(Re.remaining||0);We&&(Ct[We]=(Ct[We]||0)+et)}),c(Ct)})()}catch(Ee){console.error(Ee),F(" Error al guardar la venta")}finally{k(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),i.jsxs("form",{onSubmit:Ie,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:u,onChange:ue=>d(ue.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),u==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:h,onChange:ue=>m(ue.target.value)})]}):i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 border p-2 rounded",value:f,onChange:ue=>A(ue.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),n.map(ue=>i.jsxs("option",{value:ue.status==="ACTIVO"?ue.id:"",disabled:ue.status==="BLOQUEADO",children:[ue.name," | ",ue.phone," | Saldo: ",ax(ue.balance||0)]},ue.id))]}),i.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>J(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:ax(H)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:_===0?"":_,onChange:ue=>S(Math.max(0,Number(ue.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:ax(te)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:p,onChange:ue=>g(ue.target.value)})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:v,onChange:async ue=>{const se=ue.target.value;y(se),await ye(se)},children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),s.map(ue=>{const se=b.some(it=>it.productId===ue.id),Ee=l[ue.id]||0,je=se||Ee<=0;return i.jsxs("option",{value:je?"":ue.id,disabled:je,children:[ue.name," ",ue.sku?` ${ue.sku}`:""," ",Ee>0?`(disp: ${Ee})`:"(sin stock)",se?" (seleccionado)":""]},ue.id)})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"border rounded overflow-hidden",children:[i.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[i.jsx("div",{className:"col-span-4",children:"Producto"}),i.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),i.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),i.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),i.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),i.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),i.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),b.length===0?i.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):b.map(ue=>{const se=Math.max(0,(ue.available||0)-(ue.qty||0)),Ee=(Number(ue.unitPrice)||0)*(ue.qty||0),je=Math.max(0,Ee-(Number(ue.discount)||0));return i.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[i.jsx("div",{className:"col-span-4",children:i.jsxs("div",{className:"font-medium",children:[ue.productName,ue.sku?`  ${ue.sku}`:""]})}),i.jsx("div",{className:"col-span-2 text-right",children:ax(ue.unitPrice)}),i.jsx("div",{className:"col-span-2 text-right",children:se}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ue.qty)||ue.qty===0?"":ue.qty,onChange:it=>Q(ue.productId,it.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ue.discount)||ue.discount===0?"":ue.discount,onChange:it=>Ge(ue.productId,it.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),i.jsx("div",{className:"col-span-1 text-right",children:ax(je)}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>ie(ue.productId),title:"Quitar producto",children:""})})]},ue.productId)})]}),b.length>0&&i.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),i.jsx("span",{className:"font-semibold",children:j})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total: "}),i.jsx("span",{className:"font-semibold",children:ax(I)})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:P,children:P?"Guardando...":"Registrar venta"})})]}),E&&i.jsx("p",{className:"mt-2 text-sm",children:E}),D&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:fe,onChange:ue=>Ae(ue.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:me,onChange:ue=>pe(HV(ue.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ne,onChange:ue=>Pe(ue.target.value),children:[i.jsx("option",{value:"",children:""}),bPe.map(ue=>i.jsx("option",{value:ue,children:ue},ue))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:G,onChange:ue=>q(ue.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:U===0?"":U,onChange:ue=>Y(Math.max(0,Number(ue.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Be,onChange:ue=>O(ue.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{Z(),J(!1)},children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(F(""),!fe.trim()){F("Ingresa el nombre del nuevo cliente.");return}const ue=HV(me);try{const se=await Bn(bt(Oe,"customers_clothes"),{name:fe.trim(),phone:ue,place:ne||"",notes:Be||"",status:G,creditLimit:Number(U||0),createdAt:ur.now()}),Ee={id:se.id,name:fe.trim(),phone:ue,place:ne||"",status:G,creditLimit:Number(U||0),balance:0};a(je=>[Ee,...je]),A(se.id),Z(),J(!1),F(" Cliente creado")}catch(se){console.error(se),F(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),P&&i.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[i.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const $i=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function iE(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Ir(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function CPe(t,e){const r=iE(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(o=>({productId:String(o.productId||""),productName:String(o.productName||""),sku:o.sku||"",qty:Number(o.qty||0),unitPrice:Number(o.unitPrice??(Number(o.total||0)/Math.max(1,Number(o.qty||0))||0)),discount:Number(o.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},a=Number(t.quantity??n.qty??0),s=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??s??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:a,unitPrice:Number(n.unitPrice??(s&&a?s/a:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function _Pe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let o=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const A=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(o+=A*f.cost),f.qtyLeft-=A,d-=A}}return o}function EPe(){const{refreshKey:t,refresh:e}=kc(),[r,n]=x.useState(Ir(af(new Date),"yyyy-MM-dd")),[a,s]=x.useState(Ir(nf(new Date),"yyyy-MM-dd")),[o,l]=x.useState([]),[c,u]=x.useState([]),[d,f]=x.useState([]),[A,h]=x.useState([]),[m,p]=x.useState([]),[g,v]=x.useState([]),[y,b]=x.useState(!0),[w,j]=x.useState(""),[I,_]=x.useState(!1),[S,E]=x.useState(null),[F,P]=x.useState([]),[k,D]=x.useState(!1),[J,fe]=x.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});x.useEffect(()=>{(async()=>{b(!0),j("");try{const O=await Qt(bt(Oe,"sales_clothes")),G=[],q=[];O.forEach(ie=>{const ee=ie.data(),Ie=CPe(ee,ie.id);Ie&&(Ie.date<=a&&G.push(Ie),Ie.date>=r&&Ie.date<=a&&q.push(Ie))}),u(G),l(q);const U=await Qt(bt(Oe,"inventory_clothes_batches")),Y=[];U.forEach(ie=>{const ee=ie.data(),Ie=iE(ee);!Ie||Ie>a||Y.push({id:ie.id,productId:ee.productId,productName:ee.productName||"",date:Ie,quantity:Number(ee.quantity||0),remaining:Number(ee.remaining||0),purchasePrice:Number(ee.purchasePrice||0)})}),f(Y);const Z=await Qt(bt(Oe,"expenses_clothes")),R=[];Z.forEach(ie=>{const ee=ie.data(),Ie=iE(ee);Ie&&Ie>=r&&Ie<=a&&R.push({id:ie.id,date:Ie,category:ee.category||"",description:ee.description||"",amount:Number(ee.amount||0),status:ee.status||""})}),h(R);const H=await Qt(bt(Oe,"ar_movements")),te=[],ye={};H.forEach(ie=>{const ee=ie.data(),Ie=iE(ee);if(!Ie)return;const ue=ee.customerId,se=Number(ee.amount||0);ue&&(ye[ue]=(ye[ue]||0)+se),ee.type==="ABONO"&&Ie>=r&&Ie<=a&&te.push({id:ie.id,customerId:ue,type:"ABONO",amount:se,date:Ie})}),p(te);const Q=await Qt(bt(Oe,"customers_clothes")),Ge=[];Q.forEach(ie=>{const ee=ie.data();Ge.push({id:ie.id,name:ee.name||"",balance:ye[ie.id]||0})}),v(Ge)}catch(O){console.error(O),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const Ae=x.useMemo(()=>{try{return _Pe(d,c,r,a)}catch(O){return console.error(O),0}},[d,c,r,a]),me=x.useMemo(()=>{const O=o.reduce((ye,Q)=>ye+(Q.total||0),0),G=A.reduce((ye,Q)=>ye+(Q.amount||0),0),q=O-Ae,U=q-G,Y=m.reduce((ye,Q)=>ye+Math.abs(Q.amount||0),0),Z=g.filter(ye=>(ye.balance||0)>0),R=Z.reduce((ye,Q)=>ye+(Q.balance||0),0);let H=0,te=0;for(const ye of o){const Q=(ye.items||[]).reduce((Ge,ie)=>Ge+(Number(ie.qty)||0),0);ye.type==="CONTADO"?H+=Q:te+=Q}return{ventasTotales:O,costoMercaderia:Ae,gastosPeriodo:G,gananciaAntes:q,gananciaDespues:U,abonosRecibidos:Y,saldosPendientes:R,clientesConSaldo:Z.length,prendasCash:H,prendasCredito:te}},[o,A,m,g,Ae]),pe=x.useMemo(()=>{const O={};for(const G of o){if(G.type!=="CREDITO"||!G.customerId)continue;const q=(G.items||[]).reduce((U,Y)=>U+(Number(Y.qty)||0),0);O[G.customerId]=(O[G.customerId]||0)+q}return g.filter(G=>(G.balance||0)>0).map(G=>({customerId:G.id,name:G.name,prendasCredito:O[G.id]||0,saldo:G.balance||0})).sort((G,q)=>q.saldo-G.saldo)},[g,o]),ne=x.useMemo(()=>{const O={};return g.forEach(G=>O[G.id]=G.name),O},[g]),Pe=x.useMemo(()=>[...o].sort((O,G)=>G.date.localeCompare(O.date)).map(O=>{var U;const G=(O.items||[]).reduce((Y,Z)=>Y+(Number(Z.qty)||0),0);let q="Cash";return O.type==="CREDITO"&&O.customerId?q=ne[O.customerId]||"":O.type==="CONTADO"&&(q=((U=O.customerName)==null?void 0:U.trim())||"Cash"),{id:O.id,date:O.date,type:O.type==="CREDITO"?"Crdito":"Cash",customer:q,piezas:G,total:Number(O.total||0)}}),[o,ne]),Be=async O=>{_(!0),E({id:O.customerId,name:O.name}),P([]),D(!0),fe({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const G=[];let q=0,U=0,Y=0;for(const te of o)if(!(te.type!=="CREDITO"||te.customerId!==O.customerId))for(const ye of te.items||[]){const Q=Number(ye.qty||0),Ge=Number(ye.unitPrice||0),ie=Q*Ge,ee=Math.max(0,Number(ye.discount||0)),Ie=Math.max(0,ie-ee);G.push({saleId:te.id,date:te.date,productName:ye.productName,sku:ye.sku||"",qty:Q,unitPrice:Ge,lineTotal:ie,discount:ee,lineFinal:Ie}),q+=ie,U+=ee,Y+=Ie}let Z=0;for(const te of m)te.customerId===O.customerId&&(Z+=Math.abs(te.amount||0));const R=g.find(te=>te.id===O.customerId),H=(R==null?void 0:R.balance)||0;P(G),fe({totalBruto:q,totalDescuento:U,totalFiado:Y,saldoActual:H,abonadoPeriodo:Z})}catch(G){console.error(G),j(" No se pudo cargar el detalle del cliente.")}finally{D(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),i.jsx(Tc,{onClick:e,loading:y})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:O=>n(O.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:O=>s(O.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:$i(me.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:$i(me.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:$i(me.gananciaAntes)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),i.jsx("div",{className:"text-xl font-semibold",children:$i(me.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:$i(me.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:$i(me.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:$i(me.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:me.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:me.prendasCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),i.jsx("div",{className:"text-xl font-semibold",children:me.prendasCredito})]})]}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):pe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):pe.map(O=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Be({customerId:O.customerId,name:O.name}),title:"Ver piezas fiadas del periodo",children:O.prendasCredito})}),i.jsx("td",{className:"p-2 border font-semibold",children:$i(O.saldo)})]},O.customerId))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Piezas"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):Pe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):Pe.map(O=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.date}),i.jsx("td",{className:"p-2 border",children:O.customer}),i.jsx("td",{className:"p-2 border",children:O.type}),i.jsx("td",{className:"p-2 border",children:O.piezas}),i.jsx("td",{className:"p-2 border",children:$i(O.total)})]},O.id))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((O,G)=>O.date.localeCompare(G.date)).map(O=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.date}),i.jsx("td",{className:"p-2 border",children:O.category||""}),i.jsx("td",{className:"p-2 border",children:O.description?i.jsx("span",{title:O.description,children:O.description.length>40?O.description.slice(0,40)+"":O.description}):""}),i.jsx("td",{className:"p-2 border",children:$i(O.amount)}),i.jsx("td",{className:"p-2 border",children:O.status||""})]},O.id))})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(S==null?void 0:S.name)||""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>_(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:$i(J.totalBruto)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:$i(J.totalDescuento)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:$i(J.totalFiado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:$i(J.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:$i(J.abonadoPeriodo)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha compra"}),i.jsx("th",{className:"p-2 border",children:"Pieza"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Cant."}),i.jsx("th",{className:"p-2 border",children:"P. Unit"}),i.jsx("th",{className:"p-2 border",children:"Monto"})," ",i.jsx("th",{className:"p-2 border",children:"Descuento"})," ",i.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),i.jsx("tbody",{children:k?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):F.sort((O,G)=>O.date.localeCompare(G.date)).map((O,G)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.date}),i.jsx("td",{className:"p-2 border",children:O.productName}),i.jsx("td",{className:"p-2 border",children:O.sku||""}),i.jsx("td",{className:"p-2 border",children:O.qty}),i.jsx("td",{className:"p-2 border",children:$i(O.unitPrice)}),i.jsx("td",{className:"p-2 border",children:$i(O.lineTotal)}),i.jsx("td",{className:"p-2 border",children:$i(O.discount)}),i.jsx("td",{className:"p-2 border",children:$i(O.lineFinal)})]},`${O.saleId}-${G}`))})]})})]})})]})}const $V=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],DC=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function SPe(){const[t,e]=x.useState(Ir(af(new Date),"yyyy-MM-dd")),[r,n]=x.useState(Ir(nf(new Date),"yyyy-MM-dd")),[a,s]=x.useState(Ir(new Date,"yyyy-MM-dd")),[o,l]=x.useState(""),[c,u]=x.useState(""),[d,f]=x.useState(0),[A,h]=x.useState("PENDIENTE"),[m,p]=x.useState(""),[g,v]=x.useState([]),[y,b]=x.useState(!0),[w,j]=x.useState(""),[I,_]=x.useState(null),[S,E]=x.useState(""),[F,P]=x.useState(""),[k,D]=x.useState(""),[J,fe]=x.useState(0),[Ae,me]=x.useState("PENDIENTE"),[pe,ne]=x.useState("");x.useEffect(()=>{(async()=>{b(!0);try{const R=nr(bt(Oe,"expenses_clothes"),xn("date","desc")),H=await Qt(R),te=[];H.forEach(ye=>{const Q=ye.data();te.push({id:ye.id,date:Q.date||Ir(new Date,"yyyy-MM-dd"),category:Q.category||"",description:Q.description||"",amount:Number(Q.amount||0),status:Q.status||"PENDIENTE",notes:Q.notes||"",createdAt:Q.createdAt??ur.now()})}),v(te)}catch(R){console.error(R),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const Pe=x.useMemo(()=>g.filter(R=>!(t&&R.date<t||r&&R.date>r)),[g,t,r]),Be=x.useMemo(()=>{const R=Pe.reduce((ye,Q)=>ye+(Q.amount||0),0),H=Pe.filter(ye=>ye.status==="PAGADO").reduce((ye,Q)=>ye+(Q.amount||0),0),te=R-H;return{total:R,pagado:H,pendiente:te}},[Pe]),O=()=>{s(Ir(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),h("PENDIENTE"),p("")},G=async R=>{if(R.preventDefault(),j(""),!o){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const H=await Bn(bt(Oe,"expenses_clothes"),{date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:ur.now()});v(te=>[{id:H.id,date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:ur.now()},...te]),O(),j(" Gasto registrado")}catch(H){console.error(H),j(" Error al guardar gasto")}},q=R=>{_(R.id),E(R.date),P(R.category||""),D(R.description||""),fe(Number(R.amount||0)),me(R.status||"PENDIENTE"),ne(R.notes||"")},U=()=>{_(null),E(""),P(""),D(""),fe(0),me("PENDIENTE"),ne("")},Y=async()=>{if(I){if(!F){j("Selecciona una categora.");return}if(!k.trim()){j("Ingresa una descripcin.");return}if(!J||J<=0){j("Ingresa un monto vlido.");return}try{await pn(zt(Oe,"expenses_clothes",I),{date:S,category:F,description:k.trim(),amount:Number(J.toFixed(2)),status:Ae,notes:pe||""}),v(R=>R.map(H=>H.id===I?{...H,date:S,category:F,description:k.trim(),amount:Number(J.toFixed(2)),status:Ae,notes:pe||""}:H)),U(),j(" Gasto actualizado")}catch(R){console.error(R),j(" Error al actualizar gasto")}}},Z=async R=>{confirm(`Eliminar el gasto "${R.description}"?`)&&(await Pn(zt(Oe,"expenses_clothes",R.id)),v(te=>te.filter(ye=>ye.id!==R.id)),j(" Gasto borrado"))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:R=>e(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:R=>n(R.target.value)})]}),i.jsxs("div",{className:"ml-auto text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",DC(Be.total)]}),i.jsxs("div",{children:["Pagado: ",DC(Be.pagado)]}),i.jsxs("div",{children:["Pendiente: ",DC(Be.pendiente)]})]})]}),i.jsxs("form",{onSubmit:G,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:R=>s(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:R=>l(R.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),$V.map(R=>i.jsx("option",{value:R,children:R},R))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:R=>u(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:R=>f(Math.max(0,Number(R.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:R=>h(R.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:R=>p(R.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Pe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):Pe.slice().sort((R,H)=>R.date.localeCompare(H.date)).map(R=>{const H=I===R.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:te=>E(te.target.value)}):R.date}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:F,onChange:te=>P(te.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),$V.map(te=>i.jsx("option",{value:te,children:te},te))]}):R.category||""}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{className:"w-full border p-1 rounded",value:k,onChange:te=>D(te.target.value)}):i.jsx("span",{title:R.description,children:R.description.length>40?R.description.slice(0,40)+"":R.description})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(J)?"":J,onChange:te=>fe(Math.max(0,Number(te.target.value||0)))}):DC(R.amount)}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:Ae,onChange:te=>me(te.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:pe,onChange:te=>ne(te.target.value),maxLength:500}):i.jsx("span",{title:R.notes||"",children:(R.notes||"").length>40?(R.notes||"").slice(0,40)+"":R.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:H?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Y,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:U,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>q(R),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Z(R),children:"Borrar"})]})})})]},R.id)})})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w})]})}const Ed=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function IPe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Ir(t.createdAt.toDate(),"yyyy-MM-dd"):""}function jPe(t,e){const r=IPe(t);if(!r)return null;const n=t.item||{},a=Number((n==null?void 0:n.qty)??t.quantity??0)||0,s=Number((n==null?void 0:n.total)??t.total??0)||0,o=Number((n==null?void 0:n.unitPrice)??(a>0?s/a:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||a||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:a,unitPrice:o,total:a*o}}}async function PPe(t,e){if(e<=0)return;const r=nr(bt(Oe,"inventory_clothes_batches"),sr("productId","==",t)),n=await Qt(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((o,l)=>o.date.localeCompare(l.date));let s=e;for(const o of a){if(s<=0)break;if(o.remaining<=0)continue;const l=Math.min(o.remaining,s);s-=l,await pn(zt(Oe,"inventory_clothes_batches",o.id),{remaining:Math.max(0,Number((o.remaining-l).toFixed(0)))})}s>0&&console.warn("consumeFIFO: falt inventario",s)}async function BPe(t,e){if(e<=0)return;const r=nr(bt(Oe,"inventory_clothes_batches"),sr("productId","==",t)),n=await Qt(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((o,l)=>o.date.localeCompare(l.date));let s=e;for(const o of a){if(s<=0)break;const l=Math.max(0,o.quantity-o.remaining);if(l<=0)continue;const c=Math.min(l,s);s-=c,await pn(zt(Oe,"inventory_clothes_batches",o.id),{remaining:Number((o.remaining+c).toFixed(0))})}s>0&&console.warn("restoreFIFO: no se devolvi todo",s)}async function Bre(t){const e=nr(bt(Oe,"ar_movements"),sr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Pn(zt(Oe,"ar_movements",n.id))))}async function TPe(t,e,r){if(await Bre(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:ur.now(),ref:{saleId:t.id}},{addDoc:a}=await Vh(async()=>{const{addDoc:o}=await Promise.resolve().then(()=>gye);return{addDoc:o}},void 0);await a(bt(Oe,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const s=Math.max(0,Number(r??t.downPayment??0));s>0&&await a(bt(Oe,"ar_movements"),{...n,type:"ABONO",amount:-s})}function kPe(){const[t,e]=x.useState(!1),[r,n]=x.useState(!1),[a,s]=x.useState(null),[o,l]=x.useState([]),c=async ie=>{e(!0),n(!0),s(ie),l([]);try{const Ie=(await Qt(nr(bt(Oe,"sales_clothes"),sr("__name__","==",ie)))).docs[0],ue=Ie==null?void 0:Ie.data(),Ee=(Array.isArray(ue==null?void 0:ue.items)?ue.items:ue!=null&&ue.item?[ue.item]:[]).map(je=>({productName:String(je.productName||""),qty:Number(je.qty||0),unitPrice:Number(je.unitPrice||0),discount:Number(je.discount||0),total:Number(je.total||0)}));l(Ee)}catch(ee){console.error(ee)}finally{n(!1)}},[u,d]=x.useState(Ir(new Date,"yyyy-MM-01")),[f,A]=x.useState(Ir(new Date,"yyyy-MM-dd")),[h,m]=x.useState([]),[p,g]=x.useState([]),[v,y]=x.useState(!0),[b,w]=x.useState(""),[j,I]=x.useState(""),[_,S]=x.useState(""),[E,F]=x.useState(null),[P,k]=x.useState(!1),[D,J]=x.useState(null),[fe,Ae]=x.useState(0),me=15,[pe,ne]=x.useState(1),Pe=x.useMemo(()=>{const ie={};return h.forEach(ee=>ie[ee.id]=ee.name),ie},[h]);x.useEffect(()=>{(async()=>{y(!0),w("");try{const ie=await Qt(bt(Oe,"customers_clothes")),ee=[];ie.forEach(se=>ee.push({id:se.id,name:se.data().name||""})),m(ee);const Ie=await Qt(nr(bt(Oe,"sales_clothes"),xn("createdAt","desc"))),ue=[];Ie.forEach(se=>{const Ee=jPe(se.data(),se.id);Ee&&Ee.date>=u&&Ee.date<=f&&ue.push(Ee)}),g(ue.sort((se,Ee)=>Ee.date.localeCompare(se.date))),ne(1)}catch(ie){console.error(ie),w(" Error cargando transacciones.")}finally{y(!1)}})()},[u,f]);const Be=x.useMemo(()=>p.filter(ie=>!(j&&ie.customerId!==j||_&&ie.type!==_)),[p,j,_]),O=x.useMemo(()=>{let ie=0,ee=0,Ie=0,ue=0;for(const se of Be)se.type==="CONTADO"?(ie+=se.item.qty,Ie+=se.total):(ee+=se.item.qty,ue+=se.total);return{piezasCash:ie,piezasCredito:ee,montoCash:Ie,montoCredito:ue}},[Be]),G=Math.max(1,Math.ceil(Be.length/me)),q=x.useMemo(()=>{const ie=(pe-1)*me;return Be.slice(ie,ie+me)},[Be,pe]),U=ie=>{F(null),J(ie),Ae(ie.item.qty||0),k(!0)},Y=async ie=>{if(F(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await Pk(ie.id),await Bre(ie.id),g(ee=>ee.filter(Ie=>Ie.id!==ie.id)),w(" Venta eliminada")}catch(ee){console.error(ee),w(" No se pudo eliminar la venta.")}finally{y(!1)}},Z=async()=>{if(!D)return;const ie=Number(D.item.qty||0),ee=Math.max(1,Math.floor(Number(fe)||0));if(ee===ie){k(!1);return}const Ie=Number(D.item.unitPrice||0),ue=Number((Ie*ee).toFixed(2));try{y(!0);const se=ee-ie;se>0?await PPe(D.item.productId,se):se<0&&await BPe(D.item.productId,-se);const Ee=zt(Oe,"sales_clothes",D.id);await pn(Ee,{quantity:ee,total:ue,itemsTotal:ue,"item.qty":ee,"item.total":ue,updatedAt:ur.now()});const je=Math.min(Number(D.downPayment||0),ue);await TPe(D,ue,je),g(it=>it.map(At=>At.id===D.id?{...At,quantity:ee,total:ue,item:{...At.item,qty:ee,total:ue},downPayment:je}:At)),w(" Venta actualizada"),k(!1)}catch(se){console.error(se),w(" No se pudo actualizar la venta.")}finally{y(!1)}},R=()=>{const ie=`Reporte de transacciones (Ropa)  ${u} a ${f}`,ee=Ee=>(Ee||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Ie=Be.map(Ee=>{const je=Ee.customerName||(Ee.customerId?Pe[Ee.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Ee.date}</td>
          <td>${ee(je)}</td>
          <td>${Ee.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Ee.item.qty}</td>
          <td style="text-align:right">${Ed(Ee.total)}</td>
        </tr>`}).join(""),ue=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${ee(ie)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${ee(ie)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${O.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${O.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${Ed(O.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Ed(O.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${Ie||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,se=window.open("","_blank");se&&(se.document.open(),se.document.write(ue),se.document.close())},H=()=>ne(1),te=()=>ne(ie=>Math.max(1,ie-1)),ye=()=>ne(ie=>Math.min(G,ie+1)),Q=()=>ne(G),Ge=()=>{const ie=[];if(G<=7)for(let Ie=1;Ie<=G;Ie++)ie.push(Ie);else{const Ie=Math.max(1,pe-2),ue=Math.min(G,pe+2);ie.push(1),Ie>2&&ie.push(-1);for(let se=Ie;se<=ue;se++)se!==1&&se!==G&&ie.push(se);ue<G-1&&ie.push(-2),ie.push(G)}return i.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:H,disabled:pe===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:te,disabled:pe===1,children:" Anterior"}),ie.map((Ie,ue)=>typeof Ie=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${Ie===pe?"bg-blue-600 text-white":""}`,onClick:()=>ne(Ie),children:Ie},ue):i.jsx("span",{className:"px-2",children:""},ue)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ye,disabled:pe===G,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Q,disabled:pe===G,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",pe," de ",G,"  ",Be.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ie=>{d(ie.target.value),ne(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:ie=>{A(ie.target.value),ne(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:j,onChange:ie=>{I(ie.target.value),ne(1)},children:[i.jsx("option",{value:"",children:"Todos"}),h.map(ie=>i.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:_,onChange:ie=>{S(ie.target.value),ne(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:R,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:O.piezasCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:O.piezasCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Ed(O.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Ed(O.montoCredito)})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Piezas"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:v?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):q.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):q.map(ie=>{const ee=ie.customerName||(ie.customerId?Pe[ie.customerId]:"")||"Nombre cliente";return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ie.date}),i.jsx("td",{className:"p-2 border",children:ee}),i.jsx("td",{className:"p-2 border",children:ie.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>c(ie.id),children:ie.item.qty})}),i.jsx("td",{className:"p-2 border",children:Ed(ie.total)}),i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>F(Ie=>Ie===ie.id?null:ie.id),title:"Acciones",children:""}),E===ie.id&&i.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>U(ie),children:"Editar"}),i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>Y(ie),children:"Eliminar"})]})]})]},ie.id)})})]}),Ge()]}),b&&i.jsx("p",{className:"mt-2 text-sm",children:b}),P&&D&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[i.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),i.jsxs("div",{className:"font-semibold",children:[D.item.productName," ",D.item.sku?` ${D.item.sku}`:""]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),i.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:fe,onChange:ie=>Ae(Math.max(1,Math.floor(Number(ie.target.value||0))))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),i.jsx("div",{className:"text-lg font-semibold",children:Ed(D.item.unitPrice)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),i.jsx("div",{className:"text-lg font-semibold",children:Ed(Number(D.item.unitPrice)*Number(fe||0))})]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{k(!1),J(null)},children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Z,children:"Guardar cambios"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):o.map((ie,ee)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:ie.productName}),i.jsx("td",{className:"p-2 border text-right",children:ie.qty}),i.jsx("td",{className:"p-2 border text-right",children:Ed(ie.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Ed(ie.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Ed(ie.total)})]},ee))})]})})]})})]})}const GV=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Wc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function RC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function KV(t){const e=nr(bt(Oe,"ar_movements_pollo"),sr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Pn(zt(Oe,"ar_movements_pollo",n.id))))}function FPe({role:t="",roles:e,sellerPolloId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),o=on(a,"vendedor_pollo"),l=on(a,"admin"),[c,u]=x.useState([]),[d,f]=x.useState(!1),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState(""),[y,b]=x.useState(""),[w,j]=x.useState(!1),[I,_]=x.useState(!1),[S,E]=x.useState(null),[F,P]=x.useState([]),k=async xt=>{var wr;j(!0),_(!0),E(xt),P([]);try{const st=await Ci(zt(Oe,"salesV2",xt));let Mt=null;st.exists()?Mt=st.data():Mt=(wr=(await Qt(nr(bt(Oe,"salesV2"),sr("name","==",xt)))).docs[0])==null?void 0:wr.data();const Dt=(Array.isArray(Mt==null?void 0:Mt.items)?Mt.items:Mt!=null&&Mt.item?[Mt.item]:[]).map(kt=>({productName:String(kt.productName||""),qty:Number(kt.qty||0),unitPrice:Number(kt.unitPrice||0),discount:Number(kt.discount||0),total:Number(kt.total||0)}));P(Dt)}catch(st){console.error(st)}finally{_(!1)}},[D,J]=x.useState(""),[fe,Ae]=x.useState("+505 "),[me,pe]=x.useState(""),[ne,Pe]=x.useState(""),[Be,O]=x.useState("ACTIVO"),[G,q]=x.useState(0),[U,Y]=x.useState(""),[Z,R]=x.useState(0),[H,te]=x.useState([]),[ye,Q]=x.useState(!0),[Ge,ie]=x.useState(""),[ee,Ie]=x.useState(null),[ue,se]=x.useState(""),[Ee,je]=x.useState("+505 "),[it,At]=x.useState(""),[pt,yt]=x.useState(""),[Ct,Et]=x.useState("ACTIVO"),[Re,We]=x.useState(0),[et,xe]=x.useState(""),[de,Ue]=x.useState(!1),[Ke,Ne]=x.useState(null),[mt,wt]=x.useState(!1),[we,ae]=x.useState([]),[be,ve]=x.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[Ve,ce]=x.useState(!1),[ke,dt]=x.useState(0),[ft,gt]=x.useState(new Date().toISOString().slice(0,10)),[Rt,ot]=x.useState(""),[Se,ht]=x.useState(!1),[W,Te]=x.useState(null),[Ze,tt]=x.useState(""),[ut,T]=x.useState(0),[M,L]=x.useState(""),[K,re]=x.useState(!1),[le,Me]=x.useState(null),[qe,lt]=x.useState(!1),[Fe,Xe]=x.useState(!1),[he,He]=x.useState(null);x.useEffect(()=>{(async()=>{try{if(Q(!0),o&&!s){te([]),ie(" Este usuario no tiene vendedor asociado (sellerPolloId vaco).");return}const xt=await Qt(bt(Oe,"sellers_candies")),wr=[];xt.forEach(Dt=>{const kt=Dt.data();wr.push({id:Dt.id,name:String(kt.name||"")})}),u(wr);const st=o?nr(bt(Oe,"customers_pollo"),sr("vendorId","==",s),xn("createdAt","desc")):nr(bt(Oe,"customers_pollo"),xn("createdAt","desc")),Mt=await Qt(st),$t=[];Mt.forEach(Dt=>{const kt=Dt.data();$t.push({id:Dt.id,name:kt.name??"",phone:kt.phone??"+505 ",place:kt.place??"",notes:kt.notes??"",status:kt.status??"ACTIVO",creditLimit:Number(kt.creditLimit??0),createdAt:kt.createdAt??ur.now(),balance:0,vendorId:kt.vendorId||"",vendorName:kt.vendorName||"",initialDebt:Number(kt.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const Dt of $t)try{const kt=nr(bt(Oe,"ar_movements_pollo"),sr("customerId","==",Dt.id)),qt=await Qt(kt);let Xt=0,Wt=null;qt.forEach(Nr=>{var qs,ts,rs;const Vr=Nr.data(),Gn=Number(Vr.amount||0);if(Xt+=Gn,Gn<0){const Ml=Vr.date??((ts=(qs=Vr.createdAt)==null?void 0:qs.toDate)!=null&&ts.call(qs)?Vr.createdAt.toDate().toISOString().slice(0,10):""),yu=(rs=Vr.createdAt)!=null&&rs.seconds?Number(Vr.createdAt.seconds):0;(!Wt||yu>=Wt.ts)&&(Wt={date:Ml,amount:Math.abs(Gn),ts:yu})}});const vr=Number(Dt.initialDebt||0);Dt.balance=vr+Xt,Wt?(Dt.lastAbonoDate=Wt==null?void 0:Wt.date,Dt.lastAbonoAmount=Wt==null?void 0:Wt.amount):(Dt.lastAbonoDate="",Dt.lastAbonoAmount=0)}catch{Dt.balance=Number(Dt.initialDebt||0),Dt.lastAbonoDate="",Dt.lastAbonoAmount=0}te($t)}catch(xt){console.error(xt),ie(" Error cargando clientes.")}finally{Q(!1)}})()},[o,s]);const Ye=()=>{J(""),Ae("+505 "),pe(""),Pe(""),O("ACTIVO"),q(0),Y(""),R(0)},ct=async xt=>{var $t;if(xt.preventDefault(),ie(""),!D.trim()){ie("Ingresa el nombre.");return}const wr=RC(fe);if(wr.length<6){ie("Telfono incompleto.");return}const st=o?s:String(U||""),Mt=st&&(($t=c.find(Dt=>Dt.id===st))==null?void 0:$t.name)||"";try{const Dt=Number(Z||0),kt=await Bn(bt(Oe,"customers_pollo"),{name:D.trim(),phone:wr,place:me||"",notes:ne||"",status:Be,creditLimit:Number(G||0),vendorId:st,vendorName:Mt,initialDebt:Dt,createdAt:ur.now()});te(qt=>[{id:kt.id,name:D.trim(),phone:wr,place:me||"",notes:ne||"",status:Be,creditLimit:Number(G||0),vendorId:st,vendorName:Mt,initialDebt:Dt,createdAt:ur.now(),balance:Dt,lastAbonoDate:"",lastAbonoAmount:0},...qt]),Ye(),re(!1),ie(" Cliente creado")}catch(Dt){console.error(Dt),ie(" Error al crear cliente")}},Nt=xt=>{if(o){ie(" No permitido: vendedores no editan clientes desde el listado.");return}Ie(xt.id),se(xt.name),je(xt.phone||"+505 "),At(xt.place||""),yt(xt.notes||""),Et(xt.status||"ACTIVO"),We(Number(xt.creditLimit||0)),xe(String(xt.vendorId||""))},It=()=>{Ie(null),se(""),je("+505 "),At(""),yt(""),Et("ACTIVO"),We(0),xe("")},hr=async()=>{var kt;if(o){ie(" No permitido.");return}if(!ee)return;const xt=RC(Ee);if(!ue.trim()){ie("Ingresa el nombre.");return}const wr=H.find(qt=>qt.id===ee),st=String((wr==null?void 0:wr.vendorId)||""),Mt=o?s:String(et||"");if(o&&st&&st!==s){ie(" Este cliente pertenece a otro vendedor.");return}if(l&&st&&Mt&&st!==Mt){ie(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const $t=o?s:String(et||""),Dt=$t&&((kt=c.find(qt=>qt.id===$t))==null?void 0:kt.name)||"";try{await pn(zt(Oe,"customers_pollo",ee),{name:ue.trim(),phone:xt,place:it||"",notes:pt||"",status:Ct,creditLimit:Number(Re||0),vendorId:$t,vendorName:Dt}),te(qt=>qt.map(Xt=>Xt.id===ee?{...Xt,name:ue.trim(),phone:xt,place:it||"",notes:pt||"",status:Ct,creditLimit:Number(Re||0),vendorId:$t,vendorName:Dt}:Xt)),It(),ie(" Cliente actualizado")}catch(qt){console.error(qt),ie(" Error al actualizar")}},Ot=async xt=>{if(confirm(`Eliminar al cliente "${xt.name}"?
Se borrarn todas sus ventas y movimientos.`))try{Q(!0);const st=nr(bt(Oe,"salesV2"),sr("customerId","==",xt.id)),Mt=await Qt(st);for(const kt of Mt.docs){const qt=kt.id;try{await Pn(zt(Oe,"salesV2",qt))}catch(Xt){console.warn("delete sale error",Xt)}await KV(qt)}const $t=nr(bt(Oe,"ar_movements_pollo"),sr("customerId","==",xt.id)),Dt=await Qt($t);await Promise.all(Dt.docs.map(kt=>Pn(zt(Oe,"ar_movements_pollo",kt.id)))),await Pn(zt(Oe,"customers_pollo",xt.id)),te(kt=>kt.filter(qt=>qt.id!==xt.id)),ie(" Cliente eliminado y registros borrados")}catch(st){console.error(st),ie(" No se pudo eliminar el cliente.")}finally{Q(!1)}},Ft=(xt,wr)=>{const st=xt.reduce((kt,qt)=>kt+(Number(qt.amount)||0),0),Mt=xt.filter(kt=>Number(kt.amount)<0).reduce((kt,qt)=>kt+Math.abs(Number(qt.amount)||0),0),$t=xt.filter(kt=>Number(kt.amount)>0).reduce((kt,qt)=>kt+(Number(qt.amount)||0),0),Dt=Number(wr||0)+st;ve({saldoActual:Dt,totalAbonado:Mt,totalCargos:Number(wr||0)+$t,saldoRestante:Dt})},lr=async xt=>{Ne(xt),ae([]),ve({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),Ue(!0),lt(!1),Xe(!1),He(null),ce(!1),dt(0),gt(new Date().toISOString().slice(0,10)),ot(""),Te(null),wt(!0);try{const wr=nr(bt(Oe,"ar_movements_pollo"),sr("customerId","==",xt.id)),st=await Qt(wr),Mt=[];st.forEach($t=>{var Xt,Wt;const Dt=$t.data(),kt=Dt.date??((Wt=(Xt=Dt.createdAt)==null?void 0:Xt.toDate)!=null&&Wt.call(Xt)?Dt.createdAt.toDate().toISOString().slice(0,10):""),qt=Number(Dt.amount||0);Mt.push({id:$t.id,date:kt,type:Dt.type??(qt<0?"ABONO":"CARGO"),amount:qt,ref:Dt.ref||{},comment:Dt.comment||"",createdAt:Dt.createdAt})}),Mt.sort(($t,Dt)=>{var Xt,Wt;if($t.date!==Dt.date)return $t.date.localeCompare(Dt.date);const kt=((Xt=$t.createdAt)==null?void 0:Xt.seconds)||0,qt=((Wt=Dt.createdAt)==null?void 0:Wt.seconds)||0;return kt-qt}),ae(Mt),Ft(Mt,Number(xt.initialDebt||0))}catch(wr){console.error(wr),ie(" No se pudo cargar el estado de cuenta")}finally{wt(!1)}},ir=xt=>{const wr=xt.filter(st=>Number(st.amount)<0).map(st=>{var Mt;return{date:st.date,amount:Math.abs(Number(st.amount||0)),ts:((Mt=st.createdAt)==null?void 0:Mt.seconds)||0}}).sort((st,Mt)=>(st.ts||0)-(Mt.ts||0));return wr.length?wr[wr.length-1]:null},Pt=async()=>{if(!Ke)return;ie("");const xt=Number(ke||0);if(!(xt>0)){ie("Ingresa un monto de abono mayor a 0.");return}const wr=parseFloat(xt.toFixed(2));if(!ft){ie("Selecciona la fecha del abono.");return}try{ht(!0);const st={customerId:Ke.id,type:"ABONO",amount:-wr,date:ft,comment:Rt||"",createdAt:ur.now()},$t={id:(await Bn(bt(Oe,"ar_movements_pollo"),st)).id,date:ft,type:"ABONO",amount:-wr,comment:Rt||"",createdAt:ur.now()},Dt=[...we,$t].sort((kt,qt)=>{var vr,Nr;if(kt.date!==qt.date)return kt.date.localeCompare(qt.date);const Xt=((vr=kt.createdAt)==null?void 0:vr.seconds)||0,Wt=((Nr=qt.createdAt)==null?void 0:Nr.seconds)||0;return Xt-Wt});ae(Dt),Ft(Dt,Number(Ke.initialDebt||0)),te(kt=>kt.map(qt=>{if(qt.id!==Ke.id)return qt;const Xt=(qt.balance||0)-wr;return{...qt,balance:Xt,lastAbonoDate:ft,lastAbonoAmount:wr}})),Ne(kt=>kt&&{...kt,balance:(kt.balance||0)-wr,lastAbonoDate:ft,lastAbonoAmount:wr}),dt(0),ot(""),gt(new Date().toISOString().slice(0,10)),ce(!1),ie(" Abono registrado")}catch(st){console.error(st),ie(" Error al registrar el abono")}finally{ht(!1)}},mr=xt=>{Te(xt.id),tt(xt.date||new Date().toISOString().slice(0,10)),T(Math.abs(Number(xt.amount||0))),L(xt.comment||"")},Fr=()=>{Te(null),tt(""),T(0),L("")},jr=async()=>{if(!W||!Ke)return;const xt=we.findIndex($t=>$t.id===W);if(xt===-1)return;const wr=we[xt],st=Number(ut||0);if(!(st>0)){ie("El monto debe ser mayor a 0.");return}const Mt=wr.type==="ABONO"?-parseFloat(st.toFixed(2)):+parseFloat(st.toFixed(2));try{await pn(zt(Oe,"ar_movements_pollo",W),{date:Ze,amount:Mt,comment:M||""});const $t=[...we];$t[xt]={...wr,date:Ze,amount:Mt,comment:M||""},$t.sort((Xt,Wt)=>{var Vr,Gn;if(Xt.date!==Wt.date)return Xt.date.localeCompare(Wt.date);const vr=((Vr=Xt.createdAt)==null?void 0:Vr.seconds)||0,Nr=((Gn=Wt.createdAt)==null?void 0:Gn.seconds)||0;return vr-Nr}),ae($t),Ft($t,Number(Ke.initialDebt||0));const Dt=$t.reduce((Xt,Wt)=>Xt+(Number(Wt.amount)||0),0),kt=Number(Ke.initialDebt||0)+Dt,qt=ir($t);te(Xt=>Xt.map(Wt=>Wt.id===Ke.id?{...Wt,balance:kt,lastAbonoDate:(qt==null?void 0:qt.date)||"",lastAbonoAmount:(qt==null?void 0:qt.amount)||0}:Wt)),Ne(Xt=>Xt&&{...Xt,balance:kt,lastAbonoDate:(qt==null?void 0:qt.date)||"",lastAbonoAmount:(qt==null?void 0:qt.amount)||0}),Fr(),ie(" Movimiento actualizado")}catch($t){console.error($t),ie(" Error al actualizar movimiento")}},Qr=async xt=>{var st,Mt;if(confirm(`Eliminar este movimiento (${xt.type==="ABONO"?"Abono":"Compra"}) del ${xt.date}?${xt.type==="CARGO"&&((st=xt.ref)!=null&&st.saleId)?`
Se borrarn los registros de esa venta.`:""}`)&&Ke)try{if(Q(!0),xt.type==="CARGO"&&((Mt=xt.ref)!=null&&Mt.saleId)){try{await Pn(zt(Oe,"salesV2",xt.ref.saleId))}catch(Xt){console.warn("delete sale error",Xt),Q(!1),ie(" No se pudo borrar la venta asociada.");return}await KV(xt.ref.saleId)}else await Pn(zt(Oe,"ar_movements_pollo",xt.id));const $t=we.filter(Xt=>{var Wt,vr;return xt.type==="CARGO"&&((Wt=xt.ref)!=null&&Wt.saleId)?((vr=Xt.ref)==null?void 0:vr.saleId)!==xt.ref.saleId:Xt.id!==xt.id});ae($t),Ft($t,Number(Ke.initialDebt||0));const Dt=$t.reduce((Xt,Wt)=>Xt+(Number(Wt.amount)||0),0),kt=Number(Ke.initialDebt||0)+Dt,qt=ir($t);te(Xt=>Xt.map(Wt=>Wt.id===Ke.id?{...Wt,balance:kt,lastAbonoDate:(qt==null?void 0:qt.date)||"",lastAbonoAmount:(qt==null?void 0:qt.amount)||0}:Wt)),Ne(Xt=>Xt&&{...Xt,balance:kt,lastAbonoDate:(qt==null?void 0:qt.date)||"",lastAbonoAmount:(qt==null?void 0:qt.amount)||0}),He(null),ie(" Movimiento eliminado")}catch($t){console.error($t),ie(" Error al eliminar movimiento")}finally{Q(!1)}},Dr=x.useMemo(()=>[...H].sort((xt,wr)=>{var st,Mt;return xt.status!==wr.status?xt.status==="BLOQUEADO"?1:-1:(((st=wr.createdAt)==null?void 0:st.seconds)||0)-(((Mt=xt.createdAt)==null?void 0:Mt.seconds)||0)}),[H]),nn=xt=>xt==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",zn=x.useMemo(()=>{const xt=A.trim().toLowerCase(),wr=g.trim()===""?null:Number(g),st=y.trim()===""?null:Number(y);return Dr.filter(Mt=>{const $t=!xt||String(Mt.name||"").toLowerCase().includes(xt),Dt=!m||Mt.status===m,kt=Number(Mt.balance||0),qt=wr===null||!Number.isNaN(wr)&&kt>=wr,Xt=st===null||!Number.isNaN(st)&&kt<=st;return $t&&Dt&&qt&&Xt})},[Dr,A,m,g,y]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Pollo)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{re(!0),o&&Y(s)},type:"button",children:"Crear Cliente"})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:ye?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):zn.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):zn.map(xt=>{var st;const wr=ee===xt.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(st=xt.createdAt)!=null&&st.toDate?xt.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border text-left",children:wr?i.jsx("input",{className:"w-full border p-1 rounded",value:ue,onChange:Mt=>se(Mt.target.value)}):i.jsx("div",{className:"font-medium",children:xt.name})}),i.jsx("td",{className:"p-2 border",children:wr?i.jsx("input",{className:"w-full border p-1 rounded",value:Ee,onChange:Mt=>je(RC(Mt.target.value))}):xt.phone}),i.jsx("td",{className:"p-2 border",children:wr?i.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:o?s:et,onChange:Mt=>xe(Mt.target.value),disabled:o,title:"Vendedor asociado",children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Mt=>i.jsx("option",{value:Mt.id,children:Mt.name},Mt.id))]}):xt.vendorName||""}),i.jsx("td",{className:"p-2 border",children:wr?i.jsxs("select",{className:"w-full border p-1 rounded",value:it,onChange:Mt=>At(Mt.target.value),children:[i.jsx("option",{value:"",children:""}),GV.map(Mt=>i.jsx("option",{value:Mt,children:Mt},Mt))]}):xt.place||""}),i.jsx("td",{className:"p-2 border",children:wr?i.jsxs("select",{className:"w-full border p-1 rounded",value:Ct,onChange:Mt=>Et(Mt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${nn(xt.status)}`,children:xt.status})}),i.jsx("td",{className:"p-2 border",children:wr?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Re)?"":Re,onChange:Mt=>We(Math.max(0,Number(Mt.target.value||0)))}):Wc(xt.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:Wc(xt.balance||0)}),i.jsx("td",{className:"p-2 border",children:wr?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:pt,onChange:Mt=>yt(Mt.target.value),maxLength:500}):i.jsx("span",{title:xt.notes||"",children:(xt.notes||"").length>40?(xt.notes||"").slice(0,40)+"":xt.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:wr?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:hr,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:It,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Nt(xt),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>Ot(xt),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>lr(xt),children:"Estado de cuenta"})]})})})]},xt.id)})})]})}),i.jsx("div",{className:"md:hidden space-y-2",children:ye?i.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Cargando"}):zn.length===0?i.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Sin clientes"}):zn.map(xt=>i.jsxs("div",{className:"border rounded-lg bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-base",children:xt.name}),i.jsx("div",{className:"text-xs text-gray-600",children:xt.phone||""}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Vendedor:"," ",i.jsx("span",{className:"font-medium",children:xt.vendorName||""})]})]}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${nn(xt.status)}`,children:xt.status})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Saldo"}),i.jsx("div",{className:"font-semibold",children:Wc(xt.balance||0)})]}),i.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Lmite"}),i.jsx("div",{className:"font-semibold",children:Wc(xt.creditLimit||0)})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["ltimo abono:"," ",i.jsx("span",{className:"font-medium",children:xt.lastAbonoDate?`${xt.lastAbonoDate} (${Wc(xt.lastAbonoAmount||0)})`:""})]}),xt.notes?i.jsxs("div",{className:"mt-2 text-xs text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:"Nota:"})," ",(xt.notes||"").length>80?(xt.notes||"").slice(0,80)+"":xt.notes]}):null,i.jsxs("div",{className:"mt-3 flex gap-2 flex-wrap",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",onClick:()=>lr(xt),children:"Estado de cuenta"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-yellow-600 text-white text-sm",onClick:()=>Nt(xt),disabled:o,title:o?"Vendedor no edita":"Editar",children:"Editar"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-red-600 text-white text-sm disabled:opacity-50",onClick:()=>Ot(xt),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"})]})]},xt.id))})]}),Ge&&i.jsx("p",{className:"mt-2 text-sm",children:Ge}),K&&uu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>re(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>re(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:ct,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:D,onChange:xt=>J(xt.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:fe,onChange:xt=>Ae(RC(xt.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:me,onChange:xt=>pe(xt.target.value),children:[i.jsx("option",{value:"",children:""}),GV.map(xt=>i.jsx("option",{value:xt,children:xt},xt))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Be,onChange:xt=>O(xt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o?s:U,onChange:xt=>Y(xt.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(xt=>i.jsx("option",{value:xt.id,children:xt.name},xt.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Z===0?"":Z,onChange:xt=>R(Math.max(0,Number(xt.target.value||0))),placeholder:"Ej: 1500"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:G===0?"":G,onChange:xt=>q(Math.max(0,Number(xt.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ne,onChange:xt=>Pe(xt.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ne.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>re(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),de&&uu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[80]",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ue(!1)}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-full max-w-5xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 gap-3",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(Ke==null?void 0:Ke.name)||""]}),i.jsxs("div",{className:"flex gap-2 shrink-0",children:[i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{dt(0),gt(new Date().toISOString().slice(0,10)),ot(""),ce(!0)},children:"Abonar"}),i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ue(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),i.jsx("div",{className:"text-xl font-semibold",children:Wc(Number((Ke==null?void 0:Ke.initialDebt)||0))})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Wc(be.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:Wc(be.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:Wc(be.saldoRestante)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:mt?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):we.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):we.map(xt=>{var st,Mt;const wr=W===xt.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:wr?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Ze,onChange:$t=>tt($t.target.value)}):xt.date||""}),i.jsx("td",{className:"p-2 border",children:xt.amount>=0?(st=xt.ref)!=null&&st.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",onClick:()=>k(xt.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(Mt=xt.ref)!=null&&Mt.saleId?`Venta #${xt.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:wr?i.jsx("input",{className:"w-full border p-1 rounded",value:M,onChange:$t=>L($t.target.value)}):i.jsx("span",{title:xt.comment||"",children:(xt.comment||"").length>40?(xt.comment||"").slice(0,40)+"":xt.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:wr?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ut)?"":ut,onChange:$t=>T(Number($t.target.value||0))}):Wc(xt.amount)}),i.jsx("td",{className:"p-2 border",children:wr?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:jr,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Fr,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>mr(xt),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Qr(xt),children:"Borrar"})]})})]},xt.id)})})]})})]})})]}),document.body),Ve&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[90]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(Ke==null?void 0:Ke.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:ft,onChange:xt=>gt(xt.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ke===0?"":ke,onChange:xt=>{const wr=Number(xt.target.value||0),st=Number.isFinite(wr)?Math.max(0,parseFloat(wr.toFixed(2))):0;dt(st)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Rt,onChange:xt=>ot(xt.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[Rt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ce(!1),disabled:Se,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Pt,disabled:Se,children:Se?"Guardando...":"Guardar abono"})]})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," ",S?` #${S}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:I?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):F.map((xt,wr)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:xt.productName}),i.jsx("td",{className:"p-2 border text-right",children:xt.qty}),i.jsx("td",{className:"p-2 border text-right",children:Wc(xt.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Wc(xt.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Wc(xt.total)})]},wr))})]})})]})})]})}function OPe(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function DPe(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var RPe=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MPe=function(t){RPe(e,t);function e(r,n){var a=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),OPe(s,a.prototype),DPe(s),s}return e}(Error),LPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fc=function(t){LPe(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(MPe),UPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gi=function(t){UPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Fc),QPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cn=function(t){QPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Fc),Tre=function(){function t(e){if(this.binarizer=e,e===null)throw new cn("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var s=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),VPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oi=function(t){VPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Fc),HPe=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Ja=function(){function t(){}return t.arraycopy=function(e,r,n,a,s){for(;s--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),$Pe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S6=function(t){$Pe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Fc),GPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qV=function(t){GPe(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(S6),KPe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ro=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new cn("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new qV(r);if(n>e)throw new qV(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var s=KPe(e),o=s.next();!o.done;o=s.next()){var l=o.value;a=31*a+l}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,s=new Int32Array(a);return Ja.arraycopy(e,r,s,0,a),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,s=e.length-1;a<=s;){var o=s+a>>1,l=n(r,e[o]);if(l>0)a=o+1;else if(l<0)s=o-1;else return o}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),Rn=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),jo=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Ja.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=n[a];s&=~((1<<(e&31))-1);for(var o=n.length;s===0;){if(++a===o)return r;s=n[a]}var l=a*32+Rn.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=~n[a];s&=~((1<<(e&31))-1);for(var o=n.length;s===0;){if(++a===o)return r;s=~n[a]}var l=a*32+Rn.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new cn;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),s=this.bits,o=n;o<=a;o++){var l=o>n?0:e&31,c=o<a?31:r&31,u=(2<<c)-(1<<l);s[o]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new cn;if(r===e)return!0;r--;for(var a=Math.floor(e/32),s=Math.floor(r/32),o=this.bits,l=a;l<=s;l++){var c=l>a?0:e&31,u=l<s?31:r&31,d=(2<<u)-(1<<c)&4294967295;if((o[l]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new cn("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new cn("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var s=0;s<a;s++){for(var o=0,l=0;l<8;l++)this.get(e)&&(o|=1<<7-l),e++;r[n+s]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,s=0;s<n;s++){var o=a[s];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-s]=o}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,s=1;s<n;s++){var u=e[s];c|=u<<32-l,e[s-1]=c,c=u>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&ro.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+ro.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),Bk;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Bk||(Bk={}));const Za=Bk;var qPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sr=function(t){qPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Fc),zPe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Na;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Na||(Na={}));var to=function(){function t(e,r,n){for(var a,s,o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,d=c.length;u!==d;u++){var f=c[u];t.VALUES_TO_ECI.set(f,this)}try{for(var A=zPe(o),h=A.next();!h.done;h=A.next()){var m=h.value;t.NAME_TO_ECI.set(m,this)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Sr("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new Sr("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new Sr("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Na.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Na.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Na.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Na.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Na.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Na.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Na.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Na.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Na.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Na.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Na.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Na.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Na.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Na.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Na.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Na.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Na.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Na.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Na.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Na.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Na.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Na.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Na.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Na.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Na.Big5,28,"Big5"),t.GB18030=new t(Na.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Na.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),WPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oE=function(t){WPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Fc),sd=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof to?e:to.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",s=0,o=e.length;s<o;s++){var l=e[s].toString(16);l.length<2&&(l="0"+l),a+="%"+l}return decodeURIComponent(a)}if(n.equals(to.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new oE("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(to.UTF8)||e.equals(to.ISO8859_1)||e.equals(to.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],s=0;s<n.length;s++)a.push(n[s].charCodeAt(0));return new Uint8Array(a)},t}(),Yn=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return sd.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(Za.CHARACTER_SET)!==void 0)return r.get(Za.CHARACTER_SET).toString();for(var n=e.length,a=!0,s=!0,o=!0,l=0,c=0,u=0,d=0,f=0,A=0,h=0,m=0,p=0,g=0,v=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<n&&(a||s||o);b++){var w=e[b]&255;o&&(l>0?w&128?l--:o=!1:w&128&&(w&64?(l++,w&32?(l++,w&16?(l++,w&8?o=!1:d++):u++):c++):o=!1)),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&v++),s&&(f>0?w<64||w===127||w>252?s=!1:f--:w===128||w===160||w>239?s=!1:w>160&&w<224?(A++,m=0,h++,h>p&&(p=h)):w>127?(f++,h=0,m++,m>g&&(g=m)):(h=0,m=0))}return o&&l>0&&(o=!1),s&&f>0&&(s=!1),o&&(y||c+u+d>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||p>=3||g>=3)?t.SHIFT_JIS:a&&s?p===2&&A===2||v*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:s?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function s(l,c,u,d,f,A){if(l==="%%")return"%";if(r[++a]!==void 0){l=d?parseInt(d.substr(1)):void 0;var h=f?parseInt(f.substr(1)):void 0,m;switch(A){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(l);break;case"p":m=parseFloat(r[a]).toPrecision(l);break;case"e":m=parseFloat(r[a]).toExponential(l);break;case"x":m=parseInt(r[a]).toString(h||16);break;case"d":m=parseFloat(parseInt(r[a],h||10).toPrecision(l)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(h);for(var p=parseInt(u),g=u&&u[0]+""=="0"?"0":" ";m.length<p;)m=c!==void 0?m+g:g+m;return m}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,s)},t.getBytes=function(e,r){return sd.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=to.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=to.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=to.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),Tn=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Yn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),Vf=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new cn("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),s=0;s<r;s++)for(var o=e[s],l=0;l<n;l++)o[l]&&a.set(l,s);return a},t.parseFromString=function(e,r,n){if(e===null)throw new cn("stringRepresentation cannot be null");for(var a=new Array(e.length),s=0,o=0,l=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(s>o){if(l===-1)l=s-o;else if(s-o!==l)throw new cn("row lengths do not match");o=s,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[s]=!0,s++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[s]=!1,s++;else throw new cn("illegal character encountered: "+e.substring(u));if(s>o){if(l===-1)l=s-o;else if(s-o!==l)throw new cn("row lengths do not match");c++}for(var d=new t(l,c),f=0;f<s;f++)a[f]&&d.set(Math.floor(f%l),Math.floor(f/l));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new cn("input matrix dimensions do not match");for(var r=new jo(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,s=0,o=this.height;s<o;s++)for(var l=s*n,c=e.getRow(s,r).getBitArray(),u=0;u<n;u++)a[l+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new cn("Left and top must be nonnegative");if(a<1||n<1)throw new cn("Height and width must be at least 1");var s=e+n,o=r+a;if(o>this.height||s>this.width)throw new cn("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,u=r;u<o;u++)for(var d=u*l,f=e;f<s;f++)c[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new jo(this.width):r.clear();for(var n=this.rowSize,a=this.bits,s=e*n,o=0;o<n;o++)r.setBulk(o*32,a[s+o]);return r},t.prototype.setRow=function(e,r){Ja.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new jo(e),a=new jo(e),s=0,o=Math.floor((r+1)/2);s<o;s++)n=this.getRow(s,n),a=this.getRow(r-1-s,a),n.reverse(),a.reverse(),this.setRow(s,a),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,s=e,o=r,l=-1,c=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var f=a[u*n+d];if(f!==0){if(u<o&&(o=u),u>c&&(c=u),d*32<s){for(var A=0;!(f<<31-A&4294967295);)A++;d*32+A<s&&(s=d*32+A)}if(d*32+31>l){for(var A=31;!(f>>>A);)A--;d*32+A>l&&(l=d*32+A)}}}return l<s||c<o?null:Int32Array.from([s,o,l-s+1,c-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,s=n%e*32,o=r[n],l=0;!(o<<31-l&4294967295);)l++;return s+=l,Int32Array.from([s,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),s=Math.floor(n%e)*32,o=r[n],l=31;!(o>>>l);)l--;return s+=l,Int32Array.from([s,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&ro.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ro.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new Tn,s=0,o=this.height;s<o;s++){for(var l=0,c=this.width;l<c;l++)a.append(this.get(l,s)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),XPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yt=function(t){XPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Fc),YPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JPe=function(t){YPe(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),s=a.getWidth();n==null||n.getSize()<s?n=new jo(s):n.clear(),this.initArrays(s);for(var o=a.getRow(r,this.luminances),l=this.buckets,c=0;c<s;c++)l[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(l);if(s<3)for(var c=0;c<s;c++)(o[c]&255)<u&&n.set(c);else for(var d=o[0]&255,f=o[1]&255,c=1;c<s-1;c++){var A=o[c+1]&255;(f*4-d-A)/2<u&&n.set(c),d=f,f=A}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),s=new Vf(n,a);this.initArrays(n);for(var o=this.buckets,l=1;l<5;l++)for(var c=Math.floor(a*l/5),u=r.getRow(c,this.luminances),d=Math.floor(n*4/5),f=Math.floor(n/5);f<d;f++){var A=u[f]&255;o[A>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(o),m=r.getMatrix(),l=0;l<a;l++)for(var p=l*n,f=0;f<n;f++){var A=m[p+f]&255;A<h&&s.set(f,l)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,s=0,o=0,l=0;l<n;l++)r[l]>o&&(s=l,o=r[l]),r[l]>a&&(a=r[l]);for(var c=0,u=0,l=0;l<n;l++){var d=l-s,f=r[l]*d*d;f>u&&(c=l,u=f)}if(s>c){var A=s;s=c,c=A}if(c-s<=n/16)throw new Yt;for(var h=c-1,m=-1,l=c-1;l>s;l--){var p=l-s,f=p*p*(c-l)*(a-r[l]);f>m&&(h=l,m=f)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(HPe),ZPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kre=function(t){ZPe(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&o++;var l=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&l++;var c=e.calculateBlackPoints(s,o,l,n,a),u=new Vf(n,a);e.calculateThresholdForBlock(s,o,l,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,s,o,l,c){for(var u=o-e.BLOCK_SIZE,d=s-e.BLOCK_SIZE,f=0;f<a;f++){var A=f<<e.BLOCK_SIZE_POWER;A>u&&(A=u);for(var h=e.cap(f,2,a-3),m=0;m<n;m++){var p=m<<e.BLOCK_SIZE_POWER;p>d&&(p=d);for(var g=e.cap(m,2,n-3),v=0,y=-2;y<=2;y++){var b=l[h+y];v+=b[g-2]+b[g-1]+b[g]+b[g+1]+b[g+2]}var w=v/25;e.thresholdBlock(r,p,A,w,s,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,s,o,l){for(var c=0,u=a*o+n;c<e.BLOCK_SIZE;c++,u+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=s&&l.set(n+d,a+c)},e.calculateBlackPoints=function(r,n,a,s,o){for(var l=o-e.BLOCK_SIZE,c=s-e.BLOCK_SIZE,u=new Array(a),d=0;d<a;d++){u[d]=new Int32Array(n);var f=d<<e.BLOCK_SIZE_POWER;f>l&&(f=l);for(var A=0;A<n;A++){var h=A<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var m=0,p=255,g=0,v=0,y=f*s+h;v<e.BLOCK_SIZE;v++,y+=s){for(var b=0;b<e.BLOCK_SIZE;b++){var w=r[y+b]&255;m+=w,w<p&&(p=w),w>g&&(g=w)}if(g-p>e.MIN_DYNAMIC_RANGE)for(v++,y+=s;v<e.BLOCK_SIZE;v++,y+=s)for(var b=0;b<e.BLOCK_SIZE;b++)m+=r[y+b]&255}var j=m>>e.BLOCK_SIZE_POWER*2;if(g-p<=e.MIN_DYNAMIC_RANGE&&(j=p/2,d>0&&A>0)){var I=(u[d-1][A]+2*u[d][A-1]+u[d-1][A-1])/4;p<I&&(j=I)}u[d][A]=j}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(JPe),Iw=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new oE("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new oE("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new oE("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new Tn,n=0;n<this.height;n++){for(var a=this.getRow(n,e),s=0;s<this.width;s++){var o=a[s]&255,l=void 0;o<64?l="#":o<128?l="+":o<192?l=".":l=" ",r.append(l)}r.append(`
`)}return r.toString()},t}(),e3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kj=function(t){e3e(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),s=this.getWidth(),o=0;o<s;o++)a[o]=255-(a[o]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=255-(r[s]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,s){return new e(this.delegate.crop(r,n,a,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Iw),t3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r3e=function(t){t3e(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,s){s===void 0&&(s=!1);var o=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var l=0,c=0,u=r.length;l<u;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var A=r[l],h=r[l+1],m=r[l+2];d=306*A+601*h+117*m+512>>10}o[c]=d}else for(var l=0,c=0,p=r.length;l<p;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var A=r[l],h=r[l+1],m=r[l+2];d=306*A+601*h+117*m+512>>10}o[c]=255-d}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new cn("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(s))*o+Math.abs(Math.sin(s))*l),u=Math.ceil(Math.abs(Math.sin(s))*o+Math.abs(Math.cos(s))*l);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(s),a.drawImage(this.canvas,o/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Kj(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Iw),n3e=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Gl=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},Kl=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},a3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o1=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Gl(this,void 0,void 0,function(){var e,r,n,a,s,o,l,c,u,d,f,A;return Kl(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=a3e(e),a=n.next();!a.done;a=n.next())s=a.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device "+(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:o,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(A=n.return)&&A.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Gl(this,void 0,void 0,function(){var e;return Kl(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new n3e(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Gl(this,void 0,void 0,function(){var r;return Kl(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Gl(this,void 0,void 0,function(){return Kl(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Gl(this,void 0,void 0,function(){var n,a;return Kl(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Gl(this,void 0,void 0,function(){var n;return Kl(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Gl(this,void 0,void 0,function(){var n,a;return Kl(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return a=s.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Gl(this,void 0,void 0,function(){return Kl(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Gl(this,void 0,void 0,function(){var a,s;return Kl(this,function(o){switch(o.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Gl(this,void 0,void 0,function(){var a;return Kl(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=s.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Gl(this,void 0,void 0,function(){var a;return Kl(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=s.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Gl(this,void 0,void 0,function(){var n;return Kl(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Gl(this,void 0,void 0,function(){return Kl(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new gi("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new gi("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new gi("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new gi("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new gi("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new gi("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new gi("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new gi("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new gi("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new gi("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Gl(this,void 0,void 0,function(){return Kl(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Gl(this,void 0,void 0,function(){return Kl(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(o,l){if(a._stopAsyncDecode){l(new Yt("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);o(c)}catch(A){var u=r&&A instanceof Yt,d=A instanceof Oi||A instanceof Sr,f=d&&n;if(u||f)return setTimeout(s,a._timeBetweenDecodingAttempts,o,l);l(A)}};return new Promise(function(o,l){return s(o,l)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var o=c instanceof Oi||c instanceof Sr,l=c instanceof Yt;(o||l)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new r3e(n,r),s=new kre(a);return new Tre(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),Dl=function(){function t(e,r,n,a,s,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=Ja.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=s,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=s,this.resultMetadata=null,o==null?this.timestamp=Ja.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Ja.arraycopy(r,0,n,0,r.length),Ja.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Tk;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Tk||(Tk={}));const ln=Tk;var kk;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(kk||(kk={}));const al=kk;var qj=function(){function t(e,r,n,a,s,o){s===void 0&&(s=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Uy=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new cn;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),z0=function(){function t(e,r){if(r.length===0)throw new cn;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),Ja.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,s=r.length;a!==s;a++){var o=r[a];n=Uy.addOrSubtract(n,o)}return n}n=r[0];for(var l=r.length,c=this.field,a=1;a<l;a++)n=Uy.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new cn("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),o=n.length-r.length;Ja.arraycopy(n,0,s,0,o);for(var l=o;l<n.length;l++)s[l]=Uy.addOrSubtract(r[l-o],n[l]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new cn("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,o=new Int32Array(n+s-1),l=this.field,c=0;c<n;c++)for(var u=r[c],d=0;d<s;d++)o[c+d]=Uy.addOrSubtract(o[c+d],l.multiply(u,a[d]));return new t(l,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),s=this.coefficients,o=0;o<r;o++)a[o]=n.multiply(s[o],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new cn;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,s=new Int32Array(a+e),o=this.field,l=0;l<a;l++)s[l]=o.multiply(n[l],r);return new t(o,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new cn("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new cn("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,s=e.getCoefficient(e.getDegree()),o=r.inverse(s);a.getDegree()>=e.getDegree()&&!a.isZero();){var l=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),o),u=e.multiplyByMonomial(l,c),d=r.buildMonomial(l,c);n=n.addOrSubtract(d),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),s3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fre=function(t){s3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Fc),i3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wc=function(t){i3e(e,t);function e(r,n,a){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=a;for(var o=new Int32Array(n),l=1,c=0;c<n;c++)o[c]=l,l*=2,l>=n&&(l^=r,l&=n-1);s.expTable=o;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[o[c]]=c;return s.logTable=u,s.zero=new z0(s,Int32Array.from([0])),s.one=new z0(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new cn;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new z0(this,a)},e.prototype.inverse=function(r){if(r===0)throw new Fre;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Rn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Uy),o3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MC=function(t){o3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Fc),l3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jw=function(t){l3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Fc),zj=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new z0(n,e),s=new Int32Array(r),o=!0,l=0;l<r;l++){var c=a.evaluateAt(n.exp(l+n.getGeneratorBase()));s[s.length-1-l]=c,c!==0&&(o=!1)}if(!o)for(var u=new z0(n,s),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=d[0],A=d[1],h=this.findErrorLocations(f),m=this.findErrorMagnitudes(A,h),l=0;l<h.length;l++){var p=e.length-1-n.log(h[l]);if(p<0)throw new MC("Bad error location");e[p]=wc.addOrSubtract(e[p],m[l])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=this.field,o=e,l=r,c=s.getZero(),u=s.getOne();l.getDegree()>=(n/2|0);){var d=o,f=c;if(o=l,c=u,o.isZero())throw new MC("r_{i-1} was zero");l=d;for(var A=s.getZero(),h=o.getCoefficient(o.getDegree()),m=s.inverse(h);l.getDegree()>=o.getDegree()&&!l.isZero();){var p=l.getDegree()-o.getDegree(),g=s.multiply(l.getCoefficient(l.getDegree()),m);A=A.addOrSubtract(s.buildMonomial(p,g)),l=l.addOrSubtract(o.multiplyByMonomial(p,g))}if(u=A.multiply(c).addOrSubtract(f),l.getDegree()>=o.getDegree())throw new jw("Division algorithm failed to reduce polynomial?")}var v=u.getCoefficient(0);if(v===0)throw new MC("sigmaTilde(0) was zero");var y=s.inverse(v),b=u.multiplyScalar(y),w=l.multiplyScalar(y);return[b,w]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,s=this.field,o=1;o<s.getSize()&&a<r;o++)e.evaluateAt(o)===0&&(n[a]=s.inverse(o),a++);if(a!==r)throw new MC("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),s=this.field,o=0;o<n;o++){for(var l=s.inverse(r[o]),c=1,u=0;u<n;u++)if(o!==u){var d=s.multiply(r[u],l),f=d&1?d&-2:d|1;c=s.multiply(c,f)}a[o]=s.multiply(e.evaluateAt(l),s.inverse(c)),s.getGeneratorBase()!==0&&(a[o]=s.multiply(a[o],l))}return a},t}(),Go;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Go||(Go={}));var zV=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),s=t.convertBoolArrayToByteArray(a),o=t.getEncodedData(a),l=new qj(s,o,null,null);return l.setNumBits(a.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=Go.UPPER,a=Go.UPPER,s="",o=0;o<r;)if(a===Go.BINARY){if(r-o<5)break;var l=t.readCode(e,o,5);if(o+=5,l===0){if(r-o<11)break;l=t.readCode(e,o,11)+31,o+=11}for(var c=0;c<l;c++){if(r-o<8){o=r;break}var u=t.readCode(e,o,8);s+=Yn.castAsNonUtf8Char(u),o+=8}a=n}else{var d=a===Go.DIGIT?4:5;if(r-o<d)break;var u=t.readCode(e,o,d);o+=d;var f=t.getCharacter(a,u);f.startsWith("CTRL_")?(n=a,a=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(s+=f,a=n)}return s},t.getTable=function(e){switch(e){case"L":return Go.LOWER;case"P":return Go.PUNCT;case"M":return Go.MIXED;case"D":return Go.DIGIT;case"B":return Go.BINARY;case"U":default:return Go.UPPER}},t.getCharacter=function(e,r){switch(e){case Go.UPPER:return t.UPPER_TABLE[r];case Go.LOWER:return t.LOWER_TABLE[r];case Go.MIXED:return t.MIXED_TABLE[r];case Go.PUNCT:return t.PUNCT_TABLE[r];case Go.DIGIT:return t.DIGIT_TABLE[r];default:throw new jw("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=wc.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=wc.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=wc.AZTEC_DATA_10):(n=12,r=wc.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),s=e.length/n;if(s<a)throw new Sr;for(var o=e.length%n,l=new Int32Array(s),c=0;c<s;c++,o+=n)l[c]=t.readCode(e,o,n);try{var u=new zj(r);u.decode(l,s-a)}catch(g){throw new Sr(g)}for(var d=(1<<n)-1,f=0,c=0;c<a;c++){var A=l[c];if(A===0||A===d)throw new Sr;(A===1||A===d-1)&&f++}for(var h=new Array(a*n-f),m=0,c=0;c<a;c++){var A=l[c];if(A===1||A===d-1)h.fill(A>1,m,m+n-1),m+=n-1;else for(var p=n-1;p>=0;--p)h[m++]=(A&1<<p)!==0}return h},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,s=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var l=0;l<s.length;l++)s[l]=l;else for(var c=a+1+2*Rn.truncDivision(Rn.truncDivision(a,2)-1,15),u=a/2,d=Rn.truncDivision(c,2),l=0;l<u;l++){var f=l+Rn.truncDivision(l,15);s[u-l-1]=d-f-1,s[u+l]=d+f+1}for(var l=0,A=0;l<n;l++){for(var h=(n-l)*4+(r?9:12),m=l*2,p=a-1-m,g=0;g<h;g++)for(var v=g*2,y=0;y<2;y++)o[A+v+y]=e.get(s[m+y],s[m+g]),o[A+2*h+v+y]=e.get(s[m+g],s[p-y]),o[A+4*h+v+y]=e.get(s[p-y],s[p-g]),o[A+6*h+v+y]=e.get(s[p-g],s[m+y]);A+=h*8}return o},t.readCode=function(e,r,n){for(var a=0,s=r;s<r+n;s++)a<<=1,e[s]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),sa=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var s=e-n,o=r-a;return Math.sqrt(s*s+o*o)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var s=e[n];r+=s}return r},t}(),Fk=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),qr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*Fk.floatToIntBits(this.x)+Fk.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),s,o,l;if(n>=r&&n>=a?(o=e[0],s=e[1],l=e[2]):a>=n&&a>=r?(o=e[1],s=e[0],l=e[2]):(o=e[2],s=e[0],l=e[1]),this.crossProductZ(s,o,l)<0){var c=s;s=l,l=c}e[0]=s,e[1]=o,e[2]=l},t.distance=function(e,r){return sa.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,s=r.y;return(n.x-a)*(e.y-s)-(n.y-s)*(e.x-a)},t}(),I6=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),c3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u3e=function(t){c3e(e,t);function e(r,n,a,s,o){var l=t.call(this,r,n)||this;return l.compact=a,l.nbDatablocks=s,l.nbLayers=o,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(I6),Ok=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=a-s,this.downInit=a+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Yt}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,s=!1,o=!0,l=!1,c=!1,u=!1,d=!1,f=!1,A=this.width,h=this.height;o;){o=!1;for(var m=!0;(m||!c)&&r<A;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,o=!0,c=!0):c||r++;if(r>=A){s=!0;break}for(var p=!0;(p||!u)&&a<h;)p=this.containsBlackPoint(e,r,a,!0),p?(a++,o=!0,u=!0):u||a++;if(a>=h){s=!0;break}for(var g=!0;(g||!d)&&e>=0;)g=this.containsBlackPoint(n,a,e,!1),g?(e--,o=!0,d=!0):d||e--;if(e<0){s=!0;break}for(var v=!0;(v||!f)&&n>=0;)v=this.containsBlackPoint(e,r,n,!0),v?(n--,o=!0,f=!0):f||n--;if(n<0){s=!0;break}o&&(l=!0)}if(!s&&l){for(var y=r-e,b=null,w=1;b===null&&w<y;w++)b=this.getBlackPointOnSegment(e,a-w,e+w,a);if(b==null)throw new Yt;for(var j=null,w=1;j===null&&w<y;w++)j=this.getBlackPointOnSegment(e,n+w,e+w,n);if(j==null)throw new Yt;for(var I=null,w=1;I===null&&w<y;w++)I=this.getBlackPointOnSegment(r,n+w,r-w,n);if(I==null)throw new Yt;for(var _=null,w=1;_===null&&w<y;w++)_=this.getBlackPointOnSegment(r,a-w,r-w,a);if(_==null)throw new Yt;return this.centerEdges(_,b,I,j)}else throw new Yt},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var s=sa.round(sa.distance(e,r,n,a)),o=(n-e)/s,l=(a-r)/s,c=this.image,u=0;u<s;u++){var d=sa.round(e+u*o),f=sa.round(r+u*l);if(c.get(d,f))return new qr(d,f)}return null},t.prototype.centerEdges=function(e,r,n,a){var s=e.getX(),o=e.getY(),l=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),f=a.getX(),A=a.getY(),h=t.CORR;return s<this.width/2?[new qr(f-h,A+h),new qr(l+h,c+h),new qr(u-h,d-h),new qr(s+h,o-h)]:[new qr(f+h,A+h),new qr(l+h,c-h),new qr(u-h,d+h),new qr(s-h,o-h)]},t.prototype.containsBlackPoint=function(e,r,n,a){var s=this.image;if(a){for(var o=e;o<=r;o++)if(s.get(o,n))return!0}else for(var l=e;l<=r;l++)if(s.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),WV=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),s=!0,o=0;o<r.length&&s;o+=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>a)throw new Yt;s=!1,l===-1?(r[o]=0,s=!0):l===n&&(r[o]=n-1,s=!0),c===-1?(r[o+1]=0,s=!0):c===a&&(r[o+1]=a-1,s=!0)}s=!0;for(var o=r.length-2;o>=0&&s;o-=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>a)throw new Yt;s=!1,l===-1?(r[o]=0,s=!0):l===n&&(r[o]=n-1,s=!0),c===-1?(r[o+1]=0,s=!0):c===a&&(r[o+1]=a-1,s=!0)}},t}(),Ore=function(){function t(e,r,n,a,s,o,l,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=s,this.a32=o,this.a13=l,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,s,o,l,c,u,d,f,A,h,m,p,g){var v=t.quadrilateralToSquare(e,r,n,a,s,o,l,c),y=t.squareToQuadrilateral(u,d,f,A,h,m,p,g);return y.times(v)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,s=this.a13,o=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,A=0;A<r;A+=2){var h=e[A],m=e[A+1],p=s*h+c*m+f;e[A]=(n*h+o*m+u)/p,e[A+1]=(a*h+l*m+d)/p}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,s=this.a13,o=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,A=e.length,h=0;h<A;h++){var m=e[h],p=r[h],g=s*m+c*p+f;e[h]=(n*m+o*p+u)/g,r[h]=(a*m+l*p+d)/g}},t.squareToQuadrilateral=function(e,r,n,a,s,o,l,c){var u=e-n+s-l,d=r-a+o-c;if(u===0&&d===0)return new t(n-e,s-n,e,a-r,o-a,r,0,0,1);var f=n-s,A=l-s,h=a-o,m=c-o,p=f*m-A*h,g=(u*m-A*d)/p,v=(f*d-u*h)/p;return new t(n-e+g*n,l-e+v*l,e,a-r+g*a,c-r+v*c,r,g,v,1)},t.quadrilateralToSquare=function(e,r,n,a,s,o,l,c){return t.squareToQuadrilateral(e,r,n,a,s,o,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),d3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),f3e=function(t){d3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,s,o,l,c,u,d,f,A,h,m,p,g,v,y,b,w){var j=Ore.quadrilateralToQuadrilateral(s,o,l,c,u,d,f,A,h,m,p,g,v,y,b,w);return this.sampleGridWithTransform(r,n,a,j)},e.prototype.sampleGridWithTransform=function(r,n,a,s){if(n<=0||a<=0)throw new Yt;for(var o=new Vf(n,a),l=new Float32Array(2*n),c=0;c<a;c++){for(var u=l.length,d=c+.5,f=0;f<u;f+=2)l[f]=f/2+.5,l[f+1]=d;s.transformPoints(l),WV.checkAndNudgePoints(r,l);try{for(var f=0;f<u;f+=2)r.get(Math.floor(l[f]),Math.floor(l[f+1]))&&o.set(f/2,c)}catch{throw new Yt}}return o},e}(WV),j6=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new f3e,t}(),Ac=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new qr(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),h3e=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new u3e(s,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Yt;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,s=0;s<4;s++){var o=n[(this.shift+s)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,o,l){var c=(s>>r-2<<1)+(s&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(Rn.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new Yt},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var s=n-a,o=new Int32Array(n),l=n-1;l>=0;--l)o[l]=e&15,e>>=4;try{var c=new zj(wc.AZTEC_PARAM);c.decode(o,s)}catch{throw new Yt}for(var u=0,l=0;l<a;l++)u=(u<<4)+o[l];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,s=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(r,o,1,-1),c=this.getFirstDifferent(n,o,1,1),u=this.getFirstDifferent(a,o,-1,1),d=this.getFirstDifferent(s,o,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(l,c,u,d))break}r=l,n=c,a=u,s=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Yt;this.compact=this.nbCenterLayers===5;var A=new qr(r.getX()+.5,r.getY()-.5),h=new qr(n.getX()+.5,n.getY()+.5),m=new qr(a.getX()-.5,a.getY()+.5),p=new qr(s.getX()-.5,s.getY()-.5);return this.expandSquare([A,h,m,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var s=new Ok(this.image).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{var o=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new Ac(o+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Ac(o+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Ac(o-7,l+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Ac(o-7,l-7),!1,-1,-1).toResultPoint()}var c=sa.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=sa.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var s=new Ok(this.image,15,c,u).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{e=this.getFirstDifferent(new Ac(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Ac(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Ac(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Ac(c-7,u-7),!1,-1,-1).toResultPoint()}return c=sa.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=sa.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new Ac(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,s){var o=j6.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,u=l/2+this.nbCenterLayers;return o.sampleGrid(e,l,l,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,s=this.distanceResultPoint(e,r),o=s/n,l=e.getX(),c=e.getY(),u=o*(r.getX()-e.getX())/s,d=o*(r.getY()-e.getY())/s,f=0;f<n;f++)this.image.get(sa.round(l+f*u),sa.round(c+f*d))&&(a|=1<<n-f-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var s=3;e=new Ac(e.getX()-s,e.getY()+s),r=new Ac(r.getX()-s,r.getY()-s),n=new Ac(n.getX()+s,n.getY()-s),a=new Ac(a.getX()+s,a.getY()+s);var o=this.getColor(a,e);if(o===0)return!1;var l=this.getColor(e,r);return l!==o||(l=this.getColor(r,n),l!==o)?!1:(l=this.getColor(n,a),l===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,o=0,l=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),f=0;f<d;f++)l+=a,c+=s,this.image.get(sa.round(l),sa.round(c))!==u&&o++;var A=o/n;return A>.1&&A<.9?0:A<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var s=e.getX()+n,o=e.getY()+a;this.isValid(s,o)&&this.image.get(s,o)===r;)s+=n,o+=a;for(s-=n,o-=a;this.isValid(s,o)&&this.image.get(s,o)===r;)s+=n;for(s-=n;this.isValid(s,o)&&this.image.get(s,o)===r;)o+=a;return o-=a,new Ac(s,o)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),s=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new qr(l+a*s,c+a*o),d=new qr(l-a*s,c-a*o);s=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new qr(l+a*s,c+a*o),A=new qr(l-a*s,c-a*o),h=[u,f,d,A];return h},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=sa.round(e.getX()),n=sa.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return sa.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return sa.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Rn.truncDivision(this.nbLayers-4,8)+1)+15},t}(),SS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new h3e(e.getBlackMatrix()),s=null,o=null;try{var l=a.detectMirror(!1);s=l.getPoints(),this.reportFoundResultPoints(r,s),o=new zV().decode(l)}catch(f){n=f}if(o==null)try{var l=a.detectMirror(!0);s=l.getPoints(),this.reportFoundResultPoints(r,s),o=new zV().decode(l)}catch(f){throw n??f}var c=new Dl(o.getText(),o.getRawBytes(),o.getNumBits(),s,ln.AZTEC,Ja.currentTimeMillis()),u=o.getByteSegments();u!=null&&c.putMetadata(al.BYTE_SEGMENTS,u);var d=o.getECLevel();return d!=null&&c.putMetadata(al.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(Za.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,s,o){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),A3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){A3e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new SS,r)||this}return e})(o1);var so=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(Za.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),s=this.doDecode(a,r),o=s.getResultMetadata(),l=270;o!==null&&o.get(al.ORIENTATION)===!0&&(l=l+o.get(al.ORIENTATION)%360),s.putMetadata(al.ORIENTATION,l);var c=s.getResultPoints();if(c!==null)for(var u=a.getHeight(),d=0;d<c.length;d++)c[d]=new qr(u-c[d].getY()-1,c[d].getX());return s}else throw new Yt}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),s=new jo(n),o=r&&r.get(Za.TRY_HARDER)===!0,l=Math.max(1,a>>(o?8:5)),c;o?c=a:c=15;for(var u=Math.trunc(a/2),d=0;d<c;d++){var f=Math.trunc((d+1)/2),A=(d&1)===0,h=u+l*(A?f:-f);if(h<0||h>=a)break;try{s=e.getBlackRow(h,s)}catch{continue}for(var m=function(y){if(y===1&&(s.reverse(),r&&r.get(Za.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;r.forEach(function(I,_){return b.set(_,I)}),b.delete(Za.NEED_RESULT_POINT_CALLBACK),r=b}try{var w=p.decodeRow(h,s,r);if(y===1){w.putMetadata(al.ORIENTATION,180);var j=w.getResultPoints();j!==null&&(j[0]=new qr(n-j[0].getX()-1,j[0].getY()),j[1]=new qr(n-j[1].getX()-1,j[1].getY()))}return{value:w}}catch{}},p=this,g=0;g<2;g++){var v=m(g);if(typeof v=="object")return v.value}}throw new Yt},t.recordPattern=function(e,r,n){for(var a=n.length,s=0;s<a;s++)n[s]=0;var o=e.getSize();if(r>=o)throw new Yt;for(var l=!e.get(r),c=0,u=r;u<o;){if(e.get(u)!==l)n[c]++;else{if(++c===a)break;n[c]=1,l=!l}u++}if(!(c===a||c===a-1&&u===o))throw new Yt},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,s=e.get(r);r>0&&a>=0;)e.get(--r)!==s&&(a--,s=!s);if(a>=0)throw new Yt;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,o=0,l=0;l<a;l++)s+=e[l],o+=r[l];if(s<o)return Number.POSITIVE_INFINITY;var c=s/o;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],A=r[d]*c,h=f>A?f-A:A-f;if(h>n)return Number.POSITIVE_INFINITY;u+=h}return u/s},t}(),m3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XV=function(t){m3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),s=0,o=Int32Array.from([0,0,0,0,0,0]),l=a,c=!1,u=6,d=a;d<n;d++)if(r.get(d)!==c)o[s]++;else{if(s===u-1){for(var f=e.MAX_AVG_VARIANCE,A=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var m=so.patternMatchVariance(o,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,A=h)}if(A>=0&&r.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,A]);l+=o[0]+o[1],o=o.slice(2,o.length),o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,c=!c}throw new Yt},e.decodeCode=function(r,n,a){so.recordPattern(r,a,n);for(var s=e.MAX_AVG_VARIANCE,o=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,o=l)}if(o>=0)return o;throw new Yt},e.prototype.decodeRow=function(r,n,a){var s=a&&a.get(Za.ASSUME_GS1)===!0,o=e.findStartPattern(n),l=o[2],c=0,u=new Uint8Array(20);u[c++]=l;var d;switch(l){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new Sr}for(var f=!1,A=!1,h="",m=o[0],p=o[1],g=Int32Array.from([0,0,0,0,0,0]),v=0,y=0,b=l,w=0,j=!0,I=!1,_=!1;!f;){var S=A;switch(A=!1,v=y,y=e.decodeCode(n,g,p),u[c++]=y,y!==e.CODE_STOP&&(j=!0),y!==e.CODE_STOP&&(w++,b+=w*y),m=p,p+=g.reduce(function(me,pe){return me+pe},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Sr}switch(d){case e.CODE_CODE_A:if(y<64)_===I?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),_=!1;else if(y<96)_===I?h+=String.fromCharCode(y-64):h+=String.fromCharCode(y+64),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:A=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(y<96)_===I?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:A=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}S&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var E=p-m;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-m)/2),!1))throw new Yt;if(b-=w*v,b%103!==v)throw new Oi;var F=h.length;if(F===0)throw new Yt;F>0&&j&&(d===e.CODE_CODE_C?h=h.substring(0,F-2):h=h.substring(0,F-1));for(var P=(o[1]+o[0])/2,k=m+E/2,D=u.length,J=new Uint8Array(D),fe=0;fe<D;fe++)J[fe]=u[fe];var Ae=[new qr(P,r),new qr(k,r)];return new Dl(h,J,0,Ae,ln.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(so),p3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YV=function(t){p3e(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),f=n.getNextSet(d[1]),A=n.getSize(),h,m;do{e.recordPattern(n,f,u);var p=e.toNarrowWidePattern(u);if(p<0)throw new Yt;h=e.patternToChar(p),this.decodeRowResult+=h,m=f;try{for(var g=(s=void 0,d5(u)),v=g.next();!v.done;v=g.next()){var y=v.value;f+=y}}catch(D){s={error:D}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(s)throw s.error}}f=n.getNextSet(f)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=d5(u),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(D){l={error:D}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}var I=f-m-b;if(f!==A&&I*2<b)throw new Yt;if(this.usingCheckDigit){for(var _=this.decodeRowResult.length-1,S=0,E=0;E<_;E++)S+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(E));if(this.decodeRowResult.charAt(_)!==e.ALPHABET_STRING.charAt(S%43))throw new Oi;this.decodeRowResult=this.decodeRowResult.substring(0,_)}if(this.decodeRowResult.length===0)throw new Yt;var F;this.extendedMode?F=e.decodeExtended(this.decodeRowResult):F=this.decodeRowResult;var P=(d[1]+d[0])/2,k=m+b/2;return new Dl(F,null,0,[new qr(P,r),new qr(k,r)],ln.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),s=r.getNextSet(0),o=0,l=s,c=!1,u=n.length,d=s;d<a;d++)if(r.get(d)!==c)n[o]++;else{if(o===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,c=!c}throw new Yt},e.toNarrowWidePattern=function(r){var n,a,s=r.length,o=0,l;do{var c=2147483647;try{for(var u=(n=void 0,d5(r)),d=u.next();!d.done;d=u.next()){var f=d.value;f<c&&f>o&&(c=f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}o=c,l=0;for(var A=0,h=0,m=0;m<s;m++){var f=r[m];f>o&&(h|=1<<s-1-m,l++,A+=f)}if(l===3){for(var m=0;m<s&&l>0;m++){var f=r[m];if(f>o&&(l--,f*2>=A))return-1}return h}}while(l>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new Yt},e.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var o=r.charAt(s);if(o==="+"||o==="$"||o==="%"||o==="/"){var l=r.charAt(s+1),c="\0";switch(o){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new Sr;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new Sr;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new Sr;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new Sr;break}a+=c,s++}else a+=o}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(so),g3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),f5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JV=function(t){g3e(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),A=this.counters;A.fill(0),this.decodeRowResult="";var h,m;do{e.recordPattern(n,d,A);var p=this.toPattern(A);if(p<0)throw new Yt;h=this.patternToChar(p),this.decodeRowResult+=h,m=d;try{for(var g=(s=void 0,f5(A)),v=g.next();!v.done;v=g.next()){var y=v.value;d+=y}}catch(E){s={error:E}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(s)throw s.error}}d=n.getNextSet(d)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=f5(A),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(E){l={error:E}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}if(d===f||!n.get(d))throw new Yt;if(this.decodeRowResult.length<2)throw new Yt;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var I=this.decodeExtended(this.decodeRowResult),_=(u[1]+u[0])/2,S=m+b/2;return new Dl(I,null,0,[new qr(_,r),new qr(S,r)],ln.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var s=this.counters,o=a,l=!1,c=s.length,u=0,d=a;d<n;d++)if(r.get(d)!==l)s[u]++;else{if(u===c-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new Yt},e.prototype.toPattern=function(r){var n,a,s=0;try{for(var o=f5(r),l=o.next();!l.done;l=o.next()){var c=l.value;s+=c}}catch(m){n={error:m}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var u=0,d=r.length,f=0;f<d;f++){var A=Math.round(r[f]*9/s);if(A<1||A>4)return-1;if(f&1)u<<=A;else for(var h=0;h<A;h++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new Yt},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var o=r.charAt(s);if(o>="a"&&o<="d"){if(s>=n-1)throw new Sr;var l=r.charAt(s+1),c="\0";switch(o){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new Sr;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new Sr;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new Sr;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new Sr;break}a+=c,s++}else a+=o}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var s=1,o=0,l=n-1;l>=0;l--)o+=s*e.ALPHABET_STRING.indexOf(r.charAt(l)),++s>a&&(s=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new Oi},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(so),x3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZV=function(t){x3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var s,o,l=this.decodeStart(n),c=this.decodeEnd(n),u=new Tn;e.decodeMiddle(n,l[1],c[0],u);var d=u.toString(),f=null;a!=null&&(f=a.get(Za.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var A=d.length,h=!1,m=0;try{for(var p=v3e(f),g=p.next();!g.done;g=p.next()){var v=g.value;if(A===v){h=!0;break}v>m&&(m=v)}}catch(w){s={error:w}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}if(!h&&A>m&&(h=!0),!h)throw new Sr;var y=[new qr(l[1],r),new qr(c[0],r)],b=new Dl(d,null,0,y,ln.ITF,new Date().getTime());return b},e.decodeMiddle=function(r,n,a,s){var o=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),l.fill(0),c.fill(0);n<a;){so.recordPattern(r,n,o);for(var u=0;u<5;u++){var d=2*u;l[u]=o[d],c[u]=o[d+1]}var f=e.decodeDigit(l);s.append(f.toString()),f=this.decodeDigit(c),s.append(f.toString()),o.forEach(function(A){n+=A})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var s=n-1;a>0&&s>=0&&!r.get(s);s--)a--;if(a!==0)throw new Yt},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new Yt;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof Yt&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var s=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-s,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var s=a.length,o=new Int32Array(s),l=r.getSize(),c=!1,u=0,d=n;o.fill(0);for(var f=n;f<l;f++)if(r.get(f)!==c)o[u]++;else{if(u===s-1){if(so.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=o[0]+o[1],Ja.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,c=!c}throw new Yt},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,s=e.PATTERNS.length,o=0;o<s;o++){var l=e.PATTERNS[o],c=so.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=o):c===n&&(a=-1)}if(a>=0)return a%10;throw new Yt},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(so),y3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jv=function(t){y3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,s=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,o);var l=a[0];s=a[1];var c=l-(s-l);c>=0&&(n=r.isRange(c,l,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Sr;a+=o}a*=3;for(var s=n-2;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Sr;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,s){return this.findGuardPattern(r,n,a,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,a,s,o){var l=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,d=s.length,f=a,A=n;A<l;A++)if(r.get(A)!==f)o[c]++;else{if(c===d-1){if(so.patternMatchVariance(o,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,A]);u+=o[0]+o[1];for(var h=o.slice(2,o.length),m=0;m<c-1;m++)o[m]=h[m];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,f=!f}throw new Yt},e.decodeDigit=function(r,n,a,s){this.recordPattern(r,a,n);for(var o=this.MAX_AVG_VARIANCE,l=-1,c=s.length,u=0;u<c;u++){var d=s[u],f=so.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,l=u)}if(l>=0)return l;throw new Yt},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(so),b3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w3e=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new qr((n[0]+n[1])/2,e),new qr(s,e)],u=new Dl(o,null,0,c,ln.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<5&&c<l;d++){var f=jv.decodeDigit(e,o,c,jv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var A=(a=void 0,b3e(o)),h=A.next();!h.done;h=A.next()){var m=h.value;c+=m}}catch(g){a={error:g}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f>=10&&(u|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new Yt;var p=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==p)throw new Yt;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new Yt},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[al.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),s=n%100,o=s<10?"0"+s:s.toString();return r+a+"."+o},t}(),N3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C3e=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new qr((n[0]+n[1])/2,e),new qr(s,e)],u=new Dl(o,null,0,c,ln.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<2&&c<l;d++){var f=jv.decodeDigit(e,o,c,jv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var A=(a=void 0,N3e(o)),h=A.next();!h.done;h=A.next()){var m=h.value;c+=m}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f>=10&&(u|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new Yt;if(parseInt(n.toString())%4!==u)throw new Yt;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[al.ISSUE_NUMBER,parseInt(e)]])},t}(),_3e=function(){function t(){}return t.decodeRow=function(e,r,n){var a=jv.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new w3e;return s.decodeRow(e,r,a)}catch{var o=new C3e;return o.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),E3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yi=function(t){E3e(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],s=new Int32Array(a.length),o=0;o<a.length;o++)s[o]=a[a.length-o-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,a){var s=e.findStartGuardPattern(n),o=a==null?null:a.get(Za.NEED_RESULT_POINT_CALLBACK);if(o!=null){var l=new qr((s[0]+s[1])/2,r);o.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,s,this.decodeRowStringBuffer),u=c.rowOffset,d=c.resultString;if(o!=null){var f=new qr(u,r);o.foundPossibleResultPoint(f)}var A=e.decodeEnd(n,u);if(o!=null){var h=new qr((A[0]+A[1])/2,r);o.foundPossibleResultPoint(h)}var m=A[1],p=m+(m-A[0]);if(p>=n.getSize()||!n.isRange(m,p,!1))throw new Yt;var g=d.toString();if(g.length<8)throw new Sr;if(!e.checkChecksum(g))throw new Oi;var v=(s[1]+s[0])/2,y=(A[1]+A[0])/2,b=this.getBarcodeFormat(),w=[new qr(v,r),new qr(y,r)],j=new Dl(g,null,0,w,b,new Date().getTime()),I=0;try{var _=_3e.decodeRow(r,n,A[1]);j.putMetadata(al.UPC_EAN_EXTENSION,_.getText()),j.putAllMetadata(_.getResultMetadata()),j.addResultPoints(_.getResultPoints()),I=_.getText().length}catch{}var S=a==null?null:a.get(Za.ALLOWED_EAN_EXTENSIONS);if(S!=null){var E=!1;for(var F in S)if(I.toString()===F){E=!0;break}if(!E)throw new Yt}return b===ln.EAN_13||ln.UPC_A,j},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Sr;a+=o}a*=3;for(var s=n-2;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Sr;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(jv),S3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dk=function(t){S3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],A=0,h=0;h<6&&f<d;h++){var m=Yi.decodeDigit(r,u,f,Yi.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var p=(s=void 0,eH(u)),g=p.next();!g.done;g=p.next()){var v=g.value;f+=v}}catch(j){s={error:j}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}m>=10&&(A|=1<<5-h)}a=e.determineFirstDigit(a,A);var y=Yi.findGuardPattern(r,f,!0,Yi.MIDDLE_PATTERN,new Int32Array(Yi.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var h=0;h<6&&f<d;h++){var m=Yi.decodeDigit(r,u,f,Yi.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var b=(l=void 0,eH(u)),w=b.next();!w.done;w=b.next()){var v=w.value;f+=v}}catch(_){l={error:_}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return ln.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new Yt},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Yi),I3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rH=function(t){I3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],A=0;A<4&&f<d;A++){var h=Yi.decodeDigit(r,u,f,Yi.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var m=(s=void 0,tH(u)),p=m.next();!p.done;p=m.next()){var g=p.value;f+=g}}catch(w){s={error:w}}finally{try{p&&!p.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}}var v=Yi.findGuardPattern(r,f,!0,Yi.MIDDLE_PATTERN,new Int32Array(Yi.MIDDLE_PATTERN.length).fill(0));f=v[1];for(var A=0;A<4&&f<d;A++){var h=Yi.decodeDigit(r,u,f,Yi.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var y=(l=void 0,tH(u)),b=y.next();!b.done;b=y.next()){var g=b.value;f+=g}}catch(I){l={error:I}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return ln.EAN_8},e}(Yi),j3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nH=function(t){j3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new Dk,r}return e.prototype.getBarcodeFormat=function(){return ln.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new Dl(n.substring(1),null,null,r.getResultPoints(),ln.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new Yt},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Yi),P3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aH=function(t){P3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l=this.decodeMiddleCounters.map(function(g){return g});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),u=n[1],d=0,f=0;f<6&&u<c;f++){var A=e.decodeDigit(r,l,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);try{for(var h=(s=void 0,B3e(l)),m=h.next();!m.done;m=h.next()){var p=m.value;u+=p}}catch(g){s={error:g}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(s)throw s.error}}A>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new Tn(a),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Yi.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][s]){r.insert(0,"0"+a),r.append("0"+s);return}throw Yt.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ln.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new Tn;a.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(s),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(s);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Yi),T3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h5=function(t){T3e(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(Za.POSSIBLE_FORMATS),s=[];return a!=null&&(a.indexOf(ln.EAN_13)>-1&&s.push(new Dk),a.indexOf(ln.UPC_A)>-1&&s.push(new nH),a.indexOf(ln.EAN_8)>-1&&s.push(new rH),a.indexOf(ln.UPC_E)>-1&&s.push(new aH)),s.length===0&&(s.push(new Dk),s.push(new nH),s.push(new rH),s.push(new aH)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,a){var s,o;try{for(var l=sH(this.readers),c=l.next();!c.done;c=l.next()){var u=c.value;try{var d=u.decodeRow(r,n,a),f=d.getBarcodeFormat()===ln.EAN_13&&d.getText().charAt(0)==="0",A=a==null?null:a.get(Za.POSSIBLE_FORMATS),h=A==null||A.includes(ln.UPC_A);if(f&&h){var m=d.getRawBytes(),p=new Dl(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),ln.UPC_A);return p.putAllMetadata(d.getResultMetadata()),p}return d}catch{}}}catch(g){s={error:g}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(s)throw s.error}}throw new Yt},e.prototype.reset=function(){var r,n;try{for(var a=sH(this.readers),s=a.next();!s.done;s=a.next()){var o=s.value;o.reset()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(so),k3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F3e=function(t){k3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var s=this.getValidRowData(n);if(!s)throw new Yt;var o=this.codaBarDecodeRow(s.row);if(!o)throw new Yt;return new Dl(o,null,0,[new qr(s.left,r),new qr(s.right,r)],ln.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var s=n.lastIndexOf(!0);if(s<=a)return null;n=n.slice(a,s+1);for(var o=[],l=n[0],c=1,u=1;u<n.length;u++)n[u]===l?c++:(l=n[u],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:a,right:s}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(c,u){return(c+u)/2},0));r.length>0;){var s=r.splice(0,8).splice(0,7),o=s.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(so),O3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zm=function(t){O3e(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(so.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new Yt},e.count=function(r){return sa.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,s=n[0],o=1;o<r.length;o++)n[o]>s&&(s=n[o],a=o);r[a]++},e.decrement=function(r,n){for(var a=0,s=n[0],o=1;o<r.length;o++)n[o]<s&&(s=n[o],a=o);r[a]--},e.isFinderPattern=function(r){var n,a,s=r[0]+r[1],o=s+r[2]+r[3],l=s/o;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=D3e(r),f=d.next();!f.done;f=d.next()){var A=f.value;A>u&&(u=A),A<c&&(c=A)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(so),IS=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),Dre=function(){function t(e,r,n,a,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new qr(n,s)),this.resultPoints.push(new qr(a,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),R3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ux=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,s,o=0;try{for(var l=R3e(e),c=l.next();!c.done;c=l.next()){var u=c.value;o+=u}}catch(y){a={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}for(var d=0,f=0,A=e.length,h=0;h<A-1;h++){var m=void 0;for(m=1,f|=1<<h;m<e[h];m++,f&=~(1<<h)){var p=t.combins(o-m-1,A-h-2);if(n&&f===0&&o-m-(A-h-1)>=A-h-1&&(p-=t.combins(o-m-(A-h),A-h-2)),A-h-1>1){for(var g=0,v=o-m-(A-h-2);v>r;v--)g+=t.combins(o-m-v-1,A-h-3);p-=g*(A-1-h)}else o-m>r&&p--;d+=p}o-=m}return d},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var s=1,o=1,l=e;l>n;l--)s*=l,o<=a&&(s/=o,o++);for(;o<=a;)s/=o,o++;return s},t}(),M3e=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new jo(n),s=0,o=e[0],l=o.getRightChar().getValue(),c=11;c>=0;--c)l&1<<c&&a.set(s),s++;for(var c=1;c<e.length;++c){for(var u=e[c],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&a.set(s),s++;if(u.getRightChar()!==null)for(var A=u.getRightChar().getValue(),f=11;f>=0;--f)A&1<<f&&a.set(s),s++}return a},t}(),Dm=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),P6=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),L3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sd=function(t){L3e(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(P6),U3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rm=function(t){U3e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return a?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(P6),Q3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sx=function(t){Q3e(e,t);function e(r,n,a){var s=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new Sr;return s.firstDigit=n,s.secondDigit=a,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(P6),LC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V3e=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,s,o,l,c,u;if(!e)return null;if(e.length<2)throw new Yt;var d=e.substring(0,2);try{for(var f=LC(t.TWO_DIGIT_DATA_LENGTH),A=f.next();!A.done;A=f.next()){var h=A.value;if(h[0]===d)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,h[2],e):t.processFixedAI(2,h[1],e)}}catch(I){r={error:I}}finally{try{A&&!A.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new Yt;var m=e.substring(0,3);try{for(var p=LC(t.THREE_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var h=g.value;if(h[0]===m)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,h[2],e):t.processFixedAI(3,h[1],e)}}catch(I){a={error:I}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}try{for(var v=LC(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=v.next();!y.done;y=v.next()){var h=y.value;if(h[0]===m)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(I){o={error:I}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(o)throw o.error}}if(e.length<4)throw new Yt;var b=e.substring(0,4);try{for(var w=LC(t.FOUR_DIGIT_DATA_LENGTH),j=w.next();!j.done;j=w.next()){var h=j.value;if(h[0]===b)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(I){c={error:I}}finally{try{j&&!j.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}throw new Yt},t.processFixedAI=function(e,r,n){if(n.length<e)throw new Yt;var a=n.substring(0,e);if(n.length<e+r)throw new Yt;var s=n.substring(e,e+r),o=n.substring(e+r),l="("+a+")"+s,c=t.parseFieldsInGeneralPurpose(o);return c==null?l:l+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var o=n.substring(e,s),l=n.substring(s),c="("+a+")"+o,u=t.parseFieldsInGeneralPurpose(l);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),lE=function(){function t(e){this.buffer=new Tn,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var s=this.decodeGeneralPurposeField(n,a),o=V3e.parseFieldsInGeneralPurpose(s.getNewString());if(o!=null&&e.append(o),s.isRemaining()?a=""+s.getRemainingValue():a=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new sx(this.information.getSize(),sx.FNC1,sx.FNC1):new sx(this.information.getSize(),r-1,sx.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,s=(n-8)%11;return new sx(e+7,a,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,s=0;s<n;++s)e.get(r+s)&&(a|=1<<n-s-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Rm(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Rm(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Rm(this.current.getPosition(),this.buffer.toString()):r=new Rm(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Dm(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Rm(this.current.getPosition(),this.buffer.toString());return new Dm(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Dm(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Rm(this.current.getPosition(),this.buffer.toString());return new Dm(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Dm(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Rm(this.current.getPosition(),this.buffer.toString());return new Dm(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Dm(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Sd(e+5,Sd.FNC1);if(r>=5&&r<15)return new Sd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Sd(e+7,""+(n+1));if(n>=90&&n<116)return new Sd(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),s;switch(a){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new Sr}return new Sd(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Sd(e+5,Sd.FNC1);if(r>=5&&r<15)return new Sd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Sd(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new jw("Decoding invalid alphanumeric value: "+n)}return new Sd(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Rre=function(){function t(e){this.information=e,this.generalDecoder=new lE(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),H3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dd=function(t){H3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var s=0;s<4;++s){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,s=0;s<13;s++){var o=r.charAt(s+n).charCodeAt(0)-48;a+=s&1?o:3*o}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(Rre),$3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),G3e=function(t){$3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Tn;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Dd),K3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q3e=function(t){K3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Tn;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Rre),z3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cE=function(t){z3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,s);for(var o=this.checkWeight(s),l=1e5,c=0;c<5;++c)o/l===0&&r.append("0"),l/=10;r.append(o)},e}(Dd),W3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mre=function(t){W3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+cE.GTIN_SIZE+e.WEIGHT_SIZE)throw new Yt;var r=new Tn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+cE.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(cE),X3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y3e=function(t){X3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(Mre),J3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Z3e=function(t){J3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(Mre),e5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t5e=function(t){e5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Dd.GTIN_SIZE)throw new Yt;var r=new Tn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Dd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Dd.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Dd),r5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),n5e=function(t){r5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Dd.GTIN_SIZE)throw new Yt;var r=new Tn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Dd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Dd.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Dd.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Dd),a5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZA=function(t){a5e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.dateCode=a,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new Yt;var r=new Tn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var s=a%32;a/=32;var o=a%12+1;a/=12;var l=a;l/10===0&&r.append("0"),r.append(l),o/10===0&&r.append("0"),r.append(o),s/10===0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(cE);function s5e(t){try{if(t.get(1))return new G3e(t);if(!t.get(2))return new q3e(t);var e=lE.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new Y3e(t);case 5:return new Z3e(t)}var r=lE.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new t5e(t);case 13:return new n5e(t)}var n=lE.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new ZA(t,"310","11");case 57:return new ZA(t,"320","11");case 58:return new ZA(t,"310","13");case 59:return new ZA(t,"320","13");case 60:return new ZA(t,"310","15");case 61:return new ZA(t,"320","15");case 62:return new ZA(t,"310","17");case 63:return new ZA(t,"320","17")}}catch(a){throw console.log(a),new jw("unknown decoder: "+t)}}var iH=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),i5e=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,s){r.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),o5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l5e=function(t){o5e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(l){if(l instanceof Yt){if(!this.pairs.length)throw new Yt;a=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new Yt},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,s,o=n;o<this.rows.length;o++){var l=this.rows[o];this.pairs.length=0;try{for(var c=(a=void 0,e0(r)),u=c.next();!u.done;u=c.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(A){a={error:A}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(l);try{return this.checkRows(f,o+1)}catch(A){console.log(A)}}}throw new Yt},e.isValidSequence=function(r){var n,a;try{for(var s=e0(e.FINDER_PATTERN_SEQUENCES),o=s.next();!o.done;o=s.next()){var l=o.value;if(!(r.length>l.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==l[u]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,s=!1,o=!1;a<this.rows.length;){var l=this.rows[a];if(l.getRowNumber()>r){o=l.isEquivalent(this.pairs);break}s=l.isEquivalent(this.pairs),a++}o||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new i5e(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,s,o,l,c,u;try{for(var d=e0(n),f=d.next();!f.done;f=d.next()){var A=f.value;if(A.getPairs().length!==r.length){var h=!0;try{for(var m=(o=void 0,e0(A.getPairs())),p=m.next();!p.done;p=m.next()){var g=p.value,v=!1;try{for(var y=(c=void 0,e0(r)),b=y.next();!b.done;b=y.next()){var w=b.value;if(iH.equals(g,w)){v=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}v||(h=!1)}}catch(j){o={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}}}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,s,o,l,c,u;try{for(var d=e0(n),f=d.next();!f.done;f=d.next()){var A=f.value,h=!0;try{for(var m=(o=void 0,e0(r)),p=m.next();!p.done;p=m.next()){var g=p.value,v=!1;try{for(var y=(c=void 0,e0(A.getPairs())),b=y.next();!b.done;b=y.next()){var w=b.value;if(g.equals(w)){v=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}if(!v){h=!1;break}}}catch(j){o={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}if(h)return!0}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=M3e.buildBitArray(r),a=s5e(n),s=a.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),l=r[r.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],l[0],l[1]];return new Dl(s,null,null,c,ln.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var s=a.getChecksumPortion(),o=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);s+=c.getLeftChar().getChecksumPortion(),o++;var u=c.getRightChar();u!=null&&(s+=u.getChecksumPortion(),o++)}s%=211;var d=211*(o-4)+s;return d===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var s=n.length%2===0;this.startFromEven&&(s=!s);var o,l=!0,c=-1;do this.findNextPair(r,n,c),o=this.parseFoundFinderPattern(r,a,s),o===null?c=e.getNextSecondBar(r,this.startEnd[0]):l=!1;while(l);var u=this.decodeDataCharacter(r,o,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Yt;var d;try{d=this.decodeDataCharacter(r,o,s,!1)}catch(f){d=null,console.log(f)}return new iH(u,d,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var o=r.getSize(),l;if(a>=0)l=a;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;l<o&&(d=!r.get(l),!!d);)l++;for(var f=0,A=l,h=l;h<o;h++)if(r.get(h)!==d)s[f]++;else{if(f===3){if(u&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=A,this.startEnd[1]=h;return}u&&e.reverseCounters(s),A+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,d=!d}throw new Yt},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var s=r[a];r[a]=r[n-a-1],r[n-a-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,a){var s,o,l;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,s=this.startEnd[0]-c,o=c,l=this.startEnd[1]}else o=this.startEnd[0],l=r.getNextUnset(this.startEnd[1]+1),s=l-this.startEnd[1];var u=this.getDecodeFinderCounters();Ja.arraycopy(u,0,u,1,u.length-1),u[0]=s;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new Dre(d,[o,l],o,l,n)},e.prototype.decodeDataCharacter=function(r,n,a,s){for(var o=this.getDataCharacterCounters(),l=0;l<o.length;l++)o[l]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var c=0,u=o.length-1;c<u;c++,u--){var d=o[c];o[c]=o[u],o[u]=d}}var f=17,A=sa.sum(new Int32Array(o))/f,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(A-h)/h>.3)throw new Yt;for(var m=this.getOddCounts(),p=this.getEvenCounts(),g=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var y=1*o[c]/A,b=y+.5;if(b<1){if(y<.3)throw new Yt;b=1}else if(b>8){if(y>8.7)throw new Yt;b=8}var w=c/2;c&1?(p[w]=b,v[w]=y-b):(m[w]=b,g[w]=y-b)}this.adjustOddEvenCounts(f);for(var j=4*n.getValue()+(a?0:2)+(s?0:1)-1,I=0,_=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(n,a,s)){var S=e.WEIGHTS[j][2*c];_+=m[c]*S}I+=m[c]}for(var E=0,c=p.length-1;c>=0;c--)if(e.isNotA1left(n,a,s)){var S=e.WEIGHTS[j][2*c+1];E+=p[c]*S}var F=_+E;if(I&1||I>13||I<4)throw new Yt;var P=(13-I)/2,k=e.SYMBOL_WIDEST[P],D=9-k,J=Ux.getRSSvalue(m,k,!0),fe=Ux.getRSSvalue(p,D,!1),Ae=e.EVEN_TOTAL_SUBSET[P],me=e.GSUM[P],pe=J*Ae+fe+me;return new IS(pe,F)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=sa.sum(new Int32Array(this.getOddCounts())),a=sa.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1;n>13?o=!0:n<4&&(s=!0);var l=!1,c=!1;a>13?c=!0:a<4&&(l=!0);var u=n+a-r,d=(n&1)===1,f=(a&1)===0;if(u===1)if(d){if(f)throw new Yt;o=!0}else{if(!f)throw new Yt;c=!0}else if(u===-1)if(d){if(f)throw new Yt;s=!0}else{if(!f)throw new Yt;l=!0}else if(u===0){if(d){if(!f)throw new Yt;n<a?(s=!0,c=!0):(o=!0,l=!0)}else if(f)throw new Yt}else throw new Yt;if(s){if(o)throw new Yt;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new Yt;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(zm),c5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u5e=function(t){c5e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=a,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(IS),d5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oH=function(t){d5e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var f=A5(this.possibleLeftPairs),A=f.next();!A.done;A=f.next()){var h=A.value;if(h.getCount()>1)try{for(var m=(l=void 0,A5(this.possibleRightPairs)),p=m.next();!p.done;p=m.next()){var g=p.value;if(g.getCount()>1&&e.checkChecksum(h,g))return e.constructResult(h,g)}}catch(v){l={error:v}}finally{try{p&&!p.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}}}catch(v){s={error:v}}finally{try{A&&!A.done&&(o=f.return)&&o.call(f)}finally{if(s)throw s.error}}throw new Yt},e.addOrTally=function(r,n){var a,s;if(n!=null){var o=!1;try{for(var l=A5(r),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),o=!0;break}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),s=new String(a).toString(),o=new Tn,l=13-s.length;l>0;l--)o.append("0");o.append(s);for(var c=0,l=0;l<13;l++){var u=o.charAt(l).charCodeAt(0)-48;c+=l&1?u:3*u}c=10-c%10,c===10&&(c=0),o.append(c.toString());var d=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new Dl(o.toString(),null,0,[d[0],d[1],f[0],f[1]],ln.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,a===s},e.prototype.decodePair=function(r,n,a,s){try{var o=this.findFinderPattern(r,n),l=this.parseFoundFinderPattern(r,a,n,o),c=s==null?null:s.get(Za.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(o[0]+o[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new qr(u,a))}var d=this.decodeDataCharacter(r,l,!0),f=this.decodeDataCharacter(r,l,!1);return new u5e(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)so.recordPatternInReverse(r,n.getStartEnd()[0],s);else{so.recordPattern(r,n.getStartEnd()[1]+1,s);for(var l=0,c=s.length-1;l<c;l++,c--){var u=s[l];s[l]=s[c],s[c]=u}}for(var d=a?16:15,f=sa.sum(new Int32Array(s))/d,A=this.getOddCounts(),h=this.getEvenCounts(),m=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var g=s[l]/f,v=Math.floor(g+.5);v<1?v=1:v>8&&(v=8);var y=Math.floor(l/2);l&1?(h[y]=v,p[y]=g-v):(A[y]=v,m[y]=g-v)}this.adjustOddEvenCounts(a,d);for(var b=0,w=0,l=A.length-1;l>=0;l--)w*=9,w+=A[l],b+=A[l];for(var j=0,I=0,l=h.length-1;l>=0;l--)j*=9,j+=h[l],I+=h[l];var _=w+3*j;if(a){if(b&1||b>12||b<4)throw new Yt;var S=(12-b)/2,E=e.OUTSIDE_ODD_WIDEST[S],F=9-E,P=Ux.getRSSvalue(A,E,!1),k=Ux.getRSSvalue(h,F,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[S],J=e.OUTSIDE_GSUM[S];return new IS(P*D+k+J,_)}else{if(I&1||I>10||I<4)throw new Yt;var S=(10-I)/2,E=e.INSIDE_ODD_WIDEST[S],F=9-E,P=Ux.getRSSvalue(A,E,!0),k=Ux.getRSSvalue(h,F,!1),fe=e.INSIDE_ODD_TOTAL_SUBSET[S],J=e.INSIDE_GSUM[S];return new IS(k*fe+P+J,_)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=r.getSize(),o=!1,l=0;l<s&&(o=!r.get(l),n!==o);)l++;for(var c=0,u=l,d=l;d<s;d++)if(r.get(d)!==o)a[c]++;else{if(c===3){if(zm.isFinderPattern(a))return[u,d];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,o=!o}throw new Yt},e.prototype.parseFoundFinderPattern=function(r,n,a,s){for(var o=r.get(s[0]),l=s[0]-1;l>=0&&o!==r.get(l);)l--;l++;var c=s[0]-l,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);Ja.arraycopy(u,0,d,1,u.length-1),d[0]=c;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),A=l,h=s[1];return a&&(A=r.getSize()-1-A,h=r.getSize()-1-h),new Dre(f,[l,s[1]],A,h,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=sa.sum(new Int32Array(this.getOddCounts())),s=sa.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1,c=!1,u=!1;r?(a>12?l=!0:a<4&&(o=!0),s>12?u=!0:s<4&&(c=!0)):(a>11?l=!0:a<5&&(o=!0),s>10?u=!0:s<4&&(c=!0));var d=a+s-n,f=(a&1)===(r?1:0),A=(s&1)===1;if(d===1)if(f){if(A)throw new Yt;l=!0}else{if(!A)throw new Yt;u=!0}else if(d===-1)if(f){if(A)throw new Yt;o=!0}else{if(!A)throw new Yt;c=!0}else if(d===0){if(f){if(!A)throw new Yt;a<s?(o=!0,u=!0):(l=!0,c=!0)}else if(A)throw new Yt}else throw new Yt;if(o){if(l)throw new Yt;zm.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&zm.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new Yt;zm.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&zm.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(zm),f5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qx=function(t){f5e(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(Za.POSSIBLE_FORMATS):null,s=r&&r.get(Za.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(Za.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(ln.EAN_13)||a.includes(ln.UPC_A)||a.includes(ln.EAN_8)||a.includes(ln.UPC_E))&&n.readers.push(new h5(r)),a.includes(ln.CODE_39)&&n.readers.push(new YV(s,o)),a.includes(ln.CODE_93)&&n.readers.push(new JV),a.includes(ln.CODE_128)&&n.readers.push(new XV),a.includes(ln.ITF)&&n.readers.push(new ZV),a.includes(ln.CODABAR)&&n.readers.push(new F3e),a.includes(ln.RSS_14)&&n.readers.push(new oH),a.includes(ln.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new l5e))),n.readers.length===0&&(n.readers.push(new h5(r)),n.readers.push(new YV),n.readers.push(new JV),n.readers.push(new h5(r)),n.readers.push(new XV),n.readers.push(new ZV),n.readers.push(new oH)),n}return e.prototype.decodeRow=function(r,n,a){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,a)}catch{}throw new Yt},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(so),h5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){h5e(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Qx(n),r,n)||this}return e})(o1);var lH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pa=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),ua=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),A5e=function(){function t(e,r,n,a,s,o){var l,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=s,this.ecBlocks=o;var u=0,d=o.getECCodewords(),f=o.getECBlocks();try{for(var A=lH(f),h=A.next();!h.done;h=A.next()){var m=h.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(p){l={error:p}}finally{try{h&&!h.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if(e&1||r&1)throw new Sr;try{for(var s=lH(t.VERSIONS),o=s.next();!o.done;o=s.next()){var l=o.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===r)return l}}catch(c){n={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}throw new Sr},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new pa(5,new ua(1,3))),new t(2,12,12,10,10,new pa(7,new ua(1,5))),new t(3,14,14,12,12,new pa(10,new ua(1,8))),new t(4,16,16,14,14,new pa(12,new ua(1,12))),new t(5,18,18,16,16,new pa(14,new ua(1,18))),new t(6,20,20,18,18,new pa(18,new ua(1,22))),new t(7,22,22,20,20,new pa(20,new ua(1,30))),new t(8,24,24,22,22,new pa(24,new ua(1,36))),new t(9,26,26,24,24,new pa(28,new ua(1,44))),new t(10,32,32,14,14,new pa(36,new ua(1,62))),new t(11,36,36,16,16,new pa(42,new ua(1,86))),new t(12,40,40,18,18,new pa(48,new ua(1,114))),new t(13,44,44,20,20,new pa(56,new ua(1,144))),new t(14,48,48,22,22,new pa(68,new ua(1,174))),new t(15,52,52,24,24,new pa(42,new ua(2,102))),new t(16,64,64,14,14,new pa(56,new ua(2,140))),new t(17,72,72,16,16,new pa(36,new ua(4,92))),new t(18,80,80,18,18,new pa(48,new ua(4,114))),new t(19,88,88,20,20,new pa(56,new ua(4,144))),new t(20,96,96,22,22,new pa(68,new ua(4,174))),new t(21,104,104,24,24,new pa(56,new ua(6,136))),new t(22,120,120,18,18,new pa(68,new ua(6,175))),new t(23,132,132,20,20,new pa(62,new ua(8,163))),new t(24,144,144,22,22,new pa(62,new ua(8,156),new ua(2,155))),new t(25,8,18,6,16,new pa(7,new ua(1,5))),new t(26,8,32,6,14,new pa(11,new ua(1,10))),new t(27,12,26,10,24,new pa(14,new ua(1,16))),new t(28,12,36,10,16,new pa(18,new ua(1,22))),new t(29,16,36,14,16,new pa(24,new ua(1,32))),new t(30,16,48,14,22,new pa(28,new ua(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),m5e=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new Sr;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Vf(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return A5e.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,s=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),l=!1,c=!1,u=!1,d=!1;do if(n===s&&a===0&&!l)e[r++]=this.readCorner1(s,o)&255,n-=2,a+=2,l=!0;else if(n===s-2&&a===0&&o&3&&!c)e[r++]=this.readCorner2(s,o)&255,n-=2,a+=2,c=!0;else if(n===s+4&&a===2&&!(o&7)&&!u)e[r++]=this.readCorner3(s,o)&255,n-=2,a+=2,u=!0;else if(n===s-2&&a===0&&(o&7)===4&&!d)e[r++]=this.readCorner4(s,o)&255,n-=2,a+=2,d=!0;else{do n<s&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,o)&255),n+=2,a-=2;while(n<s&&a>=0);n+=3,a+=1}while(n<s||a<o);if(r!==this.version.getTotalCodewords())throw new Sr;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var s=0;return this.readModule(e-2,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r,n,a)&&(s|=1),s<<=1,this.readModule(e,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e,r,n,a)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new cn("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),o=r/a|0,l=n/s|0,c=o*a,u=l*s,d=new Vf(u,c),f=0;f<o;++f)for(var A=f*a,h=0;h<l;++h)for(var m=h*s,p=0;p<a;++p)for(var g=f*(a+2)+1+p,v=A+p,y=0;y<s;++y){var b=h*(s+2)+1+y;if(e.get(b,g)){var w=m+y;d.set(w,v)}}return d},t}(),cH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p5e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,s,o,l=r.getECBlocks(),c=0,u=l.getECBlocks();try{for(var d=cH(u),f=d.next();!f.done;f=d.next()){var A=f.value;c+=A.getCount()}}catch(J){n={error:J}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var h=new Array(c),m=0;try{for(var p=cH(u),g=p.next();!g.done;g=p.next())for(var A=g.value,v=0;v<A.getCount();v++){var y=A.getDataCodewords(),b=l.getECCodewords()+y;h[m++]=new t(y,new Uint8Array(b))}}catch(J){s={error:J}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}for(var w=h[0].codewords.length,j=w-l.getECCodewords(),I=j-1,_=0,v=0;v<I;v++)for(var S=0;S<m;S++)h[S].codewords[v]=e[_++];for(var E=r.getVersionNumber()===24,F=E?8:m,S=0;S<F;S++)h[S].codewords[j-1]=e[_++];for(var P=h[0].codewords.length,v=j;v<P;v++)for(var S=0;S<m;S++){var k=E?(S+8)%m:S,D=E&&k>7?v-1:v;h[k].codewords[D]=e[_++]}if(_!==e.length)throw new cn;return h},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Lre=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new cn(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,s=this.bytes;if(n>0){var o=8-n,l=e<o?e:o,c=o-l,u=255>>8-l<<c;r=(s[a]&u)>>c,e-=l,n+=l,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|s[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(s[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Ki;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ki||(Ki={}));var g5e=function(){function t(){}return t.decode=function(e){var r=new Lre(e),n=new Tn,a=new Tn,s=new Array,o=Ki.ASCII_ENCODE;do if(o===Ki.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,a);else{switch(o){case Ki.C40_ENCODE:this.decodeC40Segment(r,n);break;case Ki.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Ki.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Ki.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Ki.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new Sr}o=Ki.ASCII_ENCODE}while(o!==Ki.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new qj(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var s=e.readBits(8);if(s===0)throw new Sr;if(s<=128)return a&&(s+=128),r.append(String.fromCharCode(s-1)),Ki.ASCII_ENCODE;if(s===129)return Ki.PAD_ENCODE;if(s<=229){var o=s-130;o<10&&r.append("0"),r.append(""+o)}else switch(s){case 230:return Ki.C40_ENCODE;case 231:return Ki.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Ki.ANSIX12_ENCODE;case 239:return Ki.TEXT_ENCODE;case 240:return Ki.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new Sr;break}}while(e.available()>0);return Ki.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Sr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new Sr}s=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),s=0;break;default:throw new Sr}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Sr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new Sr}s=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),s=0}else throw new Sr;break;default:throw new Sr}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var o=n[s];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new Sr;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,s=Math.floor(a/1600);n[0]=s,a-=s*1600,s=Math.floor(a/40),n[1]=s,n[2]=a-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),a++),o;if(s===0?o=e.available()/8|0:s<250?o=s:o=250*(s-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new Sr;for(var l=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new Sr;l[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(l);try{r.append(sd.decode(l,Yn.ISO88591))}catch(u){throw new jw("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),x5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v5e=function(){function t(){this.rsDecoder=new zj(wc.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new m5e(e),s=a.getVersion(),o=a.readCodewords(),l=p5e.getDataBlocks(o,s),c=0;try{for(var u=x5e(l),d=u.next();!d.done;d=u.next()){var f=d.value;c+=f.getNumDataCodewords()}}catch(b){r={error:b}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var A=new Uint8Array(c),h=l.length,m=0;m<h;m++){var p=l[m],g=p.getCodewords(),v=p.getNumDataCodewords();this.correctErrors(g,v);for(var y=0;y<v;y++)A[y*h+m]=g[y]}return g5e.decode(A)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Oi}for(var a=0;a<r;a++)e[a]=n[a]},t}(),y5e=function(){function t(e){this.image=e,this.rectangleDetector=new Ok(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new Yt;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],s=r[2],o=r[3],l=this.transitionsBetween(n,o)+1,c=this.transitionsBetween(s,o)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var u=t.sampleGrid(this.image,n,a,s,o,l,c);return new I6(u,[n,a,s,o])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new qr(e.getX()+a,e.getY()+s)},t.moveAway=function(e,r,n){var a=e.getX(),s=e.getY();return a<r?a-=1:a+=1,s<n?s-=1:s+=1,new qr(a,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],s=e[2],o=this.transitionsBetween(r,n),l=this.transitionsBetween(n,a),c=this.transitionsBetween(a,s),u=this.transitionsBetween(s,r),d=o,f=[s,r,n,a];return d>l&&(d=l,f[0]=r,f[1]=n,f[2]=a,f[3]=s),d>c&&(d=c,f[0]=n,f[1]=a,f[2]=s,f[3]=r),d>u&&(f[0]=a,f[1]=s,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s),l=t.shiftPoint(n,a,(o+1)*4),c=t.shiftPoint(a,n,(o+1)*4),u=this.transitionsBetween(l,r),d=this.transitionsBetween(c,s);return u<d?(e[0]=r,e[1]=n,e[2]=a,e[3]=s):(e[0]=n,e[1]=a,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s),l=this.transitionsBetween(n,s),c=t.shiftPoint(r,n,(l+1)*4),u=t.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(c,s),l=this.transitionsBetween(u,s);var d=new qr(s.getX()+(a.getX()-n.getX())/(o+1),s.getY()+(a.getY()-n.getY())/(o+1)),f=new qr(s.getX()+(r.getX()-n.getX())/(l+1),s.getY()+(r.getY()-n.getY())/(l+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var A=this.transitionsBetween(c,d)+this.transitionsBetween(u,d),h=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return A>h?d:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(a,s)+1,c=t.shiftPoint(r,n,l*4),u=t.shiftPoint(a,n,o*4);o=this.transitionsBetween(c,s)+1,l=this.transitionsBetween(u,s)+1,(o&1)===1&&(o+=1),(l&1)===1&&(l+=1);var d=(r.getX()+n.getX()+a.getX()+s.getX())/4,f=(r.getY()+n.getY()+a.getY()+s.getY())/4;r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),a=t.moveAway(a,d,f),s=t.moveAway(s,d,f);var A,h;return c=t.shiftPoint(r,n,l*4),c=t.shiftPoint(c,s,o*4),A=t.shiftPoint(n,r,l*4),A=t.shiftPoint(A,a,o*4),u=t.shiftPoint(a,s,l*4),u=t.shiftPoint(u,n,o*4),h=t.shiftPoint(s,a,l*4),h=t.shiftPoint(h,r,o*4),[c,A,u,h]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,s,o,l){var c=j6.getInstance();return c.sampleGrid(e,o,l,.5,.5,o-.5,.5,o-.5,l-.5,.5,l-.5,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),s=Math.trunc(r.getX()),o=Math.trunc(r.getY()),l=Math.abs(o-a)>Math.abs(s-n);if(l){var c=n;n=a,a=c,c=s,s=o,o=c}for(var u=Math.abs(s-n),d=Math.abs(o-a),f=-u/2,A=a<o?1:-1,h=n<s?1:-1,m=0,p=this.image.get(l?a:n,l?n:a),g=n,v=a;g!==s;g+=h){var y=this.image.get(l?v:g,l?g:v);if(y!==p&&(m++,p=y),f+=d,f>0){if(v===o)break;v+=A,f-=u}}return m},t}(),jS=function(){function t(){this.decoder=new v5e}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(Za.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),a=t.NO_POINTS}else{var o=new y5e(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var l=n.getRawBytes(),c=new Dl(n.getText(),l,8*l.length,a,ln.DATA_MATRIX,Ja.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata(al.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&c.putMetadata(al.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new Yt;var a=this.moduleSize(r,e),s=r[1],o=n[1],l=r[0],c=n[0],u=(c-l+1)/a,d=(o-s+1)/a;if(u<=0||d<=0)throw new Yt;var f=a/2;s+=f,l+=f;for(var A=new Vf(u,d),h=0;h<d;h++)for(var m=s+h*a,p=0;p<u;p++)e.get(l+p*a,m)&&A.set(p,h);return A},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],s=e[1];a<n&&r.get(a,s);)a++;if(a===n)throw new Yt;var o=a-e[0];if(o===0)throw new Yt;return o},t.NO_POINTS=[],t}(),b5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){b5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new jS,r)||this}return e})(o1);var Vx;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Vx||(Vx={}));var w5e=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new gi(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new cn;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Vx.L,"L",1),t.M=new t(Vx.M,"M",0),t.Q=new t(Vx.Q,"Q",3),t.H=new t(Vx.H,"H",2),t}(),N5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ure=function(){function t(e){this.errorCorrectionLevel=w5e.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return Rn.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,s=Number.MAX_SAFE_INTEGER,o=0;try{for(var l=N5e(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var u=c.value,d=u[0];if(d===e||d===r)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<s&&(o=u[1],s=f),e!==r&&(f=t.numBitsDiffering(r,d),f<s&&(o=u[1],s=f))}}catch(A){n={error:A}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return s<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),C5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lt=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var s=C5e(a),o=s.next();!o.done;o=s.next()){var l=o.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Je=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),_5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ep=function(){function t(e,r){for(var n,a,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var l=0,c=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();try{for(var d=_5e(u),f=d.next();!f.done;f=d.next()){var A=f.value;l+=A.getCount()*(A.getDataCodewords()+c)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Sr;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Sr}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new cn;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var s=t.VERSION_DECODE_INFO[a];if(s===e)return t.getVersionForNumber(a+7);var o=Ure.numBitsDiffering(e,s);o<r&&(n=a+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new Vf(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var s=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Lt(7,new Je(1,19)),new Lt(10,new Je(1,16)),new Lt(13,new Je(1,13)),new Lt(17,new Je(1,9))),new t(2,Int32Array.from([6,18]),new Lt(10,new Je(1,34)),new Lt(16,new Je(1,28)),new Lt(22,new Je(1,22)),new Lt(28,new Je(1,16))),new t(3,Int32Array.from([6,22]),new Lt(15,new Je(1,55)),new Lt(26,new Je(1,44)),new Lt(18,new Je(2,17)),new Lt(22,new Je(2,13))),new t(4,Int32Array.from([6,26]),new Lt(20,new Je(1,80)),new Lt(18,new Je(2,32)),new Lt(26,new Je(2,24)),new Lt(16,new Je(4,9))),new t(5,Int32Array.from([6,30]),new Lt(26,new Je(1,108)),new Lt(24,new Je(2,43)),new Lt(18,new Je(2,15),new Je(2,16)),new Lt(22,new Je(2,11),new Je(2,12))),new t(6,Int32Array.from([6,34]),new Lt(18,new Je(2,68)),new Lt(16,new Je(4,27)),new Lt(24,new Je(4,19)),new Lt(28,new Je(4,15))),new t(7,Int32Array.from([6,22,38]),new Lt(20,new Je(2,78)),new Lt(18,new Je(4,31)),new Lt(18,new Je(2,14),new Je(4,15)),new Lt(26,new Je(4,13),new Je(1,14))),new t(8,Int32Array.from([6,24,42]),new Lt(24,new Je(2,97)),new Lt(22,new Je(2,38),new Je(2,39)),new Lt(22,new Je(4,18),new Je(2,19)),new Lt(26,new Je(4,14),new Je(2,15))),new t(9,Int32Array.from([6,26,46]),new Lt(30,new Je(2,116)),new Lt(22,new Je(3,36),new Je(2,37)),new Lt(20,new Je(4,16),new Je(4,17)),new Lt(24,new Je(4,12),new Je(4,13))),new t(10,Int32Array.from([6,28,50]),new Lt(18,new Je(2,68),new Je(2,69)),new Lt(26,new Je(4,43),new Je(1,44)),new Lt(24,new Je(6,19),new Je(2,20)),new Lt(28,new Je(6,15),new Je(2,16))),new t(11,Int32Array.from([6,30,54]),new Lt(20,new Je(4,81)),new Lt(30,new Je(1,50),new Je(4,51)),new Lt(28,new Je(4,22),new Je(4,23)),new Lt(24,new Je(3,12),new Je(8,13))),new t(12,Int32Array.from([6,32,58]),new Lt(24,new Je(2,92),new Je(2,93)),new Lt(22,new Je(6,36),new Je(2,37)),new Lt(26,new Je(4,20),new Je(6,21)),new Lt(28,new Je(7,14),new Je(4,15))),new t(13,Int32Array.from([6,34,62]),new Lt(26,new Je(4,107)),new Lt(22,new Je(8,37),new Je(1,38)),new Lt(24,new Je(8,20),new Je(4,21)),new Lt(22,new Je(12,11),new Je(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Lt(30,new Je(3,115),new Je(1,116)),new Lt(24,new Je(4,40),new Je(5,41)),new Lt(20,new Je(11,16),new Je(5,17)),new Lt(24,new Je(11,12),new Je(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Lt(22,new Je(5,87),new Je(1,88)),new Lt(24,new Je(5,41),new Je(5,42)),new Lt(30,new Je(5,24),new Je(7,25)),new Lt(24,new Je(11,12),new Je(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Lt(24,new Je(5,98),new Je(1,99)),new Lt(28,new Je(7,45),new Je(3,46)),new Lt(24,new Je(15,19),new Je(2,20)),new Lt(30,new Je(3,15),new Je(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Lt(28,new Je(1,107),new Je(5,108)),new Lt(28,new Je(10,46),new Je(1,47)),new Lt(28,new Je(1,22),new Je(15,23)),new Lt(28,new Je(2,14),new Je(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Lt(30,new Je(5,120),new Je(1,121)),new Lt(26,new Je(9,43),new Je(4,44)),new Lt(28,new Je(17,22),new Je(1,23)),new Lt(28,new Je(2,14),new Je(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Lt(28,new Je(3,113),new Je(4,114)),new Lt(26,new Je(3,44),new Je(11,45)),new Lt(26,new Je(17,21),new Je(4,22)),new Lt(26,new Je(9,13),new Je(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Lt(28,new Je(3,107),new Je(5,108)),new Lt(26,new Je(3,41),new Je(13,42)),new Lt(30,new Je(15,24),new Je(5,25)),new Lt(28,new Je(15,15),new Je(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Lt(28,new Je(4,116),new Je(4,117)),new Lt(26,new Je(17,42)),new Lt(28,new Je(17,22),new Je(6,23)),new Lt(30,new Je(19,16),new Je(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Lt(28,new Je(2,111),new Je(7,112)),new Lt(28,new Je(17,46)),new Lt(30,new Je(7,24),new Je(16,25)),new Lt(24,new Je(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Lt(30,new Je(4,121),new Je(5,122)),new Lt(28,new Je(4,47),new Je(14,48)),new Lt(30,new Je(11,24),new Je(14,25)),new Lt(30,new Je(16,15),new Je(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Lt(30,new Je(6,117),new Je(4,118)),new Lt(28,new Je(6,45),new Je(14,46)),new Lt(30,new Je(11,24),new Je(16,25)),new Lt(30,new Je(30,16),new Je(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Lt(26,new Je(8,106),new Je(4,107)),new Lt(28,new Je(8,47),new Je(13,48)),new Lt(30,new Je(7,24),new Je(22,25)),new Lt(30,new Je(22,15),new Je(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Lt(28,new Je(10,114),new Je(2,115)),new Lt(28,new Je(19,46),new Je(4,47)),new Lt(28,new Je(28,22),new Je(6,23)),new Lt(30,new Je(33,16),new Je(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Lt(30,new Je(8,122),new Je(4,123)),new Lt(28,new Je(22,45),new Je(3,46)),new Lt(30,new Je(8,23),new Je(26,24)),new Lt(30,new Je(12,15),new Je(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Lt(30,new Je(3,117),new Je(10,118)),new Lt(28,new Je(3,45),new Je(23,46)),new Lt(30,new Je(4,24),new Je(31,25)),new Lt(30,new Je(11,15),new Je(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Lt(30,new Je(7,116),new Je(7,117)),new Lt(28,new Je(21,45),new Je(7,46)),new Lt(30,new Je(1,23),new Je(37,24)),new Lt(30,new Je(19,15),new Je(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Lt(30,new Je(5,115),new Je(10,116)),new Lt(28,new Je(19,47),new Je(10,48)),new Lt(30,new Je(15,24),new Je(25,25)),new Lt(30,new Je(23,15),new Je(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Lt(30,new Je(13,115),new Je(3,116)),new Lt(28,new Je(2,46),new Je(29,47)),new Lt(30,new Je(42,24),new Je(1,25)),new Lt(30,new Je(23,15),new Je(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Lt(30,new Je(17,115)),new Lt(28,new Je(10,46),new Je(23,47)),new Lt(30,new Je(10,24),new Je(35,25)),new Lt(30,new Je(19,15),new Je(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Lt(30,new Je(17,115),new Je(1,116)),new Lt(28,new Je(14,46),new Je(21,47)),new Lt(30,new Je(29,24),new Je(19,25)),new Lt(30,new Je(11,15),new Je(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Lt(30,new Je(13,115),new Je(6,116)),new Lt(28,new Je(14,46),new Je(23,47)),new Lt(30,new Je(44,24),new Je(7,25)),new Lt(30,new Je(59,16),new Je(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Lt(30,new Je(12,121),new Je(7,122)),new Lt(28,new Je(12,47),new Je(26,48)),new Lt(30,new Je(39,24),new Je(14,25)),new Lt(30,new Je(22,15),new Je(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Lt(30,new Je(6,121),new Je(14,122)),new Lt(28,new Je(6,47),new Je(34,48)),new Lt(30,new Je(46,24),new Je(10,25)),new Lt(30,new Je(2,15),new Je(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Lt(30,new Je(17,122),new Je(4,123)),new Lt(28,new Je(29,46),new Je(14,47)),new Lt(30,new Je(49,24),new Je(10,25)),new Lt(30,new Je(24,15),new Je(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Lt(30,new Je(4,122),new Je(18,123)),new Lt(28,new Je(13,46),new Je(32,47)),new Lt(30,new Je(48,24),new Je(14,25)),new Lt(30,new Je(42,15),new Je(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Lt(30,new Je(20,117),new Je(4,118)),new Lt(28,new Je(40,47),new Je(7,48)),new Lt(30,new Je(43,24),new Je(22,25)),new Lt(30,new Je(10,15),new Je(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Lt(30,new Je(19,118),new Je(6,119)),new Lt(28,new Je(18,47),new Je(31,48)),new Lt(30,new Je(34,24),new Je(34,25)),new Lt(30,new Je(20,15),new Je(61,16)))],t}(),vo;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(vo||(vo={}));var uH=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[vo.DATA_MASK_000,new t(vo.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[vo.DATA_MASK_001,new t(vo.DATA_MASK_001,function(e,r){return(e&1)===0})],[vo.DATA_MASK_010,new t(vo.DATA_MASK_010,function(e,r){return r%3===0})],[vo.DATA_MASK_011,new t(vo.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[vo.DATA_MASK_100,new t(vo.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[vo.DATA_MASK_101,new t(vo.DATA_MASK_101,function(e,r){return e*r%6===0})],[vo.DATA_MASK_110,new t(vo.DATA_MASK_110,function(e,r){return e*r%6<3})],[vo.DATA_MASK_111,new t(vo.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),E5e=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new Sr;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),s=0,o=a-7,n=a-1;n>=o;n--)s=this.copyBit(8,n,s);for(var r=a-8;r<a;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=Ure.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Sr},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Ep.getVersionForNumber(r);for(var n=0,a=e-11,s=5;s>=0;s--)for(var o=e-9;o>=a;o--)n=this.copyBit(o,s,n);var l=Ep.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var o=5;o>=0;o--)for(var s=e-9;s>=a;s--)n=this.copyBit(o,s,n);if(l=Ep.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new Sr},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=uH.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var s=r.buildFunctionPattern(),o=!0,l=new Uint8Array(r.getTotalCodewords()),c=0,u=0,d=0,f=a-1;f>0;f-=2){f===6&&f--;for(var A=0;A<a;A++)for(var h=o?a-1-A:A,m=0;m<2;m++)s.get(f-m,h)||(d++,u<<=1,this.bitMatrix.get(f-m,h)&&(u|=1),d===8&&(l[c++]=u,d=0,u=0));o=!o}if(c!==r.getTotalCodewords())throw new Sr;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=uH.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,s=e.getHeight();a<s;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),dH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S5e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,s,o,l;if(e.length!==r.getTotalCodewords())throw new cn;var c=r.getECBlocksForLevel(n),u=0,d=c.getECBlocks();try{for(var f=dH(d),A=f.next();!A.done;A=f.next()){var h=A.value;u+=h.getCount()}}catch(D){a={error:D}}finally{try{A&&!A.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}var m=new Array(u),p=0;try{for(var g=dH(d),v=g.next();!v.done;v=g.next())for(var h=v.value,y=0;y<h.getCount();y++){var b=h.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;m[p++]=new t(b,new Uint8Array(w))}}catch(D){o={error:D}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}for(var j=m[0].codewords.length,I=m.length-1;I>=0;){var _=m[I].codewords.length;if(_===j)break;I--}I++;for(var S=j-c.getECCodewordsPerBlock(),E=0,y=0;y<S;y++)for(var F=0;F<p;F++)m[F].codewords[y]=e[E++];for(var F=I;F<p;F++)m[F].codewords[S]=e[E++];for(var P=m[0].codewords.length,y=S;y<P;y++)for(var F=0;F<p;F++){var k=F<I?y:y+1;m[F].codewords[k]=e[E++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Vu;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Vu||(Vu={}));var is=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new cn;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Vu.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Vu.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Vu.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Vu.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Vu.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Vu.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Vu.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Vu.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Vu.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Vu.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),I5e=function(){function t(){}return t.decode=function(e,r,n,a){var s=new Lre(e),o=new Tn,l=new Array,c=-1,u=-1;try{var d=null,f=!1,A=void 0;do{if(s.available()<4)A=is.TERMINATOR;else{var h=s.readBits(4);A=is.forBits(h)}switch(A){case is.TERMINATOR:break;case is.FNC1_FIRST_POSITION:case is.FNC1_SECOND_POSITION:f=!0;break;case is.STRUCTURED_APPEND:if(s.available()<16)throw new Sr;c=s.readBits(8),u=s.readBits(8);break;case is.ECI:var m=t.parseECIValue(s);if(d=to.getCharacterSetECIByValue(m),d===null)throw new Sr;break;case is.HANZI:var p=s.readBits(4),g=s.readBits(A.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(s,o,g);break;default:var v=s.readBits(A.getCharacterCountBits(r));switch(A){case is.NUMERIC:t.decodeNumericSegment(s,o,v);break;case is.ALPHANUMERIC:t.decodeAlphanumericSegment(s,o,v,f);break;case is.BYTE:t.decodeByteSegment(s,o,v,d,l,a);break;case is.KANJI:t.decodeKanjiSegment(s,o,v);break;default:throw new Sr}break}}while(A!==is.TERMINATOR)}catch{throw new Sr}return new qj(e,o.toString(),l.length===0?null:l,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new Sr;for(var a=new Uint8Array(2*n),s=0;n>0;){var o=e.readBits(13),l=o/96<<8&4294967295|o%96;l<959?l+=41377:l+=42657,a[s]=l>>8&255,a[s+1]=l&255,s+=2,n--}try{r.append(sd.decode(a,Yn.GB2312))}catch(c){throw new Sr(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new Sr;for(var a=new Uint8Array(2*n),s=0;n>0;){var o=e.readBits(13),l=o/192<<8&4294967295|o%192;l<7936?l+=33088:l+=49472,a[s]=l>>8,a[s+1]=l,s+=2,n--}try{r.append(sd.decode(a,Yn.SHIFT_JIS))}catch(c){throw new Sr(c)}},t.decodeByteSegment=function(e,r,n,a,s,o){if(8*n>e.available())throw new Sr;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var u;a===null?u=Yn.guessEncoding(l,o):u=a.getName();try{r.append(sd.decode(l,u))}catch(d){throw new Sr(d)}s.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Sr;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var s=r.length();n>1;){if(e.available()<11)throw new Sr;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new Sr;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var l=s;l<r.length();l++)r.charAt(l)==="%"&&(l<r.length()-1&&r.charAt(l+1)==="%"?r.deleteCharAt(l+1):r.setCharAt(l,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new Sr;var a=e.readBits(10);if(a>=1e3)throw new Sr;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new Sr;var s=e.readBits(7);if(s>=100)throw new Sr;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new Sr;var o=e.readBits(4);if(o>=10)throw new Sr;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new Sr},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),Qre=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),fH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j5e=function(){function t(){this.rsDecoder=new zj(wc.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(Vf.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new E5e(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new Qre(!0)),s}catch(o){throw a!==null?a:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,s,o,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=S5e.getDataBlocks(u,l,c),f=0;try{for(var A=fH(d),h=A.next();!h.done;h=A.next()){var m=h.value;f+=m.getNumDataCodewords()}}catch(I){n={error:I}}finally{try{h&&!h.done&&(a=A.return)&&a.call(A)}finally{if(n)throw n.error}}var p=new Uint8Array(f),g=0;try{for(var v=fH(d),y=v.next();!y.done;y=v.next()){var m=y.value,b=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(b,w);for(var j=0;j<w;j++)p[g++]=b[j]}}catch(I){s={error:I}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}return I5e.decode(p,l,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Oi}for(var a=0;a<r;a++)e[a]=n[a]},t}(),P5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B5e=function(t){P5e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=(this.getX()+n)/2,o=(this.getY()+r)/2,l=(this.estimatedModuleSize+a)/2;return new e(s,o,l)},e}(qr),T5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k5e=function(){function t(e,r,n,a,s,o,l){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=s,this.moduleSize=o,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,s=this.startY+r/2,o=new Int32Array(3),l=this.image,c=0;c<r;c++){var u=s+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<a&&!l.get(d,u);)d++;for(var f=0;d<a;){if(l.get(d,u))if(f===1)o[1]++;else if(f===2){if(this.foundPatternCross(o)){var A=this.handlePossibleCenter(o,u,d);if(A!==null)return A}o[0]=o[2],o[1]=1,o[2]=0,f=1}else o[++f]++;else f===1&&f++,o[f]++;d++}if(this.foundPatternCross(o)){var A=this.handlePossibleCenter(o,u,a);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Yt},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var s=this.image,o=s.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(r,c)&&l[1]<=n;)l[1]++,c++;if(c===o||l[1]>n)return NaN;for(;c<o&&!s.get(r,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var u=l[0]+l[1]+l[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,s,o=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,l,2*e[1],o);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=T5e(this.possibleCenters),f=d.next();!f.done;f=d.next()){var A=f.value;if(A.aboutEquals(u,c,l))return A.combineEstimate(c,l,u)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var h=new B5e(l,c,u);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},t}(),F5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O5e=function(t){F5e(e,t);function e(r,n,a,s){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=a,o.count=s,s===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=this.count+1,o=(this.count*this.getX()+n)/s,l=(this.count*this.getY()+r)/s,c=(this.count*this.estimatedModuleSize+a)/s;return new e(o,l,c,s)},e}(qr),D5e=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),uy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R5e=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(Za.TRY_HARDER)!==void 0,n=e!=null&&e.get(Za.PURE_BARCODE)!==void 0,a=this.image,s=a.getHeight(),o=a.getWidth(),l=Math.floor(3*s/(4*t.MAX_MODULES));(l<t.MIN_SKIP||r)&&(l=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),d=l-1;d<s&&!c;d+=l){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,A=0;A<o;A++)if(a.get(A,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var h=this.handlePossibleCenter(u,d,A,n);if(h===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-l,A=o-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var h=this.handlePossibleCenter(u,d,o,n);h===!0&&(l=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var p=this.selectBestPatterns();return qr.orderBestPatterns(p),new D5e(p)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var s=r/7,o=s/2;return Math.abs(s-e[0])<o&&Math.abs(s-e[1])<o&&Math.abs(3*s-e[2])<3*o&&Math.abs(s-e[3])<o&&Math.abs(s-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var s=this.getCrossCheckStateCount(),o=0,l=this.image;e>=o&&r>=o&&l.get(r-o,e-o);)s[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!l.get(r-o,e-o)&&s[1]<=n;)s[1]++,o++;if(e<o||r<o||s[1]>n)return!1;for(;e>=o&&r>=o&&l.get(r-o,e-o)&&s[0]<=n;)s[0]++,o++;if(s[0]>n)return!1;var c=l.getHeight(),u=l.getWidth();for(o=1;e+o<c&&r+o<u&&l.get(r+o,e+o);)s[2]++,o++;if(e+o>=c||r+o>=u)return!1;for(;e+o<c&&r+o<u&&!l.get(r+o,e+o)&&s[3]<n;)s[3]++,o++;if(e+o>=c||r+o>=u||s[3]>=n)return!1;for(;e+o<c&&r+o<u&&l.get(r+o,e+o)&&s[4]<n;)s[4]++,o++;if(s[4]>=n)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-a)<2*a&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var s=this.image,o=s.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(r,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(r,c);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!s.get(r,c)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&s.get(r,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var s=this.image,o=s.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(c,r);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(c,r)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(c,r)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(c,r);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!s.get(c,r)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&s.get(c,r)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,Math.floor(o),e[2],s);if(!isNaN(l)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(l),e[2],s),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(l),Math.floor(o),e[2],s)))){for(var c=s/7,u=!1,d=this.possibleCenters,f=0,A=d.length;f<A;f++){var h=d[f];if(h.aboutEquals(c,l,o)){d[f]=h.combineEstimate(l,o,c),u=!0;break}}if(!u){var m=new O5e(o,l,c);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var s=uy(this.possibleCenters),o=s.next();!o.done;o=s.next()){var l=o.value;if(l.getCount()>=t.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,s=0,o=0,l=this.possibleCenters.length;try{for(var c=uy(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(s++,o+=d.getEstimatedModuleSize())}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(s<3)return!1;var f=o/l,A=0;try{for(var h=uy(this.possibleCenters),m=h.next();!m.done;m=h.next()){var d=m.value;A+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}return A<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,a,s=this.possibleCenters.length;if(s<3)throw new Yt;var o=this.possibleCenters,l;if(s>3){var c=0,u=0;try{for(var d=uy(this.possibleCenters),f=d.next();!f.done;f=d.next()){var A=f.value,h=A.getEstimatedModuleSize();c+=h,u+=h*h}}catch(j){e={error:j}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}l=c/s;var m=Math.sqrt(u/s-l*l);o.sort(function(j,I){var _=Math.abs(I.getEstimatedModuleSize()-l),S=Math.abs(j.getEstimatedModuleSize()-l);return _<S?-1:_>S?1:0});for(var p=Math.max(.2*l,m),g=0;g<o.length&&o.length>3;g++){var v=o[g];Math.abs(v.getEstimatedModuleSize()-l)>p&&(o.splice(g,1),g--)}}if(o.length>3){var c=0;try{for(var y=uy(o),b=y.next();!b.done;b=y.next()){var w=b.value;c+=w.getEstimatedModuleSize()}}catch(I){n={error:I}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}l=c/o.length,o.sort(function(I,_){if(_.getCount()===I.getCount()){var S=Math.abs(_.getEstimatedModuleSize()-l),E=Math.abs(I.getEstimatedModuleSize()-l);return S<E?1:S>E?-1:0}else return _.getCount()-I.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),M5e=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Za.NEED_RESULT_POINT_CALLBACK);var r=new R5e(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),s=this.calculateModuleSize(r,n,a);if(s<1)throw new Yt("No pattern found in proccess finder.");var o=t.computeDimension(r,n,a,s),l=Ep.getProvisionalVersionForDimension(o),c=l.getDimensionForVersion()-7,u=null;if(l.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+a.getX(),f=n.getY()-r.getY()+a.getY(),A=1-3/c,h=Math.floor(r.getX()+A*(d-r.getX())),m=Math.floor(r.getY()+A*(f-r.getY())),p=4;p<=16;p<<=1)try{u=this.findAlignmentInRegion(s,h,m,p);break}catch(b){if(!(b instanceof Yt))throw b}var g=t.createTransform(r,n,a,u,o),v=t.sampleGrid(this.image,g,o),y;return u===null?y=[a,r,n]:y=[a,r,n,u],new I6(v,y)},t.createTransform=function(e,r,n,a,s){var o=s-3.5,l,c,u,d;return a!==null?(l=a.getX(),c=a.getY(),u=o-3,d=u):(l=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=o,d=o),Ore.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,u,d,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=j6.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var s=sa.round(qr.distance(e,r)/a),o=sa.round(qr.distance(e,n)/a),l=Math.floor((s+o)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new Yt("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,a),o=1,l=e-(n-e);l<0?(o=e/(e-l),l=0):l>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*o);return o=1,c<0?(o=r/(r-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*o),s+=this.sizeOfBlackWhiteBlackRun(e,r,l,c),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var s=Math.abs(a-r)>Math.abs(n-e);if(s){var o=e;e=r,r=o,o=n,n=a,a=o}for(var l=Math.abs(n-e),c=Math.abs(a-r),u=-l/2,d=e<n?1:-1,f=r<a?1:-1,A=0,h=n+d,m=e,p=r;m!==h;m+=d){var g=s?p:m,v=s?m:p;if(A===1===this.image.get(g,v)){if(A===2)return sa.distance(m,p,e,r);A++}if(u+=c,u>0){if(p===a)break;p+=f,u-=l}}return A===2?sa.distance(n+d,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var s=Math.floor(a*e),o=Math.max(0,r-s),l=Math.min(this.image.getWidth()-1,r+s);if(l-o<e*3)throw new Yt("Alignment top exceeds estimated module size.");var c=Math.max(0,n-s),u=Math.min(this.image.getHeight()-1,n+s);if(u-c<e*3)throw new Yt("Alignment bottom exceeds estimated module size.");var d=new k5e(this.image,o,c,l-o,u-c,e,this.resultPointCallback);return d.find()},t}(),PS=function(){function t(){this.decoder=new j5e}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(Za.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),a=t.NO_POINTS}else{var o=new M5e(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),a=o.getPoints()}n.getOther()instanceof Qre&&n.getOther().applyMirroredCorrection(a);var l=new Dl(n.getText(),n.getRawBytes(),void 0,a,ln.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata(al.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&l.putMetadata(al.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(l.putMetadata(al.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(al.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new Yt;var a=this.moduleSize(r,e),s=r[1],o=n[1],l=r[0],c=n[0];if(l>=c||s>=o)throw new Yt;if(o-s!==c-l&&(c=l+(o-s),c>=e.getWidth()))throw new Yt;var u=Math.round((c-l+1)/a),d=Math.round((o-s+1)/a);if(u<=0||d<=0)throw new Yt;if(d!==u)throw new Yt;var f=Math.floor(a/2);s+=f,l+=f;var A=l+Math.floor((u-1)*a)-c;if(A>0){if(A>f)throw new Yt;l-=A}var h=s+Math.floor((d-1)*a)-o;if(h>0){if(h>f)throw new Yt;s-=h}for(var m=new Vf(u,d),p=0;p<d;p++)for(var g=s+Math.floor(p*a),v=0;v<u;v++)e.get(l+Math.floor(v*a),g)&&m.set(v,p);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),s=e[0],o=e[1],l=!0,c=0;s<a&&o<n;){if(l!==r.get(s,o)){if(++c===5)break;l=!l}s++,o++}if(s===a||o===n)throw new Yt;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),L5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zn=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return sa.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),s=0;try{for(var o=L5e(e),l=o.next();!l.done;l=o.next()){var c=l.value;a[s++]=c}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=ro.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),U5e=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),Q5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V5e=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),s=t.detect(n,a);return s.length||(a=a.clone(),a.rotate180(),s=t.detect(n,a)),new U5e(a,s)},t.detect=function(e,r){for(var n,a,s=new Array,o=0,l=0,c=!1;o<r.getHeight();){var u=t.findVertices(r,o,l);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(n=void 0,Q5e(s)),f=d.next();!f.done;f=d.next()){var A=f.value;A[1]!=null&&(o=Math.trunc(Math.max(o,A[1].getY()))),A[3]!=null&&(o=Math.max(o,Math.trunc(A[3].getY())))}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(c=!0,s.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),o=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),o=Math.trunc(u[4].getY()))}return s},t.findVertices=function(e,r,n){var a=e.getHeight(),s=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,a,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,a,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,s,o){for(var l=new Array(4),c=!1,u=new Int32Array(o.length);a<r;a+=t.ROW_STEP){var d=t.findGuardPattern(e,s,a,n,!1,o,u);if(d!=null){for(;a>0;){var f=t.findGuardPattern(e,s,--a,n,!1,o,u);if(f!=null)d=f;else{a++;break}}l[0]=new qr(d[0],a),l[1]=new qr(d[1],a),c=!0;break}}var A=a+1;if(c){for(var h=0,f=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);A<r;A++){var d=t.findGuardPattern(e,f[0],A,n,!1,o,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,h=0;else{if(h>t.SKIPPED_ROW_COUNT_MAX)break;h++}}A-=h+1,l[2]=new qr(f[0],A),l[3]=new qr(f[1],A)}return A-a<t.BARCODE_MIN_HEIGHT&&ro.fill(l,null),l},t.findGuardPattern=function(e,r,n,a,s,o,l){ro.fillWithin(l,0,l.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,f=0,A=o.length,h=s;d<a;d++){var m=e.get(d,n);if(m!==h)l[f]++;else{if(f===A-1){if(t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],Ja.arraycopy(l,2,l,0,f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,h=!h}}return f===A-1&&t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,o=0,l=0;l<a;l++)s+=e[l],o+=r[l];if(s<o)return 1/0;var c=s/o;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],A=r[d]*c,h=f>A?f-A:A-f;if(h>n)return 1/0;u+=h}return u/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),H5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dp=function(){function t(e,r){if(r.length===0)throw new cn;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),Ja.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var s=H5e(this.coefficients),o=s.next();!o.done;o=s.next()){var l=o.value;a=this.field.add(a,l)}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new cn("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),o=n.length-r.length;Ja.arraycopy(n,0,s,0,o);for(var l=o;l<n.length;l++)s[l]=this.field.add(r[l-o],n[l]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new cn("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new cn("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,o=new Int32Array(n+s-1),l=0;l<n;l++)for(var c=r[l],u=0;u<s;u++)o[l+u]=this.field.add(o[l+u],this.field.multiply(c,a[u]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new cn;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new Tn,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),$5e=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new cn;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Fre;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),G5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K5e=function(t){G5e(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var s=1,o=0;o<r;o++)a.expTable[o]=s,s=s*n%r;for(var o=0;o<r-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new dp(a,new Int32Array([0])),a.one=new dp(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new cn;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new dp(this,a)},e.PDF417_GF=new e(Zn.NUMBER_OF_CODEWORDS,3),e}($5e),q5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z5e=function(){function t(){this.field=K5e.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,s,o=new dp(this.field,e),l=new Int32Array(r),c=!1,u=r;u>0;u--){var d=o.evaluateAt(this.field.exp(u));l[r-u]=d,d!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(n!=null)try{for(var A=q5e(n),h=A.next();!h.done;h=A.next()){var m=h.value,p=this.field.exp(e.length-1-m),g=new dp(this.field,new Int32Array([this.field.subtract(0,p),1]));f=f.multiply(g)}}catch(S){a={error:S}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}for(var v=new dp(this.field,l),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),v,r),b=y[0],w=y[1],j=this.findErrorLocations(b),I=this.findErrorMagnitudes(w,b,j),u=0;u<j.length;u++){var _=e.length-1-this.field.log(j[u]);if(_<0)throw Oi.getChecksumInstance();e[_]=this.field.subtract(e[_],I[u])}return j.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=e,o=r,l=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(n/2);){var u=s,d=l;if(s=o,l=c,s.isZero())throw Oi.getChecksumInstance();o=u;for(var f=this.field.getZero(),A=s.getCoefficient(s.getDegree()),h=this.field.inverse(A);o.getDegree()>=s.getDegree()&&!o.isZero();){var m=o.getDegree()-s.getDegree(),p=this.field.multiply(o.getCoefficient(o.getDegree()),h);f=f.add(this.field.buildMonomial(m,p)),o=o.subtract(s.multiplyByMonomial(m,p))}c=f.multiply(l).subtract(d).negative()}var g=c.getCoefficient(0);if(g===0)throw Oi.getChecksumInstance();var v=this.field.inverse(g),y=c.multiply(v),b=o.multiply(v);return[y,b]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,s=1;s<this.field.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=this.field.inverse(s),a++);if(a!==r)throw Oi.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),s=new Int32Array(a),o=1;o<=a;o++)s[a-o]=this.field.multiply(o,r.getCoefficient(o));for(var l=new dp(this.field,s),c=n.length,u=new Int32Array(c),o=0;o<c;o++){var d=this.field.inverse(n[o]),f=this.field.subtract(0,e.evaluateAt(d)),A=this.field.inverse(l.evaluateAt(d));u[o]=this.field.multiply(f,A)}return u},t}(),Rk=function(){function t(e,r,n,a,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,s)}return t.prototype.constructor_1=function(e,r,n,a,s){var o=r==null||n==null,l=a==null||s==null;if(o&&l)throw new Yt;o?(r=new qr(0,a.getY()),n=new qr(0,s.getY())):l&&(a=new qr(e.getWidth()-1,r.getY()),s=new qr(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,s=this.bottomLeft,o=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var d=new qr(c.getX(),u);n?a=d:o=d}if(r>0){var f=n?this.bottomLeft:this.bottomRight,A=Math.trunc(f.getY()+r);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);var h=new qr(f.getX(),A);n?s=h:l=h}return new t(this.image,a,s,o,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),W5e=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),B6=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(o,l,c,u,d,f){if(o==="%%")return"%";if(r[++n]!==void 0){o=u?parseInt(u.substr(1)):void 0;var A=d?parseInt(d.substr(1)):void 0,h;switch(f){case"s":h=r[n];break;case"c":h=r[n][0];break;case"f":h=parseFloat(r[n]).toFixed(o);break;case"p":h=parseFloat(r[n]).toPrecision(o);break;case"e":h=parseFloat(r[n]).toExponential(o);break;case"x":h=parseInt(r[n]).toString(A||16);break;case"d":h=parseFloat(parseInt(r[n],A||10).toPrecision(o)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(A);for(var m=parseInt(c),p=c&&c[0]+""=="0"?"0":" ";h.length<m;)h=l!==void 0?h+p:p+h;return h}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),X5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vre=function(){function t(e){this.boundingBox=new Rk(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new B6,a=0;try{for(var s=X5e(this.codewords),o=s.next();!o.done;o=s.next()){var l=o.value;if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),Y5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J5e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s},Qy=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,s=function(f,A){var h={getKey:function(){return f},getValue:function(){return A}};h.getValue()>n?(n=h.getValue(),a=[],a.push(h.getKey())):h.getValue()===n&&a.push(h.getKey())};try{for(var o=Y5e(this.values.entries()),l=o.next();!l.done;l=o.next()){var c=J5e(l.value,2),u=c[0],d=c[1];s(u,d)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return Zn.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),Z5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hH=function(t){Z5e(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=m5(this.getCodewords()),s=a.next();!s.done;s=a.next()){var o=s.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),s=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=-1,d=1,f=0,A=l;A<c;A++)if(n[A]!=null){var h=n[A],m=h.getRowNumber()-u;if(m===0)f++;else if(m===1)d=Math.max(d,f),f=1,u=h.getRowNumber();else if(m<0||h.getRowNumber()>=r.getRowCount()||m>A)n[A]=null;else{var p=void 0;d>2?p=(d-2)*m:p=m;for(var g=p>=A,v=1;v<=p&&!g;v++)g=n[A-v]!=null;g?n[A]=null:(u=h.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var s=new Int32Array(a.getRowCount());try{for(var o=m5(this.getCodewords()),l=o.next();!l.done;l=o.next()){var c=l.value;if(c!=null){var u=c.getRowNumber();if(u>=s.length)continue;s[u]++}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.getCodewords(),u=-1,d=o;d<l;d++)if(c[d]!=null){var f=c[d];f.setRowNumberAsRowIndicatorColumn();var A=f.getRowNumber()-u;A===0||(A===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?c[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),s=new Qy,o=new Qy,l=new Qy,c=new Qy;try{for(var u=m5(a),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var A=f.getValue()%30,h=f.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:o.setValue(A*3+1);break;case 1:c.setValue(A/3),l.setValue(A%3);break;case 2:s.setValue(A+1);break}}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(s.getValue().length===0||o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<Zn.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>Zn.MAX_ROWS_IN_BARCODE)return null;var m=new W5e(s.getValue()[0],o.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var s=r[a];if(r[a]!=null){var o=s.getValue()%30,l=s.getRowNumber();if(l>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:o+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(Vre),eBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tBe=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Zn.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,o=this.barcodeColumnCount+1;o>0&&s<this.ADJUST_ROW_NUMBER_SKIP;o--){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,o=1;o<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;o++){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,s;if(this.detectionResultColumns[e-1]!=null){var o=n[r],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=l[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=l[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=l[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=l[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=l[r+2],u[13]=c[r+2]);try{for(var d=eBe(u),f=d.next();!f.done;f=d.next()){var A=f.value;if(t.adjustRowNumber(o,A))return}}catch(h){a={error:h}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new B6,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[a].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),rBe=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),nBe=function(){function t(){}return t.initialize=function(){for(var e=0;e<Zn.SYMBOL_TABLE.length;e++)for(var r=Zn.SYMBOL_TABLE[e],n=r&1,a=0;a<Zn.BARS_IN_MODULE;a++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Zn.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Zn.BARS_IN_MODULE-a-1]=Math.fround(s/Zn.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=sa.sum(e),n=new Int32Array(Zn.BARS_IN_MODULE),a=0,s=0,o=0;o<Zn.MODULES_IN_CODEWORD;o++){var l=r/(2*Zn.MODULES_IN_CODEWORD)+o*r/Zn.MODULES_IN_CODEWORD;s+e[a]<=l&&(s+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return Zn.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=sa.sum(e),n=new Array(Zn.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var s=Fk.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,u=t.RATIOS_TABLE[l],d=0;d<Zn.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-n[d]);if(c+=Math.fround(f*f),c>=s)break}c<s&&(s=c,o=Zn.SYMBOL_TABLE[l])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Zn.SYMBOL_TABLE.length).map(function(e){return new Array(Zn.BARS_IN_MODULE)}),t}(),aBe=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),AH=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),sBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iBe=function(t){sBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Fc),oBe=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new iBe;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new S6;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),lBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cBe=function(t){lBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Fc),uBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dBe=function(t){uBe(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new cn("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new cBe;a=Rn.MAX_VALUE}this.buf=ro.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new S6;this.ensureCapacity(this.count+a),Ja.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ro.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(oBe),Oa;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Oa||(Oa={}));function Hre(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var UC;function u0(t){if(typeof UC>"u"&&(UC=Hre()),UC===null)throw new Error("BigInt is not supported!");return UC(t)}function fBe(){var t=[];t[0]=u0(1);var e=u0(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var hBe=function(){function t(){}return t.decode=function(e,r){var n=new Tn(""),a=to.ISO8859_1;n.enableDecoding(a);for(var s=1,o=e[s++],l=new aBe;s<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(o,e,a,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:to.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Sr;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)o=e[s++];else throw Sr.getFormatInstance()}if(n.length()===0)throw Sr.getFormatInstance();var c=new qj(null,n.toString(),null,r);return c.setOther(l),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Sr.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)a[s]=e[r];n.setSegmentIndex(Rn.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Tn;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var l=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Tn;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new Tn;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Tn;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new Tn;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(Rn.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var A=new Tn;r=t.numericCompaction(e,r+1,A),n.setTimestamp(AH.parseLong(A.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new Tn;r=t.numericCompaction(e,r+1,h),n.setChecksum(Rn.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new Tn;r=t.numericCompaction(e,r+1,m),n.setFileSize(AH.parseLong(m.toString()));break;default:throw Sr.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw Sr.getFormatInstance()}if(l!==-1){var p=r-l;n.isLastSegment()&&p--,n.setOptionalData(ro.copyOfRange(e,l,l+p))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),o=0,l=!1;r<e[0]&&!l;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[o]=c/30,a[o+1]=c%30,o+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],s[o]=c,o++;break}}return t.decodeTextCompaction(a,s,o,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var s=Oa.ALPHA,o=Oa.ALPHA,l=0;l<n;){var c=e[l],u="";switch(s){case Oa.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:s=Oa.LOWER;break;case t.ML:s=Oa.MIXED;break;case t.PS:o=s,s=Oa.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Oa.ALPHA;break}break;case Oa.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:o=s,s=Oa.ALPHA_SHIFT;break;case t.ML:s=Oa.MIXED;break;case t.PS:o=s,s=Oa.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Oa.ALPHA;break}break;case Oa.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:s=Oa.PUNCT;break;case 26:u=" ";break;case t.LL:s=Oa.LOWER;break;case t.AL:s=Oa.ALPHA;break;case t.PS:o=s,s=Oa.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Oa.ALPHA;break}break;case Oa.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=Oa.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Oa.ALPHA;break}break;case Oa.ALPHA_SHIFT:if(s=o,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=Oa.ALPHA;break}break;case Oa.PUNCT_SHIFT:if(s=o,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=Oa.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Oa.ALPHA;break}break}u!==""&&a.append(u),l++}},t.byteCompaction=function(e,r,n,a,s){var o=new dBe,l=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=r[a++];a<r[0]&&!u;)switch(d[l++]=f,c=900*c+f,f=r[a++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(l%5===0&&l>0){for(var A=0;A<6;++A)o.write(Number(u0(c)>>u0(8*(5-A))));c=0,l=0}break}a===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=f);for(var h=0;h<l;h++)o.write(d[h]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var m=r[a++];if(m<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(l%5===0&&l>0){for(var A=0;A<6;++A)o.write(Number(u0(c)>>u0(8*(5-A))));c=0,l=0}}break}return s.append(sd.decode(o.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,s=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var l=e[r++];if(r===e[0]&&(s=!0),l<t.TEXT_COMPACTION_MODE_LATCH)o[a]=l,a++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&a>0&&(n.append(t.decodeBase900toBase10(o,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=u0(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*u0(e[a]);var s=n.toString();if(s.charAt(0)!=="1")throw new Sr;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=Hre()?fBe():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),dy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ABe=function(){function t(){}return t.decode=function(e,r,n,a,s,o,l){for(var c=new Rk(e,r,n,a,s),u=null,d=null,f,A=!0;;A=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,o,l)),a!=null&&(d=t.getRowIndicatorColumn(e,c,a,!1,o,l)),f=t.merge(u,d),f==null)throw Yt.getNotFoundInstance();var h=f.getBoundingBox();if(A&&h!=null&&(h.getMinY()<c.getMinY()||h.getMaxY()>c.getMaxY()))c=h;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,d);for(var p=u!=null,g=1;g<=m;g++){var v=p?g:m-g;if(f.getDetectionResultColumn(v)===void 0){var y=void 0;v===0||v===m?y=new hH(c,v===0):y=new Vre(c),f.setDetectionResultColumn(v,y);for(var b=-1,w=b,j=c.getMinY();j<=c.getMaxY();j++){if(b=t.getStartColumn(f,v,j,p),b<0||b>c.getMaxX()){if(w===-1)continue;b=w}var I=t.detectCodeword(e,c.getMinX(),c.getMaxX(),p,b,j,o,l);I!=null&&(y.setCodeword(j,I),w=b,o=Math.min(o,I.getWidth()),l=Math.max(l,I.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=Rk.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new tBe(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var s=t.getMax(a),o=0;try{for(var l=dy(a),c=l.next();!c.done;c=l.next()){var u=c.value;if(o+=s-u,u>0)break}}catch(h){r={error:h}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),f=0;o>0&&d[f]==null;f++)o--;for(var A=0,f=a.length-1;f>=0&&(A+=s-a[f],!(a[f]>0));f--);for(var f=d.length-1;A>0&&d[f]==null;f--)A--;return e.getBoundingBox().addMissingRows(o,A,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var s=dy(e),o=s.next();!o.done;o=s.next()){var l=o.value;a=Math.max(a,l)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,s,o){for(var l=new hH(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var A=t.detectCodeword(e,0,e.getWidth(),a,d,f,s,o);A!=null&&(l.setCodeword(f,A),a?d=A.getStartX():d=A.getEndX())}return l},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(s<1||s>Zn.MAX_CODEWORDS_IN_BARCODE)throw Yt.getNotFoundInstance();n.setValue(s)}else a[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],o=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[l][c+1].getValue(),d=l*e.getBarcodeColumnCount()+c;u.length===0?n.push(d):u.length===1?a[d]=u[0]:(o.push(d),s.push(u))}for(var f=new Array(s.length),A=0;A<f.length;A++)f[A]=s[A];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,Zn.toIntArray(n),Zn.toIntArray(o),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,s){for(var o=new Int32Array(a.length),l=100;l-- >0;){for(var c=0;c<o.length;c++)r[a[c]]=s[c][o[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof Oi;if(!u)throw d}if(o.length===0)throw Oi.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<s[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw Oi.getChecksumInstance()}throw Oi.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,s,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<o.length;l++)for(var c=0;c<o[l].length;c++)o[l][c]=new Qy;var u=0;try{for(var d=dy(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var A=f.value;if(A!=null)try{for(var h=(a=void 0,dy(A.getCodewords())),m=h.next();!m.done;m=h.next()){var p=m.value;if(p!=null){var g=p.getRowNumber();if(g>=0){if(g>=o.length)continue;o[g][u].setValue(p.getValue())}}}}catch(v){a={error:v}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}u++}}catch(v){r={error:v}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var s,o,l=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-l);){r-=l;try{for(var d=(s=void 0,dy(e.getDetectionResultColumn(r).getCodewords())),f=d.next();!f.done;f=d.next()){var A=f.value;if(A!=null)return(a?A.getEndX():A.getStartX())+l*u*(A.getEndX()-A.getStartX())}}catch(h){s={error:h}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,s,o,l,c){s=t.adjustCodewordStartColumn(e,r,n,a,s,o);var u=t.getModuleBitCount(e,r,n,a,s,o);if(u==null)return null;var d,f=sa.sum(u);if(a)d=s+f;else{for(var A=0;A<u.length/2;A++){var h=u[A];u[A]=u[u.length-1-A],u[u.length-1-A]=h}d=s,s=d-f}if(!t.checkCodewordSkew(f,l,c))return null;var m=nBe.getDecodedValue(u),p=Zn.getCodeword(m);return p===-1?null:new rBe(s,d,t.getCodewordBucketNumber(m),p)},t.getModuleBitCount=function(e,r,n,a,s,o){for(var l=s,c=new Int32Array(8),u=0,d=a?1:-1,f=a;(a?l<n:l>=r)&&u<c.length;)e.get(l,o)===f?(c[u]++,l+=d):(u++,f=!f);return u===c.length||l===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,s,o){for(var l=s,c=a?-1:1,u=0;u<2;u++){for(;(a?l>=r:l<n)&&a===e.get(l,o);){if(Math.abs(s-l)>t.CODEWORD_SKEW_SIZE)return s;l+=c}c=-c,a=!a}return l},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw Sr.getFormatInstance();var a=1<<r+1,s=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var o=hBe.decode(e,""+r);return o.setErrorsCorrected(s),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw Oi.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw Sr.getFormatInstance();var n=e[0];if(n>e.length)throw Sr.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw Sr.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new B6,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var s=e[n][a];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new z5e,t}(),mBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw Yt.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof Sr||n instanceof Oi?Yt.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,s,o=new Array,l=V5e.detectMultiple(e,r,n);try{for(var c=mBe(l.getPoints()),u=c.next();!u.done;u=c.next()){var d=u.value,f=ABe.decode(l.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),A=new Dl(f.getText(),f.getRawBytes(),void 0,d,ln.PDF_417);A.putMetadata(al.ERROR_CORRECTION_LEVEL,f.getECLevel());var h=f.getOther();h!=null&&A.putMetadata(al.PDF417_EXTRA_METADATA,h),o.push(A)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return o.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?Rn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Zn.MODULES_IN_CODEWORD/Zn.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Zn.MODULES_IN_CODEWORD/Zn.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Zn.MODULES_IN_CODEWORD/Zn.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Zn.MODULES_IN_CODEWORD/Zn.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),pBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mH=function(t){pBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Fc),pH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$re=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(Za.TRY_HARDER)!==void 0,n=e==null?null:e.get(Za.POSSIBLE_FORMATS),a=new Array;if(n!=null){var s=n.some(function(o){return o===ln.UPC_A||o===ln.UPC_E||o===ln.EAN_13||o===ln.EAN_8||o===ln.CODABAR||o===ln.CODE_39||o===ln.CODE_93||o===ln.CODE_128||o===ln.ITF||o===ln.RSS_14||o===ln.RSS_EXPANDED});s&&!r&&a.push(new Qx(e)),n.includes(ln.QR_CODE)&&a.push(new PS),n.includes(ln.DATA_MATRIX)&&a.push(new jS),n.includes(ln.AZTEC)&&a.push(new SS),n.includes(ln.PDF_417)&&a.push(new BS),s&&r&&a.push(new Qx(e))}a.length===0&&(r||a.push(new Qx(e)),a.push(new PS),a.push(new jS),a.push(new SS),a.push(new BS),r&&a.push(new Qx(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=pH(this.readers),a=n.next();!a.done;a=n.next()){var s=a.value;s.reset()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new mH("No readers where selected, nothing can be read.");try{for(var a=pH(this.readers),s=a.next();!s.done;s=a.next()){var o=s.value;try{return o.decode(e,this.hints)}catch(l){if(l instanceof mH)continue}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new Yt("No MultiFormat Readers were able to detect the code.")},t}(),gBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){gBe(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,s=new $re;return s.setHints(r),a=t.call(this,s,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(o1);var xBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){xBe(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new BS,r)||this}return e})(o1);var vBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){vBe(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new PS,r)||this}return e})(o1);var Mk;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Mk||(Mk={}));const QC=Mk;var Gre=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new z0(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,s=r.length;s<=e;s++){var o=n.multiply(new z0(a,Int32Array.from([1,a.exp(s-1+a.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new cn("No error correction bytes");var n=e.length-r;if(n<=0)throw new cn("No data bytes provided");var a=this.buildGenerator(r),s=new Int32Array(n);Ja.arraycopy(e,0,s,0,n);var o=new z0(this.field,s);o=o.multiplyByMonomial(r,1);for(var l=o.divide(a)[1],c=l.getCoefficients(),u=r-c.length,d=0;d<u;d++)e[n+d]=0;Ja.arraycopy(c,0,e,n+u,c.length)},t}(),Vy=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s-1;o++)for(var l=n[o],c=0;c<a-1;c++){var u=l[c];u===l[c+1]&&u===n[o+1][c]&&u===n[o+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var l=0;l<a;l++){var c=n[o];l+6<a&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&r++,o+6<s&&n[o][l]===1&&n[o+1][l]===0&&n[o+2][l]===1&&n[o+3][l]===1&&n[o+4][l]===1&&n[o+5][l]===0&&n[o+6][l]===1&&(t.isWhiteVertical(n,l,o-4,o)||t.isWhiteVertical(n,l,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var s=n;s<a;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var l=n[o],c=0;c<a;c++)l[c]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var a,s;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,a=(s&1)+s%3;break;case 6:s=n*r,a=(s&1)+s%3&1;break;case 7:s=n*r,a=s%3+(n+r&1)&1;break;default:throw new cn("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),o=e.getArray(),l=0;l<a;l++){for(var c=0,u=-1,d=0;d<s;d++){var f=r?o[l][d]:o[d][l];f===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=f)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),yBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bBe=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=yBe(this.bytes),s=a.next();!s.done;s=a.next()){var o=s.value;ro.fill(o,e)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var s=this.bytes[n],o=r.bytes[n],l=0,c=this.width;l<c;++l)if(s[l]!==o[l])return!1;return!0},t.prototype.toString=function(){for(var e=new Tn,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],s=0,o=this.width;s<o;++s)switch(a[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Lk=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Tn;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),wBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ss=function(t){wBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Fc),gH=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,a,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,a,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new jo;t.makeTypeInfoBits(e,r,a);for(var s=0,o=a.getSize();s<o;++s){var l=a.get(a.getSize()-1-s),c=t.TYPE_INFO_COORDINATES[s],u=c[0],d=c[1];if(n.setBoolean(u,d,l),s<8){var f=n.getWidth()-s-1,A=8;n.setBoolean(f,A,l)}else{var f=8,A=n.getHeight()-7+(s-8);n.setBoolean(f,A,l)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new jo;t.makeVersionInfoBits(e,n);for(var a=6*3-1,s=0;s<6;++s)for(var o=0;o<3;++o){var l=n.get(a);a--,r.setBoolean(s,r.getHeight()-11+o,l),r.setBoolean(r.getHeight()-11+o,s,l)}}},t.embedDataBits=function(e,r,n){for(var a=0,s=-1,o=n.getWidth()-1,l=n.getHeight()-1;o>0;){for(o===6&&(o-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var u=o-c;if(t.isEmpty(n.get(u,l))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,r!==255&&Vy.getDataMaskBit(r,u,l)&&(d=!d),n.setBoolean(u,l,d)}}l+=s}s=-s,l+=s,o-=2}if(a!==e.getSize())throw new ss("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Rn.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new cn("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Lk.isValidMaskPattern(r))throw new ss("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var s=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(s,10);var o=new jo;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new ss("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new ss("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new ss;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new ss;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new ss;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var s=t.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(e+o,r+a,s[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var s=t.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(e+o,r+a,s[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,o=a.length;s!==o;s++){var l=a[s];if(l>=0)for(var c=0;c!==o;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,l))&&t.embedPositionAdjustmentPattern(u-2,l-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),NBe=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),xH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Vy.applyMaskPenaltyRule1(e)+Vy.applyMaskPenaltyRule2(e)+Vy.applyMaskPenaltyRule3(e)+Vy.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(QC.CHARACTER_SET)!==void 0;s&&(a=n.get(QC.CHARACTER_SET).toString());var o=this.chooseMode(e,a),l=new jo;if(o===is.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=to.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(o,l);var u=new jo;this.appendBytes(e,o,u,a);var d;if(n!==null&&n.get(QC.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(QC.QR_VERSION).toString(),10);d=Ep.getVersionForNumber(f);var A=this.calculateBitsNeeded(o,l,u,d);if(!this.willFit(A,d,r))throw new ss("Data too big for requested version")}else d=this.recommendVersion(r,o,l,u);var h=new jo;h.appendBitArray(l);var m=o===is.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,o,h),h.appendBitArray(u);var p=d.getECBlocksForLevel(r),g=d.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(g,h);var v=this.interleaveWithECBytes(h,d.getTotalCodewords(),g,p.getNumBlocks()),y=new Lk;y.setECLevel(r),y.setMode(o),y.setVersion(d);var b=d.getDimensionForVersion(),w=new bBe(b,b),j=this.chooseMaskPattern(v,r,d,w);return y.setMaskPattern(j),gH.buildMatrix(v,r,d,j,w),y.setMatrix(w),y},t.recommendVersion=function(e,r,n,a){var s=this.calculateBitsNeeded(r,n,a,Ep.getVersionForNumber(1)),o=this.chooseVersion(s,e),l=this.calculateBitsNeeded(r,n,a,o);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),to.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return is.KANJI;for(var n=!1,a=!1,s=0,o=e.length;s<o;++s){var l=e.charAt(s);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)a=!0;else return is.BYTE}return a?is.ALPHANUMERIC:n?is.NUMERIC:is.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=sd.encode(e,to.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var s=r[a]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var s=Number.MAX_SAFE_INTEGER,o=-1,l=0;l<Lk.NUM_MASK_PATTERNS;l++){gH.buildMatrix(e,r,n,l,a);var c=this.calculateMaskPenalty(a);c<s&&(s=c,o=l)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=Ep.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new ss("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),o=s.getTotalECCodewords(),l=a-o,c=(e+7)/8;return l>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new ss("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var a=s;a<8;a++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),a=0;a<o;++a)r.appendBits(a&1?17:236,8);if(r.getSize()!==n)throw new ss("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,s,o){if(a>=n)throw new ss("Block ID too large");var l=e%n,c=n-l,u=Math.floor(e/n),d=u+1,f=Math.floor(r/n),A=f+1,h=u-f,m=d-A;if(h!==m)throw new ss("EC bytes mismatch");if(n!==c+l)throw new ss("RS blocks mismatch");if(e!==(f+h)*c+(A+m)*l)throw new ss("Total bytes mismatch");a<c?(s[0]=f,o[0]=h):(s[0]=A,o[0]=m)},t.interleaveWithECBytes=function(e,r,n,a){var s,o,l,c;if(e.getSizeInBytes()!==n)throw new ss("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,A=new Array,h=0;h<a;++h){var m=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,h,m,p);var g=m[0],v=new Uint8Array(g);e.toBytes(8*u,v,0,g);var y=t.generateECBytes(v,p[0]);A.push(new NBe(v,y)),d=Math.max(d,g),f=Math.max(f,y.length),u+=m[0]}if(n!==u)throw new ss("Data bytes does not match offset");for(var b=new jo,h=0;h<d;++h)try{for(var w=(s=void 0,xH(A)),j=w.next();!j.done;j=w.next()){var I=j.value,v=I.getDataBytes();h<v.length&&b.appendBits(v[h],8)}}catch(F){s={error:F}}finally{try{j&&!j.done&&(o=w.return)&&o.call(w)}finally{if(s)throw s.error}}for(var h=0;h<f;++h)try{for(var _=(l=void 0,xH(A)),S=_.next();!S.done;S=_.next()){var I=S.value,y=I.getErrorCorrectionBytes();h<y.length&&b.appendBits(y[h],8)}}catch(F){l={error:F}}finally{try{S&&!S.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}if(r!==b.getSizeInBytes())throw new ss("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),s=0;s<n;s++)a[s]=e[s]&255;new Gre(wc.QR_CODE_FIELD_256).encode(a,r);for(var o=new Uint8Array(r),s=0;s<r;s++)o[s]=a[n+s];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new ss(e+" is bigger than "+((1<<s)-1));a.appendBits(e,s)},t.appendBytes=function(e,r,n,a){switch(r){case is.NUMERIC:t.appendNumericBytes(e,n);break;case is.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case is.BYTE:t.append8BitBytes(e,n,a);break;case is.KANJI:t.appendKanjiBytes(e,n);break;default:throw new ss("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getDigit(e.charAt(a));if(a+2<n){var o=t.getDigit(e.charAt(a+1)),l=t.getDigit(e.charAt(a+2));r.appendBits(s*100+o*10+l,10),a+=3}else if(a+1<n){var o=t.getDigit(e.charAt(a+1));r.appendBits(s*10+o,7),a+=2}else r.appendBits(s,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getAlphanumericCode(e.charCodeAt(a));if(s===-1)throw new ss;if(a+1<n){var o=t.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new ss;r.appendBits(s*45+o,11),a+=2}else r.appendBits(s,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=sd.encode(e,n)}catch(c){throw new ss(c)}for(var s=0,o=a.length;s!==o;s++){var l=a[s];r.appendBits(l,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=sd.encode(e,to.SJIS)}catch(f){throw new ss(f)}for(var a=n.length,s=0;s<a;s+=2){var o=n[s]&255,l=n[s+1]&255,c=o<<8&4294967295|l,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new ss("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(is.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=to.UTF8.getName(),t})();var CBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){CBe(e,t);function e(r,n,a,s,o,l,c,u){var d=t.call(this,l,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=a,d.left=s,d.top=o,s+l>n||o+c>a)throw new cn("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(l,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new cn("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Ja.arraycopy(this.yuvData,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,s=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Ja.arraycopy(this.yuvData,o,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;Ja.arraycopy(this.yuvData,o,s,c,r),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),s=this.yuvData,o=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*r,u=0;u<r;u++){var d=s[o+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,s=0,o=this.top*this.dataWidth+this.left;s<n;s++,o+=this.dataWidth)for(var l=o+r/2,c=o,u=o+r-1;c<l;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}},e.prototype.invert=function(){return new Kj(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Iw);var _Be=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){_Be(e,t);function e(r,n,a,s,o,l,c){var u=t.call(this,n,a)||this;if(u.dataWidth=s,u.dataHeight=o,u.left=l,u.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*a,f=new Uint8ClampedArray(d),A=0;A<d;A++){var h=r[A],m=h>>16&255,p=h>>7&510,g=h&255;f[A]=(m+p+g)/4&255}u.luminances=f}else u.luminances=r;if(s===void 0&&(u.dataWidth=n),o===void 0&&(u.dataHeight=a),l===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new cn("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new cn("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Ja.arraycopy(this.luminances,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,s=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Ja.arraycopy(this.luminances,o,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;Ja.arraycopy(this.luminances,o,s,c,r),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.luminances,a,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new Kj(this)},e})(Iw);var EBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SBe=function(t){EBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(to),IBe=function(){function t(){}return t.ISO_8859_1=to.ISO8859_1,t}(),Uk,jBe=301,PBe=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=jBe);return{LOG:t,ALOG:e}};Uk=PBe([],[]),Uk.LOG;Uk.ALOG;var vH;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(vH||(vH={}));var yH=129,Kre=230,BBe=231,TBe=235,kBe=236,FBe=237,OBe=238,DBe=239,RBe=240,p5=254,MBe=254,bH="[)>05",wH="[)>06",NH="",Ca=0,qo=1,zl=2,qi=3,wo=4,wl=5,LBe=function(){function t(){}return t.prototype.getEncodingMode=function(){return Ca},t.prototype.encode=function(e){var r=Rd.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=Rd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case wl:e.writeCodeword(BBe),e.signalEncoderChange(wl);return;case qo:e.writeCodeword(Kre),e.signalEncoderChange(qo);return;case qi:e.writeCodeword(OBe),e.signalEncoderChange(qi);break;case zl:e.writeCodeword(DBe),e.signalEncoderChange(zl);break;case wo:e.writeCodeword(RBe),e.signalEncoderChange(wo);break;default:throw new Error("Illegal mode: "+a)}else Rd.isExtendedASCII(n)?(e.writeCodeword(TBe),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Rd.isDigit(e)&&Rd.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),UBe=function(){function t(){}return t.prototype.getEncodingMode=function(){return wl},t.prototype.encode=function(e){var r=new Tn;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=Rd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Ca);break}}var s=r.length()-1,o=1,l=e.getCodewordCount()+s+o;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(s<=249)r.setCharAt(0,Yn.getCharAt(s));else if(s<=1555)r.setCharAt(0,Yn.getCharAt(Math.floor(s/250)+249)),r.insert(1,Yn.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),T6=function(){function t(){}return t.prototype.getEncodingMode=function(){return qo},t.prototype.encodeMaximal=function(e){for(var r=new Tn,n=0,a=e.pos,s=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(a=e.pos,s=r.length())}if(s!==r.length()){var l=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(Kre),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new Tn;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),s=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+s;e.updateSymbolInfo(o);var l=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new Tn;for(r.length()%3===2&&l!==2&&(a=this.backtrackOneCharacter(e,r,c,a));r.length()%3===1&&(a>3||l!==1);)a=this.backtrackOneCharacter(e,r,c,a);break}var u=r.length();if(u%3===0){var d=Rd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Ca);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var s=r.length(),o=r.toString().substring(0,s-a);r.setLengthToZero(),r.append(o),e.pos--;var l=e.getCurrentChar();return a=this.encodeChar(l,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,s=e.getCodewordCount()+n;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(p5)}else if(o===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(p5),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(p5)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Ca)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,s=new Tn;return s.append(n),s.append(a),s.toString()},t}(),QBe=function(){function t(){}return t.prototype.getEncodingMode=function(){return wo},t.prototype.encode=function(e){for(var r=new Tn;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var s=r.toString().substring(4);r.setLengthToZero(),r.append(s);var o=Rd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Ca);break}}}r.append(Yn.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,l=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),u=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}u?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(l)}finally{e.signalEncoderChange(Ca)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(Yn.getCharAt(e-64)):Rd.illegalCharacter(Yn.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,s=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(a<<12)+(s<<6)+o,c=l>>16&255,u=l>>8&255,d=l&255,f=new Tn;return f.append(c),r>=2&&f.append(u),r>=3&&f.append(d),f.toString()},t}(),VBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fa=function(){function t(e,r,n,a,s,o,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=s,this.dataRegions=o,this.rsBlockData=l,this.rsBlockError=c}return t.lookup=function(e,r,n,a,s){var o,l;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!0);try{for(var c=HBe(GBe),u=c.next();!u.done;u=c.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){o={error:f}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(o)throw o.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),$Be=function(t){VBe(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(fa),GBe=[new fa(!1,3,5,8,8,1),new fa(!1,5,7,10,10,1),new fa(!0,5,7,16,6,1),new fa(!1,8,10,12,12,1),new fa(!0,10,11,14,6,2),new fa(!1,12,12,14,14,1),new fa(!0,16,14,24,10,1),new fa(!1,18,14,16,16,1),new fa(!1,22,18,18,18,1),new fa(!0,22,18,16,10,2),new fa(!1,30,20,20,20,1),new fa(!0,32,24,16,14,2),new fa(!1,36,24,22,22,1),new fa(!1,44,28,24,24,1),new fa(!0,49,28,22,14,2),new fa(!1,62,36,14,14,4),new fa(!1,86,42,16,16,4),new fa(!1,114,48,18,18,4),new fa(!1,144,56,20,20,4),new fa(!1,174,68,22,22,4),new fa(!1,204,84,24,24,4,102,42),new fa(!1,280,112,14,14,16,140,56),new fa(!1,368,144,16,16,16,92,36),new fa(!1,456,192,18,18,16,114,48),new fa(!1,576,224,20,20,16,144,56),new fa(!1,696,272,22,22,16,174,68),new fa(!1,816,336,24,24,16,136,56),new fa(!1,1050,408,18,18,36,175,68),new fa(!1,1304,496,20,20,36,163,62),new $Be],KBe=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(l){return l.charCodeAt(0)}),n=new Tn,a=0,s=r.length;a<s;a++){var o=String.fromCharCode(r[a]&255);if(o==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new Tn,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=fa.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),qBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zBe=function(t){qBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return qi},e.prototype.encode=function(r){for(var n=new Tn;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var s=n.length();if(s%3===0){this.writeNextTriplet(r,n);var o=Rd.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(Ca);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):Rd.illegalCharacter(Yn.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),s=n.length();r.pos-=s,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(MBe),r.getNewEncoding()<0&&r.signalEncoderChange(Ca)},e}(T6),WBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XBe=function(t){WBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return zl},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}(T6),Rd=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=yH+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,s){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!1);var o=new T6,l=[new LBe,o,new XBe,new zBe,new QBe,new UBe],c=new KBe(e);c.setSymbolShape(r),c.setSizeConstraints(n,a),e.startsWith(bH)&&e.endsWith(NH)?(c.writeCodeword(kBe),c.setSkipAtEnd(2),c.pos+=bH.length):e.startsWith(wH)&&e.endsWith(NH)&&(c.writeCodeword(FBe),c.setSkipAtEnd(2),c.pos+=wH.length);var u=Ca;for(s&&(o.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();d<f&&u!==Ca&&u!==wl&&u!==wo&&c.writeCodeword("");var A=c.getCodewords();for(A.length()<f&&A.append(yH);A.length()<f;)A.append(this.randomize253State(A.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===qi&&a===qi){for(var s=Math.min(r+3,e.length),o=r;o<s;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Ca}else if(n===wo&&a===wo){for(var s=Math.min(r+4,e.length),o=r;o<s;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Ca}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===Ca?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var s=0,o=new Uint8Array(6),l=[];;){if(r+s===e.length){ro.fill(o,0),ro.fill(l,0);var c=this.findMinimums(a,l,Rn.MAX_VALUE,o),u=this.getMinimumCount(o);if(l[Ca]===c)return Ca;if(u===1){if(o[wl]>0)return wl;if(o[wo]>0)return wo;if(o[zl]>0)return zl;if(o[qi]>0)return qi}return qo}var d=e.charCodeAt(r+s);if(s++,this.isDigit(d)?a[Ca]+=.5:this.isExtendedASCII(d)?(a[Ca]=Math.ceil(a[Ca]),a[Ca]+=2):(a[Ca]=Math.ceil(a[Ca]),a[Ca]++),this.isNativeC40(d)?a[qo]+=2/3:this.isExtendedASCII(d)?a[qo]+=8/3:a[qo]+=4/3,this.isNativeText(d)?a[zl]+=2/3:this.isExtendedASCII(d)?a[zl]+=8/3:a[zl]+=4/3,this.isNativeX12(d)?a[qi]+=2/3:this.isExtendedASCII(d)?a[qi]+=13/3:a[qi]+=10/3,this.isNativeEDIFACT(d)?a[wo]+=3/4:this.isExtendedASCII(d)?a[wo]+=17/4:a[wo]+=13/4,this.isSpecialB256(d)?a[wl]+=4:a[wl]++,s>=4){if(ro.fill(o,0),ro.fill(l,0),this.findMinimums(a,l,Rn.MAX_VALUE,o),l[Ca]<this.min(l[wl],l[qo],l[zl],l[qi],l[wo]))return Ca;if(l[wl]<l[Ca]||l[wl]+1<this.min(l[qo],l[zl],l[qi],l[wo]))return wl;if(l[wo]+1<this.min(l[wl],l[qo],l[zl],l[qi],l[Ca]))return wo;if(l[zl]+1<this.min(l[wl],l[qo],l[wo],l[qi],l[Ca]))return zl;if(l[qi]+1<this.min(l[wl],l[qo],l[wo],l[zl],l[Ca]))return qi;if(l[qo]+1<this.min(l[Ca],l[wl],l[wo],l[zl])){if(l[qo]<l[qi])return qo;if(l[qo]===l[qi]){for(var f=r+s+1;f<e.length;){var A=e.charCodeAt(f);if(this.isX12TermSep(A))return qi;if(!this.isNativeX12(A))break;f++}return qo}}}}},t.min=function(e,r,n,a,s){var o=Math.min(e,Math.min(r,Math.min(n,a)));return s===void 0?o:Math.min(o,s)},t.findMinimums=function(e,r,n,a){for(var s=0;s<6;s++){var o=r[s]=Math.ceil(e[s]);n>o&&(n=o,ro.fill(a,0)),n===o&&(a[s]=a[s]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=Rn.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),g5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CH=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return sd.encode(e,this.charset)!=null}catch{return!1}},t}(),YBe=function(){function t(e,r,n){var a,s,o,l,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(E){return new CH(SBe.forName(E))}),this.encoders=[];var d=[];d.push(new CH(IBe.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),A=0;A<e.length;A++){var h=!1;try{for(var m=(a=void 0,g5(d)),p=m.next();!p.done;p=m.next()){var g=p.value,v=e.charAt(A),y=v.charCodeAt(0);if(y===n||g.canEncode(v)){h=!0;break}}}catch(E){a={error:E}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!h)try{for(var b=(o=void 0,g5(this.ENCODERS)),w=b.next();!w.done;w=b.next()){var g=w.value;if(g.canEncode(e.charAt(A))){d.push(g),h=!0;break}}}catch(E){o={error:E}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(o)throw o.error}}h||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var j=0;try{for(var I=g5(d),_=I.next();!_.done;_=I.next()){var g=_.value;this.encoders[j++]=g}}catch(E){c={error:E}}finally{try{_&&!_.done&&(u=I.return)&&u.call(I)}finally{if(c)throw c.error}}}var S=-1;if(r!=null){for(var A=0;A<this.encoders.length;A++)if(this.encoders[A]!=null&&r.name===this.encoders[A].name){S=A;break}}this.priorityEncoderIndex=S}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return sd.encode(Yn.getCharAt(e),this.encoders[r].name)},t}(),JBe=3,ZBe=function(){function t(e,r,n){this.fnc1=n;var a=new YBe(e,r,n);if(a.length()===1)for(var s=0;s<this.bytes.length;s++){var o=e.charAt(s).charCodeAt(0);this.bytes[s]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new Tn,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,s,o){var l=e.charAt(a).charCodeAt(0),c=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(l===o||r.canEncode(l,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),u=c+1);for(var d=c;d<u;d++)(l===o||r.canEncode(l,d))&&this.addEdge(n,a+1,new _H(l,r,d,s,o))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,s=new _H[a+1][r.length()];this.addEdges(e,r,s,0,null,n);for(var o=1;o<=a;o++){for(var l=0;l<r.length();l++)s[o][l]!=null&&o<a&&this.addEdges(e,r,s,o,s[o][l],n);for(var l=0;l<r.length();l++)s[o-1][l]=null}for(var c=-1,u=Rn.MAX_VALUE,l=0;l<r.length();l++)if(s[a][l]!=null){var d=s[a][l];d.cachedTotalSize<u&&(u=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],A=s[a][c];A!=null;){if(A.isFNC1())f.unshift(1e3);else for(var h=r.encode(A.c,A.encoderIndex),o=h.length-1;o>=0;o--)f.unshift(h[o]&255);var m=A.previous===null?0:A.previous.encoderIndex;m!==A.encoderIndex&&f.unshift(256+r.getECIValue(A.encoderIndex)),A=A.previous}for(var p=[],o=0;o<p.length;o++)p[o]=f[o];return p},t}(),_H=function(){function t(e,r,n,a,s){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=s,this.c=e===s?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,l=a===null?0:a.encoderIndex;l!==n&&(o+=JBe),a!=null&&(o+=a.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),eTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var EH;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(EH||(EH={}));(function(t){eTe(e,t);function e(r,n,a,s,o){var l=t.call(this,r,n,a)||this;return l.shape=s,l.macroId=o,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(ZBe);var tTe=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),SH=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),rTe=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),nTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k6=function(t){nTe(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.value=n,s.bitCount=a,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+Rn.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(rTe),aTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sTe=function(t){aTe(e,t);function e(r,n,a){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=a,s}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(k6);function iTe(t,e,r){return new sTe(t,e,r)}function fy(t,e,r){return new k6(t,e,r)}var oTe=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],W0=0,TS=1,ed=2,qre=3,Tf=4,lTe=new k6(null,0,0),x5=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],cTe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function uTe(t){var e,r;try{for(var n=cTe(t),a=n.next();!a.done;a=n.next()){var s=a.value;ro.fill(s,-1)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[W0][Tf]=0,t[TS][Tf]=0,t[TS][W0]=28,t[qre][Tf]=0,t[ed][Tf]=0,t[ed][W0]=15,t}var zre=uTe(ro.createInt32Array(6,6)),dTe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fTe=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var s=x5[this.mode][e];a=fy(a,s&65535,s>>16),n+=s>>16}var o=e===ed?4:5;return a=fy(a,r,o),new t(a,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===ed?4:5;return n=fy(n,zre[this.mode][e],a),n=fy(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===Tf||this.mode===ed){var s=x5[n][W0];r=fy(r,s&65535,s>>16),a+=s>>16,n=W0}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(r,n,this.binaryShiftByteCount+1,a+o);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=iTe(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(x5[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())a.unshift(s);var o=new jo;try{for(var l=dTe(a),c=l.next();!c.done;c=l.next()){var u=c.value;u.appendTo(o,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return Yn.format("%s bits=%d bytes=%d",oTe[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(lTe,W0,0,0),t}();function hTe(t){var e=Yn.getCharCode(" "),r=Yn.getCharCode("."),n=Yn.getCharCode(",");t[W0][e]=1;for(var a=Yn.getCharCode("Z"),s=Yn.getCharCode("A"),o=s;o<=a;o++)t[W0][o]=o-s+2;t[TS][e]=1;for(var l=Yn.getCharCode("z"),c=Yn.getCharCode("a"),o=c;o<=l;o++)t[TS][o]=o-c+2;t[ed][e]=1;for(var u=Yn.getCharCode("9"),d=Yn.getCharCode("0"),o=d;o<=u;o++)t[ed][o]=o-d+2;t[ed][n]=12,t[ed][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],A=0;A<f.length;A++)t[qre][Yn.getCharCode(f[A])]=A;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],A=0;A<h.length;A++)Yn.getCharCode(h[A])>0&&(t[Tf][Yn.getCharCode(h[A])]=A);return t}var v5=hTe(ro.createInt32Array(5,256)),VC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ATe=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Yn.getCharCode(" "),r=Yn.getCharCode(`
`),n=SH.singletonList(fTe.INITIAL_STATE),a=0;a<this.text.length;a++){var s=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case Yn.getCharCode("\r"):s=o===r?2:0;break;case Yn.getCharCode("."):s=o===e?3:0;break;case Yn.getCharCode(","):s=o===e?4:0;break;case Yn.getCharCode(":"):s=o===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,a,s),a++):n=this.updateStateListForChar(n,a)}var l=SH.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,s=[];try{for(var o=VC(e),l=o.next();!l.done;l=o.next()){var c=l.value;this.updateStateForChar(c,r,s)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,s=v5[e.getMode()][a]>0,o=null,l=0;l<=Tf;l++){var c=v5[l][a];if(c>0){if(o==null&&(o=e.endBinaryShift(r)),!s||l===e.getMode()||l===ed){var u=o.latchAndAppend(l,c);n.push(u)}if(!s&&zre[e.getMode()][l]>=0){var d=o.shiftAndAppend(l,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||v5[e.getMode()][a]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var a,s,o=[];try{for(var l=VC(e),c=l.next();!c.done;c=l.next()){var u=c.value;this.updateStateForPair(u,r,n,o)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,a){var s=e.endBinaryShift(r);if(a.push(s.latchAndAppend(Tf,n)),e.getMode()!==Tf&&a.push(s.shiftAndAppend(Tf,n)),n===3||n===4){var o=s.latchAndAppend(ed,16-n).latchAndAppend(ed,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(l)}},t.simplifyStates=function(e){var r,n,a,s,o=[];try{for(var l=VC(e),c=l.next();!c.done;c=l.next()){var u=c.value,d=!0,f=function(g){if(g.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(g)&&(o=o.filter(function(v){return v!==g}))};try{for(var A=(a=void 0,VC(o)),h=A.next();!h.done;h=A.next()){var m=h.value,p=f(m);if(p==="break")break}}catch(g){a={error:g}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}d&&o.push(u)}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t}(),mTe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new ATe(e).encode(),s=Rn.truncDivision(a.getSize()*r,100)+11,o=a.getSize()+s,l,c,u,d,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new cn(Yn.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,l),d=t.WORD_SIZE[c];var A=u-u%d;if(f=t.stuffBits(a,d),f.getSize()+s>A)throw new cn("Data to large for user specified layer");if(l&&f.getSize()>d*64)throw new cn("Data to large for user specified layer")}else{d=0,f=null;for(var h=0;;h++){if(h>t.MAX_NB_BITS)throw new cn("Data too large for an Aztec code");if(l=h<=3,c=l?h+1:h,u=t.totalBitsInLayer(c,l),!(o>u)){(f==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],f=t.stuffBits(a,d));var A=u-u%d;if(!(l&&f.getSize()>d*64)&&f.getSize()+s<=A)break}}}var m=t.generateCheckWords(f,u,d),p=f.getSize()/d,g=t.generateModeMessage(l,c,p),v=(l?11:14)+c*4,y=new Int32Array(v),b;if(l){b=v;for(var h=0;h<y.length;h++)y[h]=h}else{b=v+1+2*Rn.truncDivision(Rn.truncDivision(v,2)-1,15);for(var w=Rn.truncDivision(v,2),j=Rn.truncDivision(b,2),h=0;h<w;h++){var I=h+Rn.truncDivision(h,15);y[w-h-1]=j-I-1,y[w+h]=j+I+1}}for(var _=new Vf(b),h=0,S=0;h<c;h++){for(var E=(c-h)*4+(l?9:12),F=0;F<E;F++)for(var P=F*2,k=0;k<2;k++)m.get(S+P+k)&&_.set(y[h*2+k],y[h*2+F]),m.get(S+E*2+P+k)&&_.set(y[h*2+F],y[v-1-h*2-k]),m.get(S+E*4+P+k)&&_.set(y[v-1-h*2-k],y[v-1-h*2-F]),m.get(S+E*6+P+k)&&_.set(y[v-1-h*2-F],y[h*2+k]);S+=E*8}if(t.drawModeMessage(_,l,b,g),l)t.drawBullsEye(_,Rn.truncDivision(b,2),5);else{t.drawBullsEye(_,Rn.truncDivision(b,2),7);for(var h=0,F=0;h<Rn.truncDivision(v,2)-1;h+=15,F+=16)for(var k=Rn.truncDivision(b,2)&1;k<b;k+=2)_.set(Rn.truncDivision(b,2)-F,k),_.set(Rn.truncDivision(b,2)+F,k),_.set(k,Rn.truncDivision(b,2)-F),_.set(k,Rn.truncDivision(b,2)+F)}var D=new tTe;return D.setCompact(l),D.setSize(b),D.setLayers(c),D.setCodeWords(p),D.setMatrix(_),D},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var s=r-a;s<=r+a;s++)e.set(s,r-a),e.set(s,r+a),e.set(r-a,s),e.set(r+a,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new jo;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var s=Rn.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var l=s-3+o;a.get(o)&&e.set(l,s-5),a.get(o+7)&&e.set(s+5,l),a.get(20-o)&&e.set(l,s+5),a.get(27-o)&&e.set(s-5,l)}else for(var o=0;o<10;o++){var l=s-5+o+Rn.truncDivision(o,5);a.get(o)&&e.set(l,s-7),a.get(o+10)&&e.set(s+7,l),a.get(29-o)&&e.set(l,s+7),a.get(39-o)&&e.set(s-7,l)}},t.generateCheckWords=function(e,r,n){var a,s,o=e.getSize()/n,l=new Gre(t.getGF(n)),c=Rn.truncDivision(r,n),u=t.bitsToWords(e,n,c);l.encode(u,c-o);var d=r%n,f=new jo;f.appendBits(0,d);try{for(var A=mTe(Array.from(u)),h=A.next();!h.done;h=A.next()){var m=h.value;f.appendBits(m,n)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}return f},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),s,o;for(s=0,o=e.getSize()/r;s<o;s++){for(var l=0,c=0;c<r;c++)l|=e.get(s*r+c)?1<<r-c-1:0;a[s]=l}return a},t.getGF=function(e){switch(e){case 4:return wc.AZTEC_PARAM;case 6:return wc.AZTEC_DATA_6;case 8:return wc.AZTEC_DATA_8;case 10:return wc.AZTEC_DATA_10;case 12:return wc.AZTEC_DATA_12;default:throw new cn("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new jo,a=e.getSize(),s=(1<<r)-2,o=0;o<a;o+=r){for(var l=0,c=0;c<r;c++)(o+c>=a||e.get(o+c))&&(l|=1<<r-1-c);(l&s)===s?(n.appendBits(l&s,r),o--):l&s?n.appendBits(l,r):(n.appendBits(l|1,r),o--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var pTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gTe=function(t){pTe(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var s=new Uint8ClampedArray(n*a),o=0,l=0,c=r.length;o<c;o+=4,l++){var u=void 0,d=r[o+3];if(d===0)u=255;else{var f=r[o],A=r[o+1],h=r[o+2];u=306*f+601*A+117*h+512>>10}s[l]=u}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new cn("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Kj(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);n.width=l,n.height=c;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(l/2,c/2),u.rotate(a),u.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Iw);function Wre(){return typeof navigator<"u"}function xTe(){return Wre()&&!!navigator.mediaDevices}function vTe(){return!!(xTe()&&navigator.mediaDevices.enumerateDevices)}var Hx=function(){return Hx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Hx.apply(this,arguments)},Ts=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},ks=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},y5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yTe={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},l1=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=Hx(Hx({},yTe),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Za.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return Ts(this,void 0,void 0,function(){return ks(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,a=e.getVideoTracks();try{for(var s=y5(a),o=s.next();!o.done;o=s.next()){var l=o.value;if(t.mediaStreamIsTorchCompatibleTrack(l))return!0}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new gi("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new gi("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new gTe(e),n=new kre(r);return new Tre(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new gi("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,s=n.height;return r.style.width=a+"px",r.style.height=s+"px",r.width=a,r.height=s,r},t.tryPlayVideo=function(e){return Ts(this,void 0,void 0,function(){var r;return ks(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return Ts(this,void 0,void 0,function(){var e,r,n,a,s,o,l,c,u,d,f,A;return ks(this,function(h){switch(h.label){case 0:if(!Wre())throw new Error("Can't enumerate devices, navigator is not present.");if(!vTe())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=y5(e),a=n.next();!a.done;a=n.next())s=a.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device ".concat(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:o,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(A=n.return)&&A.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.findDeviceById=function(e){return Ts(this,void 0,void 0,function(){var r;return ks(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return Ts(this,void 0,void 0,function(){var n;return ks(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(s,o){var l=setTimeout(function(){t.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",c))},r),c=function(){t.tryPlayVideo(e).then(function(u){clearTimeout(l),e.removeEventListener("canplay",c),s(u)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),Ts(this,void 0,void 0,function(){var a;return ks(this,function(s){switch(s.label){case 0:return a=t.prepareVideoElement(r),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return s.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var a=1e4,s=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",o),n())},a),o=function(){clearTimeout(s),e.removeEventListener("load",o),r()};e.addEventListener("load",o)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new gi("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return Ts(this,void 0,void 0,function(){var r;return ks(this,function(n){switch(n.label){case 0:if(!e)throw new gi("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return Ts(this,void 0,void 0,function(){var r;return ks(this,function(n){switch(n.label){case 0:if(!e)throw new gi("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Ts(this,void 0,void 0,function(){var a,s;return ks(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,o.sent()];case 4:throw s=o.sent(),t.disposeMediaStream(a),s;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return Ts(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,A,h=this;return ks(this,function(m){switch(m.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,a)];case 1:return s=m.sent(),o=function(){t.disposeMediaStream(e),t.cleanVideoSource(s)},l=this.scan(s,n,o),c=e.getVideoTracks(),u=Hx(Hx({},l),{stop:function(){l.stop()},streamVideoConstraintsApply:function(p,g){return Ts(this,void 0,void 0,function(){var v,y,b,w,j,I,_;return ks(this,function(S){switch(S.label){case 0:v=g?c.filter(g):c,S.label=1;case 1:S.trys.push([1,6,7,8]),y=y5(v),b=y.next(),S.label=2;case 2:return b.done?[3,5]:(w=b.value,[4,w.applyConstraints(p)]);case 3:S.sent(),S.label=4;case 4:return b=y.next(),[3,2];case 5:return[3,8];case 6:return j=S.sent(),I={error:j},[3,8];case 7:try{b&&!b.done&&(_=y.return)&&_.call(y)}finally{if(I)throw I.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(p){return c.find(p).getConstraints()},streamVideoSettingsGet:function(p){return c.find(p).getSettings()},streamVideoCapabilitiesGet:function(p){return c.find(p).getCapabilities()}}),d=t.mediaStreamIsTorchCompatible(e),d&&(f=c==null?void 0:c.find(function(p){return t.mediaStreamIsTorchCompatibleTrack(p)}),A=function(p){return Ts(h,void 0,void 0,function(){return ks(this,function(g){switch(g.label){case 0:return[4,t.mediaStreamSetTorch(f,p)];case 1:return g.sent(),[2]}})})},u.switchTorch=A,u.stop=function(){return Ts(h,void 0,void 0,function(){return ks(this,function(p){switch(p.label){case 0:return l.stop(),[4,A(!1)];case 1:return p.sent(),[2]}})})}),[2,u]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Ts(this,void 0,void 0,function(){var a,s;return ks(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return Ts(this,void 0,void 0,function(){var n,a;return ks(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new gi("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return Ts(this,void 0,void 0,function(){var n,a,s,o;return ks(this,function(l){switch(l.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new gi("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},s=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,s)];case 1:return l.sent(),o=this.scan(n,r,a),[2,o]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Ts(this,void 0,void 0,function(){var n;return ks(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Ts(this,void 0,void 0,function(){var n,a,s;return ks(this,function(o){switch(o.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return s=o.sent(),[2,s];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Ts(this,void 0,void 0,function(){var n,a;return ks(this,function(s){switch(s.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return Ts(this,void 0,void 0,function(){var r,n;return ks(this,function(a){switch(a.label){case 0:if(!e)throw new gi("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return Ts(this,void 0,void 0,function(){var r,n;return ks(this,function(a){switch(a.label){case 0:if(!e)throw new gi("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,a){var s=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(o,l){s.scan(e,function(c,u,d){if(c){o(c),d.stop();return}if(u){if(u instanceof Yt&&r||u instanceof Oi&&n||u instanceof Sr&&a)return;d.stop(),l(u)}})})},t.prototype.scan=function(e,r,n){var a=this;t.checkCallbackFnOrThrow(r);var s=t.createCaptureCanvas(e),o;try{o=s.getContext("2d",{willReadFrequently:!0})}catch{o=s.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var l=function(){o=void 0,s=void 0},c=!1,u,d=function(){c=!0,clearTimeout(u),l(),n&&n()},f={stop:d},A=function(){if(!c)try{t.drawImageOnCanvas(o,e);var h=a.decodeFromCanvas(s);r(h,void 0,f),u=setTimeout(A,a.options.delayBetweenScanSuccess)}catch(v){r(void 0,v,f);var m=v instanceof Oi,p=v instanceof Sr,g=v instanceof Yt;if(m||p||g){u=setTimeout(A,a.options.delayBetweenScanAttempts);return}l(),n&&n(v)}};return A(),f},t.prototype._decodeOnLoadImage=function(e){return Ts(this,void 0,void 0,function(){var r;return ks(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return Ts(this,void 0,void 0,function(){var r;return ks(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),bTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){bTe(e,t);function e(r,n){return t.call(this,new SS,r,n)||this}return e})(l1);var wTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){wTe(e,t);function e(r,n){return t.call(this,new Qx(r),r,n)||this}return e})(l1);var NTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){NTe(e,t);function e(r,n){return t.call(this,new jS,r,n)||this}return e})(l1);var CTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),b2=function(t){CTe(e,t);function e(r,n){var a=this,s=new $re;return s.setHints(r),a=t.call(this,s,r,n)||this,a.reader=s,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(Za.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(l1),_Te=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){_Te(e,t);function e(r,n){return t.call(this,new BS,r,n)||this}return e})(l1);var ETe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){ETe(e,t);function e(r,n){return t.call(this,new PS,r,n)||this}return e})(l1);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var kS={};kS.version="0.18.5";var Xre=1252,STe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],F6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},O6=function(t){STe.indexOf(t)!=-1&&(Xre=F6[0]=t)};function ITe(){O6(1252)}var Qd=function(t){O6(t)};function D6(){Qd(1200),ITe()}function IH(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function jTe(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function Yre(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Hy=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?jTe(t.slice(2)):e==254&&r==255?Yre(t.slice(2)):e==65279?t.slice(1):t},HC=function(e){return String.fromCharCode(e)},jH=function(e){return String.fromCharCode(e)},w2,P0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function N2(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),o=(r&3)<<4|n>>4,a=t.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),e+=P0.charAt(s)+P0.charAt(o)+P0.charAt(l)+P0.charAt(c);return e}function mu(t){var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=P0.indexOf(t.charAt(u++)),o=P0.indexOf(t.charAt(u++)),r=s<<2|o>>4,e+=String.fromCharCode(r),l=P0.indexOf(t.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=P0.indexOf(t.charAt(u++)),a=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var kn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),xA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function lm(t){return kn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function PH(t){return kn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var ru=function(e){return kn?xA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Wj(t){if(typeof ArrayBuffer>"u")return ru(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function bm(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function PTe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function R6(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return R6(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Io=kn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:xA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function BTe(t){for(var e=[],r=0,n=t.length+250,a=lm(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=t.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(e.push(a.slice(0,r)),r=0,a=lm(65535),n=65530)}return e.push(a.slice(0,r)),Io(e)}var sc=/\u0000/g,$y=/[\u0001-\u0006]/g;function sv(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Vd(t,e){var r=""+t;return r.length>=e?r:ni("0",e-r.length)+r}function M6(t,e){var r=""+t;return r.length>=e?r:ni(" ",e-r.length)+r}function FS(t,e){var r=""+t;return r.length>=e?r:r+ni(" ",e-r.length)}function TTe(t,e){var r=""+Math.round(t);return r.length>=e?r:ni("0",e-r.length)+r}function kTe(t,e){var r=""+t;return r.length>=e?r:ni("0",e-r.length)+r}var BH=Math.pow(2,32);function ix(t,e){if(t>BH||t<-BH)return TTe(t,e);var r=Math.round(t);return kTe(r,e)}function OS(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var TH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],b5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function FTe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var fn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},kH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},OTe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function DS(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<e&&(f=Math.floor(a),l=f*o+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=o,o=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var A=Math.floor(n*l/d);return[A,n*l-A*d,d]}function fp(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,o=[],l={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=QTe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var Jre=new Date(1899,11,31,0,0,0),DTe=Jre.getTime(),RTe=new Date(1900,2,1,0,0,0);function Zre(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=RTe&&(r+=24*60*60*1e3),(r-(DTe+(t.getTimezoneOffset()-Jre.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function L6(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function MTe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function LTe(t){var e=t<0?12:11,r=L6(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function UTe(t){var e=L6(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function C2(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=LTe(t):e===10?r=t.toFixed(10).substr(0,12):r=UTe(t),L6(MTe(r.toUpperCase()))}function Jp(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):C2(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return ud(14,Zre(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function QTe(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function VTe(t,e,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return b5[r.m-1][1];case 5:return b5[r.m-1][0];default:return b5[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return TH[r.q][0];default:return TH[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Vd(r.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(a=Vd(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Vd(c,u):"";return d}function B0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var ene=/%/g;function HTe(t,e,r){var n=e.replace(ene,""),a=e.length-n.length;return Hh(t,n,r*Math.pow(10,2*a))+ni("%",a)}function $Te(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Hh(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function tne(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+tne(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var rne=/# (\?+)( ?)\/( ?)(\d+)/;function GTe(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?ni(" ",t[1].length+1+t[4].length):M6(o,t[1].length)+t[2]+"/"+t[3]+Vd(l,t[4].length))}function KTe(t,e,r){return r+(e===0?"":""+e)+ni(" ",t[1].length+2+t[4].length)}var nne=/^#*0*\.([0#]+)/,ane=/\).*[0#]/,sne=/\(###\) ###\\?-####/;function Jl(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function FH(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function OH(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function qTe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function zTe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Mu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(ane)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Mu("n",n,r):"("+Mu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return $Te(t,e,r);if(e.indexOf("%")!==-1)return HTe(t,e,r);if(e.indexOf("E")!==-1)return tne(e,r);if(e.charCodeAt(0)===36)return"$"+Mu(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+ix(c,e.length);if(e.match(/^[#?]+$/))return a=ix(r,0),a==="0"&&(a=""),a.length>e.length?a:Jl(e.substr(0,e.length-a.length))+a;if(s=e.match(rne))return GTe(s,c,u);if(e.match(/^#+0+$/))return u+ix(c,e.length-e.indexOf("0"));if(s=e.match(nne))return a=FH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Jl(s[1])).replace(/\.$/,"."+Jl(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+ni("0",Jl(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+FH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+B0(ix(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Mu(t,e,-r):B0(""+(Math.floor(r)+qTe(r,s[1].length)))+"."+Vd(OH(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Mu(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=sv(Mu(t,e.replace(/[\\-]/g,""),r)),o=0,sv(sv(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<a.length?a.charAt(o++):m==="0"?"0":""}));if(e.match(sne))return a=Mu(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=DS(c,Math.pow(10,o)-1,!1),a=""+u,d=Hh("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=FS(l[2],o),d.length<s[4].length&&(d=Jl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=DS(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?M6(l[1],o)+s[2]+"/"+s[3]+FS(l[2],o):ni(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=ix(r,0),e.length<=a.length?a:Jl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=e.indexOf(".")-o,A=e.length-a.length-f;return Jl(e.substr(0,f)+a+e.substr(e.length-A))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=OH(r,s[1].length),r<0?"-"+Mu(t,e,-r):B0(zTe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Vd(0,3-m.length):"")+m})+"."+Vd(o,s[1].length);switch(e){case"###,##0.00":return Mu(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=B0(ix(c,0));return h!=="0"?u+h:"";case"###,###.00":return Mu(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Mu(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function WTe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Hh(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function XTe(t,e,r){var n=e.replace(ene,""),a=e.length-n.length;return Hh(t,n,r*Math.pow(10,2*a))+ni("%",a)}function ine(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+ine(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function wf(t,e,r){if(t.charCodeAt(0)===40&&!e.match(ane)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?wf("n",n,r):"("+wf("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return WTe(t,e,r);if(e.indexOf("%")!==-1)return XTe(t,e,r);if(e.indexOf("E")!==-1)return ine(e,r);if(e.charCodeAt(0)===36)return"$"+wf(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Vd(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:Jl(e.substr(0,e.length-a.length))+a;if(s=e.match(rne))return KTe(s,c,u);if(e.match(/^#+0+$/))return u+Vd(c,e.length-e.indexOf("0"));if(s=e.match(nne))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Jl(s[1])).replace(/\.$/,"."+Jl(s[1])),a=a.replace(/\.(\d*)$/,function(m,p){return"."+p+ni("0",Jl(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+B0(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+wf(t,e,-r):B0(""+r)+"."+ni("0",s[1].length);if(s=e.match(/^#,#*,#0/))return wf(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=sv(wf(t,e.replace(/[\\-]/g,""),r)),o=0,sv(sv(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<a.length?a.charAt(o++):m==="0"?"0":""}));if(e.match(sne))return a=wf(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=DS(c,Math.pow(10,o)-1,!1),a=""+u,d=Hh("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=FS(l[2],o),d.length<s[4].length&&(d=Jl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=DS(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?M6(l[1],o)+s[2]+"/"+s[3]+FS(l[2],o):ni(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:Jl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=e.indexOf(".")-o,A=e.length-a.length-f;return Jl(e.substr(0,f)+a+e.substr(e.length-A))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+wf(t,e,-r):B0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Vd(0,3-m.length):"")+m})+"."+Vd(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var h=B0(""+c);return h!=="0"?u+h:"";default:if(e.match(/\.[0#?]*$/))return wf(t,e.slice(0,e.lastIndexOf(".")),r)+Jl(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Hh(t,e,r){return(r|0)===r?wf(t,e,r):Mu(t,e,r)}function YTe(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var one=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function c1(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":OS(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(one))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function JTe(t,e,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,f,A="H";o<t.length;)switch(l=t.charAt(o)){case"G":if(!OS(t,o))throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++o;break;case"\\":var h=t.charAt(++o),m=h==="("||h===")"?h:"t";a[a.length]={t:m,v:h},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(u==null&&(u=fp(e,r,t.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=fp(e,r),u==null))return"";for(s=l;++o<t.length&&t.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=A),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(u==null&&(u=fp(e,r)),t.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",A="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",o+=5,A="h"):t.substr(o,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",o+=5,A="h"):(p.t="t",++o),u==null&&p.t==="T")return"";a[a.length]=p,c=l;break;case"[":for(s=l;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(one)){if(u==null&&(u=fp(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",c1(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<t.length&&(l=t.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"t",v:l},++o;break}var g=0,v=0,y;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=A,c="h",g<1&&(g=1);break;case"s":(y=a[o].v.match(/\.0+$/))&&(v=Math.max(v,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[o].v.match(/[Hh]/)&&(g=1),g<2&&a[o].v.match(/[Mm]/)&&(g=2),g<3&&a[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",w;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=VTe(a[o].t.charCodeAt(0),a[o].v,u,v),a[o].t="t";break;case"n":case"?":for(w=o+1;a[w]!=null&&((l=a[w].t)==="?"||l==="D"||(l===" "||l==="t")&&a[w+1]!=null&&(a[w+1].t==="?"||a[w+1].t==="t"&&a[w+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[w].v==="/"||a[w].v===" "&&a[w+1]!=null&&a[w+1].t=="?"));)a[o].v+=a[w].v,a[w]={v:"",t:";"},++w;b+=a[o].v,o=w-1;break;case"G":a[o].t="t",a[o].v=Jp(e,r);break}var j="",I,_;if(b.length>0){b.charCodeAt(0)==40?(I=e<0&&b.charCodeAt(0)===45?-e:e,_=Hh("n",b,I)):(I=e<0&&n>1?-e:e,_=Hh("n",b,I),I<0&&a[0]&&a[0].t=="t"&&(_=_.substr(1),a[0].v="-"+a[0].v)),w=_.length-1;var S=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){S=o;break}var E=a.length;if(S===a.length&&_.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(w>=a[o].v.length-1?(w-=a[o].v.length,a[o].v=_.substr(w+1,a[o].v.length)):w<0?a[o].v="":(a[o].v=_.substr(0,w+1),w=-1),a[o].t="t",E=o);w>=0&&E<a.length&&(a[E].v=_.substr(0,w+1)+a[E].v)}else if(S!==a.length&&_.indexOf("E")===-1){for(w=_.indexOf(".")-1,o=S;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")-1:a[o].v.length-1,j=a[o].v.substr(d+1);d>=0;--d)w>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(j=_.charAt(w--)+j);a[o].v=j,a[o].t="t",E=o}for(w>=0&&E<a.length&&(a[E].v=_.substr(0,w+1)+a[E].v),w=_.indexOf(".")+1,o=S;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==S)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")+1:0,j=a[o].v.substr(0,d);d<a[o].v.length;++d)w<_.length&&(j+=_.charAt(w++));a[o].v=j,a[o].t="t",E=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(I=n>1&&e<0&&o>0&&a[o-1].v==="-"?-e:e,a[o].v=Hh(a[o].t,a[o].v,I),a[o].t="t");var F="";for(o=0;o!==a.length;++o)a[o]!=null&&(F+=a[o].v);return F}var DH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function RH(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function ZTe(t,e){var r=YTe(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(DH),l=r[1].match(DH);return RH(e,o)?[n,r[0]]:RH(e,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function ud(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:fn)[t],n==null&&(n=r.table&&r.table[kH[t]]||fn[kH[t]]),n==null&&(n=OTe[t]||"General");break}if(OS(n,0))return Jp(e,r);e instanceof Date&&(e=Zre(e,r.date1904));var a=ZTe(n,e);if(OS(a[1]))return Jp(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return JTe(a[1],e,r,a[0])}function $h(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(fn[r]==null){e<0&&(e=r);continue}if(fn[r]==t){e=r;break}}e<0&&(e=391)}return fn[e]=t,e}function Xj(t){for(var e=0;e!=392;++e)t[e]!==void 0&&$h(t[e],e)}function u1(){fn=FTe()}var eke={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},lne=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function tke(t){var e=typeof t=="number"?fn[t]:t;return e=e.replace(lne,"(\\d+)"),new RegExp("^"+e+"$")}function rke(t,e,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(e.match(lne)||[]).forEach(function(f,A){var h=parseInt(r[A+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=h;break;case"d":s=h;break;case"h":o=h;break;case"s":c=h;break;case"m":o>=0?l=h:a=h;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var nke=function(){var t={};t.version="1.2.0";function e(){for(var _=0,S=new Array(256),E=0;E!=256;++E)_=E,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,S[E]=_;return typeof Int32Array<"u"?new Int32Array(S):S}var r=e();function n(_){var S=0,E=0,F=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)P[F]=_[F];for(F=0;F!=256;++F)for(E=_[F],S=256+F;S<4096;S+=256)E=P[S]=E>>>8^_[E&255];var k=[];for(F=1;F!=16;++F)k[F-1]=typeof Int32Array<"u"?P.subarray(F*256,F*256+256):P.slice(F*256,F*256+256);return k}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],A=a[7],h=a[8],m=a[9],p=a[10],g=a[11],v=a[12],y=a[13],b=a[14];function w(_,S){for(var E=S^-1,F=0,P=_.length;F<P;)E=E>>>8^r[(E^_.charCodeAt(F++))&255];return~E}function j(_,S){for(var E=S^-1,F=_.length-15,P=0;P<F;)E=b[_[P++]^E&255]^y[_[P++]^E>>8&255]^v[_[P++]^E>>16&255]^g[_[P++]^E>>>24]^p[_[P++]]^m[_[P++]]^h[_[P++]]^A[_[P++]]^f[_[P++]]^d[_[P++]]^u[_[P++]]^c[_[P++]]^l[_[P++]]^o[_[P++]]^s[_[P++]]^r[_[P++]];for(F+=15;P<F;)E=E>>>8^r[(E^_[P++])&255];return~E}function I(_,S){for(var E=S^-1,F=0,P=_.length,k=0,D=0;F<P;)k=_.charCodeAt(F++),k<128?E=E>>>8^r[(E^k)&255]:k<2048?(E=E>>>8^r[(E^(192|k>>6&31))&255],E=E>>>8^r[(E^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,D=_.charCodeAt(F++)&1023,E=E>>>8^r[(E^(240|k>>8&7))&255],E=E>>>8^r[(E^(128|k>>2&63))&255],E=E>>>8^r[(E^(128|D>>6&15|(k&3)<<4))&255],E=E>>>8^r[(E^(128|D&63))&255]):(E=E>>>8^r[(E^(224|k>>12&15))&255],E=E>>>8^r[(E^(128|k>>6&63))&255],E=E>>>8^r[(E^(128|k&63))&255]);return~E}return t.table=r,t.bstr=w,t.buf=j,t.str=I,t}(),an=function(){var e={};e.version="1.2.1";function r(T,M){for(var L=T.split("/"),K=M.split("/"),re=0,le=0,Me=Math.min(L.length,K.length);re<Me;++re){if(le=L[re].length-K[re].length)return le;if(L[re]!=K[re])return L[re]<K[re]?-1:1}return L.length-K.length}function n(T){if(T.charAt(T.length-1)=="/")return T.slice(0,-1).indexOf("/")===-1?T:n(T.slice(0,-1));var M=T.lastIndexOf("/");return M===-1?T:T.slice(0,M+1)}function a(T){if(T.charAt(T.length-1)=="/")return a(T.slice(0,-1));var M=T.lastIndexOf("/");return M===-1?T:T.slice(M+1)}function s(T,M){typeof M=="string"&&(M=new Date(M));var L=M.getHours();L=L<<6|M.getMinutes(),L=L<<5|M.getSeconds()>>>1,T.write_shift(2,L);var K=M.getFullYear()-1980;K=K<<4|M.getMonth()+1,K=K<<5|M.getDate(),T.write_shift(2,K)}function o(T){var M=T.read_shift(2)&65535,L=T.read_shift(2)&65535,K=new Date,re=L&31;L>>>=5;var le=L&15;L>>>=4,K.setMilliseconds(0),K.setFullYear(L+1980),K.setMonth(le-1),K.setDate(re);var Me=M&31;M>>>=5;var qe=M&63;return M>>>=6,K.setHours(M),K.setMinutes(qe),K.setSeconds(Me<<1),K}function l(T){el(T,0);for(var M={},L=0;T.l<=T.length-4;){var K=T.read_shift(2),re=T.read_shift(2),le=T.l+re,Me={};switch(K){case 21589:L=T.read_shift(1),L&1&&(Me.mtime=T.read_shift(4)),re>5&&(L&2&&(Me.atime=T.read_shift(4)),L&4&&(Me.ctime=T.read_shift(4))),Me.mtime&&(Me.mt=new Date(Me.mtime*1e3));break}T.l=le,M[K]=Me}return M}var c;function u(){return c||(c={})}function d(T,M){if(T[0]==80&&T[1]==75)return ve(T,M);if((T[0]|32)==109&&(T[1]|32)==105)return Se(T,M);if(T.length<512)throw new Error("CFB file size "+T.length+" < 512");var L=3,K=512,re=0,le=0,Me=0,qe=0,lt=0,Fe=[],Xe=T.slice(0,512);el(Xe,0);var he=f(Xe);switch(L=he[0],L){case 3:K=512;break;case 4:K=4096;break;case 0:if(he[1]==0)return ve(T,M);default:throw new Error("Major Version: Expected 3 or 4 saw "+L)}K!==512&&(Xe=T.slice(0,K),el(Xe,28));var He=T.slice(0,K);A(Xe,L);var Ye=Xe.read_shift(4,"i");if(L===3&&Ye!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ye);Xe.l+=4,Me=Xe.read_shift(4,"i"),Xe.l+=4,Xe.chk("00100000","Mini Stream Cutoff Size: "),qe=Xe.read_shift(4,"i"),re=Xe.read_shift(4,"i"),lt=Xe.read_shift(4,"i"),le=Xe.read_shift(4,"i");for(var ct=-1,Nt=0;Nt<109&&(ct=Xe.read_shift(4,"i"),!(ct<0));++Nt)Fe[Nt]=ct;var It=h(T,K);g(lt,le,It,K,Fe);var hr=y(It,Me,Fe,K);hr[Me].name="!Directory",re>0&&qe!==D&&(hr[qe].name="!MiniFAT"),hr[Fe[0]].name="!FAT",hr.fat_addrs=Fe,hr.ssz=K;var Ot={},Ft=[],lr=[],ir=[];b(Me,hr,It,Ft,re,Ot,lr,qe),m(lr,ir,Ft),Ft.shift();var Pt={FileIndex:lr,FullPaths:ir};return M&&M.raw&&(Pt.raw={header:He,sectors:It}),Pt}function f(T){if(T[T.l]==80&&T[T.l+1]==75)return[0,0];T.chk(J,"Header Signature: "),T.l+=16;var M=T.read_shift(2,"u");return[T.read_shift(2,"u"),M]}function A(T,M){var L=9;switch(T.l+=2,L=T.read_shift(2)){case 9:if(M!=3)throw new Error("Sector Shift: Expected 9 saw "+L);break;case 12:if(M!=4)throw new Error("Sector Shift: Expected 12 saw "+L);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+L)}T.chk("0600","Mini Sector Shift: "),T.chk("000000000000","Reserved: ")}function h(T,M){for(var L=Math.ceil(T.length/M)-1,K=[],re=1;re<L;++re)K[re-1]=T.slice(re*M,(re+1)*M);return K[L-1]=T.slice(L*M),K}function m(T,M,L){for(var K=0,re=0,le=0,Me=0,qe=0,lt=L.length,Fe=[],Xe=[];K<lt;++K)Fe[K]=Xe[K]=K,M[K]=L[K];for(;qe<Xe.length;++qe)K=Xe[qe],re=T[K].L,le=T[K].R,Me=T[K].C,Fe[K]===K&&(re!==-1&&Fe[re]!==re&&(Fe[K]=Fe[re]),le!==-1&&Fe[le]!==le&&(Fe[K]=Fe[le])),Me!==-1&&(Fe[Me]=K),re!==-1&&K!=Fe[K]&&(Fe[re]=Fe[K],Xe.lastIndexOf(re)<qe&&Xe.push(re)),le!==-1&&K!=Fe[K]&&(Fe[le]=Fe[K],Xe.lastIndexOf(le)<qe&&Xe.push(le));for(K=1;K<lt;++K)Fe[K]===K&&(le!==-1&&Fe[le]!==le?Fe[K]=Fe[le]:re!==-1&&Fe[re]!==re&&(Fe[K]=Fe[re]));for(K=1;K<lt;++K)if(T[K].type!==0){if(qe=K,qe!=Fe[qe])do qe=Fe[qe],M[K]=M[qe]+"/"+M[K];while(qe!==0&&Fe[qe]!==-1&&qe!=Fe[qe]);Fe[K]=-1}for(M[0]+="/",K=1;K<lt;++K)T[K].type!==2&&(M[K]+="/")}function p(T,M,L){for(var K=T.start,re=T.size,le=[],Me=K;L&&re>0&&Me>=0;)le.push(M.slice(Me*k,Me*k+k)),re-=k,Me=ap(L,Me*4);return le.length===0?Jt(0):Io(le).slice(0,T.size)}function g(T,M,L,K,re){var le=D;if(T===D){if(M!==0)throw new Error("DIFAT chain shorter than expected")}else if(T!==-1){var Me=L[T],qe=(K>>>2)-1;if(!Me)return;for(var lt=0;lt<qe&&(le=ap(Me,lt*4))!==D;++lt)re.push(le);g(ap(Me,K-4),M-1,L,K,re)}}function v(T,M,L,K,re){var le=[],Me=[];re||(re=[]);var qe=K-1,lt=0,Fe=0;for(lt=M;lt>=0;){re[lt]=!0,le[le.length]=lt,Me.push(T[lt]);var Xe=L[Math.floor(lt*4/K)];if(Fe=lt*4&qe,K<4+Fe)throw new Error("FAT boundary crossed: "+lt+" 4 "+K);if(!T[Xe])break;lt=ap(T[Xe],Fe)}return{nodes:le,data:WH([Me])}}function y(T,M,L,K){var re=T.length,le=[],Me=[],qe=[],lt=[],Fe=K-1,Xe=0,he=0,He=0,Ye=0;for(Xe=0;Xe<re;++Xe)if(qe=[],He=Xe+M,He>=re&&(He-=re),!Me[He]){lt=[];var ct=[];for(he=He;he>=0;){ct[he]=!0,Me[he]=!0,qe[qe.length]=he,lt.push(T[he]);var Nt=L[Math.floor(he*4/K)];if(Ye=he*4&Fe,K<4+Ye)throw new Error("FAT boundary crossed: "+he+" 4 "+K);if(!T[Nt]||(he=ap(T[Nt],Ye),ct[he]))break}le[He]={nodes:qe,data:WH([lt])}}return le}function b(T,M,L,K,re,le,Me,qe){for(var lt=0,Fe=K.length?2:0,Xe=M[T].data,he=0,He=0,Ye;he<Xe.length;he+=128){var ct=Xe.slice(he,he+128);el(ct,64),He=ct.read_shift(2),Ye=K6(ct,0,He-Fe),K.push(Ye);var Nt={name:Ye,type:ct.read_shift(1),color:ct.read_shift(1),L:ct.read_shift(4,"i"),R:ct.read_shift(4,"i"),C:ct.read_shift(4,"i"),clsid:ct.read_shift(16),state:ct.read_shift(4,"i"),start:0,size:0},It=ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2);It!==0&&(Nt.ct=w(ct,ct.l-8));var hr=ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2);hr!==0&&(Nt.mt=w(ct,ct.l-8)),Nt.start=ct.read_shift(4,"i"),Nt.size=ct.read_shift(4,"i"),Nt.size<0&&Nt.start<0&&(Nt.size=Nt.type=0,Nt.start=D,Nt.name=""),Nt.type===5?(lt=Nt.start,re>0&&lt!==D&&(M[lt].name="!StreamData")):Nt.size>=4096?(Nt.storage="fat",M[Nt.start]===void 0&&(M[Nt.start]=v(L,Nt.start,M.fat_addrs,M.ssz)),M[Nt.start].name=Nt.name,Nt.content=M[Nt.start].data.slice(0,Nt.size)):(Nt.storage="minifat",Nt.size<0?Nt.size=0:lt!==D&&Nt.start!==D&&M[lt]&&(Nt.content=p(Nt,M[lt].data,(M[qe]||{}).data))),Nt.content&&el(Nt.content,0),le[Ye]=Nt,Me.push(Nt)}}function w(T,M){return new Date((tu(T,M+4)/1e7*Math.pow(2,32)+tu(T,M)/1e7-11644473600)*1e3)}function j(T,M){return u(),d(c.readFileSync(T),M)}function I(T,M){var L=M&&M.type;switch(L||kn&&Buffer.isBuffer(T)&&(L="buffer"),L||"base64"){case"file":return j(T,M);case"base64":return d(ru(mu(T)),M);case"binary":return d(ru(T),M)}return d(T,M)}function _(T,M){var L=M||{},K=L.root||"Root Entry";if(T.FullPaths||(T.FullPaths=[]),T.FileIndex||(T.FileIndex=[]),T.FullPaths.length!==T.FileIndex.length)throw new Error("inconsistent CFB structure");T.FullPaths.length===0&&(T.FullPaths[0]=K+"/",T.FileIndex[0]={name:K,type:5}),L.CLSID&&(T.FileIndex[0].clsid=L.CLSID),S(T)}function S(T){var M="Sh33tJ5";if(!an.find(T,"/"+M)){var L=Jt(4);L[0]=55,L[1]=L[3]=50,L[2]=54,T.FileIndex.push({name:M,type:2,content:L,size:4,L:69,R:69,C:69}),T.FullPaths.push(T.FullPaths[0]+M),E(T)}}function E(T,M){_(T);for(var L=!1,K=!1,re=T.FullPaths.length-1;re>=0;--re){var le=T.FileIndex[re];switch(le.type){case 0:K?L=!0:(T.FileIndex.pop(),T.FullPaths.pop());break;case 1:case 2:case 5:K=!0,isNaN(le.R*le.L*le.C)&&(L=!0),le.R>-1&&le.L>-1&&le.R==le.L&&(L=!0);break;default:L=!0;break}}if(!(!L&&!M)){var Me=new Date(1987,1,19),qe=0,lt=Object.create?Object.create(null):{},Fe=[];for(re=0;re<T.FullPaths.length;++re)lt[T.FullPaths[re]]=!0,T.FileIndex[re].type!==0&&Fe.push([T.FullPaths[re],T.FileIndex[re]]);for(re=0;re<Fe.length;++re){var Xe=n(Fe[re][0]);K=lt[Xe],K||(Fe.push([Xe,{name:a(Xe).replace("/",""),type:1,clsid:Ae,ct:Me,mt:Me,content:null}]),lt[Xe]=!0)}for(Fe.sort(function(Ye,ct){return r(Ye[0],ct[0])}),T.FullPaths=[],T.FileIndex=[],re=0;re<Fe.length;++re)T.FullPaths[re]=Fe[re][0],T.FileIndex[re]=Fe[re][1];for(re=0;re<Fe.length;++re){var he=T.FileIndex[re],He=T.FullPaths[re];if(he.name=a(He).replace("/",""),he.L=he.R=he.C=-(he.color=1),he.size=he.content?he.content.length:0,he.start=0,he.clsid=he.clsid||Ae,re===0)he.C=Fe.length>1?1:-1,he.size=0,he.type=5;else if(He.slice(-1)=="/"){for(qe=re+1;qe<Fe.length&&n(T.FullPaths[qe])!=He;++qe);for(he.C=qe>=Fe.length?-1:qe,qe=re+1;qe<Fe.length&&n(T.FullPaths[qe])!=n(He);++qe);he.R=qe>=Fe.length?-1:qe,he.type=1}else n(T.FullPaths[re+1]||"")==n(He)&&(he.R=re+1),he.type=2}}}function F(T,M){var L=M||{};if(L.fileType=="mad")return ht(T,L);switch(E(T),L.fileType){case"zip":return ce(T,L)}var K=function(Ye){for(var ct=0,Nt=0,It=0;It<Ye.FileIndex.length;++It){var hr=Ye.FileIndex[It];if(hr.content){var Ot=hr.content.length;Ot>0&&(Ot<4096?ct+=Ot+63>>6:Nt+=Ot+511>>9)}}for(var Ft=Ye.FullPaths.length+3>>2,lr=ct+7>>3,ir=ct+127>>7,Pt=lr+Nt+Ft+ir,mr=Pt+127>>7,Fr=mr<=109?0:Math.ceil((mr-109)/127);Pt+mr+Fr+127>>7>mr;)Fr=++mr<=109?0:Math.ceil((mr-109)/127);var jr=[1,Fr,mr,ir,Ft,Nt,ct,0];return Ye.FileIndex[0].size=ct<<6,jr[7]=(Ye.FileIndex[0].start=jr[0]+jr[1]+jr[2]+jr[3]+jr[4]+jr[5])+(jr[6]+7>>3),jr}(T),re=Jt(K[7]<<9),le=0,Me=0;{for(le=0;le<8;++le)re.write_shift(1,fe[le]);for(le=0;le<8;++le)re.write_shift(2,0);for(re.write_shift(2,62),re.write_shift(2,3),re.write_shift(2,65534),re.write_shift(2,9),re.write_shift(2,6),le=0;le<3;++le)re.write_shift(2,0);for(re.write_shift(4,0),re.write_shift(4,K[2]),re.write_shift(4,K[0]+K[1]+K[2]+K[3]-1),re.write_shift(4,0),re.write_shift(4,4096),re.write_shift(4,K[3]?K[0]+K[1]+K[2]-1:D),re.write_shift(4,K[3]),re.write_shift(-4,K[1]?K[0]-1:D),re.write_shift(4,K[1]),le=0;le<109;++le)re.write_shift(-4,le<K[2]?K[1]+le:-1)}if(K[1])for(Me=0;Me<K[1];++Me){for(;le<236+Me*127;++le)re.write_shift(-4,le<K[2]?K[1]+le:-1);re.write_shift(-4,Me===K[1]-1?D:Me+1)}var qe=function(Ye){for(Me+=Ye;le<Me-1;++le)re.write_shift(-4,le+1);Ye&&(++le,re.write_shift(-4,D))};for(Me=le=0,Me+=K[1];le<Me;++le)re.write_shift(-4,me.DIFSECT);for(Me+=K[2];le<Me;++le)re.write_shift(-4,me.FATSECT);qe(K[3]),qe(K[4]);for(var lt=0,Fe=0,Xe=T.FileIndex[0];lt<T.FileIndex.length;++lt)Xe=T.FileIndex[lt],Xe.content&&(Fe=Xe.content.length,!(Fe<4096)&&(Xe.start=Me,qe(Fe+511>>9)));for(qe(K[6]+7>>3);re.l&511;)re.write_shift(-4,me.ENDOFCHAIN);for(Me=le=0,lt=0;lt<T.FileIndex.length;++lt)Xe=T.FileIndex[lt],Xe.content&&(Fe=Xe.content.length,!(!Fe||Fe>=4096)&&(Xe.start=Me,qe(Fe+63>>6)));for(;re.l&511;)re.write_shift(-4,me.ENDOFCHAIN);for(le=0;le<K[4]<<2;++le){var he=T.FullPaths[le];if(!he||he.length===0){for(lt=0;lt<17;++lt)re.write_shift(4,0);for(lt=0;lt<3;++lt)re.write_shift(4,-1);for(lt=0;lt<12;++lt)re.write_shift(4,0);continue}Xe=T.FileIndex[le],le===0&&(Xe.start=Xe.size?Xe.start-1:D);var He=le===0&&L.root||Xe.name;if(Fe=2*(He.length+1),re.write_shift(64,He,"utf16le"),re.write_shift(2,Fe),re.write_shift(1,Xe.type),re.write_shift(1,Xe.color),re.write_shift(-4,Xe.L),re.write_shift(-4,Xe.R),re.write_shift(-4,Xe.C),Xe.clsid)re.write_shift(16,Xe.clsid,"hex");else for(lt=0;lt<4;++lt)re.write_shift(4,0);re.write_shift(4,Xe.state||0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,Xe.start),re.write_shift(4,Xe.size),re.write_shift(4,0)}for(le=1;le<T.FileIndex.length;++le)if(Xe=T.FileIndex[le],Xe.size>=4096)if(re.l=Xe.start+1<<9,kn&&Buffer.isBuffer(Xe.content))Xe.content.copy(re,re.l,0,Xe.size),re.l+=Xe.size+511&-512;else{for(lt=0;lt<Xe.size;++lt)re.write_shift(1,Xe.content[lt]);for(;lt&511;++lt)re.write_shift(1,0)}for(le=1;le<T.FileIndex.length;++le)if(Xe=T.FileIndex[le],Xe.size>0&&Xe.size<4096)if(kn&&Buffer.isBuffer(Xe.content))Xe.content.copy(re,re.l,0,Xe.size),re.l+=Xe.size+63&-64;else{for(lt=0;lt<Xe.size;++lt)re.write_shift(1,Xe.content[lt]);for(;lt&63;++lt)re.write_shift(1,0)}if(kn)re.l=re.length;else for(;re.l<re.length;)re.write_shift(1,0);return re}function P(T,M){var L=T.FullPaths.map(function(lt){return lt.toUpperCase()}),K=L.map(function(lt){var Fe=lt.split("/");return Fe[Fe.length-(lt.slice(-1)=="/"?2:1)]}),re=!1;M.charCodeAt(0)===47?(re=!0,M=L[0].slice(0,-1)+M):re=M.indexOf("/")!==-1;var le=M.toUpperCase(),Me=re===!0?L.indexOf(le):K.indexOf(le);if(Me!==-1)return T.FileIndex[Me];var qe=!le.match($y);for(le=le.replace(sc,""),qe&&(le=le.replace($y,"!")),Me=0;Me<L.length;++Me)if((qe?L[Me].replace($y,"!"):L[Me]).replace(sc,"")==le||(qe?K[Me].replace($y,"!"):K[Me]).replace(sc,"")==le)return T.FileIndex[Me];return null}var k=64,D=-2,J="d0cf11e0a1b11ae1",fe=[208,207,17,224,161,177,26,225],Ae="00000000000000000000000000000000",me={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:J,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Ae,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function pe(T,M,L){u();var K=F(T,L);c.writeFileSync(M,K)}function ne(T){for(var M=new Array(T.length),L=0;L<T.length;++L)M[L]=String.fromCharCode(T[L]);return M.join("")}function Pe(T,M){var L=F(T,M);switch(M&&M.type||"buffer"){case"file":return u(),c.writeFileSync(M.filename,L),L;case"binary":return typeof L=="string"?L:ne(L);case"base64":return N2(typeof L=="string"?L:ne(L));case"buffer":if(kn)return Buffer.isBuffer(L)?L:xA(L);case"array":return typeof L=="string"?ru(L):L}return L}var Be;function O(T){try{var M=T.InflateRaw,L=new M;if(L._processChunk(new Uint8Array([3,0]),L._finishFlushFlag),L.bytesRead)Be=T;else throw new Error("zlib does not expose bytesRead")}catch(K){console.error("cannot use native zlib: "+(K.message||K))}}function G(T,M){if(!Be)return ae(T,M);var L=Be.InflateRaw,K=new L,re=K._processChunk(T.slice(T.l),K._finishFlushFlag);return T.l+=K.bytesRead,re}function q(T){return Be?Be.deflateRawSync(T):xe(T)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Z=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function R(T){var M=(T<<1|T<<11)&139536|(T<<5|T<<15)&558144;return(M>>16|M>>8|M)&255}for(var H=typeof Uint8Array<"u",te=H?new Uint8Array(256):[],ye=0;ye<256;++ye)te[ye]=R(ye);function Q(T,M){var L=te[T&255];return M<=8?L>>>8-M:(L=L<<8|te[T>>8&255],M<=16?L>>>16-M:(L=L<<8|te[T>>16&255],L>>>24-M))}function Ge(T,M){var L=M&7,K=M>>>3;return(T[K]|(L<=6?0:T[K+1]<<8))>>>L&3}function ie(T,M){var L=M&7,K=M>>>3;return(T[K]|(L<=5?0:T[K+1]<<8))>>>L&7}function ee(T,M){var L=M&7,K=M>>>3;return(T[K]|(L<=4?0:T[K+1]<<8))>>>L&15}function Ie(T,M){var L=M&7,K=M>>>3;return(T[K]|(L<=3?0:T[K+1]<<8))>>>L&31}function ue(T,M){var L=M&7,K=M>>>3;return(T[K]|(L<=1?0:T[K+1]<<8))>>>L&127}function se(T,M,L){var K=M&7,re=M>>>3,le=(1<<L)-1,Me=T[re]>>>K;return L<8-K||(Me|=T[re+1]<<8-K,L<16-K)||(Me|=T[re+2]<<16-K,L<24-K)||(Me|=T[re+3]<<24-K),Me&le}function Ee(T,M,L){var K=M&7,re=M>>>3;return K<=5?T[re]|=(L&7)<<K:(T[re]|=L<<K&255,T[re+1]=(L&7)>>8-K),M+3}function je(T,M,L){var K=M&7,re=M>>>3;return L=(L&1)<<K,T[re]|=L,M+1}function it(T,M,L){var K=M&7,re=M>>>3;return L<<=K,T[re]|=L&255,L>>>=8,T[re+1]=L,M+8}function At(T,M,L){var K=M&7,re=M>>>3;return L<<=K,T[re]|=L&255,L>>>=8,T[re+1]=L&255,T[re+2]=L>>>8,M+16}function pt(T,M){var L=T.length,K=2*L>M?2*L:M+5,re=0;if(L>=M)return T;if(kn){var le=PH(K);if(T.copy)T.copy(le);else for(;re<T.length;++re)le[re]=T[re];return le}else if(H){var Me=new Uint8Array(K);if(Me.set)Me.set(T);else for(;re<L;++re)Me[re]=T[re];return Me}return T.length=K,T}function yt(T){for(var M=new Array(T),L=0;L<T;++L)M[L]=0;return M}function Ct(T,M,L){var K=1,re=0,le=0,Me=0,qe=0,lt=T.length,Fe=H?new Uint16Array(32):yt(32);for(le=0;le<32;++le)Fe[le]=0;for(le=lt;le<L;++le)T[le]=0;lt=T.length;var Xe=H?new Uint16Array(lt):yt(lt);for(le=0;le<lt;++le)Fe[re=T[le]]++,K<re&&(K=re),Xe[le]=0;for(Fe[0]=0,le=1;le<=K;++le)Fe[le+16]=qe=qe+Fe[le-1]<<1;for(le=0;le<lt;++le)qe=T[le],qe!=0&&(Xe[le]=Fe[qe+16]++);var he=0;for(le=0;le<lt;++le)if(he=T[le],he!=0)for(qe=Q(Xe[le],K)>>K-he,Me=(1<<K+4-he)-1;Me>=0;--Me)M[qe|Me<<he]=he&15|le<<4;return K}var Et=H?new Uint16Array(512):yt(512),Re=H?new Uint16Array(32):yt(32);if(!H){for(var We=0;We<512;++We)Et[We]=0;for(We=0;We<32;++We)Re[We]=0}(function(){for(var T=[],M=0;M<32;M++)T.push(5);Ct(T,Re,32);var L=[];for(M=0;M<=143;M++)L.push(8);for(;M<=255;M++)L.push(9);for(;M<=279;M++)L.push(7);for(;M<=287;M++)L.push(8);Ct(L,Et,288)})();var et=function(){for(var M=H?new Uint8Array(32768):[],L=0,K=0;L<Z.length-1;++L)for(;K<Z[L+1];++K)M[K]=L;for(;K<32768;++K)M[K]=29;var re=H?new Uint8Array(259):[];for(L=0,K=0;L<Y.length-1;++L)for(;K<Y[L+1];++K)re[K]=L;function le(qe,lt){for(var Fe=0;Fe<qe.length;){var Xe=Math.min(65535,qe.length-Fe),he=Fe+Xe==qe.length;for(lt.write_shift(1,+he),lt.write_shift(2,Xe),lt.write_shift(2,~Xe&65535);Xe-- >0;)lt[lt.l++]=qe[Fe++]}return lt.l}function Me(qe,lt){for(var Fe=0,Xe=0,he=H?new Uint16Array(32768):[];Xe<qe.length;){var He=Math.min(65535,qe.length-Xe);if(He<10){for(Fe=Ee(lt,Fe,+(Xe+He==qe.length)),Fe&7&&(Fe+=8-(Fe&7)),lt.l=Fe/8|0,lt.write_shift(2,He),lt.write_shift(2,~He&65535);He-- >0;)lt[lt.l++]=qe[Xe++];Fe=lt.l*8;continue}Fe=Ee(lt,Fe,+(Xe+He==qe.length)+2);for(var Ye=0;He-- >0;){var ct=qe[Xe];Ye=(Ye<<5^ct)&32767;var Nt=-1,It=0;if((Nt=he[Ye])&&(Nt|=Xe&-32768,Nt>Xe&&(Nt-=32768),Nt<Xe))for(;qe[Nt+It]==qe[Xe+It]&&It<250;)++It;if(It>2){ct=re[It],ct<=22?Fe=it(lt,Fe,te[ct+1]>>1)-1:(it(lt,Fe,3),Fe+=5,it(lt,Fe,te[ct-23]>>5),Fe+=3);var hr=ct<8?0:ct-4>>2;hr>0&&(At(lt,Fe,It-Y[ct]),Fe+=hr),ct=M[Xe-Nt],Fe=it(lt,Fe,te[ct]>>3),Fe-=3;var Ot=ct<4?0:ct-2>>1;Ot>0&&(At(lt,Fe,Xe-Nt-Z[ct]),Fe+=Ot);for(var Ft=0;Ft<It;++Ft)he[Ye]=Xe&32767,Ye=(Ye<<5^qe[Xe])&32767,++Xe;He-=It-1}else ct<=143?ct=ct+48:Fe=je(lt,Fe,1),Fe=it(lt,Fe,te[ct]),he[Ye]=Xe&32767,++Xe}Fe=it(lt,Fe,0)-1}return lt.l=(Fe+7)/8|0,lt.l}return function(lt,Fe){return lt.length<8?le(lt,Fe):Me(lt,Fe)}}();function xe(T){var M=Jt(50+Math.floor(T.length*1.1)),L=et(T,M);return M.slice(0,L)}var de=H?new Uint16Array(32768):yt(32768),Ue=H?new Uint16Array(32768):yt(32768),Ke=H?new Uint16Array(128):yt(128),Ne=1,mt=1;function wt(T,M){var L=Ie(T,M)+257;M+=5;var K=Ie(T,M)+1;M+=5;var re=ee(T,M)+4;M+=4;for(var le=0,Me=H?new Uint8Array(19):yt(19),qe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],lt=1,Fe=H?new Uint8Array(8):yt(8),Xe=H?new Uint8Array(8):yt(8),he=Me.length,He=0;He<re;++He)Me[U[He]]=le=ie(T,M),lt<le&&(lt=le),Fe[le]++,M+=3;var Ye=0;for(Fe[0]=0,He=1;He<=lt;++He)Xe[He]=Ye=Ye+Fe[He-1]<<1;for(He=0;He<he;++He)(Ye=Me[He])!=0&&(qe[He]=Xe[Ye]++);var ct=0;for(He=0;He<he;++He)if(ct=Me[He],ct!=0){Ye=te[qe[He]]>>8-ct;for(var Nt=(1<<7-ct)-1;Nt>=0;--Nt)Ke[Ye|Nt<<ct]=ct&7|He<<3}var It=[];for(lt=1;It.length<L+K;)switch(Ye=Ke[ue(T,M)],M+=Ye&7,Ye>>>=3){case 16:for(le=3+Ge(T,M),M+=2,Ye=It[It.length-1];le-- >0;)It.push(Ye);break;case 17:for(le=3+ie(T,M),M+=3;le-- >0;)It.push(0);break;case 18:for(le=11+ue(T,M),M+=7;le-- >0;)It.push(0);break;default:It.push(Ye),lt<Ye&&(lt=Ye);break}var hr=It.slice(0,L),Ot=It.slice(L);for(He=L;He<286;++He)hr[He]=0;for(He=K;He<30;++He)Ot[He]=0;return Ne=Ct(hr,de,286),mt=Ct(Ot,Ue,30),M}function we(T,M){if(T[0]==3&&!(T[1]&3))return[lm(M),2];for(var L=0,K=0,re=PH(M||1<<18),le=0,Me=re.length>>>0,qe=0,lt=0;!(K&1);){if(K=ie(T,L),L+=3,K>>>1)K>>1==1?(qe=9,lt=5):(L=wt(T,L),qe=Ne,lt=mt);else{L&7&&(L+=8-(L&7));var Fe=T[L>>>3]|T[(L>>>3)+1]<<8;if(L+=32,Fe>0)for(!M&&Me<le+Fe&&(re=pt(re,le+Fe),Me=re.length);Fe-- >0;)re[le++]=T[L>>>3],L+=8;continue}for(;;){!M&&Me<le+32767&&(re=pt(re,le+32767),Me=re.length);var Xe=se(T,L,qe),he=K>>>1==1?Et[Xe]:de[Xe];if(L+=he&15,he>>>=4,!(he>>>8&255))re[le++]=he;else{if(he==256)break;he-=257;var He=he<8?0:he-4>>2;He>5&&(He=0);var Ye=le+Y[he];He>0&&(Ye+=se(T,L,He),L+=He),Xe=se(T,L,lt),he=K>>>1==1?Re[Xe]:Ue[Xe],L+=he&15,he>>>=4;var ct=he<4?0:he-2>>1,Nt=Z[he];for(ct>0&&(Nt+=se(T,L,ct),L+=ct),!M&&Me<Ye&&(re=pt(re,Ye+100),Me=re.length);le<Ye;)re[le]=re[le-Nt],++le}}}return M?[re,L+7>>>3]:[re.slice(0,le),L+7>>>3]}function ae(T,M){var L=T.slice(T.l||0),K=we(L,M);return T.l+=K[1],K[0]}function be(T,M){if(T)typeof console<"u"&&console.error(M);else throw new Error(M)}function ve(T,M){var L=T;el(L,0);var K=[],re=[],le={FileIndex:K,FullPaths:re};_(le,{root:M.root});for(var Me=L.length-4;(L[Me]!=80||L[Me+1]!=75||L[Me+2]!=5||L[Me+3]!=6)&&Me>=0;)--Me;L.l=Me+4,L.l+=4;var qe=L.read_shift(2);L.l+=6;var lt=L.read_shift(4);for(L.l=lt,Me=0;Me<qe;++Me){L.l+=20;var Fe=L.read_shift(4),Xe=L.read_shift(4),he=L.read_shift(2),He=L.read_shift(2),Ye=L.read_shift(2);L.l+=8;var ct=L.read_shift(4),Nt=l(L.slice(L.l+he,L.l+he+He));L.l+=he+He+Ye;var It=L.l;L.l=ct+4,Ve(L,Fe,Xe,le,Nt),L.l=It}return le}function Ve(T,M,L,K,re){T.l+=2;var le=T.read_shift(2),Me=T.read_shift(2),qe=o(T);if(le&8257)throw new Error("Unsupported ZIP encryption");for(var lt=T.read_shift(4),Fe=T.read_shift(4),Xe=T.read_shift(4),he=T.read_shift(2),He=T.read_shift(2),Ye="",ct=0;ct<he;++ct)Ye+=String.fromCharCode(T[T.l++]);if(He){var Nt=l(T.slice(T.l,T.l+He));(Nt[21589]||{}).mt&&(qe=Nt[21589].mt),((re||{})[21589]||{}).mt&&(qe=re[21589].mt)}T.l+=He;var It=T.slice(T.l,T.l+Fe);switch(Me){case 8:It=G(T,Xe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Me)}var hr=!1;le&8&&(lt=T.read_shift(4),lt==134695760&&(lt=T.read_shift(4),hr=!0),Fe=T.read_shift(4),Xe=T.read_shift(4)),Fe!=M&&be(hr,"Bad compressed size: "+M+" != "+Fe),Xe!=L&&be(hr,"Bad uncompressed size: "+L+" != "+Xe),Te(K,Ye,It,{unsafe:!0,mt:qe})}function ce(T,M){var L=M||{},K=[],re=[],le=Jt(1),Me=L.compression?8:0,qe=0,lt=0,Fe=0,Xe=0,he=0,He=T.FullPaths[0],Ye=He,ct=T.FileIndex[0],Nt=[],It=0;for(lt=1;lt<T.FullPaths.length;++lt)if(Ye=T.FullPaths[lt].slice(He.length),ct=T.FileIndex[lt],!(!ct.size||!ct.content||Ye=="Sh33tJ5")){var hr=Xe,Ot=Jt(Ye.length);for(Fe=0;Fe<Ye.length;++Fe)Ot.write_shift(1,Ye.charCodeAt(Fe)&127);Ot=Ot.slice(0,Ot.l),Nt[he]=nke.buf(ct.content,0);var Ft=ct.content;Me==8&&(Ft=q(Ft)),le=Jt(30),le.write_shift(4,67324752),le.write_shift(2,20),le.write_shift(2,qe),le.write_shift(2,Me),ct.mt?s(le,ct.mt):le.write_shift(4,0),le.write_shift(-4,Nt[he]),le.write_shift(4,Ft.length),le.write_shift(4,ct.content.length),le.write_shift(2,Ot.length),le.write_shift(2,0),Xe+=le.length,K.push(le),Xe+=Ot.length,K.push(Ot),Xe+=Ft.length,K.push(Ft),le=Jt(46),le.write_shift(4,33639248),le.write_shift(2,0),le.write_shift(2,20),le.write_shift(2,qe),le.write_shift(2,Me),le.write_shift(4,0),le.write_shift(-4,Nt[he]),le.write_shift(4,Ft.length),le.write_shift(4,ct.content.length),le.write_shift(2,Ot.length),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(4,0),le.write_shift(4,hr),It+=le.l,re.push(le),It+=Ot.length,re.push(Ot),++he}return le=Jt(22),le.write_shift(4,101010256),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(2,he),le.write_shift(2,he),le.write_shift(4,It),le.write_shift(4,Xe),le.write_shift(2,0),Io([Io(K),Io(re),le])}var ke={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function dt(T,M){if(T.ctype)return T.ctype;var L=T.name||"",K=L.match(/\.([^\.]+)$/);return K&&ke[K[1]]||M&&(K=(L=M).match(/[\.\\]([^\.\\])+$/),K&&ke[K[1]])?ke[K[1]]:"application/octet-stream"}function ft(T){for(var M=N2(T),L=[],K=0;K<M.length;K+=76)L.push(M.slice(K,K+76));return L.join(`\r
`)+`\r
`}function gt(T){var M=T.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Fe){var Xe=Fe.charCodeAt(0).toString(16).toUpperCase();return"="+(Xe.length==1?"0"+Xe:Xe)});M=M.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),M.charAt(0)==`
`&&(M="=0D"+M.slice(1)),M=M.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var L=[],K=M.split(`\r
`),re=0;re<K.length;++re){var le=K[re];if(le.length==0){L.push("");continue}for(var Me=0;Me<le.length;){var qe=76,lt=le.slice(Me,Me+qe);lt.charAt(qe-1)=="="?qe--:lt.charAt(qe-2)=="="?qe-=2:lt.charAt(qe-3)=="="&&(qe-=3),lt=le.slice(Me,Me+qe),Me+=qe,Me<le.length&&(lt+="="),L.push(lt)}}return L.join(`\r
`)}function Rt(T){for(var M=[],L=0;L<T.length;++L){for(var K=T[L];L<=T.length&&K.charAt(K.length-1)=="=";)K=K.slice(0,K.length-1)+T[++L];M.push(K)}for(var re=0;re<M.length;++re)M[re]=M[re].replace(/[=][0-9A-Fa-f]{2}/g,function(le){return String.fromCharCode(parseInt(le.slice(1),16))});return ru(M.join(`\r
`))}function ot(T,M,L){for(var K="",re="",le="",Me,qe=0;qe<10;++qe){var lt=M[qe];if(!lt||lt.match(/^\s*$/))break;var Fe=lt.match(/^(.*?):\s*([^\s].*)$/);if(Fe)switch(Fe[1].toLowerCase()){case"content-location":K=Fe[2].trim();break;case"content-type":le=Fe[2].trim();break;case"content-transfer-encoding":re=Fe[2].trim();break}}switch(++qe,re.toLowerCase()){case"base64":Me=ru(mu(M.slice(qe).join("")));break;case"quoted-printable":Me=Rt(M.slice(qe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+re)}var Xe=Te(T,K.slice(L.length),Me,{unsafe:!0});le&&(Xe.ctype=le)}function Se(T,M){if(ne(T.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var L=M&&M.root||"",K=(kn&&Buffer.isBuffer(T)?T.toString("binary"):ne(T)).split(`\r
`),re=0,le="";for(re=0;re<K.length;++re)if(le=K[re],!!/^Content-Location:/i.test(le)&&(le=le.slice(le.indexOf("file")),L||(L=le.slice(0,le.lastIndexOf("/")+1)),le.slice(0,L.length)!=L))for(;L.length>0&&(L=L.slice(0,L.length-1),L=L.slice(0,L.lastIndexOf("/")+1),le.slice(0,L.length)!=L););var Me=(K[1]||"").match(/boundary="(.*?)"/);if(!Me)throw new Error("MAD cannot find boundary");var qe="--"+(Me[1]||""),lt=[],Fe=[],Xe={FileIndex:lt,FullPaths:Fe};_(Xe);var he,He=0;for(re=0;re<K.length;++re){var Ye=K[re];Ye!==qe&&Ye!==qe+"--"||(He++&&ot(Xe,K.slice(he,re),L),he=re)}return Xe}function ht(T,M){var L=M||{},K=L.boundary||"SheetJS";K="------="+K;for(var re=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+K.slice(2)+'"',"","",""],le=T.FullPaths[0],Me=le,qe=T.FileIndex[0],lt=1;lt<T.FullPaths.length;++lt)if(Me=T.FullPaths[lt].slice(le.length),qe=T.FileIndex[lt],!(!qe.size||!qe.content||Me=="Sh33tJ5")){Me=Me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(It){return"_x"+It.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(It){return"_u"+It.charCodeAt(0).toString(16)+"_"});for(var Fe=qe.content,Xe=kn&&Buffer.isBuffer(Fe)?Fe.toString("binary"):ne(Fe),he=0,He=Math.min(1024,Xe.length),Ye=0,ct=0;ct<=He;++ct)(Ye=Xe.charCodeAt(ct))>=32&&Ye<128&&++he;var Nt=he>=He*4/5;re.push(K),re.push("Content-Location: "+(L.root||"file:///C:/SheetJS/")+Me),re.push("Content-Transfer-Encoding: "+(Nt?"quoted-printable":"base64")),re.push("Content-Type: "+dt(qe,Me)),re.push(""),re.push(Nt?gt(Xe):ft(Xe))}return re.push(K+`--\r
`),re.join(`\r
`)}function W(T){var M={};return _(M,T),M}function Te(T,M,L,K){var re=K&&K.unsafe;re||_(T);var le=!re&&an.find(T,M);if(!le){var Me=T.FullPaths[0];M.slice(0,Me.length)==Me?Me=M:(Me.slice(-1)!="/"&&(Me+="/"),Me=(Me+M).replace("//","/")),le={name:a(M),type:2},T.FileIndex.push(le),T.FullPaths.push(Me),re||an.utils.cfb_gc(T)}return le.content=L,le.size=L?L.length:0,K&&(K.CLSID&&(le.clsid=K.CLSID),K.mt&&(le.mt=K.mt),K.ct&&(le.ct=K.ct)),le}function Ze(T,M){_(T);var L=an.find(T,M);if(L){for(var K=0;K<T.FileIndex.length;++K)if(T.FileIndex[K]==L)return T.FileIndex.splice(K,1),T.FullPaths.splice(K,1),!0}return!1}function tt(T,M,L){_(T);var K=an.find(T,M);if(K){for(var re=0;re<T.FileIndex.length;++re)if(T.FileIndex[re]==K)return T.FileIndex[re].name=a(L),T.FullPaths[re]=L,!0}return!1}function ut(T){E(T,!0)}return e.find=P,e.read=I,e.parse=d,e.write=Pe,e.writeFile=pe,e.utils={cfb_new:W,cfb_add:Te,cfb_del:Ze,cfb_mov:tt,cfb_gc:ut,ReadShift:Nb,CheckField:Pne,prep_blob:el,bconcat:Io,use_zlib:O,_deflateRaw:xe,_inflateRaw:ae,consts:me},e}();function ake(t){return typeof t=="string"?Wj(t):Array.isArray(t)?PTe(t):t}function Pw(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Wj(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?kf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([ake(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=bm(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function ske(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function oi(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function MH(t,e){for(var r=[],n=oi(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function Yj(t){for(var e=[],r=oi(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function Jj(t){for(var e=[],r=oi(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function ike(t){for(var e=[],r=oi(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var RS=new Date(1899,11,30,0,0,0);function oo(t,e){var r=t.getTime(),n=RS.getTime()+(t.getTimezoneOffset()-RS.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var cne=new Date,oke=RS.getTime()+(cne.getTimezoneOffset()-RS.getTimezoneOffset())*6e4,LH=cne.getTimezoneOffset();function Zj(t){var e=new Date;return e.setTime(t*24*60*60*1e3+oke),e.getTimezoneOffset()!==LH&&e.setTime(e.getTime()+(e.getTimezoneOffset()-LH)*6e4),e}function lke(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var UH=new Date("2017-02-19T19:06:09.000Z"),une=isNaN(UH.getFullYear())?new Date("2/19/17"):UH,cke=une.getFullYear()==2017;function fs(t,e){var r=new Date(t);if(cke)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(une.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Zp(t,e){if(kn&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return kf(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return kf(Yre(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return kf(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return kf(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function hs(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=hs(t[r]));return e}function ni(t,e){for(var r="";r.length<e;)r+=t;return r}function qd(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var uke=["january","february","march","april","may","june","july","august","september","october","november","december"];function Pv(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&uke.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var dke=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],l=1;l<s.length;++l)o.push(a),o.push(s[l]);return o}}();function dne(t){return t?t.content&&t.type?Zp(t.content,!0):t.data?Hy(t.data):t.asNodeBuffer&&kn?Hy(t.asNodeBuffer().toString("binary")):t.asBinary?Hy(t.asBinary()):t._data&&t._data.getContent?Hy(Zp(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function fne(t){if(!t)return null;if(t.data)return IH(t.data);if(t.asNodeBuffer&&kn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?IH(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function fke(t){return t&&t.name.slice(-4)===".bin"?fne(t):dne(t)}function Gu(t,e){for(var r=t.FullPaths||oi(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function U6(t,e){var r=Gu(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Pi(t,e,r){if(!r)return fke(U6(t,e));if(!e)return null;try{return Pi(t,e)}catch{return null}}function nu(t,e,r){if(!r)return dne(U6(t,e));if(!e)return null;try{return nu(t,e)}catch{return null}}function hke(t,e,r){return fne(U6(t,e))}function QH(t){for(var e=t.FullPaths||oi(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function jn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return kn?n=xA(r):n=BTe(r),an.utils.cfb_add(t,e,n)}an.utils.cfb_add(t,e,r)}else t.file(e,r)}function Q6(){return an.utils.cfb_new()}function hne(t,e){switch(e.type){case"base64":return an.read(t,{type:"base64"});case"binary":return an.read(t,{type:"binary"});case"buffer":case"array":return an.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Gy(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Si=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Ake=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,VH=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,mke=/<[^>]*>/g,Rl=Si.match(VH)?VH:mke,pke=/<\w*:/,gke=/<(\/?)\w+:/;function An(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var o=t.match(Ake),l=0,c="",u=0,d="",f="",A=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(A=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+A,f.length-A),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var h=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[h]&&d.slice(l-3,l)=="ext")continue;n[h]=c,n[h.toLowerCase()]=c}}return n}function Yf(t){return t.replace(gke,"<$1")}var Ane={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},V6=Yj(Ane),ta=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(l,c){return Ane[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,o)+r(a.slice(o+3))}}(),H6=/[&<>'"]/g,xke=/[\u0000-\u0008\u000b-\u001f]/g;function Ba(t){var e=t+"";return e.replace(H6,function(r){return V6[r]}).replace(xke,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function HH(t){return Ba(t).replace(/ /g,"_x0020_")}var mne=/[\u0000-\u001f]/g;function $6(t){var e=t+"";return e.replace(H6,function(r){return V6[r]}).replace(/\n/g,"<br/>").replace(mne,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function vke(t){var e=t+"";return e.replace(H6,function(r){return V6[r]}).replace(mne,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var $H=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function yke(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function ls(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function w5(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=t.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function GH(t){var e=lm(2*t.length),r,n,a=1,s=0,o=0,l;for(n=0;n<t.length;n+=a)a=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function KH(t){return xA(t,"binary").toString("utf8")}var $C="foo bar baz",Ma=kn&&(KH($C)==w5($C)&&KH||GH($C)==w5($C)&&GH)||w5,kf=kn?function(t){return xA(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},_2=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),pne=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),bke=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),wke=/<\/?(?:vt:)?variant>/g,Nke=/<(?:vt:)([^>]*)>([\s\S]*)</;function qH(t,e){var r=An(t),n=t.match(bke(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var o=s.replace(wke,"").match(Nke);o&&a.push({v:Ma(o[2]),t:o[1]})}),a}var gne=/(^\s|\s$|\n)/;function rl(t,e){return"<"+t+(e.match(gne)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function E2(t){return oi(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function _r(t,e,r){return"<"+t+(r!=null?E2(r):"")+(e!=null?(e.match(gne)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Qk(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function Cke(t,e){switch(typeof t){case"string":var r=_r("vt:lpwstr",Ba(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return _r((t|0)==t?"vt:i4":"vt:r8",Ba(String(t)));case"boolean":return _r("vt:bool",t?"true":"false")}if(t instanceof Date)return _r("vt:filetime",Qk(t));throw new Error("Unable to serialize "+t)}function G6(t){if(kn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Ma(bm(R6(t)));throw new Error("Bad input format: expected Buffer or string")}var S2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,no={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ng=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],eu={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function _ke(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function Eke(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,o=n?-e:e;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var zH=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},WH=kn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:xA(e)})):zH(t)}:zH,XH=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(kh(t,a)));return n.join("").replace(sc,"")},K6=kn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(sc,""):XH(t,e,r)}:XH,YH=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},xne=kn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):YH(t,e,r)}:YH,JH=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(Nx(t,a)));return n.join("")},Bw=kn?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):JH(e,r,n)}:JH,vne=function(t,e){var r=tu(t,e);return r>0?Bw(t,e+4,e+4+r-1):""},yne=vne,bne=function(t,e){var r=tu(t,e);return r>0?Bw(t,e+4,e+4+r-1):""},wne=bne,Nne=function(t,e){var r=2*tu(t,e);return r>0?Bw(t,e+4,e+4+r-1):""},Cne=Nne,_ne=function(e,r){var n=tu(e,r);return n>0?K6(e,r+4,r+4+n):""},Ene=_ne,Sne=function(t,e){var r=tu(t,e);return r>0?Bw(t,e+4,e+4+r):""},Ine=Sne,jne=function(t,e){return _ke(t,e)},MS=jne,q6=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};kn&&(yne=function(e,r){if(!Buffer.isBuffer(e))return vne(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},wne=function(e,r){if(!Buffer.isBuffer(e))return bne(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Cne=function(e,r){if(!Buffer.isBuffer(e))return Nne(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},Ene=function(e,r){if(!Buffer.isBuffer(e))return _ne(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},Ine=function(e,r){if(!Buffer.isBuffer(e))return Sne(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},MS=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):jne(e,r)},q6=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Nx=function(t,e){return t[e]},kh=function(t,e){return t[e+1]*256+t[e]},Ske=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},tu=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},ap=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Ike=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Nb(t,e){var r="",n,a,s=[],o,l,c,u;switch(e){case"dbcs":if(u=this.l,kn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(kh(this,u)),u+=2;t*=2;break;case"utf8":r=Bw(this,this.l,this.l+t);break;case"utf16le":t*=2,r=K6(this,this.l,this.l+t);break;case"wstr":return Nb.call(this,t,"dbcs");case"lpstr-ansi":r=yne(this,this.l),t=4+tu(this,this.l);break;case"lpstr-cp":r=wne(this,this.l),t=4+tu(this,this.l);break;case"lpwstr":r=Cne(this,this.l),t=4+2*tu(this,this.l);break;case"lpp4":t=4+tu(this,this.l),r=Ene(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+tu(this,this.l),r=Ine(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(o=Nx(this,this.l+t++))!==0;)s.push(HC(o));r=s.join("");break;case"_wstr":for(t=0,r="";(o=kh(this,this.l+t))!==0;)s.push(HC(o)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Nx(this,u),this.l=u+1,l=Nb.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(HC(kh(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Nx(this,u),this.l=u+1,l=Nb.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(HC(Nx(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=Nx(this,this.l),this.l++,n;case 2:return n=(e==="i"?Ske:kh)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?ap:Ike)(this,this.l),this.l+=4,n):(a=tu(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=MS(this,this.l):a=MS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=xne(this,this.l,t);break}}return this.l+=t,r}var jke=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},Pke=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},Bke=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function Tke(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)Bke(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var o=e.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,jke(this,e,this.l);break;case 8:if(n=8,r==="f"){Eke(this,e,this.l);break}case 16:break;case-4:n=4,Pke(this,e,this.l);break}return this.l+=n,this}function Pne(t,e){var r=xne(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function el(t,e){t.l=e,t.read_shift=Nb,t.chk=Pne,t.write_shift=Tke}function Ol(t,e){t.l+=e}function Jt(t){var e=lm(t);return el(e,0),e}function vA(t,e,r){if(t){var n,a,s;el(t,t.l||0);for(var o=t.length,l=0,c=0;t.l<o;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var u=k2[l]||k2[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;c=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=c,e(d,u,l))return}}}function jc(){var t=[],e=kn?256:2048,r=function(u){var d=Jt(u);return el(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},o=function(){return a(),Io(t)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:o,_bufs:t}}function cr(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=k2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=t.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&q6(r)&&t.push(r)}}function Cb(t,e,r){var n=hs(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function ZH(t,e,r){var n=hs(t);return n.s=Cb(n.s,e.s,r),n.e=Cb(n.e,e.s,r),n}function _b(t,e){if(t.cRel&&t.c<0)for(t=hs(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=hs(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=hn(t);return!t.cRel&&t.cRel!=null&&(r=Oke(r)),!t.rRel&&t.rRel!=null&&(r=kke(r)),r}function N5(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Ls(t.s.c)+":"+(t.e.cRel?"":"$")+Ls(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+_i(t.s.r)+":"+(t.e.rRel?"":"$")+_i(t.e.r):_b(t.s,e.biff)+":"+_b(t.e,e.biff)}function z6(t){return parseInt(Fke(t),10)-1}function _i(t){return""+(t+1)}function kke(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Fke(t){return t.replace(/\$(\d+)$/,"$1")}function W6(t){for(var e=Dke(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Ls(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Oke(t){return t.replace(/^([A-Z])/,"$$$1")}function Dke(t){return t.replace(/^\$([A-Z])/,"$1")}function Rke(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Us(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function hn(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Pc(t){var e=t.indexOf(":");return e==-1?{s:Us(t),e:Us(t)}:{s:Us(t.slice(0,e)),e:Us(t.slice(e+1))}}function _n(t,e){return typeof e>"u"||typeof e=="number"?_n(t.s,t.e):(typeof t!="string"&&(t=hn(t)),typeof e!="string"&&(e=hn(e)),t==e?t:t+":"+e)}function ra(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function e$(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=ud(t.z,r?oo(e):e)}catch{}try{return t.w=ud((t.XF||{}).numFmtId||(r?14:0),r?oo(e):e)}catch{return""+e}}function nA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?yA[t.v]||t.v:e==null?e$(t,t.v):e$(t,e))}function wm(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function Bne(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Us(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=ra(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var A=0;A!=e[f].length;++A)if(!(typeof e[f][A]>"u")){var h={v:e[f][A]},m=o+f,p=l+A;if(u.s.r>m&&(u.s.r=m),u.s.c>p&&(u.s.c=p),u.e.r<m&&(u.e.r=m),u.e.c<p&&(u.e.c=p),e[f][A]&&typeof e[f][A]=="object"&&!Array.isArray(e[f][A])&&!(e[f][A]instanceof Date))h=e[f][A];else if(Array.isArray(h.v)&&(h.f=e[f][A][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||fn[14],n.cellDates?(h.t="d",h.w=ud(h.z,oo(h.v))):(h.t="n",h.v=oo(h.v),h.w=ud(h.z,h.v))):h.t="s";if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(h.z=s[m][p].z),s[m][p]=h;else{var g=hn({c:p,r:m});s[g]&&s[g].z&&(h.z=s[g].z),s[g]=h}}}return u.s.c<1e7&&(s["!ref"]=_n(u)),s}function d1(t,e){return Bne(null,t,e)}function Mke(t){return t.read_shift(4,"i")}function zd(t,e){return e||(e=Jt(4)),e.write_shift(4,t),e}function Tl(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Po(t,e){var r=!1;return e==null&&(r=!0,e=Jt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function Lke(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Uke(t,e){return e||(e=Jt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function X6(t,e){var r=t.l,n=t.read_shift(1),a=Tl(t),s=[],o={t:a,h:a};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push(Lke(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=r+e,o}function Qke(t,e){var r=!1;return e==null&&(r=!0,e=Jt(15+4*t.t.length)),e.write_shift(1,0),Po(t.t,e),r?e.slice(0,e.l):e}var Vke=X6;function Hke(t,e){var r=!1;return e==null&&(r=!0,e=Jt(23+4*t.t.length)),e.write_shift(1,1),Po(t.t,e),e.write_shift(4,1),Uke({},e),r?e.slice(0,e.l):e}function Ad(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Cg(t,e){return e==null&&(e=Jt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function _g(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Eg(t,e){return e==null&&(e=Jt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var $ke=Tl,Tne=Po;function Y6(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function LS(t,e){var r=!1;return e==null&&(r=!0,e=Jt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var Gke=Tl,Vk=Y6,J6=LS;function Z6(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?MS([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):ap(e,0)>>2;return r?a/100:a}function kne(t,e){e==null&&(e=Jt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Fne(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function Kke(t,e){return e||(e=Jt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Sg=Fne,f1=Kke;function Pl(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function eg(t,e){return(e||Jt(8)).write_shift(8,t,"f")}function qke(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=Sp[a];u&&(e.rgb=j2(u));break;case 2:e.rgb=j2([o,l,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function US(t,e){if(e||(e=Jt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function zke(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function Wke(t,e){e||(e=Jt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function One(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function Xke(t){return One(t,1)}function Yke(t){return One(t,2)}var eR=2,xc=3,GC=11,t$=12,QS=19,KC=64,Jke=65,Zke=71,eFe=4108,tFe=4126,Co=80,Dne=81,rFe=[Co,Dne],Hk={1:{n:"CodePage",t:eR},2:{n:"Category",t:Co},3:{n:"PresentationFormat",t:Co},4:{n:"ByteCount",t:xc},5:{n:"LineCount",t:xc},6:{n:"ParagraphCount",t:xc},7:{n:"SlideCount",t:xc},8:{n:"NoteCount",t:xc},9:{n:"HiddenCount",t:xc},10:{n:"MultimediaClipCount",t:xc},11:{n:"ScaleCrop",t:GC},12:{n:"HeadingPairs",t:eFe},13:{n:"TitlesOfParts",t:tFe},14:{n:"Manager",t:Co},15:{n:"Company",t:Co},16:{n:"LinksUpToDate",t:GC},17:{n:"CharacterCount",t:xc},19:{n:"SharedDoc",t:GC},22:{n:"HyperlinksChanged",t:GC},23:{n:"AppVersion",t:xc,p:"version"},24:{n:"DigSig",t:Jke},26:{n:"ContentType",t:Co},27:{n:"ContentStatus",t:Co},28:{n:"Language",t:Co},29:{n:"Version",t:Co},255:{},2147483648:{n:"Locale",t:QS},2147483651:{n:"Behavior",t:QS},1919054434:{}},$k={1:{n:"CodePage",t:eR},2:{n:"Title",t:Co},3:{n:"Subject",t:Co},4:{n:"Author",t:Co},5:{n:"Keywords",t:Co},6:{n:"Comments",t:Co},7:{n:"Template",t:Co},8:{n:"LastAuthor",t:Co},9:{n:"RevNumber",t:Co},10:{n:"EditTime",t:KC},11:{n:"LastPrinted",t:KC},12:{n:"CreatedDate",t:KC},13:{n:"ModifiedDate",t:KC},14:{n:"PageCount",t:xc},15:{n:"WordCount",t:xc},16:{n:"CharCount",t:xc},17:{n:"Thumbnail",t:Zke},18:{n:"Application",t:Co},19:{n:"DocSecurity",t:xc},255:{},2147483648:{n:"Locale",t:QS},2147483651:{n:"Behavior",t:QS},1919054434:{}},r$={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},nFe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function aFe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var sFe=aFe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Sp=hs(sFe),yA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Rne={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Gk={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},qC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function tR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function iFe(t){var e=tR();if(!t||!t.match)return e;var r={};if((t.match(Rl)||[]).forEach(function(n){var a=An(n);switch(a[0].replace(pke,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[Gk[a.ContentType]]!==void 0&&e[Gk[a.ContentType]].push(a.PartName);break}}),e.xmlns!==no.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function Mne(t,e){var r=ike(Gk),n=[],a;n[n.length]=Si,n[n.length]=_r("Types",null,{xmlns:no.CT,"xmlns:xsd":no.xsd,"xmlns:xsi":no.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return _r("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=_r("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:qC[c][e.bookType]||qC[c].xlsx}))},o=function(c){(t[c]||[]).forEach(function(u){n[n.length]=_r("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:qC[c][e.bookType]||qC[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=_r("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Mn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function I2(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Eb(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Rl)||[]).forEach(function(a){var s=An(a);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:Gy(s.Target,e);r[l]=o,n[s.Id]=o}}),r["!id"]=n,r}function iv(t){var e=[Si,_r("Relationships",null,{xmlns:no.RELS})];return oi(t["!id"]).forEach(function(r){e[e.length]=_r("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Sa(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Mn.HLINK,Mn.XPATH,Mn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var oFe="application/vnd.oasis.opendocument.spreadsheet";function lFe(t,e){for(var r=G6(t),n,a;n=S2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=An(n[0],!1),a.path=="/"&&a.type!==oFe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function cFe(t){var e=[Si];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function n$(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function uFe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function dFe(t){var e=[Si];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(n$(t[r][0],t[r][1])),e.push(uFe("",t[r][0]));return e.push(n$("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Lne(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+kS.version+"</meta:generator></office:meta></office:document-meta>"}var id=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],fFe=function(){for(var t=new Array(id.length),e=0;e<id.length;++e){var r=id[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function Une(t){var e={};t=Ma(t);for(var r=0;r<id.length;++r){var n=id[r],a=t.match(fFe[r]);a!=null&&a.length>0&&(e[n[1]]=ta(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=fs(e[n[1]]))}return e}function C5(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=Ba(e),n[n.length]=r?_r(t,e,r):rl(t,e))}function Qne(t,e){var r=e||{},n=[Si,_r("cp:coreProperties",null,{"xmlns:cp":no.CORE_PROPS,"xmlns:dc":no.dc,"xmlns:dcterms":no.dcterms,"xmlns:dcmitype":no.dcmitype,"xmlns:xsi":no.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&C5("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Qk(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&C5("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Qk(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=id.length;++s){var o=id[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:t?t[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&C5(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Ip=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Vne=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Hne(t,e,r,n){var a=[];if(typeof t=="string")a=qH(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var o=typeof e=="string"?qH(e,n).map(function(d){return d.v}):e,l=0,c=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function hFe(t,e,r){var n={};return e||(e={}),t=Ma(t),Ip.forEach(function(a){var s=(t.match(_2(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=ta(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var o=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Hne(n.HeadingPairs,n.TitlesOfParts,e,r),e}function $ne(t){var e=[],r=_r;return t||(t={}),t.Application="SheetJS",e[e.length]=Si,e[e.length]=_r("Properties",null,{xmlns:no.EXT_PROPS,"xmlns:vt":no.vt}),Ip.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Ba(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Ba(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var AFe=/<[^>]+>[^<]*/g;function mFe(t,e){var r={},n="",a=t.match(AFe);if(a)for(var s=0;s!=a.length;++s){var o=a[s],l=An(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=ta(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=ta(d);break;case"bool":r[n]=ls(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=fs(d);break;case"cy":case"error":r[n]=ta(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(e.WTF)throw new Error(o)}}}return r}function Gne(t){var e=[Si,_r("Properties",null,{xmlns:no.CUST_PROPS,"xmlns:vt":no.vt})];if(!t)return e.join("");var r=1;return oi(t).forEach(function(a){++r,e[e.length]=_r("property",Cke(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Ba(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Kk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},_5;function pFe(t,e,r){_5||(_5=Yj(Kk)),e=_5[e]||e,t[e]=r}function gFe(t,e){var r=[];return oi(Kk).map(function(n){for(var a=0;a<id.length;++a)if(id[a][1]==n)return id[a];for(a=0;a<Ip.length;++a)if(Ip[a][1]==n)return Ip[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(rl(Kk[n[1]]||n[1],a))}}),_r("DocumentProperties",r.join(""),{xmlns:eu.o})}function xFe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&oi(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<id.length;++o)if(s==id[o][1])return;for(o=0;o<Ip.length;++o)if(s==Ip[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(_r(HH(s),l,{"dt:dt":c}))}}),e&&oi(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(_r(HH(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+eu.o+'">'+a.join("")+"</"+n+">"}function rR(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function vFe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=Jt(8);return o.write_shift(4,n),o.write_shift(4,a),o}function Kne(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function qne(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function zne(t,e,r){return e===31?qne(t):Kne(t,e,r)}function qk(t,e,r){return zne(t,e,r===!1?0:4)}function yFe(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return zne(t,e,0)}function bFe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(sc,""),t.l-a&2&&(t.l+=2)}return r}function wFe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(sc,"");return r}function NFe(t){var e=t.l,r=VS(t,Dne);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=VS(t,xc);return[r,n]}function CFe(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(NFe(t));return r}function a$(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),o=t.read_shift(4);n[s]=t.read_shift(o,e===1200?"utf16le":"utf8").replace(sc,"").replace($y,"!"),e===1200&&o%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function Wne(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function _Fe(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function VS(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==t$&&n!==e&&rFe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===t$?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return Kne(t,n,4).replace(sc,"");case 31:return qne(t);case 64:return rR(t);case 65:return Wne(t);case 71:return _Fe(t);case 80:return qk(t,n,!s.raw).replace(sc,"");case 81:return yFe(t,n).replace(sc,"");case 4108:return CFe(t);case 4126:case 4127:return n==4127?bFe(t):wFe(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function s$(t,e){var r=Jt(4),n=Jt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Jt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=vFe(e);break;case 31:case 80:for(n=Jt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Io([r,n])}function i$(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=a;++o){var d=t.read_shift(4),f=t.read_shift(4);s[o]=[d,f+r]}s.sort(function(y,b){return y[1]-b[1]});var A={};for(o=0;o!=a;++o){if(t.l!==s[o][1]){var h=!0;if(o>0&&e)switch(e[s[o-1][0]].t){case 2:t.l+2===s[o][1]&&(t.l+=2,h=!1);break;case 80:t.l<=s[o][1]&&(t.l=s[o][1],h=!1);break;case 4108:t.l<=s[o][1]&&(t.l=s[o][1],h=!1);break}if((!e||o==0)&&t.l<=s[o][1]&&(h=!1,t.l=s[o][1]),h)throw new Error("Read Error: Expected address "+s[o][1]+" at "+t.l+" :"+o)}if(e){var m=e[s[o][0]];if(A[m.n]=VS(t,m.t,{raw:!0}),m.p==="version"&&(A[m.n]=String(A[m.n]>>16)+"."+("0000"+String(A[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(A[m.n]){case 0:A[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Qd(l=A[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+A[m.n])}}else if(s[o][0]===1){if(l=A.CodePage=VS(t,eR),Qd(l),c!==-1){var p=t.l;t.l=s[c][1],u=a$(t,l),t.l=p}}else if(s[o][0]===0){if(l===0){c=o,t.l=s[o+1][1];continue}u=a$(t,l)}else{var g=u[s[o][0]],v;switch(t[t.l]){case 65:t.l+=4,v=Wne(t);break;case 30:t.l+=4,v=qk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,v=qk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,v=t.read_shift(4,"i");break;case 19:t.l+=4,v=t.read_shift(4);break;case 5:t.l+=4,v=t.read_shift(8,"f");break;case 11:t.l+=4,v=Ai(t,4);break;case 64:t.l+=4,v=fs(rR(t));break;default:throw new Error("unparsed value: "+t[t.l])}A[g]=v}}return t.l=r+n,A}var Xne=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function EFe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function o$(t,e,r){var n=Jt(8),a=[],s=[],o=8,l=0,c=Jt(8),u=Jt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!e){u=Jt(8),u.write_shift(4,0),a.unshift(u);var d=[Jt(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var f=t[l][0];for(c=Jt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Io(d),s.unshift(c),o+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(Xne.indexOf(t[l][0])>-1||Vne.indexOf(t[l][0])>-1)&&t[l][1]!=null){var A=t[l][1],h=0;if(e){h=+e[t[l][0]];var m=r[h];if(m.p=="version"&&typeof A=="string"){var p=A.split(".");A=(+p[0]<<16)+(+p[1]||0)}c=s$(m.t,A)}else{var g=EFe(A);g==-1&&(g=31,A=String(A)),c=s$(g,A)}s.push(c),u=Jt(8),u.write_shift(4,e?h:2+l),a.push(u),o+=8+c.length}var v=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,v),v+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),Io([n].concat(a).concat(s))}function l$(t,e,r){var n=t.content;if(!n)return{};el(n,0);var a,s,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==an.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),c=n.read_shift(4));var f=i$(n,e),A={SystemIdentifier:u};for(var h in f)A[h]=f[h];if(A.FMTID=s,a===1)return A;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=i$(n,null)}catch{}for(h in m)A[h]=m[h];return A.FMTID=[s,o],A}function c$(t,e,r,n,a,s){var o=Jt(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,an.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,a?68:48);var c=o$(t,r,n);if(l.push(c),a){var u=o$(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Io(l)}function t0(t,e){return t.read_shift(e),null}function SFe(t,e){e||(e=Jt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function IFe(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function Ai(t,e){return t.read_shift(e)===1}function Zl(t,e){return e||(e=Jt(2)),e.write_shift(2,+!!t),e}function Bi(t){return t.read_shift(2,"u")}function Ku(t,e){return e||(e=Jt(2)),e.write_shift(2,t),e}function Yne(t,e){return IFe(t,e,Bi)}function jFe(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function Jne(t,e,r){return r||(r=Jt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Tw(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?t.read_shift(n,a):"";return o}function PFe(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),o=0,l,c={};a&&(o=t.read_shift(2)),n&&(l=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*o),n&&(t.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function BFe(t){var e=t.t||"",r=Jt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Jt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return Io(a)}function tg(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function kw(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):tg(t,n,r)}function Ig(t,e,r){if(r.biff>5)return kw(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function Zne(t,e,r){return r||(r=Jt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function TFe(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function kFe(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(sc,"");return n&&(t.l+=24),a}function FFe(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=t.read_shift(s>>1,"utf16le").replace(sc,"");return r+o}function OFe(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return kFe(t);case"0303000000000000c000000000000046":return FFe(t);default:throw new Error("Unsupported Moniker "+r)}}function zC(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(sc,""):"";return r}function u$(t,e){e||(e=Jt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function DFe(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,o,l,c,u="",d,f;a&16&&(s=zC(t,r-t.l)),a&128&&(o=zC(t,r-t.l)),(a&257)===257&&(l=zC(t,r-t.l)),(a&257)===1&&(c=OFe(t,r-t.l)),a&8&&(u=zC(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(f=rR(t)),t.l=r;var A=o||l||c||"";A&&u&&(A+="#"+u),A||(A="#"+u),a&2&&A.charAt(0)=="/"&&A.charAt(1)!="/"&&(A="file://"+A);var h={Target:A};return d&&(h.guid=d),f&&(h.time=f),s&&(h.Tooltip=s),h}function RFe(t){var e=Jt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)e.write_shift(4,o[r]);if(s==28)n=n.slice(1),u$(n,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&u$(a>-1?n.slice(a+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function eae(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function tae(t,e){var r=eae(t);return r[3]=0,r}function Jf(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function rg(t,e,r,n){return n||(n=Jt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function MFe(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function LFe(t,e,r){return e===0?"":Ig(t,e,r)}function UFe(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),o=t.read_shift(n,"i");return[a,s,o]}function rae(t){var e=t.read_shift(2),r=Z6(t);return[e,r]}function QFe(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=Tw(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function e4(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function nae(t,e){return e||(e=Jt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function aae(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var VFe=aae;function sae(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function HFe(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function $Fe(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function vl(t){t.l+=2,t.l+=t.read_shift(2)}var GFe={0:vl,4:vl,5:vl,6:vl,7:$Fe,8:vl,9:vl,10:vl,11:vl,12:vl,13:HFe,14:vl,15:vl,16:vl,17:vl,18:vl,19:vl,20:vl,21:sae};function KFe(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(GFe[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function WC(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function nR(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Jt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function qFe(t,e){return e===0||t.read_shift(2),1200}function zFe(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=Ig(t,0,r);return t.read_shift(e+n-t.l),a}function WFe(t,e){var r=!e||e.biff==8,n=Jt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function XFe(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function YFe(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=Tw(t,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:s,name:o}}function JFe(t,e){var r=!e||e.biff>=8?2:1,n=Jt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function ZFe(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],o=0;o!=a&&t.l<r;++o)s.push(PFe(t));return s.Count=n,s.Unique=a,s}function eOe(t,e){var r=Jt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=BFe(t[a]);var s=Io([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function tOe(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function rOe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function nOe(t){var e=MFe(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function aOe(t){return t.read_shift(2),t.read_shift(4)}function d$(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function sOe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function iOe(){var t=Jt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function oOe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function lOe(t){var e=Jt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function cOe(){}function uOe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Tw(t,0,r),n}function dOe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=Jt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function fOe(t){var e=Jf(t);return e.isst=t.read_shift(4),e}function hOe(t,e,r,n){var a=Jt(10);return rg(t,e,n,a),a.write_shift(4,r),a}function AOe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=Jf(t);r.biff==2&&t.l++;var s=kw(t,n-t.l,r);return a.val=s,a}function mOe(t,e,r,n,a){var s=!a||a.biff==8,o=Jt(8+ +s+(1+s)*r.length);return rg(t,e,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function pOe(t,e,r){var n=t.read_shift(2),a=Ig(t,0,r);return[n,a]}function gOe(t,e,r,n){var a=r&&r.biff==5;n||(n=Jt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var xOe=Ig;function f$(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),o=t.read_shift(a),l=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:l},e:{r:o,c}}}function vOe(t,e){var r=e.biff==8||!e.biff?4:2,n=Jt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function yOe(t){var e=t.read_shift(2),r=t.read_shift(2),n=rae(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function bOe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(rae(t));if(t.l!==r)throw new Error("MulRK read error");var o=t.read_shift(2);if(s.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:s}}function wOe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var o=t.read_shift(2);if(s.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:s}}function NOe(t,e,r,n){var a={},s=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(4),c=t.read_shift(2);return a.patternType=nFe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function COe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=NOe(t,e,n.fStyle,r),n}function h$(t,e,r,n){var a=r&&r.biff==5;n||(n=Jt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function _Oe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function EOe(t){var e=Jt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function A$(t,e,r){var n=Jf(t);(r.biff==2||e==9)&&++t.l;var a=jFe(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function SOe(t,e,r,n,a,s){var o=Jt(8);return rg(t,e,n,o),Jne(r,s,o),o}function IOe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Jf(t),a=Pl(t);return n.val=a,n}function jOe(t,e,r,n){var a=Jt(14);return rg(t,e,n,a),eg(r,a),a}var m$=LFe;function POe(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=tg(t,s),l=[];n>t.l;)l.push(kw(t));return[s,a,o,l]}function p$(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=QFe(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var BOe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function g$(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=tg(t,o,r);a&32&&(u=BOe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var f=n==t.l||l===0||!(d>0)?[]:K8e(t,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function iae(t,e,r){if(r.biff<8)return TOe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(UFe(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function TOe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Tw(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function kOe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=tg(t,n,r),o=tg(t,a,r);return[s,o]}function FOe(t,e,r){var n=aae(t);t.l++;var a=t.read_shift(1);return e-=8,[q8e(t,e,r),a,n]}function x$(t,e,r){var n=VFe(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,$8e(t,e,r)]}function OOe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function DOe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),l=Ig(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},l,o,s]}}function ROe(t,e,r){return DOe(t,e,r)}function MOe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(e4(t));return r}function LOe(t){var e=Jt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)nae(t[r],e);return e}function UOe(t,e,r){if(r&&r.biff<8)return VOe(t,e,r);var n=sae(t),a=KFe(t,e-22,n[1]);return{cmo:n,ft:a}}var QOe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function VOe(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var o=[];return o.push((QOe[n]||Ol)(t,e,r)),{cmo:[a,n,s],ft:o}}function HOe(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:o=TFe(t,6,r);var l=t.read_shift(2);t.read_shift(2),Bi(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],f=tg(t,t.lens[u+1]-t.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function $Oe(t,e){var r=e4(t);t.l+=16;var n=DFe(t,e-24);return[r,n]}function GOe(t){var e=Jt(24),r=Us(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return Io([e,RFe(t[1])])}function KOe(t,e){t.read_shift(2);var r=e4(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(sc,""),[r,n]}function qOe(t){var e=t[1].Tooltip,r=Jt(10+2*(e.length+1));r.write_shift(2,2048);var n=Us(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function zOe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=r$[r]||r,r=t.read_shift(2),e[1]=r$[r]||r,e}function WOe(t){return t||(t=Jt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function XOe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(tae(t));return r}function YOe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(tae(t));return r}function JOe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function oae(t,e,r){if(!r.cellStyles)return Ol(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function ZOe(t,e){var r=Jt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function eDe(t,e){var r={};return e<32||(t.l+=16,r.header=Pl(t),r.footer=Pl(t),t.l+=2),r}function tDe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function rDe(t){for(var e=Jt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var nDe=Jf,aDe=Yne,sDe=kw;function iDe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function oDe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Jf(t);++t.l;var a=Ig(t,e-7,r);return n.t="str",n.val=a,n}function lDe(t){var e=Jf(t);++t.l;var r=Pl(t);return e.t="n",e.val=r,e}function cDe(t,e,r){var n=Jt(15);return Rw(n,t,e),n.write_shift(8,r,"f"),n}function uDe(t){var e=Jf(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function dDe(t,e,r){var n=Jt(9);return Rw(n,t,e),n.write_shift(2,r),n}function fDe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function hDe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function ADe(t,e,r){var n=t.l+e,a=Jf(t),s=t.read_shift(2),o=tg(t,s,r);return t.l=n,a.t="str",a.val=o,a}var mDe=[2,3,48,49,131,139,140,245],zk=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Yj({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=lm(1);switch(c.type){case"base64":d=ru(mu(l));break;case"binary":d=ru(l);break;case"buffer":case"array":d=l;break}el(d,0);var f=d.read_shift(1),A=!!(f&136),h=!1,m=!1;switch(f){case 2:break;case 3:break;case 48:h=!0,A=!0;break;case 49:h=!0,A=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,g=521;f==2&&(p=d.read_shift(2)),d.l+=3,f!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(g=d.read_shift(2));var v=d.read_shift(2),y=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=t[d[d.l]]),d.l+=1,d.l+=2),m&&(d.l+=36);for(var b=[],w={},j=Math.min(d.length,f==2?521:g-10-(h?264:0)),I=m?32:11;d.l<j&&d[d.l]!=13;)switch(w={},w.name=w2.utils.decode(y,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,w.type=String.fromCharCode(d.read_shift(1)),f!=2&&!m&&(w.offset=d.read_shift(4)),w.len=d.read_shift(1),f==2&&(w.offset=d.read_shift(2)),w.dec=d.read_shift(1),w.name.length&&b.push(w),f!=2&&(d.l+=m?13:14),w.type){case"B":(!h||w.len!=8)&&c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var _=0,S=0;for(u[0]=[],S=0;S!=b.length;++S)u[0][S]=b[S].name;for(;p-- >0;){if(d[d.l]===42){d.l+=v;continue}for(++d.l,u[++_]=[],S=0,S=0;S!=b.length;++S){var E=d.slice(d.l,d.l+b[S].len);d.l+=b[S].len,el(E,0);var F=w2.utils.decode(y,E);switch(b[S].type){case"C":F.trim().length&&(u[_][S]=F.replace(/\s+$/,""));break;case"D":F.length===8?u[_][S]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):u[_][S]=F;break;case"F":u[_][S]=parseFloat(F.trim());break;case"+":case"I":u[_][S]=m?E.read_shift(-4,"i")^2147483648:E.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":u[_][S]=!0;break;case"N":case"F":u[_][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!A)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[_][S]="##MEMO##"+(m?parseInt(F.trim(),10):E.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(u[_][S]=+F||0);break;case"@":u[_][S]=new Date(E.read_shift(-8,"f")-621356832e5);break;case"T":u[_][S]=new Date((E.read_shift(4)-2440588)*864e5+E.read_shift(4));break;case"Y":u[_][S]=E.read_shift(4,"i")/1e4+E.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][S]=-E.read_shift(-8,"f");break;case"B":if(h&&b[S].len==8){u[_][S]=E.read_shift(8,"f");break}case"G":case"P":E.l+=b[S].len;break;case"0":if(b[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[S].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=d1(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return wm(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Qd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=jc(),f=GS(l,{header:1,raw:!0,cellDates:!0}),A=f[0],h=f.slice(1),m=l["!cols"]||[],p=0,g=0,v=0,y=1;for(p=0;p<A.length;++p){if(((m[p]||{}).DBF||{}).name){A[p]=m[p].DBF.name,++v;continue}if(A[p]!=null){if(++v,typeof A[p]=="number"&&(A[p]=A[p].toString(10)),typeof A[p]!="string")throw new Error("DBF Invalid column name "+A[p]+" |"+typeof A[p]+"|");if(A.indexOf(A[p])!==p){for(g=0;g<1024;++g)if(A.indexOf(A[p]+"_"+g)==-1){A[p]+="_"+g;break}}}}var b=ra(l["!ref"]),w=[],j=[],I=[];for(p=0;p<=b.e.c-b.s.c;++p){var _="",S="",E=0,F=[];for(g=0;g<h.length;++g)h[g][p]!=null&&F.push(h[g][p]);if(F.length==0||A[p]==null){w[p]="?";continue}for(g=0;g<F.length;++g){switch(typeof F[g]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=F[g]instanceof Date?"D":"C";break;default:S="C"}E=Math.max(E,String(F[g]).length),_=_&&_!=S?"C":S}E>250&&(E=250),S=((m[p]||{}).DBF||{}).type,S=="C"&&m[p].DBF.len>E&&(E=m[p].DBF.len),_=="B"&&S=="N"&&(_="N",I[p]=m[p].DBF.dec,E=m[p].DBF.len),j[p]=_=="C"||S=="N"?E:s[_]||0,y+=j[p],w[p]=_}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,h.length),P.write_shift(2,296+32*v),P.write_shift(2,y),p=0;p<4;++p)P.write_shift(4,0);for(P.write_shift(4,0|(+e[Xre]||3)<<8),p=0,g=0;p<A.length;++p)if(A[p]!=null){var k=d.next(32),D=(A[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,D,"sbcs"),k.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),k.write_shift(4,g),k.write_shift(1,j[p]||s[w[p]]||0),k.write_shift(1,I[p]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),g+=j[p]||s[w[p]]||0}var J=d.next(264);for(J.write_shift(4,13),p=0;p<65;++p)J.write_shift(4,0);for(p=0;p<h.length;++p){var fe=d.next(y);for(fe.write_shift(1,0),g=0;g<A.length;++g)if(A[g]!=null)switch(w[g]){case"L":fe.write_shift(1,h[p][g]==null?63:h[p][g]?84:70);break;case"B":fe.write_shift(8,h[p][g]||0,"f");break;case"N":var Ae="0";for(typeof h[p][g]=="number"&&(Ae=h[p][g].toFixed(I[g]||0)),v=0;v<j[g]-Ae.length;++v)fe.write_shift(1,32);fe.write_shift(1,Ae,"sbcs");break;case"D":h[p][g]?(fe.write_shift(4,("0000"+h[p][g].getFullYear()).slice(-4),"sbcs"),fe.write_shift(2,("00"+(h[p][g].getMonth()+1)).slice(-2),"sbcs"),fe.write_shift(2,("00"+h[p][g].getDate()).slice(-2),"sbcs")):fe.write_shift(8,"00000000","sbcs");break;case"C":var me=String(h[p][g]!=null?h[p][g]:"").slice(0,j[g]);for(fe.write_shift(1,me,"sbcs"),v=0;v<j[g]-me.length;++v)fe.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),lae=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+oi(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(A,h){var m=t[h];return typeof m=="number"?jH(m):m},n=function(A,h,m){var p=h.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?A:jH(p)};t["|"]=254;function a(A,h){switch(h.type){case"base64":return s(mu(A),h);case"binary":return s(A,h);case"buffer":return s(kn&&Buffer.isBuffer(A)?A.toString("binary"):bm(A),h);case"array":return s(Zp(A),h)}throw new Error("Unrecognized type "+h.type)}function s(A,h){var m=A.split(/[\n\r]+/),p=-1,g=-1,v=0,y=0,b=[],w=[],j=null,I={},_=[],S=[],E=[],F=0,P;for(+h.codepage>=0&&Qd(+h.codepage);v!==m.length;++v){F=0;var k=m[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=k.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),J=D[0],fe;if(k.length>0)switch(J){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&w.push(k.slice(3).replace(/;;/g,";"));break;case"C":var Ae=!1,me=!1,pe=!1,ne=!1,Pe=-1,Be=-1;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"A":break;case"X":g=parseInt(D[y].slice(1))-1,me=!0;break;case"Y":for(p=parseInt(D[y].slice(1))-1,me||(g=0),P=b.length;P<=p;++P)b[P]=[];break;case"K":fe=D[y].slice(1),fe.charAt(0)==='"'?fe=fe.slice(1,fe.length-1):fe==="TRUE"?fe=!0:fe==="FALSE"?fe=!1:isNaN(qd(fe))?isNaN(Pv(fe).getDate())||(fe=fs(fe)):(fe=qd(fe),j!==null&&c1(j)&&(fe=Zj(fe))),Ae=!0;break;case"E":ne=!0;var O=ov(D[y].slice(1),{r:p,c:g});b[p][g]=[b[p][g],O];break;case"S":pe=!0,b[p][g]=[b[p][g],"S5S"];break;case"G":break;case"R":Pe=parseInt(D[y].slice(1))-1;break;case"C":Be=parseInt(D[y].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+k)}if(Ae&&(b[p][g]&&b[p][g].length==2?b[p][g][0]=fe:b[p][g]=fe,j=null),pe){if(ne)throw new Error("SYLK shared formula cannot have own formula");var G=Pe>-1&&b[Pe][Be];if(!G||!G[1])throw new Error("SYLK shared formula cannot find base");b[p][g][1]=Eae(G[1],{r:p-Pe,c:g-Be})}break;case"F":var q=0;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"X":g=parseInt(D[y].slice(1))-1,++q;break;case"Y":for(p=parseInt(D[y].slice(1))-1,P=b.length;P<=p;++P)b[P]=[];break;case"M":F=parseInt(D[y].slice(1))/20;break;case"F":break;case"G":break;case"P":j=w[parseInt(D[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(E=D[y].slice(1).split(" "),P=parseInt(E[0],10);P<=parseInt(E[1],10);++P)F=parseInt(E[2],10),S[P-1]=F===0?{hidden:!0}:{wch:F},cm(S[P-1]);break;case"C":g=parseInt(D[y].slice(1))-1,S[g]||(S[g]={});break;case"R":p=parseInt(D[y].slice(1))-1,_[p]||(_[p]={}),F>0?(_[p].hpt=F,_[p].hpx=Tv(F)):F===0&&(_[p].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+k)}q<1&&(j=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+k)}}return _.length>0&&(I["!rows"]=_),S.length>0&&(I["!cols"]=S),h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),[b,I]}function o(A,h){var m=a(A,h),p=m[0],g=m[1],v=d1(p,h);return oi(g).forEach(function(y){v[y]=g[y]}),v}function l(A,h){return wm(o(A,h),h)}function c(A,h,m,p){var g="C;Y"+(m+1)+";X"+(p+1)+";K";switch(A.t){case"n":g+=A.v||0,A.f&&!A.F&&(g+=";E"+cR(A.f,{r:m,c:p}));break;case"b":g+=A.v?"TRUE":"FALSE";break;case"e":g+=A.w||A.v;break;case"d":g+='"'+(A.w||A.v)+'"';break;case"s":g+='"'+A.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(A,h){h.forEach(function(m,p){var g="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?g+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=P2(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=B2(m.wpx)),typeof m.wch=="number"&&(g+=Math.round(m.wch))),g.charAt(g.length-1)!=" "&&A.push(g)})}function d(A,h){h.forEach(function(m,p){var g="F;";m.hidden?g+="M0;":m.hpt?g+="M"+20*m.hpt+";":m.hpx&&(g+="M"+20*T2(m.hpx)+";"),g.length>2&&A.push(g+"R"+(p+1))})}function f(A,h){var m=["ID;PWXL;N;E"],p=[],g=ra(A["!ref"]),v,y=Array.isArray(A),b=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),A["!cols"]&&u(m,A["!cols"]),A["!rows"]&&d(m,A["!rows"]),m.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var w=g.s.r;w<=g.e.r;++w)for(var j=g.s.c;j<=g.e.c;++j){var I=hn({r:w,c:j});v=y?(A[w]||[])[j]:A[I],!(!v||v.v==null&&(!v.f||v.F))&&p.push(c(v,A,w,j))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),cae=function(){function t(s,o){switch(o.type){case"base64":return e(mu(s),o);case"binary":return e(s,o);case"buffer":return e(kn&&Buffer.isBuffer(s)?s.toString("binary"):bm(s),o);case"array":return e(Zp(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var A=l[d].trim().split(","),h=A[0],m=A[1];++d;for(var p=l[d]||"";(p.match(/["]/g)||[]).length&1&&d<l.length-1;)p+=`
`+l[++d];switch(p=p.trim(),+h){case-1:if(p==="BOT"){f[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[c][u]=!0:p==="FALSE"?f[c][u]=!1:isNaN(qd(m))?isNaN(Pv(m).getDate())?f[c][u]=m:f[c][u]=fs(m):f[c][u]=qd(m),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(s,o){return d1(t(s,o),o)}function n(s,o){return wm(r(s,o),o)}var a=function(){var s=function(c,u,d,f,A){c.push(u),c.push(d+","+f),c.push('"'+A.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=ra(c["!ref"]),f,A=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var h=d.s.r;h<=d.e.r;++h){o(u,-1,0,"BOT");for(var m=d.s.c;m<=d.e.c;++m){var p=hn({r:h,c:m});if(f=A?(c[h]||[])[m]:c[p],!f){o(u,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,g,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=ud(f.z||fn[14],oo(fs(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var v=`\r
`,y=u.join(v);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),uae=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,A){for(var h=f.split(`
`),m=-1,p=-1,g=0,v=[];g!==h.length;++g){var y=h[g].trim().split(":");if(y[0]==="cell"){var b=Us(y[1]);if(v.length<=b.r)for(m=v.length;m<=b.r;++m)v[m]||(v[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":v[m][p]=t(y[3]);break;case"v":v[m][p]=+y[3];break;case"vtf":var w=y[y.length-1];case"vtc":switch(y[3]){case"nl":v[m][p]=!!+y[4];break;default:v[m][p]=+y[4];break}y[2]=="vtf"&&(v[m][p]=[v[m][p],w])}}}return A&&A.sheetRows&&(v=v.slice(0,A.sheetRows)),v}function n(f,A){return d1(r(f,A),A)}function a(f,A){return wm(n(f,A),A)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var A=[],h=[],m,p="",g=Pc(f["!ref"]),v=Array.isArray(f),y=g.s.r;y<=g.e.r;++y)for(var b=g.s.c;b<=g.e.c;++b)if(p=hn({r:y,c:b}),m=v?(f[y]||[])[b]:f[p],!(!m||m.v==null||m.t==="z")){switch(h=["cell",p,"t"],m.t){case"s":case"str":h.push(e(m.v));break;case"n":m.f?(h[2]="vtf",h[3]="n",h[4]=m.v,h[5]=e(m.f)):(h[2]="v",h[3]=m.v);break;case"b":h[2]="vt"+(m.f?"f":"c"),h[3]="nl",h[4]=m.v?"1":"0",h[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var w=oo(fs(m.v));h[2]="vtc",h[3]="nd",h[4]=""+w,h[5]=m.w||ud(m.z||fn[14],w);break;case"e":continue}A.push(h.join(":"))}return A.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),A.push("valueformat:1:text-wiki"),A.join(`
`)}function d(f){return[s,o,l,o,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Bv=function(){function t(d,f,A,h,m){m.raw?f[A][h]=d:d===""||(d==="TRUE"?f[A][h]=!0:d==="FALSE"?f[A][h]=!1:isNaN(qd(d))?isNaN(Pv(d).getDate())?f[A][h]=d:f[A][h]=fs(d):f[A][h]=qd(d))}function e(d,f){var A=f||{},h=[];if(!d||d.length===0)return h;for(var m=d.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var g=10,v=0,y=0;y<=p;++y)v=m[y].indexOf(" "),v==-1?v=m[y].length:v++,g=Math.max(g,v);for(y=0;y<=p;++y){h[y]=[];var b=0;for(t(m[y].slice(0,g).trim(),h,y,b,A),b=1;b<=(m[y].length-g)/10+1;++b)t(m[y].slice(g+(b-1)*10,g+b*10).trim(),h,y,b,A)}return A.sheetRows&&(h=h.slice(0,A.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},A=!1,h=0,m=0;h<d.length;++h)(m=d.charCodeAt(h))==34?A=!A:!A&&m in r&&(f[m]=(f[m]||0)+1);m=[];for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h]);if(!m.length){f=n;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h])}return m.sort(function(p,g){return p[0]-g[0]||n[p[1]]-n[g[1]]}),r[m.pop()[1]]||44}function s(d,f){var A=f||{},h="",m=A.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(h=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(h=d.charAt(4),d=d.slice(6)):h=a(d.slice(0,1024)):A&&A.FS?h=A.FS:h=a(d.slice(0,1024));var g=0,v=0,y=0,b=0,w=0,j=h.charCodeAt(0),I=!1,_=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var E=A.dateNF!=null?tke(A.dateNF):null;function F(){var P=d.slice(b,w),k={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)k.t="z";else if(A.raw)k.t="s",k.v=P;else if(P.trim().length===0)k.t="s",k.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(k.t="s",k.v=P.slice(2,-1).replace(/""/g,'"')):PRe(P)?(k.t="n",k.f=P.slice(1)):(k.t="s",k.v=P);else if(P=="TRUE")k.t="b",k.v=!0;else if(P=="FALSE")k.t="b",k.v=!1;else if(!isNaN(y=qd(P)))k.t="n",A.cellText!==!1&&(k.w=P),k.v=y;else if(!isNaN(Pv(P).getDate())||E&&P.match(E)){k.z=A.dateNF||fn[14];var D=0;E&&P.match(E)&&(P=rke(P,A.dateNF,P.match(E)||[]),D=1),A.cellDates?(k.t="d",k.v=fs(P,D)):(k.t="n",k.v=oo(fs(P,D))),A.cellText!==!1&&(k.w=ud(k.z,k.v instanceof Date?oo(k.v):k.v)),A.cellNF||delete k.z}else k.t="s",k.v=P;if(k.t=="z"||(A.dense?(m[g]||(m[g]=[]),m[g][v]=k):m[hn({c:v,r:g})]=k),b=w+1,S=d.charCodeAt(b),p.e.c<v&&(p.e.c=v),p.e.r<g&&(p.e.r=g),_==j)++v;else if(v=0,++g,A.sheetRows&&A.sheetRows<=g)return!0}e:for(;w<d.length;++w)switch(_=d.charCodeAt(w)){case 34:S===34&&(I=!I);break;case j:case 10:case 13:if(!I&&F())break e;break}return w-b>0&&F(),m["!ref"]=_n(p),m}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):d1(e(d,f),f)}function l(d,f){var A="",h=f.type=="string"?[0,0,0,0]:gR(d,f);switch(f.type){case"base64":A=mu(d);break;case"binary":A=d;break;case"buffer":f.codepage==65001?A=d.toString("utf8"):f.codepage&&typeof w2<"u"||(A=kn&&Buffer.isBuffer(d)?d.toString("binary"):bm(d));break;case"array":A=Zp(d);break;case"string":A=d;break;default:throw new Error("Unrecognized type "+f.type)}return h[0]==239&&h[1]==187&&h[2]==191?A=Ma(A.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?A=Ma(A):f.type=="binary"&&typeof w2<"u",A.slice(0,19)=="socialcalc:version:"?uae.to_sheet(f.type=="string"?A:Ma(A),f):o(A,f)}function c(d,f){return wm(l(d,f),f)}function u(d){for(var f=[],A=ra(d["!ref"]),h,m=Array.isArray(d),p=A.s.r;p<=A.e.r;++p){for(var g=[],v=A.s.c;v<=A.e.c;++v){var y=hn({r:p,c:v});if(h=m?(d[p]||[])[v]:d[y],!h||h.v==null){g.push("          ");continue}for(var b=(h.w||(nA(h),h.w)||"").slice(0,10);b.length<10;)b+=" ";g.push(b+(v===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function pDe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=lae.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Bv.to_workbook(t,e)}}var jp=function(){function t(O,G,q){if(O){el(O,O.l||0);for(var U=q.Enum||Pe;O.l<O.length;){var Y=O.read_shift(2),Z=U[Y]||U[65535],R=O.read_shift(2),H=O.l+R,te=Z.f&&Z.f(O,R,q);if(O.l=H,G(te,Z,Y))return}}}function e(O,G){switch(G.type){case"base64":return r(ru(mu(O)),G);case"binary":return r(ru(O),G);case"buffer":case"array":return r(O,G)}throw"Unsupported type "+G.type}function r(O,G){if(!O)return O;var q=G||{},U=q.dense?[]:{},Y="Sheet1",Z="",R=0,H={},te=[],ye=[],Q={s:{r:0,c:0},e:{r:0,c:0}},Ge=q.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)q.Enum=Pe,t(O,function(ue,se,Ee){switch(Ee){case 0:q.vers=ue,ue>=4096&&(q.qpro=!0);break;case 6:Q=ue;break;case 204:ue&&(Z=ue);break;case 222:Z=ue;break;case 15:case 51:q.qpro||(ue[1].v=ue[1].v.slice(1));case 13:case 14:case 16:Ee==14&&(ue[2]&112)==112&&(ue[2]&15)>1&&(ue[2]&15)<15&&(ue[1].z=q.dateNF||fn[14],q.cellDates&&(ue[1].t="d",ue[1].v=Zj(ue[1].v))),q.qpro&&ue[3]>R&&(U["!ref"]=_n(Q),H[Y]=U,te.push(Y),U=q.dense?[]:{},Q={s:{r:0,c:0},e:{r:0,c:0}},R=ue[3],Y=Z||"Sheet"+(R+1),Z="");var je=q.dense?(U[ue[0].r]||[])[ue[0].c]:U[hn(ue[0])];if(je){je.t=ue[1].t,je.v=ue[1].v,ue[1].z!=null&&(je.z=ue[1].z),ue[1].f!=null&&(je.f=ue[1].f);break}q.dense?(U[ue[0].r]||(U[ue[0].r]=[]),U[ue[0].r][ue[0].c]=ue[1]):U[hn(ue[0])]=ue[1];break}},q);else if(O[2]==26||O[2]==14)q.Enum=Be,O[2]==14&&(q.qpro=!0,O.l=0),t(O,function(ue,se,Ee){switch(Ee){case 204:Y=ue;break;case 22:ue[1].v=ue[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ue[3]>R&&(U["!ref"]=_n(Q),H[Y]=U,te.push(Y),U=q.dense?[]:{},Q={s:{r:0,c:0},e:{r:0,c:0}},R=ue[3],Y="Sheet"+(R+1)),Ge>0&&ue[0].r>=Ge)break;q.dense?(U[ue[0].r]||(U[ue[0].r]=[]),U[ue[0].r][ue[0].c]=ue[1]):U[hn(ue[0])]=ue[1],Q.e.c<ue[0].c&&(Q.e.c=ue[0].c),Q.e.r<ue[0].r&&(Q.e.r=ue[0].r);break;case 27:ue[14e3]&&(ye[ue[14e3][0]]=ue[14e3][1]);break;case 1537:ye[ue[0]]=ue[1],ue[0]==R&&(Y=ue[1]);break}},q);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(U["!ref"]=_n(Q),H[Z||Y]=U,te.push(Z||Y),!ye.length)return{SheetNames:te,Sheets:H};for(var ie={},ee=[],Ie=0;Ie<ye.length;++Ie)H[te[Ie]]?(ee.push(ye[Ie]||te[Ie]),ie[ye[Ie]]=H[ye[Ie]]||H[te[Ie]]):(ee.push(ye[Ie]),ie[ye[Ie]]={"!ref":"A1"});return{SheetNames:ee,Sheets:ie}}function n(O,G){var q=G||{};if(+q.codepage>=0&&Qd(+q.codepage),q.type=="string")throw new Error("Cannot write WK1 to JS string");var U=jc(),Y=ra(O["!ref"]),Z=Array.isArray(O),R=[];Er(U,0,s(1030)),Er(U,6,c(Y));for(var H=Math.min(Y.e.r,8191),te=Y.s.r;te<=H;++te)for(var ye=_i(te),Q=Y.s.c;Q<=Y.e.c;++Q){te===Y.s.r&&(R[Q]=Ls(Q));var Ge=R[Q]+ye,ie=Z?(O[te]||[])[Q]:O[Ge];if(!(!ie||ie.t=="z"))if(ie.t=="n")(ie.v|0)==ie.v&&ie.v>=-32768&&ie.v<=32767?Er(U,13,h(te,Q,ie.v)):Er(U,14,p(te,Q,ie.v));else{var ee=nA(ie);Er(U,15,f(te,Q,ee.slice(0,239)))}}return Er(U,1),U.end()}function a(O,G){var q=G||{};if(+q.codepage>=0&&Qd(+q.codepage),q.type=="string")throw new Error("Cannot write WK3 to JS string");var U=jc();Er(U,0,o(O));for(var Y=0,Z=0;Y<O.SheetNames.length;++Y)(O.Sheets[O.SheetNames[Y]]||{})["!ref"]&&Er(U,27,ne(O.SheetNames[Y],Z++));var R=0;for(Y=0;Y<O.SheetNames.length;++Y){var H=O.Sheets[O.SheetNames[Y]];if(!(!H||!H["!ref"])){for(var te=ra(H["!ref"]),ye=Array.isArray(H),Q=[],Ge=Math.min(te.e.r,8191),ie=te.s.r;ie<=Ge;++ie)for(var ee=_i(ie),Ie=te.s.c;Ie<=te.e.c;++Ie){ie===te.s.r&&(Q[Ie]=Ls(Ie));var ue=Q[Ie]+ee,se=ye?(H[ie]||[])[Ie]:H[ue];if(!(!se||se.t=="z"))if(se.t=="n")Er(U,23,F(ie,Ie,R,se.v));else{var Ee=nA(se);Er(U,22,_(ie,Ie,R,Ee.slice(0,239)))}}++R}}return Er(U,1),U.end()}function s(O){var G=Jt(2);return G.write_shift(2,O),G}function o(O){var G=Jt(26);G.write_shift(2,4096),G.write_shift(2,4),G.write_shift(4,0);for(var q=0,U=0,Y=0,Z=0;Z<O.SheetNames.length;++Z){var R=O.SheetNames[Z],H=O.Sheets[R];if(!(!H||!H["!ref"])){++Y;var te=Pc(H["!ref"]);q<te.e.r&&(q=te.e.r),U<te.e.c&&(U=te.e.c)}}return q>8191&&(q=8191),G.write_shift(2,q),G.write_shift(1,Y),G.write_shift(1,U),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(1,1),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(4,0),G}function l(O,G,q){var U={s:{c:0,r:0},e:{c:0,r:0}};return G==8&&q.qpro?(U.s.c=O.read_shift(1),O.l++,U.s.r=O.read_shift(2),U.e.c=O.read_shift(1),O.l++,U.e.r=O.read_shift(2),U):(U.s.c=O.read_shift(2),U.s.r=O.read_shift(2),G==12&&q.qpro&&(O.l+=2),U.e.c=O.read_shift(2),U.e.r=O.read_shift(2),G==12&&q.qpro&&(O.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(O){var G=Jt(8);return G.write_shift(2,O.s.c),G.write_shift(2,O.s.r),G.write_shift(2,O.e.c),G.write_shift(2,O.e.r),G}function u(O,G,q){var U=[{c:0,r:0},{t:"n",v:0},0,0];return q.qpro&&q.vers!=20768?(U[0].c=O.read_shift(1),U[3]=O.read_shift(1),U[0].r=O.read_shift(2),O.l+=2):(U[2]=O.read_shift(1),U[0].c=O.read_shift(2),U[0].r=O.read_shift(2)),U}function d(O,G,q){var U=O.l+G,Y=u(O,G,q);if(Y[1].t="s",q.vers==20768){O.l++;var Z=O.read_shift(1);return Y[1].v=O.read_shift(Z,"utf8"),Y}return q.qpro&&O.l++,Y[1].v=O.read_shift(U-O.l,"cstr"),Y}function f(O,G,q){var U=Jt(7+q.length);U.write_shift(1,255),U.write_shift(2,G),U.write_shift(2,O),U.write_shift(1,39);for(var Y=0;Y<U.length;++Y){var Z=q.charCodeAt(Y);U.write_shift(1,Z>=128?95:Z)}return U.write_shift(1,0),U}function A(O,G,q){var U=u(O,G,q);return U[1].v=O.read_shift(2,"i"),U}function h(O,G,q){var U=Jt(7);return U.write_shift(1,255),U.write_shift(2,G),U.write_shift(2,O),U.write_shift(2,q,"i"),U}function m(O,G,q){var U=u(O,G,q);return U[1].v=O.read_shift(8,"f"),U}function p(O,G,q){var U=Jt(13);return U.write_shift(1,255),U.write_shift(2,G),U.write_shift(2,O),U.write_shift(8,q,"f"),U}function g(O,G,q){var U=O.l+G,Y=u(O,G,q);if(Y[1].v=O.read_shift(8,"f"),q.qpro)O.l=U;else{var Z=O.read_shift(2);w(O.slice(O.l,O.l+Z),Y),O.l+=Z}return Y}function v(O,G,q){var U=G&32768;return G&=-32769,G=(U?O:0)+(G>=8192?G-16384:G),(U?"":"$")+(q?Ls(G):_i(G))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(O,G){el(O,0);for(var q=[],U=0,Y="",Z="",R="",H="";O.l<O.length;){var te=O[O.l++];switch(te){case 0:q.push(O.read_shift(8,"f"));break;case 1:Z=v(G[0].c,O.read_shift(2),!0),Y=v(G[0].r,O.read_shift(2),!1),q.push(Z+Y);break;case 2:{var ye=v(G[0].c,O.read_shift(2),!0),Q=v(G[0].r,O.read_shift(2),!1);Z=v(G[0].c,O.read_shift(2),!0),Y=v(G[0].r,O.read_shift(2),!1),q.push(ye+Q+":"+Z+Y)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:q.push("("+q.pop()+")");break;case 5:q.push(O.read_shift(2));break;case 6:{for(var Ge="";te=O[O.l++];)Ge+=String.fromCharCode(te);q.push('"'+Ge.replace(/"/g,'""')+'"')}break;case 8:q.push("-"+q.pop());break;case 23:q.push("+"+q.pop());break;case 22:q.push("NOT("+q.pop()+")");break;case 20:case 21:H=q.pop(),R=q.pop(),q.push(["AND","OR"][te-20]+"("+R+","+H+")");break;default:if(te<32&&b[te])H=q.pop(),R=q.pop(),q.push(R+b[te]+H);else if(y[te]){if(U=y[te][1],U==69&&(U=O[O.l++]),U>q.length){console.error("WK1 bad formula parse 0x"+te.toString(16)+":|"+q.join("|")+"|");return}var ie=q.slice(-U);q.length-=U,q.push(y[te][0]+"("+ie.join(",")+")")}else return te<=7?console.error("WK1 invalid opcode "+te.toString(16)):te<=24?console.error("WK1 unsupported op "+te.toString(16)):te<=30?console.error("WK1 invalid opcode "+te.toString(16)):te<=115?console.error("WK1 unsupported function opcode "+te.toString(16)):console.error("WK1 unrecognized opcode "+te.toString(16))}}q.length==1?G[1].f=""+q[0]:console.error("WK1 bad formula parse |"+q.join("|")+"|")}function j(O){var G=[{c:0,r:0},{t:"n",v:0},0];return G[0].r=O.read_shift(2),G[3]=O[O.l++],G[0].c=O[O.l++],G}function I(O,G){var q=j(O);return q[1].t="s",q[1].v=O.read_shift(G-4,"cstr"),q}function _(O,G,q,U){var Y=Jt(6+U.length);Y.write_shift(2,O),Y.write_shift(1,q),Y.write_shift(1,G),Y.write_shift(1,39);for(var Z=0;Z<U.length;++Z){var R=U.charCodeAt(Z);Y.write_shift(1,R>=128?95:R)}return Y.write_shift(1,0),Y}function S(O,G){var q=j(O);q[1].v=O.read_shift(2);var U=q[1].v>>1;if(q[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return q[1].v=U,q}function E(O,G){var q=j(O),U=O.read_shift(4),Y=O.read_shift(4),Z=O.read_shift(2);if(Z==65535)return U===0&&Y===3221225472?(q[1].t="e",q[1].v=15):U===0&&Y===3489660928?(q[1].t="e",q[1].v=42):q[1].v=0,q;var R=Z&32768;return Z=(Z&32767)-16446,q[1].v=(1-R*2)*(Y*Math.pow(2,Z+32)+U*Math.pow(2,Z)),q}function F(O,G,q,U){var Y=Jt(14);if(Y.write_shift(2,O),Y.write_shift(1,q),Y.write_shift(1,G),U==0)return Y.write_shift(4,0),Y.write_shift(4,0),Y.write_shift(2,65535),Y;var Z=0,R=0,H=0,te=0;return U<0&&(Z=1,U=-U),R=Math.log2(U)|0,U/=Math.pow(2,R-31),te=U>>>0,te&2147483648||(U/=2,++R,te=U>>>0),U-=te,te|=2147483648,te>>>=0,U*=Math.pow(2,32),H=U>>>0,Y.write_shift(4,H),Y.write_shift(4,te),R+=16383+(Z?32768:0),Y.write_shift(2,R),Y}function P(O,G){var q=E(O);return O.l+=G-14,q}function k(O,G){var q=j(O),U=O.read_shift(4);return q[1].v=U>>6,q}function D(O,G){var q=j(O),U=O.read_shift(8,"f");return q[1].v=U,q}function J(O,G){var q=D(O);return O.l+=G-10,q}function fe(O,G){return O[O.l+G-1]==0?O.read_shift(G,"cstr"):""}function Ae(O,G){var q=O[O.l++];q>G-1&&(q=G-1);for(var U="";U.length<q;)U+=String.fromCharCode(O[O.l++]);return U}function me(O,G,q){if(!(!q.qpro||G<21)){var U=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var Y=O.read_shift(G-21,"cstr");return[U,Y]}}function pe(O,G){for(var q={},U=O.l+G;O.l<U;){var Y=O.read_shift(2);if(Y==14e3){for(q[Y]=[0,""],q[Y][0]=O.read_shift(2);O[O.l];)q[Y][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return q}function ne(O,G){var q=Jt(5+O.length);q.write_shift(2,14e3),q.write_shift(2,G);for(var U=0;U<O.length;++U){var Y=O.charCodeAt(U);q[q.l++]=Y>127?95:Y}return q[q.l++]=0,q}var Pe={0:{n:"BOF",f:Bi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:A},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:fe},222:{n:"SHEETNAMELP",f:Ae},65535:{n:""}},Be={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:E},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:pe},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:J},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:fe},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:me},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function gDe(t){var e={},r=t.match(Rl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=An(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=F6[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var xDe=function(){var t=_2("t"),e=_2("rPr");function r(s){var o=s.match(t);if(!o)return{t:"s",v:""};var l={t:"s",v:ta(o[1])},c=s.match(e);return c&&(l.s=gDe(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),vDe=function(){var e=/(\r\n|\n)/g;function r(a,s,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),o.push("</b>")),a.i&&(s.push("<i>"),o.push("</i>")),a.strike&&(s.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),yDe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,bDe=/<(?:\w+:)?r>/,wDe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function aR(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=ta(Ma(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ma(t),r&&(n.h=$6(n.t))):t.match(bDe)&&(n.r=Ma(t),n.t=ta(Ma((t.replace(wDe,"").match(yDe)||[]).join("").replace(Rl,""))),r&&(n.h=vDe(xDe(n.r)))),n):{t:""}}var NDe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,CDe=/<(?:\w+:)?(?:si|sstItem)>/g,_De=/<\/(?:\w+:)?(?:si|sstItem)>/;function EDe(t,e){var r=[],n="";if(!t)return r;var a=t.match(NDe);if(a){n=a[2].replace(CDe,"").split(_De);for(var s=0;s!=n.length;++s){var o=aR(n[s].trim(),e);o!=null&&(r[r.length]=o)}a=An(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var SDe=/^\s|\s$|[\t\n\r]/;function dae(t,e){if(!e.bookSST)return"";var r=[Si];r[r.length]=_r("sst",null,{xmlns:Ng[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(SDe)&&(s+=' xml:space="preserve"'),s+=">"+Ba(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function IDe(t){return[t.read_shift(4),t.read_shift(4)]}function jDe(t,e){var r=[],n=!1;return vA(t,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function PDe(t,e){return e||(e=Jt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var BDe=Qke;function TDe(t){var e=jc();cr(e,159,PDe(t));for(var r=0;r<t.length;++r)cr(e,19,BDe(t[r]));return cr(e,160),e.end()}function fae(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function Gh(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function kDe(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=Gh(t,4),e.U=Gh(t,4),e.W=Gh(t,4),e}function FDe(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function ODe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(FDe(t));return e}function DDe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function RDe(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=Gh(t,4),e.U=Gh(t,4),e.W=Gh(t,4),e}function MDe(t){var e=RDe(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function hae(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function Aae(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function LDe(t){var e=Gh(t);switch(e.Minor){case 2:return[e.Minor,UDe(t)];case 3:return[e.Minor,QDe()];case 4:return[e.Minor,VDe(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function UDe(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=hae(t,r),a=Aae(t,t.length-t.l);return{t:"Std",h:n,v:a}}function QDe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function VDe(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Rl,function(s){var o=An(s);switch(Yf(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function HDe(t,e){var r={},n=r.EncryptionVersionInfo=Gh(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=hae(t,a),e-=a,r.EncryptionVerifier=Aae(t,e),r}function $De(t){var e={},r=e.EncryptionVersionInfo=Gh(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function sR(t){var e=0,r,n=fae(t),a=n.length+1,s,o,l,c,u;for(r=lm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^o;return e^52811}var mae=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},s=function(o){for(var l=e[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=fae(o),c=s(l),u=l.length,d=lm(16),f=0;f!=16;++f)d[f]=0;var A,h,m;for((u&1)===1&&(A=c>>8,d[u]=a(t[0],A),--u,A=c&255,h=l[l.length-1],d[u]=a(h,A));u>0;)--u,A=c>>8,d[u]=a(l[u],A),--u,A=c&255,d[u]=a(l[u],A);for(u=15,m=15-l.length;m>0;)A=c>>8,d[u]=a(t[m],A),--u,--m,A=c&255,d[u]=a(l[u],A),--u,--m;return d}}(),GDe=function(t,e,r,n,a){a||(a=e),n||(n=mae(t));var s,o;for(s=0;s!=e.length;++s)o=e[s],o^=n[r],o=(o>>5|o<<3)&255,a[s]=o,++r;return[a,r,n]},KDe=function(t){var e=0,r=mae(t);return function(n){var a=GDe("",n,e,r);return e=a[1],a[0]}};function qDe(t,e,r,n){var a={key:Bi(t),verificationBytes:Bi(t)};return r.password&&(a.verifier=sR(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=KDe(r.password)),a}function zDe(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=$De(t):n.Data=HDe(t,e),n}function WDe(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?zDe(t,e-2,n):qDe(t,r.biff>=8?e:e-2,r,n),n}var pae=function(){function t(a,s){switch(s.type){case"base64":return e(mu(a),s);case"binary":return e(a,s);case"buffer":return e(kn&&Buffer.isBuffer(a)?a.toString("binary"):bm(a),s);case"array":return e(Zp(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var A=/\\\w+\b/g,h=0,m,p=-1;m=A.exec(d);){switch(m[0]){case"\\cell":var g=d.slice(h,A.lastIndex-m[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var v={v:g,t:"s"};Array.isArray(l)?l[f][p]=v:l[hn({r:f,c:p})]=v}break}h=A.lastIndex}p>u.e.c&&(u.e.c=p)}),l["!ref"]=_n(u),l}function r(a,s){return wm(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=ra(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=hn({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(nA(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function XDe(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function j2(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function YDe(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),o=a-s;if(o===0)return[0,0,e];var l=0,c=0,u=a+s;switch(c=o/(u>1?2-u:u),a){case e:l=((r-n)/o+6)%6;break;case r:l=(n-e)/o+2;break;case n:l=(e-r)/o+4;break}return[l/6,c,u/2]}function JDe(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,o=[s,s,s],l=6*e,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function HS(t,e){if(e===0)return t;var r=YDe(XDe(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),j2(JDe(r))}var gae=6,ZDe=15,e6e=1,jl=gae;function P2(t){return Math.floor((t+Math.round(128/jl)/256)*jl)}function B2(t){return Math.floor((t-5)/jl*100+.5)/100}function $S(t){return Math.round((t*jl+5)/jl*256)/256}function E5(t){return $S(B2(P2(t)))}function iR(t){var e=Math.abs(t-E5(t)),r=jl;if(e>.005)for(jl=e6e;jl<ZDe;++jl)Math.abs(t-E5(t))<=e&&(e=Math.abs(t-E5(t)),r=jl);jl=r}function cm(t){t.width?(t.wpx=P2(t.width),t.wch=B2(t.wpx),t.MDW=jl):t.wpx?(t.wch=B2(t.wpx),t.width=$S(t.wch),t.MDW=jl):typeof t.wch=="number"&&(t.width=$S(t.wch),t.wpx=P2(t.width),t.MDW=jl),t.customWidth&&delete t.customWidth}var t6e=96,xae=t6e;function T2(t){return t*96/xae}function Tv(t){return t*xae/96}var r6e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function n6e(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(Rl)||[]).forEach(function(o){var l=An(o);switch(Yf(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=ls(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=ls(l.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function a6e(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(Rl)||[]).forEach(function(o){var l=An(o);switch(Yf(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function s6e(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(Rl)||[]).forEach(function(o){var l=An(o);switch(Yf(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Ma(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?ls(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?ls(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?ls(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?ls(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?ls(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?ls(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?ls(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=F6[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=ls(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=Sp[a.color.index];a.color.index==81&&(c=Sp[1]),c||(c=Sp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=HS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function i6e(t,e,r){e.NumberFmt=[];for(var n=oi(fn),a=0;a<n.length;++a)e.NumberFmt[n[a]]=fn[n[a]];var s=t[0].match(Rl);if(s)for(a=0;a<s.length;++a){var o=An(s[a]);switch(Yf(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=ta(Ma(o.formatCode)),c=parseInt(o.numFmtId,10);if(e.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=l}$h(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function o6e(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=_r("numFmt",null,{numFmtId:n,formatCode:Ba(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=_r("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var XC=["numFmtId","fillId","fontId","borderId","xfId"],YC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function l6e(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(Rl)||[]).forEach(function(s){var o=An(s),l=0;switch(Yf(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<XC.length;++l)n[XC[l]]&&(n[XC[l]]=parseInt(n[XC[l]],10));for(l=0;l<YC.length;++l)n[YC[l]]&&(n[YC[l]]=ls(n[YC[l]]));if(e.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[l]){n.numFmtId=l;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=ls(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function c6e(t){var e=[];return e[e.length]=_r("cellXfs",null),t.forEach(function(r){e[e.length]=_r("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=_r("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var u6e=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(e))&&i6e(f,d,u),(f=l.match(a))&&s6e(f,d,c,u),(f=l.match(n))&&a6e(f,d,c,u),(f=l.match(s))&&n6e(f,d,c,u),(f=l.match(r))&&l6e(f,d,u),d}}();function vae(t,e){var r=[Si,_r("styleSheet",null,{xmlns:Ng[0],"xmlns:vt":no.vt})],n;return t.SSF&&(n=o6e(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=c6e(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function d6e(t,e){var r=t.read_shift(2),n=Tl(t);return[r,n]}function f6e(t,e,r){r||(r=Jt(6+4*e.length)),r.write_shift(2,t),Po(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function h6e(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=zke(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(n.underline=o);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=qke(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Tl(t),n}function A6e(t,e){e||(e=Jt(25+4*32)),e.write_shift(2,t.sz*20),Wke(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),US(t.color,e);var n=0;return n=2,e.write_shift(1,n),Po(t.name,e),e.length>e.l?e.slice(0,e.l):e}var m6e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],S5,p6e=Ol;function v$(t,e){e||(e=Jt(4*3+8*7+16*1)),S5||(S5=Yj(m6e));var r=S5[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(US({auto:1},e),US({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function g6e(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function yae(t,e,r){r||(r=Jt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function hy(t,e){return e||(e=Jt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var x6e=Ol;function v6e(t,e){return e||(e=Jt(51)),e.write_shift(1,0),hy(null,e),hy(null,e),hy(null,e),hy(null,e),hy(null,e),e.length>e.l?e.slice(0,e.l):e}function y6e(t,e){return e||(e=Jt(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),LS(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function b6e(t,e,r){var n=Jt(2052);return n.write_shift(4,t),LS(e,n),LS(r,n),n.length>n.l?n.slice(0,n.l):n}function w6e(t,e,r){var n={};n.NumberFmt=[];for(var a in fn)n.NumberFmt[a]=fn[a];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return vA(t,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],$h(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=HS(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function N6e(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(cr(t,615,zd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&cr(t,44,f6e(a,e[a]))}),cr(t,616))}}function C6e(t){var e=1;cr(t,611,zd(e)),cr(t,43,A6e({sz:12,color:{theme:1},name:"Calibri",family:2})),cr(t,612)}function _6e(t){var e=2;cr(t,603,zd(e)),cr(t,45,v$({patternType:"none"})),cr(t,45,v$({patternType:"gray125"})),cr(t,604)}function E6e(t){var e=1;cr(t,613,zd(e)),cr(t,46,v6e()),cr(t,614)}function S6e(t){var e=1;cr(t,626,zd(e)),cr(t,47,yae({numFmtId:0},65535)),cr(t,627)}function I6e(t,e){cr(t,617,zd(e.length)),e.forEach(function(r){cr(t,47,yae(r,0))}),cr(t,618)}function j6e(t){var e=1;cr(t,619,zd(e)),cr(t,48,y6e({xfId:0,name:"Normal"})),cr(t,620)}function P6e(t){var e=0;cr(t,505,zd(e)),cr(t,506)}function B6e(t){var e=0;cr(t,508,b6e(e,"TableStyleMedium9","PivotStyleMedium4")),cr(t,509)}function T6e(t,e){var r=jc();return cr(r,278),N6e(r,t.SSF),C6e(r),_6e(r),E6e(r),S6e(r),I6e(r,e.cellXfs),j6e(r),P6e(r),B6e(r),cr(r,279),r.end()}var k6e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function F6e(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Rl)||[]).forEach(function(a){var s=An(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[k6e.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function O6e(){}function D6e(){}var R6e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,M6e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,L6e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function U6e(t,e,r){e.themeElements={};var n;[["clrScheme",R6e,F6e],["fontScheme",M6e,O6e],["fmtScheme",L6e,D6e]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var Q6e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function bae(t,e){(!t||t.length===0)&&(t=oR());var r,n={};if(!(r=t.match(Q6e)))throw new Error("themeElements not found in theme");return U6e(r[0],n,e),n.raw=t,n}function oR(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Si];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function V6e(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var o;try{o=hne(s,{type:"array"})}catch{return}var l=nu(o,"theme/theme/theme1.xml",!0);if(l)return bae(l,r)}}function H6e(t){return t.read_shift(4)}function $6e(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=G6e(t,4);break;case 2:e.xclrValue=eae(t);break;case 3:e.xclrValue=H6e(t);break;case 4:t.l+=4;break}return t.l+=8,e}function G6e(t,e){return Ol(t,e)}function K6e(t,e){return Ol(t,e)}function q6e(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=$6e(t);break;case 6:n[1]=K6e(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function z6e(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(q6e(t,r-t.l));return{ixfe:n,ext:s}}function W6e(t,e){e.forEach(function(r){switch(r[0]){}})}function X6e(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Tl(t)}}function Y6e(t){var e=Jt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Po(t.name,e),e.slice(0,e.l)}function J6e(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function Z6e(t){var e=Jt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function eRe(t,e){var r=Jt(8+2*e.length);return r.write_shift(4,t),Po(e,r),r.slice(0,r.l)}function tRe(t){return t.l+=4,t.read_shift(4)!=0}function rRe(t,e){var r=Jt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function nRe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],o=!1,l=2;return vA(t,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function aRe(){var t=jc();return cr(t,332),cr(t,334,zd(1)),cr(t,335,Y6e({name:"XLDAPR",version:12e4,flags:3496657072})),cr(t,336),cr(t,339,eRe(1,"XLDAPR")),cr(t,52),cr(t,35,zd(514)),cr(t,4096,zd(0)),cr(t,4097,Ku(1)),cr(t,36),cr(t,53),cr(t,340),cr(t,337,rRe(1)),cr(t,51,Z6e([[1,0]])),cr(t,338),cr(t,333),t.end()}function sRe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,o;return t.replace(Rl,function(l){var c=An(l);switch(Yf(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function wae(){var t=[Si];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function iRe(t){var e=[];if(!t)return e;var r=1;return(t.match(Rl)||[]).forEach(function(n){var a=An(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function oRe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=hn(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function lRe(t,e,r){var n=[];return vA(t,function(s,o,l){switch(l){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function cRe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;vA(t,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function uRe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var $x=1024;function Nae(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[_r("xml",null,{"xmlns:v":eu.v,"xmlns:o":eu.o,"xmlns:x":eu.x,"xmlns:mv":eu.mv}).replace(/\/>/,">"),_r("o:shapelayout",_r("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),_r("v:shapetype",[_r("v:stroke",null,{joinstyle:"miter"}),_r("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];$x<t*1e3;)$x+=1e3;return e.forEach(function(s){var o=Us(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?_r("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=_r("v:fill",c,l),d={on:"t",obscured:"t"};++$x,a=a.concat(["<v:shape"+E2({id:"_x0000_s"+$x,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,_r("v:shadow",null,d),_r("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",rl("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),rl("x:AutoFill","False"),rl("x:Row",String(o.r)),rl("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function y$(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(o){var l=Us(o.ref);if(a?(t[l.r]||(t[l.r]=[]),s=t[l.r][l.c]):s=t[o.ref],!s){s={t:"z"},a?t[l.r][l.c]=s:t[o.ref]=s;var c=ra(t["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=_n(c);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function dRe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=An(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Us(c.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),A=!!f&&!!f[1]&&aR(f[1])||{r:"",t:"",h:""};u.r=A.r,A.r=="<t></t>"&&(A.t=A.h=""),u.t=(A.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=A.h),n.push(u)}}}}),n}function Cae(t){var e=[Si,_r("comments",null,{xmlns:Ng[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=Ba(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Ba(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(rl("t",Ba(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;e.push(rl("t",Ba(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function fRe(t,e){var r=[],n=!1,a={},s=0;return t.replace(Rl,function(l,c){var u=An(l);switch(Yf(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function hRe(t,e,r){var n=[Si,_r("ThreadedComments",null,{xmlns:no.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push(_r("threadedComment",rl("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function ARe(t,e){var r=[],n=!1;return t.replace(Rl,function(s){var o=An(s);switch(Yf(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function mRe(t){var e=[Si,_r("personList",null,{xmlns:no.TCMNT,"xmlns:x":Ng[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(_r("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function pRe(t){var e={};e.iauthor=t.read_shift(4);var r=Sg(t);return e.rfx=r.s,e.ref=hn(r.s),t.l+=16,e}function gRe(t,e){return e==null&&(e=Jt(36)),e.write_shift(4,t[1].iauthor),f1(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var xRe=Tl;function vRe(t){return Po(t.slice(0,54))}function yRe(t,e){var r=[],n=[],a={},s=!1;return vA(t,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function bRe(t){var e=jc(),r=[];return cr(e,628),cr(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),cr(e,632,vRe(a.a)))})}),cr(e,631),cr(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Us(n[0]),e:Us(n[0])};cr(e,635,gRe([s,a])),a.t&&a.t.length>0&&cr(e,637,Hke(a)),cr(e,636),delete a.iauthor})}),cr(e,634),cr(e,629),e.end()}var wRe="application/vnd.ms-office.vbaProject";function NRe(t){var e=an.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");an.utils.cfb_add(e,a,t.FileIndex[n].content)}}),an.write(e)}function CRe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&an.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var _ae=["xlsb","xlsm","xlam","biff8","xla"];function _Re(){return{"!type":"dialog"}}function ERe(){return{"!type":"dialog"}}function SRe(){return{"!type":"macro"}}function IRe(){return{"!type":"macro"}}var ov=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,a+(l?"":"$")+Ls(d)+(c?"":"$")+_i(u)}return function(a,s){return e=s,a.replace(t,r)}}(),lR=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,cR=function(){return function(e,r){return e.replace(lR,function(n,a,s,o,l,c){var u=W6(o)-(s?0:r.c),d=z6(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",A=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+A})}}();function Eae(t,e){return t.replace(lR,function(r,n,a,s,o,l){return n+(a=="$"?a+s:Ls(W6(s)+e.c))+(o=="$"?o+l:_i(z6(l)+e.r))})}function jRe(t,e,r){var n=Pc(e),a=n.s,s=Us(r),o={r:s.r-a.r,c:s.c-a.c};return Eae(t,o)}function PRe(t){return t.length!=1}function b$(t){return t.replace(/_xlfn\./g,"")}function Ii(t){t.l+=1}function um(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Sae(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Iae(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),o=um(t),l=um(t);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Iae(t){var e=um(t),r=um(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function BRe(t,e,r){if(r.biff<8)return Iae(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=um(t),o=um(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function jae(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return TRe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=um(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function TRe(t){var e=um(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function kRe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function FRe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return ORe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function ORe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function DRe(t,e,r){var n=(t[t.l++]&96)>>5,a=Sae(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function RRe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=Sae(t,s,r);return[n,a,o]}function MRe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function LRe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function URe(t,e,r){var n=(t[t.l++]&96)>>5,a=BRe(t,e-1,r);return[n,a]}function QRe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function w$(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function VRe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function HRe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function $Re(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function GRe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function KRe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Pae(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function qRe(t){return t.read_shift(2),Pae(t)}function zRe(t){return t.read_shift(2),Pae(t)}function WRe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=jae(t,0,r);return[n,a]}function XRe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=FRe(t,0,r);return[n,a]}function YRe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=jae(t,0,r);return[n,a,s]}function JRe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[tMe[a],kae[a],n]}function ZRe(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:e8e(t);return[a,(s[0]===0?kae:eMe)[s[1]]]}function e8e(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function t8e(t,e,r){t.l+=r&&r.biff==2?3:4}function r8e(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function n8e(t){return t.l++,yA[t.read_shift(1)]}function a8e(t){return t.l++,t.read_shift(2)}function s8e(t){return t.l++,t.read_shift(1)!==0}function i8e(t){return t.l++,Pl(t)}function o8e(t,e,r){return t.l++,Tw(t,e-1,r)}function l8e(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ai(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=yA[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Pl(t);break;case 2:r[1]=Ig(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function c8e(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Sg:e4)(t));return a}function u8e(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=l8e(t,r.biff);return o}function d8e(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function f8e(t,e,r){if(r.biff==5)return h8e(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function h8e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function A8e(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function m8e(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function p8e(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function g8e(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var x8e=Ol,v8e=Ol,y8e=Ol;function Fw(t,e,r){return t.l+=2,[kRe(t)]}function uR(t){return t.l+=6,[]}var b8e=Fw,w8e=uR,N8e=uR,C8e=Fw;function Bae(t){return t.l+=2,[Bi(t),t.read_shift(2)&1]}var _8e=Fw,E8e=Bae,S8e=uR,I8e=Fw,j8e=Fw,P8e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function B8e(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),o=P8e[r>>2&31];return{ixti:e,coltype:r&3,rt:o,idx:n,c:a,C:s}}function T8e(t){return t.l+=2,[t.read_shift(4)]}function k8e(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function F8e(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function O8e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function D8e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function R8e(t){return t.l+=4,[0,0]}var N$={1:{n:"PtgExp",f:r8e},2:{n:"PtgTbl",f:y8e},3:{n:"PtgAdd",f:Ii},4:{n:"PtgSub",f:Ii},5:{n:"PtgMul",f:Ii},6:{n:"PtgDiv",f:Ii},7:{n:"PtgPower",f:Ii},8:{n:"PtgConcat",f:Ii},9:{n:"PtgLt",f:Ii},10:{n:"PtgLe",f:Ii},11:{n:"PtgEq",f:Ii},12:{n:"PtgGe",f:Ii},13:{n:"PtgGt",f:Ii},14:{n:"PtgNe",f:Ii},15:{n:"PtgIsect",f:Ii},16:{n:"PtgUnion",f:Ii},17:{n:"PtgRange",f:Ii},18:{n:"PtgUplus",f:Ii},19:{n:"PtgUminus",f:Ii},20:{n:"PtgPercent",f:Ii},21:{n:"PtgParen",f:Ii},22:{n:"PtgMissArg",f:Ii},23:{n:"PtgStr",f:o8e},26:{n:"PtgSheet",f:k8e},27:{n:"PtgEndSheet",f:F8e},28:{n:"PtgErr",f:n8e},29:{n:"PtgBool",f:s8e},30:{n:"PtgInt",f:a8e},31:{n:"PtgNum",f:i8e},32:{n:"PtgArray",f:QRe},33:{n:"PtgFunc",f:JRe},34:{n:"PtgFuncVar",f:ZRe},35:{n:"PtgName",f:d8e},36:{n:"PtgRef",f:WRe},37:{n:"PtgArea",f:DRe},38:{n:"PtgMemArea",f:A8e},39:{n:"PtgMemErr",f:x8e},40:{n:"PtgMemNoMem",f:v8e},41:{n:"PtgMemFunc",f:m8e},42:{n:"PtgRefErr",f:p8e},43:{n:"PtgAreaErr",f:MRe},44:{n:"PtgRefN",f:XRe},45:{n:"PtgAreaN",f:URe},46:{n:"PtgMemAreaN",f:O8e},47:{n:"PtgMemNoMemN",f:D8e},57:{n:"PtgNameX",f:f8e},58:{n:"PtgRef3d",f:YRe},59:{n:"PtgArea3d",f:RRe},60:{n:"PtgRefErr3d",f:g8e},61:{n:"PtgAreaErr3d",f:LRe},255:{}},M8e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},L8e={1:{n:"PtgElfLel",f:Bae},2:{n:"PtgElfRw",f:I8e},3:{n:"PtgElfCol",f:b8e},6:{n:"PtgElfRwV",f:j8e},7:{n:"PtgElfColV",f:C8e},10:{n:"PtgElfRadical",f:_8e},11:{n:"PtgElfRadicalS",f:S8e},13:{n:"PtgElfColS",f:w8e},15:{n:"PtgElfColSV",f:N8e},16:{n:"PtgElfRadicalLel",f:E8e},25:{n:"PtgList",f:B8e},29:{n:"PtgSxName",f:T8e},255:{}},U8e={0:{n:"PtgAttrNoop",f:R8e},1:{n:"PtgAttrSemi",f:KRe},2:{n:"PtgAttrIf",f:$Re},4:{n:"PtgAttrChoose",f:VRe},8:{n:"PtgAttrGoto",f:HRe},16:{n:"PtgAttrSum",f:t8e},32:{n:"PtgAttrBaxcel",f:w$},33:{n:"PtgAttrBaxcel",f:w$},64:{n:"PtgAttrSpace",f:qRe},65:{n:"PtgAttrSpaceSemi",f:zRe},128:{n:"PtgAttrIfError",f:GRe},255:{}};function Ow(t,e,r,n){if(n.biff<8)return Ol(t,e);for(var a=t.l+e,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=u8e(t,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=c8e(t,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=t.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return e=a-t.l,e!==0&&s.push(Ol(t,e)),s}function Dw(t,e,r){for(var n=t.l+e,a,s,o=[];n!=t.l;)e=n-t.l,s=t[t.l],a=N$[s]||N$[M8e[s]],(s===24||s===25)&&(a=(s===24?L8e:U8e)[t[t.l+1]]),!a||!a.f?Ol(t,e):o.push([a.n,a.f(t,e,r)]);return o}function Q8e(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var V8e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function H8e(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Tae(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function C$(t,e,r){var n=Tae(t,e,r);return n=="#REF"?n:H8e(n,r)}function Sl(t,e,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,A=0,h,m="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",v=0,y=t[0].length;v<y;++v){var b=t[0][v];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=ni(" ",t[0][p][1][1]);break;case 1:g=ni("\r",t[0][p][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+g,p=-1}l.push(u+V8e[b[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Cb(b[1][1],o,a),l.push(_b(d,s));break;case"PtgRefN":d=r?Cb(b[1][1],r,a):b[1][1],l.push(_b(d,s));break;case"PtgRef3d":f=b[1][1],d=Cb(b[1][2],o,a),m=C$(n,f,a),l.push(m+"!"+_b(d,s));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],j=b[1][1];w||(w=0),w&=127;var I=w==0?[]:l.slice(-w);l.length-=w,j==="User"&&(j=I.shift()),l.push(j+"("+I.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":h=ZH(b[1][1],r?{s:r}:o,a),l.push(N5(h,a));break;case"PtgArea":h=ZH(b[1][1],o,a),l.push(N5(h,a));break;case"PtgArea3d":f=b[1][1],h=b[1][2],m=C$(n,f,a),l.push(m+"!"+N5(h,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":A=b[1][2];var _=(n.names||[])[A-1]||(n[0]||[])[A],S=_?_.Name:"SH33TJSNAME"+String(A);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),l.push(S);break;case"PtgNameX":var E=b[1][1];A=b[1][2];var F;if(a.biff<=5)E<0&&(E=-E),n[E]&&(F=n[E][A]);else{var P="";if(((n[E]||[])[0]||[])[0]==14849||(((n[E]||[])[0]||[])[0]==1025?n[E][A]&&n[E][A].itab>0&&(P=n.SheetNames[n[E][A].itab-1]+"!"):P=n.SheetNames[A-1]+"!"),n[E]&&n[E][A])P+=n[E][A].Name;else if(n[0]&&n[0][A])P+=n[0][A].Name;else{var k=(Tae(n,E,a)||"").split(";;");k[A-1]?P=k[A-1]:P+="SH33TJSERRX"}l.push(P);break}F||(F={Name:"SH33TJSERRY"}),l.push(F.Name);break;case"PtgParen":var D="(",J=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:D=ni(" ",t[0][p][1][1])+D;break;case 3:D=ni("\r",t[0][p][1][1])+D;break;case 4:J=ni(" ",t[0][p][1][1])+J;break;case 5:J=ni("\r",t[0][p][1][1])+J;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(D+l.pop()+J);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var fe={c:r.c,r:r.r};if(n.sharedf[hn(d)]){var Ae=n.sharedf[hn(d)];l.push(Sl(Ae,o,fe,n,a))}else{var me=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Sl(u[1],o,fe,n,a)),me=!0;break}me||l.push(b[1])}break;case"PtgArray":l.push("{"+Q8e(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var pe=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&pe.indexOf(t[0][v][0])==-1){b=t[0][p];var ne=!0;switch(b[1][0]){case 4:ne=!1;case 0:g=ni(" ",b[1][1]);break;case 5:ne=!1;case 1:g=ni("\r",b[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((ne?g:"")+l.pop()+(ne?"":g)),p=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function $8e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,o=t.read_shift(a);if(o==65535)return[[],Ol(t,e-2)];var l=Dw(t,o,r);return e!==o+a&&(s=Ow(t,e-o-a,l,r)),t.l=n,[l,s]}function G8e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,o=t.read_shift(a);if(o==65535)return[[],Ol(t,e-2)];var l=Dw(t,o,r);return e!==o+a&&(s=Ow(t,e-o-a,l,r)),t.l=n,[l,s]}function K8e(t,e,r,n){var a=t.l+e,s=Dw(t,n,r),o;return a!==t.l&&(o=Ow(t,a-t.l,s,r)),[s,o]}function q8e(t,e,r){var n=t.l+e,a,s=t.read_shift(2),o=Dw(t,s,r);return s==65535?[[],Ol(t,e-2)]:(e!==s+2&&(a=Ow(t,n-s-2,o,r)),[o,a])}function z8e(t){var e;if(kh(t,t.l+6)!==65535)return[Pl(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function W8e(t){if(t==null){var e=Jt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return eg(t);return eg(0)}function I5(t,e,r){var n=t.l+e,a=Jf(t);r.biff==2&&++t.l;var s=z8e(t),o=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=G8e(t,n-t.l,r);return{cell:a,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function X8e(t,e,r,n,a){var s=rg(e,r,a),o=W8e(t.v),l=Jt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Jt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var f=Io([s,o,l,u]);return f}function t4(t,e,r){var n=t.read_shift(4),a=Dw(t,n,r),s=t.read_shift(4),o=s>0?Ow(t,s,a,r):null;return[a,o]}var Y8e=t4,r4=t4,J8e=t4,Z8e=t4,eMe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},kae={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},tMe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function _$(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function rMe(t){var e="of:="+t.replace(lR,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function j5(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function nMe(t){return t.replace(/\./,"!")}var Sb={},lv={},Ib=typeof Map<"u";function dR(t,e,r){var n=0,a=t.length;if(r){if(Ib?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Ib?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(Ib?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function n4(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(jl=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=B2(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=$S(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Pp(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Nm(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){$h(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Fae(t,e,r,n,a,s){try{n.cellNF&&(t.z=fn[e])}catch(l){if(n.WTF)throw l}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=fs(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(fn[e]==null&&$h(eke[e]||"General",e),t.t==="e")t.w=t.w||yA[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=C2(t.v);else if(t.t==="d"){var o=oo(t.v);(o|0)===o?t.w=o.toString(10):t.w=C2(o)}else{if(t.v===void 0)return"";t.w=Jp(t.v,lv)}else t.t==="d"?t.w=ud(e,oo(t.v),lv):t.w=ud(e,t.v,lv)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=HS(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=HS(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function aMe(t,e,r){if(t&&t["!ref"]){var n=ra(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function sMe(t,e){var r=ra(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=_n(r))}var iMe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,oMe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,lMe=/<(?:\w:)?hyperlink [^>]*>/mg,cMe=/"(\w*:\w*)"/,uMe=/<(?:\w:)?col\b[^>]*[\/]?>/g,dMe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,fMe=/<(?:\w:)?pageMargins[^>]*\/>/g,Oae=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,hMe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,AMe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function mMe(t,e,r,n,a,s,o){if(!t)return t;n||(n={"!id":{}});var l=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=t.match(oMe);f?(u=t.slice(0,f.index),d=t.slice(f.index+f[0].length)):u=d=t;var A=u.match(Oae);A?fR(A[0],l,a,r):(A=u.match(hMe))&&gMe(A[0],A[1]||"",l,a,r);var h=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var m=u.slice(h,h+50).match(cMe);m&&sMe(l,m[1])}var p=u.match(AMe);p&&p[1]&&PMe(p[1],a);var g=[];if(e.cellStyles){var v=u.match(uMe);v&&_Me(g,v)}f&&kMe(f[1],l,e,c,s,o);var y=d.match(dMe);y&&(l["!autofilter"]=SMe(y[0]));var b=[],w=d.match(iMe);if(w)for(h=0;h!=w.length;++h)b[h]=ra(w[h].slice(w[h].indexOf('"')+1));var j=d.match(lMe);j&&wMe(l,j,n);var I=d.match(fMe);if(I&&(l["!margins"]=NMe(An(I[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=_n(c)),e.sheetRows>0&&l["!ref"]){var _=ra(l["!ref"]);e.sheetRows<=+_.e.r&&(_.e.r=e.sheetRows-1,_.e.r>c.e.r&&(_.e.r=c.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>c.e.c&&(_.e.c=c.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=_n(_))}return g.length>0&&(l["!cols"]=g),b.length>0&&(l["!merges"]=b),l}function pMe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+_n(t[r])+'"/>';return e+"</mergeCells>"}function fR(t,e,r,n){var a=An(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=ta(Ma(a.codeName)))}function gMe(t,e,r,n,a){fR(t.slice(0,t.indexOf(">")),r,n,a)}function xMe(t,e,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=kf(Ba(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+_r("outlinePr",null,u)}!s&&!l||(a[a.length]=_r("sheetPr",l,o))}var vMe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],yMe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function bMe(t){var e={sheet:1};return vMe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),yMe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=sR(t.password).toString(16).toUpperCase()),_r("sheetProtection",null,e)}function wMe(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=An(Ma(e[a]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+ta(s.location))):(s.Target="#"+ta(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=ra(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=hn({c:u,r:c});n?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function NMe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function CMe(t){return Pp(t),_r("pageMargins",null,t)}function _Me(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=An(e[n],!0);a.hidden&&(a.hidden=ls(a.hidden));var s=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,iR(a.width)),cm(a);s<=o;)t[s++]=hs(a)}}function EMe(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=_r("col",null,n4(a,n)));return r[r.length]="</cols>",r.join("")}function SMe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function IMe(t,e,r,n){var a=typeof t.ref=="string"?t.ref:_n(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Pc(a);o.s.r==o.e.r&&(o.e.r=Pc(e["!ref"]).e.r,a=_n(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),_r("autoFilter",null,{ref:a})}var jMe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function PMe(t,e){e.Views||(e.Views=[{}]),(t.match(jMe)||[]).forEach(function(r,n){var a=An(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),ls(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function BMe(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),_r("sheetViews",_r("sheetView",null,a),{})}function TMe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=yA[t.v];break;case"d":n&&n.cellDates?a=fs(t.v,-1).toISOString():(t=hs(t),t.t="n",a=""+(t.v=oo(fs(t.v)))),typeof t.z>"u"&&(t.z=fn[14]);break;default:a=t.v;break}var l=rl("v",Ba(a)),c={r:e},u=Nm(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=rl("v",""+dR(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=_r("f",Ba(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),_r("c",l,c)}var kMe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=_2("v"),o=_2("f");return function(c,u,d,f,A,h){for(var m=0,p="",g=[],v=[],y=0,b=0,w=0,j="",I,_,S=0,E=0,F,P,k=0,D=0,J=Array.isArray(h.CellXf),fe,Ae=[],me=[],pe=Array.isArray(u),ne=[],Pe={},Be=!1,O=!!d.sheetStubs,G=c.split(e),q=0,U=G.length;q!=U;++q){p=G[q].trim();var Y=p.length;if(Y!==0){var Z=0;e:for(m=0;m<Y;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(d&&d.cellStyles){if(_=An(p.slice(Z,m),!0),S=_.r!=null?parseInt(_.r,10):S+1,E=-1,d.sheetRows&&d.sheetRows<S)continue;Pe={},Be=!1,_.ht&&(Be=!0,Pe.hpt=parseFloat(_.ht),Pe.hpx=Tv(Pe.hpt)),_.hidden=="1"&&(Be=!0,Pe.hidden=!0),_.outlineLevel!=null&&(Be=!0,Pe.level=+_.outlineLevel),Be&&(ne[S-1]=Pe)}break;case"<":Z=m;break}if(Z>=m)break;if(_=An(p.slice(Z,m),!0),S=_.r!=null?parseInt(_.r,10):S+1,E=-1,!(d.sheetRows&&d.sheetRows<S)){f.s.r>S-1&&(f.s.r=S-1),f.e.r<S-1&&(f.e.r=S-1),d&&d.cellStyles&&(Pe={},Be=!1,_.ht&&(Be=!0,Pe.hpt=parseFloat(_.ht),Pe.hpx=Tv(Pe.hpt)),_.hidden=="1"&&(Be=!0,Pe.hidden=!0),_.outlineLevel!=null&&(Be=!0,Pe.level=+_.outlineLevel),Be&&(ne[S-1]=Pe)),g=p.slice(m).split(t);for(var R=0;R!=g.length&&g[R].trim().charAt(0)=="<";++R);for(g=g.slice(R),m=0;m!=g.length;++m)if(p=g[m].trim(),p.length!==0){if(v=p.match(r),y=m,b=0,w=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,v!=null&&v.length===2){for(y=0,j=v[1],b=0;b!=j.length&&!((w=j.charCodeAt(b)-64)<1||w>26);++b)y=26*y+w;--y,E=y}else++E;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,_=An(p.slice(0,b),!0),_.r||(_.r=hn({r:S-1,c:E})),j=p.slice(b),I={t:""},(v=j.match(s))!=null&&v[1]!==""&&(I.v=ta(v[1])),d.cellFormula){if((v=j.match(o))!=null&&v[1]!==""){if(I.f=ta(Ma(v[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=b$(I.f)),v[0].indexOf('t="array"')>-1)I.F=(j.match(a)||[])[1],I.F.indexOf(":")>-1&&Ae.push([ra(I.F),I.F]);else if(v[0].indexOf('t="shared"')>-1){P=An(v[0]);var H=ta(Ma(v[1]));d.xlfn||(H=b$(H)),me[parseInt(P.si,10)]=[P,H,_.r]}}else(v=j.match(/<f[^>]*\/>/))&&(P=An(v[0]),me[P.si]&&(I.f=jRe(me[P.si][1],me[P.si][2],_.r)));var te=Us(_.r);for(b=0;b<Ae.length;++b)te.r>=Ae[b][0].s.r&&te.r<=Ae[b][0].e.r&&te.c>=Ae[b][0].s.c&&te.c<=Ae[b][0].e.c&&(I.F=Ae[b][1])}if(_.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(O)I.t="z";else continue;else I.t=_.t||"n";switch(f.s.c>E&&(f.s.c=E),f.e.c<E&&(f.e.c=E),I.t){case"n":if(I.v==""||I.v==null){if(!O)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!O)continue;I.t="z"}else F=Sb[parseInt(I.v,10)],I.v=F.t,I.r=F.r,d.cellHTML&&(I.h=F.h);break;case"str":I.t="s",I.v=I.v!=null?Ma(I.v):"",d.cellHTML&&(I.h=$6(I.v));break;case"inlineStr":v=j.match(n),I.t="s",v!=null&&(F=aR(v[1]))?(I.v=F.t,d.cellHTML&&(I.h=F.h)):I.v="";break;case"b":I.v=ls(I.v);break;case"d":d.cellDates?I.v=fs(I.v,1):(I.v=oo(fs(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=Rne[I.v];break}if(k=D=0,fe=null,J&&_.s!==void 0&&(fe=h.CellXf[_.s],fe!=null&&(fe.numFmtId!=null&&(k=fe.numFmtId),d.cellStyles&&fe.fillId!=null&&(D=fe.fillId))),Fae(I,k,D,d,A,h),d.cellDates&&J&&I.t=="n"&&c1(fn[k])&&(I.t="d",I.v=Zj(I.v)),_.cm&&d.xlmeta){var ye=(d.xlmeta.Cell||[])[+_.cm-1];ye&&ye.type=="XLDAPR"&&(I.D=!0)}if(pe){var Q=Us(_.r);u[Q.r]||(u[Q.r]=[]),u[Q.r][Q.c]=I}else u[_.r]=I}}}}ne.length>0&&(u["!rows"]=ne)}}();function FMe(t,e,r,n){var a=[],s=[],o=ra(t["!ref"]),l="",c,u="",d=[],f=0,A=0,h=t["!rows"],m=Array.isArray(t),p={r:u},g,v=-1;for(A=o.s.c;A<=o.e.c;++A)d[A]=Ls(A);for(f=o.s.r;f<=o.e.r;++f){for(s=[],u=_i(f),A=o.s.c;A<=o.e.c;++A){c=d[A]+u;var y=m?(t[f]||[])[A]:t[c];y!==void 0&&(l=TMe(y,c,t,e))!=null&&s.push(l)}(s.length>0||h&&h[f])&&(p={r:u},h&&h[f]&&(g=h[f],g.hidden&&(p.hidden=1),v=-1,g.hpx?v=T2(g.hpx):g.hpt&&(v=g.hpt),v>-1&&(p.ht=v,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),a[a.length]=_r("row",s.join(""),p))}if(h)for(;f<h.length;++f)h&&h[f]&&(p={r:f+1},g=h[f],g.hidden&&(p.hidden=1),v=-1,g.hpx?v=T2(g.hpx):g.hpt&&(v=g.hpt),v>-1&&(p.ht=v,p.customHeight=1),g.level&&(p.outlineLevel=g.level),a[a.length]=_r("row","",p));return a.join("")}function Dae(t,e,r,n){var a=[Si,_r("worksheet",null,{xmlns:Ng[0],"xmlns:r":no.r})],s=r.SheetNames[t],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=ra(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=_n(d)}n||(n={}),c["!comments"]=[];var f=[];xMe(c,r,t,e,a),a[a.length]=_r("dimension",null,{ref:u}),a[a.length]=BMe(c,e,t,r),e.sheetFormat&&(a[a.length]=_r("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=EMe(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=FMe(c,e),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=bMe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=IMe(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=pMe(c["!merges"]));var A=-1,h,m=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(h={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=Sa(n,-1,Ba(p[1].Target).replace(/#.*$/,""),Mn.HLINK),h["r:id"]="rId"+m),(A=p[1].Target.indexOf("#"))>-1&&(h.location=Ba(p[1].Target.slice(A+1))),p[1].Tooltip&&(h.tooltip=Ba(p[1].Tooltip)),a[a.length]=_r("hyperlink",null,h))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=CMe(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=rl("ignoredErrors",_r("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(m=Sa(n,-1,"../drawings/drawing"+(t+1)+".xml",Mn.DRAW),a[a.length]=_r("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=f),c["!comments"].length>0&&(m=Sa(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Mn.VML),a[a.length]=_r("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function OMe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function DMe(t,e,r){var n=Jt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=T2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var f=-1,A=-1,h=d<<10;h<d+1<<10;++h){u.c=h;var m=Array.isArray(r)?(r[u.r]||[])[u.c]:r[hn(u)];m&&(f<0&&(f=h),A=h)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,A))}var p=n.l;return n.l=c,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}function RMe(t,e,r,n){var a=DMe(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&cr(t,0,a)}var MMe=Sg,LMe=f1;function UMe(){}function QMe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=$ke(t),r}function VMe(t,e,r){r==null&&(r=Jt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return US({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Tne(t,r),r.slice(0,r.l)}function HMe(t){var e=Ad(t);return[e]}function $Me(t,e,r){return r==null&&(r=Jt(8)),Cg(e,r)}function GMe(t){var e=_g(t);return[e]}function KMe(t,e,r){return r==null&&(r=Jt(4)),Eg(e,r)}function qMe(t){var e=Ad(t),r=t.read_shift(1);return[e,r,"b"]}function zMe(t,e,r){return r==null&&(r=Jt(9)),Cg(e,r),r.write_shift(1,t.v?1:0),r}function WMe(t){var e=_g(t),r=t.read_shift(1);return[e,r,"b"]}function XMe(t,e,r){return r==null&&(r=Jt(5)),Eg(e,r),r.write_shift(1,t.v?1:0),r}function YMe(t){var e=Ad(t),r=t.read_shift(1);return[e,r,"e"]}function JMe(t,e,r){return r==null&&(r=Jt(9)),Cg(e,r),r.write_shift(1,t.v),r}function ZMe(t){var e=_g(t),r=t.read_shift(1);return[e,r,"e"]}function eLe(t,e,r){return r==null&&(r=Jt(8)),Eg(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function tLe(t){var e=Ad(t),r=t.read_shift(4);return[e,r,"s"]}function rLe(t,e,r){return r==null&&(r=Jt(12)),Cg(e,r),r.write_shift(4,e.v),r}function nLe(t){var e=_g(t),r=t.read_shift(4);return[e,r,"s"]}function aLe(t,e,r){return r==null&&(r=Jt(8)),Eg(e,r),r.write_shift(4,e.v),r}function sLe(t){var e=Ad(t),r=Pl(t);return[e,r,"n"]}function iLe(t,e,r){return r==null&&(r=Jt(16)),Cg(e,r),eg(t.v,r),r}function Rae(t){var e=_g(t),r=Pl(t);return[e,r,"n"]}function oLe(t,e,r){return r==null&&(r=Jt(12)),Eg(e,r),eg(t.v,r),r}function lLe(t){var e=Ad(t),r=Z6(t);return[e,r,"n"]}function cLe(t,e,r){return r==null&&(r=Jt(12)),Cg(e,r),kne(t.v,r),r}function uLe(t){var e=_g(t),r=Z6(t);return[e,r,"n"]}function dLe(t,e,r){return r==null&&(r=Jt(8)),Eg(e,r),kne(t.v,r),r}function fLe(t){var e=Ad(t),r=X6(t);return[e,r,"is"]}function hLe(t){var e=Ad(t),r=Tl(t);return[e,r,"str"]}function ALe(t,e,r){return r==null&&(r=Jt(12+4*t.v.length)),Cg(e,r),Po(t.v,r),r.length>r.l?r.slice(0,r.l):r}function mLe(t){var e=_g(t),r=Tl(t);return[e,r,"str"]}function pLe(t,e,r){return r==null&&(r=Jt(8+4*t.v.length)),Eg(e,r),Po(t.v,r),r.length>r.l?r.slice(0,r.l):r}function gLe(t,e,r){var n=t.l+e,a=Ad(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"b"];if(r.cellFormula){t.l+=2;var l=r4(t,n-t.l,r);o[3]=Sl(l,null,a,r.supbooks,r)}else t.l=n;return o}function xLe(t,e,r){var n=t.l+e,a=Ad(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"e"];if(r.cellFormula){t.l+=2;var l=r4(t,n-t.l,r);o[3]=Sl(l,null,a,r.supbooks,r)}else t.l=n;return o}function vLe(t,e,r){var n=t.l+e,a=Ad(t);a.r=r["!row"];var s=Pl(t),o=[a,s,"n"];if(r.cellFormula){t.l+=2;var l=r4(t,n-t.l,r);o[3]=Sl(l,null,a,r.supbooks,r)}else t.l=n;return o}function yLe(t,e,r){var n=t.l+e,a=Ad(t);a.r=r["!row"];var s=Tl(t),o=[a,s,"str"];if(r.cellFormula){t.l+=2;var l=r4(t,n-t.l,r);o[3]=Sl(l,null,a,r.supbooks,r)}else t.l=n;return o}var bLe=Sg,wLe=f1;function NLe(t,e){return e==null&&(e=Jt(4)),e.write_shift(4,t),e}function CLe(t,e){var r=t.l+e,n=Sg(t),a=Y6(t),s=Tl(t),o=Tl(t),l=Tl(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function _Le(t,e){var r=Jt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));f1({s:Us(t[0]),e:Us(t[0])},r),J6("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return Po(a||"",r),Po(t[1].Tooltip||"",r),Po("",r),r.slice(0,r.l)}function ELe(){}function SLe(t,e,r){var n=t.l+e,a=Fne(t),s=t.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=Y8e(t,n-t.l,r);o[1]=l}else t.l=n;return o}function ILe(t,e,r){var n=t.l+e,a=Sg(t),s=[a];if(r.cellFormula){var o=Z8e(t,n-t.l,r);s[1]=o,t.l=n}else t.l=n;return s}function jLe(t,e,r){r==null&&(r=Jt(18));var n=n4(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var Mae=["left","right","top","bottom","header","footer"];function PLe(t){var e={};return Mae.forEach(function(r){e[r]=Pl(t)}),e}function BLe(t,e){return e==null&&(e=Jt(6*8)),Pp(t),Mae.forEach(function(r){eg(t[r],e)}),e}function TLe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function kLe(t,e,r){r==null&&(r=Jt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function FLe(t){var e=Jt(24);return e.write_shift(4,4),e.write_shift(4,1),f1(t,e),e}function OLe(t,e){return e==null&&(e=Jt(16*4+2)),e.write_shift(2,t.password?sR(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function DLe(){}function RLe(){}function MLe(t,e,r,n,a,s,o){if(!t)return t;var l=e||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,A=!1,h,m,p,g,v,y,b,w,j,I=[];l.biff=12,l["!row"]=0;var _=0,S=!1,E=[],F={},P=l.supbooks||a.supbooks||[[]];if(P.sharedf=F,P.arrayf=E,P.SheetNames=a.SheetNames||a.Sheets.map(function(pe){return pe.name}),!l.supbooks&&(l.supbooks=P,a.Names))for(var k=0;k<a.Names.length;++k)P[0][k+1]=a.Names[k];var D=[],J=[],fe=!1;k2[16]={n:"BrtShortReal",f:Rae};var Ae;if(vA(t,function(ne,Pe,Be){if(!A)switch(Be){case 148:u=ne;break;case 0:h=ne,l.sheetRows&&l.sheetRows<=h.r&&(A=!0),w=_i(g=h.r),l["!row"]=h.r,(ne.hidden||ne.hpt||ne.level!=null)&&(ne.hpt&&(ne.hpx=Tv(ne.hpt)),J[ne.r]=ne);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:ne[2]},ne[2]){case"n":m.v=ne[1];break;case"s":b=Sb[ne[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!ne[1];break;case"e":m.v=ne[1],l.cellText!==!1&&(m.w=yA[m.v]);break;case"str":m.t="s",m.v=ne[1];break;case"is":m.t="s",m.v=ne[1].t;break}if((p=o.CellXf[ne[0].iStyleRef])&&Fae(m,p.numFmtId,null,l,s,o),v=ne[0].c==-1?v+1:ne[0].c,l.dense?(c[g]||(c[g]=[]),c[g][v]=m):c[Ls(v)+w]=m,l.cellFormula){for(S=!1,_=0;_<E.length;++_){var O=E[_];h.r>=O[0].s.r&&h.r<=O[0].e.r&&v>=O[0].s.c&&v<=O[0].e.c&&(m.F=_n(O[0]),S=!0)}!S&&ne.length>3&&(m.f=ne[3])}if(d.s.r>h.r&&(d.s.r=h.r),d.s.c>v&&(d.s.c=v),d.e.r<h.r&&(d.e.r=h.r),d.e.c<v&&(d.e.c=v),l.cellDates&&p&&m.t=="n"&&c1(fn[p.numFmtId])){var G=fp(m.v);G&&(m.t="d",m.v=new Date(G.y,G.m-1,G.d,G.H,G.M,G.S,G.u))}Ae&&(Ae.type=="XLDAPR"&&(m.D=!0),Ae=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;m={t:"z",v:void 0},v=ne[0].c==-1?v+1:ne[0].c,l.dense?(c[g]||(c[g]=[]),c[g][v]=m):c[Ls(v)+w]=m,d.s.r>h.r&&(d.s.r=h.r),d.s.c>v&&(d.s.c=v),d.e.r<h.r&&(d.e.r=h.r),d.e.c<v&&(d.e.c=v),Ae&&(Ae.type=="XLDAPR"&&(m.D=!0),Ae=void 0);break;case 176:I.push(ne);break;case 49:Ae=((l.xlmeta||{}).Cell||[])[ne-1];break;case 494:var q=n["!id"][ne.relId];for(q?(ne.Target=q.Target,ne.loc&&(ne.Target+="#"+ne.loc),ne.Rel=q):ne.relId==""&&(ne.Target="#"+ne.loc),g=ne.rfx.s.r;g<=ne.rfx.e.r;++g)for(v=ne.rfx.s.c;v<=ne.rfx.e.c;++v)l.dense?(c[g]||(c[g]=[]),c[g][v]||(c[g][v]={t:"z",v:void 0}),c[g][v].l=ne):(y=hn({c:v,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=ne);break;case 426:if(!l.cellFormula)break;E.push(ne),j=l.dense?c[g][v]:c[Ls(v)+w],j.f=Sl(ne[1],d,{r:h.r,c:v},P,l),j.F=_n(ne[0]);break;case 427:if(!l.cellFormula)break;F[hn(ne[0].s)]=ne[1],j=l.dense?c[g][v]:c[Ls(v)+w],j.f=Sl(ne[1],d,{r:h.r,c:v},P,l);break;case 60:if(!l.cellStyles)break;for(;ne.e>=ne.s;)D[ne.e--]={width:ne.w/256,hidden:!!(ne.flags&1),level:ne.level},fe||(fe=!0,iR(ne.w/256)),cm(D[ne.e+1]);break;case 161:c["!autofilter"]={ref:_n(ne)};break;case 476:c["!margins"]=ne;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),ne.name&&(a.Sheets[r].CodeName=ne.name),(ne.above||ne.left)&&(c["!outline"]={above:ne.above,left:ne.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),ne.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!Pe.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+Be.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=_n(u||d)),l.sheetRows&&c["!ref"]){var me=ra(c["!ref"]);l.sheetRows<=+me.e.r&&(me.e.r=l.sheetRows-1,me.e.r>d.e.r&&(me.e.r=d.e.r),me.e.r<me.s.r&&(me.s.r=me.e.r),me.e.c>d.e.c&&(me.e.c=d.e.c),me.e.c<me.s.c&&(me.s.c=me.e.c),c["!fullref"]=c["!ref"],c["!ref"]=_n(me))}return I.length>0&&(c["!merges"]=I),D.length>0&&(c["!cols"]=D),J.length>0&&(c["!rows"]=J),c}function LLe(t,e,r,n,a,s,o){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=hs(e),e.z=e.z||fn[14],e.v=oo(fs(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=Nm(a.cellXfs,e,a),e.l&&s["!links"].push([hn(c),e.l]),e.c&&s["!comments"].push([hn(c),e.c]),e.t){case"s":case"str":return a.bookSST?(l=dR(a.Strings,e.v,a.revStrings),c.t="s",c.v=l,o?cr(t,18,aLe(e,c)):cr(t,7,rLe(e,c))):(c.t="str",o?cr(t,17,pLe(e,c)):cr(t,6,ALe(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?cr(t,13,dLe(e,c)):cr(t,2,cLe(e,c)):o?cr(t,16,oLe(e,c)):cr(t,5,iLe(e,c)),!0;case"b":return c.t="b",o?cr(t,15,XMe(e,c)):cr(t,4,zMe(e,c)),!0;case"e":return c.t="e",o?cr(t,14,eLe(e,c)):cr(t,3,JMe(e,c)),!0}return o?cr(t,12,KMe(e,c)):cr(t,1,$Me(e,c)),!0}function ULe(t,e,r,n){var a=ra(e["!ref"]||"A1"),s,o="",l=[];cr(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=_i(d),RMe(t,e,a,d);var f=!1;if(d<=a.e.r)for(var A=a.s.c;A<=a.e.c;++A){d===a.s.r&&(l[A]=Ls(A)),s=l[A]+o;var h=c?(e[d]||[])[A]:e[s];if(!h){f=!1;continue}f=LLe(t,h,d,A,n,e,f)}}cr(t,146)}function QLe(t,e){!e||!e["!merges"]||(cr(t,177,NLe(e["!merges"].length)),e["!merges"].forEach(function(r){cr(t,176,wLe(r))}),cr(t,178))}function VLe(t,e){!e||!e["!cols"]||(cr(t,390),e["!cols"].forEach(function(r,n){r&&cr(t,60,jLe(n,r))}),cr(t,391))}function HLe(t,e){!e||!e["!ref"]||(cr(t,648),cr(t,649,FLe(ra(e["!ref"]))),cr(t,650))}function $Le(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=Sa(r,-1,n[1].Target.replace(/#.*$/,""),Mn.HLINK);cr(t,494,_Le(n,a))}}),delete e["!links"]}function GLe(t,e,r,n){if(e["!comments"].length>0){var a=Sa(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Mn.VML);cr(t,551,J6("rId"+a)),e["!legacy"]=a}}function KLe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:_n(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Pc(s);l.s.r==l.e.r&&(l.e.r=Pc(e["!ref"]).e.r,s=_n(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),cr(t,161,f1(ra(s))),cr(t,162)}}function qLe(t,e,r){cr(t,133),cr(t,137,kLe(e,r)),cr(t,138),cr(t,134)}function zLe(t,e){e["!protect"]&&cr(t,535,OLe(e["!protect"]))}function WLe(t,e,r,n){var a=jc(),s=r.SheetNames[t],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=ra(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],cr(a,129),(r.vbaraw||o["!outline"])&&cr(a,147,VMe(l,o["!outline"])),cr(a,148,LMe(c)),qLe(a,o,r.Workbook),VLe(a,o),ULe(a,o,t,e),zLe(a,o),KLe(a,o,r,t),QLe(a,o),$Le(a,o,n),o["!margins"]&&cr(a,476,BLe(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&HLe(a,o),GLe(a,o,t,n),cr(a,130),a.end()}function XLe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(e[+o[1]]=r?+o[2]:o[2])});var a=ta((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function YLe(t,e,r,n,a,s){var o=s||{"!type":"chart"};if(!t)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var A=XLe(f);d.s.r=d.s.c=0,d.e.c=l,u=Ls(l),A[0].forEach(function(h,m){o[u+_i(m)]={t:"n",v:h,z:A[1]},c=m}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=_n(d)),o}function JLe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=t.match(Oae);return l&&fR(l[0],s,a,r),(o=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function ZLe(t,e){t.l+=10;var r=Tl(t);return{name:r}}function eUe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return vA(t,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var hR=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],tUe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],rUe=[],nUe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function E$(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=ls(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function S$(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=ls(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function Lae(t){S$(t.WBProps,hR),S$(t.CalcPr,nUe),E$(t.WBView,tUe),E$(t.Sheets,rUe),lv.date1904=ls(t.WBProps.date1904)}function aUe(t){return!t.Workbook||!t.Workbook.WBProps?"false":ls(t.Workbook.WBProps.date1904)?"true":"false"}var sUe="][*?/\\".split("");function Uae(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return sUe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function iUe(t,e,r){t.forEach(function(n,a){Uae(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=e&&e[a]&&e[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function oUe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];iUe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)aMe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var lUe=/<\w+:workbook/;function cUe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},o=0;if(t.replace(Rl,function(c,u){var d=An(c);switch(Yf(d[0])){case"<?xml":break;case"<workbook":c.match(lUe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":hR.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=ls(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ma(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=ta(Ma(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ma(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),ls(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=ta(Ma(t.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Ng.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Lae(r),r}function Qae(t){var e=[Si];e[e.length]=_r("workbook",null,{xmlns:Ng[0],"xmlns:r":no.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(hR.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=_r("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:Ba(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=_r("sheet",null,o)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=_r("definedName",Ba(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function uUe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Vk(t),r.name=Tl(t),r}function dUe(t,e){return e||(e=Jt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),J6(t.strRelID,e),Po(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function fUe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?Tl(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function hUe(t,e){e||(e=Jt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),Tne(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function AUe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function mUe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=Gke(t),o=J8e(t,0,r),l=Y6(t);t.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function pUe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],k2[16]={n:"BrtFRTArchID$",f:AUe},vA(t,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=Sl(c.Ptg,null,null,o,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),Lae(r),r.Names=s,r.supbooks=o,r}function gUe(t,e){cr(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};cr(t,156,dUe(a))}cr(t,144)}function xUe(t,e){e||(e=Jt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Po("SheetJS",e),Po(kS.version,e),Po(kS.version,e),Po("7262",e),e.length>e.l?e.slice(0,e.l):e}function vUe(t,e){e||(e=Jt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function yUe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(cr(t,135),cr(t,158,vUe(a)),cr(t,136))}}function bUe(t,e){var r=jc();return cr(r,131),cr(r,128,xUe()),cr(r,153,hUe(t.Workbook&&t.Workbook.WBProps||null)),yUe(r,t),gUe(r,t),cr(r,132),r.end()}function wUe(t,e,r){return e.slice(-4)===".bin"?pUe(t,r):cUe(t,r)}function NUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?MLe(t,n,r,a,s,o,l):mMe(t,n,r,a,s,o,l)}function CUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?eUe(t,n,r,a,s):JLe(t,n,r,a,s)}function _Ue(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?SRe():IRe()}function EUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?_Re():ERe()}function SUe(t,e,r,n){return e.slice(-4)===".bin"?w6e(t,r,n):u6e(t,r,n)}function IUe(t,e,r){return bae(t,r)}function jUe(t,e,r){return e.slice(-4)===".bin"?jDe(t,r):EDe(t,r)}function PUe(t,e,r){return e.slice(-4)===".bin"?yRe(t,r):dRe(t,r)}function BUe(t,e,r){return e.slice(-4)===".bin"?lRe(t):iRe(t)}function TUe(t,e,r,n){return r.slice(-4)===".bin"?cRe(t,e,r,n):void 0}function kUe(t,e,r){return e.slice(-4)===".bin"?nRe(t,e,r):sRe(t,e,r)}function FUe(t,e,r){return(e.slice(-4)===".bin"?bUe:Qae)(t)}function OUe(t,e,r,n,a){return(e.slice(-4)===".bin"?WLe:Dae)(t,r,n,a)}function DUe(t,e,r){return(e.slice(-4)===".bin"?T6e:vae)(t,r)}function RUe(t,e,r){return(e.slice(-4)===".bin"?TDe:dae)(t,r)}function MUe(t,e,r){return(e.slice(-4)===".bin"?bRe:Cae)(t)}function LUe(t){return(t.slice(-4)===".bin"?aRe:wae)()}var Vae=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Hae=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Id(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(Vae),s,o,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(Hae),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),n[l]=s[2].slice(1,s[2].length-1));return n}function UUe(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(Vae),a,s,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(Hae),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),r[o]=a[2].slice(1,a[2].length-1));return r}var jb;function QUe(t,e){var r=jb[t]||ta(t);return r==="General"?Jp(e):ud(r,e)}function VUe(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=ls(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=fs(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[ta(e)]=a}function HUe(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||yA[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=C2(t.v):t.w=Jp(t.v):t.w=QUe(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=jb[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&c1(n)){var a=fp(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function $Ue(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=r6e[n.Pattern]||n.Pattern)}t[e.ID]=e}function GUe(t,e,r,n,a,s,o,l,c,u){var d="General",f=n.StyleID,A={};u=u||{};var h=[],m=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&h.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=ls(t);break;case"String":n.t="s",n.r=$H(ta(t)),n.v=t.indexOf("<")>-1?ta(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(fs(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=ta(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Rne[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=$H(e||t));break}if(HUe(n,d,u),u.cellFormula!==!1)if(n.Formula){var p=ta(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=ov(p,a),delete n.Formula,n.ArrayRange=="RC"?n.F=ov("RC:RC",a):n.ArrayRange&&(n.F=ov(n.ArrayRange,a),c.push([ra(n.F),n.F]))}else for(m=0;m<c.length;++m)a.r>=c[m][0].s.r&&a.r<=c[m][0].e.r&&a.c>=c[m][0].s.c&&a.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(h.forEach(function(g){!A.patternType&&g.patternType&&(A.patternType=g.patternType)}),n.s=A),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function KUe(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function P5(t,e){var r=e||{};u1();var n=Hy(G6(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ma(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=hs(r);return o.type="string",Bv.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(se){a.indexOf("<"+se)>=0&&(s=!0)}),s)return B7e(n,r);jb={"General Number":"General","General Date":fn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":fn[15],"Short Date":fn[14],"Long Time":fn[19],"Medium Time":fn[18],"Short Time":fn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:fn[2],Standard:fn[4],Percent:fn[10],Scientific:fn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],A=r.dense?[]:{},h="",m={},p={},g=Id('<Data ss:Type="String">'),v=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},I={},_="",S=0,E=[],F={},P={},k=0,D=[],J=[],fe={},Ae=[],me,pe=!1,ne=[],Pe=[],Be={},O=0,G=0,q={Sheets:[],WBProps:{date1904:!1}},U={};S2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var Y="";l=S2.exec(n);)switch(l[3]=(Y=l[3]).toLowerCase()){case"data":if(Y=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?GUe(n.slice(v,l.index),_,g,c[c.length-1][0]=="comment"?fe:m,{c:y,r:b},j,Ae[y],p,ne,r):(_="",g=Id(l[0]),v=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(J.length>0&&(m.c=J),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(A[b]||(A[b]=[]),A[b][y]=m):A[Ls(y)+_i(b)]=m),m.HRef&&(m.l={Target:ta(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(O=y+(parseInt(m.MergeAcross,10)|0),G=b+(parseInt(m.MergeDown,10)|0),E.push({s:{c:y,r:b},e:{c:O,r:G}})),!r.sheetStubs)m.MergeAcross?y=O+1:++y;else if(m.MergeAcross||m.MergeDown){for(var Z=y;Z<=O;++Z)for(var R=b;R<=G;++R)(Z>y||R>b)&&(r.dense?(A[R]||(A[R]=[]),A[R][Z]={t:"z"}):A[Ls(Z)+_i(R)]={t:"z"});y=O+1}else++y;else m=UUe(l[0]),m.Index&&(y=+m.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),l[0].slice(-2)==="/>"&&++y,J=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),l[0].slice(-2)==="/>"&&(p=Id(l[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=Id(l[0]),p.Index&&(b=+p.Index-1),Be={},(p.AutoFitHeight=="0"||p.Height)&&(Be.hpx=parseInt(p.Height,10),Be.hpt=T2(Be.hpx),Pe[b]=Be),p.Hidden=="1"&&(Be.hidden=!0,Pe[b]=Be));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(h),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(A["!ref"]=_n(w),r.sheetRows&&r.sheetRows<=w.e.r&&(A["!fullref"]=A["!ref"],w.e.r=r.sheetRows-1,A["!ref"]=_n(w))),E.length&&(A["!merges"]=E),Ae.length>0&&(A["!cols"]=Ae),Pe.length>0&&(A["!rows"]=Pe),d[h]=A}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([l[3],!1]),u=Id(l[0]),h=ta(u.Name),A=r.dense?[]:{},E=[],ne=[],Pe=[],U={name:h,Hidden:0},q.Sheets.push(U);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Ae=[],pe=!1}break;case"style":l[1]==="/"?$Ue(j,I,r):I=Id(l[0]);break;case"numberformat":I.nf=ta(Id(l[0]).Format||"General"),jb[I.nf]&&(I.nf=jb[I.nf]);for(var H=0;H!=392&&fn[H]!=I.nf;++H);if(H==392){for(H=57;H!=392;++H)if(fn[H]==null){$h(I.nf,H);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(me=Id(l[0]),me.Hidden&&(me.hidden=!0,delete me.Hidden),me.Width&&(me.wpx=parseInt(me.Width,10)),!pe&&me.wpx>10){pe=!0,jl=gae;for(var te=0;te<Ae.length;++te)Ae[te]&&cm(Ae[te])}pe&&cm(me),Ae[me.Index-1||Ae.length]=me;for(var ye=0;ye<+me.Span;++ye)Ae[Ae.length]=hs(me);break;case"namedrange":if(l[1]==="/")break;q.Names||(q.Names=[]);var Q=An(l[0]),Ge={Name:Q.Name,Ref:ov(Q.RefersTo.slice(1),{r:0,c:0})};q.Sheets.length>0&&(Ge.Sheet=q.Sheets.length-1),q.Names.push(Ge);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=n.slice(S,l.index):S=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=Id(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?pFe(F,Y,n.slice(k,l.index)):k=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));KUe(fe),J.push(fe)}else c.push([l[3],!1]),u=Id(l[0]),fe={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var ie=Id(l[0]);A["!autofilter"]={ref:ov(ie.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return T$(n,r);var ee=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ee=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ee=!1}break;case"excelworkbook":switch(l[3]){case"date1904":q.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ee=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ee=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(k,l.index)){case"SheetHidden":U.Hidden=1;break;case"SheetVeryHidden":U.Hidden=2;break}else k=l.index+l[0].length;break;case"header":A["!margins"]||Pp(A["!margins"]={},"xlml"),isNaN(+An(l[0]).Margin)||(A["!margins"].header=+An(l[0]).Margin);break;case"footer":A["!margins"]||Pp(A["!margins"]={},"xlml"),isNaN(+An(l[0]).Margin)||(A["!margins"].footer=+An(l[0]).Margin);break;case"pagemargins":var Ie=An(l[0]);A["!margins"]||Pp(A["!margins"]={},"xlml"),isNaN(+Ie.Top)||(A["!margins"].top=+Ie.Top),isNaN(+Ie.Left)||(A["!margins"].left=+Ie.Left),isNaN(+Ie.Right)||(A["!margins"].right=+Ie.Right),isNaN(+Ie.Bottom)||(A["!margins"].bottom=+Ie.Bottom);break;case"displayrighttoleft":q.Views||(q.Views=[]),q.Views[0]||(q.Views[0]={}),q.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ee=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ee=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ee=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ee=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ee=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ee=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ee=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ee=!1}break;case"smarttags":break;default:ee=!1;break}if(ee||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?VUe(P,Y,D,n.slice(k,l.index)):(D=l,k=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ue={};return!r.bookSheets&&!r.bookProps&&(ue.Sheets=d),ue.SheetNames=f,ue.Workbook=q,ue.SSF=hs(fn),ue.Props=F,ue.Custprops=P,ue}function Wk(t,e){switch(mR(e=e||{}),e.type||"base64"){case"base64":return P5(mu(t),e);case"binary":case"buffer":case"file":return P5(t,e);case"array":return P5(bm(t),e)}}function qUe(t,e){var r=[];return t.Props&&r.push(gFe(t.Props,e)),t.Custprops&&r.push(xFe(t.Props,t.Custprops)),r.join("")}function zUe(){return""}function WUe(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(_r("NumberFormat",null,{"ss:Format":Ba(fn[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(_r("Style",s.join(""),o))}),_r("Styles",r.join(""))}function $ae(t){return _r("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+cR(t.Ref,{r:0,c:0})})}function XUe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push($ae(a)))}return _r("Names",r.join(""))}function YUe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push($ae(l)))}return s.join("")}function JUe(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(_r("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(_r("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(_r("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(_r("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(rl("ProtectContents","True")),t["!protect"].objects&&a.push(rl("ProtectObjects","True")),t["!protect"].scenarios&&a.push(rl("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(rl("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(rl("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":_r("WorksheetOptions",a.join(""),{xmlns:eu.x})}function ZUe(t){return t.map(function(e){var r=yke(e.t||""),n=_r("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return _r("Comment",n,{"ss:Author":e.a})}).join("")}function e7e(t,e,r,n,a,s,o){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+Ba(cR(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var c=Us(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=Ba(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=Ba(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",A="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",A=String(t.v);break;case"b":f="Boolean",A=t.v?"1":"0";break;case"e":f="Error",A=yA[t.v];break;case"d":f="DateTime",A=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||fn[14]);break;case"s":f="String",A=vke(t.v||"");break}var h=Nm(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+h),l["ss:Index"]=o.c+1;var m=t.v!=null?A:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+m+"</Data>";return(t.c||[]).length>0&&(p+=ZUe(t.c)),_r("Cell",p,l)}function t7e(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Tv(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function r7e(t,e,r,n){if(!t["!ref"])return"";var a=ra(t["!ref"]),s=t["!merges"]||[],o=0,l=[];t["!cols"]&&t["!cols"].forEach(function(g,v){cm(g);var y=!!g.width,b=n4(v,g),w={"ss:Index":v+1};y&&(w["ss:Width"]=P2(b.width)),g.hidden&&(w["ss:Hidden"]="1"),l.push(_r("Column",null,w))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[t7e(u,(t["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var A=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>f)&&!(s[o].s.r>u)&&!(s[o].e.c<f)&&!(s[o].e.r<u)){(s[o].s.c!=f||s[o].s.r!=u)&&(A=!0);break}if(!A){var h={r:u,c:f},m=hn(h),p=c?(t[u]||[])[f]:t[m];d.push(e7e(p,m,t,e,r,n,h))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function n7e(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],o=s?YUe(s,e,t,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?r7e(s,e,t,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(JUe(s,e,t,r)),n.join("")}function a7e(t,e){e||(e={}),t.SSF||(t.SSF=hs(fn)),t.SSF&&(u1(),Xj(t.SSF),e.revssf=Jj(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Nm(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(qUe(t,e)),r.push(zUe()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(_r("Worksheet",n7e(n,e,t),{"ss:Name":Ba(t.SheetNames[n])}));return r[2]=WUe(t,e),r[3]=XUe(t),Si+_r("Workbook",r.join(""),{xmlns:eu.ss,"xmlns:o":eu.o,"xmlns:x":eu.x,"xmlns:ss":eu.ss,"xmlns:dt":eu.dt,"xmlns:html":eu.html})}function s7e(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=Xke(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=Yke(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var i7e=[60,1084,2066,2165,2175];function o7e(t,e,r,n,a){var s=n,o=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=s;for(var c=kh(r,r.l),u=Xk[c],d=0;u!=null&&i7e.indexOf(c)>-1;)s=kh(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=Xk[c=kh(r,r.l)];var f=Io(o);el(f,0);var A=0;f.lens=[];for(var h=0;h<o.length;++h)f.lens.push(A),A+=o[h].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,a)}function xf(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=fn[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||yA[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=C2(t.v):t.w=Jp(t.v):t.w=ud(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&c1(fn[n]||String(n))){var a=fp(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function JC(t,e,r){return{v:t,ixfe:e,t:r}}function l7e(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},o={},l=null,c=[],u="",d={},f,A="",h,m,p,g,v={},y=[],b,w,j=[],I=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},E=function(xe){return xe<8?Sp[xe]:xe<64&&I[xe-8]||Sp[xe]},F=function(xe,de,Ue){var Ke=de.XF.data;if(!(!Ke||!Ke.patternType||!Ue||!Ue.cellStyles)){de.s={},de.s.patternType=Ke.patternType;var Ne;(Ne=j2(E(Ke.icvFore)))&&(de.s.fgColor={rgb:Ne}),(Ne=j2(E(Ke.icvBack)))&&(de.s.bgColor={rgb:Ne})}},P=function(xe,de,Ue){if(!(Be>1)&&!(Ue.sheetRows&&xe.r>=Ue.sheetRows)){if(Ue.cellStyles&&de.XF&&de.XF.data&&F(xe,de,Ue),delete de.ixfe,delete de.XF,f=xe,A=hn(xe),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),xe.r<o.s.r&&(o.s.r=xe.r),xe.c<o.s.c&&(o.s.c=xe.c),xe.r+1>o.e.r&&(o.e.r=xe.r+1),xe.c+1>o.e.c&&(o.e.c=xe.c+1),Ue.cellFormula&&de.f){for(var Ke=0;Ke<y.length;++Ke)if(!(y[Ke][0].s.c>xe.c||y[Ke][0].s.r>xe.r)&&!(y[Ke][0].e.c<xe.c||y[Ke][0].e.r<xe.r)){de.F=_n(y[Ke][0]),(y[Ke][0].s.c!=xe.c||y[Ke][0].s.r!=xe.r)&&delete de.f,de.f&&(de.f=""+Sl(y[Ke][1],o,xe,ne,k));break}}Ue.dense?(a[xe.r]||(a[xe.r]=[]),a[xe.r][xe.c]=de):a[A]=de}},k={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(k.password=e.password);var D,J=[],fe=[],Ae=[],me=[],pe=!1,ne=[];ne.SheetNames=k.snames,ne.sharedf=k.sharedf,ne.arrayf=k.arrayf,ne.names=[],ne.XTI=[];var Pe=0,Be=0,O=0,G=[],q=[],U;k.codepage=1200,Qd(1200);for(var Y=!1;t.l<t.length-1;){var Z=t.l,R=t.read_shift(2);if(R===0&&Pe===10)break;var H=t.l===t.length?0:t.read_shift(2),te=Xk[R];if(te&&te.f){if(e.bookSheets&&Pe===133&&R!==133)break;if(Pe=R,te.r===2||te.r==12){var ye=t.read_shift(2);if(H-=2,!k.enc&&ye!==R&&((ye&255)<<8|ye>>8)!==R)throw new Error("rt mismatch: "+ye+"!="+R);te.r==12&&(t.l+=10,H-=10)}var Q={};if(R===10?Q=te.f(t,H,k):Q=o7e(R,te,t,H,k),Be==0&&[9,521,1033,2057].indexOf(Pe)===-1)continue;switch(R){case 34:r.opts.Date1904=_.WBProps.date1904=Q;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(k.enc||(t.l=0),k.enc=Q,!e.password)throw new Error("File is password-protected");if(Q.valid==null)throw new Error("Encryption scheme unsupported");if(!Q.valid)throw new Error("Password is incorrect");break;case 92:k.lastuser=Q;break;case 66:var Ge=Number(Q);switch(Ge){case 21010:Ge=1200;break;case 32768:Ge=1e4;break;case 32769:Ge=1252;break}Qd(k.codepage=Ge),Y=!0;break;case 317:k.rrtabid=Q;break;case 25:k.winlocked=Q;break;case 439:r.opts.RefreshAll=Q;break;case 12:r.opts.CalcCount=Q;break;case 16:r.opts.CalcDelta=Q;break;case 17:r.opts.CalcIter=Q;break;case 13:r.opts.CalcMode=Q;break;case 14:r.opts.CalcPrecision=Q;break;case 95:r.opts.CalcSaveRecalc=Q;break;case 15:k.CalcRefMode=Q;break;case 2211:r.opts.FullCalc=Q;break;case 129:Q.fDialog&&(a["!type"]="dialog"),Q.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),Q.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:j.push(Q);break;case 430:ne.push([Q]),ne[ne.length-1].XTI=[];break;case 35:case 547:ne[ne.length-1].push(Q);break;case 24:case 536:U={Name:Q.Name,Ref:Sl(Q.rgce,o,null,ne,k)},Q.itab>0&&(U.Sheet=Q.itab-1),ne.names.push(U),ne[0]||(ne[0]=[],ne[0].XTI=[]),ne[ne.length-1].push(Q),Q.Name=="_xlnm._FilterDatabase"&&Q.itab>0&&Q.rgce&&Q.rgce[0]&&Q.rgce[0][0]&&Q.rgce[0][0][0]=="PtgArea3d"&&(q[Q.itab-1]={ref:_n(Q.rgce[0][0][1][2])});break;case 22:k.ExternCount=Q;break;case 23:ne.length==0&&(ne[0]=[],ne[0].XTI=[]),ne[ne.length-1].XTI=ne[ne.length-1].XTI.concat(Q),ne.XTI=ne.XTI.concat(Q);break;case 2196:if(k.biff<8)break;U!=null&&(U.Comment=Q[1]);break;case 18:a["!protect"]=Q;break;case 19:Q!==0&&k.WTF&&console.error("Password verifier: "+Q);break;case 133:s[Q.pos]=Q,k.snames.push(Q.name);break;case 10:{if(--Be)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=_n(o),e.sheetRows&&e.sheetRows<=o.e.r){var ie=o.e.r;o.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=_n(o),o.e.r=ie}o.e.r++,o.e.c++}J.length>0&&(a["!merges"]=J),fe.length>0&&(a["!objects"]=fe),Ae.length>0&&(a["!cols"]=Ae),me.length>0&&(a["!rows"]=me),_.Sheets.push(S)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(k.biff===8&&(k.biff={9:2,521:3,1033:4}[R]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Q.BIFFVer]||8),k.biffguess=Q.BIFFVer==0,Q.BIFFVer==0&&Q.dt==4096&&(k.biff=5,Y=!0,Qd(k.codepage=28591)),k.biff==8&&Q.BIFFVer==0&&Q.dt==16&&(k.biff=2),Be++)break;if(a=e.dense?[]:{},k.biff<8&&!Y&&(Y=!0,Qd(k.codepage=e.codepage||1252)),k.biff<5||Q.BIFFVer==0&&Q.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ee={pos:t.l-H,name:u};s[ee.pos]=ee,k.snames.push(u)}else u=(s[Z]||{name:""}).name;Q.dt==32&&(a["!type"]="chart"),Q.dt==64&&(a["!type"]="macro"),J=[],fe=[],k.arrayf=y=[],Ae=[],me=[],pe=!1,S={Hidden:(s[Z]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[Q.r]||[])[Q.c]:a[hn({c:Q.c,r:Q.r})])&&++Q.c,b={ixfe:Q.ixfe,XF:j[Q.ixfe]||{},v:Q.val,t:"n"},O>0&&(b.z=G[b.ixfe>>8&63]),xf(b,e,r.opts.Date1904),P({c:Q.c,r:Q.r},b,e);break;case 5:case 517:b={ixfe:Q.ixfe,XF:j[Q.ixfe],v:Q.val,t:Q.t},O>0&&(b.z=G[b.ixfe>>8&63]),xf(b,e,r.opts.Date1904),P({c:Q.c,r:Q.r},b,e);break;case 638:b={ixfe:Q.ixfe,XF:j[Q.ixfe],v:Q.rknum,t:"n"},O>0&&(b.z=G[b.ixfe>>8&63]),xf(b,e,r.opts.Date1904),P({c:Q.c,r:Q.r},b,e);break;case 189:for(var Ie=Q.c;Ie<=Q.C;++Ie){var ue=Q.rkrec[Ie-Q.c][0];b={ixfe:ue,XF:j[ue],v:Q.rkrec[Ie-Q.c][1],t:"n"},O>0&&(b.z=G[b.ixfe>>8&63]),xf(b,e,r.opts.Date1904),P({c:Ie,r:Q.r},b,e)}break;case 6:case 518:case 1030:{if(Q.val=="String"){l=Q;break}if(b=JC(Q.val,Q.cell.ixfe,Q.tt),b.XF=j[b.ixfe],e.cellFormula){var se=Q.formula;if(se&&se[0]&&se[0][0]&&se[0][0][0]=="PtgExp"){var Ee=se[0][0][1][0],je=se[0][0][1][1],it=hn({r:Ee,c:je});v[it]?b.f=""+Sl(Q.formula,o,Q.cell,ne,k):b.F=((e.dense?(a[Ee]||[])[je]:a[it])||{}).F}else b.f=""+Sl(Q.formula,o,Q.cell,ne,k)}O>0&&(b.z=G[b.ixfe>>8&63]),xf(b,e,r.opts.Date1904),P(Q.cell,b,e),l=Q}break;case 7:case 519:if(l)l.val=Q,b=JC(Q,l.cell.ixfe,"s"),b.XF=j[b.ixfe],e.cellFormula&&(b.f=""+Sl(l.formula,o,l.cell,ne,k)),O>0&&(b.z=G[b.ixfe>>8&63]),xf(b,e,r.opts.Date1904),P(l.cell,b,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(Q);var At=hn(Q[0].s);if(h=e.dense?(a[Q[0].s.r]||[])[Q[0].s.c]:a[At],e.cellFormula&&h){if(!l||!At||!h)break;h.f=""+Sl(Q[1],o,Q[0],ne,k),h.F=_n(Q[0])}}break;case 1212:{if(!e.cellFormula)break;if(A){if(!l)break;v[hn(l.cell)]=Q[0],h=e.dense?(a[l.cell.r]||[])[l.cell.c]:a[hn(l.cell)],(h||{}).f=""+Sl(Q[0],o,f,ne,k)}}break;case 253:b=JC(c[Q.isst].t,Q.ixfe,"s"),c[Q.isst].h&&(b.h=c[Q.isst].h),b.XF=j[b.ixfe],O>0&&(b.z=G[b.ixfe>>8&63]),xf(b,e,r.opts.Date1904),P({c:Q.c,r:Q.r},b,e);break;case 513:e.sheetStubs&&(b={ixfe:Q.ixfe,XF:j[Q.ixfe],t:"z"},O>0&&(b.z=G[b.ixfe>>8&63]),xf(b,e,r.opts.Date1904),P({c:Q.c,r:Q.r},b,e));break;case 190:if(e.sheetStubs)for(var pt=Q.c;pt<=Q.C;++pt){var yt=Q.ixfe[pt-Q.c];b={ixfe:yt,XF:j[yt],t:"z"},O>0&&(b.z=G[b.ixfe>>8&63]),xf(b,e,r.opts.Date1904),P({c:pt,r:Q.r},b,e)}break;case 214:case 516:case 4:b=JC(Q.val,Q.ixfe,"s"),b.XF=j[b.ixfe],O>0&&(b.z=G[b.ixfe>>8&63]),xf(b,e,r.opts.Date1904),P({c:Q.c,r:Q.r},b,e);break;case 0:case 512:Be===1&&(o=Q);break;case 252:c=Q;break;case 1054:if(k.biff==4){G[O++]=Q[1];for(var Ct=0;Ct<O+163&&fn[Ct]!=Q[1];++Ct);Ct>=163&&$h(Q[1],O+163)}else $h(Q[1],Q[0]);break;case 30:{G[O++]=Q;for(var Et=0;Et<O+163&&fn[Et]!=Q;++Et);Et>=163&&$h(Q,O+163)}break;case 229:J=J.concat(Q);break;case 93:fe[Q.cmo[0]]=k.lastobj=Q;break;case 438:k.lastobj.TxO=Q;break;case 127:k.lastobj.ImData=Q;break;case 440:for(g=Q[0].s.r;g<=Q[0].e.r;++g)for(p=Q[0].s.c;p<=Q[0].e.c;++p)h=e.dense?(a[g]||[])[p]:a[hn({c:p,r:g})],h&&(h.l=Q[1]);break;case 2048:for(g=Q[0].s.r;g<=Q[0].e.r;++g)for(p=Q[0].s.c;p<=Q[0].e.c;++p)h=e.dense?(a[g]||[])[p]:a[hn({c:p,r:g})],h&&h.l&&(h.l.Tooltip=Q[1]);break;case 28:{if(k.biff<=5&&k.biff>=2)break;h=e.dense?(a[Q[0].r]||[])[Q[0].c]:a[hn(Q[0])];var Re=fe[Q[2]];h||(e.dense?(a[Q[0].r]||(a[Q[0].r]=[]),h=a[Q[0].r][Q[0].c]={t:"z"}):h=a[hn(Q[0])]={t:"z"},o.e.r=Math.max(o.e.r,Q[0].r),o.s.r=Math.min(o.s.r,Q[0].r),o.e.c=Math.max(o.e.c,Q[0].c),o.s.c=Math.min(o.s.c,Q[0].c)),h.c||(h.c=[]),m={a:Q[1],t:Re.TxO.t},h.c.push(m)}break;case 2173:W6e(j[Q.ixfe],Q.ext);break;case 125:{if(!k.cellStyles)break;for(;Q.e>=Q.s;)Ae[Q.e--]={width:Q.w/256,level:Q.level||0,hidden:!!(Q.flags&1)},pe||(pe=!0,iR(Q.w/256)),cm(Ae[Q.e+1])}break;case 520:{var We={};Q.level!=null&&(me[Q.r]=We,We.level=Q.level),Q.hidden&&(me[Q.r]=We,We.hidden=!0),Q.hpt&&(me[Q.r]=We,We.hpt=Q.hpt,We.hpx=Tv(Q.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Pp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[R]]=Q;break;case 161:a["!margins"]||Pp(a["!margins"]={}),a["!margins"].header=Q.header,a["!margins"].footer=Q.footer;break;case 574:Q.RTL&&(_.Views[0].RTL=!0);break;case 146:I=Q;break;case 2198:D=Q;break;case 140:w=Q;break;case 442:u?S.CodeName=Q||S.name:_.WBProps.CodeName=Q||"ThisWorkbook";break}}else te||console.error("Missing Info for XLS Record 0x"+R.toString(16)),t.l+=H}return r.SheetNames=oi(s).sort(function(et,xe){return Number(et)-Number(xe)}).map(function(et){return s[et].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&q.forEach(function(et,xe){r.Sheets[r.SheetNames[xe]]["!autofilter"]=et}),r.Strings=c,r.SSF=hs(fn),k.enc&&(r.Encryption=k.enc),D&&(r.Themes=D),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),ne.names.length>0&&(_.Names=ne.names),r.Workbook=_,r}var Pb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function c7e(t,e,r){var n=an.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=l$(n,Hk,Pb.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var o=an.find(t,"/!SummaryInformation");if(o&&o.size>0)try{var l=l$(o,$k,Pb.SI);for(var c in l)e[c]==null&&(e[c]=l[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(Hne(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function u7e(t,e){var r=[],n=[],a=[],s=0,o,l=MH(Hk,"n"),c=MH($k,"n");if(t.Props)for(o=oi(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=oi(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)Xne.indexOf(a[s][0])>-1||Vne.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&an.utils.cfb_add(e,"/SummaryInformation",c$(n,Pb.SI,c,$k)),(r.length||u.length)&&an.utils.cfb_add(e,"/DocumentSummaryInformation",c$(r,Pb.DSI,l,Hk,u.length?u:null,Pb.UDI))}function Gae(t,e){e||(e={}),mR(e),D6(),e.codepage&&O6(e.codepage);var r,n;if(t.FullPaths){if(an.find(t,"/encryption"))throw new Error("File is password-protected");r=an.find(t,"!CompObj"),n=an.find(t,"/Workbook")||an.find(t,"/Book")}else{switch(e.type){case"base64":t=ru(mu(t));break;case"binary":t=ru(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}el(t,0),n={content:t}}var a,s;if(r&&s7e(r),e.bookProps&&!e.bookSheets)a={};else{var o=kn?"buffer":"array";if(n&&n.content)a=l7e(n.content,e);else if((s=an.find(t,"PerfectOffice_MAIN"))&&s.content)a=jp.to_workbook(s.content,(e.type=o,e));else if((s=an.find(t,"NativeContent_MAIN"))&&s.content)a=jp.to_workbook(s.content,(e.type=o,e));else throw(s=an.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&an.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=NRe(t))}var l={};return t.FullPaths&&c7e(t,l,e),a.Props=a.Custprops=l,e.bookFiles&&(a.cfb=t),a}function d7e(t,e){var r=e||{},n=an.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return an.utils.cfb_add(n,a,Kae(t,r)),r.biff==8&&(t.Props||t.Custprops)&&u7e(t,n),r.biff==8&&t.vbaraw&&CRe(n,an.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var k2={0:{f:OMe},1:{f:HMe},2:{f:lLe},3:{f:YMe},4:{f:qMe},5:{f:sLe},6:{f:hLe},7:{f:tLe},8:{f:yLe},9:{f:vLe},10:{f:gLe},11:{f:xLe},12:{f:GMe},13:{f:uLe},14:{f:ZMe},15:{f:WMe},16:{f:Rae},17:{f:mLe},18:{f:nLe},19:{f:X6},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:mUe},40:{},42:{},43:{f:h6e},44:{f:d6e},45:{f:p6e},46:{f:x6e},47:{f:g6e},48:{},49:{f:Mke},50:{},51:{f:J6e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:oae},62:{f:fLe},63:{f:oRe},64:{f:DLe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ol,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:TLe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:QMe},148:{f:MMe,p:16},151:{f:ELe},152:{},153:{f:fUe},154:{},155:{},156:{f:uUe},157:{},158:{},159:{T:1,f:IDe},160:{T:-1},161:{T:1,f:Sg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:bLe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:X6e},336:{T:-1},337:{f:tRe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Vk},357:{},358:{},359:{},360:{T:1},361:{},362:{f:iae},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:SLe},427:{f:ILe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:PLe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:UMe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:CLe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Vk},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:xRe},633:{T:1},634:{T:-1},635:{T:1,f:pRe},636:{T:-1},637:{f:Vke},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:ZLe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:RLe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Xk={6:{f:I5},10:{f:t0},12:{f:Bi},13:{f:Bi},14:{f:Ai},15:{f:Ai},16:{f:Pl},17:{f:Ai},18:{f:Ai},19:{f:Bi},20:{f:m$},21:{f:m$},23:{f:iae},24:{f:g$},25:{f:Ai},26:{},27:{},28:{f:ROe},29:{},34:{f:Ai},35:{f:p$},38:{f:Pl},39:{f:Pl},40:{f:Pl},41:{f:Pl},42:{f:Ai},43:{f:Ai},47:{f:WDe},49:{f:uOe},51:{f:Bi},60:{},61:{f:sOe},64:{f:Ai},65:{f:cOe},66:{f:Bi},77:{},80:{},81:{},82:{},85:{f:Bi},89:{},90:{},91:{},92:{f:zFe},93:{f:UOe},94:{},95:{f:Ai},96:{},97:{},99:{f:Ai},125:{f:oae},128:{f:_Oe},129:{f:XFe},130:{f:Bi},131:{f:Ai},132:{f:Ai},133:{f:YFe},134:{},140:{f:zOe},141:{f:Bi},144:{},146:{f:YOe},151:{},152:{},153:{},154:{},155:{},156:{f:Bi},157:{},158:{},160:{f:aDe},161:{f:eDe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:bOe},190:{f:wOe},193:{f:t0},197:{},198:{},199:{},200:{},201:{},202:{f:Ai},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Bi},220:{},221:{f:Ai},222:{},224:{f:COe},225:{f:qFe},226:{f:t0},227:{},229:{f:MOe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:ZFe},253:{f:fOe},255:{f:tOe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Yne},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ai},353:{f:t0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:POe},431:{f:Ai},432:{},433:{},434:{},437:{},438:{f:HOe},439:{f:Ai},440:{f:$Oe},441:{},442:{f:kw},443:{},444:{f:Bi},445:{},446:{},448:{f:t0},449:{f:aOe,r:2},450:{f:t0},512:{f:f$},513:{f:nDe},515:{f:IOe},516:{f:AOe},517:{f:A$},519:{f:sDe},520:{f:rOe},523:{},545:{f:x$},549:{f:d$},566:{},574:{f:oOe},638:{f:yOe},659:{},1048:{},1054:{f:pOe},1084:{},1212:{f:FOe},2048:{f:KOe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:WC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:t0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:JOe,r:12},2173:{f:z6e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ai,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:kOe,r:12},2197:{},2198:{f:V6e,r:12},2199:{},2200:{},2201:{},2202:{f:OOe,r:12},2203:{f:t0},2204:{},2205:{},2206:{},2207:{},2211:{f:nOe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Bi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:tDe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:XOe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:f$},1:{},2:{f:uDe},3:{f:lDe},4:{f:oDe},5:{f:A$},7:{f:fDe},8:{},9:{f:WC},11:{},22:{f:Bi},30:{f:xOe},31:{},32:{},33:{f:x$},36:{},37:{f:d$},50:{f:hDe},62:{},52:{},67:{},68:{f:Bi},69:{},86:{},126:{},127:{f:iDe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:ADe},223:{},234:{},354:{},421:{},518:{f:I5},521:{f:WC},536:{f:g$},547:{f:p$},561:{},579:{},1030:{f:I5},1033:{f:WC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Er(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,o=t.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&q6(r)&&t.push(r)}}function f7e(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return Er(t,e,r,a);var s=e;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function Rw(t,e,r){return t||(t=Jt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function h7e(t,e,r,n){var a=Jt(9);return Rw(a,t,e),Jne(r,n||"b",a),a}function A7e(t,e,r){var n=Jt(8+2*r.length);return Rw(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function m7e(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?oo(fs(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?Er(t,2,dDe(r,n,a)):Er(t,3,cDe(r,n,a));return;case"b":case"e":Er(t,5,h7e(r,n,e.v,e.t));return;case"s":case"str":Er(t,4,A7e(r,n,(e.v||"").slice(0,255)));return}Er(t,1,Rw(null,r,n))}function p7e(t,e,r,n){var a=Array.isArray(e),s=ra(e["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=_n(s)}for(var u=s.s.r;u<=s.e.r;++u){l=_i(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Ls(d)),o=c[d]+l;var f=a?(e[u]||[])[d]:e[o];f&&m7e(t,f,u,d)}}}function g7e(t,e){for(var r=e||{},n=jc(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Er(n,r.biff==4?1033:r.biff==3?521:9,nR(t,16,r)),p7e(n,t.Sheets[t.SheetNames[a]],a,r),Er(n,10),n.end()}function x7e(t,e,r){Er(t,49,dOe({sz:12,name:"Arial"},r))}function v7e(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Er(t,1054,gOe(a,e[a],r))})}function y7e(t,e){var r=Jt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Er(t,2151,r),r=Jt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),nae(ra(e["!ref"]||"A1"),r),r.write_shift(4,4),Er(t,2152,r)}function b7e(t,e){for(var r=0;r<16;++r)Er(t,224,h$({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Er(t,224,h$(n,0,e))})}function w7e(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Er(t,440,GOe(n)),n[1].Tooltip&&Er(t,2048,qOe(n))}delete e["!links"]}function N7e(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&Er(t,125,ZOe(n4(a,n),a))})}}function C7e(t,e,r,n,a){var s=16+Nm(a.cellXfs,e,a);if(e.v==null&&!e.bf){Er(t,513,rg(r,n,s));return}if(e.bf)Er(t,6,X8e(e,r,n,a,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?oo(fs(e.v)):e.v;Er(t,515,jOe(r,n,o,s));break;case"b":case"e":Er(t,517,SOe(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=dR(a.Strings,e.v,a.revStrings);Er(t,253,hOe(r,n,l,s))}else Er(t,516,mOe(r,n,(e.v||"").slice(0,255),s,a));break;default:Er(t,513,rg(r,n,s))}}function _7e(t,e,r){var n=jc(),a=r.SheetNames[t],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,f="",A=[],h=ra(s["!ref"]||"A1"),m=u?65536:16384;if(h.e.c>255||h.e.r>=m){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,m-1)}Er(n,2057,nR(r,16,e)),Er(n,13,Ku(1)),Er(n,12,Ku(100)),Er(n,15,Zl(!0)),Er(n,17,Zl(!1)),Er(n,16,eg(.001)),Er(n,95,Zl(!0)),Er(n,42,Zl(!1)),Er(n,43,Zl(!1)),Er(n,130,Ku(1)),Er(n,128,EOe()),Er(n,131,Zl(!1)),Er(n,132,Zl(!1)),u&&N7e(n,s["!cols"]),Er(n,512,vOe(h,e)),u&&(s["!links"]=[]);for(var p=h.s.r;p<=h.e.r;++p){f=_i(p);for(var g=h.s.c;g<=h.e.c;++g){p===h.s.r&&(A[g]=Ls(g)),d=A[g]+f;var v=c?(s[p]||[])[g]:s[d];v&&(C7e(n,v,p,g,e),u&&v.l&&s["!links"].push([d,v.l]))}}var y=l.CodeName||l.name||a;return u&&Er(n,574,lOe((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&Er(n,229,LOe(s["!merges"])),u&&w7e(n,s),Er(n,442,Zne(y)),u&&y7e(n,s),Er(n,10),n.end()}function E7e(t,e,r){var n=jc(),a=(t||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(Er(n,2057,nR(t,5,r)),r.bookType=="xla"&&Er(n,135),Er(n,225,l?Ku(1200):null),Er(n,193,SFe(2)),c&&Er(n,191),c&&Er(n,192),Er(n,226),Er(n,92,WFe("SheetJS",r)),Er(n,66,Ku(l?1200:1252)),l&&Er(n,353,Ku(0)),l&&Er(n,448),Er(n,317,rDe(t.SheetNames.length)),l&&t.vbaraw&&Er(n,211),l&&t.vbaraw){var u=o.CodeName||"ThisWorkbook";Er(n,442,Zne(u))}Er(n,156,Ku(17)),Er(n,25,Zl(!1)),Er(n,18,Zl(!1)),Er(n,19,Ku(0)),l&&Er(n,431,Zl(!1)),l&&Er(n,444,Ku(0)),Er(n,61,iOe()),Er(n,64,Zl(!1)),Er(n,141,Ku(0)),Er(n,34,Zl(aUe(t)=="true")),Er(n,14,Zl(!0)),l&&Er(n,439,Zl(!1)),Er(n,218,Ku(0)),x7e(n,t,r),v7e(n,t.SSF,r),b7e(n,r),l&&Er(n,352,Zl(!1));var d=n.end(),f=jc();l&&Er(f,140,WOe()),l&&r.Strings&&f7e(f,252,eOe(r.Strings)),Er(f,10);var A=f.end(),h=jc(),m=0,p=0;for(p=0;p<t.SheetNames.length;++p)m+=(l?12:11)+(l?2:1)*t.SheetNames[p].length;var g=d.length+m+A.length;for(p=0;p<t.SheetNames.length;++p){var v=s[p]||{};Er(h,133,JFe({pos:g,hs:v.Hidden||0,dt:0,name:t.SheetNames[p]},r)),g+=e[p].length}var y=h.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return d.length&&b.push(d),y.length&&b.push(y),A.length&&b.push(A),Io(b)}function S7e(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=hs(fn)),t&&t.SSF&&(u1(),Xj(t.SSF),r.revssf=Jj(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,pR(r),r.cellXfs=[],Nm(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=_7e(a,r,t);return n.unshift(E7e(t,n,r)),Io(n)}function Kae(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Pc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return S7e(t,e);case 4:case 3:case 2:return g7e(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function I$(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),o=a.index,l=s&&s.index||t.length,c=dke(t.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,A=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(o=0;o<c.length;++o){var p=c[o].trim(),g=p.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var v=p.split(/<\/t[dh]>/i);for(l=0;l<v.length;++l){var y=v[l].trim();if(y.match(/<t[dh]/i)){for(var b=y,w=0;b.charAt(0)=="<"&&(w=b.indexOf(">"))>-1;)b=b.slice(w+1);for(var j=0;j<m.length;++j){var I=m[j];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,j=-1)}var _=An(y.slice(0,y.indexOf(">")));A=_.colspan?+_.colspan:1,((f=+_.rowspan)>1||A>1)&&m.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+A-1}});var S=_.t||_["data-t"]||"";if(!b.length){d+=A;continue}if(b=pne(b),h.s.r>u&&(h.s.r=u),h.e.r<u&&(h.e.r=u),h.s.c>d&&(h.s.c=d),h.e.c<d&&(h.e.c=d),!b.length){d+=A;continue}var E={t:"s",v:b};r.raw||!b.trim().length||S=="s"||(b==="TRUE"?E={t:"b",v:!0}:b==="FALSE"?E={t:"b",v:!1}:isNaN(qd(b))?isNaN(Pv(b).getDate())||(E={t:"d",v:fs(b)},r.cellDates||(E={t:"n",v:oo(E.v)}),E.z=r.dateNF||fn[14]):E={t:"n",v:qd(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=E):n[hn({r:u,c:d})]=E,d+=A}}}}return n["!ref"]=_n(h),m.length&&(n["!merges"]=m),n}function I7e(t,e,r,n){for(var a=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=hn({r,c:o}),f=n.dense?(t[r]||[])[o]:t[d],A=f&&f.v!=null&&(f.h||$6(f.w||(nA(f),f.w)||""))||"",h={};l>1&&(h.rowspan=l),c>1&&(h.colspan=c),n.editable?A='<span contenteditable="true">'+A+"</span>":f&&(h["data-t"]=f&&f.t||"z",f.v!=null&&(h["data-v"]=f.v),f.z!=null&&(h["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(A='<a href="'+f.l.Target+'">'+A+"</a>")),h.id=(n.id||"sjs")+"-"+d,s.push(_r("td",A,h))}}var m="<tr>";return m+s.join("")+"</tr>"}var j7e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',P7e="</body></html>";function B7e(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return wm(I$(r[0],e),e);var n=vR();return r.forEach(function(a,s){yR(n,I$(a,e),"Sheet"+(s+1))}),n}function T7e(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function qae(t,e){var r=e||{},n=r.header!=null?r.header:j7e,a=r.footer!=null?r.footer:P7e,s=[n],o=Pc(t["!ref"]);r.dense=Array.isArray(t),s.push(T7e(t,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(I7e(t,o,l,r));return s.push("</table>"+a),s.join("")}function zae(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?Us(n.origin):n.origin;a=o.r,s=o.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=Pc(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],A=0,h=t["!rows"]||(t["!rows"]=[]),m=0,p=0,g=0,v=0,y=0,b=0;for(t["!cols"]||(t["!cols"]=[]);m<l.length&&p<c;++m){var w=l[m];if(j$(w)){if(n.display)continue;h[p]={hidden:!0}}var j=w.children;for(g=v=0;g<j.length;++g){var I=j[g];if(!(n.display&&j$(I))){var _=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):pne(I.innerHTML),S=I.getAttribute("data-z")||I.getAttribute("z");for(A=0;A<f.length;++A){var E=f[A];E.s.c==v+s&&E.s.r<p+a&&p+a<=E.e.r&&(v=E.e.c+1-s,A=-1)}b=+I.getAttribute("colspan")||1,((y=+I.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:p+a,c:v+s},e:{r:p+a+(y||1)-1,c:v+s+(b||1)-1}});var F={t:"s",v:_},P=I.getAttribute("data-t")||I.getAttribute("t")||"";_!=null&&(_.length==0?F.t=P||"z":n.raw||_.trim().length==0||P=="s"||(_==="TRUE"?F={t:"b",v:!0}:_==="FALSE"?F={t:"b",v:!1}:isNaN(qd(_))?isNaN(Pv(_).getDate())||(F={t:"d",v:fs(_)},n.cellDates||(F={t:"n",v:oo(F.v)}),F.z=n.dateNF||fn[14]):F={t:"n",v:qd(_)})),F.z===void 0&&S!=null&&(F.z=S);var k="",D=I.getElementsByTagName("A");if(D&&D.length)for(var J=0;J<D.length&&!(D[J].hasAttribute("href")&&(k=D[J].getAttribute("href"),k.charAt(0)!="#"));++J);k&&k.charAt(0)!="#"&&(F.l={Target:k}),n.dense?(t[p+a]||(t[p+a]=[]),t[p+a][v+s]=F):t[hn({c:v+s,r:p+a})]=F,u.e.c<v+s&&(u.e.c=v+s),v+=b}}++p}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,p-1+a),t["!ref"]=_n(u),p>=c&&(t["!fullref"]=_n((u.e.r=l.length-m+p-1+a,u))),t}function Wae(t,e){var r=e||{},n=r.dense?[]:{};return zae(n,t,e)}function k7e(t,e){return wm(Wae(t,e),e)}function j$(t){var e="",r=F7e(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function F7e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function O7e(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=ta(e.replace(/<[^>]*>/g,""));return[r]}var P$={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Xae(t,e){var r=e||{},n=G6(t),a=[],s,o,l={name:""},c="",u=0,d,f,A={},h=[],m=r.dense?[]:{},p,g,v={value:""},y="",b=0,w=[],j=-1,I=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,E={},F=[],P={},k=0,D=0,J=[],fe=1,Ae=1,me=[],pe={Names:[]},ne={},Pe=["",""],Be=[],O={},G="",q=0,U=!1,Y=!1,Z=0;for(S2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=S2.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?m["!ref"]=_n(_):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(m["!fullref"]=m["!ref"],_.e.r=r.sheetRows-1,m["!ref"]=_n(_)),F.length&&(m["!merges"]=F),J.length&&(m["!rows"]=J),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),h.push(d.name),A[d.name]=m,Y=!1):p[0].charAt(p[0].length-2)!=="/"&&(d=An(p[0],!1),j=I=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,m=r.dense?[]:{},F=[],J=[],Y=!0);break;case"table-row-group":p[1]==="/"?--S:++S;break;case"table-row":case"":if(p[1]==="/"){j+=fe,fe=1;break}if(f=An(p[0],!1),f.?j=f.-1:j==-1&&(j=0),fe=+f["number-rows-repeated"]||1,fe<10)for(Z=0;Z<fe;++Z)S>0&&(J[j+Z]={level:S});I=-1;break;case"covered-table-cell":p[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(m[j]||(m[j]=[]),m[j][I]={t:"z"}):m[hn({r:j,c:I})]={t:"z"}),y="",w=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++I,v=An(p[0],!1),Ae=parseInt(v["number-columns-repeated"]||"1",10),g={t:"z",v:null},v.formula&&r.cellFormula!=!1&&(g.f=_$(ta(v.formula))),(v.||v["value-type"])=="string"&&(g.t="s",g.v=ta(v["string-value"]||""),r.dense?(m[j]||(m[j]=[]),m[j][I]=g):m[hn({r:j,c:I})]=g),I+=Ae-1;else if(p[1]!=="/"){++I,y="",b=0,w=[],Ae=1;var R=fe?j+fe-1:j;if(I>_.e.c&&(_.e.c=I),I<_.s.c&&(_.s.c=I),j<_.s.r&&(_.s.r=j),R>_.e.r&&(_.e.r=R),v=An(p[0],!1),Be=[],O={},g={t:v.||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=ta(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(k=parseInt(v["number-matrix-rows-spanned"],10)||0,D=parseInt(v["number-matrix-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+k-1,c:I+D-1}},g.F=_n(P),me.push([P,g.F])),v.formula)g.f=_$(v.formula);else for(Z=0;Z<me.length;++Z)j>=me[Z][0].s.r&&j<=me[Z][0].e.r&&I>=me[Z][0].s.c&&I<=me[Z][0].e.c&&(g.F=me[Z][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(k=parseInt(v["number-rows-spanned"],10)||0,D=parseInt(v["number-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+k-1,c:I+D-1}},F.push(P)),v["number-columns-repeated"]&&(Ae=parseInt(v["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=ls(v["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(v.value);break;case"percentage":g.t="n",g.v=parseFloat(v.value);break;case"currency":g.t="n",g.v=parseFloat(v.value);break;case"date":g.t="d",g.v=fs(v["date-value"]),r.cellDates||(g.t="n",g.v=oo(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=lke(v["time-value"])/86400,r.cellDates&&(g.t="d",g.v=Zj(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(v.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",v["string-value"]!=null&&(y=ta(v["string-value"]),w=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(U=!1,g.t==="s"&&(g.v=y||"",w.length&&(g.R=w),U=b==0),ne.Target&&(g.l=ne),Be.length>0&&(g.c=Be,Be=[]),y&&r.cellText!==!1&&(g.w=y),U&&(g.t="z",delete g.v),(!U||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var H=0;H<fe;++H){if(Ae=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(m[j+H]||(m[j+H]=[]),m[j+H][I]=H==0?g:hs(g);--Ae>0;)m[j+H][I+Ae]=hs(g);else for(m[hn({r:j+H,c:I})]=g;--Ae>0;)m[hn({r:j+H,c:I+Ae})]=hs(g);_.e.c<=I&&(_.e.c=I)}Ae=parseInt(v["number-columns-repeated"]||"1",10),I+=Ae-1,Ae=0,g={},y="",w=[]}ne={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s;O.t=y,w.length&&(O.R=w),O.a=G,Be.push(O)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);G="",q=0,y="",b=0,w=[];break;case"creator":p[1]==="/"?G=n.slice(q,p.index):q=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);y="",b=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(E[l.name]=c,(s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&(c="",l=An(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=An(p[0],!1),c+=P$[p[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=An(p[0],!1),c+=P$[p[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":o=An(p[0],!1),Pe=j5(o["cell-range-address"]);var te={Name:o.name,Ref:Pe[0]+"!"+Pe[1]};Y&&(te.Sheet=h.length),pe.Names.push(te);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!v||!v["string-value"])){var ye=O7e(n.slice(b,p.index));y=(y.length>0?y+`
`:"")+ye[0]}else An(p[0],!1),b=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{Pe=j5(An(p[0])["target-range-address"]),A[Pe[0]]["!autofilter"]={ref:Pe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(ne=An(p[0],!1),!ne.href)break;ne.Target=ta(ne.href),delete ne.href,ne.Target.charAt(0)=="#"&&ne.Target.indexOf(".")>-1?(Pe=j5(ne.Target.slice(1)),ne.Target="#"+Pe[0]+"!"+Pe[1]):ne.Target.match(/^\.\.[\\\/]/)&&(ne.Target=ne.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var Q={Sheets:A,SheetNames:h,Workbook:pe};return r.bookSheets&&delete Q.Sheets,Q}function B$(t,e){e=e||{},Gu(t,"META-INF/manifest.xml")&&lFe(Pi(t,"META-INF/manifest.xml"),e);var r=nu(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Xae(Ma(r),e);return Gu(t,"meta.xml")&&(n.Props=Une(Pi(t,"meta.xml"))),n}function T$(t,e){return Xae(t,e)}var D7e=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+E2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Si+e}}(),k$=function(){var t=function(s){return Ba(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+Ba(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=Pc(s["!ref"]||"A1"),A=s["!merges"]||[],h=0,m=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",g=s["!rows"]||[];for(u=0;u<f.s.r;++u)p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=f.e.r;++u){for(p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<f.s.c;++d)c.push(e);for(;d<=f.e.c;++d){var v=!1,y={},b="";for(h=0;h!=A.length;++h)if(!(A[h].s.c>d)&&!(A[h].s.r>u)&&!(A[h].e.c<d)&&!(A[h].e.r<u)){(A[h].s.c!=d||A[h].s.r!=u)&&(v=!0),y["table:number-columns-spanned"]=A[h].e.c-A[h].s.c+1,y["table:number-rows-spanned"]=A[h].e.r-A[h].s.r+1;break}if(v){c.push(r);continue}var w=hn({r:u,c:d}),j=m?(s[u]||[])[d]:s[w];if(j&&j.f&&(y["table:formula"]=Ba(rMe(j.f)),j.F&&j.F.slice(0,w.length)==w)){var I=Pc(j.F);y["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,y["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!j){c.push(e);continue}switch(j.t){case"b":b=j.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=j.v?"true":"false";break;case"n":b=j.w||String(j.v||0),y["office:value-type"]="float",y["office:value"]=j.v||0;break;case"s":case"str":b=j.v==null?"":j.v,y["office:value-type"]="string";break;case"d":b=j.w||fs(j.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=fs(j.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(e);continue}var _=t(b);if(j.l&&j.l.Target){var S=j.l.Target;S=S.charAt(0)=="#"?"#"+nMe(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),_=_r("text:a",_,{"xlink:href":S.replace(/&/g,"&amp;")})}c.push("          "+_r("table:table-cell",_r("text:p",_,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;cm(f),f.ods=l;var A=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+A+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[Si],u=E2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=E2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Lne().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(n(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function Yae(t,e){if(e.bookType=="fods")return k$(t,e);var r=Q6(),n="",a=[],s=[];return n="mimetype",jn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",jn(r,n,k$(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",jn(r,n,D7e(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",jn(r,n,Si+Lne()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",jn(r,n,dFe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",jn(r,n,cFe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ng(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Yk(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Ma(bm(t))}function R7e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):ru(kf(t))}function M7e(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function dm(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function F$(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function L7e(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function U7e(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function F2(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function _a(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function si(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function aa(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=F2(t,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:o=4,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=F2(t,r),l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function Ko(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(_a(n*8+a.type)),a.type==2&&e.push(_a(a.data.length)),e.push(a.data))})}),dm(e)}function AR(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Lu(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=F2(t,n),s=aa(t.slice(n[0],n[0]+a));n[0]+=a;var o={id:si(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=aa(l.data),u=si(c[3][0].data);o.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(o.merge=si(s[3][0].data)>>>0>0),r.push(o)}return r}function ox(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:_a(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:_a(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:_a(o.data.length)}],n[2].push({data:Ko(o.meta),type:2})});var s=Ko(n);e.push(_a(s.length)),e.push(s),a.forEach(function(o){return e.push(o)})}),dm(e)}function Q7e(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=F2(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var o=e[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=e[r[0]],l>1&&(o|=e[r[0]+1]<<8),l>2&&(o|=e[r[0]+2]<<16),l>3&&(o|=e[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(e.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[dm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=dm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Uu(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(Q7e(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return dm(e)}function lx(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=_a(n),o=s.length;e.push(s),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return dm(e)}function V7e(t,e,r,n){var a=ng(t),s=a.getUint32(4,!0),o=(n>1?12:8)+F$(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(o,!0),o+=4),o+=F$(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(o,!0),o+=4),s&32&&(u=a.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var f;switch(t[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:e[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:e[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return f}function H7e(t,e,r){var n=ng(t),a=n.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=L7e(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(o=n.getUint32(s,!0),s+=4);var f;switch(t[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return f}function B5(t,e){var r=new Uint8Array(32),n=ng(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,U7e(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function T5(t,e){var r=new Uint8Array(32),n=ng(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function $7e(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return V7e(t,e,r,t[0]);case 5:return H7e(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function _l(t){var e=aa(t);return F2(e[1][0].data)}function O$(t,e){var r=aa(e.data),n=si(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(o){var l=aa(o.data),c=si(l[1][0].data)>>>0;switch(n){case 1:s[c]=Yk(l[3][0].data);break;case 8:{var u=t[_l(l[9][0].data)][0],d=aa(u.data),f=t[_l(d[1][0].data)][0],A=si(f.meta[1][0].data);if(A!=2001)throw new Error("2000 unexpected reference to ".concat(A));var h=aa(f.data);s[c]=h[3].map(function(m){return Yk(m.data)}).join("")}break}}),s}function G7e(t,e){var r,n,a,s,o,l,c,u,d,f,A,h,m,p,g=aa(t),v=si(g[1][0].data)>>>0,y=si(g[2][0].data)>>>0,b=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&si(g[8][0].data)>0||!1,w,j;if((s=(a=g[7])==null?void 0:a[0])!=null&&s.data&&e!=0)w=(l=(o=g[7])==null?void 0:o[0])==null?void 0:l.data,j=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=g[4])==null?void 0:d[0])!=null&&f.data&&e!=1)w=(h=(A=g[4])==null?void 0:A[0])==null?void 0:h.data,j=(p=(m=g[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var I=b?4:1,_=ng(w),S=[],E=0;E<w.length/2;++E){var F=_.getUint16(E*2,!0);F<65535&&S.push([E,F])}if(S.length!=y)throw"Expected ".concat(y," cells, found ").concat(S.length);var P=[];for(E=0;E<S.length-1;++E)P[S[E][0]]=j.subarray(S[E][1]*I,S[E+1][1]*I);return S.length>=1&&(P[S[S.length-1][0]]=j.subarray(S[S.length-1][1]*I)),{R:v,cells:P}}function K7e(t,e){var r,n=aa(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?si(n[7][0].data)>>>0>0?1:0:-1,s=AR(n[5],function(o){return G7e(o,a)});return{nrows:si(n[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function q7e(t,e,r){var n,a=aa(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(si(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(si(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=_n(s);var o=aa(a[4][0].data),l=O$(t,t[_l(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?O$(t,t[_l(o[17][0].data)][0]):[],u=aa(o[3][0].data),d=0;u[1].forEach(function(f){var A=aa(f.data),h=t[_l(A[2][0].data)][0],m=si(h.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=K7e(t,h);p.data.forEach(function(g,v){g.forEach(function(y,b){var w=hn({r:d+v,c:b}),j=$7e(y,l,c);j&&(r[w]=j)})}),d+=p.nrows})}function z7e(t,e){var r=aa(e.data),n={"!ref":"A1"},a=t[_l(r[2][0].data)],s=si(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return q7e(t,a[0],n),n}function W7e(t,e){var r,n=aa(e.data),a={name:(r=n[1])!=null&&r[0]?Yk(n[1][0].data):"",sheets:[]},s=AR(n[2],_l);return s.forEach(function(o){t[o].forEach(function(l){var c=si(l.meta[1][0].data);c==6e3&&a.sheets.push(z7e(t,l))})}),a}function X7e(t,e){var r=vR(),n=aa(e.data),a=AR(n[1],_l);if(a.forEach(function(s){t[s].forEach(function(o){var l=si(o.meta[1][0].data);if(l==2){var c=W7e(t,o);c.sheets.forEach(function(u,d){yR(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function k5(t){var e,r,n,a,s={},o=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Uu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Lu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&si(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=si(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return X7e(s,l)}function Y7e(t,e,r){var n,a,s,o;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&si(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=ng(t[7][0].data),d=0,f=[],A=ng(t[4][0].data),h=0,m=[],p=0;p<e.length;++p){if(e[p]==null){u.setUint16(p*2,65535,!0),A.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),A.setUint16(p*2,h,!0);var g,v;switch(typeof e[p]){case"string":g=B5({t:"s",v:e[p]},r),v=T5({t:"s",v:e[p]},r);break;case"number":g=B5({t:"n",v:e[p]},r),v=T5({t:"n",v:e[p]},r);break;case"boolean":g=B5({t:"b",v:e[p]},r),v=T5({t:"b",v:e[p]},r);break;default:throw new Error("Unsupported value "+e[p])}f.push(g),d+=g.length,m.push(v),h+=v.length,++c}for(t[2][0].data=_a(c);p<t[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),A.setUint16(p*2,65535,!0);return t[6][0].data=dm(f),t[3][0].data=dm(m),c}function J7e(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Pc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(_n(n)));var s=GS(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(G){return G.forEach(function(q){typeof q=="string"&&o.push(q)})});var l={},c=[],u=an.read(e.numbers,{type:"base64"});u.FileIndex.map(function(G,q){return[G,u.FullPaths[q]]}).forEach(function(G){var q=G[0],U=G[1];if(q.type==2&&q.name.match(/\.iwa/)){var Y=q.content,Z=Uu(Y),R=Lu(Z);R.forEach(function(H){c.push(H.id),l[H.id]={deps:[],location:U,type:si(H.messages[0].meta[1][0].data)}})}}),c.sort(function(G,q){return G-q});var d=c.filter(function(G){return G>1}).map(function(G){return[G,_a(G)]});u.FileIndex.map(function(G,q){return[G,u.FullPaths[q]]}).forEach(function(G){var q=G[0];if(G[1],!!q.name.match(/\.iwa/)){var U=Lu(Uu(q.content));U.forEach(function(Y){Y.messages.forEach(function(Z){d.forEach(function(R){Y.messages.some(function(H){return si(H.meta[1][0].data)!=11006&&M7e(H.data,R[1])})&&l[R[0]].deps.push(Y.id)})})})}});for(var f=an.find(u,l[1].location),A=Lu(Uu(f.content)),h,m=0;m<A.length;++m){var p=A[m];p.id==1&&(h=p)}var g=_l(aa(h.messages[0].data)[1][0].data);for(f=an.find(u,l[g].location),A=Lu(Uu(f.content)),m=0;m<A.length;++m)p=A[m],p.id==g&&(h=p);for(g=_l(aa(h.messages[0].data)[2][0].data),f=an.find(u,l[g].location),A=Lu(Uu(f.content)),m=0;m<A.length;++m)p=A[m],p.id==g&&(h=p);for(g=_l(aa(h.messages[0].data)[2][0].data),f=an.find(u,l[g].location),A=Lu(Uu(f.content)),m=0;m<A.length;++m)p=A[m],p.id==g&&(h=p);var v=aa(h.messages[0].data);{v[6][0].data=_a(n.e.r+1),v[7][0].data=_a(n.e.c+1);var y=_l(v[46][0].data),b=an.find(u,l[y].location),w=Lu(Uu(b.content));{for(var j=0;j<w.length&&w[j].id!=y;++j);if(w[j].id!=y)throw"Bad ColumnRowUIDMapArchive";var I=aa(w[j].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var _=0;_<=n.e.c;++_){var S=[];S[1]=S[2]=[{type:0,data:_a(_+420690)}],I[1].push({type:2,data:Ko(S)}),I[2].push({type:0,data:_a(_)}),I[3].push({type:0,data:_a(_)})}I[4]=[],I[5]=[],I[6]=[];for(var E=0;E<=n.e.r;++E)S=[],S[1]=S[2]=[{type:0,data:_a(E+726270)}],I[4].push({type:2,data:Ko(S)}),I[5].push({type:0,data:_a(E)}),I[6].push({type:0,data:_a(E)});w[j].messages[0].data=Ko(I)}b.content=lx(ox(w)),b.size=b.content.length,delete v[46];var F=aa(v[4][0].data);{F[7][0].data=_a(n.e.r+1);var P=aa(F[1][0].data),k=_l(P[2][0].data);b=an.find(u,l[k].location),w=Lu(Uu(b.content));{if(w[0].id!=k)throw"Bad HeaderStorageBucket";var D=aa(w[0].messages[0].data);for(E=0;E<s.length;++E){var J=aa(D[2][0].data);J[1][0].data=_a(E),J[4][0].data=_a(s[E].length),D[2][E]={type:D[2][0].type,data:Ko(J)}}w[0].messages[0].data=Ko(D)}b.content=lx(ox(w)),b.size=b.content.length;var fe=_l(F[2][0].data);b=an.find(u,l[fe].location),w=Lu(Uu(b.content));{if(w[0].id!=fe)throw"Bad HeaderStorageBucket";for(D=aa(w[0].messages[0].data),_=0;_<=n.e.c;++_)J=aa(D[2][0].data),J[1][0].data=_a(_),J[4][0].data=_a(n.e.r+1),D[2][_]={type:D[2][0].type,data:Ko(J)};w[0].messages[0].data=Ko(D)}b.content=lx(ox(w)),b.size=b.content.length;var Ae=_l(F[4][0].data);(function(){for(var G=an.find(u,l[Ae].location),q=Lu(Uu(G.content)),U,Y=0;Y<q.length;++Y){var Z=q[Y];Z.id==Ae&&(U=Z)}var R=aa(U.messages[0].data);{R[3]=[];var H=[];o.forEach(function(Q,Ge){H[1]=[{type:0,data:_a(Ge)}],H[2]=[{type:0,data:_a(1)}],H[3]=[{type:2,data:R7e(Q)}],R[3].push({type:2,data:Ko(H)})})}U.messages[0].data=Ko(R);var te=ox(q),ye=lx(te);G.content=ye,G.size=G.content.length})();var me=aa(F[3][0].data);{var pe=me[1][0];delete me[2];var ne=aa(pe.data);{var Pe=_l(ne[2][0].data);(function(){for(var G=an.find(u,l[Pe].location),q=Lu(Uu(G.content)),U,Y=0;Y<q.length;++Y){var Z=q[Y];Z.id==Pe&&(U=Z)}var R=aa(U.messages[0].data);{delete R[6],delete me[7];var H=new Uint8Array(R[5][0].data);R[5]=[];for(var te=0,ye=0;ye<=n.e.r;++ye){var Q=aa(H);te+=Y7e(Q,s[ye],o),Q[1][0].data=_a(ye),R[5].push({data:Ko(Q),type:2})}R[1]=[{type:0,data:_a(n.e.c+1)}],R[2]=[{type:0,data:_a(n.e.r+1)}],R[3]=[{type:0,data:_a(te)}],R[4]=[{type:0,data:_a(n.e.r+1)}]}U.messages[0].data=Ko(R);var Ge=ox(q),ie=lx(Ge);G.content=ie,G.size=G.content.length})()}pe.data=Ko(ne)}F[3][0].data=Ko(me)}v[4][0].data=Ko(F)}h.messages[0].data=Ko(v);var Be=ox(A),O=lx(Be);return f.content=O,f.size=f.content.length,u}function Jae(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function mR(t){Jae([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function pR(t){Jae([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function Z7e(t){return Mn.WS.indexOf(t)>-1?"sheet":t==Mn.CS?"chart":t==Mn.DS?"dialog":t==Mn.MS?"macro":t&&t.length?t:"sheet"}function e9e(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,Z7e(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function t9e(t,e,r,n,a,s,o,l,c,u,d,f){try{s[n]=Eb(nu(t,r,!0),e);var A=Pi(t,e),h;switch(l){case"sheet":h=NUe(A,e,a,c,s[n],u,d,f);break;case"chart":if(h=CUe(A,e,a,c,s[n],u,d,f),!h||!h["!drawel"])break;var m=Gy(h["!drawel"].Target,e),p=I2(m),g=uRe(nu(t,m,!0),Eb(nu(t,p,!0),m)),v=Gy(g,m),y=I2(v);h=YLe(nu(t,v,!0),v,c,Eb(nu(t,y,!0),v),u,h);break;case"macro":h=_Ue(A,e,a,c,s[n],u,d,f);break;case"dialog":h=EUe(A,e,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=h;var b=[];s&&s[n]&&oi(s[n]).forEach(function(w){var j="";if(s[n][w].Type==Mn.CMNT){j=Gy(s[n][w].Target,e);var I=PUe(Pi(t,j,!0),j,c);if(!I||!I.length)return;y$(h,I,!1)}s[n][w].Type==Mn.TCMNT&&(j=Gy(s[n][w].Target,e),b=b.concat(fRe(Pi(t,j,!0),c)))}),b&&b.length&&y$(h,b,!0,c.people||[])}catch(w){if(c.WTF)throw w}}function Fu(t){return t.charAt(0)=="/"?t.slice(1):t}function r9e(t,e){if(u1(),e=e||{},mR(e),Gu(t,"META-INF/manifest.xml")||Gu(t,"objectdata.xml"))return B$(t,e);if(Gu(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof k5<"u"){if(t.FileIndex)return k5(t);var r=an.utils.cfb_new();return QH(t).forEach(function(J){jn(r,J,hke(t,J))}),k5(r)}throw new Error("Unsupported NUMBERS file")}if(!Gu(t,"[Content_Types].xml"))throw Gu(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Gu(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=QH(t),a=iFe(nu(t,"[Content_Types].xml")),s=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Pi(t,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Pi(t,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(Sb=[],a.sst)try{Sb=jUe(Pi(t,Fu(a.sst)),a.sst,e)}catch(J){if(e.WTF)throw J}e.cellStyles&&a.themes.length&&(c=IUe(nu(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=SUe(Pi(t,Fu(a.style)),a.style,c,e))}a.links.map(function(J){try{var fe=Eb(nu(t,I2(Fu(J))),J);return TUe(Pi(t,Fu(J)),fe,J,e)}catch{}});var d=wUe(Pi(t,Fu(a.workbooks[0])),a.workbooks[0],e),f={},A="";a.coreprops.length&&(A=Pi(t,Fu(a.coreprops[0]),!0),A&&(f=Une(A)),a.extprops.length!==0&&(A=Pi(t,Fu(a.extprops[0]),!0),A&&hFe(A,f,e)));var h={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(A=nu(t,Fu(a.custprops[0]),!0),A&&(h=mFe(A,e)));var m={};if((e.bookSheets||e.bookProps)&&(d.Sheets?o=d.Sheets.map(function(fe){return fe.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),e.bookProps&&(m.Props=f,m.Custprops=h),e.bookSheets&&typeof o<"u"&&(m.SheetNames=o),e.bookSheets?m.SheetNames:e.bookProps))return m;o={};var p={};e.bookDeps&&a.calcchain&&(p=BUe(Pi(t,Fu(a.calcchain)),a.calcchain));var g=0,v={},y,b;{var w=d.Sheets;f.Worksheets=w.length,f.SheetNames=[];for(var j=0;j!=w.length;++j)f.SheetNames[j]=w[j].name}var I=s?"bin":"xml",_=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,_+1)+"_rels/"+a.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");Gu(t,S)||(S="xl/_rels/workbook."+I+".rels");var E=Eb(nu(t,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=kUe(Pi(t,Fu(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=ARe(Pi(t,Fu(a.people[0])),e)),E&&(E=e9e(E,d.Sheets));var F=Pi(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var P="sheet";if(E&&E[g]?(y="xl/"+E[g][1].replace(/[\/]?xl\//,""),Gu(t,y)||(y=E[g][1]),Gu(t,y)||(y=S.replace(/_rels\/.*$/,"")+E[g][1]),P=E[g][2]):(y="xl/worksheets/sheet"+(g+1-F)+"."+I,y=y.replace(/sheet0\./,"sheet.")),b=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var k=!1,D=0;D!=e.sheets.length;++D)typeof e.sheets[D]=="number"&&e.sheets[D]==g&&(k=1),typeof e.sheets[D]=="string"&&e.sheets[D].toLowerCase()==f.SheetNames[g].toLowerCase()&&(k=1);if(!k)continue e}}t9e(t,y,b,f.SheetNames[g],g,v,o,P,e,d,c,u)}return m={Directory:a,Workbook:d,Props:f,Custprops:h,Deps:p,Sheets:o,SheetNames:f.SheetNames,Strings:Sb,Styles:u,Themes:c,SSF:hs(fn)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(J,fe){J=J.replace(/^Root Entry[\/]/,""),m.keys.push(J),m.files[J]=t.FileIndex[fe]}))),e&&e.bookVBA&&(a.vba.length>0?m.vbaraw=Pi(t,Fu(a.vba[0]),!0):a.defaults&&a.defaults.bin===wRe&&(m.vbaraw=Pi(t,"xl/vbaProject.bin",!0))),m}function n9e(t,e){var r=e||{},n="Workbook",a=an.find(t,n);try{if(n="/!DataSpaces/Version",a=an.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(kDe(a.content),n="/!DataSpaces/DataSpaceMap",a=an.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=ODe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=an.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=DDe(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=an.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);MDe(a.content)}catch{}if(n="/EncryptionInfo",a=an.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=LDe(a.content);if(n="/EncryptedPackage",a=an.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function a9e(t,e){return e.bookType=="ods"?Yae(t,e):e.bookType=="numbers"?J7e(t,e):e.bookType=="xlsb"?s9e(t,e):i9e(t,e)}function s9e(t,e){$x=1024,t&&!t.SSF&&(t.SSF=hs(fn)),t&&t.SSF&&(u1(),Xj(t.SSF),e.revssf=Jj(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Ib?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=_ae.indexOf(e.bookType)>-1,a=tR();pR(e=e||{});var s=Q6(),o="",l=0;if(e.cellXfs=[],Nm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",jn(s,o,Qne(t.Props,e)),a.coreprops.push(o),Sa(e.rels,2,o,Mn.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,jn(s,o,$ne(t.Props)),a.extprops.push(o),Sa(e.rels,3,o,Mn.EXT_PROPS),t.Custprops!==t.Props&&oi(t.Custprops||{}).length>0&&(o="docProps/custom.xml",jn(s,o,Gne(t.Custprops)),a.custprops.push(o),Sa(e.rels,4,o,Mn.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},f=t.Sheets[t.SheetNames[l-1]],A=(f||{})["!type"]||"sheet";switch(A){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,jn(s,o,OUe(l-1,o,e,t,d)),a.sheets.push(o),Sa(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Mn.WS[0])}if(f){var h=f["!comments"],m=!1,p="";h&&h.length>0&&(p="xl/comments"+l+"."+r,jn(s,p,MUe(h,p)),a.comments.push(p),Sa(d,-1,"../comments"+l+"."+r,Mn.CMNT),m=!0),f["!legacy"]&&m&&jn(s,"xl/drawings/vmlDrawing"+l+".vml",Nae(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&jn(s,I2(o),iv(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,jn(s,o,RUe(e.Strings,o,e)),a.strs.push(o),Sa(e.wbrels,-1,"sharedStrings."+r,Mn.SST)),o="xl/workbook."+r,jn(s,o,FUe(t,o)),a.workbooks.push(o),Sa(e.rels,1,o,Mn.WB),o="xl/theme/theme1.xml",jn(s,o,oR(t.Themes,e)),a.themes.push(o),Sa(e.wbrels,-1,"theme/theme1.xml",Mn.THEME),o="xl/styles."+r,jn(s,o,DUe(t,o,e)),a.styles.push(o),Sa(e.wbrels,-1,"styles."+r,Mn.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",jn(s,o,t.vbaraw),a.vba.push(o),Sa(e.wbrels,-1,"vbaProject.bin",Mn.VBA)),o="xl/metadata."+r,jn(s,o,LUe(o)),a.metadata.push(o),Sa(e.wbrels,-1,"metadata."+r,Mn.XLMETA),jn(s,"[Content_Types].xml",Mne(a,e)),jn(s,"_rels/.rels",iv(e.rels)),jn(s,"xl/_rels/workbook."+r+".rels",iv(e.wbrels)),delete e.revssf,delete e.ssf,s}function i9e(t,e){$x=1024,t&&!t.SSF&&(t.SSF=hs(fn)),t&&t.SSF&&(u1(),Xj(t.SSF),e.revssf=Jj(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Ib?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=_ae.indexOf(e.bookType)>-1,a=tR();pR(e=e||{});var s=Q6(),o="",l=0;if(e.cellXfs=[],Nm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",jn(s,o,Qne(t.Props,e)),a.coreprops.push(o),Sa(e.rels,2,o,Mn.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,jn(s,o,$ne(t.Props)),a.extprops.push(o),Sa(e.rels,3,o,Mn.EXT_PROPS),t.Custprops!==t.Props&&oi(t.Custprops||{}).length>0&&(o="docProps/custom.xml",jn(s,o,Gne(t.Custprops)),a.custprops.push(o),Sa(e.rels,4,o,Mn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var f={"!id":{}},A=t.Sheets[t.SheetNames[l-1]],h=(A||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,jn(s,o,Dae(l-1,e,t,f)),a.sheets.push(o),Sa(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Mn.WS[0])}if(A){var m=A["!comments"],p=!1,g="";if(m&&m.length>0){var v=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(v=!0)})}),v&&(g="xl/threadedComments/threadedComment"+l+"."+r,jn(s,g,hRe(m,d,e)),a.threadedcomments.push(g),Sa(f,-1,"../threadedComments/threadedComment"+l+"."+r,Mn.TCMNT)),g="xl/comments"+l+"."+r,jn(s,g,Cae(m)),a.comments.push(g),Sa(f,-1,"../comments"+l+"."+r,Mn.CMNT),p=!0}A["!legacy"]&&p&&jn(s,"xl/drawings/vmlDrawing"+l+".vml",Nae(l,A["!comments"])),delete A["!comments"],delete A["!legacy"]}f["!id"].rId1&&jn(s,I2(o),iv(f))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,jn(s,o,dae(e.Strings,e)),a.strs.push(o),Sa(e.wbrels,-1,"sharedStrings."+r,Mn.SST)),o="xl/workbook."+r,jn(s,o,Qae(t)),a.workbooks.push(o),Sa(e.rels,1,o,Mn.WB),o="xl/theme/theme1.xml",jn(s,o,oR(t.Themes,e)),a.themes.push(o),Sa(e.wbrels,-1,"theme/theme1.xml",Mn.THEME),o="xl/styles."+r,jn(s,o,vae(t,e)),a.styles.push(o),Sa(e.wbrels,-1,"styles."+r,Mn.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",jn(s,o,t.vbaraw),a.vba.push(o),Sa(e.wbrels,-1,"vbaProject.bin",Mn.VBA)),o="xl/metadata."+r,jn(s,o,wae()),a.metadata.push(o),Sa(e.wbrels,-1,"metadata."+r,Mn.XLMETA),d.length>1&&(o="xl/persons/person.xml",jn(s,o,mRe(d)),a.people.push(o),Sa(e.wbrels,-1,"persons/person.xml",Mn.PEOPLE)),jn(s,"[Content_Types].xml",Mne(a,e)),jn(s,"_rels/.rels",iv(e.rels)),jn(s,"xl/_rels/workbook."+r+".rels",iv(e.wbrels)),delete e.revssf,delete e.ssf,s}function gR(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=mu(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function o9e(t,e){return an.find(t,"EncryptedPackage")?n9e(t,e):Gae(t,e)}function l9e(t,e){var r,n=t,a=e||{};return a.type||(a.type=kn&&Buffer.isBuffer(t)?"buffer":"base64"),r=hne(n,a),r9e(r,a)}function Zae(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Wk(t.slice(r),e);default:break e}return Bv.to_workbook(t,e)}function c9e(t,e){var r="",n=gR(t,e);switch(e.type){case"base64":r=mu(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Zp(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ma(r)),e.type="binary",Zae(r,e)}function u9e(t,e){var r=t;return e.type=="base64"&&(r=mu(r)),r=w2.utils.decode(1200,r.slice(2),"str"),e.type="binary",Zae(r,e)}function d9e(t){return t.match(/[^\x00-\x7F]/)?kf(t):t}function F5(t,e,r,n){return n?(r.type="string",Bv.to_workbook(t,r)):Bv.to_workbook(e,r)}function O2(t,e){D6();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return O2(new Uint8Array(t),(r=hs(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),lv={},r.dateNF&&(lv.dateNF=r.dateNF),r.type||(r.type=kn&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=kn?"buffer":"binary",n=ske(t),typeof Uint8Array<"u"&&!kn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=d9e(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=hs(r),r.type="array",O2(R6(n),r)}switch((a=gR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return o9e(an.read(n,r),r);break;case 9:if(a[1]<=8)return Gae(n,r);break;case 60:return Wk(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return pDe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return cae.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?l9e(n,r):F5(t,n,r,s);case 239:return a[3]===60?Wk(n,r):F5(t,n,r,s);case 255:if(a[1]===254)return u9e(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return jp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return jp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return zk.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return pae.to_workbook(n,r);break;case 10:case 13:case 32:return c9e(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return mDe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?zk.to_workbook(n,r):F5(t,n,r,s)}function ese(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Pw(e.file,an.write(t,{type:kn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return an.write(t,e)}function f9e(t,e){var r=hs(e||{}),n=a9e(t,r);return h9e(n,r)}function h9e(t,e){var r={},n=kn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?an.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(Wj(a))}return e.password&&typeof encrypt_agile<"u"?ese(encrypt_agile(a,e.password),e):e.type==="file"?Pw(e.file,a):e.type=="string"?Ma(a):a}function A9e(t,e){var r=e||{},n=d7e(t,r);return ese(n,r)}function Nf(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return N2(kf(n));case"binary":return kf(n);case"string":return t;case"file":return Pw(e.file,n,"utf8");case"buffer":return kn?xA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Nf(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function m9e(t,e){switch(e.type){case"base64":return N2(t);case"binary":return t;case"string":return t;case"file":return Pw(e.file,t,"binary");case"buffer":return kn?xA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function ZC(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?N2(r):e.type=="string"?Ma(r):r;case"file":return Pw(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function a4(t,e){D6(),oUe(t);var r=hs(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=a4(t,r);return r.type="array",Wj(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Nf(a7e(t,r),r);case"slk":case"sylk":return Nf(lae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return Nf(qae(t.Sheets[t.SheetNames[a]],r),r);case"txt":return m9e(tse(t.Sheets[t.SheetNames[a]],r),r);case"csv":return Nf(xR(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return Nf(cae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return ZC(zk.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return Nf(Bv.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return Nf(pae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return Nf(uae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return Nf(Yae(t,r),r);case"wk1":return ZC(jp.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return ZC(jp.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),ZC(Kae(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),A9e(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return f9e(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function p9e(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function Jk(t,e,r){var n={};return n.type="file",n.file=e,p9e(n),a4(t,n)}function g9e(t,e,r,n,a,s,o,l){var c=_i(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,A=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(A,"__rowNum__",{value:r,enumerable:!1})}catch{A.__rowNum__=r}else A.__rowNum__=r;if(!o||t[r])for(var h=e.s.c;h<=e.e.c;++h){var m=o?t[r][h]:t[n[h]+c];if(m===void 0||m.t===void 0){if(u===void 0)continue;s[h]!=null&&(A[s[h]]=u);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[h]!=null){if(p==null)if(m.t=="e"&&p===null)A[s[h]]=null;else if(u!==void 0)A[s[h]]=u;else if(d&&p===null)A[s[h]]=null;else continue;else A[s[h]]=d&&(m.t!=="n"||m.t==="n"&&l.rawNumbers!==!1)?p:nA(m,p,l);p!=null&&(f=!1)}}return{row:A,isempty:f}}function GS(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=ra(d);break;case"number":c=ra(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=_i(c.s.r),A=[],h=[],m=0,p=0,g=Array.isArray(t),v=c.s.r,y=0,b={};g&&!t[v]&&(t[v]=[]);var w=u.skipHidden&&t["!cols"]||[],j=u.skipHidden&&t["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(w[y]||{}).hidden)switch(A[y]=Ls(y),r=g?t[v][y]:t[A[y]+f],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=A[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=nA(r,null,u),p=b[o]||0,!p)b[o]=1;else{do l=o+"_"+p++;while(b[l]);b[o]=p,b[l]=1}s[y]=l}for(v=c.s.r+a;v<=c.e.r;++v)if(!(j[v]||{}).hidden){var I=g9e(t,c,v,A,n,s,g,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(h[m++]=I.row)}return h.length=m,h}var D$=/"/g;function x9e(t,e,r,n,a,s,o,l){for(var c=!0,u=[],d="",f=_i(r),A=e.s.c;A<=e.e.c;++A)if(n[A]){var h=l.dense?(t[r]||[])[A]:t[n[A]+f];if(h==null)d="";else if(h.v!=null){c=!1,d=""+(l.rawNumbers&&h.t=="n"?h.v:nA(h,null,l));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||p===34||l.forceQuotes){d='"'+d.replace(D$,'""')+'"';break}d=="ID"&&(d='"ID"')}else h.f!=null&&!h.F?(c=!1,d="="+h.f,d.indexOf(",")>=0&&(d='"'+d.replace(D$,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function xR(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=ra(t["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(t);for(var A=n.skipHidden&&t["!cols"]||[],h=n.skipHidden&&t["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(A[m]||{}).hidden||(f[m]=Ls(m));for(var p=0,g=a.s.r;g<=a.e.r;++g)(h[g]||{}).hidden||(d=x9e(t,a,g,f,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?l:"")+d)));return delete n.dense,r.join("")}function tse(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=xR(t,e);return r}function v9e(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=ra(t["!ref"]),s="",o=[],l,c=[],u=Array.isArray(t);for(l=a.s.c;l<=a.e.c;++l)o[l]=Ls(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=_i(d),l=a.s.c;l<=a.e.c;++l)if(e=o[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function rse(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Us(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+e.length-1+a}};if(s["!ref"]){var f=ra(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+e.length-1+a)}else o==-1&&(o=0,d.e.r=e.length-1+a);var A=n.header||[],h=0;e.forEach(function(p,g){oi(p).forEach(function(v){(h=A.indexOf(v))==-1&&(A[h=A.length]=v);var y=p[v],b="z",w="",j=hn({c:l+h,r:o+g+a});u=D2(s,j),y&&typeof y=="object"&&!(y instanceof Date)?s[j]=y:(typeof y=="number"?b="n":typeof y=="boolean"?b="b":typeof y=="string"?b="s":y instanceof Date?(b="d",n.cellDates||(b="n",y=oo(y)),w=n.dateNF||fn[14]):y===null&&n.nullError&&(b="e",y=0),u?(u.t=b,u.v=y,delete u.w,delete u.R,w&&(u.z=w)):s[j]=u={t:b,v:y},w&&(u.z=w))})}),d.e.c=Math.max(d.e.c,l+A.length-1);var m=_i(o);if(a)for(h=0;h<A.length;++h)s[Ls(h+l)+m]={t:"s",v:A[h]};return s["!ref"]=_n(d),s}function y9e(t,e){return rse(null,t,e)}function D2(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Us(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?D2(t,hn(e)):D2(t,hn({r:e,c:r||0}))}function b9e(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function vR(){return{SheetNames:[],Sheets:{}}}function yR(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=o+a)!=-1;++a);}if(Uae(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function w9e(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=b9e(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function N9e(t,e){return t.z=e,t}function nse(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function C9e(t,e,r){return nse(t,"#"+e,r)}function _9e(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function E9e(t,e,r,n){for(var a=typeof e!="string"?e:ra(e),s=typeof e=="string"?e:_n(e),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=D2(t,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var Ds={encode_col:Ls,encode_row:_i,encode_cell:hn,encode_range:_n,decode_col:W6,decode_row:z6,split_cell:Rke,decode_cell:Us,decode_range:Pc,format_cell:nA,sheet_add_aoa:Bne,sheet_add_json:rse,sheet_add_dom:zae,aoa_to_sheet:d1,json_to_sheet:y9e,table_to_sheet:Wae,table_to_book:k7e,sheet_to_csv:xR,sheet_to_txt:tse,sheet_to_json:GS,sheet_to_html:qae,sheet_to_formulae:v9e,sheet_to_row_object_array:GS,sheet_get_cell:D2,book_new:vR,book_append_sheet:yR,book_set_sheet_visibility:w9e,cell_set_number_format:N9e,cell_set_hyperlink:nse,cell_set_internal_link:C9e,cell_add_comment:_9e,sheet_set_array_formula:E9e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const O5=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Da(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function vh(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function r0(t,e=1){const r=Math.floor(vh(t,e));return r>0?r:e}function S9e(t){return Object.values(t||{}).every(r=>Da(r)==="")}function Mm(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Da(a),a));for(const a of e){const s=n.get(Da(a));if(s!=null)return t[s]}}function I9e({open:t,code:e,onClose:r}){return t?i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-lg border p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"font-bold text-lg",children:"Cdigo de barras"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-3",children:[i.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Valor"}),i.jsx("div",{className:"text-xl font-mono font-semibold break-all",children:e})]}),i.jsx("div",{className:"mt-3 flex gap-2 justify-end",children:i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>{var n;try{(n=navigator.clipboard)==null||n.writeText(e)}catch{}},children:"Copiar"})})]})}):null}function j9e({open:t,onClose:e,onDetected:r}){const n=x.useRef(null),a=x.useRef(null),[s,o]=x.useState(""),l=x.useRef("");return x.useEffect(()=>{if(!t)return;let c=!1;const u=new b2,d=()=>{var A,h,m;try{(A=a.current)==null||A.stop()}catch{}a.current=null;try{const p=(h=n.current)==null?void 0:h.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{o("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const A=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,h=>{if(!c&&h){const m=String(h.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=A}catch(A){const h=String((A==null?void 0:A.message)||""),m=String((A==null?void 0:A.name)||"");h.toLowerCase().includes("permission")||m==="NotAllowedError"?o("Permiso de cmara denegado."):m==="NotFoundError"||h.toLowerCase().includes("notfound")?o("No se encontr cmara en este dispositivo."):h.toLowerCase().includes("secure")||h.toLowerCase().includes("https")?o("La cmara requiere HTTPS (sitio seguro)."):o(h||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function P9e(){const{refreshKey:t,refresh:e}=kc(),[r,n]=x.useState(!0),[a,s]=x.useState(""),[o,l]=x.useState([]),[c,u]=x.useState(""),[d,f]=x.useState(""),[A,h]=x.useState(0),[m,p]=x.useState(1),[g,v]=x.useState(""),[y,b]=x.useState(""),[w,j]=x.useState(null),[I,_]=x.useState(""),[S,E]=x.useState(""),[F,P]=x.useState(0),[k,D]=x.useState(1),[J,fe]=x.useState(""),[Ae,me]=x.useState(""),[pe,ne]=x.useState(""),[Pe,Be]=x.useState(""),[O,G]=x.useState(""),[q,U]=x.useState(!1),[Y,Z]=x.useState(""),[R,H]=x.useState(!1),[te,ye]=x.useState("create"),[Q,Ge]=x.useState(!1),[ie,ee]=x.useState(""),[Ie,ue]=x.useState([]),[se,Ee]=x.useState([]),[je,it]=x.useState(!1),[At,pt]=x.useState(!1);x.useEffect(()=>{var ht;const ot=window.matchMedia("(max-width: 900px)"),Se=()=>pt(ot.matches);return Se(),(ht=ot.addEventListener)==null||ht.call(ot,"change",Se),()=>{var W;return(W=ot.removeEventListener)==null?void 0:W.call(ot,"change",Se)}},[]);const[yt,Ct]=x.useState(!0),[Et,Re]=x.useState(!0);x.useEffect(()=>{At?(Ct(!1),Re(!1)):(Ct(!0),Re(!0))},[At]);const[We,et]=x.useState(null),xe=x.useRef(!1),de=x.useRef(null);x.useEffect(()=>{n(!0),s("");const ot=bt(Oe,"products_candies"),Se=nr(ot,xn("name","asc")),ht=ad(Se,W=>{const Te=[],Ze={};W.forEach(T=>{const M=T.data(),L=String(M.barcode||"").trim()||void 0;L&&(Ze[T.id]=L),Te.push({id:T.id,name:M.name||"",category:M.category||"",providerPrice:Number(M.providerPrice||0),unitsPerPackage:Number(M.unitsPerPackage||1),barcode:L,packaging:String(M.packaging||M.empaque||"").trim()||void 0,createdAt:M.createdAt})});const tt=Ue.current||{};let ut=!1;for(const T of Object.keys(Ze))if((Ze[T]||"")!==(tt[T]||"")){ut=!0;break}l(Te),Ue.current=Ze,n(!1),!Ke.current&&ut&&(s(" Catlogo actualizado."),setTimeout(()=>s(""),3e3)),Ke.current=!1},W=>{console.error(W),s(" Error sincronizando catlogo de dulces."),n(!1)});return()=>ht()},[t]);const Ue=x.useRef({}),Ke=x.useRef(!0),Ne=x.useMemo(()=>{const ot=Da(pe),Se=String(Pe||"").trim(),ht=String(O||"").trim().toLowerCase();return ht?o.filter(W=>String(W.packaging||"").trim().toLowerCase()===ht):!ot&&!Se?o:o.filter(W=>{const Te=`${W.category} ${W.name}`.toLowerCase(),Ze=ot?Te.includes(ot):!0,tt=String(W.barcode||""),ut=Se?tt.includes(Se):!0;return Ze&&ut})},[o,pe,Pe,O]),mt=x.useMemo(()=>{const ot=new Set;return o.forEach(Se=>{const ht=String(Se.category||"").trim();ht&&ot.add(ht)}),Array.from(ot).sort((Se,ht)=>Se.localeCompare(ht,"es"))},[o]),wt=()=>{u(""),f(""),h(0),p(1),v(""),b("")},we=async ot=>{if(ot.preventDefault(),xe.current||r)return;s("");const Se=String(c||"").trim(),ht=String(d||"").trim(),W=Math.max(0,vh(A,0)),Te=r0(m,1),Ze=String(g||"").trim();if(!Se)return s(" La categora es requerida.");if(!ht)return s(" El nombre del producto es requerido.");if(W<=0)return s(" El precio proveedor debe ser > 0.");if(Te<=0)return s(" Und x paquete debe ser > 0.");const tt=`${Da(Se)}::${Da(ht)}`,ut=Date.now();if(de.current&&de.current.key===tt&&ut-de.current.ts<4e3){s(" Ya se est creando este producto.");return}if(o.some(M=>Da(M.category)===Da(Se)&&Da(M.name)===Da(ht)))return s(" Ya existe un producto con esa categora y nombre.");if(Ze&&o.some(L=>String(L.barcode||"")===Ze))return s(" Ya existe un producto con ese cdigo de barras.");xe.current=!0,de.current={key:tt,ts:ut};try{if(n(!0),!(await Qt(nr(bt(Oe,"products_candies"),sr("category","==",Se),sr("name","==",ht),iS(1)))).empty){s(" Ya existe un producto con esa categora y nombre.");return}if(Ze&&!(await Qt(nr(bt(Oe,"products_candies"),sr("barcode","==",Ze),iS(1)))).empty){s(" Ya existe un producto con ese cdigo de barras.");return}const L={category:Se,name:ht,providerPrice:W,unitsPerPackage:Te,createdAt:ur.now()};Ze&&(L.barcode=Ze);const K=String(y||"").trim();K&&(L.packaging=K),await Bn(bt(Oe,"products_candies"),L),s(" Producto creado."),wt()}catch(M){console.error(M),s(" Error creando producto.")}finally{n(!1),xe.current=!1}},ae=ot=>{j(ot.id),_(ot.category),E(ot.name),P(ot.providerPrice),D(ot.unitsPerPackage||1),fe(String(ot.barcode||"")),me(String(ot.packaging||"")),s("")},be=()=>{j(null),_(""),E(""),P(0),D(1),fe(""),me("")},ve=async()=>{if(!w)return;s("");const ot=String(I||"").trim(),Se=String(S||"").trim(),ht=Math.max(0,vh(F,0)),W=r0(k,1),Te=String(J||"").trim(),Ze=String(Ae||"").trim();if(!ot)return s(" La categora es requerida.");if(!Se)return s(" El nombre del producto es requerido.");if(ht<=0)return s(" El precio proveedor debe ser > 0.");if(W<=0)return s(" Und x paquete debe ser > 0.");if(o.some(ut=>ut.id!==w&&Da(ut.category)===Da(ot)&&Da(ut.name)===Da(Se)))return s(" Ya existe otro producto con esa categora y nombre.");if(Te&&o.some(T=>T.id!==w&&String(T.barcode||"")===Te))return s(" Ya existe otro producto con ese cdigo de barras.");try{n(!0);const ut={category:ot,name:Se,providerPrice:ht,unitsPerPackage:W,updatedAt:ur.now()};ut.barcode=Te||"",ut.packaging=Ze||"",await pn(zt(Oe,"products_candies",w),ut),l(T=>T.map(M=>M.id===w?{...M,category:ot,name:Se,providerPrice:ht,unitsPerPackage:W,barcode:Te||void 0,packaging:Ze||void 0}:M).sort((M,L)=>M.name.localeCompare(L.name,"es"))),At&&s(" Producto guardado."),be()}catch(ut){console.error(ut),s(" Error actualizando producto.")}finally{n(!1)}},Ve=async ot=>{if(confirm(`Eliminar "${ot.name}" (${ot.category}) del catlogo?`))try{n(!0),await Pn(zt(Oe,"products_candies",ot.id)),l(ht=>ht.filter(W=>W.id!==ot.id)),s(" Producto eliminado.")}catch(ht){console.error(ht),s(" Error eliminando producto.")}finally{n(!1)}},ce=()=>{const ot=[{Id:"",Categoria:"Gomitas",Producto:"Gomita Fresa",PrecioProveedor:120,UnidadesPorPaquete:24,Empaque:"Tarro",Codigo:"7445074183182"}],Se=Ds.json_to_sheet(ot),ht=Ds.book_new();Ds.book_append_sheet(ht,Se,"Productos");const W=a4(ht,{type:"array",bookType:"xlsx"}),Te=new Blob([W],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Ze=URL.createObjectURL(Te),tt=document.createElement("a");tt.href=Ze,tt.download="template_productos_dulces.xlsx",document.body.appendChild(tt),tt.click(),tt.remove(),URL.revokeObjectURL(Ze)},ke=ot=>{const Se=[],ht=[];ot.forEach((Te,Ze)=>{if(!Te||typeof Te!="object"||S9e(Te))return;const tt=String(Mm(Te,["Id","ID","productId","docId"])??"").trim(),ut=String(Mm(Te,["Categoria","Categora","Category","cat","category"])??"").trim(),T=String(Mm(Te,["Producto","Product","Nombre","Name","producto","name"])??"").trim(),M=Mm(Te,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Precio","Costo","providerPrice"]),L=Mm(Te,["UnidadesPorPaquete","Und x Paquete","UnitsPerPackage","UPP","unitsPerPackage"]),K=Mm(Te,["Codigo","Cdigo","Barcode","barcode","EAN","UPC","Code"]),re=String(K??"").trim(),le=Mm(Te,["Empaque","Packaging","PackagingType","Pack","Formato"]),Me=String(le??"").trim(),qe=Math.max(0,vh(M,0)),lt=r0(L,1),Fe=Ze+2;ut||ht.push(`Fila ${Fe}: falta Categoria.`),T||ht.push(`Fila ${Fe}: falta Producto/Nombre.`),qe<=0&&ht.push(`Fila ${Fe}: PrecioProveedor debe ser > 0.`),lt<=0&&ht.push(`Fila ${Fe}: UnidadesPorPaquete debe ser > 0.`),ut&&T&&qe>0&&lt>0&&Se.push({id:tt||void 0,category:ut,name:T,providerPrice:qe,unitsPerPackage:lt,barcode:re||void 0,packaging:Me||void 0,_raw:Te})});const W=new Map;for(const Te of Se){const Ze=Te.id?`id::${Te.id}`:`${Da(Te.category)}::${Da(Te.name)}`;W.set(Ze,Te)}return{rows:Array.from(W.values()),errors:ht}},dt=async ot=>{if(s(""),Ee([]),ue([]),ee((ot==null?void 0:ot.name)||""),!ot)return;const Se=ot.name.toLowerCase(),ht=Se.endsWith(".xlsx")||Se.endsWith(".xls"),W=Se.endsWith(".csv");if(!ht&&!W){Ee(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{it(!0);const Te=new FileReader,Ze=await new Promise((re,le)=>{Te.onerror=()=>le(new Error("No se pudo leer el archivo.")),Te.onload=()=>re(Te.result),Te.readAsArrayBuffer(ot)}),tt=O2(new Uint8Array(Ze),{type:"array"}),ut=tt.SheetNames[0],T=tt.Sheets[ut],M=Ds.sheet_to_json(T,{defval:""}),{rows:L,errors:K}=ke(M);ue(L),Ee(K),L.length===0&&K.length===0&&Ee(["No se encontraron filas vlidas para importar."])}catch(Te){console.error(Te),Ee(["Error leyendo el archivo. Revis que no est corrupto."])}finally{it(!1)}},ft=(ot,Se)=>{ue(ht=>{const W=[...ht],Te=W[ot];return Te?(W[ot]={...Te,...Se},W):ht})},gt=async()=>{if(s(""),se.length>0){s(" Correg los errores antes de importar.");return}if(Ie.length===0){s(" No hay filas para importar.");return}try{it(!0);const ot={},Se={},ht={};o.forEach(tt=>{ot[tt.id]=tt,Se[`${Da(tt.category)}::${Da(tt.name)}`]=tt;const ut=String(tt.barcode||"").trim();ut&&(ht[ut]=tt)});const W=Kd(Oe);let Te=0,Ze=0;for(const tt of Ie){const ut=String(tt.category||"").trim(),T=String(tt.name||"").trim(),M=Math.max(0,vh(tt.providerPrice,0)),L=r0(tt.unitsPerPackage,1),K=String(tt.barcode||"").trim();if(!ut||!T||M<=0||L<=0)continue;let re;if(tt.id&&ot[tt.id])re=ot[tt.id];else{const le=`${Da(ut)}::${Da(T)}`;re=Se[le]}if(!re&&K&&ht[K]&&(re=ht[K]),re){const le={category:ut,name:T,providerPrice:M,unitsPerPackage:L,updatedAt:ur.now()};tt.barcode!=null&&(le.barcode=K||""),tt.packaging!=null&&(le.packaging=String(tt.packaging||"")||""),W.update(zt(Oe,"products_candies",re.id),le),Ze+=1}else{const le=zt(bt(Oe,"products_candies")),Me={category:ut,name:T,providerPrice:M,unitsPerPackage:L,createdAt:ur.now()};K&&(Me.barcode=K),tt.packaging&&(Me.packaging=tt.packaging),W.set(le,Me),Te+=1}}await W.commit(),s(` Importacin lista. Creados: ${Te}, Actualizados: ${Ze}`),Ge(!1),ue([]),Ee([]),ee(""),e()}catch(ot){console.error(ot),s(" Error importando productos a Firestore.")}finally{it(!1)}},Rt=x.useMemo(()=>{const ot=new Set(o.map(Ze=>Ze.id)),Se=new Set(o.map(Ze=>`${Da(Ze.category)}::${Da(Ze.name)}`)),ht=new Set(o.map(Ze=>String(Ze.barcode||"").trim()).filter(Boolean));let W=0,Te=0;for(const Ze of Ie){if(Ze.id&&ot.has(Ze.id)){W+=1;continue}const tt=`${Da(Ze.category)}::${Da(Ze.name)}`;if(Se.has(tt)){W+=1;continue}const ut=String(Ze.barcode||"").trim();if(ut&&ht.has(ut)){W+=1;continue}Te+=1}return{willCreate:Te,willUpdate:W,total:Ie.length}},[Ie,o]);return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Catalogo"}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Tc,{onClick:e,loading:r||je}),!At&&i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{Ge(!0),ue([]),Ee([]),ee("")},children:"Importar"})]})})]}),At&&i.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-900 text-white",onClick:()=>Ct(ot=>!ot),children:yt?"Ocultar creacin":"Crear producto"}),i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{Ge(!0),ue([]),Ee([]),ee("")},children:"Importar"}),i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-200",onClick:()=>Re(ot=>!ot),children:Et?"Ocultar filtros":"Mostrar filtros"}),Et&&i.jsxs("div",{className:"bg-white p-3 rounded shadow-sm border",children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:O,onChange:ot=>G(ot.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),yt&&i.jsxs("form",{onSubmit:we,className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Categora"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:ot=>u(ot.target.value),placeholder:"Ej: Gomitas"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:d,onChange:ot=>f(ot.target.value),placeholder:"Ej: Gomita Fresa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:ot=>b(ot.target.value),children:[i.jsx("option",{value:"",children:"Seleccionar"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio proveedor (paq)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(A)?"":A,onChange:ot=>h(Math.max(0,vh(ot.target.value,0)))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Und x paquete"}),i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:m,onChange:ot=>p(r0(ot.target.value,1))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo (opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"w-full border rounded px-2 py-1",value:g,onChange:ot=>v(ot.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white hover:bg-black whitespace-nowrap",onClick:()=>{ye("create"),H(!0)},children:"Escanear"})]})]}),i.jsxs("div",{className:"md:col-span-6 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:wt,children:"Limpiar"}),i.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",disabled:r,children:"Crear producto"})]})]}),Et&&i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-3 flex flex-col md:flex-row gap-3 items-center text-sm",children:[i.jsxs("div",{className:"w-full md:w-1/2",children:[i.jsx("label",{className:"block font-semibold",children:"Buscar"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:pe,onChange:ot=>ne(ot.target.value),placeholder:"Buscar por categora o producto"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:O,onChange:ot=>G(ot.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),i.jsxs("div",{className:"w-full md:w-1/2",children:[i.jsx("label",{className:"block font-semibold",children:"Buscar por cdigo"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:Pe,onChange:ot=>Be(ot.target.value),placeholder:"Ej: 7445074183182"}),i.jsx("div",{className:"mt-2 md:mt-0",children:i.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ye("search"),H(!0),Re(!0)},children:"Escanear producto"})}),i.jsx("div",{className:"mt-2 md:mt-0",children:i.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ne(""),Be("")},children:"Limpiar filtros"})})]}),i.jsxs("div",{className:"w-full md:w-auto text-right",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Productos en catlogo"}),i.jsx("div",{className:"text-lg font-semibold",children:Ne.length})]})]}),At?i.jsx("div",{className:"space-y-2",children:r?i.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Cargando"}):Ne.length===0?i.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Sin productos."}):Ne.map(ot=>{const Se=w===ot.id,ht=We===ot.id,W=!!String(ot.barcode||"").trim();return i.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>et(Te=>Te===ot.id?null:ot.id),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-bold truncate",children:ot.name}),i.jsx("div",{className:"text-xs text-gray-600 truncate",children:ot.category})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),i.jsx("div",{className:"font-bold tabular-nums",children:O5(ot.providerPrice)})]})]}),ht&&i.jsx("div",{className:"px-3 pb-3 border-t",children:i.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Categora"}),Se?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:Te=>_(Te.target.value)}):i.jsx("div",{className:"font-semibold",children:ot.category})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Und x paquete"}),Se?i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:k,onChange:Te=>D(r0(Te.target.value,1))}):i.jsx("div",{className:"font-semibold text-right tabular-nums",children:ot.unitsPerPackage})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Empaque"}),Se?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Ae,onChange:Te=>me(Te.target.value),children:[i.jsx("option",{value:"",children:"Seleccionar"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):i.jsx("div",{className:"font-semibold",children:ot.packaging||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),Se?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(F)?"":F,onChange:Te=>P(Math.max(0,vh(Te.target.value,0)))}):i.jsx("div",{className:"font-semibold tabular-nums",children:O5(ot.providerPrice)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Cdigo"}),Se?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-1",value:J,onChange:Te=>fe(Te.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ye("edit"),H(!0)},children:"Escanear"})]}):W?i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{Z(String(ot.barcode||"").trim()),U(!0)},children:"Ver cdigo"}):i.jsx("div",{className:"text-gray-600",children:"No"})]})]}),i.jsx("div",{className:"pt-2 flex gap-2",children:Se?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-blue-600 text-white",onClick:ve,type:"button",children:"Guardar"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ye("edit"),H(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-200",onClick:be,type:"button",children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400",onClick:()=>ae(ot),type:"button",children:"Editar"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-red-600 text-white",onClick:()=>Ve(ot),type:"button",children:"Borrar"})]})})]})})]},ot.id)})}):i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1050px] w-full text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),i.jsx("th",{className:"p-2 border text-center",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Ne.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin productos."})}):Ne.map(ot=>{const Se=w===ot.id,ht=!!String(ot.barcode||"").trim();return i.jsxs("tr",{className:"align-top",children:[i.jsx("td",{className:"p-2 border",children:Se?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:W=>_(W.target.value)}):ot.category}),i.jsx("td",{className:"p-2 border",children:Se?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:S,onChange:W=>E(W.target.value)}):ot.name}),i.jsx("td",{className:"p-2 border",children:Se?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Ae,onChange:W=>me(W.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):ot.packaging||""}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Se?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(F)?"":F,onChange:W=>P(Math.max(0,vh(W.target.value,0)))}):O5(ot.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Se?i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:k,onChange:W=>D(r0(W.target.value,1))}):ot.unitsPerPackage}),i.jsx("td",{className:"p-2 border text-center",children:Se?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("input",{className:"w-44 border rounded px-2 py-1",value:J,onChange:W=>fe(W.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-800 text-white hover:bg-black",onClick:()=>{ye("edit"),H(!0)},children:"Escanear"})]}):ht?i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{Z(String(ot.barcode||"").trim()),U(!0)},children:"S"}):i.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:"No"})}),i.jsx("td",{className:"p-2 border",children:Se?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ve,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:be,type:"button",children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",onClick:()=>ae(ot),type:"button",children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>Ve(ot),type:"button",children:"Borrar"})]})})]},ot.id)})})]})}),a?At&&a===" Producto guardado."?i.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 text-sm",children:a}),i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white",onClick:()=>{s(""),be(),H(!1)},children:"Aceptar"})]}):i.jsx("p",{className:"mt-2 text-sm",children:a}):null,i.jsx(I9e,{open:q,code:Y,onClose:()=>U(!1)}),i.jsx(j9e,{open:R,onClose:()=>H(!1),onDetected:async ot=>{const Se=String(ot||"").trim();if(Se){if(te==="edit"&&w){if(o.some(W=>W.id!==w&&String(W.barcode||"")===Se)){s(" Ya existe otro producto con ese cdigo de barras."),fe(Se),H(!1);return}try{await pn(zt(Oe,"products_candies",w),{barcode:Se}),l(W=>W.map(Te=>Te.id===w?{...Te,barcode:Se}:Te)),fe(Se),At&&s(" Producto guardado.")}catch(W){console.error(W),s(" Error guardando cdigo de barras.")}finally{H(!1)}return}if(te==="search"){Be(Se),H(!1);return}te==="create"?v(ot):fe(ot)}}}),Q&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Importar productos (.xlsx / .csv)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ge(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),i.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas (flexible): Id (opcional), Categoria, Producto/Nombre, PrecioProveedor, UnidadesPorPaquete, Empaque (opcional), Codigo (opcional)."})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ce,type:"button",children:"Descargar template .xlsx"})]}),i.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:ot=>{var Se;return dt(((Se=ot.target.files)==null?void 0:Se[0])||null)}}),ie&&i.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",i.jsx("b",{children:ie})]}),je&&i.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),se.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[i.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),i.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:se.slice(0,50).map((ot,Se)=>i.jsx("li",{children:ot},Se))})]}),i.jsxs("div",{className:"bg-white border rounded p-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Rt.total," filas (Crear:"," ",Rt.willCreate," / Actualizar:"," ",Rt.willUpdate,")"]})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:gt,disabled:je||Ie.length===0||se.length>0,type:"button",children:"Importar a Firestore"})]}),i.jsxs("div",{className:"overflow-x-auto border rounded",children:[i.jsxs("table",{className:"min-w-[1250px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Codigo (opcional)"}),i.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),i.jsx("tbody",{children:Ie.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):Ie.slice(0,300).map((ot,Se)=>{const ht=ot.id?o.some(tt=>tt.id===ot.id):!1,W=o.some(tt=>`${Da(tt.category)}::${Da(tt.name)}`==`${Da(ot.category)}::${Da(ot.name)}`),Te=ot.barcode?o.some(tt=>String(tt.barcode||"")===ot.barcode):!1,Ze=ht||W||Te;return i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ot.id||"",onChange:tt=>ft(Se,{id:tt.target.value.trim()||void 0}),placeholder:"docId (si quers update exacto)"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ot.category,onChange:tt=>ft(Se,{category:tt.target.value}),list:"categories-list"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-72 border rounded px-2 py-1",value:ot.name,onChange:tt=>ft(Se,{name:tt.target.value})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(ot.providerPrice)?"":ot.providerPrice,onChange:tt=>ft(Se,{providerPrice:Math.max(0,vh(tt.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:ot.unitsPerPackage,onChange:tt=>ft(Se,{unitsPerPackage:r0(tt.target.value,1)})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ot.packaging||"",onChange:tt=>ft(Se,{packaging:tt.target.value.trim()||void 0}),placeholder:"Tarro, Bolsa..."})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ot.barcode||"",onChange:tt=>ft(Se,{barcode:tt.target.value.trim()||void 0}),placeholder:"EAN/UPC (opcional)"})}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${Ze?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:Ze?"ACTUALIZA":"CREA"})})]},`${ot.id||""}-${Se}`)})})]}),i.jsx("datalist",{id:"categories-list",children:mt.map(ot=>i.jsx("option",{value:ot},ot))})]}),Ie.length>300&&i.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",Ie.length," filas (el import importa todas)."]})]})]})})]})}function ase(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=Number(t.totalUnits||0),n=Number(t.quantity||0),a=Number(t.packages||0);return r>0?Math.floor(r):n>0?Math.floor(n):a>0?Math.floor(a*e):0}function D5(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):ase(t)}const sse=t=>Math.max(0,Math.floor(Number(t??0)));function B9e(t){return sse(t.packages??t.totalPackages??t.packs??t.packagesInitial??t.initialPackages??0)}function T9e(t){return sse(t.remainingPackages??t.remainingPacks??t.packsRemaining??t.packagesRemaining??t.remaining_packages??0)}async function k9e(t){const e=zt(Oe,"candy_main_orders",t);if((await Ci(e)).exists())return e;const n=nr(bt(Oe,"candy_main_orders"),sr("orderId","==",t)),a=await Qt(n);return a.empty?null:zt(Oe,"candy_main_orders",a.docs[0].id)}async function R5(t){if(!t)return;const e=await k9e(t);if(!e)return;const r=nr(bt(Oe,"inventory_candies"),sr("orderId","==",t)),n=await Qt(r),a=new Map;n.forEach(l=>{const c=l.data(),u=String(c.productId||"");if(!u)return;const d=B9e(c),f=T9e(c),A=Math.max(1,Math.floor(Number(c.unitsPerPackage||1))),h=Number(c.providerPrice||0),m=Number(c.unitPriceRivas||0),p=Number(c.unitPriceSanJorge||0),g=Number(c.unitPriceIsla||0),v=h*d,y=m*d,b=p*d,w=g*d,j=y-v,I=b-v,_=w-v;a.has(u)||a.set(u,{productId:u,name:String(c.productName||""),category:String(c.category||""),unitsPerPackage:A,providerPrice:h,marginRivas:typeof c.marginRivas=="number"?Number(c.marginRivas):void 0,marginSanJorge:typeof c.marginSanJorge=="number"?Number(c.marginSanJorge):void 0,marginIsla:typeof c.marginIsla=="number"?Number(c.marginIsla):void 0,packages:0,remainingPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,unitPriceRivas:m||0,unitPriceSanJorge:p||0,unitPriceIsla:g||0,gainRivas:0,gainSanJorge:0,gainIsla:0});const S=a.get(u);S.packages+=d,S.remainingPackages+=f,S.subtotal+=v,S.totalRivas+=y,S.totalSanJorge+=b,S.totalIsla+=w,S.gainRivas+=j,S.gainSanJorge+=I,S.gainIsla+=_,S.providerPrice=h,S.unitPriceRivas=m||S.unitPriceRivas,S.unitPriceSanJorge=p||S.unitPriceSanJorge,S.unitPriceIsla=g||S.unitPriceIsla,S.unitsPerPackage=A||S.unitsPerPackage,S.name=String(c.productName||S.name),S.category=String(c.category||S.category)});const s=Array.from(a.values()).map(l=>({id:l.productId,name:l.name,category:l.category,providerPrice:l.providerPrice,unitsPerPackage:l.unitsPerPackage,packages:l.packages,remainingPackages:l.remainingPackages,marginRivas:l.marginRivas??void 0,marginSanJorge:l.marginSanJorge??void 0,marginIsla:l.marginIsla??void 0,subtotal:l.subtotal,totalRivas:l.totalRivas,totalSanJorge:l.totalSanJorge,totalIsla:l.totalIsla,unitPriceRivas:l.unitPriceRivas,unitPriceSanJorge:l.unitPriceSanJorge,unitPriceIsla:l.unitPriceIsla,gainRivas:l.gainRivas,gainSanJorge:l.gainSanJorge,gainIsla:l.gainIsla})),o=s.reduce((l,c)=>l+Number(c.packages||0),0);await pn(e,{totalPackages:o,items:s})}function F9e(t){const e=t==null?void 0:t.allocationsByItem;if(!e)return null;const r=[];if(Array.isArray(e))for(const n of e){const a=Array.isArray(n==null?void 0:n.allocations)?n.allocations:[];for(const s of a){const o=String(s.inventorySellerId||""),l=Math.max(0,Math.floor(Number(s.units??s.qty??s.quantity??0)));!o||l<=0||r.push({inventorySellerId:o,units:l})}}else if(typeof e=="object")for(const n of Object.keys(e)){const a=e[n],s=Array.isArray(a==null?void 0:a.allocations)?a.allocations:[];for(const o of s){const l=String(o.inventorySellerId||""),c=Math.max(0,Math.floor(Number(o.units??o.qty??o.quantity??0)));!l||c<=0||r.push({inventorySellerId:l,units:c})}}return r.length?{allocations:r}:null}async function R2(t){const e=t.split("#")[0],r=zt(Oe,"sales_candies",e),n=await Ci(r);if(!n.exists())throw new Error("La venta no existe.");const a=n.data(),s=F9e(a);if(s&&s.allocations.length>0){let u=0;return await Di(Oe,async d=>{const f={};for(const p of s.allocations){const g=p.inventorySellerId,v=Math.max(0,Math.floor(Number(p.units||0)));!g||v<=0||(f[g]=(f[g]||0)+v,u+=v)}const h=Object.keys(f).map(p=>zt(Oe,"inventory_candies_sellers",p)),m=await Promise.all(h.map(p=>d.get(p)));for(let p=0;p<h.length;p++){const g=m[p];if(!g.exists())continue;const v=g.data(),y=Number(v.remainingUnits??v.remaining??0),b=Math.max(0,Math.floor(Number(f[h[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(v.unitsPerPackage||1))),I=Math.floor(w/j);d.update(h[p],{remainingUnits:w,remainingPackages:I})}d.delete(r)}),{restored:u}}const o=[];if(Array.isArray(a.items)&&a.items.length>0){const u={};if(a.allocationsByItem&&typeof a.allocationsByItem=="object")for(const d of Object.keys(a.allocationsByItem)){const f=a.allocationsByItem[d],A=String((f==null?void 0:f.productId)||d||"");if(!A)continue;const h=Array.isArray(f==null?void 0:f.allocations)?f.allocations:[];u[A]=h.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(a.allocationsByItem))for(const d of a.allocationsByItem){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const A=Array.isArray(d==null?void 0:d.allocations)?d.allocations:[];u[f]=A.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}for(const d of a.items){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const A=Math.max(0,Math.floor(Number((d==null?void 0:d.qty)||(d==null?void 0:d.quantity)||0))),h=Array.isArray(d==null?void 0:d.allocations)?d.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):u[f]||[];o.push({productId:f,productName:String((d==null?void 0:d.productName)||""),qty:A,allocations:h.length?h:void 0})}}else{const u=a.item||{},d=String(u.productId||a.productId||""),f=Math.max(0,Math.floor(Number(u.qty??a.quantity??0))),A=Array.isArray(a.allocations)?a.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):[];d&&f>0&&o.push({productId:d,productName:String(u.productName||a.productName||""),qty:f,allocations:A.length?A:void 0})}if(o.length===0)return await Di(Oe,async u=>{u.delete(r)}),{restored:0};if(o.every(u=>Array.isArray(u.allocations)&&u.allocations.length>0)){let u=0;return await Di(Oe,async d=>{const f=[];for(const h of o)for(const m of h.allocations||[]){const p=Math.max(0,Math.floor(Number(m.qty||0)));u+=p,f.push({ref:zt(Oe,"inventory_candies",m.batchId),addBack:p})}const A=await Promise.all(f.map(h=>d.get(h.ref)));for(let h=0;h<f.length;h++){const m=A[h];if(!m.exists())continue;const p=m.data(),g=D5(p),v=Math.max(0,Math.floor(Number(f[h].addBack||0))),y=g+v,b=Math.max(1,Math.floor(Number(p.unitsPerPackage||1))),w=Math.floor(y/b);d.update(f[h].ref,{remaining:y,remainingPackages:w,packages:w})}d.delete(r)}),{restored:u}}let c=0;return await Di(Oe,async u=>{const d={};for(const p of o){if(!p.productId||p.qty<=0)continue;const g=nr(bt(Oe,"inventory_candies"),sr("productId","==",p.productId)),y=(await Qt(g)).docs.map(b=>{const w=b.data(),j=ase(w),I=D5(w);return{id:b.id,date:String(w.date||""),baseUnits:j,remaining:I}}).sort((b,w)=>b.date.localeCompare(w.date));d[p.productId]=y}const f=[];for(const p of o){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const y of p.allocations){const b=Math.max(0,Math.floor(Number(y.qty||0)));c+=b,f.push({id:y.batchId,addBack:b})}continue}const g=d[p.productId]||[];let v=p.qty;for(const y of g){if(v<=0)break;const b=Math.max(0,y.baseUnits-y.remaining);if(b<=0)continue;const w=Math.min(b,v);f.push({id:y.id,addBack:w}),c+=w,v-=w}for(const y of g){if(v<=0)break;const b=Math.min(v,p.qty);f.push({id:y.id,addBack:b}),c+=b,v-=b}}const A={};for(const p of f)A[p.id]=(A[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const h=Object.keys(A).map(p=>zt(Oe,"inventory_candies",p)),m=await Promise.all(h.map(p=>u.get(p)));for(let p=0;p<h.length;p++){const g=m[p];if(!g.exists())continue;const v=g.data(),y=D5(v),b=Math.max(0,Math.floor(Number(A[h[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(v.unitsPerPackage||1))),I=Math.floor(w/j);u.update(h[p],{remaining:w,remainingPackages:I,packages:I})}u.delete(r)}),{restored:c}}async function O9e(t){return R2(t)}const ql=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function M5(t){return isFinite(t)?Math.round(t):0}function jd(t){return t.unitsPerPackage>0&&t.totalUnits>0?Math.floor(t.totalUnits/t.unitsPerPackage):Math.max(0,Math.floor(Number(t.packages||0)))}function L5(t){return typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages)?Math.max(0,Math.floor(t.remainingPackages)):t.unitsPerPackage>0?Math.max(0,Math.floor(Number(t.remaining||0)/t.unitsPerPackage)):0}function D9e(t,e){var o,l;const r=String(t.date||""),n=String(e.date||"");if(r!==n)return n.localeCompare(r);const a=((o=t.createdAt)==null?void 0:o.seconds)??0;return(((l=e.createdAt)==null?void 0:l.seconds)??0)-a}function R9e(){const[t,e]=x.useState([]),[r,n]=x.useState([]),[a,s]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState(Ir(af(new Date),"yyyy-MM-dd")),[d,f]=x.useState(Ir(nf(new Date),"yyyy-MM-dd")),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState(null),[y,b]=x.useState(""),[w,j]=x.useState(0),[I,_]=x.useState(!1),[S,E]=x.useState(""),[F,P]=x.useState(""),[k,D]=x.useState([]);x.useEffect(()=>{(async()=>{try{s(!0);const Y=await Qt(bt(Oe,"products_candies")),Z=[];Y.forEach(ye=>{const Q=ye.data();Z.push({id:ye.id,name:Q.name??"(sin nombre)",category:Q.category??"(sin categora)"})}),e(Z);const R=nr(bt(Oe,"inventory_candies"),xn("date","desc")),H=await Qt(R),te=[];H.forEach(ye=>{const Q=ye.data(),Ge=Number(Q.unitsPerPackage||0),ie=Number(Q.totalUnits??Q.quantity??(Q.packages||0)*(Q.unitsPerPackage||0)),ee=Number(Q.remaining??Q.totalUnits??ie??0);te.push({id:ye.id,productId:Q.productId,productName:Q.productName,category:Q.category,measurement:Q.measurement??"unidad",packages:Number(Q.packages||0),unitsPerPackage:Ge,totalUnits:ie,remaining:ee,remainingPackages:typeof Q.remainingPackages=="number"?Number(Q.remainingPackages):void 0,providerPrice:Number(Q.providerPrice||0),subtotal:Number(Q.subtotal||0),totalRivas:Number(Q.totalRivas||0),totalSanJorge:Number(Q.totalSanJorge||0),totalIsla:Number(Q.totalIsla||0),gainRivas:Number(Q.gainRivas||0),gainSanJorge:Number(Q.gainSanJorge||0),gainIsla:Number(Q.gainIsla||0),unitPriceRivas:Number(Q.unitPriceRivas||0),unitPriceSanJorge:Number(Q.unitPriceSanJorge||0),unitPriceIsla:Number(Q.unitPriceIsla||0),date:Q.date,createdAt:Q.createdAt,status:Q.status??"PENDIENTE",orderId:Q.orderId??null})}),n(te)}catch(Y){console.error(Y),l(" Error cargando inventario.")}finally{s(!1)}})()},[]);const J=x.useMemo(()=>r.filter(Y=>!(c&&Y.date<c||d&&Y.date>d||A&&Y.productId!==A||m&&String(Y.category||"")!==m)),[r,c,d,A,m]),fe=x.useMemo(()=>{const Y=new Set;for(const Z of t)Z.category&&Y.add(Z.category);return Array.from(Y).sort((Z,R)=>Z.localeCompare(R))},[t]),Ae=x.useMemo(()=>{const Y=J.reduce((Q,Ge)=>Q+jd(Ge),0),Z=J.reduce((Q,Ge)=>Q+L5(Ge),0),R=J.reduce((Q,Ge)=>{const ie=jd(Ge);return Q+Number(Ge.providerPrice||0)*ie},0),H=J.reduce((Q,Ge)=>{const ie=jd(Ge);return Q+Number(Ge.unitPriceRivas||0)*ie},0),te=J.reduce((Q,Ge)=>{const ie=jd(Ge);return Q+Number(Ge.unitPriceSanJorge||0)*ie},0),ye=J.reduce((Q,Ge)=>{const ie=jd(Ge);return Q+Number(Ge.unitPriceIsla||0)*ie},0);return{totalPaquetes:Y,totalPaquetesRestantes:Z,totalSubtotal:R,totalRivas:H,totalSJ:te,totalIsla:ye}},[J]),me=x.useMemo(()=>{let Y=0,Z=0;for(const R of J)R.status==="PENDIENTE"&&(Y+=1),R.status==="PAGADO"&&(Z+=1);return{totalLotes:J.length,pendientes:Y,pagados:Z}},[J]),pe=x.useMemo(()=>{const Y=new Map;for(const R of J){const H=String(R.productId||"");H&&(Y.has(H)||Y.set(H,{batches:[]}),Y.get(H).batches.push(R))}const Z=[];for(const[R,H]of Y.entries()){const te=[...H.batches].sort(D9e),ye=te[0],Q=te.reduce((yt,Ct)=>yt+jd(Ct),0),Ge=te.reduce((yt,Ct)=>yt+L5(Ct),0),ie=Number((ye==null?void 0:ye.providerPrice)||0),ee=Number((ye==null?void 0:ye.unitPriceRivas)||0),Ie=Number((ye==null?void 0:ye.unitPriceIsla)||0),ue=te.reduce((yt,Ct)=>{const Et=jd(Ct);return yt+Number(Ct.providerPrice||0)*Et},0),se=te.reduce((yt,Ct)=>{const Et=jd(Ct);return yt+Number(Ct.unitPriceRivas||0)*Et},0),Ee=te.reduce((yt,Ct)=>{const Et=jd(Ct);return yt+Number(Ct.unitPriceIsla||0)*Et},0),je=se-ue,it=Ee-ue;let At="",pt;for(const yt of te)(!At||String(yt.date||"")>At)&&(At=String(yt.date||""),pt=yt.createdAt);Z.push({productId:R,productName:(ye==null?void 0:ye.productName)||"",category:(ye==null?void 0:ye.category)||"",totalPackages:Q,remainingPackages:Ge,providerPrice:ie,unitPriceRivas:ee,unitPriceIsla:Ie,subtotal:ue,totalRivas:se,totalIsla:Ee,gainRivas:je,gainIsla:it,lastDate:At,lastCreatedAt:pt,batchCount:te.length})}return Z.sort((R,H)=>String(H.lastDate).localeCompare(String(R.lastDate))),Z},[J]),ne=Y=>{v(Y.id),b(Y.date),j(Y.providerPrice),l("")},Pe=()=>{v(null),b(""),j(0)},Be=async()=>{if(!g)return;const Y=r.find(Ee=>Ee.id===g);if(!Y)return;if(w<0){l("El precio proveedor no puede ser negativo.");return}const Z=jd(Y),R=w*Z,H=Z>0?R/.8:0,te=Z>0?R/.85:0,ye=Z>0?R/.7:0,Q=H-R,Ge=te-R,ie=ye-R,ee=Z>0?M5(H/Z):0,Ie=Z>0?M5(te/Z):0,ue=Z>0?M5(ye/Z):0,se=zt(Oe,"inventory_candies",g);await pn(se,{date:y,providerPrice:w,subtotal:R,totalRivas:H,totalSanJorge:te,totalIsla:ye,gainRivas:Q,gainSanJorge:Ge,gainIsla:ie,unitPriceRivas:ee,unitPriceSanJorge:Ie,unitPriceIsla:ue}),n(Ee=>Ee.map(je=>je.id===g?{...je,date:y,providerPrice:w,subtotal:R,totalRivas:H,totalSanJorge:te,totalIsla:ye,gainRivas:Q,gainSanJorge:Ge,gainIsla:ie,unitPriceRivas:ee,unitPriceSanJorge:Ie,unitPriceIsla:ue}:je)),Y.orderId&&await R5(String(Y.orderId)),l(" Lote de dulces actualizado"),Pe()},O=async Y=>{confirm(`Marcar PAGADO el lote del ${Y.date} (${Y.productName})?`)&&(await pn(zt(Oe,"inventory_candies",Y.id),{status:"PAGADO"}),n(R=>R.map(H=>H.id===Y.id?{...H,status:"PAGADO"}:H)),l(" Lote marcado como pagado"))},G=async Y=>{confirm(`Eliminar el lote del ${Y.date} (${Y.productName})?`)&&(await Pn(zt(Oe,"inventory_candies",Y.id)),n(R=>R.filter(H=>H.id!==Y.id)),Y.orderId&&await R5(String(Y.orderId)),l(" Lote eliminado"))},q=async(Y,Z)=>{try{s(!0),l("");const R=nr(bt(Oe,"inventory_candies"),sr("productId","==",Y),xn("date","desc")),H=await Qt(R),te=[];H.forEach(ye=>{const Q=ye.data(),Ge=Number(Q.unitsPerPackage||0),ie=Number(Q.totalUnits??Q.quantity??(Q.packages||0)*(Q.unitsPerPackage||0)),ee=Number(Q.remaining??Q.totalUnits??ie??0);te.push({id:ye.id,productId:Q.productId,productName:Q.productName,category:Q.category,measurement:Q.measurement??"unidad",packages:Number(Q.packages||0),unitsPerPackage:Ge,totalUnits:ie,remaining:ee,remainingPackages:typeof Q.remainingPackages=="number"?Number(Q.remainingPackages):void 0,providerPrice:Number(Q.providerPrice||0),subtotal:Number(Q.subtotal||0),totalRivas:Number(Q.totalRivas||0),totalSanJorge:Number(Q.totalSanJorge||0),totalIsla:Number(Q.totalIsla||0),gainRivas:Number(Q.gainRivas||0),gainSanJorge:Number(Q.gainSanJorge||0),gainIsla:Number(Q.gainIsla||0),unitPriceRivas:Number(Q.unitPriceRivas||0),unitPriceSanJorge:Number(Q.unitPriceSanJorge||0),unitPriceIsla:Number(Q.unitPriceIsla||0),date:Q.date,createdAt:Q.createdAt,status:Q.status??"PENDIENTE",orderId:Q.orderId??null})}),E(Y),P(Z),D(te),_(!0)}catch(R){console.error(R),l(" Error abriendo detalle del producto.")}finally{s(!1)}},U=async(Y,Z)=>{const R=r.filter(te=>te.productId===Y);if(confirm(`Eliminar COMPLETAMENTE "${Z}"?
Esto eliminar ${R.length} lote(s) de este producto.`))try{s(!0),l("");const te=Array.from(new Set(R.map(ye=>ye.orderId?String(ye.orderId):"").filter(Boolean)));for(const ye of R)await Pn(zt(Oe,"inventory_candies",ye.id));n(ye=>ye.filter(Q=>Q.productId!==Y)),l(" Producto eliminado (todos sus lotes).");for(const ye of te)await R5(ye);I&&S===Y&&(_(!1),D([]),E(""),P(""))}catch(te){console.error(te),l(" Error eliminando lotes del producto.")}finally{s(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Productos"})}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:Y=>u(Y.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:Y=>f(Y.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[220px]",children:[i.jsx("label",{className:"font-semibold",children:"Categora"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:Y=>p(Y.target.value),children:[i.jsx("option",{value:"",children:"Todas"}),fe.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:Y=>h(Y.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),t.map(Y=>i.jsxs("option",{value:Y.id,children:[Y.name,"  ",Y.category]},Y.id))]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h(""),p("")},children:"Quitar filtro"})]}),i.jsx("div",{className:"bg-gray-50 p-2 rounded shadow border mb-2 text-xs md:text-sm",children:i.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes totales:"})," ",me.totalLotes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes pendientes:"})," ",me.pendientes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes pagados:"})," ",me.pagados]})]})}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-1 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes ingresados:"})," ",Ae.totalPaquetes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Ae.totalPaquetesRestantes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Sub total:"})," ",ql(Ae.totalSubtotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Rivas:"})," ",ql(Ae.totalRivas)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total San Jorge:"})," ",ql(Ae.totalSJ)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Isla:"})," ",ql(Ae.totalIsla)]})]})}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Subtotal"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"ltima fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-center",children:"Opciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Cargando"})}):pe.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Sin productos"})}):pe.map(Y=>i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 border",children:Y.category||""}),i.jsxs("td",{className:"p-2 border max-w-[260px]",children:[i.jsx("span",{className:"block truncate",title:Y.productName,children:Y.productName}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lotes: ",Y.batchCount]})]}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Y.totalPackages}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Y.remainingPackages}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(Y.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(Y.unitPriceRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(Y.unitPriceIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(Y.subtotal)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(Y.totalRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(Y.totalIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(Y.gainRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(Y.gainIsla)}),i.jsx("td",{className:"p-2 border",children:Y.lastDate||""}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>q(Y.productId,Y.productName),children:"Detalle"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>U(Y.productId,Y.productName),children:"Borrar"})]})})]},Y.productId))})]})})}),o&&i.jsx("p",{className:"mt-2 text-sm",children:o}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold",children:"Detalle del producto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[i.jsx("span",{className:"font-semibold",children:"Producto:"})," ",F||""," ",i.jsxs("span",{className:"ml-2",children:[i.jsx("span",{className:"font-semibold",children:"ID:"})," ",S]})]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{_(!1),D([]),E(""),P(""),Pe()},children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes ingresados"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border text-right",children:"Unidades"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio venta Rivas"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio venta Isla"}),i.jsx("th",{className:"p-2 border",children:"Nmero orden"}),i.jsx("th",{className:"p-2 border",children:"Status"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:k.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center text-gray-500",children:"Sin lotes"})}):k.map(Y=>{const Z=g===Y.id,R=jd(Y),H=L5(Y);return i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 border align-top",children:Z?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:y,onChange:te=>b(te.target.value)}):Y.date}),i.jsx("td",{className:"p-2 border align-top",children:Y.category||""}),i.jsxs("td",{className:"p-2 border align-top max-w-[260px]",children:[i.jsx("span",{className:"block truncate",title:Y.productName,children:Y.productName}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lote ID: ",Y.id]})]}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:R}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:H}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Y.totalUnits}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Z?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(w)?"":w,onChange:te=>j(Math.max(0,parseFloat(te.target.value||"0")))}):ql(Y.providerPrice)}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:ql(Y.unitPriceRivas)}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:ql(Y.unitPriceIsla)}),i.jsx("td",{className:"p-2 border align-top",children:Y.orderId?String(Y.orderId):""}),i.jsx("td",{className:"p-2 border align-top",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${Y.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Y.status})}),i.jsx("td",{className:"p-2 border align-top",children:Z?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Be,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Pe,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[Y.status==="PENDIENTE"&&i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:()=>O(Y),children:"Pagar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-black hover:bg-yellow-500 text-xs",onClick:()=>ne(Y),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>G(Y),children:"Borrar"})]})})]},Y.id)})})]})}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>U(S,F),children:"Borrar producto (todos los lotes)"})})]})})]})}const U5=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],go=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Ay(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function R$(t){const e=nr(bt(Oe,"ar_movements"),sr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Pn(zt(Oe,"ar_movements",n.id))))}function M9e({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),o=on(a,"vendedor_dulces"),l=on(a,"admin"),[c,u]=x.useState([]),[d,f]=x.useState(!1),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState(""),[y,b]=x.useState(""),[w,j]=x.useState(!1),[I,_]=x.useState(!1),[S,E]=x.useState(null),[F,P]=x.useState([]),k=async st=>{var Mt;j(!0),_(!0),E(st),P([]);try{const $t=await Ci(zt(Oe,"sales_candies",st));let Dt=null;$t.exists()?Dt=$t.data():Dt=(Mt=(await Qt(nr(bt(Oe,"sales_candies"),sr("name","==",st)))).docs[0])==null?void 0:Mt.data();const qt=(Array.isArray(Dt==null?void 0:Dt.items)?Dt.items:Dt!=null&&Dt.item?[Dt.item]:[]).map(Xt=>({productName:String(Xt.productName||""),qty:Number(Xt.qty||0),unitPrice:Number(Xt.unitPrice||0),discount:Number(Xt.discount||0),total:Number(Xt.total||0)}));P(qt)}catch($t){console.error($t)}finally{_(!1)}},[D,J]=x.useState(""),[fe,Ae]=x.useState("+505 "),[me,pe]=x.useState(""),[ne,Pe]=x.useState(""),[Be,O]=x.useState("ACTIVO"),[G,q]=x.useState(0),[U,Y]=x.useState(""),[Z,R]=x.useState(0),[H,te]=x.useState([]),[ye,Q]=x.useState(!0),[Ge,ie]=x.useState(""),[ee,Ie]=x.useState(null),[ue,se]=x.useState(""),[Ee,je]=x.useState("+505 "),[it,At]=x.useState(""),[pt,yt]=x.useState(""),[Ct,Et]=x.useState("ACTIVO"),[Re,We]=x.useState(0),[et,xe]=x.useState(""),[de,Ue]=x.useState(!1),[Ke,Ne]=x.useState(null),[mt,wt]=x.useState(!1),[we,ae]=x.useState([]),[be,ve]=x.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[Ve,ce]=x.useState(!1),[ke,dt]=x.useState(0),[ft,gt]=x.useState(new Date().toISOString().slice(0,10)),[Rt,ot]=x.useState(""),[Se,ht]=x.useState(!1),[W,Te]=x.useState(null),[Ze,tt]=x.useState(""),[ut,T]=x.useState(0),[M,L]=x.useState(""),[K,re]=x.useState(!1),[le,Me]=x.useState(null),[qe,lt]=x.useState(!1),[Fe,Xe]=x.useState(!1),[he,He]=x.useState(null);x.useEffect(()=>{(async()=>{try{if(Q(!0),o&&!s){te([]),ie(" Este usuario no tiene vendedor asociado (sellerCandyId vaco).");return}const st=await Qt(bt(Oe,"sellers_candies")),Mt=[];st.forEach(qt=>{const Xt=qt.data(),Wt=String(Xt.status||"ACTIVO");Wt==="ACTIVO"&&Mt.push({id:qt.id,name:String(Xt.name||""),status:Wt})}),u(Mt);const $t=o?nr(bt(Oe,"customers_candies"),sr("vendorId","==",s),xn("createdAt","desc")):nr(bt(Oe,"customers_candies"),xn("createdAt","desc")),Dt=await Qt($t),kt=[];Dt.forEach(qt=>{const Xt=qt.data();kt.push({id:qt.id,name:Xt.name??"",phone:Xt.phone??"+505 ",place:Xt.place??"",notes:Xt.notes??"",status:Xt.status??"ACTIVO",creditLimit:Number(Xt.creditLimit??0),createdAt:Xt.createdAt??ur.now(),balance:0,sellerId:Xt.sellerId||"",vendorId:Xt.vendorId||"",vendorName:Xt.vendorName||"",initialDebt:Number(Xt.initialDebt||0),initialDebtDate:String(Xt.initialDebtDate||"").trim(),lastAbonoDate:"",lastAbonoAmount:0})});for(const qt of kt)try{const Xt=nr(bt(Oe,"ar_movements"),sr("customerId","==",qt.id)),Wt=await Qt(Xt);let vr=0,Nr=null;const Vr=[];Wt.forEach(ts=>{var zs,Ll,Dc;const rs=ts.data(),Ml=Number(rs.amount||0);vr+=Ml;const yu=rs.date??((Ll=(zs=rs.createdAt)==null?void 0:zs.toDate)!=null&&Ll.call(zs)?rs.createdAt.toDate().toISOString().slice(0,10):"");if(Vr.push({id:ts.id,date:yu,type:rs.type??(Ml<0?"ABONO":"CARGO"),amount:Ml,ref:rs.ref||{},comment:rs.comment||"",createdAt:rs.createdAt}),Ml<0){const gd=(Dc=rs.createdAt)!=null&&Dc.seconds?Number(rs.createdAt.seconds):0;(!Nr||gd>=Nr.ts)&&(Nr={date:yu,amount:Math.abs(Ml),ts:gd})}});const Gn=Number(qt.initialDebt||0),qs=Ft(Gn,String(qt.initialDebtDate||""),Vr);qt.balance=qs+vr,Nr?(qt.lastAbonoDate=Nr==null?void 0:Nr.date,qt.lastAbonoAmount=Nr==null?void 0:Nr.amount):(qt.lastAbonoDate="",qt.lastAbonoAmount=0)}catch{qt.balance=Number(qt.initialDebt||0),qt.lastAbonoDate="",qt.lastAbonoAmount=0}te(kt)}catch(st){console.error(st),ie(" Error cargando clientes.")}finally{Q(!1)}})()},[o,s]);const Ye=()=>{J(""),Ae("+505 "),pe(""),Pe(""),O("ACTIVO"),q(0),Y(""),R(0)},ct=async st=>{var kt;if(st.preventDefault(),ie(""),!D.trim()){ie("Ingresa el nombre.");return}const Mt=Ay(fe);if(Mt.length<6){ie("Telfono incompleto.");return}const $t=o?s:String(U||"").trim(),Dt=$t&&((kt=c.find(qt=>qt.id===$t))==null?void 0:kt.name)||"";try{const qt=Number(Z||0),Xt=await Bn(bt(Oe,"customers_candies"),{name:D.trim(),phone:Mt,place:me||"",notes:ne||"",status:Be,creditLimit:Number(G||0),vendorId:$t,vendorName:Dt,initialDebt:qt,createdAt:ur.now()});te(Wt=>[{id:Xt.id,name:D.trim(),phone:Mt,place:me||"",notes:ne||"",status:Be,creditLimit:Number(G||0),vendorId:$t,vendorName:Dt,initialDebt:qt,createdAt:ur.now(),balance:qt,lastAbonoDate:"",lastAbonoAmount:0},...Wt]),Ye(),re(!1),ie(" Cliente creado")}catch(qt){console.error(qt),ie(" Error al crear cliente")}},Nt=st=>{if(o){ie(" No permitido: vendedores no editan clientes desde el listado.");return}Ie(st.id),se(st.name),je(st.phone||"+505 "),At(st.place||""),yt(st.notes||""),Et(st.status||"ACTIVO"),We(Number(st.creditLimit||0)),xe(String(st.vendorId||""))},It=()=>{Ie(null),se(""),je("+505 "),At(""),yt(""),Et("ACTIVO"),We(0),xe("")},hr=async()=>{var Xt;if(o){ie(" No permitido.");return}if(!ee)return;const st=Ay(Ee);if(!ue.trim()){ie("Ingresa el nombre.");return}const Mt=H.find(Wt=>Wt.id===ee),$t=String((Mt==null?void 0:Mt.vendorId)||""),Dt=o?s:String(et||"");if(o&&$t&&$t!==s){ie(" Este cliente pertenece a otro vendedor.");return}if(l&&$t&&Dt&&$t!==Dt){ie(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const kt=o?s:String(et||""),qt=kt&&((Xt=c.find(Wt=>Wt.id===kt))==null?void 0:Xt.name)||"";try{await pn(zt(Oe,"customers_candies",ee),{name:ue.trim(),phone:st,place:it||"",notes:pt||"",status:Ct,creditLimit:Number(Re||0),vendorId:kt,vendorName:qt}),te(Wt=>Wt.map(vr=>vr.id===ee?{...vr,name:ue.trim(),phone:st,place:it||"",notes:pt||"",status:Ct,creditLimit:Number(Re||0),vendorId:kt,vendorName:qt}:vr)),It(),ie(" Cliente actualizado")}catch(Wt){console.error(Wt),ie(" Error al actualizar")}},Ot=async st=>{if(confirm(`Eliminar al cliente "${st.name}"?
Se devolvern al inventario todos los dulces de sus compras y se borrarn sus movimientos.`))try{Q(!0);const $t=nr(bt(Oe,"sales_candies"),sr("customerId","==",st.id)),Dt=await Qt($t);for(const Xt of Dt.docs){const Wt=Xt.id;try{await R2(Wt)}catch(vr){console.warn("restoreSaleAndDeleteCandy error",vr);try{await Pn(zt(Oe,"sales_candies",Wt))}catch{}}await R$(Wt)}const kt=nr(bt(Oe,"ar_movements"),sr("customerId","==",st.id)),qt=await Qt(kt);await Promise.all(qt.docs.map(Xt=>Pn(zt(Oe,"ar_movements",Xt.id)))),await Pn(zt(Oe,"customers_candies",st.id)),te(Xt=>Xt.filter(Wt=>Wt.id!==st.id)),ie(" Cliente eliminado y dulces devueltos al inventario")}catch($t){console.error($t),ie(" No se pudo eliminar el cliente.")}finally{Q(!1)}},Ft=(st,Mt,$t)=>{const Dt=Number(st||0);if(!Dt)return 0;const kt=String(Mt||"").trim();return kt&&$t.some(Xt=>{var Gn;const Wt=Number(Xt.amount||0);if(!(Wt>0))return!1;const vr=Math.abs(Wt-Dt)<.01,Nr=String(Xt.date||"").trim()===kt,Vr=!!((Gn=Xt.ref)!=null&&Gn.saleId);return vr&&Nr&&Vr})?0:Dt},lr=(st,Mt,$t)=>{const Dt=st.reduce((vr,Nr)=>vr+(Number(Nr.amount)||0),0),kt=st.filter(vr=>Number(vr.amount)<0).reduce((vr,Nr)=>vr+Math.abs(Number(Nr.amount)||0),0),qt=st.filter(vr=>Number(vr.amount)>0).reduce((vr,Nr)=>vr+(Number(Nr.amount)||0),0),Xt=Ft(Mt,$t,st),Wt=Number(Xt||0)+Dt;ve({saldoActual:Wt,totalAbonado:kt,totalCargos:Number(Xt||0)+qt,saldoRestante:Wt})},ir=async st=>{Ne(st),ae([]),ve({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),Ue(!0),lt(!1),Xe(!1),He(null),ce(!1),dt(0),gt(new Date().toISOString().slice(0,10)),ot(""),Te(null),wt(!0);try{const Mt=nr(bt(Oe,"ar_movements"),sr("customerId","==",st.id)),$t=await Qt(Mt),Dt=[];$t.forEach(kt=>{var vr,Nr;const qt=kt.data(),Xt=qt.date??((Nr=(vr=qt.createdAt)==null?void 0:vr.toDate)!=null&&Nr.call(vr)?qt.createdAt.toDate().toISOString().slice(0,10):""),Wt=Number(qt.amount||0);Dt.push({id:kt.id,date:Xt,type:qt.type??(Wt<0?"ABONO":"CARGO"),amount:Wt,ref:qt.ref||{},comment:qt.comment||"",createdAt:qt.createdAt})}),Dt.sort((kt,qt)=>{var vr,Nr;if(kt.date!==qt.date)return kt.date.localeCompare(qt.date);const Xt=((vr=kt.createdAt)==null?void 0:vr.seconds)||0,Wt=((Nr=qt.createdAt)==null?void 0:Nr.seconds)||0;return Xt-Wt}),ae(Dt),lr(Dt,Number(st.initialDebt||0),String(st.initialDebtDate||""))}catch(Mt){console.error(Mt),ie(" No se pudo cargar el estado de cuenta")}finally{wt(!1)}},Pt=st=>{const Mt=st.filter($t=>Number($t.amount)<0).map($t=>{var Dt;return{date:$t.date,amount:Math.abs(Number($t.amount||0)),ts:((Dt=$t.createdAt)==null?void 0:Dt.seconds)||0}}).sort(($t,Dt)=>($t.ts||0)-(Dt.ts||0));return Mt.length?Mt[Mt.length-1]:null},mr=x.useMemo(()=>Ft(Number((Ke==null?void 0:Ke.initialDebt)||0),String((Ke==null?void 0:Ke.initialDebtDate)||""),we),[Ke==null?void 0:Ke.initialDebt,Ke==null?void 0:Ke.initialDebtDate,we]),Fr=async()=>{if(!Ke)return;ie("");const st=Number(ke||0);if(!(st>0)){ie("Ingresa un monto de abono mayor a 0.");return}const Mt=parseFloat(st.toFixed(2));if(!ft){ie("Selecciona la fecha del abono.");return}try{ht(!0);const $t={customerId:Ke.id,type:"ABONO",amount:-Mt,date:ft,comment:Rt||"",createdAt:ur.now()},kt={id:(await Bn(bt(Oe,"ar_movements"),$t)).id,date:ft,type:"ABONO",amount:-Mt,comment:Rt||"",createdAt:ur.now()},qt=[...we,kt].sort((Nr,Vr)=>{var ts,rs;if(Nr.date!==Vr.date)return Nr.date.localeCompare(Vr.date);const Gn=((ts=Nr.createdAt)==null?void 0:ts.seconds)||0,qs=((rs=Vr.createdAt)==null?void 0:rs.seconds)||0;return Gn-qs});ae(qt),lr(qt,Number(Ke.initialDebt||0),String(Ke.initialDebtDate||""));const Xt=qt.reduce((Nr,Vr)=>Nr+(Number(Vr.amount)||0),0),Wt=Ft(Number(Ke.initialDebt||0),String(Ke.initialDebtDate||""),qt),vr=Number(Wt||0)+Xt;te(Nr=>Nr.map(Vr=>Vr.id!==Ke.id?Vr:{...Vr,balance:vr,lastAbonoDate:ft,lastAbonoAmount:Mt})),Ne(Nr=>Nr&&{...Nr,balance:vr,lastAbonoDate:ft,lastAbonoAmount:Mt}),dt(0),ot(""),gt(new Date().toISOString().slice(0,10)),ce(!1),ie(" Abono registrado")}catch($t){console.error($t),ie(" Error al registrar el abono")}finally{ht(!1)}},jr=st=>{Te(st.id),tt(st.date||new Date().toISOString().slice(0,10)),T(Math.abs(Number(st.amount||0))),L(st.comment||"")},Qr=()=>{Te(null),tt(""),T(0),L("")},Dr=async()=>{if(!W||!Ke)return;const st=we.findIndex(kt=>kt.id===W);if(st===-1)return;const Mt=we[st],$t=Number(ut||0);if(!($t>0)){ie("El monto debe ser mayor a 0.");return}const Dt=Mt.type==="ABONO"?-parseFloat($t.toFixed(2)):+parseFloat($t.toFixed(2));try{await pn(zt(Oe,"ar_movements",W),{date:Ze,amount:Dt,comment:M||""});const kt=[...we];kt[st]={...Mt,date:Ze,amount:Dt,comment:M||""},kt.sort((Nr,Vr)=>{var ts,rs;if(Nr.date!==Vr.date)return Nr.date.localeCompare(Vr.date);const Gn=((ts=Nr.createdAt)==null?void 0:ts.seconds)||0,qs=((rs=Vr.createdAt)==null?void 0:rs.seconds)||0;return Gn-qs}),ae(kt),lr(kt,Number(Ke.initialDebt||0),String(Ke.initialDebtDate||""));const qt=kt.reduce((Nr,Vr)=>Nr+(Number(Vr.amount)||0),0),Xt=Ft(Number(Ke.initialDebt||0),String(Ke.initialDebtDate||""),kt),Wt=Number(Xt||0)+qt,vr=Pt(kt);te(Nr=>Nr.map(Vr=>Vr.id===Ke.id?{...Vr,balance:Wt,lastAbonoDate:(vr==null?void 0:vr.date)||"",lastAbonoAmount:(vr==null?void 0:vr.amount)||0}:Vr)),Ne(Nr=>Nr&&{...Nr,balance:Wt,lastAbonoDate:(vr==null?void 0:vr.date)||"",lastAbonoAmount:(vr==null?void 0:vr.amount)||0}),Qr(),ie(" Movimiento actualizado")}catch(kt){console.error(kt),ie(" Error al actualizar movimiento")}},nn=async st=>{var $t,Dt;if(confirm(`Eliminar este movimiento (${st.type==="ABONO"?"Abono":"Compra"}) del ${st.date}?${st.type==="CARGO"&&(($t=st.ref)!=null&&$t.saleId)?`
Se devolvern al inventario los dulces de esa venta.`:""}`)&&Ke)try{if(Q(!0),st.type==="CARGO"&&((Dt=st.ref)!=null&&Dt.saleId)){try{await R2(st.ref.saleId)}catch(Nr){console.warn("restoreSaleAndDeleteCandy error",Nr),Q(!1),ie(" No se pudo devolver inventario de la venta.");return}await R$(st.ref.saleId)}else await Pn(zt(Oe,"ar_movements",st.id));const kt=we.filter(Nr=>{var Vr,Gn;return st.type==="CARGO"&&((Vr=st.ref)!=null&&Vr.saleId)?((Gn=Nr.ref)==null?void 0:Gn.saleId)!==st.ref.saleId:Nr.id!==st.id});ae(kt),lr(kt,Number(Ke.initialDebt||0),String(Ke.initialDebtDate||""));const qt=kt.reduce((Nr,Vr)=>Nr+(Number(Vr.amount)||0),0),Xt=Ft(Number(Ke.initialDebt||0),String(Ke.initialDebtDate||""),kt),Wt=Number(Xt||0)+qt,vr=Pt(kt);te(Nr=>Nr.map(Vr=>Vr.id===Ke.id?{...Vr,balance:Wt,lastAbonoDate:(vr==null?void 0:vr.date)||"",lastAbonoAmount:(vr==null?void 0:vr.amount)||0}:Vr)),Ne(Nr=>Nr&&{...Nr,balance:Wt,lastAbonoDate:(vr==null?void 0:vr.date)||"",lastAbonoAmount:(vr==null?void 0:vr.amount)||0}),He(null),ie(" Movimiento eliminado")}catch(kt){console.error(kt),ie(" Error al eliminar movimiento")}finally{Q(!1)}},zn=x.useMemo(()=>[...H].sort((st,Mt)=>{var $t,Dt;return st.status!==Mt.status?st.status==="BLOQUEADO"?1:-1:((($t=Mt.createdAt)==null?void 0:$t.seconds)||0)-(((Dt=st.createdAt)==null?void 0:Dt.seconds)||0)}),[H]),xt=st=>st==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",wr=x.useMemo(()=>{const st=A.trim().toLowerCase(),Mt=g.trim()===""?null:Number(g),$t=y.trim()===""?null:Number(y);return zn.filter(Dt=>{const kt=!st||String(Dt.name||"").toLowerCase().includes(st),qt=!m||Dt.status===m,Xt=Number(Dt.balance||0),Wt=Mt===null||!Number.isNaN(Mt)&&Xt>=Mt,vr=$t===null||!Number.isNaN($t)&&Xt<=$t;return kt&&qt&&Wt&&vr})},[zn,A,m,g,y]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Dulces)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{re(!0),o&&Y(s)},type:"button",children:"Crear Cliente"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border w-full md:w-auto",onClick:()=>f(st=>!st),children:d?"Ocultar filtros":"Mostrar filtros"}),d&&i.jsxs("div",{className:"mt-2 bg-white border rounded-xl p-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cliente"}),i.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:st=>h(st.target.value),placeholder:"Buscar por nombre"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:st=>p(st.target.value||""),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mn."}),i.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:g,onChange:st=>v(st.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mx."}),i.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:y,onChange:st=>b(st.target.value),placeholder:""})]})]}),i.jsx("div",{className:"md:col-span-4 flex flex-wrap gap-2 justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border",onClick:()=>{h(""),p(""),v(""),b("")},children:"Limpiar"})})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:ye?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):wr.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):wr.map(st=>{var $t;const Mt=ee===st.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:($t=st.createdAt)!=null&&$t.toDate?st.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border text-left",children:Mt?i.jsx("input",{className:"w-full border p-1 rounded",value:ue,onChange:Dt=>se(Dt.target.value)}):i.jsx("div",{className:"font-medium",children:st.name})}),i.jsx("td",{className:"p-2 border",children:Mt?i.jsx("input",{className:"w-full border p-1 rounded",value:Ee,onChange:Dt=>je(Ay(Dt.target.value))}):st.phone}),i.jsx("td",{className:"p-2 border",children:Mt?i.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:o?s:et,onChange:Dt=>xe(Dt.target.value),disabled:o,title:"Vendedor asociado",children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Dt=>i.jsx("option",{value:Dt.id,children:Dt.name},Dt.id))]}):st.vendorName||""}),i.jsx("td",{className:"p-2 border",children:Mt?i.jsxs("select",{className:"w-full border p-1 rounded",value:it,onChange:Dt=>At(Dt.target.value),children:[i.jsx("option",{value:"",children:""}),U5.map(Dt=>i.jsx("option",{value:Dt,children:Dt},Dt))]}):st.place||""}),i.jsx("td",{className:"p-2 border",children:Mt?i.jsxs("select",{className:"w-full border p-1 rounded",value:Ct,onChange:Dt=>Et(Dt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${xt(st.status)}`,children:st.status})}),i.jsx("td",{className:"p-2 border",children:Mt?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Re)?"":Re,onChange:Dt=>We(Math.max(0,Number(Dt.target.value||0)))}):go(st.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:go(st.balance||0)}),i.jsx("td",{className:"p-2 border",children:Mt?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:pt,onChange:Dt=>yt(Dt.target.value),maxLength:500}):i.jsx("span",{title:st.notes||"",children:(st.notes||"").length>40?(st.notes||"").slice(0,40)+"":st.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:Mt?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:hr,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:It,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Nt(st),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>Ot(st),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>ir(st),children:"Estado de cuenta"})]})})})]},st.id)})})]})}),i.jsx("div",{className:"md:hidden",children:ye?i.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):wr.length===0?i.jsx("div",{className:"p-4 text-center text-sm",children:"Sin clientes"}):i.jsx("div",{className:"space-y-2",children:wr.map(st=>{const Mt=le===st.id,$t=ee===st.id,Dt=i.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${xt(st.status)}`,children:st.status});return i.jsxs("div",{className:"border rounded-2xl shadow-sm bg-white overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{ie(""),!$t&&Me(kt=>kt===st.id?null:st.id)},children:[i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx("div",{className:"truncate font-semibold",children:st.name})}),i.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Pendiente"}),i.jsx("div",{className:"font-semibold leading-4",children:go(st.balance||0)})]}),Dt]})]}),Mt&&i.jsxs("div",{className:"px-3 pb-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"ltimo abono"}),i.jsx("div",{className:"font-medium",children:st.lastAbonoDate?st.lastAbonoDate:""}),i.jsx("div",{className:"text-[12px] text-gray-700",children:st.lastAbonoAmount?go(st.lastAbonoAmount):""})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo pendiente"}),i.jsx("div",{className:"text-lg font-bold",children:go(st.balance||0)})]})]}),$t?i.jsxs("div",{className:"mt-3 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded-xl",value:ue,onChange:kt=>se(kt.target.value)})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded-xl",value:Ee,onChange:kt=>je(Ay(kt.target.value))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:Ct,onChange:kt=>Et(kt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:it,onChange:kt=>At(kt.target.value),children:[i.jsx("option",{value:"",children:""}),U5.map(kt=>i.jsx("option",{value:kt,children:kt},kt))]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:o?s:et,onChange:kt=>xe(kt.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(kt=>i.jsx("option",{value:kt.id,children:kt.name},kt.id))]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lmite"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(Re)?"":Re,onChange:kt=>We(Math.max(0,Number(kt.target.value||0)))})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded-xl min-h-24 resize-y",value:pt,onChange:kt=>yt(kt.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:hr,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:()=>{It(),Me(null)},type:"button",children:"Cancelar"})]})]}):i.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Nt(st),type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>Ot(st),disabled:!l,title:l?"Borrar":"Solo admin",type:"button",children:"Borrar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>ir(st),type:"button",children:"Estado"})]})]})]},st.id)})})})]}),Ge&&i.jsx("p",{className:"mt-2 text-sm",children:Ge}),K&&uu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>re(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>re(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:ct,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:D,onChange:st=>J(st.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:fe,onChange:st=>Ae(Ay(st.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:me,onChange:st=>pe(st.target.value),children:[i.jsx("option",{value:"",children:""}),U5.map(st=>i.jsx("option",{value:st,children:st},st))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Be,onChange:st=>O(st.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o?s:U,onChange:st=>Y(st.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(st=>i.jsx("option",{value:st.id,children:st.name},st.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Z===0?"":Z,onChange:st=>R(Math.max(0,Number(st.target.value||0))),placeholder:"Ej: 1500"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:G===0?"":G,onChange:st=>q(Math.max(0,Number(st.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ne,onChange:st=>Pe(st.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ne.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>re(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),de&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4 max-h-[92vh] overflow-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(Ke==null?void 0:Ke.name)||""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{dt(0),gt(new Date().toISOString().slice(0,10)),ot(""),ce(!0)},children:"Abonar"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ue(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"hidden md:block",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),i.jsx("div",{className:"text-xl font-semibold",children:go(Number(mr||0))})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:go(be.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:go(be.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:go(be.saldoRestante)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:mt?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):we.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):we.map(st=>{var $t,Dt;const Mt=W===st.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Mt?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Ze,onChange:kt=>tt(kt.target.value)}):st.date||""}),i.jsx("td",{className:"p-2 border",children:st.amount>=0?($t=st.ref)!=null&&$t.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver dulces de esta compra",onClick:()=>k(st.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(Dt=st.ref)!=null&&Dt.saleId?`Venta #${st.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:Mt?i.jsx("input",{className:"w-full border p-1 rounded",value:M,onChange:kt=>L(kt.target.value),placeholder:"Comentario"}):i.jsx("span",{title:st.comment||"",children:(st.comment||"").length>40?(st.comment||"").slice(0,40)+"":st.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:Mt?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ut)?"":ut,onChange:kt=>{const qt=Number(kt.target.value||0),Xt=Number.isFinite(qt)?Math.max(0,parseFloat(qt.toFixed(2))):0;T(Xt)},placeholder:"0.00"}):go(st.amount)}),i.jsx("td",{className:"p-2 border",children:Mt?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Dr,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Qr,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>jr(st),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>nn(st),children:"Borrar"})]})})]},st.id)})})]})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>lt(st=>!st),children:[i.jsx("div",{className:"font-semibold",children:"Estado de cuenta"}),i.jsx("div",{className:"text-sm text-gray-500",children:qe?"Ocultar":"Ver"})]}),qe&&i.jsxs("div",{className:"px-3 pb-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Deuda inicial"}),i.jsx("div",{className:"font-bold",children:go(Number(mr||0))})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo actual"}),i.jsx("div",{className:"font-bold",children:go(be.saldoActual)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Total abonado"}),i.jsx("div",{className:"font-bold",children:go(be.totalAbonado)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo restante"}),i.jsx("div",{className:"font-bold",children:go(be.saldoRestante)})]})]})]}),i.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>Xe(st=>!st),children:[i.jsx("div",{className:"font-semibold",children:"Movimientos"}),i.jsx("div",{className:"text-sm text-gray-500",children:Fe?"Ocultar":"Ver"})]}),Fe&&i.jsx("div",{className:"px-3 pb-3 space-y-2",children:mt?i.jsx("div",{className:"text-center text-sm p-3",children:"Cargando"}):we.length===0?i.jsx("div",{className:"text-center text-sm p-3",children:"Sin movimientos"}):we.map(st=>{var qt;const Mt=he===st.id,$t=W===st.id,Dt=st.amount>=0?"CARGO":"ABONO",kt=st.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700";return i.jsxs("div",{className:"border rounded-2xl overflow-hidden bg-white",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{$t||He(Xt=>Xt===st.id?null:st.id)},children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Fecha"}),i.jsx("div",{className:"font-semibold",children:st.date||""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${kt}`,children:Dt}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Monto"}),i.jsx("div",{className:"font-semibold",children:go(st.amount)})]})]})]}),Mt&&i.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Referencia"}),i.jsx("div",{className:"font-medium",children:(qt=st.ref)!=null&&qt.saleId?`Venta #${st.ref.saleId}`:""})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),$t?i.jsx("input",{className:"w-full border p-2 rounded-xl",value:M,onChange:Xt=>L(Xt.target.value),placeholder:"Comentario"}):i.jsx("div",{className:"font-medium",children:(st.comment||"").trim()||""})]}),$t&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded-xl",value:Ze,onChange:Xt=>tt(Xt.target.value)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(ut)?"":ut,onChange:Xt=>{const Wt=Number(Xt.target.value||0),vr=Number.isFinite(Wt)?Math.max(0,parseFloat(Wt.toFixed(2))):0;T(vr)}})]})]}),$t?i.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:Dr,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:Qr,type:"button",children:"Cancelar"})]}):i.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>jr(st),type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700",onClick:()=>nn(st),type:"button",children:"Borrar"})]})]})]},st.id)})})]})]}),Ve&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(Ke==null?void 0:Ke.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:ft,onChange:st=>gt(st.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ke===0?"":ke,onChange:st=>{const Mt=Number(st.target.value||0),$t=Number.isFinite(Mt)?Math.max(0,parseFloat(Mt.toFixed(2))):0;dt($t)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Rt,onChange:st=>ot(st.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[Rt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ce(!1),disabled:Se,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Fr,disabled:Se,children:Se?"Guardando...":"Guardar abono"})]})]})})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Dulces vendidos"," ",S?` #${S}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:I?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):F.map((st,Mt)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:st.productName}),i.jsx("td",{className:"p-2 border text-right",children:st.qty}),i.jsx("td",{className:"p-2 border text-right",children:go(st.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:go(st.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:go(st.total)})]},Mt))})]})})]})})]})}const mc=t=>`C$ ${(Number(t)||0).toFixed(2)}`,L9e=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas","Pull","Tilgue","Balge","Santa Cruz","Moyogalpa","Santo Domingo","San Jos del Sur","San Fernando","Merida","La Paloma","San Lorenzo","San Carlos","San Miguel"];function U9e(t){switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function Q9e(t){switch(t){case"Rivas":return"RIVAS";case"San Jorge":return"SAN_JORGE";case"Isla Ometepe":return"ISLA";default:return"RIVAS"}}function V9e(t){const{saleId:e,date:r,customerName:n,branch:a,items:s,total:o,vendorName:l,vendorCommissionPercent:c,vendorCommissionAmount:u}=t,d=new Mr;let f=12;if(d.setFontSize(16),d.text("Multiservicios Ortiz",10,f),f+=6,d.setFontSize(12),d.text("Recibo de venta certificada",10,f),f+=8,d.setFontSize(12),d.text(`Fecha: ${r}`,10,f),f+=5,d.text(`Cliente: ${n||"Cliente Mostrador"}`,10,f),f+=5,d.text(`Sucursal: ${U9e(a)}`,10,f),f+=5,d.text(`Autorizado: ${e}`,10,f),f+=5,l&&(d.text(`Vendedor: ${l}`,10,f),f+=5),typeof c=="number"){const A=Number(u||0).toFixed(2),h=c.toFixed(2);d.text(`Comisin vendedor: ${h}%  C$ ${A}`,10,f),f+=8}else f+=3;d.setFontSize(12),d.text("Producto",10,f),d.text("Paquetes",110,f,{align:"right"}),d.text("Precio.",150,f,{align:"right"}),d.text("Subtotal",190,f,{align:"right"}),f+=4,d.line(10,f,190,f),f+=4,s.forEach(A=>{f>270&&(d.addPage(),f=12);const h=(A.productName||"").length>50?A.productName.slice(0,47)+"...":A.productName;d.text(h,10,f),d.text(String(A.qty),110,f,{align:"right"}),d.text(`C$ ${Number(A.unitPrice||0).toFixed(2)}`,150,f,{align:"right"}),d.text(`C$ ${Number(A.total||0).toFixed(2)}`,190,f,{align:"right"}),f+=5}),f+=4,d.line(10,f,190,f),f+=6,d.setFontSize(13),d.text(`Total: C$ ${Number(o||0).toFixed(2)}`,190,f,{align:"right"}),f+=6,d.setFontSize(9),d.text("Gracias por su compra.",10,f),d.save(`venta_dulces_${e}.pdf`)}async function M$(t,e){if(!t||!e)return 0;const r=nr(bt(Oe,"inventory_candies_sellers"),sr("sellerId","==",e),sr("productId","==",t)),n=await Qt(r);let a=0;return n.forEach(s=>{const o=s.data(),l=Number(o.remainingUnits??o.remaining??o.totalUnits??0);l>0&&(a+=l)}),a}const L$=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)};async function H9e(t){const{productId:e,vendorId:r,quantityUnits:n,saleDate:a,saleId:s}=t;let o=Math.max(0,Math.floor(Number(n||0)));const l=[];if(!e||!r||o<=0)return{allocations:[]};const c=nr(bt(Oe,"inventory_candies_sellers"),sr("sellerId","==",r),sr("productId","==",e),sr("remainingUnits",">",0),xn("date","asc"),xn("createdAt","asc")),u=await Qt(c);for(const d of u.docs){if(o<=0)break;const f=d.data(),A=Number(f.remainingUnits||0);if(A<=0)continue;const h=Math.min(A,o),m=A-h,p=Math.max(1,Math.floor(Number(f.unitsPerPackage||1))),g=Math.floor(m/p);await pn(d.ref,{remainingUnits:m,remainingPackages:g}),l.push({inventorySellerId:d.id,productId:e,units:h,saleDate:a,saleId:s}),o-=h}return o>0&&console.warn("[allocateSaleFIFOCandyFromVendor] No alcanz el inventario del vendedor, faltaron unidades.",{productId:e,vendorId:r,remaining:o}),{allocations:l}}function U$(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function $9e({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t;on(a,"admin"),on(a,"vendedor_dulces");const[s,o]=x.useState([]),[l,c]=x.useState([]),[u,d]=x.useState([]),[f,A]=x.useState({}),[h,m]=x.useState("CONTADO"),[p,g]=x.useState("RIVAS"),[v,y]=x.useState(""),[b,w]=x.useState(""),[j,I]=x.useState(L$()),[_,S]=x.useState(""),[E,F]=x.useState(!1),[P,k]=x.useState(""),[D,J]=x.useState([]),[fe,Ae]=x.useState(!0),[me,pe]=x.useState(!1),ne=x.useMemo(()=>D.reduce((W,Te)=>W+(Te.qtyPackages||0),0),[D]),Pe=x.useMemo(()=>D.reduce((W,Te)=>W+(Te.qtyPackages||0)*(Te.unitsPerPackage||1),0),[D]),Be=x.useMemo(()=>{const W=D.reduce((Te,Ze)=>{const tt=(Number(Ze.pricePerPackage)||0)*(Ze.qtyPackages||0),ut=Number(Ze.discount)||0,T=Math.max(0,tt-ut);return Te+T},0);return Math.floor(W*100)/100},[D]),[O,G]=x.useState(0),[q,U]=x.useState(""),[Y,Z]=x.useState(!1),[R,H]=x.useState(!1),[te,ye]=x.useState(""),[Q,Ge]=x.useState("+505 "),[ie,ee]=x.useState(""),[Ie,ue]=x.useState(""),[se,Ee]=x.useState("ACTIVO"),[je,it]=x.useState(0),[At,pt]=x.useState(""),yt=()=>{ye(""),Ge("+505 "),ee(""),ue(""),Ee("ACTIVO"),it(0)},[Ct,Et]=x.useState(!1),Re=async W=>{const Te=String(W||"").trim();if(!Te)return;const Ze=Rt.find(M=>String(M.barcode||"")===Te),tt=Rt.find(M=>String(M.sku||"")===Te),ut=Rt.find(M=>String(M.id||"")===Te),T=Ze||tt||ut||null;T?(await Ve(T.id),U(" Producto agregado desde escner."),setTimeout(()=>U(""),2500)):(U(" Cdigo no corresponde a ningn producto disponible."),setTimeout(()=>U(""),2500))};function We({open:W,onClose:Te,onDetected:Ze}){const tt=x.useRef(null),ut=x.useRef(null),[T,M]=x.useState(""),L=x.useRef("");return x.useEffect(()=>{if(!W)return;let K=!1;const re=new b2,le=()=>{var qe,lt,Fe;try{(qe=ut.current)==null||qe.stop()}catch{}ut.current=null;try{const Xe=(lt=tt.current)==null?void 0:lt.srcObject;try{(Fe=Xe==null?void 0:Xe.getTracks)==null||Fe.call(Xe).forEach(he=>he.stop())}catch{}}catch{}try{tt.current&&(tt.current.srcObject=null)}catch{}};return(async()=>{M("");try{if(!tt.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(Fe=>Fe.stop())}catch{}const qe=await re.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},tt.current,lt=>{if(!K&&lt){const Fe=String(lt.getText()||"").trim().replace(/\s+/g,"");if(!Fe||Fe===L.current)return;L.current=Fe,le(),Ze(Fe),Te()}});ut.current=qe}catch(qe){const lt=String((qe==null?void 0:qe.message)||""),Fe=String((qe==null?void 0:qe.name)||"");lt.toLowerCase().includes("permission")||Fe==="NotAllowedError"?M("Permiso de cmara denegado."):Fe==="NotFoundError"||lt.toLowerCase().includes("notfound")?M("No se encontr cmara en este dispositivo."):lt.toLowerCase().includes("secure")||lt.toLowerCase().includes("https")?M("La cmara requiere HTTPS (sitio seguro)."):M(lt||"No se pudo iniciar el escner.")}})(),()=>{var qe;K=!0;try{(qe=ut.current)==null||qe.stop()}catch{}ut.current=null}},[W,Te,Ze]),W?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Te,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:tt,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),T&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:T}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}const et=x.useMemo(()=>s.find(W=>W.id===v),[s,v]),xe=x.useMemo(()=>E&&_?s.filter(W=>(W.vendorId??W.sellerId??"")===_):s,[s,E,_]),de=(et==null?void 0:et.balance)||0,Ue=h==="CREDITO"?de+Math.max(0,Number(Be||0))-Math.max(0,Number(O||0)):0,Ke=x.useMemo(()=>{if(h!=="CREDITO")return 0;const W=Math.max(0,Number(de||0))+Math.max(0,Number(Be||0));return Math.floor(W*100)/100},[h,de,Be]),Ne=W=>{const Te=Math.max(0,Number(W||0));return Math.min(Te,Ke)},mt=x.useMemo(()=>u.find(W=>W.id===_)||null,[u,_]),wt=(mt==null?void 0:mt.commissionPercent)||0,we=x.useMemo(()=>{const W=D.reduce((Te,Ze)=>Te+Number(Ze.margenVendedor||0),0);return Number(W.toFixed(2))},[D]);x.useEffect(()=>{(async()=>{const W=nr(bt(Oe,"customers_candies"),xn("createdAt","desc")),Te=await Qt(W),Ze=[];Te.forEach(M=>{const L=M.data();Ze.push({id:M.id,name:L.name??"",phone:L.phone??"+505 ",place:L.place??"",status:L.status??"ACTIVO",creditLimit:Number(L.creditLimit??0),balance:0,sellerId:L.sellerId??L.vendorId??"",vendorId:L.vendorId??L.sellerId??""})});for(const M of Ze)try{const L=nr(bt(Oe,"ar_movements"),sr("customerId","==",M.id)),K=await Qt(L);let re=0;K.forEach(Me=>re+=Number(Me.data().amount||0));const le=Number(M.initialDebt||0);M.balance=re+le}catch{M.balance=0}o(Ze);const tt=nr(bt(Oe,"products_candies"),xn("createdAt","desc")),ut=await Qt(tt),T=[];ut.forEach(M=>{const L=M.data();T.push({id:M.id,name:L.name??"(sin nombre)",sku:L.sku??"",unitsPerPackage:Number(L.unitsPerPackage??1),barcode:String(L.barcode||""),priceRivas:Number(L.unitPriceRivas??0),priceSanJorge:Number(L.unitPriceSanJorge??0),priceIsla:Number(L.unitPriceIsla??0),providerPrice:Number(L.providerPrice??0),providerPricePerUnit:Number(L.providerPricePerUnit??0)})}),c(T);try{const M=await Qt(bt(Oe,"sellers_candies")),L=[];M.forEach(K=>{const re=K.data(),le=re.branch||"Rivas",Me=Q9e(le);L.push({id:K.id,name:re.name??"(sin nombre)",branch:Me,branchLabel:le,commissionPercent:Number(re.commissionPercent??0)})}),d(L)}catch(M){console.error("Error cargando vendedores:",M)}A({})})()},[]),x.useEffect(()=>{var Te,Ze;const W=e&&e.length?e:t;if(W&&((Te=W.includes)!=null&&Te.call(W,"vendedor_dulces"))&&r){S(r),F(!0);try{localStorage.setItem("pos_vendorId",r),localStorage.setItem("pos_role","VENDEDOR")}catch{}return}if(W&&((Ze=W.includes)!=null&&Ze.call(W,"admin"))){F(!1);return}try{const tt=localStorage.getItem("pos_vendorId")||"",ut=localStorage.getItem("pos_role")||"";tt&&S(tt),ut.toUpperCase()==="VENDEDOR"&&F(!0)}catch{}},[t,r]);const ae=async W=>{if(!W){A({});return}const Te=nr(bt(Oe,"inventory_candies_sellers"),sr("sellerId","==",W)),Ze=await Qt(Te),tt={};Ze.forEach(ut=>{const T=ut.data(),M=T.productId||"";if(!M)return;const L=Number(T.remainingUnits??T.remaining??T.totalUnits??0);L<=0||(tt[M]=(tt[M]||0)+L)}),A(tt),J(ut=>{const T=[];for(const M of ut){const L=tt[M.productId]??0;L>0&&T.push({...M,availableUnits:L})}return T})};x.useEffect(()=>{if(!_){A({});return}const W=u.find(Te=>Te.id===_);W&&g(W.branch),ae(_)},[_,u]),x.useEffect(()=>{J(W=>W.map(Te=>{const Ze=l.find(ut=>ut.id===Te.productId);if(!Ze)return Te;const tt=p==="RIVAS"?Ze.priceRivas:p==="SAN_JORGE"?Ze.priceSanJorge:Ze.priceIsla;return{...Te,pricePerPackage:Number(tt)||0}}))},[p,l]);async function be(W){const{productId:Te,vendorId:Ze,branch:tt}=W;if(!Te||!Ze)return 0;const ut=nr(bt(Oe,"inventory_candies_sellers"),sr("sellerId","==",Ze),sr("productId","==",Te)),T=await Qt(ut);if(T.empty)return 0;const M=T.docs[0].data(),L=Number(M.unitPriceVendor??0);if(L>0)return L;const K=Number(tt==="RIVAS"?M.unitPriceRivas??0:tt==="SAN_JORGE"?M.unitPriceSanJorge??0:M.unitPriceIsla??0);return Number(K||0)}const ve=W=>{const Te=Number(wt||0),Ze=Number(W||0)*Te/100;return Math.max(0,Number(Ze.toFixed(2)))},Ve=async W=>{var le;if(!W)return;if(!_){U("Selecciona primero el vendedor para usar su inventario."),k("");return}if(D.some(Me=>Me.productId===W)){k("");return}const Te=l.find(Me=>Me.id===W);if(!Te){k("");return}const Ze=await M$(W,_),tt=((le=u.find(Me=>Me.id===_))==null?void 0:le.branch)??p,ut=await be({productId:W,vendorId:_,branch:tt}),M=await(async Me=>{const{productId:qe,vendorId:lt}=Me;if(!qe||!lt)return 0;try{const Fe=nr(bt(Oe,"inventory_candies_sellers"),sr("sellerId","==",lt),sr("productId","==",qe)),Xe=await Qt(Fe);if(Xe.empty)return 0;const he=Xe.docs[0].data();return Number(he.providerPrice??0)}catch{return 0}})({productId:W,vendorId:_}),L=(()=>{const Me=Number(Te.providerPrice||0);if(Me>0)return Me;const qe=Number(Te.providerPricePerUnit||0);return qe>0?qe*Number(Te.unitsPerPackage||1):0})(),K=Number(M||0)>0?Number(M||0):Number(L||0),re={productId:W,productName:Te.name||"",sku:Te.sku||"",unitsPerPackage:Te.unitsPerPackage||1,pricePerPackage:Number(ut)||0,availableUnits:Number(Ze)||0,qtyPackages:0,discount:0,providerPricePerPackage:Number(K)||0,margenVendedor:0,uBruta:0};J(Me=>[...Me,re]),k("")},ce=(W,Te)=>{J(Ze=>Ze.map(tt=>{if(tt.productId!==W)return tt;if(Te==="")return{...tt,qtyPackages:0};const ut=Math.max(0,Math.floor(Number(Te))),T=f[W]??tt.availableUnits??0,M=Math.max(1,Number(tt.unitsPerPackage||1)),L=Math.floor(T/M);let K=ut;ut>L&&(K=L,U(` Solo hay ${L} paquetes disponibles.`),setTimeout(()=>U(""),2500));const re=Number(tt.pricePerPackage||0)*K,le=Number(tt.providerPricePerPackage||0)*K,Me=re-le,qe=ve(Me);return{...tt,qtyPackages:K,margenVendedor:qe,uBruta:Me}}))},ke=(W,Te)=>{J(Ze=>Ze.map(tt=>{if(tt.productId!==W)return tt;if(Te==="")return{...tt,discount:0};const ut=Math.max(0,Math.floor(Number(Te))),T=tt.qtyPackages||0,M=Number(tt.pricePerPackage||0)*T,L=Number(tt.providerPricePerPackage||0)*T,K=M-L,re=ve(K);return{...tt,discount:ut,margenVendedor:re,uBruta:K}}))},dt=W=>J(Te=>Te.filter(Ze=>Ze.productId!==W)),ft=async()=>{if(!j)return"Selecciona la fecha.";if(!_)return"Selecciona el vendedor para esta venta.";if(D.length===0)return"Agrega al menos un producto.";const W=D.filter(Te=>(Te.qtyPackages||0)>0);if(W.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(Be>0))return"El total debe ser mayor a cero.";if(h==="CONTADO"){if(!b.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!v)return"Selecciona un cliente (crdito).";if(O<0)return"El pago inicial no puede ser negativo.";if(O>Ke)return"El pago inicial no puede superar el saldo a deber (saldo actual + venta).";if((et==null?void 0:et.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const Te of W){const Ze=Te.unitsPerPackage||1,tt=(Te.qtyPackages||0)*Ze,ut=await M$(Te.productId,_),T=Math.floor(ut/Ze);if(tt>ut)return`Inventario insuficiente en el pedido del vendedor para "${Te.productName}". Disponible: ${T} paquetes.`;const M=(Number(Te.pricePerPackage)||0)*(Te.qtyPackages||0),L=Number(Te.discount)||0;if(!Number.isInteger(L)||L<0)return`El descuento en "${Te.productName}" debe ser entero y  0.`;if(L>M)return`El descuento en "${Te.productName}" no puede exceder C$ ${M.toFixed(2)}.`}return null},gt=async W=>{W.preventDefault(),U("");const Te=await ft();if(Te){U(" "+Te);return}try{Z(!0);const Ze=D.filter(L=>(L.qtyPackages||0)>0).map(L=>{const K=L.unitsPerPackage||1,re=L.qtyPackages||0,le=re*K,Me=(Number(L.pricePerPackage)||0)*(re||0),qe=Math.max(0,Math.floor(Number(L.discount)||0)),lt=Math.max(0,Me-qe),Fe=Number(L.providerPricePerPackage||0),Xe=Fe*re,he=Me-Xe,He=ve(he);return{productId:L.productId,productName:L.productName,sku:L.sku||"",qty:le,packages:re,unitsPerPackage:K,branch:p,unitPricePackage:Number(L.pricePerPackage)||0,discount:qe,total:Math.floor(lt*100)/100,providerPricePerPackage:Fe,margenVendedor:He,uBruta:he}}),tt={type:h,branch:p,date:j,createdAt:ur.now(),itemsTotal:Number(Be)||0,total:Number(Be)||0,quantity:Number(Pe)||0,packagesTotal:Number(ne)||0,items:Ze,vendorId:_},ut=u.find(L=>L.id===_);ut&&(tt.vendorName=ut.name,tt.vendorBranch=ut.branch,tt.vendorBranchLabel=ut.branchLabel,tt.vendorCommissionPercent=ut.commissionPercent||0,tt.vendorCommissionAmount=we||0),h==="CONTADO"?tt.customerName=b.trim():(tt.customerId=v,tt.downPayment=Number(O)||0);const T=await Bn(bt(Oe,"sales_candies"),tt);if(h==="CONTADO"){const L=(b||"").trim();if(L)try{await Bn(bt(Oe,"cash_customers"),{name:L,date:j,branch:p,vendorId:_,createdAt:ur.now()})}catch(K){console.warn("No se pudo guardar cash_customer:",K)}}if(h==="CREDITO"&&v){const L={customerId:v,date:j,createdAt:ur.now(),ref:{saleId:T.id}};await Bn(bt(Oe,"ar_movements"),{...L,type:"CARGO",amount:Number(Be)||0}),Number(O)>0&&await Bn(bt(Oe,"ar_movements"),{...L,type:"ABONO",amount:-Number(O)})}const M={};for(const L of Ze)if(L.qty>0){const{allocations:K}=await H9e({productId:L.productId,vendorId:_,quantityUnits:L.qty,saleDate:j,saleId:T.id});M[L.productId]={productId:L.productId,vendorId:_,allocations:K}}await pn(zt(Oe,"sales_candies",T.id),{allocationsByItem:M});try{const L=h==="CONTADO"?b.trim()||"Cliente Mostrador":(et==null?void 0:et.name)||"Cliente crdito";V9e({saleId:T.id,date:j,customerName:L,branch:p,items:Ze.map(K=>({productName:K.productName,qty:K.packages,unitPrice:K.unitPricePackage,total:K.total})),total:Number(Be)||0,vendorName:ut==null?void 0:ut.name,vendorCommissionPercent:(ut==null?void 0:ut.commissionPercent)||0,vendorCommissionAmount:we})}catch(L){console.error("Error generando voucher PDF:",L)}m("CONTADO"),y(""),w(""),I(L$()),J([]),G(0),h==="CREDITO"&&v&&o(L=>L.map(K=>K.id===v?{...K,balance:(K.balance||0)+(Number(Be)||0)-(Number(O)||0)}:K)),U(" Venta de dulces registrada"),_?await ae(_):A({})}catch(Ze){console.error(Ze),U(" Error al guardar la venta de dulces")}finally{Z(!1)}},Rt=x.useMemo(()=>l.filter(W=>{const Te=f[W.id]||0,Ze=Math.max(1,Number(W.unitsPerPackage||1));return Math.floor(Te/Ze)>0}).sort((W,Te)=>(W.name||"").localeCompare(Te.name||"")),[l,f]),[ot,Se]=x.useState(""),ht=x.useMemo(()=>{const W=String(ot||"").trim().toLowerCase();return W?Rt.filter(Te=>`${Te.name||""} ${Te.sku||""}`.toLowerCase().includes(W)||String(Te.id||"").includes(W)):Rt},[ot,Rt]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Ventas (Dulces)"})}),i.jsxs("form",{onSubmit:gt,className:"bg-white p-3 sm:p-4 rounded shadow border mb-6",children:[i.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:W=>m(W.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),h==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:b,onChange:W=>w(W.target.value)})]}):i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsxs("select",{className:"w-full sm:flex-1 border p-2 rounded",value:v,onChange:W=>y(W.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),xe.map(W=>i.jsxs("option",{value:W.status==="ACTIVO"?W.id:"",disabled:W.status==="BLOQUEADO",children:[W.name," | ",W.phone," | Saldo: ",mc(W.balance||0)]},W.id))]}),i.jsx("button",{type:"button",className:"w-full sm:w-auto px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>H(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:mc(de)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:Ke,className:"w-full border p-2 rounded",value:O===0?"":O,onChange:W=>{const Te=Ne(W.target.value);G(Te)},placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:mc(Ue)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:W=>I(W.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:W=>{S(W.target.value),J([])},disabled:E,children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(W=>i.jsxs("option",{value:W.id,children:[W.name,"  ",W.branchLabel,"  ",W.commissionPercent.toFixed(2),"%"," comisin"]},W.id))]}),E&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor fijado por el usuario logueado."})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Lista de precios / Sucursal"}),i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"RIVAS",checked:p==="RIVAS",readOnly:!0,disabled:!0}),i.jsx("span",{children:"Rivas"})]}),i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"SAN_JORGE",checked:p==="SAN_JORGE",readOnly:!0,disabled:!0}),i.jsx("span",{children:"San Jorge"})]}),i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"ISLA",checked:p==="ISLA",readOnly:!0,disabled:!0}),i.jsx("span",{children:"Isla de Ometepe"})]})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"La sucursal se toma automticamente del vendedor seleccionado."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:ot,onChange:W=>Se(W.target.value),disabled:!_}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>Et(!0),disabled:!_,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[i.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),i.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:async W=>{const Te=W.target.value;k(Te),await Ve(Te)},disabled:!_,children:[i.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),ht.map(W=>{const Te=D.some(T=>T.productId===W.id),Ze=f[W.id]||0,tt=Math.max(1,Number(W.unitsPerPackage||1)),ut=Math.floor(Ze/tt);return ut<=0?null:i.jsxs("option",{value:Te?"":W.id,disabled:Te,children:[W.name," ",W.sku?` ${W.sku}`:""," (disp: ",ut," ","paq.)",Te?" ":""]},W.id)})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"El selector solo muestra productos disponibles del pedido del vendedor seleccionado (sin ceros)."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("div",{className:"border rounded overflow-hidden min-w-[860px]",children:[i.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[i.jsx("div",{className:"col-span-4",children:"Producto"}),i.jsx("div",{className:"col-span-2 text-right",children:"Precio (paq.)"}),i.jsx("div",{className:"col-span-2 text-right",children:"Existencias (paq.)"}),i.jsx("div",{className:"col-span-1 text-right",children:"Cantidad (paq.)"}),i.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),i.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),i.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),D.length===0?i.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):D.map(W=>{const Te=f[W.productId]??W.availableUnits??0,Ze=W.unitsPerPackage?Math.floor(Te/W.unitsPerPackage):0,tt=Math.max(0,Ze-(W.qtyPackages||0)),ut=(Number(W.pricePerPackage)||0)*(W.qtyPackages||0),T=Math.max(0,ut-(Number(W.discount)||0));return i.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[i.jsx("div",{className:"col-span-4",children:i.jsxs("div",{className:"font-medium",children:[W.productName,W.sku?`  ${W.sku}`:""]})}),i.jsx("div",{className:"col-span-2 text-right",children:mc(W.pricePerPackage)}),i.jsxs("div",{className:"col-span-2 text-right",children:[tt," paq."]}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(W.qtyPackages)||W.qtyPackages===0?"":W.qtyPackages,onChange:M=>ce(W.productId,M.target.value),inputMode:"numeric",placeholder:"0"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(W.discount)||W.discount===0?"":W.discount,onChange:M=>ke(W.productId,M.target.value),inputMode:"numeric",placeholder:"0"})}),i.jsx("div",{className:"col-span-1 text-right",children:mc(T)}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>dt(W.productId),title:"Quitar producto",children:""})})]},W.productId)})]})}),D.length>0&&i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-6 mt-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes totales: "}),i.jsx("span",{className:"font-semibold",children:ne})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total: "}),i.jsx("span",{className:"font-semibold",children:mc(Be)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Comisin vendedor: "}),i.jsxs("span",{className:"font-semibold",children:[mc(we)," ",wt?`(${wt.toFixed(2)}%)`:""]})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:Y,children:Y?"Guardando...":"Registrar venta"})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[i.jsxs("button",{type:"button",onClick:()=>Ae(W=>!W),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Datos de venta",i.jsx("span",{className:"text-lg",children:fe?"":"+"})]}),fe&&i.jsxs("div",{className:"p-3 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:W=>I(W.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:W=>m(W.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),h==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (Cash)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mario Bergoglio",value:b,onChange:W=>w(W.target.value)})]}):i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("select",{className:"w-full border p-2 rounded",value:v,onChange:W=>y(W.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),xe.map(W=>i.jsxs("option",{value:W.status==="ACTIVO"?W.id:"",disabled:W.status==="BLOQUEADO",children:[W.name," | Saldo: ",mc(W.balance||0)]},W.id))]}),i.jsx("button",{type:"button",className:"w-full px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>H(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-base font-semibold",children:mc(de)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-base font-semibold",children:mc(Ue)})]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:Ke,className:"w-full border p-2 rounded",value:O===0?"":O,onChange:W=>{const Te=Ne(W.target.value);G(Te)},placeholder:"0.00"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:W=>{S(W.target.value),J([])},disabled:E,children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(W=>i.jsxs("option",{value:W.id,children:[W.name,"  "," ",W.commissionPercent.toFixed(2),"%"]},W.id))]}),E&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor Logueado en esta app."})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[i.jsxs("button",{type:"button",onClick:()=>pe(W=>!W),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Agrega Productos",i.jsx("span",{className:"text-lg",children:me?"":"+"})]}),me&&i.jsxs("div",{className:"p-3 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Productos"}),i.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:ot,onChange:W=>Se(W.target.value),disabled:!_}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>Et(!0),disabled:!_,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[i.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),i.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:async W=>{const Te=W.target.value;k(Te),await Ve(Te)},disabled:!_,children:[i.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),ht.map(W=>{const Te=D.some(T=>T.productId===W.id),Ze=f[W.id]||0,tt=Math.max(1,Number(W.unitsPerPackage||1)),ut=Math.floor(Ze/tt);return ut<=0?null:i.jsxs("option",{value:Te?"":W.id,disabled:Te,children:[W.name," ",W.sku?` ${W.sku}`:""," (disp:"," ",ut," paq.)",Te?" ":""]},W.id)})]})]}),D.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"No hay productos agregados."}):i.jsx("div",{className:"space-y-2",children:D.map(W=>{const Te=f[W.productId]??W.availableUnits??0,Ze=W.unitsPerPackage?Math.floor(Te/W.unitsPerPackage):0,tt=Math.max(0,Ze-(W.qtyPackages||0)),ut=(Number(W.pricePerPackage)||0)*(W.qtyPackages||0),T=Math.max(0,ut-(Number(W.discount)||0));return i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50 space-y-2",children:[i.jsxs("div",{className:"font-semibold leading-tight",children:[W.productName,W.sku?`  ${W.sku}`:""]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"p-2 rounded border bg-white",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio x Paquete"}),i.jsx("div",{className:"font-bold",children:mc(W.pricePerPackage)})]}),i.jsxs("div",{className:"p-2 rounded border bg-white",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencias"}),i.jsxs("div",{className:"font-bold",children:[tt," paq."]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Cantidad Paquetes"}),i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(W.qtyPackages)||W.qtyPackages===0?"":W.qtyPackages,onChange:M=>ce(W.productId,M.target.value),inputMode:"numeric",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Descuento"}),i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(W.discount)||W.discount===0?"":W.discount,onChange:M=>ke(W.productId,M.target.value),inputMode:"numeric",placeholder:"0"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"font-regular text-gray-600",children:["Total ",mc(T)]}),i.jsxs("div",{className:"font-regular text-gray-600",children:["Comision ",mc(W.margenVendedor||0)]}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg bg-red-100 hover:bg-red-200",onClick:()=>dt(W.productId),children:"Quitar"})]})]},W.productId)})}),D.length>0&&i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:ne})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),i.jsx("div",{className:"font-semibold",children:mc(Be)})]})]})]})]}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl hover:bg-blue-700 disabled:opacity-60",disabled:Y,children:Y?"Guardando...":"Registrar venta"})]})]}),q&&i.jsx("p",{className:"mt-2 text-sm",children:q}),R&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-2 sm:p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[98%] sm:w-[95%] max-w-xl p-3 sm:p-4 max-h-[92vh] overflow-auto",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:te,onChange:W=>ye(W.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:Q,onChange:W=>Ge(U$(W.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ie,onChange:W=>ee(W.target.value),children:[i.jsx("option",{value:"",children:""}),L9e.map(W=>i.jsx("option",{value:W,children:W},W))]})]}),!E&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:At,onChange:W=>pt(W.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.filter(W=>(W.status??"ACTIVO")==="ACTIVO").map(W=>i.jsxs("option",{value:W.id,children:[W.name,"  ",W.branchLabel]},W.id))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Ie,onChange:W=>ue(W.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2",children:[i.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{yt(),H(!1)},children:"Cancelar"}),i.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{var Ze;const W=E?_||r:At;if(!W){U("Selecciona el vendedor para asociar este cliente.");return}if(U(""),!te.trim()){U("Ingresa el nombre del nuevo cliente.");return}const Te=U$(Q);try{const tt=await Bn(bt(Oe,"customers_candies"),{name:te.trim(),phone:Te,place:ie||"",notes:Ie||"",status:se,creditLimit:Number(je||0),createdAt:ur.now(),sellerId:W,vendorId:W,vendorName:((Ze=u.find(T=>T.id===W))==null?void 0:Ze.name)||""}),ut={id:tt.id,name:te.trim(),phone:Te,place:ie||"",status:se,creditLimit:Number(je||0),balance:0,sellerId:W};o(T=>[ut,...T]),y(tt.id),yt(),H(!1),U(" Cliente creado")}catch(tt){console.error(tt),U(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),i.jsx(We,{open:Ct,onClose:()=>Et(!1),onDetected:Re}),Y&&i.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-2",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[i.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const Q$=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],e_=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function G9e(){const[t,e]=x.useState(Ir(af(new Date),"yyyy-MM-dd")),[r,n]=x.useState(Ir(nf(new Date),"yyyy-MM-dd")),[a,s]=x.useState(Ir(new Date,"yyyy-MM-dd")),[o,l]=x.useState(""),[c,u]=x.useState(""),[d,f]=x.useState(0),[A,h]=x.useState("PENDIENTE"),[m,p]=x.useState(""),[g,v]=x.useState([]),[y,b]=x.useState(!0),[w,j]=x.useState(""),[I,_]=x.useState(null),[S,E]=x.useState(""),[F,P]=x.useState(""),[k,D]=x.useState(""),[J,fe]=x.useState(0),[Ae,me]=x.useState("PENDIENTE"),[pe,ne]=x.useState("");x.useEffect(()=>{(async()=>{b(!0);try{const R=nr(bt(Oe,"expenses_candies"),xn("date","desc")),H=await Qt(R),te=[];H.forEach(ye=>{const Q=ye.data();te.push({id:ye.id,date:Q.date||Ir(new Date,"yyyy-MM-dd"),category:Q.category||"",description:Q.description||"",amount:Number(Q.amount||0),status:Q.status||"PENDIENTE",notes:Q.notes||"",createdAt:Q.createdAt??ur.now()})}),v(te)}catch(R){console.error(R),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const Pe=x.useMemo(()=>g.filter(R=>!(t&&R.date<t||r&&R.date>r)),[g,t,r]),Be=x.useMemo(()=>{const R=Pe.reduce((ye,Q)=>ye+(Q.amount||0),0),H=Pe.filter(ye=>ye.status==="PAGADO").reduce((ye,Q)=>ye+(Q.amount||0),0),te=R-H;return{total:R,pagado:H,pendiente:te}},[Pe]),O=()=>{s(Ir(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),h("PENDIENTE"),p("")},G=async R=>{if(R.preventDefault(),j(""),!o){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const H=await Bn(bt(Oe,"expenses_candies"),{date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:ur.now()});v(te=>[{id:H.id,date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:ur.now()},...te]),O(),j(" Gasto registrado")}catch(H){console.error(H),j(" Error al guardar gasto")}},q=R=>{_(R.id),E(R.date),P(R.category||""),D(R.description||""),fe(Number(R.amount||0)),me(R.status||"PENDIENTE"),ne(R.notes||"")},U=()=>{_(null),E(""),P(""),D(""),fe(0),me("PENDIENTE"),ne("")},Y=async()=>{if(I){if(!F){j("Selecciona una categora.");return}if(!k.trim()){j("Ingresa una descripcin.");return}if(!J||J<=0){j("Ingresa un monto vlido.");return}try{await pn(zt(Oe,"expenses_candies",I),{date:S,category:F,description:k.trim(),amount:Number(J.toFixed(2)),status:Ae,notes:pe||""}),v(R=>R.map(H=>H.id===I?{...H,date:S,category:F,description:k.trim(),amount:Number(J.toFixed(2)),status:Ae,notes:pe||""}:H)),U(),j(" Gasto actualizado")}catch(R){console.error(R),j(" Error al actualizar gasto")}}},Z=async R=>{confirm(`Eliminar el gasto "${R.description}"?`)&&(await Pn(zt(Oe,"expenses_candies",R.id)),v(te=>te.filter(ye=>ye.id!==R.id)),j(" Gasto borrado"))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Dulces)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:R=>e(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:R=>n(R.target.value)})]}),i.jsxs("div",{className:"ml-auto text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",e_(Be.total)]}),i.jsxs("div",{children:["Pagado: ",e_(Be.pagado)]}),i.jsxs("div",{children:["Pendiente: ",e_(Be.pendiente)]})]})]}),i.jsxs("form",{onSubmit:G,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:R=>s(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:R=>l(R.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),Q$.map(R=>i.jsx("option",{value:R,children:R},R))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:R=>u(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:R=>f(Math.max(0,Number(R.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:R=>h(R.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:R=>p(R.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Pe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):Pe.slice().sort((R,H)=>R.date.localeCompare(H.date)).map(R=>{const H=I===R.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:te=>E(te.target.value)}):R.date}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:F,onChange:te=>P(te.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),Q$.map(te=>i.jsx("option",{value:te,children:te},te))]}):R.category||""}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{className:"w-full border p-1 rounded",value:k,onChange:te=>D(te.target.value)}):i.jsx("span",{title:R.description,children:R.description.length>40?R.description.slice(0,40)+"":R.description})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(J)?"":J,onChange:te=>fe(Math.max(0,Number(te.target.value||0)))}):e_(R.amount)}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:Ae,onChange:te=>me(te.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:pe,onChange:te=>ne(te.target.value),maxLength:500}):i.jsx("span",{title:R.notes||"",children:(R.notes||"").length>40?(R.notes||"").slice(0,40)+"":R.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:H?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Y,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:U,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>q(R),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Z(R),children:"Borrar"})]})})})]},R.id)})})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w})]})}const pc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function K9e(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Ir(t.createdAt.toDate(),"yyyy-MM-dd"):""}function q9e(t,e){var s,o,l;const r=K9e(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((c,u)=>c+(Number(u.packages??u.qty??u.quantity??0)||0),0),a=Number(t.total??t.itemsTotal??0)||0):(n=Number(t.packagesTotal??t.quantity??((s=t.item)==null?void 0:s.packages)??((o=t.item)==null?void 0:o.qty)??0)||0,a=Number(t.total??((l=t.item)==null?void 0:l.total)??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),vendorId:t.vendorId||void 0,vendorName:t.vendorName||t.vendor||void 0,vendorCommissionPercent:Number(t.vendorCommissionPercent||0)||0,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}async function z9e(t){const e=nr(bt(Oe,"ar_movements"),sr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Pn(zt(Oe,"ar_movements",n.id))))}function W9e({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=on(n,"vendedor_dulces"),s=on(n,"admin"),o=s?8:7,[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,A]=x.useState(null),[h,m]=x.useState([]),p=async se=>{c(!0),d(!0),A(se),m([]);try{const Ee=await Ci(zt(Oe,"sales_candies",se)),je=Ee.exists()?Ee.data():null;if(!je){m([]);return}const At=(Array.isArray(je==null?void 0:je.items)?je.items:je!=null&&je.item?[je.item]:[]).map(pt=>({productName:String(pt.productName||""),qty:Number(pt.packages??pt.qty??pt.quantity??0),unitPrice:Number(pt.unitPricePackage??pt.unitPrice??0),discount:Number(pt.discount||0),total:Number(pt.total??pt.lineFinal??0)}));m(At)}catch(Ee){console.error(Ee)}finally{d(!1)}},[g,v]=x.useState(Ir(new Date,"yyyy-MM-01")),[y,b]=x.useState(Ir(new Date,"yyyy-MM-dd")),[w,j]=x.useState([]),[I,_]=x.useState([]),[S,E]=x.useState([]),[F,P]=x.useState(!0),[k,D]=x.useState(""),[J,fe]=x.useState(""),[Ae,me]=x.useState(""),[pe,ne]=x.useState(null),Pe=15,[Be,O]=x.useState(1),G=x.useMemo(()=>{const se={};return w.forEach(Ee=>se[Ee.id]=Ee.name),se},[w]),q=x.useMemo(()=>{const se={};return S.forEach(Ee=>{se[Ee.id]=Ee}),se},[S]),U=se=>{const Ee=Number(se.vendorCommissionAmount||0);if(Ee>0)return Ee;if(!se.vendorId)return 0;const je=q[se.vendorId];if(!je||!je.commissionPercent)return 0;const it=(Number(se.total)||0)*(Number(je.commissionPercent)||0)/100;return Number(it.toFixed(2))};x.useEffect(()=>{(async()=>{P(!0),D("");try{const se=await Qt(bt(Oe,"customers_candies")),Ee=[];se.forEach(yt=>Ee.push({id:yt.id,name:yt.data().name||""})),j(Ee);const je=await Qt(bt(Oe,"sellers_candies")),it=[];je.forEach(yt=>{const Ct=yt.data();it.push({id:yt.id,name:Ct.name||"",commissionPercent:Number(Ct.commissionPercent||0)})}),E(it);const At=await Qt(nr(bt(Oe,"sales_candies"),xn("createdAt","desc"))),pt=[];At.forEach(yt=>{const Ct=q9e(yt.data(),yt.id);Ct&&Ct.date>=g&&Ct.date<=y&&pt.push(Ct)}),_(pt.sort((yt,Ct)=>Ct.date.localeCompare(yt.date))),O(1)}catch(se){console.error(se),D(" Error cargando transacciones.")}finally{P(!1)}})()},[g,y]);const Y=x.useMemo(()=>I.filter(se=>!(a&&(!e||!se.vendorId||se.vendorId!==e)||J&&se.customerId!==J||Ae&&se.type!==Ae)),[I,J,Ae,a,e]),Z=x.useMemo(()=>{let se=0,Ee=0,je=0,it=0;for(const At of Y)At.type==="CONTADO"?(se+=At.quantity,je+=At.total):(Ee+=At.quantity,it+=At.total);return{packsCash:se,packsCredito:Ee,montoCash:je,montoCredito:it}},[Y]),R=Math.max(1,Math.ceil(Y.length/Pe)),H=x.useMemo(()=>{const se=(Be-1)*Pe;return Y.slice(se,se+Pe)},[Y,Be]),te=x.useMemo(()=>f&&I.find(se=>se.id===f)||null,[f,I]),ye=async se=>{if(s&&(ne(null),!!window.confirm("Eliminar esta venta de dulces? Se restaurar el inventario asociado.")))try{P(!0),await R2(se.id),await z9e(se.id),_(Ee=>Ee.filter(je=>je.id!==se.id)),D(" Venta eliminada")}catch(Ee){console.error(Ee),D(" No se pudo eliminar la venta.")}finally{P(!1)}},Q=()=>{const se=`Ventas del dia  ${g} a ${y}`,Ee=pt=>(pt||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),je=Y.map(pt=>{const yt=pt.customerName||(pt.customerId?G[pt.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${pt.date}</td>
          <td>${Ee(yt)}</td>
          <td>${pt.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${pt.quantity}</td>
          <td style="text-align:right">${pc(pt.total)}</td>
        </tr>`}).join(""),it=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Ee(se)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Ee(se)}</h1>
      <div class="kpis">
        <div><b>Paquetes Cash:</b> ${Z.packsCash}</div>
        <div><b>Paquetes Crdito:</b> ${Z.packsCredito}</div>
        <div><b>Monto Cash:</b> ${pc(Z.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${pc(Z.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Paquetes</th><th>Monto</th>
      </tr></thead><tbody>
      ${je||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,At=window.open("","_blank");At&&(At.document.open(),At.document.write(it),At.document.close())},Ge=()=>O(1),ie=()=>O(se=>Math.max(1,se-1)),ee=()=>O(se=>Math.min(R,se+1)),Ie=()=>O(R),ue=()=>{const se=[];if(R<=7)for(let je=1;je<=R;je++)se.push(je);else{const je=Math.max(1,Be-2),it=Math.min(R,Be+2);se.push(1),je>2&&se.push(-1);for(let At=je;At<=it;At++)At!==1&&At!==R&&se.push(At);it<R-1&&se.push(-2),se.push(R)}return i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ge,disabled:Be===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ie,disabled:Be===1,children:" Anterior"}),se.map((je,it)=>typeof je=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${je===Be?"bg-blue-600 text-white":""}`,onClick:()=>O(je),children:je},it):i.jsx("span",{className:"px-2",children:""},it)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ee,disabled:Be===R,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ie,disabled:Be===R,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",Be," de ",R,"  ",Y.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:se=>{v(se.target.value),O(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:se=>{b(se.target.value),O(1)}})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:J,onChange:se=>{fe(se.target.value),O(1)},children:[i.jsx("option",{value:"",children:"Todos"}),w.map(se=>i.jsx("option",{value:se.id,children:se.name},se.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:Ae,onChange:se=>{me(se.target.value),O(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:Q,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Z.packsCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Z.packsCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:pc(Z.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:pc(Z.montoCredito)})]})]}),i.jsxs("div",{className:"block md:hidden space-y-3",children:[F?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):H.length===0?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):H.map(se=>{const Ee=se.customerName||(se.customerId?G[se.customerId]:"")||"Nombre cliente",je=U(se);return i.jsx("div",{className:"bg-white border rounded-xl shadow",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:Ee}),i.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:se.date})]}),i.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[i.jsx("span",{className:`px-2 py-1 rounded-full border ${se.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:se.type==="CREDITO"?"Crdito":"Cash"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Paquetes:"})," ",i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:it=>{it.preventDefault(),p(se.id)},title:"Ver detalle",children:se.quantity})]}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Monto:"})," ",pc(se.total)]})]})]}),i.jsx("div",{className:"text-gray-500 mt-1",children:i.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),i.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("span",{className:"font-medium text-right",children:Ee})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha"}),i.jsx("span",{className:"font-medium",children:se.date})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("span",{className:"font-medium",children:se.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes"}),i.jsx("span",{className:"font-medium",children:i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(se.id),title:"Ver detalle",children:se.quantity})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Monto"}),i.jsx("span",{className:"font-semibold",children:pc(se.total)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("span",{className:"font-medium",children:je>0?pc(je):""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("span",{className:"font-medium",children:se.vendorName||""})]}),s&&i.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>ne(it=>it===se.id?null:se.id),children:" Acciones"}),pe===se.id&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ye(se),children:"Eliminar"})]})]})})]})},se.id)}),i.jsx("div",{className:"bg-white p-3 rounded shadow border",children:ue()})]}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Comisin"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),s&&i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:F?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Cargando"})}):H.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Sin transacciones en el rango."})}):H.map(se=>{const Ee=se.customerName||(se.customerId?G[se.customerId]:"")||"Nombre cliente",je=U(se);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:se.date}),i.jsx("td",{className:"p-2 border",children:Ee}),i.jsx("td",{className:"p-2 border",children:se.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(se.id),children:se.quantity})}),i.jsx("td",{className:"p-2 border",children:pc(se.total)}),i.jsx("td",{className:"p-2 border",children:je>0?pc(je):""}),i.jsx("td",{className:"p-2 border",children:se.vendorName||""}),s&&i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>ne(it=>it===se.id?null:se.id),title:"Acciones",children:""}),pe===se.id&&i.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>ye(se),children:"Eliminar"})})]})]},se.id)})})]}),ue()]}),k&&i.jsx("p",{className:"mt-2 text-sm",children:k}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Productos/paquetes vendidos"," ",f?` #${f}`:""]}),te&&i.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:["Comisin de vendedor:"," ",i.jsx("span",{className:"font-semibold",children:U(te)>0?pc(U(te)):""})]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:u?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):h.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):h.map((se,Ee)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:se.productName}),i.jsx("td",{className:"p-2 border text-right",children:se.qty}),i.jsx("td",{className:"p-2 border text-right",children:pc(se.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:pc(se.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:pc(se.total)})]},Ee))})]})})]})})]})}const en=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Ky(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Ir(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function X9e(t){if(Array.isArray(t==null?void 0:t.items))return t.items.map(n=>{const a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(n==null?void 0:n.lineFinal)??0)/a:0)||0;return{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0),uBruta:Number((n==null?void 0:n.uBruta)??(n==null?void 0:n.grossProfit)??0)}});if(t!=null&&t.item){const n=t.item,a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(t==null?void 0:t.total)??0)/a:0)||0;return[{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0),uBruta:Number((n==null?void 0:n.uBruta)??(n==null?void 0:n.grossProfit)??0)}]}const e=Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,r=e>0?Number((t==null?void 0:t.total)||0)/e:0;return e>0?[{productId:String((t==null?void 0:t.productId)||""),productName:String((t==null?void 0:t.productName)||""),sku:(t==null?void 0:t.sku)||"",qty:e,unitPrice:Number(r||0),discount:Number((t==null?void 0:t.discount)||0),vendorCommissionAmount:Number((t==null?void 0:t.vendorCommissionAmount)??(t==null?void 0:t.commissionAmount)??0),uBruta:Number((t==null?void 0:t.uBruta)??(t==null?void 0:t.grossProfit)??0)}]:[]}function Y9e(t,e){const r=Ky(t);if(!r)return null;const n=t.vendorId||t.sellerId||void 0,a=t.vendorName||t.sellerName||void 0,s=X9e(t);let o=Number(t.total??t.itemsTotal??0)||s.reduce((l,c)=>{const u=(Number(c.qty||0)||0)*(Number(c.unitPrice||0)||0),d=Math.max(0,Number(c.discount||0)),f=Math.max(0,u-d);return l+f},0);return o=Number(o||0),{id:e,date:r,type:t.type||"CONTADO",total:o,items:s,customerId:t.customerId||void 0,customerName:t.customerName||void 0,vendorId:n,vendorName:a,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}function J9e(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let o=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const A=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(o+=A*f.cost),f.qtyLeft-=A,d-=A}}return o}async function Z9e(t){const e=nr(bt(Oe,"ar_movements"),sr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Pn(zt(Oe,"ar_movements",n.id))))}function eQe(){const{refreshKey:t,refresh:e}=kc(),[r,n]=x.useState(Ir(af(new Date),"yyyy-MM-dd")),[a,s]=x.useState(Ir(nf(new Date),"yyyy-MM-dd")),[o,l]=x.useState([]),[c,u]=x.useState([]),[d,f]=x.useState([]),[A,h]=x.useState([]),[m,p]=x.useState([]),[g,v]=x.useState([]),[y,b]=x.useState(!0),[w,j]=x.useState(""),[I,_]=x.useState([]),[S,E]=x.useState({}),[F,P]=x.useState({}),[k,D]=x.useState(!1),[J,fe]=x.useState(null),[Ae,me]=x.useState([]),[pe,ne]=x.useState(!1),[Pe,Be]=x.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0}),[O,G]=x.useState(!1),[q,U]=x.useState(""),[Y,Z]=x.useState([]),[R,H]=x.useState(!1),[te,ye]=x.useState("CASH"),[Q,Ge]=x.useState(1),ie=10,[ee,Ie]=x.useState(!1),[ue,se]=x.useState(null);x.useEffect(()=>{(async()=>{try{const Ne=await Qt(bt(Oe,"sellers_candies")),mt=[];Ne.forEach(wt=>{const we=wt.data();mt.push({id:wt.id,name:we.name||"",commissionPercent:Number(we.commissionPercent||0)})}),_(mt)}catch(Ne){console.error("Error cargando sellers_candies",Ne)}})()},[]);const Ee=x.useMemo(()=>{const Ne={};return I.forEach(mt=>{Ne[mt.id]=mt}),Ne},[I]);x.useEffect(()=>{(async()=>{b(!0),j("");try{const Ne=await Qt(bt(Oe,"sales_candies")),mt=[],wt=[];Ne.forEach(Se=>{const ht=Se.data(),W=Y9e(ht,Se.id);W&&(W.date<=a&&mt.push(W),W.date>=r&&W.date<=a&&wt.push(W))}),u(mt),l(wt);const we=await Qt(bt(Oe,"inventory_candies")),ae=[];we.forEach(Se=>{const ht=Se.data(),W=Ky(ht);if(!W||W>a)return;const Te=Math.max(1,Math.floor(Number(ht.unitsPerPackage||1))),Ze=Number(ht.totalUnits??ht.quantity??0),tt=Number(ht.packages??0),ut=Number(ht.remaining??0),T=Number(ht.remainingPackages??0),M=tt>0?tt:Ze>0?Math.floor(Ze/Te):0,L=T>0?T:ut>0?Math.floor(ut/Te):0;ae.push({id:Se.id,productId:ht.productId,productName:ht.productName||"",date:W,quantity:Number(M||0),remaining:Number(L||0),purchasePrice:Number(ht.providerPrice||ht.purchasePrice||0),unitsPerPackage:Te})}),f(ae);const be=await Qt(bt(Oe,"expenses_candies")),ve=[];be.forEach(Se=>{const ht=Se.data(),W=Ky(ht);W&&W>=r&&W<=a&&ve.push({id:Se.id,date:W,category:ht.category||"",description:ht.description||"",amount:Number(ht.amount||0),status:ht.status||""})}),h(ve);const Ve=await Qt(bt(Oe,"ar_movements")),ce=[],ke={};Ve.forEach(Se=>{const ht=Se.data(),W=Ky(ht);if(!W)return;const Te=ht.customerId,Ze=Number(ht.amount||0);Te&&(ke[Te]=(ke[Te]||0)+Ze),ht.type==="ABONO"&&W>=r&&W<=a&&ce.push({id:Se.id,customerId:Te,type:"ABONO",amount:Ze,date:W})}),p(ce);const dt=await Qt(bt(Oe,"customers_candies")),ft=[];dt.forEach(Se=>{const ht=Se.data();ft.push({id:Se.id,name:ht.name||"",balance:ke[Se.id]||0})}),v(ft);const gt=await Qt(bt(Oe,"inventory_candies_sellers")),Rt={},ot={};gt.forEach(Se=>{const ht=Se.data(),W=Ky(ht);if(!W||W<r||W>a)return;const Te=ht.sellerId||ht.vendorId||"NO_VENDOR",Ze=ht.productName||"",tt=ht.sku||"",ut=Math.max(1,Math.floor(Number(ht.unitsPerPackage||1))),T=Number(ht.totalUnits??0),M=Number(ht.packages??0),L=Number(ht.remainingUnits??ht.remaining??0),K=Number(ht.remainingPackages??0),re=M>0?M:T>0?Math.floor(T/ut):0,le=K>0?K:L>0?Math.floor(L/ut):0,Me=Number(ht.totalVendor??0),qe=Number(ht.uVendor??0),lt=Number(ht.subtotal??0),Fe=Number(ht.uBruta??0),Xe=re,he=Xe>0?Me/Xe:0,He=Xe>0?qe/Xe:0,Ye=Xe>0?lt/Xe:0,ct=Xe>0?Fe>0?Fe/Xe:he-Ye:0;if(Rt[Te]||(Rt[Te]={associated:[],remaining:[]}),re>0){const Nt=re,It=Nt*he,hr=Nt*Ye,Ot=It,Ft=Nt*He,lr=Nt*ct;Rt[Te].associated.push({saleId:Se.id,date:W,productId:ht.productId||ht.id||"",productName:Ze,sku:tt,qty:Nt,unitPrice:he,costTotal:hr,lineTotal:It,discount:0,lineFinal:Ot,grossProfit:lr,vendorCommissionAmount:Ft,type:"ASSOCIATED"}),ot[Te]=(ot[Te]||0)+Nt}if(le>0){const Nt=le,It=Nt*he,hr=Nt*Ye,Ot=It,Ft=Nt*He,lr=Nt*ct;Rt[Te].remaining.push({saleId:Se.id,date:W,productId:ht.productId||ht.id||"",productName:Ze,sku:tt,qty:Nt,unitPrice:he,costTotal:hr,lineTotal:It,discount:0,lineFinal:Ot,grossProfit:lr,vendorCommissionAmount:Ft,type:"REMAINING"})}}),E(Rt),P(ot)}catch(Ne){console.error(Ne),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const je=x.useCallback((Ne,mt)=>{const wt=Number(mt.vendorCommissionAmount||0)||0;if(wt>0)return wt;const we=Number(Ne.vendorCommissionAmount||0)||0;if(we<=0)return 0;const ae=Number(mt.qty||0),be=Number(mt.unitPrice||0),ve=ae*be,Ve=Math.max(0,Number(mt.discount||0)),ce=Math.max(0,ve-Ve);return!ce||!Ne.total?0:we*ce/Ne.total},[]),it=x.useMemo(()=>{try{return J9e(d,c,r,a)}catch(Ne){return console.error(Ne),0}},[d,c,r,a]),At=x.useMemo(()=>{const Ne=o.reduce((gt,Rt)=>gt+(Rt.total||0),0),mt=A.reduce((gt,Rt)=>gt+(Rt.amount||0),0),wt=Ne-it,we=wt-mt;let ae=0;for(const gt of o)for(const Rt of gt.items||[]){const ot=Number(Rt.uBruta||0);Number.isFinite(ot)&&(ae+=ot)}const be=m.reduce((gt,Rt)=>gt+Math.abs(Rt.amount||0),0),ve=g.filter(gt=>(gt.balance||0)>0),Ve=ve.reduce((gt,Rt)=>gt+(Rt.balance||0),0);let ce=0,ke=0,dt=0,ft=0;for(const gt of o){const Rt=(gt.items||[]).reduce((Se,ht)=>Se+(Number(ht.qty)||0),0),ot=(gt.items||[]).reduce((Se,ht)=>Se+je(gt,ht),0);gt.type==="CONTADO"?(ce+=Rt,dt+=ot):(ke+=Rt,ft+=ot)}return{ventasTotales:Ne,costoMercaderia:it,gastosPeriodo:mt,gananciaAntes:wt,utilidadBrutaOrdenes:ae,gananciaDespues:we,abonosRecibidos:be,saldosPendientes:Ve,clientesConSaldo:ve.length,paquetesCash:ce,paquetesCredito:ke,comisionCash:dt,comisionCredito:ft}},[o,A,m,g,it,je,S]),pt=x.useMemo(()=>{const Ne={},mt={};for(const wt of o)if(!(wt.type!=="CREDITO"||!wt.customerId))for(const we of wt.items||[]){const ae=Number(we.qty||0),be=Number(we.unitPrice||0),ve=ae*be,Ve=Math.max(0,Number(we.discount||0)),ce=Math.max(0,ve-Ve);Ne[wt.customerId]=(Ne[wt.customerId]||0)+ae,mt[wt.customerId]=(mt[wt.customerId]||0)+ce}return g.filter(wt=>(wt.balance||0)>0).map(wt=>({customerId:wt.id,name:wt.name,paquetesAsociados:Ne[wt.id]||0,saldoTotal:mt[wt.id]||0,saldoPendiente:wt.balance||0})).sort((wt,we)=>we.saldoPendiente-wt.saldoPendiente)},[g,o]),yt=x.useMemo(()=>{const Ne={};return g.forEach(mt=>Ne[mt.id]=mt.name),Ne},[g]),Ct=x.useMemo(()=>[...o].sort((Ne,mt)=>mt.date.localeCompare(Ne.date)).map(Ne=>{var ae;const mt=(Ne.items||[]).reduce((be,ve)=>be+(Number(ve.qty)||0),0);let wt="Cash";Ne.type==="CREDITO"&&Ne.customerId?wt=yt[Ne.customerId]||"":Ne.type==="CONTADO"&&(wt=((ae=Ne.customerName)==null?void 0:ae.trim())||"Cash");const we=mt>0?Ne.total/mt:0;return{id:Ne.id,date:Ne.date,type:Ne.type==="CREDITO"?"Crdito":"Cash",customer:wt,paquetes:mt,total:Number(Ne.total||0),avgPrice:we}}),[o,yt]),Et=x.useMemo(()=>{var mt,wt;const Ne=new Map;for(const we of o){const ae=we.vendorId||"NO_VENDOR",be=we.vendorName||((mt=Ee[ae])==null?void 0:mt.name)||"Sin vendedor";Ne.has(ae)||Ne.set(ae,{vendorId:ae,vendorName:be,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0});const ve=Ne.get(ae);for(const Ve of we.items||[]){const ce=Number(Ve.qty||0),ke=Number(Ve.unitPrice||0),dt=ce*ke,ft=Math.max(0,Number(Ve.discount||0)),gt=Math.max(0,dt-ft),Rt=je(we,Ve);we.type==="CONTADO"?(ve.paquetesVendidos+=ce,ve.totalVendido+=gt,ve.comisionCash+=Rt):(ve.paquetesFiados+=ce,ve.totalFiado+=gt,ve.comisionCredito+=Rt)}}for(const[we,ae]of Object.entries(F)){const be=Ne.get(we),ve=(be==null?void 0:be.vendorName)||((wt=Ee[we])==null?void 0:wt.name)||"Sin vendedor",Ve=be||{vendorId:we,vendorName:ve,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0};Ve.paquetesAsociados=ae,Ve.paquetesRestantes=Math.max(ae-Ve.paquetesVendidos-Ve.paquetesFiados,0),Ne.set(we,Ve)}return Array.from(Ne.values()).sort((we,ae)=>ae.totalVendido+ae.totalFiado-(we.totalVendido+we.totalFiado))},[o,F,Ee,je]),Re=async Ne=>{D(!0),fe({id:Ne.customerId,name:Ne.name}),me([]),ne(!0),Be({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const mt=[];let wt=0,we=0,ae=0;for(const ce of o)if(!(ce.type!=="CREDITO"||ce.customerId!==Ne.customerId))for(const ke of ce.items||[]){const dt=Number(ke.qty||0),ft=Number(ke.unitPrice||0),gt=dt*ft,Rt=Math.max(0,Number(ke.discount||0)),ot=Math.max(0,gt-Rt);mt.push({saleId:ce.id,date:ce.date,productName:ke.productName,sku:ke.sku||"",qty:dt,unitPrice:ft,lineTotal:gt,discount:Rt,lineFinal:ot}),wt+=gt,we+=Rt,ae+=ot}let be=0;for(const ce of m)ce.customerId===Ne.customerId&&(be+=Math.abs(ce.amount||0));const ve=g.find(ce=>ce.id===Ne.customerId),Ve=(ve==null?void 0:ve.balance)||0;me(mt),Be({totalBruto:wt,totalDescuento:we,totalFiado:ae,saldoActual:Ve,abonadoPeriodo:be})}catch(mt){console.error(mt),j(" No se pudo cargar el detalle del cliente.")}finally{ne(!1)}},We=(Ne,mt,wt)=>{G(!0),ye(wt),Ge(1);let we="";wt==="ASSOCIATED"?we=`Paquetes asociados  ${mt}`:wt==="REMAINING"?we=`Paquetes restantes  ${mt}`:wt==="CASH"?we=`Paquetes vendidos (Cash)  ${mt}`:we=`Paquetes fiados (Crdito)  ${mt}`,U(we),Z([]),H(!0);try{if(wt==="ASSOCIATED"||wt==="REMAINING"){const be=S[Ne],ve=wt==="ASSOCIATED"?(be==null?void 0:be.associated)||[]:(be==null?void 0:be.remaining)||[];Z([...ve].sort((Ve,ce)=>(ce.qty||0)-(Ve.qty||0))),H(!1);return}const ae=[];for(const be of o)if(((be.vendorId||"NO_VENDOR")===Ne||!be.vendorId&&Ne==="NO_VENDOR")&&!(wt==="CASH"&&be.type!=="CONTADO")&&!(wt==="CREDIT"&&be.type!=="CREDITO"))for(const Ve of be.items||[]){const ce=Number(Ve.qty||0),ke=Number(Ve.unitPrice||0),dt=ce*ke,ft=Math.max(0,Number(Ve.discount||0)),gt=Math.max(0,dt-ft),Rt=je(be,Ve);ae.push({saleId:be.id,date:be.date,productName:Ve.productName,sku:Ve.sku||"",qty:ce,unitPrice:ke,lineTotal:dt,discount:ft,lineFinal:gt,vendorCommissionAmount:Rt,type:wt})}Z(ae.sort((be,ve)=>be.date.localeCompare(ve.date)))}catch(ae){console.error(ae),j(" No se pudo cargar el detalle del vendedor.")}finally{H(!1)}},et=x.useMemo(()=>te!=="ASSOCIATED"&&te!=="REMAINING"?1:Math.max(1,Math.ceil(Y.length/ie)),[te,Y.length]),xe=x.useMemo(()=>{if(te!=="ASSOCIATED"&&te!=="REMAINING")return Y;const Ne=(Q-1)*ie;return Y.slice(Ne,Ne+ie)},[te,Q,Y]),de=te==="ASSOCIATED"||te==="REMAINING"?10:8;x.useEffect(()=>{te!=="ASSOCIATED"&&te!=="REMAINING"||Q>et&&Ge(et)},[te,Q,et]);const Ue=Ne=>{const mt=o.find(wt=>wt.id===Ne)||null;se(mt),Ie(!0)},Ke=async Ne=>{if(window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{await R2(Ne),await Z9e(Ne),l(mt=>mt.filter(wt=>wt.id!==Ne)),u(mt=>mt.filter(wt=>wt.id!==Ne)),Ie(!1),se(null)}catch(mt){console.error(mt),alert("No se pudo eliminar la venta. Revisa la consola para ms detalles.")}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Dulces)"}),i.jsx(Tc,{onClick:e,loading:y})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:Ne=>n(Ne.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:Ne=>s(Ne.target.value)})]})]}),i.jsx("div",{className:"md:hidden mb-4",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",open:!0,children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"KPIs"}),i.jsx("div",{className:"p-3",children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:en(At.utilidadBrutaOrdenes||0)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:en(At.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:At.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:At.paquetesCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),i.jsx("div",{className:"text-xl font-semibold",children:At.paquetesCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.comisionCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.comisionCredito)})]})]})})]})}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:en(At.utilidadBrutaOrdenes||0)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:en(At.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:At.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:At.paquetesCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),i.jsx("div",{className:"text-xl font-semibold",children:At.paquetesCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.comisionCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:en(At.comisionCredito)})]})]}),i.jsx("div",{className:"md:hidden mb-6",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"Consolidado clientes y vendedores"}),i.jsxs("div",{className:"p-3",children:[i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border",children:"Saldo total"}),i.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):pt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):pt.map(Ne=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ne.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Re({customerId:Ne.customerId,name:Ne.name}),title:"Ver paquetes fiados del periodo",children:Ne.paquetesAsociados})}),i.jsx("td",{className:"p-2 border",children:en(Ne.saldoTotal)}),i.jsx("td",{className:"p-2 border font-semibold",children:en(Ne.saldoPendiente)})]},Ne.customerId))})]})}),i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Consolidado vendedores"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):Et.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):Et.map(Ne=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ne.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>We(Ne.vendorId,Ne.vendorName,"ASSOCIATED"),children:Ne.paquetesAsociados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>We(Ne.vendorId,Ne.vendorName,"REMAINING"),children:Ne.paquetesRestantes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>We(Ne.vendorId,Ne.vendorName,"CASH"),children:Ne.paquetesVendidos})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ne.totalVendido)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ne.comisionCash)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>We(Ne.vendorId,Ne.vendorName,"CREDIT"),children:Ne.paquetesFiados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ne.totalFiado)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ne.comisionCredito)})]},Ne.vendorId))})]})})]})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Paquetes asociados (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo total (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):pt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):pt.map(Ne=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ne.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Re({customerId:Ne.customerId,name:Ne.name}),title:"Ver paquetes fiados del periodo",children:Ne.paquetesAsociados})}),i.jsx("td",{className:"p-2 border",children:en(Ne.saldoTotal)}),i.jsx("td",{className:"p-2 border font-semibold",children:en(Ne.saldoPendiente)})]},Ne.customerId))})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Consolidado vendedores"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):Et.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):Et.map(Ne=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ne.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>We(Ne.vendorId,Ne.vendorName,"ASSOCIATED"),children:Ne.paquetesAsociados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>We(Ne.vendorId,Ne.vendorName,"REMAINING"),children:Ne.paquetesRestantes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>We(Ne.vendorId,Ne.vendorName,"CASH"),children:Ne.paquetesVendidos})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ne.totalVendido)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ne.comisionCash)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>We(Ne.vendorId,Ne.vendorName,"CREDIT"),children:Ne.paquetesFiados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ne.totalFiado)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ne.comisionCredito)})]},Ne.vendorId))})]})}),i.jsx("div",{className:"md:hidden mb-6",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"Transacciones y gastos"}),i.jsxs("div",{className:"p-3",children:[i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Ct.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):Ct.map(Ne=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ne.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ne.customer}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ne.type}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ue(Ne.id),children:Ne.paquetes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ne.avgPrice)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ne.total)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>Ke(Ne.id),children:"Eliminar"})})]},Ne.id))})]})}),i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((Ne,mt)=>Ne.date.localeCompare(mt.date)).map(Ne=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ne.date}),i.jsx("td",{className:"p-2 border",children:Ne.category||""}),i.jsx("td",{className:"p-2 border",children:Ne.description?i.jsx("span",{title:Ne.description,children:Ne.description.length>40?Ne.description.slice(0,40)+"":Ne.description}):""}),i.jsx("td",{className:"p-2 border",children:en(Ne.amount)}),i.jsx("td",{className:"p-2 border",children:Ne.status||""})]},Ne.id))})]})})]})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Ct.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):Ct.map(Ne=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ne.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ne.customer}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ne.type}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ue(Ne.id),children:Ne.paquetes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ne.avgPrice)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ne.total)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>Ke(Ne.id),children:"Eliminar"})})]},Ne.id))})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((Ne,mt)=>Ne.date.localeCompare(mt.date)).map(Ne=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ne.date}),i.jsx("td",{className:"p-2 border",children:Ne.category||""}),i.jsx("td",{className:"p-2 border",children:Ne.description?i.jsx("span",{title:Ne.description,children:Ne.description.length>40?Ne.description.slice(0,40)+"":Ne.description}):""}),i.jsx("td",{className:"p-2 border",children:en(Ne.amount)}),i.jsx("td",{className:"p-2 border",children:Ne.status||""})]},Ne.id))})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w}),k&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle cliente  ",(J==null?void 0:J.name)||""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>D(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total bruto (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:en(Pe.totalBruto)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:en(Pe.totalDescuento)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto total fiado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:en(Pe.totalFiado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:en(Pe.abonadoPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:en(Pe.saldoActual)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha compra"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Descuento"}),i.jsx("th",{className:"p-2 border",children:"Monto final"})]})}),i.jsx("tbody",{children:pe?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):Ae.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin paquetes fiados en el periodo."})}):Ae.sort((Ne,mt)=>Ne.date.localeCompare(mt.date)).map((Ne,mt)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ne.date}),i.jsx("td",{className:"p-2 border",children:Ne.productName}),i.jsx("td",{className:"p-2 border",children:Ne.qty}),i.jsx("td",{className:"p-2 border",children:en(Ne.unitPrice)}),i.jsx("td",{className:"p-2 border",children:en(Ne.lineTotal)}),i.jsx("td",{className:"p-2 border",children:en(Ne.discount)}),i.jsx("td",{className:"p-2 border",children:en(Ne.lineFinal)})]},`${Ne.saleId}-${mt}`))})]})})]})}),O&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:q}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>G(!1),children:"Cerrar"})]}),(te==="ASSOCIATED"||te==="REMAINING")&&!R&&i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2 text-sm",children:[i.jsxs("div",{className:"text-gray-600",children:["Pgina ",Q," de ",et]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded border bg-white hover:bg-gray-50 disabled:opacity-50",onClick:()=>Ge(Ne=>Math.max(1,Ne-1)),disabled:Q<=1,children:"Anterior"}),i.jsx("button",{className:"px-3 py-1 rounded border bg-white hover:bg-gray-50 disabled:opacity-50",onClick:()=>Ge(Ne=>Math.min(et,Ne+1)),disabled:Q>=et,children:"Siguiente"})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha Orden"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),te==="ASSOCIATED"||te==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"p-2 border",children:"Costo"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]}):i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Descuento"}),i.jsx("th",{className:"p-2 border",children:"Monto final"}),te==="ASSOCIATED"||te==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Utilidad vendedor"})]}):i.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),i.jsx("tbody",{children:R?i.jsx("tr",{children:i.jsx("td",{colSpan:de,className:"p-4 text-center",children:"Cargando"})}):Y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:de,className:"p-4 text-center",children:"Sin paquetes para este vendedor en el periodo."})}):xe.map((Ne,mt)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ne.date}),i.jsx("td",{className:"p-2 border",children:Ne.productName}),i.jsx("td",{className:"p-2 border",children:Ne.qty}),i.jsx("td",{className:"p-2 border",children:en(Ne.unitPrice)}),te==="ASSOCIATED"||te==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border",children:en(Ne.costTotal??0)}),i.jsx("td",{className:"p-2 border",children:en(Ne.lineTotal)})]}):i.jsx("td",{className:"p-2 border",children:en(Ne.lineTotal)}),i.jsx("td",{className:"p-2 border",children:en(Ne.discount)}),i.jsx("td",{className:"p-2 border",children:en(Ne.lineFinal)}),te==="ASSOCIATED"||te==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border",children:en(Ne.grossProfit||0)}),i.jsx("td",{className:"p-2 border",children:en(Ne.vendorCommissionAmount)})]}):i.jsx("td",{className:"p-2 border",children:en(Ne.vendorCommissionAmount)})]},`${Ne.saleId}-${mt}`))})]})})]})}),ee&&ue&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-4xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle de venta  ",ue.date]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ie(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto mb-3",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),i.jsx("tbody",{children:(ue.items||[]).map((Ne,mt)=>{const wt=Number(Ne.qty||0),we=Number(Ne.unitPrice||0),ae=wt*we,be=je(ue,Ne);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ne.productName}),i.jsx("td",{className:"p-2 border",children:wt}),i.jsx("td",{className:"p-2 border",children:en(we)}),i.jsx("td",{className:"p-2 border",children:en(ae)}),i.jsx("td",{className:"p-2 border",children:en(be)})]},mt)})})]})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-semibold",children:"Total venta:"}),en(ue.total)]}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>Ke(ue.id),children:"Eliminar venta"})]})]})})]})}const V$=["Rivas","Isla Ometepe","San Jorge"];function tQe(){const{refreshKey:t,refresh:e}=kc(),[r,n]=x.useState([]),[a,s]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState(!1),[d,f]=x.useState(""),[A,h]=x.useState("0"),[m,p]=x.useState("Rivas"),[g,v]=x.useState(null),[y,b]=x.useState(""),[w,j]=x.useState("0"),[I,_]=x.useState("Rivas");x.useEffect(()=>{(async()=>{s(!0),l("");try{const J=nr(bt(Oe,"sellers_candies"),xn("name","asc")),fe=await Qt(J),Ae=[];fe.forEach(me=>{const pe=me.data();Ae.push({id:me.id,name:pe.name||"",commissionPercent:Number(pe.commissionPercent||0),branch:pe.branch||"Rivas",createdAt:pe.createdAt||ur.now()})}),n(Ae)}catch(J){console.error(J),l(" Error cargando vendedores.")}finally{s(!1)}})()},[t]);const S=()=>{f(""),h("0"),p("Rivas")},E=async J=>{J.preventDefault(),l("");const fe=d.trim();if(!fe){l("Ingresa el nombre y apellido del vendedor.");return}const Ae=Number(A||0);if(Ae<0){l("El margen no puede ser negativo.");return}try{const me={name:fe,commissionPercent:Ae,branch:m,createdAt:ur.now()},pe=await Bn(bt(Oe,"sellers_candies"),me);n(ne=>[{id:pe.id,...me},...ne]),l(" Vendedor creado correctamente."),S(),u(!1)}catch(me){console.error(me),l(" Error al crear el vendedor.")}},F=J=>{v(J.id),b(J.name),j(J.commissionPercent.toString()),_(J.branch)},P=()=>{v(null),b(""),j("0"),_("Rivas")},k=async()=>{if(!g)return;l("");const J=y.trim();if(!J){l("El nombre y apellido no pueden estar vacos.");return}const fe=Number(w||0);if(fe<0){l("El margen no puede ser negativo.");return}try{await pn(zt(Oe,"sellers_candies",g),{name:J,commissionPercent:fe,branch:I}),n(Ae=>Ae.map(me=>me.id===g?{...me,name:J,commissionPercent:fe,branch:I}:me)),l(" Vendedor actualizado."),P()}catch(Ae){console.error(Ae),l(" Error al actualizar el vendedor.")}},D=async J=>{if(window.confirm(`Eliminar al vendedor "${J.name}"? Esta accin no se puede deshacer.`))try{await Pn(zt(Oe,"sellers_candies",J.id)),n(Ae=>Ae.filter(me=>me.id!==J.id)),l(" Vendedor eliminado.")}catch(Ae){console.error(Ae),l(" Error al eliminar el vendedor.")}};return i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Vendedores de Dulces"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Tc,{onClick:e,loading:a}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>u(!0),children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo vendedor"]})]})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo vendedor de dulces"}),i.jsxs("form",{onSubmit:E,className:"space-y-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre y apellido"}),i.jsx("input",{className:"w-full border p-2 rounded",value:d,onChange:J=>f(J.target.value),placeholder:"Ej: Juan Prez"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Margen del vendedor (% sobre U Aproximada)"}),i.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border p-2 rounded",value:A,onChange:J=>h(J.target.value),placeholder:"Ej: 30"}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Este porcentaje YA NO es comisin sobre venta. Se aplica as: U. Vendedor = U. Aproximada  (margen/100). U. Inversionista = U. Aproximada  U. Vendedor."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Sucursal"}),i.jsx("select",{className:"w-full border p-2 rounded",value:m,onChange:J=>p(J.target.value),children:V$.map(J=>i.jsx("option",{value:J,children:J},J))})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[i.jsx("button",{type:"button",onClick:()=>{S(),u(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar vendedor"})]})]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-3",children:i.jsxs("table",{className:"min-w-[700px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Nombre y apellido"}),i.jsx("th",{className:"p-2 border",children:"Margen (% U Aproximada)"}),i.jsx("th",{className:"p-2 border",children:"Sucursal"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):r.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin vendedores registrados."})}):r.map(J=>{const fe=g===J.id;return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:fe?i.jsx("input",{className:"border p-1 rounded text-xs w-full",value:y,onChange:Ae=>b(Ae.target.value)}):J.name}),i.jsx("td",{className:"p-2 border",children:fe?i.jsx("input",{type:"number",step:"0.01",min:0,className:"border p-1 rounded text-xs w-24 text-right",value:w,onChange:Ae=>j(Ae.target.value)}):`${J.commissionPercent.toFixed(2)} %`}),i.jsx("td",{className:"p-2 border",children:fe?i.jsx("select",{className:"border p-1 rounded text-xs",value:I,onChange:Ae=>_(Ae.target.value),children:V$.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))}):J.branch}),i.jsx("td",{className:"p-2 border",children:fe?i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:k,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:P,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs",onClick:()=>F(J),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>D(J),children:"Borrar"})]})})]},J.id)})})]})}),o&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const ha=t=>Math.max(0,Math.floor(Number(t||0)));function bR(t){return Math.max(1,ha(t.unitsPerPackage||1))}function rQe(t){const e=Number(t.remaining);if(Number.isFinite(e)&&e>0)return Math.floor(e);const r=bR(t),n=Number(t.totalUnits||0),a=Number(t.quantity||0),s=Number(t.packages||0);return n>0?Math.floor(n):a>0?Math.floor(a):s>0?Math.floor(s*r):0}async function ise(t){const{orderId:e,productId:r}=t;let n=ha(t.packagesToReturn);if(!e||!r||n<=0)return;const a=nr(bt(Oe,"inventory_candies"),sr("orderId","==",e),sr("productId","==",r),xn("createdAt","asc")),s=await Qt(a);if(s.empty)return;const o=s.docs.map(l=>l.ref);await Di(Oe,async l=>{const c=await Promise.all(o.map(u=>l.get(u)));for(let u=0;u<o.length&&n>0;u++){const d=c[u];if(!d.exists())continue;const f=d.data(),A=bR(f),h=n*A,p=ha(f.remaining??0)+h,g=Math.floor(p/A);l.update(o[u],{remaining:p,remainingPackages:g,packages:g,updatedAt:ur.now()}),n=0}})}async function ose(t){const{orderId:e,productId:r}=t,n=ha(t.packagesToReturn);if(!e||!r||n<=0)return;const a=zt(Oe,"candy_main_orders",e);await Di(Oe,async s=>{const o=await s.get(a);if(!o.exists())return;const l=o.data(),c=Array.isArray(l.items)?l.items:[];let u=!1;const d=c.map(f=>String((f==null?void 0:f.id)||"")!==String(r)?f:(u=!0,{...f,remainingPackages:ha(f.remainingPackages)+n}));u&&s.update(a,{items:d,updatedAt:ur.now()})})}function Zk(t){if(!Array.isArray(t))return[];const e=[];for(const r of t){const n=String((r==null?void 0:r.batchId)||""),a=String((r==null?void 0:r.masterOrderId)||(r==null?void 0:r.orderId)||""),s=ha((r==null?void 0:r.units)??(r==null?void 0:r.qty)??(r==null?void 0:r.quantity)??0),o=Math.max(1,ha((r==null?void 0:r.unitsPerPackage)||1));!n||!a||s<=0||e.push({batchId:n,masterOrderId:a,units:s,unitsPerPackage:o})}return e}function M2(t,e){const r=ha(t),n=Math.max(1,ha(e));return Math.floor(r/n)}async function nQe(t){const e=String(t.productId||"");let r=ha(t.packagesToAllocate);if(!e||r<=0)return{allocations:[]};const n=nr(bt(Oe,"inventory_candies"),sr("productId","==",e)),a=await Qt(n);if(a.empty)throw new Error("No hay inventario para este producto.");const o=a.docs.map(c=>({id:c.id,data:c.data()})).sort((c,u)=>{var m,p;const d=String(c.data.date||""),f=String(u.data.date||"");if(d!==f)return d<f?-1:1;const A=((m=c.data.createdAt)==null?void 0:m.seconds)??0,h=((p=u.data.createdAt)==null?void 0:p.seconds)??0;return A-h}).map(c=>zt(Oe,"inventory_candies",c.id)),l=[];return await Di(Oe,async c=>{const u=await Promise.all(o.map(g=>c.get(g))),d=[];let f=r;for(let g=0;g<o.length&&f>0;g++){const v=o[g],y=u[g];if(!y.exists())continue;const b=y.data(),w=bR(b),j=rQe(b);if(j<=0)continue;const I=Math.floor(j/w);if(I<=0)continue;const _=Math.min(I,f),S=_*w,E=Math.max(0,j-S),F=Math.floor(E/w),P=String(b.orderId||"");if(!P)throw new Error("Lote sin orderId (orden maestra).");l.push({batchId:v.id,masterOrderId:P,units:S,unitsPerPackage:w}),d.push({ref:v,newRemUnits:E,newRemPacks:F}),f-=_}if(f>0)throw new Error(`Inventario insuficiente. Faltan ${f} paquetes.`);const A={};for(const g of l){const v=M2(g.units,g.unitsPerPackage);A[g.masterOrderId]=(A[g.masterOrderId]||0)+v}const h=Object.keys(A),m=h.map(g=>zt(Oe,"candy_main_orders",g)),p=await Promise.all(m.map(g=>c.get(g)));for(let g=0;g<d.length;g++){const v=d[g];c.update(v.ref,{remaining:v.newRemUnits,remainingPackages:v.newRemPacks,packages:v.newRemPacks,updatedAt:ur.now()})}for(let g=0;g<m.length;g++){const v=p[g];if(!v.exists())throw new Error("Orden maestra no existe.");const y=v.data(),b=Array.isArray(y.items)?y.items:[],w=ha(A[h[g]]||0);if(w<=0)continue;let j=!1;const I=b.map(_=>{if(String((_==null?void 0:_.id)||"")!==e)return _;const S=ha(_.remainingPackages);if(S<w)throw new Error("Orden maestra sin paquetes suficientes.");return j=!0,{..._,remainingPackages:S-w}});j&&c.update(m[g],{items:I,updatedAt:ur.now()})}}),{allocations:l}}async function H$(t){const e=String(t.vendorInventoryId||"");let r=ha(t.packagesToReturn);if(!e)throw new Error("vendorInventoryId requerido");if(r<=0)return{restoredPackages:0,mode:"noop"};const n=zt(Oe,"inventory_candies_sellers",e),a=await Ci(n);if(!a.exists())throw new Error("No existe la orden del vendedor");const s=a.data(),o=String(s.productId||"");if(!o)throw new Error("La orden del vendedor no tiene productId");if(!Zk(s.masterAllocations||s.allocations||s.allocationsByBatch).length){const u=String(s.orderId||"");if(!u)throw new Error("La orden del vendedor no tiene orderId");return await ise({orderId:u,productId:o,packagesToReturn:r}),await ose({orderId:u,productId:o,packagesToReturn:r}),{restoredPackages:r,mode:"legacy"}}let c=0;return await Di(Oe,async u=>{const d=await u.get(n);if(!d.exists())throw new Error("No existe la orden del vendedor");const f=d.data(),A=String(f.productId||"");if(!A)throw new Error("Doc vendedor sin productId");let h=Zk(f.masterAllocations||f.allocations||f.allocationsByBatch);if(!h.length)throw new Error("No hay masterAllocations guardadas en este doc (no se puede restaurar blindado).");const m=[];let p=r;for(let E=h.length-1;E>=0&&p>0;E--){const F=h[E],P=Math.max(1,ha(F.unitsPerPackage||1)),k=M2(F.units,P);if(k<=0)continue;const D=Math.min(k,p),J=D*P;m.push({batchId:F.batchId,masterOrderId:F.masterOrderId,units:J,unitsPerPackage:P}),p-=D}const g=r-p;if(g<=0)return;c=g;const v=m.map(E=>zt(Oe,"inventory_candies",E.batchId)),y={};for(const E of m){const F=M2(E.units,E.unitsPerPackage);F>0&&(y[E.masterOrderId]=(y[E.masterOrderId]||0)+F)}const w=Object.keys(y).map(E=>zt(Oe,"candy_main_orders",E)),[j,I]=await Promise.all([Promise.all(v.map(E=>u.get(E))),Promise.all(w.map(E=>u.get(E)))]);for(let E=0;E<m.length;E++){const F=m[E],P=j[E];if(!P.exists())continue;const k=P.data(),D=Math.max(1,ha(F.unitsPerPackage||k.unitsPerPackage||1)),J=ha(F.units),Ae=ha(k.remaining??0)+J,me=Math.floor(Ae/D);u.update(v[E],{remaining:Ae,remainingPackages:me,packages:me,updatedAt:ur.now()})}for(let E=0;E<w.length;E++){const F=I[E];if(!F.exists())continue;const P=w[E].id,k=ha(y[P]||0);if(k<=0)continue;const D=F.data(),J=Array.isArray(D.items)?D.items:[];let fe=!1;const Ae=J.map(me=>String((me==null?void 0:me.id)||"")!==String(A)?me:(fe=!0,{...me,remainingPackages:ha(me.remainingPackages)+k}));fe&&u.update(w[E],{items:Ae,updatedAt:ur.now()})}const _=new Map;for(const E of m){const F=`${E.batchId}__${E.masterOrderId}__${E.unitsPerPackage}`;_.set(F,(_.get(F)||0)+ha(E.units))}const S=[];for(const E of h){const F=Math.max(1,ha(E.unitsPerPackage||1)),P=`${E.batchId}__${E.masterOrderId}__${F}`,k=ha(_.get(P)||0);if(k<=0){S.push(E);continue}const J=ha(E.units)-k;J>0&&S.push({...E,units:J,unitsPerPackage:F}),_.delete(P)}u.update(n,{masterAllocations:S,updatedAt:ur.now()})}),{restoredPackages:c,mode:"blind"}}async function aQe(t){if(!t)throw new Error("vendorInventoryId requerido");const e=zt(Oe,"inventory_candies_sellers",t),r=await Ci(e);if(!r.exists())throw new Error("No existe la orden del vendedor");const n=r.data(),a=String(n.productId||""),s=ha(n.packages||n.remainingPackages||0),o=Zk(n.masterAllocations||n.allocations||n.allocationsByBatch);if(!o.length){const c=String(n.orderId||"");if(!c)throw new Error("La orden del vendedor no tiene orderId");if(!a)throw new Error("La orden del vendedor no tiene productId");return s<=0?(await Di(Oe,async u=>{u.delete(e)}),{restoredPackages:0,mode:"legacy"}):(await ise({orderId:c,productId:a,packagesToReturn:s}),await ose({orderId:c,productId:a,packagesToReturn:s}),await Di(Oe,async u=>{u.delete(e)}),{restoredPackages:s,mode:"legacy"})}let l=0;return await Di(Oe,async c=>{const u={};for(const g of o){const v=Math.max(1,ha(g.unitsPerPackage||1)),y=ha(g.units),b=M2(y,v);b>0&&(u[g.masterOrderId]=(u[g.masterOrderId]||0)+b)}const d=o.map(g=>zt(Oe,"inventory_candies",g.batchId)),A=Object.keys(u).map(g=>zt(Oe,"candy_main_orders",g)),[h,m]=await Promise.all([Promise.all(d.map(g=>c.get(g))),Promise.all(A.map(g=>c.get(g)))]);let p=0;for(let g=0;g<o.length;g++){const v=o[g],y=h[g];if(!y.exists())continue;const b=y.data(),w=Math.max(1,ha(v.unitsPerPackage||b.unitsPerPackage||1)),j=ha(v.units),_=ha(b.remaining??0)+j,S=Math.floor(_/w);c.update(d[g],{remaining:_,remainingPackages:S,packages:S,updatedAt:ur.now()});const E=M2(j,w);E>0&&(p+=E)}for(let g=0;g<A.length;g++){const v=m[g];if(!v.exists())continue;const y=A[g].id,b=ha(u[y]||0);if(b<=0)continue;const w=v.data(),j=Array.isArray(w.items)?w.items:[];let I=!1;const _=j.map(S=>String((S==null?void 0:S.id)||"")!==String(a)?S:(I=!0,{...S,remainingPackages:ha(S.remainingPackages)+b}));I&&c.update(A[g],{items:_,updatedAt:ur.now()})}c.delete(e),l=p}),{restoredPackages:l,mode:"blind"}}const Zs=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function $$(t){const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"}const Fs=t=>Math.max(0,Math.floor(Number(t||0))),G$=t=>{const e=String(t??"");return/[,"\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e},sQe=t=>{const e=[];let r=[],n="",a=!1;for(let s=0;s<t.length;s++){const o=t[s];if(a){o==='"'?t[s+1]==='"'?(n+='"',s++):a=!1:n+=o;continue}if(o==='"'){a=!0;continue}if(o===","){r.push(n),n="";continue}if(o===`
`){r.push(n),n="",r.some(l=>String(l??"").trim()!=="")&&e.push(r),r=[];continue}o!=="\r"&&(n+=o)}return r.push(n),r.some(s=>String(s??"").trim()!=="")&&e.push(r),e},Wm=t=>{const e=Number(t||0);return!isFinite(e)||e<0?0:e},Pd=(t,e)=>{const r=Wm(e),n=Number(t||0)*(r/100),a=Number(t||0)-n;return{vendorMarginPercent:r,uVendor:n,uInvestor:a}};function iQe({role:t="",sellerCandyId:e="",currentUserEmail:r,roles:n}){const{refreshKey:a,refresh:s}=kc(),o=n&&n.length?n:t,l=!o||on(o,"admin"),c=on(o,"vendedor_dulces"),u=(r||"").trim().toLowerCase(),d=!l&&c,[f,A]=x.useState(!0),[h,m]=x.useState(""),[p,g]=x.useState([]),[v,y]=x.useState([]),[b,w]=x.useState({}),[j,I]=x.useState([]),[_,S]=x.useState(!1),[E,F]=x.useState(null),[P,k]=x.useState(""),[D,J]=x.useState(""),[fe,Ae]=x.useState(""),[me,pe]=x.useState("0"),[ne,Pe]=x.useState([]),[Be,O]=x.useState(""),[G,q]=x.useState(""),[U,Y]=x.useState(!1),[Z,R]=x.useState(!1),[H,te]=x.useState(!1),ye=20,[Q,Ge]=x.useState(1),ie=20,[ee,Ie]=x.useState(1),[ue,se]=x.useState({}),[Ee,je]=x.useState(!1),[it,At]=x.useState({}),pt=x.useMemo(()=>p.find(he=>he.id===P)||null,[P,p]);pt==null||pt.branch,x.useEffect(()=>{!_||!P||!ne.length||Pe(he=>he.map(He=>{const Ye=v.find(Qr=>Qr.id===He.productId)||null,ct=p.find(Qr=>Qr.id===P)||null,Nt=ct==null?void 0:ct.branch,It=Fs(He.packages),hr=Ye?de(Ye,Nt):Number(He.pricePerPackage||0),Ft=(Ye?Ue(Ye,Nt):0)*It,lr=Ye?Ye.logisticAllocatedPerPack*It:Number(He.logisticAllocated||0),Pt=(Ye?Ke(Ye,Nt):0)*It,Fr=Ne(P),jr=Pd(Ft,Fr);return{...He,pricePerPackage:hr,totalExpected:hr*It,grossProfit:Ft,logisticAllocated:lr,vendorMarginPercent:jr.vendorMarginPercent,uAproximada:Pt,uVendor:jr.uVendor,uInvestor:jr.uInvestor,totalRivas:((Ye==null?void 0:Ye.unitPriceRivas)||He.unitPriceRivas||0)*It,totalSanJorge:((Ye==null?void 0:Ye.unitPriceSanJorge)||He.unitPriceSanJorge||0)*It,totalIsla:((Ye==null?void 0:Ye.unitPriceIsla)||He.unitPriceIsla||0)*It,unitPriceRivas:(Ye==null?void 0:Ye.unitPriceRivas)||He.unitPriceRivas||0,unitPriceSanJorge:(Ye==null?void 0:Ye.unitPriceSanJorge)||He.unitPriceSanJorge||0,unitPriceIsla:(Ye==null?void 0:Ye.unitPriceIsla)||He.unitPriceIsla||0}}))},[_,P,ne.length,v,p]);const yt=x.useMemo(()=>!c||!u?null:p.find(he=>(he.email||"").trim().toLowerCase()===u)||null,[c,u,p]);x.useMemo(()=>new Set(ne.map(he=>he.productId)),[ne]);const Ct=x.useMemo(()=>v.filter(he=>(b[he.id]??0)>1).sort((he,He)=>`${he.category} ${he.name}`.localeCompare(`${He.category} ${He.name}`)),[v,b]),Et=x.useMemo(()=>{const he=Be.trim().toLowerCase();return he?Ct.filter(He=>`${He.category??""} ${He.name??""}`.toLowerCase().includes(he)):Ct},[Ct,Be]),Re=x.useMemo(()=>v.find(he=>he.id===fe)||null,[fe,v]),We=x.useMemo(()=>c&&yt?j.filter(he=>he.sellerId===yt.id):j,[j,c,yt]),et=async()=>{try{const he=bt(Oe,"inventory_transfers_candies");if(!c){const Ot=await Qt(he),Ft={};Ot.forEach(lr=>{const ir=lr.data(),Pt=Number(ir.packagesMoved||0),mr=String(ir.fromOrderKey||""),Fr=String(ir.toOrderKey||"");mr&&(Ft[mr]=Ft[mr]||{out:0,in:0},Ft[mr].out+=Pt),Fr&&(Ft[Fr]=Ft[Fr]||{out:0,in:0},Ft[Fr].in+=Pt)}),At(Ft);return}const He=nr(he,sr("fromSellerId","==",e)),Ye=nr(he,sr("toSellerId","==",e)),[ct,Nt]=await Promise.all([Qt(He),Qt(Ye)]),It={},hr=(Ot,Ft)=>{Ot.forEach(lr=>{const ir=lr.data(),Pt=Number(ir.packagesMoved||0),mr=String(Ft==="out"?ir.fromOrderKey||"":ir.toOrderKey||"");mr&&(It[mr]=It[mr]||{out:0,in:0},It[mr][Ft]+=Pt)})};hr(ct.docs,"out"),hr(Nt.docs,"in"),At(It)}catch(he){console.error(he),At({})}};x.useEffect(()=>{(async()=>{A(!0),m("");try{const he=await Qt(nr(bt(Oe,"sellers_candies"),xn("name","asc"))),He=[];he.forEach(ir=>{const Pt=ir.data(),mr=Pt.branch||Pt.branchLabel||Pt.route||Pt.sucursal||Pt.location||"";He.push({id:ir.id,name:Pt.name||"",email:Pt.email||"",commissionPercent:Number(Pt.commissionPercent||0),branch:$$(mr),branchLabel:mr})}),g(He);const Ye=await Qt(nr(bt(Oe,"candy_main_orders"),xn("createdAt","desc"))),ct={},Nt={},It=(ir,Pt)=>`${ir}#${String(Pt).padStart(10,"0")}`;Ye.forEach(ir=>{var Qr;const Pt=ir.data(),mr=Number(((Qr=Pt.createdAt)==null?void 0:Qr.seconds)??0),Fr=String(Pt.date||""),jr=Array.isArray(Pt.items)?Pt.items:[];for(const Dr of jr){const nn=String(Dr.id||Dr.productId||"");if(!nn)continue;const zn=Fs(Dr.remainingPackages??Dr.remainingPacks??0);zn>0&&(ct[nn]=(ct[nn]||0)+zn);const xt=Math.max(1,Fs(Dr.packages??0)),wr=Number(Dr.unitPriceRivas||0),st=Number(Dr.unitPriceSanJorge||0),Mt=Number(Dr.unitPriceIsla||0),$t=Number(Dr.gainRivas??Dr.grossProfitRivas??Dr.grossProfit??0),Dt=Number(Dr.gainSanJorge??Dr.grossProfitSanJorge??Dr.grossProfit??0),kt=Number(Dr.gainIsla??Dr.grossProfitIsla??Dr.grossProfit??0),qt=Number(Dr.logisticAllocated??Dr.prorrateo??Dr.prorrateoLogistico??Dr.gastos??0),Wt=Number(Dr.uAproximada??Dr.uApprox??Dr.netProfit??Dr.vendorProfit??Dr.gainVendor??0)/xt,vr=qt/xt,Nr={id:nn,name:String(Dr.name||Dr.productName||""),category:String(Dr.category||""),unitsPerPackage:Fs(Dr.unitsPerPackage??0),unitPriceRivas:wr,unitPriceSanJorge:st,unitPriceIsla:Mt,grossProfitPerPackRivas:$t/xt,grossProfitPerPackSanJorge:Dt/xt,grossProfitPerPackIsla:kt/xt,uApproxPerPackRivas:Wt,uApproxPerPackSanJorge:Wt,uApproxPerPackIsla:Wt,logisticAllocatedPerPack:vr,key:It(Fr,mr)},Vr=Nt[nn];(!Vr||Nr.key>Vr.key)&&(Nt[nn]=Nr)}});const hr=await Qt(c?nr(bt(Oe,"inventory_candies_sellers"),sr("sellerId","==",e),xn("createdAt","desc")):nr(bt(Oe,"inventory_candies_sellers"),xn("createdAt","desc"))),Ot={};Object.keys(ct).forEach(ir=>{const Pt=Fs(ct[ir]);Ot[ir]=Math.max(0,Pt)}),w(Ot);const Ft=Object.keys(Nt).map(ir=>{const Pt=Nt[ir];return{id:Pt.id,name:Pt.name,category:Pt.category,unitsPerPackage:Pt.unitsPerPackage,unitPriceRivas:Pt.unitPriceRivas,unitPriceSanJorge:Pt.unitPriceSanJorge,unitPriceIsla:Pt.unitPriceIsla,grossProfitPerPackRivas:Pt.grossProfitPerPackRivas,grossProfitPerPackSanJorge:Pt.grossProfitPerPackSanJorge,grossProfitPerPackIsla:Pt.grossProfitPerPackIsla,uApproxPerPackRivas:Pt.uApproxPerPackRivas,uApproxPerPackSanJorge:Pt.uApproxPerPackSanJorge,uApproxPerPackIsla:Pt.uApproxPerPackIsla,logisticAllocatedPerPack:Pt.logisticAllocatedPerPack,existingPacks:Ot[Pt.id]??0}}).sort((ir,Pt)=>`${ir.category} ${ir.name}`.localeCompare(`${Pt.category} ${Pt.name}`));y(Ft);const lr=[];hr.forEach(ir=>{const Pt=ir.data(),mr=He.find(xt=>xt.id===Pt.sellerId)||null,Fr=Wm(Pt.vendorMarginPercent??Pt.vendorMargin??Pt.commissionPercent??(mr==null?void 0:mr.commissionPercent)??0),jr=Number(Pt.uAproximada??Pt.uApprox??Pt.netProfit??Pt.uAprox??Pt.uApproxTotal??0),Qr=Pt.uVendor??Pt.vendorProfit??Pt.gainVendor??0,Dr=Pt.uVendor!=null,nn=Pd(Number(Pt.grossProfit??Pt.gainVendor??0),Fr),zn=Dr?{uAproximada:Number(jr||0),vendorMarginPercent:Fr,uVendor:Number(Qr||0),uInvestor:Number(jr||0)-Number(Qr||0)}:{uAproximada:Number(jr||0),vendorMarginPercent:nn.vendorMarginPercent,uVendor:nn.uVendor,uInvestor:nn.uInvestor};lr.push({id:ir.id,sellerId:Pt.sellerId,sellerName:Pt.sellerName||"",productId:Pt.productId,productName:Pt.productName||"",category:Pt.category||"",orderId:Pt.orderId||null,packages:Number(Pt.packages||0),unitsPerPackage:Number(Pt.unitsPerPackage||0),totalUnits:Number(Pt.totalUnits||0),remainingPackages:Number(Pt.remainingPackages||0),remainingUnits:Number(Pt.remainingUnits||0),totalRivas:Number(Pt.totalRivas||0),totalSanJorge:Number(Pt.totalSanJorge||0),totalIsla:Number(Pt.totalIsla||0),unitPriceRivas:Number(Pt.unitPriceRivas||0),unitPriceSanJorge:Number(Pt.unitPriceSanJorge||0),unitPriceIsla:Number(Pt.unitPriceIsla||0),grossProfit:Number(Pt.grossProfit??Pt.gainVendor??0),logisticAllocated:Number(Pt.logisticAllocated??Pt.gastos??Pt.gasto??0),vendorMarginPercent:zn.vendorMarginPercent,uAproximada:zn.uAproximada,uVendor:zn.uVendor,uInvestor:zn.uInvestor,vendorProfit:Number(Pt.vendorProfit??zn.uVendor??0),subtotal:Number(Pt.subtotal||0),providerPrice:Number(Pt.providerPrice||0),date:Pt.date||"",createdAt:Pt.createdAt||ur.now()})}),I(lr),await et()}catch(he){console.error(he),m(" Error cargando datos de vendedores / pedidos.")}finally{A(!1)}})()},[a,t,e]);const xe=(he,He)=>`${he}__${He}`,de=(he,He)=>He?He==="RIVAS"?he.unitPriceRivas||0:He==="SAN_JORGE"?he.unitPriceSanJorge||0:he.unitPriceIsla||0:he.unitPriceIsla||he.unitPriceRivas||he.unitPriceSanJorge||0,Ue=(he,He)=>He?He==="RIVAS"?he.grossProfitPerPackRivas||0:He==="SAN_JORGE"?he.grossProfitPerPackSanJorge||0:he.grossProfitPerPackIsla||0:he.grossProfitPerPackIsla||he.grossProfitPerPackRivas||he.grossProfitPerPackSanJorge||0,Ke=(he,He)=>He?He==="RIVAS"?he.uApproxPerPackRivas||0:He==="SAN_JORGE"?he.uApproxPerPackSanJorge||0:he.uApproxPerPackIsla||0:he.uApproxPerPackIsla||he.uApproxPerPackRivas||he.uApproxPerPackSanJorge||0,Ne=he=>{const He=p.find(Ye=>Ye.id===he)||null;return Wm((He==null?void 0:He.commissionPercent)??0)},mt=x.useMemo(()=>{const he=new Map;for(const Ye of We){const ct=xe(Ye.sellerId,Ye.date),Nt=he.get(ct)||{orderKey:ct,sellerId:Ye.sellerId,sellerName:Ye.sellerName,date:Ye.date,totalPackages:0,totalRemainingPackages:0,totalExpected:0,grossProfit:0,vendorProfit:0,gastos:0,transferredOut:0,transferredIn:0};Nt.totalPackages+=Number(Ye.packages||0),Nt.totalRemainingPackages+=Number(Ye.remainingPackages||0);const It=p.find(Dr=>Dr.id===Ye.sellerId)||null,hr=It==null?void 0:It.branch,Ot=v.find(Dr=>Dr.id===String(Ye.productId))||null,Ft=Fs(Ye.packages),ir=(Ot?de(Ot,hr):Number(hr==="RIVAS"?Ye.unitPriceRivas||0:hr==="SAN_JORGE"?Ye.unitPriceSanJorge||0:Ye.unitPriceIsla||0))*Ft;Nt.totalExpected+=Number(ir||0);const mr=(Ot?Ue(Ot,hr):Ft>0?Number(Ye.grossProfit||0)/Ft:0)*Ft;Nt.grossProfit+=Number(mr||0);const Fr=Ot?Ot.logisticAllocatedPerPack*Ft:Number(Ye.logisticAllocated??Ye.gastos??Ye.gasto??0);Nt.gastos=(Nt.gastos||0)+Number(Fr||0);const jr=Ne(Ye.sellerId),Qr=Pd(mr,jr);Nt.vendorProfit+=Number(Qr.uVendor||0),he.set(ct,Nt)}const He=[];for(const Ye of he.values()){const ct=it[Ye.orderKey]||{out:0,in:0};Ye.transferredOut=ct.out||0,Ye.transferredIn=ct.in||0,He.push(Ye)}return He.sort((Ye,ct)=>(ct.date||"").localeCompare(Ye.date||"")),He},[We,p,it,v]),wt=x.useMemo(()=>Math.max(1,Math.ceil(mt.length/ye)),[mt.length]);x.useEffect(()=>{Q>wt&&Ge(wt)},[wt]);const we=x.useMemo(()=>{const he=(Q-1)*ye;return mt.slice(he,he+ye)},[mt,Q]),ae=()=>Ge(he=>Math.max(1,he-1)),be=()=>Ge(he=>Math.min(wt,he+1)),ve=x.useMemo(()=>{const he=G.trim().toLowerCase();return he?ne.filter(He=>{const Ye=String(He.productName||"").toLowerCase(),ct=String(He.category||"").toLowerCase();return Ye.includes(he)||ct.includes(he)}):ne},[ne,G]),Ve=x.useMemo(()=>Math.max(1,Math.ceil(ve.length/ie)),[ve.length]);x.useEffect(()=>{ee>Ve&&Ie(Ve)},[Ve]);const ce=x.useMemo(()=>{const he=(ee-1)*ie;return ve.slice(he,he+ie)},[ve,ee]),ke=x.useMemo(()=>{const he=new Map;for(const He of ce){const Ye=(He.category||"Sin categora").trim()||"Sin categora",ct=he.get(Ye)||[];ct.push(He),he.set(Ye,ct)}return Array.from(he.entries())},[ce]),dt=he=>{se(He=>({...He,[he]:!He[he]}))},ft=()=>Ie(he=>Math.max(1,he-1)),gt=()=>Ie(he=>Math.min(Ve,he+1)),Rt=x.useMemo(()=>{const he=ne.reduce((Ot,Ft)=>Ot+Number(Ft.packages||0),0),He=ne.reduce((Ot,Ft)=>Ot+Number(Ft.totalExpected||0),0),Ye=ne.reduce((Ot,Ft)=>Ot+Number(Ft.grossProfit||0),0),ct=ne.reduce((Ot,Ft)=>Ot+Number(Ft.logisticAllocated??Ft.gastos??Ft.gasto??0),0),Nt=ne.reduce((Ot,Ft)=>Ot+Number(Ft.uVendor||0),0),It=Ye-ct-Nt;return{totalPackages:he,totalExpected:He,grossProfit:Ye,gastosTotal:ct,uVendor:Nt,uNeta:It,vendorProfit:Nt}},[ne]),ot=()=>{F(null),k(""),J(""),Ae(""),pe("0"),Pe([]),O(""),Ie(1)},Se=()=>{m(""),ot(),c&&yt&&k(yt.id);const he=new Date,He=he.getFullYear(),Ye=String(he.getMonth()+1).padStart(2,"0"),ct=String(he.getDate()).padStart(2,"0");J(`${He}-${Ye}-${ct}`),S(!0)},ht=()=>{S(!1)},W=he=>{m(""),ot(),F(he);const[He,Ye]=he.split("__");k(He||""),J(Ye||"");const ct=We.filter(Ot=>xe(Ot.sellerId,Ot.date)===he),Nt=p.find(Ot=>Ot.id===He)||null,It=Nt==null?void 0:Nt.branch,hr=ct.map(Ot=>{const Ft=v.find(st=>st.id===String(Ot.productId))||null,lr=Number(Ot.unitPriceRivas||(Ft==null?void 0:Ft.unitPriceRivas)||0),ir=Number(Ot.unitPriceSanJorge||(Ft==null?void 0:Ft.unitPriceSanJorge)||0),Pt=Number(Ot.unitPriceIsla||(Ft==null?void 0:Ft.unitPriceIsla)||0),mr=Number(Ot.packages||0),Fr=It==="RIVAS"?lr:It==="SAN_JORGE"?ir:Pt,jr=Number(Ot.totalRivas||0),Qr=Number(Ot.totalSanJorge||0),Dr=Number(Ot.totalIsla||0),nn=It==="RIVAS"?jr:It==="SAN_JORGE"?Qr:Dr,zn=Wm(Ot.vendorMarginPercent??Ne(He)),xt=Pd(Number(Ot.grossProfit||0),zn),wr=Number(Ot.logisticAllocated??Ot.gastos??0)||(Ft?Ft.logisticAllocatedPerPack*mr:0);return{id:Ot.id,productId:String(Ot.productId||""),productName:Ot.productName||(Ft==null?void 0:Ft.name)||"",category:Ot.category||(Ft==null?void 0:Ft.category)||"",unitsPerPackage:Number(Ot.unitsPerPackage||(Ft==null?void 0:Ft.unitsPerPackage)||0),packages:mr,totalExpected:nn,pricePerPackage:Fr,grossProfit:Number(Ot.grossProfit||0),logisticAllocated:wr,vendorMarginPercent:xt.vendorMarginPercent,uAproximada:Number(Ot.uAproximada||0),uVendor:Number(Ot.uVendor??xt.uVendor??0),uInvestor:Number(Ot.uInvestor??xt.uInvestor??0),totalRivas:jr,totalSanJorge:Qr,totalIsla:Dr,unitPriceRivas:lr,unitPriceSanJorge:ir,unitPriceIsla:Pt,remainingPackages:Number(Ot.remainingPackages||0)}});Pe(hr),S(!0)},Te=()=>{if(m(""),!P)return m(" Seleccion un vendedor.");if(!D)return m(" Seleccion una fecha.");if(!fe)return m(" Seleccion un producto.");const he=Fs(me);if(he<=0)return m(" Paquetes debe ser > 0.");const He=v.find(jr=>jr.id===fe);if(!He)return m(" Producto no encontrado.");if(ne.some(jr=>jr.productId===He.id))return m(" Ese producto ya est agregado al pedido.");const Ye=p.find(jr=>jr.id===P)||null,ct=Ye==null?void 0:Ye.branch,Nt=de(He,ct),It=Ue(He,ct),Ot=Ke(He,ct)*he,Ft=Nt*he,lr=It*he,ir=He.logisticAllocatedPerPack*he,Pt=Ne(P),mr=Pd(lr,Pt),Fr={id:`tmp_${Date.now()}_${Math.random().toString(16).slice(2)}`,productId:He.id,productName:He.name,category:He.category,unitsPerPackage:He.unitsPerPackage,packages:he,totalExpected:Ft,pricePerPackage:Nt,grossProfit:lr,logisticAllocated:ir,vendorMarginPercent:mr.vendorMarginPercent,uAproximada:Ot,uVendor:mr.uVendor,uInvestor:mr.uInvestor,totalRivas:(He.unitPriceRivas||0)*he,totalSanJorge:(He.unitPriceSanJorge||0)*he,totalIsla:(He.unitPriceIsla||0)*he,unitPriceRivas:He.unitPriceRivas||0,unitPriceSanJorge:He.unitPriceSanJorge||0,unitPriceIsla:He.unitPriceIsla||0,remainingPackages:0};Pe(jr=>[Fr,...jr]),Ae(""),pe("0"),Ie(1)},Ze=he=>{Pe(He=>He.filter(Ye=>Ye.id!==he))},tt=(he,He)=>{const Ye=Fs(He);Pe(ct=>ct.map(Nt=>{if(Nt.id!==he)return Nt;const It=v.find(Dr=>Dr.id===Nt.productId),hr=p.find(Dr=>Dr.id===P)||null,Ot=hr==null?void 0:hr.branch,Ft=It?de(It,Ot):Nt.pricePerPackage||0,ir=(It?Ue(It,Ot):0)*Ye,Pt=It?It.logisticAllocatedPerPack*Ye:Nt.logisticAllocated||0,Fr=(It?Ke(It,Ot):0)*Ye,jr=Nt.vendorMarginPercent!=null?Nt.vendorMarginPercent:Ne(P),Qr=Pd(ir,jr);return{...Nt,packages:Ye,pricePerPackage:Ft,totalExpected:Ft*Ye,grossProfit:ir,logisticAllocated:Pt,vendorMarginPercent:Qr.vendorMarginPercent,uAproximada:Fr,uVendor:Qr.uVendor,uInvestor:Qr.uInvestor,totalRivas:((It==null?void 0:It.unitPriceRivas)||Nt.unitPriceRivas||0)*Ye,totalSanJorge:((It==null?void 0:It.unitPriceSanJorge)||Nt.unitPriceSanJorge||0)*Ye,totalIsla:((It==null?void 0:It.unitPriceIsla)||Nt.unitPriceIsla||0)*Ye}}))},ut=(he,He)=>{const Ye=Wm(He);Pe(ct=>ct.map(Nt=>{if(Nt.id!==he)return Nt;const It=v.find(Fr=>Fr.id===Nt.productId),hr=p.find(Fr=>Fr.id===P)||null,Ot=hr==null?void 0:hr.branch,Ft=Fs(Nt.packages),ir=(It?Ke(It,Ot):0)*Ft,Pt=Number(Nt.grossProfit||0),mr=Pd(Pt,Ye);return{...Nt,vendorMarginPercent:mr.vendorMarginPercent,uAproximada:ir,uVendor:mr.uVendor,uInvestor:mr.uInvestor}}))},T=async()=>{if(l&&!Z)try{R(!0),m("");const he=j;if(!he.length){m(" No hay documentos para actualizar.");return}const He=Ot=>v.find(Ft=>Ft.id===Ot)||null,Ye=Ot=>{const Ft=p.find(lr=>lr.id===Ot)||null;return Ft==null?void 0:Ft.branch},ct=(Ot,Ft)=>Math.abs(Number(Ot||0)-Number(Ft||0))>.01;let Nt=Kd(Oe),It=0,hr=0;for(const Ot of he){const Ft=Ye(Ot.sellerId)||"ISLA",lr=Fs(Ot.packages),ir=He(String(Ot.productId||"")),Pt=ir&&lr>0?Ue(ir,Ft)*lr:Number(Ot.grossProfit||0),mr=ir&&lr>0?ir.logisticAllocatedPerPack*lr:Number(Ot.logisticAllocated||0),Fr=ir?Ke(ir,Ft):0,jr=lr>0?Fr*lr:0,Qr=Ot.vendorMarginPercent!=null?Wm(Ot.vendorMarginPercent):Ne(Ot.sellerId),Dr=Pd(Pt,Qr),nn=Dr.uVendor,zn=Dr.uInvestor,xt=Pt-mr-nn;if(!(Ot.uVendor==null||Ot.uNeta==null||Ot.uAproximada==null||Ot.uInvestor==null||Ot.logisticAllocated==null||ct(Ot.uVendor,nn)||ct(Ot.uNeta,xt)||ct(Ot.uAproximada,jr)||ct(Ot.uInvestor,zn)||ct(Ot.logisticAllocated,mr)))continue;const st=zt(Oe,"inventory_candies_sellers",Ot.id);Nt.update(st,{vendorMarginPercent:Qr,grossProfit:Pt,logisticAllocated:mr,uAproximada:jr,uVendor:nn,uInvestor:zn,uNeta:xt,vendorProfit:nn,updatedAt:ur.now()}),It+=1,hr+=1,It>=400&&(await Nt.commit(),Nt=Kd(Oe),It=0)}It>0&&await Nt.commit(),m(` Actualizados ${hr} documentos.`),s()}catch(he){console.error(he),m(" Error actualizando documentos.")}finally{R(!1)}},M=(he,He,Ye="text/plain;charset=utf-8")=>{const ct=new Blob([He],{type:Ye}),Nt=URL.createObjectURL(ct),It=document.createElement("a");It.href=Nt,It.download=he,document.body.appendChild(It),It.click(),It.remove(),URL.revokeObjectURL(Nt)},L=()=>{const he=["Vendedor","Sucursal","Fecha","Producto ID","Producto","Categora","Paquetes","Paquetes restantes","Precio paquete","Total esperado","U. Bruta","U. Vendedor","U. Neta","P. Rivas","P. San Jorge","P. Isla","Total Rivas","Total San Jorge","Total Isla","Unidades x paquete","vendorMarginPercent","uVendor"],He=p.find(It=>It.id===P)||null,Ye=(He==null?void 0:He.branch)||$$(He==null?void 0:He.branchLabel)||"",ct=[he.join(","),...ne.map(It=>{const hr=Number(It.grossProfit||0)-Number(It.logisticAllocated??It.gastos??0)-Number(It.uVendor||0);return[(He==null?void 0:He.name)||"",String(Ye),D||"",It.productId,It.productName,It.category,String(Number(It.packages||0)),String(Number(It.remainingPackages||0)),String(Number(It.pricePerPackage||0).toFixed(2)),String(Number(It.totalExpected||0).toFixed(2)),String(Number(It.grossProfit||0).toFixed(2)),String(Number(It.uVendor||0).toFixed(2)),String(Number(hr||0).toFixed(2)),String(Number(It.unitPriceRivas||0).toFixed(2)),String(Number(It.unitPriceSanJorge||0).toFixed(2)),String(Number(It.unitPriceIsla||0).toFixed(2)),String(Number(It.totalRivas||0).toFixed(2)),String(Number(It.totalSanJorge||0).toFixed(2)),String(Number(It.totalIsla||0).toFixed(2)),String(Number(It.unitsPerPackage||0)),String(Number(It.vendorMarginPercent||0).toFixed(2)),String(Number(It.uVendor||0).toFixed(2))].map(G$).join(",")})].join(`
`),Nt=`vendor_order_items_${((He==null?void 0:He.name)||"vendedor").replace(/\s+/g,"_")}_${D||"sin_fecha"}.csv`;M(Nt,ct,"text/csv;charset=utf-8")},K=()=>{const he=["productId","productName","category","Existentes","Paquetes","vendorMarginPercent","uNeta"],He=v.map(ct=>({id:ct.id,name:ct.name,category:ct.category,existentes:Number(ct.existingPacks||0)})).filter(ct=>ct.existentes>0).sort((ct,Nt)=>`${ct.category} ${ct.name}`.localeCompare(`${Nt.category} ${Nt.name}`)),Ye=[he.join(","),...He.map(ct=>[ct.id,ct.name,ct.category,String(ct.existentes),"","",""].map(G$).join(","))].join(`
`);M("plantilla_productos_orden_maestra.csv",Ye,"text/csv;charset=utf-8")},re=async he=>{try{m("");const He=await he.text(),Ye=sQe(He);if(!Ye.length)return m(" Archivo vaco.");const ct=Ye[0].map(Pt=>String(Pt||"").trim().toLowerCase()),Nt=ct.findIndex(Pt=>Pt==="productid"||Pt==="producto id"||Pt==="id"),It=ct.findIndex(Pt=>Pt==="paquetes"||Pt==="packages"),hr=ct.findIndex(Pt=>Pt==="vendormarginpercent"||Pt==="vendor_margin_percent"||Pt==="marginvendorpercent"||Pt==="margen"||Pt==="margen vendedor"||Pt==="margen_del_vendedor");if(Nt<0||It<0)return m(" Plantilla invlida: debe tener columnas productId y Paquetes.");if(!P)return m(" Seleccion un vendedor antes de importar.");if(!D)return m(" Seleccion una fecha antes de importar.");const Ot=p.find(Pt=>Pt.id===P)||null,Ft=Ot==null?void 0:Ot.branch,lr=Ne(P),ir=[];for(let Pt=1;Pt<Ye.length;Pt++){const mr=Ye[Pt]||[],Fr=String(mr[Nt]||"").trim();if(!Fr)continue;const jr=Fs(mr[It]);if(jr<=0)continue;const Qr=v.find(Wt=>Wt.id===Fr);if(!Qr)continue;const Dr=hr>=0?Wm(mr[hr]):0,nn=hr>=0&&String(mr[hr]??"").trim()!==""?Dr:lr,zn=de(Qr,Ft),xt=Ue(Qr,Ft),wr=zn*jr,st=xt*jr,Mt=Qr.logisticAllocatedPerPack*jr,Dt=Ke(Qr,Ft)*jr,kt=Pd(st,nn),qt=ne.find(Wt=>Wt.productId===Fr);if(qt){const Wt=hr>=0&&String(mr[hr]??"").trim()!==""?nn:qt.vendorMarginPercent,vr=Pd(st,Wt);Pe(Nr=>Nr.map(Vr=>Vr.id===qt.id?{...Vr,packages:jr,pricePerPackage:zn,totalExpected:wr,grossProfit:st,logisticAllocated:Mt,vendorMarginPercent:vr.vendorMarginPercent,uAproximada:Dt,uVendor:vr.uVendor,uInvestor:vr.uInvestor,totalRivas:(Qr.unitPriceRivas||0)*jr,totalSanJorge:(Qr.unitPriceSanJorge||0)*jr,totalIsla:(Qr.unitPriceIsla||0)*jr}:Vr));continue}const Xt={id:`tmp_${Date.now()}_${Math.random().toString(16).slice(2)}`,productId:Qr.id,productName:Qr.name,category:Qr.category,unitsPerPackage:Qr.unitsPerPackage,packages:jr,pricePerPackage:zn,totalExpected:wr,grossProfit:st,logisticAllocated:Mt,vendorMarginPercent:kt.vendorMarginPercent,uAproximada:Dt,uVendor:kt.uVendor,uInvestor:kt.uInvestor,totalRivas:(Qr.unitPriceRivas||0)*jr,totalSanJorge:(Qr.unitPriceSanJorge||0)*jr,totalIsla:(Qr.unitPriceIsla||0)*jr,unitPriceRivas:Qr.unitPriceRivas||0,unitPriceSanJorge:Qr.unitPriceSanJorge||0,unitPriceIsla:Qr.unitPriceIsla||0,remainingPackages:0};ir.push(Xt)}if(!ir.length)return m(" No se encontraron filas con Paquetes > 0.");Pe(Pt=>[...ir,...Pt]),Ie(1),m(` Importados ${ir.length} productos desde plantilla.`)}catch(He){console.error(He),m(" Error importando archivo.")}},le=async()=>{try{if(m(""),d)return m(" Solo lectura.");if(!P)return m(" Seleccion un vendedor.");if(!D)return m(" Seleccion una fecha.");if(!ne.length)return m(" Agreg al menos 1 producto.");const he=p.find(Ft=>Ft.id===P)||null;if(!he)return m(" Vendedor invlido.");const He=he.branch,Ye=E?We.filter(Ft=>xe(Ft.sellerId,Ft.date)===E):[],ct=new Map;Ye.forEach(Ft=>ct.set(String(Ft.productId),Ft));for(const Ft of ne){const lr=Fs(Ft.packages),ir=E?ct.get(Ft.productId):null,Pt=ir?Fs(ir.packages):0,mr=lr-Pt;if(mr>0){const Fr=b[Ft.productId]??0;if(mr>Fr)return m(` "${Ft.productName}" excede existencias de orden maestra. Existentes: ${Fr} (faltan ${mr})`)}}Y(!0);const Nt=ur.now(),It=xe(P,D),hr=Ne(P);if(E){const Ft=Ye.filter(lr=>!ne.some(ir=>ir.productId===String(lr.productId)));for(const lr of Ft){const ir=Fs(lr.remainingPackages);ir>0&&await H$({vendorInventoryId:lr.id,packagesToReturn:ir})}for(const lr of ne){const ir=ct.get(lr.productId);if(!ir)continue;const Pt=Fs(lr.packages),mr=Fs(ir.packages),Fr=Pt-mr;if(Fr<0){const jr=Math.abs(Fr),Qr=Fs(ir.remainingPackages);if(jr>Qr)return m(` No pods bajar "${lr.productName}" en ${jr} porque solo quedan ${Qr} paquetes restantes.`);await H$({vendorInventoryId:ir.id,packagesToReturn:jr})}}}const Ot=new Map;for(const Ft of ne){const lr=Fs(Ft.packages),ir=E?ct.get(Ft.productId):null,Pt=ir?Fs(ir.packages):0,mr=lr-Pt;if(mr>0){const{allocations:Fr}=await nQe({productId:Ft.productId,packagesToAllocate:mr});Ot.set(Ft.productId,Fr||[])}}await Di(Oe,async Ft=>{for(const lr of ne){const ir=Fs(lr.packages),Pt=Fs(lr.unitsPerPackage),mr=ir*Pt,Fr=E?ct.get(lr.productId):null,jr=Fr?Fs(Fr.packages):0,Qr=Fr?Fs(Fr.remainingPackages):0,Dr=ir-jr,nn=Fr?Math.max(0,Qr+Dr):ir,zn=nn*Pt,xt=v.find(ts=>ts.id===lr.productId),wr=xt?de(xt,He):Number(lr.pricePerPackage||0),Mt=(xt?Ue(xt,He):0)*ir,$t=xt?xt.logisticAllocatedPerPack*ir:lr.logisticAllocated||0,kt=(xt?Ke(xt,He):0)*ir,qt=lr.vendorMarginPercent!=null?lr.vendorMarginPercent:hr,Xt=Pd(Mt,qt),Wt=Number(Mt||0)-Number($t||0)-Number(Xt.uVendor||0),vr=((xt==null?void 0:xt.unitPriceRivas)||lr.unitPriceRivas||0)*ir,Nr=((xt==null?void 0:xt.unitPriceSanJorge)||lr.unitPriceSanJorge||0)*ir,Vr=((xt==null?void 0:xt.unitPriceIsla)||lr.unitPriceIsla||0)*ir,Gn={sellerId:he.id,sellerName:he.name,sellerEmail:he.email||"",branch:he.branch||"",branchLabel:he.branchLabel||"",productId:lr.productId,productName:lr.productName,category:lr.category,orderId:It,date:D,createdAt:Nt,packages:ir,unitsPerPackage:Pt,totalUnits:mr,remainingPackages:nn,remainingUnits:zn,totalRivas:vr,totalSanJorge:Nr,totalIsla:Vr,unitPriceRivas:(xt==null?void 0:xt.unitPriceRivas)||lr.unitPriceRivas||0,unitPriceSanJorge:(xt==null?void 0:xt.unitPriceSanJorge)||lr.unitPriceSanJorge||0,unitPriceIsla:(xt==null?void 0:xt.unitPriceIsla)||lr.unitPriceIsla||0,grossProfit:Mt,logisticAllocated:$t,vendorMarginPercent:Xt.vendorMarginPercent,uVendor:Xt.uVendor,uNeta:Wt,uAproximada:kt,uInvestor:Xt.uInvestor,vendorProfit:Xt.uVendor},qs=Ot.get(lr.productId)||[];if(E)if(String(lr.id||"").startsWith("tmp_")){const ts=zt(bt(Oe,"inventory_candies_sellers"));Gn.masterAllocations=qs,Ft.set(ts,Gn)}else{const ts=zt(Oe,"inventory_candies_sellers",lr.id);qs.length>0&&(Gn.masterAllocations=ZZ(...qs)),Ft.set(ts,Gn,{merge:!0})}else{const ts=zt(bt(Oe,"inventory_candies_sellers"));Gn.masterAllocations=qs,Ft.set(ts,Gn)}}}),m(" Pedido guardado."),S(!1),ot(),s()}catch(he){console.error(he),m(" Error guardando el pedido.")}finally{Y(!1)}},Me=async he=>{try{if(m(""),!l)return m(" Solo admin.");Y(!0);const He=We.filter(Ye=>xe(Ye.sellerId,Ye.date)===he);for(const Ye of He)await aQe(Ye.id);m(" Pedido eliminado."),s()}catch(He){console.error(He),m(" Error eliminando pedido.")}finally{Y(!1)}},qe=So.useRef(null),lt=()=>{var he;if(d)return m(" Solo lectura.");if(!P)return m(" Seleccion un vendedor.");if(!D)return m(" Seleccion una fecha.");(he=qe.current)==null||he.click()},Fe=async he=>{var Ye;const He=(Ye=he.target.files)==null?void 0:Ye[0];he.target.value="",He&&await re(He)},Xe=c&&!!yt;return i.jsxs("div",{className:"p-3 md:p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-3 mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-lg md:text-2xl font-semibold",children:"rdenes de Vendedor (Dulces)"}),i.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Pedidos agrupados por vendedor + fecha. U. Bruta viene de la orden maestra. U. Neta = U. Bruta - Gastos - U. Vendedor."})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(Tc,{onClick:s}),!d&&i.jsx("button",{onClick:Se,className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"+ Nuevo pedido"})]})]}),h&&!_&&i.jsx("div",{className:"mb-3 p-2 rounded border text-sm bg-white",children:h}),f?i.jsx("div",{className:"p-4 text-sm text-gray-600",children:"Cargando"}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"hidden md:block bg-white border rounded",children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-700",children:["Total pedidos: ",i.jsx("b",{children:mt.length})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:()=>{if(!_){m(" Abr un pedido para exportar productos asociados.");return}L()},children:"Exportar asociados"}),l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:T,disabled:Z,children:Z?"Actualizando campos...":"Actualizar campos calculados"})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2 border-b",children:"Fecha"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Paquetes"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Restantes"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Total esperado"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Bruta"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Trasl. Salida"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Trasl. Entrada"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Acciones"})]})}),i.jsxs("tbody",{children:[we.map(he=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-2 border-b",children:he.date}),i.jsx("td",{className:"p-2 border-b",children:he.sellerName}),i.jsx("td",{className:"p-2 border-b text-right",children:he.totalPackages}),i.jsx("td",{className:"p-2 border-b text-right",children:he.totalRemainingPackages}),i.jsx("td",{className:"p-2 border-b text-right",children:Zs(he.totalExpected)}),i.jsx("td",{className:"p-2 border-b text-right",children:Zs(he.grossProfit)}),i.jsx("td",{className:"p-2 border-b text-right",children:Zs(he.gastos||0)}),i.jsx("td",{className:"p-2 border-b text-right",children:Zs(he.vendorProfit)}),i.jsx("td",{className:"p-2 border-b text-right",children:he.transferredOut}),i.jsx("td",{className:"p-2 border-b text-right",children:he.transferredIn}),i.jsx("td",{className:"p-2 border-b",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded bg-gray-900 text-white text-xs hover:bg-black",onClick:()=>W(he.orderKey),children:"Ver / Editar"}),l&&i.jsx("button",{className:"px-3 py-1.5 rounded bg-red-600 text-white text-xs hover:bg-red-700",onClick:()=>{confirm("Eliminar este pedido completo?")&&Me(he.orderKey)},children:"Eliminar"})]})})]},he.orderKey)),!we.length&&i.jsx("tr",{children:i.jsx("td",{className:"p-3 text-sm text-gray-600",colSpan:11,children:"No hay pedidos."})})]})]})}),i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Pgina ",Q," / ",wt]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:ae,disabled:Q<=1,children:""}),i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:be,disabled:Q>=wt,children:""})]})]})]}),i.jsxs("div",{className:"md:hidden space-y-2",children:[i.jsxs("div",{className:"bg-white border rounded p-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-700",children:["Total pedidos: ",i.jsx("b",{children:mt.length})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:[Q,"/",wt]})]}),we.map(he=>i.jsxs("div",{className:"bg-white border rounded",role:"button",tabIndex:0,onClick:()=>W(he.orderKey),onKeyDown:He=>{(He.key==="Enter"||He.key===" ")&&(He.preventDefault(),W(he.orderKey))},children:[i.jsxs("div",{className:"p-2 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold",children:he.sellerName}),i.jsx("div",{className:"text-xs text-gray-600",children:he.date})]}),l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm text-red-600",onClick:He=>{He.stopPropagation(),confirm("Eliminar este pedido completo?")&&Me(he.orderKey)},children:"Eliminar"})]}),i.jsx("div",{className:"px-2 pb-2",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:he.totalPackages})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:he.totalRemainingPackages})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"font-semibold",children:Zs(he.totalExpected)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"font-semibold",children:Zs(he.vendorProfit)})]})]})})]},he.orderKey)),!we.length&&i.jsx("div",{className:"p-3 text-sm text-gray-600 bg-white border rounded",children:"No hay pedidos."}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm",onClick:ae,disabled:Q<=1,children:""}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm",onClick:be,disabled:Q>=wt,children:""})]})]})]}),_&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3 md:p-6",children:i.jsxs("div",{className:"bg-white w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded shadow relative",children:[U&&i.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:i.jsx("div",{className:"text-sm font-semibold",children:"Guardando"})}),i.jsxs("div",{className:"p-3 md:p-5 border-b flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:E?"Editar pedido":"Nuevo pedido"}),i.jsx("div",{className:"text-xs text-gray-600",children:"U. Bruta viene de Orden Maestra. U. Vendedor e Inversionista se calculan aqu. U. Neta = U. Bruta - Gastos - U. Vendedor."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:ht,children:"Cerrar"}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",onClick:le,children:"Guardar"})]})]}),i.jsxs("div",{className:"p-3 md:p-5 space-y-3",children:[i.jsxs("button",{type:"button",className:"md:hidden w-full px-3 py-2 rounded border text-sm flex items-center justify-between",onClick:()=>te(he=>!he),children:[i.jsx("span",{children:"Filtros y KPIs"}),i.jsx("span",{children:H?"":"+"})]}),i.jsxs("div",{className:`${H?"block":"hidden"} md:block space-y-3`,children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Vendedor"}),i.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:P,onChange:he=>k(he.target.value),disabled:Xe,children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),p.map(he=>i.jsxs("option",{value:he.id,children:[he.name," ",he.branch?`(${he.branch})`:""]},he.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded p-2 text-sm",value:D,onChange:he=>J(he.target.value)})]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:K,children:"Plantilla"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:lt,children:"Importar CSV"}),i.jsx("input",{ref:qe,type:"file",accept:".csv,text/csv",className:"hidden",onChange:Fe})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2",children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"text-lg font-semibold",children:Rt.totalPackages})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"text-lg font-semibold",children:Zs(Rt.totalExpected)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:Zs(Rt.grossProfit)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"text-lg font-semibold",children:Zs(Rt.uVendor)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Neta"}),i.jsx("div",{className:"text-lg font-semibold",children:Zs(Rt.uNeta)})]})]})]}),i.jsxs("div",{className:"border rounded p-3 space-y-2",children:[i.jsxs("button",{type:"button",className:"md:hidden w-full px-3 py-2 rounded border text-sm flex items-center justify-between",onClick:()=>je(he=>!he),children:[i.jsx("span",{children:"Agregar producto"}),i.jsx("span",{children:Ee?"":"+"})]}),i.jsxs("div",{className:`${Ee?"block":"hidden"} md:block space-y-2`,children:[i.jsx("div",{className:"text-sm font-semibold hidden md:block",children:"Agregar producto"}),i.jsxs("div",{className:"grid md:grid-cols-4 gap-2",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Buscar"}),i.jsx("input",{className:"w-full border rounded p-2 text-sm",value:Be,onChange:he=>O(he.target.value),placeholder:"Buscar por categora o nombre"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),i.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:fe,onChange:he=>Ae(he.target.value),children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),Et.map(he=>i.jsxs("option",{value:he.id,children:[he.category," - ",he.name," (exist:"," ",b[he.id]??0,")"]},he.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("input",{className:"w-full border rounded p-2 text-sm",value:me,onChange:he=>pe(he.target.value),inputMode:"numeric"})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{className:"w-full px-3 py-2 rounded bg-gray-900 text-white text-sm hover:bg-black",onClick:Te,disabled:!Re,children:"Agregar"})})]})]})]}),i.jsxs("div",{className:"border rounded",children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm font-semibold",children:["Productos asociados (",ne.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Buscar producto",value:G,onChange:he=>{q(he.target.value),Ie(1)}}),i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:L,disabled:!ne.length,children:"Exportar CSV"})]})]}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1300px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2 border-b",children:"Categora"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Producto"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Paquetes"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Restantes"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Precio/paq"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Total esperado"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Bruta"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Neta"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Margen (%)"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Acciones"})]})}),i.jsxs("tbody",{children:[ce.map(he=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-2 border-b",children:he.category}),i.jsx("td",{className:"p-2 border-b",children:he.productName}),i.jsx("td",{className:"p-2 border-b text-right",children:d?i.jsx("span",{children:he.packages}):i.jsx("input",{className:"w-20 border rounded p-1 text-right",value:String(he.packages),onChange:He=>tt(he.id,He.target.value),inputMode:"numeric"})}),i.jsx("td",{className:"p-2 border-b text-right",children:he.remainingPackages}),i.jsx("td",{className:"p-2 border-b text-right",children:Zs(he.pricePerPackage)}),i.jsx("td",{className:"p-2 border-b text-right",children:Zs(he.totalExpected)}),i.jsx("td",{className:"p-2 border-b text-right",children:Zs(he.grossProfit)}),i.jsx("td",{className:"p-2 border-b text-right",children:Zs(he.logisticAllocated??he.logisticAllocated??he.gastos??0)}),i.jsx("td",{className:"p-2 border-b text-right",children:Zs(he.uVendor)}),i.jsx("td",{className:"p-2 border-b text-right",children:Zs(Number(he.grossProfit||0)-Number(he.logisticAllocated??he.gastos??0)-Number(he.uVendor||0))}),i.jsx("td",{className:"p-2 border-b text-right",children:d?i.jsxs("span",{children:[Number(he.vendorMarginPercent??Ne(P)).toFixed(2),"%"]}):i.jsx("input",{type:"number",step:"0.01",min:0,className:"w-20 border rounded p-1 text-right",value:String(he.vendorMarginPercent??Ne(P)),onChange:He=>ut(he.id,He.target.value),inputMode:"decimal"})}),i.jsx("td",{className:"p-2 border-b",children:!d&&i.jsx("button",{className:"px-3 py-1.5 rounded bg-red-600 text-white text-xs hover:bg-red-700",onClick:()=>Ze(he.id),children:"Quitar"})})]},he.id)),!ce.length&&i.jsx("tr",{children:i.jsx("td",{className:"p-3 text-sm text-gray-600",colSpan:12,children:"No hay productos asociados."})})]})]})}),i.jsxs("div",{className:"md:hidden p-3 space-y-2",children:[ke.map(([he,He])=>{const Ye=!!ue[he];return i.jsxs("div",{className:"border rounded",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-2 flex items-center justify-between text-sm",onClick:()=>dt(he),children:[i.jsx("span",{className:"font-semibold",children:he}),i.jsxs("span",{className:"text-xs text-gray-600",children:[He.length," ",He.length===1?"producto":"productos"]})]}),Ye&&i.jsx("div",{className:"px-3 pb-3 space-y-2",children:He.map(ct=>i.jsxs("div",{className:"border rounded p-2 text-xs space-y-2",children:[i.jsx("div",{className:"font-semibold text-sm",children:ct.productName}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes"}),d?i.jsx("div",{className:"font-semibold",children:ct.packages}):i.jsx("input",{className:"w-full border rounded p-1 text-right",value:String(ct.packages),onChange:Nt=>tt(ct.id,Nt.target.value),inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:ct.remainingPackages})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Precio/paq"}),i.jsx("div",{className:"font-semibold",children:Zs(ct.pricePerPackage)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"font-semibold",children:Zs(ct.totalExpected)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta"}),i.jsx("div",{className:"font-semibold",children:Zs(ct.grossProfit)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Gastos"}),i.jsx("div",{className:"font-semibold",children:Zs(ct.logisticAllocated??ct.logisticAllocated??ct.gastos??0)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"font-semibold",children:Zs(ct.uVendor)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Neta"}),i.jsx("div",{className:"font-semibold",children:Zs(Number(ct.grossProfit||0)-Number(ct.logisticAllocated??ct.gastos??0)-Number(ct.uVendor||0))})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-gray-600",children:"Margen (%)"}),d?i.jsxs("div",{className:"font-semibold",children:[Number(ct.vendorMarginPercent??Ne(P)).toFixed(2),"%"]}):i.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border rounded p-1 text-right",value:String(ct.vendorMarginPercent??Ne(P)),onChange:Nt=>ut(ct.id,Nt.target.value),inputMode:"decimal"})]}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>Ze(ct.id),children:"Quitar"})]})]},ct.id))})]},he)}),!ce.length&&i.jsx("div",{className:"p-3 text-sm text-gray-600 text-center",children:"No hay productos asociados."})]}),i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Pgina items ",ee," / ",Ve]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:ft,disabled:ee<=1,children:""}),i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:gt,disabled:ee>=Ve,children:""})]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center md:justify-between",children:[i.jsx("div",{className:"text-xs text-gray-600",children:E?i.jsxs(i.Fragment,{children:["Editando: ",i.jsx("b",{children:E})]}):i.jsx(i.Fragment,{children:"Nuevo pedido (an no guardado)"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:ht,children:"Cancelar"}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",onClick:le,children:"Guardar pedido"})]})]}),h&&i.jsx("div",{className:"text-sm text-gray-700",children:h})]})]})})]})}const Dn=t=>Math.max(0,Math.floor(Number(t)||0)),Bb=t=>Math.round(t||0);function lse(t){const e=Math.max(1,Dn(t.unitsPerPackage||1)),r=Dn(t.totalUnits||0),n=Dn(t.quantity||0),a=Dn(t.packages||0);return r>0?r:n>0?n:a>0?a*e:0}function oQe(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):lse(t)}function K$(t){const e=Number(t.remainingPackages);if(Number.isFinite(e))return Math.max(0,Math.floor(e));const r=Math.max(1,Dn(t.unitsPerPackage||1)),n=oQe(t);return Math.max(0,Math.floor(n/r))}function lQe(t){const e=Math.max(1,Dn(t.unitsPerPackage||1)),r=lse(t);return Math.max(0,Math.floor(r/e))}function Tb(t){return String(t??"").trim().toLowerCase().replace(/\s+/g," ")}function vf(t){const e=String(t??"").trim();if(!e)return 0;const r=e.replace(/,/g,"."),n=Number(r);return Number.isFinite(n)?n:0}function mh(t,e){const r={};Object.keys(t||{}).forEach(n=>r[Tb(n)]=t[n]);for(const n of e){const a=r[Tb(n)];if(a!=null&&String(a).trim()!=="")return a}}function Lm(t,e,r){const n=t*e,a=Math.min(Math.max(r.marginR,0),99.9)/100,s=Math.min(Math.max(r.marginSJ,0),99.9)/100,o=Math.min(Math.max(r.marginIsla,0),99.9)/100,l=e>0&&a<1?n/(1-a):n,c=e>0&&s<1?n/(1-s):n,u=e>0&&o<1?n/(1-o):n,d=l-n,f=c-n,A=u-n,h=e>0?Bb(l/e):0,m=e>0?Bb(c/e):0,p=e>0?Bb(u/e):0;return{subtotal:n,totalRivas:l,totalSanJorge:c,totalIsla:u,gainRivas:d,gainSanJorge:f,gainIsla:A,unitPriceRivas:h,unitPriceSanJorge:m,unitPriceIsla:p}}function cQe(t){return Number(t.gainRivas||0)}function uQe(t){return Number(t.gainIsla||0)}function Q5(t,e,r){const n=cQe(t),a=uQe(t),s=Number(t.subtotal||0),o=e>0&&r>0?e*s/r:0;return{...t,grossProfit:n,grossProfitIsla:a,logisticAllocated:o}}function dQe(){const{refreshKey:t,refresh:e}=kc(),[r,n]=x.useState(""),[a,s]=x.useState(!0),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,f]=x.useState([]),[A,h]=x.useState(!1),[m,p]=x.useState([]),[g,v]=x.useState({}),[y,b]=x.useState(!1),[w,j]=x.useState(null),[I,_]=x.useState(""),[S,E]=x.useState(""),[F,P]=x.useState("20"),[k,D]=x.useState("15"),[J,fe]=x.useState("30"),[Ae,me]=x.useState("0"),[pe,ne]=x.useState([]),[Pe,Be]=x.useState(""),[O,G]=x.useState(""),[q,U]=x.useState(""),[Y,Z]=x.useState("1"),[R,H]=x.useState("0"),[te,ye]=x.useState("DATOS"),[Q,Ge]=x.useState(""),[ie,ee]=x.useState(1),Ie=15,ue=x.useMemo(()=>Math.max(1,Math.ceil(m.length/Ie)),[m.length]);x.useEffect(()=>ee(1),[m.length]);const se=x.useMemo(()=>{const W=(ie-1)*Ie;return m.slice(W,W+Ie)},[m,ie]),Ee=x.useMemo(()=>{const W=new Set;for(const Te of d){const Ze=String(Te.category||"").trim();Ze&&W.add(Ze)}return Array.from(W).sort((Te,Ze)=>Te.localeCompare(Ze,"es"))},[d]);x.useEffect(()=>{!Pe&&Ee.length>0&&Be(Ee[0])},[Ee]);const je=async()=>{h(!0);try{const W=await Qt(nr(bt(Oe,"products_candies"),xn("createdAt","desc"))),Te=[];W.forEach(Ze=>{const tt=Ze.data();Te.push({id:Ze.id,name:String(tt.name??"").trim(),category:String(tt.category??"").trim()||"Caramelo",providerPrice:Number(tt.providerPrice??0),unitsPerPackage:Number(tt.unitsPerPackage??1)})}),f(Te)}catch(W){console.error(W),n(" Error cargando catlogo de dulces.")}finally{h(!1)}};x.useEffect(()=>{je()},[t]);const it=x.useMemo(()=>(Pe.trim().length>0?d.filter(Te=>Te.category===Pe):d).sort((Te,Ze)=>Te.name.localeCompare(Ze.name,"es")),[d,Pe]);x.useEffect(()=>{if(!O){U(""),Z("1");return}const W=d.find(Te=>Te.id===O);W&&(U(String(W.providerPrice??0)),Z(String(W.unitsPerPackage??1)))},[O,d]);const At=()=>{j(null),_(""),E(""),ne([]),Be(Ee[0]||""),G(""),U(""),H("0"),Z("1"),P("20"),D("15"),fe("30"),me("0"),ye("DATOS"),Ge("")},pt=()=>{if(n(""),!O){n("Selecciona un producto del catlogo.");return}const W=d.find(re=>re.id===O);if(!W){n("Producto de catlogo no encontrado (refresca).");return}const Te=Number(W.providerPrice||0),Ze=Dn(R||0),tt=Dn(W.unitsPerPackage||0);if(Te<0){n("El precio proveedor no puede ser negativo.");return}if(Ze<=0){n("Los paquetes deben ser mayor que 0.");return}if(tt<=0){n("Las unidades por paquete deben ser mayor que 0.");return}const ut=Number(F||0),T=Number(k||0),M=Number(J||0),L=Lm(Te,Ze,{marginR:ut,marginSJ:T,marginIsla:M});if(pe.find(re=>re.id===W.id))ne(re=>re.map(le=>{if(le.id!==W.id)return le;const Me=Dn(le.packages||0)+Ze,qe=Lm(Te,Me,{marginR:Number(le.marginRivas??ut),marginSJ:Number(le.marginSanJorge??T),marginIsla:Number(le.marginIsla??M)}),Fe=Dn(le.remainingPackages??le.packages)+Ze;return{...le,providerPrice:Te,unitsPerPackage:tt,packages:Me,remainingPackages:Fe,...qe}}));else{const re={id:W.id,name:W.name,category:W.category,providerPrice:Te,packages:Ze,unitsPerPackage:tt,marginRivas:ut,marginSanJorge:T,marginIsla:M,subtotal:L.subtotal,totalRivas:L.totalRivas,totalSanJorge:L.totalSanJorge,totalIsla:L.totalIsla,gainRivas:L.gainRivas,gainSanJorge:L.gainSanJorge,gainIsla:L.gainIsla,unitPriceRivas:L.unitPriceRivas,unitPriceSanJorge:L.unitPriceSanJorge,unitPriceIsla:L.unitPriceIsla,remainingPackages:Ze};ne(le=>[...le,re])}G(""),H("0"),ye("ITEMS")},yt=W=>{ne(Te=>Te.filter(Ze=>Ze.id!==W))},Ct=(W,Te,Ze)=>{ne(tt=>tt.map(ut=>{if(ut.id!==W)return ut;let T={...ut};if(Te==="packages"&&(T.packages=Dn(Ze||0)),Te==="unitsPerPackage"&&(T.unitsPerPackage=Dn(Ze||0)),Te==="marginRivas"&&(T.marginRivas=Number(Ze||0)),Te==="marginIsla"&&(T.marginIsla=Number(Ze||0)),Te==="marginSanJorge"&&(T.marginSanJorge=Number(Ze||0)),Te==="packages"||Te==="marginRivas"||Te==="marginIsla"||Te==="marginSanJorge"){const M=Lm(T.providerPrice,T.packages,{marginR:Number(T.marginRivas||0),marginSJ:Number(T.marginSanJorge||0),marginIsla:Number(T.marginIsla||0)});T={...T,...M}}return(T.remainingPackages===void 0||T.remainingPackages===null)&&(T.remainingPackages=T.packages),T}))},Et=x.useMemo(()=>{const W=pe.reduce((T,M)=>T+Dn(M.packages),0),Te=pe.reduce((T,M)=>T+Number(M.subtotal||0),0),Ze=pe.reduce((T,M)=>T+Number(M.totalRivas||0),0),tt=pe.reduce((T,M)=>T+Number(M.totalSanJorge||0),0),ut=pe.reduce((T,M)=>T+Number(M.totalIsla||0),0);return{totalPackages:W,subtotal:Te,totalRivas:Ze,totalSanJorge:tt,totalIsla:ut}},[pe]),Re=x.useMemo(()=>{const W=Math.max(0,vf(Ae||0)),Te=Number(Et.subtotal||0),Ze=pe.map(M=>Q5(M,W,Te)),tt=Ze.reduce((M,L)=>M+Number(L.grossProfit||0),0),ut=Ze.reduce((M,L)=>M+Number(L.grossProfitIsla||0),0),T=Ze.reduce((M,L)=>M+Number(L.logisticAllocated||0),0);return{items:Ze,logisticsTotal:W,grossTotal:tt,grossIslaTotal:ut,logisticAllocatedTotal:T}},[pe,Ae,Et.subtotal]),We=x.useMemo(()=>{const W=String(Q||"").trim().toLowerCase();return W?Re.items.filter(Te=>{const Ze=String(Te.name||"").toLowerCase(),tt=String(Te.category||"").toLowerCase();return Ze.includes(W)||tt.includes(W)}):Re.items},[Re.items,Q]),[et,xe]=x.useState(1),de=15,Ue=x.useMemo(()=>Math.max(1,Math.ceil(We.length/de)),[We.length]);x.useEffect(()=>xe(1),[We.length]);const Ke=x.useMemo(()=>{const W=(et-1)*de;return We.slice(W,W+de)},[We,et]),[Ne,mt]=x.useState({});x.useEffect(()=>mt({}),[We.length]);const[wt,we]=x.useState({});x.useEffect(()=>{const W={};for(const Te of m)Te&&Te.id&&(W[Te.id]=!1);we(W)},[m]);const ae=x.useMemo(()=>({totalPackages:Et.totalPackages,subtotalCosto:Et.subtotal,esperadoRivas:Et.totalRivas,esperadoIsla:Et.totalIsla,gastosLogisticos:Re.logisticsTotal,utilidadBrutaRivas:Re.grossTotal,utilidadBrutaIsla:Re.grossIslaTotal}),[Et,Re]),be=()=>{if(n(""),!d.length){n(" No hay catlogo cargado para generar plantilla.");return}const W=Number(F||0),Te=Number(J||0),Ze=d.slice().sort((K,re)=>K.name.localeCompare(re.name,"es")).map(K=>({Producto:K.name,Paquetes:"","Margen rivas":W,"Margen Isla":Te,"P. unidad Rivas":"","P. unidad Isla":""})),tt=[{Campo:"Gastos logisticos",Valor:vf(Ae||0)}],ut=Ds.book_new(),T=Ds.json_to_sheet(Ze),M=Ds.json_to_sheet(tt);Ds.book_append_sheet(ut,T,"Productos"),Ds.book_append_sheet(ut,M,"Config");const L=S&&String(S).trim()||new Date().toISOString().slice(0,10);Jk(ut,`plantilla_orden_maestra_${L}.xlsx`)},ve=()=>{if(n(""),!Re.items.length){n(" No hay items para exportar.");return}const W=Re.items.slice().sort((T,M)=>T.name.localeCompare(M.name,"es")).map(T=>({Categora:T.category,Producto:T.name,Paquetes:Dn(T.packages),"Paquetes restantes":Dn(T.remainingPackages??T.packages),"Und x Paquete":Dn(T.unitsPerPackage),"Precio proveedor":Number(T.providerPrice||0),Facturado:Number(T.subtotal||0),"Esperado Rivas":Number(T.totalRivas||0),"Esperado Isla":Number(T.totalIsla||0),"MV Rivas":Number(T.marginRivas||0),"MV Isla":Number(T.marginIsla||0),"Utilidad Bruta":Number(T.grossProfit||0),"Utilidad Bruta Isla":Number(T.grossProfitIsla||0),"Prorrateo logistico":Number(T.logisticAllocated||0),"Precio Rivas":Number(T.unitPriceRivas||0),"Precio Isla":Number(T.unitPriceIsla||0)})),Te=[{KPI:"Paquetes totales",Valor:ae.totalPackages},{KPI:"Subtotal costo",Valor:ae.subtotalCosto},{KPI:"Esperado Rivas",Valor:ae.esperadoRivas},{KPI:"Esperado Isla",Valor:ae.esperadoIsla},{KPI:"Gastos logsticos",Valor:ae.gastosLogisticos},{KPI:"Utilidad Bruta Rivas",Valor:ae.utilidadBrutaRivas},{KPI:"Utilidad Bruta Isla",Valor:ae.utilidadBrutaIsla}],Ze=Ds.book_new();Ds.book_append_sheet(Ze,Ds.json_to_sheet(W),"Productos"),Ds.book_append_sheet(Ze,Ds.json_to_sheet(Te),"Resumen");const tt=S&&String(S).trim()||new Date().toISOString().slice(0,10),ut=I&&String(I).trim()||`Orden_${tt}`;Jk(Ze,`orden_maestra_${ut.replace(/[^\w\-]+/g,"_")}_${tt}.xlsx`)},Ve=x.useRef(null),[ce,ke]=x.useState(!1),dt=()=>{var W;if(!d.length){n(" Catlogo no cargado todava. Esper y prob de nuevo.");return}(W=Ve.current)==null||W.click()},ft=async W=>{var Ze;const Te=(Ze=W.target.files)==null?void 0:Ze[0];if(Te){W.target.value="",ke(!0),n("");try{const tt=await Te.arrayBuffer(),ut=O2(tt,{type:"array"}),T=ut.SheetNames||[],M=ut.Sheets.Productos||ut.Sheets.Plantilla||ut.Sheets[T[0]];if(!M){n(" No se encontr hoja de Productos/Plantilla.");return}const L=Ds.sheet_to_json(M,{defval:""});if(!L.length){n(" El Excel viene vaco.");return}let K=0;const re=ut.Sheets.Config;if(re){const Fe=Ds.sheet_to_json(re,{defval:""}),Xe=new Map;for(const he of Fe){const He=Tb(mh(he,["Campo","Key","Nombre"])??""),Ye=mh(he,["Valor","Value"]);He&&Xe.set(He,Ye)}Xe.has("gastos logisticos")&&(K=Math.max(0,vf(Xe.get("gastos logisticos"))))}else for(const Fe of L){const Xe=mh(Fe,["Gastos","Gasto","Gastos logisticos","Logistica"]),he=vf(Xe);if(he>0){K=he;break}}me(String(K||0));const le=new Map;for(const Fe of d)le.set(Tb(Fe.name),Fe);const Me=[],qe=new Map;for(let Fe=0;Fe<L.length;Fe++){const Xe=L[Fe],he=mh(Xe,["Producto","Product","Nombre","Name"]),He=mh(Xe,["Paquetes","Packages"]),Ye=mh(Xe,["Margen rivas","Margen Rivas","MV Rivas"]),ct=mh(Xe,["Margen Isla","Margen isla","MV Isla"]),Nt=mh(Xe,["P. unidad Rivas","P unidad Rivas","Precio Rivas"]),It=mh(Xe,["P. unidad Isla","P unidad Isla","Precio Isla"]),hr=Tb(he);if(!hr)continue;const Ot=le.get(hr);if(!Ot){Me.push(`Fila ${Fe+2}: Producto no existe en catlogo: "${String(he).trim()}".`);continue}const Ft=Math.floor(vf(He));if(Ft<=0){Me.push(`Fila ${Fe+2}: "Paquetes" invlido para "${Ot.name}".`);continue}const lr=String(Ye??"").trim()!==""?vf(Ye):Number(F||0),ir=String(ct??"").trim()!==""?vf(ct):Number(J||0),Pt=Math.floor(vf(Nt)),mr=Math.floor(vf(It)),Fr=qe.get(Ot.id);Fr?qe.set(Ot.id,{packages:Fr.packages+Ft,mR:lr,mI:ir,puR:Pt>0?Pt:Fr.puR,puI:mr>0?mr:Fr.puI}):qe.set(Ot.id,{packages:Ft,mR:lr,mI:ir,puR:Pt>0?Pt:void 0,puI:mr>0?mr:void 0})}const lt=[];qe.forEach((Fe,Xe)=>{const he=d.find(mr=>mr.id===Xe);if(!he)return;const He=Number(he.providerPrice||0),Ye=Math.max(1,Dn(he.unitsPerPackage||1)),ct=Math.max(1,Dn(Fe.packages)),Nt=He*ct,It=Number(Fe.puR||0),hr=Number(Fe.puI||0),Ot=It>0||hr>0;let Ft=Fe.mR,lr=Fe.mI;const ir=Number(k||0);let Pt;if(Ot){const mr=Lm(He,ct,{marginR:Ft,marginSJ:ir,marginIsla:lr}),Fr=It>0?It*ct:mr.totalRivas,jr=hr>0?hr*ct:mr.totalIsla,Qr=Dr=>{if(!Number.isFinite(Dr)||Dr<=0)return 0;const nn=(1-Nt/Dr)*100;return Math.min(Math.max(nn,0),99.9)};It>0&&(Ft=Qr(Fr)),hr>0&&(lr=Qr(jr)),Pt={subtotal:Nt,totalRivas:Fr,totalSanJorge:mr.totalSanJorge,totalIsla:jr,gainRivas:Fr-Nt,gainSanJorge:mr.gainSanJorge,gainIsla:jr-Nt,unitPriceRivas:ct>0?Bb(Fr/ct):0,unitPriceSanJorge:mr.unitPriceSanJorge,unitPriceIsla:ct>0?Bb(jr/ct):0}}else Pt=Lm(He,ct,{marginR:Ft,marginSJ:ir,marginIsla:lr});lt.push({id:he.id,name:he.name,category:he.category,providerPrice:He,packages:ct,unitsPerPackage:Ye,marginRivas:Ft,marginSanJorge:ir,marginIsla:lr,subtotal:Pt.subtotal,totalRivas:Pt.totalRivas,totalSanJorge:Pt.totalSanJorge,totalIsla:Pt.totalIsla,gainRivas:Pt.gainRivas,gainSanJorge:Pt.gainSanJorge,gainIsla:Pt.gainIsla,unitPriceRivas:Pt.unitPriceRivas,unitPriceSanJorge:Pt.unitPriceSanJorge,unitPriceIsla:Pt.unitPriceIsla,remainingPackages:ct})}),ne(Fe=>{const Xe=new Map;Fe.forEach(he=>Xe.set(he.id,he));for(const he of lt){const He=Xe.get(he.id);if(!He)Xe.set(he.id,he);else{const Ye=Dn(He.packages)+Dn(he.packages),ct=Lm(He.providerPrice,Ye,{marginR:he.marginRivas,marginSJ:Number(He.marginSanJorge||0),marginIsla:he.marginIsla});Xe.set(he.id,{...He,packages:Ye,marginRivas:he.marginRivas,marginIsla:he.marginIsla,remainingPackages:Dn(He.remainingPackages??He.packages)+Dn(he.packages),...ct})}}return Array.from(Xe.values()).sort((he,He)=>he.name.localeCompare(He.name,"es"))}),ye("ITEMS"),Me.length?(n(` Importado con detalles. Errores: ${Me.length}.`),console.warn("Errores import:",Me)):n(` Importacin lista: ${lt.length} productos agregados.`)}catch(tt){console.error(tt),n(" Error importando Excel. Revis hojas: Productos + Config (o Plantilla).")}finally{ke(!1)}}};x.useEffect(()=>{(async()=>{s(!0);try{const W=nr(bt(Oe,"candy_main_orders"),xn("createdAt","desc")),Te=await Qt(W),Ze=[];Te.forEach(T=>{const M=T.data();Ze.push({id:T.id,name:M.name??"",date:M.date??"",totalPackages:Number(M.totalPackages??0),subtotal:Number(M.subtotal??0),totalRivas:Number(M.totalRivas??0),totalSanJorge:Number(M.totalSanJorge??0),totalIsla:Number(M.totalIsla??0),marginRivas:Number(M.marginRivas??20),marginSanJorge:Number(M.marginSanJorge??15),marginIsla:Number(M.marginIsla??30),logisticsCost:Number(M.logisticsCost??0),createdAt:M.createdAt??ur.now()})}),p(Ze);const tt=await Qt(bt(Oe,"inventory_candies")),ut={};tt.forEach(T=>{const M=T.data(),L=M.orderId;if(!L)return;const K=lQe(M),re=K$(M);ut[L]||(ut[L]={orderId:L,totalPackages:0,remainingPackages:0}),ut[L].totalPackages+=K,ut[L].remainingPackages+=re}),v(ut)}catch(W){console.error(W),n(" Error cargando pedidos generales.")}finally{s(!1)}})()},[t]);const gt=W=>{var Te;return W.date?W.date:(Te=W.createdAt)!=null&&Te.toDate?W.createdAt.toDate().toISOString().slice(0,10):""},Rt=async W=>{if(W.preventDefault(),n(""),l(!0),!pe.length){n("Agrega al menos un producto a la orden.");return}try{const Te=new Date().toISOString().slice(0,10),Ze=S||Te,tt=Number(F||0),ut=Number(k||0),T=Number(J||0),M=Math.max(0,vf(Ae||0));for(const Fe of pe){if(!String(Fe.name||"").trim()){n("Hay un producto sin nombre en el pedido.");return}if(Number(Fe.providerPrice||0)<0){n(`El precio proveedor no puede ser negativo (producto: ${Fe.name}).`);return}if(Dn(Fe.packages)<=0){n(`Los paquetes deben ser mayor que 0 (producto: ${Fe.name}).`);return}if(Dn(Fe.unitsPerPackage)<=0){n(`Las unidades por paquete deben ser mayor que 0 (producto: ${Fe.name}).`);return}}const L=Number(Et.subtotal||0),K=pe.map(Fe=>Q5(Fe,M,L)),re={totalPackages:Et.totalPackages,subtotal:Et.subtotal,totalRivas:Et.totalRivas,totalSanJorge:Et.totalSanJorge,totalIsla:Et.totalIsla},le={name:I||`Pedido ${Ze}`,date:Ze,totalPackages:re.totalPackages,subtotal:re.subtotal,totalRivas:re.totalRivas,totalSanJorge:re.totalSanJorge,totalIsla:re.totalIsla,marginRivas:tt,marginSanJorge:ut,marginIsla:T,logisticsCost:M,uBrutaGlobal:Re.grossTotal,items:K};if(w){await pn(zt(Oe,"candy_main_orders",w),{...le});for(const he of K){const He=await Qt(nr(bt(Oe,"inventory_candies"),sr("orderId","==",w),sr("productId","==",he.id))),Ye=Math.max(1,Dn(he.unitsPerPackage||1)),ct=Dn(he.packages)*Ye;if(He.empty)await Bn(bt(Oe,"inventory_candies"),{productId:he.id,productName:he.name,category:he.category,measurement:"unidad",quantity:ct,remaining:ct,packages:Dn(he.packages),remainingPackages:Dn(he.packages),unitsPerPackage:Ye,totalUnits:ct,providerPrice:he.providerPrice,subtotal:he.subtotal,totalRivas:he.totalRivas,totalSanJorge:he.totalSanJorge,totalIsla:he.totalIsla,gainRivas:he.gainRivas,gainSanJorge:he.gainSanJorge,gainIsla:he.gainIsla,unitPriceRivas:he.unitPriceRivas,unitPriceSanJorge:he.unitPriceSanJorge,unitPriceIsla:he.unitPriceIsla,date:Ze,createdAt:ur.now(),status:"PENDIENTE",orderId:w});else for(const Nt of He.docs){const It=Nt.data(),hr=Dn(It.totalUnits??0),Ot=Dn(It.remaining??hr),Ft=ct-hr,lr=Math.max(0,Ot+Ft),ir=Math.max(0,Math.floor(lr/Ye));await pn(zt(Oe,"inventory_candies",Nt.id),{productName:he.name,category:he.category,unitsPerPackage:Ye,totalUnits:ct,quantity:ct,remaining:lr,packages:Dn(he.packages),remainingPackages:ir,providerPrice:he.providerPrice,subtotal:he.subtotal,totalRivas:he.totalRivas,totalSanJorge:he.totalSanJorge,totalIsla:he.totalIsla,gainRivas:he.gainRivas,gainSanJorge:he.gainSanJorge,gainIsla:he.gainIsla,unitPriceRivas:he.unitPriceRivas,unitPriceSanJorge:he.unitPriceSanJorge,unitPriceIsla:he.unitPriceIsla,date:Ze})}}const Fe=await Qt(nr(bt(Oe,"inventory_candies"),sr("orderId","==",w))),Xe=new Set(K.map(he=>he.id));for(const he of Fe.docs){const He=he.data(),Ye=String(He.productId||"");Ye&&!Xe.has(Ye)&&await Pn(zt(Oe,"inventory_candies",he.id))}p(he=>he.map(He=>He.id===w?{...He,name:le.name,date:le.date,totalPackages:le.totalPackages,subtotal:le.subtotal,totalRivas:le.totalRivas,totalSanJorge:le.totalSanJorge,totalIsla:le.totalIsla,marginRivas:le.marginRivas,marginSanJorge:le.marginSanJorge,marginIsla:le.marginIsla,logisticsCost:le.logisticsCost}:He)),n(" Orden maestra actualizada (pedido + inventario)."),At(),b(!1),e();return}const qe=(await Bn(bt(Oe,"candy_main_orders"),{...le,createdAt:ur.now()})).id,lt=Kd(Oe);for(const Fe of K){const Xe=Math.max(1,Dn(Fe.unitsPerPackage||1)),he=Dn(Fe.packages)*Xe,He=zt(bt(Oe,"inventory_candies"));lt.set(He,{productId:Fe.id,productName:Fe.name,category:Fe.category,measurement:"unidad",quantity:he,remaining:he,packages:Dn(Fe.packages),remainingPackages:Dn(Fe.packages),unitsPerPackage:Xe,totalUnits:he,providerPrice:Fe.providerPrice,subtotal:Fe.subtotal,totalRivas:Fe.totalRivas,totalSanJorge:Fe.totalSanJorge,totalIsla:Fe.totalIsla,gainRivas:Fe.gainRivas,gainSanJorge:Fe.gainSanJorge,gainIsla:Fe.gainIsla,unitPriceRivas:Fe.unitPriceRivas,unitPriceSanJorge:Fe.unitPriceSanJorge,unitPriceIsla:Fe.unitPriceIsla,date:Ze,createdAt:ur.now(),status:"PENDIENTE",orderId:qe})}await lt.commit(),n(" Orden maestra creada y registrada en inventario."),At(),b(!1),e()}catch(Te){console.error(Te),n(" Error al guardar orden maestra.")}finally{l(!1)}},ot=async W=>{try{s(!0),n(""),j(W.id),_(W.name),E(W.date),P(String(W.marginRivas??20)),D(String(W.marginSanJorge??15)),fe(String(W.marginIsla??30));const Te=Number(W.logisticsCost??0);me(String(Te||0)),ye("DATOS");const Ze=zt(Oe,"candy_main_orders",W.id),tt=await Ci(Ze);if(!tt.exists()){n(" No se encontr la orden.");return}const ut=tt.data(),T=Array.isArray(ut.items)?ut.items:[],M=await Qt(nr(bt(Oe,"inventory_candies"),sr("orderId","==",W.id))),L={};M.forEach(re=>{const le=re.data(),Me=String(le.productId||"");if(!Me)return;const qe=K$(le);L[Me]=(L[Me]||0)+qe});const K=T.map(re=>{const le=d.find(He=>He.id===re.id),Me=Number((le==null?void 0:le.providerPrice)??re.providerPrice??0),qe=Math.max(1,Dn((le==null?void 0:le.unitsPerPackage)??re.unitsPerPackage??1)),lt=Number(re.marginRivas??0),Fe=Number(re.marginSanJorge??Number(k||0)),Xe=Number(re.marginIsla??0),he=Lm(Me,Dn(re.packages||0),{marginR:lt,marginSJ:Fe,marginIsla:Xe});return{...re,name:String((le==null?void 0:le.name)??re.name??"").trim(),category:String((le==null?void 0:le.category)??re.category??"Caramelo").trim(),providerPrice:Me,unitsPerPackage:qe,remainingPackages:L[re.id]??re.remainingPackages??re.packages??0,...he}});ne(K),b(!0)}catch(Te){console.error(Te),n(" Error al abrir orden maestra.")}finally{s(!1)}},Se=async W=>{if(confirm(`Eliminar la orden "${W.name}" y todo su inventario asociado?`)){n("");try{const Ze=await Qt(nr(bt(Oe,"inventory_candies"),sr("orderId","==",W.id)));for(const tt of Ze.docs)await Pn(zt(Oe,"inventory_candies",tt.id));await Pn(zt(Oe,"candy_main_orders",W.id)),p(tt=>tt.filter(ut=>ut.id!==W.id)),n(" Orden maestra eliminada."),e()}catch(Ze){console.error(Ze),n(" Error al eliminar orden maestra.")}}},ht=async()=>{if(!c)try{u(!0),n("");const W=await Qt(bt(Oe,"candy_main_orders"));let Te=Kd(Oe),Ze=0,tt=0;const ut=(T,M)=>Math.abs(Number(T||0)-Number(M||0))>.01;W.forEach(T=>{const M=T.data(),L=Array.isArray(M.items)?M.items:[];if(!L.length)return;const K=L.reduce((Fe,Xe)=>Fe+Number(Xe.subtotal||0),0);let re=Number(M.logisticsCost??M.gastosLogisticos??M.gastos??0);if(Number.isFinite(re)||(re=0),!re){const Fe=L.reduce((Xe,he)=>Xe+Number(he.logisticAllocated??0),0);re=Number(Fe||0)}const le=L.map(Fe=>Q5(Fe,re,K)),Me=le.reduce((Fe,Xe)=>Fe+Number(Xe.grossProfit||0),0);if(!(ut(M.logisticsCost,re)||ut(M.uBrutaGlobal,Me)||le.some((Fe,Xe)=>{const he=L[Xe]||{};return ut(he.logisticAllocated,Fe.logisticAllocated)||ut(he.grossProfit,Fe.grossProfit)||ut(he.grossProfitIsla,Fe.grossProfitIsla)})))return;const lt=zt(Oe,"candy_main_orders",T.id);Te.update(lt,{logisticsCost:re,uBrutaGlobal:Me,items:le,updatedAt:ur.now()}),Ze+=1,tt+=1,Ze>=400&&(Te.commit(),Te=Kd(Oe),Ze=0)}),Ze>0&&await Te.commit(),n(` Ordenes maestras actualizadas: ${tt}`),e()}catch(W){console.error(W),n(" Error actualizando prorrateo de rdenes maestras.")}finally{u(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes Maestras"})}),i.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i.jsx("div",{}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tc,{onClick:e,loading:a||A}),i.jsx("button",{className:"inline-flex items-center gap-2 bg-gray-200 text-gray-800 px-2 md:px-3 py-2 rounded-2xl hover:bg-gray-300 disabled:opacity-60",onClick:ht,disabled:c,children:c?"Actualizando prorrateo...":"Actualizar prorrateo"}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-2 md:px-3 py-2 rounded-2xl hover:bg-indigo-700 w-full md:w-auto max-w-[220px] justify-center",onClick:()=>{At(),b(!0)},children:[i.jsx("span",{className:"items-center gap-4 inline-block bg-indigo-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nueva Orden"]})]})]}),r&&i.jsx("p",{className:"mt-2 text-sm",children:r})]}),y&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"relative bg-white p-4 md:p-6 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[o&&i.jsx("div",{className:"absolute inset-0 bg-white/70 z-50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white border rounded-xl px-4 py-3 shadow flex items-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-semibold",children:"Guardando orden"})]})}),i.jsxs("div",{className:"sticky top-0 bg-white z-20 pb-3 border-b",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-lg md:text-xl font-bold",children:w?"Editar Orden Maestra":"Nueva Orden Maestra"}),i.jsx("div",{className:"ml-auto flex gap-2",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:o,onClick:()=>{At(),b(!1)},children:"Cerrar"})})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-1 gap-2",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold",children:"Gastos logsticos (orden)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:Ae,onChange:W=>me(W.target.value),placeholder:"0",min:0})]})}),i.jsx("div",{className:"md:hidden mt-3",children:i.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.jsx("button",{type:"button",onClick:()=>ye("DATOS"),className:`px-2 py-2 rounded text-xs font-semibold border ${te==="DATOS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Datos"}),i.jsx("button",{type:"button",onClick:()=>ye("AGREGAR"),className:`px-2 py-2 rounded text-xs font-semibold border ${te==="AGREGAR"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Agregar"}),i.jsxs("button",{type:"button",onClick:()=>ye("ITEMS"),className:`px-2 py-2 rounded text-xs font-semibold border ${te==="ITEMS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:["Items (",pe.length,")"]}),i.jsx("button",{type:"button",onClick:()=>ye("TOTALES"),className:`px-2 py-2 rounded text-xs font-semibold border ${te==="TOTALES"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Totales"})]})})]}),i.jsxs("form",{onSubmit:Rt,className:"space-y-4 pt-4",children:[i.jsx("input",{ref:Ve,type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:ft}),i.jsx("div",{className:`${te==="DATOS"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de Orden"}),i.jsx("input",{className:"w-full border p-2 rounded",value:I,onChange:W=>_(W.target.value),placeholder:"Ej: Pedido enero 19"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:S,onChange:W=>E(W.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Rivas"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:F,onChange:W=>P(W.target.value)})]}),i.jsx("input",{type:"hidden",value:k,readOnly:!0}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Isla Ometepe"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:J,onChange:W=>fe(W.target.value)})]})]})}),i.jsx("div",{className:`${te==="AGREGAR"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora (dinmica)"}),i.jsx("select",{className:"w-full border p-2 rounded",value:Pe,onChange:W=>{Be(W.target.value),G("")},disabled:A,children:Ee.length===0?i.jsx("option",{value:"",children:A?"Cargando...":"No hay categoras en catlogo"}):Ee.map(W=>i.jsx("option",{value:W,children:W},W))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (catlogo)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:O,onChange:W=>G(W.target.value),children:[i.jsx("option",{value:"",children:A?"Cargando catlogo...":"Selecciona producto"}),it.map(W=>i.jsx("option",{value:W.id,children:W.name},W.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor (paq)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:q,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),i.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:R,onChange:W=>H(W.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:Y,readOnly:!0})]})]}),i.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-end gap-2 mt-3",children:i.jsx("button",{type:"button",onClick:pt,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto"})})]})}),i.jsxs("div",{className:"hidden md:flex items-center justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:be,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",title:"Descarga plantilla (Productos + Config)",children:"Descargar plantilla"}),i.jsx("button",{type:"button",onClick:dt,disabled:ce,className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",title:"Importa desde Excel (Productos + Config)",children:ce?"Importando...":"Importar Excel"}),i.jsx("button",{type:"button",onClick:ve,className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",title:"Exporta la orden actual (Productos + Resumen)",children:"Exportar Excel"})]}),i.jsx("div",{className:`${te==="ITEMS"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"mb-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Items:"," ",i.jsx("span",{className:"font-semibold",children:pe.length}),Q.trim()?i.jsxs(i.Fragment,{children:[" "," Mostrando"," ",i.jsx("span",{className:"font-semibold",children:We.length})]}):null]}),i.jsx("input",{value:Q,onChange:W=>Ge(W.target.value),placeholder:"Buscar producto o categora",className:"w-full md:w-80 border rounded px-3 py-2 text-sm"})]}),i.jsxs("div",{className:"hidden md:block",children:[i.jsx("div",{className:"overflow-x-auto border rounded pb-5",children:i.jsxs("table",{className:"min-w-[1400px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2",children:"Categora"}),i.jsx("th",{className:"text-left p-2",children:"Producto"}),i.jsx("th",{className:"text-right p-2",children:"Paquetes"}),i.jsx("th",{className:"text-right p-2",children:"Restantes"}),i.jsx("th",{className:"text-right p-2",children:"Und x Paq"}),i.jsx("th",{className:"text-right p-2",children:"Precio prov"}),i.jsx("th",{className:"text-right p-2",children:"Facturado"}),i.jsx("th",{className:"text-right p-2",children:"Esperado Rivas"}),i.jsx("th",{className:"text-right p-2",children:"Esperado Isla"}),i.jsx("th",{className:"text-right p-2",children:"MV Rivas"}),i.jsx("th",{className:"text-right p-2",children:"MV Isla"}),i.jsx("th",{className:"text-right p-2",children:"U. Bruta Rivas"}),i.jsx("th",{className:"text-right p-2",children:"U. Bruta Isla"}),i.jsx("th",{className:"text-right p-2",children:"Prorrateo"}),i.jsx("th",{className:"text-right p-2",children:"Precio Rivas"}),i.jsx("th",{className:"text-right p-2",children:"Precio Isla"}),i.jsx("th",{className:"text-center p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[Ke.map(W=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:W.category}),i.jsx("td",{className:"p-2 font-semibold",children:W.name}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:W.packages,onChange:Te=>Ct(W.id,"packages",Te.target.value)})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("span",{className:"inline-block min-w-[60px] text-right",children:Dn(W.remainingPackages??W.packages)})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:W.unitsPerPackage,onChange:Te=>Ct(W.id,"unitsPerPackage",Te.target.value)})}),i.jsx("td",{className:"p-2 text-right",children:Number(W.providerPrice||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.subtotal||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.totalRivas||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.totalIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",className:"w-16 border rounded p-1 text-right",value:Number(W.marginRivas??0),onChange:Te=>Ct(W.id,"marginRivas",Te.target.value)})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",className:"w-16 border rounded p-1 text-right",value:Number(W.marginIsla??0),onChange:Te=>Ct(W.id,"marginIsla",Te.target.value)})}),i.jsx("td",{className:"p-2 text-right",children:Number(W.grossProfit||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.grossProfitIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.logisticAllocated||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.unitPriceRivas||0)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.unitPriceIsla||0)}),i.jsx("td",{className:"p-2 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>yt(W.id),children:"Quitar"})})]},W.id)),We.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center text-gray-500",children:"No hay productos en la orden."})})]})]})}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando"," ",Math.min((et-1)*de+1,We.length),"-",Math.min(et*de,We.length)," ","de ",We.length]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:et<=1,onClick:()=>xe(W=>Math.max(1,W-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),i.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[et," / ",Ue]}),i.jsx("button",{type:"button",disabled:et>=Ue,onClick:()=>xe(W=>Math.min(Ue,W+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]}),i.jsx("div",{className:"md:hidden space-y-3",children:We.length===0?i.jsx("div",{className:"p-4 border rounded bg-gray-50 text-gray-600",children:"No hay productos en esta orden."}):We.map(W=>i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-base leading-tight truncate",children:W.name}),i.jsx("div",{className:"text-xs text-gray-500 truncate",children:W.category})]}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>yt(W.id),children:"Quitar"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:W.packages,onChange:Te=>Ct(W.id,"packages",Te.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes restantes"}),i.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:W.remainingPackages??W.packages,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Und x Paquete"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:W.unitsPerPackage,onChange:Te=>Ct(W.id,"unitsPerPackage",Te.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Precio proveedor"}),i.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Number(W.providerPrice||0).toFixed(2),readOnly:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"MV Rivas (%)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:W.marginRivas??0,onChange:Te=>Ct(W.id,"marginRivas",Te.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"MV Isla (%)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:W.marginIsla??0,onChange:Te=>Ct(W.id,"marginIsla",Te.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Facturado"}),i.jsx("div",{className:"font-semibold",children:Number(W.subtotal||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(W.totalRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Isla"}),i.jsx("div",{className:"font-semibold",children:Number(W.totalIsla||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prorrateo logstico"}),i.jsx("div",{className:"font-semibold",children:Number(W.logisticAllocated||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(W.grossProfit||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta Isla"}),i.jsx("div",{className:"font-semibold",children:Number(W.grossProfitIsla||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Precio Rivas (paq)"}),i.jsx("div",{className:"font-semibold",children:W.unitPriceRivas})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Precio Isla (paq)"}),i.jsx("div",{className:"font-semibold",children:W.unitPriceIsla})]})]})]},W.id))})]})}),i.jsxs("div",{className:`${te==="TOTALES"?"block":"hidden"} md:block`,children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"text-lg font-semibold",children:ae.totalPackages})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (facturado)"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(ae.subtotalCosto||0).toFixed(2)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado (Rivas / Isla)"}),i.jsxs("div",{className:"text-sm font-semibold",children:["Rivas: ",Number(ae.esperadoRivas||0).toFixed(2),i.jsx("br",{}),"Isla: ",Number(ae.esperadoIsla||0).toFixed(2)]})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos logsticos"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(ae.gastosLogisticos||0).toFixed(2)})]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Rivas"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(ae.utilidadBrutaRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Isla"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(ae.utilidadBrutaIsla||0).toFixed(2)})]})]}),i.jsx("div",{className:"mt-3 border rounded p-3 bg-white",children:i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ve,disabled:!Re.items.length,title:"Exporta la orden actual (productos + resumen)",children:"Exportar orden a Excel"})})})]})]}),i.jsxs("div",{className:"sticky bottom-0 bg-white pt-3 mt-4 border-t",children:[i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:At,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar orden"}),i.jsx("button",{type:"button",onClick:()=>{At(),b(!1)},className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cerrar"}),i.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:o||pe.length===0,children:o?"Guardando...":"Guardar orden"})]}),i.jsx("div",{className:"md:hidden mt-2",children:i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>{ye(te==="DATOS"&&!w?"AGREGAR":te==="DATOS"||te==="AGREGAR"?"ITEMS":te==="ITEMS"?"TOTALES":"DATOS")},children:"Siguiente"})})]})]})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"md:hidden space-y-3",children:a?i.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Cargando"}):m.length===0?i.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Sin ordenes maestras."}):m.map(W=>{const Te=g[W.id],Ze=gt(W),tt=W.totalPackages>0?(W.subtotal/W.totalPackages).toFixed(2):"0.00",ut=Number(W.logisticsCost||0),T=Number(W.totalRivas||0)-Number(W.subtotal||0);return i.jsxs("div",{className:"border rounded-xl p-3 bg-white shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xs text-gray-500",children:Ze}),i.jsx("div",{className:"font-semibold text-base leading-tight",children:W.name})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-xs",onClick:()=>ot(W),children:"Ver"}),i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>Se(W),children:"Borrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:W.totalPackages})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:Te?Te.remainingPackages:0})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. Proveedor"}),i.jsx("div",{className:"font-semibold",children:tt})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),i.jsx("div",{className:"font-semibold",children:Number(W.subtotal||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Esperado Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(W.totalRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Esperado Isla"}),i.jsx("div",{className:"font-semibold",children:Number(W.totalIsla||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Gastos log."}),i.jsx("div",{className:"font-semibold",children:ut.toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta (est)"}),i.jsx("div",{className:"font-semibold",children:T.toFixed(2)})]})]})]},W.id)})}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:[i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Proveedor"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Esperado Rivas"}),i.jsx("th",{className:"p-2 border",children:"Esperado Isla"}),i.jsx("th",{className:"p-2 border",children:"Gastos log."}),i.jsx("th",{className:"p-2 border",children:"U. Bruta (est)"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin ordenes maestras."})}):se.map(W=>{const Te=g[W.id],Ze=gt(W),tt=W.totalPackages>0?(W.subtotal/W.totalPackages).toFixed(2):"0.00",ut=Number(W.logisticsCost||0),T=Number(W.totalRivas||0)-Number(W.subtotal||0);return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:Ze}),i.jsx("td",{className:"p-2 border text-left",children:W.name}),i.jsx("td",{className:"p-2 border",children:W.totalPackages}),i.jsx("td",{className:"p-2 border",children:Te?Te.remainingPackages:0}),i.jsx("td",{className:"p-2 border",children:tt}),i.jsx("td",{className:"p-2 border",children:Number(W.subtotal||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(W.totalRivas||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(W.totalIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:ut.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:T.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>ot(W),children:"Ver / Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Se(W),children:"Borrar"})]})})]},W.id)})})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",Math.min((ie-1)*Ie+1,m.length),"-",Math.min(ie*Ie,m.length)," de ",m.length]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:ie<=1,onClick:()=>ee(W=>Math.max(1,W-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),i.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[ie," / ",ue]}),i.jsx("button",{type:"button",disabled:ie>=ue,onClick:()=>ee(W=>Math.min(ue,W+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]})]})]})}const n0=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function V5(t){const e=Number(t.packages||0),r=Number(t.providerPrice||0),n=Number(t.unitsPerPackage||0),a=r*e,s=e>0&&n>0?e*n:1,o=Number(t.marginRivas||0),l=Number(t.marginSanJorge||0),c=Number(t.marginIsla||0),u=a*(1+o/100),d=a*(1+l/100),f=a*(1+c/100),A=u-a,h=d-a,m=f-a,p=u/s,g=d/s,v=f/s;return{...t,subtotal:Number(a.toFixed(2)),totalRivas:Number(u.toFixed(2)),totalSanJorge:Number(d.toFixed(2)),totalIsla:Number(f.toFixed(2)),gainRivas:Number(A.toFixed(2)),gainSanJorge:Number(h.toFixed(2)),gainIsla:Number(m.toFixed(2)),unitPriceRivas:Number(p.toFixed(2)),unitPriceSanJorge:Number(g.toFixed(2)),unitPriceIsla:Number(v.toFixed(2))}}function q$(t){return t.reduce((e,r)=>(e.totalPackages+=Number(r.packages||0),e.subtotal+=Number(r.subtotal||0),e.totalRivas+=Number(r.totalRivas||0),e.totalSanJorge+=Number(r.totalSanJorge||0),e.totalIsla+=Number(r.totalIsla||0),e),{totalPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0})}function gc(t,e=0){const r=Number(t);return Number.isFinite(r)?r:e}function H5(t){const{margin:e,gain:r,subtotal:n,orderMargin:a}=t;if(e!=null&&Number.isFinite(Number(e)))return Number(e);const s=Number(n||0),o=Number(r);return Number.isFinite(o)&&s>0?o/s*100:Number(a||0)}function fQe(){var U,Y,Z;const[t,e]=x.useState([]),[r,n]=x.useState({}),[a,s]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState(Ir(af(new Date),"yyyy-MM-dd")),[d,f]=x.useState(Ir(nf(new Date),"yyyy-MM-dd")),[A,h]=x.useState(!1),[m,p]=x.useState(!1),[g,v]=x.useState(null),[y,b]=x.useState([]),[w,j]=x.useState(0),[I,_]=x.useState(0),[S,E]=x.useState(0),[F,P]=x.useState(""),[k,D]=x.useState(""),[J,fe]=x.useState(0),[Ae,me]=x.useState(0),[pe,ne]=x.useState(1);x.useEffect(()=>{(async()=>{try{s(!0),l("");const R=nr(bt(Oe,"candy_main_orders"),xn("createdAt","desc")),H=await Qt(R),te=[];H.forEach(Ge=>{const ie=Ge.data();te.push({id:Ge.id,name:ie.name??"",date:ie.date??"",totalPackages:Number(ie.totalPackages??0),subtotal:Number(ie.subtotal??0),totalRivas:Number(ie.totalRivas??0),totalSanJorge:Number(ie.totalSanJorge??0),totalIsla:Number(ie.totalIsla??0),marginRivas:Number(ie.marginRivas??0),marginSanJorge:Number(ie.marginSanJorge??0),marginIsla:Number(ie.marginIsla??0),createdAt:ie.createdAt??ur.now()})}),e(te);const ye=await Qt(nr(bt(Oe,"inventory_candies"))),Q={};ye.forEach(Ge=>{const ie=Ge.data(),ee=ie.orderId;if(!ee)return;const Ie=Number(ie.unitsPerPackage||1)||1,ue=Number(ie.totalUnits??(ie.packages||0)*Ie),se=Math.round(ue/Ie),Ee=Number(ie.remaining??ie.totalUnits??ue),je=Number(ie.remainingPackages??NaN),it=Number.isFinite(je)?Math.round(je):Math.round(Ee/Ie);Q[ee]||(Q[ee]={orderId:ee,totalPackages:0,remainingPackages:0}),Q[ee].totalPackages+=se,Q[ee].remainingPackages+=it}),n(Q)}catch(R){console.error(R),l(" Error cargando inventario de pedidos.")}finally{s(!1)}})()},[]);const Pe=x.useMemo(()=>t.filter(R=>{var te;const H=R.date||((te=R.createdAt)!=null&&te.toDate?R.createdAt.toDate().toISOString().slice(0,10):"");return!(!H||c&&H<c||d&&H>d)}),[t,c,d]),Be=x.useMemo(()=>{let R=0,H=0,te=0,ye=0,Q=0,Ge=0;for(const ie of Pe){R+=ie.totalPackages,H+=ie.subtotal,te+=ie.totalRivas,ye+=ie.totalSanJorge,Q+=ie.totalIsla;const ee=r[ie.id];ee&&(Ge+=ee.remainingPackages)}return{totalPaquetes:R,totalSubtotal:H,totalRivas:te,totalSJ:ye,totalIsla:Q,totalPaquetesRestantes:Ge,totalPedidos:Pe.length}},[Pe,r]),O=async(R,H,te)=>{if(!g)return;const ye=Number(te||0),Q=y.map(ee=>ee.id!==R?ee:V5({...ee,[H]:ye}));b(Q);const Ge=Q.find(ee=>ee.id===R);if(!Ge)return;const ie=q$(Q);try{await pn(zt(Oe,"products_candies",R),{marginRivas:Ge.marginRivas,marginSanJorge:Ge.marginSanJorge,marginIsla:Ge.marginIsla,subtotal:Ge.subtotal,totalRivas:Ge.totalRivas,totalSanJorge:Ge.totalSanJorge,totalIsla:Ge.totalIsla,unitPriceRivas:Ge.unitPriceRivas,unitPriceSanJorge:Ge.unitPriceSanJorge,unitPriceIsla:Ge.unitPriceIsla,gainRivas:Ge.gainRivas,gainSanJorge:Ge.gainSanJorge,gainIsla:Ge.gainIsla}),await pn(zt(Oe,"candy_main_orders",g.id),{totalPackages:ie.totalPackages,subtotal:Number(ie.subtotal.toFixed(2)),totalRivas:Number(ie.totalRivas.toFixed(2)),totalSanJorge:Number(ie.totalSanJorge.toFixed(2)),totalIsla:Number(ie.totalIsla.toFixed(2))}),v(ee=>ee&&{...ee,totalPackages:ie.totalPackages,subtotal:Number(ie.subtotal.toFixed(2)),totalRivas:Number(ie.totalRivas.toFixed(2)),totalSanJorge:Number(ie.totalSanJorge.toFixed(2)),totalIsla:Number(ie.totalIsla.toFixed(2))}),l(" Mrgenes del producto actualizados.")}catch(ee){console.error(ee),l(" Error actualizando mrgenes del producto.")}},G=async()=>{if(g)try{l("");const R=Number.isFinite(w)&&w!==0?w:g.marginRivas||0,H=Number.isFinite(I)&&I!==0?I:g.marginSanJorge||0,te=Number.isFinite(S)&&S!==0?S:g.marginIsla||0,ye=V5({id:"tmp",name:F.trim(),category:k.trim(),providerPrice:Number(J||0),packages:Number(Ae||0),unitsPerPackage:Number(pe||1),marginRivas:Number(R||0),marginSanJorge:Number(H||0),marginIsla:Number(te||0),subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,gainRivas:0,gainSanJorge:0,gainIsla:0,unitPriceRivas:0,unitPriceSanJorge:0,unitPriceIsla:0,remainingPackages:Number(Ae||0)}),Q=await Bn(bt(Oe,"products_candies"),{orderId:g.id,inventoryDate:g.date||"",name:ye.name,category:ye.category,providerPrice:ye.providerPrice,packages:ye.packages,unitsPerPackage:ye.unitsPerPackage,marginRivas:ye.marginRivas,marginSanJorge:ye.marginSanJorge,marginIsla:ye.marginIsla,gainRivas:ye.gainRivas,gainSanJorge:ye.gainSanJorge,gainIsla:ye.gainIsla,subtotal:ye.subtotal,totalRivas:ye.totalRivas,totalSanJorge:ye.totalSanJorge,totalIsla:ye.totalIsla,unitPriceRivas:ye.unitPriceRivas,unitPriceSanJorge:ye.unitPriceSanJorge,unitPriceIsla:ye.unitPriceIsla,createdAt:ur.now()}),ie=[{...ye,id:Q.id},...y];b(ie);const ee=q$(ie);await pn(zt(Oe,"candy_main_orders",g.id),{totalPackages:ee.totalPackages,subtotal:Number(ee.subtotal.toFixed(2)),totalRivas:Number(ee.totalRivas.toFixed(2)),totalSanJorge:Number(ee.totalSanJorge.toFixed(2)),totalIsla:Number(ee.totalIsla.toFixed(2))}),v(Ie=>Ie&&{...Ie,totalPackages:ee.totalPackages,subtotal:Number(ee.subtotal.toFixed(2)),totalRivas:Number(ee.totalRivas.toFixed(2)),totalSanJorge:Number(ee.totalSanJorge.toFixed(2)),totalIsla:Number(ee.totalIsla.toFixed(2))}),j(0),_(0),E(0),P(""),D(""),fe(0),me(0),ne(1),l(" Producto agregado con mrgenes por sucursal.")}catch(R){console.error(R),l(" Error agregando producto al pedido.")}},q=async R=>{try{v(R),b([]),h(!0),p(!0),l("");const H=await Qt(nr(bt(Oe,"inventory_candies"),sr("orderId","==",R.id))),te={};H.forEach(Ge=>{const ie=Ge.data(),ee=ie.productId;if(!ee)return;const Ie=Number(ie.unitsPerPackage||1)||1,ue=Number(ie.remaining??ie.totalUnits??0),se=Number(ie.remainingPackages??NaN),Ee=Number.isFinite(se)?Math.round(se):Math.round(ue/Ie);te[ee]=(te[ee]||0)+Ee});const ye=await Qt(nr(bt(Oe,"products_candies"),sr("orderId","==",R.id))),Q=[];ye.forEach(Ge=>{const ie=Ge.data(),ee=gc(ie.providerPrice,0),Ie=gc(ie.packages,0),ue=ie.subtotal??ee*Ie,se=H5({margin:ie.marginRivas,gain:ie.gainRivas,subtotal:ue,orderMargin:R.marginRivas||0}),Ee=H5({margin:ie.marginSanJorge,gain:ie.gainSanJorge,subtotal:ue,orderMargin:R.marginSanJorge||0}),je=H5({margin:ie.marginIsla,gain:ie.gainIsla,subtotal:ue,orderMargin:R.marginIsla||0}),it=V5({id:Ge.id,name:ie.name??"",category:ie.category??"",providerPrice:ee,packages:Ie,unitsPerPackage:gc(ie.unitsPerPackage,1),marginRivas:Number(se||0),marginSanJorge:Number(Ee||0),marginIsla:Number(je||0),subtotal:gc(ie.subtotal,0),totalRivas:gc(ie.totalRivas,0),totalSanJorge:gc(ie.totalSanJorge,0),totalIsla:gc(ie.totalIsla,0),gainRivas:gc(ie.gainRivas,0),gainSanJorge:gc(ie.gainSanJorge,0),gainIsla:gc(ie.gainIsla,0),unitPriceRivas:gc(ie.unitPriceRivas,0),unitPriceSanJorge:gc(ie.unitPriceSanJorge,0),unitPriceIsla:gc(ie.unitPriceIsla,0),remainingPackages:te[Ge.id]??gc(ie.packages,0)});Q.push(it)}),b(Q)}catch(H){console.error(H),l(" Error cargando productos del pedido.")}finally{p(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Ordenes Maestras"})}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:R=>u(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:R=>f(R.target.value)})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f("")},children:"Quitar filtro"}),i.jsxs("div",{className:"ml-auto text-xs md:text-sm text-gray-600",children:["Cantidad de pedidos:"," ",i.jsx("span",{className:"font-semibold",children:Be.totalPedidos})]})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes totales:"})," ",Be.totalPaquetes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Be.totalPaquetesRestantes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Subtotal total:"})," ",n0(Be.totalSubtotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Rivas (todo):"})," ",n0(Be.totalRivas)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total San Jorge (todo):"})," ",n0(Be.totalSJ)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Isla (todo):"})," ",n0(Be.totalIsla)]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-2",children:i.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. prom. Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. prom. San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. prom. Isla"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):Pe.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin pedidos generales en este rango."})}):Pe.map(R=>{var ie;const H=R.totalPackages>0?Math.round(R.totalRivas/R.totalPackages):0,te=R.totalPackages>0?Math.round(R.totalSanJorge/R.totalPackages):0,ye=R.totalPackages>0?Math.round(R.totalIsla/R.totalPackages):0,Q=R.date||((ie=R.createdAt)!=null&&ie.toDate?R.createdAt.toDate().toISOString().slice(0,10):""),Ge=r[R.id];return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:Q}),i.jsx("td",{className:"p-2 border",children:R.name}),i.jsx("td",{className:"p-2 border",children:R.totalPackages}),i.jsx("td",{className:"p-2 border",children:Ge?Ge.remainingPackages:0}),i.jsx("td",{className:"p-2 border",children:R.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:H}),i.jsx("td",{className:"p-2 border",children:te}),i.jsx("td",{className:"p-2 border",children:ye}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>q(R),children:"Ver pedido"})})]},R.id)})})]})}),A&&g&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h3",{className:"text-xl font-bold",children:["Detalle: ",g.name]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:()=>{h(!1),v(null),b([]),l("")},children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 text-xs md:text-sm",children:[i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Fecha del pedido"}),i.jsx("div",{className:"font-semibold",children:g.date||((U=g.createdAt)!=null&&U.toDate?g.createdAt.toDate().toISOString().slice(0,10):"")})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"font-semibold",children:((Y=r[g.id])==null?void 0:Y.totalPackages)??g.totalPackages})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes restantes"}),i.jsx("div",{className:"font-semibold",children:((Z=r[g.id])==null?void 0:Z.remainingPackages)??0})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Subtotal (proveedor)"}),i.jsx("div",{className:"font-semibold",children:n0(g.subtotal)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),i.jsx("div",{className:"font-semibold",children:n0(g.totalRivas)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total San Jorge"}),i.jsx("div",{className:"font-semibold",children:n0(g.totalSanJorge)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total Isla"}),i.jsx("div",{className:"font-semibold",children:n0(g.totalIsla)})]})]}),i.jsxs("div",{className:"bg-white border rounded p-3 mb-4",children:[i.jsx("div",{className:"font-semibold mb-2",children:"Agregar producto"}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-end text-xs",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen Rivas"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:w,onChange:R=>j(Number(R.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen SJ"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:I,onChange:R=>_(Number(R.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen Isla"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:S,onChange:R=>E(Number(R.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Producto"}),i.jsx("input",{className:"border rounded px-2 py-1 w-56",value:F,onChange:R=>P(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Categora"}),i.jsx("input",{className:"border rounded px-2 py-1 w-40",value:k,onChange:R=>D(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"P. proveedor (paq)"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-32 text-right",value:J,onChange:R=>fe(Number(R.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Paquetes"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:Ae,onChange:R=>me(Number(R.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Und x Paq"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:pe,onChange:R=>ne(Number(R.target.value||1))})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:G,children:"Agregar producto"})]})]}),i.jsx("h4",{className:"font-semibold mb-2",children:"Productos del pedido"}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Und x Paq"}),i.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),i.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Isla"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Cargando productos"})}):y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Este pedido no tiene productos registrados."})}):y.map(R=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:R.name}),i.jsx("td",{className:"p-2 border",children:R.category}),i.jsx("td",{className:"p-2 border",children:R.packages}),i.jsx("td",{className:"p-2 border",children:R.remainingPackages??R.packages}),i.jsx("td",{className:"p-2 border",children:R.unitsPerPackage}),i.jsx("td",{className:"p-2 border",children:R.providerPrice.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginRivas??0,onChange:H=>O(R.id,"marginRivas",H.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginSanJorge??0,onChange:H=>O(R.id,"marginSanJorge",H.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginIsla??0,onChange:H=>O(R.id,"marginIsla",H.target.value)})}),i.jsx("td",{className:"p-2 border",children:R.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.unitPriceRivas}),i.jsx("td",{className:"p-2 border",children:R.unitPriceSanJorge}),i.jsx("td",{className:"p-2 border",children:R.unitPriceIsla})]},R.id))})]})}),o&&i.jsx("p",{className:"mt-3 text-sm",children:o})]})}),o&&!A&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const Va=t=>Math.round((Number(t)||0)*100)/100,cx=t=>Math.round((Number(t)||0)*1e3)/1e3,Qo=t=>Number(t??0).toFixed(2),Um=t=>Number(t??0).toFixed(3),hQe=(t,e)=>{var h;const r=t.date??((h=t.timestamp)!=null&&h.toDate?Ir(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",o=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0,u=t.processedDate??t.closureDate??"";if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),v=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(v||0)>0&&(y=Va(c*Number(v||0)/l)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:Va(v),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(m==null?void 0:m.allocations)?m.allocations:t.allocations,avgUnitCost:Number((m==null?void 0:m.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((m==null?void 0:m.cogsAmount)??0),type:s,vendorId:o,vendorCommissionAmount:y,processedDate:u||""}});const d=Number(t.packagesTotal??t.quantity??0),f=Number(t.amount??t.amountCharged??t.total??0)||0;let A=0;return A=Va(Number(t.vendorCommissionAmount??0)||0),[{id:e,productName:t.productName??"(sin nombre)",quantity:d,amount:f,amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount,type:s,vendorId:o,vendorCommissionAmount:A,processedDate:u||""}]};function AQe({role:t,currentUserEmail:e,sellerCandyId:r,roles:n}){const[a,s]=x.useState([]),[o,l]=x.useState(null),[c,u]=x.useState(!0),[d,f]=x.useState(""),[A,h]=x.useState("ALL"),m=Ir(new Date,"yyyy-MM-dd"),[p,g]=x.useState(m),[v,y]=x.useState(m),[b,w]=x.useState("ALL"),[j,I]=x.useState(null),[_,S]=x.useState(0),[E,F]=x.useState(0),[P,k]=x.useState(""),[D,J]=x.useState(0),[fe,Ae]=x.useState("0"),me=x.useRef(null),pe=n&&n.length?n:t,ne=!pe||on(pe,"admin"),Pe=on(pe,"vendedor_dulces"),Be=(e||"").trim().toLowerCase(),[O,G]=x.useState([]);x.useEffect(()=>{if(!p||!v)return;u(!0);const de=nr(bt(Oe,"sales_candies"),sr("date",">=",p),sr("date","<=",v),xn("date","asc")),Ue=ad(de,Ke=>{const Ne=[];Ke.forEach(mt=>{const wt=hQe(mt.data(),mt.id);Ne.push(...wt)}),s(Ne),u(!1)},Ke=>{console.error("Error cargando ventas por periodo:",Ke),s([]),u(!1)});return()=>Ue()},[p,v]),x.useEffect(()=>{(async()=>{const Ue=nr(bt(Oe,"daily_closures_candies"),sr("date","==",m)),Ke=await Qt(Ue);if(Ke.empty)l(null);else{const Ne=Ke.docs[0];l({id:Ne.id,...Ne.data()})}})()},[m]),x.useEffect(()=>{(async()=>{try{const Ue=await Qt(bt(Oe,"sellers_candies")),Ke=[];Ue.forEach(Ne=>{const mt=Ne.data();Ke.push({id:Ne.id,name:mt.name||"",commissionPercent:Number(mt.commissionPercent||0)})}),G(Ke)}catch(Ue){console.error("Error cargando sellers_candies",Ue)}})()},[]);const q=de=>Va(Number(de.vendorCommissionAmount??0)||0),U=So.useMemo(()=>{let de=[...a];return A==="FLOTANTE"&&(de=de.filter(Ue=>Ue.status==="FLOTANTE")),A==="PROCESADA"&&(de=de.filter(Ue=>Ue.status==="PROCESADA")),ne&&b!=="ALL"&&(de=de.filter(Ue=>(Ue.vendorId||"")===b)),Pe&&(r?de=de.filter(Ue=>(Ue.vendorId||"")===r):Be?de=de.filter(Ue=>(Ue.sellerEmail||"").toLowerCase()===Be):de=[]),de},[A,a,ne,b,Pe,r,Be]),Y=So.useMemo(()=>U.filter(de=>de.status==="FLOTANTE").length,[U]),Z=So.useMemo(()=>U.filter(de=>de.status==="PROCESADA").length,[U]),R=So.useMemo(()=>U.filter(de=>de.type==="CREDITO").length,[U]),H=So.useMemo(()=>U.filter(de=>de.type!=="CREDITO").length,[U]),te=cx(U.reduce((de,Ue)=>de+(Ue.quantity||0),0)),ye=Va(U.reduce((de,Ue)=>de+Number(Ue.cogsAmount??0),0)),Q=Va(U.reduce((de,Ue)=>de+(Ue.amount||0),0)),Ge=Va(Q-ye);let ie=0,ee=0,Ie=0,ue=0,se=0,Ee=0,je=0;U.forEach(de=>{const Ue=Number(de.amount||0),Ke=Number(de.amountReceived||0),Ne=q(de);se+=Ne,de.type==="CREDITO"?(ie+=de.quantity||0,Ie+=Ue-Ke,je+=Ne):(ee+=de.quantity||0,ue+=Ue,Ee+=Ne)}),Ie=Va(Ie),ue=Va(ue),se=Va(se),Ee=Va(Ee),je=Va(je);const it=So.useMemo(()=>{const de={};for(const Ue of U){const Ke=(Ue.vendorId||"").trim();if(!Ke||Ue.type==="CREDITO")continue;const Ne=q(Ue);if(!de[Ke]){const mt=O.find(wt=>wt.id===Ke);de[Ke]={vendorId:Ke,name:(mt==null?void 0:mt.name)||Ue.userEmail||"(sin vendedor)",total:0}}de[Ke].total=Va(de[Ke].total+Ne)}return Object.values(de).filter(Ue=>Ue.total>0).sort((Ue,Ke)=>Ke.total-Ue.total)},[U,O]),At=So.useMemo(()=>{const de={};for(const Ue of U){const Ke=(Ue.vendorId||"").trim();if(!Ke||Ue.type!=="CREDITO")continue;const Ne=q(Ue);if(!de[Ke]){const mt=O.find(wt=>wt.id===Ke);de[Ke]={vendorId:Ke,name:(mt==null?void 0:mt.name)||Ue.userEmail||"(sin vendedor)",total:0}}de[Ke].total=Va(de[Ke].total+Ne)}return Object.values(de).filter(Ue=>Ue.total>0).sort((Ue,Ke)=>Ke.total-Ue.total)},[U,O]),pt={};U.forEach(de=>{const Ue=de.productName||"(sin nombre)";pt[Ue]||(pt[Ue]={totalQuantity:0,totalAmount:0,totalCommission:0}),pt[Ue].totalQuantity=cx(pt[Ue].totalQuantity+(de.quantity||0)),pt[Ue].totalAmount=Va(pt[Ue].totalAmount+(de.amount||0)),pt[Ue].totalCommission=Va(pt[Ue].totalCommission+q(de))});const yt=Object.entries(pt).map(([de,Ue])=>({productName:de,totalQuantity:Ue.totalQuantity,totalAmount:Ue.totalAmount,totalCommission:Ue.totalCommission})),Ct=async()=>{if(ne)try{const de=U.filter(be=>be.status==="FLOTANTE");if(de.length===0){f("No hay ventas flotantes para procesar en este perodo.");return}const Ue={totalCharged:Va(de.reduce((be,ve)=>be+(ve.amount||0),0)),totalSuggested:Va(de.reduce((be,ve)=>be+(ve.amountSuggested||0),0)),totalUnits:cx(de.reduce((be,ve)=>be+(ve.quantity||0),0)),totalCOGS:Va(de.reduce((be,ve)=>be+Number(ve.cogsAmount??0),0))},Ke=Va(Ue.totalCharged-Ue.totalSuggested),Ne=Va(Ue.totalCharged-Ue.totalCOGS),mt=de.reduce((be,ve)=>{const Ve=Number(ve.quantity||0),ce=Number(ve.amount||0),ke=Number(ve.vendorCommissionAmount||0);return ve.type==="CREDITO"?(be.packsCredit+=Ve,be.amountCredit+=ce,be.comCredit+=ke):(be.packsCash+=Ve,be.amountCash+=ce,be.comCash+=ke),be},{packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0}),wt={totalPacksCash:cx(mt.packsCash),totalPacksCredit:cx(mt.packsCredit),totalAmountCash:Va(mt.amountCash),totalAmountCredit:Va(mt.amountCredit),totalCommissionCash:Va(mt.comCash),totalCommissionCredit:Va(mt.comCredit)},we=await Bn(bt(Oe,"daily_closures_candies"),{date:m,createdAt:ur.now(),periodStart:p,periodEnd:v,totalCharged:Ue.totalCharged,totalSuggested:Ue.totalSuggested,totalDifference:Ke,totalUnits:Ue.totalUnits,totalCOGS:Ue.totalCOGS,grossProfit:Ne,...wt,products:de.map(be=>({productName:be.productName,quantity:be.quantity,amount:be.amount})),sales:de.map(be=>({id:be.id,productName:be.productName,quantity:be.quantity,amount:be.amount,amountSuggested:be.amountSuggested,userEmail:be.userEmail,clientName:be.clientName,amountReceived:be.amountReceived,change:be.change,status:be.status,cogsAmount:be.cogsAmount??0,avgUnitCost:be.avgUnitCost??null,allocations:be.allocations??[],date:be.date,type:be.type??"CONTADO",vendorId:be.vendorId??"",vendorCommissionAmount:Number(be.vendorCommissionAmount??0)||0,processedDate:m})),productSummary:Object.entries(de.reduce((be,ve)=>{const Ve=ve.productName||"(sin nombre)";return be[Ve]||(be[Ve]={totalQuantity:0,totalAmount:0}),be[Ve].totalQuantity=cx(be[Ve].totalQuantity+(ve.quantity||0)),be[Ve].totalAmount=Va(be[Ve].totalAmount+(ve.amount||0)),be},{})).map(([be,ve])=>({productName:be,totalQuantity:ve.totalQuantity,totalAmount:ve.totalAmount}))}),ae=Kd(Oe);de.forEach(be=>{ae.update(zt(Oe,"sales_candies",be.id.split("#")[0]),{status:"PROCESADA",closureId:we.id,closureDate:m,processedDate:m,processedAt:ur.now()})}),await ae.commit(),f(` Cierre guardado. Ventas procesadas: ${de.length}. (Proceso: ${m})`)}catch(de){console.error(de),f(" Error al guardar el cierre de dulces.")}},Et=async de=>{if(ne&&window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await pn(zt(Oe,"sales_candies",de.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null,processedDate:null,processedAt:null}),f(" Venta revertida a FLOTANTE.")}catch(Ue){console.error(Ue),f(" No se pudo revertir la venta.")}},Re=de=>{ne&&(I(de),S(de.quantity),F(de.amount),k(de.clientName),J(de.amountReceived),Ae(de.change))},We=async()=>{if(!(!j||!ne))try{await pn(zt(Oe,"sales_candies",j.id.split("#")[0]),{packagesTotal:_,amount:E,amountCharged:E,clientName:P,amountReceived:D,change:fe}),I(null),f(" Venta de dulces actualizada.")}catch(de){console.error(de),f(" No se pudo actualizar la venta de dulces.")}},et=async de=>{if(ne&&window.confirm("Eliminar esta venta? Se restaurar el stock (paquetes) en los lotes asignados."))try{const{restored:Ue}=await O9e(de.split("#")[0]);f(` Venta eliminada. Stock restaurado (unidades internas): ${Number(Ue).toFixed(2)}.`)}catch(Ue){console.error(Ue),f(" No se pudo eliminar la venta de dulces.")}},xe=async()=>{if(me.current){me.current.classList.add("force-pdf-colors"),me.current.classList.add("pdf-print-mode");try{const Ue=(await yg(me.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),Ke=new Mr;Ke.addImage(Ue,"PNG",10,10,190,0),Ke.save(`cierre_dulces_${p}_a_${v}_proc_${m}.pdf`)}finally{me.current.classList.remove("pdf-print-mode"),me.current.classList.remove("force-pdf-colors")}}};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),i.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas de Dulces - Proceso: ",m]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Desde:"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:p,onChange:de=>g(de.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Hasta:"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:v,onChange:de=>y(de.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Filtrar:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:de=>h(de.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),ne&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Vendedor:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:b,onChange:de=>w(de.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),O.map(de=>i.jsx("option",{value:de.id,children:de.name||de.id},de.id))]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas flotantes"}),i.jsx("div",{className:"text-2xl font-bold",children:Y}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas procesadas"}),i.jsx("div",{className:"text-2xl font-bold",children:Z}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsx("div",{className:"text-2xl font-bold",children:R}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsx("div",{className:"text-2xl font-bold",children:H}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash (perodo)"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Qo(Ee)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito (perodo)"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Qo(je)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CASH del perodo)"}),it.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:it.map(de=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:de.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Qo(de.total)]})]},de.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CRDITO del perodo)"}),At.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:At.map(de=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:de.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Qo(de.total)]})]},de.vendorId))})]})]}),c?i.jsx("p",{children:"Cargando ventas..."}):i.jsxs("div",{ref:me,children:[i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Estado"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Fecha proceso"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[U.map(de=>{const Ue=q(de),Ke=(de.processedDate||"").trim();return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${de.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:de.status})}),i.jsx("td",{className:"border p-1",children:de.productName}),i.jsx("td",{className:"border p-1",children:de.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:Um(de.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Qo(de.amount)]}),i.jsx("td",{className:"border p-1",children:Ue>0?`C$${Qo(Ue)}`:""}),i.jsx("td",{className:"border p-1",children:de.date}),i.jsx("td",{className:"border p-1",children:Ke||""}),i.jsx("td",{className:"border p-1",children:de.userEmail}),i.jsx("td",{className:"border p-1",children:de.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2 justify-center",children:ne?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Re(de),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>et(de.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):de.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2 justify-center",children:ne?i.jsx("button",{onClick:()=>Et(de.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):i.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},de.id)}),U.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden space-y-3 mb-4",children:[U.map(de=>{const Ue=q(de),Ke=(de.processedDate||"").trim();return i.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[i.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:de.productName}),i.jsxs("div",{className:"text-xs text-gray-500",children:[de.type==="CREDITO"?"Crdito":"Cash","  ",de.date]})]}),i.jsxs("div",{className:"text-right shrink-0 ml-3",children:[i.jsxs("div",{className:"font-bold",children:["C$",Qo(de.amount)]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${de.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:de.status})]})]}),i.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes"}),i.jsx("strong",{children:Um(de.quantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("strong",{children:Ue>0?`C$${Qo(Ue)}`:""})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha proceso"}),i.jsx("strong",{children:Ke||""})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("strong",{className:"text-right break-all",children:de.userEmail})]}),i.jsx("div",{className:"pt-2",children:de.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2",children:ne?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Re(de),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>et(de.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):de.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2",children:ne?i.jsx("button",{onClick:()=>Et(de.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},de.id)}),U.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm mb-4",children:[i.jsxs("div",{children:["Total paquetes crdito: ",i.jsx("strong",{children:Um(ie)})]}),i.jsxs("div",{children:["Total paquetes cash: ",i.jsx("strong",{children:Um(ee)})]}),i.jsxs("div",{children:["Total pendiente crdito:"," ",i.jsxs("strong",{children:["C$",Qo(Ie)]})]}),i.jsxs("div",{children:["Total cobrado cash: ",i.jsxs("strong",{children:["C$",Qo(ue)]})]}),i.jsxs("div",{children:["Total comisin: ",i.jsxs("strong",{children:["C$",Qo(se)]})]})]}),(ye>0||Ge!==Q)&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[i.jsxs("div",{children:["Costo total (COGS): ",i.jsxs("strong",{children:["C$",Qo(ye)]})]}),i.jsxs("div",{children:["Ganancia antes de gasto:"," ",i.jsxs("strong",{children:["C$",Qo(Ge)]})]}),i.jsxs("div",{children:["Total paquetes (visibles):"," ",i.jsx("strong",{children:Um(te)})]})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes"}),i.jsx("th",{className:"border p-2",children:"Total dinero"}),i.jsx("th",{className:"border p-2",children:"Comisin"})]})}),i.jsxs("tbody",{children:[yt.map(de=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:de.productName}),i.jsx("td",{className:"border p-1",children:Um(de.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Qo(de.totalAmount)]}),i.jsx("td",{className:"border p-1",children:de.totalCommission>0?`C$${Qo(de.totalCommission)}`:""})]},de.productName)),yt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden space-y-2",children:[yt.map(de=>i.jsxs("div",{className:"border rounded-xl bg-white shadow-sm p-3",children:[i.jsx("div",{className:"font-semibold",children:de.productName}),i.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total paquetes"}),i.jsx("strong",{children:Um(de.totalQuantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total dinero"}),i.jsxs("strong",{children:["C$",Qo(de.totalAmount)]})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("strong",{children:de.totalCommission>0?`C$${Qo(de.totalCommission)}`:""})]})]})]},de.productName)),yt.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin datos para consolidar."})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[ne&&i.jsx("button",{onClick:Ct,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del perodo"}),i.jsx("button",{onClick:xe,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),j&&ne&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta de dulces"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[j.productName,"  ",j.userEmail]}),i.jsx("label",{className:"text-sm",children:"Paquetes"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:_,onChange:de=>S(parseFloat(de.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Monto cobrado"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:de=>F(parseFloat(de.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Cliente"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:P,onChange:de=>k(de.target.value)}),i.jsx("label",{className:"text-sm",children:"Paga con"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:D,onChange:de=>J(parseFloat(de.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Vuelto"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:fe,onChange:de=>Ae(de.target.value)}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{onClick:()=>I(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),i.jsx("button",{onClick:We,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const ph=t=>`C$ ${(Number(t)||0).toFixed(2)}`,Xc=t=>Math.round((Number(t)||0)*100)/100;function mQe(t){if(!t)return"";switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function pQe(t){return t.toISOString().slice(0,10)}function gQe(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`}function xQe(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth()+1,1),r=new Date(e.getTime()-24*60*60*1e3);return pQe(r)}function vQe(){const[t,e]=x.useState(gQe()),[r,n]=x.useState(xQe()),[a,s]=x.useState(!1),[o,l]=x.useState(""),[c,u]=x.useState({}),[d,f]=x.useState({}),[A,h]=x.useState([]),[m,p]=x.useState([]),[g,v]=x.useState({}),[y,b]=x.useState(!1),[w,j]=x.useState(null),[I,_]=x.useState(null),S=x.useMemo(()=>w&&A.find(Ae=>Ae.vendorId===w)||null,[w,A]),E=x.useMemo(()=>{var Ae;return!w||!I?[]:((Ae=g[w])==null?void 0:Ae[I])||[]},[w,I,g]),F=x.useMemo(()=>Xc(A.reduce((Ae,me)=>Ae+(me.totalSoldMoney||0),0)),[A]),P=x.useMemo(()=>Xc(A.reduce((Ae,me)=>Ae+(me.totalCreditMoney||0),0)),[A]);x.useEffect(()=>{(async()=>{try{const Ae=await Qt(bt(Oe,"sellers_candies")),me={};Ae.forEach(Pe=>{const Be=Pe.data(),O=Be.branch||"Rivas";let G="RIVAS";O==="San Jorge"?G="SAN_JORGE":O==="Isla Ometepe"&&(G="ISLA"),me[Pe.id]={id:Pe.id,name:Be.name??"(sin nombre)",branch:G,branchLabel:O,commissionPercent:Number(Be.commissionPercent??0)}});const pe=await Qt(bt(Oe,"products_candies")),ne={};pe.forEach(Pe=>{const Be=Pe.data();ne[Pe.id]={id:Pe.id,name:Be.name??"(sin nombre)"}}),u(me),f(ne)}catch(Ae){console.error(Ae),l(" Error cargando catlogos de vendedores/productos.")}})()},[]);const k=async()=>{if(!t||!r){l("Selecciona rango de fechas vlido.");return}if(!Object.keys(c).length){l("Cargando vendedores, intenta de nuevo en unos segundos.");return}s(!0),l("");try{const Ae={},me={},pe=nr(bt(Oe,"inventory_candies_sellers"),sr("date",">=",t),sr("date","<=",r)),ne=await Qt(pe),Pe={},Be={},O={},G={};ne.forEach(ue=>{var Ve,ce;const se=ue.data(),Ee=se.sellerId||"";if(!Ee)return;const je=se.productId||"",it=se.productName||((Ve=d[je])==null?void 0:Ve.name)||"(sin nombre)",At=Math.max(1,Math.floor(Number(se.unitsPerPackage||1))),pt=Number(se.totalUnits??0),yt=Number(se.packages??0),Ct=Number(se.remainingUnits??se.remaining??0),Et=Number(se.remainingPackages??0),Re=yt>0?yt:pt>0?Math.floor(pt/At):0,We=Et>0?Et:Ct>0?Math.floor(Ct/At):0;Pe[Ee]=(Pe[Ee]||0)+Re,Be[Ee]=(Be[Ee]||0)+We;const et=se.orderId||se.vendorOrderId||se.orderNumber||se.order||ue.id;O[Ee]||(O[Ee]=new Set),O[Ee].add(et);const xe=((ce=c[Ee])==null?void 0:ce.name)||se.sellerName||"(sin vendedor)",de=String(se.date||""),Ue=Number(se.totalVendor??0),Ke=Number(se.gainVendor??0),Ne=yt>0?yt:pt>0?Math.floor(pt/At):0,mt=Ne>0?Ue/Ne:0,wt=Ne>0?Ke/Ne:0,we=Xc(Re*mt),ae=Xc(Re*wt),be=Xc(We*mt),ve=Xc(We*wt);G[Ee]||(G[Ee]={ordered:[],remaining:[]}),Re>0&&G[Ee].ordered.push({date:de,vendorName:xe,productName:it,packages:Re,totalMoney:we,vendorCommission:ae}),We>0&&G[Ee].remaining.push({date:de,vendorName:xe,productName:it,packages:We,totalMoney:be,vendorCommission:ve})});const q={};Object.keys(O).forEach(ue=>{q[ue]=O[ue].size});const U=nr(bt(Oe,"sales_candies"),sr("date",">=",t),sr("date","<=",r)),Y=await Qt(U),Z={},R={},H={},te={},ye={},Q={};Y.forEach(ue=>{const se=ue.data(),Ee=se.date||"",je=se.vendorId||se.sellerId||"";if(!je)return;const it=c[je],At=se.vendorName||(it==null?void 0:it.name)||"(sin vendedor)",pt=Number(se.vendorCommissionPercent??(it==null?void 0:it.commissionPercent)??0)||0,yt=Array.isArray(se.items)?se.items:[];if(!yt.length)return;const Ct=String(se.type||"").toUpperCase()==="CREDITO";ye[je]||(ye[je]={sold:[],credit:[]}),yt.forEach(Et=>{var we;const Re=Et.productName||((we=d[Et.productId||""])==null?void 0:we.name)||"(sin nombre)",We=Et.packages??Et.qty??Et.quantity??0,et=Number(We||0);if(et<=0)return;const xe=Number(Et.unitPricePackage??Et.unitPrice??0)||0,de=Math.max(0,Number(Et.discount||0)),Ue=et*xe,Ke=Xc(Math.max(0,Ue-de));if(Ke<=0)return;console.log("DBG",{isCredit:Ct,vendorId:je,commissionPercent:pt,lineFinal:Ke,storedItemCommission:Number(Et.vendorCommissionAmount??0)});let Ne=0;const mt=Number(Et.vendorCommissionAmount??0);mt?Ne=Xc(mt):pt>0&&(Ne=Xc(Ke*pt/100)),Ct?(R[je]=(R[je]||0)+et,te[je]=(te[je]||0)+Ke):(Z[je]=(Z[je]||0)+et,H[je]=(H[je]||0)+Ke),Ct?me[je]=(me[je]||0)+Ne:Ae[je]=(Ae[je]||0)+Ne,Ct?ye[je].credit.push({date:Ee,vendorName:At,productName:Re,packages:et,totalMoney:Ke,vendorCommission:0}):ye[je].sold.push({date:Ee,vendorName:At,productName:Re,packages:et,totalMoney:Ke,vendorCommission:Ne});const wt=Re;Q[wt]||(Q[wt]={productName:Re,packages:0,totalMoney:0}),Q[wt].packages+=et,Q[wt].totalMoney+=Ke})});const Ge=new Set([...Object.keys(Pe),...Object.keys(Be),...Object.keys(Z),...Object.keys(R)]),ie=[],ee={};Ge.forEach(ue=>{var We,et,xe,de;const se=c[ue],Ee=(se==null?void 0:se.name)||"(sin vendedor)",je=se?se.branchLabel||mQe(se.branch):"",it=Pe[ue]||0,At=Be[ue]||0,pt=Z[ue]||0,yt=R[ue]||0,Ct=Xc(H[ue]||0),Et=Xc(te[ue]||0),Re=q[ue]||0;ie.push({vendorId:ue,vendorName:Ee,branchLabel:je,orderedPackages:it,remainingPackages:At,soldPackages:pt,creditPackages:yt,totalSoldMoney:Ct,totalCreditMoney:Et,ordersCreated:Re,commissionCash:Xc(Ae[ue]||0),commissionCredit:0}),ee[ue]={ordered:(((We=G[ue])==null?void 0:We.ordered)||[]).sort((Ue,Ke)=>Ue.date.localeCompare(Ke.date)),remaining:(((et=G[ue])==null?void 0:et.remaining)||[]).sort((Ue,Ke)=>Ue.date.localeCompare(Ke.date)),sold:(((xe=ye[ue])==null?void 0:xe.sold)||[]).sort((Ue,Ke)=>Ue.date.localeCompare(Ke.date)),credit:(((de=ye[ue])==null?void 0:de.credit)||[]).sort((Ue,Ke)=>Ue.date.localeCompare(Ke.date))}}),ie.sort((ue,se)=>ue.vendorName.localeCompare(se.vendorName,"es")),h(ie),v(ee);const Ie=Object.values(Q).map(ue=>({productName:ue.productName,packages:ue.packages,totalMoney:Xc(ue.totalMoney)})).sort((ue,se)=>se.packages-ue.packages).slice(0,10);p(Ie),ie.length||l("Sin datos para el rango seleccionado.")}catch(Ae){console.error(Ae),l(" Error cargando consolidado de vendedores.")}finally{s(!1)}};x.useEffect(()=>{Object.keys(c).length&&k()},[c]);const D=(Ae,me)=>{j(Ae),_(me),b(!0)},J=()=>{b(!1),j(null),_(null)},fe=()=>{if(!A.length){l("No hay datos para exportar.");return}const Ae=["Vendedor","Sucursal","Paquetes ordenados","Paquetes restantes","Paquetes vendidos","Paquetes fiados","Total vendidos (C$)","Comisin Cash (C$)","Total fiado (C$)","Comisin Crdito (C$)","rdenes creadas"],me=A.map(O=>[O.vendorName,O.branchLabel,O.orderedPackages.toString(),O.remainingPackages.toString(),O.soldPackages.toString(),O.creditPackages.toString(),O.totalSoldMoney.toFixed(2),O.commissionCash.toFixed(2),O.totalCreditMoney.toFixed(2),O.commissionCredit.toFixed(2),O.ordersCreated.toString()]),pe=[Ae,...me].map(O=>O.map(G=>`"${String(G).replace(/"/g,'""')}"`).join(",")).join(`
`),ne=new Blob([pe],{type:"text/csv;charset=utf-8;"}),Pe=URL.createObjectURL(ne),Be=document.createElement("a");Be.href=Pe,Be.download=`consolidado_vendedores_dulces_${t}_a_${r}.csv`,Be.click(),URL.revokeObjectURL(Pe)};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Consolidado por Vendedor - Dulces"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-1",children:"Desde"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:t,onChange:Ae=>e(Ae.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-1",children:"Hasta"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:r,onChange:Ae=>n(Ae.target.value)})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{type:"button",onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",disabled:a,children:a?"Cargando...":"Aplicar filtros"})}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{type:"button",onClick:fe,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Exportar CSV"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm",children:[i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:ph(F)})]}),i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Credito"}),i.jsx("div",{className:"text-xl font-semibold",children:ph(P)})]}),i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Vendedores con Inventario"}),i.jsx("div",{className:"text-xl font-semibold",children:A.length})]})]}),i.jsx("div",{className:"overflow-x-auto mb-6",children:i.jsxs("table",{className:"min-w-full border text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes ordenados"}),i.jsx("th",{className:"border p-2",children:"Paquetes restantes"}),i.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),i.jsx("th",{className:"border p-2",children:"Paquetes fiados"}),i.jsx("th",{className:"border p-2",children:"Total vendidos (C$)"}),i.jsx("th",{className:"border p-2",children:"Comisin Cash (C$)"}),i.jsx("th",{className:"border p-2",children:"Total fiado (C$)"}),i.jsx("th",{className:"border p-2",children:"Comisin Crdito (C$)"}),i.jsx("th",{className:"border p-2",children:"rdenes creadas"})]})}),i.jsxs("tbody",{children:[A.map(Ae=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:Ae.vendorName}),i.jsx("td",{className:"border p-1",children:Ae.branchLabel}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(Ae.vendorId,"ordered"),children:Ae.orderedPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(Ae.vendorId,"remaining"),children:Ae.remainingPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(Ae.vendorId,"sold"),children:Ae.soldPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(Ae.vendorId,"credit"),children:Ae.creditPackages})}),i.jsx("td",{className:"border p-1",children:ph(Ae.totalSoldMoney)}),i.jsx("td",{className:"border p-1",children:ph(Ae.commissionCash)}),i.jsx("td",{className:"border p-1",children:ph(Ae.totalCreditMoney)}),i.jsx("td",{className:"border p-1",children:ph(Ae.commissionCredit)}),i.jsx("td",{className:"border p-1",children:Ae.ordersCreated})]},Ae.vendorId)),A.length===0&&!a&&i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-3 text-center text-gray-500",children:"Sin datos para mostrar."})})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Top 10 productos ms vendidos (paquetes)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-xs shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"#"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),i.jsx("th",{className:"border p-2",children:"Total dinero (C$)"})]})}),i.jsxs("tbody",{children:[m.map((Ae,me)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:me+1}),i.jsx("td",{className:"border p-1",children:Ae.productName}),i.jsx("td",{className:"border p-1",children:Ae.packages}),i.jsx("td",{className:"border p-1",children:ph(Ae.totalMoney)})]},Ae.productName)),m.length===0&&!a&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin productos para mostrar."})})]})]})})]}),o&&i.jsx("p",{className:"mt-2 text-sm text-gray-700",children:o}),y&&I&&w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[95%] max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-lg",children:["Detalle"," ",I==="ordered"?"Paquetes ordenados":I==="remaining"?"Paquetes restantes":I==="sold"?"Paquetes vendidos":"Paquetes fiados"]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[S==null?void 0:S.vendorName,"  ",S==null?void 0:S.branchLabel]})]}),i.jsx("button",{onClick:J,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-sm",children:"Cerrar"})]}),i.jsx("div",{className:"flex-1 overflow-auto p-4",children:i.jsxs("table",{className:"min-w-full border text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Total dinero (C$)"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Comisin vendedor (C$)"})]})}),i.jsxs("tbody",{children:[E.map((Ae,me)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:Ae.date}),i.jsx("td",{className:"border p-1",children:Ae.productName}),i.jsx("td",{className:"border p-1",children:Ae.packages}),i.jsx("td",{className:"border p-1",children:ph(Ae.totalMoney)}),i.jsx("td",{className:"border p-1",children:Ae.vendorName}),i.jsx("td",{className:"border p-1",children:ph(Ae.vendorCommission)})]},me)),E.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin registros para mostrar."})})]})]})})]})})]})}const yl=t=>`C$${Number(t||0).toFixed(2)}`,t_=t=>Number(t||0).toFixed(3),$5=()=>{const t=new Date;return Ir(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},r_=()=>Ir(new Date,"yyyy-MM-dd");function yQe({transactions:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=x.useState([]),o=x.useMemo(()=>{const ae={};return a.forEach(be=>{be.email&&(ae[be.email.trim().toLowerCase()]=be)}),ae},[a]);x.useEffect(()=>{(async()=>{try{const ae=nr(bt(Oe,"sellers_candies"),xn("name","asc")),be=await Qt(ae),ve=[];be.forEach(Ve=>{const ce=Ve.data();ve.push({id:Ve.id,name:ce.name||"",email:ce.email||"",commissionPercent:Number(ce.commissionPercent||0)})}),s(ve)}catch(ae){console.error(ae)}})()},[]);const[l,c]=x.useState($5()),[u,d]=x.useState(r_()),[f,A]=x.useState(""),[h,m]=x.useState(""),p=x.useMemo(()=>{const ae=new Map;return n.forEach(be=>{const ve=be.productId||be.productName;ae.set(ve,{key:ve,name:be.productName})}),Array.from(ae.values()).sort((be,ve)=>be.name.localeCompare(ve.name))},[n]),g=x.useMemo(()=>{const ae=new Map;return n.forEach(be=>{const ve=(be.sellerEmail||"").trim().toLowerCase();if(!ve)return;const Ve=o[ve],ce=(Ve==null?void 0:Ve.name)||be.vendorName||ve;ae.set(ve,{email:ve,label:ce})}),Array.from(ae.values()).sort((be,ve)=>be.label.localeCompare(ve.label))},[n,o]),v=x.useMemo(()=>n.filter(ae=>!(l&&ae.date<l||u&&ae.date>u||f&&(ae.productId||ae.productName)!==f||h&&(ae.sellerEmail||"").trim().toLowerCase()!==h)),[n,l,u,f,h]),[y,b]=x.useState(r_()),[w,j]=x.useState(()=>`FAC-CANDY-${Date.now().toString().slice(-6)}`),[I,_]=x.useState(""),[S,E]=x.useState("0"),[F,P]=x.useState(()=>v.map(ae=>ae.id));x.useEffect(()=>{P(ae=>ae.filter(be=>v.some(ve=>ve.id===be)))},[v]);const[k,D]=x.useState([]),[J,fe]=x.useState([]),[Ae,me]=x.useState(!1),[pe,ne]=x.useState($5()),[Pe,Be]=x.useState(r_());x.useEffect(()=>{(async()=>{try{me(!0);const ae=nr(bt(Oe,"expensesCandies"),xn("date","desc")),be=await Qt(ae),ve=[];be.forEach(Ve=>{const ce=Ve.data();ve.push({id:Ve.id,date:ce.date,description:ce.description,amount:Number(ce.amount||0)})}),D(ve)}catch(ae){console.error(ae)}finally{me(!1)}})()},[]);const O=x.useMemo(()=>k.filter(ae=>!(!ae.date||pe&&ae.date<pe||Pe&&ae.date>Pe)),[k,pe,Pe]),[G,q]=x.useState([]),[U,Y]=x.useState(!1),[Z,R]=x.useState(""),[H,te]=x.useState("DEBITO"),[ye,Q]=x.useState(""),Ge=()=>{const ae=Number(ye);!Z.trim()||!isFinite(ae)||ae<=0||(q(be=>[...be,{id:`${Date.now()}_${be.length+1}`,description:Z.trim(),type:H,amount:Number(ae.toFixed(2))}]),R(""),Q(""))},[ie,ee]=x.useState(null),[Ie,ue]=x.useState(""),[se,Ee]=x.useState("DEBITO"),[je,it]=x.useState(""),At=ae=>{ee(ae.id),ue(ae.description),Ee(ae.type),it(ae.amount.toFixed(2))},pt=()=>{ee(null),ue(""),Ee("DEBITO"),it("")},yt=()=>{if(!ie)return;const ae=Number(je);!isFinite(ae)||ae<=0||(q(be=>be.map(ve=>ve.id===ie?{...ve,description:Ie.trim(),type:se,amount:Number(ae.toFixed(2))}:ve)),pt())},Ct=ae=>{q(be=>be.filter(ve=>ve.id!==ae)),ie===ae&&pt()},Et=(ae,be)=>{P(ve=>be?[...new Set([...ve,ae])]:ve.filter(Ve=>Ve!==ae))},Re=ae=>{P(ae?v.map(be=>be.id):[])},We=(ae,be)=>{fe(ve=>be?[...new Set([...ve,ae])]:ve.filter(Ve=>Ve!==ae))},et=x.useMemo(()=>v.filter(ae=>F.includes(ae.id)),[v,F]),xe=x.useMemo(()=>G.filter(ae=>ae.type==="DEBITO").reduce((ae,be)=>ae+be.amount,0),[G]),de=x.useMemo(()=>G.filter(ae=>ae.type==="CREDITO").reduce((ae,be)=>ae+be.amount,0),[G]),Ue=x.useMemo(()=>{let ae=0,be=0,ve=0,Ve=0;for(const Rt of et){const ot=Number(Rt.packages||0),Se=Number(Rt.cogsAmount||0),ht=Number(Rt.amount||0);ae+=ot,be+=Se,ve+=ht;const W=(Rt.sellerEmail||"").trim().toLowerCase(),Te=o[W],Ze=Number((Te==null?void 0:Te.commissionPercent)||0),tt=ht*Ze/100;Ve+=tt}const ce=O.filter(Rt=>J.includes(Rt.id)).reduce((Rt,ot)=>Rt+Number(ot.amount||0),0),ke=ve-be,dt=ve-ce-xe+de-Ve,ft=Number(S||0),gt=ve*ft/100;return{totalPackages:Number(t_(ae)),totalProvider:Number(be.toFixed(2)),totalSale:Number(ve.toFixed(2)),totalGastos:Number(ce.toFixed(2)),debits:Number(xe.toFixed(2)),credits:Number(de.toFixed(2)),grossProfit:Number(ke.toFixed(2)),finalAmount:Number(dt.toFixed(2)),totalCommissionVendors:Number(Ve.toFixed(2)),branchProfit:Number(gt.toFixed(2)),branchFactor:ft}},[et,O,J,xe,de,o,S]),[Ke,Ne]=x.useState(!1),[mt,wt]=x.useState(""),we=async()=>{if(wt(""),et.length===0){wt("Selecciona al menos 1 transaccin procesada.");return}try{Ne(!0);const ae={number:w.trim(),date:y,description:I.trim(),status:"PENDIENTE",createdAt:ur.now(),totalPackages:Ue.totalPackages,totalProvider:Ue.totalProvider,totalSale:Ue.totalSale,totalExpenses:Ue.totalGastos,totalDebits:Ue.debits,totalCredits:Ue.credits,grossProfit:Ue.grossProfit,totalCommissionVendors:Ue.totalCommissionVendors,branchFactorPercent:Ue.branchFactor,branchProfit:Ue.branchProfit,finalAmount:Ue.finalAmount,transactions:et.map(be=>{const ve=Number(be.packages||0)||1,Ve=Number(be.cogsAmount||0),ce=Number(be.amount||0),ke=Ve/ve,dt=ce/ve,ft=(be.sellerEmail||"").trim().toLowerCase(),gt=o[ft],Rt=Number((gt==null?void 0:gt.commissionPercent)||0),ot=ce*Rt/100;return{id:be.id,date:be.date,productId:be.productId||null,productName:be.productName,vendorName:be.vendorName,sellerEmail:be.sellerEmail||null,packages:Number(t_(be.packages)),providerPricePack:Number(ke.toFixed(4)),salePricePack:Number(dt.toFixed(4)),totalProvider:Number(Ve.toFixed(2)),totalSale:Number(ce.toFixed(2)),commissionPercent:Rt,commissionAmount:Number(ot.toFixed(2))}}),expenses:O.filter(be=>J.includes(be.id)).map(be=>({id:be.id,date:be.date||null,description:be.description||"",amount:Number(Number(be.amount||0).toFixed(2))})),adjustments:G.map(be=>({id:be.id,description:be.description,type:be.type,amount:Number(be.amount.toFixed(2))}))};await Bn(bt(Oe,"invoicesCandies"),ae),wt(" Factura de dulces creada."),r()}catch(ae){console.error(ae),wt(` Error al crear factura: ${(ae==null?void 0:ae.message)||"desconocido"}`)}finally{Ne(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura CandyShop"}),i.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y,onChange:ae=>b(ae.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:ae=>j(ae.target.value),placeholder:"FAC-CANDY-001"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Factor sucursal (%)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:S,onChange:ae=>E(ae.target.value),placeholder:"Ej: 30"}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Se aplica sobre el total de ventas para calcular la ganancia de sucursal."})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:I,onChange:ae=>_(ae.target.value),placeholder:"Comentarios de la factura"})]})]}),i.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:i.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Desde (transaccin)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:ae=>c(ae.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Hasta (transaccin)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ae=>d(ae.target.value)})]}),i.jsxs("div",{className:"min-w-[180px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:f,onChange:ae=>A(ae.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),p.map(ae=>i.jsx("option",{value:ae.key,children:ae.name},ae.key))]})]}),i.jsxs("div",{className:"min-w-[180px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Vendedor"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:h,onChange:ae=>m(ae.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),g.map(ae=>i.jsx("option",{value:ae.email,children:ae.label},ae.email))]})]}),i.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c($5()),d(r_()),A(""),m("")},children:"Quitar filtro"})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Transacciones procesadas"}),i.jsxs("label",{className:"text-sm flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:v.length>0&&F.length===v.length,onChange:ae=>Re(ae.target.checked)}),"Seleccionar todas (sobre el filtro)"]})]}),v.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay transacciones procesadas en el filtro actual."}):i.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total proveedor"}),i.jsx("th",{className:"p-2 border",children:"Total venta"}),i.jsx("th",{className:"p-2 border",children:"Comisin venta"})]})}),i.jsx("tbody",{children:v.map(ae=>{const be=F.includes(ae.id),ve=Number(ae.packages||0)||1,Ve=Number(ae.cogsAmount||0),ce=Number(ae.amount||0),ke=Ve/ve,dt=ce/ve,ft=(ae.sellerEmail||"").trim().toLowerCase(),gt=o[ft],Rt=Number((gt==null?void 0:gt.commissionPercent)||0),ot=ce*Rt/100;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:be,onChange:Se=>Et(ae.id,Se.target.checked)})}),i.jsx("td",{className:"p-2 border",children:ae.date}),i.jsx("td",{className:"p-2 border",children:(gt==null?void 0:gt.name)||ae.vendorName}),i.jsx("td",{className:"p-2 border",children:ae.productName}),i.jsx("td",{className:"p-2 border",children:t_(ae.packages)}),i.jsx("td",{className:"p-2 border",children:yl(ke)}),i.jsx("td",{className:"p-2 border",children:yl(dt)}),i.jsx("td",{className:"p-2 border",children:yl(Ve)}),i.jsx("td",{className:"p-2 border",children:yl(ce)}),i.jsx("td",{className:"p-2 border",children:Rt>0?`${yl(ot)} (${Rt.toFixed(2)}%)`:""})]},ae.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),Ae&&i.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),i.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:pe,onChange:ae=>ne(ae.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:Pe,onChange:ae=>Be(ae.target.value)})]})]})]}),O.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):i.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:O.map(ae=>{const be=J.includes(ae.id);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:be,onChange:ve=>We(ae.id,ve.target.checked)})}),i.jsx("td",{className:"p-2 border",children:ae.date||""}),i.jsx("td",{className:"p-2 border",children:ae.description||""}),i.jsx("td",{className:"p-2 border",children:yl(Number(ae.amount||0))})]},ae.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),i.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Y(!0),children:"Crear Cargo"})]}),G.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):i.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:G.map(ae=>{const be=ie===ae.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:be?i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:Ie,onChange:ve=>ue(ve.target.value)}):i.jsx("span",{title:ae.description,children:ae.description.length>60?`${ae.description.slice(0,60)}`:ae.description})}),i.jsx("td",{className:"p-2 border",children:be?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:se,onChange:ve=>Ee(ve.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ae.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ae.type})}),i.jsx("td",{className:"p-2 border",children:be?i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:je,onChange:ve=>it(ve.target.value)}):yl(ae.amount)}),i.jsx("td",{className:"p-2 border",children:be?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:yt,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:pt,children:"Cancelar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Ct(ae.id),children:"Eliminar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>At(ae),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Ct(ae.id),children:"Eliminar"})]})})]},ae.id)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[i.jsx("div",{className:"space-y-1",children:i.jsxs("div",{children:["Total paquetes: ",i.jsx("strong",{children:t_(Ue.totalPackages)})]})}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total proveedor (costo):"," ",i.jsx("strong",{children:yl(Ue.totalProvider)})]}),i.jsxs("div",{children:["Total venta: ",i.jsx("strong",{children:yl(Ue.totalSale)})]}),i.jsxs("div",{children:["Ganancia bruta (venta  costo):"," ",i.jsx("strong",{children:yl(Ue.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:yl(Ue.totalGastos)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:yl(Ue.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:yl(Ue.credits)})]}),i.jsxs("div",{children:["Comisin total vendedores:"," ",i.jsx("strong",{children:yl(Ue.totalCommissionVendors)})]}),i.jsxs("div",{children:["Ganancia sucursal (ventas  factor):"," ",i.jsx("strong",{children:yl(Ue.branchProfit)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (ventas  gastos  dbitos + crditos  comisin vendedores):"," ",i.jsx("span",{className:"text-blue-700",children:yl(Ue.finalAmount)})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{disabled:Ke,onClick:we,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Ke?"Creando":"Crear factura"}),i.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),mt&&i.jsx("span",{className:"text-sm ml-2",children:mt})]}),Ke&&i.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),U&&i.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg_WHITE w-full max-w-lg rounded-xl shadow-xl p-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),i.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>Y(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:Z,onChange:ae=>R(ae.target.value),placeholder:"Detalle del cargo"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:H,onChange:ae=>te(ae.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:ye,onChange:ae=>Q(ae.target.value),placeholder:"0.00"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Ge,children:"Agregar"})})]})]})})]})}const wa=t=>`C$ ${Number(t??0).toFixed(2)}`,n_=t=>Number(t??0).toFixed(3);function G5(t){const e=t.transactions||[];let r=Number(t.totalPackages??0),n=Number(t.totalProvider??0),a=Number(t.totalSale??0),s=Number(t.totalCommissionVendors??0);if(e.length>0&&(a===0||r===0)){r=0,n=0,a=0,s=0;for(const v of e){const y=Number(v.packages??0);r+=y,n+=Number(v.totalProvider??y*(v.providerPricePack??0)),a+=Number(v.totalSale??y*(v.salePricePack??0));const b=v.commissionAmount??Number(v.totalSale??0)*Number(v.commissionPercent??0)/100;s+=Number(b||0)}}const o=t.expenses||[],l=t.adjustments||[],c=t.totalExpenses!==void 0?Number(t.totalExpenses):o.reduce((v,y)=>v+Number(y.amount||0),0),u=l.filter(v=>v.type==="DEBITO").reduce((v,y)=>v+Number(y.amount||0),0),d=l.filter(v=>v.type==="CREDITO").reduce((v,y)=>v+Number(y.amount||0),0),f=t.totalDebits!==void 0?Number(t.totalDebits):u,A=t.totalCredits!==void 0?Number(t.totalCredits):d,h=a-n,m=Number(t.branchFactorPercent??0),p=t.branchProfit!==void 0?Number(t.branchProfit):Number((h*m/100).toFixed(2)),g=t.finalAmount!==void 0?Number(t.finalAmount):a-s-c-f+A;return{totalPackages:r,totalProvider:n,totalSale:a,commissionTotal:s,expenses:c,debits:f,credits:A,grossProfit:h,branchProfit:p,finalAmount:g}}function z$(t){const e=t.transactions||[];if(e.length===0)return"";const r=Array.from(new Set(e.map(n=>n.vendorName||"Sin nombre")));return r.length===1?r[0]:"Varios"}function bQe(){const[t,e]=x.useState([]),[r,n]=x.useState(!0),[a,s]=x.useState(null),o=x.useRef(null),[l,c]=x.useState(!1),u=async()=>{n(!0);const h=nr(bt(Oe,"invoicesCandies"),xn("date","desc")),m=await Qt(h),p=[];m.forEach(g=>{const v=g.data();p.push({id:g.id,date:v.date,number:v.number,description:v.description,status:v.status||"PENDIENTE",totalPackages:v.totalPackages||0,totalProvider:v.totalProvider||0,totalSale:v.totalSale||0,totalExpenses:v.totalExpenses||0,totalDebits:v.totalDebits||0,totalCredits:v.totalCredits||0,totalCommissionVendors:v.totalCommissionVendors||0,finalAmount:v.finalAmount||0,branchFactorPercent:v.branchFactorPercent||0,branchProfit:v.branchProfit||0,transactions:(v.transactions||[]).map(y=>({id:y.id,date:y.date,vendorId:y.vendorId||null,vendorName:y.vendorName||"Sin nombre",sellerEmail:y.sellerEmail||null,productId:y.productId,productName:y.productName||"Sin nombre",packages:Number(y.packages||0),providerPricePack:Number(y.providerPricePack||0),salePricePack:Number(y.salePricePack||0),totalProvider:Number(y.totalProvider||0),totalSale:Number(y.totalSale||0),commissionPercent:Number(y.commissionPercent||0),commissionAmount:Number(y.commissionAmount||0)})),expenses:(v.expenses||[]).map(y=>({id:y.id,description:y.description||"",date:y.date||null,amount:Number(y.amount||0)})),adjustments:(v.adjustments||[]).map(y=>({id:y.id,description:y.description||"",type:y.type||"DEBITO",amount:Number(y.amount||0)}))})}),e(p),n(!1)};x.useEffect(()=>{u()},[]);const d=async h=>{const m=h.status==="PAGADA"?"PENDIENTE":"PAGADA";await pn(zt(Oe,"invoicesCandies",h.id),{status:m}),e(p=>p.map(g=>g.id===h.id?{...g,status:m}:g)),(a==null?void 0:a.id)===h.id&&s({...h,status:m})},f=async h=>{if(window.confirm(`Eliminar factura del ${h.date}?`))try{await Pn(zt(Oe,"invoicesCandies",h.id)),e(m=>m.filter(p=>p.id!==h.id)),(a==null?void 0:a.id)===h.id&&s(null)}catch(m){console.error(m),alert("No se pudo eliminar la factura.")}},A=async()=>{if(!o.current||!a)return;const h=o.current,m=await yg(h,{backgroundColor:"#ffffff",onclone:b=>{const w=b.body;w.style.background="#ffffff",w.querySelectorAll("*").forEach(j=>{const I=b.defaultView.getComputedStyle(j);I.boxShadow&&I.boxShadow!=="none"&&(j.style.boxShadow="none")})},scale:2}),p=m.toDataURL("image/png"),g=new Mr("p","mm","a4"),v=g.internal.pageSize.getWidth(),y=m.height*v/m.width;g.addImage(p,"PNG",0,0,v,y),g.save(`factura_candy_${a.number||a.date}.pdf`)};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[i.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Facturacin CandyShop"}),i.jsx("button",{className:"ml-auto bg-blue-600 text-white px-4 py-2 rounded-2xl hover:bg-blue-700 text-sm",onClick:()=>c(!0),children:"Crear factura Candy"})]}),l&&i.jsx(yQe,{onClose:()=>c(!1),onCreated:()=>{c(!1),u()}}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"N factura"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sub total (sin gastos/ajustes)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Gastos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Dbitos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Crditos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Estado"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin facturas"})}):t.map(h=>{const m=G5(h),p=z$(h);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.number||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:p}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:wa(m.commissionTotal)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:n_(m.totalPackages)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:wa(m.totalSale)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:wa(m.expenses)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:wa(m.debits)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:wa(m.credits)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:wa(m.finalAmount)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:h.status})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(h),children:"Ver"}),i.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>d(h),children:h.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>f(h),children:"Eliminar"})]})})]},h.id)})})]})}),a&&i.jsxs("div",{ref:o,className:"bg-white p-4 rounded shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),i.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),i.jsx("button",{onClick:A,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const h=G5(a),m=z$(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Vendedor:"})," ",m]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes:"})," ",n_(h.totalPackages)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total proveedor:"})," ",wa(h.totalProvider)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Sub total ventas:"})," ",wa(h.totalSale)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia bruta:"})," ",wa(h.grossProfit)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Comisin vendedores:"})," ",wa(h.commissionTotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",wa(h.expenses)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",wa(h.debits)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",wa(h.credits)]})]})]})})(),i.jsx("h4",{className:"font-semibold mb-1",children:"Transacciones"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total venta"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin venta"})]})}),i.jsx("tbody",{children:(a.transactions||[]).length>0?(a.transactions||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.productName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:n_(h.packages)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:wa(h.providerPricePack)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:wa(h.salePricePack)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:wa(h.totalProvider)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:wa(h.totalSale)}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[wa(h.commissionAmount||0),h.commissionPercent?` (${h.commissionPercent.toFixed(2)}%)`:""]})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin transacciones"})})})]})}),i.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"})]})}),i.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.description||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:wa(h.amount)})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin gastos"})})})]})}),i.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo de cargo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"})]})}),i.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.description}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:h.type})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:wa(h.amount)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:a.date})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin cargos extras"})})})]})}),(()=>{const h=G5(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total paquetes: ",i.jsx("strong",{children:n_(h.totalPackages)})]}),i.jsxs("div",{children:["Total proveedor: ",i.jsx("strong",{children:wa(h.totalProvider)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Sub total ventas: ",i.jsx("strong",{children:wa(h.totalSale)})]}),i.jsxs("div",{children:["Ganancia bruta: ",i.jsx("strong",{children:wa(h.grossProfit)})]}),i.jsxs("div",{children:["Ganancia sucursal: ",i.jsx("strong",{children:wa(h.branchProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Comisin vendedores:"," ",i.jsx("strong",{children:wa(h.commissionTotal)})]}),i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:wa(h.expenses)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:wa(h.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:wa(h.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[i.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Total (sub total  comisin  gastos  dbitos + crditos):"}),i.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:wa(h.finalAmount)})]})})]})})()]})]})}const gs=t=>Math.round((Number(t)||0)*100)/100,a0=t=>Math.round((Number(t)||0)*1e3)/1e3,Gi=t=>Number(t??0).toFixed(2),gh=t=>Number(t??0).toFixed(3),wQe=(t,e)=>{var A;const r=t.date??((A=t.timestamp)!=null&&A.toDate?Ir(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",o=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0;if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((h,m)=>{const p=Number((h==null?void 0:h.packages)??(h==null?void 0:h.qty)??(h==null?void 0:h.quantity)??0),g=Number((h==null?void 0:h.lineFinal)??0)||Math.max(0,Number((h==null?void 0:h.unitPricePackage)||(h==null?void 0:h.unitPrice)||0)*p-Number((h==null?void 0:h.discount)||0));let v=0;return c>0&&l>0&&Number(g||0)>0&&(v=gs(c*Number(g||0)/l)),{id:`${e}#${m}`,productName:String((h==null?void 0:h.productName)??"(sin nombre)"),quantity:p,amount:gs(g),date:r,type:s,vendorId:o,userEmail:a,vendorCommissionAmount:v}});const u=Number(t.packagesTotal??t.quantity??0),d=Number(t.amount??t.amountCharged??t.total??0)||0,f=gs(Number(t.vendorCommissionAmount??0)||0);return[{id:e,productName:String((t==null?void 0:t.productName)??"(sin nombre)"),quantity:u,amount:gs(d),date:r,type:s,vendorId:o,userEmail:a,vendorCommissionAmount:f}]};function NQe({role:t,roles:e,currentUserEmail:r,sellerCandyId:n}){const a=e&&e.length?e:t,s=!a||on(a,"admin"),o="daily_closures_candies",l="sales_candies",c="sellers_candies",[u,d]=x.useState(Ir(mee(new Date),"yyyy-MM-dd")),[f,A]=x.useState(Ir(new Date,"yyyy-MM-dd")),[h,m]=x.useState(!0),[p,g]=x.useState([]),[v,y]=x.useState(null),[b,w]=x.useState(""),[j,I]=x.useState([]),[_,S]=x.useState("ALL"),[E,F]=x.useState({}),P=x.useRef(null);if(!s)return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Liquidaciones"}),i.jsx("p",{className:"text-sm text-red-600",children:"Acceso denegado: solo admin."})]});const k=async()=>{try{const Z=await Qt(bt(Oe,c)),R=[];Z.forEach(H=>{const te=H.data();R.push({id:H.id,name:te.name||"",commissionPercent:Number(te.commissionPercent||0)})}),I(R)}catch(Z){console.error("Error cargando sellers_candies",Z)}},D=async()=>{const Z=performance.now();try{m(!0);const R=nr(bt(Oe,o),sr("date",">=",u),sr("date","<=",f)),H=await Qt(R),te=performance.now();console.log(" getDocs ms:",(te-Z).toFixed(1),"docs:",H.size);const ye=[];H.forEach(ee=>ye.push({id:ee.id,...ee.data()}));const Q=performance.now();console.log(" parse+set ms:",(Q-te).toFixed(1),"rows:",ye.length),ye.sort((ee,Ie)=>ee.date<Ie.date?1:ee.date>Ie.date?-1:0),g(ye),y(null);const Ge=new Set;ye.forEach(ee=>{(ee.sales||[]).forEach(Ie=>{const ue=String((Ie==null?void 0:Ie.id)??"").split("#")[0].trim();ue&&Ge.add(ue)})});const ie=Array.from(Ge).filter(ee=>!E[ee]);if(ie.length>0){const ee={};for(const Ie of ie)try{const ue=await Ci(zt(Oe,l,Ie));if(ue.exists()){const se=ue.data();ee[Ie]=wQe(se,Ie)}else ee[Ie]=[]}catch(ue){console.error("Error leyendo sale",Ie,ue),ee[Ie]=[]}F(Ie=>({...Ie,...ee}))}}catch(R){console.error(R),w(" Error cargando liquidaciones.")}finally{m(!1)}};x.useEffect(()=>{k()},[]),x.useEffect(()=>{D()},[]);const J=async Z=>{Z.preventDefault(),await D()},fe=x.useMemo(()=>{const Z={};return j.forEach(R=>Z[R.id]=R.name||R.id),Z},[j]),Ae=Z=>{const R=[];return(Z.sales||[]).forEach(H=>{const te=String((H==null?void 0:H.id)??"").trim();if(!te)return;const ye=te.split("#")[0],Ge=(E[ye]||[]).find(ie=>ie.id===te);Ge?R.push(Ge):R.push({id:te,productName:String((H==null?void 0:H.productName)??"(sin nombre)"),quantity:Number((H==null?void 0:H.quantity)??0),amount:gs(Number((H==null?void 0:H.amount)??0)),date:String((H==null?void 0:H.date)??""),type:"CONTADO",vendorId:"",userEmail:String((H==null?void 0:H.userEmail)??"(sin vendedor)"),vendorCommissionAmount:0})}),R},me=Z=>_==="ALL"?Z:Z.filter(R=>(R.vendorId||"")===_),pe=x.useMemo(()=>p.map(Z=>{const R=me(Ae(Z));let H=0,te=0,ye=0,Q=0,Ge=0,ie=0;for(const ee of R){const Ie=Number(ee.quantity||0),ue=Number(ee.amount||0),se=Number(ee.vendorCommissionAmount||0);ee.type==="CREDITO"?(te+=Ie,Q+=ue,ie+=se):(H+=Ie,ye+=ue,Ge+=se)}return{...Z,_sales:R,_packsCash:a0(H),_packsCredit:a0(te),_amountCash:gs(ye),_amountCredit:gs(Q),_comCash:gs(Ge),_comCredit:gs(ie)}}),[p,E,_]),ne=x.useMemo(()=>{let Z=0,R=0,H=0,te=0,ye=0,Q=0;for(const Ge of pe)Z+=Number(Ge._packsCash||0),R+=Number(Ge._packsCredit||0),H+=Number(Ge._amountCash||0),te+=Number(Ge._amountCredit||0),ye+=Number(Ge._comCash||0),Q+=Number(Ge._comCredit||0);return{packsCash:a0(Z),packsCredit:a0(R),totalSales:gs(H+te),amountCash:gs(H),amountCredit:gs(te),comCash:gs(ye),comCredit:gs(Q)}},[pe]),Pe=x.useMemo(()=>{const Z={},R={};for(const H of pe){const te=H._sales||[];for(const ye of te){const Q=(ye.vendorId||"").trim();if(!Q)continue;const Ge=fe[Q]||ye.userEmail||Q,ie=gs(Number(ye.vendorCommissionAmount||0));ye.type==="CREDITO"?(R[Q]||(R[Q]={vendorId:Q,name:Ge,total:0}),R[Q].total=gs(R[Q].total+ie)):(Z[Q]||(Z[Q]={vendorId:Q,name:Ge,total:0}),Z[Q].total=gs(Z[Q].total+ie))}}return{cashRows:Object.values(Z).filter(H=>H.total>0).sort((H,te)=>te.total-H.total),creditRows:Object.values(R).filter(H=>H.total>0).sort((H,te)=>te.total-H.total)}},[pe,fe]),Be=x.useMemo(()=>j.map(Z=>({id:Z.id,label:Z.name||Z.id})).sort((Z,R)=>Z.label.localeCompare(R.label)),[j]),O=x.useMemo(()=>v&&pe.find(Z=>Z.id===v.id)||null,[v,pe]),G=x.useMemo(()=>O?O._sales||[]:[],[O]),q=x.useMemo(()=>{let Z=0,R=0,H=0,te=0;for(const ye of G)ye.type==="CREDITO"?(R+=Number(ye.quantity||0),te+=Number(ye.amount||0)):(Z+=Number(ye.quantity||0),H+=Number(ye.amount||0));return{packsCash:a0(Z),packsCredit:a0(R),amountCash:gs(H),amountCredit:gs(te)}},[G]),U=x.useMemo(()=>{const Z={};for(const R of G){const H=R.productName||"(sin nombre)";Z[H]||(Z[H]={productName:H,packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0});const te=Number(R.quantity||0),ye=Number(R.amount||0),Q=Number(R.vendorCommissionAmount||0);R.type==="CREDITO"?(Z[H].packsCredit=a0(Z[H].packsCredit+te),Z[H].amountCredit=gs(Z[H].amountCredit+ye),Z[H].comCredit=gs(Z[H].comCredit+Q)):(Z[H].packsCash=a0(Z[H].packsCash+te),Z[H].amountCash=gs(Z[H].amountCash+ye),Z[H].comCash=gs(Z[H].comCash+Q))}return Object.values(Z)},[G]),Y=async()=>{if(!P.current||!O)return;const Z=P.current;Z.classList.add("force-pdf-colors");try{const H=(await yg(Z,{backgroundColor:"#ffffff"})).toDataURL("image/png"),te=new Mr;te.addImage(H,"PNG",10,10,190,0),te.save(`liquidacion_${O.date}.pdf`)}finally{Z.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Liquidaciones"}),i.jsxs("form",{onSubmit:J,className:"flex flex-wrap items-end gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:Z=>d(Z.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:Z=>A(Z.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Vendedor"}),i.jsxs("select",{className:"border rounded px-2 py-1 min-w-[240px]",value:_,onChange:Z=>S(Z.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),Be.map(Z=>i.jsx("option",{value:Z.id,children:Z.label},Z.id))]})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"text-2xl font-bold",children:gh(ne.packsCash)})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"text-2xl font-bold",children:gh(ne.packsCredit)})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Gi(ne.totalSales)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Gi(ne.amountCash)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Gi(ne.amountCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Gi(ne.comCash)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Gi(ne.comCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),Pe.cashRows.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Pe.cashRows.map(Z=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:Z.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Gi(Z.total)]})]},Z.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),Pe.creditRows.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Pe.creditRows.map(Z=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:Z.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Gi(Z.total)]})]},Z.vendorId))})]})]}),h?i.jsx("p",{children:"Cargando..."}):pe.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):i.jsxs("table",{className:"min-w-full text-sm mb-6 shadow-lg p-4 bg-white border-gray-100",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total paquetes Cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Total Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Total Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"}),i.jsx("th",{className:"border p-2",children:"Opciones"})]})}),i.jsx("tbody",{children:pe.map(Z=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:Z.date}),i.jsx("td",{className:"border p-1",children:gh(Z._packsCash)}),i.jsx("td",{className:"border p-1",children:gh(Z._packsCredit)}),i.jsxs("td",{className:"border p-1",children:["C$",Gi(Z._amountCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",Gi(Z._amountCredit)]}),i.jsxs("td",{className:"border p-1",children:["C$",Gi(Z._comCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",Gi(Z._comCredit)]}),i.jsx("td",{className:"border p-1",children:i.jsx("div",{className:"flex items-center gap-2 justify-center",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>y(Z),children:"Ver detalle"})})})]},Z.id))})]}),O&&i.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",O.date]}),i.jsx("button",{onClick:()=>y(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),i.jsx("button",{onClick:Y,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),i.jsxs("div",{ref:P,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[i.jsxs("div",{children:["Total Ventas cash:"," ",i.jsxs("strong",{children:["C$",Gi(q.amountCash)]})]}),i.jsxs("div",{children:["Total Ventas crdito:"," ",i.jsxs("strong",{children:["C$",Gi(q.amountCredit)]})]}),i.jsxs("div",{children:["Total paquetes cash:"," ",i.jsx("strong",{children:gh(q.packsCash)})]}),i.jsxs("div",{children:["Total paquetes crdito:"," ",i.jsx("strong",{children:gh(q.packsCredit)})]})]}),i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),G.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin ventas en este cierre."}):i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),i.jsx("tbody",{children:G.map((Z,R)=>{const H=Z.vendorId&&fe[Z.vendorId]?fe[Z.vendorId]:Z.userEmail,te=gs(Number(Z.vendorCommissionAmount||0));return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:H}),i.jsx("td",{className:"border p-1",children:Z.productName}),i.jsx("td",{className:"border p-1",children:Z.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:gh(Z.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Gi(Z.amount)]}),i.jsx("td",{className:"border p-1",children:te>0?`C$${Gi(te)}`:""}),i.jsx("td",{className:"border p-1",children:Z.date||""})]},R)})})]}),i.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),U.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin datos para consolidar."}):i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),i.jsx("tbody",{children:U.map((Z,R)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:Z.productName}),i.jsx("td",{className:"border p-1",children:gh(Z.packsCash)}),i.jsx("td",{className:"border p-1",children:gh(Z.packsCredit)}),i.jsxs("td",{className:"border p-1",children:["C$",Gi(Z.amountCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",Gi(Z.amountCredit)]}),i.jsxs("td",{className:"border p-1",children:["C$",Gi(Z.comCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",Gi(Z.comCredit)]})]},R))})]})]})]}),b&&i.jsx("p",{className:"mt-3 text-sm",children:b})]})}const Pr=t=>Math.round((Number(t)||0)*100)/100,Vo=t=>Math.round((Number(t)||0)*1e3)/1e3,br=t=>Number(t??0).toFixed(2),Os=t=>Number(t??0).toFixed(3),KS=t=>{const e=String(t||"").toUpperCase().trim();return e==="RIVAS"?"RIVAS":e==="SAN_JORGE"||e==="SANJORGE"||e==="SJ"?"SAN_JORGE":e==="ISLA"||e==="OMETEPE"?"ISLA":""},xr=t=>{const e=Number(t);return Number.isFinite(e)?e:0},CQe=t=>Math.max(0,Math.min(1,t));function W$({title:t,series:e,valuePrefix:r="C$"}){const u=e.map(b=>Number(b.value||0)),d=u.length?Math.min(...u):0,f=u.length?Math.max(...u):0,A=f-d||1,h=840,m=204,p=e.map((b,w)=>{const j=44+(e.length<=1?h/2:w/(e.length-1)*h),I=18+(1-(Number(b.value||0)-d)/A)*m;return{x:j,y:I,...b}}),g=p.map((b,w)=>`${w===0?"M":"L"} ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" "),v=p[p.length-1],y=v?v.value:0;return i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("div",{className:"font-semibold text-sm sm:text-base",children:t}),i.jsxs("div",{className:"text-xs text-gray-600 whitespace-nowrap",children:["ltimo: ",i.jsx("strong",{children:r+br(y)})]})]}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("svg",{viewBox:"0 0 900 260",className:"min-w-[720px] w-full h-auto",role:"img","aria-label":t,children:[[0,1,2,3].map(b=>{const w=18+b/3*m;return i.jsx("line",{x1:44,y1:w,x2:884,y2:w,stroke:"#e5e7eb",strokeWidth:"1"},b)}),i.jsxs("text",{x:8,y:28,fontSize:"12",fill:"#6b7280",children:[r,br(f)]}),i.jsxs("text",{x:8,y:18+m,fontSize:"12",fill:"#6b7280",children:[r,br(d)]}),i.jsx("path",{d:g,fill:"none",stroke:"#111827",strokeWidth:"2.5"}),p.map((b,w)=>i.jsx("circle",{cx:b.x,cy:b.y,r:"3.5",fill:"#111827"},w)),e.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("text",{x:44,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"start",children:e[0].label}),i.jsx("text",{x:884,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"end",children:e[e.length-1].label})]})]})})]})}function _Qe({title:t,items:e}){const r=e.reduce((f,A)=>f+Number(A.value||0),0),n=240,a=86,s=120,o=120,l=r>0?r:1;let c=0;const u=["#111827","#374151","#6b7280","#9ca3af"],d=e.map((f,A)=>{const h=Math.max(0,Number(f.value||0)),m=c/l,p=h/l;c+=h;const g=m+p,v=m*Math.PI*2-Math.PI/2,y=g*Math.PI*2-Math.PI/2,b=s+a*Math.cos(v),w=o+a*Math.sin(v),j=s+a*Math.cos(y),I=o+a*Math.sin(y),_=p>.5?1:0;return{d:[`M ${s} ${o}`,`L ${b.toFixed(2)} ${w.toFixed(2)}`,`A ${a} ${a} 0 ${_} 1 ${j.toFixed(2)} ${I.toFixed(2)}`,"Z"].join(" "),fill:u[A%u.length],...f,frac:p}});return i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsx("div",{className:"font-semibold text-sm sm:text-base mb-2",children:t}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("div",{className:"w-full md:w-auto overflow-x-auto",children:i.jsxs("svg",{viewBox:`0 0 ${n} ${n}`,className:"min-w-[240px] w-[260px] h-auto",role:"img","aria-label":t,children:[d.map((f,A)=>i.jsx("path",{d:f.d,fill:f.fill},A)),i.jsx("circle",{cx:s,cy:o,r:"48",fill:"#ffffff"}),i.jsx("text",{x:s,y:o-4,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:"Total"}),i.jsxs("text",{x:s,y:o+16,textAnchor:"middle",fontSize:"14",fill:"#111827",fontWeight:"700",children:["C$",br(r)]})]})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.map((f,A)=>{const h=Number(f.value||0),m=CQe(h/(r||1))*100;return i.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"text-sm font-semibold truncate",children:f.label}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",br(h)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[m.toFixed(1),"%"]}),i.jsx("div",{className:"h-2 bg-white border rounded-full mt-2 overflow-hidden",children:i.jsx("div",{className:"h-full",style:{width:`${m}%`,background:u[A%u.length]}})})]},f.label)})}),i.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Distribucin basada en ventas del perodo con los filtros actuales."})]})]})]})}const EQe=(t,e)=>{var g;const r=t.date??((g=t.timestamp)!=null&&g.toDate?Ir(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=String(t.processedDate??t.closureDate??"").trim(),a=t.status??"FLOTANTE",s=t.type||"CONTADO",o=String(t.vendorId??"").trim(),l=String(t.vendorName??"").trim()||String(t.userEmail??"").trim()||o||"(sin vendedor)",c=String(t.customerId??"").trim(),u=String(t.customerName??"").trim()||String(t.clientName??"").trim()||"",d=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,f=Number(t.vendorCommissionAmount??0)||0,A=KS(t.branch??t.vendorBranch);if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((v,y)=>{const b=Number((v==null?void 0:v.packages)??0)||0,w=Number((v==null?void 0:v.total)??0)||Math.max(0,Number((v==null?void 0:v.unitPricePackage)||0)*b-Number((v==null?void 0:v.discount)||0)),j=KS(v==null?void 0:v.branch)||A;let I=0;return f>0&&d>0&&w>0&&(I=Pr(f*w/d)),{id:`${e}#${y}`,docId:e,productId:String((v==null?void 0:v.productId)??""),productName:String((v==null?void 0:v.productName)??"(sin nombre)"),date:r,processedDate:n,status:a,type:s,vendorId:o,vendorName:l,customerId:c,customerName:u,branch:j||"",packages:b,amount:Pr(w),commission:Pr(I)}});const h=Number(t.packagesTotal??0)||0,m=Number(t.total??t.amount??t.amountCharged??0)||0,p=Pr(Number(t.vendorCommissionAmount??0)||0);return[{id:`${e}#0`,docId:e,productId:"",productName:"(sin nombre)",date:r,processedDate:n,status:a,type:s,vendorId:o,vendorName:l,customerId:c,customerName:u,branch:A||"",packages:h,amount:Pr(m),commission:Pr(p)}]};function SQe({role:t,roles:e}){var ut;const r=e&&e.length?e:t,n=!r||on(r,"admin"),a=Ir(new Date,"yyyy-MM-dd"),[s,o]=x.useState(a),[l,c]=x.useState(a),[u,d]=x.useState("TODAS"),[f,A]=x.useState("AMBAS"),[h,m]=x.useState("ALL"),[p,g]=x.useState("ALL"),[v,y]=x.useState(""),[b,w]=x.useState(""),[j,I]=x.useState(""),[_,S]=x.useState(""),[E,F]=x.useState("DIA"),[P,k]=x.useState(!0),[D,J]=x.useState(""),[fe,Ae]=x.useState([]),[me,pe]=x.useState([]),[ne,Pe]=x.useState([]),[Be,O]=x.useState({}),[G,q]=x.useState([]),[U,Y]=x.useState([]),[Z,R]=x.useState([]),[H,te]=x.useState([]),[ye,Q]=x.useState([]),[Ge,ie]=x.useState([]),[ee,Ie]=x.useState(""),[ue,se]=x.useState(""),[Ee,je]=x.useState(null),it=x.useRef(null),[At,pt]=x.useState([]),[yt,Ct]=x.useState("DETALLE"),Et=x.useMemo(()=>{const T={};return U.forEach(M=>T[M.id]=String(M.name||"").trim()),T},[U]),Re=x.useMemo(()=>{const T={};return me.forEach(M=>T[M.id]=M),T},[me]),We=T=>{const M=T.customerId?Et[T.customerId]:"";return(T.customerName||M||"").trim()||(T.customerId?Et[T.customerId]||T.customerId:"")||""};x.useEffect(()=>{if(!n)return;(async()=>{try{const M=await Qt(bt(Oe,"inventory_candies")),L=[];M.forEach(K=>L.push({id:K.id,...K.data()})),pt(L)}catch(M){console.error("inventory_candies all error:",M),pt([])}})()},[n]),x.useEffect(()=>{(async()=>{try{const M=await Qt(bt(Oe,"sellers_candies")),L=[];M.forEach(re=>{const le=re.data();L.push({id:re.id,name:String(le.name||"").trim(),commissionPercent:Number(le.commissionPercent||0),branch:le.branch||""})});const K=new Map;L.forEach(re=>K.set(re.id,re)),pe(Array.from(K.values()).sort((re,le)=>re.name.localeCompare(le.name)))}catch(M){console.error(M)}})()},[]),x.useEffect(()=>{if(!n||!s||!l)return;k(!0),J("");const T=nr(bt(Oe,"sales_candies"),sr("date",">=",s),sr("date","<=",l),xn("date","asc")),M=ad(T,L=>{const K=[];L.forEach(re=>K.push(...EQe(re.data(),re.id))),Ae(K),k(!1)},L=>{console.error("sales_candies periodo error:",L),Ae([]),k(!1),J(" Error cargando ventas del perodo (revis ndices si aplica).")});return()=>M()},[n,s,l]),x.useEffect(()=>{if(!n)return;(async()=>{try{const M=nr(bt(Oe,"candy_main_orders"),sr("date",">=",s),sr("date","<=",l)),L=await Qt(M),K=[];L.forEach(re=>K.push({id:re.id,...re.data()})),Pe(K)}catch(M){console.error("candy_main_orders error:",M),Pe([])}})()},[n,s,l]),x.useEffect(()=>{if(!n)return;(async()=>{try{const M=await Qt(nr(bt(Oe,"candy_main_orders"),xn("createdAt","desc"))),L={},K=(re,le)=>`${re}#${String(le).padStart(10,"0")}`;M.forEach(re=>{var Xe;const le=re.data(),Me=Number(((Xe=le.createdAt)==null?void 0:Xe.seconds)??0),qe=String(le.date||""),lt=K(qe,Me),Fe=Array.isArray(le.items)?le.items:[];for(const he of Fe){const He=String(he.id||he.productId||"");if(!He)continue;const Ye={unitPriceRivas:Number(he.unitPriceRivas||0),unitPriceSanJorge:Number(he.unitPriceSanJorge||0),unitPriceIsla:Number(he.unitPriceIsla||0),key:lt},ct=L[He];(!ct||Ye.key>ct.key)&&(L[He]=Ye)}}),O(L)}catch(M){console.error("candy_main_orders catalog error:",M),O({})}})()},[n]),x.useEffect(()=>{if(!n)return;const T=nr(bt(Oe,"inventory_candies_sellers"),sr("date",">=",s),sr("date","<=",l)),M=ad(T,L=>{const K=[];L.forEach(re=>K.push({id:re.id,...re.data()})),q(K)},L=>{console.error("inventory_candies_sellers error:",L),q([])});return()=>M()},[n,s,l]),x.useEffect(()=>{if(!n)return;(async()=>{try{const M=nr(bt(Oe,"expenses_candies"),sr("date",">=",s),sr("date","<=",l),xn("date","asc")),L=await Qt(M),K=[];L.forEach(re=>K.push({id:re.id,...re.data()})),te(K)}catch(M){console.warn("expenses_candies sin ndice, usando fallback:",M);try{const L=await Qt(bt(Oe,"expenses_candies")),K=[];L.forEach(re=>K.push({id:re.id,...re.data()})),te(K.filter(re=>String(re.date||"")>=s&&String(re.date||"")<=l))}catch(L){console.error(L),te([])}}})()},[n,s,l]),x.useEffect(()=>{if(!n)return;(async()=>{try{const M=await Qt(bt(Oe,"inventory_candies")),L=[];M.forEach(K=>L.push({id:K.id,...K.data()})),Q(L)}catch(M){console.error("inventory_candies global error:",M),Q([])}})()},[n]),x.useEffect(()=>{if(!n)return;(async()=>{try{const M=await Qt(bt(Oe,"inventory_candies_sellers")),L=[];M.forEach(K=>L.push({id:K.id,...K.data()})),ie(L)}catch(M){console.error("inventory_candies_sellers global error:",M),ie([])}})()},[n]),x.useEffect(()=>{if(!n)return;const T=nr(bt(Oe,"customers_candies")),M=ad(T,L=>{const K=[];L.forEach(re=>{var le,Me,qe;return K.push({id:re.id,name:String(((le=re.data())==null?void 0:le.name)||"").trim(),initialDebt:Number(((Me=re.data())==null?void 0:Me.initialDebt)||0),initialDebtDate:String(((qe=re.data())==null?void 0:qe.initialDebtDate)||"").trim()})}),Y(K)},L=>{console.error("customers_candies snapshot error:",L),Y([])});return()=>M()},[n]),x.useEffect(()=>{if(!n)return;(async()=>{try{const M=nr(bt(Oe,"ar_movements"),sr("date","<=",l),xn("date","asc")),L=await Qt(M),K=[];L.forEach(re=>K.push({id:re.id,...re.data()})),R(K)}catch(M){console.warn("ar_movements sin ndice, usando fallback:",M);try{const L=await Qt(bt(Oe,"ar_movements")),K=[];L.forEach(re=>K.push({id:re.id,...re.data()})),R(K.filter(re=>String(re.date||"")<=l))}catch(L){console.error(L),R([])}}})()},[n,l]);const et=x.useMemo(()=>{let T=[...fe];if(u!=="TODAS"&&(T=T.filter(K=>K.status===u)),f==="CASH"&&(T=T.filter(K=>K.type==="CONTADO")),f==="CREDITO"&&(T=T.filter(K=>K.type==="CREDITO")),h!=="ALL"&&(T=T.filter(K=>(K.vendorId||"")===h)),p!=="ALL"&&(T=T.filter(K=>K.branch===p)),v.trim()){const K=v.trim().toLowerCase();T=T.filter(re=>(re.productName||"").toLowerCase().includes(K))}if(b.trim()){const K=b.trim().toLowerCase();T=T.filter(re=>(We(re)||"").toLowerCase().includes(K))}const M=j.trim()?Number(j):null,L=_.trim()?Number(_):null;return M!==null&&!Number.isNaN(M)&&(T=T.filter(K=>(K.amount||0)>=M)),L!==null&&!Number.isNaN(L)&&(T=T.filter(K=>(K.amount||0)<=L)),T},[fe,u,f,h,p,v,b,j,_,Et]),xe=x.useMemo(()=>{let T=0,M=0,L=0,K=0,re=0,le=0;for(const qe of et){const lt=xr(qe.packages),Fe=xr(qe.amount),Xe=xr(qe.commission);qe.type==="CREDITO"?(M+=lt,K+=Fe,le+=Xe):(T+=lt,L+=Fe,re+=Xe)}const Me=Pr(L+K);return{packsCash:Vo(T),packsCredit:Vo(M),salesCash:Pr(L),salesCredit:Pr(K),salesTotal:Me,commCash:Pr(re),commCredit:Pr(le),commTotal:Pr(re+le)}},[et]),de=x.useMemo(()=>{let T=0,M=0,L=0,K=0,re=0,le=0;for(const Me of ne){const qe=Array.isArray(Me.items)?Me.items:[];for(const lt of qe)T+=xr(lt.totalRivas),M+=xr(lt.totalSanJorge),L+=xr(lt.totalIsla),K+=xr(lt.gainRivas),re+=xr(lt.gainSanJorge),le+=xr(lt.gainIsla)}return{expectedRivas:Pr(T),expectedSanJorge:Pr(M),expectedIsla:Pr(L),grossRivas:Pr(K),grossSanJorge:Pr(re),grossIsla:Pr(le),grossTotal:Pr(K+re+le),expectedTotal:Pr(T+M+L)}},[ne]),Ue=x.useMemo(()=>{const T={RIVAS:{sales:0,packages:0},SAN_JORGE:{sales:0,packages:0},ISLA:{sales:0,packages:0}};for(const M of et){const L=M.branch;L&&(T[L].sales+=xr(M.amount),T[L].packages+=xr(M.packages))}return{RIVAS:{sales:Pr(T.RIVAS.sales),packages:Vo(T.RIVAS.packages)},SAN_JORGE:{sales:Pr(T.SAN_JORGE.sales),packages:Vo(T.SAN_JORGE.packages)},ISLA:{sales:Pr(T.ISLA.sales),packages:Vo(T.ISLA.packages)}}},[et]),Ke=x.useMemo(()=>({RIVAS:Pr(Ue.RIVAS.sales-de.expectedRivas),SAN_JORGE:Pr(Ue.SAN_JORGE.sales-de.expectedSanJorge),ISLA:Pr(Ue.ISLA.sales-de.expectedIsla)}),[Ue,de]),Ne=x.useMemo(()=>{const T={},M={};for(const re of et){const le=(re.vendorId||"").trim();if(!le)continue;const Me=me.find(Fe=>Fe.id===le),qe=(Me==null?void 0:Me.name)||re.vendorName||"(sin vendedor)",lt=xr(re.commission);re.type==="CREDITO"?(M[le]||(M[le]={vendorId:le,name:qe,total:0}),M[le].total=Pr(M[le].total+lt)):(T[le]||(T[le]={vendorId:le,name:qe,total:0}),T[le].total=Pr(T[le].total+lt))}const L=Object.values(T).sort((re,le)=>le.total-re.total),K=Object.values(M).sort((re,le)=>le.total-re.total);return{cashArr:L,creditArr:K}},[et,me]),mt=x.useMemo(()=>{const T=(Ye,ct)=>Ye.reduce((Nt,It)=>Nt+Number((It==null?void 0:It[ct])??0),0),M=Ye=>{const ct=Number(Ye);return Number.isFinite(ct)?Math.floor(ct):0},L=Ye=>{const ct=Number((Ye==null?void 0:Ye.totalPackages)??0);if(ct>0)return ct;const Nt=Array.isArray(Ye==null?void 0:Ye.items)?Ye.items:[];return T(Nt,"packages")};let K=0,re=0;for(const Ye of ne){const ct=Array.isArray(Ye.items)?Ye.items:[];if(ct.length)for(const Nt of ct)K+=Number((Nt==null?void 0:Nt.subtotal)??0);else K+=Number(Ye.subtotal??0);re+=L(Ye)}let le=0,Me=0,qe=0;const lt=Ye=>{const ct=Number(Ye==null?void 0:Ye.remainingPackages);if(Number.isFinite(ct)&&ct>0)return Math.floor(ct);const Nt=Math.max(1,M((Ye==null?void 0:Ye.unitsPerPackage)??1)),It=M((Ye==null?void 0:Ye.remainingUnits)??(Ye==null?void 0:Ye.remaining)??0);return It>0?Math.max(0,Math.floor(It/Nt)):0};for(const Ye of G)le+=Number(Ye.subtotal??0),Me+=Number(Ye.packages??0),qe+=lt(Ye);const Fe=new Set(ne.filter(Ye=>String(Ye.date||"")>=s&&String(Ye.date||"")<=l).map(Ye=>Ye.id));let Xe=0;for(const Ye of At){const ct=String(Ye.orderId||"").trim();ct&&Fe.has(ct)&&(Xe+=Number(Ye.remainingPackages??0))}const he=ye.reduce((Ye,ct)=>Ye+xr(ct.remainingPackages),0),He=Ge.reduce((Ye,ct)=>Ye+xr(ct.remainingPackages),0);return{providerTotalMaster:Pr(K),providerTotalVendor:Pr(le),orderedPacksMaster:Vo(re),remainingPacksMaster:Vo(Xe),orderedPacksVendor:Vo(Me),remainingPacksVendor:Vo(qe),globalRemainingMaster:Vo(he),globalRemainingVendor:Vo(He)}},[ne,G,At,s,l,ye,Ge]),wt=x.useMemo(()=>{const T={};let M=0;for(const L of H){const K=String(L.date||"").trim();if(!K)continue;const re=Math.max(0,xr(L.amount));M+=re,T[K]=Pr((T[K]||0)+re)}return{total:Pr(M),byDay:T}},[H]),we=x.useMemo(()=>{let T=0;for(const M of ne){const L=Array.isArray(M.items)?M.items:[];if(L.length)for(const K of L)T+=xr(K==null?void 0:K.subtotal);else T+=xr(M.subtotal)}return Pr(T)},[ne]),ae=x.useMemo(()=>{var lt;const T=Fe=>{const Xe=Math.max(1,Math.floor(xr(Fe.unitsPerPackage||1))),he=xr(Fe.totalUnits)>0?xr(Fe.totalUnits):xr(Fe.packages)*Xe;let He=0;xr(Fe.remainingUnits)>0?He=xr(Fe.remainingUnits):xr(Fe.remainingPackages)>0?He=xr(Fe.remainingPackages)*Xe:He=0;const Ye=Math.max(0,he-He);return{orderedUnits:he,remainingUnits:He,soldUnits:Ye,upp:Xe}},M=Fe=>{const Xe=Re[Fe];return KS(Xe==null?void 0:Xe.branch)||"ISLA"},L=(Fe,Xe)=>{var he,He,Ye;return Xe==="ISLA"?xr(((he=Be[String(Fe.productId||"")])==null?void 0:he.unitPriceIsla)??Fe.unitPriceIsla):Xe==="RIVAS"?xr(((He=Be[String(Fe.productId||"")])==null?void 0:He.unitPriceRivas)??Fe.unitPriceRivas):Xe==="SAN_JORGE"?xr(((Ye=Be[String(Fe.productId||"")])==null?void 0:Ye.unitPriceSanJorge)??Fe.unitPriceSanJorge):0},K=(Fe,Xe)=>{const he=Math.max(0,Math.floor(xr(Fe.packages))),He=L(Fe,Xe),Ye=Pr(He*he);if(Ye>0)return Ye;const ct=xr(Fe.totalVendor)||(Xe==="ISLA"?xr(Fe.totalIsla):Xe==="RIVAS"?xr(Fe.totalRivas):Xe==="SAN_JORGE"?xr(Fe.totalSanJorge):0);if(ct>0)return ct;const Nt=xr(Fe.unitPriceVendor);if(Nt>0){const{orderedUnits:It}=T(Fe);return Nt*It}return 0},re=(Fe,Xe)=>{const he=L(Fe,Xe),{orderedUnits:He,upp:Ye}=T(Fe);if(he>0&&Ye>0)return he/Ye;const ct=xr(Fe.unitPriceVendor);if(ct>0)return ct;const Nt=K(Fe,Xe);return Nt>0&&He>0?Nt/He:0},le=new Map;for(const Fe of G){const Xe=String(Fe.orderId||"").trim(),he=Xe||`DOC:${Fe.id}`,He=String(Fe.sellerId||"").trim(),Ye=String(Fe.sellerName||"").trim()||He&&((lt=Re[He])==null?void 0:lt.name)||""||"(sin vendedor)",ct=String(Fe.date||"").trim(),Nt=He?M(He):"",{orderedUnits:It,remainingUnits:hr,soldUnits:Ot}=T(Fe),Ft=K(Fe,Nt),lr=re(Fe,Nt),ir=lr>0?lr*Ot:It>0?Ft*Ot/It:0,Pt=Pr(Ft-ir);le.has(he)||le.set(he,{orderKey:he,orderId:Xe||he,date:ct,sellerId:He,sellerName:Ye,branch:Nt,totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0,lines:[]});const mr=le.get(he);mr.lines.push({...Fe,orderedUnits:It,soldUnits:Ot,remainingUnits:hr,lineTotal:Pr(Ft),lineSoldValue:Pr(ir),lineRemainingValue:Pr(Pt)}),mr.totalOrden+=Ft,mr.vendido+=ir,mr.restante+=Pt,mr.comision+=xr(Fe.uVendor??Fe.vendorProfit??Fe.gainVendor)}for(const Fe of le.values())Fe.comision=Pr(Fe.comision),Fe.totalEsperado=Pr(Fe.totalOrden-Fe.comision),Fe.totalOrden=Pr(Fe.totalOrden),Fe.vendido=Pr(Fe.vendido),Fe.restante=Pr(Fe.restante);const Me=Array.from(le.values()).sort((Fe,Xe)=>Fe.date&&Xe.date?Fe.date<Xe.date?1:-1:Xe.totalOrden-Fe.totalOrden),qe=Me.reduce((Fe,Xe)=>(Fe.totalOrden+=xr(Xe.totalOrden),Fe.vendido+=xr(Xe.vendido),Fe.restante+=xr(Xe.restante),Fe.comision+=xr(Xe.comision),Fe.totalEsperado+=xr(Xe.totalEsperado),Fe),{totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0});return{global:{totalOrden:Pr(qe.totalOrden),vendido:Pr(qe.vendido),restante:Pr(qe.restante),comision:Pr(qe.comision),totalEsperado:Pr(qe.totalEsperado)},orders:Me}},[G,Re,Be]),be=x.useMemo(()=>{var K,re,le;let T=0,M=0;for(const Me of G){const qe=String(Me.sellerId||"").trim(),lt=qe?Re[qe]:void 0,Fe=KS(lt==null?void 0:lt.branch)||"ISLA",Xe=Math.max(0,Math.floor(xr(Me.packages)));if(!Xe)continue;const he=xr(Fe==="ISLA"?((K=Be[String(Me.productId||"")])==null?void 0:K.unitPriceIsla)??Me.unitPriceIsla:Fe==="RIVAS"?((re=Be[String(Me.productId||"")])==null?void 0:re.unitPriceRivas)??Me.unitPriceRivas:((le=Be[String(Me.productId||"")])==null?void 0:le.unitPriceSanJorge)??Me.unitPriceSanJorge);let He=Pr(he*Xe);He||(He=xr(Fe==="ISLA"?Me.totalIsla:Fe==="RIVAS"?Me.totalRivas:Me.totalSanJorge)),He&&(T+=He,M+=He)}const L=Pr(xr(de.expectedIsla)-M);return{dispersedTotal:Pr(T),dispersedIsla:Pr(M),totalExistenteIsla:L}},[G,Re,de.expectedIsla,Be]),ve=x.useMemo(()=>({net:Pr(G.reduce((M,L)=>{const K=L.uNeta,re=xr(K);if(re!==0||K===0)return M+re;const le=xr(L.grossProfit),Me=xr(L.logisticAllocated??L.gastos??L.gasto),qe=xr(L.uVendor??L.vendorProfit);return M+(le-Me-qe)},0))}),[G]),Ve=x.useMemo(()=>{let T=0,M=0,L=0;for(const K of et){if(K.type!=="CREDITO")continue;const re=xr(K.amount),le=xr(K.commission);T+=re,M+=re-le}for(const K of Z){const re=String(K.date||"").trim();if(!re||re<s||re>l)continue;const le=xr(K.amount);(K.type||(le<0?"ABONO":"CARGO"))==="ABONO"&&(L+=Math.abs(le))}return{cxc:Pr(T),recaudado:Pr(L),utilidadBruta:Pr(M)}},[et,Z,s,l]),ce=x.useMemo(()=>{if(!ue)return null;const T=ae.orders.find(K=>K.orderKey===ue);if(!T)return null;const M={};for(const K of T.lines){const re=String(K.productName||"(sin nombre)");M[re]||(M[re]={productName:re,asociados:0,vendidos:0,restantes:0});const le=Math.max(0,Math.floor(xr(K.packages))),Me=Math.max(1,Math.floor(xr(K.unitsPerPackage||1))),qe=Math.max(0,Math.floor(xr(K.remainingPackages)||(xr(K.remainingUnits)>0?xr(K.remainingUnits)/Me:0))),lt=Math.max(0,le-qe);M[re].asociados+=le,M[re].vendidos+=lt,M[re].restantes+=qe}const L=Object.values(M).map(K=>({...K,asociados:Math.floor(K.asociados),vendidos:Math.floor(K.vendidos),restantes:Math.floor(K.restantes)})).sort((K,re)=>re.asociados-K.asociados);return{...T,products:L}},[ue,ae.orders]),ke=x.useMemo(()=>{const T=ye.reduce((L,K)=>L+xr(K.remainingPackages),0),M=Ge.reduce((L,K)=>L+xr(K.remainingPackages),0);return{masterRemainingPackages:Vo(T),vendorRemainingPackages:Vo(M)}},[ye,Ge]),dt=x.useMemo(()=>{const T=new Map,M=K=>E==="DIA"?{key:K.date,label:K.date}:E==="VENDEDOR"?{key:K.vendorId||"",label:K.vendorName||""}:E==="PRODUCTO"?{key:K.productName||"",label:K.productName||""}:{key:K.branch||"",label:K.branch||""};for(const K of et){const{key:re,label:le}=M(K);T.has(re)||T.set(re,{key:re,label:le,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0,rows:[]});const Me=T.get(re);Me.rows.push(K),K.type==="CREDITO"?(Me.packsCredit+=xr(K.packages),Me.salesCredit+=xr(K.amount),Me.commCredit+=xr(K.commission)):(Me.packsCash+=xr(K.packages),Me.salesCash+=xr(K.amount),Me.commCash+=xr(K.commission))}const L=Array.from(T.values()).map(K=>({...K,packsCash:Vo(K.packsCash),packsCredit:Vo(K.packsCredit),salesCash:Pr(K.salesCash),salesCredit:Pr(K.salesCredit),commCash:Pr(K.commCash),commCredit:Pr(K.commCredit)}));return E==="DIA"?L.sort((K,re)=>K.key<re.key?1:-1):L.sort((K,re)=>re.salesCash+re.salesCredit-(K.salesCash+K.salesCredit)),L},[et,E]),ft=x.useMemo(()=>{if(!ee)return[];const T=dt.find(M=>M.key===ee);return(T==null?void 0:T.rows)||[]},[ee,dt]),gt=x.useMemo(()=>{const T={};for(const M of ft){const L=M.productName||"(sin nombre)";T[L]||(T[L]={productName:L,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0}),M.type==="CREDITO"?(T[L].packsCredit+=xr(M.packages),T[L].salesCredit+=xr(M.amount),T[L].commCredit+=xr(M.commission)):(T[L].packsCash+=xr(M.packages),T[L].salesCash+=xr(M.amount),T[L].commCash+=xr(M.commission))}return Object.values(T).map(M=>({...M,packsCash:Vo(M.packsCash),packsCredit:Vo(M.packsCredit),salesCash:Pr(M.salesCash),salesCredit:Pr(M.salesCredit),commCash:Pr(M.commCash),commCredit:Pr(M.commCredit)})).sort((M,L)=>L.salesCash+L.salesCredit-(M.salesCash+M.salesCredit))},[ft]),Rt=x.useMemo(()=>{const T={},M=le=>(Et[le]||"").trim()||le;for(const le of U){const Me=String(le.id||"").trim();Me&&(T[Me]={customerId:Me,name:M(Me),balance:0,lastPayment:"",lastPaymentAmount:0,initialDebt:xr(le.initialDebt),initialDebtDate:String(le.initialDebtDate||"").trim(),movements:[]})}for(const le of Z){const Me=String(le.customerId||"").trim();if(!Me)continue;const qe=String(le.date||"");qe&&qe>l||(T[Me]||(T[Me]={customerId:Me,name:M(Me),balance:0,lastPayment:"",lastPaymentAmount:0,initialDebt:0,initialDebtDate:"",movements:[]}),T[Me].movements.push(le))}const L=(le,Me,qe)=>{const lt=Number(le||0);if(!lt)return 0;const Fe=String(Me||"").trim();return Fe&&qe.some(he=>{var It;const He=Number(he.amount||0);if(!(He>0))return!1;const Ye=Math.abs(He-lt)<.01,ct=String(he.date||"").trim()===Fe,Nt=!!((It=he.ref)!=null&&It.saleId);return Ye&&ct&&Nt})?0:lt},K=Object.values(T).map(le=>{const Me=le.movements.reduce((Xe,he)=>Xe+xr(he.amount),0),qe=L(le.initialDebt,le.initialDebtDate,le.movements);let lt="",Fe=0;for(const Xe of le.movements){const he=Xe.type||(xr(Xe.amount)<0?"ABONO":"CARGO"),He=String(Xe.date||"");if(he==="ABONO"){const Ye=Math.abs(xr(Xe.amount));(!lt||He>lt)&&(lt=He,Fe=Ye)}}return{customerId:le.customerId,name:le.name,balance:Pr(qe+Me),lastPayment:lt,lastPaymentAmount:Pr(Fe)}}).filter(le=>le.balance>0).sort((le,Me)=>Me.balance-le.balance),re=Pr(K.reduce((le,Me)=>le+Me.balance,0));return{count:K.length,totalPending:re,list:K.slice(0,20)}},[Z,Et,U,l]),ot=x.useMemo(()=>{if(!Ee)return[];const T=Z.filter(L=>(L.customerId||"").trim()===Ee.customerId).filter(L=>!L.date||String(L.date)<=l).map(L=>({id:L.id,date:String(L.date||""),type:String(L.type||""),amount:Pr(xr(L.amount))})).sort((L,K)=>L.date<K.date?-1:L.date>K.date?1:0);let M=0;return T.map(L=>{const K=L.type==="ABONO"?-L.amount:L.amount;return M=Pr(M+K),{...L,running:M}})},[Ee,Z,l]),Se=x.useMemo(()=>Ee?fe.filter(T=>(T.customerId||"").trim()===Ee.customerId).filter(T=>!T.date||String(T.date)<=l).sort((T,M)=>T.date<M.date?-1:T.date>M.date?1:0):[],[Ee,fe,l]),ht=x.useMemo(()=>{const T=Pr(xe.salesTotal),M=Pr(xe.commTotal),L=Pr(wt.total),K=Pr(T-M-L),re=new Set;for(const Xe of et)Xe.date&&re.add(Xe.date);const le=Math.max(1,re.size),Me=Pr(T/le),qe=Pr(M/le),lt=Pr(L/le),Fe=Pr(K/le);return{ingreso:T,comision:M,gastos:L,gananciaNeta:K,daysCount:le,ingresoDia:Me,comisionDia:qe,gastosDia:lt,netaDia:Fe}},[xe,wt.total,et]),W=x.useMemo(()=>{const T={};for(const re of et){const le=re.date;le&&(T[le]||(T[le]={date:le,ingreso:0,comision:0}),T[le].ingreso+=xr(re.amount),T[le].comision+=xr(re.commission))}const M=Object.keys(T).sort((re,le)=>re<le?-1:1),L=M.map(re=>({label:re.slice(5),value:Pr(T[re].ingreso)})),K=M.map(re=>{var Fe,Xe;const le=xr((Fe=T[re])==null?void 0:Fe.ingreso),Me=xr((Xe=T[re])==null?void 0:Xe.comision),qe=xr(wt.byDay[re]||0),lt=le-Me-qe;return{label:re.slice(5),value:Pr(lt)}});return{seriesIngreso:L,seriesNeta:K,datesCount:M.length}},[et,wt.byDay]),Te=x.useMemo(()=>[{label:"Rivas",value:xr(Ue.RIVAS.sales)},{label:"San Jorge",value:xr(Ue.SAN_JORGE.sales)},{label:"Isla",value:xr(Ue.ISLA.sales)}].map(T=>({...T,value:Pr(T.value)})),[Ue]),Ze=async()=>{if(it.current){it.current.classList.add("force-pdf-colors");try{const M=(await yg(it.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),L=new Mr;L.addImage(M,"PNG",10,10,190,0),L.save(`data_center_dulces_${s}_a_${l}.pdf`)}finally{it.current.classList.remove("force-pdf-colors")}}},tt=()=>{const M=[["date","processedDate","status","type","vendorId","vendorName","branch","productName","packages","amount","commission","customerId","customerName"].join(","),...et.map(le=>[le.date,le.processedDate||"",le.status,le.type,le.vendorId,`"${String(le.vendorName||"").replace(/"/g,'""')}"`,le.branch||"",`"${String(le.productName||"").replace(/"/g,'""')}"`,Os(le.packages),br(le.amount),br(le.commission),le.customerId||"",`"${String(We(le)||"").replace(/"/g,'""')}"`].join(","))],L=new Blob([M.join(`
`)],{type:"text/csv;charset=utf-8;"}),K=URL.createObjectURL(L),re=document.createElement("a");re.href=K,re.download=`data_center_dulces_${s}_a_${l}.csv`,re.click(),URL.revokeObjectURL(K)};return n?i.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-0",children:[i.jsxs("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-2xl shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[i.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Data Center - Dulces"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-end",children:[i.jsx("button",{onClick:Ze,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-green-600 text-white hover:bg-green-700 transition-colors\r
              `,children:"Exportar PDF"}),i.jsx("button",{onClick:tt,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-gray-800 text-white hover:bg-black transition-colors\r
              `,children:"Exportar CSV"})]})]}),i.jsx("div",{className:"rounded-2xl border border-gray-100 p-3 sm:p-4 mb-3 shadow-sm bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:s,onChange:T=>o(T.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:l,onChange:T=>c(T.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Estado"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:u,onChange:T=>d(T.target.value),children:[i.jsx("option",{value:"TODAS",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Procesada"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:f,onChange:T=>A(T.target.value),children:[i.jsx("option",{value:"AMBAS",children:"Ambas"}),i.jsx("option",{value:"CASH",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Vendedor"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:h,onChange:T=>m(T.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),me.map(T=>i.jsx("option",{value:T.id,children:T.name||T.id},T.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Sucursal"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:p,onChange:T=>g(T.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"RIVAS",children:"Rivas"}),i.jsx("option",{value:"SAN_JORGE",children:"San Jorge"}),i.jsx("option",{value:"ISLA",children:"Isla"})]})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Producto (opcional)"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:v,onChange:T=>y(T.target.value),placeholder:"Ej: Conitos"})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Cliente (opcional)"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:b,onChange:T=>w(T.target.value),placeholder:"Ej: Javier"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Monto min"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:j,onChange:T=>I(T.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Monto max"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:_,onChange:T=>S(T.target.value),placeholder:"999999"})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Agrupar por"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:E,onChange:T=>{Ie(""),F(T.target.value)},children:[i.jsx("option",{value:"DIA",children:"Da"}),i.jsx("option",{value:"VENDEDOR",children:"Vendedor"}),i.jsx("option",{value:"PRODUCTO",children:"Producto"}),i.jsx("option",{value:"SUCURSAL",children:"Sucursal"})]})]})]})}),i.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{se(""),Ct("MACRO")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",yt==="MACRO"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Macro"}),i.jsx("button",{onClick:()=>{se(""),Ct("DETALLE")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",yt==="DETALLE"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Detalle"})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Gastos del perodo (expenses_candies):"," ",i.jsxs("strong",{children:["C$",br(wt.total)]})]})]}),i.jsxs("div",{ref:it,children:[yt==="MACRO"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ingreso (ventas)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(ht.ingreso)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin vendedor (ventas)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",br(ht.comision)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",br(xe.commCash),"  Crdito: C$",br(xe.commCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos (expenses_candies)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",br(ht.gastos)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automtico por fechas"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia neta (real)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(ht.gananciaNeta)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ingreso  Comisin  Gastos"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Promedio neto por da"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(ht.netaDia)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Das con ventas: ",i.jsx("strong",{children:ht.daysCount})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[i.jsx(W$,{title:"Ventas por da (Ingreso)",series:W.seriesIngreso,valuePrefix:"C$"}),i.jsx(W$,{title:"Ganancia neta por da (real)",series:W.seriesNeta,valuePrefix:"C$"})]}),i.jsx("div",{className:"mb-6",children:i.jsx(_Qe,{title:"Distribucin de ventas por sucursal",items:Te})})]}),yt==="DETALLE"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Os(xe.packsCash)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Os(xe.packsCredit)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(xe.salesTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",br(xe.salesCash),"  Crdito: C$",br(xe.salesCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(xe.commTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",br(xe.commCash),"  Crdito: C$",br(xe.commCredit)]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Aprox. (rdenes maestras)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(de.grossIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",br(de.expectedIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Actual ventas (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",br(Ue.ISLA.sales)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Diferencia vs esperado (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",br(Ke.ISLA)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado (precio proveedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(we)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes maestras (perodo)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad neta (rdenes vendedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(ve.net)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"U bruta  Gastos  U vendedor"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (maestras)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Os(mt.orderedPacksMaster)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",i.jsx("strong",{children:Os(mt.remainingPacksMaster)})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",i.jsx("strong",{children:Os(ke.masterRemainingPackages)})]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (rdenes vendedor)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Os(mt.orderedPacksVendor)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",i.jsx("strong",{children:Os(mt.remainingPacksVendor)})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",i.jsx("strong",{children:Os(ke.vendorRemainingPackages)})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado a precio proveedor (rdenes vendedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(mt.providerTotalVendor)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Productos dispersados (precio venta)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(be.dispersedTotal)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes de vendedores (perodo)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Dispersado Isla (precio venta)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(be.dispersedIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Usado para Total existente"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total existente en productos (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(be.totalExistenteIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esperado Isla  Dispersado Isla"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"CxC (ventas crdito)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(Ve.cxc)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(xe.commCredit)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Recaudacin (abonos)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(Ve.recaudado)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"abonos en ar_movements"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta crdito (ventas  comisin)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",br(Ve.utilidadBruta)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Paquetes vendidos al crdito"})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-4 shadow-sm bg-white border-gray-100",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Global)"}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Basado en ",i.jsx("strong",{children:"precio de venta"})," (por sucursal del vendedor)"]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",i.jsxs("strong",{children:["C$",br(ae.global.totalOrden)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",i.jsxs("strong",{children:["C$",br(ae.global.vendido)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",i.jsxs("strong",{children:["C$",br(ae.global.restante)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",i.jsxs("strong",{children:["C$",br(ae.global.comision)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",i.jsxs("strong",{children:["C$",br(ae.global.totalEsperado)]})]})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Detalle por orden)"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Click/Tap en una orden para ver productos asociados/vendidos/restantes"})]}),ae.orders.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:""}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2",children:ae.orders.map(T=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:T.orderId}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:[T.sellerName," ",T.branch?` ${T.branch}`:""," ",T.date?` ${T.date}`:""]})]}),i.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>se(T.orderKey),children:"Ver"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.totalOrden)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendido"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.vendido)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restante"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.restante)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.comision)]})]})]})]},T.orderKey))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total orden"}),i.jsx("th",{className:"border p-2",children:"Vendido"}),i.jsx("th",{className:"border p-2",children:"Restante"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Total esperado"}),i.jsx("th",{className:"border p-2",children:"Accin"})]})}),i.jsx("tbody",{children:ae.orders.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:T.sellerName}),i.jsx("td",{className:"border p-2",children:T.branch||""}),i.jsx("td",{className:"border p-2",children:T.date||""}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.totalOrden)]}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.vendido)]}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.restante)]}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.comision)]}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.totalEsperado)]}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>se(T.orderKey),children:"Ver detalle"})})]},T.orderKey))})]})}),ce&&i.jsxs("div",{className:"mt-4 rounded-2xl border-2 border-gray-100 p-3 sm:p-4 shadow-lg bg-white",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[i.jsxs("h4",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle orden vendedor  ",ce.orderId]}),i.jsx("button",{onClick:()=>se(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",i.jsxs("strong",{children:["C$",br(ce.totalOrden)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",i.jsxs("strong",{children:["C$",br(ce.vendido)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",i.jsxs("strong",{children:["C$",br(ce.restante)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",i.jsxs("strong",{children:["C$",br(ce.comision)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",i.jsxs("strong",{children:["C$",br(ce.totalEsperado)]})]})]}),i.jsx("h5",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Productos asociados (Nombre - Asociados - Vendidos - Restantes)"}),i.jsx("div",{className:"md:hidden space-y-2",children:ce.products.map(T=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsx("div",{className:"font-semibold",children:T.productName}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Asociados"}),i.jsx("div",{className:"font-bold",children:T.asociados})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendidos"}),i.jsx("div",{className:"font-bold",children:T.vendidos})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-bold",children:T.restantes})]})]})]},T.productName))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Nombre producto"}),i.jsx("th",{className:"border p-2",children:"Asociados"}),i.jsx("th",{className:"border p-2",children:"Vendidos"}),i.jsx("th",{className:"border p-2",children:"Restantes"})]})}),i.jsxs("tbody",{children:[ce.products.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:T.productName}),i.jsx("td",{className:"border p-2",children:T.asociados}),i.jsx("td",{className:"border p-2",children:T.vendidos}),i.jsx("td",{className:"border p-2",children:T.restantes})]},T.productName)),ce.products.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Sin productos."})})]})]})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (maestras)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Os(ke.masterRemainingPackages)}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (vendedores)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Os(ke.vendorRemainingPackages)}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),Ne.cashArr.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:Ne.cashArr.map(T=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:T.name}),i.jsxs("strong",{className:"ml-2",children:["C$",br(T.total)]})]},T.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),Ne.creditArr.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:Ne.creditArr.map(T=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:T.name}),i.jsxs("strong",{className:"ml-2",children:["C$",br(T.total)]})]},T.vendorId))})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[i.jsxs("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:["Saldos pendientes (hasta ",l,")"]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm mb-3",children:[i.jsxs("div",{children:["Clientes con saldo: ",i.jsx("strong",{children:Rt.count})]}),i.jsxs("div",{children:["Saldo total pendiente:"," ",i.jsxs("strong",{children:["C$",br(Rt.totalPending)]})]}),i.jsx("div",{className:"text-gray-500",children:"*Muestra top 20 por monto"})]}),Rt.list.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:""}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2",children:Rt.list.map(T=>i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:T.name}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",br(T.balance)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["ltimo abono: ",i.jsxs("b",{children:["C$",br(T.lastPaymentAmount)]})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha ult. abono:"," ",i.jsx("span",{className:"font-medium",children:T.lastPayment||""})]}),i.jsx("div",{className:"mt-2",children:i.jsx("button",{type:"button",onClick:()=>je(T),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},T.customerId))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Saldo pendiente"}),i.jsx("th",{className:"border p-2",children:"ltimo abono"}),i.jsx("th",{className:"border p-2",children:"Fecha ult. abono"}),i.jsx("th",{className:"border p-2",children:"Ver"})]})}),i.jsx("tbody",{children:Rt.list.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:T.name}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.balance)]}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.lastPaymentAmount)]}),i.jsx("td",{className:"border p-2",children:T.lastPayment||""}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{type:"button",onClick:()=>je(T),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},T.customerId))})]})})]})]}),i.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2",children:[i.jsxs("h3",{className:"font-semibold text-sm sm:text-base",children:["Tabla principal (Agrupar por: ",E,")"]}),i.jsx("span",{className:"text-xs text-gray-500 sm:ml-auto",children:"Tap/Click en Ver detalle para drill-down"})]}),P?i.jsx("p",{className:"text-sm",children:"Cargando..."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2 mb-6",children:dt.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."}):dt.map(T=>i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:T.label}),i.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>Ie(T.key),children:"Ver detalle"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"font-bold",children:Os(T.packsCash)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"font-bold",children:Os(T.packsCredit)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.salesCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.salesCredit)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.commCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.commCredit)]})]})]})]},T.key))}),i.jsx("div",{className:"hidden md:block overflow-x-auto mb-6 shadow-2xl rounded-xl border",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:E==="DIA"?"Da":E==="VENDEDOR"?"Vendedor":E==="PRODUCTO"?"Producto":"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"}),i.jsx("th",{className:"border p-2",children:"Opciones"})]})}),i.jsxs("tbody",{children:[dt.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:T.label}),i.jsx("td",{className:"border p-2",children:Os(T.packsCash)}),i.jsx("td",{className:"border p-2",children:Os(T.packsCredit)}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.salesCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.salesCredit)]}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.commCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.commCredit)]}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>Ie(T.key),children:"Ver detalle"})})]},T.key)),dt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."})})]})]})})]}),ee&&i.jsxs("div",{className:"rounded-2xl shadow-lg p-3 sm:p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[i.jsxs("h2",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle "," ",((ut=dt.find(T=>T.key===ee))==null?void 0:ut.label)||ee]}),i.jsx("button",{onClick:()=>Ie(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas cash:"," ",i.jsxs("strong",{children:["C$",br(ft.filter(T=>T.type==="CONTADO").reduce((T,M)=>T+xr(M.amount),0))]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas crdito:"," ",i.jsxs("strong",{children:["C$",br(ft.filter(T=>T.type==="CREDITO").reduce((T,M)=>T+xr(M.amount),0))]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes cash:"," ",i.jsx("strong",{children:Os(ft.filter(T=>T.type==="CONTADO").reduce((T,M)=>T+xr(M.packages),0))})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes crdito:"," ",i.jsx("strong",{children:Os(ft.filter(T=>T.type==="CREDITO").reduce((T,M)=>T+xr(M.packages),0))})]})]}),i.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Ventas incluidas"}),i.jsx("div",{className:"md:hidden space-y-2 mb-4",children:ft.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin detalle."}):ft.map(T=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:T.productName}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",br(T.amount)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendedor:"," ",i.jsx("span",{className:"font-medium",children:T.vendorName})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Tipo"}),i.jsx("div",{className:"font-bold",children:T.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Sucursal"}),i.jsx("div",{className:"font-bold",children:T.branch||""})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-bold",children:Os(T.packages)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.commission)]})]})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Fecha: ",T.date]})]},T.id))}),i.jsx("div",{className:"hidden md:block overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),i.jsxs("tbody",{children:[ft.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2",children:T.vendorName}),i.jsx("td",{className:"border p-2",children:T.productName}),i.jsx("td",{className:"border p-2",children:T.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-2",children:T.branch||""}),i.jsx("td",{className:"border p-2",children:Os(T.packages)}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.amount)]}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.commission)]}),i.jsx("td",{className:"border p-2",children:T.date})]},T.id)),ft.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin detalle."})})]})]})}),i.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Consolidado por producto"}),i.jsx("div",{className:"md:hidden space-y-2",children:gt.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin consolidado."}):gt.map(T=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsx("div",{className:"font-semibold",children:T.productName}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paq cash"}),i.jsx("div",{className:"font-bold",children:Os(T.packsCash)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paq crdito"}),i.jsx("div",{className:"font-bold",children:Os(T.packsCredit)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.salesCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.salesCredit)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Com cash"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.commCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Com crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",br(T.commCredit)]})]})]})]},T.productName))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),i.jsxs("tbody",{children:[gt.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:T.productName}),i.jsx("td",{className:"border p-2",children:Os(T.packsCash)}),i.jsx("td",{className:"border p-2",children:Os(T.packsCredit)}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.salesCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.salesCredit)]}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.commCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",br(T.commCredit)]})]},T.productName)),gt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sin consolidado."})})]})]})})]})]})]}),D&&i.jsx("p",{className:"mt-3 text-sm",children:D})]}),Ee&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-lg",children:Ee.name}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Saldo pendiente: ",i.jsxs("b",{children:["C$",br(Ee.balance)]})]})]}),i.jsx("button",{type:"button",onClick:()=>je(null),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Saldo"})]})}),i.jsx("tbody",{children:ot.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"border p-2 text-center text-gray-500",children:"Sin movimientos."})}):ot.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:T.date||""}),i.jsx("td",{className:"border p-1",children:T.type||""}),i.jsxs("td",{className:"border p-1",children:["C$",br(T.amount)]}),i.jsxs("td",{className:"border p-1",children:["C$",br(T.running)]})]},T.id))})]})}),i.jsx("div",{className:"mt-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Monto"})]})}),i.jsx("tbody",{children:Se.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"border p-2 text-center text-gray-500",children:"Sin ventas asociadas."})}):Se.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:T.date||""}),i.jsx("td",{className:"border p-1",children:T.productName||""}),i.jsx("td",{className:"border p-1",children:T.vendorName||""}),i.jsx("td",{className:"border p-1",children:T.type||""}),i.jsxs("td",{className:"border p-1",children:["C$",br(T.amount)]})]},T.id))})]})})]})})]}):i.jsxs("div",{className:"max-w-5xl mx-auto p-3 sm:p-4 md:p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Data Center - Dulces"}),i.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No autorizado."})]})}function cse(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=cse(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ka(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=cse(t))&&(n&&(n+=" "),n+=e);return n}var IQe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function wR(t){if(typeof t!="string")return!1;var e=IQe;return e.includes(t)}var jQe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PQe=new Set(jQe);function use(t){return typeof t!="string"?!1:PQe.has(t)}function dse(t){return typeof t=="string"&&t.startsWith("data-")}function Hf(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(use(r)||dse(r))&&(e[r]=t[r]);return e}function L2(t){if(t==null)return null;if(x.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Hf(e)}return typeof t=="object"&&!Array.isArray(t)?Hf(t):null}function dd(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(use(r)||dse(r)||wR(r))&&(e[r]=t[r]);return e}var BQe=["children","width","height","viewBox","className","style","title","desc"];function eF(){return eF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eF.apply(null,arguments)}function TQe(t,e){if(t==null)return{};var r,n,a=kQe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function kQe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var NR=x.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=t,d=TQe(t,BQe),f=s||{width:n,height:a,x:0,y:0},A=ka("recharts-surface",o);return x.createElement("svg",eF({},dd(d),{className:A,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),x.createElement("title",null,c),x.createElement("desc",null,u),r)}),FQe=["children","className"];function tF(){return tF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tF.apply(null,arguments)}function OQe(t,e){if(t==null)return{};var r,n,a=DQe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function DQe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var ic=x.forwardRef((t,e)=>{var{children:r,className:n}=t,a=OQe(t,FQe),s=ka("recharts-layer",n);return x.createElement("g",tF({className:s},dd(a),{ref:e}),r)}),fse=x.createContext(null),RQe=()=>x.useContext(fse);function Wa(t){return function(){return t}}const hse=Math.cos,qS=Math.sin,cf=Math.sqrt,zS=Math.PI,s4=2*zS,rF=Math.PI,nF=2*rF,Xm=1e-6,MQe=nF-Xm;function Ase(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function LQe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ase;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class UQe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ase:LQe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-e,u=a-r,d=o-e,f=l-r,A=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(A>Xm)if(!(Math.abs(f*c-u*d)>Xm)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let h=n-o,m=a-l,p=c*c+u*u,g=h*h+m*m,v=Math.sqrt(p),y=Math.sqrt(A),b=s*Math.tan((rF-Math.acos((p+A-g)/(2*v*y)))/2),w=b/y,j=b/v;Math.abs(w-1)>Xm&&this._append`L${e+w*d},${r+w*f}`,this._append`A${s},${s},0,0,${+(f*h>d*m)},${this._x1=e+j*c},${this._y1=r+j*u}`}}arc(e,r,n,a,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,f=1^o,A=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Xm||Math.abs(this._y1-d)>Xm)&&this._append`L${u},${d}`,n&&(A<0&&(A=A%nF+nF),A>MQe?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:A>Xm&&this._append`A${n},${n},0,${+(A>=rF)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function CR(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new UQe(e)}function _R(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function mse(t){this._context=t}mse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function i4(t){return new mse(t)}function pse(t){return t[0]}function gse(t){return t[1]}function xse(t,e){var r=Wa(!0),n=null,a=i4,s=null,o=CR(l);t=typeof t=="function"?t:t===void 0?pse:Wa(t),e=typeof e=="function"?e:e===void 0?gse:Wa(e);function l(c){var u,d=(c=_R(c)).length,f,A=!1,h;for(n==null&&(s=a(h=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===A&&((A=!A)?s.lineStart():s.lineEnd()),A&&s.point(+t(f,u,c),+e(f,u,c));if(h)return s=null,h+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Wa(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Wa(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Wa(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function a_(t,e,r){var n=null,a=Wa(!0),s=null,o=i4,l=null,c=CR(u);t=typeof t=="function"?t:t===void 0?pse:Wa(+t),e=typeof e=="function"?e:Wa(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?gse:Wa(+r);function u(f){var A,h,m,p=(f=_R(f)).length,g,v=!1,y,b=new Array(p),w=new Array(p);for(s==null&&(l=o(y=c())),A=0;A<=p;++A){if(!(A<p&&a(g=f[A],A,f))===v)if(v=!v)h=A,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=A-1;m>=h;--m)l.point(b[m],w[m]);l.lineEnd(),l.areaEnd()}v&&(b[A]=+t(g,A,f),w[A]=+e(g,A,f),l.point(n?+n(g,A,f):b[A],r?+r(g,A,f):w[A]))}if(y)return l=null,y+""||null}function d(){return xse().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Wa(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Wa(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Wa(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Wa(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Wa(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Wa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Wa(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class vse{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function QQe(t){return new vse(t,!0)}function VQe(t){return new vse(t,!1)}const ER={draw(t,e){const r=cf(e/zS);t.moveTo(r,0),t.arc(0,0,r,0,s4)}},HQe={draw(t,e){const r=cf(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},yse=cf(1/3),$Qe=yse*2,GQe={draw(t,e){const r=cf(e/$Qe),n=r*yse;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},KQe={draw(t,e){const r=cf(e),n=-r/2;t.rect(n,n,r,r)}},qQe=.8908130915292852,bse=qS(zS/10)/qS(7*zS/10),zQe=qS(s4/10)*bse,WQe=-hse(s4/10)*bse,XQe={draw(t,e){const r=cf(e*qQe),n=zQe*r,a=WQe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const o=s4*s/5,l=hse(o),c=qS(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},K5=cf(3),YQe={draw(t,e){const r=-cf(e/(K5*3));t.moveTo(0,r*2),t.lineTo(-K5*r,-r),t.lineTo(K5*r,-r),t.closePath()}},Ou=-.5,Du=cf(3)/2,aF=1/cf(12),JQe=(aF/2+1)*3,ZQe={draw(t,e){const r=cf(e/JQe),n=r/2,a=r*aF,s=n,o=r*aF+r,l=-s,c=o;t.moveTo(n,a),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Ou*n-Du*a,Du*n+Ou*a),t.lineTo(Ou*s-Du*o,Du*s+Ou*o),t.lineTo(Ou*l-Du*c,Du*l+Ou*c),t.lineTo(Ou*n+Du*a,Ou*a-Du*n),t.lineTo(Ou*s+Du*o,Ou*o-Du*s),t.lineTo(Ou*l+Du*c,Ou*c-Du*l),t.closePath()}};function eVe(t,e){let r=null,n=CR(a);t=typeof t=="function"?t:Wa(t||ER),e=typeof e=="function"?e:Wa(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:Wa(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:Wa(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function WS(){}function XS(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function wse(t){this._context=t}wse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:XS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:XS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tVe(t){return new wse(t)}function Nse(t){this._context=t}Nse.prototype={areaStart:WS,areaEnd:WS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:XS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function rVe(t){return new Nse(t)}function Cse(t){this._context=t}Cse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:XS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function nVe(t){return new Cse(t)}function _se(t){this._context=t}_se.prototype={areaStart:WS,areaEnd:WS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function aVe(t){return new _se(t)}function X$(t){return t<0?-1:1}function Y$(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(X$(s)+X$(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function J$(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function q5(t,e,r){var n=t._x0,a=t._y0,s=t._x1,o=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,o-l*r,s,o)}function YS(t){this._context=t}YS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:q5(this,this._t0,J$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,q5(this,J$(this,r=Y$(this,t,e)),r);break;default:q5(this,this._t0,r=Y$(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Ese(t){this._context=new Sse(t)}(Ese.prototype=Object.create(YS.prototype)).point=function(t,e){YS.prototype.point.call(this,e,t)};function Sse(t){this._context=t}Sse.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function sVe(t){return new YS(t)}function iVe(t){return new Ese(t)}function Ise(t){this._context=t}Ise.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=Z$(t),a=Z$(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Z$(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function oVe(t){return new Ise(t)}function o4(t,e){this._context=t,this._t=e}o4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function lVe(t){return new o4(t,.5)}function cVe(t){return new o4(t,0)}function uVe(t){return new o4(t,1)}function ag(t,e){if((o=t.length)>1)for(var r=1,n,a,s=t[e[0]],o,l=s.length;r<o;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function sF(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function dVe(t,e){return t[e]}function fVe(t){const e=[];return e.key=t,e}function hVe(){var t=Wa([]),e=sF,r=ag,n=dVe;function a(s){var o=Array.from(t.apply(this,arguments),fVe),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=_R(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Wa(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Wa(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?sF:typeof s=="function"?s:Wa(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??ag,a):r},a}function AVe(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}ag(t,e)}}function mVe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}ag(t,e)}}function pVe(t,e){if(!(!((o=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],f=d[n][1]||0,A=d[n-1][1]||0,h=(f-A)/2,m=0;m<l;++m){var p=t[e[m]],g=p[n][1]||0,v=p[n-1][1]||0;h+=g-v}c+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,ag(t,e)}}var l4={},jse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(jse);var SR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(SR);var c4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(c4);var u4={},Pse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(Pse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Pse,r=c4;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],o=a.length;if(o===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<o;){const f=a[l];u?f==="\\"&&l+1<o?(l++,c+=a[l]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,s.push(c),c=""):c+=f:f==="["?(d=!0,c&&(s.push(c),c="")):f==="."?c&&(s.push(c),c=""):c+=f,l++}return c&&s.push(c),s}t.toPath=n})(u4);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jse,r=SR,n=c4,a=u4;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||e.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}t.get=s})(l4);var gVe=l4.get;const sg=dA(gVe);var xVe=4;function T0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xVe,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function ti(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((a,s,o)=>{var l=r[o-1];return typeof l=="string"?a+l+s:l!==void 0?a+T0(l)+s:a+s},"")}var sl=t=>t===0?0:t>0?1:-1,$f=t=>typeof t=="number"&&t!=+t,aA=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,rn=t=>(typeof t=="number"||t instanceof Number)&&!$f(t),Gf=t=>rn(t)||typeof t=="string",vVe=0,U2=t=>{var e=++vVe;return"".concat(t||"").concat(e)},kl=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!rn(e)&&typeof e!="string")return n;var s;if(aA(e)){if(r==null)return n;var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return $f(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Bse=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function Ji(t,e,r){return rn(t)&&rn(e)?T0(t+r*(e-t)):e}function yVe(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):sg(n,e))===r)}var Oo=t=>t===null||typeof t>"u",Mw=t=>Oo(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function bVe(t){return t!=null}function Lw(){}var wVe=["type","size","sizeType"];function iF(){return iF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iF.apply(null,arguments)}function eG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eG(Object(r),!0).forEach(function(n){NVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function NVe(t,e,r){return(e=CVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CVe(t){var e=_Ve(t,"string");return typeof e=="symbol"?e:e+""}function _Ve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EVe(t,e){if(t==null)return{};var r,n,a=SVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function SVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Tse={symbolCircle:ER,symbolCross:HQe,symbolDiamond:GQe,symbolSquare:KQe,symbolStar:XQe,symbolTriangle:YQe,symbolWye:ZQe},IVe=Math.PI/180,jVe=t=>{var e="symbol".concat(Mw(t));return Tse[e]||ER},PVe=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*IVe;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},BVe=(t,e)=>{Tse["symbol".concat(Mw(t))]=e},IR=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=EVe(t,wVe),s=tG(tG({},a),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var l=()=>{var A=jVe(o),h=eVe().type(A).size(PVe(r,n,o)),m=h();if(m!==null)return m},{className:c,cx:u,cy:d}=s,f=dd(s);return rn(u)&&rn(d)&&rn(r)?x.createElement("path",iF({},f,{className:ka("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};IR.registerSymbol=BVe;var kse=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,TVe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(x.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{wR(a)&&(n[a]=s=>r[a](r,s))}),n},kVe=(t,e,r)=>n=>(t(e,r,n),null),Uw=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];wR(a)&&typeof s=="function"&&(n||(n={}),n[a]=kVe(s,e,r))}),n};function rG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function FVe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rG(Object(r),!0).forEach(function(n){OVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OVe(t,e,r){return(e=DVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DVe(t){var e=RVe(t,"string");return typeof e=="symbol"?e:e+""}function RVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ll(t,e){var r=FVe({},t),n=e,a=Object.keys(e),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}function JS(){return JS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JS.apply(null,arguments)}function nG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function MVe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nG(Object(r),!0).forEach(function(n){LVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LVe(t,e,r){return(e=UVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UVe(t){var e=QVe(t,"string");return typeof e=="symbol"?e:e+""}function QVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hu=32,VVe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function HVe(t){var{data:e,iconType:r,inactiveColor:n}=t,a=Hu/2,s=Hu/6,o=Hu/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return x.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:Hu,y2:a,className:"recharts-legend-icon"})}if(c==="line")return x.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Hu,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return x.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Hu/8,"h").concat(Hu,"v").concat(Hu*3/4,"h").concat(-Hu,"z"),className:"recharts-legend-icon"});if(x.isValidElement(e.legendIcon)){var d=MVe({},e);return delete d.legendIcon,x.cloneElement(e.legendIcon,d)}return x.createElement(IR,{fill:l,cx:a,cy:a,size:Hu,sizeType:"diameter",type:c})}function $Ve(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=t,l={x:0,y:0,width:Hu,height:Hu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var A=d.formatter||a,h=ka({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,p=A?A(d.value,d,f):d.value;return x.createElement("li",JS({className:h,style:c,key:"legend-item-".concat(f)},Uw(t,d,f)),x.createElement(NR,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(p," legend icon")},x.createElement(HVe,{data:d,iconType:o,inactiveColor:s})),x.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var GVe=t=>{var e=ll(t,VVe),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return x.createElement("ul",{className:"recharts-default-legend",style:s},x.createElement($Ve,JS({},e,{payload:r})))},Fse={},Ose={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}t.uniqBy=e})(Ose);var jR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(jR);var Dse={},d4={},Rse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(Rse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rse;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(d4);var Mse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(Mse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=d4,r=Mse;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(Dse);var Lse={},Use={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=l4;function r(n){return function(a){return e.get(a,n)}}t.property=r})(Use);var Qse={},PR={},Vse={},BR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(BR);var TR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(TR);var kR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(kR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BR,r=TR,n=kR;function a(d,f,A){return typeof A!="function"?a(d,f,()=>{}):s(d,f,function h(m,p,g,v,y,b){const w=A(m,p,g,v,y,b);return w!==void 0?!!w:s(m,p,h,b)},new Map)}function s(d,f,A,h){if(f===d)return!0;switch(typeof f){case"object":return o(d,f,A,h);case"function":return Object.keys(f).length>0?s(d,{...f},A,h):n.eq(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function o(d,f,A,h){if(f==null)return!0;if(Array.isArray(f))return c(d,f,A,h);if(f instanceof Map)return l(d,f,A,h);if(f instanceof Set)return u(d,f,A,h);const m=Object.keys(f);if(d==null||r.isPrimitive(d))return m.length===0;if(m.length===0)return!0;if(h!=null&&h.has(f))return h.get(f)===d;h==null||h.set(f,d);try{for(let p=0;p<m.length;p++){const g=m[p];if(!r.isPrimitive(d)&&!(g in d)||f[g]===void 0&&d[g]!==void 0||f[g]===null&&d[g]!==null||!A(d[g],f[g],g,d,f,h))return!1}return!0}finally{h==null||h.delete(f)}}function l(d,f,A,h){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[m,p]of f.entries()){const g=d.get(m);if(A(g,p,m,d,f,h)===!1)return!1}return!0}function c(d,f,A,h){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const m=new Set;for(let p=0;p<f.length;p++){const g=f[p];let v=!1;for(let y=0;y<d.length;y++){if(m.has(y))continue;const b=d[y];let w=!1;if(A(b,g,p,d,f,h)&&(w=!0),w){m.add(y),v=!0;break}}if(!v)return!1}return!0}function u(d,f,A,h){return f.size===0?!0:d instanceof Set?c([...d],[...f],A,h):!1}t.isMatchWith=a,t.isSetMatch=u})(Vse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vse;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(PR);var Hse={},FR={},$se={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})($se);var OR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(OR);var DR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",A="[object ArrayBuffer]",h="[object Object]",m="[object Error]",p="[object DataView]",g="[object Uint8Array]",v="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w="[object BigUint64Array]",j="[object Int8Array]",I="[object Int16Array]",_="[object Int32Array]",S="[object BigInt64Array]",E="[object Float32Array]",F="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=A,t.arrayTag=d,t.bigInt64ArrayTag=S,t.bigUint64ArrayTag=w,t.booleanTag=a,t.dataViewTag=p,t.dateTag=l,t.errorTag=m,t.float32ArrayTag=E,t.float64ArrayTag=F,t.functionTag=f,t.int16ArrayTag=I,t.int32ArrayTag=_,t.int8ArrayTag=j,t.mapTag=c,t.numberTag=n,t.objectTag=h,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=y,t.uint32ArrayTag=b,t.uint8ArrayTag=g,t.uint8ClampedArrayTag=v})(DR);var Gse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(Gse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$se,r=OR,n=DR,a=TR,s=Gse;function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,A,h=new Map,m=void 0){const p=m==null?void 0:m(d,f,A,h);if(p!==void 0)return p;if(a.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const g=new Array(d.length);h.set(d,g);for(let v=0;v<d.length;v++)g[v]=l(d[v],v,A,h,m);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;h.set(d,g);for(const[v,y]of d)g.set(v,l(y,v,A,h,m));return g}if(d instanceof Set){const g=new Set;h.set(d,g);for(const v of d)g.add(l(v,void 0,A,h,m));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,g);for(let v=0;v<d.length;v++)g[v]=l(d[v],v,A,h,m);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,g),c(g,d,A,h,m),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return h.set(d,g),c(g,d,A,h,m),g}if(typeof Blob<"u"&&d instanceof Blob){const g=new Blob([d],{type:d.type});return h.set(d,g),c(g,d,A,h,m),g}if(d instanceof Error){const g=new d.constructor;return h.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,A,h,m),g}if(d instanceof Boolean){const g=new Boolean(d.valueOf());return h.set(d,g),c(g,d,A,h,m),g}if(d instanceof Number){const g=new Number(d.valueOf());return h.set(d,g),c(g,d,A,h,m),g}if(d instanceof String){const g=new String(d.valueOf());return h.set(d,g),c(g,d,A,h,m),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return h.set(d,g),c(g,d,A,h,m),g}return d}function c(d,f,A=d,h,m){const p=[...Object.keys(f),...e.getSymbols(f)];for(let g=0;g<p.length;g++){const v=p[g],y=Object.getOwnPropertyDescriptor(d,v);(y==null||y.writable)&&(d[v]=l(f[v],v,A,h,m))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=l,t.copyProperties=c})(FR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FR;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(Hse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PR,r=Hse;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})(Qse);var Kse={},qse={},zse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FR,r=DR;function n(a,s){return e.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(f,a),f}case r.argumentsTag:{const f={};return e.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}t.cloneDeepWith=n})(zse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zse;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(qse);var Wse={},RR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(RR);var Xse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OR;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(Xse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SR,r=RR,n=Xse,a=u4;function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=s})(Wse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PR,r=c4,n=qse,a=l4,s=Wse;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=o})(Kse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jR,r=Use,n=Qse,a=Kse;function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=s})(Lse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ose,r=jR,n=Dse,a=Lse;function s(o,l=r.identity){return n.isArrayLikeObject(o)?e.uniqBy(Array.from(o),a.iteratee(l)):[]}t.uniqBy=s})(Fse);var KVe=Fse.uniqBy;const aG=dA(KVe);function Yse(t,e,r){return e===!0?aG(t,r):typeof e=="function"?aG(t,e):t}var Jse={exports:{}},Zse={},eie={exports:{}},tie={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv=x;function qVe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zVe=typeof Object.is=="function"?Object.is:qVe,WVe=kv.useState,XVe=kv.useEffect,YVe=kv.useLayoutEffect,JVe=kv.useDebugValue;function ZVe(t,e){var r=e(),n=WVe({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return YVe(function(){a.value=r,a.getSnapshot=e,z5(a)&&s({inst:a})},[t,r,e]),XVe(function(){return z5(a)&&s({inst:a}),t(function(){z5(a)&&s({inst:a})})},[t]),JVe(r),r}function z5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!zVe(t,r)}catch{return!0}}function eHe(t,e){return e()}var tHe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?eHe:ZVe;tie.useSyncExternalStore=kv.useSyncExternalStore!==void 0?kv.useSyncExternalStore:tHe;eie.exports=tie;var rHe=eie.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f4=x,nHe=rHe;function aHe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sHe=typeof Object.is=="function"?Object.is:aHe,iHe=nHe.useSyncExternalStore,oHe=f4.useRef,lHe=f4.useEffect,cHe=f4.useMemo,uHe=f4.useDebugValue;Zse.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=oHe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=cHe(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var m=o.value;if(a(m,h))return f=m}return f=h}if(m=f,sHe(d,h))return m;var p=n(h);return a!==void 0&&a(m,p)?(d=h,m):(d=h,f=p)}var u=!1,d,f,A=r===void 0?null:r;return[function(){return c(e())},A===null?void 0:function(){return c(A())}]},[e,r,n,a]);var l=iHe(t,s[0],s[1]);return lHe(function(){o.hasValue=!0,o.value=l},[l]),uHe(l),l};Jse.exports=Zse;var dHe=Jse.exports,MR=x.createContext(null),fHe=t=>t,es=()=>{var t=x.useContext(MR);return t?t.store.dispatch:fHe},uE=()=>{},hHe=()=>uE,AHe=(t,e)=>t===e;function Jr(t){var e=x.useContext(MR);return dHe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:hHe,e?e.store.getState:uE,e?e.store.getState:uE,e?t:uE,AHe)}function mHe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function pHe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function gHe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var sG=t=>Array.isArray(t)?t:[t];function xHe(t){const e=Array.isArray(t[0])?t[0]:t;return gHe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function vHe(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var yHe=class{constructor(t){this.value=t}deref(){return this.value}},bHe=typeof WeakRef<"u"?WeakRef:yHe,wHe=0,iG=1;function s_(){return{s:wHe,v:void 0,o:null,p:null}}function rie(t,e={}){let r=s_();const{resultEqualityCheck:n}=e;let a,s=0;function o(){var f;let l=r;const{length:c}=arguments;for(let A=0,h=c;A<h;A++){const m=arguments[A];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=l.o;p===null&&(l.o=p=new WeakMap);const g=p.get(m);g===void 0?(l=s_(),p.set(m,l)):l=g}else{let p=l.p;p===null&&(l.p=p=new Map);const g=p.get(m);g===void 0?(l=s_(),p.set(m,l)):l=g}}const u=l;let d;if(l.s===iG)d=l.v;else if(d=t.apply(null,arguments),s++,n){const A=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;A!=null&&n(A,d)&&(d=A,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new bHe(d):d}return u.s=iG,u.v=d,d}return o.clearCache=()=>{r=s_(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function NHe(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),mHe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:A=[],argsMemoize:h=rie,argsMemoizeOptions:m=[]}=d,p=sG(A),g=sG(m),v=xHe(a),y=f(function(){return s++,u.apply(null,arguments)},...p),b=h(function(){o++;const j=vHe(v,arguments);return l=y.apply(null,j),l},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var Gt=NHe(rie),CHe=Object.assign((t,e=Gt)=>{pHe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>CHe}),nie={},aie={},sie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=e(n),l=e(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};t.compareValues=r})(sie);var iie={},LR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(LR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LR,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=a})(iie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sie,r=iie,n=u4;function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(h=>String(h));const u=(h,m)=>{let p=h;for(let g=0;g<m.length&&p!=null;++g)p=p[m[g]];return p},d=(h,m)=>m==null||h==null?m:typeof h=="object"&&"key"in h?Object.hasOwn(m,h.key)?m[h.key]:u(m,h.path):typeof h=="function"?h(m):Array.isArray(h)?u(m,h):typeof m=="object"?m[h]:m,f=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return s.map(h=>({original:h,criteria:f.map(m=>d(m,h))})).slice().sort((h,m)=>{for(let p=0;p<f.length;p++){const g=e.compareValues(h.criteria[p],m.criteria[p],l[p]);if(g!==0)return g}return 0}).map(h=>h.original)}t.orderBy=a})(aie);var oie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}t.flatten=e})(oie);var UR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RR,r=d4,n=BR,a=kR;function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}t.isIterateeCall=s})(UR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aie,r=oie,n=UR;function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,r.flatten(o),["asc"])}t.sortBy=a})(nie);var _He=nie.sortBy;const h4=dA(_He);var lie=t=>t.legend.settings,EHe=t=>t.legend.size,SHe=t=>t.legend.payload,IHe=Gt([SHe,lie],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?h4(n,r):n});function jHe(){return Jr(IHe)}var i_=1;function cie(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=x.useState({height:0,left:0,top:0,width:0}),n=x.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>i_||Math.abs(o.left-e.left)>i_||Math.abs(o.top-e.top)>i_||Math.abs(o.width-e.width)>i_)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function zo(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var PHe=typeof Symbol=="function"&&Symbol.observable||"@@observable",oG=PHe,W5=()=>Math.random().toString(36).substring(7).split("").join("."),BHe={INIT:`@@redux/INIT${W5()}`,REPLACE:`@@redux/REPLACE${W5()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${W5()}`},ZS=BHe;function QR(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function uie(t,e,r){if(typeof t!="function")throw new Error(zo(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(zo(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(zo(1));return r(uie)(t,e)}let n=t,a=e,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((g,v)=>{o.set(v,g)}))}function d(){if(c)throw new Error(zo(3));return a}function f(g){if(typeof g!="function")throw new Error(zo(4));if(c)throw new Error(zo(5));let v=!0;u();const y=l++;return o.set(y,g),function(){if(v){if(c)throw new Error(zo(6));v=!1,u(),o.delete(y),s=null}}}function A(g){if(!QR(g))throw new Error(zo(7));if(typeof g.type>"u")throw new Error(zo(8));if(typeof g.type!="string")throw new Error(zo(17));if(c)throw new Error(zo(9));try{c=!0,a=n(a,g)}finally{c=!1}return(s=o).forEach(y=>{y()}),g}function h(g){if(typeof g!="function")throw new Error(zo(10));n=g,A({type:ZS.REPLACE})}function m(){const g=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(zo(11));function y(){const w=v;w.next&&w.next(d())}return y(),{unsubscribe:g(y)}},[oG](){return this}}}return A({type:ZS.INIT}),{dispatch:A,subscribe:f,getState:d,replaceReducer:h,[oG]:m}}function THe(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:ZS.INIT})>"u")throw new Error(zo(12));if(typeof r(void 0,{type:ZS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(zo(13))})}function die(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let a;try{THe(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],A=r[f],h=o[f],m=A(h,l);if(typeof m>"u")throw l&&l.type,new Error(zo(14));u[f]=m,c=c||m!==h}return c=c||n.length!==Object.keys(o).length,c?u:o}}function eI(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function kHe(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(zo(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=t.map(c=>c(o));return s=eI(...l)(a.dispatch),{...a,dispatch:s}}}function fie(t){return QR(t)&&"type"in t&&typeof t.type=="string"}var hie=Symbol.for("immer-nothing"),lG=Symbol.for("immer-draftable"),oc=Symbol.for("immer-state");function Md(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var lu=Object,Fv=lu.getPrototypeOf,tI="constructor",A4="prototype",oF="configurable",rI="enumerable",dE="writable",Q2="value",sA=t=>!!t&&!!t[oc];function ef(t){var e;return t?Aie(t)||p4(t)||!!t[lG]||!!((e=t[tI])!=null&&e[lG])||g4(t)||x4(t):!1}var FHe=lu[A4][tI].toString(),cG=new WeakMap;function Aie(t){if(!t||!VR(t))return!1;const e=Fv(t);if(e===null||e===lu[A4])return!0;const r=lu.hasOwnProperty.call(e,tI)&&e[tI];if(r===Object)return!0;if(!Cx(r))return!1;let n=cG.get(r);return n===void 0&&(n=Function.toString.call(r),cG.set(r,n)),n===FHe}function m4(t,e,r=!0){Qw(t)===0?(r?Reflect.ownKeys(t):lu.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function Qw(t){const e=t[oc];return e?e.type_:p4(t)?1:g4(t)?2:x4(t)?3:0}var uG=(t,e,r=Qw(t))=>r===2?t.has(e):lu[A4].hasOwnProperty.call(t,e),lF=(t,e,r=Qw(t))=>r===2?t.get(e):t[e],nI=(t,e,r,n=Qw(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function OHe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var p4=Array.isArray,g4=t=>t instanceof Map,x4=t=>t instanceof Set,VR=t=>typeof t=="object",Cx=t=>typeof t=="function",X5=t=>typeof t=="boolean";function DHe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Nh=t=>t.copy_||t.base_,HR=t=>t.modified_?t.copy_:t.base_;function cF(t,e){if(g4(t))return new Map(t);if(x4(t))return new Set(t);if(p4(t))return Array[A4].slice.call(t);const r=Aie(t);if(e===!0||e==="class_only"&&!r){const n=lu.getOwnPropertyDescriptors(t);delete n[oc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l[dE]===!1&&(l[dE]=!0,l[oF]=!0),(l.get||l.set)&&(n[o]={[oF]:!0,[dE]:!0,[rI]:l[rI],[Q2]:t[o]})}return lu.create(Fv(t),n)}else{const n=Fv(t);if(n!==null&&r)return{...t};const a=lu.create(n);return lu.assign(a,t)}}function $R(t,e=!1){return v4(t)||sA(t)||!ef(t)||(Qw(t)>1&&lu.defineProperties(t,{set:o_,add:o_,clear:o_,delete:o_}),lu.freeze(t),e&&m4(t,(r,n)=>{$R(n,!0)},!1)),t}function RHe(){Md(2)}var o_={[Q2]:RHe};function v4(t){return t===null||!VR(t)?!0:lu.isFrozen(t)}var aI="MapSet",uF="Patches",dG="ArrayMethods",mie={};function ig(t){const e=mie[t];return e||Md(0,t),e}var fG=t=>!!mie[t],V2,pie=()=>V2,MHe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:fG(aI)?ig(aI):void 0,arrayMethodsPlugin_:fG(dG)?ig(dG):void 0});function hG(t,e){e&&(t.patchPlugin_=ig(uF),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function dF(t){fF(t),t.drafts_.forEach(LHe),t.drafts_=null}function fF(t){t===V2&&(V2=t.parent_)}var AG=t=>V2=MHe(V2,t);function LHe(t){const e=t[oc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function mG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[oc].modified_&&(dF(e),Md(4)),ef(t)&&(t=pG(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[oc].base_,t,e)}else t=pG(e,r);return UHe(e,t,!0),dF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==hie?t:void 0}function pG(t,e){if(v4(e))return e;const r=e[oc];if(!r)return sI(e,t.handledSet_,t);if(!y4(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);vie(r,t)}return r.copy_}function UHe(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&$R(e,r)}function gie(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var y4=(t,e)=>t.scope_===e,QHe=[];function xie(t,e,r,n){const a=Nh(t),s=t.type_;if(n!==void 0&&lF(a,n,s)===e){nI(a,n,r,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;m4(a,(c,u)=>{if(sA(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const o=t.draftLocations_.get(e)??QHe;for(const l of o)nI(a,l,r,s)}function VHe(t,e,r){t.callbacks_.push(function(a){var l;const s=e;if(!s||!y4(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const o=HR(s);xie(t,s.draft_??s,o,r),vie(s,a)})}function vie(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}gie(t)}}function HHe(t,e,r){const{scope_:n}=t;if(sA(r)){const a=r[oc];y4(a,n)&&a.callbacks_.push(function(){fE(t);const o=HR(a);xie(t,r,o,e)})}else ef(r)&&t.callbacks_.push(function(){const s=Nh(t);t.type_===3?s.has(r)&&sI(r,n.handledSet_,n):lF(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&sI(lF(t.copy_,e,t.type_),n.handledSet_,n)})}function sI(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||sA(t)||e.has(t)||!ef(t)||v4(t)||(e.add(t),m4(t,(n,a)=>{if(sA(a)){const s=a[oc];if(y4(s,r)){const o=HR(s);nI(t,n,o,t.type_),gie(s)}}else ef(a)&&sI(a,e,r)})),t}function $He(t,e){const r=p4(t),n={type_:r?1:0,scope_:e?e.scope_:pie(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=iI;r&&(a=[n],s=H2);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,[l,n]}var iI={get(t,e){if(e===oc)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r!=null&&r.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const a=Nh(t);if(!uG(a,e,t.type_))return GHe(t,a,e);const s=a[e];if(t.finalized_||!ef(s)||n&&t.operationMethod&&(r!=null&&r.isMutatingArrayMethod(t.operationMethod))&&DHe(e))return s;if(s===Y5(t.base_,e)){fE(t);const o=t.type_===1?+e:e,l=AF(t.scope_,s,t,o);return t.copy_[o]=l}return s},has(t,e){return e in Nh(t)},ownKeys(t){return Reflect.ownKeys(Nh(t))},set(t,e,r){const n=yie(Nh(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=Y5(Nh(t),e),s=a==null?void 0:a[oc];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(OHe(r,a)&&(r!==void 0||uG(t.base_,e,t.type_)))return!0;fE(t),hF(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),HHe(t,e,r)),!0},deleteProperty(t,e){return fE(t),Y5(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),hF(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Nh(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[dE]:!0,[oF]:t.type_!==1||e!=="length",[rI]:n[rI],[Q2]:r[e]}},defineProperty(){Md(11)},getPrototypeOf(t){return Fv(t.base_)},setPrototypeOf(){Md(12)}},H2={};for(let t in iI){let e=iI[t];H2[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}H2.deleteProperty=function(t,e){return H2.set.call(this,t,e,void 0)};H2.set=function(t,e,r){return iI.set.call(this,t[0],e,r,t[0])};function Y5(t,e){const r=t[oc];return(r?Nh(r):t)[e]}function GHe(t,e,r){var a;const n=yie(e,r);return n?Q2 in n?n[Q2]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function yie(t,e){if(!(e in t))return;let r=Fv(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Fv(r)}}function hF(t){t.modified_||(t.modified_=!0,t.parent_&&hF(t.parent_))}function fE(t){t.copy_||(t.assigned_=new Map,t.copy_=cF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var KHe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(Cx(r)&&!Cx(n)){const o=n;n=r;const l=this;return function(u=o,...d){return l.produce(u,f=>n.call(this,f,...d))}}Cx(n)||Md(6),a!==void 0&&!Cx(a)&&Md(7);let s;if(ef(r)){const o=AG(this),l=AF(o,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?dF(o):fF(o)}return hG(o,a),mG(s,o)}else if(!r||!VR(r)){if(s=n(r),s===void 0&&(s=r),s===hie&&(s=void 0),this.autoFreeze_&&$R(s,!0),a){const o=[],l=[];ig(uF).generateReplacementPatches_(r,s,{patches_:o,inversePatches_:l}),a(o,l)}return s}else Md(1,r)},this.produceWithPatches=(r,n)=>{if(Cx(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},X5(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),X5(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),X5(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ef(e)||Md(8),sA(e)&&(e=Wd(e));const r=AG(this),n=AF(r,e,void 0);return n[oc].isManual_=!0,fF(r),n}finishDraft(e,r){const n=e&&e[oc];(!n||!n.isManual_)&&Md(9);const{scope_:a}=n;return hG(a,r),mG(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=ig(uF).applyPatches_;return sA(e)?a(e,r):this.produce(e,s=>a(s,r))}};function AF(t,e,r,n){const[a,s]=g4(e)?ig(aI).proxyMap_(e,r):x4(e)?ig(aI).proxySet_(e,r):$He(e,r);return((r==null?void 0:r.scope_)??pie()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?VHe(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function Wd(t){return sA(t)||Md(10,t),bie(t)}function bie(t){if(!ef(t)||v4(t))return t;const e=t[oc];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=cF(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=cF(t,!0);return m4(r,(a,s)=>{nI(r,a,bie(s))},n),e&&(e.finalized_=!1),r}var qHe=new KHe,wie=qHe.produce;function Nie(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var zHe=Nie(),WHe=Nie,XHe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?eI:eI.apply(null,arguments)};function fd(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(du(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>fie(n)&&n.type===t,r}var Cie=class qy extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,qy.prototype)}static get[Symbol.species](){return qy}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new qy(...e[0].concat(this)):new qy(...e.concat(this))}};function gG(t){return ef(t)?wie(t,()=>{}):t}function l_(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function YHe(t){return typeof t=="boolean"}var JHe=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let o=new Cie;return r&&(YHe(r)?o.push(zHe):o.push(WHe(r.extraArgument))),o},_ie="RTK_autoBatch",xs=()=>t=>({payload:t,meta:{[_ie]:!0}}),xG=t=>e=>{setTimeout(e,t)},Eie=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,o=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:xG(10):t.type==="callback"?t.queueNotification:xG(t.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),A=n.subscribe(f);return l.add(d),()=>{A(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[_ie]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},ZHe=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new Cie(t);return n&&a.push(Eie(typeof n=="object"?n:void 0)),a};function e$e(t){const e=JHe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(QR(r))l=die(r);else throw new Error(du(1));let c;typeof n=="function"?c=n(e):c=e();let u=eI;a&&(u=XHe({trace:!1,...typeof a=="object"&&a}));const d=kHe(...c),f=ZHe(d);let A=typeof o=="function"?o(f):f();const h=u(...A);return uie(l,s,h)}function Sie(t){const e={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(du(28));if(l in e)throw new Error(du(29));return e[l]=o,a},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function t$e(t){return typeof t=="function"}function r$e(t,e){let[r,n,a]=Sie(e),s;if(t$e(t))s=()=>gG(t());else{const l=gG(t);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(sA(d)){const h=f(d,c);return h===void 0?d:h}else{if(ef(d))return wie(d,A=>f(A,c));{const A=f(d,c);if(A===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return d},l)}return o.getInitialState=s,o}var n$e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",a$e=(t=21)=>{let e="",r=t;for(;r--;)e+=n$e[Math.random()*64|0];return e},s$e=Symbol.for("rtk-slice-createasyncthunk");function i$e(t,e){return`${t}/${e}`}function o$e({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[s$e];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(du(11));const l=(typeof a.reducers=="function"?a.reducers(c$e()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,j){const I=typeof w=="string"?w:w.type;if(!I)throw new Error(du(12));if(I in u.sliceCaseReducersByType)throw new Error(du(13));return u.sliceCaseReducersByType[I]=j,d},addMatcher(w,j){return u.sliceMatchers.push({matcher:w,reducer:j}),d},exposeAction(w,j){return u.actionCreators[w]=j,d},exposeCaseReducer(w,j){return u.sliceCaseReducersByName[w]=j,d}};c.forEach(w=>{const j=l[w],I={reducerName:w,type:i$e(s,w),createNotation:typeof a.reducers=="function"};d$e(j)?h$e(I,j,d,e):u$e(I,j,d)});function f(){const[w={},j=[],I=void 0]=typeof a.extraReducers=="function"?Sie(a.extraReducers):[a.extraReducers],_={...w,...u.sliceCaseReducersByType};return r$e(a.initialState,S=>{for(let E in _)S.addCase(E,_[E]);for(let E of u.sliceMatchers)S.addMatcher(E.matcher,E.reducer);for(let E of j)S.addMatcher(E.matcher,E.reducer);I&&S.addDefaultCase(I)})}const A=w=>w,h=new Map,m=new WeakMap;let p;function g(w,j){return p||(p=f()),p(w,j)}function v(){return p||(p=f()),p.getInitialState()}function y(w,j=!1){function I(S){let E=S[w];return typeof E>"u"&&j&&(E=l_(m,I,v)),E}function _(S=A){const E=l_(h,j,()=>new WeakMap);return l_(E,S,()=>{const F={};for(const[P,k]of Object.entries(a.selectors??{}))F[P]=l$e(k,S,()=>l_(m,S,v),j);return F})}return{reducerPath:w,getSelectors:_,get selectors(){return _(I)},selectSlice:I}}const b={name:s,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...y(o),injectInto(w,{reducerPath:j,...I}={}){const _=j??o;return w.inject({reducerPath:_,reducer:g},I),{...b,...y(_,!0)}}};return b}}function l$e(t,e,r,n){function a(s,...o){let l=e(s);return typeof l>"u"&&n&&(l=r()),t(l,...o)}return a.unwrapped=t,a}var Oc=o$e();function c$e(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function u$e({type:t,reducerName:e,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!f$e(n))throw new Error(du(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?fd(t,o):fd(t))}function d$e(t){return t._reducerDefinitionType==="asyncThunk"}function f$e(t){return t._reducerDefinitionType==="reducerWithPrepare"}function h$e({type:t,reducerName:e},r,n,a){if(!a)throw new Error(du(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=a(t,s,d);n.exposeAction(e,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:o||c_,pending:l||c_,rejected:c||c_,settled:u||c_})}function c_(){}var A$e="task",Iie="listener",jie="completed",GR="cancelled",m$e=`task-${GR}`,p$e=`task-${jie}`,mF=`${Iie}-${GR}`,g$e=`${Iie}-${jie}`,b4=class{constructor(t){fr(this,"name","TaskAbortError");fr(this,"message");this.code=t,this.message=`${A$e} ${GR} (reason: ${t})`}},KR=(t,e)=>{if(typeof t!="function")throw new TypeError(du(32))},oI=()=>{},Pie=(t,e=oI)=>(t.catch(e),t),Bie=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Bp=t=>{if(t.aborted)throw new b4(t.reason)};function Tie(t,e){let r=oI;return new Promise((n,a)=>{const s=()=>a(new b4(t.reason));if(t.aborted){s();return}r=Bie(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=oI})}var x$e=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof b4?"cancelled":"rejected",error:r}}finally{e==null||e()}},lI=t=>e=>Pie(Tie(t,e).then(r=>(Bp(t),r))),kie=t=>{const e=lI(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:cv}=Object,vG={},w4="listenerMiddleware",v$e=(t,e)=>{const r=n=>Bie(t,()=>n.abort(t.reason));return(n,a)=>{KR(n);const s=new AbortController;r(s);const o=x$e(async()=>{Bp(t),Bp(s.signal);const l=await n({pause:lI(s.signal),delay:kie(s.signal),signal:s.signal});return Bp(s.signal),l},()=>s.abort(p$e));return a!=null&&a.autoJoin&&e.push(o.catch(oI)),{result:lI(t)(o),cancel(){s.abort(m$e)}}}},y$e=(t,e)=>{const r=async(n,a)=>{Bp(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(f,A)=>{A.unsubscribe(),c([f,A.getState(),A.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Tie(e,Promise.race(l));return Bp(e),c}finally{s()}};return(n,a)=>Pie(r(n,a))},Fie=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=fd(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(du(21));return KR(s),{predicate:a,type:e,effect:s}},Oie=cv(t=>{const{type:e,predicate:r,effect:n}=Fie(t);return{id:a$e(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(du(22))}}},{withTypes:()=>Oie}),yG=(t,e)=>{const{type:r,effect:n,predicate:a}=Fie(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},pF=t=>{t.pending.forEach(e=>{e.abort(mF)})},b$e=(t,e)=>()=>{for(const r of e.keys())pF(r);t.clear()},bG=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},Die=cv(fd(`${w4}/add`),{withTypes:()=>Die}),w$e=fd(`${w4}/removeAll`),Rie=cv(fd(`${w4}/remove`),{withTypes:()=>Rie}),N$e=(...t)=>{console.error(`${w4}/error`,...t)},Vw=(t={})=>{const e=new Map,r=new Map,n=h=>{const m=r.get(h)??0;r.set(h,m+1)},a=h=>{const m=r.get(h)??1;m===1?r.delete(h):r.set(h,m-1)},{extra:s,onError:o=N$e}=t;KR(o);const l=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),m=>{h.unsubscribe(),m!=null&&m.cancelActive&&pF(h)}),c=h=>{const m=yG(e,h)??Oie(h);return l(m)};cv(c,{withTypes:()=>c});const u=h=>{const m=yG(e,h);return m&&(m.unsubscribe(),h.cancelActive&&pF(m)),!!m};cv(u,{withTypes:()=>u});const d=async(h,m,p,g)=>{const v=new AbortController,y=y$e(c,v.signal),b=[];try{h.pending.add(v),n(h),await Promise.resolve(h.effect(m,cv({},p,{getOriginalState:g,condition:(w,j)=>y(w,j).then(Boolean),take:y,delay:kie(v.signal),pause:lI(v.signal),extra:s,signal:v.signal,fork:v$e(v.signal,b),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((w,j,I)=>{w!==v&&(w.abort(mF),I.delete(w))})},cancel:()=>{v.abort(mF),h.pending.delete(v)},throwIfCancelled:()=>{Bp(v.signal)}})))}catch(w){w instanceof b4||bG(o,w,{raisedBy:"effect"})}finally{await Promise.all(b),v.abort(g$e),a(h),h.pending.delete(v)}},f=b$e(e,r);return{middleware:h=>m=>p=>{if(!fie(p))return m(p);if(Die.match(p))return c(p.payload);if(w$e.match(p)){f();return}if(Rie.match(p))return u(p.payload);let g=h.getState();const v=()=>{if(g===vG)throw new Error(du(23));return g};let y;try{if(y=m(p),e.size>0){const b=h.getState(),w=Array.from(e.values());for(const j of w){let I=!1;try{I=j.predicate(p,b,g)}catch(_){I=!1,bG(o,_,{raisedBy:"predicate"})}I&&d(j,p,h,v)}}}finally{g=vG}return y},startListening:c,stopListening:u,clearListeners:f}};function du(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var C$e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Mie=Oc({name:"chartLayout",initialState:C$e,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:_$e,setLayout:E$e,setChartSize:S$e,setScale:I$e}=Mie.actions,j$e=Mie.reducer;function Lie(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function Gs(t){return Number.isFinite(t)}function fm(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function wG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Gx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wG(Object(r),!0).forEach(function(n){P$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function P$e(t,e,r){return(e=B$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B$e(t){var e=T$e(t,"string");return typeof e=="symbol"?e:e+""}function T$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ds(t,e,r){return Oo(t)||Oo(e)?r:Gf(e)?sg(t,e,r):typeof e=="function"?e(t):r}var k$e=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=e;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&rn(t[s]))return Gx(Gx({},t),{},{[s]:t[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&rn(t[o]))return Gx(Gx({},t),{},{[o]:t[o]+(a||0)})}return t},jg=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",NG=1e-4,F$e=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-NG,s=Math.max(n[0],n[1])+NG,o=t(e[0]),l=t(e[r-1]);(o<a||o>s||l<a||l>s)&&t.domain([e[0],e[r-1]])}},O$e=(t,e)=>{if(!e||e.length!==2||!rn(e[0])||!rn(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!rn(t[0])||t[0]<r)&&(a[0]=r),(!rn(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},D$e=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,o=0,l=0;l<r;++l){var c=t[l],u=c==null?void 0:c[a];if(u!=null){var d=u[1],f=u[0],A=$f(d)?f:d;A>=0?(u[0]=s,u[1]=s+A,s=d):(u[0]=o,u[1]=o+A,o=d)}}}},R$e=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,o=0;o<r;++o){var l=t[o],c=l==null?void 0:l[a];if(c!=null){var u=$f(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},M$e={sign:D$e,expand:AVe,none:ag,silhouette:mVe,wiggle:pVe,positive:R$e},L$e=(t,e,r)=>{var n,a=(n=M$e[r])!==null&&n!==void 0?n:ag,s=hVe().keys(e).value((l,c)=>Number(ds(l,c,0))).order(sF).offset(a),o=s(t);return o.forEach((l,c)=>{l.forEach((u,d)=>{var f=ds(t[d],e[c],0);Array.isArray(f)&&f.length===2&&rn(f[0])&&rn(f[1])&&(u[0]=f[0],u[1]=f[1])})}),o};function U$e(t){return t==null?void 0:String(t)}var CG=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var l=ds(s,e.dataKey,e.scale.domain()[o]);return Oo(l)?null:e.scale(l)-a/2+n},Q$e=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},V$e=t=>{var e=t.flat(2).filter(rn);return[Math.min(...e),Math.max(...e)]},H$e=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],$$e=(t,e,r)=>{if(t!=null)return H$e(Object.keys(t).reduce((n,a)=>{var s=t[a];if(!s)return n;var{stackedData:o}=s,l=o.reduce((c,u)=>{var d=Lie(u,e,r),f=V$e(d);return!Gs(f[0])||!Gs(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},_G=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,EG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cI=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=h4(e,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function SG(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return Gx(Gx({},e),{},{dataKey:r,payload:n,value:a,name:s})}function N4(t,e){if(t)return String(t);if(typeof e=="string")return e}var G$e=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},K$e=(t,e)=>e==="centric"?t.angle:t.radius,bA=t=>t.layout.width,wA=t=>t.layout.height,q$e=t=>t.layout.scale,Uie=t=>t.layout.margin,C4=Gt(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),_4=Gt(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Qie="data-recharts-item-index",Vie="data-recharts-item-id",Hw=60;function IG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function u_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IG(Object(r),!0).forEach(function(n){z$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function z$e(t,e,r){return(e=W$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function W$e(t){var e=X$e(t,"string");return typeof e=="symbol"?e:e+""}function X$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y$e=t=>t.brush.height;function J$e(t){var e=_4(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Hw;return r+a}return r},0)}function Z$e(t){var e=_4(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Hw;return r+a}return r},0)}function eGe(t){var e=C4(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function tGe(t){var e=C4(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var co=Gt([bA,wA,Uie,Y$e,J$e,Z$e,eGe,tGe,lie,EHe],(t,e,r,n,a,s,o,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},f={top:(r.top||0)+o,bottom:(r.bottom||0)+l},A=u_(u_({},f),d),h=A.bottom;A.bottom+=n,A=k$e(A,c,u);var m=t-A.left-A.right,p=e-A.top-A.bottom;return u_(u_({brushBottom:h},A),{},{width:Math.max(m,0),height:Math.max(p,0)})}),rGe=Gt(co,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),qR=Gt(bA,wA,(t,e)=>({x:0,y:0,width:t,height:e})),nGe=x.createContext(null),vu=()=>x.useContext(nGe)!=null,E4=t=>t.brush,S4=Gt([E4,co,Uie],(t,e,r)=>({height:t.height,x:rn(t.x)?t.x:e.left,y:rn(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:rn(t.width)?t.width:e.width})),Hie={},$ie={},Gie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),p()};let A=null;const h=()=>{A!=null&&clearTimeout(A),A=setTimeout(()=>{A=null,f()},n)},m=()=>{A!==null&&(clearTimeout(A),A=null)},p=()=>{m(),o=void 0,l=null},g=()=>{d()},v=function(...y){if(a!=null&&a.aborted)return;o=this,l=y;const b=A==null;h(),c&&b&&d()};return v.schedule=h,v.cancel=p,v.flush=g,a==null||a.addEventListener("abort",p,{once:!0}),v}t.debounce=e})(Gie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gie;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const A=e.debounce(function(...p){d=n.apply(this,p),f=null},a,{edges:u}),h=function(...p){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,p),f=Date.now(),A.cancel(),A.schedule(),d):(A.apply(this,p),d)},m=()=>(A.flush(),d);return h.cancel=A.cancel,h.flush=m,h}t.debounce=r})($ie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$ie;function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return e.debounce(n,a,{leading:o,maxWait:a,trailing:l})}t.throttle=r})(Hie);var aGe=Hie.throttle;const sGe=dA(aGe);var jG=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>a[o++]))}},Kie=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:o}=r,l=aA(n)?t:Number(n),c=aA(a)?e:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},iGe={width:0,height:0,overflow:"visible"},oGe={width:0,overflowX:"visible"},lGe={height:0,overflowY:"visible"},cGe={},uGe=t=>{var{width:e,height:r}=t,n=aA(e),a=aA(r);return n&&a?iGe:n?oGe:a?lGe:cGe};function dGe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function gF(){return gF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gF.apply(null,arguments)}function PG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function BG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PG(Object(r),!0).forEach(function(n){fGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fGe(t,e,r){return(e=hGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hGe(t){var e=AGe(t,"string");return typeof e=="symbol"?e:e+""}function AGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qie=x.createContext({width:-1,height:-1});function mGe(t){return fm(t.width)&&fm(t.height)}function zie(t){var{children:e,width:r,height:n}=t,a=x.useMemo(()=>({width:r,height:n}),[r,n]);return mGe(a)?x.createElement(qie.Provider,{value:a},e):null}var zR=()=>x.useContext(qie),pGe=x.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:A,onResize:h,style:m={}}=t,p=x.useRef(null),g=x.useRef();g.current=h,x.useImperativeHandle(e,()=>p.current);var[v,y]=x.useState({containerWidth:n.width,containerHeight:n.height}),b=x.useCallback((S,E)=>{y(F=>{var P=Math.round(S),k=Math.round(E);return F.containerWidth===P&&F.containerHeight===k?F:{containerWidth:P,containerHeight:k}})},[]);x.useEffect(()=>{if(p.current==null||typeof ResizeObserver>"u")return Lw;var S=k=>{var D,{width:J,height:fe}=k[0].contentRect;b(J,fe),(D=g.current)===null||D===void 0||D.call(g,J,fe)};d>0&&(S=sGe(S,d,{trailing:!0,leading:!1}));var E=new ResizeObserver(S),{width:F,height:P}=p.current.getBoundingClientRect();return b(F,P),E.observe(p.current),()=>{E.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:j}=v;jG(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:I,calculatedHeight:_}=Kie(w,j,{width:a,height:s,aspect:r,maxHeight:c});return jG(I!=null&&I>0||_!=null&&_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,_,a,s,o,l,r),x.createElement("div",{id:f?"".concat(f):void 0,className:ka("recharts-responsive-container",A),style:BG(BG({},m),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:p},x.createElement("div",{style:uGe({width:a,height:s})},x.createElement(zie,{width:I,height:_},u)))}),TG=x.forwardRef((t,e)=>{var r=zR();if(fm(r.width)&&fm(r.height))return t.children;var{width:n,height:a}=dGe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=Kie(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return rn(s)&&rn(o)?x.createElement(zie,{width:s,height:o},t.children):x.createElement(pGe,gF({},t,{width:n,height:a,ref:e}))});function Wie(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var I4=()=>{var t,e=vu(),r=Jr(rGe),n=Jr(S4),a=(t=Jr(E4))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},gGe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},xGe=()=>{var t;return(t=Jr(co))!==null&&t!==void 0?t:gGe},Xie=()=>Jr(bA),Yie=()=>Jr(wA),vGe=()=>Jr(t=>t.layout.margin),la=t=>t.layout.layoutType,$w=()=>Jr(la),yGe=()=>{var t=$w();return t!==void 0},j4=t=>{var e=es(),r=vu(),{width:n,height:a}=t,s=zR(),o=n,l=a;return s&&(o=s.width>0?s.width:n,l=s.height>0?s.height:a),x.useEffect(()=>{!r&&fm(o)&&fm(l)&&e(S$e({width:o,height:l}))},[e,r,o,l]),null},Jie=Symbol.for("immer-nothing"),kG=Symbol.for("immer-draftable"),pu=Symbol.for("immer-state");function Ld(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var $2=Object.getPrototypeOf;function Ov(t){return!!t&&!!t[pu]}function og(t){var e;return t?Zie(t)||Array.isArray(t)||!!t[kG]||!!((e=t.constructor)!=null&&e[kG])||Gw(t)||B4(t):!1}var bGe=Object.prototype.constructor.toString(),FG=new WeakMap;function Zie(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=FG.get(r);return n===void 0&&(n=Function.toString.call(r),FG.set(r,n)),n===bGe}function uI(t,e,r=!0){P4(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function P4(t){const e=t[pu];return e?e.type_:Array.isArray(t)?1:Gw(t)?2:B4(t)?3:0}function xF(t,e){return P4(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function eoe(t,e,r){const n=P4(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function wGe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Gw(t){return t instanceof Map}function B4(t){return t instanceof Set}function Ym(t){return t.copy_||t.base_}function vF(t,e){if(Gw(t))return new Map(t);if(B4(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=Zie(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[pu];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create($2(t),n)}else{const n=$2(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function WR(t,e=!1){return T4(t)||Ov(t)||!og(t)||(P4(t)>1&&Object.defineProperties(t,{set:d_,add:d_,clear:d_,delete:d_}),Object.freeze(t),e&&Object.values(t).forEach(r=>WR(r,!0))),t}function NGe(){Ld(2)}var d_={value:NGe};function T4(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var CGe={};function lg(t){const e=CGe[t];return e||Ld(0,t),e}var G2;function toe(){return G2}function _Ge(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function OG(t,e){e&&(lg("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function yF(t){bF(t),t.drafts_.forEach(EGe),t.drafts_=null}function bF(t){t===G2&&(G2=t.parent_)}function DG(t){return G2=_Ge(G2,t)}function EGe(t){const e=t[pu];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function RG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[pu].modified_&&(yF(e),Ld(4)),og(t)&&(t=dI(e,t),e.parent_||fI(e,t)),e.patches_&&lg("Patches").generateReplacementPatches_(r[pu].base_,t,e.patches_,e.inversePatches_)):t=dI(e,r,[]),yF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Jie?t:void 0}function dI(t,e,r){if(T4(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[pu];if(!a)return uI(e,(s,o)=>MG(t,a,e,s,o,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return fI(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let o=s,l=!1;a.type_===3&&(o=new Set(s),s.clear(),l=!0),uI(o,(c,u)=>MG(t,a,s,c,u,r,l),n),fI(t,s,!1),r&&t.patches_&&lg("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function MG(t,e,r,n,a,s,o){if(a==null||typeof a!="object"&&!o)return;const l=T4(a);if(!(l&&!o)){if(Ov(a)){const c=s&&e&&e.type_!==3&&!xF(e.assigned_,n)?s.concat(n):void 0,u=dI(t,a,c);if(eoe(r,n,u),Ov(u))t.canAutoFreeze_=!1;else return}else o&&r.add(a);if(og(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&l)return;dI(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(Gw(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&fI(t,a)}}}function fI(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&WR(e,r)}function SGe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:toe(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=XR;r&&(a=[n],s=K2);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var XR={get(t,e){if(e===pu)return t;const r=Ym(t);if(!xF(r,e))return IGe(t,r,e);const n=r[e];return t.finalized_||!og(n)?n:n===J5(t.base_,e)?(Z5(t),t.copy_[e]=NF(n,t)):n},has(t,e){return e in Ym(t)},ownKeys(t){return Reflect.ownKeys(Ym(t))},set(t,e,r){const n=roe(Ym(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=J5(Ym(t),e),s=a==null?void 0:a[pu];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(wGe(r,a)&&(r!==void 0||xF(t.base_,e)))return!0;Z5(t),wF(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return J5(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Z5(t),wF(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Ym(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Ld(11)},getPrototypeOf(t){return $2(t.base_)},setPrototypeOf(){Ld(12)}},K2={};uI(XR,(t,e)=>{K2[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});K2.deleteProperty=function(t,e){return K2.set.call(this,t,e,void 0)};K2.set=function(t,e,r){return XR.set.call(this,t[0],e,r,t[0])};function J5(t,e){const r=t[pu];return(r?Ym(r):t)[e]}function IGe(t,e,r){var a;const n=roe(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function roe(t,e){if(!(e in t))return;let r=$2(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=$2(r)}}function wF(t){t.modified_||(t.modified_=!0,t.parent_&&wF(t.parent_))}function Z5(t){t.copy_||(t.copy_=vF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var jGe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Ld(6),n!==void 0&&typeof n!="function"&&Ld(7);let a;if(og(e)){const s=DG(this),o=NF(e,void 0);let l=!0;try{a=r(o),l=!1}finally{l?yF(s):bF(s)}return OG(s,n),RG(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===Jie&&(a=void 0),this.autoFreeze_&&WR(a,!0),n){const s=[],o=[];lg("Patches").generateReplacementPatches_(e,a,s,o),n(s,o)}return a}else Ld(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,c=>e(c,...l));let n,a;return[this.produce(e,r,(o,l)=>{n=o,a=l}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){og(t)||Ld(8),Ov(t)&&(t=PGe(t));const e=DG(this),r=NF(t,void 0);return r[pu].isManual_=!0,bF(e),r}finishDraft(t,e){const r=t&&t[pu];(!r||!r.isManual_)&&Ld(9);const{scope_:n}=r;return OG(n,e),RG(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=lg("Patches").applyPatches_;return Ov(t)?n(t,e):this.produce(t,a=>n(a,e))}};function NF(t,e){const r=Gw(t)?lg("MapSet").proxyMap_(t,e):B4(t)?lg("MapSet").proxySet_(t,e):SGe(t,e);return(e?e.scope_:toe()).drafts_.push(r),r}function PGe(t){return Ov(t)||Ld(10,t),noe(t)}function noe(t){if(!og(t)||T4(t))return t;const e=t[pu];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=vF(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=vF(t,!0);return uI(r,(a,s)=>{eoe(r,a,noe(s))},n),e&&(e.finalized_=!1),r}var BGe=new jGe;BGe.produce;var TGe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},aoe=Oc({name:"legend",initialState:TGe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:xs()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Wd(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:xs()},removeLegendPayload:{reducer(t,e){var r=Wd(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:xs()}}}),{setLegendSize:LG,setLegendSettings:kGe,addLegendPayload:soe,replaceLegendPayload:ioe,removeLegendPayload:ooe}=aoe.actions,FGe=aoe.reducer,OGe=["contextPayload"];function CF(){return CF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CF.apply(null,arguments)}function UG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Dv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UG(Object(r),!0).forEach(function(n){DGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DGe(t,e,r){return(e=RGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RGe(t){var e=MGe(t,"string");return typeof e=="symbol"?e:e+""}function MGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LGe(t,e){if(t==null)return{};var r,n,a=UGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function UGe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function QGe(t){return t.value}function VGe(t){var{contextPayload:e}=t,r=LGe(t,OGe),n=Yse(e,t.payloadUniqBy,QGe),a=Dv(Dv({},r),{},{payload:n});return x.isValidElement(t.content)?x.cloneElement(t.content,a):typeof t.content=="function"?x.createElement(t.content,a):x.createElement(GVe,a)}function HGe(t,e,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Dv(Dv({},u),d)}function $Ge(t){var e=es();return x.useEffect(()=>{e(kGe(t))},[e,t]),null}function GGe(t){var e=es();return x.useEffect(()=>(e(LG(t)),()=>{e(LG({width:0,height:0}))}),[e,t]),null}function KGe(t,e,r,n){return t==="vertical"&&rn(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var qGe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function _F(t){var e=ll(t,qGe),r=jHe(),n=RQe(),a=vGe(),{width:s,height:o,wrapperStyle:l,portal:c}=e,[u,d]=cie([r]),f=Xie(),A=Yie();if(f==null||A==null)return null;var h=f-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),m=KGe(e.layout,o,s,h),p=c?l:Dv(Dv({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||o||"auto"},HGe(l,e,a,f,A,u)),l),g=c??n;if(g==null||r==null)return null;var v=x.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},x.createElement($Ge,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&x.createElement(GGe,{width:u.width,height:u.height}),x.createElement(VGe,CF({},e,m,{margin:a,chartWidth:f,chartHeight:A,contextPayload:r})));return uu.createPortal(v,g)}_F.displayName="Legend";function EF(){return EF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EF.apply(null,arguments)}function QG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function eB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QG(Object(r),!0).forEach(function(n){zGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zGe(t,e,r){return(e=WGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WGe(t){var e=XGe(t,"string");return typeof e=="symbol"?e:e+""}function XGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YGe(t){return Array.isArray(t)&&Gf(t[0])&&Gf(t[1])?t.join(" ~ "):t}var JGe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:A=!1}=t,h=()=>{if(s&&s.length){var j={padding:0,margin:0},I=(l?h4(s,l):s).map((_,S)=>{if(_.type==="none")return null;var E=_.formatter||o||YGe,{value:F,name:P}=_,k=F,D=P;if(E){var J=E(F,P,_,S,s);if(Array.isArray(J))[k,D]=J;else if(J!=null)k=J;else return null}var fe=eB({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},n);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:fe},Gf(D)?x.createElement("span",{className:"recharts-tooltip-item-name"},D):null,Gf(D)?x.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,x.createElement("span",{className:"recharts-tooltip-item-value"},k),x.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:j},I)}return null},m=eB({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=eB({margin:0},a),g=!Oo(d),v=g?d:"",y=ka("recharts-default-tooltip",c),b=ka("recharts-tooltip-label",u);g&&f&&s!==void 0&&s!==null&&(v=f(d,s));var w=A?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",EF({className:y,style:m},w),x.createElement("p",{className:b,style:p},x.isValidElement(v)?v:"".concat(v)),h())},my="recharts-tooltip-wrapper",ZGe={visibility:"hidden"};function eKe(t){var{coordinate:e,translateX:r,translateY:n}=t;return ka(my,{["".concat(my,"-right")]:rn(r)&&e&&rn(e.x)&&r>=e.x,["".concat(my,"-left")]:rn(r)&&e&&rn(e.x)&&r<e.x,["".concat(my,"-bottom")]:rn(n)&&e&&rn(e.y)&&n>=e.y,["".concat(my,"-top")]:rn(n)&&e&&rn(e.y)&&n<e.y})}function VG(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(s&&rn(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(e[n])return o[n]?d:f;var A=c[n];if(A==null)return 0;if(o[n]){var h=d,m=A;return h<m?Math.max(f,A):Math.max(d,A)}if(u==null)return 0;var p=f+l,g=A+u;return p>g?Math.max(d,A):Math.max(f,A)}function tKe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function rKe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=t,u,d,f;return o.height>0&&o.width>0&&r?(d=VG({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=VG({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=tKe({translateX:d,translateY:f,useTranslate3d:l})):u=ZGe,{cssProperties:u,cssClasses:eKe({translateX:d,translateY:f,coordinate:r})}}function HG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function f_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HG(Object(r),!0).forEach(function(n){SF(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SF(t,e,r){return(e=nKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nKe(t){var e=aKe(t,"string");return typeof e=="symbol"?e:e+""}function aKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class sKe extends x.PureComponent{constructor(){super(...arguments),SF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),SF(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:A,viewBox:h,wrapperStyle:m,lastBoundingBox:p,innerRef:g,hasPortalFromProps:v}=this.props,{cssClasses:y,cssProperties:b}=rKe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:p.height,width:p.width},useTranslate3d:A,viewBox:h}),w=v?{}:f_(f_({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=f_(f_({},w),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},m);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:j,ref:g},s)}}var loe=()=>{var t;return(t=Jr(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function IF(){return IF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},IF.apply(null,arguments)}function $G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function GG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$G(Object(r),!0).forEach(function(n){iKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$G(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iKe(t,e,r){return(e=oKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oKe(t){var e=lKe(t,"string");return typeof e=="symbol"?e:e+""}function lKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KG={curveBasisClosed:rVe,curveBasisOpen:nVe,curveBasis:tVe,curveBumpX:QQe,curveBumpY:VQe,curveLinearClosed:aVe,curveLinear:i4,curveMonotoneX:sVe,curveMonotoneY:iVe,curveNatural:oVe,curveStep:lVe,curveStepAfter:uVe,curveStepBefore:cVe},hI=t=>Gs(t.x)&&Gs(t.y),qG=t=>t.base!=null&&hI(t.base)&&hI(t),py=t=>t.x,gy=t=>t.y,cKe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(Mw(t));return(r==="curveMonotone"||r==="curveBump")&&e?KG["".concat(r).concat(e==="vertical"?"Y":"X")]:KG[r]||i4},uKe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,o=cKe(e,a),l=s?r.filter(hI):r,c;if(Array.isArray(n)){var u=r.map((h,m)=>GG(GG({},h),{},{base:n[m]}));a==="vertical"?c=a_().y(gy).x1(py).x0(h=>h.base.x):c=a_().x(py).y1(gy).y0(h=>h.base.y);var d=c.defined(qG).curve(o),f=s?u.filter(qG):u;return d(f)}a==="vertical"&&rn(n)?c=a_().y(gy).x1(py).x0(n):rn(n)?c=a_().x(py).y1(gy).y0(n):c=xse().x(py).y(gy);var A=c.defined(hI).curve(o);return A(l)},YR=t=>{var{className:e,points:r,path:n,pathRef:a}=t,s=$w();if((!r||!r.length)&&!n)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=r&&r.length?uKe(o):n;return x.createElement("path",IF({},Hf(t),TVe(t),{className:ka("recharts-curve",e),d:l===null?void 0:l,ref:a}))},dKe=["x","y","top","left","width","height","className"];function jF(){return jF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jF.apply(null,arguments)}function zG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fKe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zG(Object(r),!0).forEach(function(n){hKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hKe(t,e,r){return(e=AKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AKe(t){var e=mKe(t,"string");return typeof e=="symbol"?e:e+""}function mKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pKe(t,e){if(t==null)return{};var r,n,a=gKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function gKe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var xKe=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),vKe=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=t,c=pKe(t,dKe),u=fKe({x:e,y:r,top:n,left:a,width:s,height:o},c);return!rn(e)||!rn(r)||!rn(s)||!rn(o)||!rn(n)||!rn(a)?null:x.createElement("path",jF({},dd(u),{className:ka("recharts-cross",l),d:xKe(e,r,s,o,n,a)}))};function yKe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function WG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function XG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WG(Object(r),!0).forEach(function(n){bKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bKe(t,e,r){return(e=wKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wKe(t){var e=NKe(t,"string");return typeof e=="symbol"?e:e+""}function NKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CKe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),coe=(t,e,r)=>t.map(n=>"".concat(CKe(n)," ").concat(e,"ms ").concat(r)).join(","),_Ke=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),q2=(t,e)=>Object.keys(e).reduce((r,n)=>XG(XG({},r),{},{[n]:t(n,e[n])}),{});function YG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Zi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YG(Object(r),!0).forEach(function(n){EKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EKe(t,e,r){return(e=SKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SKe(t){var e=IKe(t,"string");return typeof e=="symbol"?e:e+""}function IKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AI=(t,e,r)=>t+(e-t)*r,PF=t=>{var{from:e,to:r}=t;return e!==r},uoe=(t,e,r)=>{var n=q2((a,s)=>{if(PF(s)){var[o,l]=t(s.from,s.to,s.velocity);return Zi(Zi({},s),{},{from:o,velocity:l})}return s},e);return r<1?q2((a,s)=>PF(s)&&n[a]!=null?Zi(Zi({},s),{},{velocity:AI(s.velocity,n[a].velocity,r),from:AI(s.from,n[a].from,r)}):s,e):uoe(t,n,r-1)};function jKe(t,e,r,n,a,s){var o,l=n.reduce((A,h)=>Zi(Zi({},A),{},{[h]:{from:t[h],velocity:0,to:e[h]}}),{}),c=()=>q2((A,h)=>h.from,l),u=()=>!Object.values(l).filter(PF).length,d=null,f=A=>{o||(o=A);var h=A-o,m=h/r.dt;l=uoe(r,l,m),a(Zi(Zi(Zi({},t),e),c())),o=A,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{var A;(A=d)===null||A===void 0||A()})}function PKe(t,e,r,n,a,s,o){var l=null,c=a.reduce((f,A)=>{var h=t[A],m=e[A];return h==null||m==null?f:Zi(Zi({},f),{},{[A]:[h,m]})},{}),u,d=f=>{u||(u=f);var A=(f-u)/n,h=q2((p,g)=>AI(...g,r(A)),c);if(s(Zi(Zi(Zi({},t),e),h)),A<1)l=o.setTimeout(d);else{var m=q2((p,g)=>AI(...g,r(1)),c);s(Zi(Zi(Zi({},t),e),m))}};return()=>(l=o.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const BKe=(t,e,r,n,a,s)=>{var o=_Ke(t,e);return r==null?()=>(a(Zi(Zi({},t),e)),()=>{}):r.isStepper===!0?jKe(t,e,r,o,a,s):PKe(t,e,r,n,o,a,s)};var mI=1e-4,doe=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],foe=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),JG=(t,e)=>r=>{var n=doe(t,e);return foe(n,r)},TKe=(t,e)=>r=>{var n=doe(t,e),a=[...n.map((s,o)=>s*o).slice(1),0];return foe(a,r)},kKe=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},FKe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=kKe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},OKe=(t,e,r,n)=>{var a=JG(t,r),s=JG(e,n),o=TKe(t,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,A=0;A<8;++A){var h=a(f)-d,m=o(f);if(Math.abs(h-d)<mI||m<mI)return s(f);f=l(f-h/m)}return s(f)};return c.isStepper=!1,c},ZG=function(){return OKe(...FKe(...arguments))},DKe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*a/1e3,A=c*a/1e3+o;return Math.abs(A-l)<mI&&Math.abs(f)<mI?[l,0]:[A,f]};return s.isStepper=!0,s.dt=a,s},RKe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ZG(t);case"spring":return DKe();default:if(t.split("(")[0]==="cubic-bezier")return ZG(t)}return typeof t=="function"?t:null};function MKe(t){var e,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class LKe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function UKe(){return MKe(new LKe)}var QKe=x.createContext(UKe);function VKe(t,e){var r=x.useContext(QKe);return x.useMemo(()=>e??r(t),[t,e,r])}var HKe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),k4={isSsr:HKe()},$Ke={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},eK={t:0},tB={t:1};function F4(t){var e=ll(t,$Ke),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!k4.isSsr:r,f=VKe(e.animationId,e.animationManager),[A,h]=x.useState(d?eK:tB),m=x.useRef(null);return x.useEffect(()=>{d||h(tB)},[d]),x.useEffect(()=>{if(!d||!n)return Lw;var p=BKe(eK,tB,RKe(s),a,h,f.getTimeoutController()),g=()=>{m.current=p()};return f.start([c,o,g,a,l]),()=>{f.stop(),m.current&&m.current(),l()}},[d,n,a,s,o,c,l,f]),u(A.t)}function O4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=x.useRef(U2(e)),n=x.useRef(t);return n.current!==t&&(r.current=U2(e),n.current=t),r.current}var GKe=["radius"],KKe=["radius"],tK,rK,nK,aK,sK,iK,oK,lK,cK,uK;function dK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dK(Object(r),!0).forEach(function(n){qKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qKe(t,e,r){return(e=zKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zKe(t){var e=WKe(t,"string");return typeof e=="symbol"?e:e+""}function WKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pI(){return pI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pI.apply(null,arguments)}function hK(t,e){if(t==null)return{};var r,n,a=XKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function XKe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function yf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var AK=(t,e,r,n,a)=>{var s=T0(r),o=T0(n),l=Math.min(Math.abs(s)/2,Math.abs(o)/2),c=o>=0?1:-1,u=s>=0?1:-1,d=o>=0&&s>=0||o<0&&s<0?1:0,f;if(l>0&&a instanceof Array){for(var A=[0,0,0,0],h=0,m=4;h<m;h++)A[h]=a[h]>l?l:a[h];f=ti(tK||(tK=yf(["M",",",""])),t,e+c*A[0]),A[0]>0&&(f+=ti(rK||(rK=yf(["A ",",",",0,0,",",",",",""])),A[0],A[0],d,t+u*A[0],e)),f+=ti(nK||(nK=yf(["L ",",",""])),t+r-u*A[1],e),A[1]>0&&(f+=ti(aK||(aK=yf(["A ",",",",0,0,",`,
        `,",",""])),A[1],A[1],d,t+r,e+c*A[1])),f+=ti(sK||(sK=yf(["L ",",",""])),t+r,e+n-c*A[2]),A[2]>0&&(f+=ti(iK||(iK=yf(["A ",",",",0,0,",`,
        `,",",""])),A[2],A[2],d,t+r-u*A[2],e+n)),f+=ti(oK||(oK=yf(["L ",",",""])),t+u*A[3],e+n),A[3]>0&&(f+=ti(lK||(lK=yf(["A ",",",",0,0,",`,
        `,",",""])),A[3],A[3],d,t,e+n-c*A[3])),f+="Z"}else if(l>0&&a===+a&&a>0){var p=Math.min(l,a);f=ti(cK||(cK=yf(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*p,p,p,d,t+u*p,e,t+r-u*p,e,p,p,d,t+r,e+c*p,t+r,e+n-c*p,p,p,d,t+r-u*p,e+n,t+u*p,e+n,p,p,d,t,e+n-c*p)}else f=ti(uK||(uK=yf(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return f},mK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hoe=t=>{var e=ll(t,mK),r=x.useRef(null),[n,a]=x.useState(-1);x.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var me=r.current.getTotalLength();me&&a(me)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=e,{animationEasing:f,animationDuration:A,animationBegin:h,isAnimationActive:m,isUpdateAnimationActive:p}=e,g=x.useRef(l),v=x.useRef(c),y=x.useRef(s),b=x.useRef(o),w=x.useMemo(()=>({x:s,y:o,width:l,height:c,radius:u}),[s,o,l,c,u]),j=O4(w,"rectangle-");if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var I=ka("recharts-rectangle",d);if(!p){var _=dd(e),{radius:S}=_,E=hK(_,GKe);return x.createElement("path",pI({},E,{x:T0(s),y:T0(o),width:T0(l),height:T0(c),radius:typeof u=="number"?u:void 0,className:I,d:AK(s,o,l,c,u)}))}var F=g.current,P=v.current,k=y.current,D=b.current,J="0px ".concat(n===-1?1:n,"px"),fe="".concat(n,"px 0px"),Ae=coe(["strokeDasharray"],A,typeof f=="string"?f:mK.animationEasing);return x.createElement(F4,{animationId:j,key:j,canBegin:n>0,duration:A,easing:f,isActive:p,begin:h},me=>{var pe=Ji(F,l,me),ne=Ji(P,c,me),Pe=Ji(k,s,me),Be=Ji(D,o,me);r.current&&(g.current=pe,v.current=ne,y.current=Pe,b.current=Be);var O;m?me>0?O={transition:Ae,strokeDasharray:fe}:O={strokeDasharray:J}:O={strokeDasharray:fe};var G=dd(e),{radius:q}=G,U=hK(G,KKe);return x.createElement("path",pI({},U,{radius:typeof u=="number"?u:void 0,className:I,d:AK(Pe,Be,pe,ne,u),ref:r,style:fK(fK({},O),e.style)}))})};function pK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pK(Object(r),!0).forEach(function(n){YKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YKe(t,e,r){return(e=JKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JKe(t){var e=ZKe(t,"string");return typeof e=="symbol"?e:e+""}function ZKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gI=Math.PI/180,eqe=t=>t*180/Math.PI,Ri=(t,e,r,n)=>({x:t+Math.cos(-gI*n)*r,y:e+Math.sin(-gI*n)*r}),Aoe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},tqe=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},rqe=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,o=tqe({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:eqe(c),angleInRadian:c}},nqe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},aqe=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return t+o*360},sqe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=rqe({x:r,y:n},e),{innerRadius:o,outerRadius:l}=e;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=nqe(e),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?gK(gK({},e),{},{radius:a,angle:aqe(d,e)}):null};function moe(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,o=Ri(e,r,n,a),l=Ri(e,r,n,s);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}var xK,vK,yK,bK,wK,NK,CK;function BF(){return BF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},BF.apply(null,arguments)}function hp(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var iqe=(t,e)=>{var r=sl(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},h_=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=t,u=l*(o?1:-1)+n,d=Math.asin(l/u)/gI,f=c?a:a+s*d,A=Ri(e,r,u,f),h=Ri(e,r,n,f),m=c?a-s*d:a,p=Ri(e,r,u*Math.cos(d*gI),m);return{center:A,circleTangency:h,lineTangency:p,theta:d}},poe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=t,l=iqe(s,o),c=s+l,u=Ri(e,r,a,s),d=Ri(e,r,a,c),f=ti(xK||(xK=hp(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(l)>180),+(s>c),d.x,d.y);if(n>0){var A=Ri(e,r,n,s),h=Ri(e,r,n,c);f+=ti(vK||(vK=hp(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),h.x,h.y,n,n,+(Math.abs(l)>180),+(s<=c),A.x,A.y)}else f+=ti(yK||(yK=hp(["L ",","," Z"])),e,r);return f},oqe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=sl(u-c),{circleTangency:f,lineTangency:A,theta:h}=h_({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:m,lineTangency:p,theta:g}=h_({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-h-g;if(v<0)return o?ti(bK||(bK=hp(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),A.x,A.y,s,s,s*2,s,s,-s*2):poe({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var y=ti(wK||(wK=hp(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),A.x,A.y,s,s,+(d<0),f.x,f.y,a,a,+(v>180),+(d<0),m.x,m.y,s,s,+(d<0),p.x,p.y);if(n>0){var{circleTangency:b,lineTangency:w,theta:j}=h_({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:_,theta:S}=h_({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),E=l?Math.abs(c-u):Math.abs(c-u)-j-S;if(E<0&&s===0)return"".concat(y,"L").concat(e,",").concat(r,"Z");y+=ti(NK||(NK=hp(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),_.x,_.y,s,s,+(d<0),I.x,I.y,n,n,+(E>180),+(d>0),b.x,b.y,s,s,+(d<0),w.x,w.y)}else y+=ti(CK||(CK=hp(["L",",","Z"])),e,r);return y},lqe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},goe=t=>{var e=ll(t,lqe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=e;if(s<a||u===d)return null;var A=ka("recharts-sector",f),h=s-a,m=kl(o,h,0,!0),p;return m>0&&Math.abs(u-d)<360?p=oqe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):p=poe({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),x.createElement("path",BF({},dd(e),{className:A,d:p}))};function cqe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(kse(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:o,angle:l}=e,c=Ri(n,a,s,l),u=Ri(n,a,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return moe(e)}}var xoe={},voe={},yoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LR;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(yoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yoe;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(voe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UR,r=voe;function n(a,s,o){o&&typeof o!="number"&&e.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}t.range=n})(xoe);var uqe=xoe.range;const boe=dA(uqe);function X0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dqe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function JR(t){let e,r,n;t.length!==2?(e=X0,r=(l,c)=>X0(t(l),c),n=(l,c)=>t(l)-c):(e=t===X0||t===dqe?t:fqe,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function fqe(){return 0}function woe(t){return t===null?NaN:+t}function*hqe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Aqe=JR(X0),Kw=Aqe.right;JR(woe).center;class _K extends Map{constructor(e,r=gqe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(EK(this,e))}has(e){return super.has(EK(this,e))}set(e,r){return super.set(mqe(this,e),r)}delete(e){return super.delete(pqe(this,e))}}function EK({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function mqe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function pqe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function gqe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function xqe(t=X0){if(t===X0)return Noe;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function Noe(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const vqe=Math.sqrt(50),yqe=Math.sqrt(10),bqe=Math.sqrt(2);function xI(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=vqe?10:s>=yqe?5:s>=bqe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?xI(t,e,r*2):[l,c,u]}function TF(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,o]=n?xI(e,t,r):xI(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function kF(t,e,r){return e=+e,t=+t,r=+r,xI(t,e,r)[2]}function FF(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?kF(e,t,r):kF(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function SK(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function IK(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Coe(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?Noe:xqe(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),A=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(e-u*f/c+A)),m=Math.min(n,Math.floor(e+(c-u)*f/c+A));Coe(t,e,h,m,a)}const s=t[e];let o=r,l=n;for(xy(t,r,e),a(t[n],s)>0&&xy(t,r,n);o<l;){for(xy(t,o,l),++o,--l;a(t[o],s)<0;)++o;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?xy(t,r,l):(++l,xy(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function xy(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function wqe(t,e,r){if(t=Float64Array.from(hqe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return IK(t);if(e>=1)return SK(t);var n,a=(n-1)*e,s=Math.floor(a),o=SK(Coe(t,s).subarray(0,s+1)),l=IK(t.subarray(s+1));return o+(l-o)*(a-s)}}function Nqe(t,e,r=woe){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),o=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return o+(l-o)*(a-s)}}function Cqe(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function md(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function NA(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const OF=Symbol("implicit");function ZR(){var t=new _K,e=[],r=[],n=OF;function a(s){let o=t.get(s);if(o===void 0){if(n!==OF)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new _K;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return ZR(e,r).unknown(n)},md.apply(a,arguments),a}function e8(){var t=ZR().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var A=e().length,h=a<n,m=h?a:n,p=h?n:a;s=(p-m)/Math.max(1,A-c+u*2),l&&(s=Math.floor(s)),m+=(p-m-s*(A-c))*d,o=s*(1-c),l&&(m=Math.round(m),o=Math.round(o));var g=Cqe(A).map(function(v){return m+s*v});return r(h?g.reverse():g)}return t.domain=function(A){return arguments.length?(e(A),f()):e()},t.range=function(A){return arguments.length?([n,a]=A,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(A){return[n,a]=A,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(A){return arguments.length?(l=!!A,f()):l},t.padding=function(A){return arguments.length?(c=Math.min(1,u=+A),f()):c},t.paddingInner=function(A){return arguments.length?(c=Math.min(1,A),f()):c},t.paddingOuter=function(A){return arguments.length?(u=+A,f()):u},t.align=function(A){return arguments.length?(d=Math.max(0,Math.min(1,A)),f()):d},t.copy=function(){return e8(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},md.apply(f(),arguments)}function _oe(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return _oe(e())},t}function _qe(){return _oe(e8.apply(null,arguments).paddingInner(1))}function t8(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Eoe(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function qw(){}var z2=.7,vI=1/z2,uv="\\s*([+-]?\\d+)\\s*",W2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Uf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Eqe=/^#([0-9a-f]{3,8})$/,Sqe=new RegExp(`^rgb\\(${uv},${uv},${uv}\\)$`),Iqe=new RegExp(`^rgb\\(${Uf},${Uf},${Uf}\\)$`),jqe=new RegExp(`^rgba\\(${uv},${uv},${uv},${W2}\\)$`),Pqe=new RegExp(`^rgba\\(${Uf},${Uf},${Uf},${W2}\\)$`),Bqe=new RegExp(`^hsl\\(${W2},${Uf},${Uf}\\)$`),Tqe=new RegExp(`^hsla\\(${W2},${Uf},${Uf},${W2}\\)$`),jK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};t8(qw,X2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:PK,formatHex:PK,formatHex8:kqe,formatHsl:Fqe,formatRgb:BK,toString:BK});function PK(){return this.rgb().formatHex()}function kqe(){return this.rgb().formatHex8()}function Fqe(){return Soe(this).formatHsl()}function BK(){return this.rgb().formatRgb()}function X2(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Eqe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?TK(e):r===3?new _c(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?A_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?A_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Sqe.exec(t))?new _c(e[1],e[2],e[3],1):(e=Iqe.exec(t))?new _c(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=jqe.exec(t))?A_(e[1],e[2],e[3],e[4]):(e=Pqe.exec(t))?A_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Bqe.exec(t))?OK(e[1],e[2]/100,e[3]/100,1):(e=Tqe.exec(t))?OK(e[1],e[2]/100,e[3]/100,e[4]):jK.hasOwnProperty(t)?TK(jK[t]):t==="transparent"?new _c(NaN,NaN,NaN,0):null}function TK(t){return new _c(t>>16&255,t>>8&255,t&255,1)}function A_(t,e,r,n){return n<=0&&(t=e=r=NaN),new _c(t,e,r,n)}function Oqe(t){return t instanceof qw||(t=X2(t)),t?(t=t.rgb(),new _c(t.r,t.g,t.b,t.opacity)):new _c}function DF(t,e,r,n){return arguments.length===1?Oqe(t):new _c(t,e,r,n??1)}function _c(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}t8(_c,DF,Eoe(qw,{brighter(t){return t=t==null?vI:Math.pow(vI,t),new _c(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?z2:Math.pow(z2,t),new _c(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _c(Tp(this.r),Tp(this.g),Tp(this.b),yI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kK,formatHex:kK,formatHex8:Dqe,formatRgb:FK,toString:FK}));function kK(){return`#${Ap(this.r)}${Ap(this.g)}${Ap(this.b)}`}function Dqe(){return`#${Ap(this.r)}${Ap(this.g)}${Ap(this.b)}${Ap((isNaN(this.opacity)?1:this.opacity)*255)}`}function FK(){const t=yI(this.opacity);return`${t===1?"rgb(":"rgba("}${Tp(this.r)}, ${Tp(this.g)}, ${Tp(this.b)}${t===1?")":`, ${t})`}`}function yI(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Tp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ap(t){return t=Tp(t),(t<16?"0":"")+t.toString(16)}function OK(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ud(t,e,r,n)}function Soe(t){if(t instanceof Ud)return new Ud(t.h,t.s,t.l,t.opacity);if(t instanceof qw||(t=X2(t)),!t)return new Ud;if(t instanceof Ud)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(e===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Ud(o,l,c,t.opacity)}function Rqe(t,e,r,n){return arguments.length===1?Soe(t):new Ud(t,e,r,n??1)}function Ud(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}t8(Ud,Rqe,Eoe(qw,{brighter(t){return t=t==null?vI:Math.pow(vI,t),new Ud(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?z2:Math.pow(z2,t),new Ud(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new _c(rB(t>=240?t-240:t+120,a,n),rB(t,a,n),rB(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Ud(DK(this.h),m_(this.s),m_(this.l),yI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=yI(this.opacity);return`${t===1?"hsl(":"hsla("}${DK(this.h)}, ${m_(this.s)*100}%, ${m_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function DK(t){return t=(t||0)%360,t<0?t+360:t}function m_(t){return Math.max(0,Math.min(1,t||0))}function rB(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const r8=t=>()=>t;function Mqe(t,e){return function(r){return t+r*e}}function Lqe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Uqe(t){return(t=+t)==1?Ioe:function(e,r){return r-e?Lqe(e,r,t):r8(isNaN(e)?r:e)}}function Ioe(t,e){var r=e-t;return r?Mqe(t,r):r8(isNaN(t)?e:t)}const RK=function t(e){var r=Uqe(e);function n(a,s){var o=r((a=DF(a)).r,(s=DF(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=Ioe(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function Qqe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function Vqe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Hqe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=h1(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function $qe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function bI(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Gqe(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=h1(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var RF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nB=new RegExp(RF.source,"g");function Kqe(t){return function(){return t}}function qqe(t){return function(e){return t(e)+""}}function zqe(t,e){var r=RF.lastIndex=nB.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=RF.exec(t))&&(a=nB.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:bI(n,a)})),r=nB.lastIndex;return r<e.length&&(s=e.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?qqe(c[0].x):Kqe(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function h1(t,e){var r=typeof e,n;return e==null||r==="boolean"?r8(e):(r==="number"?bI:r==="string"?(n=X2(e))?(e=n,RK):zqe:e instanceof X2?RK:e instanceof Date?$qe:Vqe(e)?Qqe:Array.isArray(e)?Hqe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Gqe:bI)(t,e)}function n8(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Wqe(t,e){e===void 0&&(e=t,t=h1);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function Xqe(t){return function(){return t}}function wI(t){return+t}var MK=[0,1];function rc(t){return t}function MF(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Xqe(isNaN(e)?NaN:.5)}function Yqe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Jqe(t,e,r){var n=t[0],a=t[1],s=e[0],o=e[1];return a<n?(n=MF(a,n),s=r(o,s)):(n=MF(n,a),s=r(s,o)),function(l){return s(n(l))}}function Zqe(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=MF(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(l){var c=Kw(t,l,1,n)-1;return s[c](a[c](l))}}function zw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function D4(){var t=MK,e=MK,r=h1,n,a,s,o=rc,l,c,u;function d(){var A=Math.min(t.length,e.length);return o!==rc&&(o=Yqe(t[0],t[A-1])),l=A>2?Zqe:Jqe,c=u=null,f}function f(A){return A==null||isNaN(A=+A)?s:(c||(c=l(t.map(n),e,r)))(n(o(A)))}return f.invert=function(A){return o(a((u||(u=l(e,t.map(n),bI)))(A)))},f.domain=function(A){return arguments.length?(t=Array.from(A,wI),d()):t.slice()},f.range=function(A){return arguments.length?(e=Array.from(A),d()):e.slice()},f.rangeRound=function(A){return e=Array.from(A),r=n8,d()},f.clamp=function(A){return arguments.length?(o=A?!0:rc,d()):o!==rc},f.interpolate=function(A){return arguments.length?(r=A,d()):r},f.unknown=function(A){return arguments.length?(s=A,f):s},function(A,h){return n=A,a=h,d()}}function a8(){return D4()(rc,rc)}function eze(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function NI(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Rv(t){return t=NI(Math.abs(t)),t?t[1]:NaN}function tze(t,e){return function(r,n){for(var a=r.length,s=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function rze(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var nze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Y2(t){if(!(e=nze.exec(t)))throw new Error("invalid format: "+t);var e;return new s8({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Y2.prototype=s8.prototype;function s8(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}s8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function aze(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var CI;function sze(t,e){var r=NI(t,e);if(!r)return CI=void 0,t.toPrecision(e);var n=r[0],a=r[1],s=a-(CI=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+NI(t,Math.max(0,e+s-1))[0]}function LK(t,e){var r=NI(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const UK={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:eze,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>LK(t*100,e),r:LK,s:sze,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function QK(t){return t}var VK=Array.prototype.map,HK=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ize(t){var e=t.grouping===void 0||t.thousands===void 0?QK:tze(VK.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?QK:rze(VK.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,A){f=Y2(f);var h=f.fill,m=f.align,p=f.sign,g=f.symbol,v=f.zero,y=f.width,b=f.comma,w=f.precision,j=f.trim,I=f.type;I==="n"?(b=!0,I="g"):UK[I]||(w===void 0&&(w=12),j=!0,I="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var _=(A&&A.prefix!==void 0?A.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),S=(g==="$"?n:/[%p]/.test(I)?o:"")+(A&&A.suffix!==void 0?A.suffix:""),E=UK[I],F=/[defgprs%]/.test(I);w=w===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(k){var D=_,J=S,fe,Ae,me;if(I==="c")J=E(k)+J,k="";else{k=+k;var pe=k<0||1/k<0;if(k=isNaN(k)?c:E(Math.abs(k),w),j&&(k=aze(k)),pe&&+k==0&&p!=="+"&&(pe=!1),D=(pe?p==="("?p:l:p==="-"||p==="("?"":p)+D,J=(I==="s"&&!isNaN(k)&&CI!==void 0?HK[8+CI/3]:"")+J+(pe&&p==="("?")":""),F){for(fe=-1,Ae=k.length;++fe<Ae;)if(me=k.charCodeAt(fe),48>me||me>57){J=(me===46?a+k.slice(fe+1):k.slice(fe))+J,k=k.slice(0,fe);break}}}b&&!v&&(k=e(k,1/0));var ne=D.length+k.length+J.length,Pe=ne<y?new Array(y-ne+1).join(h):"";switch(b&&v&&(k=e(Pe+k,Pe.length?y-J.length:1/0),Pe=""),m){case"<":k=D+k+J+Pe;break;case"=":k=D+Pe+k+J;break;case"^":k=Pe.slice(0,ne=Pe.length>>1)+D+k+J+Pe.slice(ne);break;default:k=Pe+D+k+J;break}return s(k)}return P.toString=function(){return f+""},P}function d(f,A){var h=Math.max(-8,Math.min(8,Math.floor(Rv(A)/3)))*3,m=Math.pow(10,-h),p=u((f=Y2(f),f.type="f",f),{suffix:HK[8+h/3]});return function(g){return p(m*g)}}return{format:u,formatPrefix:d}}var p_,i8,joe;oze({thousands:",",grouping:[3],currency:["$",""]});function oze(t){return p_=ize(t),i8=p_.format,joe=p_.formatPrefix,p_}function lze(t){return Math.max(0,-Rv(Math.abs(t)))}function cze(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rv(e)/3)))*3-Rv(Math.abs(t)))}function uze(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Rv(e)-Rv(t))+1}function Poe(t,e,r,n){var a=FF(t,e,r),s;switch(n=Y2(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=cze(a,o))&&(n.precision=s),joe(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=uze(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=lze(a))&&(n.precision=s-(n.type==="%")*2);break}}return i8(n)}function Cm(t){var e=t.domain;return t.ticks=function(r){var n=e();return TF(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return Poe(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=kF(o,l,r),u===c)return n[a]=o,n[s]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function Boe(){var t=a8();return t.copy=function(){return zw(t,Boe())},md.apply(t,arguments),Cm(t)}function Toe(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,wI),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return Toe(t).unknown(e)},t=arguments.length?Array.from(t,wI):[0,1],Cm(r)}function koe(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),t[r]=e.floor(a),t[n]=e.ceil(s),t}function $K(t){return Math.log(t)}function GK(t){return Math.exp(t)}function dze(t){return-Math.log(-t)}function fze(t){return-Math.exp(-t)}function hze(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Aze(t){return t===10?hze:t===Math.E?Math.exp:e=>Math.pow(t,e)}function mze(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function KK(t){return(e,r)=>-t(-e,r)}function o8(t){const e=t($K,GK),r=e.domain;let n=10,a,s;function o(){return a=mze(n),s=Aze(n),r()[0]<0?(a=KK(a),s=KK(s),t(dze,fze)):t($K,GK),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let A=a(u),h=a(d),m,p;const g=l==null?10:+l;let v=[];if(!(n%1)&&h-A<g){if(A=Math.floor(A),h=Math.ceil(h),u>0){for(;A<=h;++A)for(m=1;m<n;++m)if(p=A<0?m/s(-A):m*s(A),!(p<u)){if(p>d)break;v.push(p)}}else for(;A<=h;++A)for(m=n-1;m>=1;--m)if(p=A>0?m/s(-A):m*s(A),!(p<u)){if(p>d)break;v.push(p)}v.length*2<g&&(v=TF(u,d,g))}else v=TF(A,h,Math.min(h-A,g)).map(s);return f?v.reverse():v},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Y2(c)).precision==null&&(c.trim=!0),c=i8(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(koe(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function Foe(){const t=o8(D4()).domain([1,10]);return t.copy=()=>zw(t,Foe()).base(t.base()),md.apply(t,arguments),t}function qK(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function zK(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function l8(t){var e=1,r=t(qK(e),zK(e));return r.constant=function(n){return arguments.length?t(qK(e=+n),zK(e)):e},Cm(r)}function Ooe(){var t=l8(D4());return t.copy=function(){return zw(t,Ooe()).constant(t.constant())},md.apply(t,arguments)}function WK(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function pze(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function gze(t){return t<0?-t*t:t*t}function c8(t){var e=t(rc,rc),r=1;function n(){return r===1?t(rc,rc):r===.5?t(pze,gze):t(WK(r),WK(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Cm(e)}function u8(){var t=c8(D4());return t.copy=function(){return zw(t,u8()).exponent(t.exponent())},md.apply(t,arguments),t}function xze(){return u8.apply(null,arguments).exponent(.5)}function XK(t){return Math.sign(t)*t*t}function vze(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Doe(){var t=a8(),e=[0,1],r=!1,n;function a(s){var o=vze(t(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return t.invert(XK(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,wI)).map(XK)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Doe(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},md.apply(a,arguments),Cm(a)}function Roe(){var t=[],e=[],r=[],n;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=Nqe(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:e[Kw(r,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(X0),a()},s.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Roe().domain(t).range(e).unknown(n)},md.apply(s,arguments)}function Moe(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Kw(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Moe().domain([t,e]).range(a).unknown(s)},md.apply(Cm(o),arguments)}function Loe(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[Kw(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Loe().domain(t).range(e).unknown(r)},md.apply(a,arguments)}const aB=new Date,sB=new Date;function uo(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},a.filter=s=>uo(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),r&&(a.count=(s,o)=>(aB.setTime(+s),sB.setTime(+o),t(aB),t(sB),Math.floor(r(aB,sB))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const _I=uo(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);_I.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?uo(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):_I);_I.range;const Fh=1e3,td=Fh*60,Oh=td*60,iA=Oh*24,d8=iA*7,YK=iA*30,iB=iA*365,mp=uo(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Fh)},(t,e)=>(e-t)/Fh,t=>t.getUTCSeconds());mp.range;const f8=uo(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Fh)},(t,e)=>{t.setTime(+t+e*td)},(t,e)=>(e-t)/td,t=>t.getMinutes());f8.range;const h8=uo(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*td)},(t,e)=>(e-t)/td,t=>t.getUTCMinutes());h8.range;const A8=uo(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Fh-t.getMinutes()*td)},(t,e)=>{t.setTime(+t+e*Oh)},(t,e)=>(e-t)/Oh,t=>t.getHours());A8.range;const m8=uo(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Oh)},(t,e)=>(e-t)/Oh,t=>t.getUTCHours());m8.range;const Ww=uo(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*td)/iA,t=>t.getDate()-1);Ww.range;const R4=uo(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/iA,t=>t.getUTCDate()-1);R4.range;const Uoe=uo(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/iA,t=>Math.floor(t/iA));Uoe.range;function Pg(t){return uo(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*td)/d8)}const M4=Pg(0),EI=Pg(1),yze=Pg(2),bze=Pg(3),Mv=Pg(4),wze=Pg(5),Nze=Pg(6);M4.range;EI.range;yze.range;bze.range;Mv.range;wze.range;Nze.range;function Bg(t){return uo(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/d8)}const L4=Bg(0),SI=Bg(1),Cze=Bg(2),_ze=Bg(3),Lv=Bg(4),Eze=Bg(5),Sze=Bg(6);L4.range;SI.range;Cze.range;_ze.range;Lv.range;Eze.range;Sze.range;const p8=uo(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());p8.range;const g8=uo(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());g8.range;const oA=uo(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());oA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:uo(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});oA.range;const lA=uo(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());lA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:uo(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});lA.range;function Qoe(t,e,r,n,a,s){const o=[[mp,1,Fh],[mp,5,5*Fh],[mp,15,15*Fh],[mp,30,30*Fh],[s,1,td],[s,5,5*td],[s,15,15*td],[s,30,30*td],[a,1,Oh],[a,3,3*Oh],[a,6,6*Oh],[a,12,12*Oh],[n,1,iA],[n,2,2*iA],[r,1,d8],[e,1,YK],[e,3,3*YK],[t,1,iB]];function l(u,d,f){const A=d<u;A&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),m=h?h.range(u,+d+1):[];return A?m.reverse():m}function c(u,d,f){const A=Math.abs(d-u)/f,h=JR(([,,g])=>g).right(o,A);if(h===o.length)return t.every(FF(u/iB,d/iB,f));if(h===0)return _I.every(Math.max(FF(u,d,f),1));const[m,p]=o[A/o[h-1][2]<o[h][2]/A?h-1:h];return m.every(p)}return[l,c]}const[Ize,jze]=Qoe(lA,g8,L4,Uoe,m8,h8),[Pze,Bze]=Qoe(oA,p8,M4,Ww,A8,f8);function oB(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function lB(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function vy(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Tze(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=yy(a),d=by(a),f=yy(s),A=by(s),h=yy(o),m=by(o),p=yy(l),g=by(l),v=yy(c),y=by(c),b={a:me,A:pe,b:ne,B:Pe,c:null,d:nq,e:nq,f:tWe,g:dWe,G:hWe,H:Jze,I:Zze,j:eWe,L:Voe,m:rWe,M:nWe,p:Be,q:O,Q:iq,s:oq,S:aWe,u:sWe,U:iWe,V:oWe,w:lWe,W:cWe,x:null,X:null,y:uWe,Y:fWe,Z:AWe,"%":sq},w={a:G,A:q,b:U,B:Y,c:null,d:aq,e:aq,f:xWe,g:IWe,G:PWe,H:mWe,I:pWe,j:gWe,L:$oe,m:vWe,M:yWe,p:Z,q:R,Q:iq,s:oq,S:bWe,u:wWe,U:NWe,V:CWe,w:_We,W:EWe,x:null,X:null,y:SWe,Y:jWe,Z:BWe,"%":sq},j={a:F,A:P,b:k,B:D,c:J,d:tq,e:tq,f:zze,g:eq,G:ZK,H:rq,I:rq,j:$ze,L:qze,m:Hze,M:Gze,p:E,q:Vze,Q:Xze,s:Yze,S:Kze,u:Rze,U:Mze,V:Lze,w:Dze,W:Uze,x:fe,X:Ae,y:eq,Y:ZK,Z:Qze,"%":Wze};b.x=I(r,b),b.X=I(n,b),b.c=I(e,b),w.x=I(r,w),w.X=I(n,w),w.c=I(e,w);function I(H,te){return function(ye){var Q=[],Ge=-1,ie=0,ee=H.length,Ie,ue,se;for(ye instanceof Date||(ye=new Date(+ye));++Ge<ee;)H.charCodeAt(Ge)===37&&(Q.push(H.slice(ie,Ge)),(ue=JK[Ie=H.charAt(++Ge)])!=null?Ie=H.charAt(++Ge):ue=Ie==="e"?" ":"0",(se=te[Ie])&&(Ie=se(ye,ue)),Q.push(Ie),ie=Ge+1);return Q.push(H.slice(ie,Ge)),Q.join("")}}function _(H,te){return function(ye){var Q=vy(1900,void 0,1),Ge=S(Q,H,ye+="",0),ie,ee;if(Ge!=ye.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(te&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(ie=lB(vy(Q.y,0,1)),ee=ie.getUTCDay(),ie=ee>4||ee===0?SI.ceil(ie):SI(ie),ie=R4.offset(ie,(Q.V-1)*7),Q.y=ie.getUTCFullYear(),Q.m=ie.getUTCMonth(),Q.d=ie.getUTCDate()+(Q.w+6)%7):(ie=oB(vy(Q.y,0,1)),ee=ie.getDay(),ie=ee>4||ee===0?EI.ceil(ie):EI(ie),ie=Ww.offset(ie,(Q.V-1)*7),Q.y=ie.getFullYear(),Q.m=ie.getMonth(),Q.d=ie.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),ee="Z"in Q?lB(vy(Q.y,0,1)).getUTCDay():oB(vy(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(ee+5)%7:Q.w+Q.U*7-(ee+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,lB(Q)):oB(Q)}}function S(H,te,ye,Q){for(var Ge=0,ie=te.length,ee=ye.length,Ie,ue;Ge<ie;){if(Q>=ee)return-1;if(Ie=te.charCodeAt(Ge++),Ie===37){if(Ie=te.charAt(Ge++),ue=j[Ie in JK?te.charAt(Ge++):Ie],!ue||(Q=ue(H,ye,Q))<0)return-1}else if(Ie!=ye.charCodeAt(Q++))return-1}return Q}function E(H,te,ye){var Q=u.exec(te.slice(ye));return Q?(H.p=d.get(Q[0].toLowerCase()),ye+Q[0].length):-1}function F(H,te,ye){var Q=h.exec(te.slice(ye));return Q?(H.w=m.get(Q[0].toLowerCase()),ye+Q[0].length):-1}function P(H,te,ye){var Q=f.exec(te.slice(ye));return Q?(H.w=A.get(Q[0].toLowerCase()),ye+Q[0].length):-1}function k(H,te,ye){var Q=v.exec(te.slice(ye));return Q?(H.m=y.get(Q[0].toLowerCase()),ye+Q[0].length):-1}function D(H,te,ye){var Q=p.exec(te.slice(ye));return Q?(H.m=g.get(Q[0].toLowerCase()),ye+Q[0].length):-1}function J(H,te,ye){return S(H,e,te,ye)}function fe(H,te,ye){return S(H,r,te,ye)}function Ae(H,te,ye){return S(H,n,te,ye)}function me(H){return o[H.getDay()]}function pe(H){return s[H.getDay()]}function ne(H){return c[H.getMonth()]}function Pe(H){return l[H.getMonth()]}function Be(H){return a[+(H.getHours()>=12)]}function O(H){return 1+~~(H.getMonth()/3)}function G(H){return o[H.getUTCDay()]}function q(H){return s[H.getUTCDay()]}function U(H){return c[H.getUTCMonth()]}function Y(H){return l[H.getUTCMonth()]}function Z(H){return a[+(H.getUTCHours()>=12)]}function R(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var te=I(H+="",b);return te.toString=function(){return H},te},parse:function(H){var te=_(H+="",!1);return te.toString=function(){return H},te},utcFormat:function(H){var te=I(H+="",w);return te.toString=function(){return H},te},utcParse:function(H){var te=_(H+="",!0);return te.toString=function(){return H},te}}}var JK={"-":"",_:" ",0:"0"},Do=/^\s*\d+/,kze=/^%/,Fze=/[\\^$*+?|[\]().{}]/g;function oa(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function Oze(t){return t.replace(Fze,"\\$&")}function yy(t){return new RegExp("^(?:"+t.map(Oze).join("|")+")","i")}function by(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Dze(t,e,r){var n=Do.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Rze(t,e,r){var n=Do.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Mze(t,e,r){var n=Do.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Lze(t,e,r){var n=Do.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Uze(t,e,r){var n=Do.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function ZK(t,e,r){var n=Do.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function eq(t,e,r){var n=Do.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Qze(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Vze(t,e,r){var n=Do.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Hze(t,e,r){var n=Do.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function tq(t,e,r){var n=Do.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function $ze(t,e,r){var n=Do.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function rq(t,e,r){var n=Do.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Gze(t,e,r){var n=Do.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Kze(t,e,r){var n=Do.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function qze(t,e,r){var n=Do.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function zze(t,e,r){var n=Do.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Wze(t,e,r){var n=kze.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Xze(t,e,r){var n=Do.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Yze(t,e,r){var n=Do.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function nq(t,e){return oa(t.getDate(),e,2)}function Jze(t,e){return oa(t.getHours(),e,2)}function Zze(t,e){return oa(t.getHours()%12||12,e,2)}function eWe(t,e){return oa(1+Ww.count(oA(t),t),e,3)}function Voe(t,e){return oa(t.getMilliseconds(),e,3)}function tWe(t,e){return Voe(t,e)+"000"}function rWe(t,e){return oa(t.getMonth()+1,e,2)}function nWe(t,e){return oa(t.getMinutes(),e,2)}function aWe(t,e){return oa(t.getSeconds(),e,2)}function sWe(t){var e=t.getDay();return e===0?7:e}function iWe(t,e){return oa(M4.count(oA(t)-1,t),e,2)}function Hoe(t){var e=t.getDay();return e>=4||e===0?Mv(t):Mv.ceil(t)}function oWe(t,e){return t=Hoe(t),oa(Mv.count(oA(t),t)+(oA(t).getDay()===4),e,2)}function lWe(t){return t.getDay()}function cWe(t,e){return oa(EI.count(oA(t)-1,t),e,2)}function uWe(t,e){return oa(t.getFullYear()%100,e,2)}function dWe(t,e){return t=Hoe(t),oa(t.getFullYear()%100,e,2)}function fWe(t,e){return oa(t.getFullYear()%1e4,e,4)}function hWe(t,e){var r=t.getDay();return t=r>=4||r===0?Mv(t):Mv.ceil(t),oa(t.getFullYear()%1e4,e,4)}function AWe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+oa(e/60|0,"0",2)+oa(e%60,"0",2)}function aq(t,e){return oa(t.getUTCDate(),e,2)}function mWe(t,e){return oa(t.getUTCHours(),e,2)}function pWe(t,e){return oa(t.getUTCHours()%12||12,e,2)}function gWe(t,e){return oa(1+R4.count(lA(t),t),e,3)}function $oe(t,e){return oa(t.getUTCMilliseconds(),e,3)}function xWe(t,e){return $oe(t,e)+"000"}function vWe(t,e){return oa(t.getUTCMonth()+1,e,2)}function yWe(t,e){return oa(t.getUTCMinutes(),e,2)}function bWe(t,e){return oa(t.getUTCSeconds(),e,2)}function wWe(t){var e=t.getUTCDay();return e===0?7:e}function NWe(t,e){return oa(L4.count(lA(t)-1,t),e,2)}function Goe(t){var e=t.getUTCDay();return e>=4||e===0?Lv(t):Lv.ceil(t)}function CWe(t,e){return t=Goe(t),oa(Lv.count(lA(t),t)+(lA(t).getUTCDay()===4),e,2)}function _We(t){return t.getUTCDay()}function EWe(t,e){return oa(SI.count(lA(t)-1,t),e,2)}function SWe(t,e){return oa(t.getUTCFullYear()%100,e,2)}function IWe(t,e){return t=Goe(t),oa(t.getUTCFullYear()%100,e,2)}function jWe(t,e){return oa(t.getUTCFullYear()%1e4,e,4)}function PWe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Lv(t):Lv.ceil(t),oa(t.getUTCFullYear()%1e4,e,4)}function BWe(){return"+0000"}function sq(){return"%"}function iq(t){return+t}function oq(t){return Math.floor(+t/1e3)}var ux,Koe,qoe;TWe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function TWe(t){return ux=Tze(t),Koe=ux.format,ux.parse,qoe=ux.utcFormat,ux.utcParse,ux}function kWe(t){return new Date(t)}function FWe(t){return t instanceof Date?+t:+new Date(+t)}function x8(t,e,r,n,a,s,o,l,c,u){var d=a8(),f=d.invert,A=d.domain,h=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),y=u("%b %d"),b=u("%B"),w=u("%Y");function j(I){return(c(I)<I?h:l(I)<I?m:o(I)<I?p:s(I)<I?g:n(I)<I?a(I)<I?v:y:r(I)<I?b:w)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?A(Array.from(I,FWe)):A().map(kWe)},d.ticks=function(I){var _=A();return t(_[0],_[_.length-1],I??10)},d.tickFormat=function(I,_){return _==null?j:u(_)},d.nice=function(I){var _=A();return(!I||typeof I.range!="function")&&(I=e(_[0],_[_.length-1],I??10)),I?A(koe(_,I)):d},d.copy=function(){return zw(d,x8(t,e,r,n,a,s,o,l,c,u))},d}function OWe(){return md.apply(x8(Pze,Bze,oA,p8,M4,Ww,A8,f8,mp,Koe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function DWe(){return md.apply(x8(Ize,jze,lA,g8,L4,R4,m8,h8,mp,qoe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function U4(){var t=0,e=1,r,n,a,s,o=rc,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(A){var h,m;return arguments.length?([h,m]=A,o=f(h,m),u):[o(0),o(1)]}}return u.range=d(h1),u.rangeRound=d(n8),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),u}}function _m(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function zoe(){var t=Cm(U4()(rc));return t.copy=function(){return _m(t,zoe())},NA.apply(t,arguments)}function Woe(){var t=o8(U4()).domain([1,10]);return t.copy=function(){return _m(t,Woe()).base(t.base())},NA.apply(t,arguments)}function Xoe(){var t=l8(U4());return t.copy=function(){return _m(t,Xoe()).constant(t.constant())},NA.apply(t,arguments)}function v8(){var t=c8(U4());return t.copy=function(){return _m(t,v8()).exponent(t.exponent())},NA.apply(t,arguments)}function RWe(){return v8.apply(null,arguments).exponent(.5)}function Yoe(){var t=[],e=rc;function r(n){if(n!=null&&!isNaN(n=+n))return e((Kw(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(X0),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>wqe(t,s/n))},r.copy=function(){return Yoe(e).domain(t)},NA.apply(r,arguments)}function Q4(){var t=0,e=.5,r=1,n=1,a,s,o,l,c,u=rc,d,f=!1,A;function h(p){return isNaN(p=+p)?A:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e,r]=p,a=d(t=+t),s=d(e=+e),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,h):[t,e,r]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(u=p,h):u};function m(p){return function(g){var v,y,b;return arguments.length?([v,y,b]=g,u=Wqe(p,[v,y,b]),h):[u(0),u(.5),u(1)]}}return h.range=m(h1),h.rangeRound=m(n8),h.unknown=function(p){return arguments.length?(A=p,h):A},function(p){return d=p,a=p(t),s=p(e),o=p(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,h}}function Joe(){var t=Cm(Q4()(rc));return t.copy=function(){return _m(t,Joe())},NA.apply(t,arguments)}function Zoe(){var t=o8(Q4()).domain([.1,1,10]);return t.copy=function(){return _m(t,Zoe()).base(t.base())},NA.apply(t,arguments)}function ele(){var t=l8(Q4());return t.copy=function(){return _m(t,ele()).constant(t.constant())},NA.apply(t,arguments)}function y8(){var t=c8(Q4());return t.copy=function(){return _m(t,y8()).exponent(t.exponent())},NA.apply(t,arguments)}function MWe(){return y8.apply(null,arguments).exponent(.5)}const zy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:e8,scaleDiverging:Joe,scaleDivergingLog:Zoe,scaleDivergingPow:y8,scaleDivergingSqrt:MWe,scaleDivergingSymlog:ele,scaleIdentity:Toe,scaleImplicit:OF,scaleLinear:Boe,scaleLog:Foe,scaleOrdinal:ZR,scalePoint:_qe,scalePow:u8,scaleQuantile:Roe,scaleQuantize:Moe,scaleRadial:Doe,scaleSequential:zoe,scaleSequentialLog:Woe,scaleSequentialPow:v8,scaleSequentialQuantile:Yoe,scaleSequentialSqrt:RWe,scaleSequentialSymlog:Xoe,scaleSqrt:xze,scaleSymlog:Ooe,scaleThreshold:Loe,scaleTime:OWe,scaleUtc:DWe,tickFormat:Poe},Symbol.toStringTag,{value:"Module"}));var CA=t=>t.chartData,V4=Gt([CA],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),tle=(t,e,r,n)=>n?V4(t):CA(t),LWe=(t,e,r)=>r?V4(t):CA(t);function hm(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(Gs(e)&&Gs(r))return!0}return!1}function lq(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function rle(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(Gs(r))a=r;else if(typeof r=="function")return;if(Gs(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(hm(o))return o}}function UWe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(hm(n))return lq(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,o,l;if(a==="auto")e!=null&&(o=Math.min(...e));else if(rn(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&_G.test(a)){var c=_G.exec(a);if(c==null||c[1]==null||e==null)o=void 0;else{var u=+c[1];o=e[0]-u}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(rn(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&EG.test(s)){var d=EG.exec(s);if(d==null||d[1]==null||e==null)l=void 0;else{var f=+d[1];l=e[1]+f}}else l=e==null?void 0:e[1];var A=[o,l];if(hm(A))return e==null?A:lq(A,e,r)}}}var A1=1e9,QWe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},w8,Cs=!0,hd="[DecimalError] ",kp=hd+"Invalid argument: ",b8=hd+"Exponent out of range: ",m1=Math.floor,Jm=Math.pow,VWe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,au,_o=1e7,os=7,nle=9007199254740991,II=m1(nle/os),Ur={};Ur.absoluteValue=Ur.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ur.comparedTo=Ur.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ur.decimalPlaces=Ur.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*os;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Ur.dividedBy=Ur.div=function(t){return Kh(this,new this.constructor(t))};Ur.dividedToIntegerBy=Ur.idiv=function(t){var e=this,r=e.constructor;return Ga(Kh(e,new r(t),0,1),r.precision)};Ur.equals=Ur.eq=function(t){return!this.cmp(t)};Ur.exponent=function(){return Mi(this)};Ur.greaterThan=Ur.gt=function(t){return this.cmp(t)>0};Ur.greaterThanOrEqualTo=Ur.gte=function(t){return this.cmp(t)>=0};Ur.isInteger=Ur.isint=function(){return this.e>this.d.length-2};Ur.isNegative=Ur.isneg=function(){return this.s<0};Ur.isPositive=Ur.ispos=function(){return this.s>0};Ur.isZero=function(){return this.s===0};Ur.lessThan=Ur.lt=function(t){return this.cmp(t)<0};Ur.lessThanOrEqualTo=Ur.lte=function(t){return this.cmp(t)<1};Ur.logarithm=Ur.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(au))throw Error(hd+"NaN");if(r.s<1)throw Error(hd+(r.s?"NaN":"-Infinity"));return r.eq(au)?new n(0):(Cs=!1,e=Kh(J2(r,s),J2(t,s),s),Cs=!0,Ga(e,a))};Ur.minus=Ur.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ile(e,t):ale(e,(t.s=-t.s,t))};Ur.modulo=Ur.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(hd+"NaN");return r.s?(Cs=!1,e=Kh(r,t,0,1).times(t),Cs=!0,r.minus(e)):Ga(new n(r),a)};Ur.naturalExponential=Ur.exp=function(){return sle(this)};Ur.naturalLogarithm=Ur.ln=function(){return J2(this)};Ur.negated=Ur.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ur.plus=Ur.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ale(e,t):ile(e,(t.s=-t.s,t))};Ur.precision=Ur.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(kp+t);if(e=Mi(a)+1,n=a.d.length-1,r=n*os+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Ur.squareRoot=Ur.sqrt=function(){var t,e,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(hd+"NaN")}for(t=Mi(l),Cs=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=Ff(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=m1((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(Kh(l,s,o+2)).times(.5),Ff(s.d).slice(0,o)===(e=Ff(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(Ga(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;o+=4}return Cs=!0,Ga(n,r)};Ur.times=Ur.mul=function(t){var e,r,n,a,s,o,l,c,u,d=this,f=d.constructor,A=d.d,h=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=A.length,u=h.length,c<u&&(s=A,A=h,h=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+h[n]*A[a-n-1]+e,s[a--]=l%_o|0,e=l/_o|0;s[a]=(s[a]+e)%_o|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Cs?Ga(t,f.precision):t};Ur.toDecimalPlaces=Ur.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Kf(t,0,A1),e===void 0?e=n.rounding:Kf(e,0,8),Ga(r,t+Mi(r)+1,e))};Ur.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=cg(n,!0):(Kf(t,0,A1),e===void 0?e=a.rounding:Kf(e,0,8),n=Ga(new a(n),t+1,e),r=cg(n,!0,t+1)),r};Ur.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?cg(a):(Kf(t,0,A1),e===void 0?e=s.rounding:Kf(e,0,8),n=Ga(new s(a),t+Mi(a)+1,e),r=cg(n.abs(),!1,t+Mi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ur.toInteger=Ur.toint=function(){var t=this,e=t.constructor;return Ga(new e(t),Mi(t)+1,e.rounding)};Ur.toNumber=function(){return+this};Ur.toPower=Ur.pow=function(t){var e,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(au);if(l=new c(l),!l.s){if(t.s<1)throw Error(hd+"Infinity");return l}if(l.eq(au))return l;if(n=c.precision,t.eq(au))return Ga(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=l.s,o){if((r=d<0?-d:d)<=nle){for(a=new c(au),e=Math.ceil(n/os+4),Cs=!1;r%2&&(a=a.times(l),uq(a.d,e)),r=m1(r/2),r!==0;)l=l.times(l),uq(l.d,e);return Cs=!0,t.s<0?new c(au).div(a):Ga(a,n)}}else if(s<0)throw Error(hd+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Cs=!1,a=t.times(J2(l,n+u)),Cs=!0,a=sle(a),a.s=s,a};Ur.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=Mi(a),n=cg(a,r<=s.toExpNeg||r>=s.toExpPos)):(Kf(t,1,A1),e===void 0?e=s.rounding:Kf(e,0,8),a=Ga(new s(a),t,e),r=Mi(a),n=cg(a,t<=r||r<=s.toExpNeg,t)),n};Ur.toSignificantDigits=Ur.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Kf(t,1,A1),e===void 0?e=n.rounding:Kf(e,0,8)),Ga(new n(r),t,e)};Ur.toString=Ur.valueOf=Ur.val=Ur.toJSON=Ur[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Mi(t),r=t.constructor;return cg(t,e<=r.toExpNeg||e>=r.toExpPos)};function ale(t,e){var r,n,a,s,o,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Cs?Ga(e,f):e;if(c=t.d,u=e.d,o=t.e,a=e.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/os),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/_o|0,c[s]%=_o;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,Cs?Ga(e,f):e}function Kf(t,e,r){if(t!==~~t||t<e||t>r)throw Error(kp+t)}function Ff(t){var e,r,n,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)n=t[e]+"",r=os-n.length,r&&(s+=d0(r)),s+=n;o=t[e],n=o+"",r=os-n.length,r&&(s+=d0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Kh=function(){function t(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%_o|0,o=s/_o|0;return o&&n.unshift(o),n}function e(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*_o+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,f,A,h,m,p,g,v,y,b,w,j,I,_,S,E=n.constructor,F=n.s==a.s?1:-1,P=n.d,k=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(hd+"Division by zero");for(c=n.e-a.e,_=k.length,j=P.length,h=new E(F),m=h.d=[],u=0;k[u]==(P[u]||0);)++u;if(k[u]>(P[u]||0)&&--c,s==null?y=s=E.precision:o?y=s+(Mi(n)-Mi(a))+1:y=s,y<0)return new E(0);if(y=y/os+2|0,u=0,_==1)for(d=0,k=k[0],y++;(u<j||d)&&y--;u++)b=d*_o+(P[u]||0),m[u]=b/k|0,d=b%k|0;else{for(d=_o/(k[0]+1)|0,d>1&&(k=t(k,d),P=t(P,d),_=k.length,j=P.length),w=_,p=P.slice(0,_),g=p.length;g<_;)p[g++]=0;S=k.slice(),S.unshift(0),I=k[0],k[1]>=_o/2&&++I;do d=0,l=e(k,p,_,g),l<0?(v=p[0],_!=g&&(v=v*_o+(p[1]||0)),d=v/I|0,d>1?(d>=_o&&(d=_o-1),f=t(k,d),A=f.length,g=p.length,l=e(f,p,A,g),l==1&&(d--,r(f,_<A?S:k,A))):(d==0&&(l=d=1),f=k.slice()),A=f.length,A<g&&f.unshift(0),r(p,f,g),l==-1&&(g=p.length,l=e(k,p,_,g),l<1&&(d++,r(p,_<g?S:k,g))),g=p.length):l===0&&(d++,p=[0]),m[u++]=d,l&&p[0]?p[g++]=P[w]||0:(p=[P[w]],g=1);while((w++<j||p[0]!==void 0)&&y--)}return m[0]||m.shift(),h.e=c,Ga(h,o?s+Mi(h)+1:s)}}();function sle(t,e){var r,n,a,s,o,l,c=0,u=0,d=t.constructor,f=d.precision;if(Mi(t)>16)throw Error(b8+Mi(t));if(!t.s)return new d(au);for(Cs=!1,l=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(Jm(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(au),d.precision=l;;){if(a=Ga(a.times(t),l),r=r.times(++c),o=s.plus(Kh(a,r,l)),Ff(o.d).slice(0,l)===Ff(s.d).slice(0,l)){for(;u--;)s=Ga(s.times(s),l);return d.precision=f,e==null?(Cs=!0,Ga(s,f)):s}s=o}}function Mi(t){for(var e=t.e*os,r=t.d[0];r>=10;r/=10)e++;return e}function cB(t,e,r){if(e>t.LN10.sd())throw Cs=!0,r&&(t.precision=r),Error(hd+"LN10 precision limit exceeded");return Ga(new t(t.LN10),e)}function d0(t){for(var e="";t--;)e+="0";return e}function J2(t,e){var r,n,a,s,o,l,c,u,d,f=1,A=10,h=t,m=h.d,p=h.constructor,g=p.precision;if(h.s<1)throw Error(hd+(h.s?"NaN":"-Infinity"));if(h.eq(au))return new p(0);if(e==null?(Cs=!1,u=g):u=e,h.eq(10))return e==null&&(Cs=!0),cB(p,u);if(u+=A,p.precision=u,r=Ff(m),n=r.charAt(0),s=Mi(h),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(t),r=Ff(h.d),n=r.charAt(0),f++;s=Mi(h),n>1?(h=new p("0."+r),s++):h=new p(n+"."+r.slice(1))}else return c=cB(p,u+2,g).times(s+""),h=J2(new p(n+"."+r.slice(1)),u-A).plus(c),p.precision=g,e==null?(Cs=!0,Ga(h,g)):h;for(l=o=h=Kh(h.minus(au),h.plus(au),u),d=Ga(h.times(h),u),a=3;;){if(o=Ga(o.times(d),u),c=l.plus(Kh(o,new p(a),u)),Ff(c.d).slice(0,u)===Ff(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(cB(p,u+2,g).times(s+""))),l=Kh(l,new p(f),u),p.precision=g,e==null?(Cs=!0,Ga(l,g)):l;l=c,a+=2}}function cq(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=m1(r/os),t.d=[],n=(r+1)%os,r<0&&(n+=os),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=os;n<a;)t.d.push(+e.slice(n,n+=os));e=e.slice(n),n=os-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Cs&&(t.e>II||t.e<-II))throw Error(b8+r)}else t.s=0,t.e=0,t.d=[0];return t}function Ga(t,e,r){var n,a,s,o,l,c,u,d,f=t.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=os,a=e,u=f[d=0];else{if(d=Math.ceil((n+1)/os),s=f.length,d>=s)return t;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=os,a=n-os+o}if(r!==void 0&&(s=Jm(10,o-a-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Jm(10,o-a):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(s=Mi(t),f.length=1,e=e-s-1,f[0]=Jm(10,(os-e%os)%os),t.e=m1(-e/os)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Jm(10,os-n),f[d]=a>0?(u/Jm(10,o-a)%Jm(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==_o&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=_o)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Cs&&(t.e>II||t.e<-II))throw Error(b8+Mi(t));return t}function ile(t,e){var r,n,a,s,o,l,c,u,d,f,A=t.constructor,h=A.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new A(t),Cs?Ga(e,h):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(h/os),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=_o-1;--c[s],c[a]+=_o}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Cs?Ga(e,h):e):new A(0)}function cg(t,e,r){var n,a=Mi(t),s=Ff(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+d0(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+d0(-a-1)+s,r&&(n=r-o)>0&&(s+=d0(n))):a>=o?(s+=d0(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+d0(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=d0(n))),t.s<0?"-"+s:s}function uq(t,e){if(t.length>e)return t.length=e,!0}function ole(t){var e,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(kp+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return cq(o,s.toString())}else if(typeof s!="string")throw Error(kp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,VWe.test(s))cq(o,s);else throw Error(kp+s)}if(a.prototype=Ur,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=ole,a.config=a.set=HWe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function HWe(t){if(!t||typeof t!="object")throw Error(hd+"Object expected");var e,r,n,a=["precision",1,A1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(m1(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(kp+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(kp+r+": "+n);return this}var w8=ole(QWe);au=new w8(1);const Ia=w8;var $We=t=>t,lle={},cle=t=>t===lle,dq=t=>function e(){return arguments.length===0||arguments.length===1&&cle(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},ule=(t,e)=>t===1?e:dq(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==lle).length;return s>=t?e(...n):ule(t-s,dq(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>cle(d)?l.shift():d);return e(...u,...l)}))}),GWe=t=>ule(t.length,t),LF=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},KWe=GWe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),qWe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return $We;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}};function dle(t){var e;return t===0?e=1:e=Math.floor(new Ia(t).abs().log(10).toNumber())+1,e}function fle(t,e,r){for(var n=new Ia(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var hle=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},Ale=(t,e,r)=>{if(t.lte(0))return new Ia(0);var n=dle(t.toNumber()),a=new Ia(10).pow(n),s=t.div(a),o=n!==1?.05:.1,l=new Ia(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return e?new Ia(c.toNumber()):new Ia(Math.ceil(c.toNumber()))},zWe=(t,e,r)=>{var n=new Ia(1),a=new Ia(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new Ia(10).pow(dle(t)-1),a=new Ia(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new Ia(Math.floor(t)))}else t===0?a=new Ia(Math.floor((e-1)/2)):r||(a=new Ia(Math.floor(t)));var o=Math.floor((e-1)/2),l=qWe(KWe(c=>a.add(new Ia(c-o).mul(n)).toNumber()),LF);return l(0,e)},mle=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new Ia(0),tickMin:new Ia(0),tickMax:new Ia(0)};var o=Ale(new Ia(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new Ia(0):(l=new Ia(e).add(r).div(2),l=l.sub(new Ia(l).mod(o)));var c=Math.ceil(l.sub(e).div(o).toNumber()),u=Math.ceil(new Ia(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?mle(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new Ia(c).mul(o)),tickMax:l.add(new Ia(u).mul(o))})},WWe=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[l,c]=hle([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...LF(0,a-1).map(()=>1/0)]:[...LF(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return zWe(l,a,s);var{step:d,tickMin:f,tickMax:A}=mle(l,c,o,s,0),h=fle(f,A.add(new Ia(.1).mul(d)),d);return r>n?h.reverse():h},XWe=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=hle([n,a]);if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(r,2),u=Ale(new Ia(l).sub(o).div(c-1),s,0),d=[...fle(new Ia(o),new Ia(l),u),l];return s===!1&&(d=d.map(f=>Math.round(f))),n>a?d.reverse():d},ple=t=>t.rootProps.maxBarSize,YWe=t=>t.rootProps.barGap,gle=t=>t.rootProps.barCategoryGap,JWe=t=>t.rootProps.barSize,Xw=t=>t.rootProps.stackOffset,xle=t=>t.rootProps.reverseStackOrder,N8=t=>t.options.chartName,C8=t=>t.rootProps.syncId,vle=t=>t.rootProps.syncMethod,_8=t=>t.options.eventEmitter,Bl={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ch={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Zc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},H4=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},ZWe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ch.angleAxisId,includeHidden:!1,name:void 0,reversed:Ch.reversed,scale:Ch.scale,tick:Ch.tick,tickCount:void 0,ticks:void 0,type:Ch.type,unit:void 0},eXe={allowDataOverflow:Zc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Zc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zc.scale,tick:Zc.tick,tickCount:Zc.tickCount,ticks:void 0,type:Zc.type,unit:void 0},tXe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ch.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ch.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ch.scale,tick:Ch.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},rXe={allowDataOverflow:Zc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Zc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zc.scale,tick:Zc.tick,tickCount:Zc.tickCount,ticks:void 0,type:"category",unit:void 0},E8=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?tXe:ZWe,S8=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?rXe:eXe,$4=t=>t.polarOptions,I8=Gt([bA,wA,co],Aoe),yle=Gt([$4,I8],(t,e)=>{if(t!=null)return kl(t.innerRadius,e,0)}),ble=Gt([$4,I8],(t,e)=>{if(t!=null)return kl(t.outerRadius,e,e*.8)}),nXe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},wle=Gt([$4],nXe);Gt([E8,wle],H4);var Nle=Gt([I8,yle,ble],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});Gt([S8,Nle],H4);var Cle=Gt([la,$4,yle,ble,bA,wA],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=e;return{cx:kl(o,a,a/2),cy:kl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Ss=(t,e)=>e,Yw=(t,e,r)=>r;function j8(t){return t==null?void 0:t.id}function _le(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,o=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=j8(l);u.forEach((f,A)=>{var h=s==null||a?A:String(ds(f,s,null)),m=ds(f,l.dataKey,0),p;o.has(h)?p=o.get(h):p={},Object.assign(p,{[d]:m}),o.set(h,p)})}}),Array.from(o.values())}function G4(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var K4=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function q4(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function aXe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var fo=t=>{var e=la(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},p1=t=>t.tooltip.settings.axisId;function fq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fq(Object(r),!0).forEach(function(n){sXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sXe(t,e,r){return(e=iXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iXe(t){var e=oXe(t,"string");return typeof e=="symbol"?e:e+""}function oXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UF=[0,"auto"],yo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Ele=(t,e)=>t.cartesianAxis.xAxis[e],_A=(t,e)=>{var r=Ele(t,e);return r??yo},bo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:UF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Hw},Sle=(t,e)=>t.cartesianAxis.yAxis[e],EA=(t,e)=>{var r=Sle(t,e);return r??bo},lXe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},P8=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??lXe},Ks=(t,e,r)=>{switch(e){case"xAxis":return _A(t,r);case"yAxis":return EA(t,r);case"zAxis":return P8(t,r);case"angleAxis":return E8(t,r);case"radiusAxis":return S8(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},cXe=(t,e,r)=>{switch(e){case"xAxis":return _A(t,r);case"yAxis":return EA(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Jw=(t,e,r)=>{switch(e){case"xAxis":return _A(t,r);case"yAxis":return EA(t,r);case"angleAxis":return E8(t,r);case"radiusAxis":return S8(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Ile=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function B8(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var T8=t=>t.graphicalItems.cartesianItems,uXe=Gt([Ss,Yw],B8),k8=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),Zw=Gt([T8,Ks,uXe],k8,{memoizeOptions:{resultEqualityCheck:q4}}),jle=Gt([Zw],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(G4)),Ple=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),dXe=Gt([Zw],Ple),F8=t=>t.map(e=>e.data).filter(Boolean).flat(1),fXe=Gt([Zw],F8,{memoizeOptions:{resultEqualityCheck:q4}}),O8=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},D8=Gt([fXe,tle],O8),R8=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:ds(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:ds(a,n)}))):t.map(n=>({value:n})),z4=Gt([D8,Ks,Zw],R8);function Ble(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function hE(t){if(Gf(t)||t instanceof Date){var e=Number(t);if(Gs(e))return e}}function hq(t){if(Array.isArray(t)){var e=[hE(t[0]),hE(t[1])];return hm(e)?e:void 0}var r=hE(t);if(r!=null)return[r,r]}function cA(t){return t.map(hE).filter(bVe)}function hXe(t,e,r){return!r||typeof e!="number"||$f(e)?[]:r.length?cA(r.flatMap(n=>{var a=ds(t,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!Gs(s)||!Gs(o)))return[e-s,e+o]})):[]}var ho=t=>{var e=fo(t),r=p1(t);return Jw(t,e,r)},eN=Gt([ho],t=>t==null?void 0:t.dataKey),AXe=Gt([jle,tle,ho],_le),Tle=(t,e,r,n)=>{var a={},s=e.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},a);return Object.fromEntries(Object.entries(s).map(o=>{var[l,c]=o,u=n?[...c].reverse():c,d=u.map(j8);return[l,{stackedData:L$e(t,d,r),graphicalItems:u}]}))},QF=Gt([AXe,jle,Xw,xle],Tle),kle=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var o=$$e(t,a,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},mXe=Gt([Ks],t=>t.allowDataOverflow),M8=t=>{var e;if(t==null||!("domain"in t))return UF;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=cA(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:UF},L8=Gt([Ks],M8),U8=Gt([L8,mXe],rle),pXe=Gt([QF,CA,Ss,U8],kle,{memoizeOptions:{resultEqualityCheck:K4}}),W4=t=>t.errorBars,gXe=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>Ble(r,n)),PI=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},Q8=(t,e,r,n,a)=>{var s,o;if(r.length>0&&t.forEach(l=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(v=>Ble(a,v)),A=ds(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),h=hXe(l,A,f);if(h.length>=2){var m=Math.min(...h),p=Math.max(...h);(s==null||m<s)&&(s=m),(o==null||p>o)&&(o=p)}var g=hq(A);g!=null&&(s=s==null?g[0]:Math.min(s,g[0]),o=o==null?g[1]:Math.max(o,g[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=hq(ds(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),Gs(s)&&Gs(o))return[s,o]},xXe=Gt([D8,Ks,dXe,W4,Ss],Q8,{memoizeOptions:{resultEqualityCheck:K4}});function vXe(t){var{value:e}=t;if(Gf(e)||e instanceof Date)return e}var yXe=(t,e,r)=>{var n=t.map(vXe).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&Bse(n))?boe(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},Fle=t=>t.referenceElements.dots,g1=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),bXe=Gt([Fle,Ss,Yw],g1),Ole=t=>t.referenceElements.areas,wXe=Gt([Ole,Ss,Yw],g1),Dle=t=>t.referenceElements.lines,NXe=Gt([Dle,Ss,Yw],g1),Rle=(t,e)=>{if(t!=null){var r=cA(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},CXe=Gt(bXe,Ss,Rle),Mle=(t,e)=>{if(t!=null){var r=cA(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},_Xe=Gt([wXe,Ss],Mle);function EXe(t){var e;if(t.x!=null)return cA([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:cA(r)}function SXe(t){var e;if(t.y!=null)return cA([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:cA(r)}var Lle=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?EXe(n):SXe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},IXe=Gt([NXe,Ss],Lle),jXe=Gt(CXe,IXe,_Xe,(t,e,r)=>PI(t,r,e)),V8=(t,e,r,n,a,s,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?PI(n,s,a):PI(s,a);return UWe(e,u,t.allowDataOverflow)},PXe=Gt([Ks,L8,U8,pXe,xXe,jXe,la,Ss],V8,{memoizeOptions:{resultEqualityCheck:K4}}),BXe=[0,1],H8=(t,e,r,n,a,s,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=t,u=jg(e,s);if(u&&l==null){var d;return boe(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?yXe(n,t,u):a==="expand"?BXe:o}},$8=Gt([Ks,la,D8,z4,Xw,Ss,PXe],H8),Ule=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(Mw(s));return l in zy?l:"point"}}},x1=Gt([Ks,la,Ile,N8,Ss],Ule);function TXe(t){if(t!=null){if(t in zy)return zy[t]();var e="scale".concat(Mw(t));if(e in zy)return zy[e]()}}function G8(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=TXe(e);if(a!=null){var s=a.domain(r).range(n);return F$e(s),s}}}var K8=(t,e,r)=>{var n=M8(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&hm(t))return WWe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&hm(t))return XWe(t,e.tickCount,e.allowDecimals)}},q8=Gt([$8,Jw,x1],K8),z8=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&hm(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],o=e[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return e},kXe=Gt([Ks,$8,q8,Ss],z8),FXe=Gt(z4,Ks,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(cA(t.map(f=>f.value))).sort((f,A)=>f-A),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var o=s-a;if(o===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/o}}),Qle=Gt(FXe,la,gle,co,(t,e,r,n,a)=>a,(t,e,r,n,a)=>{if(!Gs(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var o=kl(r,t*s),l=t*s/2;return l-o-(l-o)/s*o}return 0}),OXe=(t,e,r)=>{var n=_A(t,e);return n==null||typeof n.padding!="string"?0:Qle(t,"xAxis",e,r,n.padding)},DXe=(t,e,r)=>{var n=EA(t,e);return n==null||typeof n.padding!="string"?0:Qle(t,"yAxis",e,r,n.padding)},RXe=Gt(_A,OXe,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),MXe=Gt(EA,DXe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),LXe=Gt([co,RXe,S4,E4,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),UXe=Gt([co,la,MXe,S4,E4,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),tN=(t,e,r,n)=>{var a;switch(e){case"xAxis":return LXe(t,r,n);case"yAxis":return UXe(t,r,n);case"zAxis":return(a=P8(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return wle(t);case"radiusAxis":return Nle(t,r);default:return}},Vle=Gt([Ks,tN],H4),X4=Gt([Ks,x1,kXe,Vle],G8);Gt([Zw,W4,Ss],gXe);function Hle(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Y4=(t,e)=>e,J4=(t,e,r)=>r,QXe=Gt(C4,Y4,J4,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Hle)),VXe=Gt(_4,Y4,J4,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Hle)),$le=(t,e)=>({width:t.width,height:e.height}),HXe=(t,e)=>{var r=typeof e.width=="number"?e.width:Hw;return{width:r,height:t.height}},Gle=Gt(co,_A,$le),$Xe=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},GXe=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},KXe=Gt(wA,co,QXe,Y4,J4,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=$le(e,l);o==null&&(o=$Xe(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),qXe=Gt(bA,co,VXe,Y4,J4,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=HXe(e,l);o==null&&(o=GXe(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),zXe=(t,e)=>{var r=_A(t,e);if(r!=null)return KXe(t,r.orientation,r.mirror)},WXe=Gt([co,_A,zXe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),XXe=(t,e)=>{var r=EA(t,e);if(r!=null)return qXe(t,r.orientation,r.mirror)},YXe=Gt([co,EA,XXe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),Kle=Gt(co,EA,(t,e)=>{var r=typeof e.width=="number"?e.width:Hw;return{width:r,height:t.height}}),Aq=(t,e,r)=>{switch(e){case"xAxis":return Gle(t,r).width;case"yAxis":return Kle(t,r).height;default:return}},qle=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=jg(t,n),c=e.map(u=>u.value);if(o&&l&&s==="category"&&a&&Bse(c))return c}},W8=Gt([la,z4,Ks,Ss],qle),zle=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=jg(t,n);if(o&&(a==="number"||s!=="auto"))return e.map(l=>l.value)}},X8=Gt([la,z4,Jw,Ss],zle);Gt([la,cXe,x1,X4,W8,X8,tN,q8,Ss],(t,e,r,n,a,s,o,l,c)=>{if(e!=null){var u=jg(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}});var JXe=(t,e,r,n,a,s,o,l,c)=>{if(!(e==null||n==null)){var u=jg(t,c),{type:d,ticks:f,tickCount:A}=e,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/h:0;m=c==="angleAxis"&&s!=null&&s.length>=2?sl(s[0]-s[1])*2*m:m;var p=f||a;if(p){var g=p.map((v,y)=>{var b=o?o.indexOf(v):v;return{index:y,coordinate:n(b)+m,value:v,offset:m}});return g.filter(v=>Gs(v.coordinate))}return u&&l?l.map((v,y)=>({coordinate:n(v)+m,value:v,index:y,offset:m})).filter(v=>Gs(v.coordinate)):n.ticks?n.ticks(A).map(v=>({coordinate:n(v)+m,value:v,offset:m})):n.domain().map((v,y)=>({coordinate:n(v)+m,value:o?o[v]:v,index:y,offset:m}))}},Wle=Gt([la,Jw,x1,X4,q8,tN,W8,X8,Ss],JXe),ZXe=(t,e,r,n,a,s,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=jg(t,o),{tickCount:c}=e,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?sl(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Uv=Gt([la,Jw,X4,tN,W8,X8,Ss],ZXe),Qv=Gt(Ks,X4,(t,e)=>{if(!(t==null||e==null))return jI(jI({},t),{},{scale:e})}),eYe=Gt([Ks,x1,$8,Vle],G8);Gt((t,e,r)=>P8(t,r),eYe,(t,e)=>{if(!(t==null||e==null))return jI(jI({},t),{},{scale:e})});var tYe=Gt([la,C4,_4],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Xle=t=>t.options.defaultTooltipEventType,Yle=t=>t.options.validateTooltipEventTypes;function Jle(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function Y8(t,e){var r=Xle(t),n=Yle(t);return Jle(e,r,n)}function rYe(t){return Jr(e=>Y8(e,t))}var Zle=(t,e)=>{var r,n=Number(e);if(!($f(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},nYe=t=>t.tooltip.settings,w0={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},aYe={itemInteraction:{click:w0,hover:w0},axisInteraction:{click:w0,hover:w0},keyboardInteraction:w0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},ece=Oc({name:"tooltip",initialState:aYe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:xs()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Wd(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:xs()},removeTooltipEntrySettings:{reducer(t,e){var r=Wd(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:xs()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:sYe,replaceTooltipEntrySettings:iYe,removeTooltipEntrySettings:oYe,setTooltipSettingsState:lYe,setActiveMouseOverItemIndex:tce,mouseLeaveItem:cYe,mouseLeaveChart:rce,setActiveClickItemIndex:uYe,setMouseOverAxisIndex:nce,setMouseClickAxisIndex:dYe,setSyncInteraction:VF,setKeyboardInteraction:HF}=ece.actions,fYe=ece.reducer;function mq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function g_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mq(Object(r),!0).forEach(function(n){hYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hYe(t,e,r){return(e=AYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AYe(t){var e=mYe(t,"string");return typeof e=="symbol"?e:e+""}function mYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pYe(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function gYe(t){return t.index!=null}var ace=(t,e,r,n)=>{if(e==null)return w0;var a=pYe(t,e,r);if(a==null)return w0;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(gYe(a)){if(s)return g_(g_({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return g_(g_({},w0),{},{coordinate:a.coordinate})};function xYe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function vYe(t,e){var r=xYe(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),o=Math.max(n,a);return r>=s&&r<=o}function yYe(t,e,r){if(r==null||e==null)return!0;var n=ds(t,e);return n==null||!hm(r)?!0:vYe(n,r)}var J8=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!Gs(s))return a;var o=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(o,Math.min(s,l)),u=e[c];return u==null||yYe(u,r,n)?String(c):null},sce=(t,e,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},ice=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},rN=t=>t.options.tooltipPayloadSearcher,v1=t=>t.tooltip;function pq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pq(Object(r),!0).forEach(function(n){bYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bYe(t,e,r){return(e=wYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wYe(t){var e=NYe(t,"string");return typeof e=="symbol"?e:e+""}function NYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CYe(t,e){return t??e}var oce=(t,e,r,n,a,s,o)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return t.reduce((A,h)=>{var m,{dataDefinedOnItem:p,settings:g}=h,v=CYe(p,l),y=Array.isArray(v)?Lie(v,u,d):v,b=(m=g==null?void 0:g.dataKey)!==null&&m!==void 0?m:n,w=g==null?void 0:g.nameKey,j;if(n&&Array.isArray(y)&&!Array.isArray(y[0])&&o==="axis"?j=yVe(y,n,a):j=s(y,e,c,w),Array.isArray(j))j.forEach(_=>{var S=gq(gq({},g),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});A.push(SG({tooltipEntrySettings:S,dataKey:_.dataKey,payload:_.payload,value:ds(_.payload,_.dataKey),name:_.name}))});else{var I;A.push(SG({tooltipEntrySettings:g,dataKey:b,payload:j,value:ds(j,b),name:(I=ds(j,w))!==null&&I!==void 0?I:g==null?void 0:g.name}))}return A},f)}},Z8=Gt([ho,la,Ile,N8,fo],Ule),_Ye=Gt([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),EYe=Gt([fo,p1],B8),y1=Gt([_Ye,ho,EYe],k8,{memoizeOptions:{resultEqualityCheck:q4}}),SYe=Gt([y1],t=>t.filter(G4)),IYe=Gt([y1],F8,{memoizeOptions:{resultEqualityCheck:q4}}),b1=Gt([IYe,CA],O8),jYe=Gt([SYe,CA,ho],_le),eM=Gt([b1,ho,y1],R8),lce=Gt([ho],M8),PYe=Gt([ho],t=>t.allowDataOverflow),cce=Gt([lce,PYe],rle),BYe=Gt([y1],t=>t.filter(G4)),TYe=Gt([jYe,BYe,Xw,xle],Tle),kYe=Gt([TYe,CA,fo,cce],kle),FYe=Gt([y1],Ple),OYe=Gt([b1,ho,FYe,W4,fo],Q8,{memoizeOptions:{resultEqualityCheck:K4}}),DYe=Gt([Fle,fo,p1],g1),RYe=Gt([DYe,fo],Rle),MYe=Gt([Ole,fo,p1],g1),LYe=Gt([MYe,fo],Mle),UYe=Gt([Dle,fo,p1],g1),QYe=Gt([UYe,fo],Lle),VYe=Gt([RYe,QYe,LYe],PI),HYe=Gt([ho,lce,cce,kYe,OYe,VYe,la,fo],V8),nN=Gt([ho,la,b1,eM,Xw,fo,HYe],H8),$Ye=Gt([nN,ho,Z8],K8),GYe=Gt([ho,nN,$Ye,fo],z8),uce=t=>{var e=fo(t),r=p1(t),n=!1;return tN(t,e,r,n)},dce=Gt([ho,uce],H4),fce=Gt([ho,Z8,GYe,dce],G8),KYe=Gt([la,eM,ho,fo],qle),qYe=Gt([la,eM,ho,fo],zle),zYe=(t,e,r,n,a,s,o,l)=>{if(e){var{type:c}=e,u=jg(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?sl(a[0]-a[1])*2*f:f,u&&o?o.map((A,h)=>({coordinate:n(A)+f,value:A,index:h,offset:f})):n.domain().map((A,h)=>({coordinate:n(A)+f,value:s?s[A]:A,index:h,offset:f}))}}},SA=Gt([la,ho,Z8,fce,uce,KYe,qYe,fo],zYe),tM=Gt([Xle,Yle,nYe],(t,e,r)=>Jle(r.shared,t,e)),hce=t=>t.tooltip.settings.trigger,rM=t=>t.tooltip.settings.defaultIndex,aN=Gt([v1,tM,hce,rM],ace),ug=Gt([aN,b1,eN,nN],J8),Ace=Gt([SA,ug],Zle),nM=Gt([aN],t=>{if(t)return t.dataKey}),WYe=Gt([aN],t=>{if(t)return t.graphicalItemId}),mce=Gt([v1,tM,hce,rM],ice),XYe=Gt([bA,wA,la,co,SA,rM,mce,rN],sce),YYe=Gt([aN,XYe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),JYe=Gt([aN],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),ZYe=Gt([mce,ug,CA,eN,Ace,rN,tM],oce);Gt([ZYe],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function xq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xq(Object(r),!0).forEach(function(n){eJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eJe(t,e,r){return(e=tJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tJe(t){var e=rJe(t,"string");return typeof e=="symbol"?e:e+""}function rJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nJe=()=>Jr(ho),aJe=()=>{var t=nJe(),e=Jr(SA),r=Jr(fce);return cI(!t||!r?void 0:vq(vq({},t),{},{scale:r}),e)};function yq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yq(Object(r),!0).forEach(function(n){sJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sJe(t,e,r){return(e=iJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iJe(t){var e=oJe(t,"string");return typeof e=="symbol"?e:e+""}function oJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lJe=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},cJe=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:o}=n;return dx(dx(dx({},n),Ri(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return dx(dx(dx({},n),Ri(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function uJe(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var pce=(t,e,r,n,a)=>{var s,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,u,d,f,A,h=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[o-1])===null||u===void 0?void 0:u.coordinate,m=(d=r[l])===null||d===void 0?void 0:d.coordinate,p=l>=o-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(A=r[l+1])===null||A===void 0?void 0:A.coordinate,g=void 0;if(!(h==null||m==null||p==null))if(sl(m-h)!==sl(p-m)){var v=[];if(sl(p-m)===sl(a[1]-a[0])){g=p;var y=m+a[1]-a[0];v[0]=Math.min(y,(y+h)/2),v[1]=Math.max(y,(y+h)/2)}else{g=h;var b=p+a[1]-a[0];v[0]=Math.min(m,(b+m)/2),v[1]=Math.max(m,(b+m)/2)}var w=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>w[0]&&t<=w[1]||t>=v[0]&&t<=v[1]){var j;return(j=r[l])===null||j===void 0?void 0:j.index}}else{var I=Math.min(h,p),_=Math.max(h,p);if(t>(I+m)/2&&t<=(_+m)/2){var S;return(S=r[l])===null||S===void 0?void 0:S.index}}}else if(e)for(var E=0;E<o;E++){var F=e[E];if(F!=null){var P=e[E+1],k=e[E-1];if(E===0&&P!=null&&t<=(F.coordinate+P.coordinate)/2||E===o-1&&k!=null&&t>(F.coordinate+k.coordinate)/2||E>0&&E<o-1&&k!=null&&P!=null&&t>(F.coordinate+k.coordinate)/2&&t<=(F.coordinate+P.coordinate)/2)return F.index}}return-1},dJe=()=>Jr(N8),aM=(t,e)=>e,gce=(t,e,r)=>r,sM=(t,e,r,n)=>n,fJe=Gt(SA,t=>h4(t,e=>e.coordinate)),iM=Gt([v1,aM,gce,sM],ace),oM=Gt([iM,b1,eN,nN],J8),hJe=(t,e,r)=>{if(e!=null){var n=v1(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},xce=Gt([v1,aM,gce,sM],ice),BI=Gt([bA,wA,la,co,SA,sM,xce,rN],sce),AJe=Gt([iM,BI],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),vce=Gt([SA,oM],Zle),mJe=Gt([xce,oM,CA,eN,vce,rN,aM],oce),pJe=Gt([iM,oM],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),gJe=(t,e,r,n,a,s,o)=>{if(!(!t||!r||!n||!a)&&uJe(t,o)){var l=G$e(t,e),c=pce(l,s,a,r,n),u=lJe(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},xJe=(t,e,r,n,a,s,o)=>{if(!(!t||!n||!a||!s||!r)){var l=sqe(t,r);if(l){var c=K$e(l,e),u=pce(c,o,s,n,a),d=cJe(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},vJe=(t,e,r,n,a,s,o,l)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?gJe(t,e,n,a,s,o,l):xJe(t,e,r,n,a,s,o)},yJe=Gt(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),bJe=Gt(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(Bl)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:aXe}});function bq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bq(Object(r),!0).forEach(function(n){wJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wJe(t,e,r){return(e=NJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NJe(t){var e=CJe(t,"string");return typeof e=="symbol"?e:e+""}function CJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Je={},EJe={zIndexMap:Object.values(Bl).reduce((t,e)=>wq(wq({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),_Je)},SJe=new Set(Object.values(Bl));function IJe(t){return SJe.has(t)}var yce=Oc({name:"zIndex",initialState:EJe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:xs()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!IJe(r)&&delete t.zIndexMap[r])},prepare:xs()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:xs()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:xs()}}}),{registerZIndexPortal:jJe,unregisterZIndexPortal:PJe,registerZIndexPortalElement:BJe,unregisterZIndexPortalElement:TJe}=yce.actions,kJe=yce.reducer;function Zf(t){var{zIndex:e,children:r}=t,n=yGe(),a=n&&e!==void 0&&e!==0,s=vu(),o=es();x.useLayoutEffect(()=>a?(o(jJe({zIndex:e})),()=>{o(PJe({zIndex:e}))}):Lw,[o,e,a]);var l=Jr(c=>yJe(c,e,s));return a?l?uu.createPortal(r,l):null:r}function $F(){return $F=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$F.apply(null,arguments)}function Nq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function x_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nq(Object(r),!0).forEach(function(n){FJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FJe(t,e,r){return(e=OJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OJe(t){var e=DJe(t,"string");return typeof e=="symbol"?e:e+""}function DJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RJe(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return x.isValidElement(e)?x.cloneElement(e,n):x.createElement(r,n)}function MJe(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,f=r,A=n,h=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var m,p,g;if(d==="ScatterChart")m=f,p=vKe,g=Bl.cursorLine;else if(d==="BarChart")m=yKe(l,f,s,o),p=hoe,g=Bl.cursorRectangle;else if(l==="radial"&&kse(f)){var{cx:v,cy:y,radius:b,startAngle:w,endAngle:j}=moe(f);m={cx:v,cy:y,startAngle:w,endAngle:j,innerRadius:b,outerRadius:b},p=goe,g=Bl.cursorLine}else m={points:cqe(l,f,s)},p=YR,g=Bl.cursorLine;var I=typeof c=="object"&&"className"in c?c.className:void 0,_=x_(x_(x_(x_({stroke:"#ccc",pointerEvents:"none"},s),m),L2(c)),{},{payload:A,payloadIndex:h,className:ka("recharts-tooltip-cursor",I)});return x.createElement(Zf,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:g},x.createElement(RJe,{cursor:c,cursorComp:p,cursorProps:_}))}function LJe(t){var e=aJe(),r=xGe(),n=$w(),a=dJe();return e==null||r==null||n==null||a==null?null:x.createElement(MJe,$F({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var bce=x.createContext(null),UJe=()=>x.useContext(bce),wce={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||c,A),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var A=0,h=f.length,m=new Array(h);A<h;A++)m[A]=f[A].fn;return m},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,A,h,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],v=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,A),!0;case 5:return g.fn.call(g.context,d,f,A,h),!0;case 6:return g.fn.call(g.context,d,f,A,h,m),!0}for(b=1,y=new Array(v-1);b<v;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var w=g.length,j;for(b=0;b<w;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),v){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,f);break;case 4:g[b].fn.call(g[b].context,d,f,A);break;default:if(!y)for(j=1,y=new Array(v-1);j<v;j++)y[j-1]=arguments[j];g[b].fn.apply(g[b].context,y)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,A){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var m=this._events[h];if(m.fn)m.fn===d&&(!A||m.once)&&(!f||m.context===f)&&o(this,h);else{for(var p=0,g=[],v=m.length;p<v;p++)(m[p].fn!==d||A&&!m[p].once||f&&m[p].context!==f)&&g.push(m[p]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(wce);var QJe=wce.exports;const VJe=dA(QJe);var Z2=new VJe,GF="recharts.syncEvent.tooltip",Cq="recharts.syncEvent.brush";function Nce(t,e){if(e){var r=Number.parseInt(e,10);if(!$f(r))return t==null?void 0:t[r]}}var HJe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Cce=Oc({name:"options",initialState:HJe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),$Je=Cce.reducer,{createEventEmitter:GJe}=Cce.actions;function KJe(t){return t.tooltip.syncInteraction}var qJe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},_ce=Oc({name:"chartData",initialState:qJe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:_q,setDataStartEndIndexes:zJe,setComputedData:eit}=_ce.actions,WJe=_ce.reducer,XJe=["x","y"];function Eq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Eq(Object(r),!0).forEach(function(n){YJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Eq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YJe(t,e,r){return(e=JJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JJe(t){var e=ZJe(t,"string");return typeof e=="symbol"?e:e+""}function ZJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eZe(t,e){if(t==null)return{};var r,n,a=tZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function tZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function rZe(){var t=Jr(C8),e=Jr(_8),r=es(),n=Jr(vle),a=Jr(SA),s=$w(),o=I4(),l=Jr(c=>c.rootProps.className);x.useEffect(()=>{if(t==null)return Lw;var c=(u,d,f)=>{if(e!==f&&t===u){if(n==="index"){var A;if(o&&d!==null&&d!==void 0&&(A=d.payload)!==null&&A!==void 0&&A.coordinate&&d.payload.sourceViewBox){var h=d.payload.coordinate,{x:m,y:p}=h,g=eZe(h,XJe),{x:v,y,width:b,height:w}=d.payload.sourceViewBox,j=fx(fx({},g),{},{x:o.x+(b?(m-v)/b:0)*o.width,y:o.y+(w?(p-y)/w:0)*o.height});r(fx(fx({},d),{},{payload:fx(fx({},d.payload),{},{coordinate:j})}))}else r(d);return}if(a!=null){var I;if(typeof n=="function"){var _={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},S=n(a,_);I=a[S]}else n==="value"&&(I=a.find(Ae=>String(Ae.value)===d.payload.label));var{coordinate:E}=d.payload;if(I==null||d.payload.active===!1||E==null||o==null){r(VF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:F,y:P}=E,k=Math.min(F,o.x+o.width),D=Math.min(P,o.y+o.height),J={x:s==="horizontal"?I.coordinate:k,y:s==="horizontal"?D:I.coordinate},fe=VF({active:d.payload.active,coordinate:J,dataKey:d.payload.dataKey,index:String(I.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(fe)}}};return Z2.on(GF,c),()=>{Z2.off(GF,c)}},[l,r,e,t,n,a,s,o])}function nZe(){var t=Jr(C8),e=Jr(_8),r=es();x.useEffect(()=>{if(t==null)return Lw;var n=(a,s,o)=>{e!==o&&t===a&&r(zJe(s))};return Z2.on(Cq,n),()=>{Z2.off(Cq,n)}},[r,e,t])}function aZe(){var t=es();x.useEffect(()=>{t(GJe())},[t]),rZe(),nZe()}function sZe(t,e,r,n,a,s){var o=Jr(h=>hJe(h,t,e)),l=Jr(_8),c=Jr(C8),u=Jr(vle),d=Jr(KJe),f=d==null?void 0:d.active,A=I4();x.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=VF({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:A,graphicalItemId:void 0});Z2.emit(GF,c,h,l)}},[f,r,o,a,n,l,c,u,s,A])}function Sq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Iq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sq(Object(r),!0).forEach(function(n){iZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iZe(t,e,r){return(e=oZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oZe(t){var e=lZe(t,"string");return typeof e=="symbol"?e:e+""}function lZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cZe(t){return t.dataKey}function uZe(t,e){return x.isValidElement(t)?x.cloneElement(t,e):typeof t=="function"?x.createElement(t,e):x.createElement(JGe,e)}var jq=[],dZe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Pq(t){var e,r,n=ll(t,dZe),{active:a,allowEscapeViewBox:s,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:A,position:h,reverseDirection:m,useTranslate3d:p,wrapperStyle:g,cursor:v,shared:y,trigger:b,defaultIndex:w,portal:j,axisId:I}=n,_=es(),S=typeof w=="number"?String(w):w;x.useEffect(()=>{_(lYe({shared:y,trigger:b,axisId:I,active:a,defaultIndex:S}))},[_,y,b,I,a,S]);var E=I4(),F=loe(),P=rYe(y),{activeIndex:k,isActive:D}=(e=Jr(Z=>pJe(Z,P,b,S)))!==null&&e!==void 0?e:{},J=Jr(Z=>mJe(Z,P,b,S)),fe=Jr(Z=>vce(Z,P,b,S)),Ae=Jr(Z=>AJe(Z,P,b,S)),me=J,pe=UJe(),ne=(r=a??D)!==null&&r!==void 0?r:!1,[Pe,Be]=cie([me,ne]),O=P==="axis"?fe:void 0;sZe(P,b,Ae,O,k,ne);var G=j??pe;if(G==null||E==null||P==null)return null;var q=me??jq;ne||(q=jq),u&&q.length&&(q=Yse(q.filter(Z=>Z.value!=null&&(Z.hide!==!0||n.includeHidden)),A,cZe));var U=q.length>0,Y=x.createElement(sKe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:d,active:ne,coordinate:Ae,hasPayload:U,offset:f,position:h,reverseDirection:m,useTranslate3d:p,viewBox:E,wrapperStyle:g,lastBoundingBox:Pe,innerRef:Be,hasPortalFromProps:!!j},uZe(c,Iq(Iq({},n),{},{payload:q,label:O,active:ne,activeIndex:k,coordinate:Ae,accessibilityLayer:F})));return x.createElement(x.Fragment,null,uu.createPortal(Y,G),ne&&x.createElement(LJe,{cursor:v,tooltipEventType:P,coordinate:Ae,payload:q,index:k}))}var sN=t=>null;sN.displayName="Cell";function fZe(t,e,r){return(e=hZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hZe(t){var e=AZe(t,"string");return typeof e=="symbol"?e:e+""}function AZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class mZe{constructor(e){fZe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Bq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pZe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bq(Object(r),!0).forEach(function(n){gZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gZe(t,e,r){return(e=xZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xZe(t){var e=vZe(t,"string");return typeof e=="symbol"?e:e+""}function vZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yZe={cacheSize:2e3,enableCache:!0},Ece=pZe({},yZe),Tq=new mZe(Ece.cacheSize),bZe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},kq="recharts_measurement_span";function wZe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var Fq=(t,e)=>{try{var r=document.getElementById(kq);r||(r=document.createElement("span"),r.setAttribute("id",kq),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,bZe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},kb=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||k4.isSsr)return{width:0,height:0};if(!Ece.enableCache)return Fq(e,r);var n=wZe(e,r),a=Tq.get(n);if(a)return a;var s=Fq(e,r);return Tq.set(n,s),s},Sce;function NZe(t,e,r){return(e=CZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CZe(t){var e=_Ze(t,"string");return typeof e=="symbol"?e:e+""}function _Ze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Oq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Dq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,EZe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,SZe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,IZe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},jZe=["cm","mm","pt","pc","in","Q","px"];function PZe(t){return jZe.includes(t)}var Kx="NaN";function BZe(t,e){return t*IZe[e]}class Xo{static parse(e){var r,[,n,a]=(r=SZe.exec(e))!==null&&r!==void 0?r:[];return n==null?Xo.NaN:new Xo(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,$f(e)&&(this.unit=""),r!==""&&!EZe.test(r)&&(this.num=NaN,this.unit=""),PZe(r)&&(this.num=BZe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Xo(NaN,""):new Xo(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Xo(NaN,""):new Xo(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Xo(NaN,""):new Xo(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Xo(NaN,""):new Xo(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return $f(this.num)}}Sce=Xo;NZe(Xo,"NaN",new Sce(NaN,""));function Ice(t){if(t==null||t.includes(Kx))return Kx;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=Oq.exec(e))!==null&&r!==void 0?r:[],o=Xo.parse(n??""),l=Xo.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Kx;e=e.replace(Oq,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,f,A]=(u=Dq.exec(e))!==null&&u!==void 0?u:[],h=Xo.parse(d??""),m=Xo.parse(A??""),p=f==="+"?h.add(m):h.subtract(m);if(p.isNaN())return Kx;e=e.replace(Dq,p.toString())}return e}var Rq=/\(([^()]*)\)/;function TZe(t){for(var e=t,r;(r=Rq.exec(e))!=null;){var[,n]=r;e=e.replace(Rq,Ice(n))}return e}function kZe(t){var e=t.replace(/\s+/g,"");return e=TZe(e),e=Ice(e),e}function FZe(t){try{return kZe(t)}catch{return Kx}}function uB(t){var e=FZe(t.slice(5,-1));return e===Kx?"":e}var OZe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],DZe=["dx","dy","angle","className","breakAll"];function KF(){return KF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KF.apply(null,arguments)}function Mq(t,e){if(t==null)return{};var r,n,a=RZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function RZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var jce=/[ \f\n\r\t\v\u2028\u2029]+/,Pce=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];Oo(e)||(r?a=e.toString().split(""):a=e.toString().split(jce));var s=a.map(l=>({word:l,width:kb(l,n).width})),o=r?0:kb("",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function MZe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Bce=(t,e,r,n)=>t.reduce((a,s)=>{var{word:o,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(e==null||n||c.width+l+r<Number(e)))c.words.push(o),c.width+=l+r;else{var u={words:[o],width:l};a.push(u)}return a},[]),Tce=t=>t.reduce((e,r)=>e.width>r.width?e:r),LZe="",Lq=(t,e,r,n,a,s,o,l)=>{var c=t.slice(0,e),u=Pce({breakAll:r,style:n,children:c+LZe});if(!u)return[!1,[]];var d=Bce(u.wordsWithComputedWidth,s,o,l),f=d.length>a||Tce(d).width>Number(s);return[f,d]},UZe=(t,e,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=t,u=rn(s),d=String(o),f=Bce(e,n,r,a);if(!u||a)return f;var A=f.length>s||Tce(f).width>Number(n);if(!A)return f;for(var h=0,m=d.length-1,p=0,g;h<=m&&p<=d.length-1;){var v=Math.floor((h+m)/2),y=v-1,[b,w]=Lq(d,y,c,l,s,n,r,a),[j]=Lq(d,v,c,l,s,n,r,a);if(!b&&!j&&(h=v+1),b&&j&&(m=v-1),!b&&j){g=w;break}p++}return g||f},Uq=t=>{var e=Oo(t)?[]:t.toString().split(jce);return[{words:e,width:void 0}]},QZe=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=t;if((e||r)&&!k4.isSsr){var l,c,u=Pce({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return Uq(n);return UZe({breakAll:s,children:n,maxLines:o,style:a},l,c,e,!!r)}return Uq(n)},kce="#808080",VZe={angle:0,breakAll:!1,capHeight:"0.71em",fill:kce,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Z4=x.forwardRef((t,e)=>{var r=ll(t,VZe),{x:n,y:a,lineHeight:s,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=Mq(r,OZe),A=x.useMemo(()=>QZe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:h,dy:m,angle:p,className:g,breakAll:v}=f,y=Mq(f,DZe);if(!Gf(n)||!Gf(a)||A.length===0)return null;var b=Number(n)+(rn(h)?h:0),w=Number(a)+(rn(m)?m:0);if(!Gs(b)||!Gs(w))return null;var j;switch(d){case"start":j=uB("calc(".concat(o,")"));break;case"middle":j=uB("calc(".concat((A.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:j=uB("calc(".concat(A.length-1," * -").concat(s,")"));break}var I=[];if(c){var _=A[0].width,{width:S}=f;I.push("scale(".concat(rn(S)&&rn(_)?S/_:1,")"))}return p&&I.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),I.length&&(y.transform=I.join(" ")),x.createElement("text",KF({},dd(y),{ref:e,x:b,y:w,className:ka("recharts-text",g),textAnchor:u,fill:l.includes("url")?kce:l}),A.map((E,F)=>{var P=E.words.join(v?"":" ");return x.createElement("tspan",{x:b,dy:F===0?j:s,key:"".concat(P,"-").concat(F)},P)}))});Z4.displayName="Text";var HZe=["labelRef"],$Ze=["content"];function Qq(t,e){if(t==null)return{};var r,n,a=GZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function GZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Vq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vq(Object(r),!0).forEach(function(n){KZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KZe(t,e,r){return(e=qZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qZe(t){var e=zZe(t,"string");return typeof e=="symbol"?e:e+""}function zZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _h(){return _h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_h.apply(null,arguments)}var Fce=x.createContext(null),WZe=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o,children:l}=t,c=x.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o}),[e,r,n,a,s,o]);return x.createElement(Fce.Provider,{value:c},l)},Oce=()=>{var t=x.useContext(Fce),e=I4();return t||Wie(e)},XZe=x.createContext(null),YZe=()=>{var t=x.useContext(XZe),e=Jr(Cle);return t||e},JZe=t=>{var{value:e,formatter:r}=t,n=Oo(t.children)?e:t.children;return typeof r=="function"?r(n):n},lM=t=>t!=null&&typeof t=="function",ZZe=(t,e)=>{var r=sl(e-t),n=Math.min(Math.abs(e-t),360);return r*n},eet=(t,e,r,n,a)=>{var{offset:s,className:o}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:A,clockWise:h}=a,m=(u+d)/2,p=ZZe(f,A),g=p>=0?1:-1,v,y;switch(e){case"insideStart":v=f+g*s,y=h;break;case"insideEnd":v=A-g*s,y=!h;break;case"end":v=A+g*s,y=h;break;default:throw new Error("Unsupported position ".concat(e))}y=p<=0?y:!y;var b=Ri(l,c,m,v),w=Ri(l,c,m,v+(y?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(w.x,",").concat(w.y),I=Oo(t.id)?U2("recharts-radial-line-"):t.id;return x.createElement("text",_h({},n,{dominantBaseline:"central",className:ka("recharts-radial-bar-label",o)}),x.createElement("defs",null,x.createElement("path",{id:I,d:j})),x.createElement("textPath",{xlinkHref:"#".concat(I)},r))},tet=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=Ri(n,a,o+e,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var A=(s+o)/2,{x:h,y:m}=Ri(n,a,A,u);return{x:h,y:m,textAnchor:"middle",verticalAnchor:"middle"}},qF=t=>"cx"in t&&rn(t.cx),ret=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!qF(r)&&(s=r);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=e,f=o,A=o+(c-u)/2,h=(f+A)/2,m=(c+u)/2,p=f+c/2,g=d>=0?1:-1,v=g*n,y=g>0?"end":"start",b=g>0?"start":"end",w=c>=0?1:-1,j=w*n,I=w>0?"end":"start",_=w>0?"start":"end";if(a==="top"){var S={x:f+c/2,y:l-v,textAnchor:"middle",verticalAnchor:y};return mi(mi({},S),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var E={x:A+u/2,y:l+d+v,textAnchor:"middle",verticalAnchor:b};return mi(mi({},E),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var F={x:h-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"};return mi(mi({},F),s?{width:Math.max(F.x-s.x,0),height:d}:{})}if(a==="right"){var P={x:h+m+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return mi(mi({},P),s?{width:Math.max(s.x+s.width-P.x,0),height:d}:{})}var k=s?{width:m,height:d}:{};return a==="insideLeft"?mi({x:h+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},k):a==="insideRight"?mi({x:h+m-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"},k):a==="insideTop"?mi({x:f+c/2,y:l+v,textAnchor:"middle",verticalAnchor:b},k):a==="insideBottom"?mi({x:A+u/2,y:l+d-v,textAnchor:"middle",verticalAnchor:y},k):a==="insideTopLeft"?mi({x:f+j,y:l+v,textAnchor:_,verticalAnchor:b},k):a==="insideTopRight"?mi({x:f+c-j,y:l+v,textAnchor:I,verticalAnchor:b},k):a==="insideBottomLeft"?mi({x:A+j,y:l+d-v,textAnchor:_,verticalAnchor:y},k):a==="insideBottomRight"?mi({x:A+u-j,y:l+d-v,textAnchor:I,verticalAnchor:y},k):a&&typeof a=="object"&&(rn(a.x)||aA(a.x))&&(rn(a.y)||aA(a.y))?mi({x:o+kl(a.x,m),y:l+kl(a.y,d),textAnchor:"end",verticalAnchor:"end"},k):mi({x:p,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},k)},net={angle:0,offset:5,zIndex:Bl.label,position:"middle",textBreakAll:!1};function f0(t){var e=ll(t,net),{viewBox:r,position:n,value:a,children:s,content:o,className:l="",textBreakAll:c,labelRef:u}=e,d=YZe(),f=Oce(),A=n==="center"?f:d??f,h,m,p;if(r==null?h=A:qF(r)?h=r:h=Wie(r),!h||Oo(a)&&Oo(s)&&!x.isValidElement(o)&&typeof o!="function")return null;var g=mi(mi({},e),{},{viewBox:h});if(x.isValidElement(o)){var{labelRef:v}=g,y=Qq(g,HZe);return x.cloneElement(o,y)}if(typeof o=="function"){var{content:b}=g,w=Qq(g,$Ze);if(m=x.createElement(o,w),x.isValidElement(m))return m}else m=JZe(e);var j=dd(e);if(qF(h)){if(n==="insideStart"||n==="insideEnd"||n==="end")return eet(e,n,m,j,h);p=tet(h,e.offset,e.position)}else p=ret(e,h);return x.createElement(Zf,{zIndex:e.zIndex},x.createElement(Z4,_h({ref:u,className:ka("recharts-label",l)},j,p,{textAnchor:MZe(j.textAnchor)?j.textAnchor:p.textAnchor,breakAll:c}),m))}f0.displayName="Label";var aet=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?x.createElement(f0,_h({key:"label-implicit"},n)):Gf(t)?x.createElement(f0,_h({key:"label-implicit",value:t},n)):x.isValidElement(t)?t.type===f0?x.cloneElement(t,mi({key:"label-implicit"},n)):x.createElement(f0,_h({key:"label-implicit",content:t},n)):lM(t)?x.createElement(f0,_h({key:"label-implicit",content:t},n)):t&&typeof t=="object"?x.createElement(f0,_h({},t,{key:"label-implicit"},n)):null};function set(t){var{label:e,labelRef:r}=t,n=Oce();return aet(e,n,r)||null}var Dce={},Rce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(Rce);var Mce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(Mce);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rce,r=Mce,n=d4;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(Dce);var iet=Dce.last;const oet=dA(iet);var cet=["valueAccessor"],uet=["dataKey","clockWise","id","textBreakAll","zIndex"];function TI(){return TI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},TI.apply(null,arguments)}function Hq(t,e){if(t==null)return{};var r,n,a=det(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function det(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var fet=t=>Array.isArray(t.value)?oet(t.value):t.value,Lce=x.createContext(void 0),het=Lce.Provider,Uce=x.createContext(void 0),Aet=Uce.Provider;function met(){return x.useContext(Lce)}function pet(){return x.useContext(Uce)}function AE(t){var{valueAccessor:e=fet}=t,r=Hq(t,cet),{dataKey:n,clockWise:a,id:s,textBreakAll:o,zIndex:l}=r,c=Hq(r,uet),u=met(),d=pet(),f=u||d;return!f||!f.length?null:x.createElement(Zf,{zIndex:l??Bl.label},x.createElement(ic,{className:"recharts-label-list"},f.map((A,h)=>{var m,p=Oo(n)?e(A,h):ds(A&&A.payload,n),g=Oo(s)?{}:{id:"".concat(s,"-").concat(h)};return x.createElement(f0,TI({key:"label-".concat(h)},dd(A),c,g,{fill:(m=r.fill)!==null&&m!==void 0?m:A.fill,parentViewBox:A.parentViewBox,value:p,textBreakAll:o,viewBox:A.viewBox,index:h,zIndex:0}))})))}AE.displayName="LabelList";function Qce(t){var{label:e}=t;return e?e===!0?x.createElement(AE,{key:"labelList-implicit"}):x.isValidElement(e)||lM(e)?x.createElement(AE,{key:"labelList-implicit",content:e}):typeof e=="object"?x.createElement(AE,TI({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var Vce=t=>t.graphicalItems.polarItems,get=Gt([Ss,Yw],B8),eP=Gt([Vce,Ks,get],k8),xet=Gt([eP],F8),tP=Gt([xet,V4],O8),vet=Gt([tP,Ks,eP],R8);Gt([tP,Ks,eP],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,o=ds(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:ds(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var $q=()=>{},yet=Gt([tP,Ks,eP,W4,Ss],Q8),bet=Gt([Ks,L8,U8,$q,yet,$q,la,Ss],V8),Hce=Gt([Ks,la,tP,vet,Xw,Ss,bet],H8),wet=Gt([Hce,Ks,x1],K8);Gt([Ks,Hce,wet,Ss],z8);var Net={radiusAxis:{},angleAxis:{}},$ce=Oc({name:"polarAxis",initialState:Net,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:tit,removeRadiusAxis:rit,addAngleAxis:nit,removeAngleAxis:ait}=$ce.actions,Cet=$ce.reducer;function Gq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Kq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Gq(Object(r),!0).forEach(function(n){_et(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _et(t,e,r){return(e=Eet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Eet(t){var e=Iet(t,"string");return typeof e=="symbol"?e:e+""}function Iet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jet=(t,e)=>e,cM=Gt([Vce,jet],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),Pet=[],uM=(t,e,r)=>(r==null?void 0:r.length)===0?Pet:r,Gce=Gt([V4,cM,uM],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>Kq(Kq({},e.presentationProps),s.props))),a!=null)return a}}),Bet=Gt([Gce,cM,uM],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,o=ds(n,e.nameKey,e.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:N4(o,e.dataKey),color:l,payload:n,type:e.legendType}})}),Tet=Gt([Gce,cM,uM,co],(t,e,r,n)=>{if(!(e==null||t==null))return Ftt({offset:n,pieSettings:e,displayedData:t,cells:r})}),Kce={exports:{}},Ka={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dM=Symbol.for("react.transitional.element"),fM=Symbol.for("react.portal"),rP=Symbol.for("react.fragment"),nP=Symbol.for("react.strict_mode"),aP=Symbol.for("react.profiler"),sP=Symbol.for("react.consumer"),iP=Symbol.for("react.context"),oP=Symbol.for("react.forward_ref"),lP=Symbol.for("react.suspense"),cP=Symbol.for("react.suspense_list"),uP=Symbol.for("react.memo"),dP=Symbol.for("react.lazy"),ket=Symbol.for("react.view_transition"),Fet=Symbol.for("react.client.reference");function pd(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case dM:switch(t=t.type,t){case rP:case aP:case nP:case lP:case cP:case ket:return t;default:switch(t=t&&t.$$typeof,t){case iP:case oP:case dP:case uP:return t;case sP:return t;default:return e}}case fM:return e}}}Ka.ContextConsumer=sP;Ka.ContextProvider=iP;Ka.Element=dM;Ka.ForwardRef=oP;Ka.Fragment=rP;Ka.Lazy=dP;Ka.Memo=uP;Ka.Portal=fM;Ka.Profiler=aP;Ka.StrictMode=nP;Ka.Suspense=lP;Ka.SuspenseList=cP;Ka.isContextConsumer=function(t){return pd(t)===sP};Ka.isContextProvider=function(t){return pd(t)===iP};Ka.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===dM};Ka.isForwardRef=function(t){return pd(t)===oP};Ka.isFragment=function(t){return pd(t)===rP};Ka.isLazy=function(t){return pd(t)===dP};Ka.isMemo=function(t){return pd(t)===uP};Ka.isPortal=function(t){return pd(t)===fM};Ka.isProfiler=function(t){return pd(t)===aP};Ka.isStrictMode=function(t){return pd(t)===nP};Ka.isSuspense=function(t){return pd(t)===lP};Ka.isSuspenseList=function(t){return pd(t)===cP};Ka.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===rP||t===aP||t===nP||t===lP||t===cP||typeof t=="object"&&t!==null&&(t.$$typeof===dP||t.$$typeof===uP||t.$$typeof===iP||t.$$typeof===sP||t.$$typeof===oP||t.$$typeof===Fet||t.getModuleId!==void 0)};Ka.typeOf=pd;Kce.exports=Ka;var Oet=Kce.exports,qq=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",zq=null,dB=null,qce=t=>{if(t===zq&&Array.isArray(dB))return dB;var e=[];return x.Children.forEach(t,r=>{Oo(r)||(Oet.isFragment(r)?e=e.concat(qce(r.props.children)):e.push(r))}),dB=e,zq=t,e};function hM(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>qq(a)):n=[qq(e)],qce(t).forEach(a=>{var s=sg(a,"type.displayName")||sg(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var zce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(zce);var Det=zce.isPlainObject;const Ret=dA(Det);var Wq,Xq,Yq,Jq,Zq;function ez(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ez(Object(r),!0).forEach(function(n){Met(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ez(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Met(t,e,r){return(e=Let(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Let(t){var e=Uet(t,"string");return typeof e=="symbol"?e:e+""}function Uet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kI(){return kI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kI.apply(null,arguments)}function wy(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var rz=(t,e,r,n,a)=>{var s=r-n,o;return o=ti(Wq||(Wq=wy(["M ",",",""])),t,e),o+=ti(Xq||(Xq=wy(["L ",",",""])),t+r,e),o+=ti(Yq||(Yq=wy(["L ",",",""])),t+r-s/2,e+a),o+=ti(Jq||(Jq=wy(["L ",",",""])),t+r-s/2-n,e+a),o+=ti(Zq||(Zq=wy(["L ",","," Z"])),t,e),o},Qet={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Vet=t=>{var e=ll(t,Qet),{x:r,y:n,upperWidth:a,lowerWidth:s,height:o,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=e,A=x.useRef(null),[h,m]=x.useState(-1),p=x.useRef(a),g=x.useRef(s),v=x.useRef(o),y=x.useRef(r),b=x.useRef(n),w=O4(t,"trapezoid-");if(x.useEffect(()=>{if(A.current&&A.current.getTotalLength)try{var J=A.current.getTotalLength();J&&m(J)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||o!==+o||a===0&&s===0||o===0)return null;var j=ka("recharts-trapezoid",l);if(!f)return x.createElement("g",null,x.createElement("path",kI({},dd(e),{className:j,d:rz(r,n,a,s,o)})));var I=p.current,_=g.current,S=v.current,E=y.current,F=b.current,P="0px ".concat(h===-1?1:h,"px"),k="".concat(h,"px 0px"),D=coe(["strokeDasharray"],u,c);return x.createElement(F4,{animationId:w,key:w,canBegin:h>0,duration:u,easing:c,isActive:f,begin:d},J=>{var fe=Ji(I,a,J),Ae=Ji(_,s,J),me=Ji(S,o,J),pe=Ji(E,r,J),ne=Ji(F,n,J);A.current&&(p.current=fe,g.current=Ae,v.current=me,y.current=pe,b.current=ne);var Pe=J>0?{transition:D,strokeDasharray:k}:{strokeDasharray:P};return x.createElement("path",kI({},dd(e),{className:j,d:rz(pe,ne,fe,Ae,me),ref:A,style:tz(tz({},Pe),e.style)}))})},Het=["option","shapeType","activeClassName"];function $et(t,e){if(t==null)return{};var r,n,a=Get(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Get(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function FI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nz(Object(r),!0).forEach(function(n){Ket(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ket(t,e,r){return(e=qet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qet(t){var e=zet(t,"string");return typeof e=="symbol"?e:e+""}function zet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wet(t,e){return FI(FI({},e),t)}function Xet(t,e){return t==="symbols"}function az(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return x.createElement(hoe,r);case"trapezoid":return x.createElement(Vet,r);case"sector":return x.createElement(goe,r);case"symbols":if(Xet(e))return x.createElement(IR,r);break;case"curve":return x.createElement(YR,r);default:return null}}function Yet(t){return x.isValidElement(t)?t.props:t}function Wce(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,a=$et(t,Het),s;if(x.isValidElement(e))s=x.cloneElement(e,FI(FI({},a),Yet(e)));else if(typeof e=="function")s=e(a,a.index);else if(Ret(e)&&typeof e!="boolean"){var o=Wet(e,a);s=x.createElement(az,{shapeType:r,elementProps:o})}else{var l=a;s=x.createElement(az,{shapeType:r,elementProps:l})}return a.isActive?x.createElement(ic,{className:n},s):s}var AM=(t,e,r)=>{var n=es();return(a,s)=>o=>{t==null||t(a,s,o),n(tce({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},mM=t=>{var e=es();return(r,n)=>a=>{t==null||t(r,n,a),e(cYe())}},pM=(t,e,r)=>{var n=es();return(a,s)=>o=>{t==null||t(a,s,o),n(uYe({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function Xce(t){var{tooltipEntrySettings:e}=t,r=es(),n=vu(),a=x.useRef(null);return x.useLayoutEffect(()=>{n||(a.current===null?r(sYe(e)):a.current!==e&&r(iYe({prev:a.current,next:e})),a.current=e)},[e,r,n]),x.useLayoutEffect(()=>()=>{a.current&&(r(oYe(a.current)),a.current=null)},[r]),null}function Jet(t){var{legendPayload:e}=t,r=es(),n=vu(),a=x.useRef(null);return x.useLayoutEffect(()=>{n||(a.current===null?r(soe(e)):a.current!==e&&r(ioe({prev:a.current,next:e})),a.current=e)},[r,n,e]),x.useLayoutEffect(()=>()=>{a.current&&(r(ooe(a.current)),a.current=null)},[r]),null}function Zet(t){var{legendPayload:e}=t,r=es(),n=Jr(la),a=x.useRef(null);return x.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(soe(e)):a.current!==e&&r(ioe({prev:a.current,next:e})),a.current=e)},[r,n,e]),x.useLayoutEffect(()=>()=>{a.current&&(r(ooe(a.current)),a.current=null)},[r]),null}var fB,ett=()=>{var[t]=x.useState(()=>U2("uid-"));return t},ttt=(fB=Tde.useId)!==null&&fB!==void 0?fB:ett;function rtt(t,e){var r=ttt();return e||(t?"".concat(t,"-").concat(r):r)}var ntt=x.createContext(void 0),Yce=t=>{var{id:e,type:r,children:n}=t,a=rtt("recharts-".concat(r),e);return x.createElement(ntt.Provider,{value:a},n(a))},att={cartesianItems:[],polarItems:[]},Jce=Oc({name:"graphicalItems",initialState:att,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:xs()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Wd(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:xs()},removeCartesianGraphicalItem:{reducer(t,e){var r=Wd(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:xs()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:xs()},removePolarGraphicalItem:{reducer(t,e){var r=Wd(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:xs()}}}),{addCartesianGraphicalItem:stt,replaceCartesianGraphicalItem:itt,removeCartesianGraphicalItem:ott,addPolarGraphicalItem:ltt,removePolarGraphicalItem:ctt}=Jce.actions,utt=Jce.reducer,dtt=t=>{var e=es(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?e(stt(t)):r.current!==t&&e(itt({prev:r.current,next:t})),r.current=t},[e,t]),x.useLayoutEffect(()=>()=>{r.current&&(e(ott(r.current)),r.current=null)},[e]),null},ftt=x.memo(dtt);function htt(t){var e=es();return x.useLayoutEffect(()=>(e(ltt(t)),()=>{e(ctt(t))}),[e,t]),null}var Att=["key"],mtt=["onMouseEnter","onClick","onMouseLeave"],ptt=["id"],gtt=["id"];function sz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ai(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sz(Object(r),!0).forEach(function(n){xtt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xtt(t,e,r){return(e=vtt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vtt(t){var e=ytt(t,"string");return typeof e=="symbol"?e:e+""}function ytt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Am.apply(null,arguments)}function fP(t,e){if(t==null)return{};var r,n,a=btt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function btt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function wtt(t){var e=x.useMemo(()=>hM(t.children,sN),[t.children]),r=Jr(n=>Bet(n,t.id,e));return r==null?null:x.createElement(Zet,{legendPayload:r})}var Ntt=x.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u,id:d}=t,f={dataDefinedOnItem:n.map(A=>A.tooltipPayload),positions:n.map(A=>A.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:e,nameKey:r,name:N4(l,e),hide:c,type:u,color:o,unit:"",graphicalItemId:d}};return x.createElement(Xce,{tooltipEntrySettings:f})}),Ctt=(t,e)=>t>e?"start":t<e?"end":"middle",_tt=(t,e,r)=>kl(typeof e=="function"?e(t):e,r,r*.8),Ett=(t,e,r)=>{var{top:n,left:a,width:s,height:o}=e,l=Aoe(s,o),c=a+kl(t.cx,s,s/2),u=n+kl(t.cy,o,o/2),d=kl(t.innerRadius,l,0),f=_tt(r,t.outerRadius,l),A=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:A}},Stt=(t,e)=>{var r=sl(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function Itt(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var jtt=(t,e)=>{if(x.isValidElement(t))return x.cloneElement(t,e);if(typeof t=="function")return t(e);var r=ka("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=fP(e,Att);return x.createElement(YR,Am({},a,{type:"linear",className:r}))},Ptt=(t,e,r)=>{if(x.isValidElement(t))return x.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),x.isValidElement(n)))return n;var a=ka("recharts-pie-label-text",Itt(t));return x.createElement(Z4,Am({},e,{alignmentBaseline:"middle",className:a}),n)};function Btt(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!e)return null;var l=Hf(r),c=L2(a),u=L2(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,f=e.map((A,h)=>{var m=(A.startAngle+A.endAngle)/2,p=Ri(A.cx,A.cy,A.outerRadius+d,m),g=ai(ai(ai(ai({},l),A),{},{stroke:"none"},c),{},{index:h,textAnchor:Ctt(p.x,A.cx)},p),v=ai(ai(ai(ai({},l),A),{},{fill:"none",stroke:A.fill},u),{},{index:h,points:[Ri(A.cx,A.cy,A.outerRadius,m),p],key:"line"});return x.createElement(Zf,{zIndex:Bl.label,key:"label-".concat(A.startAngle,"-").concat(A.endAngle,"-").concat(A.midAngle,"-").concat(h)},x.createElement(ic,null,s&&jtt(s,v),Ptt(a,g,ds(A,o))))});return x.createElement(ic,{className:"recharts-pie-labels"},f)}function Ttt(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?x.createElement(Qce,{label:a}):x.createElement(Btt,{sectors:e,props:r,showLabels:n})}function ktt(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:o}=t,l=Jr(ug),c=Jr(nM),u=Jr(WYe),{onMouseEnter:d,onClick:f,onMouseLeave:A}=a,h=fP(a,mtt),m=AM(d,a.dataKey,o),p=mM(A),g=pM(f,a.dataKey,o);return e==null||e.length===0?null:x.createElement(x.Fragment,null,e.map((v,y)=>{if((v==null?void 0:v.startAngle)===0&&(v==null?void 0:v.endAngle)===0&&e.length!==1)return null;var b=u==null||u===o,w=String(y)===l&&(c==null||a.dataKey===c)&&b,j=l?n:null,I=r&&w?r:j,_=ai(ai({},v),{},{stroke:v.stroke,tabIndex:-1,[Qie]:y,[Vie]:o});return x.createElement(ic,Am({key:"sector-".concat(v==null?void 0:v.startAngle,"-").concat(v==null?void 0:v.endAngle,"-").concat(v.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},Uw(h,v,y),{onMouseEnter:m(v,y),onMouseLeave:p(v,y),onClick:g(v,y)}),x.createElement(Wce,Am({option:s??I,index:y,shapeType:"sector",isActive:w},_)))}))}function Ftt(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,A=Math.abs(r.minAngle),h=Stt(l,c),m=Math.abs(h),p=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,g=n.filter(I=>ds(I,u,0)!==0).length,v=(m>=360?g:g-1)*p,y=m-g*A-v,b=n.reduce((I,_)=>{var S=ds(_,u,0);return I+(rn(S)?S:0)},0),w;if(b>0){var j;w=n.map((I,_)=>{var S=ds(I,u,0),E=ds(I,d,_),F=Ett(r,s,I),P=(rn(S)?S:0)/b,k,D=ai(ai({},I),a&&a[_]&&a[_].props);_?k=j.endAngle+sl(h)*p*(S!==0?1:0):k=l;var J=k+sl(h)*((S!==0?A:0)+P*y),fe=(k+J)/2,Ae=(F.innerRadius+F.outerRadius)/2,me=[{name:E,value:S,payload:D,dataKey:u,type:f,graphicalItemId:r.id}],pe=Ri(F.cx,F.cy,Ae,fe);return j=ai(ai(ai(ai({},r.presentationProps),{},{percent:P,cornerRadius:typeof o=="string"?parseFloat(o):o,name:E,tooltipPayload:me,midAngle:fe,middleRadius:Ae,tooltipPosition:pe},D),F),{},{value:S,dataKey:u,startAngle:k,endAngle:J,payload:D,paddingAngle:sl(h)*p}),j})}return w}function Ott(t){var{showLabels:e,sectors:r,children:n}=t,a=x.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return x.createElement(Aet,{value:e?a:void 0},n)}function Dtt(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:A}=e,h=O4(e,"recharts-pie-"),m=r.current,[p,g]=x.useState(!1),v=x.useCallback(()=>{typeof A=="function"&&A(),g(!1)},[A]),y=x.useCallback(()=>{typeof f=="function"&&f(),g(!0)},[f]);return x.createElement(Ott,{showLabels:!p,sectors:a},x.createElement(F4,{animationId:h,begin:o,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:v,key:h},b=>{var w=[],j=a&&a[0],I=j==null?void 0:j.startAngle;return a==null||a.forEach((_,S)=>{var E=m&&m[S],F=S>0?sg(_,"paddingAngle",0):0;if(E){var P=Ji(E.endAngle-E.startAngle,_.endAngle-_.startAngle,b),k=ai(ai({},_),{},{startAngle:I+F,endAngle:I+P+F});w.push(k),I=k.endAngle}else{var{endAngle:D,startAngle:J}=_,fe=Ji(0,D-J,b),Ae=ai(ai({},_),{},{startAngle:I+F,endAngle:I+fe+F});w.push(Ae),I=Ae.endAngle}}),r.current=w,x.createElement(ic,null,x.createElement(ktt,{sectors:w,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),x.createElement(Ttt,{showLabels:!p,sectors:a,props:e}),e.children)}var Rtt={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Bl.area};function Mtt(t){var{id:e}=t,r=fP(t,ptt),{hide:n,className:a,rootTabIndex:s}=t,o=x.useMemo(()=>hM(t.children,sN),[t.children]),l=Jr(d=>Tet(d,e,o)),c=x.useRef(null),u=ka("recharts-pie",a);return n||l==null?(c.current=null,x.createElement(ic,{tabIndex:s,className:u})):x.createElement(Zf,{zIndex:t.zIndex},x.createElement(Ntt,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),x.createElement(ic,{tabIndex:s,className:u},x.createElement(Dtt,{props:ai(ai({},r),{},{sectors:l}),previousSectorsRef:c,id:e})))}function Zce(t){var e=ll(t,Rtt),{id:r}=e,n=fP(e,gtt),a=Hf(n);return x.createElement(Yce,{id:r,type:"pie"},s=>x.createElement(x.Fragment,null,x.createElement(htt,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),x.createElement(wtt,Am({},n,{id:s})),x.createElement(Mtt,Am({},n,{id:s}))))}Zce.displayName="Pie";function iz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iz(Object(r),!0).forEach(function(n){Ltt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ltt(t,e,r){return(e=Utt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Utt(t){var e=Qtt(t,"string");return typeof e=="symbol"?e:e+""}function Qtt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eue=0,Vtt={xAxis:{},yAxis:{},zAxis:{}},tue=Oc({name:"cartesianAxis",initialState:Vtt,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:xs()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:xs()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:xs()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:xs()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:xs()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:xs()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:xs()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:xs()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:xs()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var o=[...s,n].slice(-3);t.yAxis[r]=oz(oz({},t.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:Htt,replaceXAxis:$tt,removeXAxis:Gtt,addYAxis:Ktt,replaceYAxis:qtt,removeYAxis:ztt,addZAxis:sit,replaceZAxis:iit,removeZAxis:oit,updateYAxisWidth:Wtt}=tue.actions,Xtt=tue.reducer,Ytt=Gt([co],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Jtt=Gt([Ytt,bA,wA],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),rue=()=>Jr(Jtt),lz=(t,e,r)=>{var n=r??t;if(!Oo(n))return kl(n,e,0)},Ztt=(t,e,r)=>{var n={},a=t.filter(G4),s=t.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,A=f.map(m=>m.dataKey),h=lz(e,r,f[0].barSize);return{stackId:d,dataKeys:A,barSize:h}}),c=s.map(u=>{var d=[u.dataKey].filter(A=>A!=null),f=lz(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]};function cz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function v_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cz(Object(r),!0).forEach(function(n){ert(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ert(t,e,r){return(e=trt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function trt(t){var e=rrt(t,"string");return typeof e=="symbol"?e:e+""}function rrt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nrt(t,e,r,n,a){var s=n.length;if(!(s<1)){var o=kl(t,r,0,!0),l,c=[];if(Gs(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((v,y)=>v+(y.barSize||0),0);f+=(s-1)*o,f>=r&&(f-=(s-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var A=(r-f)/2>>0,h={offset:A-o,size:0};l=n.reduce((v,y)=>{var b,w={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:h.offset+h.size+o,size:u?d:(b=y.barSize)!==null&&b!==void 0?b:0}},j=[...v,w];return h=j[j.length-1].position,j},c)}else{var m=kl(e,r,0,!0);r-2*m-(s-1)*o<=0&&(o=0);var p=(r-2*m-(s-1)*o)/s;p>1&&(p>>=0);var g=Gs(a)?Math.min(p,a):p;l=n.reduce((v,y,b)=>[...v,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:m+(p+o)*b+(p-g)/2,size:g}}],c)}return l}}var art=(t,e,r,n,a,s,o)=>{var l=Oo(o)?e:o,c=nrt(r,n,a!==s?a:s,t,l);return a!==s&&c!=null&&(c=c.map(u=>v_(v_({},u),{},{position:v_(v_({},u.position),{},{offset:u.position.offset-a/2})}))),c},srt=(t,e)=>{var r=j8(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}};function irt(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Gs(t.zIndex)?t.zIndex:e}var nue=t=>{var{chartData:e}=t,r=es(),n=vu();return x.useEffect(()=>n?()=>{}:(r(_q(e)),()=>{r(_q(void 0))}),[e,r,n]),null},uz={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},aue=Oc({name:"brush",initialState:uz,reducers:{setBrushSettings(t,e){return e.payload==null?uz:e.payload}}}),{setBrushSettings:lit}=aue.actions,ort=aue.reducer;function lrt(t,e,r){return(e=crt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function crt(t){var e=urt(t,"string");return typeof e=="symbol"?e:e+""}function urt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class gM{static create(e){return new gM(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}lrt(gM,"EPS",1e-4);function drt(t){return(t%180+180)%180}var frt=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=drt(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},hrt={dots:[],areas:[],lines:[]},sue=Oc({name:"referenceElements",initialState:hrt,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=Wd(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=Wd(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=Wd(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:cit,removeDot:uit,addArea:dit,removeArea:fit,addLine:hit,removeLine:Ait}=sue.actions,Art=sue.reducer,mrt=x.createContext(void 0),prt=t=>{var{children:e}=t,[r]=x.useState("".concat(U2("recharts"),"-clip")),n=rue();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return x.createElement(mrt.Provider,{value:r},x.createElement("defs",null,x.createElement("clipPath",{id:r},x.createElement("rect",{x:a,y:s,height:l,width:o}))),e)};function iue(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var a=t[n];a!==void 0&&r.push(a)}return r}function grt(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return frt(n,r)}function xrt(t,e,r){var n=r==="width",{x:a,y:s,width:o,height:l}=t;return e===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function ew(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function vrt(t,e){return iue(t,e+1)}function yrt(t,e,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=e,c=0,u=1,d=o,f=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:iue(n,u)};var p=c,g,v=()=>(g===void 0&&(g=r(m,p)),g),y=m.coordinate,b=c===0||ew(t,y,v,d,l);b||(c=0,d=o,u+=1),b&&(d=y+t*(v()/2+a),c+=u)},A;u<=s.length;)if(A=f(),A)return A.v;return[]}function brt(t,e,r,n,a){var s=(n||[]).slice(),o=s.length;if(o===0)return[];for(var{start:l,end:c}=e,u=1;u<=o;u++){for(var d=(o-1)%u,f=l,A=!0,h=function(){var y=n[m],b=m,w,j=()=>(w===void 0&&(w=r(y,b)),w),I=y.coordinate,_=m===d||ew(t,I,j,f,c);if(!_)return A=!1,1;_&&(f=I+t*(j()/2+a))},m=d;m<o&&!h();m+=u);if(A){for(var p=[],g=d;g<o;g+=u)p.push(n[g]);return p}}return[]}function dz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Cl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dz(Object(r),!0).forEach(function(n){wrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wrt(t,e,r){return(e=Nrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nrt(t){var e=Crt(t,"string");return typeof e=="symbol"?e:e+""}function Crt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _rt(t,e,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=e,{end:c}=e,u=function(A){var h=s[A],m,p=()=>(m===void 0&&(m=r(h,A)),m);if(A===o-1){var g=t*(h.coordinate+t*p()/2-c);s[A]=h=Cl(Cl({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate})}else s[A]=h=Cl(Cl({},h),{},{tickCoord:h.coordinate});if(h.tickCoord!=null){var v=ew(t,h.tickCoord,p,l,c);v&&(c=h.tickCoord-t*(p()/2+a),s[A]=Cl(Cl({},h),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return s}function Ert(t,e,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=e;if(s){var d=n[l-1],f=r(d,l-1),A=t*(d.coordinate+t*f/2-u);if(o[l-1]=d=Cl(Cl({},d),{},{tickCoord:A>0?d.coordinate-A*t:d.coordinate}),d.tickCoord!=null){var h=ew(t,d.tickCoord,()=>f,c,u);h&&(u=d.tickCoord-t*(f/2+a),o[l-1]=Cl(Cl({},d),{},{isShow:!0}))}}for(var m=s?l-1:l,p=function(y){var b=o[y],w,j=()=>(w===void 0&&(w=r(b,y)),w);if(y===0){var I=t*(b.coordinate-t*j()/2-c);o[y]=b=Cl(Cl({},b),{},{tickCoord:I<0?b.coordinate-I*t:b.coordinate})}else o[y]=b=Cl(Cl({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var _=ew(t,b.tickCoord,j,c,u);_&&(c=b.tickCoord+t*(j()/2+a),o[y]=Cl(Cl({},b),{},{isShow:!0}))}},g=0;g<m;g++)p(g);return o}function Srt(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=t;if(!a||!a.length||!n)return[];if(rn(c)||k4.isSsr){var A;return(A=vrt(a,rn(c)?c:0))!==null&&A!==void 0?A:[]}var h=[],m=l==="top"||l==="bottom"?"width":"height",p=d&&m==="width"?kb(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},g=(b,w)=>{var j=typeof u=="function"?u(b.value,w):b.value;return m==="width"?grt(kb(j,{fontSize:e,letterSpacing:r}),p,f):kb(j,{fontSize:e,letterSpacing:r})[m]},v=a.length>=2?sl(a[1].coordinate-a[0].coordinate):1,y=xrt(s,v,m);return c==="equidistantPreserveStart"?yrt(v,y,g,a,o):c==="equidistantPreserveEnd"?brt(v,y,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Ert(v,y,g,a,o,c==="preserveStartEnd"):h=_rt(v,y,g,a,o),h.filter(b=>b.isShow))}var Irt=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},jrt=["axisLine","width","height","className","hide","ticks","axisType"];function Prt(t,e){if(t==null)return{};var r,n,a=Brt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Brt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function dg(){return dg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dg.apply(null,arguments)}function fz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ti(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fz(Object(r),!0).forEach(function(n){Trt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Trt(t,e,r){return(e=krt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function krt(t){var e=Frt(t,"string");return typeof e=="symbol"?e:e+""}function Frt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fp={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Bl.axis};function Ort(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=Ti(Ti(Ti({},c),Hf(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);u=Ti(Ti({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var f=+(s==="left"&&!o||s==="right"&&o);u=Ti(Ti({},u),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+a})}return x.createElement("line",dg({},u,{className:ka("recharts-cartesian-axis-line",sg(l,"className"))}))}function Drt(t,e,r,n,a,s,o,l,c){var u,d,f,A,h,m,p=l?-1:1,g=t.tickSize||o,v=rn(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,A=r+ +!l*a,f=A-p*g,m=f-p*c,h=v;break;case"left":f=A=t.coordinate,d=e+ +!l*n,u=d-p*g,h=u-p*c,m=v;break;case"right":f=A=t.coordinate,d=e+ +l*n,u=d+p*g,h=u+p*c,m=v;break;default:u=d=t.coordinate,A=r+ +l*a,f=A+p*g,m=f+p*c,h=v;break}return{line:{x1:u,y1:f,x2:d,y2:A},tick:{x:h,y:m}}}function Rrt(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Mrt(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Lrt(t){var{option:e,tickProps:r,value:n}=t,a,s=ka(r.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(e))a=x.cloneElement(e,Ti(Ti({},r),{},{className:s}));else if(typeof e=="function")a=e(Ti(Ti({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=ka(o,e==null?void 0:e.className)),a=x.createElement(Z4,dg({},r,{className:o}),n)}return a}var Urt=x.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:f,x:A,y:h,width:m,height:p,tickSize:g,tickMargin:v,fontSize:y,letterSpacing:b,getTicksConfig:w,events:j,axisType:I}=t,_=Srt(Ti(Ti({},w),{},{ticks:r}),y,b),S=Rrt(d,f),E=Mrt(d,f),F=Hf(w),P=L2(n),k={};typeof a=="object"&&(k=a);var D=Ti(Ti({},F),{},{fill:"none"},k),J=_.map(me=>Ti({entry:me},Drt(me,A,h,m,p,d,g,f,v))),fe=J.map(me=>{var{entry:pe,line:ne}=me;return x.createElement(ic,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(pe.value,"-").concat(pe.coordinate,"-").concat(pe.tickCoord)},a&&x.createElement("line",dg({},D,ne,{className:ka("recharts-cartesian-axis-tick-line",sg(a,"className"))})))}),Ae=J.map((me,pe)=>{var{entry:ne,tick:Pe}=me,Be=Ti(Ti(Ti(Ti({textAnchor:S,verticalAnchor:E},F),{},{stroke:"none",fill:s},P),Pe),{},{index:pe,payload:ne,visibleTicksCount:_.length,tickFormatter:o,padding:c},u);return x.createElement(ic,dg({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ne.value,"-").concat(ne.coordinate,"-").concat(ne.tickCoord)},Uw(j,ne,pe)),n&&x.createElement(Lrt,{option:n,tickProps:Be,value:"".concat(typeof o=="function"?o(ne.value,pe):ne.value).concat(l||"")}))});return x.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},Ae.length>0&&x.createElement(Zf,{zIndex:Bl.label},x.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},Ae)),fe.length>0&&x.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},fe))}),Qrt=x.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:o,ticks:l,axisType:c}=t,u=Prt(t,jrt),[d,f]=x.useState(""),[A,h]=x.useState(""),m=x.useRef(null);x.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var g;return Irt({ticks:m.current,label:(g=t.labelRef)===null||g===void 0?void 0:g.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=x.useCallback(g=>{if(g){var v=g.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=v;var y=v[0];if(y){var b=window.getComputedStyle(y),w=b.fontSize,j=b.letterSpacing;(w!==d||j!==A)&&(f(w),h(j))}}},[d,A]);return o||n!=null&&n<=0||a!=null&&a<=0?null:x.createElement(Zf,{zIndex:t.zIndex},x.createElement(ic,{className:ka("recharts-cartesian-axis",s)},x.createElement(Ort,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:Hf(t)}),x.createElement(Urt,{ref:p,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:A,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),x.createElement(WZe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},x.createElement(set,{label:t.label,labelRef:t.labelRef}),t.children)))}),xM=x.forwardRef((t,e)=>{var r=ll(t,Fp);return x.createElement(Qrt,dg({},r,{ref:e}))});xM.displayName="CartesianAxis";var Vrt={},oue=Oc({name:"errorBars",initialState:Vrt,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:mit,replaceErrorBar:pit,removeErrorBar:git}=oue.actions,Hrt=oue.reducer,$rt=["children"];function Grt(t,e){if(t==null)return{};var r,n,a=Krt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Krt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var qrt={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},zrt=x.createContext(qrt);function Wrt(t){var{children:e}=t,r=Grt(t,$rt);return x.createElement(zrt.Provider,{value:r},e)}function lue(t,e){var r,n,a=Jr(u=>_A(u,t)),s=Jr(u=>EA(u,e)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:yo.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:bo.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function Xrt(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=rue(),{needClipX:s,needClipY:o,needClip:l}=lue(e,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:f}=a;return x.createElement("clipPath",{id:"clipPath-".concat(n)},x.createElement("rect",{x:s?c:c-d/2,y:o?u:u-f/2,width:s?d:d*2,height:o?f:f*2}))}var Yrt={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iN=x;function Jrt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zrt=typeof Object.is=="function"?Object.is:Jrt,ent=iN.useSyncExternalStore,tnt=iN.useRef,rnt=iN.useEffect,nnt=iN.useMemo,ant=iN.useDebugValue;Yrt.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=tnt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=nnt(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var m=o.value;if(a(m,h))return f=m}return f=h}if(m=f,Zrt(d,h))return m;var p=n(h);return a!==void 0&&a(m,p)?(d=h,m):(d=h,f=p)}var u=!1,d,f,A=r===void 0?null:r;return[function(){return c(e())},A===null?void 0:function(){return c(A())}]},[e,r,n,a]);var l=ent(t,s[0],s[1]);return rnt(function(){o.hasValue=!0,o.value=l},[l]),ant(l),l};function snt(t){t()}function int(){let t=null,e=null;return{clear(){t=null,e=null},notify(){snt(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var hz={notify(){},get:()=>[]};function ont(t,e){let r,n=hz,a=0,s=!1;function o(p){d();const g=n.subscribe(p);let v=!1;return()=>{v||(v=!0,g(),f())}}function l(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=int())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=hz)}function A(){s||(s=!0,d())}function h(){s&&(s=!1,f())}const m={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:A,tryUnsubscribe:h,getListeners:()=>n};return m}var lnt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cnt=lnt(),unt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",dnt=unt(),fnt=()=>cnt||dnt?x.useLayoutEffect:x.useEffect,hnt=fnt();function Az(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Ant(t,e){if(Az(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!Az(t[r[a]],e[r[a]]))return!1;return!0}var hB=Symbol.for("react-redux-context"),AB=typeof globalThis<"u"?globalThis:{};function mnt(){if(!x.createContext)return{};const t=AB[hB]??(AB[hB]=new Map);let e=t.get(x.createContext);return e||(e=x.createContext(null),t.set(x.createContext,e)),e}var pnt=mnt();function gnt(t){const{children:e,context:r,serverState:n,store:a}=t,s=x.useMemo(()=>{const c=ont(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=x.useMemo(()=>a.getState(),[a]);hnt(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||pnt;return x.createElement(l.Provider,{value:s},e)}var xnt=gnt,vnt=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function ynt(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function vM(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(vnt.has(n)){if(t[n]==null&&e[n]==null)continue;if(!Ant(t[n],e[n]))return!1}else if(!ynt(t[n],e[n]))return!1;return!0}function Tg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:eue}function kg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:eue}var bnt="Invariant failed";function wnt(t,e){throw new Error(bnt)}function zF(){return zF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zF.apply(null,arguments)}function OI(t){return x.createElement(Wce,zF({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Nnt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(rn(e))return e;var s=rn(n)||Oo(n);return s?e(n,a):(s||wnt(),r)}},Cnt=(t,e,r)=>r,_nt=(t,e)=>e,oN=Gt([T8,_nt],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),Ent=Gt([oN],t=>t==null?void 0:t.maxBarSize),Snt=(t,e,r,n)=>n,Int=Gt([la,T8,Tg,kg,Cnt],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),jnt=(t,e,r)=>{var n=la(t),a=Tg(t,e),s=kg(t,e);if(!(a==null||s==null))return n==="horizontal"?QF(t,"yAxis",s,r):QF(t,"xAxis",a,r)},Pnt=(t,e)=>{var r=la(t),n=Tg(t,e),a=kg(t,e);if(!(n==null||a==null))return r==="horizontal"?Aq(t,"xAxis",n):Aq(t,"yAxis",a)},Bnt=Gt([Int,JWe,Pnt],Ztt),Tnt=(t,e,r)=>{var n,a,s=oN(t,e);if(s!=null){var o=Tg(t,e),l=kg(t,e);if(!(o==null||l==null)){var c=la(t),u=ple(t),{maxBarSize:d}=s,f=Oo(d)?u:d,A,h;return c==="horizontal"?(A=Qv(t,"xAxis",o,r),h=Uv(t,"xAxis",o,r)):(A=Qv(t,"yAxis",l,r),h=Uv(t,"yAxis",l,r)),(n=(a=cI(A,h,!0))!==null&&a!==void 0?a:f)!==null&&n!==void 0?n:0}}},cue=(t,e,r)=>{var n=la(t),a=Tg(t,e),s=kg(t,e);if(!(a==null||s==null)){var o,l;return n==="horizontal"?(o=Qv(t,"xAxis",a,r),l=Uv(t,"xAxis",a,r)):(o=Qv(t,"yAxis",s,r),l=Uv(t,"yAxis",s,r)),cI(o,l)}},knt=Gt([Bnt,ple,YWe,gle,Tnt,cue,Ent],art),Fnt=(t,e,r)=>{var n=Tg(t,e);if(n!=null)return Qv(t,"xAxis",n,r)},Ont=(t,e,r)=>{var n=kg(t,e);if(n!=null)return Qv(t,"yAxis",n,r)},Dnt=(t,e,r)=>{var n=Tg(t,e);if(n!=null)return Uv(t,"xAxis",n,r)},Rnt=(t,e,r)=>{var n=kg(t,e);if(n!=null)return Uv(t,"yAxis",n,r)},Mnt=Gt([knt,oN],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),Lnt=Gt([jnt,oN],srt),Unt=Gt([co,qR,Fnt,Ont,Dnt,Rnt,Mnt,la,LWe,cue,Lnt,oN,Snt],(t,e,r,n,a,s,o,l,c,u,d,f,A)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:p}=c;if(!(f==null||o==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:g}=f,v;if(g!=null&&g.length>0?v=g:v=h==null?void 0:h.slice(m,p+1),v!=null)return mat({layout:l,barSettings:f,pos:o,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:v,offset:t,cells:A,dataStartIndex:m})}}),Qnt=["index"];function WF(){return WF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WF.apply(null,arguments)}function Vnt(t,e){if(t==null)return{};var r,n,a=Hnt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Hnt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var uue=x.createContext(void 0),$nt=t=>{var e=x.useContext(uue);if(e!=null)return e.stackId;if(t!=null)return U$e(t)},Gnt=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Knt=t=>{var e=x.useContext(uue);if(e!=null){var{stackId:r}=e;return"url(#".concat(Gnt(r,t),")")}},qnt=t=>{var{index:e}=t,r=Vnt(t,Qnt),n=Knt(e);return x.createElement(ic,WF({className:"recharts-bar-stack-layer",clipPath:n},r))},znt=["onMouseEnter","onMouseLeave","onClick"],Wnt=["value","background","tooltipPosition"],Xnt=["id"],Ynt=["onMouseEnter","onClick","onMouseLeave"];function uA(){return uA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uA.apply(null,arguments)}function mz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ec(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mz(Object(r),!0).forEach(function(n){Jnt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jnt(t,e,r){return(e=Znt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Znt(t){var e=eat(t,"string");return typeof e=="symbol"?e:e+""}function eat(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DI(t,e){if(t==null)return{};var r,n,a=tat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function tat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var rat=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:N4(r,e),payload:t}]},nat=x.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:N4(s,e),hide:o,type:c,color:a,unit:l,graphicalItemId:u}};return x.createElement(Xce,{tooltipEntrySettings:d})});function aat(t){var e=Jr(ug),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=DI(s,znt),d=AM(o,n,s.id),f=mM(l),A=pM(c,n,s.id);if(!a||r==null)return null;var h=L2(a);return x.createElement(Zf,{zIndex:irt(a,Bl.barBackground)},r.map((m,p)=>{var{value:g,background:v,tooltipPosition:y}=m,b=DI(m,Wnt);if(!v)return null;var w=d(m,p),j=f(m,p),I=A(m,p),_=ec(ec(ec(ec(ec({option:a,isActive:String(p)===e},b),{},{fill:"#eee"},v),h),Uw(u,m,p)),{},{onMouseEnter:w,onMouseLeave:j,onClick:I,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return x.createElement(OI,uA({key:"background-bar-".concat(p)},_))}))}function sat(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return ec(ec({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return x.createElement(het,{value:e?a:void 0},r)}function iat(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:o}=t,l=Jr(ug),c=Jr(nM),u=r&&String(s)===l&&(c==null||o===c),d=u?r:e;return u?x.createElement(Zf,{zIndex:Bl.activeBar},x.createElement(OI,uA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))):x.createElement(OI,uA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))}function oat(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return x.createElement(OI,uA({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function lat(t){var e,{data:r,props:n}=t,a=(e=Hf(n))!==null&&e!==void 0?e:{},{id:s}=a,o=DI(a,Xnt),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:A}=n,h=DI(n,Ynt),m=AM(d,c,s),p=mM(A),g=pM(f,c,s);return r?x.createElement(x.Fragment,null,r.map((v,y)=>x.createElement(qnt,uA({index:y,key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(y),className:"recharts-bar-rectangle"},Uw(h,v,y),{onMouseEnter:m(v,y),onMouseLeave:p(v,y),onClick:g(v,y)}),u?x.createElement(iat,{shape:l,activeBar:u,baseProps:o,entry:v,index:y,dataKey:c}):x.createElement(oat,{shape:l,baseProps:o,entry:v,index:y,dataKey:c})))):null}function cat(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,f=r.current,A=O4(e,"recharts-bar-"),[h,m]=x.useState(!1),p=!h,g=x.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),v=x.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return x.createElement(sat,{showLabels:p,rects:n},x.createElement(F4,{animationId:A,begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:v,key:A},y=>{var b=y===1?n:n==null?void 0:n.map((w,j)=>{var I=f&&f[j];if(I)return ec(ec({},w),{},{x:Ji(I.x,w.x,y),y:Ji(I.y,w.y,y),width:Ji(I.width,w.width,y),height:Ji(I.height,w.height,y)});if(a==="horizontal"){var _=Ji(0,w.height,y),S=Ji(w.stackedBarStart,w.y,y);return ec(ec({},w),{},{y:S,height:_})}var E=Ji(0,w.width,y),F=Ji(w.stackedBarStart,w.x,y);return ec(ec({},w),{},{width:E,x:F})});return y>0&&(r.current=b??null),b==null?null:x.createElement(ic,null,x.createElement(lat,{props:e,data:b}))}),x.createElement(Qce,{label:e.label}),e.children)}function uat(t){var e=x.useRef(null);return x.createElement(cat,{previousRectanglesRef:e,props:t})}var due=0,dat=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:ds(t,e)}};class fat extends x.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=ka("recharts-bar",a),f=u;return x.createElement(ic,{className:d,id:u},l&&x.createElement("defs",null,x.createElement(Xrt,{clipPathId:f,xAxisId:s,yAxisId:o})),x.createElement(ic,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},x.createElement(aat,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),x.createElement(uat,this.props)))}}var hat={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:due,xAxisId:0,yAxisId:0,zIndex:Bl.bar};function Aat(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:f}=lue(e,r),A=$w(),h=vu(),m=hM(t.children,sN),p=Jr(y=>Unt(y,t.id,h,m));if(A!=="vertical"&&A!=="horizontal")return null;var g,v=p==null?void 0:p[0];return v==null||v.height==null||v.width==null?g=0:g=A==="vertical"?v.height/2:v.width/2,x.createElement(Wrt,{xAxisId:e,yAxisId:r,data:p,dataPointFormatter:dat,errorBarOffset:g},x.createElement(fat,uA({},t,{layout:A,needClip:f,data:p,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function mat(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:A,cells:h,parentViewBox:m,dataStartIndex:p}=t,g=e==="horizontal"?l:o,v=d?g.scale.domain():null,y=Q$e({numericAxis:g}),b=g.scale(y);return f.map((w,j)=>{var I,_,S,E,F,P;if(d){var k=d[j+p];if(k==null)return null;I=O$e(k,v)}else I=ds(w,r),Array.isArray(I)||(I=[y,I]);var D=Nnt(n,due)(I[1],j);if(e==="horizontal"){var J,[fe,Ae]=[l.scale(I[0]),l.scale(I[1])];_=CG({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:w,index:j}),S=(J=Ae??fe)!==null&&J!==void 0?J:void 0,E=a.size;var me=fe-Ae;if(F=$f(me)?0:me,P={x:_,y:A.top,width:E,height:A.height},Math.abs(D)>0&&Math.abs(F)<Math.abs(D)){var pe=sl(F||D)*(Math.abs(D)-Math.abs(F));S-=pe,F+=pe}}else{var[ne,Pe]=[o.scale(I[0]),o.scale(I[1])];if(_=ne,S=CG({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:w,index:j}),E=Pe-ne,F=a.size,P={x:A.left,y:S,width:A.width,height:F},Math.abs(D)>0&&Math.abs(E)<Math.abs(D)){var Be=sl(E||D)*(Math.abs(D)-Math.abs(E));E+=Be}}if(_==null||S==null||E==null||F==null)return null;var O=ec(ec({},w),{},{stackedBarStart:b,x:_,y:S,width:E,height:F,value:d?I:I[1],payload:w,background:P,tooltipPosition:{x:_+E/2,y:S+F/2},parentViewBox:m},h&&h[j]&&h[j].props);return O}).filter(Boolean)}function pat(t){var e=ll(t,hat),r=$nt(e.stackId),n=vu();return x.createElement(Yce,{id:e.id,type:"bar"},a=>x.createElement(x.Fragment,null,x.createElement(Jet,{legendPayload:rat(e)}),x.createElement(nat,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),x.createElement(ftt,{type:"bar",id:a,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),x.createElement(Zf,{zIndex:e.zIndex},x.createElement(Aat,uA({},e,{id:a})))))}var XF=x.memo(pat,vM);XF.displayName="Bar";var gat=["domain","range"],xat=["domain","range"];function pz(t,e){if(t==null)return{};var r,n,a=vat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function vat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function gz(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function fue(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=pz(t,gat),{domain:s,range:o}=e,l=pz(e,xat);return!gz(r,s)||!gz(n,o)?!1:vM(a,l)}var yat=["dangerouslySetInnerHTML","ticks","scale"],bat=["id","scale"];function YF(){return YF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YF.apply(null,arguments)}function xz(t,e){if(t==null)return{};var r,n,a=wat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function wat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Nat(t){var e=es(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?e(Htt(t)):r.current!==t&&e($tt({prev:r.current,next:t})),r.current=t},[t,e]),x.useLayoutEffect(()=>()=>{r.current&&(e(Gtt(r.current)),r.current=null)},[e]),null}var Cat=t=>{var{xAxisId:e,className:r}=t,n=Jr(qR),a=vu(),s="xAxis",o=Jr(v=>Wle(v,s,e,a)),l=Jr(v=>Gle(v,e)),c=Jr(v=>WXe(v,e)),u=Jr(v=>Ele(v,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:A}=t,h=xz(t,yat),{id:m,scale:p}=u,g=xz(u,bat);return x.createElement(xM,YF({},h,g,{x:c.x,y:c.y,width:l.width,height:l.height,className:ka("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o,axisType:s}))},_at={allowDataOverflow:yo.allowDataOverflow,allowDecimals:yo.allowDecimals,allowDuplicatedCategory:yo.allowDuplicatedCategory,angle:yo.angle,axisLine:Fp.axisLine,height:yo.height,hide:!1,includeHidden:yo.includeHidden,interval:yo.interval,minTickGap:yo.minTickGap,mirror:yo.mirror,orientation:yo.orientation,padding:yo.padding,reversed:yo.reversed,scale:yo.scale,tick:yo.tick,tickCount:yo.tickCount,tickLine:Fp.tickLine,tickSize:Fp.tickSize,type:yo.type,xAxisId:0},Eat=t=>{var e=ll(t,_at);return x.createElement(x.Fragment,null,x.createElement(Nat,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),x.createElement(Cat,e))},hue=x.memo(Eat,fue);hue.displayName="XAxis";var Sat=["dangerouslySetInnerHTML","ticks","scale"],Iat=["id","scale"];function JF(){return JF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JF.apply(null,arguments)}function vz(t,e){if(t==null)return{};var r,n,a=jat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function jat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Pat(t){var e=es(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?e(Ktt(t)):r.current!==t&&e(qtt({prev:r.current,next:t})),r.current=t},[t,e]),x.useLayoutEffect(()=>()=>{r.current&&(e(ztt(r.current)),r.current=null)},[e]),null}var Bat=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=x.useRef(null),o=x.useRef(null),l=Jr(qR),c=vu(),u=es(),d="yAxis",f=Jr(I=>Kle(I,e)),A=Jr(I=>YXe(I,e)),h=Jr(I=>Wle(I,d,e,c)),m=Jr(I=>Sle(I,e));if(x.useLayoutEffect(()=>{if(!(n!=="auto"||!f||lM(a)||x.isValidElement(a)||m==null)){var I=s.current;if(I){var _=I.getCalculatedWidth();Math.round(f.width)!==Math.round(_)&&u(Wtt({id:e,width:_}))}}},[h,f,u,a,e,n,m]),f==null||A==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:v}=t,y=vz(t,Sat),{id:b,scale:w}=m,j=vz(m,Iat);return x.createElement(xM,JF({},y,j,{ref:s,labelRef:o,x:A.x,y:A.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:ka("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:h,axisType:d}))},Tat={allowDataOverflow:bo.allowDataOverflow,allowDecimals:bo.allowDecimals,allowDuplicatedCategory:bo.allowDuplicatedCategory,angle:bo.angle,axisLine:Fp.axisLine,hide:!1,includeHidden:bo.includeHidden,interval:bo.interval,minTickGap:bo.minTickGap,mirror:bo.mirror,orientation:bo.orientation,padding:bo.padding,reversed:bo.reversed,scale:bo.scale,tick:bo.tick,tickCount:bo.tickCount,tickLine:Fp.tickLine,tickSize:Fp.tickSize,type:bo.type,width:bo.width,yAxisId:0},kat=t=>{var e=ll(t,Tat);return x.createElement(x.Fragment,null,x.createElement(Pat,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),x.createElement(Bat,e))},Aue=x.memo(kat,fue);Aue.displayName="YAxis";var Fat=(t,e)=>e,yM=Gt([Fat,la,Cle,fo,dce,SA,fJe,co],vJe),bM=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},mue=fd("mouseClick"),pue=Vw();pue.startListening({actionCreator:mue,effect:(t,e)=>{var r=t.payload,n=yM(e.getState(),bM(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(dYe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var ZF=fd("mouseMove"),gue=Vw(),y_=null;gue.startListening({actionCreator:ZF,effect:(t,e)=>{var r=t.payload;y_!==null&&cancelAnimationFrame(y_);var n=bM(r);y_=requestAnimationFrame(()=>{var a=e.getState(),s=Y8(a,a.tooltip.settings.shared);if(s==="axis"){var o=yM(a,n);(o==null?void 0:o.activeIndex)!=null?e.dispatch(nce({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(rce())}y_=null})}});function Oat(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var yz={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},xue=Oc({name:"rootProps",initialState:yz,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:yz.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Dat=xue.reducer,{updateOptions:Rat}=xue.actions,vue=Oc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Mat}=vue.actions,Lat=vue.reducer,yue=fd("keyDown"),bue=fd("focus"),wM=Vw();wM.startListening({actionCreator:yue,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=J8(a,b1(r),eN(r),nN(r)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=SA(r);if(s==="Enter"){var u=BI(r,"axis","hover",String(a.index));e.dispatch(HF({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=tYe(r),f=d==="left-to-right"?1:-1,A=s==="ArrowRight"?1:-1,h=l+A*f;if(!(c==null||h>=c.length||h<0)){var m=BI(r,"axis","hover",String(h));e.dispatch(HF({active:!0,activeIndex:h.toString(),activeCoordinate:m}))}}}}}});wM.startListening({actionCreator:bue,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=BI(r,"axis","hover",String(s));e.dispatch(HF({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Qu=fd("externalEvent"),wue=Vw(),mB=new Map;wue.startListening({actionCreator:Qu,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=mB.get(a);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:YYe(l),activeDataKey:nM(l),activeIndex:ug(l),activeLabel:Ace(l),activeTooltipIndex:ug(l),isTooltipActive:JYe(l)};r(c,n)}finally{mB.delete(a)}});mB.set(a,o)}}});var Uat=Gt([v1],t=>t.tooltipItemPayloads),Qat=Gt([Uat,rN,(t,e)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(l=>l.settings.graphicalItemId===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=e(s,r);return o}}}),Nue=fd("touchMove"),Cue=Vw();Cue.startListening({actionCreator:Nue,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=Y8(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var o=yM(n,bM({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(nce({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(Qie),f=(l=u.getAttribute(Vie))!==null&&l!==void 0?l:void 0,A=y1(n).find(p=>p.id===f);if(d==null||A==null||f==null)return;var{dataKey:h}=A,m=Qat(n,d,f);e.dispatch(tce({activeDataKey:h,activeIndex:d,activeCoordinate:m,activeGraphicalItemId:f}))}}}});var Vat=die({brush:ort,cartesianAxis:Xtt,chartData:WJe,errorBars:Hrt,graphicalItems:utt,layout:j$e,legend:FGe,options:$Je,polarAxis:Cet,polarOptions:Lat,referenceElements:Art,rootProps:Dat,tooltip:fYe,zIndex:kJe}),Hat=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return e$e({reducer:Vat,preloadedState:e,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([pue.middleware,gue.middleware,wM.middleware,wue.middleware,Cue.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(Eie({type:"raf"}))},devTools:{serialize:{replacer:Oat},name:"recharts-".concat(r)}})};function _ue(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=vu(),s=x.useRef(null);if(a)return r;s.current==null&&(s.current=Hat(e,n));var o=MR;return x.createElement(xnt,{context:o,store:s.current},r)}function $at(t){var{layout:e,margin:r}=t,n=es(),a=vu();return x.useEffect(()=>{a||(n(E$e(e)),n(_$e(r)))},[n,a,e,r]),null}var Eue=x.memo($at,vM);function Sue(t){var e=es();return x.useEffect(()=>{e(Rat(t))},[e,t]),null}function bz(t){var{zIndex:e,isPanorama:r}=t,n=x.useRef(null),a=es();return x.useLayoutEffect(()=>(n.current&&a(BJe({zIndex:e,element:n.current,isPanorama:r})),()=>{a(TJe({zIndex:e,isPanorama:r}))}),[a,e,r]),x.createElement("g",{tabIndex:-1,ref:n})}function wz(t){var{children:e,isPanorama:r}=t,n=Jr(bJe);if(!n||n.length===0)return e;var a=n.filter(o=>o<0),s=n.filter(o=>o>0);return x.createElement(x.Fragment,null,a.map(o=>x.createElement(bz,{key:o,zIndex:o,isPanorama:r})),e,s.map(o=>x.createElement(bz,{key:o,zIndex:o,isPanorama:r})))}var Gat=["children"];function Kat(t,e){if(t==null)return{};var r,n,a=qat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function qat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function RI(){return RI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RI.apply(null,arguments)}var zat={width:"100%",height:"100%",display:"block"},Wat=x.forwardRef((t,e)=>{var r=Xie(),n=Yie(),a=loe();if(!fm(r)||!fm(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=t,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0),x.createElement(NR,RI({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:zat,ref:e}),s)}),Xat=t=>{var{children:e}=t,r=Jr(S4);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return x.createElement(NR,{width:n,height:a,x:o,y:s},e)},Nz=x.forwardRef((t,e)=>{var{children:r}=t,n=Kat(t,Gat),a=vu();return a?x.createElement(Xat,null,x.createElement(wz,{isPanorama:!0},r)):x.createElement(Wat,RI({ref:e},n),x.createElement(wz,{isPanorama:!1},r))});function Yat(){var t=es(),[e,r]=x.useState(null),n=Jr(q$e);return x.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;Gs(s)&&s!==n&&t(I$e(s))}},[e,t,n]),r}function Cz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Jat(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cz(Object(r),!0).forEach(function(n){Zat(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zat(t,e,r){return(e=est(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function est(t){var e=tst(t,"string");return typeof e=="symbol"?e:e+""}function tst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fg(){return fg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fg.apply(null,arguments)}var rst=()=>(aZe(),null);function MI(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var nst=x.forwardRef((t,e)=>{var r,n,a=x.useRef(null),[s,o]=x.useState({containerWidth:MI((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:MI((n=t.style)===null||n===void 0?void 0:n.height)}),l=x.useCallback((u,d)=>{o(f=>{var A=Math.round(u),h=Math.round(d);return f.containerWidth===A&&f.containerHeight===h?f:{containerWidth:A,containerHeight:h}})},[]),c=x.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();l(d,f);var A=m=>{var{width:p,height:g}=m[0].contentRect;l(p,g)},h=new ResizeObserver(A);h.observe(u),a.current=h}},[e,l]);return x.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),x.createElement(x.Fragment,null,x.createElement(j4,{width:s.containerWidth,height:s.containerHeight}),x.createElement("div",fg({ref:c},t)))}),ast=x.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=x.useState({containerWidth:MI(r),containerHeight:MI(n)}),o=x.useCallback((c,u)=>{s(d=>{var f=Math.round(c),A=Math.round(u);return d.containerWidth===f&&d.containerHeight===A?d:{containerWidth:f,containerHeight:A}})},[]),l=x.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[e,o]);return x.createElement(x.Fragment,null,x.createElement(j4,{width:a.containerWidth,height:a.containerHeight}),x.createElement("div",fg({ref:l},t)))}),sst=x.forwardRef((t,e)=>{var{width:r,height:n}=t;return x.createElement(x.Fragment,null,x.createElement(j4,{width:r,height:n}),x.createElement("div",fg({ref:e},t)))}),ist=x.forwardRef((t,e)=>{var{width:r,height:n}=t;return aA(r)||aA(n)?x.createElement(ast,fg({},t,{ref:e})):x.createElement(sst,fg({},t,{ref:e}))});function ost(t){return t===!0?nst:ist}var lst=x.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:A,onTouchEnd:h,onTouchMove:m,onTouchStart:p,style:g,width:v,responsive:y,dispatchTouchEvents:b=!0}=t,w=x.useRef(null),j=es(),[I,_]=x.useState(null),[S,E]=x.useState(null),F=Yat(),P=zR(),k=(P==null?void 0:P.width)>0?P.width:v,D=(P==null?void 0:P.height)>0?P.height:a,J=x.useCallback(H=>{F(H),typeof e=="function"&&e(H),_(H),E(H),H!=null&&(w.current=H)},[F,e,_,E]),fe=x.useCallback(H=>{j(mue(H)),j(Qu({handler:s,reactEvent:H}))},[j,s]),Ae=x.useCallback(H=>{j(ZF(H)),j(Qu({handler:u,reactEvent:H}))},[j,u]),me=x.useCallback(H=>{j(rce()),j(Qu({handler:d,reactEvent:H}))},[j,d]),pe=x.useCallback(H=>{j(ZF(H)),j(Qu({handler:f,reactEvent:H}))},[j,f]),ne=x.useCallback(()=>{j(bue())},[j]),Pe=x.useCallback(H=>{j(yue(H.key))},[j]),Be=x.useCallback(H=>{j(Qu({handler:o,reactEvent:H}))},[j,o]),O=x.useCallback(H=>{j(Qu({handler:l,reactEvent:H}))},[j,l]),G=x.useCallback(H=>{j(Qu({handler:c,reactEvent:H}))},[j,c]),q=x.useCallback(H=>{j(Qu({handler:A,reactEvent:H}))},[j,A]),U=x.useCallback(H=>{j(Qu({handler:p,reactEvent:H}))},[j,p]),Y=x.useCallback(H=>{b&&j(Nue(H)),j(Qu({handler:m,reactEvent:H}))},[j,b,m]),Z=x.useCallback(H=>{j(Qu({handler:h,reactEvent:H}))},[j,h]),R=ost(y);return x.createElement(bce.Provider,{value:I},x.createElement(fse.Provider,{value:S},x.createElement(R,{width:k??(g==null?void 0:g.width),height:D??(g==null?void 0:g.height),className:ka("recharts-wrapper",n),style:Jat({position:"relative",cursor:"default",width:k,height:D},g),onClick:fe,onContextMenu:Be,onDoubleClick:O,onFocus:ne,onKeyDown:Pe,onMouseDown:G,onMouseEnter:Ae,onMouseLeave:me,onMouseMove:pe,onMouseUp:q,onTouchEnd:Z,onTouchMove:Y,onTouchStart:U,ref:J},x.createElement(rst,null),r)))}),cst=["width","height","responsive","children","className","style","compact","title","desc"];function ust(t,e){if(t==null)return{};var r,n,a=dst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function dst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Iue=x.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:o,style:l,compact:c,title:u,desc:d}=t,f=ust(t,cst),A=Hf(f);return c?x.createElement(x.Fragment,null,x.createElement(j4,{width:r,height:n}),x.createElement(Nz,{otherAttributes:A,title:u,desc:d},s)):x.createElement(lst,{className:o,style:l,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},x.createElement(Nz,{otherAttributes:A,title:u,desc:d,ref:e},x.createElement(prt,null,s)))});function eO(){return eO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eO.apply(null,arguments)}var fst={top:5,right:5,bottom:5,left:5},hst={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:fst,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Ast=x.forwardRef(function(e,r){var n,a=ll(e.categoricalChartProps,hst),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return x.createElement(_ue,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},x.createElement(nue,{chartData:u.data}),x.createElement(Eue,{layout:a.layout,margin:a.margin}),x.createElement(Sue,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),x.createElement(Iue,eO({},a,{ref:r})))}),mst=["axis","item"],pst=x.forwardRef((t,e)=>x.createElement(Ast,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:mst,tooltipPayloadSearcher:Nce,categoricalChartProps:t,ref:e}));function gst(t){var e=es();return x.useEffect(()=>{e(Mat(t))},[e,t]),null}var xst=["layout"];function tO(){return tO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tO.apply(null,arguments)}function vst(t,e){if(t==null)return{};var r,n,a=yst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function yst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var bst={top:5,right:5,bottom:5,left:5},jue={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:bst,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},wst=x.forwardRef(function(e,r){var n,a=ll(e.categoricalChartProps,jue),{layout:s}=a,o=vst(a,xst),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return x.createElement(_ue,{preloadedState:{options:f},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},x.createElement(nue,{chartData:a.data}),x.createElement(Eue,{layout:s,margin:a.margin}),x.createElement(Sue,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),x.createElement(gst,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),x.createElement(Iue,tO({},o,{ref:r})))});function _z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ez(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_z(Object(r),!0).forEach(function(n){Nst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_z(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nst(t,e,r){return(e=Cst(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cst(t){var e=_st(t,"string");return typeof e=="symbol"?e:e+""}function _st(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Est=["item"],Sst=Ez(Ez({},jue),{},{layout:"centric",startAngle:0,endAngle:360}),Ist=x.forwardRef((t,e)=>{var r=ll(t,Sst);return x.createElement(wst,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Est,tooltipPayloadSearcher:Nce,categoricalChartProps:r,ref:e})});const jst="sellers_candies",b_="cash_deliveries_candies";function da(t){const e=typeof t=="number"?t:parseFloat(String(t??"").replace(/,/g,""));return Number.isFinite(e)?e:0}function hi(t){return Number.isFinite(t)?t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function w_(t,e){return t*e/100}function N_(t,e,r){return t-e-r}function Sz(t){return t?Ir(t.toDate(),"yyyy-MM-dd"):""}function C_(t){if(!t)return ur.fromDate(new Date);const[e,r,n]=t.split("-").map(s=>parseInt(s,10)),a=new Date(e,(r||1)-1,n||1,0,0,0,0);return ur.fromDate(a)}function Pst(){const t=new Date,[e,r]=x.useState(Ir(af(t),"yyyy-MM-dd")),[n,a]=x.useState(Ir(nf(t),"yyyy-MM-dd")),[s,o]=x.useState([]),l=x.useMemo(()=>{const R=new Map;return s.forEach(H=>R.set(H.id,H)),R},[s]),[c,u]=x.useState([]),[d,f]=x.useState(!0),[A,h]=x.useState(()=>Ir(new Date,"yyyy-MM-dd")),[m,p]=x.useState(""),[g,v]=x.useState(""),[y,b]=x.useState("0"),[w,j]=x.useState(""),[I,_]=x.useState(null),[S,E]=x.useState({}),F=x.useRef(null);x.useEffect(()=>{const R=nr(bt(Oe,jst),xn("name","asc")),H=ad(R,te=>{const ye=te.docs.map(Q=>{const Ge=Q.data();return{id:Q.id,name:String((Ge==null?void 0:Ge.name)??""),branch:Ge!=null&&Ge.branch?String(Ge.branch):"",commissionPercent:da((Ge==null?void 0:Ge.commissionPercent)??0)}});o(ye)},()=>o([]));return()=>H()},[]),x.useEffect(()=>{f(!0);const R=C_(e),H=new Date(C_(n).toDate().getTime());H.setDate(H.getDate()+1);const te=ur.fromDate(H),ye=nr(bt(Oe,b_),sr("date",">=",R),sr("date","<",te),xn("date","desc")),Q=ad(ye,Ge=>{const ie=Ge.docs.map(ee=>{const Ie=ee.data();return{id:ee.id,date:Ie==null?void 0:Ie.date,sellerId:String((Ie==null?void 0:Ie.sellerId)??""),sellerName:String((Ie==null?void 0:Ie.sellerName)??""),amountDelivered:da(Ie==null?void 0:Ie.amountDelivered),commissionPercent:da(Ie==null?void 0:Ie.commissionPercent),commissionPaid:da(Ie==null?void 0:Ie.commissionPaid),extraExpenses:da(Ie==null?void 0:Ie.extraExpenses),totalFinal:da(Ie==null?void 0:Ie.totalFinal),comment:String((Ie==null?void 0:Ie.comment)??""),createdAt:Ie==null?void 0:Ie.createdAt,updatedAt:Ie==null?void 0:Ie.updatedAt}});u(ie),f(!1)},Ge=>{console.error("Firestore deliveries query error:",Ge),u([]),f(!1),alert("Firestore query fall. Revis consola (probable ndice).")});return()=>Q()},[e,n]);const P=x.useMemo(()=>m?l.get(m):void 0,[m,l]),k=da((P==null?void 0:P.commissionPercent)??0),D=da(g),J=da(y),fe=w_(D,k),Ae=N_(D,fe,J),me=x.useMemo(()=>{var H;const R=new Map;for(const te of c){const ye=te.sellerId||te.sellerName||"UNKNOWN",Q=R.get(ye)??{sellerId:te.sellerId,sellerName:te.sellerName||((H=l.get(te.sellerId))==null?void 0:H.name)||"Sin nombre",delivered:0,commission:0,totalFinal:0};Q.delivered+=da(te.amountDelivered),Q.commission+=da(te.commissionPaid),Q.totalFinal+=da(te.totalFinal),R.set(ye,Q)}return Array.from(R.values()).sort((te,ye)=>te.sellerName.localeCompare(ye.sellerName))},[c,l]),pe=x.useMemo(()=>{let R=0,H=0,te=0,ye=0;for(const Q of c)R+=da(Q.amountDelivered),H+=da(Q.commissionPaid),te+=da(Q.extraExpenses),ye+=da(Q.totalFinal);return{delivered:R,commission:H,expenses:te,totalFinal:ye}},[c]),ne=x.useMemo(()=>me.map(R=>({name:R.sellerName,Entregado:Number(R.delivered.toFixed(2)),Comision:Number(R.commission.toFixed(2))})),[me]),Pe=x.useMemo(()=>[{name:"Total Entregado (Bruto)",value:Number(pe.delivered.toFixed(2))},{name:"Total Comisin",value:Number(pe.commission.toFixed(2))},{name:"Total Gastos",value:Number(pe.expenses.toFixed(2))}].filter(R=>R.value>0),[pe]),Be=["#3B82F6","#F59E0B","#EF4444"];async function O(){if(!m)return alert("Seleccion un vendedor.");if(D<=0)return alert("Ingres un Monto entregado vlido (> 0).");const R=l.get(m),H=(R==null?void 0:R.name)??"Sin nombre",te=da((R==null?void 0:R.commissionPercent)??0),ye=w_(D,te),Q=N_(D,ye,J);await Bn(bt(Oe,b_),{date:C_(A),sellerId:m,sellerName:H,amountDelivered:D,commissionPercent:te,commissionPaid:ye,extraExpenses:J,totalFinal:Q,comment:w??"",createdAt:ur.now()}),v(""),b("0"),j("")}function G(R){_(R.id),E({...R,dateInput:Sz(R.date)})}function q(){_(null),E({})}async function U(R){const H=S,te=String(H.sellerId??""),ye=l.get(te),Q=String(H.sellerName??(ye==null?void 0:ye.name)??"Sin nombre"),Ge=da(H.amountDelivered),ie=da(H.extraExpenses),ee=da(H.commissionPercent??(ye==null?void 0:ye.commissionPercent)??0),Ie=w_(Ge,ee),ue=N_(Ge,Ie,ie),se=C_(String(H.dateInput??Sz(H.date)));await pn(zt(Oe,b_,R),{date:se,sellerId:te,sellerName:Q,amountDelivered:Ge,commissionPercent:ee,commissionPaid:Ie,extraExpenses:ie,totalFinal:ue,comment:String(H.comment??""),updatedAt:ur.now()}),q()}async function Y(R){confirm("Eliminar este registro?")&&await Pn(zt(Oe,b_,R))}async function Z(){if(!F.current)return;const R=await yg(F.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",scrollX:0,scrollY:-window.scrollY}),H=R.toDataURL("image/png"),te=new Mr("p","mm","a4"),ye=te.internal.pageSize.getWidth(),Q=te.internal.pageSize.getHeight(),Ge=ye,ie=R.height*Ge/R.width;let ee=ie,Ie=0;for(te.addImage(H,"PNG",0,Ie,Ge,ie),ee-=Q;ee>0;)te.addPage(),Ie=-(ie-ee),te.addImage(H,"PNG",0,Ie,Ge,ie),ee-=Q;te.save(`Entregas_Dulces_${e}_a_${n}.pdf`)}return i.jsxs("div",{className:"p-3 md:p-6 max-w-7xl mx-auto space-y-3 md:space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg md:text-2xl font-black text-gray-900",children:"Control Contable - Entregas de Vendedores (Dulces)"}),i.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Periodo: ",i.jsx("span",{className:"font-bold",children:e})," "," ",i.jsx("span",{className:"font-bold",children:n})]})]}),i.jsx("button",{onClick:Z,className:"h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Exportar a PDF"})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Filtros de periodo"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",value:e,onChange:R=>r(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",value:n,onChange:R=>a(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]})]}),i.jsxs("div",{ref:F,className:"space-y-3 md:space-y-4",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"KPIs Consolidados"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Entradas (Neto)"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",hi(pe.totalFinal)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Entregado - Comisin - Gastos"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Comisiones"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",hi(pe.commission)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de comisin pagada"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Gastos extras"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",hi(pe.expenses)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de gastos registrados"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"Total entregado (Bruto)"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",hi(pe.delivered)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sin restar nada"})]})]}),i.jsx("div",{className:"font-black text-sm text-gray-900 mt-4 mb-2",children:"KPI Vendedores (sumatoria del periodo)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-[520px] w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[i.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Entregado"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Total final"})]})}),i.jsx("tbody",{children:me.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-2 text-gray-500",colSpan:4,children:"Sin datos en el periodo seleccionado."})}):me.map(R=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:R.sellerName}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",hi(R.delivered)]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",hi(R.commission)]}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",hi(R.totalFinal)]})]},R.sellerId||R.sellerName))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Entregas y Comisin por vendedor (Barras)"}),i.jsx("div",{className:"w-full h-[320px]",children:i.jsx(TG,{children:i.jsxs(pst,{data:ne,children:[i.jsx(hue,{dataKey:"name",interval:0,angle:-12,height:70}),i.jsx(Aue,{}),i.jsx(Pq,{}),i.jsx(_F,{}),i.jsx(XF,{dataKey:"Entregado"}),i.jsx(XF,{dataKey:"Comision"})]})})})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Distribucin (Pastel)"}),i.jsx("div",{className:"w-full h-[320px]",children:i.jsx(TG,{children:i.jsxs(Ist,{children:[i.jsx(Zce,{data:Pe,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:Pe.map((R,H)=>i.jsx(sN,{fill:Be[H%Be.length]},H))}),i.jsx(Pq,{}),i.jsx(_F,{})]})})})]})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Agregar movimiento"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",value:A,onChange:R=>h(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),i.jsxs("select",{value:m,onChange:R=>p(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10 bg-white",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(R=>i.jsxs("option",{value:R.id,children:[R.name," ",R.branch?`(${R.branch})`:""]},R.id))]})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),i.jsx("input",{type:"number",inputMode:"decimal",value:g,onChange:R=>v(R.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin configurada"}),i.jsx("input",{value:`${k}%`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin pagada"}),i.jsx("input",{value:`$ ${hi(fe)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),i.jsx("input",{type:"number",inputMode:"decimal",value:y,onChange:R=>b(R.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Total final"}),i.jsx("input",{value:`$ ${hi(Ae)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-900 font-extrabold"})]}),i.jsxs("label",{className:"space-y-1 md:col-span-2",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),i.jsx("input",{value:w,onChange:R=>j(R.target.value),placeholder:"Opcional...",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{onClick:O,className:"w-full md:w-auto h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Guardar movimiento"})})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Registro detallado"}),d?i.jsx("div",{className:"text-sm text-gray-500",children:"Cargando..."}):c.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"No hay registros en el periodo."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[i.jsx("th",{className:"text-left p-2 font-black",children:"Fecha"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Monto entregado"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin %"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin pagada"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Total final"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Comentario"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Acciones"})]})}),i.jsx("tbody",{children:c.map(R=>{if(!(I===R.id))return i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:Ir(R.date.toDate(),"yyyy-MM-dd")}),i.jsx("td",{className:"p-2 font-semibold",children:R.sellerName}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",hi(R.amountDelivered)]}),i.jsxs("td",{className:"p-2 text-right",children:[hi(R.commissionPercent),"%"]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",hi(R.commissionPaid)]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",hi(R.extraExpenses)]}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",hi(R.totalFinal)]}),i.jsx("td",{className:"p-2",children:R.comment}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>G(R),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),i.jsx("button",{onClick:()=>Y(R.id),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})})]},R.id);const te=da(S.amountDelivered??R.amountDelivered),ye=da(S.commissionPercent??R.commissionPercent),Q=da(S.extraExpenses??R.extraExpenses),Ge=w_(te,ye),ie=N_(te,Ge,Q);return i.jsxs("tr",{className:"border-t bg-yellow-50/40",children:[i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"date",value:String(S.dateInput??""),onChange:ee=>E(Ie=>({...Ie,dateInput:ee.target.value})),className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2",children:i.jsxs("select",{value:String(S.sellerId??R.sellerId),onChange:ee=>{const Ie=ee.target.value,ue=l.get(Ie);E(se=>({...se,sellerId:Ie,sellerName:(ue==null?void 0:ue.name)??"",commissionPercent:da((ue==null?void 0:ue.commissionPercent)??0)}))},className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(ee=>i.jsxs("option",{value:ee.id,children:[ee.name," ",ee.branch?`(${ee.branch})`:""]},ee.id))]})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(te),onChange:ee=>E(Ie=>({...Ie,amountDelivered:da(ee.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(ye),onChange:ee=>E(Ie=>({...Ie,commissionPercent:da(ee.target.value)})),className:"h-9 w-24 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsxs("td",{className:"p-2 text-right font-semibold",children:["$ ",hi(Ge)]}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(Q),onChange:ee=>E(Ie=>({...Ie,extraExpenses:da(ee.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",hi(ie)]}),i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"text",value:String(S.comment??R.comment),onChange:ee=>E(Ie=>({...Ie,comment:ee.target.value})),className:"h-9 w-full px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>U(R.id),className:"h-8 px-3 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),i.jsx("button",{onClick:q,className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})})]},R.id)})})]})}),i.jsxs("div",{className:"md:hidden space-y-3",children:[c.map(R=>i.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-black text-gray-900",children:R.sellerName}),i.jsx("div",{className:"text-xs font-extrabold bg-gray-100 rounded-full px-3 py-1",children:Ir(R.date.toDate(),"yyyy-MM-dd")})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Monto entregado"}),i.jsxs("div",{className:"font-extrabold",children:["$ ",hi(R.amountDelivered)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin %"}),i.jsxs("div",{className:"font-semibold",children:[hi(R.commissionPercent),"%"]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin pagada"}),i.jsxs("div",{className:"font-semibold",children:["$ ",hi(R.commissionPaid)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Gastos"}),i.jsxs("div",{className:"font-semibold",children:["$ ",hi(R.extraExpenses)]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Total final"}),i.jsxs("div",{className:"text-base font-black",children:["$ ",hi(R.totalFinal)]})]}),R.comment?i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comentario"}),i.jsx("div",{className:"text-sm text-gray-800",children:R.comment})]}):null]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{onClick:()=>G(R),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),i.jsx("button",{onClick:()=>Y(R.id),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})]},R.id)),I?i.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3",children:[i.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Editando registro"}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",value:String(S.dateInput??""),onChange:R=>E(H=>({...H,dateInput:R.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),i.jsxs("select",{value:String(S.sellerId??""),onChange:R=>{const H=R.target.value,te=l.get(H);E(ye=>({...ye,sellerId:H,sellerName:(te==null?void 0:te.name)??"",commissionPercent:da((te==null?void 0:te.commissionPercent)??0)}))},className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(R=>i.jsxs("option",{value:R.id,children:[R.name," ",R.branch?`(${R.branch})`:""]},R.id))]})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),i.jsx("input",{type:"number",value:String(S.amountDelivered??""),onChange:R=>E(H=>({...H,amountDelivered:da(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),i.jsx("input",{type:"number",value:String(S.extraExpenses??""),onChange:R=>E(H=>({...H,extraExpenses:da(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin %"}),i.jsx("input",{type:"number",value:String(S.commissionPercent??""),onChange:R=>E(H=>({...H,commissionPercent:da(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),i.jsx("input",{type:"text",value:String(S.comment??""),onChange:R=>E(H=>({...H,comment:R.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>U(I),className:"flex-1 h-10 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),i.jsx("button",{onClick:q,className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})]})]}):null]})]})]})]})]})}const Qm=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Bst(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Iz(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function Tst(t){const e=String(t||"").trim();if(!e)return 0;const r=Date.parse(e);return Number.isFinite(r)?r:0}function kst({open:t,onClose:e,onDetected:r}){const n=x.useRef(null),a=x.useRef(null),[s,o]=x.useState(""),l=x.useRef("");return x.useEffect(()=>{if(!t)return;let c=!1;const u=new b2,d=()=>{var A,h,m;try{(A=a.current)==null||A.stop()}catch{}a.current=null;try{const p=(h=n.current)==null?void 0:h.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{o("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const A=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,h=>{if(!c&&h){const m=String(h.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=A}catch(A){const h=String((A==null?void 0:A.message)||""),m=String((A==null?void 0:A.name)||"");h.toLowerCase().includes("permission")||m==="NotAllowedError"?o("Permiso de cmara denegado."):m==="NotFoundError"||h.toLowerCase().includes("notfound")?o("No se encontr cmara en este dispositivo."):h.toLowerCase().includes("secure")||h.toLowerCase().includes("https")?o("La cmara requiere HTTPS (sitio seguro)."):o(h||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function Fst(){const{refreshKey:t,refresh:e}=kc(),[r,n]=x.useState(!0),[a,s]=x.useState(""),[o,l]=x.useState([]),[c,u]=x.useState(""),[d,f]=x.useState(""),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState("ANY"),[y,b]=x.useState(!1),[w,j]=x.useState({});x.useEffect(()=>{(async()=>{n(!0),s("");try{const xe=await Qt(nr(bt(Oe,"candy_main_orders"))),de=new Map;xe.forEach(Ke=>{var be,ve,Ve;const Ne=Ke.data(),mt=Tst(Ne.date),wt=((ve=(be=Ne==null?void 0:Ne.createdAt)==null?void 0:be.toMillis)==null?void 0:ve.call(be))||((Ve=Ne==null?void 0:Ne.createdAt)!=null&&Ve.seconds?Ne.createdAt.seconds*1e3:0)||0,we=Math.max(mt,wt),ae=Array.isArray(Ne.items)?Ne.items:[];for(const ce of ae){const ke=String((ce==null?void 0:ce.id)||(ce==null?void 0:ce.productId)||"").trim();if(!ke)continue;const dt=String((ce==null?void 0:ce.name)||(ce==null?void 0:ce.productName)||"").trim(),ft=String((ce==null?void 0:ce.category)||"").trim(),gt=Number((ce==null?void 0:ce.unitPriceIsla)||0),Rt=Number((ce==null?void 0:ce.unitPriceRivas)||0),ot=Number((ce==null?void 0:ce.unitsPerPackage)||(ce==null?void 0:ce.unitsPerPack)||1),Se=de.get(ke);(!Se||we>=Se._sortKey)&&de.set(ke,{productId:ke,category:ft,productName:dt,priceIsla:gt,priceRivas:Rt,unitsPerPackage:ot,_sortKey:we})}});const Ue=Array.from(de.values()).sort((Ke,Ne)=>Ke.productName.localeCompare(Ne.productName,"es"));l(Ue)}catch(xe){console.error(xe),s(" Error cargando precios desde rdenes maestras."),l([])}finally{n(!1)}})()},[t]),x.useEffect(()=>{const xe=bt(Oe,"products_candies"),de=nr(xe),Ue=ad(de,Ke=>{const Ne={},mt={},wt={},we={};Ke.forEach(ae=>{const be=ae.data();Ne[ae.id]=Number((be==null?void 0:be.providerPrice)||(be==null?void 0:be.providerPricePerUnit)||0),wt[ae.id]=Number((be==null?void 0:be.unitsPerPackage)||(be==null?void 0:be.unitsPerPack)||1)||1;const ve=String((be==null?void 0:be.barcode)||"").trim();ve&&(mt[ae.id]=ve);const Ve=String((be==null?void 0:be.packaging)||(be==null?void 0:be.empaque)||"").trim();Ve&&(we[ae.id]=Ve)});try{const ae=S.current||{};let be=!1;for(const ke of Object.keys(mt))if((mt[ke]||"")!==(ae[ke]||"")){be=!0;break}const ve=F.current||{};let Ve=!1;for(const ke of Object.keys(wt))if((wt[ke]||0)!==(ve[ke]||0)){Ve=!0;break}J(Ne),Ae(wt);const ce={...mt,...ae};_(ce),S.current=ce,F.current={...wt},Pe(we),l(ke=>ke.map(dt=>({...dt,unitsPerPackage:wt[dt.productId]??dt.unitsPerPackage}))),!E.current&&be&&(s(" Cdigo actualizado."),setTimeout(()=>s(""),3e3)),!E.current&&Ve&&(s(" Unidades x paquete actualizadas."),setTimeout(()=>s(""),3e3)),E.current=!1}catch{J(Ne),Ae(wt),_(be=>({...mt,...be})),F.current={...wt},Pe(we),l(be=>be.map(ve=>({...ve,unitsPerPackage:wt[ve.productId]??ve.unitsPerPackage})))}},Ke=>console.error(Ke));return()=>Ue()},[]);const[I,_]=x.useState({}),S=x.useRef({}),E=x.useRef(!0),F=x.useRef({}),P=x.useRef({}),k=x.useRef(!0),[D,J]=x.useState({}),[fe,Ae]=x.useState({}),[me,pe]=x.useState({}),[ne,Pe]=x.useState({}),[Be,O]=x.useState("");x.useEffect(()=>{const xe=bt(Oe,"inventory_candies"),de=nr(xe),Ue=ad(de,Ke=>{try{const Ne={};Ke.forEach(wt=>{var ce,ke,dt;const we=wt.data(),ae=String(we.productId||"").trim();if(!ae)return;const be=Number(we.unitsPerPackage||we.unitsPerPack||0)||0,ve=((ke=(ce=we==null?void 0:we.createdAt)==null?void 0:ce.toMillis)==null?void 0:ke.call(ce))||((dt=we==null?void 0:we.createdAt)!=null&&dt.seconds?we.createdAt.seconds*1e3:0)||0,Ve=Ne[ae];(!Ve||ve>=Ve.ts)&&(Ne[ae]={val:be||0,ts:ve})});const mt={};for(const wt of Object.keys(Ne))mt[wt]=Ne[wt].val||0;pe(mt);try{const wt=P.current||{};let we=!1;for(const ae of Object.keys(mt))if((mt[ae]||0)!==(wt[ae]||0)){we=!0;break}P.current={...mt},!k.current&&we&&(s(" Inventario: unidades por paquete actualizadas."),setTimeout(()=>s(""),3e3)),k.current=!1}catch{}l(wt=>wt.map(we=>({...we,unitsPerPackage:mt[we.productId]??fe[we.productId]??we.unitsPerPackage})))}catch(Ne){console.error("inventory_candies snapshot error:",Ne)}},Ke=>console.error(Ke));return()=>Ue()},[fe]),x.useEffect(()=>{l(xe=>xe.map(de=>({...de,unitsPerPackage:me[de.productId]??fe[de.productId]??de.unitsPerPackage})))},[fe,me]);const G=x.useMemo(()=>{const xe=Bst(c),de=String(d||"").trim(),Ue=String(Be||"").trim().toLowerCase(),Ke=A.trim()===""?null:Iz(A,NaN),Ne=m.trim()===""?null:Iz(m,NaN);return o.filter(mt=>{const wt=String(ne[mt.productId]||"").trim().toLowerCase();if(Ue)return wt===Ue;if(xe&&!`${mt.category} ${mt.productName}`.toLowerCase().includes(xe))return!1;if(de){const ve=String(mt.productId||""),Ve=String(I[mt.productId]||"");if(!ve.includes(de)&&!Ve.includes(de))return!1}const we=g==="ISLA"?[mt.priceIsla]:g==="RIVAS"?[mt.priceRivas]:[mt.priceIsla,mt.priceRivas],ae=Ke==null||!Number.isFinite(Ke)?!0:we.some(ve=>ve>=Ke),be=Ne==null||!Number.isFinite(Ne)?!0:we.some(ve=>ve<=Ne);return ae&&be})},[o,c,A,m,g,I,Be,ne]),q=x.useMemo(()=>{const xe=new Map;for(const de of G){const Ue=(de.category||"Sin categora").trim()||"Sin categora",Ke=xe.get(Ue)||[];Ke.push(de),xe.set(Ue,Ke)}return Array.from(xe.entries()).sort(([de],[Ue])=>de.localeCompare(Ue,"es"))},[G]),U=xe=>{j(de=>({...de,[xe]:!de[xe]}))},Y=()=>{u(""),h(""),p(""),v("ANY"),O("")},[Z,R]=x.useState(!1),[H,te]=x.useState("search"),[ye,Q]=x.useState(null),[Ge,ie]=x.useState(0),[ee,Ie]=x.useState(0),[ue,se]=x.useState(null),[Ee,je]=x.useState(""),[it,At]=x.useState(""),pt=x.useMemo(()=>c.trim()!==""||A.trim()!==""||m.trim()!==""||g!=="ANY"||Be.trim()!=="",[c,A,m,g,Be]),[yt,Ct]=x.useState(!1);x.useEffect(()=>{var Ue;const xe=window.matchMedia("(max-width: 900px)"),de=()=>Ct(xe.matches);return de(),(Ue=xe.addEventListener)==null||Ue.call(xe,"change",de),()=>{var Ke;return(Ke=xe.removeEventListener)==null?void 0:Ke.call(xe,"change",de)}},[]);const[Et,Re]=x.useState(!1);x.useEffect(()=>{const xe=mD(Lf,async de=>{if(!de)return Re(!1);try{const Ue=await Ci(zt(Oe,"users",de.uid)),Ke=Ue.exists()?Ue.data():null,Ne=Ke?Array.isArray(Ke.roles)?Ke.roles:Ke.role?[Ke.role]:[]:[];Re(on(Ne,"admin"))}catch(Ue){console.error(Ue),Re(!1)}});return()=>xe()},[]);const We=async xe=>{var de;if(H==="search"){f(xe);const Ue=Object.keys(I).find(mt=>(I[mt]||"")===xe),Ke=(de=o.find(mt=>String(mt.productId||"").includes(xe)))==null?void 0:de.productId,Ne=Ue||Ke||null;Ne&&(se(Ne),b(!1)),R(!1);return}if(H==="edit"&&ye)try{const Ue=bt(Oe,"products_candies"),Ke=zt(Ue,ye);await pn(Ke,{barcode:xe}),_(Ne=>({...Ne,[ye]:xe})),je(xe),R(!1),te("search"),s(" Producto guardado.")}catch(Ue){console.error(Ue),s(" Error guardando el cdigo.")}},et=async xe=>{l(de=>de.map(Ue=>Ue.productId===xe?{...Ue,priceIsla:Number(Ge||0),priceRivas:Number(ee||0)}:Ue));try{const de=String(it||"").trim();await pn(zt(bt(Oe,"products_candies"),xe),{packaging:de||""}),Pe(Ue=>({...Ue,[xe]:de||""}))}catch(de){console.error("Error updating packaging:",de),s(" Error guardando empaque.")}Q(null),s(yt?" Producto guardado.":"")};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Precio Ventas"}),i.jsx("div",{className:"flex gap-2",children:i.jsx(Tc,{onClick:e,loading:r})})]}),i.jsxs("div",{className:"md:hidden mb-3",children:[i.jsxs("button",{type:"button",onClick:()=>b(xe=>!xe),className:`w-full px-3 py-3 rounded-xl border shadow-sm flex items-center justify-between ${pt?"bg-yellow-50 border-yellow-200":"bg-white"}`,children:[i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-semibold",children:"Filtros"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[pt?"Activos":"Ninguno","  ","Mostrando ",i.jsx("b",{children:G.length})]})]}),i.jsx("div",{className:"text-sm font-semibold",children:y?"Cerrar":"Abrir"})]}),y&&i.jsx("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:c,onChange:xe=>u(xe.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:Be,onChange:xe=>O(xe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Buscar por EAN"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:d,onChange:xe=>f(xe.target.value),placeholder:"Cdigo EAN"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{te("search"),R(!0)},children:"Escanear"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{Y(),f("")},children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>b(!1),children:"Aplicar"})]})]})})]}),i.jsxs("div",{className:"hidden md:block bg-white p-3 rounded shadow border mb-3 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Filtrar por producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:xe=>u(xe.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Be,onChange:xe=>O(xe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio mn"}),i.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:A,onChange:xe=>h(xe.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio mx"}),i.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:m,onChange:xe=>p(xe.target.value),placeholder:"0"})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:Y,children:"Limpiar"})})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Fuente: ",i.jsx("b",{children:"candy_main_orders.items[]"}),"  Muestra el"," ",i.jsx("b",{children:"ltimo precio"})," registrado por producto."]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Mostrando:"})," ",i.jsx("b",{children:G.length})]})]})]}),i.jsxs("div",{className:"md:hidden",children:[r?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):G.length===0?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):i.jsx("div",{className:"space-y-2",children:q.map(([xe,de])=>{const Ue=!!w[xe];return i.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>U(xe),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[13px] font-semibold truncate",children:xe}),i.jsxs("div",{className:"text-[10px] text-gray-600 truncate",children:[de.length," ",de.length===1?"producto":"productos"]})]}),i.jsx("div",{className:"text-sm font-semibold",children:Ue?"":"+"})]}),Ue&&i.jsx("div",{className:"px-3 pb-3 border-t space-y-2",children:de.map(Ke=>{const Ne=ue===Ke.productId,mt=ye===Ke.productId,wt=D[Ke.productId]||0,we=Ke.priceIsla-wt,ae=we*.25;return i.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>se(be=>be===Ke.productId?null:Ke.productId),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[13px] font-semibold truncate",children:Ke.productName}),i.jsx("div",{className:"text-[10px] text-gray-600 truncate",children:Ke.category})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"P. Paquete"}),i.jsx("div",{className:"text-sm font-semibold tabular-nums",children:Qm(Ke.priceIsla)})]})]}),Ne&&i.jsx("div",{className:"px-3 pb-3 border-t",children:i.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Categora"}),i.jsx("div",{className:"text-sm",children:Ke.category}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Unidades x paquete"}),i.jsx("div",{className:"text-sm",children:String(Ke.unitsPerPackage||1)})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Unidad"}),i.jsx("div",{className:"text-sm tabular-nums",children:Qm(Ke.priceIsla/(Ke.unitsPerPackage||1))})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Paquete"}),mt?i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:String(Ge),onChange:be=>ie(Number(be.target.value||0))}):i.jsx("div",{className:"text-sm font-semibold tabular-nums",children:Qm(Ke.priceIsla)})]})]}),i.jsxs("div",{children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-sm tabular-nums",children:Qm(we)})]}),i.jsxs("div",{className:"mt-1",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Comisin"}),i.jsx("div",{className:"text-sm tabular-nums",children:Qm(ae)})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Cdigo EAN"}),mt?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:Ee,readOnly:!0}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",onClick:()=>{te("edit"),R(!0)},type:"button",children:"Escanear"})]}):i.jsx("div",{children:I[Ke.productId]||""})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Tipo Empaque"}),mt?i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:it,onChange:be=>At(be.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):i.jsx("div",{className:"text-sm",children:ne[Ke.productId]||""})]})]})]}),i.jsx("div",{className:"flex gap-2",children:mt?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white",onClick:()=>{et(Ke.productId),se(null)},type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{te("edit"),R(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200",onClick:()=>Q(null),type:"button",children:"Cancelar"})]}):Et&&i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-3 py-2 rounded bg-yellow-400",onClick:()=>{Q(Ke.productId),ie(Ke.priceIsla||0),Ie(Ke.priceRivas||0),je(I[Ke.productId]||""),At(ne[Ke.productId]||"")},type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white",onClick:()=>l(be=>be.filter(ve=>ve.productId!==Ke.productId)),type:"button",children:"Borrar"})]})})]})})]},Ke.productId)})})]},xe)})}),a&&i.jsx("p",{className:"mt-2 text-sm",children:a})]}),i.jsx(kst,{open:Z,onClose:()=>R(!1),onDetected:We}),i.jsx("div",{className:"hidden md:block bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio Isla"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio Rivas"}),i.jsx("th",{className:"p-2 border text-right",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):G.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin resultados."})}):G.map(xe=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 border",children:xe.category}),i.jsx("td",{className:"p-2 border",children:xe.productName}),i.jsx("td",{className:"p-2 border",children:ye===xe.productId?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:it,onChange:de=>At(de.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):ne[xe.productId]||""}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ye===xe.productId?i.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(Ge),onChange:de=>ie(Number(de.target.value||0))}):Qm(xe.priceIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ye===xe.productId?i.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(ee),onChange:de=>Ie(Number(de.target.value||0))}):Qm(xe.priceRivas)}),i.jsx("td",{className:"p-2 border text-right",children:ye===xe.productId?i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white text-sm",onClick:()=>et(xe.productId),type:"button",children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 text-sm",onClick:()=>Q(null),type:"button",children:"Cancelar"})]}):Et&&i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-sm",onClick:()=>{Q(xe.productId),ie(xe.priceIsla||0),Ie(xe.priceRivas||0),je(I[xe.productId]||"")},type:"button",children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white text-sm",onClick:()=>{Q(xe.productId),te("edit"),R(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white text-sm",onClick:()=>l(de=>de.filter(Ue=>Ue.productId!==xe.productId)),type:"button",children:"Borrar"})]})})]},xe.productId))})]})}),a&&i.jsx("p",{className:"hidden md:block mt-2 text-sm",children:a})]})}const __=["Cuaderno","Block","Lapicero","Lpiz","Tajador","Borrador","Corrector","Cartucheras"],jz=["Lider","Scribe","Smarty","Pointer","Paper Mate","Otro"],pB=["Hombre","Mujer","Variado","NA"],Ost=["Universitario Cocido","5 Materia","2 Materia","Doble Raya","Rayado","Cuadriculado","Subrayado","Sublineado","Liso"],bl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function zi(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Xl(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function mE(t,e=1){const r=Math.floor(Xl(t,e));return r>0?r:e}function Pue(t){return!Number.isFinite(t)||t<=0?0:t}function gB(t){const e=String(t??"").trim();return e||""}function Bd(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(zi(a),a));for(const a of e){const s=n.get(zi(a));if(s!=null)return t[s]}}function Dst(t){return Object.values(t||{}).every(r=>zi(r)==="")}function hx(t){const e=Math.max(0,Xl(t.providerPrice,0)),r=Math.max(1,mE(t.quantity,1)),n=Pue(Xl(t.margin,0)),a=Math.max(0,Xl(t.salePrice,0)),s=n>0?e/n:e,o=a>0?a:s,l=o>0?e/o:n,c=e*r,u=(o-e)*r,d=o*r;return{providerPrice:e,quantity:r,margin:l,salePrice:o,facturado:c,gain:u,totalEsperado:d}}function Rst(){const{refreshKey:t,refresh:e}=kc(),[r,n]=x.useState(!0),[a,s]=x.useState(""),[o,l]=x.useState([]),[c,u]=x.useState(!1),[d,f]=x.useState(""),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState(""),[y,b]=x.useState(!1),[w,j]=x.useState(null),[I,_]=x.useState(!1),[S,E]=x.useState(null),[F,P]=x.useState(__[0]),[k,D]=x.useState(jz[0]),[J,fe]=x.useState(""),[Ae,me]=x.useState(0),[pe,ne]=x.useState(1),[Pe,Be]=x.useState(.7),[O,G]=x.useState(0),[q,U]=x.useState("NA"),[Y,Z]=x.useState(""),[R,H]=x.useState(""),[te,ye]=x.useState(!1),[Q,Ge]=x.useState(""),[ie,ee]=x.useState([]),[Ie,ue]=x.useState([]),[se,Ee]=x.useState(!1);x.useEffect(()=>{(async()=>{n(!0),s("");try{const ae=await Qt(nr(bt(Oe,"products_stationery"))),be=[];ae.forEach(ve=>{const Ve=ve.data();be.push({id:ve.id,category:Ve.category||"",brand:Ve.brand||"",name:Ve.name||"",providerPrice:Number(Ve.providerPrice||0),quantity:Number(Ve.quantity||1),facturado:Number(Ve.facturado||0),margin:Number(Ve.margin||0),salePrice:Number(Ve.salePrice||0),gain:Number(Ve.gain||0),gender:Ve.gender||"NA",typeProduct:Ve.typeProduct||"",code:Ve.code??"",createdAt:Ve.createdAt,updatedAt:Ve.updatedAt,totalEsperado:Number(Ve.totalEsperado||Number(Ve.salePrice||0)*Number(Ve.quantity||1))})}),l(be)}catch(ae){console.error(ae),s(" Error cargando productos (papelera).")}finally{n(!1)}})()},[t]);const je=x.useMemo(()=>{const ae=zi(d),be=zi(A),ve=m.trim()===""?null:Xl(m,NaN),Ve=g.trim()===""?null:Xl(g,NaN);return o.filter(ce=>!(ae&&!`${ce.category} ${ce.name}`.toLowerCase().includes(ae)||be&&!String(ce.code||"").toLowerCase().includes(be)||ve!=null&&Number.isFinite(ve)&&ce.salePrice<ve||Ve!=null&&Number.isFinite(Ve)&&ce.salePrice>Ve))},[o,d,A,m,g]),it=x.useMemo(()=>d.trim()!==""||A.trim()!==""||m.trim()!==""||g.trim()!=="",[d,A,m,g]),At=x.useMemo(()=>{const ae=o.length,be=o.reduce((ce,ke)=>ce+(ke.facturado||0),0),ve=o.reduce((ce,ke)=>ce+Number(ke.totalEsperado||Number(ke.salePrice||0)*Number(ke.quantity||1)),0),Ve=o.reduce((ce,ke)=>ce+(ke.gain||0),0);return{count:ae,sumFact:be,sumEsperado:ve,sumGain:Ve}},[o]),pt=()=>{P(__[0]),fe(""),me(0),ne(1),Be(.7),G(0),U("NA"),Z(""),H(""),j(null)},yt=()=>{pt(),b(!0)},Ct=ae=>{j(ae),P(ae.category||__[0]),D(ae.brand||jz[0]),fe(ae.name||""),me(Number(ae.providerPrice||0)),ne(Number(ae.quantity||1)),Be(Number(ae.margin||.7)),G(Number(ae.salePrice||0)),U(ae.gender||"NA"),Z(ae.typeProduct||""),H(String(ae.code||"")),b(!0)},Et=async()=>{s("");const ae=String(F||"").trim(),be=String(k||"").trim(),ve=String(J||"").trim(),{providerPrice:Ve,quantity:ce,margin:ke,salePrice:dt,facturado:ft,totalEsperado:gt,gain:Rt}=hx({providerPrice:Ae,quantity:pe,margin:Pe,salePrice:O});if(!ae)return s(" Categora requerida.");if(!ve)return s(" Producto requerido.");if(Ve<=0)return s(" Precio proveedor debe ser > 0.");if(ce<=0)return s(" Cantidad debe ser > 0.");if(dt<=0)return s(" Precio venta invlido.");if(ke<=0)return s(" Margen invlido.");const ot={category:ae,brand:be,name:ve,providerPrice:Ve,quantity:ce,facturado:ft,margin:ke,salePrice:dt,gain:Rt,gender:q||"NA",typeProduct:String(Y||"").trim(),code:gB(R)||null,updatedAt:ur.now(),totalEsperado:gt};try{n(!0),w?(await pn(zt(Oe,"products_stationery",w.id),ot),s(" Producto actualizado.")):(await Bn(bt(Oe,"products_stationery"),{...ot,createdAt:ur.now()}),s(" Producto creado.")),b(!1),j(null),pt(),e()}catch(Se){console.error(Se),s(" Error guardando producto.")}finally{n(!1)}},Re=async()=>{var ae;try{const be=new b2,ve=await b2.listVideoInputDevices(),Ve=(ae=ve[ve.length-1])==null?void 0:ae.deviceId;if(!Ve)return null;const ce=document.createElement("div");ce.className="fixed inset-0 z-[9999] bg-black/70 flex items-center justify-center p-3";const ke=document.createElement("div");ke.className="bg-white w-full max-w-md rounded-xl overflow-hidden shadow-xl";const dt=document.createElement("div");dt.className="p-3 flex items-center justify-between border-b",dt.innerHTML="<div style='font-weight:700'>Escanear cdigo</div>";const ft=document.createElement("button");ft.textContent="Cerrar",ft.className="px-3 py-1 rounded bg-gray-200";const gt=document.createElement("div");gt.className="p-3";const Rt=document.createElement("video");return Rt.style.width="100%",Rt.style.borderRadius="12px",gt.appendChild(Rt),dt.appendChild(ft),ke.appendChild(dt),ke.appendChild(gt),ce.appendChild(ke),document.body.appendChild(ce),await new Promise(async ot=>{const Se=()=>{ce.remove(),ot(null)};ft.onclick=Se;const ht=await be.decodeFromVideoDevice(Ve,Rt,W=>{if(W){const Te=W.getText();try{ht.stop()}catch{}ce.remove(),ot(Te)}})})}catch(be){return console.error(be),null}},We=async()=>{const ae=await Re();ae&&H(ae)},et=async()=>{const ae=await Re();if(!ae)return;const be=o.find(ve=>String(ve.code||"")===String(ae));be?(E(be),_(!0),s("")):(E(null),_(!0),s(""))},xe=(ae,be)=>{const ve=ae.map(ke=>({Id:ke.id,Categoria:ke.category,brand:ke.brand,Producto:ke.name,PrecioProveedor:ke.providerPrice,Cantidad:ke.quantity,Facturado:ke.facturado,TotalEsperado:ke.totalEsperado||ke.salePrice*ke.quantity,Margen:ke.margin,PrecioVenta:ke.salePrice,Ganancia:ke.gain,Genero:ke.gender,TipoProducto:ke.typeProduct,Codigo:ke.code||""})),Ve=Ds.json_to_sheet(ve),ce=Ds.book_new();Ds.book_append_sheet(ce,Ve,"Productos"),Jk(ce,be)},de=()=>{const ae=[{Id:"",Categoria:"Cuaderno",brand:"Lider",Producto:"Cuaderno Norma 100 hojas",PrecioProveedor:120,Cantidad:12,Margen:.7,PrecioVenta:"",Genero:"NA",TipoProducto:"Universitario Cocido",Codigo:"1234567890123"}],be=Ds.json_to_sheet(ae),ve=Ds.book_new();Ds.book_append_sheet(ve,be,"Productos");const Ve=a4(ve,{type:"array",bookType:"xlsx"}),ce=new Blob([Ve],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),ke=URL.createObjectURL(ce),dt=document.createElement("a");dt.href=ke,dt.download="template_products_stationery.xlsx",document.body.appendChild(dt),dt.click(),dt.remove(),URL.revokeObjectURL(ke)},Ue=ae=>{const be=[],ve=[];ae.forEach((ce,ke)=>{if(!ce||typeof ce!="object"||Dst(ce))return;const dt=ke+2,ft=String(Bd(ce,["Id","ID","docId","DocId"])??"").trim(),gt=String(Bd(ce,["Categoria","Categora","Category","category"])??"").trim(),Rt=String(Bd(ce,["Brand","Marca","brand","marca"])??"").trim(),ot=String(Bd(ce,["Producto","Product","Nombre","Name","name"])??"").trim(),Se=Bd(ce,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Costo","providerPrice"]),ht=Bd(ce,["Cantidad","Qty","quantity","cantidad"]),W=Bd(ce,["Margen","Margin","margen","margin"]),Te=Bd(ce,["PrecioVenta","Precio Venta","SalePrice","salePrice"]),Ze=String(Bd(ce,["Genero","Gnero","Gender","gender"])??"NA").trim(),tt=String(Bd(ce,["TipoProducto","Tipo","TypeProduct","typeProduct","Tipo producto"])??"").trim(),ut=Bd(ce,["Codigo","Cdigo","Code","Barcode","code"]),T=gB(ut),M=Math.max(0,Xl(Se,0)),L=Math.max(1,mE(ht,1)),K=Pue(Xl(W,0)),re=Math.max(0,Xl(Te,0));gt||ve.push(`Fila ${dt}: falta Categoria.`),ot||ve.push(`Fila ${dt}: falta Producto.`),M<=0&&ve.push(`Fila ${dt}: PrecioProveedor debe ser > 0.`),L<=0&&ve.push(`Fila ${dt}: Cantidad debe ser > 0.`),K<=0&&re<=0&&ve.push(`Fila ${dt}: Margen debe ser > 0 (o enviar PrecioVenta).`);const Me=pB.includes(Ze||"NA")?Ze:"NA";gt&&ot&&M>0&&L>0&&(K>0||re>0)&&be.push({id:ft||void 0,category:gt,brand:Rt,name:ot,providerPrice:M,quantity:L,margin:K>0?K:.7,salePrice:re>0?re:void 0,gender:Me,typeProduct:tt,code:T||"",_raw:ce})});const Ve=new Map;for(const ce of be){const ke=ce.id?`id::${ce.id}`:`${zi(ce.category)}::${zi(ce.name)}`;Ve.set(ke,ce)}return{rows:Array.from(Ve.values()),errors:ve}},Ke=async ae=>{if(s(""),ue([]),ee([]),Ge((ae==null?void 0:ae.name)||""),!ae)return;const be=ae.name.toLowerCase(),ve=be.endsWith(".xlsx")||be.endsWith(".xls"),Ve=be.endsWith(".csv");if(!ve&&!Ve){ue(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{Ee(!0);const ce=new FileReader,ke=await new Promise((ht,W)=>{ce.onerror=()=>W(new Error("No se pudo leer el archivo.")),ce.onload=()=>ht(ce.result),ce.readAsArrayBuffer(ae)}),dt=O2(new Uint8Array(ke),{type:"array"}),ft=dt.SheetNames[0],gt=dt.Sheets[ft],Rt=Ds.sheet_to_json(gt,{defval:""}),{rows:ot,errors:Se}=Ue(Rt);ee(ot),ue(Se),ot.length===0&&Se.length===0&&ue(["No se encontraron filas vlidas para importar."])}catch(ce){console.error(ce),ue(["Error leyendo el archivo. Revis que no est corrupto."])}finally{Ee(!1)}},Ne=(ae,be)=>{ee(ve=>{const Ve=[...ve],ce=Ve[ae];return ce?(Ve[ae]={...ce,...be},Ve):ve})},mt=x.useMemo(()=>{const ae=new Set(o.map(ce=>ce.id)),be=new Set(o.map(ce=>`${zi(ce.category)}::${zi(ce.name)}`));let ve=0,Ve=0;for(const ce of ie){if(ce.id&&ae.has(ce.id)){ve+=1;continue}const ke=`${zi(ce.category)}::${zi(ce.name)}`;be.has(ke)?ve+=1:Ve+=1}return{total:ie.length,willCreate:Ve,willUpdate:ve}},[ie,o]),wt=async()=>{if(s(""),Ie.length>0){s(" Correg los errores antes de importar.");return}if(ie.length===0){s(" No hay filas para importar.");return}try{Ee(!0);const ae={},be={};o.forEach(ke=>{ae[ke.id]=ke,be[`${zi(ke.category)}::${zi(ke.name)}`]=ke});const ve=Kd(Oe);let Ve=0,ce=0;for(const ke of ie){const dt=String(ke.category||"").trim(),ft=String(ke.name||"").trim(),{providerPrice:gt,quantity:Rt,margin:ot,salePrice:Se,facturado:ht,totalEsperado:W,gain:Te}=hx({providerPrice:ke.providerPrice,quantity:ke.quantity,margin:ke.margin,salePrice:ke.salePrice});if(!dt||!ft||gt<=0||Rt<=0||Se<=0||ot<=0)continue;const Ze={category:dt,name:ft,providerPrice:gt,quantity:Rt,facturado:ht,totalEsperado:W,margin:ot,salePrice:Se,gain:Te,gender:ke.gender||"NA",typeProduct:String(ke.typeProduct||"").trim(),code:gB(ke.code)||null,updatedAt:ur.now()};let tt;if(ke.id&&ae[ke.id])tt=ae[ke.id];else{const ut=`${zi(dt)}::${zi(ft)}`;tt=be[ut]}if(tt)ve.update(zt(Oe,"products_stationery",tt.id),Ze),ce+=1;else{const ut=zt(bt(Oe,"products_stationery"));ve.set(ut,{...Ze,createdAt:ur.now()}),Ve+=1}}await ve.commit(),s(` Importacin lista. Creados: ${Ve}, Actualizados: ${ce}`),ye(!1),ee([]),ue([]),Ge(""),e()}catch(ae){console.error(ae),s(" Error importando productos a Firestore.")}finally{Ee(!1)}},we=()=>{f(""),h(""),p(""),v("")};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Papelera"}),i.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-900 text-white hover:bg-black",onClick:et,type:"button",children:"Escanear"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:yt,type:"button",children:"+ Nuevo"}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{ye(!0),ee([]),ue([]),Ge("")},type:"button",children:"Importar (.xlsx)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>xe(o,"products_stationery_todo.xlsx"),type:"button",children:"Exportar (todo)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>xe(je,"products_stationery_filtrado.xlsx"),type:"button",children:"Exportar (filtrado)"}),i.jsx(Tc,{onClick:e,loading:r||se})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[i.jsx(E_,{label:"Productos",value:At.count}),i.jsx(E_,{label:"Facturado",value:bl(At.sumFact)}),i.jsx(E_,{label:"Esperado",value:bl(At.sumEsperado)}),i.jsx(E_,{label:"Ganancia",value:bl(At.sumGain)})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{className:`w-full md:w-auto px-3 py-2 rounded border bg-white hover:bg-gray-50 ${it?"border-yellow-300 bg-yellow-50":""}`,type:"button",onClick:()=>u(ae=>!ae),children:[c?"Cerrar filtros":"Abrir filtros"," ",it?"(activos)":""]}),c&&i.jsxs("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:d,onChange:ae=>f(ae.target.value),placeholder:"Ej: Cuaderno Norma"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:A,onChange:ae=>h(ae.target.value),placeholder:"Barcode"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta mn"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:m,onChange:ae=>p(ae.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta mx"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:g,onChange:ae=>v(ae.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"md:col-span-4 flex gap-2 justify-end",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:we,children:"Limpiar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>u(!1),children:"Aplicar"})]})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-600",children:[i.jsxs("div",{children:["Mostrando: ",i.jsx("b",{children:je.length})]}),i.jsxs("div",{children:["Coleccin: ",i.jsx("b",{children:"products_stationery"})]})]})]})]}),i.jsx("div",{className:"md:hidden space-y-2",children:r?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):je.length===0?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):je.map(ae=>i.jsxs("div",{className:"bg-white border rounded-xl p-3 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-600",children:ae.category}),i.jsx("div",{className:"text-base font-bold leading-tight",children:ae.name}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Venta"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:bl(ae.salePrice)})]}),i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Esperado:"," ",i.jsx("b",{children:bl(ae.totalEsperado||ae.salePrice*ae.quantity)})]}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:bl(ae.gain)})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Cdigo: ",i.jsx("b",{children:ae.code||""})]}),i.jsx("div",{className:"mt-2 flex gap-2",children:i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>Ct(ae),children:"Editar"})})]},ae.id))}),i.jsx("div",{className:"hidden md:block bg-white border rounded overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Facturado"}),i.jsx("th",{className:"p-2 border text-right",children:"Esperado"}),i.jsx("th",{className:"p-2 border text-right",children:"Margen"}),i.jsx("th",{className:"p-2 border text-right",children:"Venta"}),i.jsx("th",{className:"p-2 border text-right",children:"Ganancia"}),i.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),i.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Cargando"})}):je.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Sin resultados."})}):je.map(ae=>i.jsxs("tr",{className:"align-top",children:[i.jsx("td",{className:"p-2 border",children:ae.category}),i.jsx("td",{className:"p-2 border",children:ae.name}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:bl(ae.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ae.quantity}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:bl(ae.facturado)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:bl(ae.totalEsperado||ae.salePrice*ae.quantity)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Number(ae.margin||0).toFixed(2)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:bl(ae.salePrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:bl(ae.gain)}),i.jsx("td",{className:"p-2 border",children:ae.gender}),i.jsx("td",{className:"p-2 border",children:ae.typeProduct}),i.jsx("td",{className:"p-2 border",children:ae.code||""}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>Ct(ae),children:"Editar"})})]},ae.id))})]})}),a&&i.jsx("p",{className:"mt-2 text-sm",children:a}),y&&i.jsxs(Pz,{onClose:()=>b(!1),title:w?"Editar producto":"Nuevo producto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Categora"}),i.jsx("select",{className:"w-full border rounded px-2 py-2",value:F,onChange:ae=>P(ae.target.value),children:__.map(ae=>i.jsx("option",{value:ae,children:ae},ae))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:J,onChange:ae=>fe(ae.target.value),placeholder:"Ej: Cuaderno Norma..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio proveedor"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Ae)?"":Ae,onChange:ae=>me(Math.max(0,Xl(ae.target.value,0)))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cantidad"}),i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-2 text-right",value:pe,onChange:ae=>ne(mE(ae.target.value,1))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Facturado (auto)"}),i.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:bl(hx({providerPrice:Ae,quantity:pe,margin:Pe,salePrice:O}).facturado)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Margen"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Pe)?"":Pe,onChange:ae=>Be(Math.max(0,Xl(ae.target.value,0)))}),i.jsx("div",{className:"text-[11px] text-gray-600 mt-1",children:"Ej: 0.70 / 0.80"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta (editable)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(hx({providerPrice:Ae,quantity:pe,margin:Pe,salePrice:O}).salePrice)?"":hx({providerPrice:Ae,quantity:pe,margin:Pe,salePrice:O}).salePrice,onChange:ae=>{G(Math.max(0,Xl(ae.target.value,0)))}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Ganancia (auto)"}),i.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:bl(hx({providerPrice:Ae,quantity:pe,margin:Pe,salePrice:O}).gain)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Gnero"}),i.jsx("select",{className:"w-full border rounded px-2 py-2",value:q,onChange:ae=>U(ae.target.value),children:pB.map(ae=>i.jsx("option",{value:ae,children:ae},ae))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo producto"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:Y,onChange:ae=>Z(ae.target.value),children:[i.jsx("option",{value:"",children:""}),Ost.map(ae=>i.jsx("option",{value:ae,children:ae},ae))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:R,onChange:ae=>H(ae.target.value),placeholder:"Escane o peg el cdigo"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:We,children:"Escanear"})]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:()=>{b(!1),j(null)},children:"Cancelar"}),i.jsx("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:Et,disabled:r,children:"Guardar"})]})]}),I&&i.jsx(Pz,{onClose:()=>_(!1),title:"Resultado de escaneo",children:S?i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-xs text-gray-600",children:S.category}),i.jsx("div",{className:"text-lg font-bold",children:S.name}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Precio venta"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:bl(S.salePrice)})]}),i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:bl(S.gain)})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Proveedor"}),i.jsx("div",{className:"font-semibold tabular-nums",children:bl(S.providerPrice)})]}),i.jsxs("div",{className:"rounded-lg border p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Cantidad"}),i.jsx("div",{className:"font-semibold tabular-nums",children:S.quantity})]}),i.jsxs("div",{className:"rounded-lg border p-2 col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Cdigo"}),i.jsx("div",{className:"font-semibold tabular-nums",children:S.code||""})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{className:"px-4 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>{_(!1),Ct(S)},children:"Editar"})})]}):i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-semibold",children:"No encontrado"}),i.jsxs("div",{className:"text-gray-600 mt-1",children:["Ese cdigo no existe en ",i.jsx("b",{children:"products_stationery"}),"."]})]})}),te&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Importar papelera (.xlsx / .csv)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ye(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),i.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas: Id (opcional), Categoria, Producto, PrecioProveedor, Cantidad, Margen (o PrecioVenta), Genero, TipoProducto, Codigo."})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:de,type:"button",children:"Descargar template .xlsx"})]}),i.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:ae=>{var be;return Ke(((be=ae.target.files)==null?void 0:be[0])||null)}}),Q&&i.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",i.jsx("b",{children:Q})]}),se&&i.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),Ie.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[i.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),i.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:Ie.slice(0,60).map((ae,be)=>i.jsx("li",{children:ae},be))})]}),i.jsxs("div",{className:"bg-white border rounded p-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",mt.total," filas (Crear:"," ",mt.willCreate," / Actualizar:"," ",mt.willUpdate,")"]})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:wt,disabled:se||ie.length===0||Ie.length>0,type:"button",children:"Importar a Firestore"})]}),i.jsxs("div",{className:"overflow-x-auto border rounded",children:[i.jsxs("table",{className:"min-w-[1500px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Margen"}),i.jsx("th",{className:"p-2 border text-right",children:"PrecioVenta"}),i.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),i.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),i.jsx("tbody",{children:ie.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):ie.slice(0,300).map((ae,be)=>{const ve=ae.id?o.some(ke=>ke.id===ae.id):!1,Ve=o.some(ke=>`${zi(ke.category)}::${zi(ke.name)}`==`${zi(ae.category)}::${zi(ae.name)}`),ce=ve||Ve;return i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ae.id||"",onChange:ke=>Ne(be,{id:ke.target.value.trim()||void 0}),placeholder:"docId (update exacto)"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-44 border rounded px-2 py-1",value:ae.category,onChange:ke=>Ne(be,{category:ke.target.value})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-72 border rounded px-2 py-1",value:ae.name,onChange:ke=>Ne(be,{name:ke.target.value})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:ae.providerPrice,onChange:ke=>Ne(be,{providerPrice:Math.max(0,Xl(ke.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:ae.quantity,onChange:ke=>Ne(be,{quantity:mE(ke.target.value,1)})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-24 border rounded px-2 py-1 text-right",value:ae.margin,onChange:ke=>Ne(be,{margin:Math.max(0,Xl(ke.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:ae.salePrice??"",onChange:ke=>Ne(be,{salePrice:Math.max(0,Xl(ke.target.value,0))||void 0}),placeholder:"Opcional"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("select",{className:"w-28 border rounded px-2 py-1",value:ae.gender,onChange:ke=>Ne(be,{gender:ke.target.value}),children:pB.map(ke=>i.jsx("option",{value:ke,children:ke},ke))})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ae.typeProduct,onChange:ke=>Ne(be,{typeProduct:ke.target.value})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ae.code||"",onChange:ke=>Ne(be,{code:ke.target.value})})}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${ce?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:ce?"ACTUALIZA":"CREA"})})]},`${ae.id||""}-${be}`)})})]}),ie.length>300&&i.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",ie.length," filas (importa todas)."]})]})]})]})})]})}function E_({label:t,value:e}){return i.jsxs("div",{className:"bg-white border rounded p-3 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-500",children:t}),i.jsx("div",{className:"text-lg font-extrabold",children:e})]})}function Pz({title:t,children:e,onClose:r}){return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-3xl p-4 relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:t}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),e]})})}const Ru=t=>`C$ ${(Number(t)||0).toFixed(2)}`,xB=(t,e)=>{var r;return((r=t._raw)==null?void 0:r.clientName)||t.customerName||(t.customerId?e[t.customerId]:"")||"Nombre cliente"},Bz=t=>{const e=pp(t.date);if(isFinite(e))return e;const r=t._raw||{},n=[r.date,r.closureDate,r.processedDate,r.createdAt,r.timestamp];for(const a of n){const s=pp(a);if(isFinite(s))return s}return NaN};function _x(t){if(!t)return"";if(t!=null&&t.toDate)return Ir(t.toDate(),"yyyy-MM-dd");const e=String(t).trim();if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const r=["dd/MM/yyyy","d/M/yyyy","MM/dd/yyyy","M/d/yyyy","yyyy/MM/dd","yyyy-M-d","yyyy/M/d","yyyy-MM-dd'T'HH:mm:ss","yyyy-MM-dd'T'HH:mm:ss.SSSX"];for(const a of r){const s=Aee(e,a,new Date);if(u6(s))return Ir(s,"yyyy-MM-dd")}const n=new Date(e);return isNaN(n.getTime())?"":Ir(n,"yyyy-MM-dd")}function pp(t){const e=_x(t);if(!e)return NaN;const r=Aee(e,"yyyy-MM-dd",new Date);return u6(r)?r.getTime():NaN}function Mst(t){var o,l;if(String((t==null?void 0:t.status)||"").toUpperCase()==="PROCESADA"){const c=_x(t==null?void 0:t.closureDate);if(c)return c;const u=_x(t==null?void 0:t.processedDate);if(u)return u}const r=_x(t==null?void 0:t.date),n=(o=t==null?void 0:t.createdAt)!=null&&o.toDate?t.createdAt.toDate():null;if(r&&n){const c=pp(r),u=n.getTime();if(Math.abs(u-c)/(1e3*60*60*24)>30)return Ir(n,"yyyy-MM-dd")}if(r)return r;if((l=t==null?void 0:t.timestamp)!=null&&l.toDate)return Ir(t.timestamp.toDate(),"yyyy-MM-dd");if(n)return Ir(n,"yyyy-MM-dd");const a=_x(t==null?void 0:t.closureDate);if(a)return a;const s=_x(t==null?void 0:t.processedDate);return s||""}function Lst(t,e){const r=Mst(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((s,o)=>s+(Number(o.qty??o.quantity??o.lbs??0)||0),0),a=Number(t.amount??t.total??0)||0):(n=Number(t.quantity??t.lbs??t.weight??0)||0,a=Number(t.amount??t.total??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,_raw:t}}async function Ust(t){const e=nr(bt(Oe,"ar_movements"),sr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Pn(zt(Oe,"ar_movements",n.id))))}function Qst({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=on(n,"vendedor_pollo"),s=on(n,"admin");if(!(on(n,"admin")||on(n,"vendedor_pollo")||on(n,"supervisor_pollo")||on(n,"contador")))return i.jsx("div",{className:"p-6 max-w-4xl mx-auto text-center text-red-600",children:"Acceso restringido  Solo administradores, vendedores y supervisores de pollo."});const o=s?7:6,[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,A]=x.useState(null),[h,m]=x.useState([]),p=async se=>{c(!0),d(!0),A(se),m([]);try{const Ee=await Ci(zt(Oe,"salesV2",se)),je=Ee.exists()?Ee.data():null;if(!je){m([]);return}let it=[];if(Array.isArray(je.items)&&je.items.length>0)it=je.items;else if(je.items&&typeof je.items=="object")try{it=Object.values(je.items)}catch{it=[]}else je.item?it=[je.item]:Array.isArray(je.products)&&je.products.length>0?it=je.products:Array.isArray(je.lines)&&je.lines.length>0?it=je.lines:Array.isArray(je.detalles)&&je.detalles.length>0?it=je.detalles:(je.productName||je.product)&&(it=[{productName:je.productName||je.product||"",qty:je.qty??je.quantity??je.lbs??0,unitPrice:je.unitPrice??je.price??0,discount:je.discount??0,total:je.total??je.amount??0}]);const At=We=>{if(We==null)return NaN;if(typeof We=="number")return We;let et=String(We).trim();if(!et)return NaN;if(et=et.replace(/[^0-9.,-]/g,""),!et)return NaN;et.indexOf(".")>-1&&et.indexOf(",")>-1?et=et.replace(/,/g,""):et.indexOf(",")>-1&&et.indexOf(".")===-1&&(et=et.replace(/,/g,"."));const xe=Number(et);return isNaN(xe)?NaN:xe},pt=new Set;for(const We of it)if(Array.isArray(We==null?void 0:We.allocations))for(const et of We.allocations){const xe=String((et==null?void 0:et.batchId)||"").trim();xe&&pt.add(xe)}else if(We!=null&&We.allocations&&typeof We.allocations=="object")try{for(const et of Object.values(We.allocations)){const xe=String((et==null?void 0:et.batchId)||"").trim();xe&&pt.add(xe)}}catch{}if(Array.isArray(je==null?void 0:je.allocations))for(const We of je.allocations){const et=String((We==null?void 0:We.batchId)||"").trim();et&&pt.add(et)}const yt={};pt.size>0&&await Promise.all(Array.from(pt).map(async We=>{try{const et=await Ci(zt(Oe,"inventory_batches",We));if(et.exists()){const xe=et.data();yt[We]=Number(xe.salePrice??xe.sale_price??xe.price??0)}}catch{}}));const Ct=new Set;for(const We of it){const et=String(We.productId||We.productId||"").trim();et&&Ct.add(et)}const Et={};Ct.size>0&&await Promise.all(Array.from(Ct).map(async We=>{try{const et=await Ci(zt(Oe,"products",We));if(et.exists()){const xe=et.data();Et[We]=Number(xe.salePrice??xe.price??0)}}catch{}}));const Re=it.map(We=>{const et=String(We.productName||We.product||We.name||"(sin nombre)"),xe=Number(We.qty??We.quantity??We.lbs??We.weight??0)||0,de=At(We.total??We.lineFinal??We.amount??We.monto??We.line_total)||0;let Ue=0;const Ke=[We.unitPrice,We.unitPricePackage,We.salePrice,We.sale_price,We.price,We.unit_price,We.pricePerUnit,We.price_per_unit];for(const wt of Ke){const we=At(wt);if(!isNaN(we)&&we!==0){Ue=we;break}}if(!Ue){const wt=(je==null?void 0:je.salePrice)??(je==null?void 0:je.sale_price)??(je==null?void 0:je.unitPrice)??(je==null?void 0:je.unit_price)??(je==null?void 0:je.price)??(je==null?void 0:je.pricePerUnit),we=At(wt);!isNaN(we)&&we!==0&&(Ue=we)}if(!Ue){const wt=Array.isArray(We.allocations)?We.allocations[0]:We.allocations&&typeof We.allocations=="object"?Object.values(We.allocations)[0]:null,we=wt?String(wt.batchId||"").trim():"";we&&yt[we]&&(Ue=yt[we]||0)}!Ue&&We.productId&&(Ue=Et[String(We.productId)]||0),(!Ue||Ue===0)&&de>0&&xe>0&&(Ue=de/xe);const Ne=At(We.discount??We.desc??0)||0;let mt=de;return(!mt||mt===0)&&(mt=Number(Ue*xe||0)),mt=Number(mt)||0,{productName:et,qty:xe,unitPrice:Ue,discount:Ne,total:mt}});m(Re)}catch(Ee){console.error(Ee)}finally{d(!1)}},[g,v]=x.useState(Ir(new Date,"yyyy-MM-01")),[y,b]=x.useState(Ir(new Date,"yyyy-MM-dd")),[w,j]=x.useState([]),[I,_]=x.useState([]),[S,E]=x.useState([]),[F,P]=x.useState(!0),[k,D]=x.useState(""),[J,fe]=x.useState(""),[Ae,me]=x.useState(""),[pe,ne]=x.useState("ALL"),[Pe,Be]=x.useState(null),O=15,[G,q]=x.useState(1),U=x.useMemo(()=>{const se={};return w.forEach(Ee=>se[Ee.id]=Ee.name),se},[w]);x.useEffect(()=>{pe!=="ALL"&&!S.includes(pe)&&ne("ALL")},[S,pe]),x.useEffect(()=>{(async()=>{P(!0),D("");try{const se=[];if(a&&e){const yt=nr(bt(Oe,"customers_pollo"),sr("vendorId","==",e),xn("createdAt","desc"));(await Qt(yt)).forEach(Et=>se.push({id:Et.id,name:Et.data().name||""}))}else(await Qt(nr(bt(Oe,"customers_pollo"),xn("createdAt","desc")))).forEach(Ct=>se.push({id:Ct.id,name:Ct.data().name||""}));j(se);const Ee=await Qt(nr(bt(Oe,"salesV2"),xn("createdAt","desc"))),je=[];Ee.forEach(yt=>{const Ct=Lst(yt.data(),yt.id);Ct&&je.push(Ct)});const it=je.sort((yt,Ct)=>Ct.date.localeCompare(yt.date));_(it);const At=pp(g),pt=pp(y);E(Array.from(new Set(it.filter(yt=>{const Ct=Bz(yt);return!(!isFinite(Ct)||isFinite(At)&&Ct<At||isFinite(pt)&&Ct>pt)}).map(yt=>{var Ct,Et,Re,We;return((Ct=yt._raw)==null?void 0:Ct.productName)||((We=(Re=(Et=yt._raw)==null?void 0:Et.items)==null?void 0:Re[0])==null?void 0:We.productName)||"(sin producto)"}))).sort()),q(1)}catch(se){console.error(se),D(" Error cargando transacciones.")}finally{P(!1)}})()},[g,y]);const Y=x.useMemo(()=>{const se=pp(g),Ee=pp(y);return I.filter(je=>{const it=Bz(je);return!(!isFinite(it)||isFinite(se)&&it<se||isFinite(Ee)&&it>Ee)})},[I,g,y]),Z=x.useMemo(()=>Y.filter(se=>{var Ee,je,it,At;if(J&&se.customerId!==J||Ae&&se.type!==Ae)return!1;if(pe&&pe!=="ALL"){const pt=((Ee=se._raw)==null?void 0:Ee.productName)||((At=(it=(je=se._raw)==null?void 0:je.items)==null?void 0:it[0])==null?void 0:At.productName)||"";if(!pt||pt!==pe)return!1}return!0}),[Y,J,Ae,pe]),R=x.useMemo(()=>{let se=0,Ee=0,je=0,it=0;for(const yt of Y)yt.type==="CONTADO"?(se+=yt.quantity,je+=yt.total):(Ee+=yt.quantity,it+=yt.total);const At=se+Ee,pt=je+it;return{packsCash:se,packsCredito:Ee,packsTotal:At,montoCash:je,montoCredito:it,montoTotal:pt}},[Y]),H=Math.max(1,Math.ceil(Z.length/O)),te=x.useMemo(()=>{const se=(G-1)*O;return Z.slice(se,se+O)},[Z,G]);x.useMemo(()=>f&&I.find(se=>se.id===f)||null,[f,I]);const ye=async se=>{if(s&&(Be(null),!!window.confirm("Eliminar esta venta? Se restaurar el inventario asociado.")))try{P(!0),await dre(se.id),await Ust(se.id),_(Ee=>Ee.filter(je=>je.id!==se.id)),D(" Venta eliminada")}catch(Ee){console.error(Ee),D(" No se pudo eliminar la venta.")}finally{P(!1)}},Q=()=>{const se=`Ventas del dia  ${g} a ${y}`,Ee=pt=>(pt||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),je=Z.map(pt=>{var Ct,Et,Re,We;const yt=xB(pt,U);return(Ct=pt._raw)!=null&&Ct.productName||(We=(Re=(Et=pt._raw)==null?void 0:Et.items)==null?void 0:Re[0])!=null&&We.productName,`<tr>
          <td>${pt.date}</td>
          <td>${Ee(yt)}</td>
          <td>${pt.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${pt.quantity}</td>
          <td style="text-align:right">${Ru(pt.total)}</td>
        </tr>`}).join(""),it=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Ee(se)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Ee(se)}</h1>
      <div class="kpis">
        <div><b>Libras Cash:</b> ${R.packsCash}</div>
        <div><b>Libras Crdito:</b> ${R.packsCredito}</div>
        <div><b>Ventas Cash:</b> ${Ru(R.montoCash)}</div>
        <div><b>Ventas Crdito:</b> ${Ru(R.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Libras</th><th>Ventas</th>
      </tr></thead><tbody>
      ${je||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,At=window.open("","_blank");At&&(At.document.open(),At.document.write(it),At.document.close())},Ge=()=>q(1),ie=()=>q(se=>Math.max(1,se-1)),ee=()=>q(se=>Math.min(H,se+1)),Ie=()=>q(H),ue=()=>{const se=[];if(H<=7)for(let je=1;je<=H;je++)se.push(je);else{const je=Math.max(1,G-2),it=Math.min(H,G+2);se.push(1),je>2&&se.push(-1);for(let At=je;At<=it;At++)At!==1&&At!==H&&se.push(At);it<H-1&&se.push(-2),se.push(H)}return i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ge,disabled:G===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ie,disabled:G===1,children:" Anterior"}),se.map((je,it)=>typeof je=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${je===G?"bg-blue-600 text-white":""}`,onClick:()=>q(je),children:je},it):i.jsx("span",{className:"px-2",children:""},it)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ee,disabled:G===H,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ie,disabled:G===H,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",G," de ",H,"  ",Z.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:se=>{v(se.target.value),q(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:se=>{b(se.target.value),q(1)}})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:J,onChange:se=>{fe(se.target.value),q(1)},children:[i.jsx("option",{value:"",children:"Todos"}),w.map(se=>i.jsx("option",{value:se.id,children:se.name},se.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:Ae,onChange:se=>{me(se.target.value),q(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:pe,onChange:se=>{ne(se.target.value),q(1)},children:[i.jsx("option",{value:"ALL",children:"Todos"}),S.map(se=>i.jsx("option",{value:se,children:se},se))]})]}),i.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:Q,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:R.packsCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:R.packsCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras Total"}),i.jsx("div",{className:"text-xl font-semibold",children:R.packsTotal})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Ru(R.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Ru(R.montoCredito)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Total"}),i.jsx("div",{className:"text-xl font-semibold",children:Ru(R.montoTotal)})]})]}),i.jsxs("div",{className:"block md:hidden space-y-3",children:[F?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):te.length===0?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):te.map(se=>{var it,At,pt,yt;const Ee=xB(se,U),je=((it=se._raw)==null?void 0:it.productName)||((yt=(pt=(At=se._raw)==null?void 0:At.items)==null?void 0:pt[0])==null?void 0:yt.productName)||"(sin producto)";return i.jsx("div",{className:"bg-white border rounded-xl shadow",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:Ee}),i.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:se.date})]}),i.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[i.jsx("span",{className:`px-2 py-1 rounded-full border ${se.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:se.type==="CREDITO"?"Crdito":"Cash"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Libras:"})," ",i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:Ct=>{Ct.preventDefault(),p(se.id)},title:"Ver detalle",children:se.quantity})]}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Monto:"})," ",Ru(se.total)]})]})]}),i.jsx("div",{className:"text-gray-500 mt-1",children:i.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),i.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("span",{className:"font-medium text-right",children:Ee})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Producto"}),i.jsx("span",{className:"font-medium text-right",children:je})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha"}),i.jsx("span",{className:"font-medium",children:se.date})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("span",{className:"font-medium",children:se.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Libras"}),i.jsx("span",{className:"font-medium",children:i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(se.id),title:"Ver detalle",children:se.quantity})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Monto"}),i.jsx("span",{className:"font-semibold",children:Ru(se.total)})]}),i.jsx("div",{className:"flex items-center justify-between",children:s&&i.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>Be(Ct=>Ct===se.id?null:se.id),children:" Acciones"}),Pe===se.id&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ye(se),children:"Eliminar"})]})})]})})]})},se.id)}),i.jsx("div",{className:"bg-white p-3 rounded shadow border",children:ue()})]}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Libras"}),i.jsx("th",{className:"p-2 border",children:"Ventas"}),s&&i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:F?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Cargando"})}):te.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Sin transacciones en el rango."})}):te.map(se=>{var it,At,pt,yt;const Ee=xB(se,U),je=((it=se._raw)==null?void 0:it.productName)||((yt=(pt=(At=se._raw)==null?void 0:At.items)==null?void 0:pt[0])==null?void 0:yt.productName)||"(sin producto)";return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:se.date}),i.jsx("td",{className:"p-2 border",children:Ee}),i.jsx("td",{className:"p-2 border",children:je}),i.jsx("td",{className:"p-2 border",children:se.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(se.id),children:se.quantity})}),i.jsx("td",{className:"p-2 border",children:Ru(se.total)}),s&&i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>Be(Ct=>Ct===se.id?null:se.id),title:"Acciones",children:""}),Pe===se.id&&i.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>ye(se),children:"Eliminar"})})]})]},se.id)})})]}),ue()]}),k&&i.jsx("p",{className:"mt-2 text-sm",children:k}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{children:i.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," ",f?` #${f}`:""]})}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Libras"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:u?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):h.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):h.map((se,Ee)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:se.productName}),i.jsx("td",{className:"p-2 border text-right",children:se.qty}),i.jsx("td",{className:"p-2 border text-right",children:Ru(se.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Ru(se.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Ru(se.total)})]},Ee))})]})})]})})]})}function Vst(){const[t,e]=x.useState(!1);return x.useEffect(()=>{var a;const r=window.matchMedia("(max-width: 900px)"),n=()=>e(r.matches);return n(),(a=r.addEventListener)==null||a.call(r,"change",n),()=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"change",n)}},[]),t}function Hst(){const[t,e]=x.useState(null),[r,n]=x.useState(""),[a,s]=x.useState([]),[o,l]=x.useState(""),[c,u]=x.useState(!0),d=Vst(),f=x.useMemo(()=>d?i.jsx(_ye,{role:r,roles:a}):i.jsx(Cye,{role:r,roles:a}),[d,r,a]),A=(t==null?void 0:t.email)||"";if(x.useEffect(()=>{const m=mD(Lf,async p=>{if(u(!0),p){e(p);try{const g=zt(Oe,"users",p.uid),v=await Ci(g);if(v.exists()){const y=v.data(),b=Array.isArray(y.roles)?y.roles:y.role?[y.role]:[],w=y.sellerCandyId||"";s(b),n(b[0]||""),l(w||"")}else n(""),s([]),l("")}catch{n(""),l("")}}else e(null),n(""),l("");u(!1)});return()=>m()},[]),c)return i.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const h=()=>{const m=a&&a.length?a:r;return on(m,"admin")?i.jsx(xh,{to:"financialDashboard",replace:!0}):on(m,"vendedor_pollo")?i.jsx(xh,{to:"salesV2",replace:!0}):on(m,"supervisor_pollo")?i.jsx(xh,{to:"batches",replace:!0}):on(m,"contador")?i.jsx(xh,{to:"batches",replace:!0}):on(m,"vendedor_ropa")?i.jsx(xh,{to:"salesClothes",replace:!0}):on(m,"vendedor_dulces")?i.jsx(xh,{to:"salesCandies",replace:!0}):i.jsx(xh,{to:"/",replace:!0})};return i.jsx(n0e,{children:i.jsxs(FAe,{children:[i.jsx(bn,{path:"/",element:i.jsx(yye,{})}),i.jsxs(bn,{path:"/admin",element:i.jsx(In,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"],children:f}),children:[i.jsx(bn,{index:!0,element:i.jsx(h,{})}),i.jsx(bn,{path:"bills",element:i.jsx(In,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(Yje,{role:r,roles:a})})}),i.jsx(bn,{path:"salesV2",element:i.jsx(In,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(BV,{user:t})})}),i.jsx(bn,{path:"financialDashboard",element:i.jsx(In,{allowedRoles:["admin","contador","supervisor_pollo"],children:i.jsx(W4e,{})})}),i.jsx(bn,{path:"expenses",element:i.jsx(In,{allowedRoles:["admin"],children:i.jsx(X4e,{})})}),i.jsx(bn,{path:"transactionsPollo",element:i.jsx(In,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(Qst,{role:r,roles:a})})}),i.jsx(bn,{path:"batches",element:i.jsx(In,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(c4e,{role:r,roles:a})})}),i.jsx(bn,{path:"paidBatches",element:i.jsx(In,{allowedRoles:["admin"],children:i.jsx(nPe,{})})}),i.jsx(bn,{path:"fix",element:i.jsx(In,{allowedRoles:["admin"],children:i.jsx(Z4e,{})})}),i.jsx(bn,{path:"transactionclose",element:i.jsx(In,{allowedRoles:["admin"],children:i.jsx(u4e,{})})}),i.jsx(bn,{path:"billhistoric",element:i.jsx(In,{allowedRoles:["admin"],children:i.jsx(Jje,{})})}),i.jsx(bn,{path:"users",element:i.jsx(In,{allowedRoles:["admin"],children:i.jsx(Zje,{})})}),i.jsx(bn,{path:"products",element:i.jsx(In,{allowedRoles:["admin"],children:i.jsx(e4e,{})})}),i.jsx(bn,{path:"customersPollo",element:i.jsx(In,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(FPe,{role:r,roles:a,currentUserEmail:A,sellerPolloId:o})})}),i.jsx(bn,{path:"datacenter",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(SQe,{})})}),i.jsx(bn,{path:"productsCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(P9e,{})})}),i.jsx(bn,{path:"mainordersCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(dQe,{})})}),i.jsx(bn,{path:"productsPricesCandies",element:i.jsx(In,{roles:a,allowedRoles:["admin","vendedor_dulces"],children:i.jsx(Fst,{})})}),i.jsx(bn,{path:"inventoryMainOrderCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(fQe,{})})}),i.jsx(bn,{path:"inventoryCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(R9e,{})})}),i.jsx(bn,{path:"billingsCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(bQe,{})})}),i.jsx(bn,{path:"cashDeliveries",element:i.jsx(In,{allowedRoles:["admin"],children:i.jsx(Pst,{})})}),i.jsx(bn,{path:"customersCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(M9e,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(bn,{path:"salesCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx($9e,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(bn,{path:"expensesCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(G9e,{})})}),i.jsx(bn,{path:"dashboardCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(eQe,{})})}),i.jsx(bn,{path:"transactionCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(W9e,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(bn,{path:"vendorsCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(tQe,{})})}),i.jsx(bn,{path:"productsVendorsCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(iQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(bn,{path:"cierreVentasCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(AQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(bn,{path:"reporteCierresCandies",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(NQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(bn,{path:"consolidatedVendors",element:i.jsx(In,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(vQe,{})})}),i.jsx(bn,{path:"salesClothes",element:i.jsx(In,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(NPe,{})})}),i.jsx(bn,{path:"notebooksInventory",element:i.jsx(In,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(Rst,{})})}),i.jsx(bn,{path:"TransactionsReportClothes",element:i.jsx(In,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(kPe,{})})}),i.jsx(bn,{path:"financialDashboardClothes",element:i.jsx(In,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(EPe,{})})}),i.jsx(bn,{path:"ExpensesClothes",element:i.jsx(In,{allowedRoles:["admin"],children:i.jsx(SPe,{})})}),i.jsx(bn,{path:"inventoryClothesBatches",element:i.jsx(In,{allowedRoles:["admin"],children:i.jsx(oPe,{})})}),i.jsx(bn,{path:"productsClothes",element:i.jsx(In,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(xPe,{})})}),i.jsx(bn,{path:"CustomersClothes",element:i.jsx(In,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(yPe,{})})})]}),i.jsx(bn,{path:"/salesV2",element:i.jsx(In,{allowedRoles:["admin","vendedor_pollo","contador"],children:i.jsx(BV,{user:t})})}),i.jsx(bn,{path:"*",element:i.jsx(xh,{to:"/"})})]})})}vye.then(t=>{console.info("Auth persistence mode:",t)}).catch(()=>{}).finally(()=>{vB.createRoot(document.getElementById("root")).render(i.jsx(So.StrictMode,{children:i.jsx(Hst,{})}))});export{ja as _,Gst as c,dA as g};
