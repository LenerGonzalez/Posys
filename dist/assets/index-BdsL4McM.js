(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var w$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gQ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var FI={exports:{}},rw={},TI={exports:{}},er={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp=Symbol.for("react.element"),wQ=Symbol.for("react.portal"),vQ=Symbol.for("react.fragment"),yQ=Symbol.for("react.strict_mode"),BQ=Symbol.for("react.profiler"),xQ=Symbol.for("react.provider"),bQ=Symbol.for("react.context"),CQ=Symbol.for("react.forward_ref"),EQ=Symbol.for("react.suspense"),_Q=Symbol.for("react.memo"),IQ=Symbol.for("react.lazy"),zb=Symbol.iterator;function NQ(t){return t===null||typeof t!="object"?null:(t=zb&&t[zb]||t["@@iterator"],typeof t=="function"?t:null)}var UI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QI=Object.assign,PI={};function Pd(t,e,r){this.props=t,this.context=e,this.refs=PI,this.updater=r||UI}Pd.prototype.isReactComponent={};Pd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function LI(){}LI.prototype=Pd.prototype;function iB(t,e,r){this.props=t,this.context=e,this.refs=PI,this.updater=r||UI}var aB=iB.prototype=new LI;aB.constructor=iB;QI(aB,Pd.prototype);aB.isPureReactComponent=!0;var Wb=Array.isArray,kI=Object.prototype.hasOwnProperty,oB={current:null},RI={key:!0,ref:!0,__self:!0,__source:!0};function DI(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)kI.call(e,n)&&!RI.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var A=Array(o),c=0;c<o;c++)A[c]=arguments[c+2];s.children=A}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:vp,type:t,key:i,ref:a,props:s,_owner:oB.current}}function SQ(t,e){return{$$typeof:vp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function AB(t){return typeof t=="object"&&t!==null&&t.$$typeof===vp}function FQ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var $b=/\/+/g;function Tv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FQ(""+t.key):e.toString(36)}function yg(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case vp:case wQ:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Tv(a,0):n,Wb(s)?(r="",t!=null&&(r=t.replace($b,"$&/")+"/"),yg(s,e,r,"",function(c){return c})):s!=null&&(AB(s)&&(s=SQ(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace($b,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",Wb(t))for(var o=0;o<t.length;o++){i=t[o];var A=n+Tv(i,o);a+=yg(i,e,r,A,s)}else if(A=NQ(t),typeof A=="function")for(t=A.call(t),o=0;!(i=t.next()).done;)i=i.value,A=n+Tv(i,o++),a+=yg(i,e,r,A,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function mm(t,e,r){if(t==null)return t;var n=[],s=0;return yg(t,n,"","",function(i){return e.call(r,i,s++)}),n}function TQ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ps={current:null},Bg={transition:null},UQ={ReactCurrentDispatcher:Ps,ReactCurrentBatchConfig:Bg,ReactCurrentOwner:oB};function jI(){throw Error("act(...) is not supported in production builds of React.")}er.Children={map:mm,forEach:function(t,e,r){mm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return mm(t,function(){e++}),e},toArray:function(t){return mm(t,function(e){return e})||[]},only:function(t){if(!AB(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};er.Component=Pd;er.Fragment=vQ;er.Profiler=BQ;er.PureComponent=iB;er.StrictMode=yQ;er.Suspense=EQ;er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UQ;er.act=jI;er.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=QI({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=oB.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(A in e)kI.call(e,A)&&!RI.hasOwnProperty(A)&&(n[A]=e[A]===void 0&&o!==void 0?o[A]:e[A])}var A=arguments.length-2;if(A===1)n.children=r;else if(1<A){o=Array(A);for(var c=0;c<A;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:vp,type:t.type,key:s,ref:i,props:n,_owner:a}};er.createContext=function(t){return t={$$typeof:bQ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xQ,_context:t},t.Consumer=t};er.createElement=DI;er.createFactory=function(t){var e=DI.bind(null,t);return e.type=t,e};er.createRef=function(){return{current:null}};er.forwardRef=function(t){return{$$typeof:CQ,render:t}};er.isValidElement=AB;er.lazy=function(t){return{$$typeof:IQ,_payload:{_status:-1,_result:t},_init:TQ}};er.memo=function(t,e){return{$$typeof:_Q,type:t,compare:e===void 0?null:e}};er.startTransition=function(t){var e=Bg.transition;Bg.transition={};try{t()}finally{Bg.transition=e}};er.unstable_act=jI;er.useCallback=function(t,e){return Ps.current.useCallback(t,e)};er.useContext=function(t){return Ps.current.useContext(t)};er.useDebugValue=function(){};er.useDeferredValue=function(t){return Ps.current.useDeferredValue(t)};er.useEffect=function(t,e){return Ps.current.useEffect(t,e)};er.useId=function(){return Ps.current.useId()};er.useImperativeHandle=function(t,e,r){return Ps.current.useImperativeHandle(t,e,r)};er.useInsertionEffect=function(t,e){return Ps.current.useInsertionEffect(t,e)};er.useLayoutEffect=function(t,e){return Ps.current.useLayoutEffect(t,e)};er.useMemo=function(t,e){return Ps.current.useMemo(t,e)};er.useReducer=function(t,e,r){return Ps.current.useReducer(t,e,r)};er.useRef=function(t){return Ps.current.useRef(t)};er.useState=function(t){return Ps.current.useState(t)};er.useSyncExternalStore=function(t,e,r){return Ps.current.useSyncExternalStore(t,e,r)};er.useTransition=function(){return Ps.current.useTransition()};er.version="18.3.1";TI.exports=er;var L=TI.exports;const Co=gQ(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QQ=L,PQ=Symbol.for("react.element"),LQ=Symbol.for("react.fragment"),kQ=Object.prototype.hasOwnProperty,RQ=QQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DQ={key:!0,ref:!0,__self:!0,__source:!0};function OI(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)kQ.call(e,n)&&!DQ.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:PQ,type:t,key:i,ref:a,props:s,_owner:RQ.current}}rw.Fragment=LQ;rw.jsx=OI;rw.jsxs=OI;FI.exports=rw;var l=FI.exports,Xy={},MI={exports:{}},hi={},HI={exports:{}},VI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,ae){var q=W.length;W.push(ae);e:for(;0<q;){var pe=q-1>>>1,R=W[pe];if(0<s(R,ae))W[pe]=ae,W[q]=R,q=pe;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var ae=W[0],q=W.pop();if(q!==ae){W[0]=q;e:for(var pe=0,R=W.length,G=R>>>1;pe<G;){var te=2*(pe+1)-1,J=W[te],le=te+1,ne=W[le];if(0>s(J,q))le<R&&0>s(ne,J)?(W[pe]=ne,W[le]=q,pe=le):(W[pe]=J,W[te]=q,pe=te);else if(le<R&&0>s(ne,q))W[pe]=ne,W[le]=q,pe=le;else break e}}return ae}function s(W,ae){var q=W.sortIndex-ae.sortIndex;return q!==0?q:W.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var A=[],c=[],d=1,f=null,m=3,g=!1,B=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(W){for(var ae=r(c);ae!==null;){if(ae.callback===null)n(c);else if(ae.startTime<=W)n(c),ae.sortIndex=ae.expirationTime,e(A,ae);else break;ae=r(c)}}function D(W){if(b=!1,I(W),!B)if(r(A)!==null)B=!0,ie(H);else{var ae=r(c);ae!==null&&z(D,ae.startTime-W)}}function H(W,ae){B=!1,b&&(b=!1,w(E),E=-1),g=!0;var q=m;try{for(I(ae),f=r(A);f!==null&&(!(f.expirationTime>ae)||W&&!S());){var pe=f.callback;if(typeof pe=="function"){f.callback=null,m=f.priorityLevel;var R=pe(f.expirationTime<=ae);ae=t.unstable_now(),typeof R=="function"?f.callback=R:f===r(A)&&n(A),I(ae)}else n(A);f=r(A)}if(f!==null)var G=!0;else{var te=r(c);te!==null&&z(D,te.startTime-ae),G=!1}return G}finally{f=null,m=q,g=!1}}var k=!1,T=null,E=-1,Q=5,j=-1;function S(){return!(t.unstable_now()-j<Q)}function N(){if(T!==null){var W=t.unstable_now();j=W;var ae=!0;try{ae=T(!0,W)}finally{ae?U():(k=!1,T=null)}}else k=!1}var U;if(typeof y=="function")U=function(){y(N)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ue=Z.port2;Z.port1.onmessage=N,U=function(){ue.postMessage(null)}}else U=function(){_(N,0)};function ie(W){T=W,k||(k=!0,U())}function z(W,ae){E=_(function(){W(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){B||g||(B=!0,ie(H))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(A)},t.unstable_next=function(W){switch(m){case 1:case 2:case 3:var ae=3;break;default:ae=m}var q=m;m=ae;try{return W()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,ae){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var q=m;m=W;try{return ae()}finally{m=q}},t.unstable_scheduleCallback=function(W,ae,q){var pe=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?pe+q:pe):q=pe,W){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=q+R,W={id:d++,callback:ae,priorityLevel:W,startTime:q,expirationTime:R,sortIndex:-1},q>pe?(W.sortIndex=q,e(c,W),r(A)===null&&W===r(c)&&(b?(w(E),E=-1):b=!0,z(D,q-pe))):(W.sortIndex=R,e(A,W),B||g||(B=!0,ie(H))),W},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(W){var ae=m;return function(){var q=m;m=ae;try{return W.apply(this,arguments)}finally{m=q}}}})(VI);HI.exports=VI;var jQ=HI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OQ=L,li=jQ;function $e(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KI=new Set,Uf={};function Dc(t,e){md(t,e),md(t+"Capture",e)}function md(t,e){for(Uf[t]=e,t=0;t<e.length;t++)KI.add(e[t])}var Uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jy=Object.prototype.hasOwnProperty,MQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xb={},Jb={};function HQ(t){return Jy.call(Jb,t)?!0:Jy.call(Xb,t)?!1:MQ.test(t)?Jb[t]=!0:(Xb[t]=!0,!1)}function VQ(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function KQ(t,e,r,n){if(e===null||typeof e>"u"||VQ(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ls(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var As={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){As[t]=new Ls(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];As[e]=new Ls(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){As[t]=new Ls(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){As[t]=new Ls(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){As[t]=new Ls(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){As[t]=new Ls(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){As[t]=new Ls(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){As[t]=new Ls(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){As[t]=new Ls(t,5,!1,t.toLowerCase(),null,!1,!1)});var lB=/[\-:]([a-z])/g;function cB(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lB,cB);As[e]=new Ls(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lB,cB);As[e]=new Ls(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lB,cB);As[e]=new Ls(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){As[t]=new Ls(t,1,!1,t.toLowerCase(),null,!1,!1)});As.xlinkHref=new Ls("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){As[t]=new Ls(t,1,!1,t.toLowerCase(),null,!0,!0)});function uB(t,e,r,n){var s=As.hasOwnProperty(e)?As[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(KQ(e,r,s,n)&&(r=null),n||s===null?HQ(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Mo=OQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gm=Symbol.for("react.element"),qu=Symbol.for("react.portal"),Gu=Symbol.for("react.fragment"),dB=Symbol.for("react.strict_mode"),Yy=Symbol.for("react.profiler"),qI=Symbol.for("react.provider"),GI=Symbol.for("react.context"),hB=Symbol.for("react.forward_ref"),Zy=Symbol.for("react.suspense"),e1=Symbol.for("react.suspense_list"),fB=Symbol.for("react.memo"),NA=Symbol.for("react.lazy"),zI=Symbol.for("react.offscreen"),Yb=Symbol.iterator;function mh(t){return t===null||typeof t!="object"?null:(t=Yb&&t[Yb]||t["@@iterator"],typeof t=="function"?t:null)}var en=Object.assign,Uv;function Hh(t){if(Uv===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Uv=e&&e[1]||""}return`
`+Uv+t}var Qv=!1;function Pv(t,e){if(!t||Qv)return"";Qv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var A=`
`+s[a].replace(" at new "," at ");return t.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",t.displayName)),A}while(1<=a&&0<=o);break}}}finally{Qv=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Hh(t):""}function qQ(t){switch(t.tag){case 5:return Hh(t.type);case 16:return Hh("Lazy");case 13:return Hh("Suspense");case 19:return Hh("SuspenseList");case 0:case 2:case 15:return t=Pv(t.type,!1),t;case 11:return t=Pv(t.type.render,!1),t;case 1:return t=Pv(t.type,!0),t;default:return""}}function t1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gu:return"Fragment";case qu:return"Portal";case Yy:return"Profiler";case dB:return"StrictMode";case Zy:return"Suspense";case e1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GI:return(t.displayName||"Context")+".Consumer";case qI:return(t._context.displayName||"Context")+".Provider";case hB:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fB:return e=t.displayName||null,e!==null?e:t1(t.type)||"Memo";case NA:e=t._payload,t=t._init;try{return t1(t(e))}catch{}}return null}function GQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return t1(e);case 8:return e===dB?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ll(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function WI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zQ(t){var e=WI(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wm(t){t._valueTracker||(t._valueTracker=zQ(t))}function $I(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=WI(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Jg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function r1(t,e){var r=e.checked;return en({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Zb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ll(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function XI(t,e){e=e.checked,e!=null&&uB(t,"checked",e,!1)}function n1(t,e){XI(t,e);var r=ll(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?s1(t,e.type,r):e.hasOwnProperty("defaultValue")&&s1(t,e.type,ll(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function eC(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function s1(t,e,r){(e!=="number"||Jg(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Vh=Array.isArray;function id(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ll(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function i1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($e(91));return en({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tC(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error($e(92));if(Vh(r)){if(1<r.length)throw Error($e(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ll(r)}}function JI(t,e){var r=ll(e.value),n=ll(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function rC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function a1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vm,ZI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vm=vm||document.createElement("div"),vm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var af={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WQ=["Webkit","ms","Moz","O"];Object.keys(af).forEach(function(t){WQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),af[e]=af[t]})});function eN(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||af.hasOwnProperty(t)&&af[t]?(""+e).trim():e+"px"}function tN(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=eN(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var $Q=en({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function o1(t,e){if(e){if($Q[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($e(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($e(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($e(61))}if(e.style!=null&&typeof e.style!="object")throw Error($e(62))}}function A1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l1=null;function pB(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var c1=null,ad=null,od=null;function nC(t){if(t=xp(t)){if(typeof c1!="function")throw Error($e(280));var e=t.stateNode;e&&(e=ow(e),c1(t.stateNode,t.type,e))}}function rN(t){ad?od?od.push(t):od=[t]:ad=t}function nN(){if(ad){var t=ad,e=od;if(od=ad=null,nC(t),e)for(t=0;t<e.length;t++)nC(e[t])}}function sN(t,e){return t(e)}function iN(){}var Lv=!1;function aN(t,e,r){if(Lv)return t(e,r);Lv=!0;try{return sN(t,e,r)}finally{Lv=!1,(ad!==null||od!==null)&&(iN(),nN())}}function Pf(t,e){var r=t.stateNode;if(r===null)return null;var n=ow(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error($e(231,e,typeof r));return r}var u1=!1;if(Uo)try{var gh={};Object.defineProperty(gh,"passive",{get:function(){u1=!0}}),window.addEventListener("test",gh,gh),window.removeEventListener("test",gh,gh)}catch{u1=!1}function XQ(t,e,r,n,s,i,a,o,A){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var of=!1,Yg=null,Zg=!1,d1=null,JQ={onError:function(t){of=!0,Yg=t}};function YQ(t,e,r,n,s,i,a,o,A){of=!1,Yg=null,XQ.apply(JQ,arguments)}function ZQ(t,e,r,n,s,i,a,o,A){if(YQ.apply(this,arguments),of){if(of){var c=Yg;of=!1,Yg=null}else throw Error($e(198));Zg||(Zg=!0,d1=c)}}function jc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function oN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sC(t){if(jc(t)!==t)throw Error($e(188))}function eP(t){var e=t.alternate;if(!e){if(e=jc(t),e===null)throw Error($e(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return sC(s),t;if(i===n)return sC(s),e;i=i.sibling}throw Error($e(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error($e(189))}}if(r.alternate!==n)throw Error($e(190))}if(r.tag!==3)throw Error($e(188));return r.stateNode.current===r?t:e}function AN(t){return t=eP(t),t!==null?lN(t):null}function lN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lN(t);if(e!==null)return e;t=t.sibling}return null}var cN=li.unstable_scheduleCallback,iC=li.unstable_cancelCallback,tP=li.unstable_shouldYield,rP=li.unstable_requestPaint,mn=li.unstable_now,nP=li.unstable_getCurrentPriorityLevel,mB=li.unstable_ImmediatePriority,uN=li.unstable_UserBlockingPriority,e0=li.unstable_NormalPriority,sP=li.unstable_LowPriority,dN=li.unstable_IdlePriority,nw=null,La=null;function iP(t){if(La&&typeof La.onCommitFiberRoot=="function")try{La.onCommitFiberRoot(nw,t,void 0,(t.current.flags&128)===128)}catch{}}var ta=Math.clz32?Math.clz32:AP,aP=Math.log,oP=Math.LN2;function AP(t){return t>>>=0,t===0?32:31-(aP(t)/oP|0)|0}var ym=64,Bm=4194304;function Kh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function t0(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=Kh(o):(i&=a,i!==0&&(n=Kh(i)))}else a=r&~s,a!==0?n=Kh(a):i!==0&&(n=Kh(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ta(e),s=1<<r,n|=t[r],e&=~s;return n}function lP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cP(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-ta(i),o=1<<a,A=s[a];A===-1?(!(o&r)||o&n)&&(s[a]=lP(o,e)):A<=e&&(t.expiredLanes|=o),i&=~o}}function h1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hN(){var t=ym;return ym<<=1,!(ym&4194240)&&(ym=64),t}function kv(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function yp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ta(e),t[e]=r}function uP(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-ta(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function gB(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ta(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var br=0;function fN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pN,wB,mN,gN,wN,f1=!1,xm=[],zA=null,WA=null,$A=null,Lf=new Map,kf=new Map,TA=[],dP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aC(t,e){switch(t){case"focusin":case"focusout":zA=null;break;case"dragenter":case"dragleave":WA=null;break;case"mouseover":case"mouseout":$A=null;break;case"pointerover":case"pointerout":Lf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kf.delete(e.pointerId)}}function wh(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=xp(e),e!==null&&wB(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function hP(t,e,r,n,s){switch(e){case"focusin":return zA=wh(zA,t,e,r,n,s),!0;case"dragenter":return WA=wh(WA,t,e,r,n,s),!0;case"mouseover":return $A=wh($A,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Lf.set(i,wh(Lf.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,kf.set(i,wh(kf.get(i)||null,t,e,r,n,s)),!0}return!1}function vN(t){var e=lc(t.target);if(e!==null){var r=jc(e);if(r!==null){if(e=r.tag,e===13){if(e=oN(r),e!==null){t.blockedOn=e,wN(t.priority,function(){mN(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=p1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);l1=n,r.target.dispatchEvent(n),l1=null}else return e=xp(r),e!==null&&wB(e),t.blockedOn=r,!1;e.shift()}return!0}function oC(t,e,r){xg(t)&&r.delete(e)}function fP(){f1=!1,zA!==null&&xg(zA)&&(zA=null),WA!==null&&xg(WA)&&(WA=null),$A!==null&&xg($A)&&($A=null),Lf.forEach(oC),kf.forEach(oC)}function vh(t,e){t.blockedOn===e&&(t.blockedOn=null,f1||(f1=!0,li.unstable_scheduleCallback(li.unstable_NormalPriority,fP)))}function Rf(t){function e(s){return vh(s,t)}if(0<xm.length){vh(xm[0],t);for(var r=1;r<xm.length;r++){var n=xm[r];n.blockedOn===t&&(n.blockedOn=null)}}for(zA!==null&&vh(zA,t),WA!==null&&vh(WA,t),$A!==null&&vh($A,t),Lf.forEach(e),kf.forEach(e),r=0;r<TA.length;r++)n=TA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<TA.length&&(r=TA[0],r.blockedOn===null);)vN(r),r.blockedOn===null&&TA.shift()}var Ad=Mo.ReactCurrentBatchConfig,r0=!0;function pP(t,e,r,n){var s=br,i=Ad.transition;Ad.transition=null;try{br=1,vB(t,e,r,n)}finally{br=s,Ad.transition=i}}function mP(t,e,r,n){var s=br,i=Ad.transition;Ad.transition=null;try{br=4,vB(t,e,r,n)}finally{br=s,Ad.transition=i}}function vB(t,e,r,n){if(r0){var s=p1(t,e,r,n);if(s===null)Gv(t,e,n,n0,r),aC(t,n);else if(hP(s,t,e,r,n))n.stopPropagation();else if(aC(t,n),e&4&&-1<dP.indexOf(t)){for(;s!==null;){var i=xp(s);if(i!==null&&pN(i),i=p1(t,e,r,n),i===null&&Gv(t,e,n,n0,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Gv(t,e,n,null,r)}}var n0=null;function p1(t,e,r,n){if(n0=null,t=pB(n),t=lc(t),t!==null)if(e=jc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=oN(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return n0=t,null}function yN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nP()){case mB:return 1;case uN:return 4;case e0:case sP:return 16;case dN:return 536870912;default:return 16}default:return 16}}var OA=null,yB=null,bg=null;function BN(){if(bg)return bg;var t,e=yB,r=e.length,n,s="value"in OA?OA.value:OA.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return bg=s.slice(t,1<n?1-n:void 0)}function Cg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bm(){return!0}function AC(){return!1}function fi(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bm:AC,this.isPropagationStopped=AC,this}return en(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bm)},persist:function(){},isPersistent:bm}),e}var Ld={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},BB=fi(Ld),Bp=en({},Ld,{view:0,detail:0}),gP=fi(Bp),Rv,Dv,yh,sw=en({},Bp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xB,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yh&&(yh&&t.type==="mousemove"?(Rv=t.screenX-yh.screenX,Dv=t.screenY-yh.screenY):Dv=Rv=0,yh=t),Rv)},movementY:function(t){return"movementY"in t?t.movementY:Dv}}),lC=fi(sw),wP=en({},sw,{dataTransfer:0}),vP=fi(wP),yP=en({},Bp,{relatedTarget:0}),jv=fi(yP),BP=en({},Ld,{animationName:0,elapsedTime:0,pseudoElement:0}),xP=fi(BP),bP=en({},Ld,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),CP=fi(bP),EP=en({},Ld,{data:0}),cC=fi(EP),_P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NP[t])?!!e[t]:!1}function xB(){return SP}var FP=en({},Bp,{key:function(t){if(t.key){var e=_P[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xB,charCode:function(t){return t.type==="keypress"?Cg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TP=fi(FP),UP=en({},sw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uC=fi(UP),QP=en({},Bp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xB}),PP=fi(QP),LP=en({},Ld,{propertyName:0,elapsedTime:0,pseudoElement:0}),kP=fi(LP),RP=en({},sw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DP=fi(RP),jP=[9,13,27,32],bB=Uo&&"CompositionEvent"in window,Af=null;Uo&&"documentMode"in document&&(Af=document.documentMode);var OP=Uo&&"TextEvent"in window&&!Af,xN=Uo&&(!bB||Af&&8<Af&&11>=Af),dC=" ",hC=!1;function bN(t,e){switch(t){case"keyup":return jP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zu=!1;function MP(t,e){switch(t){case"compositionend":return CN(e);case"keypress":return e.which!==32?null:(hC=!0,dC);case"textInput":return t=e.data,t===dC&&hC?null:t;default:return null}}function HP(t,e){if(zu)return t==="compositionend"||!bB&&bN(t,e)?(t=BN(),bg=yB=OA=null,zu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xN&&e.locale!=="ko"?null:e.data;default:return null}}var VP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VP[t.type]:e==="textarea"}function EN(t,e,r,n){rN(n),e=s0(e,"onChange"),0<e.length&&(r=new BB("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var lf=null,Df=null;function KP(t){kN(t,0)}function iw(t){var e=Xu(t);if($I(e))return t}function qP(t,e){if(t==="change")return e}var _N=!1;if(Uo){var Ov;if(Uo){var Mv="oninput"in document;if(!Mv){var pC=document.createElement("div");pC.setAttribute("oninput","return;"),Mv=typeof pC.oninput=="function"}Ov=Mv}else Ov=!1;_N=Ov&&(!document.documentMode||9<document.documentMode)}function mC(){lf&&(lf.detachEvent("onpropertychange",IN),Df=lf=null)}function IN(t){if(t.propertyName==="value"&&iw(Df)){var e=[];EN(e,Df,t,pB(t)),aN(KP,e)}}function GP(t,e,r){t==="focusin"?(mC(),lf=e,Df=r,lf.attachEvent("onpropertychange",IN)):t==="focusout"&&mC()}function zP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iw(Df)}function WP(t,e){if(t==="click")return iw(e)}function $P(t,e){if(t==="input"||t==="change")return iw(e)}function XP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sa=typeof Object.is=="function"?Object.is:XP;function jf(t,e){if(sa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Jy.call(e,s)||!sa(t[s],e[s]))return!1}return!0}function gC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wC(t,e){var r=gC(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=gC(r)}}function NN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SN(){for(var t=window,e=Jg();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Jg(t.document)}return e}function CB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JP(t){var e=SN(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&NN(r.ownerDocument.documentElement,r)){if(n!==null&&CB(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=wC(r,i);var a=wC(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YP=Uo&&"documentMode"in document&&11>=document.documentMode,Wu=null,m1=null,cf=null,g1=!1;function vC(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;g1||Wu==null||Wu!==Jg(n)||(n=Wu,"selectionStart"in n&&CB(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),cf&&jf(cf,n)||(cf=n,n=s0(m1,"onSelect"),0<n.length&&(e=new BB("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Wu)))}function Cm(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var $u={animationend:Cm("Animation","AnimationEnd"),animationiteration:Cm("Animation","AnimationIteration"),animationstart:Cm("Animation","AnimationStart"),transitionend:Cm("Transition","TransitionEnd")},Hv={},FN={};Uo&&(FN=document.createElement("div").style,"AnimationEvent"in window||(delete $u.animationend.animation,delete $u.animationiteration.animation,delete $u.animationstart.animation),"TransitionEvent"in window||delete $u.transitionend.transition);function aw(t){if(Hv[t])return Hv[t];if(!$u[t])return t;var e=$u[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in FN)return Hv[t]=e[r];return t}var TN=aw("animationend"),UN=aw("animationiteration"),QN=aw("animationstart"),PN=aw("transitionend"),LN=new Map,yC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yl(t,e){LN.set(t,e),Dc(e,[t])}for(var Vv=0;Vv<yC.length;Vv++){var Kv=yC[Vv],ZP=Kv.toLowerCase(),eL=Kv[0].toUpperCase()+Kv.slice(1);yl(ZP,"on"+eL)}yl(TN,"onAnimationEnd");yl(UN,"onAnimationIteration");yl(QN,"onAnimationStart");yl("dblclick","onDoubleClick");yl("focusin","onFocus");yl("focusout","onBlur");yl(PN,"onTransitionEnd");md("onMouseEnter",["mouseout","mouseover"]);md("onMouseLeave",["mouseout","mouseover"]);md("onPointerEnter",["pointerout","pointerover"]);md("onPointerLeave",["pointerout","pointerover"]);Dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tL=new Set("cancel close invalid load scroll toggle".split(" ").concat(qh));function BC(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,ZQ(n,e,void 0,t),t.currentTarget=null}function kN(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],A=o.instance,c=o.currentTarget;if(o=o.listener,A!==i&&s.isPropagationStopped())break e;BC(s,o,c),i=A}else for(a=0;a<n.length;a++){if(o=n[a],A=o.instance,c=o.currentTarget,o=o.listener,A!==i&&s.isPropagationStopped())break e;BC(s,o,c),i=A}}}if(Zg)throw t=d1,Zg=!1,d1=null,t}function kr(t,e){var r=e[x1];r===void 0&&(r=e[x1]=new Set);var n=t+"__bubble";r.has(n)||(RN(e,t,2,!1),r.add(n))}function qv(t,e,r){var n=0;e&&(n|=4),RN(r,t,n,e)}var Em="_reactListening"+Math.random().toString(36).slice(2);function Of(t){if(!t[Em]){t[Em]=!0,KI.forEach(function(r){r!=="selectionchange"&&(tL.has(r)||qv(r,!1,t),qv(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Em]||(e[Em]=!0,qv("selectionchange",!1,e))}}function RN(t,e,r,n){switch(yN(e)){case 1:var s=pP;break;case 4:s=mP;break;default:s=vB}r=s.bind(null,e,r,t),s=void 0,!u1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Gv(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var A=a.tag;if((A===3||A===4)&&(A=a.stateNode.containerInfo,A===s||A.nodeType===8&&A.parentNode===s))return;a=a.return}for(;o!==null;){if(a=lc(o),a===null)return;if(A=a.tag,A===5||A===6){n=i=a;continue e}o=o.parentNode}}n=n.return}aN(function(){var c=i,d=pB(r),f=[];e:{var m=LN.get(t);if(m!==void 0){var g=BB,B=t;switch(t){case"keypress":if(Cg(r)===0)break e;case"keydown":case"keyup":g=TP;break;case"focusin":B="focus",g=jv;break;case"focusout":B="blur",g=jv;break;case"beforeblur":case"afterblur":g=jv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=lC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=vP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=PP;break;case TN:case UN:case QN:g=xP;break;case PN:g=kP;break;case"scroll":g=gP;break;case"wheel":g=DP;break;case"copy":case"cut":case"paste":g=CP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=uC}var b=(e&4)!==0,_=!b&&t==="scroll",w=b?m!==null?m+"Capture":null:m;b=[];for(var y=c,I;y!==null;){I=y;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,w!==null&&(D=Pf(y,w),D!=null&&b.push(Mf(y,D,I)))),_)break;y=y.return}0<b.length&&(m=new g(m,B,null,r,d),f.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&r!==l1&&(B=r.relatedTarget||r.fromElement)&&(lc(B)||B[Qo]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(B=r.relatedTarget||r.toElement,g=c,B=B?lc(B):null,B!==null&&(_=jc(B),B!==_||B.tag!==5&&B.tag!==6)&&(B=null)):(g=null,B=c),g!==B)){if(b=lC,D="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(b=uC,D="onPointerLeave",w="onPointerEnter",y="pointer"),_=g==null?m:Xu(g),I=B==null?m:Xu(B),m=new b(D,y+"leave",g,r,d),m.target=_,m.relatedTarget=I,D=null,lc(d)===c&&(b=new b(w,y+"enter",B,r,d),b.target=I,b.relatedTarget=_,D=b),_=D,g&&B)t:{for(b=g,w=B,y=0,I=b;I;I=gu(I))y++;for(I=0,D=w;D;D=gu(D))I++;for(;0<y-I;)b=gu(b),y--;for(;0<I-y;)w=gu(w),I--;for(;y--;){if(b===w||w!==null&&b===w.alternate)break t;b=gu(b),w=gu(w)}b=null}else b=null;g!==null&&xC(f,m,g,b,!1),B!==null&&_!==null&&xC(f,_,B,b,!0)}}e:{if(m=c?Xu(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var H=qP;else if(fC(m))if(_N)H=$P;else{H=zP;var k=GP}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(H=WP);if(H&&(H=H(t,c))){EN(f,H,r,d);break e}k&&k(t,m,c),t==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&s1(m,"number",m.value)}switch(k=c?Xu(c):window,t){case"focusin":(fC(k)||k.contentEditable==="true")&&(Wu=k,m1=c,cf=null);break;case"focusout":cf=m1=Wu=null;break;case"mousedown":g1=!0;break;case"contextmenu":case"mouseup":case"dragend":g1=!1,vC(f,r,d);break;case"selectionchange":if(YP)break;case"keydown":case"keyup":vC(f,r,d)}var T;if(bB)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else zu?bN(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(xN&&r.locale!=="ko"&&(zu||E!=="onCompositionStart"?E==="onCompositionEnd"&&zu&&(T=BN()):(OA=d,yB="value"in OA?OA.value:OA.textContent,zu=!0)),k=s0(c,E),0<k.length&&(E=new cC(E,t,null,r,d),f.push({event:E,listeners:k}),T?E.data=T:(T=CN(r),T!==null&&(E.data=T)))),(T=OP?MP(t,r):HP(t,r))&&(c=s0(c,"onBeforeInput"),0<c.length&&(d=new cC("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:c}),d.data=T))}kN(f,e)})}function Mf(t,e,r){return{instance:t,listener:e,currentTarget:r}}function s0(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pf(t,r),i!=null&&n.unshift(Mf(t,i,s)),i=Pf(t,e),i!=null&&n.push(Mf(t,i,s))),t=t.return}return n}function gu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xC(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,A=o.alternate,c=o.stateNode;if(A!==null&&A===n)break;o.tag===5&&c!==null&&(o=c,s?(A=Pf(r,i),A!=null&&a.unshift(Mf(r,A,o))):s||(A=Pf(r,i),A!=null&&a.push(Mf(r,A,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var rL=/\r\n?/g,nL=/\u0000|\uFFFD/g;function bC(t){return(typeof t=="string"?t:""+t).replace(rL,`
`).replace(nL,"")}function _m(t,e,r){if(e=bC(e),bC(t)!==e&&r)throw Error($e(425))}function i0(){}var w1=null,v1=null;function y1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var B1=typeof setTimeout=="function"?setTimeout:void 0,sL=typeof clearTimeout=="function"?clearTimeout:void 0,CC=typeof Promise=="function"?Promise:void 0,iL=typeof queueMicrotask=="function"?queueMicrotask:typeof CC<"u"?function(t){return CC.resolve(null).then(t).catch(aL)}:B1;function aL(t){setTimeout(function(){throw t})}function zv(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Rf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Rf(e)}function XA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function EC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var kd=Math.random().toString(36).slice(2),Fa="__reactFiber$"+kd,Hf="__reactProps$"+kd,Qo="__reactContainer$"+kd,x1="__reactEvents$"+kd,oL="__reactListeners$"+kd,AL="__reactHandles$"+kd;function lc(t){var e=t[Fa];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Qo]||r[Fa]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=EC(t);t!==null;){if(r=t[Fa])return r;t=EC(t)}return e}t=r,r=t.parentNode}return null}function xp(t){return t=t[Fa]||t[Qo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($e(33))}function ow(t){return t[Hf]||null}var b1=[],Ju=-1;function Bl(t){return{current:t}}function jr(t){0>Ju||(t.current=b1[Ju],b1[Ju]=null,Ju--)}function Qr(t,e){Ju++,b1[Ju]=t.current,t.current=e}var cl={},Bs=Bl(cl),zs=Bl(!1),Cc=cl;function gd(t,e){var r=t.type.contextTypes;if(!r)return cl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ws(t){return t=t.childContextTypes,t!=null}function a0(){jr(zs),jr(Bs)}function _C(t,e,r){if(Bs.current!==cl)throw Error($e(168));Qr(Bs,e),Qr(zs,r)}function DN(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error($e(108,GQ(t)||"Unknown",s));return en({},r,n)}function o0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cl,Cc=Bs.current,Qr(Bs,t),Qr(zs,zs.current),!0}function IC(t,e,r){var n=t.stateNode;if(!n)throw Error($e(169));r?(t=DN(t,e,Cc),n.__reactInternalMemoizedMergedChildContext=t,jr(zs),jr(Bs),Qr(Bs,t)):jr(zs),Qr(zs,r)}var go=null,Aw=!1,Wv=!1;function jN(t){go===null?go=[t]:go.push(t)}function lL(t){Aw=!0,jN(t)}function xl(){if(!Wv&&go!==null){Wv=!0;var t=0,e=br;try{var r=go;for(br=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}go=null,Aw=!1}catch(s){throw go!==null&&(go=go.slice(t+1)),cN(mB,xl),s}finally{br=e,Wv=!1}}return null}var Yu=[],Zu=0,A0=null,l0=0,_i=[],Ii=0,Ec=null,wo=1,vo="";function Yl(t,e){Yu[Zu++]=l0,Yu[Zu++]=A0,A0=t,l0=e}function ON(t,e,r){_i[Ii++]=wo,_i[Ii++]=vo,_i[Ii++]=Ec,Ec=t;var n=wo;t=vo;var s=32-ta(n)-1;n&=~(1<<s),r+=1;var i=32-ta(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,wo=1<<32-ta(e)+s|r<<s|n,vo=i+t}else wo=1<<i|r<<s|n,vo=t}function EB(t){t.return!==null&&(Yl(t,1),ON(t,1,0))}function _B(t){for(;t===A0;)A0=Yu[--Zu],Yu[Zu]=null,l0=Yu[--Zu],Yu[Zu]=null;for(;t===Ec;)Ec=_i[--Ii],_i[Ii]=null,vo=_i[--Ii],_i[Ii]=null,wo=_i[--Ii],_i[Ii]=null}var Ai=null,ii=null,Vr=!1,ea=null;function MN(t,e){var r=Si(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function NC(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ai=t,ii=XA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ai=t,ii=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ec!==null?{id:wo,overflow:vo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Si(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ai=t,ii=null,!0):!1;default:return!1}}function C1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function E1(t){if(Vr){var e=ii;if(e){var r=e;if(!NC(t,e)){if(C1(t))throw Error($e(418));e=XA(r.nextSibling);var n=Ai;e&&NC(t,e)?MN(n,r):(t.flags=t.flags&-4097|2,Vr=!1,Ai=t)}}else{if(C1(t))throw Error($e(418));t.flags=t.flags&-4097|2,Vr=!1,Ai=t}}}function SC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ai=t}function Im(t){if(t!==Ai)return!1;if(!Vr)return SC(t),Vr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!y1(t.type,t.memoizedProps)),e&&(e=ii)){if(C1(t))throw HN(),Error($e(418));for(;e;)MN(t,e),e=XA(e.nextSibling)}if(SC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($e(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ii=XA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ii=null}}else ii=Ai?XA(t.stateNode.nextSibling):null;return!0}function HN(){for(var t=ii;t;)t=XA(t.nextSibling)}function wd(){ii=Ai=null,Vr=!1}function IB(t){ea===null?ea=[t]:ea.push(t)}var cL=Mo.ReactCurrentBatchConfig;function Bh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error($e(309));var n=r.stateNode}if(!n)throw Error($e(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error($e(284));if(!r._owner)throw Error($e(290,t))}return t}function Nm(t,e){throw t=Object.prototype.toString.call(e),Error($e(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function FC(t){var e=t._init;return e(t._payload)}function VN(t){function e(w,y){if(t){var I=w.deletions;I===null?(w.deletions=[y],w.flags|=16):I.push(y)}}function r(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function n(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function s(w,y){return w=el(w,y),w.index=0,w.sibling=null,w}function i(w,y,I){return w.index=I,t?(I=w.alternate,I!==null?(I=I.index,I<y?(w.flags|=2,y):I):(w.flags|=2,y)):(w.flags|=1048576,y)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,y,I,D){return y===null||y.tag!==6?(y=ty(I,w.mode,D),y.return=w,y):(y=s(y,I),y.return=w,y)}function A(w,y,I,D){var H=I.type;return H===Gu?d(w,y,I.props.children,D,I.key):y!==null&&(y.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===NA&&FC(H)===y.type)?(D=s(y,I.props),D.ref=Bh(w,y,I),D.return=w,D):(D=Tg(I.type,I.key,I.props,null,w.mode,D),D.ref=Bh(w,y,I),D.return=w,D)}function c(w,y,I,D){return y===null||y.tag!==4||y.stateNode.containerInfo!==I.containerInfo||y.stateNode.implementation!==I.implementation?(y=ry(I,w.mode,D),y.return=w,y):(y=s(y,I.children||[]),y.return=w,y)}function d(w,y,I,D,H){return y===null||y.tag!==7?(y=mc(I,w.mode,D,H),y.return=w,y):(y=s(y,I),y.return=w,y)}function f(w,y,I){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ty(""+y,w.mode,I),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case gm:return I=Tg(y.type,y.key,y.props,null,w.mode,I),I.ref=Bh(w,null,y),I.return=w,I;case qu:return y=ry(y,w.mode,I),y.return=w,y;case NA:var D=y._init;return f(w,D(y._payload),I)}if(Vh(y)||mh(y))return y=mc(y,w.mode,I,null),y.return=w,y;Nm(w,y)}return null}function m(w,y,I,D){var H=y!==null?y.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return H!==null?null:o(w,y,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case gm:return I.key===H?A(w,y,I,D):null;case qu:return I.key===H?c(w,y,I,D):null;case NA:return H=I._init,m(w,y,H(I._payload),D)}if(Vh(I)||mh(I))return H!==null?null:d(w,y,I,D,null);Nm(w,I)}return null}function g(w,y,I,D,H){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(I)||null,o(y,w,""+D,H);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case gm:return w=w.get(D.key===null?I:D.key)||null,A(y,w,D,H);case qu:return w=w.get(D.key===null?I:D.key)||null,c(y,w,D,H);case NA:var k=D._init;return g(w,y,I,k(D._payload),H)}if(Vh(D)||mh(D))return w=w.get(I)||null,d(y,w,D,H,null);Nm(y,D)}return null}function B(w,y,I,D){for(var H=null,k=null,T=y,E=y=0,Q=null;T!==null&&E<I.length;E++){T.index>E?(Q=T,T=null):Q=T.sibling;var j=m(w,T,I[E],D);if(j===null){T===null&&(T=Q);break}t&&T&&j.alternate===null&&e(w,T),y=i(j,y,E),k===null?H=j:k.sibling=j,k=j,T=Q}if(E===I.length)return r(w,T),Vr&&Yl(w,E),H;if(T===null){for(;E<I.length;E++)T=f(w,I[E],D),T!==null&&(y=i(T,y,E),k===null?H=T:k.sibling=T,k=T);return Vr&&Yl(w,E),H}for(T=n(w,T);E<I.length;E++)Q=g(T,w,E,I[E],D),Q!==null&&(t&&Q.alternate!==null&&T.delete(Q.key===null?E:Q.key),y=i(Q,y,E),k===null?H=Q:k.sibling=Q,k=Q);return t&&T.forEach(function(S){return e(w,S)}),Vr&&Yl(w,E),H}function b(w,y,I,D){var H=mh(I);if(typeof H!="function")throw Error($e(150));if(I=H.call(I),I==null)throw Error($e(151));for(var k=H=null,T=y,E=y=0,Q=null,j=I.next();T!==null&&!j.done;E++,j=I.next()){T.index>E?(Q=T,T=null):Q=T.sibling;var S=m(w,T,j.value,D);if(S===null){T===null&&(T=Q);break}t&&T&&S.alternate===null&&e(w,T),y=i(S,y,E),k===null?H=S:k.sibling=S,k=S,T=Q}if(j.done)return r(w,T),Vr&&Yl(w,E),H;if(T===null){for(;!j.done;E++,j=I.next())j=f(w,j.value,D),j!==null&&(y=i(j,y,E),k===null?H=j:k.sibling=j,k=j);return Vr&&Yl(w,E),H}for(T=n(w,T);!j.done;E++,j=I.next())j=g(T,w,E,j.value,D),j!==null&&(t&&j.alternate!==null&&T.delete(j.key===null?E:j.key),y=i(j,y,E),k===null?H=j:k.sibling=j,k=j);return t&&T.forEach(function(N){return e(w,N)}),Vr&&Yl(w,E),H}function _(w,y,I,D){if(typeof I=="object"&&I!==null&&I.type===Gu&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case gm:e:{for(var H=I.key,k=y;k!==null;){if(k.key===H){if(H=I.type,H===Gu){if(k.tag===7){r(w,k.sibling),y=s(k,I.props.children),y.return=w,w=y;break e}}else if(k.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===NA&&FC(H)===k.type){r(w,k.sibling),y=s(k,I.props),y.ref=Bh(w,k,I),y.return=w,w=y;break e}r(w,k);break}else e(w,k);k=k.sibling}I.type===Gu?(y=mc(I.props.children,w.mode,D,I.key),y.return=w,w=y):(D=Tg(I.type,I.key,I.props,null,w.mode,D),D.ref=Bh(w,y,I),D.return=w,w=D)}return a(w);case qu:e:{for(k=I.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===I.containerInfo&&y.stateNode.implementation===I.implementation){r(w,y.sibling),y=s(y,I.children||[]),y.return=w,w=y;break e}else{r(w,y);break}else e(w,y);y=y.sibling}y=ry(I,w.mode,D),y.return=w,w=y}return a(w);case NA:return k=I._init,_(w,y,k(I._payload),D)}if(Vh(I))return B(w,y,I,D);if(mh(I))return b(w,y,I,D);Nm(w,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,y!==null&&y.tag===6?(r(w,y.sibling),y=s(y,I),y.return=w,w=y):(r(w,y),y=ty(I,w.mode,D),y.return=w,w=y),a(w)):r(w,y)}return _}var vd=VN(!0),KN=VN(!1),c0=Bl(null),u0=null,ed=null,NB=null;function SB(){NB=ed=u0=null}function FB(t){var e=c0.current;jr(c0),t._currentValue=e}function _1(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ld(t,e){u0=t,NB=ed=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qs=!0),t.firstContext=null)}function Li(t){var e=t._currentValue;if(NB!==t)if(t={context:t,memoizedValue:e,next:null},ed===null){if(u0===null)throw Error($e(308));ed=t,u0.dependencies={lanes:0,firstContext:t}}else ed=ed.next=t;return e}var cc=null;function TB(t){cc===null?cc=[t]:cc.push(t)}function qN(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,TB(e)):(r.next=s.next,s.next=r),e.interleaved=r,Po(t,n)}function Po(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var SA=!1;function UB(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Eo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function JA(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,lr&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Po(t,r)}return s=n.interleaved,s===null?(e.next=e,TB(n)):(e.next=s.next,s.next=e),n.interleaved=e,Po(t,r)}function Eg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,gB(t,r)}}function TC(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function d0(t,e,r,n){var s=t.updateQueue;SA=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var A=o,c=A.next;A.next=null,a===null?i=c:a.next=c,a=A;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=A))}if(i!==null){var f=s.baseState;a=0,d=c=A=null,o=i;do{var m=o.lane,g=o.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var B=t,b=o;switch(m=e,g=r,b.tag){case 1:if(B=b.payload,typeof B=="function"){f=B.call(g,f,m);break e}f=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=b.payload,m=typeof B=="function"?B.call(g,f,m):B,m==null)break e;f=en({},f,m);break e;case 2:SA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=g,A=f):d=d.next=g,a|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(A=f),s.baseState=A,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ic|=a,t.lanes=a,t.memoizedState=f}}function UC(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error($e(191,s));s.call(n)}}}var bp={},ka=Bl(bp),Vf=Bl(bp),Kf=Bl(bp);function uc(t){if(t===bp)throw Error($e(174));return t}function QB(t,e){switch(Qr(Kf,e),Qr(Vf,t),Qr(ka,bp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:a1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=a1(e,t)}jr(ka),Qr(ka,e)}function yd(){jr(ka),jr(Vf),jr(Kf)}function zN(t){uc(Kf.current);var e=uc(ka.current),r=a1(e,t.type);e!==r&&(Qr(Vf,t),Qr(ka,r))}function PB(t){Vf.current===t&&(jr(ka),jr(Vf))}var Yr=Bl(0);function h0(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $v=[];function LB(){for(var t=0;t<$v.length;t++)$v[t]._workInProgressVersionPrimary=null;$v.length=0}var _g=Mo.ReactCurrentDispatcher,Xv=Mo.ReactCurrentBatchConfig,_c=0,Zr=null,Nn=null,Hn=null,f0=!1,uf=!1,qf=0,uL=0;function cs(){throw Error($e(321))}function kB(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!sa(t[r],e[r]))return!1;return!0}function RB(t,e,r,n,s,i){if(_c=i,Zr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_g.current=t===null||t.memoizedState===null?pL:mL,t=r(n,s),uf){i=0;do{if(uf=!1,qf=0,25<=i)throw Error($e(301));i+=1,Hn=Nn=null,e.updateQueue=null,_g.current=gL,t=r(n,s)}while(uf)}if(_g.current=p0,e=Nn!==null&&Nn.next!==null,_c=0,Hn=Nn=Zr=null,f0=!1,e)throw Error($e(300));return t}function DB(){var t=qf!==0;return qf=0,t}function Sa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?Zr.memoizedState=Hn=t:Hn=Hn.next=t,Hn}function ki(){if(Nn===null){var t=Zr.alternate;t=t!==null?t.memoizedState:null}else t=Nn.next;var e=Hn===null?Zr.memoizedState:Hn.next;if(e!==null)Hn=e,Nn=t;else{if(t===null)throw Error($e(310));Nn=t,t={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},Hn===null?Zr.memoizedState=Hn=t:Hn=Hn.next=t}return Hn}function Gf(t,e){return typeof e=="function"?e(t):e}function Jv(t){var e=ki(),r=e.queue;if(r===null)throw Error($e(311));r.lastRenderedReducer=t;var n=Nn,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,A=null,c=i;do{var d=c.lane;if((_c&d)===d)A!==null&&(A=A.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};A===null?(o=A=f,a=n):A=A.next=f,Zr.lanes|=d,Ic|=d}c=c.next}while(c!==null&&c!==i);A===null?a=n:A.next=o,sa(n,e.memoizedState)||(qs=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=A,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Zr.lanes|=i,Ic|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Yv(t){var e=ki(),r=e.queue;if(r===null)throw Error($e(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);sa(i,e.memoizedState)||(qs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function WN(){}function $N(t,e){var r=Zr,n=ki(),s=e(),i=!sa(n.memoizedState,s);if(i&&(n.memoizedState=s,qs=!0),n=n.queue,jB(YN.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Hn!==null&&Hn.memoizedState.tag&1){if(r.flags|=2048,zf(9,JN.bind(null,r,n,s,e),void 0,null),Vn===null)throw Error($e(349));_c&30||XN(r,e,s)}return s}function XN(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Zr.updateQueue,e===null?(e={lastEffect:null,stores:null},Zr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function JN(t,e,r,n){e.value=r,e.getSnapshot=n,ZN(e)&&eS(t)}function YN(t,e,r){return r(function(){ZN(e)&&eS(t)})}function ZN(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!sa(t,r)}catch{return!0}}function eS(t){var e=Po(t,1);e!==null&&ra(e,t,1,-1)}function QC(t){var e=Sa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gf,lastRenderedState:t},e.queue=t,t=t.dispatch=fL.bind(null,Zr,t),[e.memoizedState,t]}function zf(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Zr.updateQueue,e===null?(e={lastEffect:null,stores:null},Zr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function tS(){return ki().memoizedState}function Ig(t,e,r,n){var s=Sa();Zr.flags|=t,s.memoizedState=zf(1|e,r,void 0,n===void 0?null:n)}function lw(t,e,r,n){var s=ki();n=n===void 0?null:n;var i=void 0;if(Nn!==null){var a=Nn.memoizedState;if(i=a.destroy,n!==null&&kB(n,a.deps)){s.memoizedState=zf(e,r,i,n);return}}Zr.flags|=t,s.memoizedState=zf(1|e,r,i,n)}function PC(t,e){return Ig(8390656,8,t,e)}function jB(t,e){return lw(2048,8,t,e)}function rS(t,e){return lw(4,2,t,e)}function nS(t,e){return lw(4,4,t,e)}function sS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iS(t,e,r){return r=r!=null?r.concat([t]):null,lw(4,4,sS.bind(null,e,t),r)}function OB(){}function aS(t,e){var r=ki();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&kB(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function oS(t,e){var r=ki();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&kB(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function AS(t,e,r){return _c&21?(sa(r,e)||(r=hN(),Zr.lanes|=r,Ic|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qs=!0),t.memoizedState=r)}function dL(t,e){var r=br;br=r!==0&&4>r?r:4,t(!0);var n=Xv.transition;Xv.transition={};try{t(!1),e()}finally{br=r,Xv.transition=n}}function lS(){return ki().memoizedState}function hL(t,e,r){var n=ZA(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},cS(t))uS(e,r);else if(r=qN(t,e,r,n),r!==null){var s=Us();ra(r,t,n,s),dS(r,e,n)}}function fL(t,e,r){var n=ZA(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(cS(t))uS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,sa(o,a)){var A=e.interleaved;A===null?(s.next=s,TB(e)):(s.next=A.next,A.next=s),e.interleaved=s;return}}catch{}finally{}r=qN(t,e,s,n),r!==null&&(s=Us(),ra(r,t,n,s),dS(r,e,n))}}function cS(t){var e=t.alternate;return t===Zr||e!==null&&e===Zr}function uS(t,e){uf=f0=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function dS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,gB(t,r)}}var p0={readContext:Li,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useInsertionEffect:cs,useLayoutEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useMutableSource:cs,useSyncExternalStore:cs,useId:cs,unstable_isNewReconciler:!1},pL={readContext:Li,useCallback:function(t,e){return Sa().memoizedState=[t,e===void 0?null:e],t},useContext:Li,useEffect:PC,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ig(4194308,4,sS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ig(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ig(4,2,t,e)},useMemo:function(t,e){var r=Sa();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Sa();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=hL.bind(null,Zr,t),[n.memoizedState,t]},useRef:function(t){var e=Sa();return t={current:t},e.memoizedState=t},useState:QC,useDebugValue:OB,useDeferredValue:function(t){return Sa().memoizedState=t},useTransition:function(){var t=QC(!1),e=t[0];return t=dL.bind(null,t[1]),Sa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Zr,s=Sa();if(Vr){if(r===void 0)throw Error($e(407));r=r()}else{if(r=e(),Vn===null)throw Error($e(349));_c&30||XN(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,PC(YN.bind(null,n,i,t),[t]),n.flags|=2048,zf(9,JN.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Sa(),e=Vn.identifierPrefix;if(Vr){var r=vo,n=wo;r=(n&~(1<<32-ta(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=qf++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=uL++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mL={readContext:Li,useCallback:aS,useContext:Li,useEffect:jB,useImperativeHandle:iS,useInsertionEffect:rS,useLayoutEffect:nS,useMemo:oS,useReducer:Jv,useRef:tS,useState:function(){return Jv(Gf)},useDebugValue:OB,useDeferredValue:function(t){var e=ki();return AS(e,Nn.memoizedState,t)},useTransition:function(){var t=Jv(Gf)[0],e=ki().memoizedState;return[t,e]},useMutableSource:WN,useSyncExternalStore:$N,useId:lS,unstable_isNewReconciler:!1},gL={readContext:Li,useCallback:aS,useContext:Li,useEffect:jB,useImperativeHandle:iS,useInsertionEffect:rS,useLayoutEffect:nS,useMemo:oS,useReducer:Yv,useRef:tS,useState:function(){return Yv(Gf)},useDebugValue:OB,useDeferredValue:function(t){var e=ki();return Nn===null?e.memoizedState=t:AS(e,Nn.memoizedState,t)},useTransition:function(){var t=Yv(Gf)[0],e=ki().memoizedState;return[t,e]},useMutableSource:WN,useSyncExternalStore:$N,useId:lS,unstable_isNewReconciler:!1};function Ji(t,e){if(t&&t.defaultProps){e=en({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function I1(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:en({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var cw={isMounted:function(t){return(t=t._reactInternals)?jc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Us(),s=ZA(t),i=Eo(n,s);i.payload=e,r!=null&&(i.callback=r),e=JA(t,i,s),e!==null&&(ra(e,t,s,n),Eg(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Us(),s=ZA(t),i=Eo(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=JA(t,i,s),e!==null&&(ra(e,t,s,n),Eg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Us(),n=ZA(t),s=Eo(r,n);s.tag=2,e!=null&&(s.callback=e),e=JA(t,s,n),e!==null&&(ra(e,t,n,r),Eg(e,t,n))}};function LC(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!jf(r,n)||!jf(s,i):!0}function hS(t,e,r){var n=!1,s=cl,i=e.contextType;return typeof i=="object"&&i!==null?i=Li(i):(s=Ws(e)?Cc:Bs.current,n=e.contextTypes,i=(n=n!=null)?gd(t,s):cl),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cw,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function kC(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&cw.enqueueReplaceState(e,e.state,null)}function N1(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},UB(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Li(i):(i=Ws(e)?Cc:Bs.current,s.context=gd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(I1(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&cw.enqueueReplaceState(s,s.state,null),d0(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Bd(t,e){try{var r="",n=e;do r+=qQ(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Zv(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function S1(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var wL=typeof WeakMap=="function"?WeakMap:Map;function fS(t,e,r){r=Eo(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){g0||(g0=!0,j1=n),S1(t,e)},r}function pS(t,e,r){r=Eo(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){S1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){S1(t,e),typeof n!="function"&&(YA===null?YA=new Set([this]):YA.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function RC(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new wL;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=UL.bind(null,t,e,r),e.then(t,t))}function DC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jC(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Eo(-1,1),e.tag=2,JA(r,e,1))),r.lanes|=1),t)}var vL=Mo.ReactCurrentOwner,qs=!1;function Ns(t,e,r,n){e.child=t===null?KN(e,null,r,n):vd(e,t.child,r,n)}function OC(t,e,r,n,s){r=r.render;var i=e.ref;return ld(e,s),n=RB(t,e,r,n,i,s),r=DB(),t!==null&&!qs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lo(t,e,s)):(Vr&&r&&EB(e),e.flags|=1,Ns(t,e,n,s),e.child)}function MC(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!WB(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,mS(t,e,i,n,s)):(t=Tg(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:jf,r(a,n)&&t.ref===e.ref)return Lo(t,e,s)}return e.flags|=1,t=el(i,n),t.ref=e.ref,t.return=e,e.child=t}function mS(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(jf(i,n)&&t.ref===e.ref)if(qs=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(qs=!0);else return e.lanes=t.lanes,Lo(t,e,s)}return F1(t,e,r,n,s)}function gS(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qr(rd,si),si|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qr(rd,si),si|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Qr(rd,si),si|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Qr(rd,si),si|=n;return Ns(t,e,s,r),e.child}function wS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function F1(t,e,r,n,s){var i=Ws(r)?Cc:Bs.current;return i=gd(e,i),ld(e,s),r=RB(t,e,r,n,i,s),n=DB(),t!==null&&!qs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lo(t,e,s)):(Vr&&n&&EB(e),e.flags|=1,Ns(t,e,r,s),e.child)}function HC(t,e,r,n,s){if(Ws(r)){var i=!0;o0(e)}else i=!1;if(ld(e,s),e.stateNode===null)Ng(t,e),hS(e,r,n),N1(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var A=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Li(c):(c=Ws(r)?Cc:Bs.current,c=gd(e,c));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||A!==c)&&kC(e,a,n,c),SA=!1;var m=e.memoizedState;a.state=m,d0(e,n,a,s),A=e.memoizedState,o!==n||m!==A||zs.current||SA?(typeof d=="function"&&(I1(e,r,d,n),A=e.memoizedState),(o=SA||LC(e,r,o,n,m,A,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=A),a.props=n,a.state=A,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,GN(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Ji(e.type,o),a.props=c,f=e.pendingProps,m=a.context,A=r.contextType,typeof A=="object"&&A!==null?A=Li(A):(A=Ws(r)?Cc:Bs.current,A=gd(e,A));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||m!==A)&&kC(e,a,n,A),SA=!1,m=e.memoizedState,a.state=m,d0(e,n,a,s);var B=e.memoizedState;o!==f||m!==B||zs.current||SA?(typeof g=="function"&&(I1(e,r,g,n),B=e.memoizedState),(c=SA||LC(e,r,c,n,m,B,A)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,B,A),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,B,A)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=B),a.props=n,a.state=B,a.context=A,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return T1(t,e,r,n,i,s)}function T1(t,e,r,n,s,i){wS(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&IC(e,r,!1),Lo(t,e,i);n=e.stateNode,vL.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=vd(e,t.child,null,i),e.child=vd(e,null,o,i)):Ns(t,e,o,i),e.memoizedState=n.state,s&&IC(e,r,!0),e.child}function vS(t){var e=t.stateNode;e.pendingContext?_C(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_C(t,e.context,!1),QB(t,e.containerInfo)}function VC(t,e,r,n,s){return wd(),IB(s),e.flags|=256,Ns(t,e,r,n),e.child}var U1={dehydrated:null,treeContext:null,retryLane:0};function Q1(t){return{baseLanes:t,cachePool:null,transitions:null}}function yS(t,e,r){var n=e.pendingProps,s=Yr.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Qr(Yr,s&1),t===null)return E1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=hw(a,n,0,null),t=mc(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Q1(r),e.memoizedState=U1,t):MB(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return yL(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var A={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=A,e.deletions=null):(n=el(s,A),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=el(o,i):(i=mc(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?Q1(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=U1,n}return i=t.child,t=i.sibling,n=el(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function MB(t,e){return e=hw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Sm(t,e,r,n){return n!==null&&IB(n),vd(e,t.child,null,r),t=MB(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yL(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=Zv(Error($e(422))),Sm(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=hw({mode:"visible",children:n.children},s,0,null),i=mc(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&vd(e,t.child,null,a),e.child.memoizedState=Q1(a),e.memoizedState=U1,i);if(!(e.mode&1))return Sm(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error($e(419)),n=Zv(i,n,void 0),Sm(t,e,a,n)}if(o=(a&t.childLanes)!==0,qs||o){if(n=Vn,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Po(t,s),ra(n,t,s,-1))}return zB(),n=Zv(Error($e(421))),Sm(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=QL.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ii=XA(s.nextSibling),Ai=e,Vr=!0,ea=null,t!==null&&(_i[Ii++]=wo,_i[Ii++]=vo,_i[Ii++]=Ec,wo=t.id,vo=t.overflow,Ec=e),e=MB(e,n.children),e.flags|=4096,e)}function KC(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),_1(t.return,e,r)}function ey(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function BS(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Ns(t,e,n.children,r),n=Yr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&KC(t,r,e);else if(t.tag===19)KC(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Qr(Yr,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&h0(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),ey(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&h0(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}ey(e,!0,r,null,i);break;case"together":ey(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ng(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lo(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ic|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($e(153));if(e.child!==null){for(t=e.child,r=el(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=el(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function BL(t,e,r){switch(e.tag){case 3:vS(e),wd();break;case 5:zN(e);break;case 1:Ws(e.type)&&o0(e);break;case 4:QB(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Qr(c0,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Qr(Yr,Yr.current&1),e.flags|=128,null):r&e.child.childLanes?yS(t,e,r):(Qr(Yr,Yr.current&1),t=Lo(t,e,r),t!==null?t.sibling:null);Qr(Yr,Yr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return BS(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qr(Yr,Yr.current),n)break;return null;case 22:case 23:return e.lanes=0,gS(t,e,r)}return Lo(t,e,r)}var xS,P1,bS,CS;xS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};P1=function(){};bS=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,uc(ka.current);var i=null;switch(r){case"input":s=r1(t,s),n=r1(t,n),i=[];break;case"select":s=en({},s,{value:void 0}),n=en({},n,{value:void 0}),i=[];break;case"textarea":s=i1(t,s),n=i1(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=i0)}o1(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Uf.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var A=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&A!==o&&(A!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||A&&A.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in A)A.hasOwnProperty(a)&&o[a]!==A[a]&&(r||(r={}),r[a]=A[a])}else r||(i||(i=[]),i.push(c,r)),r=A;else c==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,o=o?o.__html:void 0,A!=null&&o!==A&&(i=i||[]).push(c,A)):c==="children"?typeof A!="string"&&typeof A!="number"||(i=i||[]).push(c,""+A):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Uf.hasOwnProperty(c)?(A!=null&&c==="onScroll"&&kr("scroll",t),i||o===A||(i=[])):(i=i||[]).push(c,A))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};CS=function(t,e,r,n){r!==n&&(e.flags|=4)};function xh(t,e){if(!Vr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function us(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function xL(t,e,r){var n=e.pendingProps;switch(_B(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return us(e),null;case 1:return Ws(e.type)&&a0(),us(e),null;case 3:return n=e.stateNode,yd(),jr(zs),jr(Bs),LB(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Im(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ea!==null&&(H1(ea),ea=null))),P1(t,e),us(e),null;case 5:PB(e);var s=uc(Kf.current);if(r=e.type,t!==null&&e.stateNode!=null)bS(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error($e(166));return us(e),null}if(t=uc(ka.current),Im(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Fa]=e,n[Hf]=i,t=(e.mode&1)!==0,r){case"dialog":kr("cancel",n),kr("close",n);break;case"iframe":case"object":case"embed":kr("load",n);break;case"video":case"audio":for(s=0;s<qh.length;s++)kr(qh[s],n);break;case"source":kr("error",n);break;case"img":case"image":case"link":kr("error",n),kr("load",n);break;case"details":kr("toggle",n);break;case"input":Zb(n,i),kr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},kr("invalid",n);break;case"textarea":tC(n,i),kr("invalid",n)}o1(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&_m(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&_m(n.textContent,o,t),s=["children",""+o]):Uf.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&kr("scroll",n)}switch(r){case"input":wm(n),eC(n,i,!0);break;case"textarea":wm(n),rC(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=i0)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YI(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Fa]=e,t[Hf]=n,xS(t,e,!1,!1),e.stateNode=t;e:{switch(a=A1(r,n),r){case"dialog":kr("cancel",t),kr("close",t),s=n;break;case"iframe":case"object":case"embed":kr("load",t),s=n;break;case"video":case"audio":for(s=0;s<qh.length;s++)kr(qh[s],t);s=n;break;case"source":kr("error",t),s=n;break;case"img":case"image":case"link":kr("error",t),kr("load",t),s=n;break;case"details":kr("toggle",t),s=n;break;case"input":Zb(t,n),s=r1(t,n),kr("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=en({},n,{value:void 0}),kr("invalid",t);break;case"textarea":tC(t,n),s=i1(t,n),kr("invalid",t);break;default:s=n}o1(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var A=o[i];i==="style"?tN(t,A):i==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&ZI(t,A)):i==="children"?typeof A=="string"?(r!=="textarea"||A!=="")&&Qf(t,A):typeof A=="number"&&Qf(t,""+A):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uf.hasOwnProperty(i)?A!=null&&i==="onScroll"&&kr("scroll",t):A!=null&&uB(t,i,A,a))}switch(r){case"input":wm(t),eC(t,n,!1);break;case"textarea":wm(t),rC(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ll(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?id(t,!!n.multiple,i,!1):n.defaultValue!=null&&id(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=i0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return us(e),null;case 6:if(t&&e.stateNode!=null)CS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error($e(166));if(r=uc(Kf.current),uc(ka.current),Im(e)){if(n=e.stateNode,r=e.memoizedProps,n[Fa]=e,(i=n.nodeValue!==r)&&(t=Ai,t!==null))switch(t.tag){case 3:_m(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_m(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Fa]=e,e.stateNode=n}return us(e),null;case 13:if(jr(Yr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vr&&ii!==null&&e.mode&1&&!(e.flags&128))HN(),wd(),e.flags|=98560,i=!1;else if(i=Im(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error($e(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($e(317));i[Fa]=e}else wd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;us(e),i=!1}else ea!==null&&(H1(ea),ea=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Yr.current&1?Tn===0&&(Tn=3):zB())),e.updateQueue!==null&&(e.flags|=4),us(e),null);case 4:return yd(),P1(t,e),t===null&&Of(e.stateNode.containerInfo),us(e),null;case 10:return FB(e.type._context),us(e),null;case 17:return Ws(e.type)&&a0(),us(e),null;case 19:if(jr(Yr),i=e.memoizedState,i===null)return us(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)xh(i,!1);else{if(Tn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=h0(t),a!==null){for(e.flags|=128,xh(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Qr(Yr,Yr.current&1|2),e.child}t=t.sibling}i.tail!==null&&mn()>xd&&(e.flags|=128,n=!0,xh(i,!1),e.lanes=4194304)}else{if(!n)if(t=h0(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),xh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Vr)return us(e),null}else 2*mn()-i.renderingStartTime>xd&&r!==1073741824&&(e.flags|=128,n=!0,xh(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mn(),e.sibling=null,r=Yr.current,Qr(Yr,n?r&1|2:r&1),e):(us(e),null);case 22:case 23:return GB(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?si&1073741824&&(us(e),e.subtreeFlags&6&&(e.flags|=8192)):us(e),null;case 24:return null;case 25:return null}throw Error($e(156,e.tag))}function bL(t,e){switch(_B(e),e.tag){case 1:return Ws(e.type)&&a0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yd(),jr(zs),jr(Bs),LB(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return PB(e),null;case 13:if(jr(Yr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($e(340));wd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return jr(Yr),null;case 4:return yd(),null;case 10:return FB(e.type._context),null;case 22:case 23:return GB(),null;case 24:return null;default:return null}}var Fm=!1,vs=!1,CL=typeof WeakSet=="function"?WeakSet:Set,xt=null;function td(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ln(t,e,n)}else r.current=null}function L1(t,e,r){try{r()}catch(n){ln(t,e,n)}}var qC=!1;function EL(t,e){if(w1=r0,t=SN(),CB(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,A=-1,c=0,d=0,f=t,m=null;t:for(;;){for(var g;f!==r||s!==0&&f.nodeType!==3||(o=a+s),f!==i||n!==0&&f.nodeType!==3||(A=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===r&&++c===s&&(o=a),m===i&&++d===n&&(A=a),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}r=o===-1||A===-1?null:{start:o,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(v1={focusedElem:t,selectionRange:r},r0=!1,xt=e;xt!==null;)if(e=xt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xt=t;else for(;xt!==null;){e=xt;try{var B=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var b=B.memoizedProps,_=B.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ji(e.type,b),_);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($e(163))}}catch(D){ln(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,xt=t;break}xt=e.return}return B=qC,qC=!1,B}function df(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&L1(e,r,i)}s=s.next}while(s!==n)}}function uw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function k1(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function ES(t){var e=t.alternate;e!==null&&(t.alternate=null,ES(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fa],delete e[Hf],delete e[x1],delete e[oL],delete e[AL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _S(t){return t.tag===5||t.tag===3||t.tag===4}function GC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_S(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function R1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=i0));else if(n!==4&&(t=t.child,t!==null))for(R1(t,e,r),t=t.sibling;t!==null;)R1(t,e,r),t=t.sibling}function D1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(D1(t,e,r),t=t.sibling;t!==null;)D1(t,e,r),t=t.sibling}var es=null,Zi=!1;function wA(t,e,r){for(r=r.child;r!==null;)IS(t,e,r),r=r.sibling}function IS(t,e,r){if(La&&typeof La.onCommitFiberUnmount=="function")try{La.onCommitFiberUnmount(nw,r)}catch{}switch(r.tag){case 5:vs||td(r,e);case 6:var n=es,s=Zi;es=null,wA(t,e,r),es=n,Zi=s,es!==null&&(Zi?(t=es,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):es.removeChild(r.stateNode));break;case 18:es!==null&&(Zi?(t=es,r=r.stateNode,t.nodeType===8?zv(t.parentNode,r):t.nodeType===1&&zv(t,r),Rf(t)):zv(es,r.stateNode));break;case 4:n=es,s=Zi,es=r.stateNode.containerInfo,Zi=!0,wA(t,e,r),es=n,Zi=s;break;case 0:case 11:case 14:case 15:if(!vs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&L1(r,e,a),s=s.next}while(s!==n)}wA(t,e,r);break;case 1:if(!vs&&(td(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ln(r,e,o)}wA(t,e,r);break;case 21:wA(t,e,r);break;case 22:r.mode&1?(vs=(n=vs)||r.memoizedState!==null,wA(t,e,r),vs=n):wA(t,e,r);break;default:wA(t,e,r)}}function zC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new CL),e.forEach(function(n){var s=PL.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function zi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:es=o.stateNode,Zi=!1;break e;case 3:es=o.stateNode.containerInfo,Zi=!0;break e;case 4:es=o.stateNode.containerInfo,Zi=!0;break e}o=o.return}if(es===null)throw Error($e(160));IS(i,a,s),es=null,Zi=!1;var A=s.alternate;A!==null&&(A.return=null),s.return=null}catch(c){ln(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NS(e,t),e=e.sibling}function NS(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zi(e,t),_a(t),n&4){try{df(3,t,t.return),uw(3,t)}catch(b){ln(t,t.return,b)}try{df(5,t,t.return)}catch(b){ln(t,t.return,b)}}break;case 1:zi(e,t),_a(t),n&512&&r!==null&&td(r,r.return);break;case 5:if(zi(e,t),_a(t),n&512&&r!==null&&td(r,r.return),t.flags&32){var s=t.stateNode;try{Qf(s,"")}catch(b){ln(t,t.return,b)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,A=t.updateQueue;if(t.updateQueue=null,A!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&XI(s,i),A1(o,a);var c=A1(o,i);for(a=0;a<A.length;a+=2){var d=A[a],f=A[a+1];d==="style"?tN(s,f):d==="dangerouslySetInnerHTML"?ZI(s,f):d==="children"?Qf(s,f):uB(s,d,f,c)}switch(o){case"input":n1(s,i);break;case"textarea":JI(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?id(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?id(s,!!i.multiple,i.defaultValue,!0):id(s,!!i.multiple,i.multiple?[]:"",!1))}s[Hf]=i}catch(b){ln(t,t.return,b)}}break;case 6:if(zi(e,t),_a(t),n&4){if(t.stateNode===null)throw Error($e(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){ln(t,t.return,b)}}break;case 3:if(zi(e,t),_a(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Rf(e.containerInfo)}catch(b){ln(t,t.return,b)}break;case 4:zi(e,t),_a(t);break;case 13:zi(e,t),_a(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(KB=mn())),n&4&&zC(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(vs=(c=vs)||d,zi(e,t),vs=c):zi(e,t),_a(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(xt=t,d=t.child;d!==null;){for(f=xt=d;xt!==null;){switch(m=xt,g=m.child,m.tag){case 0:case 11:case 14:case 15:df(4,m,m.return);break;case 1:td(m,m.return);var B=m.stateNode;if(typeof B.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,B.props=e.memoizedProps,B.state=e.memoizedState,B.componentWillUnmount()}catch(b){ln(n,r,b)}}break;case 5:td(m,m.return);break;case 22:if(m.memoizedState!==null){$C(f);continue}}g!==null?(g.return=m,xt=g):$C(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,A=f.memoizedProps.style,a=A!=null&&A.hasOwnProperty("display")?A.display:null,o.style.display=eN("display",a))}catch(b){ln(t,t.return,b)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(b){ln(t,t.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zi(e,t),_a(t),n&4&&zC(t);break;case 21:break;default:zi(e,t),_a(t)}}function _a(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(_S(r)){var n=r;break e}r=r.return}throw Error($e(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Qf(s,""),n.flags&=-33);var i=GC(t);D1(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=GC(t);R1(t,o,a);break;default:throw Error($e(161))}}catch(A){ln(t,t.return,A)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _L(t,e,r){xt=t,SS(t)}function SS(t,e,r){for(var n=(t.mode&1)!==0;xt!==null;){var s=xt,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Fm;if(!a){var o=s.alternate,A=o!==null&&o.memoizedState!==null||vs;o=Fm;var c=vs;if(Fm=a,(vs=A)&&!c)for(xt=s;xt!==null;)a=xt,A=a.child,a.tag===22&&a.memoizedState!==null?XC(s):A!==null?(A.return=a,xt=A):XC(s);for(;i!==null;)xt=i,SS(i),i=i.sibling;xt=s,Fm=o,vs=c}WC(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,xt=i):WC(t)}}function WC(t){for(;xt!==null;){var e=xt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vs||uw(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!vs)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ji(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&UC(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}UC(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var A=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&r.focus();break;case"img":A.src&&(r.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Rf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($e(163))}vs||e.flags&512&&k1(e)}catch(m){ln(e,e.return,m)}}if(e===t){xt=null;break}if(r=e.sibling,r!==null){r.return=e.return,xt=r;break}xt=e.return}}function $C(t){for(;xt!==null;){var e=xt;if(e===t){xt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,xt=r;break}xt=e.return}}function XC(t){for(;xt!==null;){var e=xt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{uw(4,e)}catch(A){ln(e,r,A)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(A){ln(e,s,A)}}var i=e.return;try{k1(e)}catch(A){ln(e,i,A)}break;case 5:var a=e.return;try{k1(e)}catch(A){ln(e,a,A)}}}catch(A){ln(e,e.return,A)}if(e===t){xt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,xt=o;break}xt=e.return}}var IL=Math.ceil,m0=Mo.ReactCurrentDispatcher,HB=Mo.ReactCurrentOwner,Qi=Mo.ReactCurrentBatchConfig,lr=0,Vn=null,En=null,os=0,si=0,rd=Bl(0),Tn=0,Wf=null,Ic=0,dw=0,VB=0,hf=null,Ks=null,KB=0,xd=1/0,mo=null,g0=!1,j1=null,YA=null,Tm=!1,MA=null,w0=0,ff=0,O1=null,Sg=-1,Fg=0;function Us(){return lr&6?mn():Sg!==-1?Sg:Sg=mn()}function ZA(t){return t.mode&1?lr&2&&os!==0?os&-os:cL.transition!==null?(Fg===0&&(Fg=hN()),Fg):(t=br,t!==0||(t=window.event,t=t===void 0?16:yN(t.type)),t):1}function ra(t,e,r,n){if(50<ff)throw ff=0,O1=null,Error($e(185));yp(t,r,n),(!(lr&2)||t!==Vn)&&(t===Vn&&(!(lr&2)&&(dw|=r),Tn===4&&UA(t,os)),$s(t,n),r===1&&lr===0&&!(e.mode&1)&&(xd=mn()+500,Aw&&xl()))}function $s(t,e){var r=t.callbackNode;cP(t,e);var n=t0(t,t===Vn?os:0);if(n===0)r!==null&&iC(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&iC(r),e===1)t.tag===0?lL(JC.bind(null,t)):jN(JC.bind(null,t)),iL(function(){!(lr&6)&&xl()}),r=null;else{switch(fN(n)){case 1:r=mB;break;case 4:r=uN;break;case 16:r=e0;break;case 536870912:r=dN;break;default:r=e0}r=RS(r,FS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function FS(t,e){if(Sg=-1,Fg=0,lr&6)throw Error($e(327));var r=t.callbackNode;if(cd()&&t.callbackNode!==r)return null;var n=t0(t,t===Vn?os:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=v0(t,n);else{e=n;var s=lr;lr|=2;var i=US();(Vn!==t||os!==e)&&(mo=null,xd=mn()+500,pc(t,e));do try{FL();break}catch(o){TS(t,o)}while(!0);SB(),m0.current=i,lr=s,En!==null?e=0:(Vn=null,os=0,e=Tn)}if(e!==0){if(e===2&&(s=h1(t),s!==0&&(n=s,e=M1(t,s))),e===1)throw r=Wf,pc(t,0),UA(t,n),$s(t,mn()),r;if(e===6)UA(t,n);else{if(s=t.current.alternate,!(n&30)&&!NL(s)&&(e=v0(t,n),e===2&&(i=h1(t),i!==0&&(n=i,e=M1(t,i))),e===1))throw r=Wf,pc(t,0),UA(t,n),$s(t,mn()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error($e(345));case 2:Zl(t,Ks,mo);break;case 3:if(UA(t,n),(n&130023424)===n&&(e=KB+500-mn(),10<e)){if(t0(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Us(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=B1(Zl.bind(null,t,Ks,mo),e);break}Zl(t,Ks,mo);break;case 4:if(UA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-ta(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=mn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*IL(n/1960))-n,10<n){t.timeoutHandle=B1(Zl.bind(null,t,Ks,mo),n);break}Zl(t,Ks,mo);break;case 5:Zl(t,Ks,mo);break;default:throw Error($e(329))}}}return $s(t,mn()),t.callbackNode===r?FS.bind(null,t):null}function M1(t,e){var r=hf;return t.current.memoizedState.isDehydrated&&(pc(t,e).flags|=256),t=v0(t,e),t!==2&&(e=Ks,Ks=r,e!==null&&H1(e)),t}function H1(t){Ks===null?Ks=t:Ks.push.apply(Ks,t)}function NL(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!sa(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function UA(t,e){for(e&=~VB,e&=~dw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ta(e),n=1<<r;t[r]=-1,e&=~n}}function JC(t){if(lr&6)throw Error($e(327));cd();var e=t0(t,0);if(!(e&1))return $s(t,mn()),null;var r=v0(t,e);if(t.tag!==0&&r===2){var n=h1(t);n!==0&&(e=n,r=M1(t,n))}if(r===1)throw r=Wf,pc(t,0),UA(t,e),$s(t,mn()),r;if(r===6)throw Error($e(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zl(t,Ks,mo),$s(t,mn()),null}function qB(t,e){var r=lr;lr|=1;try{return t(e)}finally{lr=r,lr===0&&(xd=mn()+500,Aw&&xl())}}function Nc(t){MA!==null&&MA.tag===0&&!(lr&6)&&cd();var e=lr;lr|=1;var r=Qi.transition,n=br;try{if(Qi.transition=null,br=1,t)return t()}finally{br=n,Qi.transition=r,lr=e,!(lr&6)&&xl()}}function GB(){si=rd.current,jr(rd)}function pc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,sL(r)),En!==null)for(r=En.return;r!==null;){var n=r;switch(_B(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&a0();break;case 3:yd(),jr(zs),jr(Bs),LB();break;case 5:PB(n);break;case 4:yd();break;case 13:jr(Yr);break;case 19:jr(Yr);break;case 10:FB(n.type._context);break;case 22:case 23:GB()}r=r.return}if(Vn=t,En=t=el(t.current,null),os=si=e,Tn=0,Wf=null,VB=dw=Ic=0,Ks=hf=null,cc!==null){for(e=0;e<cc.length;e++)if(r=cc[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}cc=null}return t}function TS(t,e){do{var r=En;try{if(SB(),_g.current=p0,f0){for(var n=Zr.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}f0=!1}if(_c=0,Hn=Nn=Zr=null,uf=!1,qf=0,HB.current=null,r===null||r.return===null){Tn=1,Wf=e,En=null;break}e:{var i=t,a=r.return,o=r,A=e;if(e=os,o.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var c=A,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=DC(a);if(g!==null){g.flags&=-257,jC(g,a,o,i,e),g.mode&1&&RC(i,c,e),e=g,A=c;var B=e.updateQueue;if(B===null){var b=new Set;b.add(A),e.updateQueue=b}else B.add(A);break e}else{if(!(e&1)){RC(i,c,e),zB();break e}A=Error($e(426))}}else if(Vr&&o.mode&1){var _=DC(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),jC(_,a,o,i,e),IB(Bd(A,o));break e}}i=A=Bd(A,o),Tn!==4&&(Tn=2),hf===null?hf=[i]:hf.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=fS(i,A,e);TC(i,w);break e;case 1:o=A;var y=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(YA===null||!YA.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=pS(i,o,e);TC(i,D);break e}}i=i.return}while(i!==null)}PS(r)}catch(H){e=H,En===r&&r!==null&&(En=r=r.return);continue}break}while(!0)}function US(){var t=m0.current;return m0.current=p0,t===null?p0:t}function zB(){(Tn===0||Tn===3||Tn===2)&&(Tn=4),Vn===null||!(Ic&268435455)&&!(dw&268435455)||UA(Vn,os)}function v0(t,e){var r=lr;lr|=2;var n=US();(Vn!==t||os!==e)&&(mo=null,pc(t,e));do try{SL();break}catch(s){TS(t,s)}while(!0);if(SB(),lr=r,m0.current=n,En!==null)throw Error($e(261));return Vn=null,os=0,Tn}function SL(){for(;En!==null;)QS(En)}function FL(){for(;En!==null&&!tP();)QS(En)}function QS(t){var e=kS(t.alternate,t,si);t.memoizedProps=t.pendingProps,e===null?PS(t):En=e,HB.current=null}function PS(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=bL(r,e),r!==null){r.flags&=32767,En=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tn=6,En=null;return}}else if(r=xL(r,e,si),r!==null){En=r;return}if(e=e.sibling,e!==null){En=e;return}En=e=t}while(e!==null);Tn===0&&(Tn=5)}function Zl(t,e,r){var n=br,s=Qi.transition;try{Qi.transition=null,br=1,TL(t,e,r,n)}finally{Qi.transition=s,br=n}return null}function TL(t,e,r,n){do cd();while(MA!==null);if(lr&6)throw Error($e(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error($e(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(uP(t,i),t===Vn&&(En=Vn=null,os=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Tm||(Tm=!0,RS(e0,function(){return cd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Qi.transition,Qi.transition=null;var a=br;br=1;var o=lr;lr|=4,HB.current=null,EL(t,r),NS(r,t),JP(v1),r0=!!w1,v1=w1=null,t.current=r,_L(r),rP(),lr=o,br=a,Qi.transition=i}else t.current=r;if(Tm&&(Tm=!1,MA=t,w0=s),i=t.pendingLanes,i===0&&(YA=null),iP(r.stateNode),$s(t,mn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(g0)throw g0=!1,t=j1,j1=null,t;return w0&1&&t.tag!==0&&cd(),i=t.pendingLanes,i&1?t===O1?ff++:(ff=0,O1=t):ff=0,xl(),null}function cd(){if(MA!==null){var t=fN(w0),e=Qi.transition,r=br;try{if(Qi.transition=null,br=16>t?16:t,MA===null)var n=!1;else{if(t=MA,MA=null,w0=0,lr&6)throw Error($e(331));var s=lr;for(lr|=4,xt=t.current;xt!==null;){var i=xt,a=i.child;if(xt.flags&16){var o=i.deletions;if(o!==null){for(var A=0;A<o.length;A++){var c=o[A];for(xt=c;xt!==null;){var d=xt;switch(d.tag){case 0:case 11:case 15:df(8,d,i)}var f=d.child;if(f!==null)f.return=d,xt=f;else for(;xt!==null;){d=xt;var m=d.sibling,g=d.return;if(ES(d),d===c){xt=null;break}if(m!==null){m.return=g,xt=m;break}xt=g}}}var B=i.alternate;if(B!==null){var b=B.child;if(b!==null){B.child=null;do{var _=b.sibling;b.sibling=null,b=_}while(b!==null)}}xt=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,xt=a;else e:for(;xt!==null;){if(i=xt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:df(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,xt=w;break e}xt=i.return}}var y=t.current;for(xt=y;xt!==null;){a=xt;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,xt=I;else e:for(a=y;xt!==null;){if(o=xt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:uw(9,o)}}catch(H){ln(o,o.return,H)}if(o===a){xt=null;break e}var D=o.sibling;if(D!==null){D.return=o.return,xt=D;break e}xt=o.return}}if(lr=s,xl(),La&&typeof La.onPostCommitFiberRoot=="function")try{La.onPostCommitFiberRoot(nw,t)}catch{}n=!0}return n}finally{br=r,Qi.transition=e}}return!1}function YC(t,e,r){e=Bd(r,e),e=fS(t,e,1),t=JA(t,e,1),e=Us(),t!==null&&(yp(t,1,e),$s(t,e))}function ln(t,e,r){if(t.tag===3)YC(t,t,r);else for(;e!==null;){if(e.tag===3){YC(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(YA===null||!YA.has(n))){t=Bd(r,t),t=pS(e,t,1),e=JA(e,t,1),t=Us(),e!==null&&(yp(e,1,t),$s(e,t));break}}e=e.return}}function UL(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Us(),t.pingedLanes|=t.suspendedLanes&r,Vn===t&&(os&r)===r&&(Tn===4||Tn===3&&(os&130023424)===os&&500>mn()-KB?pc(t,0):VB|=r),$s(t,e)}function LS(t,e){e===0&&(t.mode&1?(e=Bm,Bm<<=1,!(Bm&130023424)&&(Bm=4194304)):e=1);var r=Us();t=Po(t,e),t!==null&&(yp(t,e,r),$s(t,r))}function QL(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),LS(t,r)}function PL(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error($e(314))}n!==null&&n.delete(e),LS(t,r)}var kS;kS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||zs.current)qs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return qs=!1,BL(t,e,r);qs=!!(t.flags&131072)}else qs=!1,Vr&&e.flags&1048576&&ON(e,l0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ng(t,e),t=e.pendingProps;var s=gd(e,Bs.current);ld(e,r),s=RB(null,e,n,t,s,r);var i=DB();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ws(n)?(i=!0,o0(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,UB(e),s.updater=cw,e.stateNode=s,s._reactInternals=e,N1(e,n,t,r),e=T1(null,e,n,!0,i,r)):(e.tag=0,Vr&&i&&EB(e),Ns(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ng(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=kL(n),t=Ji(n,t),s){case 0:e=F1(null,e,n,t,r);break e;case 1:e=HC(null,e,n,t,r);break e;case 11:e=OC(null,e,n,t,r);break e;case 14:e=MC(null,e,n,Ji(n.type,t),r);break e}throw Error($e(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ji(n,s),F1(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ji(n,s),HC(t,e,n,s,r);case 3:e:{if(vS(e),t===null)throw Error($e(387));n=e.pendingProps,i=e.memoizedState,s=i.element,GN(t,e),d0(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Bd(Error($e(423)),e),e=VC(t,e,n,r,s);break e}else if(n!==s){s=Bd(Error($e(424)),e),e=VC(t,e,n,r,s);break e}else for(ii=XA(e.stateNode.containerInfo.firstChild),Ai=e,Vr=!0,ea=null,r=KN(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(wd(),n===s){e=Lo(t,e,r);break e}Ns(t,e,n,r)}e=e.child}return e;case 5:return zN(e),t===null&&E1(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,y1(n,s)?a=null:i!==null&&y1(n,i)&&(e.flags|=32),wS(t,e),Ns(t,e,a,r),e.child;case 6:return t===null&&E1(e),null;case 13:return yS(t,e,r);case 4:return QB(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=vd(e,null,n,r):Ns(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ji(n,s),OC(t,e,n,s,r);case 7:return Ns(t,e,e.pendingProps,r),e.child;case 8:return Ns(t,e,e.pendingProps.children,r),e.child;case 12:return Ns(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Qr(c0,n._currentValue),n._currentValue=a,i!==null)if(sa(i.value,a)){if(i.children===s.children&&!zs.current){e=Lo(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var A=o.firstContext;A!==null;){if(A.context===n){if(i.tag===1){A=Eo(-1,r&-r),A.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?A.next=A:(A.next=d.next,d.next=A),c.pending=A}}i.lanes|=r,A=i.alternate,A!==null&&(A.lanes|=r),_1(i.return,r,e),o.lanes|=r;break}A=A.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error($e(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),_1(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ns(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,ld(e,r),s=Li(s),n=n(s),e.flags|=1,Ns(t,e,n,r),e.child;case 14:return n=e.type,s=Ji(n,e.pendingProps),s=Ji(n.type,s),MC(t,e,n,s,r);case 15:return mS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ji(n,s),Ng(t,e),e.tag=1,Ws(n)?(t=!0,o0(e)):t=!1,ld(e,r),hS(e,n,s),N1(e,n,s,r),T1(null,e,n,!0,t,r);case 19:return BS(t,e,r);case 22:return gS(t,e,r)}throw Error($e(156,e.tag))};function RS(t,e){return cN(t,e)}function LL(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Si(t,e,r,n){return new LL(t,e,r,n)}function WB(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kL(t){if(typeof t=="function")return WB(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hB)return 11;if(t===fB)return 14}return 2}function el(t,e){var r=t.alternate;return r===null?(r=Si(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Tg(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")WB(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Gu:return mc(r.children,s,i,e);case dB:a=8,s|=8;break;case Yy:return t=Si(12,r,e,s|2),t.elementType=Yy,t.lanes=i,t;case Zy:return t=Si(13,r,e,s),t.elementType=Zy,t.lanes=i,t;case e1:return t=Si(19,r,e,s),t.elementType=e1,t.lanes=i,t;case zI:return hw(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qI:a=10;break e;case GI:a=9;break e;case hB:a=11;break e;case fB:a=14;break e;case NA:a=16,n=null;break e}throw Error($e(130,t==null?t:typeof t,""))}return e=Si(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function mc(t,e,r,n){return t=Si(7,t,n,e),t.lanes=r,t}function hw(t,e,r,n){return t=Si(22,t,n,e),t.elementType=zI,t.lanes=r,t.stateNode={isHidden:!1},t}function ty(t,e,r){return t=Si(6,t,null,e),t.lanes=r,t}function ry(t,e,r){return e=Si(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RL(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kv(0),this.expirationTimes=kv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kv(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function $B(t,e,r,n,s,i,a,o,A){return t=new RL(t,e,r,o,A),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Si(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},UB(i),t}function DL(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function DS(t){if(!t)return cl;t=t._reactInternals;e:{if(jc(t)!==t||t.tag!==1)throw Error($e(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ws(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($e(171))}if(t.tag===1){var r=t.type;if(Ws(r))return DN(t,r,e)}return e}function jS(t,e,r,n,s,i,a,o,A){return t=$B(r,n,!0,t,s,i,a,o,A),t.context=DS(null),r=t.current,n=Us(),s=ZA(r),i=Eo(n,s),i.callback=e??null,JA(r,i,s),t.current.lanes=s,yp(t,s,n),$s(t,n),t}function fw(t,e,r,n){var s=e.current,i=Us(),a=ZA(s);return r=DS(r),e.context===null?e.context=r:e.pendingContext=r,e=Eo(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=JA(s,e,a),t!==null&&(ra(t,s,a,i),Eg(t,s,a)),a}function y0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ZC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function XB(t,e){ZC(t,e),(t=t.alternate)&&ZC(t,e)}function jL(){return null}var OS=typeof reportError=="function"?reportError:function(t){console.error(t)};function JB(t){this._internalRoot=t}pw.prototype.render=JB.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($e(409));fw(t,e,null,null)};pw.prototype.unmount=JB.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Nc(function(){fw(null,t,null,null)}),e[Qo]=null}};function pw(t){this._internalRoot=t}pw.prototype.unstable_scheduleHydration=function(t){if(t){var e=gN();t={blockedOn:null,target:t,priority:e};for(var r=0;r<TA.length&&e!==0&&e<TA[r].priority;r++);TA.splice(r,0,t),r===0&&vN(t)}};function YB(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function e5(){}function OL(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=y0(a);i.call(c)}}var a=jS(e,n,t,0,null,!1,!1,"",e5);return t._reactRootContainer=a,t[Qo]=a.current,Of(t.nodeType===8?t.parentNode:t),Nc(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=y0(A);o.call(c)}}var A=$B(t,0,!1,null,null,!1,!1,"",e5);return t._reactRootContainer=A,t[Qo]=A.current,Of(t.nodeType===8?t.parentNode:t),Nc(function(){fw(e,A,r,n)}),A}function gw(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var A=y0(a);o.call(A)}}fw(e,a,t,s)}else a=OL(r,e,t,s,n);return y0(a)}pN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Kh(e.pendingLanes);r!==0&&(gB(e,r|1),$s(e,mn()),!(lr&6)&&(xd=mn()+500,xl()))}break;case 13:Nc(function(){var n=Po(t,1);if(n!==null){var s=Us();ra(n,t,1,s)}}),XB(t,1)}};wB=function(t){if(t.tag===13){var e=Po(t,134217728);if(e!==null){var r=Us();ra(e,t,134217728,r)}XB(t,134217728)}};mN=function(t){if(t.tag===13){var e=ZA(t),r=Po(t,e);if(r!==null){var n=Us();ra(r,t,e,n)}XB(t,e)}};gN=function(){return br};wN=function(t,e){var r=br;try{return br=t,e()}finally{br=r}};c1=function(t,e,r){switch(e){case"input":if(n1(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=ow(n);if(!s)throw Error($e(90));$I(n),n1(n,s)}}}break;case"textarea":JI(t,r);break;case"select":e=r.value,e!=null&&id(t,!!r.multiple,e,!1)}};sN=qB;iN=Nc;var ML={usingClientEntryPoint:!1,Events:[xp,Xu,ow,rN,nN,qB]},bh={findFiberByHostInstance:lc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HL={bundleType:bh.bundleType,version:bh.version,rendererPackageName:bh.rendererPackageName,rendererConfig:bh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=AN(t),t===null?null:t.stateNode},findFiberByHostInstance:bh.findFiberByHostInstance||jL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Um=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Um.isDisabled&&Um.supportsFiber)try{nw=Um.inject(HL),La=Um}catch{}}hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ML;hi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!YB(e))throw Error($e(200));return DL(t,e,null,r)};hi.createRoot=function(t,e){if(!YB(t))throw Error($e(299));var r=!1,n="",s=OS;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=$B(t,1,!1,null,null,r,!1,n,s),t[Qo]=e.current,Of(t.nodeType===8?t.parentNode:t),new JB(e)};hi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($e(188)):(t=Object.keys(t).join(","),Error($e(268,t)));return t=AN(e),t=t===null?null:t.stateNode,t};hi.flushSync=function(t){return Nc(t)};hi.hydrate=function(t,e,r){if(!mw(e))throw Error($e(200));return gw(null,t,e,!0,r)};hi.hydrateRoot=function(t,e,r){if(!YB(t))throw Error($e(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=OS;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=jS(e,null,t,1,r??null,s,!1,i,a),t[Qo]=e.current,Of(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new pw(e)};hi.render=function(t,e,r){if(!mw(e))throw Error($e(200));return gw(null,t,e,!1,r)};hi.unmountComponentAtNode=function(t){if(!mw(t))throw Error($e(40));return t._reactRootContainer?(Nc(function(){gw(null,null,t,!1,function(){t._reactRootContainer=null,t[Qo]=null})}),!0):!1};hi.unstable_batchedUpdates=qB;hi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!mw(r))throw Error($e(200));if(t==null||t._reactInternals===void 0)throw Error($e(38));return gw(t,e,r,!1,n)};hi.version="18.3.1-next-f1338f8080-20240426";function MS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MS)}catch(t){console.error(t)}}MS(),MI.exports=hi;var $f=MI.exports,t5=$f;Xy.createRoot=t5.createRoot,Xy.hydrateRoot=t5.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var r5="popstate";function VL(t={}){function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return V1("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Xf(s)}return qL(e,r,null,t)}function zr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ia(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KL(){return Math.random().toString(36).substring(2,10)}function n5(t,e){return{usr:t.state,key:t.key,idx:e}}function V1(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Rd(e):e,state:r,key:e&&e.key||n||KL()}}function Xf({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Rd(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function qL(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o="POP",A=null,c=d();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function d(){return(a.state||{idx:null}).idx}function f(){o="POP";let _=d(),w=_==null?null:_-c;c=_,A&&A({action:o,location:b.location,delta:w})}function m(_,w){o="PUSH";let y=V1(b.location,_,w);c=d()+1;let I=n5(y,c),D=b.createHref(y);try{a.pushState(I,"",D)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(D)}i&&A&&A({action:o,location:b.location,delta:1})}function g(_,w){o="REPLACE";let y=V1(b.location,_,w);c=d();let I=n5(y,c),D=b.createHref(y);a.replaceState(I,"",D),i&&A&&A({action:o,location:b.location,delta:0})}function B(_){return GL(_)}let b={get action(){return o},get location(){return t(s,a)},listen(_){if(A)throw new Error("A history only accepts one active listener");return s.addEventListener(r5,f),A=_,()=>{s.removeEventListener(r5,f),A=null}},createHref(_){return e(s,_)},createURL:B,encodeLocation(_){let w=B(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:g,go(_){return a.go(_)}};return b}function GL(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),zr(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Xf(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function HS(t,e,r="/"){return zL(t,e,r,!1)}function zL(t,e,r,n){let s=typeof e=="string"?Rd(e):e,i=ko(s.pathname||"/",r);if(i==null)return null;let a=VS(t);WL(a);let o=null;for(let A=0;o==null&&A<a.length;++A){let c=ik(i);o=nk(a[A],c,n)}return o}function VS(t,e=[],r=[],n="",s=!1){let i=(a,o,A=s,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&A)return;zr(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=_o([n,d.relativePath]),m=r.concat(d);a.children&&a.children.length>0&&(zr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),VS(a.children,e,m,f,A)),!(a.path==null&&!a.index)&&e.push({path:f,score:tk(f,a.index),routesMeta:m})};return t.forEach((a,o)=>{var A;if(a.path===""||!((A=a.path)!=null&&A.includes("?")))i(a,o);else for(let c of KS(a.path))i(a,o,!0,c)}),e}function KS(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=KS(n.join("/")),o=[];return o.push(...a.map(A=>A===""?i:[i,A].join("/"))),s&&o.push(...a),o.map(A=>t.startsWith("/")&&A===""?"/":A)}function WL(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:rk(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var $L=/^:[\w-]+$/,XL=3,JL=2,YL=1,ZL=10,ek=-2,s5=t=>t==="*";function tk(t,e){let r=t.split("/"),n=r.length;return r.some(s5)&&(n+=ek),e&&(n+=JL),r.filter(s=>!s5(s)).reduce((s,i)=>s+($L.test(i)?XL:i===""?YL:ZL),n)}function rk(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function nk(t,e,r=!1){let{routesMeta:n}=t,s={},i="/",a=[];for(let o=0;o<n.length;++o){let A=n[o],c=o===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=B0({path:A.relativePath,caseSensitive:A.caseSensitive,end:c},d),m=A.route;if(!f&&c&&r&&!n[n.length-1].route.index&&(f=B0({path:A.relativePath,caseSensitive:A.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:_o([i,f.pathname]),pathnameBase:lk(_o([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=_o([i,f.pathnameBase]))}return a}function B0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=sk(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,{paramName:d,isOptional:f},m)=>{if(d==="*"){let B=o[m]||"";a=i.slice(0,i.length-B.length).replace(/(.)\/+$/,"$1")}const g=o[m];return f&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function sk(t,e=!1,r=!0){ia(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,A)=>(n.push({paramName:o,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function ik(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ia(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ko(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function ak(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Rd(t):t;return{pathname:r?r.startsWith("/")?r:ok(r,e):e,search:ck(n),hash:uk(s)}}function ok(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function ny(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ak(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ZB(t){let e=Ak(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function ex(t,e,r,n=!1){let s;typeof t=="string"?s=Rd(t):(s={...t},zr(!s.pathname||!s.pathname.includes("?"),ny("?","pathname","search",s)),zr(!s.pathname||!s.pathname.includes("#"),ny("#","pathname","hash",s)),zr(!s.search||!s.search.includes("#"),ny("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}o=f>=0?e[f]:"/"}let A=ak(s,o),c=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!A.pathname.endsWith("/")&&(c||d)&&(A.pathname+="/"),A}var _o=t=>t.join("/").replace(/\/\/+/g,"/"),lk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ck=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var qS=["POST","PUT","PATCH","DELETE"];new Set(qS);var hk=["GET",...qS];new Set(hk);var Dd=L.createContext(null);Dd.displayName="DataRouter";var ww=L.createContext(null);ww.displayName="DataRouterState";L.createContext(!1);var GS=L.createContext({isTransitioning:!1});GS.displayName="ViewTransition";var fk=L.createContext(new Map);fk.displayName="Fetchers";var pk=L.createContext(null);pk.displayName="Await";var Aa=L.createContext(null);Aa.displayName="Navigation";var Cp=L.createContext(null);Cp.displayName="Location";var la=L.createContext({outlet:null,matches:[],isDataRoute:!1});la.displayName="Route";var tx=L.createContext(null);tx.displayName="RouteError";function mk(t,{relative:e}={}){zr(jd(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=L.useContext(Aa),{hash:s,pathname:i,search:a}=Ep(t,{relative:e}),o=i;return r!=="/"&&(o=i==="/"?r:_o([r,i])),n.createHref({pathname:o,search:a,hash:s})}function jd(){return L.useContext(Cp)!=null}function bl(){return zr(jd(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Cp).location}var zS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WS(t){L.useContext(Aa).static||L.useLayoutEffect(t)}function vw(){let{isDataRoute:t}=L.useContext(la);return t?Tk():gk()}function gk(){zr(jd(),"useNavigate() may be used only in the context of a <Router> component.");let t=L.useContext(Dd),{basename:e,navigator:r}=L.useContext(Aa),{matches:n}=L.useContext(la),{pathname:s}=bl(),i=JSON.stringify(ZB(n)),a=L.useRef(!1);return WS(()=>{a.current=!0}),L.useCallback((A,c={})=>{if(ia(a.current,zS),!a.current)return;if(typeof A=="number"){r.go(A);return}let d=ex(A,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:_o([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,i,s,t])}var wk=L.createContext(null);function vk(t){let e=L.useContext(la).outlet;return e&&L.createElement(wk.Provider,{value:t},e)}function Ep(t,{relative:e}={}){let{matches:r}=L.useContext(la),{pathname:n}=bl(),s=JSON.stringify(ZB(r));return L.useMemo(()=>ex(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function yk(t,e){return $S(t,e)}function $S(t,e,r,n){var w;zr(jd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=L.useContext(Aa),{matches:i}=L.useContext(la),a=i[i.length-1],o=a?a.params:{},A=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let y=d&&d.path||"";XS(A,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${A}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=bl(),m;if(e){let y=typeof e=="string"?Rd(e):e;zr(c==="/"||((w=y.pathname)==null?void 0:w.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${y.pathname}" was given in the \`location\` prop.`),m=y}else m=f;let g=m.pathname||"/",B=g;if(c!=="/"){let y=c.replace(/^\//,"").split("/");B="/"+g.replace(/^\//,"").split("/").slice(y.length).join("/")}let b=HS(t,{pathname:B});ia(d||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),ia(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Ek(b&&b.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:_o([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:_o([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return e&&_?L.createElement(Cp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},_):_}function Bk(){let t=Fk(),e=dk(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:i},"ErrorBoundary")," or"," ",L.createElement("code",{style:i},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),r?L.createElement("pre",{style:s},r):null,a)}var xk=L.createElement(Bk,null),bk=class extends L.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?L.createElement(la.Provider,{value:this.props.routeContext},L.createElement(tx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ck({routeContext:t,match:e,children:r}){let n=L.useContext(Dd);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(la.Provider,{value:t},r)}function Ek(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,i=r==null?void 0:r.errors;if(i!=null){let A=s.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);zr(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,A+1))}let a=!1,o=-1;if(r)for(let A=0;A<s.length;A++){let c=s[A];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=A),c.route.id){let{loaderData:d,errors:f}=r,m=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||m){a=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((A,c,d)=>{let f,m=!1,g=null,B=null;r&&(f=i&&c.route.id?i[c.route.id]:void 0,g=c.route.errorElement||xk,a&&(o<0&&d===0?(XS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,B=null):o===d&&(m=!0,B=c.route.hydrateFallbackElement||null)));let b=e.concat(s.slice(0,d+1)),_=()=>{let w;return f?w=g:m?w=B:c.route.Component?w=L.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=A,L.createElement(Ck,{match:c,routeContext:{outlet:A,matches:b,isDataRoute:r!=null},children:w})};return r&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?L.createElement(bk,{location:r.location,revalidation:r.revalidation,component:g,error:f,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):_()},null)}function rx(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _k(t){let e=L.useContext(Dd);return zr(e,rx(t)),e}function Ik(t){let e=L.useContext(ww);return zr(e,rx(t)),e}function Nk(t){let e=L.useContext(la);return zr(e,rx(t)),e}function nx(t){let e=Nk(t),r=e.matches[e.matches.length-1];return zr(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function Sk(){return nx("useRouteId")}function Fk(){var n;let t=L.useContext(tx),e=Ik("useRouteError"),r=nx("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function Tk(){let{router:t}=_k("useNavigate"),e=nx("useNavigate"),r=L.useRef(!1);return WS(()=>{r.current=!0}),L.useCallback(async(s,i={})=>{ia(r.current,zS),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var i5={};function XS(t,e,r){!e&&!i5[t]&&(i5[t]=!0,ia(!1,r))}L.memo(Uk);function Uk({routes:t,future:e,state:r}){return $S(t,void 0,r,e)}function K1({to:t,replace:e,state:r,relative:n}){zr(jd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=L.useContext(Aa);ia(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=L.useContext(la),{pathname:a}=bl(),o=vw(),A=ex(t,ZB(i),a,n==="path"),c=JSON.stringify(A);return L.useEffect(()=>{o(JSON.parse(c),{replace:e,state:r,relative:n})},[o,c,n,e,r]),null}function Qk(t){return vk(t.context)}function Rr(t){zr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Pk({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){zr(!jd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=L.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof r=="string"&&(r=Rd(r));let{pathname:A="/",search:c="",hash:d="",state:f=null,key:m="default"}=r,g=L.useMemo(()=>{let B=ko(A,a);return B==null?null:{location:{pathname:B,search:c,hash:d,state:f,key:m},navigationType:n}},[a,A,c,d,f,m,n]);return ia(g!=null,`<Router basename="${a}"> is not able to match the URL "${A}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:L.createElement(Aa.Provider,{value:o},L.createElement(Cp.Provider,{children:e,value:g}))}function Lk({children:t,location:e}){return yk(q1(t),e)}function q1(t,e=[]){let r=[];return L.Children.forEach(t,(n,s)=>{if(!L.isValidElement(n))return;let i=[...e,s];if(n.type===L.Fragment){r.push.apply(r,q1(n.props.children,i));return}zr(n.type===Rr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=q1(n.props.children,i)),r.push(a)}),r}var Ug="get",Qg="application/x-www-form-urlencoded";function yw(t){return t!=null&&typeof t.tagName=="string"}function kk(t){return yw(t)&&t.tagName.toLowerCase()==="button"}function Rk(t){return yw(t)&&t.tagName.toLowerCase()==="form"}function Dk(t){return yw(t)&&t.tagName.toLowerCase()==="input"}function jk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ok(t,e){return t.button===0&&(!e||e==="_self")&&!jk(t)}var Qm=null;function Mk(){if(Qm===null)try{new FormData(document.createElement("form"),0),Qm=!1}catch{Qm=!0}return Qm}var Hk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sy(t){return t!=null&&!Hk.has(t)?(ia(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qg}"`),null):t}function Vk(t,e){let r,n,s,i,a;if(Rk(t)){let o=t.getAttribute("action");n=o?ko(o,e):null,r=t.getAttribute("method")||Ug,s=sy(t.getAttribute("enctype"))||Qg,i=new FormData(t)}else if(kk(t)||Dk(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let A=t.getAttribute("formaction")||o.getAttribute("action");if(n=A?ko(A,e):null,r=t.getAttribute("formmethod")||o.getAttribute("method")||Ug,s=sy(t.getAttribute("formenctype"))||sy(o.getAttribute("enctype"))||Qg,i=new FormData(o,t),!Mk()){let{name:c,type:d,value:f}=t;if(d==="image"){let m=c?`${c}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else c&&i.append(c,f)}}else{if(yw(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ug,n=null,s=Qg,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function sx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kk(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&ko(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function qk(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Gk(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function zk(t,e,r){let n=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await qk(i,r);return a.links?a.links():[]}return[]}));return Jk(n.flat(1).filter(Gk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function a5(t,e,r,n,s,i){let a=(A,c)=>r[c]?A.route.id!==r[c].route.id:!0,o=(A,c)=>{var d;return r[c].pathname!==A.pathname||((d=r[c].route.path)==null?void 0:d.endsWith("*"))&&r[c].params["*"]!==A.params["*"]};return i==="assets"?e.filter((A,c)=>a(A,c)||o(A,c)):i==="data"?e.filter((A,c)=>{var f;let d=n.routes[A.route.id];if(!d||!d.hasLoader)return!1;if(a(A,c)||o(A,c))return!0;if(A.route.shouldRevalidate){let m=A.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:A.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Wk(t,e,{includeHydrateFallback:r}={}){return $k(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function $k(t){return[...new Set(t)]}function Xk(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function Jk(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let i=JSON.stringify(Xk(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function JS(){let t=L.useContext(Dd);return sx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Yk(){let t=L.useContext(ww);return sx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ix=L.createContext(void 0);ix.displayName="FrameworkContext";function YS(){let t=L.useContext(ix);return sx(t,"You must render this element inside a <HydratedRouter> element"),t}function Zk(t,e){let r=L.useContext(ix),[n,s]=L.useState(!1),[i,a]=L.useState(!1),{onFocus:o,onBlur:A,onMouseEnter:c,onMouseLeave:d,onTouchStart:f}=e,m=L.useRef(null);L.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let b=w=>{w.forEach(y=>{a(y.isIntersecting)})},_=new IntersectionObserver(b,{threshold:.5});return m.current&&_.observe(m.current),()=>{_.disconnect()}}},[t]),L.useEffect(()=>{if(n){let b=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(b)}}},[n]);let g=()=>{s(!0)},B=()=>{s(!1),a(!1)};return r?t!=="intent"?[i,m,{}]:[i,m,{onFocus:Ch(o,g),onBlur:Ch(A,B),onMouseEnter:Ch(c,g),onMouseLeave:Ch(d,B),onTouchStart:Ch(f,g)}]:[!1,m,{}]}function Ch(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function eR({page:t,...e}){let{router:r}=JS(),n=L.useMemo(()=>HS(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?L.createElement(rR,{page:t,matches:n,...e}):null}function tR(t){let{manifest:e,routeModules:r}=YS(),[n,s]=L.useState([]);return L.useEffect(()=>{let i=!1;return zk(t,e,r).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,r]),n}function rR({page:t,matches:e,...r}){let n=bl(),{manifest:s,routeModules:i}=YS(),{basename:a}=JS(),{loaderData:o,matches:A}=Yk(),c=L.useMemo(()=>a5(t,e,A,s,n,"data"),[t,e,A,s,n]),d=L.useMemo(()=>a5(t,e,A,s,n,"assets"),[t,e,A,s,n]),f=L.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let B=new Set,b=!1;if(e.forEach(w=>{var I;let y=s.routes[w.route.id];!y||!y.hasLoader||(!c.some(D=>D.route.id===w.route.id)&&w.route.id in o&&((I=i[w.route.id])!=null&&I.shouldRevalidate)||y.hasClientLoader?b=!0:B.add(w.route.id))}),B.size===0)return[];let _=Kk(t,a,"data");return b&&B.size>0&&_.searchParams.set("_routes",e.filter(w=>B.has(w.route.id)).map(w=>w.route.id).join(",")),[_.pathname+_.search]},[a,o,n,s,c,e,t,i]),m=L.useMemo(()=>Wk(d,s),[d,s]),g=tR(d);return L.createElement(L.Fragment,null,f.map(B=>L.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...r})),m.map(B=>L.createElement("link",{key:B,rel:"modulepreload",href:B,...r})),g.map(({key:B,link:b})=>L.createElement("link",{key:B,nonce:r.nonce,...b})))}function nR(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var ZS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ZS&&(window.__reactRouterVersion="7.8.1")}catch{}function sR({basename:t,children:e,window:r}){let n=L.useRef();n.current==null&&(n.current=VL({window:r,v5Compat:!0}));let s=n.current,[i,a]=L.useState({action:s.action,location:s.location}),o=L.useCallback(A=>{L.startTransition(()=>a(A))},[a]);return L.useLayoutEffect(()=>s.listen(o),[s,o]),L.createElement(Pk,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var eF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tF=L.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:o,target:A,to:c,preventScrollReset:d,viewTransition:f,...m},g){let{basename:B}=L.useContext(Aa),b=typeof c=="string"&&eF.test(c),_,w=!1;if(typeof c=="string"&&b&&(_=c,ZS))try{let Q=new URL(window.location.href),j=c.startsWith("//")?new URL(Q.protocol+c):new URL(c),S=ko(j.pathname,B);j.origin===Q.origin&&S!=null?c=S+j.search+j.hash:w=!0}catch{ia(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=mk(c,{relative:s}),[I,D,H]=Zk(n,m),k=oR(c,{replace:a,state:o,target:A,preventScrollReset:d,relative:s,viewTransition:f});function T(Q){e&&e(Q),Q.defaultPrevented||k(Q)}let E=L.createElement("a",{...m,...H,href:_||y,onClick:w||i?e:T,ref:nR(g,D),target:A,"data-discover":!b&&r==="render"?"true":void 0});return I&&!b?L.createElement(L.Fragment,null,E,L.createElement(eR,{page:y})):E});tF.displayName="Link";var on=L.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:o,children:A,...c},d){let f=Ep(a,{relative:c.relative}),m=bl(),g=L.useContext(ww),{navigator:B,basename:b}=L.useContext(Aa),_=g!=null&&dR(f)&&o===!0,w=B.encodeLocation?B.encodeLocation(f).pathname:f.pathname,y=m.pathname,I=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(y=y.toLowerCase(),I=I?I.toLowerCase():null,w=w.toLowerCase()),I&&b&&(I=ko(I,b)||I);const D=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let H=y===w||!s&&y.startsWith(w)&&y.charAt(D)==="/",k=I!=null&&(I===w||!s&&I.startsWith(w)&&I.charAt(w.length)==="/"),T={isActive:H,isPending:k,isTransitioning:_},E=H?e:void 0,Q;typeof n=="function"?Q=n(T):Q=[n,H?"active":null,k?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let j=typeof i=="function"?i(T):i;return L.createElement(tF,{...c,"aria-current":E,className:Q,ref:d,style:j,to:a,viewTransition:o},typeof A=="function"?A(T):A)});on.displayName="NavLink";var iR=L.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:i,method:a=Ug,action:o,onSubmit:A,relative:c,preventScrollReset:d,viewTransition:f,...m},g)=>{let B=cR(),b=uR(o,{relative:c}),_=a.toLowerCase()==="get"?"get":"post",w=typeof o=="string"&&eF.test(o),y=I=>{if(A&&A(I),I.defaultPrevented)return;I.preventDefault();let D=I.nativeEvent.submitter,H=(D==null?void 0:D.getAttribute("formmethod"))||a;B(D||I.currentTarget,{fetcherKey:e,method:H,navigate:r,replace:s,state:i,relative:c,preventScrollReset:d,viewTransition:f})};return L.createElement("form",{ref:g,method:_,action:b,onSubmit:n?A:y,...m,"data-discover":!w&&t==="render"?"true":void 0})});iR.displayName="Form";function aR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rF(t){let e=L.useContext(Dd);return zr(e,aR(t)),e}function oR(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:a}={}){let o=vw(),A=bl(),c=Ep(t,{relative:i});return L.useCallback(d=>{if(Ok(d,e)){d.preventDefault();let f=r!==void 0?r:Xf(A)===Xf(c);o(t,{replace:f,state:n,preventScrollReset:s,relative:i,viewTransition:a})}},[A,o,c,r,n,e,t,s,i,a])}var AR=0,lR=()=>`__${String(++AR)}__`;function cR(){let{router:t}=rF("useSubmit"),{basename:e}=L.useContext(Aa),r=Sk();return L.useCallback(async(n,s={})=>{let{action:i,method:a,encType:o,formData:A,body:c}=Vk(n,e);if(s.navigate===!1){let d=s.fetcherKey||lR();await t.fetch(d,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:A,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:A,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function uR(t,{relative:e}={}){let{basename:r}=L.useContext(Aa),n=L.useContext(la);zr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Ep(t||".",{relative:e})},a=bl();if(t==null){i.search=a.search;let o=new URLSearchParams(i.search),A=o.getAll("index");if(A.some(d=>d==="")){o.delete("index"),A.filter(f=>f).forEach(f=>o.append("index",f));let d=o.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:_o([r,i.pathname])),Xf(i)}function dR(t,{relative:e}={}){let r=L.useContext(GS);zr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=rF("useViewTransitionState"),s=Ep(t,{relative:e});if(!r.isTransitioning)return!1;let i=ko(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=ko(r.nextLocation.pathname,n)||r.nextLocation.pathname;return B0(s.pathname,a)!=null||B0(s.pathname,i)!=null}var o5={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},hR=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],A=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(A>>10)),e[n++]=String.fromCharCode(56320+(A&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},sF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,A=s+2<t.length,c=A?t[s+2]:0,d=i>>2,f=(i&3)<<4|o>>4;let m=(o&15)<<2|c>>6,g=c&63;A||(g=64,a||(m=64)),n.push(r[d],r[f],r[m],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||f==null)throw new fR;const m=i<<2|o>>4;if(n.push(m),c!==64){const g=o<<4&240|c>>2;if(n.push(g),f!==64){const B=c<<6&192|f;n.push(B)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pR=function(t){const e=nF(t);return sF.encodeByteArray(e,!0)},x0=function(t){return pR(t).replace(/\./g,"")},iF=function(t){try{return sF.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=()=>mR().__FIREBASE_DEFAULTS__,wR=()=>{if(typeof process>"u"||typeof o5>"u")return;const t=o5.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iF(t[1]);return e&&JSON.parse(e)},Bw=()=>{try{return gR()||wR()||vR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aF=t=>{var e,r;return(r=(e=Bw())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},yR=t=>{const e=aF(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},oF=()=>{var t;return(t=Bw())===null||t===void 0?void 0:t.config},AF=t=>{var e;return(e=Bw())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[x0(JSON.stringify(r)),x0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function CR(){var t;const e=(t=Bw())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ER(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _R(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NR(){const t=Un();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lF(){return!CR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cF(){try{return typeof indexedDB=="object"}catch{return!1}}function SR(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="FirebaseError";class Ho extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=FR,Object.setPrototypeOf(this,Ho.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_p.prototype.create)}}class _p{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?TR(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new Ho(s,o,n)}}function TR(t,e){return t.replace(UR,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const UR=/\{\$([^}]+)}/g;function QR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function b0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(A5(i)&&A5(a)){if(!b0(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function A5(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Gh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function zh(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function PR(t,e){const r=new LR(t,e);return r.subscribe.bind(r)}class LR{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");kR(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=iy),s.error===void 0&&(s.error=iy),s.complete===void 0&&(s.complete=iy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kR(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function iy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t){return t&&t._delegate?t._delegate:t}class Sc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new BR;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jR(e))try{this.getOrInitializeService({instanceIdentifier:ec})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=ec){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ec){return this.instances.has(e)}getOptions(e=ec){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:DR(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ec){return this.component?this.component.multipleInstances?e:ec:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DR(t){return t===ec?void 0:t}function jR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new RR(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(sr||(sr={}));const MR={debug:sr.DEBUG,verbose:sr.VERBOSE,info:sr.INFO,warn:sr.WARN,error:sr.ERROR,silent:sr.SILENT},HR=sr.INFO,VR={[sr.DEBUG]:"log",[sr.VERBOSE]:"log",[sr.INFO]:"info",[sr.WARN]:"warn",[sr.ERROR]:"error"},KR=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=VR[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let ax=class{constructor(e){this.name=e,this._logLevel=HR,this._logHandler=KR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in sr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,sr.DEBUG,...e),this._logHandler(this,sr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,sr.VERBOSE,...e),this._logHandler(this,sr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,sr.INFO,...e),this._logHandler(this,sr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,sr.WARN,...e),this._logHandler(this,sr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,sr.ERROR,...e),this._logHandler(this,sr.ERROR,...e)}};const qR=(t,e)=>e.some(r=>t instanceof r);let l5,c5;function GR(){return l5||(l5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zR(){return c5||(c5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uF=new WeakMap,G1=new WeakMap,dF=new WeakMap,ay=new WeakMap,ox=new WeakMap;function WR(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(tl(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&uF.set(r,t)}).catch(()=>{}),ox.set(e,t),e}function $R(t){if(G1.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});G1.set(t,e)}let z1={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return G1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dF.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return tl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XR(t){z1=t(z1)}function JR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(oy(this),e,...r);return dF.set(n,e.sort?e.sort():[e]),tl(n)}:zR().includes(t)?function(...e){return t.apply(oy(this),e),tl(uF.get(this))}:function(...e){return tl(t.apply(oy(this),e))}}function YR(t){return typeof t=="function"?JR(t):(t instanceof IDBTransaction&&$R(t),qR(t,GR())?new Proxy(t,z1):t)}function tl(t){if(t instanceof IDBRequest)return WR(t);if(ay.has(t))return ay.get(t);const e=YR(t);return e!==t&&(ay.set(t,e),ox.set(e,t)),e}const oy=t=>ox.get(t);function ZR(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=tl(a);return n&&a.addEventListener("upgradeneeded",A=>{n(tl(a.result),A.oldVersion,A.newVersion,tl(a.transaction),A)}),r&&a.addEventListener("blocked",A=>r(A.oldVersion,A.newVersion,A)),o.then(A=>{i&&A.addEventListener("close",()=>i()),s&&A.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const eD=["get","getKey","getAll","getAllKeys","count"],tD=["put","add","delete","clear"],Ay=new Map;function u5(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ay.get(e))return Ay.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=tD.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||eD.includes(r)))return;const i=async function(a,...o){const A=this.transaction(a,s?"readwrite":"readonly");let c=A.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&A.done]))[0]};return Ay.set(e,i),i}XR(t=>({...t,get:(e,r,n)=>u5(e,r)||t.get(e,r,n),has:(e,r)=>!!u5(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(nD(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function nD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const W1="@firebase/app",d5="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new ax("@firebase/app"),sD="@firebase/app-compat",iD="@firebase/analytics-compat",aD="@firebase/analytics",oD="@firebase/app-check-compat",AD="@firebase/app-check",lD="@firebase/auth",cD="@firebase/auth-compat",uD="@firebase/database",dD="@firebase/data-connect",hD="@firebase/database-compat",fD="@firebase/functions",pD="@firebase/functions-compat",mD="@firebase/installations",gD="@firebase/installations-compat",wD="@firebase/messaging",vD="@firebase/messaging-compat",yD="@firebase/performance",BD="@firebase/performance-compat",xD="@firebase/remote-config",bD="@firebase/remote-config-compat",CD="@firebase/storage",ED="@firebase/storage-compat",_D="@firebase/firestore",ID="@firebase/vertexai-preview",ND="@firebase/firestore-compat",SD="firebase",FD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="[DEFAULT]",TD={[W1]:"fire-core",[sD]:"fire-core-compat",[aD]:"fire-analytics",[iD]:"fire-analytics-compat",[AD]:"fire-app-check",[oD]:"fire-app-check-compat",[lD]:"fire-auth",[cD]:"fire-auth-compat",[uD]:"fire-rtdb",[dD]:"fire-data-connect",[hD]:"fire-rtdb-compat",[fD]:"fire-fn",[pD]:"fire-fn-compat",[mD]:"fire-iid",[gD]:"fire-iid-compat",[wD]:"fire-fcm",[vD]:"fire-fcm-compat",[yD]:"fire-perf",[BD]:"fire-perf-compat",[xD]:"fire-rc",[bD]:"fire-rc-compat",[CD]:"fire-gcs",[ED]:"fire-gcs-compat",[_D]:"fire-fst",[ND]:"fire-fst-compat",[ID]:"fire-vertex","fire-js":"fire-js",[SD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Map,X1=new Map,J1=new Map;function h5(t,e){try{t.container.addComponent(e)}catch(r){Ro.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Cd(t){const e=t.name;if(J1.has(e))return Ro.debug(`There were multiple attempts to register component ${e}.`),!1;J1.set(e,t);for(const r of bd.values())h5(r,t);for(const r of X1.values())h5(r,t);return!0}function Ax(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ta(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rl=new _p("app","Firebase",UD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Sc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=FD;function lx(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:$1,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw rl.create("bad-app-name",{appName:String(s)});if(r||(r=oF()),!r)throw rl.create("no-options");const i=bd.get(s);if(i){if(b0(r,i.options)&&b0(n,i.config))return i;throw rl.create("duplicate-app",{appName:s})}const a=new OR(s);for(const A of J1.values())a.addComponent(A);const o=new QD(r,n,a);return bd.set(s,o),o}function cx(t=$1){const e=bd.get(t);if(!e&&t===$1&&oF())return lx();if(!e)throw rl.create("no-app",{appName:t});return e}async function PD(t){let e=!1;const r=t.name;bd.has(r)?(e=!0,bd.delete(r)):X1.has(r)&&t.decRefCount()<=0&&(X1.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function nl(t,e,r){var n;let s=(n=TD[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ro.warn(o.join(" "));return}Cd(new Sc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="firebase-heartbeat-database",kD=1,Jf="firebase-heartbeat-store";let ly=null;function hF(){return ly||(ly=ZR(LD,kD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jf)}catch(r){console.warn(r)}}}}).catch(t=>{throw rl.create("idb-open",{originalErrorMessage:t.message})})),ly}async function RD(t){try{const r=(await hF()).transaction(Jf),n=await r.objectStore(Jf).get(fF(t));return await r.done,n}catch(e){if(e instanceof Ho)Ro.warn(e.message);else{const r=rl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ro.warn(r.message)}}}async function f5(t,e){try{const n=(await hF()).transaction(Jf,"readwrite");await n.objectStore(Jf).put(e,fF(t)),await n.done}catch(r){if(r instanceof Ho)Ro.warn(r.message);else{const n=rl.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ro.warn(n.message)}}}function fF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=1024,jD=30*24*60*60*1e3;class OD{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new HD(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=p5();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=jD}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ro.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=p5(),{heartbeatsToSend:n,unsentEntries:s}=MD(this._heartbeatsCache.heartbeats),i=x0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Ro.warn(r),""}}}function p5(){return new Date().toISOString().substring(0,10)}function MD(t,e=DD){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),m5(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),m5(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class HD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cF()?SR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await RD(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return f5(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return f5(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function m5(t){return x0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){Cd(new Sc("platform-logger",e=>new rD(e),"PRIVATE")),Cd(new Sc("heartbeat",e=>new OD(e),"PRIVATE")),nl(W1,d5,t),nl(W1,d5,"esm2017"),nl("fire-js","")}VD("");function ux(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function pF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KD=pF,mF=new _p("auth","Firebase",pF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=new ax("@firebase/auth");function qD(t,...e){C0.logLevel<=sr.WARN&&C0.warn(`Auth (${Od}): ${t}`,...e)}function Pg(t,...e){C0.logLevel<=sr.ERROR&&C0.error(`Auth (${Od}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t,...e){throw dx(t,...e)}function Ra(t,...e){return dx(t,...e)}function gF(t,e,r){const n=Object.assign(Object.assign({},KD()),{[e]:r});return new _p("auth","Firebase",n).create(e,{appName:t.name})}function Io(t){return gF(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dx(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return mF.create(t,...e)}function Dt(t,e,...r){if(!t)throw dx(e,...r)}function yo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pg(e),new Error(e)}function Do(t,e){t||yo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function GD(){return g5()==="http:"||g5()==="https:"}function g5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GD()||_R()||"connection"in navigator)?navigator.onLine:!0}function WD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,r){this.shortDelay=e,this.longDelay=r,Do(r>e,"Short delay should be less than long delay!"),this.isMobile=bR()||IR()}get(){return zD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t,e){Do(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=new Np(3e4,6e4);function Cl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function El(t,e,r,n,s={}){return vF(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Ip(Object.assign({key:t.config.apiKey},a)).slice(1),A=await t._getAdditionalHeaders();A["Content-Type"]="application/json",t.languageCode&&(A["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:A},i);return ER()||(c.referrerPolicy="no-referrer"),wF.fetch()(yF(t,t.config.apiHost,r,o),c)})}async function vF(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},$D),e);try{const s=new YD(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Pm(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[A,c]=o.split(" : ");if(A==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pm(t,"credential-already-in-use",a);if(A==="EMAIL_EXISTS")throw Pm(t,"email-already-in-use",a);if(A==="USER_DISABLED")throw Pm(t,"user-disabled",a);const d=n[A]||A.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw gF(t,d,c);aa(t,d)}}catch(s){if(s instanceof Ho)throw s;aa(t,"network-request-failed",{message:String(s)})}}async function Sp(t,e,r,n,s={}){const i=await El(t,e,r,n,s);return"mfaPendingCredential"in i&&aa(t,"multi-factor-auth-required",{_serverResponse:i}),i}function yF(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?hx(t.config,s):`${t.config.apiScheme}://${s}`}function JD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class YD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ra(this.auth,"network-request-failed")),XD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pm(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Ra(t,e,n);return s.customData._tokenResponse=r,s}function w5(t){return t!==void 0&&t.enterprise!==void 0}class ZD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return JD(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function ej(t,e){return El(t,"GET","/v2/recaptchaConfig",Cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tj(t,e){return El(t,"POST","/v1/accounts:delete",e)}async function BF(t,e){return El(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rj(t,e=!1){const r=cn(t),n=await r.getIdToken(e),s=fx(n);Dt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:pf(cy(s.auth_time)),issuedAtTime:pf(cy(s.iat)),expirationTime:pf(cy(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function cy(t){return Number(t)*1e3}function fx(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Pg("JWT malformed, contained fewer than 3 sections"),null;try{const s=iF(r);return s?JSON.parse(s):(Pg("Failed to decode base64 JWT payload"),null)}catch(s){return Pg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function v5(t){const e=fx(t);return Dt(e,"internal-error"),Dt(typeof e.exp<"u","internal-error"),Dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yf(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ho&&nj(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function nj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=pf(this.lastLoginAt),this.creationTime=pf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E0(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Yf(t,BF(r,{idToken:n}));Dt(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?xF(i.providerUserInfo):[],o=aj(t.providerData,a),A=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=A?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Z1(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function ij(t){const e=cn(t);await E0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aj(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function xF(t){return t.map(e=>{var{providerId:r}=e,n=ux(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj(t,e){const r=await vF(t,{},async()=>{const n=Ip({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=yF(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",wF.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Aj(t,e){return El(t,"POST","/v2/accounts:revokeToken",Cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Dt(e.idToken,"internal-error"),Dt(typeof e.idToken<"u","internal-error"),Dt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Dt(e.length!==0,"internal-error");const r=v5(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await oj(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new ud;return n&&(Dt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Dt(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Dt(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ud,this.toJSON())}_performRefresh(){return yo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e){Dt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bo{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=ux(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Z1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Yf(this,this.stsTokenManager.getToken(this.auth,e));return Dt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return rj(this,e)}reload(){return ij(this)}_assign(e){this!==e&&(Dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Bo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await E0(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ta(this.auth.app))return Promise.reject(Io(this.auth));const e=await this.getIdToken();return await Yf(this,tj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,A,c,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,g=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,B=(a=r.photoURL)!==null&&a!==void 0?a:void 0,b=(o=r.tenantId)!==null&&o!==void 0?o:void 0,_=(A=r._redirectEventId)!==null&&A!==void 0?A:void 0,w=(c=r.createdAt)!==null&&c!==void 0?c:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:D,isAnonymous:H,providerData:k,stsTokenManager:T}=r;Dt(I&&T,e,"internal-error");const E=ud.fromJSON(this.name,T);Dt(typeof I=="string",e,"internal-error"),vA(f,e.name),vA(m,e.name),Dt(typeof D=="boolean",e,"internal-error"),Dt(typeof H=="boolean",e,"internal-error"),vA(g,e.name),vA(B,e.name),vA(b,e.name),vA(_,e.name),vA(w,e.name),vA(y,e.name);const Q=new Bo({uid:I,auth:e,email:m,emailVerified:D,displayName:f,isAnonymous:H,photoURL:B,phoneNumber:g,tenantId:b,stsTokenManager:E,createdAt:w,lastLoginAt:y});return k&&Array.isArray(k)&&(Q.providerData=k.map(j=>Object.assign({},j))),_&&(Q._redirectEventId=_),Q}static async _fromIdTokenResponse(e,r,n=!1){const s=new ud;s.updateFromServerResponse(r);const i=new Bo({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await E0(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Dt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?xF(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new ud;o.updateFromIdToken(n);const A=new Bo({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Z1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(A,c),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=new Map;function xo(t){Do(t instanceof Function,"Expected a class definition");let e=y5.get(t);return e?(Do(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,y5.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}bF.type="NONE";const B5=bF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t,e,r){return`firebase:${t}:${e}:${r}`}class dd{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Lg(this.userKey,s.apiKey,i),this.fullPersistenceKey=Lg("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new dd(xo(B5),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||xo(B5);const a=Lg(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const d=await c._get(a);if(d){const f=Bo._fromJSON(e,d);c!==i&&(o=f),i=c;break}}catch{}const A=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!A.length?new dd(i,e,n):(i=A[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new dd(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SF(e))return"Blackberry";if(FF(e))return"Webos";if(EF(e))return"Safari";if((e.includes("chrome/")||_F(e))&&!e.includes("edge/"))return"Chrome";if(NF(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function CF(t=Un()){return/firefox\//i.test(t)}function EF(t=Un()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _F(t=Un()){return/crios\//i.test(t)}function IF(t=Un()){return/iemobile/i.test(t)}function NF(t=Un()){return/android/i.test(t)}function SF(t=Un()){return/blackberry/i.test(t)}function FF(t=Un()){return/webos/i.test(t)}function px(t=Un()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lj(t=Un()){var e;return px(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cj(){return NR()&&document.documentMode===10}function TF(t=Un()){return px(t)||NF(t)||FF(t)||SF(t)||/windows phone/i.test(t)||IF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t,e=[]){let r;switch(t){case"Browser":r=x5(Un());break;case"Worker":r=`${x5(Un())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Od}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const A=e(i);a(A)}catch(A){o(A)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e={}){return El(t,"GET","/v2/passwordPolicy",Cl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=6;class fj{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:hj,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const A={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,A),this.validatePasswordCharacterOptions(e,A),A.isValid&&(A.isValid=(r=A.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),A.isValid&&(A.isValid=(n=A.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),A.isValid&&(A.isValid=(s=A.containsLowercaseLetter)!==null&&s!==void 0?s:!0),A.isValid&&(A.isValid=(i=A.containsUppercaseLetter)!==null&&i!==void 0?i:!0),A.isValid&&(A.isValid=(a=A.containsNumericCharacter)!==null&&a!==void 0?a:!0),A.isValid&&(A.isValid=(o=A.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),A}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b5(this),this.idTokenSubscription=new b5(this),this.beforeStateQueue=new uj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=xo(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await dd.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await BF(this,{idToken:e}),n=await Bo._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ta(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,A=await this.tryRedirectSignIn(e);(!a||a===o)&&(A!=null&&A.user)&&(s=A.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await E0(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ta(this.app))return Promise.reject(Io(this));const r=e?cn(e):null;return r&&Dt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ta(this.app)?Promise.reject(Io(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ta(this.app)?Promise.reject(Io(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dj(this),r=new fj(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _p("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Aj(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&xo(e)||this._popupRedirectResolver;Dt(r,this,"argument-error"),this.redirectPersistenceManager=await dd.create(this,[xo(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const A=e.addObserver(r,n,s);return()=>{a=!0,A()}}else{const A=e.addObserver(r);return()=>{a=!0,A()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&qD(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Oc(t){return cn(t)}class b5{constructor(e){this.auth=e,this.observer=null,this.addObserver=PR(r=>this.observer=r)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mj(t){xw=t}function QF(t){return xw.loadJS(t)}function gj(){return xw.recaptchaEnterpriseScript}function wj(){return xw.gapiScript}function vj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const yj="recaptcha-enterprise",Bj="NO_RECAPTCHA";class xj{constructor(e){this.type=yj,this.auth=Oc(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{ej(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(A=>{if(A.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new ZD(A);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(A=>{o(A)})})}function s(i,a,o){const A=window.grecaptcha;w5(A)?A.enterprise.ready(()=>{A.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(Bj)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(o=>{if(!r&&w5(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let A=gj();A.length!==0&&(A+=o),QF(A).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function C5(t,e,r,n=!1){const s=new xj(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function e2(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await C5(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await C5(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t,e){const r=Ax(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(b0(i,e??{}))return s;aa(s,"already-initialized")}return r.initialize({options:e})}function Cj(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(xo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Ej(t,e,r){const n=Oc(t);Dt(n._canInitEmulator,n,"emulator-config-failed"),Dt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=PF(e),{host:a,port:o}=_j(e),A=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${A}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Ij()}function PF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _j(t){const e=PF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:E5(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:E5(a)}}}function E5(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Ij(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return yo("not implemented")}_getIdTokenResponse(e){return yo("not implemented")}_linkToIdToken(e,r){return yo("not implemented")}_getReauthenticationResolver(e){return yo("not implemented")}}async function Nj(t,e){return El(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t,e){return Sp(t,"POST","/v1/accounts:signInWithPassword",Cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fj(t,e){return Sp(t,"POST","/v1/accounts:signInWithEmailLink",Cl(t,e))}async function Tj(t,e){return Sp(t,"POST","/v1/accounts:signInWithEmailLink",Cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf extends mx{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Zf(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Zf(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return e2(e,r,"signInWithPassword",Sj);case"emailLink":return Fj(e,{email:this._email,oobCode:this._password});default:aa(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return e2(e,n,"signUpPassword",Nj);case"emailLink":return Tj(e,{idToken:r,email:this._email,oobCode:this._password});default:aa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(t,e){return Sp(t,"POST","/v1/accounts:signInWithIdp",Cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="http://localhost";class Fc extends mx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Fc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):aa("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=ux(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new Fc(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return hd(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,hd(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,hd(e,r)}buildRequest(){const e={requestUri:Uj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Ip(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Pj(t){const e=Gh(zh(t)).link,r=e?Gh(zh(e)).deep_link_id:null,n=Gh(zh(t)).deep_link_id;return(n?Gh(zh(n)).link:null)||n||r||e||t}class gx{constructor(e){var r,n,s,i,a,o;const A=Gh(zh(e)),c=(r=A.apiKey)!==null&&r!==void 0?r:null,d=(n=A.oobCode)!==null&&n!==void 0?n:null,f=Qj((s=A.mode)!==null&&s!==void 0?s:null);Dt(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(i=A.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=A.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=A.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=Pj(e);try{return new gx(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){this.providerId=Md.PROVIDER_ID}static credential(e,r){return Zf._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=gx.parseLink(r);return Dt(n,"argument-error"),Zf._fromEmailAndCode(e,n.code,n.tenantId)}}Md.PROVIDER_ID="password";Md.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Md.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends LF{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA extends Fp{constructor(){super("facebook.com")}static credential(e){return Fc._fromParams({providerId:QA.PROVIDER_ID,signInMethod:QA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return QA.credentialFromTaggedObject(e)}static credentialFromError(e){return QA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return QA.credential(e.oauthAccessToken)}catch{return null}}}QA.FACEBOOK_SIGN_IN_METHOD="facebook.com";QA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA extends Fp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Fc._fromParams({providerId:PA.PROVIDER_ID,signInMethod:PA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return PA.credentialFromTaggedObject(e)}static credentialFromError(e){return PA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return PA.credential(r,n)}catch{return null}}}PA.GOOGLE_SIGN_IN_METHOD="google.com";PA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA extends Fp{constructor(){super("github.com")}static credential(e){return Fc._fromParams({providerId:LA.PROVIDER_ID,signInMethod:LA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return LA.credentialFromTaggedObject(e)}static credentialFromError(e){return LA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return LA.credential(e.oauthAccessToken)}catch{return null}}}LA.GITHUB_SIGN_IN_METHOD="github.com";LA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends Fp{constructor(){super("twitter.com")}static credential(e,r){return Fc._fromParams({providerId:kA.PROVIDER_ID,signInMethod:kA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return kA.credentialFromTaggedObject(e)}static credentialFromError(e){return kA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return kA.credential(r,n)}catch{return null}}}kA.TWITTER_SIGN_IN_METHOD="twitter.com";kA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(t,e){return Sp(t,"POST","/v1/accounts:signUp",Cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Bo._fromIdTokenResponse(e,n,s),a=_5(n);return new Tc({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=_5(n);return new Tc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function _5(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends Ho{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,_0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new _0(e,r,n,s)}}function kF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?_0._fromErrorAndOperation(t,i,e,n):i})}async function kj(t,e,r=!1){const n=await Yf(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Tc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rj(t,e,r=!1){const{auth:n}=t;if(Ta(n.app))return Promise.reject(Io(n));const s="reauthenticate";try{const i=await Yf(t,kF(n,s,e,t),r);Dt(i.idToken,n,"internal-error");const a=fx(i.idToken);Dt(a,n,"internal-error");const{sub:o}=a;return Dt(t.uid===o,n,"user-mismatch"),Tc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&aa(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t,e,r=!1){if(Ta(t.app))return Promise.reject(Io(t));const n="signIn",s=await kF(t,n,e),i=await Tc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function Dj(t,e){return RF(Oc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(t){const e=Oc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jj(t,e,r){if(Ta(t.app))return Promise.reject(Io(t));const n=Oc(t),a=await e2(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lj).catch(A=>{throw A.code==="auth/password-does-not-meet-requirements"&&DF(t),A}),o=await Tc._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function Oj(t,e,r){return Ta(t.app)?Promise.reject(Io(t)):Dj(cn(t),Md.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&DF(t),n})}function Mj(t,e,r,n){return cn(t).onIdTokenChanged(e,r,n)}function Hj(t,e,r){return cn(t).beforeAuthStateChanged(e,r)}function jF(t,e,r,n){return cn(t).onAuthStateChanged(e,r,n)}function OF(t){return cn(t).signOut()}const I0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(I0,"1"),this.storage.removeItem(I0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=1e3,Kj=10;class HF extends MF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,A)=>{this.notifyListeners(a,A)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);cj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Kj):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Vj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}HF.type="LOCAL";const qj=HF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF extends MF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}VF.type="SESSION";const KF=VF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new bw(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),A=await Gj(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:A})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,A)=>{const c=wx("",20);s.port1.start();const d=setTimeout(()=>{A(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{A(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(m.data.response);break;default:clearTimeout(d),clearTimeout(i),A(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(){return window}function Wj(t){Da().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(){return typeof Da().WorkerGlobalScope<"u"&&typeof Da().importScripts=="function"}async function $j(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Jj(){return qF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF="firebaseLocalStorageDb",Yj=1,N0="firebaseLocalStorage",zF="fbase_key";class Tp{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Cw(t,e){return t.transaction([N0],e?"readwrite":"readonly").objectStore(N0)}function Zj(){const t=indexedDB.deleteDatabase(GF);return new Tp(t).toPromise()}function t2(){const t=indexedDB.open(GF,Yj);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(N0,{keyPath:zF})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(N0)?e(n):(n.close(),await Zj(),e(await t2()))})})}async function I5(t,e,r){const n=Cw(t,!0).put({[zF]:e,value:r});return new Tp(n).toPromise()}async function e6(t,e){const r=Cw(t,!1).get(e),n=await new Tp(r).toPromise();return n===void 0?null:n.value}function N5(t,e){const r=Cw(t,!0).delete(e);return new Tp(r).toPromise()}const t6=800,r6=3;class WF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await t2(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>r6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bw._getInstance(Jj()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await $j(),!this.activeServiceWorker)return;this.sender=new zj(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await t2();return await I5(e,I0,"1"),await N5(e,I0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>I5(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>e6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>N5(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Cw(s,!1).getAll();return new Tp(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),t6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WF.type="LOCAL";const n6=WF;new Np(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(t,e){return e?xo(e):(Dt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx extends mx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hd(e,this._buildIdpRequest())}_linkToIdToken(e,r){return hd(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return hd(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function i6(t){return RF(t.auth,new vx(t),t.bypassAuthState)}function a6(t){const{auth:e,user:r}=t;return Dt(r,e,"internal-error"),Rj(r,new vx(t),t.bypassAuthState)}async function o6(t){const{auth:e,user:r}=t;return Dt(r,e,"internal-error"),kj(r,new vx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const A={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(A))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i6;case"linkViaPopup":case"linkViaRedirect":return o6;case"reauthViaPopup":case"reauthViaRedirect":return a6;default:aa(this.auth,"internal-error")}}resolve(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=new Np(2e3,1e4);class nd extends $F{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,nd.currentPopupAction&&nd.currentPopupAction.cancel(),nd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Dt(e,this.auth,"internal-error"),e}async onExecution(){Do(this.filter.length===1,"Popup operations only handle one event");const e=wx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ra(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ra(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ra(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,A6.get())};e()}}nd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6="pendingRedirect",kg=new Map;class c6 extends $F{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=kg.get(this.auth._key());if(!e){try{const n=await u6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}kg.set(this.auth._key(),e)}return this.bypassAuthState||kg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function u6(t,e){const r=f6(e),n=h6(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function d6(t,e){kg.set(t._key(),e)}function h6(t){return xo(t._redirectPersistence)}function f6(t){return Lg(l6,t.config.apiKey,t.name)}async function p6(t,e,r=!1){if(Ta(t.app))return Promise.reject(Io(t));const n=Oc(t),s=s6(n,e),a=await new c6(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=10*60*1e3;class g6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!w6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!XF(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ra(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=m6&&this.cachedEventUids.clear(),this.cachedEventUids.has(S5(e))}saveEventToCache(e){this.cachedEventUids.add(S5(e)),this.lastProcessedEventTime=Date.now()}}function S5(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function w6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v6(t,e={}){return El(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B6=/^https?/;async function x6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await v6(t);for(const r of e)try{if(b6(r))return}catch{}aa(t,"unauthorized-domain")}function b6(t){const e=Y1(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!B6.test(r))return!1;if(y6.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=new Np(3e4,6e4);function F5(){const t=Da().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function E6(t){return new Promise((e,r)=>{var n,s,i;function a(){F5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F5(),r(Ra(t,"network-request-failed"))},timeout:C6.get()})}if(!((s=(n=Da().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Da().gapi)===null||i===void 0)&&i.load)a();else{const o=vj("iframefcb");return Da()[o]=()=>{gapi.load?a():r(Ra(t,"network-request-failed"))},QF(`${wj()}?onload=${o}`).catch(A=>r(A))}}).catch(e=>{throw Rg=null,e})}let Rg=null;function _6(t){return Rg=Rg||E6(t),Rg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=new Np(5e3,15e3),N6="__/auth/iframe",S6="emulator/auth/iframe",F6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},T6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U6(t){const e=t.config;Dt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?hx(e,S6):`https://${t.config.authDomain}/${N6}`,n={apiKey:e.apiKey,appName:t.name,v:Od},s=T6.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Ip(n).slice(1)}`}async function Q6(t){const e=await _6(t),r=Da().gapi;return Dt(r,t,"internal-error"),e.open({where:document.body,url:U6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F6,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=Ra(t,"network-request-failed"),o=Da().setTimeout(()=>{i(a)},I6.get());function A(){Da().clearTimeout(o),s(n)}n.ping(A).then(A,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L6=500,k6=600,R6="_blank",D6="http://localhost";class T5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j6(t,e,r,n=L6,s=k6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const A=Object.assign(Object.assign({},P6),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Un().toLowerCase();r&&(o=_F(c)?R6:r),CF(c)&&(e=e||D6,A.scrollbars="yes");const d=Object.entries(A).reduce((m,[g,B])=>`${m}${g}=${B},`,"");if(lj(c)&&o!=="_self")return O6(e||"",o),new T5(null);const f=window.open(e||"",o,d);Dt(f,t,"popup-blocked");try{f.focus()}catch{}return new T5(f)}function O6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6="__/auth/handler",H6="emulator/auth/handler",V6=encodeURIComponent("fac");async function U5(t,e,r,n,s,i){Dt(t.config.authDomain,t,"auth-domain-config-required"),Dt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Od,eventId:s};if(e instanceof LF){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",QR(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))a[d]=f}if(e instanceof Fp){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const A=await t._getAppCheckToken(),c=A?`#${V6}=${encodeURIComponent(A)}`:"";return`${K6(t)}?${Ip(o).slice(1)}${c}`}function K6({config:t}){return t.emulator?hx(t,H6):`https://${t.authDomain}/${M6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="webStorageSupport";class q6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KF,this._completeRedirectFn=p6,this._overrideRedirectResult=d6}async _openPopup(e,r,n,s){var i;Do((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await U5(e,r,n,Y1(),s);return j6(e,a,wx())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await U5(e,r,n,Y1(),s);return Wj(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Do(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Q6(e),n=new g6(e);return r.register("authEvent",s=>(Dt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(uy,{type:uy},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[uy];a!==void 0&&r(!!a),aa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=x6(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return TF()||EF()||px()}}const G6=q6;var Q5="@firebase/auth",P5="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $6(t){Cd(new Sc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Dt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const A={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UF(t)},c=new pj(n,s,i,A);return Cj(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Cd(new Sc("auth-internal",e=>{const r=Oc(e.getProvider("auth").getImmediate());return(n=>new z6(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),nl(Q5,P5,W6(t)),nl(Q5,P5,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=5*60,J6=AF("authIdTokenMaxAge")||X6;let L5=null;const Y6=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>J6)return;const s=r==null?void 0:r.token;L5!==s&&(L5=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function JF(t=cx()){const e=Ax(t,"auth");if(e.isInitialized())return e.getImmediate();const r=bj(t,{popupRedirectResolver:G6,persistence:[n6,qj,KF]}),n=AF("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=Y6(i.toString());Hj(r,a,()=>a(r.currentUser)),Mj(r,o=>a(o))}}const s=aF("auth");return s&&Ej(r,`http://${s}`),r}function Z6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mj({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Ra("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",Z6().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$6("Browser");var eO="firebase",tO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nl(eO,tO,"app");var k5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gc,YF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,E){function Q(){}Q.prototype=E.prototype,T.D=E.prototype,T.prototype=new Q,T.prototype.constructor=T,T.C=function(j,S,N){for(var U=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)U[Z-2]=arguments[Z];return E.prototype[S].apply(j,U)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,E,Q){Q||(Q=0);var j=Array(16);if(typeof E=="string")for(var S=0;16>S;++S)j[S]=E.charCodeAt(Q++)|E.charCodeAt(Q++)<<8|E.charCodeAt(Q++)<<16|E.charCodeAt(Q++)<<24;else for(S=0;16>S;++S)j[S]=E[Q++]|E[Q++]<<8|E[Q++]<<16|E[Q++]<<24;E=T.g[0],Q=T.g[1],S=T.g[2];var N=T.g[3],U=E+(N^Q&(S^N))+j[0]+3614090360&4294967295;E=Q+(U<<7&4294967295|U>>>25),U=N+(S^E&(Q^S))+j[1]+3905402710&4294967295,N=E+(U<<12&4294967295|U>>>20),U=S+(Q^N&(E^Q))+j[2]+606105819&4294967295,S=N+(U<<17&4294967295|U>>>15),U=Q+(E^S&(N^E))+j[3]+3250441966&4294967295,Q=S+(U<<22&4294967295|U>>>10),U=E+(N^Q&(S^N))+j[4]+4118548399&4294967295,E=Q+(U<<7&4294967295|U>>>25),U=N+(S^E&(Q^S))+j[5]+1200080426&4294967295,N=E+(U<<12&4294967295|U>>>20),U=S+(Q^N&(E^Q))+j[6]+2821735955&4294967295,S=N+(U<<17&4294967295|U>>>15),U=Q+(E^S&(N^E))+j[7]+4249261313&4294967295,Q=S+(U<<22&4294967295|U>>>10),U=E+(N^Q&(S^N))+j[8]+1770035416&4294967295,E=Q+(U<<7&4294967295|U>>>25),U=N+(S^E&(Q^S))+j[9]+2336552879&4294967295,N=E+(U<<12&4294967295|U>>>20),U=S+(Q^N&(E^Q))+j[10]+4294925233&4294967295,S=N+(U<<17&4294967295|U>>>15),U=Q+(E^S&(N^E))+j[11]+2304563134&4294967295,Q=S+(U<<22&4294967295|U>>>10),U=E+(N^Q&(S^N))+j[12]+1804603682&4294967295,E=Q+(U<<7&4294967295|U>>>25),U=N+(S^E&(Q^S))+j[13]+4254626195&4294967295,N=E+(U<<12&4294967295|U>>>20),U=S+(Q^N&(E^Q))+j[14]+2792965006&4294967295,S=N+(U<<17&4294967295|U>>>15),U=Q+(E^S&(N^E))+j[15]+1236535329&4294967295,Q=S+(U<<22&4294967295|U>>>10),U=E+(S^N&(Q^S))+j[1]+4129170786&4294967295,E=Q+(U<<5&4294967295|U>>>27),U=N+(Q^S&(E^Q))+j[6]+3225465664&4294967295,N=E+(U<<9&4294967295|U>>>23),U=S+(E^Q&(N^E))+j[11]+643717713&4294967295,S=N+(U<<14&4294967295|U>>>18),U=Q+(N^E&(S^N))+j[0]+3921069994&4294967295,Q=S+(U<<20&4294967295|U>>>12),U=E+(S^N&(Q^S))+j[5]+3593408605&4294967295,E=Q+(U<<5&4294967295|U>>>27),U=N+(Q^S&(E^Q))+j[10]+38016083&4294967295,N=E+(U<<9&4294967295|U>>>23),U=S+(E^Q&(N^E))+j[15]+3634488961&4294967295,S=N+(U<<14&4294967295|U>>>18),U=Q+(N^E&(S^N))+j[4]+3889429448&4294967295,Q=S+(U<<20&4294967295|U>>>12),U=E+(S^N&(Q^S))+j[9]+568446438&4294967295,E=Q+(U<<5&4294967295|U>>>27),U=N+(Q^S&(E^Q))+j[14]+3275163606&4294967295,N=E+(U<<9&4294967295|U>>>23),U=S+(E^Q&(N^E))+j[3]+4107603335&4294967295,S=N+(U<<14&4294967295|U>>>18),U=Q+(N^E&(S^N))+j[8]+1163531501&4294967295,Q=S+(U<<20&4294967295|U>>>12),U=E+(S^N&(Q^S))+j[13]+2850285829&4294967295,E=Q+(U<<5&4294967295|U>>>27),U=N+(Q^S&(E^Q))+j[2]+4243563512&4294967295,N=E+(U<<9&4294967295|U>>>23),U=S+(E^Q&(N^E))+j[7]+1735328473&4294967295,S=N+(U<<14&4294967295|U>>>18),U=Q+(N^E&(S^N))+j[12]+2368359562&4294967295,Q=S+(U<<20&4294967295|U>>>12),U=E+(Q^S^N)+j[5]+4294588738&4294967295,E=Q+(U<<4&4294967295|U>>>28),U=N+(E^Q^S)+j[8]+2272392833&4294967295,N=E+(U<<11&4294967295|U>>>21),U=S+(N^E^Q)+j[11]+1839030562&4294967295,S=N+(U<<16&4294967295|U>>>16),U=Q+(S^N^E)+j[14]+4259657740&4294967295,Q=S+(U<<23&4294967295|U>>>9),U=E+(Q^S^N)+j[1]+2763975236&4294967295,E=Q+(U<<4&4294967295|U>>>28),U=N+(E^Q^S)+j[4]+1272893353&4294967295,N=E+(U<<11&4294967295|U>>>21),U=S+(N^E^Q)+j[7]+4139469664&4294967295,S=N+(U<<16&4294967295|U>>>16),U=Q+(S^N^E)+j[10]+3200236656&4294967295,Q=S+(U<<23&4294967295|U>>>9),U=E+(Q^S^N)+j[13]+681279174&4294967295,E=Q+(U<<4&4294967295|U>>>28),U=N+(E^Q^S)+j[0]+3936430074&4294967295,N=E+(U<<11&4294967295|U>>>21),U=S+(N^E^Q)+j[3]+3572445317&4294967295,S=N+(U<<16&4294967295|U>>>16),U=Q+(S^N^E)+j[6]+76029189&4294967295,Q=S+(U<<23&4294967295|U>>>9),U=E+(Q^S^N)+j[9]+3654602809&4294967295,E=Q+(U<<4&4294967295|U>>>28),U=N+(E^Q^S)+j[12]+3873151461&4294967295,N=E+(U<<11&4294967295|U>>>21),U=S+(N^E^Q)+j[15]+530742520&4294967295,S=N+(U<<16&4294967295|U>>>16),U=Q+(S^N^E)+j[2]+3299628645&4294967295,Q=S+(U<<23&4294967295|U>>>9),U=E+(S^(Q|~N))+j[0]+4096336452&4294967295,E=Q+(U<<6&4294967295|U>>>26),U=N+(Q^(E|~S))+j[7]+1126891415&4294967295,N=E+(U<<10&4294967295|U>>>22),U=S+(E^(N|~Q))+j[14]+2878612391&4294967295,S=N+(U<<15&4294967295|U>>>17),U=Q+(N^(S|~E))+j[5]+4237533241&4294967295,Q=S+(U<<21&4294967295|U>>>11),U=E+(S^(Q|~N))+j[12]+1700485571&4294967295,E=Q+(U<<6&4294967295|U>>>26),U=N+(Q^(E|~S))+j[3]+2399980690&4294967295,N=E+(U<<10&4294967295|U>>>22),U=S+(E^(N|~Q))+j[10]+4293915773&4294967295,S=N+(U<<15&4294967295|U>>>17),U=Q+(N^(S|~E))+j[1]+2240044497&4294967295,Q=S+(U<<21&4294967295|U>>>11),U=E+(S^(Q|~N))+j[8]+1873313359&4294967295,E=Q+(U<<6&4294967295|U>>>26),U=N+(Q^(E|~S))+j[15]+4264355552&4294967295,N=E+(U<<10&4294967295|U>>>22),U=S+(E^(N|~Q))+j[6]+2734768916&4294967295,S=N+(U<<15&4294967295|U>>>17),U=Q+(N^(S|~E))+j[13]+1309151649&4294967295,Q=S+(U<<21&4294967295|U>>>11),U=E+(S^(Q|~N))+j[4]+4149444226&4294967295,E=Q+(U<<6&4294967295|U>>>26),U=N+(Q^(E|~S))+j[11]+3174756917&4294967295,N=E+(U<<10&4294967295|U>>>22),U=S+(E^(N|~Q))+j[2]+718787259&4294967295,S=N+(U<<15&4294967295|U>>>17),U=Q+(N^(S|~E))+j[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(S+(U<<21&4294967295|U>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+N&4294967295}n.prototype.u=function(T,E){E===void 0&&(E=T.length);for(var Q=E-this.blockSize,j=this.B,S=this.h,N=0;N<E;){if(S==0)for(;N<=Q;)s(this,T,N),N+=this.blockSize;if(typeof T=="string"){for(;N<E;)if(j[S++]=T.charCodeAt(N++),S==this.blockSize){s(this,j),S=0;break}}else for(;N<E;)if(j[S++]=T[N++],S==this.blockSize){s(this,j),S=0;break}}this.h=S,this.o+=E},n.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;var Q=8*this.o;for(E=T.length-8;E<T.length;++E)T[E]=Q&255,Q/=256;for(this.u(T),T=Array(16),E=Q=0;4>E;++E)for(var j=0;32>j;j+=8)T[Q++]=this.g[E]>>>j&255;return T};function i(T,E){var Q=o;return Object.prototype.hasOwnProperty.call(Q,T)?Q[T]:Q[T]=E(T)}function a(T,E){this.h=E;for(var Q=[],j=!0,S=T.length-1;0<=S;S--){var N=T[S]|0;j&&N==E||(Q[S]=N,j=!1)}this.g=Q}var o={};function A(T){return-128<=T&&128>T?i(T,function(E){return new a([E|0],0>E?-1:0)}):new a([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return _(c(-T));for(var E=[],Q=1,j=0;T>=Q;j++)E[j]=T/Q|0,Q*=4294967296;return new a(E,0)}function d(T,E){if(T.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T.charAt(0)=="-")return _(d(T.substring(1),E));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var Q=c(Math.pow(E,8)),j=f,S=0;S<T.length;S+=8){var N=Math.min(8,T.length-S),U=parseInt(T.substring(S,S+N),E);8>N?(N=c(Math.pow(E,N)),j=j.j(N).add(c(U))):(j=j.j(Q),j=j.add(c(U)))}return j}var f=A(0),m=A(1),g=A(16777216);t=a.prototype,t.m=function(){if(b(this))return-_(this).m();for(var T=0,E=1,Q=0;Q<this.g.length;Q++){var j=this.i(Q);T+=(0<=j?j:4294967296+j)*E,E*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(B(this))return"0";if(b(this))return"-"+_(this).toString(T);for(var E=c(Math.pow(T,6)),Q=this,j="";;){var S=D(Q,E).g;Q=w(Q,S.j(E));var N=((0<Q.g.length?Q.g[0]:Q.h)>>>0).toString(T);if(Q=S,B(Q))return N+j;for(;6>N.length;)N="0"+N;j=N+j}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function B(T){if(T.h!=0)return!1;for(var E=0;E<T.g.length;E++)if(T.g[E]!=0)return!1;return!0}function b(T){return T.h==-1}t.l=function(T){return T=w(this,T),b(T)?-1:B(T)?0:1};function _(T){for(var E=T.g.length,Q=[],j=0;j<E;j++)Q[j]=~T.g[j];return new a(Q,~T.h).add(m)}t.abs=function(){return b(this)?_(this):this},t.add=function(T){for(var E=Math.max(this.g.length,T.g.length),Q=[],j=0,S=0;S<=E;S++){var N=j+(this.i(S)&65535)+(T.i(S)&65535),U=(N>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);j=U>>>16,N&=65535,U&=65535,Q[S]=U<<16|N}return new a(Q,Q[Q.length-1]&-2147483648?-1:0)};function w(T,E){return T.add(_(E))}t.j=function(T){if(B(this)||B(T))return f;if(b(this))return b(T)?_(this).j(_(T)):_(_(this).j(T));if(b(T))return _(this.j(_(T)));if(0>this.l(g)&&0>T.l(g))return c(this.m()*T.m());for(var E=this.g.length+T.g.length,Q=[],j=0;j<2*E;j++)Q[j]=0;for(j=0;j<this.g.length;j++)for(var S=0;S<T.g.length;S++){var N=this.i(j)>>>16,U=this.i(j)&65535,Z=T.i(S)>>>16,ue=T.i(S)&65535;Q[2*j+2*S]+=U*ue,y(Q,2*j+2*S),Q[2*j+2*S+1]+=N*ue,y(Q,2*j+2*S+1),Q[2*j+2*S+1]+=U*Z,y(Q,2*j+2*S+1),Q[2*j+2*S+2]+=N*Z,y(Q,2*j+2*S+2)}for(j=0;j<E;j++)Q[j]=Q[2*j+1]<<16|Q[2*j];for(j=E;j<2*E;j++)Q[j]=0;return new a(Q,0)};function y(T,E){for(;(T[E]&65535)!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function I(T,E){this.g=T,this.h=E}function D(T,E){if(B(E))throw Error("division by zero");if(B(T))return new I(f,f);if(b(T))return E=D(_(T),E),new I(_(E.g),_(E.h));if(b(E))return E=D(T,_(E)),new I(_(E.g),E.h);if(30<T.g.length){if(b(T)||b(E))throw Error("slowDivide_ only works with positive integers.");for(var Q=m,j=E;0>=j.l(T);)Q=H(Q),j=H(j);var S=k(Q,1),N=k(j,1);for(j=k(j,2),Q=k(Q,2);!B(j);){var U=N.add(j);0>=U.l(T)&&(S=S.add(Q),N=U),j=k(j,1),Q=k(Q,1)}return E=w(T,S.j(E)),new I(S,E)}for(S=f;0<=T.l(E);){for(Q=Math.max(1,Math.floor(T.m()/E.m())),j=Math.ceil(Math.log(Q)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),N=c(Q),U=N.j(E);b(U)||0<U.l(T);)Q-=j,N=c(Q),U=N.j(E);B(N)&&(N=m),S=S.add(N),T=w(T,U)}return new I(S,T)}t.A=function(T){return D(this,T).h},t.and=function(T){for(var E=Math.max(this.g.length,T.g.length),Q=[],j=0;j<E;j++)Q[j]=this.i(j)&T.i(j);return new a(Q,this.h&T.h)},t.or=function(T){for(var E=Math.max(this.g.length,T.g.length),Q=[],j=0;j<E;j++)Q[j]=this.i(j)|T.i(j);return new a(Q,this.h|T.h)},t.xor=function(T){for(var E=Math.max(this.g.length,T.g.length),Q=[],j=0;j<E;j++)Q[j]=this.i(j)^T.i(j);return new a(Q,this.h^T.h)};function H(T){for(var E=T.g.length+1,Q=[],j=0;j<E;j++)Q[j]=T.i(j)<<1|T.i(j-1)>>>31;return new a(Q,T.h)}function k(T,E){var Q=E>>5;E%=32;for(var j=T.g.length-Q,S=[],N=0;N<j;N++)S[N]=0<E?T.i(N+Q)>>>E|T.i(N+Q+1)<<32-E:T.i(N+Q);return new a(S,T.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,YF=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,gc=a}).apply(typeof k5<"u"?k5:typeof self<"u"?self:typeof window<"u"?window:{});var Lm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZF,Wh,e4,Dg,r2,t4,r4,n4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,C,P){return h==Array.prototype||h==Object.prototype||(h[C]=P.value),h};function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lm=="object"&&Lm];for(var C=0;C<h.length;++C){var P=h[C];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var n=r(this);function s(h,C){if(C)e:{var P=n;h=h.split(".");for(var $=0;$<h.length-1;$++){var we=h[$];if(!(we in P))break e;P=P[we]}h=h[h.length-1],$=P[h],C=C($),C!=$&&C!=null&&e(P,h,{configurable:!0,writable:!0,value:C})}}function i(h,C){h instanceof String&&(h+="");var P=0,$=!1,we={next:function(){if(!$&&P<h.length){var Ie=P++;return{value:C(Ie,h[Ie]),done:!1}}return $=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}s("Array.prototype.values",function(h){return h||function(){return i(this,function(C,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function A(h){var C=typeof h;return C=C!="object"?C:h?Array.isArray(h)?"array":C:"null",C=="array"||C=="object"&&typeof h.length=="number"}function c(h){var C=typeof h;return C=="object"&&h!=null||C=="function"}function d(h,C,P){return h.call.apply(h.bind,arguments)}function f(h,C,P){if(!h)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,$),h.apply(C,we)}}return function(){return h.apply(C,arguments)}}function m(h,C,P){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function g(h,C){var P=Array.prototype.slice.call(arguments,1);return function(){var $=P.slice();return $.push.apply($,arguments),h.apply(this,$)}}function B(h,C){function P(){}P.prototype=C.prototype,h.aa=C.prototype,h.prototype=new P,h.prototype.constructor=h,h.Qb=function($,we,Ie){for(var qe=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)qe[Mt-2]=arguments[Mt];return C.prototype[we].apply($,qe)}}function b(h){const C=h.length;if(0<C){const P=Array(C);for(let $=0;$<C;$++)P[$]=h[$];return P}return[]}function _(h,C){for(let P=1;P<arguments.length;P++){const $=arguments[P];if(A($)){const we=h.length||0,Ie=$.length||0;h.length=we+Ie;for(let qe=0;qe<Ie;qe++)h[we+qe]=$[qe]}else h.push($)}}class w{constructor(C,P){this.i=C,this.j=P,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function y(h){return/^[\s\xa0]*$/.test(h)}function I(){var h=o.navigator;return h&&(h=h.userAgent)?h:""}function D(h){return D[" "](h),h}D[" "]=function(){};var H=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function k(h,C,P){for(const $ in h)C.call(P,h[$],$,h)}function T(h,C){for(const P in h)C.call(void 0,h[P],P,h)}function E(h){const C={};for(const P in h)C[P]=h[P];return C}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(h,C){let P,$;for(let we=1;we<arguments.length;we++){$=arguments[we];for(P in $)h[P]=$[P];for(let Ie=0;Ie<Q.length;Ie++)P=Q[Ie],Object.prototype.hasOwnProperty.call($,P)&&(h[P]=$[P])}}function S(h){var C=1;h=h.split(":");const P=[];for(;0<C&&h.length;)P.push(h.shift()),C--;return h.length&&P.push(h.join(":")),P}function N(h){o.setTimeout(()=>{throw h},0)}function U(){var h=ae;let C=null;return h.g&&(C=h.g,h.g=h.g.next,h.g||(h.h=null),C.next=null),C}class Z{constructor(){this.h=this.g=null}add(C,P){const $=ue.get();$.set(C,P),this.h?this.h.next=$:this.g=$,this.h=$}}var ue=new w(()=>new ie,h=>h.reset());class ie{constructor(){this.next=this.g=this.h=null}set(C,P){this.h=C,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let z,W=!1,ae=new Z,q=()=>{const h=o.Promise.resolve(void 0);z=()=>{h.then(pe)}};var pe=()=>{for(var h;h=U();){try{h.h.call(h.g)}catch(P){N(P)}var C=ue;C.j(h),100>C.h&&(C.h++,h.next=C.g,C.g=h)}W=!1};function R(){this.s=this.s,this.C=this.C}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(h,C){this.type=h,this.g=this.target=C,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,C=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const P=()=>{};o.addEventListener("test",P,C),o.removeEventListener("test",P,C)}catch{}return h}();function J(h,C){if(G.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var P=this.type=h.type,$=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=C,C=h.relatedTarget){if(H){e:{try{D(C.nodeName);var we=!0;break e}catch{}we=!1}we||(C=null)}}else P=="mouseover"?C=h.fromElement:P=="mouseout"&&(C=h.toElement);this.relatedTarget=C,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:le[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&J.aa.h.call(this)}}B(J,G);var le={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),ee=0;function oe(h,C,P,$,we){this.listener=h,this.proxy=null,this.src=C,this.type=P,this.capture=!!$,this.ha=we,this.key=++ee,this.da=this.fa=!1}function ye(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Te(h){this.src=h,this.g={},this.h=0}Te.prototype.add=function(h,C,P,$,we){var Ie=h.toString();h=this.g[Ie],h||(h=this.g[Ie]=[],this.h++);var qe=xe(h,C,$,we);return-1<qe?(C=h[qe],P||(C.fa=!1)):(C=new oe(C,this.src,Ie,!!$,we),C.fa=P,h.push(C)),C};function ce(h,C){var P=C.type;if(P in h.g){var $=h.g[P],we=Array.prototype.indexOf.call($,C,void 0),Ie;(Ie=0<=we)&&Array.prototype.splice.call($,we,1),Ie&&(ye(C),h.g[P].length==0&&(delete h.g[P],h.h--))}}function xe(h,C,P,$){for(var we=0;we<h.length;++we){var Ie=h[we];if(!Ie.da&&Ie.listener==C&&Ie.capture==!!P&&Ie.ha==$)return we}return-1}var Ce="closure_lm_"+(1e6*Math.random()|0),me={};function re(h,C,P,$,we){if(Array.isArray(C)){for(var Ie=0;Ie<C.length;Ie++)re(h,C[Ie],P,$,we);return null}return P=Ge(P),h&&h[ne]?h.K(C,P,c($)?!!$.capture:!1,we):yt(h,C,P,!1,$,we)}function yt(h,C,P,$,we,Ie){if(!C)throw Error("Invalid event type");var qe=c(we)?!!we.capture:!!we,Mt=wt(h);if(Mt||(h[Ce]=Mt=new Te(h)),P=Mt.add(C,P,$,qe,Ie),P.proxy)return P;if($=Oe(),P.proxy=$,$.src=h,$.listener=P,h.addEventListener)te||(we=qe),we===void 0&&(we=!1),h.addEventListener(C.toString(),$,we);else if(h.attachEvent)h.attachEvent(Je(C.toString()),$);else if(h.addListener&&h.removeListener)h.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Oe(){function h(P){return C.call(h.src,h.listener,P)}const C=Ye;return h}function ke(h,C,P,$,we){if(Array.isArray(C))for(var Ie=0;Ie<C.length;Ie++)ke(h,C[Ie],P,$,we);else $=c($)?!!$.capture:!!$,P=Ge(P),h&&h[ne]?(h=h.i,C=String(C).toString(),C in h.g&&(Ie=h.g[C],P=xe(Ie,P,$,we),-1<P&&(ye(Ie[P]),Array.prototype.splice.call(Ie,P,1),Ie.length==0&&(delete h.g[C],h.h--)))):h&&(h=wt(h))&&(C=h.g[C.toString()],h=-1,C&&(h=xe(C,P,$,we)),(P=-1<h?C[h]:null)&&Ke(P))}function Ke(h){if(typeof h!="number"&&h&&!h.da){var C=h.src;if(C&&C[ne])ce(C.i,h);else{var P=h.type,$=h.proxy;C.removeEventListener?C.removeEventListener(P,$,h.capture):C.detachEvent?C.detachEvent(Je(P),$):C.addListener&&C.removeListener&&C.removeListener($),(P=wt(C))?(ce(P,h),P.h==0&&(P.src=null,C[Ce]=null)):ye(h)}}}function Je(h){return h in me?me[h]:me[h]="on"+h}function Ye(h,C){if(h.da)h=!0;else{C=new J(C,this);var P=h.listener,$=h.ha||h.src;h.fa&&Ke(h),h=P.call($,C)}return h}function wt(h){return h=h[Ce],h instanceof Te?h:null}var Fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ge(h){return typeof h=="function"?h:(h[Fe]||(h[Fe]=function(C){return h.handleEvent(C)}),h[Fe])}function ze(){R.call(this),this.i=new Te(this),this.M=this,this.F=null}B(ze,R),ze.prototype[ne]=!0,ze.prototype.removeEventListener=function(h,C,P,$){ke(this,h,C,P,$)};function et(h,C){var P,$=h.F;if($)for(P=[];$;$=$.F)P.push($);if(h=h.M,$=C.type||C,typeof C=="string")C=new G(C,h);else if(C instanceof G)C.target=C.target||h;else{var we=C;C=new G($,h),j(C,we)}if(we=!0,P)for(var Ie=P.length-1;0<=Ie;Ie--){var qe=C.g=P[Ie];we=pt(qe,$,!0,C)&&we}if(qe=C.g=h,we=pt(qe,$,!0,C)&&we,we=pt(qe,$,!1,C)&&we,P)for(Ie=0;Ie<P.length;Ie++)qe=C.g=P[Ie],we=pt(qe,$,!1,C)&&we}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var h=this.i,C;for(C in h.g){for(var P=h.g[C],$=0;$<P.length;$++)ye(P[$]);delete h.g[C],h.h--}}this.F=null},ze.prototype.K=function(h,C,P,$){return this.i.add(String(h),C,!1,P,$)},ze.prototype.L=function(h,C,P,$){return this.i.add(String(h),C,!0,P,$)};function pt(h,C,P,$){if(C=h.i.g[String(C)],!C)return!0;C=C.concat();for(var we=!0,Ie=0;Ie<C.length;++Ie){var qe=C[Ie];if(qe&&!qe.da&&qe.capture==P){var Mt=qe.listener,tr=qe.ha||qe.src;qe.fa&&ce(h.i,qe),we=Mt.call(tr,$)!==!1&&we}}return we&&!$.defaultPrevented}function it(h,C,P){if(typeof h=="function")P&&(h=m(h,P));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:o.setTimeout(h,C||0)}function tt(h){h.g=it(()=>{h.g=null,h.i&&(h.i=!1,tt(h))},h.l);const C=h.h;h.h=null,h.m.apply(null,C)}class Xe extends R{constructor(C,P){super(),this.m=C,this.l=P,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:tt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ot(h){R.call(this),this.h=h,this.g={}}B(Ot,R);var Ft=[];function tn(h){k(h.g,function(C,P){this.g.hasOwnProperty(P)&&Ke(C)},h),h.g={}}Ot.prototype.N=function(){Ot.aa.N.call(this),tn(this)},Ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xt=o.JSON.stringify,cr=o.JSON.parse,zn=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function Gt(){}Gt.prototype.h=null;function Wn(h){return h.h||(h.h=h.i())}function Se(){}var ut={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nt(){G.call(this,"d")}B(Nt,G);function at(){G.call(this,"c")}B(at,G);var He={},ht=null;function Bt(){return ht=ht||new ze}He.La="serverreachability";function Et(h){G.call(this,He.La,h)}B(Et,G);function $t(h){const C=Bt();et(C,new Et(C))}He.STAT_EVENT="statevent";function or(h,C){G.call(this,He.STAT_EVENT,h),this.stat=C}B(or,G);function ct(h){const C=Bt();et(C,new or(C,h))}He.Ma="timingevent";function rn(h,C){G.call(this,He.Ma,h),this.size=C}B(rn,G);function Pn(h,C){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},C)}function Xr(){this.g=!0}Xr.prototype.xa=function(){this.g=!1};function Jr(h,C,P,$,we,Ie){h.info(function(){if(h.g)if(Ie)for(var qe="",Mt=Ie.split("&"),tr=0;tr<Mt.length;tr++){var Ht=Mt[tr].split("=");if(1<Ht.length){var fr=Ht[0];Ht=Ht[1];var Ir=fr.split("_");qe=2<=Ir.length&&Ir[1]=="type"?qe+(fr+"="+Ht+"&"):qe+(fr+"=redacted&")}}else qe=null;else qe=Ie;return"XMLHTTP REQ ("+$+") [attempt "+we+"]: "+C+`
`+P+`
`+qe})}function Or(h,C,P,$,we,Ie,qe){h.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+we+"]: "+C+`
`+P+`
`+Ie+" "+qe})}function nn(h,C,P,$){h.info(function(){return"XMLHTTP TEXT ("+C+"): "+rt(h,P)+($?" "+$:"")})}function be(h,C){h.info(function(){return"TIMEOUT: "+C})}Xr.prototype.info=function(){};function rt(h,C){if(!h.g)return C;if(!C)return null;try{var P=JSON.parse(C);if(P){for(h=0;h<P.length;h++)if(Array.isArray(P[h])){var $=P[h];if(!(2>$.length)){var we=$[1];if(Array.isArray(we)&&!(1>we.length)){var Ie=we[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var qe=1;qe<we.length;qe++)we[qe]=""}}}}return Xt(P)}catch{return C}}var nt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wt;function _t(){}B(_t,Gt),_t.prototype.g=function(){return new XMLHttpRequest},_t.prototype.i=function(){return{}},Wt=new _t;function mt(h,C,P,$){this.j=h,this.i=C,this.l=P,this.R=$||1,this.U=new Ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xs}function xs(){this.i=null,this.g="",this.h=!1}var ha={},fa={};function pa(h,C,P){h.L=1,h.v=Xa(bs(C)),h.m=P,h.P=!0,qa(h,null)}function qa(h,C){h.F=Date.now(),Ko(h),h.A=bs(h.v);var P=h.A,$=h.R;Array.isArray($)||($=[String($)]),Rt(P.i,"t",$),h.C=0,P=h.j.J,h.h=new xs,h.g=O(h.j,P?C:null,!h.m),0<h.O&&(h.M=new Xe(m(h.Y,h,h.g),h.O)),C=h.U,P=h.g,$=h.ca;var we="readystatechange";Array.isArray(we)||(we&&(Ft[0]=we.toString()),we=Ft);for(var Ie=0;Ie<we.length;Ie++){var qe=re(P,we[Ie],$||C.handleEvent,!1,C.h||C);if(!qe)break;C.g[qe.key]=qe}C=h.H?E(h.H):{},h.m?(h.u||(h.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,C)):(h.u="GET",h.g.ea(h.A,h.u,null,C)),$t(),Jr(h.i,h.u,h.A,h.l,h.R,h.m)}mt.prototype.ca=function(h){h=h.target;const C=this.M;C&&_n(h)==3?C.j():this.Y(h)},mt.prototype.Y=function(h){try{if(h==this.g)e:{const Ir=_n(this.g);var C=this.g.Ba();const Ki=this.g.Z();if(!(3>Ir)&&(Ir!=3||this.g&&(this.h.h||this.g.oa()||ru(this.g)))){this.J||Ir!=4||C==7||(C==8||0>=Ki?$t(3):$t(2)),ma(this);var P=this.g.Z();this.X=P;t:if(Ga(this)){var $=ru(this.g);h="";var we=$.length,Ie=_n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),ga(this);var qe="";break t}this.h.i=new o.TextDecoder}for(C=0;C<we;C++)this.h.h=!0,h+=this.h.i.decode($[C],{stream:!(Ie&&C==we-1)});$.length=0,this.h.g+=h,this.C=0,qe=this.h.g}else qe=this.g.oa();if(this.o=P==200,Or(this.i,this.u,this.A,this.l,this.R,Ir,P),this.o){if(this.T&&!this.K){t:{if(this.g){var Mt,tr=this.g;if((Mt=tr.g?tr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Mt)){var Ht=Mt;break t}}Ht=null}if(P=Ht)nn(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,za(this,P);else{this.o=!1,this.s=3,ct(12),Ri(this),ga(this);break e}}if(this.P){P=!0;let Xn;for(;!this.J&&this.C<qe.length;)if(Xn=zc(this,qe),Xn==fa){Ir==4&&(this.s=4,ct(14),P=!1),nn(this.i,this.l,null,"[Incomplete Response]");break}else if(Xn==ha){this.s=4,ct(15),nn(this.i,this.l,qe,"[Invalid Chunk]"),P=!1;break}else nn(this.i,this.l,Xn,null),za(this,Xn);if(Ga(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ir!=4||qe.length!=0||this.h.h||(this.s=1,ct(16),P=!1),this.o=this.o&&P,!P)nn(this.i,this.l,qe,"[Invalid Chunked Response]"),Ri(this),ga(this);else if(0<qe.length&&!this.W){this.W=!0;var fr=this.j;fr.g==this&&fr.ba&&!fr.M&&(fr.j.info("Great, no buffering proxy detected. Bytes received: "+qe.length),sA(fr),fr.M=!0,ct(11))}}else nn(this.i,this.l,qe,null),za(this,qe);Ir==4&&Ri(this),this.o&&!this.J&&(Ir==4?xa(this.j,this):(this.o=!1,Ko(this)))}else ya(this.g),P==400&&0<qe.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Ri(this),ga(this)}}}catch{}finally{}};function Ga(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function zc(h,C){var P=h.C,$=C.indexOf(`
`,P);return $==-1?fa:(P=Number(C.substring(P,$)),isNaN(P)?ha:($+=1,$+P>C.length?fa:(C=C.slice($,$+P),h.C=$+P,C)))}mt.prototype.cancel=function(){this.J=!0,Ri(this)};function Ko(h){h.S=Date.now()+h.I,Wc(h,h.I)}function Wc(h,C){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Pn(m(h.ba,h),C)}function ma(h){h.B&&(o.clearTimeout(h.B),h.B=null)}mt.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(be(this.i,this.A),this.L!=2&&($t(),ct(17)),Ri(this),this.s=2,ga(this)):Wc(this,this.S-h)};function ga(h){h.j.G==0||h.J||xa(h.j,h)}function Ri(h){ma(h);var C=h.M;C&&typeof C.ma=="function"&&C.ma(),h.M=null,tn(h.U),h.g&&(C=h.g,h.g=null,C.abort(),C.ma())}function za(h,C){try{var P=h.j;if(P.G!=0&&(P.g==h||Fl(P.h,h))){if(!h.K&&Fl(P.h,h)&&P.G==3){try{var $=P.Da.g.parse(C)}catch{$=null}if(Array.isArray($)&&$.length==3){var we=$;if(we[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<h.F)Vi(P),eA(P);else break e;to(P),ct(18)}}else P.za=we[1],0<P.za-P.T&&37500>we[2]&&P.F&&P.v==0&&!P.C&&(P.C=Pn(m(P.Za,P),6e3));if(1>=Wa(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else ls(P,11)}else if((h.K||P.g==h)&&Vi(P),!y(C))for(we=P.Da.g.parse(C),C=0;C<we.length;C++){let Ht=we[C];if(P.T=Ht[0],Ht=Ht[1],P.G==2)if(Ht[0]=="c"){P.K=Ht[1],P.ia=Ht[2];const fr=Ht[3];fr!=null&&(P.la=fr,P.j.info("VER="+P.la));const Ir=Ht[4];Ir!=null&&(P.Aa=Ir,P.j.info("SVER="+P.Aa));const Ki=Ht[5];Ki!=null&&typeof Ki=="number"&&0<Ki&&($=1.5*Ki,P.L=$,P.j.info("backChannelRequestTimeoutMs_="+$)),$=P;const Xn=h.g;if(Xn){const ba=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var Ie=$.h;Ie.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(Pr(Ie,Ie.h),Ie.h=null))}if($.D){const Ca=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ca&&($.ya=Ca,gr($.I,$.D,Ca))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-h.F,P.j.info("Handshake RTT: "+P.R+"ms")),$=P;var qe=h;if($.qa=v($,$.J?$.ia:null,$.W),qe.K){Tl($.h,qe);var Mt=qe,tr=$.L;tr&&(Mt.I=tr),Mt.B&&(ma(Mt),Ko(Mt)),$.g=qe}else nA($);0<P.i.length&&tA(P)}else Ht[0]!="stop"&&Ht[0]!="close"||ls(P,7);else P.G==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?ls(P,7):Hi(P):Ht[0]!="noop"&&P.l&&P.l.ta(Ht),P.v=0)}}$t(4)}catch{}}var Yd=class{constructor(h,C){this.g=h,this.map=C}};function Sl(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $c(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Wa(h){return h.h?1:h.g?h.g.size:0}function Fl(h,C){return h.h?h.h==C:h.g?h.g.has(C):!1}function Pr(h,C){h.g?h.g.add(C):h.h=C}function Tl(h,C){h.h&&h.h==C?h.h=null:h.g&&h.g.has(C)&&h.g.delete(C)}Sl.prototype.cancel=function(){if(this.i=Ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ul(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let C=h.i;for(const P of h.g.values())C=C.concat(P.D);return C}return b(h.i)}function Xc(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(A(h)){for(var C=[],P=h.length,$=0;$<P;$++)C.push(h[$]);return C}C=[],P=0;for($ in h)C[P++]=h[$];return C}function Ql(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(A(h)||typeof h=="string"){var C=[];h=h.length;for(var P=0;P<h;P++)C.push(P);return C}C=[],P=0;for(const $ in h)C[P++]=$;return C}}}function Jc(h,C){if(h.forEach&&typeof h.forEach=="function")h.forEach(C,void 0);else if(A(h)||typeof h=="string")Array.prototype.forEach.call(h,C,void 0);else for(var P=Ql(h),$=Xc(h),we=$.length,Ie=0;Ie<we;Ie++)C.call(void 0,$[Ie],P&&P[Ie],h)}var Rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qo(h,C){if(h){h=h.split("&");for(var P=0;P<h.length;P++){var $=h[P].indexOf("="),we=null;if(0<=$){var Ie=h[P].substring(0,$);we=h[P].substring($+1)}else Ie=h[P];C(Ie,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function sn(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof sn){this.h=h.h,$a(this,h.j),this.o=h.o,this.g=h.g,Go(this,h.s),this.l=h.l;var C=h.i,P=new wa;P.i=C.i,C.g&&(P.g=new Map(C.g),P.h=C.h),Pl(this,P),this.m=h.m}else h&&(C=String(h).match(Rs))?(this.h=!1,$a(this,C[1]||"",!0),this.o=Ja(C[2]||""),this.g=Ja(C[3]||"",!0),Go(this,C[4]),this.l=Ja(C[5]||"",!0),Pl(this,C[6]||"",!0),this.m=Ja(C[7]||"")):(this.h=!1,this.i=new wa(null,this.h))}sn.prototype.toString=function(){var h=[],C=this.j;C&&h.push(Di(C,Yc,!0),":");var P=this.g;return(P||C=="file")&&(h.push("//"),(C=this.o)&&h.push(Di(C,Yc,!0),"@"),h.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&h.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&h.push("/"),h.push(Di(P,P.charAt(0)=="/"?ji:eh,!0))),(P=this.i.toString())&&h.push("?",P),(P=this.m)&&h.push("#",Di(P,Wo)),h.join("")};function bs(h){return new sn(h)}function $a(h,C,P){h.j=P?Ja(C,!0):C,h.j&&(h.j=h.j.replace(/:$/,""))}function Go(h,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);h.s=C}else h.s=null}function Pl(h,C,P){C instanceof wa?(h.i=C,th(h.i,h.h)):(P||(C=Di(C,zo)),h.i=new wa(C,h.h))}function gr(h,C,P){h.i.set(C,P)}function Xa(h){return gr(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ja(h,C){return h?C?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Di(h,C,P){return typeof h=="string"?(h=encodeURI(h).replace(C,Zd),P&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Zd(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Yc=/[#\/\?@]/g,eh=/[#\?:]/g,ji=/[#\?]/g,zo=/[#\?@]/g,Wo=/#/g;function wa(h,C){this.h=this.g=null,this.i=h||null,this.j=!!C}function Lr(h){h.g||(h.g=new Map,h.h=0,h.i&&qo(h.i,function(C,P){h.add(decodeURIComponent(C.replace(/\+/g," ")),P)}))}t=wa.prototype,t.add=function(h,C){Lr(this),this.i=null,h=va(this,h);var P=this.g.get(h);return P||this.g.set(h,P=[]),P.push(C),this.h+=1,this};function Zc(h,C){Lr(h),C=va(h,C),h.g.has(C)&&(h.i=null,h.h-=h.g.get(C).length,h.g.delete(C))}function Ll(h,C){return Lr(h),C=va(h,C),h.g.has(C)}t.forEach=function(h,C){Lr(this),this.g.forEach(function(P,$){P.forEach(function(we){h.call(C,we,$,this)},this)},this)},t.na=function(){Lr(this);const h=Array.from(this.g.values()),C=Array.from(this.g.keys()),P=[];for(let $=0;$<C.length;$++){const we=h[$];for(let Ie=0;Ie<we.length;Ie++)P.push(C[$])}return P},t.V=function(h){Lr(this);let C=[];if(typeof h=="string")Ll(this,h)&&(C=C.concat(this.g.get(va(this,h))));else{h=Array.from(this.g.values());for(let P=0;P<h.length;P++)C=C.concat(h[P])}return C},t.set=function(h,C){return Lr(this),this.i=null,h=va(this,h),Ll(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[C]),this.h+=1,this},t.get=function(h,C){return h?(h=this.V(h),0<h.length?String(h[0]):C):C};function Rt(h,C,P){Zc(h,C),0<P.length&&(h.i=null,h.g.set(va(h,C),b(P)),h.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],C=Array.from(this.g.keys());for(var P=0;P<C.length;P++){var $=C[P];const Ie=encodeURIComponent(String($)),qe=this.V($);for($=0;$<qe.length;$++){var we=Ie;qe[$]!==""&&(we+="="+encodeURIComponent(String(qe[$]))),h.push(we)}}return this.i=h.join("&")};function va(h,C){return C=String(C),h.j&&(C=C.toLowerCase()),C}function th(h,C){C&&!h.j&&(Lr(h),h.i=null,h.g.forEach(function(P,$){var we=$.toLowerCase();$!=we&&(Zc(this,$),Rt(this,we,P))},h)),h.j=C}function pi(h,C){const P=new Xr;if(o.Image){const $=new Image;$.onload=g(Js,P,"TestLoadImage: loaded",!0,C,$),$.onerror=g(Js,P,"TestLoadImage: error",!1,C,$),$.onabort=g(Js,P,"TestLoadImage: abort",!1,C,$),$.ontimeout=g(Js,P,"TestLoadImage: timeout",!1,C,$),o.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=h}else C(!1)}function eu(h,C){const P=new Xr,$=new AbortController,we=setTimeout(()=>{$.abort(),Js(P,"TestPingServer: timeout",!1,C)},1e4);fetch(h,{signal:$.signal}).then(Ie=>{clearTimeout(we),Ie.ok?Js(P,"TestPingServer: ok",!0,C):Js(P,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(we),Js(P,"TestPingServer: error",!1,C)})}function Js(h,C,P,$,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),$(P)}catch{}}function $o(){this.g=new zn}function kl(h,C,P){const $=P||"";try{Jc(h,function(we,Ie){let qe=we;c(we)&&(qe=Xt(we)),C.push($+Ie+"="+encodeURIComponent(qe))})}catch(we){throw C.push($+"type="+encodeURIComponent("_badmap")),we}}function Xo(h){this.l=h.Ub||null,this.j=h.eb||!1}B(Xo,Gt),Xo.prototype.g=function(){return new Jo(this.l,this.j)},Xo.prototype.i=function(h){return function(){return h}}({});function Jo(h,C){ze.call(this),this.D=h,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(Jo,ze),t=Jo.prototype,t.open=function(h,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=C,this.readyState=1,Ys(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(C.body=h),(this.D||o).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oi(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ys(this)),this.g&&(this.readyState=3,Ys(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tu(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function tu(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var C=h.value?h.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!h.done}))&&(this.response=this.responseText+=C)}h.done?Oi(this):Ys(this),this.readyState==3&&tu(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Oi(this))},t.Qa=function(h){this.g&&(this.response=h,Oi(this))},t.ga=function(){this.g&&Oi(this)};function Oi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ys(h)}t.setRequestHeader=function(h,C){this.u.append(h,C)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],C=this.h.entries();for(var P=C.next();!P.done;)P=P.value,h.push(P[0]+": "+P[1]),P=C.next();return h.join(`\r
`)};function Ys(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Mi(h){let C="";return k(h,function(P,$){C+=$,C+=":",C+=P,C+=`\r
`}),C}function Rl(h,C,P){e:{for($ in P){var $=!1;break e}$=!0}$||(P=Mi(P),typeof h=="string"?P!=null&&encodeURIComponent(String(P)):gr(h,C,P))}function hr(h){ze.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(hr,ze);var Dl=/^https?$/i,Yo=["POST","PUT"];t=hr.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,C,P,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);C=C?C.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wt.g(),this.v=this.o?Wn(this.o):Wn(Wt),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(C,String(h),!0),this.B=!1}catch(Ie){jl(this,Ie);return}if(h=P||"",P=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var we in $)P.set(we,$[we]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const Ie of $.keys())P.set(Ie,$.get(Ie));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(P.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),we=o.FormData&&h instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Yo,C,void 0))||$||we||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,qe]of P)this.g.setRequestHeader(Ie,qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zs(this),this.u=!0,this.g.send(h),this.u=!1}catch(Ie){jl(this,Ie)}};function jl(h,C){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=C,h.m=5,Ol(h),Ya(h)}function Ol(h){h.A||(h.A=!0,et(h,"complete"),et(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,et(this,"complete"),et(this,"abort"),Ya(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ya(this,!0)),hr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ml(this):this.bb())},t.bb=function(){Ml(this)};function Ml(h){if(h.h&&typeof a<"u"&&(!h.v[1]||_n(h)!=4||h.Z()!=2)){if(h.u&&_n(h)==4)it(h.Ea,0,h);else if(et(h,"readystatechange"),_n(h)==4){h.h=!1;try{const qe=h.Z();e:switch(qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var P;if(!(P=C)){var $;if($=qe===0){var we=String(h.D).match(Rs)[1]||null;!we&&o.self&&o.self.location&&(we=o.self.location.protocol.slice(0,-1)),$=!Dl.test(we?we.toLowerCase():"")}P=$}if(P)et(h,"complete"),et(h,"success");else{h.m=6;try{var Ie=2<_n(h)?h.g.statusText:""}catch{Ie=""}h.l=Ie+" ["+h.Z()+"]",Ol(h)}}finally{Ya(h)}}}}function Ya(h,C){if(h.g){Zs(h);const P=h.g,$=h.v[0]?()=>{}:null;h.g=null,h.v=null,C||et(h,"ready");try{P.onreadystatechange=$}catch{}}}function Zs(h){h.I&&(o.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function _n(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<_n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var C=this.g.responseText;return h&&C.indexOf(h)==0&&(C=C.substring(h.length)),cr(C)}};function ru(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(h){const C={};h=(h.g&&2<=_n(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<h.length;$++){if(y(h[$]))continue;var P=S(h[$]);const we=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const Ie=C[we]||[];C[we]=Ie,Ie.push(P)}T(C,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $n(h,C,P){return P&&P.internalChannelParams&&P.internalChannelParams[h]||C}function Zo(h){this.Aa=0,this.i=[],this.j=new Xr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$n("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$n("baseRetryDelayMs",5e3,h),this.cb=$n("retryDelaySeedMs",1e4,h),this.Wa=$n("forwardChannelMaxRetries",2,h),this.wa=$n("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Sl(h&&h.concurrentRequestLimit),this.Da=new $o,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zo.prototype,t.la=8,t.G=1,t.connect=function(h,C,P,$){ct(0),this.W=h,this.H=C||{},P&&$!==void 0&&(this.H.OSID=P,this.H.OAID=$),this.F=this.X,this.I=v(this,null,this.W),tA(this)};function Hi(h){if(Za(h),h.G==3){var C=h.U++,P=bs(h.I);if(gr(P,"SID",h.K),gr(P,"RID",C),gr(P,"TYPE","terminate"),Ba(h,P),C=new mt(h,h.j,C),C.L=2,C.v=Xa(bs(P)),P=!1,o.navigator&&o.navigator.sendBeacon)try{P=o.navigator.sendBeacon(C.v.toString(),"")}catch{}!P&&o.Image&&(new Image().src=C.v,P=!0),P||(C.g=O(C.j,null),C.g.ea(C.v)),C.F=Date.now(),Ko(C)}aA(h)}function eA(h){h.g&&(sA(h),h.g.cancel(),h.g=null)}function Za(h){eA(h),h.u&&(o.clearTimeout(h.u),h.u=null),Vi(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&o.clearTimeout(h.s),h.s=null)}function tA(h){if(!$c(h.h)&&!h.s){h.s=!0;var C=h.Ga;z||q(),W||(z(),W=!0),ae.add(C,h),h.B=0}}function Hl(h,C){return Wa(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=C.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Pn(m(h.Ga,h,C),iA(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const we=new mt(this,this.j,h);let Ie=this.o;if(this.S&&(Ie?(Ie=E(Ie),j(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(we.H=Ie,Ie=null),this.P)e:{for(var C=0,P=0;P<this.i.length;P++){t:{var $=this.i[P];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(C+=$,4096<C){C=P;break e}if(C===4096||P===this.i.length-1){C=P+1;break e}}C=1e3}else C=1e3;C=eo(this,we,C),P=bs(this.I),gr(P,"RID",h),gr(P,"CVER",22),this.D&&gr(P,"X-HTTP-Session-Id",this.D),Ba(this,P),Ie&&(this.O?C="headers="+encodeURIComponent(String(Mi(Ie)))+"&"+C:this.m&&Rl(P,this.m,Ie)),Pr(this.h,we),this.Ua&&gr(P,"TYPE","init"),this.P?(gr(P,"$req",C),gr(P,"SID","null"),we.T=!0,pa(we,P,null)):pa(we,P,C),this.G=2}}else this.G==3&&(h?rA(this,h):this.i.length==0||$c(this.h)||rA(this))};function rA(h,C){var P;C?P=C.l:P=h.U++;const $=bs(h.I);gr($,"SID",h.K),gr($,"RID",P),gr($,"AID",h.T),Ba(h,$),h.m&&h.o&&Rl($,h.m,h.o),P=new mt(h,h.j,P,h.B+1),h.m===null&&(P.H=h.o),C&&(h.i=C.D.concat(h.i)),C=eo(h,P,1e3),P.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Pr(h.h,P),pa(P,$,C)}function Ba(h,C){h.H&&k(h.H,function(P,$){gr(C,$,P)}),h.l&&Jc({},function(P,$){gr(C,$,P)})}function eo(h,C,P){P=Math.min(h.i.length,P);var $=h.l?m(h.l.Na,h.l,h):null;e:{var we=h.i;let Ie=-1;for(;;){const qe=["count="+P];Ie==-1?0<P?(Ie=we[0].g,qe.push("ofs="+Ie)):Ie=0:qe.push("ofs="+Ie);let Mt=!0;for(let tr=0;tr<P;tr++){let Ht=we[tr].g;const fr=we[tr].map;if(Ht-=Ie,0>Ht)Ie=Math.max(0,we[tr].g-100),Mt=!1;else try{kl(fr,qe,"req"+Ht+"_")}catch{$&&$(fr)}}if(Mt){$=qe.join("&");break e}}}return h=h.i.splice(0,P),C.D=h,$}function nA(h){if(!h.g&&!h.u){h.Y=1;var C=h.Fa;z||q(),W||(z(),W=!0),ae.add(C,h),h.v=0}}function to(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Pn(m(h.Fa,h),iA(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Pn(m(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),eA(this),nu(this))};function sA(h){h.A!=null&&(o.clearTimeout(h.A),h.A=null)}function nu(h){h.g=new mt(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var C=bs(h.qa);gr(C,"RID","rpc"),gr(C,"SID",h.K),gr(C,"AID",h.T),gr(C,"CI",h.F?"0":"1"),!h.F&&h.ja&&gr(C,"TO",h.ja),gr(C,"TYPE","xmlhttp"),Ba(h,C),h.m&&h.o&&Rl(C,h.m,h.o),h.L&&(h.g.I=h.L);var P=h.g;h=h.ia,P.L=1,P.v=Xa(bs(C)),P.m=null,P.P=!0,qa(P,h)}t.Za=function(){this.C!=null&&(this.C=null,eA(this),to(this),ct(19))};function Vi(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function xa(h,C){var P=null;if(h.g==C){Vi(h),sA(h),h.g=null;var $=2}else if(Fl(h.h,C))P=C.D,Tl(h.h,C),$=1;else return;if(h.G!=0){if(C.o)if($==1){P=C.m?C.m.length:0,C=Date.now()-C.F;var we=h.B;$=Bt(),et($,new rn($,P)),tA(h)}else nA(h);else if(we=C.s,we==3||we==0&&0<C.X||!($==1&&Hl(h,C)||$==2&&to(h)))switch(P&&0<P.length&&(C=h.h,C.i=C.i.concat(P)),we){case 1:ls(h,5);break;case 4:ls(h,10);break;case 3:ls(h,6);break;default:ls(h,2)}}}function iA(h,C){let P=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(P*=2),P*C}function ls(h,C){if(h.j.info("Error code "+C),C==2){var P=m(h.fb,h),$=h.Xa;const we=!$;$=new sn($||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||$a($,"https"),Xa($),we?pi($.toString(),P):eu($.toString(),P)}else ct(2);h.G=0,h.l&&h.l.sa(C),aA(h),Za(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function aA(h){if(h.G=0,h.ka=[],h.l){const C=Ul(h.h);(C.length!=0||h.i.length!=0)&&(_(h.ka,C),_(h.ka,h.i),h.h.i.length=0,b(h.i),h.i.length=0),h.l.ra()}}function v(h,C,P){var $=P instanceof sn?bs(P):new sn(P);if($.g!="")C&&($.g=C+"."+$.g),Go($,$.s);else{var we=o.location;$=we.protocol,C=C?C+"."+we.hostname:we.hostname,we=+we.port;var Ie=new sn(null);$&&$a(Ie,$),C&&(Ie.g=C),we&&Go(Ie,we),P&&(Ie.l=P),$=Ie}return P=h.D,C=h.ya,P&&C&&gr($,P,C),gr($,"VER",h.la),Ba(h,$),$}function O(h,C,P){if(C&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=h.Ca&&!h.pa?new hr(new Xo({eb:P})):new hr(h.pa),C.Ha(h.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ae(){}t=Ae.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function de(){}de.prototype.g=function(h,C){return new ve(h,C)};function ve(h,C){ze.call(this),this.g=new Zo(C),this.l=h,this.h=C&&C.messageUrlParams||null,h=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(h?h["X-WebChannel-Content-Type"]=C.messageContentType:h={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(h?h["X-WebChannel-Client-Profile"]=C.va:h={"X-WebChannel-Client-Profile":C.va}),this.g.S=h,(h=C&&C.Sb)&&!y(h)&&(this.g.m=h),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!y(C)&&(this.g.D=C,h=this.h,h!==null&&C in h&&(h=this.h,C in h&&delete h[C])),this.j=new ot(this)}B(ve,ze),ve.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ve.prototype.close=function(){Hi(this.g)},ve.prototype.o=function(h){var C=this.g;if(typeof h=="string"){var P={};P.__data__=h,h=P}else this.u&&(P={},P.__data__=Xt(h),h=P);C.i.push(new Yd(C.Ya++,h)),C.G==3&&tA(C)},ve.prototype.N=function(){this.g.l=null,delete this.j,Hi(this.g),delete this.g,ve.aa.N.call(this)};function Pe(h){Nt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var C=h.__sm__;if(C){e:{for(const P in C){h=P;break e}h=void 0}(this.i=h)&&(h=this.i,C=C!==null&&h in C?C[h]:void 0),this.data=C}else this.data=h}B(Pe,Nt);function Ve(){at.call(this),this.status=1}B(Ve,at);function ot(h){this.g=h}B(ot,Ae),ot.prototype.ua=function(){et(this.g,"a")},ot.prototype.ta=function(h){et(this.g,new Pe(h))},ot.prototype.sa=function(h){et(this.g,new Ve)},ot.prototype.ra=function(){et(this.g,"b")},de.prototype.createWebChannel=de.prototype.g,ve.prototype.send=ve.prototype.o,ve.prototype.open=ve.prototype.m,ve.prototype.close=ve.prototype.close,n4=function(){return new de},r4=function(){return Bt()},t4=He,r2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,Dg=nt,Kt.COMPLETE="complete",e4=Kt,Se.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Wh=Se,hr.prototype.listenOnce=hr.prototype.L,hr.prototype.getLastError=hr.prototype.Ka,hr.prototype.getLastErrorCode=hr.prototype.Ba,hr.prototype.getStatus=hr.prototype.Z,hr.prototype.getResponseJson=hr.prototype.Oa,hr.prototype.getResponseText=hr.prototype.oa,hr.prototype.send=hr.prototype.ea,hr.prototype.setWithCredentials=hr.prototype.Ha,ZF=hr}).apply(typeof Lm<"u"?Lm:typeof self<"u"?self:typeof window<"u"?window:{});const R5="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rs.UNAUTHENTICATED=new rs(null),rs.GOOGLE_CREDENTIALS=new rs("google-credentials-uid"),rs.FIRST_PARTY=new rs("first-party-uid"),rs.MOCK_USER=new rs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new ax("@firebase/firestore");function ku(){return Uc.logLevel}function We(t,...e){if(Uc.logLevel<=sr.DEBUG){const r=e.map(yx);Uc.debug(`Firestore (${Hd}): ${t}`,...r)}}function Fs(t,...e){if(Uc.logLevel<=sr.ERROR){const r=e.map(yx);Uc.error(`Firestore (${Hd}): ${t}`,...r)}}function ul(t,...e){if(Uc.logLevel<=sr.WARN){const r=e.map(yx);Uc.warn(`Firestore (${Hd}): ${t}`,...r)}}function yx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t="Unexpected state"){const e=`FIRESTORE (${Hd}) INTERNAL ASSERTION FAILED: `+t;throw Fs(e),new Error(e)}function It(t,e){t||Ct()}function jt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends Ho{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(rs.UNAUTHENTICATED))}shutdown(){}}class rO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class nO{constructor(e){this.t=e,this.currentUser=rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){It(this.o===void 0);let n=this.i;const s=A=>this.i!==n?(n=this.i,r(A)):Promise.resolve();let i=new na;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new na,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const A=i;e.enqueueRetryable(async()=>{await A.promise,await s(this.currentUser)})},o=A=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(A=>o(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?o(A):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new na)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(It(typeof n.accessToken=="string"),new s4(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string"),new rs(e)}}class sO{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=rs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iO{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new sO(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(rs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){It(this.o===void 0);const n=i=>{i.error!=null&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,We("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(It(typeof r.token=="string"),this.R=r.token,new aO(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=AO(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function qt(t,e){return t<e?-1:t>e?1:0}function Ed(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function a4(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ze(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ze(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Ze(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Pt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new Pt(0,0))}static max(){return new St(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ct(),n===void 0?n=e.length-r:n>e.length-r&&Ct(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ep.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ep?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ur extends ep{construct(e,r,n){return new ur(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ze(Le.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new ur(r)}static emptyPath(){return new ur([])}}const lO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qr extends ep{construct(e,r,n){return new qr(e,r,n)}static isValidIdentifier(e){return lO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qr(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new Ze(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Ze(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const A=e[s+1];if(A!=="\\"&&A!=="."&&A!=="`")throw new Ze(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=A,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new Ze(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qr(r)}static emptyPath(){return new qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.path=e}static fromPath(e){return new lt(ur.fromString(e))}static fromName(e){return new lt(ur.fromString(e).popFirst(5))}static empty(){return new lt(ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ur.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ur.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new ur(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function n2(t){return t.fields.find(e=>e.kind===2)}function tc(t){return t.fields.filter(e=>e.kind!==2)}S0.UNKNOWN_ID=-1;class jg{constructor(e,r){this.fieldPath=e,this.kind=r}}class tp{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new tp(0,ci.min())}}function cO(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=St.fromTimestamp(n===1e9?new Pt(r+1,0):new Pt(r,n));return new ci(s,lt.empty(),e)}function o4(t){return new ci(t.readTime,t.key,-1)}class ci{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ci(St.min(),lt.empty(),-1)}static max(){return new ci(St.max(),lt.empty(),-1)}}function xx(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=lt.comparator(t.documentKey,e.documentKey),r!==0?r:qt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(t){if(t.code!==Le.FAILED_PRECONDITION||t.message!==A4)throw t;We("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ne((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ne?r:Ne.resolve(r)}catch(r){return Ne.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ne.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ne.reject(r)}static resolve(e){return new Ne((r,n)=>{r(e)})}static reject(e){return new Ne((r,n)=>{n(e)})}static waitFor(e){return new Ne((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},A=>n(A))}),a=!0,i===s&&r()})}static or(e){let r=Ne.resolve(!1);for(const n of e)r=r.next(s=>s?Ne.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Ne((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let A=0;A<i;A++){const c=A;r(e[c]).next(d=>{a[c]=d,++o,o===i&&n(a)},d=>s(d))}})}static doWhile(e,r){return new Ne((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new na,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new mf(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=bx(n.target.error);this.V.reject(new mf(e,s))}}static open(e,r,n,s){try{return new Ew(r,e.transaction(s,n))}catch(i){throw new mf(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(We("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new dO(r)}}class sl{constructor(e,r,n){this.name=e,this.version=r,this.p=n,sl.S(Un())===12.2&&Fs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return We("SimpleDb","Removing database:",e),sc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!cF())return!1;if(sl.v())return!0;const e=Un(),r=sl.S(e),n=0<r&&r<10,s=c4(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(We("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;r(a)},s.onblocked=()=>{n(new mf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new Ze(Le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new Ze(Le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new mf(e,a))},s.onupgradeneeded=i=>{We("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next(()=>{We("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=Ew.open(this.db,e,i?"readonly":"readwrite",n),A=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),Ne.reject(c))).toPromise();return A.catch(()=>{}),await o.m,A}catch(o){const A=o,c=A.name!=="FirebaseError"&&a<3;if(We("SimpleDb","Transaction failed with error:",A.message,"Retrying:",c),this.close(),!c)return Promise.reject(A)}}}close(){this.db&&this.db.close(),this.db=void 0}}function c4(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class uO{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return sc(this.B.delete())}}class mf extends Ze{constructor(e,r){super(Le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function _l(t){return t.name==="IndexedDbTransactionError"}class dO{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(We("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(We("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),sc(n)}add(e){return We("SimpleDb","ADD",this.store.name,e,e),sc(this.store.add(e))}get(e){return sc(this.store.get(e)).next(r=>(r===void 0&&(r=null),We("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return We("SimpleDb","DELETE",this.store.name,e),sc(this.store.delete(e))}count(){return We("SimpleDb","COUNT",this.store.name),sc(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new Ne((a,o)=>{i.onerror=A=>{o(A.target.error)},i.onsuccess=A=>{a(A.target.result)}})}{const i=this.cursor(n),a=[];return this.W(i,(o,A)=>{a.push(A)}).next(()=>a)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ne((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}j(e,r){We("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(i,a,o)=>o.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new Ne((n,s)=>{r.onerror=i=>{const a=bx(i.target.error);s(a)},r.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,r){const n=[];return new Ne((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const A=new uO(o),c=r(o.primaryKey,o.value,A);if(c instanceof Ne){const d=c.catch(f=>(A.done(),Ne.reject(f)));n.push(d)}A.isDone?s():A.K===null?o.continue():o.continue(A.K)}}).next(()=>Ne.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function sc(t){return new Ne((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=bx(n.target.error);r(s)}})}let D5=!1;function bx(t){const e=sl.S(Un());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Ze("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return D5||(D5=!0,setTimeout(()=>{throw n},0)),n}}return t}class hO{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){We("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{We("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){_l(r)?We("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Mc(r)}await this.X(6e4)})}}class fO{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,i=!0;return Ne.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return We("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next(o=>{s-=o,n.add(a)});i=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(s,i)).next(o=>(We("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>a.size)}))}re(e,r){let n=e;return r.changes.forEach((s,i)=>{const a=o4(i);xx(a,n)>0&&(n=a)}),new ci(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Fi.oe=-1;function Up(t){return t==null}function rp(t){return t===0&&1/t==-1/0}function pO(t){return typeof t=="number"&&Number.isInteger(t)&&!rp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=j5(e)),e=mO(t.get(r),e);return j5(e)}function mO(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function j5(t){return t+""}function Ua(t){const e=t.length;if(It(e>=2),e===2)return It(t.charAt(0)===""&&t.charAt(1)===""),ur.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>r)&&Ct(),t.charAt(a+1)){case"":const o=t.substring(i,a);let A;s.length===0?A=o:(s+=o,A=s,s=""),n.push(A);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:Ct()}i=a+2}return new ur(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t,e){return[t,Qs(e)]}function u4(t,e,r){return[t,Qs(e),r]}const gO={},wO=["prefixPath","collectionGroup","readTime","documentId"],vO=["prefixPath","collectionGroup","documentId"],yO=["collectionGroup","readTime","prefixPath","documentId"],BO=["canonicalId","targetId"],xO=["targetId","path"],bO=["path","targetId"],CO=["collectionId","parent"],EO=["indexId","uid"],_O=["uid","sequenceNumber"],IO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],NO=["indexId","uid","orderedDocumentKey"],SO=["userId","collectionPath","documentId"],FO=["userId","collectionPath","largestBatchId"],TO=["userId","collectionGroup","largestBatchId"],d4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],UO=[...d4,"documentOverlays"],h4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],f4=h4,Cx=[...f4,"indexConfiguration","indexState","indexEntries"],QO=Cx,PO=[...Cx,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2 extends l4{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Qn(t,e){const r=jt(t);return sl.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Hc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function p4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,r){this.comparator=e,this.root=r||ns.EMPTY}insert(e,r){return new Wr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new Wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new km(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new km(this.root,e,this.comparator,!1)}getReverseIterator(){return new km(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new km(this.root,e,this.comparator,!0)}}class km{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??ns.RED,this.left=s??ns.EMPTY,this.right=i??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new ns(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ns.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ct();const e=this.left.check();if(e!==this.right.check())throw Ct();return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1;ns.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct()}get value(){throw Ct()}get color(){throw Ct()}get left(){throw Ct()}get right(){throw Ct()}copy(e,r,n,s,i){return this}insert(e,r,n){return new ns(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.comparator=e,this.data=new Wr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new H5(this.data.getIterator())}getIteratorFrom(e){return new H5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof _r)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new _r(this.comparator);return r.data=e,r}}class H5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.fields=e,e.sort(qr.comparator)}static empty(){return new Gs([])}unionWith(e){let r=new _r(qr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Gs(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ed(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new m4("Invalid base64 string: "+i):i}}(e);return new yn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new yn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const LO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(t){if(It(!!t),typeof t=="string"){let e=0;const r=LO.exec(t);if(It(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Hr(t.seconds),nanos:Hr(t.nanos)}}function Hr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dl(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function _x(t){const e=t.mapValue.fields.__previous_value__;return Ex(e)?_x(e):e}function np(t){const e=jo(t.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,r,n,s,i,a,o,A,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=A,this.useFetchStreams=c}}class hl{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new hl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mg={nullValue:"NULL_VALUE"};function Qc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ex(t)?4:g4(t)?9007199254740991:_w(t)?10:11:Ct()}function Oa(t,e){if(t===e)return!0;const r=Qc(t);if(r!==Qc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return np(t).isEqual(np(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=jo(s.timestampValue),o=jo(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return dl(s.bytesValue).isEqual(dl(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Hr(s.geoPointValue.latitude)===Hr(i.geoPointValue.latitude)&&Hr(s.geoPointValue.longitude)===Hr(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Hr(s.integerValue)===Hr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Hr(s.doubleValue),o=Hr(i.doubleValue);return a===o?rp(a)===rp(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Ed(t.arrayValue.values||[],e.arrayValue.values||[],Oa);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(M5(a)!==M5(o))return!1;for(const A in a)if(a.hasOwnProperty(A)&&(o[A]===void 0||!Oa(a[A],o[A])))return!1;return!0}(t,e);default:return Ct()}}function sp(t,e){return(t.values||[]).find(r=>Oa(r,e))!==void 0}function fl(t,e){if(t===e)return 0;const r=Qc(t),n=Qc(e);if(r!==n)return qt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return qt(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Hr(i.integerValue||i.doubleValue),A=Hr(a.integerValue||a.doubleValue);return o<A?-1:o>A?1:o===A?0:isNaN(o)?isNaN(A)?0:-1:1}(t,e);case 3:return V5(t.timestampValue,e.timestampValue);case 4:return V5(np(t),np(e));case 5:return qt(t.stringValue,e.stringValue);case 6:return function(i,a){const o=dl(i),A=dl(a);return o.compareTo(A)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),A=a.split("/");for(let c=0;c<o.length&&c<A.length;c++){const d=qt(o[c],A[c]);if(d!==0)return d}return qt(o.length,A.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=qt(Hr(i.latitude),Hr(a.latitude));return o!==0?o:qt(Hr(i.longitude),Hr(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return K5(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,A,c,d;const f=i.fields||{},m=a.fields||{},g=(o=f.value)===null||o===void 0?void 0:o.arrayValue,B=(A=m.value)===null||A===void 0?void 0:A.arrayValue,b=qt(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=B==null?void 0:B.values)===null||d===void 0?void 0:d.length)||0);return b!==0?b:K5(g,B)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===HA.mapValue&&a===HA.mapValue)return 0;if(i===HA.mapValue)return 1;if(a===HA.mapValue)return-1;const o=i.fields||{},A=Object.keys(o),c=a.fields||{},d=Object.keys(c);A.sort(),d.sort();for(let f=0;f<A.length&&f<d.length;++f){const m=qt(A[f],d[f]);if(m!==0)return m;const g=fl(o[A[f]],c[d[f]]);if(g!==0)return g}return qt(A.length,d.length)}(t.mapValue,e.mapValue);default:throw Ct()}}function V5(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qt(t,e);const r=jo(t),n=jo(e),s=qt(r.seconds,n.seconds);return s!==0?s:qt(r.nanos,n.nanos)}function K5(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=fl(r[s],n[s]);if(i)return i}return qt(r.length,n.length)}function _d(t){return i2(t)}function i2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=jo(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return dl(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return lt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=i2(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${i2(r.fields[a])}`;return s+"}"}(t.mapValue):Ct()}function ip(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function a2(t){return!!t&&"integerValue"in t}function ap(t){return!!t&&"arrayValue"in t}function q5(t){return!!t&&"nullValue"in t}function G5(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hg(t){return!!t&&"mapValue"in t}function _w(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function gf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hc(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=gf(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=gf(t.arrayValue.values[r]);return e}return Object.assign({},t)}function g4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const w4={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function RO(t){return"nullValue"in t?Mg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ip(hl.empty(),lt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?_w(t)?w4:{mapValue:{}}:Ct()}function DO(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ip(hl.empty(),lt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?w4:"mapValue"in t?_w(t)?{mapValue:{}}:HA:Ct()}function z5(t,e){const r=fl(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function W5(t,e){const r=fl(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.value=e}static empty(){return new ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Hg(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=gf(r)}setAll(e){let r=qr.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const A=this.getFieldsMap(r);this.applyChanges(A,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=gf(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());Hg(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Oa(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Hg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Hc(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new ss(gf(this.value))}}function v4(t){const e=[];return Hc(t.fields,(r,n)=>{const s=new qr([r]);if(Hg(n)){const i=v4(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Gs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Kr(e,0,St.min(),St.min(),St.min(),ss.empty(),0)}static newFoundDocument(e,r,n,s){return new Kr(e,1,r,St.min(),n,s,0)}static newNoDocument(e,r){return new Kr(e,2,r,St.min(),St.min(),ss.empty(),0)}static newUnknownDocument(e,r){return new Kr(e,3,r,St.min(),St.min(),ss.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,r){this.position=e,this.inclusive=r}}function $5(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=lt.comparator(lt.fromName(a.referenceValue),r.key):n=fl(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function X5(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Oa(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,r="asc"){this.field=e,this.dir=r}}function jO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{}class ir extends y4{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new OO(e,r,n):r==="array-contains"?new VO(e,n):r==="in"?new _4(e,n):r==="not-in"?new KO(e,n):r==="array-contains-any"?new qO(e,n):new ir(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new MO(e,n):new HO(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(fl(r,this.value)):r!==null&&Qc(this.value)===Qc(r)&&this.matchesComparison(fl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Br extends y4{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Br(e,r)}matches(e){return Nd(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Nd(t){return t.op==="and"}function o2(t){return t.op==="or"}function Ix(t){return B4(t)&&Nd(t)}function B4(t){for(const e of t.filters)if(e instanceof Br)return!1;return!0}function A2(t){if(t instanceof ir)return t.field.canonicalString()+t.op.toString()+_d(t.value);if(Ix(t))return t.filters.map(e=>A2(e)).join(",");{const e=t.filters.map(r=>A2(r)).join(",");return`${t.op}(${e})`}}function x4(t,e){return t instanceof ir?function(n,s){return s instanceof ir&&n.op===s.op&&n.field.isEqual(s.field)&&Oa(n.value,s.value)}(t,e):t instanceof Br?function(n,s){return s instanceof Br&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&x4(a,s.filters[o]),!0):!1}(t,e):void Ct()}function b4(t,e){const r=t.filters.concat(e);return Br.create(r,t.op)}function C4(t){return t instanceof ir?function(r){return`${r.field.canonicalString()} ${r.op} ${_d(r.value)}`}(t):t instanceof Br?function(r){return r.op.toString()+" {"+r.getFilters().map(C4).join(" ,")+"}"}(t):"Filter"}class OO extends ir{constructor(e,r,n){super(e,r,n),this.key=lt.fromName(n.referenceValue)}matches(e){const r=lt.comparator(e.key,this.key);return this.matchesComparison(r)}}class MO extends ir{constructor(e,r){super(e,"in",r),this.keys=E4("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class HO extends ir{constructor(e,r){super(e,"not-in",r),this.keys=E4("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function E4(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>lt.fromName(n.referenceValue))}class VO extends ir{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ap(r)&&sp(r.arrayValue,this.value)}}class _4 extends ir{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&sp(this.value.arrayValue,r)}}class KO extends ir{constructor(e,r){super(e,"not-in",r)}matches(e){if(sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!sp(this.value.arrayValue,r)}}class qO extends ir{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ap(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>sp(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function l2(t,e=null,r=[],n=[],s=null,i=null,a=null){return new GO(t,e,r,n,s,i,a)}function Pc(t){const e=jt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>A2(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Up(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>_d(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>_d(n)).join(",")),e.ue=r}return e.ue}function Qp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!jO(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!x4(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!X5(t.startAt,e.startAt)&&X5(t.endAt,e.endAt)}function F0(t){return lt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function T0(t,e){return t.filters.filter(r=>r instanceof ir&&r.field.isEqual(e))}function J5(t,e,r){let n=Mg,s=!0;for(const i of T0(t,e)){let a=Mg,o=!0;switch(i.op){case"<":case"<=":a=RO(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=Mg}z5({value:n,inclusive:s},{value:a,inclusive:o})<0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];z5({value:n,inclusive:s},{value:a,inclusive:r.inclusive})<0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}function Y5(t,e,r){let n=HA,s=!0;for(const i of T0(t,e)){let a=HA,o=!0;switch(i.op){case">=":case">":a=DO(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=HA}W5({value:n,inclusive:s},{value:a,inclusive:o})>0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];W5({value:n,inclusive:s},{value:a,inclusive:r.inclusive})>0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,A=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=A,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zO(t,e,r,n,s,i,a,o){return new Vd(t,e,r,n,s,i,a,o)}function Pp(t){return new Vd(t)}function Z5(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function I4(t){return t.collectionGroup!==null}function wf(t){const e=jt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new _r(qr.comparator);return a.filters.forEach(A=>{A.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new op(i,n))}),r.has(qr.keyField().canonicalString())||e.ce.push(new op(qr.keyField(),n))}return e.ce}function Pi(t){const e=jt(t);return e.le||(e.le=WO(e,wf(t))),e.le}function WO(t,e){if(t.limitType==="F")return l2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new op(s.field,i)});const r=t.endAt?new Id(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Id(t.startAt.position,t.startAt.inclusive):null;return l2(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function c2(t,e){const r=t.filters.concat([e]);return new Vd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function U0(t,e,r){return new Vd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Iw(t,e){return Qp(Pi(t),Pi(e))&&t.limitType===e.limitType}function N4(t){return`${Pc(Pi(t))}|lt:${t.limitType}`}function Ru(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>C4(s)).join(", ")}]`),Up(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>_d(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>_d(s)).join(",")),`Target(${n})`}(Pi(t))}; limitType=${t.limitType})`}function Lp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):lt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of wf(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,A){const c=$5(a,o,A);return a.inclusive?c<=0:c<0}(n.startAt,wf(n),s)||n.endAt&&!function(a,o,A){const c=$5(a,o,A);return a.inclusive?c>=0:c>0}(n.endAt,wf(n),s))}(t,e)}function $O(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function S4(t){return(e,r)=>{let n=!1;for(const s of wf(t)){const i=XO(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function XO(t,e,r){const n=t.field.isKeyField()?lt.comparator(e.key,r.key):function(i,a,o){const A=a.data.field(i),c=o.data.field(i);return A!==null&&c!==null?fl(A,c):Ct()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ct()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hc(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return p4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=new Wr(lt.comparator);function ai(){return JO}const F4=new Wr(lt.comparator);function $h(...t){let e=F4;for(const r of t)e=e.insert(r.key,r);return e}function T4(t){let e=F4;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Qa(){return vf()}function U4(){return vf()}function vf(){return new Il(t=>t.toString(),(t,e)=>t.isEqual(e))}const YO=new Wr(lt.comparator),ZO=new _r(lt.comparator);function Jt(...t){let e=ZO;for(const r of t)e=e.add(r);return e}const eM=new _r(qt);function tM(){return eM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rp(e)?"-0":e}}function Q4(t){return{integerValue:""+t}}function rM(t,e){return pO(e)?Q4(e):Nx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this._=void 0}}function nM(t,e,r){return t instanceof Ap?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ex(i)&&(i=_x(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof Sd?L4(t,e):t instanceof Fd?k4(t,e):function(s,i){const a=P4(s,i),o=eE(a)+eE(s.Pe);return a2(a)&&a2(s.Pe)?Q4(o):Nx(s.serializer,o)}(t,e)}function sM(t,e,r){return t instanceof Sd?L4(t,e):t instanceof Fd?k4(t,e):r}function P4(t,e){return t instanceof lp?function(n){return a2(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Ap extends Nw{}class Sd extends Nw{constructor(e){super(),this.elements=e}}function L4(t,e){const r=R4(e);for(const n of t.elements)r.some(s=>Oa(s,n))||r.push(n);return{arrayValue:{values:r}}}class Fd extends Nw{constructor(e){super(),this.elements=e}}function k4(t,e){let r=R4(e);for(const n of t.elements)r=r.filter(s=>!Oa(s,n));return{arrayValue:{values:r}}}class lp extends Nw{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function eE(t){return Hr(t.integerValue||t.doubleValue)}function R4(t){return ap(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,r){this.field=e,this.transform=r}}function aM(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Sd&&s instanceof Sd||n instanceof Fd&&s instanceof Fd?Ed(n.elements,s.elements,Oa):n instanceof lp&&s instanceof lp?Oa(n.Pe,s.Pe):n instanceof Ap&&s instanceof Ap}(t.transform,e.transform)}class oM{constructor(e,r){this.version=e,this.transformResults=r}}class Gr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Gr}static exists(e){return new Gr(void 0,e)}static updateTime(e){return new Gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sw{}function D4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qd(t.key,Gr.none()):new Kd(t.key,t.data,Gr.none());{const r=t.data,n=ss.empty();let s=new _r(qr.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new Vo(t.key,n,new Gs(s.toArray()),Gr.none())}}function AM(t,e,r){t instanceof Kd?function(s,i,a){const o=s.value.clone(),A=rE(s.fieldTransforms,i,a.transformResults);o.setAll(A),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof Vo?function(s,i,a){if(!Vg(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=rE(s.fieldTransforms,i,a.transformResults),A=i.data;A.setAll(j4(s)),A.setAll(o),i.convertToFoundDocument(a.version,A).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function yf(t,e,r,n){return t instanceof Kd?function(i,a,o,A){if(!Vg(i.precondition,a))return o;const c=i.value.clone(),d=nE(i.fieldTransforms,A,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Vo?function(i,a,o,A){if(!Vg(i.precondition,a))return o;const c=nE(i.fieldTransforms,A,a),d=a.data;return d.setAll(j4(i)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,a,o){return Vg(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function lM(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=P4(n.transform,s||null);i!=null&&(r===null&&(r=ss.empty()),r.set(n.field,i))}return r||null}function tE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ed(n,s,(i,a)=>aM(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kd extends Sw{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vo extends Sw{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function j4(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function rE(t,e,r){const n=new Map;It(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,sM(a,o,r[s]))}return n}function nE(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,nM(i,a,e))}return n}class qd extends Sw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sx extends Sw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&AM(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=yf(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=yf(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=U4();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const A=D4(a,o);A!==null&&n.set(s.key,A),a.isValidDocument()||a.convertToNoDocument(St.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Jt())}isEqual(e){return this.batchId===e.batchId&&Ed(this.mutations,e.mutations,(r,n)=>tE(r,n))&&Ed(this.baseMutations,e.baseMutations,(r,n)=>tE(r,n))}}class Tx{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){It(e.mutations.length===n.length);let s=function(){return YO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new Tx(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bn,ar;function O4(t){switch(t){default:return Ct();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function M4(t){if(t===void 0)return Fs("GRPC error has no .code"),Le.UNKNOWN;switch(t){case bn.OK:return Le.OK;case bn.CANCELLED:return Le.CANCELLED;case bn.UNKNOWN:return Le.UNKNOWN;case bn.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case bn.INTERNAL:return Le.INTERNAL;case bn.UNAVAILABLE:return Le.UNAVAILABLE;case bn.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case bn.NOT_FOUND:return Le.NOT_FOUND;case bn.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case bn.ABORTED:return Le.ABORTED;case bn.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case bn.DATA_LOSS:return Le.DATA_LOSS;default:return Ct()}}(ar=bn||(bn={}))[ar.OK=0]="OK",ar[ar.CANCELLED=1]="CANCELLED",ar[ar.UNKNOWN=2]="UNKNOWN",ar[ar.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ar[ar.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ar[ar.NOT_FOUND=5]="NOT_FOUND",ar[ar.ALREADY_EXISTS=6]="ALREADY_EXISTS",ar[ar.PERMISSION_DENIED=7]="PERMISSION_DENIED",ar[ar.UNAUTHENTICATED=16]="UNAUTHENTICATED",ar[ar.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ar[ar.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ar[ar.ABORTED=10]="ABORTED",ar[ar.OUT_OF_RANGE=11]="OUT_OF_RANGE",ar[ar.UNIMPLEMENTED=12]="UNIMPLEMENTED",ar[ar.INTERNAL=13]="INTERNAL",ar[ar.UNAVAILABLE=14]="UNAVAILABLE",ar[ar.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new gc([4294967295,4294967295],0);function sE(t){const e=uM().encode(t),r=new YF;return r.update(e),new Uint8Array(r.digest())}function iE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new gc([r,n],0),new gc([s,i],0)]}class Qx{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Xh(`Invalid padding: ${r}`);if(n<0)throw new Xh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Xh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Xh(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=gc.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(gc.fromNumber(n)));return s.compare(dM)===1&&(s=new gc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=sE(e),[n,s]=iE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Qx(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=sE(e),[n,s]=iE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Xh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,kp.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Fw(St.min(),s,new Wr(qt),ai(),Jt())}}class kp{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new kp(n,r,Jt(),Jt(),Jt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class H4{constructor(e,r){this.targetId=e,this.me=r}}class V4{constructor(e,r,n=yn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class aE{constructor(){this.fe=0,this.ge=AE(),this.pe=yn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Jt(),r=Jt(),n=Jt();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Ct()}}),new kp(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=AE()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,It(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hM{constructor(e){this.Le=e,this.Be=new Map,this.ke=ai(),this.qe=oE(),this.Qe=new Wr(qt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Ct()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(F0(i))if(n===0){const a=new lt(i.path);this.Ue(r,a,Kr.newNoDocument(a,St.min()))}else It(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),A=o?this.Xe(o,e,a):1;if(A!==0){this.je(r);const c=A===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=dl(n).toUint8Array()}catch(A){if(A instanceof m4)return ul("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw A}try{o=new Qx(a,s,i)}catch(A){return ul(A instanceof Xh?"BloomFilter error: ":"Applying bloom filter failed: ",A),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&F0(o.target)){const A=new lt(o.target.path);this.ke.get(A)!==null||this.it(a,A)||this.Ue(a,A,Kr.newNoDocument(A,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=Jt();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(A=>{const c=this.Je(A);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Fw(e,r,this.Qe,this.ke,n);return this.ke=ai(),this.qe=oE(),this.Qe=new Wr(qt),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new aE,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new _r(qt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||We("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new aE),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function oE(){return new Wr(lt.comparator)}function AE(){return new Wr(lt.comparator)}const fM={asc:"ASCENDING",desc:"DESCENDING"},pM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mM={and:"AND",or:"OR"};class gM{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function u2(t,e){return t.useProto3Json||Up(e)?e:{value:e}}function Td(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wM(t,e){return Td(t,e.toTimestamp())}function Kn(t){return It(!!t),St.fromTimestamp(function(r){const n=jo(r);return new Pt(n.seconds,n.nanos)}(t))}function Px(t,e){return d2(t,e).canonicalString()}function d2(t,e){const r=function(s){return new ur(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function q4(t){const e=ur.fromString(t);return It(eT(e)),e}function cp(t,e){return Px(t.databaseId,e.path)}function No(t,e){const r=q4(e);if(r.get(1)!==t.databaseId.projectId)throw new Ze(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ze(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new lt(W4(r))}function G4(t,e){return Px(t.databaseId,e)}function z4(t){const e=q4(t);return e.length===4?ur.emptyPath():W4(e)}function h2(t){return new ur(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function W4(t){return It(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lE(t,e,r){return{name:cp(t,e),fields:r.value.mapValue.fields}}function vM(t,e,r){const n=No(t,e.name),s=Kn(e.updateTime),i=e.createTime?Kn(e.createTime):St.min(),a=new ss({mapValue:{fields:e.fields}}),o=Kr.newFoundDocument(n,s,i,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function yM(t,e){return"found"in e?function(n,s){It(!!s.found),s.found.name,s.found.updateTime;const i=No(n,s.found.name),a=Kn(s.found.updateTime),o=s.found.createTime?Kn(s.found.createTime):St.min(),A=new ss({mapValue:{fields:s.found.fields}});return Kr.newFoundDocument(i,a,o,A)}(t,e):"missing"in e?function(n,s){It(!!s.missing),It(!!s.readTime);const i=No(n,s.missing),a=Kn(s.readTime);return Kr.newNoDocument(i,a)}(t,e):Ct()}function BM(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ct()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(It(d===void 0||typeof d=="string"),yn.fromBase64String(d||"")):(It(d===void 0||d instanceof Buffer||d instanceof Uint8Array),yn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const d=c.code===void 0?Le.UNKNOWN:M4(c.code);return new Ze(d,c.message||"")}(a);r=new V4(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=No(t,n.document.name),i=Kn(n.document.updateTime),a=n.document.createTime?Kn(n.document.createTime):St.min(),o=new ss({mapValue:{fields:n.document.fields}}),A=Kr.newFoundDocument(s,i,a,o),c=n.targetIds||[],d=n.removedTargetIds||[];r=new Kg(c,d,A.key,A)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=No(t,n.document),i=n.readTime?Kn(n.readTime):St.min(),a=Kr.newNoDocument(s,i),o=n.removedTargetIds||[];r=new Kg([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=No(t,n.document),i=n.removedTargetIds||[];r=new Kg([],i,s,null)}else{if(!("filter"in e))return Ct();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new cM(s,i),o=n.targetId;r=new H4(o,a)}}return r}function up(t,e){let r;if(e instanceof Kd)r={update:lE(t,e.key,e.value)};else if(e instanceof qd)r={delete:cp(t,e.key)};else if(e instanceof Vo)r={update:lE(t,e.key,e.data),updateMask:IM(e.fieldMask)};else{if(!(e instanceof Sx))return Ct();r={verify:cp(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof Ap)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Sd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Fd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof lp)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Ct()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:wM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ct()}(t,e.precondition)),r}function f2(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?Gr.updateTime(Kn(i.updateTime)):i.exists!==void 0?Gr.exists(i.exists):Gr.none()}(e.currentDocument):Gr.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(a,o){let A=null;if("setToServerValue"in o)It(o.setToServerValue==="REQUEST_TIME"),A=new Ap;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];A=new Sd(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];A=new Fd(d)}else"increment"in o?A=new lp(a,o.increment):Ct();const c=qr.fromServerFormat(o.fieldPath);return new iM(c,A)}(t,s)):[];if(e.update){e.update.name;const s=No(t,e.update.name),i=new ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(A){const c=A.fieldPaths||[];return new Gs(c.map(d=>qr.fromServerFormat(d)))}(e.updateMask);return new Vo(s,i,a,r,n)}return new Kd(s,i,r,n)}if(e.delete){const s=No(t,e.delete);return new qd(s,r)}if(e.verify){const s=No(t,e.verify);return new Sx(s,r)}return Ct()}function xM(t,e){return t&&t.length>0?(It(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?Kn(s.updateTime):Kn(i);return a.isEqual(St.min())&&(a=Kn(i)),new oM(a,s.transformResults||[])}(r,e))):[]}function $4(t,e){return{documents:[G4(t,e.path)]}}function X4(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=G4(t,s);const i=function(c){if(c.length!==0)return Z4(Br.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:Du(m.field),direction:CM(m.dir)}}(d))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=u2(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function J4(t){let e=z4(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){It(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];r.where&&(i=function(f){const m=Y4(f);return m instanceof Br&&Ix(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(m=>function(B){return new op(ju(B.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(f){let m;return m=typeof f=="object"?f.value:f,Up(m)?null:m}(r.limit));let A=null;r.startAt&&(A=function(f){const m=!!f.before,g=f.values||[];return new Id(g,m)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const m=!f.before,g=f.values||[];return new Id(g,m)}(r.endAt)),zO(e,s,a,i,o,"F",A,c)}function bM(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Y4(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=ju(r.unaryFilter.field);return ir.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=ju(r.unaryFilter.field);return ir.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ju(r.unaryFilter.field);return ir.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ju(r.unaryFilter.field);return ir.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ct()}}(t):t.fieldFilter!==void 0?function(r){return ir.create(ju(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ct()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Br.create(r.compositeFilter.filters.map(n=>Y4(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ct()}}(r.compositeFilter.op))}(t):Ct()}function CM(t){return fM[t]}function EM(t){return pM[t]}function _M(t){return mM[t]}function Du(t){return{fieldPath:t.canonicalString()}}function ju(t){return qr.fromServerFormat(t.fieldPath)}function Z4(t){return t instanceof ir?function(r){if(r.op==="=="){if(G5(r.value))return{unaryFilter:{field:Du(r.field),op:"IS_NAN"}};if(q5(r.value))return{unaryFilter:{field:Du(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(G5(r.value))return{unaryFilter:{field:Du(r.field),op:"IS_NOT_NAN"}};if(q5(r.value))return{unaryFilter:{field:Du(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Du(r.field),op:EM(r.op),value:r.value}}}(t):t instanceof Br?function(r){const n=r.getFilters().map(s=>Z4(s));return n.length===1?n[0]:{compositeFilter:{op:_M(r.op),filters:n}}}(t):Ct()}function IM(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function eT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,r,n,s,i=St.min(),a=St.min(),o=yn.EMPTY_BYTE_STRING,A=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=A}withSequenceNumber(e){return new bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.ct=e}}function NM(t,e){let r;if(e.document)r=vM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=lt.fromSegments(e.noDocument.path),s=kc(e.noDocument.readTime);r=Kr.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ct();{const n=lt.fromSegments(e.unknownDocument.path),s=kc(e.unknownDocument.version);r=Kr.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const i=new Pt(s[0],s[1]);return St.fromTimestamp(i)}(e.readTime)),r}function cE(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Q0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,a){return{name:cp(i,a.key),fields:a.data.value.mapValue.fields,updateTime:Td(i,a.version.toTimestamp()),createTime:Td(i,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Lc(e.version)};else{if(!e.isUnknownDocument())return Ct();n.unknownDocument={path:r.path.toArray(),version:Lc(e.version)}}return n}function Q0(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Lc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kc(t){const e=new Pt(t.seconds,t.nanoseconds);return St.fromTimestamp(e)}function ic(t,e){const r=(e.baseMutations||[]).map(i=>f2(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>f2(t.ct,i)),s=Pt.fromMillis(e.localWriteTimeMs);return new Fx(e.batchId,s,r,n)}function Jh(t){const e=kc(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?kc(t.lastLimboFreeSnapshotVersion):St.min();let n;return n=function(i){return i.documents!==void 0}(t.query)?function(i){return It(i.documents.length===1),Pi(Pp(z4(i.documents[0])))}(t.query):function(i){return Pi(J4(i))}(t.query),new bo(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,yn.fromBase64String(t.resumeToken))}function rT(t,e){const r=Lc(e.snapshotVersion),n=Lc(e.lastLimboFreeSnapshotVersion);let s;s=F0(e.target)?$4(t.ct,e.target):X4(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pc(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function nT(t){const e=J4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?U0(e,e.limit,"L"):e}function dy(t,e){return new Ux(e.largestBatchId,f2(t.ct,e.overlayMutation))}function uE(t,e){const r=e.path.lastSegment();return[t,Qs(e.path.popLast()),r]}function dE(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Lc(n.readTime),documentKey:Qs(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{getBundleMetadata(e,r){return hE(e).get(r).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:kc(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,r){return hE(e).put(function(s){return{bundleId:s.id,createTime:Lc(Kn(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return fE(e).get(r).next(n=>{if(n)return function(i){return{name:i.name,query:nT(i.bundledQuery),readTime:kc(i.readTime)}}(n)})}saveNamedQuery(e,r){return fE(e).put(function(s){return{name:s.name,readTime:Lc(Kn(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function hE(t){return Qn(t,"bundles")}function fE(t){return Qn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Tw(e,n)}getOverlay(e,r){return Eh(e).get(uE(this.userId,r)).next(n=>n?dy(this.serializer,n):null)}getOverlays(e,r){const n=Qa();return Ne.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((i,a)=>{const o=new Ux(r,a);s.push(this.ht(e,o))}),Ne.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(a=>s.add(Qs(a.getCollectionPath())));const i=[];return s.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(Eh(e).j("collectionPathOverlayIndex",o))}),Ne.waitFor(i)}getOverlaysForCollection(e,r,n){const s=Qa(),i=Qs(r),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Eh(e).U("collectionPathOverlayIndex",a).next(o=>{for(const A of o){const c=dy(this.serializer,A);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const i=Qa();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Eh(e).J({index:"collectionGroupOverlayIndex",range:o},(A,c,d)=>{const f=dy(this.serializer,c);i.size()<s||f.largestBatchId===a?(i.set(f.getKey(),f),a=f.largestBatchId):d.done()}).next(()=>i)}ht(e,r){return Eh(e).put(function(s,i,a){const[o,A,c]=uE(i,a.mutation.key);return{userId:i,collectionPath:A,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:up(s.ct,a.mutation)}}(this.serializer,this.userId,r))}}function Eh(t){return Qn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{Pt(e){return Qn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?yn.fromUint8Array(n):yn.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Hr(e.integerValue));else if("doubleValue"in e){const n=Hr(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),rp(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=jo(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(dl(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?g4(e)?this.dt(r,Number.MAX_SAFE_INTEGER):_w(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Ct()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const i=e.fields||{};this.dt(r,53);const a="value",o=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(Hr(o)),this.Vt(a,r),this.Tt(i[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),lt.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}ac.vt=new ac;function TM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function pE(t){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const a=TM(255&n[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class UM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=pE(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=pE(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class QM{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class PM{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class _h{constructor(){this.jt=new UM,this.Ht=new QM(this.jt),this.Jt=new PM(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new oc(this.indexId,this.documentKey,this.arrayValue,n)}}function yA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=mE(t.arrayValue,e.arrayValue),r!==0?r:(r=mE(t.directionalValue,e.directionalValue),r!==0?r:lt.comparator(t.documentKey,e.documentKey)))}function mE(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.Xt=new _r((r,n)=>qr.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(It(e.collectionGroup===this.collectionId),this.nn)return!1;const r=n2(e);if(r!==void 0&&!this.sn(r))return!1;const n=tc(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.sn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const A=n[i];if(!this.on(o,A)||!this._n(this.en[a++],A))return!1}++i}for(;i<n.length;++i){const o=n[i];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new _r(qr.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new jg(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new jg(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new jg(n.field,n.dir==="asc"?0:1)));return new S0(S0.UNKNOWN_ID,this.collectionId,r,tp.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t){var e,r;if(It(t instanceof ir||t instanceof Br),t instanceof ir){if(t instanceof _4){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(i=>ir.create(t.field,"==",i)))||[];return Br.create(s,"or")}return t}const n=t.filters.map(s=>sT(s));return Br.create(n,t.op)}function LM(t){if(t.getFilters().length===0)return[];const e=g2(sT(t));return It(iT(e)),p2(e)||m2(e)?[e]:e.getFilters()}function p2(t){return t instanceof ir}function m2(t){return t instanceof Br&&Ix(t)}function iT(t){return p2(t)||m2(t)||function(r){if(r instanceof Br&&o2(r)){for(const n of r.getFilters())if(!p2(n)&&!m2(n))return!1;return!0}return!1}(t)}function g2(t){if(It(t instanceof ir||t instanceof Br),t instanceof ir)return t;if(t.filters.length===1)return g2(t.filters[0]);const e=t.filters.map(n=>g2(n));let r=Br.create(e,t.op);return r=P0(r),iT(r)?r:(It(r instanceof Br),It(Nd(r)),It(r.filters.length>1),r.filters.reduce((n,s)=>Lx(n,s)))}function Lx(t,e){let r;return It(t instanceof ir||t instanceof Br),It(e instanceof ir||e instanceof Br),r=t instanceof ir?e instanceof ir?function(s,i){return Br.create([s,i],"and")}(t,e):wE(t,e):e instanceof ir?wE(e,t):function(s,i){if(It(s.filters.length>0&&i.filters.length>0),Nd(s)&&Nd(i))return b4(s,i.getFilters());const a=o2(s)?s:i,o=o2(s)?i:s,A=a.filters.map(c=>Lx(c,o));return Br.create(A,"or")}(t,e),P0(r)}function wE(t,e){if(Nd(e))return b4(e,t.getFilters());{const r=e.filters.map(n=>Lx(t,n));return Br.create(r,"or")}}function P0(t){if(It(t instanceof ir||t instanceof Br),t instanceof ir)return t;const e=t.getFilters();if(e.length===1)return P0(e[0]);if(B4(t))return t;const r=e.map(s=>P0(s)),n=[];return r.forEach(s=>{s instanceof ir?n.push(s):s instanceof Br&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Br.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(){this.un=new kx}addToCollectionParentIndex(e,r){return this.un.add(r),Ne.resolve()}getCollectionParents(e,r){return Ne.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ne.resolve()}deleteFieldIndex(e,r){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,r){return Ne.resolve()}getDocumentsMatchingTarget(e,r){return Ne.resolve(null)}getIndexType(e,r){return Ne.resolve(0)}getFieldIndexes(e,r){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,r){return Ne.resolve(ci.min())}getMinOffsetFromCollectionGroup(e,r){return Ne.resolve(ci.min())}updateCollectionGroup(e,r,n){return Ne.resolve()}updateIndexEntries(e,r){return Ne.resolve()}}class kx{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new _r(ur.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new _r(ur.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm=new Uint8Array(0);class RM{constructor(e,r){this.databaseId=r,this.cn=new kx,this.ln=new Il(n=>Pc(n),(n,s)=>Qp(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const i={collectionId:n,parent:Qs(s)};return vE(e).put(i)}return Ne.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[a4(r),""],!1,!0);return vE(e).U(s).next(i=>{for(const a of i){if(a.collectionId!==r)break;n.push(Ua(a.parent))}return n})}addFieldIndex(e,r){const n=Ih(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(A=>[A.fieldPath.canonicalString(),A.kind])}}(r);delete s.indexId;const i=n.add(s);if(r.indexState){const a=yu(e);return i.next(o=>{a.put(dE(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return i.next()}deleteFieldIndex(e,r){const n=Ih(e),s=yu(e),i=vu(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Ih(e),n=vu(e),s=yu(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return Ne.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new gE(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,r){const n=vu(e);let s=!0;const i=new Map;return Ne.forEach(this.hn(r),a=>this.Pn(e,a).next(o=>{s&&(s=!!o),i.set(a,o)})).next(()=>{if(s){let a=Jt();const o=[];return Ne.forEach(i,(A,c)=>{We("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(A)} to execute ${Pc(r)}`);const d=function(I,D){const H=n2(D);if(H===void 0)return null;for(const k of T0(I,H.fieldPath))switch(k.op){case"array-contains-any":return k.value.arrayValue.values||[];case"array-contains":return[k.value]}return null}(c,A),f=function(I,D){const H=new Map;for(const k of tc(D))for(const T of T0(I,k.fieldPath))switch(T.op){case"==":case"in":H.set(k.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return H.set(k.fieldPath.canonicalString(),T.value),Array.from(H.values())}return null}(c,A),m=function(I,D){const H=[];let k=!0;for(const T of tc(D)){const E=T.kind===0?J5(I,T.fieldPath,I.startAt):Y5(I,T.fieldPath,I.startAt);H.push(E.value),k&&(k=E.inclusive)}return new Id(H,k)}(c,A),g=function(I,D){const H=[];let k=!0;for(const T of tc(D)){const E=T.kind===0?Y5(I,T.fieldPath,I.endAt):J5(I,T.fieldPath,I.endAt);H.push(E.value),k&&(k=E.inclusive)}return new Id(H,k)}(c,A),B=this.In(A,c,m),b=this.In(A,c,g),_=this.Tn(A,c,f),w=this.En(A.indexId,d,B,m.inclusive,b,g.inclusive,_);return Ne.forEach(w,y=>n.G(y,r.limit).next(I=>{I.forEach(D=>{const H=lt.fromSegments(D.documentKey);a.has(H)||(a=a.add(H),o.push(H))})}))}).next(()=>o)}return Ne.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=LM(Br.create(e.filters,"and")).map(n=>l2(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,i,a,o){const A=(r!=null?r.length:1)*Math.max(n.length,i.length),c=A/(r!=null?r.length:1),d=[];for(let f=0;f<A;++f){const m=r?this.dn(r[f/c]):Rm,g=this.An(e,m,n[f%c],s),B=this.Rn(e,m,i[f%c],a),b=o.map(_=>this.An(e,m,_,!0));d.push(...this.createRange(g,B,b))}return d}An(e,r,n,s){const i=new oc(e,lt.empty(),r,n);return s?i:i.Zt()}Rn(e,r,n,s){const i=new oc(e,lt.empty(),r,n);return s?i.Zt():i}Pn(e,r){const n=new gE(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const o of i)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,r){let n=2;const s=this.hn(r);return Ne.forEach(s,i=>this.Pn(e,i).next(a=>{a?n!==0&&a.fields.length<function(A){let c=new _r(qr.comparator),d=!1;for(const f of A.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:c=c.add(m.field));for(const f of A.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(d?1:0)}(i)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new _h;for(const s of tc(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const a=n.Yt(s.kind);ac.vt.It(i,a)}return n.zt()}dn(e){const r=new _h;return ac.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new _h;return ac.vt.It(ip(this.databaseId,r),n.Yt(function(i){const a=tc(i);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new _h);let i=0;for(const a of tc(e)){const o=n[i++];for(const A of s)if(this.fn(r,a.fieldPath)&&ap(o))s=this.gn(s,a,o);else{const c=A.Yt(a.kind);ac.vt.It(o,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const o of s){const A=new _h;A.seed(o.zt()),ac.vt.It(a,A.Yt(r.kind)),i.push(A)}return i}fn(e,r){return!!e.filters.find(n=>n instanceof ir&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Ih(e),s=yu(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(i=>{const a=[];return Ne.forEach(i,o=>s.get([o.indexId,this.uid]).next(A=>{a.push(function(d,f){const m=f?new tp(f.sequenceNumber,new ci(kc(f.readTime),new lt(Ua(f.documentKey)),f.largestBatchId)):tp.empty(),g=d.fields.map(([B,b])=>new jg(qr.fromServerFormat(B),b));return new S0(d.indexId,d.collectionGroup,g,m)}(o,A))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:qt(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=Ih(e),i=yu(e);return this.yn(e).next(a=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>Ne.forEach(o,A=>i.put(dE(A.indexId,this.uid,a,n)))))}updateIndexEntries(e,r){const n=new Map;return Ne.forEach(r,(s,i)=>{const a=n.get(s.collectionGroup);return(a?Ne.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(n.set(s.collectionGroup,o),Ne.forEach(o,A=>this.wn(e,s,A).next(c=>{const d=this.Sn(i,A);return c.isEqual(d)?Ne.resolve():this.bn(e,i,A,c,d)}))))})}Dn(e,r,n,s){return vu(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return vu(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=vu(e);let i=new _r(yA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(a,o)=>{i=i.add(new oc(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>i)}Sn(e,r){let n=new _r(yA);const s=this.Vn(r,e);if(s==null)return n;const i=n2(r);if(i!=null){const a=e.data.field(i.fieldPath);if(ap(a))for(const o of a.arrayValue.values||[])n=n.add(new oc(r.indexId,e.key,this.dn(o),s))}else n=n.add(new oc(r.indexId,e.key,Rm,s));return n}bn(e,r,n,s,i){We("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return function(A,c,d,f,m){const g=A.getIterator(),B=c.getIterator();let b=wu(g),_=wu(B);for(;b||_;){let w=!1,y=!1;if(b&&_){const I=d(b,_);I<0?y=!0:I>0&&(w=!0)}else b!=null?y=!0:w=!0;w?(f(_),_=wu(B)):y?(m(b),b=wu(g)):(b=wu(g),_=wu(B))}}(s,i,yA,o=>{a.push(this.Dn(e,r,n,o))},o=>{a.push(this.vn(e,r,n,o))}),Ne.waitFor(a)}yn(e){let r=1;return yu(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((a,o)=>yA(a,o)).filter((a,o,A)=>!o||yA(a,A[o-1])!==0);const s=[];s.push(e);for(const a of n){const o=yA(a,e),A=yA(a,r);if(o===0)s[0]=e.Zt();else if(o>0&&A<0)s.push(a),s.push(a.Zt());else if(A>0)break}s.push(r);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const o=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,Rm,[]],A=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,Rm,[]];i.push(IDBKeyRange.bound(o,A))}return i}Cn(e,r){return yA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(yE)}getMinOffset(e,r){return Ne.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||Ct())).next(yE)}}function vE(t){return Qn(t,"collectionParents")}function vu(t){return Qn(t,"indexEntries")}function Ih(t){return Qn(t,"indexConfiguration")}function yu(t){return Qn(t,"indexState")}function yE(t){It(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;xx(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new ci(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hs{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Hs(e,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(r.batchId);let o=0;const A=n.J({range:a},(d,f,m)=>(o++,m.delete()));i.push(A.next(()=>{It(o===1)}));const c=[];for(const d of r.mutations){const f=u4(e,d.key.path,r.batchId);i.push(s.delete(f)),c.push(d.key)}return Ne.waitFor(i).next(()=>c)}function L0(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ct();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs.DEFAULT_COLLECTION_PERCENTILE=10,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hs.DEFAULT=new Hs(41943040,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hs.DISABLED=new Hs(-1,0,0);class Uw{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){It(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Uw(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return BA(e).J({index:"userMutationsIndex",range:n},(s,i,a)=>{r=!1,a.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const i=Ou(e),a=BA(e);return a.add({}).next(o=>{It(typeof o=="number");const A=new Fx(o,r,n,s),c=function(g,B,b){const _=b.baseMutations.map(y=>up(g.ct,y)),w=b.mutations.map(y=>up(g.ct,y));return{userId:B,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:_,mutations:w}}(this.serializer,this.userId,A),d=[];let f=new _r((m,g)=>qt(m.canonicalString(),g.canonicalString()));for(const m of s){const g=u4(this.userId,m.key.path,o);f=f.add(m.key.path.popLast()),d.push(a.put(c)),d.push(i.put(g,gO))}return f.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[o]=A.keys()}),Ne.waitFor(d).next(()=>A)})}lookupMutationBatch(e,r){return BA(e).get(r).next(n=>n?(It(n.userId===this.userId),ic(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Ne.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return BA(e).J({index:"userMutationsIndex",range:s},(a,o,A)=>{o.userId===this.userId&&(It(o.batchId>=n),i=ic(this.serializer,o)),A.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return BA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,i,a)=>{n=i.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return BA(e).U("userMutationsIndex",r).next(n=>n.map(s=>ic(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Og(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return Ou(e).J({range:s},(a,o,A)=>{const[c,d,f]=a,m=Ua(d);if(c===this.userId&&r.path.isEqual(m))return BA(e).get(f).next(g=>{if(!g)throw Ct();It(g.userId===this.userId),i.push(ic(this.serializer,g))});A.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new _r(qt);const s=[];return r.forEach(i=>{const a=Og(this.userId,i.path),o=IDBKeyRange.lowerBound(a),A=Ou(e).J({range:o},(c,d,f)=>{const[m,g,B]=c,b=Ua(g);m===this.userId&&i.path.isEqual(b)?n=n.add(B):f.done()});s.push(A)}),Ne.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=Og(this.userId,n),a=IDBKeyRange.lowerBound(i);let o=new _r(qt);return Ou(e).J({range:a},(A,c,d)=>{const[f,m,g]=A,B=Ua(m);f===this.userId&&n.isPrefixOf(B)?B.length===s&&(o=o.add(g)):d.done()}).next(()=>this.xn(e,o))}xn(e,r){const n=[],s=[];return r.forEach(i=>{s.push(BA(e).get(i).next(a=>{if(a===null)throw Ct();It(a.userId===this.userId),n.push(ic(this.serializer,a))}))}),Ne.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return aT(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Ne.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Ne.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return Ou(e).J({range:n},(i,a,o)=>{if(i[0]===this.userId){const A=Ua(i[1]);s.push(A)}else o.done()}).next(()=>{It(s.length===0)})})}containsKey(e,r){return oT(e,this.userId,r)}Nn(e){return AT(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oT(t,e,r){const n=Og(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return Ou(t).J({range:i,H:!0},(o,A,c)=>{const[d,f,m]=o;d===e&&f===s&&(a=!0),c.done()}).next(()=>a)}function BA(t){return Qn(t,"mutations")}function Ou(t){return Qn(t,"documentMutations")}function AT(t){return Qn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Rc(0)}static kn(){return new Rc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Rc(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>St.fromTimestamp(new Pt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Bu(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(It(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const i=[];return Bu(e).J((a,o)=>{const A=Jh(o);A.sequenceNumber<=r&&n.get(A.targetId)===null&&(s++,i.push(this.removeTargetData(e,A)))}).next(()=>Ne.waitFor(i)).next(()=>s)}forEachTarget(e,r){return Bu(e).J((n,s)=>{const i=Jh(s);r(i)})}qn(e){return xE(e).get("targetGlobalKey").next(r=>(It(r!==null),r))}Qn(e,r){return xE(e).put("targetGlobalKey",r)}Kn(e,r){return Bu(e).put(rT(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Pc(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Bu(e).J({range:s,index:"queryTargetsIndex"},(a,o,A)=>{const c=Jh(o);Qp(r,c.target)&&(i=c,A.done())}).next(()=>i)}addMatchingKeys(e,r,n){const s=[],i=RA(e);return r.forEach(a=>{const o=Qs(a.path);s.push(i.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,a))}),Ne.waitFor(s)}removeMatchingKeys(e,r,n){const s=RA(e);return Ne.forEach(r,i=>{const a=Qs(i.path);return Ne.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,r){const n=RA(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=RA(e);let i=Jt();return s.J({range:n,H:!0},(a,o,A)=>{const c=Ua(a[1]),d=new lt(c);i=i.add(d)}).next(()=>i)}containsKey(e,r){const n=Qs(r.path),s=IDBKeyRange.bound([n],[a4(n)],!1,!0);let i=0;return RA(e).J({index:"documentTargetsIndex",H:!0,range:s},([a,o],A,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,r){return Bu(e).get(r).next(n=>n?Jh(n):null)}}function Bu(t){return Qn(t,"targets")}function xE(t){return Qn(t,"targetGlobal")}function RA(t){return Qn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE([t,e],[r,n]){const s=qt(t,r);return s===0?qt(e,n):s}class jM{constructor(e){this.Un=e,this.buffer=new _r(bE),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();bE(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class OM{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){We("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){_l(r)?We("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Mc(r)}await this.Hn(3e5)})}}class MM{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ne.resolve(Fi.oe);const n=new jM(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(We("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(BE)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BE):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,i,a,o,A,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(We("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,o=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,A=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(c=Date.now(),ku()<=sr.DEBUG&&We("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(A-o)+`ms
	Removed ${f} documents in `+(c-A)+`ms
Total Duration: ${c-d}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function HM(t,e){return new MM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,r){this.db=e,this.garbageCollector=HM(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return Dm(e,n)}removeReference(e,r,n){return Dm(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Dm(e,r)}nr(e,r){return function(s,i){let a=!1;return AT(s).Y(o=>oT(s,o,i).next(A=>(A&&(a=!0),Ne.resolve(!A)))).next(()=>a)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(a,o)=>{if(o<=r){const A=this.nr(e,a).next(c=>{if(!c)return i++,n.getEntry(e,a).next(()=>(n.removeEntry(a,St.min()),RA(e).delete(function(f){return[0,Qs(f.path)]}(a))))});s.push(A)}}).next(()=>Ne.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Dm(e,r)}tr(e,r){const n=RA(e);let s,i=Fi.oe;return n.J({index:"documentTargetsIndex"},([a,o],{path:A,sequenceNumber:c})=>{a===0?(i!==Fi.oe&&r(new lt(Ua(s)),i),i=c,s=A):i=Fi.oe}).next(()=>{i!==Fi.oe&&r(new lt(Ua(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Dm(t,e){return RA(t).put(function(n,s){return{targetId:0,path:Qs(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.changes=new Il(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Kr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ne.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return $l(e).put(n)}removeEntry(e,r,n){return $l(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Q0(a),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Kr.newInvalidDocument(r);return $l(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Nh(r))},(s,i)=>{n=this.ir(r,i)}).next(()=>n)}sr(e,r){let n={size:0,document:Kr.newInvalidDocument(r)};return $l(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Nh(r))},(s,i)=>{n={document:this.ir(r,i),size:L0(i)}}).next(()=>n)}getEntries(e,r){let n=ai();return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a)}).next(()=>n)}ar(e,r){let n=ai(),s=new Wr(lt.comparator);return this._r(e,r,(i,a)=>{const o=this.ir(i,a);n=n.insert(i,o),s=s.insert(i,L0(a))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return Ne.resolve();let s=new _r(_E);r.forEach(A=>s=s.add(A));const i=IDBKeyRange.bound(Nh(s.first()),Nh(s.last())),a=s.getIterator();let o=a.getNext();return $l(e).J({index:"documentKeyIndex",range:i},(A,c,d)=>{const f=lt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&_E(o,f)<0;)n(o,null),o=a.getNext();o&&o.isEqual(f)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?d.$(Nh(o)):d.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,i){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),Q0(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],A=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $l(e).U(IDBKeyRange.bound(o,A,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=ai();for(const f of c){const m=this.ir(lt.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(Lp(r,m)||s.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,r,n,s){let i=ai();const a=EE(r,n),o=EE(r,ci.max());return $l(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(A,c,d)=>{const f=this.ir(lt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(f.key,f),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new qM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return CE(e).get("remoteDocumentGlobalKey").next(r=>(It(!!r),r))}rr(e,r){return CE(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=NM(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(St.min())))return n}return Kr.newInvalidDocument(e)}}function cT(t){return new KM(t)}class qM extends lT{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Il(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new _r((i,a)=>qt(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const A=cE(this.cr.serializer,a);s=s.add(i.path.popLast());const c=L0(A);n+=c-o.size,r.push(this.cr.addEntry(e,i,A))}else if(n-=o.size,this.trackRemovals){const A=cE(this.cr.serializer,a.convertToNoDocument(St.min()));r.push(this.cr.addEntry(e,i,A))}}),s.forEach(i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),r.push(this.cr.updateMetadata(e,n)),Ne.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((i,a)=>{this.lr.set(i,{size:a,readTime:n.get(i).readTime})}),n))}}function CE(t){return Qn(t,"remoteDocumentGlobal")}function $l(t){return Qn(t,"remoteDocumentsV14")}function Nh(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function EE(t,e){const r=e.documentKey.path.toArray();return[t,Q0(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function _E(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=qt(r[i],n[i]),s)return s;return s=qt(r.length,n.length),s||(s=qt(r[r.length-2],n[n.length-2]),s||qt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&yf(n.mutation,s,Gs.empty(),Pt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Jt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Jt()){const s=Qa();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=$h();return i.forEach((o,A)=>{a=a.insert(o,A.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Qa();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Jt()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=ai();const a=vf(),o=function(){return vf()}();return r.forEach((A,c)=>{const d=n.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Vo)?i=i.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),yf(d.mutation,c,d.mutation.getFieldMask(),Pt.now())):a.set(c.key,Gs.empty())}),this.recalculateAndSaveOverlays(e,i).next(A=>(A.forEach((c,d)=>a.set(c,d)),r.forEach((c,d)=>{var f;return o.set(c,new GM(d,(f=a.get(c))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,r){const n=vf();let s=new Wr((a,o)=>a-o),i=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(A=>{const c=r.get(A);if(c===null)return;let d=n.get(A)||Gs.empty();d=o.applyToLocalView(c,d),n.set(A,d);const f=(s.get(o.batchId)||Jt()).add(A);s=s.insert(o.batchId,f)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const A=o.getNext(),c=A.key,d=A.value,f=U4();d.forEach(m=>{if(!i.has(m)){const g=D4(r.get(m),n.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Ne.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return lt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):I4(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Ne.resolve(Qa());let o=-1,A=i;return a.next(c=>Ne.forEach(c,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),i.get(d)?Ne.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{A=A.insert(d,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,A,c,Jt())).next(d=>({batchId:o,changes:T4(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new lt(r)).next(n=>{let s=$h();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=$h();return this.indexManager.getCollectionParents(e,i).next(o=>Ne.forEach(o,A=>{const c=function(f,m){return new Vd(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,A.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(d=>{d.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((A,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,Kr.newInvalidDocument(d)))});let o=$h();return a.forEach((A,c)=>{const d=i.get(A);d!==void 0&&yf(d.mutation,c,Gs.empty(),Pt.now()),Lp(r,c)&&(o=o.insert(A,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ne.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Kn(s.createTime)}}(r)),Ne.resolve()}getNamedQuery(e,r){return Ne.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:nT(s.bundledQuery),readTime:Kn(s.readTime)}}(r)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.overlays=new Wr(lt.comparator),this.Ir=new Map}getOverlay(e,r){return Ne.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Qa();return Ne.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Ne.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Ne.resolve()}getOverlaysForCollection(e,r,n){const s=Qa(),i=r.length+1,a=new lt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const A=o.getNext().value,c=A.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&A.largestBatchId>n&&s.set(A.getKey(),A)}return Ne.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Wr((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=i.get(c.largestBatchId);d===null&&(d=Qa(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=Qa(),A=i.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=s)););return Ne.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Ux(r,n));let i=this.Ir.get(r);i===void 0&&(i=Jt(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.Tr=new _r(Mn.Er),this.dr=new _r(Mn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Mn(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Mn(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new lt(new ur([])),n=new Mn(r,e),s=new Mn(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new lt(new ur([])),n=new Mn(r,e),s=new Mn(r,e+1);let i=Jt();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new Mn(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Mn{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return lt.comparator(e.key,r.key)||qt(e.wr,r.wr)}static Ar(e,r){return qt(e.wr,r.wr)||lt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new _r(Mn.Er)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Fx(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new Mn(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ne.resolve(a)}lookupMutationBatch(e,r){return Ne.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Ne.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Mn(r,0),s=new Mn(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Ne.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new _r(qt);return r.forEach(s=>{const i=new Mn(s,0),a=new Mn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Ne.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;lt.isDocumentKey(i)||(i=i.child(""));const a=new Mn(new lt(i),0);let o=new _r(qt);return this.br.forEachWhile(A=>{const c=A.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(A.wr)),!0)},a),Ne.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){It(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ne.forEach(r.mutations,s=>{const i=new Mn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Mn(r,0),s=this.br.firstAfterOrEqual(n);return Ne.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.Mr=e,this.docs=function(){return new Wr(lt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ne.resolve(n?n.document.mutableCopy():Kr.newInvalidDocument(r))}getEntries(e,r){let n=ai();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Kr.newInvalidDocument(s))}),Ne.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=ai();const a=r.path,o=new lt(a.child("")),A=this.docs.getIteratorFrom(o);for(;A.hasNext();){const{key:c,value:{document:d}}=A.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||xx(o4(d),n)<=0||(s.has(d.key)||Lp(r,d))&&(i=i.insert(d.key,d.mutableCopy()))}return Ne.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Ct()}Or(e,r){return Ne.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new YM(this)}getSize(e){return Ne.resolve(this.size)}}class YM extends lT{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Ne.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.persistence=e,this.Nr=new Il(r=>Pc(r),Qp),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rx,this.targetCount=0,this.kr=Rc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ne.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Rc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ne.resolve()}updateTargetData(e,r){return this.Kn(r),Ne.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Ne.waitFor(i).next(()=>s)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ne.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ne.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Ne.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ne.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ne.resolve(n)}containsKey(e,r){return Ne.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Fi(0),this.Kr=!1,this.Kr=!0,this.$r=new $M,this.referenceDelegate=e(this),this.Ur=new ZM(this),this.indexManager=new kM,this.remoteDocumentCache=function(s){return new JM(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new tT(r),this.Gr=new zM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new WM,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new XM(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){We("MemoryPersistence","Starting transaction:",e);const s=new e8(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Ne.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class e8 extends l4{constructor(e){super(),this.currentSequenceNumber=e}}class Qw{constructor(e){this.persistence=e,this.Jr=new Rx,this.Yr=null}static Zr(e){return new Qw(e)}get Xr(){if(this.Yr)return this.Yr;throw Ct()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ne.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ne.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ne.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.Xr,n=>{const s=lt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,St.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Ne.or([()=>Ne.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e){this.serializer=e}O(e,r,n,s){const i=new Ew("createOrUpgrade",r);n<1&&s>=1&&(function(A){A.createObjectStore("owner")}(e),function(A){A.createObjectStore("mutationQueues",{keyPath:"userId"}),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O5,{unique:!0}),A.createObjectStore("documentMutations")}(e),IE(e),function(A){A.createObjectStore("remoteDocuments")}(e));let a=Ne.resolve();return n<3&&s>=3&&(n!==0&&(function(A){A.deleteObjectStore("targetDocuments"),A.deleteObjectStore("targets"),A.deleteObjectStore("targetGlobal")}(e),IE(e)),a=a.next(()=>function(A){const c=A.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(i))),n<4&&s>=4&&(n!==0&&(a=a.next(()=>function(A,c){return c.store("mutations").U().next(d=>{A.deleteObjectStore("mutations"),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O5,{unique:!0});const f=c.store("mutations"),m=d.map(g=>f.put(g));return Ne.waitFor(m)})}(e,i))),a=a.next(()=>{(function(A){A.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(a=a.next(()=>this.ni(i))),n<6&&s>=6&&(a=a.next(()=>(function(A){A.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),n<7&&s>=7&&(a=a.next(()=>this.ii(i))),n<8&&s>=8&&(a=a.next(()=>this.si(e,i))),n<9&&s>=9&&(a=a.next(()=>{(function(A){A.objectStoreNames.contains("remoteDocumentChanges")&&A.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(a=a.next(()=>this.oi(i))),n<11&&s>=11&&(a=a.next(()=>{(function(A){A.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(A){A.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(a=a.next(()=>{(function(A){const c=A.createObjectStore("documentOverlays",{keyPath:SO});c.createIndex("collectionPathOverlayIndex",FO,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",TO,{unique:!1})})(e)})),n<13&&s>=13&&(a=a.next(()=>function(A){const c=A.createObjectStore("remoteDocumentsV14",{keyPath:wO});c.createIndex("documentKeyIndex",vO),c.createIndex("collectionGroupIndex",yO)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(a=a.next(()=>this.ai(e,i))),n<15&&s>=15&&(a=a.next(()=>function(A){A.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),A.createObjectStore("indexState",{keyPath:EO}).createIndex("sequenceNumberIndex",_O,{unique:!1}),A.createObjectStore("indexEntries",{keyPath:IO}).createIndex("documentKeyIndex",NO,{unique:!1})}(e))),n<16&&s>=16&&(a=a.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(a=a.next(()=>{(function(A){A.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=L0(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>Ne.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(o=>Ne.forEach(o,A=>{It(A.userId===i.userId);const c=ic(this.serializer,A);return aT(e,i.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return n.J((a,o)=>{const A=new ur(a),c=function(f){return[0,Qs(f)]}(A);i.push(r.get(c).next(d=>d?Ne.resolve():(f=>r.put({targetId:0,path:Qs(f),sequenceNumber:s.highestListenSequenceNumber}))(A)))}).next(()=>Ne.waitFor(i))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:CO});const n=r.store("collectionParents"),s=new kx,i=a=>{if(s.add(a)){const o=a.lastSegment(),A=a.popLast();return n.put({collectionId:o,parent:Qs(A)})}};return r.store("remoteDocuments").J({H:!0},(a,o)=>{const A=new ur(a);return i(A.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([a,o,A],c)=>{const d=Ua(o);return i(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const i=Jh(s),a=rT(this.serializer,i);return r.put(a)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((i,a)=>{const o=r.store("remoteDocumentsV14"),A=function(f){return f.document?new lt(ur.fromString(f.document.name).popFirst(5)):f.noDocument?lt.fromSegments(f.noDocument.path):f.unknownDocument?lt.fromSegments(f.unknownDocument.path):Ct()}(a).path.toArray(),c={prefixPath:A.slice(0,A.length-2),collectionGroup:A[A.length-2],documentId:A[A.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(c))}).next(()=>Ne.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=cT(this.serializer),i=new dT(Qw.Zr,this.serializer.ct);return n.U().next(a=>{const o=new Map;return a.forEach(A=>{var c;let d=(c=o.get(A.userId))!==null&&c!==void 0?c:Jt();ic(this.serializer,A).keys().forEach(f=>d=d.add(f)),o.set(A.userId,d)}),Ne.forEach(o,(A,c)=>{const d=new rs(c),f=Tw.lt(this.serializer,d),m=i.getIndexManager(d),g=Uw.lt(d,this.serializer,m,i.referenceDelegate);return new uT(s,g,f,m).recalculateAndSaveOverlaysForDocumentKeys(new s2(r,Fi.oe),A).next()})})}}function IE(t){t.createObjectStore("targetDocuments",{keyPath:xO}).createIndex("documentTargetsIndex",bO,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",BO,{unique:!0}),t.createObjectStore("targetGlobal")}const hy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Dx{constructor(e,r,n,s,i,a,o,A,c,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=a,this.document=o,this.ci=c,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!Dx.D())throw new Ze(Le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VM(this,s),this.Ai=r+"main",this.serializer=new tT(A),this.Ri=new sl(this.Ai,this.hi,new t8(this.serializer)),this.$r=new FM,this.Ur=new DM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cT(this.serializer),this.Gr=new SM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Fs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ze(Le.FAILED_PRECONDITION,hy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Fi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(_l(e))return We("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return We("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Sh(e).get("owner").next(r=>Ne.resolve(this.vi(r)))}Ci(e){return jm(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Qn(r,"clientMetadata");return n.U().next(s=>{const i=this.xi(s,18e5),a=s.filter(o=>i.indexOf(o)===-1);return Ne.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ne.resolve(!0):Sh(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Ze(Le.FAILED_PRECONDITION,hy);return!1}}return!(!this.networkEnabled||!this.inForeground)||jm(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&We("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new s2(e,Fi.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>jm(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Uw.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Tw.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){We("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=function(A){return A===17?PO:A===16?QO:A===15?Cx:A===14?f4:A===13?h4:A===12?UO:A===11?d4:void Ct()}(this.hi);let a;return this.Ri.runTransaction(e,s,i,o=>(a=new s2(o,this.Qr?this.Qr.next():Fi.oe),r==="readwrite-primary"?this.wi(a).next(A=>!!A||this.Si(a)).next(A=>{if(!A)throw Fs(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ze(Le.FAILED_PRECONDITION,A4);return n(a)}).next(A=>this.Di(a).next(()=>A)):this.Ki(a).next(()=>n(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return Sh(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Ze(Le.FAILED_PRECONDITION,hy)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Sh(e).put("owner",r)}static D(){return sl.D()}bi(e){const r=Sh(e);return r.get("owner").next(n=>this.vi(n)?(We("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ne.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Fs(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;lF()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return We("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Fs("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Fs("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Sh(t){return Qn(t,"owner")}function jm(t){return Qn(t,"clientMetadata")}function r8(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Jt(),s=Jt();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new jx(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lF()?8:c4(Un())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new n8;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(ku()<=sr.DEBUG&&We("QueryEngine","SDK will not create cache indexes for query:",Ru(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ne.resolve()):(ku()<=sr.DEBUG&&We("QueryEngine","Query:",Ru(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(ku()<=sr.DEBUG&&We("QueryEngine","The SDK decides to create cache indexes for query:",Ru(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(r))):Ne.resolve())}Yi(e,r){if(Z5(r))return Ne.resolve(null);let n=Pi(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=U0(r,null,"F"),n=Pi(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=Jt(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(A=>{const c=this.ts(r,o);return this.ns(r,c,a,A.readTime)?this.Yi(e,U0(r,null,"F")):this.rs(e,c,r,A)}))})))}Zi(e,r,n,s){return Z5(r)||s.isEqual(St.min())?Ne.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Ne.resolve(null):(ku()<=sr.DEBUG&&We("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ru(r)),this.rs(e,a,r,cO(s,-1)).next(o=>o))})}ts(e,r){let n=new _r(S4(e));return r.forEach((s,i)=>{Lp(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return ku()<=sr.DEBUG&&We("QueryEngine","Using full collection scan to execute query:",Ru(r)),this.Ji.getDocumentsMatchingQuery(e,r,ci.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Wr(qt),this._s=new Il(i=>Pc(i),Qp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function fT(t,e,r,n){return new s8(t,e,r,n)}async function pT(t,e){const r=jt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let A=Jt();for(const c of s){a.push(c.batchId);for(const d of c.mutations)A=A.add(d.key)}for(const c of i){o.push(c.batchId);for(const d of c.mutations)A=A.add(d.key)}return r.localDocuments.getDocuments(n,A).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function i8(t,e){const r=jt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,A,c,d){const f=c.batch,m=f.keys();let g=Ne.resolve();return m.forEach(B=>{g=g.next(()=>d.getEntry(A,B)).next(b=>{const _=c.docVersions.get(B);It(_!==null),b.version.compareTo(_)<0&&(f.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),d.addEntry(b)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(A,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let A=Jt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(A=A.add(o.batch.mutations[c].key));return A}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function mT(t){const e=jt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function a8(t,e){const r=jt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((d,f)=>{const m=s.get(f);if(!m)return;o.push(r.Ur.removeMatchingKeys(i,d.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(i,d.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(yn.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),s=s.insert(f,g),function(b,_,w){return b.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,g,d)&&o.push(r.Ur.updateTargetData(i,g))});let A=ai(),c=Jt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,d))}),o.push(o8(i,a,e.documentUpdates).next(d=>{A=d.Ps,c=d.Is})),!n.isEqual(St.min())){const d=r.Ur.getLastRemoteSnapshotVersion(i).next(f=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(d)}return Ne.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,A,c)).next(()=>A)}).then(i=>(r.os=s,i))}function o8(t,e,r){let n=Jt(),s=Jt();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=ai();return r.forEach((o,A)=>{const c=i.get(o);A.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),A.isNoDocument()&&A.version.isEqual(St.min())?(e.removeEntry(o,A.readTime),a=a.insert(o,A)):!c.isValidDocument()||A.version.compareTo(c.version)>0||A.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(A),a=a.insert(o,A)):We("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",A.version)}),{Ps:a,Is:s}})}function A8(t,e){const r=jt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function l8(t,e){const r=jt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Ne.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new bo(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function w2(t,e,r){const n=jt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!_l(a))throw a;We("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function NE(t,e,r){const n=jt(t);let s=St.min(),i=Jt();return n.persistence.runTransaction("Execute query","readwrite",a=>function(A,c,d){const f=jt(A),m=f._s.get(d);return m!==void 0?Ne.resolve(f.os.get(m)):f.Ur.getTargetData(c,d)}(n,a,Pi(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(A=>{i=A})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:St.min(),r?i:Jt())).next(o=>(c8(n,$O(e),o),{documents:o,Ts:i})))}function c8(t,e,r){let n=t.us.get(e)||St.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class SE{constructor(){this.activeTargetIds=tM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gT{constructor(){this.so=new SE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new SE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){We("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){We("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Om=null;function fy(){return Om===null?Om=function(){return 268435456+Math.round(2147483648*Math.random())}():Om++,"0x"+Om.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="WebChannelConnection";class f8 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=fy(),A=this.xo(r,n.toUriEncodedString());We("RestConnection",`Sending RPC '${r}' ${o}:`,A,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,A,c,s).then(d=>(We("RestConnection",`Received RPC '${r}' ${o}: `,d),d),d=>{throw ul("RestConnection",`RPC '${r}' ${o} failed with error: `,d,"url: ",A,"request:",s),d})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hd}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=d8[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=fy();return new Promise((a,o)=>{const A=new ZF;A.setWithCredentials(!0),A.listenOnce(e4.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case Dg.NO_ERROR:const d=A.getResponseJson();We(ds,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),a(d);break;case Dg.TIMEOUT:We(ds,`RPC '${e}' ${i} timed out`),o(new Ze(Le.DEADLINE_EXCEEDED,"Request time out"));break;case Dg.HTTP_ERROR:const f=A.getStatus();if(We(ds,`RPC '${e}' ${i} failed with status:`,f,"response text:",A.getResponseText()),f>0){let m=A.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const B=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(w)>=0?w:Le.UNKNOWN}(g.status);o(new Ze(B,g.message))}else o(new Ze(Le.UNKNOWN,"Server responded with status "+A.getStatus()))}else o(new Ze(Le.UNAVAILABLE,"Connection failed."));break;default:Ct()}}finally{We(ds,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);We(ds,`RPC '${e}' ${i} sending request:`,s),A.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=fy(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=n4(),o=r4(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(A.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(A.useFetchStreams=!0),this.Oo(A.initMessageHeaders,r,n),A.encodeInitMessageHeaders=!0;const d=i.join("");We(ds,`Creating RPC '${e}' stream ${s}: ${d}`,A);const f=a.createWebChannel(d,A);let m=!1,g=!1;const B=new h8({Io:_=>{g?We(ds,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(We(ds,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),We(ds,`RPC '${e}' stream ${s} sending:`,_),f.send(_))},To:()=>f.close()}),b=(_,w,y)=>{_.listen(w,I=>{try{y(I)}catch(D){setTimeout(()=>{throw D},0)}})};return b(f,Wh.EventType.OPEN,()=>{g||(We(ds,`RPC '${e}' stream ${s} transport opened.`),B.yo())}),b(f,Wh.EventType.CLOSE,()=>{g||(g=!0,We(ds,`RPC '${e}' stream ${s} transport closed`),B.So())}),b(f,Wh.EventType.ERROR,_=>{g||(g=!0,ul(ds,`RPC '${e}' stream ${s} transport errored:`,_),B.So(new Ze(Le.UNAVAILABLE,"The operation could not be completed")))}),b(f,Wh.EventType.MESSAGE,_=>{var w;if(!g){const y=_.data[0];It(!!y);const I=y,D=I.error||((w=I[0])===null||w===void 0?void 0:w.error);if(D){We(ds,`RPC '${e}' stream ${s} received error:`,D);const H=D.status;let k=function(Q){const j=bn[Q];if(j!==void 0)return M4(j)}(H),T=D.message;k===void 0&&(k=Le.INTERNAL,T="Unknown error status: "+H+" with message "+D.message),g=!0,B.So(new Ze(k,T)),f.close()}else We(ds,`RPC '${e}' stream ${s} received:`,y),B.bo(y)}}),b(o,t4.STAT_EVENT,_=>{_.stat===r2.PROXY?We(ds,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===r2.NOPROXY&&We(ds,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{B.wo()},0),B}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(){return typeof window<"u"?window:null}function qg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t){return new gM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&We("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,r,n,s,i,a,o,A){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=A,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ox(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Le.RESOURCE_EXHAUSTED?(Fs(r.toString()),Fs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new Ze(Le.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return We("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(We("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class m8 extends wT{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=BM(this.serializer,e),n=function(i){if(!("targetChange"in i))return St.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?St.min():a.readTime?Kn(a.readTime):St.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=h2(this.serializer),r.addTarget=function(i,a){let o;const A=a.target;if(o=F0(A)?{documents:$4(i,A)}:{query:X4(i,A)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=K4(i,a.resumeToken);const c=u2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(St.min())>0){o.readTime=Td(i,a.snapshotVersion.toTimestamp());const c=u2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=bM(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=h2(this.serializer),r.removeTarget=e,this.a_(r)}}class g8 extends wT{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return It(!!e.streamToken),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=xM(e.writeResults,e.commitTime),n=Kn(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=h2(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>up(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8 extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ze(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,d2(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ze(Le.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,d2(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ze(Le.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class v8{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fs(r),this.D_=!1):We("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{Vc(this)&&(We("RemoteStore","Restarting streams for network reachability change."),await async function(A){const c=jt(A);c.L_.add(4),await Rp(c),c.q_.set("Unknown"),c.L_.delete(4),await Lw(c)}(this))})}),this.q_=new v8(n,s)}}async function Lw(t){if(Vc(t))for(const e of t.B_)await e(!0)}async function Rp(t){for(const e of t.B_)await e(!1)}function vT(t,e){const r=jt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Kx(r)?Vx(r):Gd(r).r_()&&Hx(r,e))}function Mx(t,e){const r=jt(t),n=Gd(r);r.N_.delete(e),n.r_()&&yT(r,e),r.N_.size===0&&(n.r_()?n.o_():Vc(r)&&r.q_.set("Unknown"))}function Hx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(St.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Gd(t).A_(e)}function yT(t,e){t.Q_.xe(e),Gd(t).R_(e)}function Vx(t){t.Q_=new hM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Gd(t).start(),t.q_.v_()}function Kx(t){return Vc(t)&&!Gd(t).n_()&&t.N_.size>0}function Vc(t){return jt(t).L_.size===0}function BT(t){t.Q_=void 0}async function B8(t){t.q_.set("Online")}async function x8(t){t.N_.forEach((e,r)=>{Hx(t,e)})}async function b8(t,e){BT(t),Kx(t)?(t.q_.M_(e),Vx(t)):t.q_.set("Unknown")}async function C8(t,e,r){if(t.q_.set("Online"),e instanceof V4&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){We("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await k0(t,n)}else if(e instanceof Kg?t.Q_.Ke(e):e instanceof H4?t.Q_.He(e):t.Q_.We(e),!r.isEqual(St.min()))try{const n=await mT(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((A,c)=>{if(A.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(A.resumeToken,a))}}),o.targetMismatches.forEach((A,c)=>{const d=i.N_.get(A);if(!d)return;i.N_.set(A,d.withResumeToken(yn.EMPTY_BYTE_STRING,d.snapshotVersion)),yT(i,A);const f=new bo(d.target,A,c,d.sequenceNumber);Hx(i,f)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){We("RemoteStore","Failed to raise snapshot:",n),await k0(t,n)}}async function k0(t,e,r){if(!_l(e))throw e;t.L_.add(1),await Rp(t),t.q_.set("Offline"),r||(r=()=>mT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{We("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Lw(t)})}function xT(t,e){return e().catch(r=>k0(t,r,e))}async function Dp(t){const e=jt(t),r=pl(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;E8(e);)try{const s=await A8(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,_8(e,s)}catch(s){await k0(e,s)}bT(e)&&CT(e)}function E8(t){return Vc(t)&&t.O_.length<10}function _8(t,e){t.O_.push(e);const r=pl(t);r.r_()&&r.V_&&r.m_(e.mutations)}function bT(t){return Vc(t)&&!pl(t).n_()&&t.O_.length>0}function CT(t){pl(t).start()}async function I8(t){pl(t).p_()}async function N8(t){const e=pl(t);for(const r of t.O_)e.m_(r.mutations)}async function S8(t,e,r){const n=t.O_.shift(),s=Tx.from(n,e,r);await xT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Dp(t)}async function F8(t,e){e&&pl(t).V_&&await async function(n,s){if(function(a){return O4(a)&&a!==Le.ABORTED}(s.code)){const i=n.O_.shift();pl(n).s_(),await xT(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Dp(n)}}(t,e),bT(t)&&CT(t)}async function TE(t,e){const r=jt(t);r.asyncQueue.verifyOperationInProgress(),We("RemoteStore","RemoteStore received new credentials");const n=Vc(r);r.L_.add(3),await Rp(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Lw(r)}async function T8(t,e){const r=jt(t);e?(r.L_.delete(2),await Lw(r)):e||(r.L_.add(2),await Rp(r),r.q_.set("Unknown"))}function Gd(t){return t.K_||(t.K_=function(r,n,s){const i=jt(r);return i.w_(),new m8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:B8.bind(null,t),Ro:x8.bind(null,t),mo:b8.bind(null,t),d_:C8.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Kx(t)?Vx(t):t.q_.set("Unknown")):(await t.K_.stop(),BT(t))})),t.K_}function pl(t){return t.U_||(t.U_=function(r,n,s){const i=jt(r);return i.w_(),new g8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:I8.bind(null,t),mo:F8.bind(null,t),f_:N8.bind(null,t),g_:S8.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Dp(t)):(await t.U_.stop(),t.O_.length>0&&(We("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new na,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new qx(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gx(t,e){if(Fs("AsyncQueue",`${e}: ${t}`),_l(t))return new Ze(Le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.comparator=e?(r,n)=>e(r,n)||lt.comparator(r.key,n.key):(r,n)=>lt.comparator(r.key,n.key),this.keyedMap=$h(),this.sortedSet=new Wr(this.comparator)}static emptySet(e){return new fd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof fd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new fd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.W_=new Wr(lt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Ct():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ud{constructor(e,r,n,s,i,a,o,A,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=A,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new Ud(e,r,fd.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Iw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Q8{constructor(){this.queries=QE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=jt(r),i=s.queries;s.queries=QE(),i.forEach((a,o)=>{for(const A of o.j_)A.onError(n)})})(this,new Ze(Le.ABORTED,"Firestore shutting down"))}}function QE(){return new Il(t=>N4(t),Iw)}async function zx(t,e){const r=jt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new U8,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=Gx(a,`Initialization of query '${Ru(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&$x(r)}async function Wx(t,e){const r=jt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function P8(t,e){const r=jt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&$x(r)}function L8(t,e,r){const n=jt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function $x(t){t.Y_.forEach(e=>{e.next()})}var v2,PE;(PE=v2||(v2={})).ea="default",PE.Cache="cache";class Xx{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Ud(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==v2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.key=e}}class _T{constructor(e){this.key=e}}class k8{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Jt(),this.mutatedKeys=Jt(),this.Aa=S4(e),this.Ra=new fd(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new UE,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const A=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const m=s.get(d),g=Lp(this.query,f)?f:null,B=!!m&&this.mutatedKeys.has(m.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;m&&g?m.data.isEqual(g.data)?B!==b&&(n.track({type:3,doc:g}),_=!0):this.ga(m,g)||(n.track({type:2,doc:g}),_=!0,(A&&this.Aa(g,A)>0||c&&this.Aa(g,c)<0)&&(o=!0)):!m&&g?(n.track({type:0,doc:g}),_=!0):m&&!g&&(n.track({type:1,doc:m}),_=!0,(A||c)&&(o=!0)),_&&(g?(a=a.add(g),i=b?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),n.track({type:1,doc:d})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,f)=>function(g,B){const b=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct()}};return b(g)-b(B)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],A=this.da.size===0&&this.current&&!s?1:0,c=A!==this.Ea;return this.Ea=A,a.length!==0||c?{snapshot:new Ud(this.query,e.Ra,i,a,e.mutatedKeys,A===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new UE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Jt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new _T(n))}),this.da.forEach(n=>{e.has(n)||r.push(new ET(n))}),r}ba(e){this.Ta=e.Ts,this.da=Jt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Ud.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class R8{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class D8{constructor(e){this.key=e,this.va=!1}}class j8{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Il(o=>N4(o),Iw),this.Ma=new Map,this.xa=new Set,this.Oa=new Wr(lt.comparator),this.Na=new Map,this.La=new Rx,this.Ba={},this.ka=new Map,this.qa=Rc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function O8(t,e,r=!0){const n=UT(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await IT(n,e,r,!0),s}async function M8(t,e){const r=UT(t);await IT(r,e,!0,!1)}async function IT(t,e,r,n){const s=await l8(t.localStore,Pi(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await H8(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&vT(t.remoteStore,s),o}async function H8(t,e,r,n,s){t.Ka=(f,m,g)=>async function(b,_,w,y){let I=_.view.ma(w);I.ns&&(I=await NE(b.localStore,_.query,!1).then(({documents:T})=>_.view.ma(T,I)));const D=y&&y.targetChanges.get(_.targetId),H=y&&y.targetMismatches.get(_.targetId)!=null,k=_.view.applyChanges(I,b.isPrimaryClient,D,H);return kE(b,_.targetId,k.wa),k.snapshot}(t,f,m,g);const i=await NE(t.localStore,e,!0),a=new k8(e,i.Ts),o=a.ma(i.documents),A=kp.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,A);kE(t,r,c.wa);const d=new R8(e,r,a);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function V8(t,e,r){const n=jt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Iw(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await w2(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Mx(n.remoteStore,s.targetId),y2(n,s.targetId)}).catch(Mc)):(y2(n,s.targetId),await w2(n.localStore,s.targetId,!0))}async function K8(t,e){const r=jt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Mx(r.remoteStore,n.targetId))}async function q8(t,e,r){const n=QT(t);try{const s=await function(a,o){const A=jt(a),c=Pt.now(),d=o.reduce((g,B)=>g.add(B.key),Jt());let f,m;return A.persistence.runTransaction("Locally write mutations","readwrite",g=>{let B=ai(),b=Jt();return A.cs.getEntries(g,d).next(_=>{B=_,B.forEach((w,y)=>{y.isValidDocument()||(b=b.add(w))})}).next(()=>A.localDocuments.getOverlayedDocuments(g,B)).next(_=>{f=_;const w=[];for(const y of o){const I=lM(y,f.get(y.key).overlayedDocument);I!=null&&w.push(new Vo(y.key,I,v4(I.value.mapValue),Gr.exists(!0)))}return A.mutationQueue.addMutationBatch(g,c,w,o)}).next(_=>{m=_;const w=_.applyToLocalDocumentSet(f,b);return A.documentOverlayCache.saveOverlays(g,_.batchId,w)})}).then(()=>({batchId:m.batchId,changes:T4(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,A){let c=a.Ba[a.currentUser.toKey()];c||(c=new Wr(qt)),c=c.insert(o,A),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await jp(n,s.changes),await Dp(n.remoteStore)}catch(s){const i=Gx(s,"Failed to persist write");r.reject(i)}}async function NT(t,e){const r=jt(t);try{const n=await a8(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(It(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?It(a.va):s.removedDocuments.size>0&&(It(a.va),a.va=!1))}),await jp(r,n,e)}catch(n){await Mc(n)}}function LE(t,e,r){const n=jt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const A=jt(a);A.onlineState=o;let c=!1;A.queries.forEach((d,f)=>{for(const m of f.j_)m.Z_(o)&&(c=!0)}),c&&$x(A)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function G8(t,e,r){const n=jt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new Wr(lt.comparator);a=a.insert(i,Kr.newNoDocument(i,St.min()));const o=Jt().add(i),A=new Fw(St.min(),new Map,new Wr(qt),a,o);await NT(n,A),n.Oa=n.Oa.remove(i),n.Na.delete(e),Jx(n)}else await w2(n.localStore,e,!1).then(()=>y2(n,e,r)).catch(Mc)}async function z8(t,e){const r=jt(t),n=e.batch.batchId;try{const s=await i8(r.localStore,e);FT(r,n,null),ST(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await jp(r,s)}catch(s){await Mc(s)}}async function W8(t,e,r){const n=jt(t);try{const s=await function(a,o){const A=jt(a);return A.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return A.mutationQueue.lookupMutationBatch(c,o).next(f=>(It(f!==null),d=f.keys(),A.mutationQueue.removeMutationBatch(c,f))).next(()=>A.mutationQueue.performConsistencyCheck(c)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>A.localDocuments.getDocuments(c,d))})}(n.localStore,e);FT(n,e,r),ST(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await jp(n,s)}catch(s){await Mc(s)}}function ST(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function FT(t,e,r){const n=jt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function y2(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||TT(t,n)})}function TT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Mx(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),Jx(t))}function kE(t,e,r){for(const n of r)n instanceof ET?(t.La.addReference(n.key,e),$8(t,n)):n instanceof _T?(We("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||TT(t,n.key)):Ct()}function $8(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(We("SyncEngine","New document in limbo: "+r),t.xa.add(n),Jx(t))}function Jx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new lt(ur.fromString(e)),n=t.qa.next();t.Na.set(n,new D8(r)),t.Oa=t.Oa.insert(r,n),vT(t.remoteStore,new bo(Pi(Pp(r.path)),n,"TargetPurposeLimboResolution",Fi.oe))}}async function jp(t,e,r){const n=jt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,A)=>{a.push(n.Ka(A,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const f=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(A.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(A.targetId,f?"current":"not-current")}if(c){s.push(c);const f=jx.Wi(A.targetId,c);i.push(f)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(A,c){const d=jt(A);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ne.forEach(c,m=>Ne.forEach(m.$i,g=>d.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>Ne.forEach(m.Ui,g=>d.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!_l(f))throw f;We("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const g=d.os.get(m),B=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(B);d.os=d.os.insert(m,b)}}}(n.localStore,i))}async function X8(t,e){const r=jt(t);if(!r.currentUser.isEqual(e)){We("SyncEngine","User change. New user:",e.toKey());const n=await pT(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(A=>{A.reject(new Ze(Le.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await jp(r,n.hs)}}function J8(t,e){const r=jt(t),n=r.Na.get(e);if(n&&n.va)return Jt().add(n.key);{let s=Jt();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function UT(t){const e=jt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G8.bind(null,e),e.Ca.d_=P8.bind(null,e.eventManager),e.Ca.$a=L8.bind(null,e.eventManager),e}function QT(t){const e=jt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=W8.bind(null,e),e}class dp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pw(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return fT(this.persistence,new hT,e.initialUser,this.serializer)}Ga(e){return new dT(Qw.Zr,this.serializer)}Wa(e){return new gT}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dp.provider={build:()=>new dp};class Y8 extends dp{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await QT(this.Ja.syncEngine),await Dp(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return fT(this.persistence,new hT,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new OM(n,e.asyncQueue,r)}Ha(e,r){const n=new fO(r,this.persistence);return new hO(e.asyncQueue,n)}Ga(e){const r=r8(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Hs.withCacheSize(this.cacheSizeBytes):Hs.DEFAULT;return new Dx(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,p8(),qg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new gT}}class R0{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>LE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=X8.bind(null,this.syncEngine),await T8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Q8}()}createDatastore(e){const r=Pw(e.databaseInfo.databaseId),n=function(i){return new f8(i)}(e.databaseInfo);return function(i,a,o,A){return new w8(i,a,o,A)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new y8(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>LE(this.syncEngine,r,0),function(){return FE.D()?new FE:new u8}())}createSyncEngine(e,r){return function(s,i,a,o,A,c,d){const f=new j8(s,i,a,o,A,c);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=jt(s);We("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Rp(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}R0.provider={build:()=>new R0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ze(Le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,i){const a=jt(s),o={documents:i.map(f=>cp(a.serializer,f))},A=await a.Lo("BatchGetDocuments",a.serializer.databaseId,ur.emptyPath(),o,i.length),c=new Map;A.forEach(f=>{const m=yM(a.serializer,f);c.set(m.key.toString(),m)});const d=[];return i.forEach(f=>{const m=c.get(f.toString());It(!!m),d.push(m)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new qd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=lt.fromPath(n);this.mutations.push(new Sx(s,this.precondition(s)))}),await async function(n,s){const i=jt(n),a={writes:s.map(o=>up(i.serializer,o))};await i.Mo("Commit",i.serializer.databaseId,ur.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Ct();r=St.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Ze(Le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(St.min())?Gr.exists(!1):Gr.updateTime(r):Gr.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(St.min()))throw new Ze(Le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gr.updateTime(r)}return Gr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e,r,n,s,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=i,this._u=n.maxAttempts,this.t_=new Ox(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new Z8(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Up(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!O4(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=rs.UNAUTHENTICATED,this.clientId=Bx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{We("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(We("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new na;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Gx(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function py(t,e){t.asyncQueue.verifyOperationInProgress(),We("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await pT(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function RE(t,e){t.asyncQueue.verifyOperationInProgress();const r=await rH(t);We("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>TE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>TE(e.remoteStore,s)),t._onlineComponents=e}async function rH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){We("FirestoreClient","Using user provided OfflineComponentProvider");try{await py(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Le.FAILED_PRECONDITION||s.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;ul("Error using user provided cache. Falling back to memory cache: "+r),await py(t,new dp)}}else We("FirestoreClient","Using default OfflineComponentProvider"),await py(t,new dp);return t._offlineComponents}async function Zx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(We("FirestoreClient","Using user provided OnlineComponentProvider"),await RE(t,t._uninitializedComponentsProvider._online)):(We("FirestoreClient","Using default OnlineComponentProvider"),await RE(t,new R0))),t._onlineComponents}function nH(t){return Zx(t).then(e=>e.syncEngine)}function sH(t){return Zx(t).then(e=>e.datastore)}async function D0(t){const e=await Zx(t),r=e.eventManager;return r.onListen=O8.bind(null,e.syncEngine),r.onUnlisten=V8.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=M8.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=K8.bind(null,e.syncEngine),r}function iH(t,e,r={}){const n=new na;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,A,c){const d=new Yx({next:m=>{d.Za(),a.enqueueAndForget(()=>Wx(i,f));const g=m.docs.has(o);!g&&m.fromCache?c.reject(new Ze(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&A&&A.source==="server"?c.reject(new Ze(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Xx(Pp(o.path),d,{includeMetadataChanges:!0,_a:!0});return zx(i,f)}(await D0(t),t.asyncQueue,e,r,n)),n.promise}function aH(t,e,r={}){const n=new na;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,A,c){const d=new Yx({next:m=>{d.Za(),a.enqueueAndForget(()=>Wx(i,f)),m.fromCache&&A.source==="server"?c.reject(new Ze(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Xx(o,d,{includeMetadataChanges:!0,_a:!0});return zx(i,f)}(await D0(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t,e,r){if(!r)throw new Ze(Le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kT(t,e,r,n){if(e===!0&&n===!0)throw new Ze(Le.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function jE(t){if(!lt.isDocumentKey(t))throw new Ze(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function OE(t){if(lt.isDocumentKey(t))throw new Ze(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ct()}function qn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ze(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=kw(t);throw new Ze(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ze(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ze(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ze(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ze(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rw{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ME({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ME(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new i4;switch(n.type){case"firstParty":return new iO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ze(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=DE.get(r);n&&(We("ComponentProvider","Removing Datastore"),DE.delete(r),n.terminate())}(this),Promise.resolve()}}function RT(t,e,r,n={}){var s;const i=(t=qn(t,Rw))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,A;if(typeof n.mockUserToken=="string")o=n.mockUserToken,A=rs.MOCK_USER;else{o=xR(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Ze(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new rs(c)}t._authCredentials=new rO(new s4(o,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ma(this.firestore,e,this._query)}}class Gn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new So(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}}class So extends Ma{constructor(e,r,n){super(e,r,Pp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new lt(e))}withConverter(e){return new So(this.firestore,e,this._path)}}function dt(t,e,...r){if(t=cn(t),LT("collection","path",e),t instanceof Rw){const n=ur.fromString(e,...r);return OE(n),new So(t,null,n)}{if(!(t instanceof Gn||t instanceof So))throw new Ze(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ur.fromString(e,...r));return OE(n),new So(t.firestore,null,n)}}function Tt(t,e,...r){if(t=cn(t),arguments.length===1&&(e=Bx.newId()),LT("doc","path",e),t instanceof Rw){const n=ur.fromString(e,...r);return jE(n),new Gn(t,null,new lt(n))}{if(!(t instanceof Gn||t instanceof So))throw new Ze(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ur.fromString(e,...r));return jE(n),new Gn(t.firestore,t instanceof So?t.converter:null,new lt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ox(this,"async_queue_retry"),this.Vu=()=>{const n=qg();n&&We("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=qg();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=qg();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new na;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_l(e))throw e;We("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw Fs("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=qx.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Ct()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function VE(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ui extends Rw{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new HE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new HE(e),this._firestoreClient=void 0,await e}}}function DT(t,e){const r=typeof t=="object"?t:cx(),n=typeof t=="string"?t:"(default)",s=Ax(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=yR("firestore");i&&RT(s,...i)}return s}function Kc(t){if(t._terminated)throw new Ze(Le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jT(t),t._firestoreClient}function jT(t){var e,r,n;const s=t._freezeSettings(),i=function(o,A,c,d){return new kO(o,A,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,PT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new tH(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const A=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(A),_online:A}}(t._componentsProvider))}function OT(t,e){ul("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return oH(t,R0.provider,{build:n=>new Y8(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function oH(t,e,r){if((t=qn(t,ui))._firestoreClient||t._terminated)throw new Ze(Le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Ze(Le.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},jT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ml(yn.fromBase64String(e))}catch(r){throw new Ze(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ml(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ze(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ze(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ze(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=/^__.*__$/;class lH{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Vo(e,this.data,this.fieldMask,r,this.fieldTransforms):new Kd(e,this.data,r,this.fieldTransforms)}}class MT{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Vo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function HT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct()}}class eb{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new eb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return j0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HT(this.Cu)&&AH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cH{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Pw(e)}Qu(e,r,n,s=!1){return new eb({Cu:e,methodName:r,qu:n,path:qr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zd(t){const e=t._freezeSettings(),r=Pw(t._databaseId);return new cH(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Mw(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);nb("Data must be an object, but it was:",a,n);const o=VT(n,a);let A,c;if(i.merge)A=new Gs(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const m=B2(e,f,r);if(!a.contains(m))throw new Ze(Le.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);qT(d,m)||d.push(m)}A=new Gs(d),c=a.fieldTransforms.filter(f=>A.covers(f.field))}else A=null,c=a.fieldTransforms;return new lH(new ss(o),A,c)}class Hw extends Dw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hw}}function tb(t,e,r,n){const s=t.Qu(1,e,r);nb("Data must be an object, but it was:",s,n);const i=[],a=ss.empty();Hc(n,(A,c)=>{const d=sb(e,A,r);c=cn(c);const f=s.Nu(d);if(c instanceof Hw)i.push(d);else{const m=Op(c,f);m!=null&&(i.push(d),a.set(d,m))}});const o=new Gs(i);return new MT(a,o,s.fieldTransforms)}function rb(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[B2(e,n,r)],A=[s];if(i.length%2!=0)throw new Ze(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)o.push(B2(e,i[m])),A.push(i[m+1]);const c=[],d=ss.empty();for(let m=o.length-1;m>=0;--m)if(!qT(c,o[m])){const g=o[m];let B=A[m];B=cn(B);const b=a.Nu(g);if(B instanceof Hw)c.push(g);else{const _=Op(B,b);_!=null&&(c.push(g),d.set(g,_))}}const f=new Gs(c);return new MT(d,f,a.fieldTransforms)}function uH(t,e,r,n=!1){return Op(r,t.Qu(n?4:3,e))}function Op(t,e){if(KT(t=cn(t)))return nb("Unsupported field value:",e,t),VT(t,e);if(t instanceof Dw)return function(n,s){if(!HT(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let A=Op(o,s.Lu(a));A==null&&(A={nullValue:"NULL_VALUE"}),i.push(A),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=cn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return rM(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Pt.fromDate(n);return{timestampValue:Td(s.serializer,i)}}if(n instanceof Pt){const i=new Pt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Td(s.serializer,i)}}if(n instanceof jw)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ml)return{bytesValue:K4(s.serializer,n._byteString)};if(n instanceof Gn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Px(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Ow)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(A=>{if(typeof A!="number")throw o.Bu("VectorValues must only contain numeric values.");return Nx(o.serializer,A)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${kw(n)}`)}(t,e)}function VT(t,e){const r={};return p4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hc(t,(n,s)=>{const i=Op(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function KT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pt||t instanceof jw||t instanceof ml||t instanceof Gn||t instanceof Dw||t instanceof Ow)}function nb(t,e,r){if(!KT(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=kw(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function B2(t,e,r){if((e=cn(e))instanceof qc)return e._internalPath;if(typeof e=="string")return sb(t,e);throw j0("Field path arguments must be of type string or ",t,!1,void 0,r)}const dH=new RegExp("[~\\*/\\[\\]]");function sb(t,e,r){if(e.search(dH)>=0)throw j0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new qc(...e.split("."))._internalPath}catch{throw j0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function j0(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let A="";return(i||a)&&(A+=" (found",i&&(A+=` in field ${n}`),a&&(A+=` in document ${s}`),A+=")"),new Ze(Le.INVALID_ARGUMENT,o+t+A)}function qT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Vw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class hH extends O0{data(){return super.data()}}function Vw(t,e){return typeof e=="string"?sb(t,e):e instanceof qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ze(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ib{}class Kw extends ib{}function Yt(t,e,...r){let n=[];e instanceof ib&&n.push(e),n=n.concat(r),function(i){const a=i.filter(A=>A instanceof qw).length,o=i.filter(A=>A instanceof Mp).length;if(a>1||a>0&&o>0)throw new Ze(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Mp extends Kw{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Mp(e,r,n)}_apply(e){const r=this._parse(e);return WT(e._query,r),new Ma(e.firestore,e.converter,c2(e._query,r))}_parse(e){const r=zd(e.firestore);return function(i,a,o,A,c,d,f){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ze(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){qE(f,d);const g=[];for(const B of f)g.push(KE(A,i,B));m={arrayValue:{values:g}}}else m=KE(A,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||qE(f,d),m=uH(o,a,f,d==="in"||d==="not-in");return ir.create(c,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function mr(t,e,r){const n=e,s=Vw("where",t);return Mp._create(s,n,r)}class qw extends ib{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new qw(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Br.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const A of o)WT(a,A),a=c2(a,A)}(e._query,r),new Ma(e.firestore,e.converter,c2(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gw extends Kw{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Gw(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new Ze(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ze(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new op(i,a)}(e._query,this._field,this._direction);return new Ma(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Vd(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function di(t,e="asc"){const r=e,n=Vw("orderBy",t);return Gw._create(n,r)}class zw extends Kw{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new zw(e,r,n)}_apply(e){return new Ma(e.firestore,e.converter,U0(e._query,this._limit,this._limitType))}}function zT(t){return zw._create("limit",t,"F")}function KE(t,e,r){if(typeof(r=cn(r))=="string"){if(r==="")throw new Ze(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!I4(e)&&r.indexOf("/")!==-1)throw new Ze(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ur.fromString(r));if(!lt.isDocumentKey(n))throw new Ze(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ip(t,new lt(n))}if(r instanceof Gn)return ip(t,r._key);throw new Ze(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kw(r)}.`)}function qE(t,e){if(!Array.isArray(t)||t.length===0)throw new Ze(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WT(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Ze(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class ab{convertValue(e,r="none"){switch(Qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ct()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Hc(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Hr(a.doubleValue));return new Ow(i)}convertGeoPoint(e){return new jw(Hr(e.latitude),Hr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=_x(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(np(e));default:return null}}convertTimestamp(e){const r=jo(e);return new Pt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ur.fromString(e);It(eT(n));const s=new hl(n.get(1),n.get(3)),i=new lt(n.popFirst(5));return s.isEqual(r)||Fs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class fH extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new ml(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $w extends O0{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Vw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Bf extends $w{data(e={}){return super.data(e)}}class ob{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new dc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Bf(this._firestore,this._userDataWriter,n.key,n,new dc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ze(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const A=new Bf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new dc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:A,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const A=new Bf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new dc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:pH(o.type),doc:A,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function pH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){t=qn(t,Gn);const e=qn(t.firestore,ui);return iH(Kc(e),t._key).then(r=>XT(e,t,r))}class Xw extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new ml(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,r)}}function Lt(t){t=qn(t,Ma);const e=qn(t.firestore,ui),r=Kc(e),n=new Xw(e);return GT(t._query),aH(r,t._query).then(s=>new ob(e,n,t,s))}function $T(t,e,r){t=qn(t,Gn);const n=qn(t.firestore,ui),s=Ww(t.converter,e,r);return Wd(n,[Mw(zd(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Gr.none())])}function $r(t,e,r,...n){t=qn(t,Gn);const s=qn(t.firestore,ui),i=zd(s);let a;return a=typeof(e=cn(e))=="string"||e instanceof qc?rb(i,"updateDoc",t._key,e,r,n):tb(i,"updateDoc",t._key,e),Wd(s,[a.toMutation(t._key,Gr.exists(!0))])}function Ts(t){return Wd(qn(t.firestore,ui),[new qd(t._key,Gr.none())])}function is(t,e){const r=qn(t.firestore,ui),n=Tt(t),s=Ww(t.converter,e);return Wd(r,[Mw(zd(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Gr.exists(!1))]).then(()=>n)}function x2(t,...e){var r,n,s;t=cn(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||VE(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(VE(e[a])){const f=e[a];e[a]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[a+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[a+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let A,c,d;if(t instanceof Gn)c=qn(t.firestore,ui),d=Pp(t._key.path),A={next:f=>{e[a]&&e[a](XT(c,t,f))},error:e[a+1],complete:e[a+2]};else{const f=qn(t,Ma);c=qn(f.firestore,ui),d=f._query;const m=new Xw(c);A={next:g=>{e[a]&&e[a](new ob(c,m,f,g))},error:e[a+1],complete:e[a+2]},GT(t._query)}return function(m,g,B,b){const _=new Yx(b),w=new Xx(g,_,B);return m.asyncQueue.enqueueAndForget(async()=>zx(await D0(m),w)),()=>{_.Za(),m.asyncQueue.enqueueAndForget(async()=>Wx(await D0(m),w))}}(Kc(c),d,o,A)}function Wd(t,e){return function(n,s){const i=new na;return n.asyncQueue.enqueueAndForget(async()=>q8(await nH(n),s,i)),i.promise}(Kc(t),e)}function XT(t,e,r){const n=r.docs.get(e._key),s=new Xw(t);return new $w(t,s,e._key,n,new dc(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=zd(e)}set(e,r,n){this._verifyNotCommitted();const s=DA(e,this._firestore),i=Ww(s.converter,r,n),a=Mw(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,Gr.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=DA(e,this._firestore);let a;return a=typeof(r=cn(r))=="string"||r instanceof qc?rb(this._dataReader,"WriteBatch.update",i._key,r,n,s):tb(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,Gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=DA(e,this._firestore);return this._mutations=this._mutations.concat(new qd(r._key,Gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ze(Le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function DA(t,e){if((t=cn(t)).firestore!==e)throw new Ze(Le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=zd(r)}get(r){const n=DA(r,this._firestore),s=new fH(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Ct();const a=i[0];if(a.isFoundDocument())return new O0(this._firestore,s,a.key,a,n.converter);if(a.isNoDocument())return new O0(this._firestore,s,n._key,null,n.converter);throw Ct()})}set(r,n,s){const i=DA(r,this._firestore),a=Ww(i.converter,n,s),o=Mw(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,s);return this._transaction.set(i._key,o),this}update(r,n,s,...i){const a=DA(r,this._firestore);let o;return o=typeof(n=cn(n))=="string"||n instanceof qc?rb(this._dataReader,"Transaction.update",a._key,n,s,i):tb(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(r){const n=DA(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=DA(e,this._firestore),n=new Xw(this._firestore);return super.get(e).then(s=>new $w(this._firestore,n,r._key,s._document,new dc(!1,!1),r.converter))}}function il(t,e,r){t=qn(t,ui);const n=Object.assign(Object.assign({},mH),r);return function(i){if(i.maxAttempts<1)throw new Ze(Le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(i,a,o){const A=new na;return i.asyncQueue.enqueueAndForget(async()=>{const c=await sH(i);new eH(i.asyncQueue,c,o,a,A).au()}),A.promise}(Kc(t),s=>e(new YT(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t){return Kc(t=qn(t,ui)),new JT(t,e=>Wd(t,e))}(function(e,r=!0){(function(s){Hd=s})(Od),Cd(new Sc("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new ui(new nO(n.getProvider("auth-internal")),new oO(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ze(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(c.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),nl(R5,"4.7.3",e),nl(R5,"4.7.3","esm2017")})();const gH=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:ab,Bytes:ml,CollectionReference:So,DocumentReference:Gn,DocumentSnapshot:$w,FieldPath:qc,FieldValue:Dw,Firestore:ui,FirestoreError:Ze,GeoPoint:jw,Query:Ma,QueryCompositeFilterConstraint:qw,QueryConstraint:Kw,QueryDocumentSnapshot:Bf,QueryFieldFilterConstraint:Mp,QueryLimitConstraint:zw,QueryOrderByConstraint:Gw,QuerySnapshot:ob,SnapshotMetadata:dc,Timestamp:Pt,Transaction:YT,VectorValue:Ow,WriteBatch:JT,_AutoId:Bx,_ByteString:yn,_DatabaseId:hl,_DocumentKey:lt,_EmptyAuthCredentialsProvider:i4,_FieldPath:qr,_cast:qn,_logWarn:ul,_validateIsNotUsedTogether:kT,addDoc:is,collection:dt,connectFirestoreEmulator:RT,deleteDoc:Ts,doc:Tt,enableIndexedDbPersistence:OT,ensureFirestoreConfigured:Kc,executeWrite:Wd,getDoc:Nl,getDocs:Lt,getFirestore:DT,limit:zT,onSnapshot:x2,orderBy:di,query:Yt,runTransaction:il,setDoc:$T,updateDoc:$r,where:mr,writeBatch:Jw},Symbol.toStringTag,{value:"Module"})),wH={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},ZT=lx(wH),Qe=DT(ZT),Yw=JF(ZT);OT(Qe).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function vH(){const[t,e]=L.useState(""),[r,n]=L.useState(""),[s,i]=L.useState(!1),[a,o]=L.useState(""),A=vw(),c=async d=>{d.preventDefault();try{const m=(await Oj(Yw,t,r)).user.uid,g=Tt(Qe,"users",m),B=await Nl(g);if(B.exists()){const _=B.data().role;_==="admin"?A("/admin"):_==="vendedor"?A("/admin/salesV2"):o("Rol no vlido")}else o("No se encontr el perfil de usuario")}catch(f){console.error(f),o("Credenciales incorrectas o error de conexin")}};return l.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Iniciar Sesin"}),l.jsxs("form",{onSubmit:c,className:"space-y-4 w-64",children:[l.jsx("input",{type:"email",placeholder:"Correo",value:t,onChange:d=>e(d.target.value),className:"w-full p-2 border rounded-[20px]",required:!0}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:s?"text":"password",placeholder:"Contrasea",value:r,onChange:d=>n(d.target.value),className:"w-full p-2 border rounded-[20px] pr-10",required:!0}),l.jsx("button",{type:"button",onClick:()=>i(d=>!d),className:"absolute inset-y-0 right-2 my-auto text-sm text-gray-600 hover:text-gray-800","aria-label":s?"Ocultar contrasea":"Mostrar contrasea",title:s?"Ocultar contrasea":"Mostrar contrasea",children:s?"Ocultar":"Ver"})]}),a&&l.jsx("p",{className:"text-red-600 text-sm",children:a}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-[20px] hover:bg-blue-700",children:"Entrar"})]})]})}function hn({children:t,allowedRoles:e}){const[r,n]=L.useState(!0),[s,i]=L.useState(!1);return L.useEffect(()=>{const a=jF(Yw,async o=>{if(o){const A=Tt(Qe,"users",o.uid),c=await Nl(A);if(c.exists()){const d=c.data().role;i(e.includes(d))}}n(!1)});return()=>a()},[e]),r?l.jsx("div",{className:"p-4",children:"Cargando..."}):s?t:l.jsx(K1,{to:"/"})}function yH({role:t}){const e="/admin",r=({isActive:ue})=>`block rounded px-3 py-2 text-sm ${ue?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,n=vw(),[s,i]=L.useState(!1),[a,o]=L.useState(!1),[A,c]=L.useState(!1),[d,f]=L.useState(!1),[m,g]=L.useState(!1),[B,b]=L.useState(!1),[_,w]=L.useState(!1),[y,I]=L.useState(!1),[D,H]=L.useState(!1),[k,T]=L.useState(!1),[E,Q]=L.useState(!1),[j,S]=L.useState(!1),N=async()=>{await OF(Yw),n("/")},U=({open:ue,onClick:ie,children:z})=>l.jsxs("button",{type:"button",onClick:ie,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[l.jsx("span",{children:z}),l.jsx("span",{className:"text-xs",children:ue?"":""})]}),Z=({open:ue,onClick:ie,title:z})=>l.jsxs("button",{type:"button",onClick:ie,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[l.jsx("span",{className:"text-blue-500 font-medium ",children:z}),l.jsx("span",{className:"text-xs",children:ue?"":""})]});return l.jsxs("div",{className:"min-h-screen flex",children:[l.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col`,children:[l.jsx("button",{onClick:()=>i(!s),className:"mb-2 p-2 rounded bg-gray-200 hover:bg-gray-300","aria-label":s?"Expandir men":"Colapsar men",children:s?l.jsx("span",{title:"Expandir men",children:""}):l.jsx("span",{title:"Colapsar men",children:""})}),!s&&l.jsxs(l.Fragment,{children:[l.jsxs("nav",{className:"space-y-1",children:[t==="admin"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"border rounded mb-1",children:[l.jsx(U,{open:a,onClick:()=>o(ue=>!ue),children:"Operaciones Pollo"}),a&&l.jsxs("div",{className:"pb-2",children:[l.jsx(Z,{open:A,onClick:()=>c(ue=>!ue),title:"Inventario"}),A&&l.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[l.jsx(on,{to:`${e}/batches`,className:r,children:"Inventario Pollo"}),l.jsx(on,{to:`${e}/paidBatches`,className:r,children:"Inventarios Pagados"})]}),l.jsx(Z,{open:d,onClick:()=>f(ue=>!ue),title:"Finanzas"}),d&&l.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[l.jsx(on,{to:`${e}/financialDashboard`,className:r,children:"Dashboard"}),l.jsx(on,{to:`${e}/billing`,className:r,children:"Facturacion"}),l.jsx(on,{to:`${e}/expenses`,className:r,children:"Gastos"}),l.jsx(on,{to:`${e}/salesV2`,className:r,children:"Venta"}),l.jsx(on,{to:`${e}/bills`,className:r,children:"Cierre"}),l.jsx(on,{to:`${e}/billhistoric`,className:r,children:"Historial de Cierres"})]}),l.jsx(Z,{open:m,onClick:()=>g(ue=>!ue),title:"Productos"}),m&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(on,{to:`${e}/products`,className:r,children:"Productos"})})]})]}),l.jsxs("div",{className:"border rounded mb-1",children:[l.jsx(U,{open:B,onClick:()=>b(ue=>!ue),children:"Operaciones Ropa"}),B&&l.jsxs("div",{className:"pb-2",children:[l.jsx(Z,{open:_,onClick:()=>w(ue=>!ue),title:"Inventario"}),_&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(on,{to:`${e}/InventoryClothesBatches`,className:r,children:"Inventario Ropa"})}),l.jsx(Z,{open:y,onClick:()=>I(ue=>!ue),title:"Productos"}),y&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(on,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),l.jsx(Z,{open:D,onClick:()=>H(ue=>!ue),title:"Clientes"}),D&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(on,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})}),l.jsx(Z,{open:k,onClick:()=>T(ue=>!ue),title:"Finanzas"}),k&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(on,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"})}),k&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(on,{to:`${e}/financialDashboardClothes`,className:r,children:"Dashboard Financiero"})}),k&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(on,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})}),k&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(on,{to:`${e}/ExpensesClothes`,className:r,children:"Gastos Ropa"})})]})]}),l.jsxs("div",{className:"border rounded",children:[l.jsx(U,{open:j,onClick:()=>S(ue=>!ue),children:"Operaciones Otras"}),j&&l.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[l.jsx(on,{to:`${e}/users`,className:r,children:"Usuarios"}),l.jsx(on,{to:`${e}/fix`,className:r,children:"Fix de lotes"}),l.jsx(on,{to:`${e}/transactionclose`,className:r,children:"Liquidaciones"})]})]})]}),t==="vendedor"&&l.jsxs("div",{className:"border rounded",children:[l.jsx(U,{open:d,onClick:()=>f(ue=>!ue),children:"Finanzas"}),d&&l.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[l.jsx(on,{to:`${e}/salesV2`,className:r,children:"Venta"}),l.jsx(on,{to:`${e}/bills`,className:r,children:"Cierre"})]})]})]}),l.jsx("button",{onClick:N,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded hover:bg-red-600",children:"Cerrar sesin"})]})]}),l.jsx("main",{className:"flex-1 p-6",children:l.jsx(Qk,{})})]})}const eU=6048e5,BH=864e5,GE=Symbol.for("constructDateFrom");function oa(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&GE in t?t[GE](e):t instanceof Date?new t.constructor(e):new Date(e)}function ks(t,e){return oa(e||t,t)}function xH(t,e,r){const n=ks(t,r==null?void 0:r.in);return isNaN(e)?oa(t,NaN):(n.setDate(n.getDate()+e),n)}function bH(t,e,r){const n=ks(t,r==null?void 0:r.in);if(isNaN(e))return oa(t,NaN);const s=n.getDate(),i=oa(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return s>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}let CH={};function Zw(){return CH}function hp(t,e){var o,A,c,d;const r=Zw(),n=(e==null?void 0:e.weekStartsOn)??((A=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:A.weekStartsOn)??r.weekStartsOn??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=ks(t,e==null?void 0:e.in),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function M0(t,e){return hp(t,{...e,weekStartsOn:1})}function tU(t,e){const r=ks(t,e==null?void 0:e.in),n=r.getFullYear(),s=oa(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=M0(s),a=oa(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=M0(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function zE(t){const e=ks(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function EH(t,...e){const r=oa.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function WE(t,e){const r=ks(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function _H(t,e,r){const[n,s]=EH(r==null?void 0:r.in,t,e),i=WE(n),a=WE(s),o=+i-zE(i),A=+a-zE(a);return Math.round((o-A)/BH)}function IH(t,e){const r=tU(t,e),n=oa(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),M0(n)}function NH(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function SH(t){return!(!NH(t)&&typeof t!="number"||isNaN(+ks(t)))}function Hp(t,e){const r=ks(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Vp(t,e){const r=ks(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function FH(t,e){const r=ks(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const TH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},UH=(t,e,r)=>{let n;const s=TH[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function my(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const QH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},PH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},LH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kH={date:my({formats:QH,defaultWidth:"full"}),time:my({formats:PH,defaultWidth:"full"}),dateTime:my({formats:LH,defaultWidth:"full"})},RH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},DH=(t,e,r,n)=>RH[t];function Fh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const jH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},OH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},MH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},HH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},VH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},KH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qH=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},GH={ordinalNumber:qH,era:Fh({values:jH,defaultWidth:"wide"}),quarter:Fh({values:OH,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Fh({values:MH,defaultWidth:"wide"}),day:Fh({values:HH,defaultWidth:"wide"}),dayPeriod:Fh({values:VH,defaultWidth:"wide",formattingValues:KH,defaultFormattingWidth:"wide"})};function Th(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],A=Array.isArray(o)?WH(o,f=>f.test(a)):zH(o,f=>f.test(a));let c;c=t.valueCallback?t.valueCallback(A):A,c=r.valueCallback?r.valueCallback(c):c;const d=e.slice(a.length);return{value:c,rest:d}}}function zH(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function WH(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function $H(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const XH=/^(\d+)(th|st|nd|rd)?/i,JH=/\d+/i,YH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ZH={any:[/^b/i,/^(a|c)/i]},eV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},tV={any:[/1/i,/2/i,/3/i,/4/i]},rV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},iV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},aV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},AV={ordinalNumber:$H({matchPattern:XH,parsePattern:JH,valueCallback:t=>parseInt(t,10)}),era:Th({matchPatterns:YH,defaultMatchWidth:"wide",parsePatterns:ZH,defaultParseWidth:"any"}),quarter:Th({matchPatterns:eV,defaultMatchWidth:"wide",parsePatterns:tV,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Th({matchPatterns:rV,defaultMatchWidth:"wide",parsePatterns:nV,defaultParseWidth:"any"}),day:Th({matchPatterns:sV,defaultMatchWidth:"wide",parsePatterns:iV,defaultParseWidth:"any"}),dayPeriod:Th({matchPatterns:aV,defaultMatchWidth:"any",parsePatterns:oV,defaultParseWidth:"any"})},lV={code:"en-US",formatDistance:UH,formatLong:kH,formatRelative:DH,localize:GH,match:AV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cV(t,e){const r=ks(t,e==null?void 0:e.in);return _H(r,FH(r))+1}function uV(t,e){const r=ks(t,e==null?void 0:e.in),n=+M0(r)-+IH(r);return Math.round(n/eU)+1}function rU(t,e){var d,f,m,g;const r=ks(t,e==null?void 0:e.in),n=r.getFullYear(),s=Zw(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,a=oa((e==null?void 0:e.in)||t,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const o=hp(a,e),A=oa((e==null?void 0:e.in)||t,0);A.setFullYear(n,0,i),A.setHours(0,0,0,0);const c=hp(A,e);return+r>=+o?n+1:+r>=+c?n:n-1}function dV(t,e){var o,A,c,d;const r=Zw(),n=(e==null?void 0:e.firstWeekContainsDate)??((A=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:A.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,s=rU(t,e),i=oa((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),hp(i,e)}function hV(t,e){const r=ks(t,e==null?void 0:e.in),n=+hp(r,e)-+dV(r,e);return Math.round(n/eU)+1}function yr(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const xA={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return yr(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):yr(r+1,2)},d(t,e){return yr(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return yr(t.getHours()%12||12,e.length)},H(t,e){return yr(t.getHours(),e.length)},m(t,e){return yr(t.getMinutes(),e.length)},s(t,e){return yr(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return yr(s,e.length)}},xu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$E={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return xA.y(t,e)},Y:function(t,e,r,n){const s=rU(t,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return yr(a,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):yr(i,e.length)},R:function(t,e){const r=tU(t);return yr(r,e.length)},u:function(t,e){const r=t.getFullYear();return yr(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return yr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return yr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return xA.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return yr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=hV(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):yr(s,e.length)},I:function(t,e,r){const n=uV(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):yr(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):xA.d(t,e)},D:function(t,e,r){const n=cV(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):yr(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return yr(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return yr(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return yr(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=xu.noon:n===0?s=xu.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=xu.evening:n>=12?s=xu.afternoon:n>=4?s=xu.morning:s=xu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return xA.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):xA.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):yr(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):yr(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):xA.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):xA.s(t,e)},S:function(t,e){return xA.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return JE(n);case"XXXX":case"XX":return rc(n);case"XXXXX":case"XXX":default:return rc(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return JE(n);case"xxxx":case"xx":return rc(n);case"xxxxx":case"xxx":default:return rc(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+XE(n,":");case"OOOO":default:return"GMT"+rc(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+XE(n,":");case"zzzz":default:return"GMT"+rc(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return yr(n,e.length)},T:function(t,e,r){return yr(+t,e.length)}};function XE(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+yr(i,2)}function JE(t,e){return t%60===0?(t>0?"-":"+")+yr(Math.abs(t)/60,2):rc(t,e)}function rc(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=yr(Math.trunc(n/60),2),i=yr(n%60,2);return r+s+e+i}const YE=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},nU=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},fV=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return YE(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",YE(n,e)).replace("{{time}}",nU(s,e))},pV={p:nU,P:fV},mV=/^D+$/,gV=/^Y+$/,wV=["D","DD","YY","YYYY"];function vV(t){return mV.test(t)}function yV(t){return gV.test(t)}function BV(t,e,r){const n=xV(t,e,r);if(console.warn(n),wV.includes(t))throw new RangeError(n)}function xV(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const bV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EV=/^'([^]*?)'?$/,_V=/''/g,IV=/[a-zA-Z]/;function Zt(t,e,r){var d,f,m,g;const n=Zw(),s=n.locale??lV,i=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=n.weekStartsOn??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,o=ks(t,r==null?void 0:r.in);if(!SH(o))throw new RangeError("Invalid time value");let A=e.match(CV).map(B=>{const b=B[0];if(b==="p"||b==="P"){const _=pV[b];return _(B,s.formatLong)}return B}).join("").match(bV).map(B=>{if(B==="''")return{isToken:!1,value:"'"};const b=B[0];if(b==="'")return{isToken:!1,value:NV(B)};if($E[b])return{isToken:!0,value:B};if(b.match(IV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:B}});s.localize.preprocessor&&(A=s.localize.preprocessor(o,A));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return A.map(B=>{if(!B.isToken)return B.value;const b=B.value;(yV(b)||vV(b))&&BV(b,e,String(t));const _=$E[b[0]];return _(o,b,s.localize,c)}).join("")}function NV(t){const e=t.match(EV);return e?e[1].replace(_V,"'"):t}function SV(t,e,r){return xH(t,-14,r)}function FV(t,e,r){return bH(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var b2=function(t,e){return b2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},b2(t,e)};function ca(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");b2(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var C2=function(){return C2=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},C2.apply(this,arguments)};function Is(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function A(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,A)}c((n=n.apply(t,[])).next())})}function gs(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(d){return A([c,d])}}function A(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Mm(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||e)}var Oo=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),ev=function(t,e){return Oo.fromClientRect(t,e.getBoundingClientRect())},TV=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Oo(0,0,n,s)},tv=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},pn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},ZE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",UV=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Hm=0;Hm<ZE.length;Hm++)UV[ZE.charCodeAt(Hm)]=Hm;var e_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vm=0;Vm<e_.length;Vm++)Yh[e_.charCodeAt(Vm)]=Vm;var QV=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=Yh[t.charCodeAt(n)],a=Yh[t.charCodeAt(n+1)],o=Yh[t.charCodeAt(n+2)],A=Yh[t.charCodeAt(n+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|o>>2,d[s++]=(o&3)<<6|A&63;return c},PV=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},LV=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},wc=5,Ab=11,gy=2,kV=Ab-wc,sU=65536>>wc,RV=1<<wc,wy=RV-1,DV=1024>>wc,jV=sU+DV,OV=jV,MV=32,HV=OV+MV,VV=65536>>Ab,KV=1<<kV,qV=KV-1,t_=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},GV=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},zV=function(t,e){var r=QV(t),n=Array.isArray(r)?LV(r):new Uint32Array(r),s=Array.isArray(r)?PV(r):new Uint16Array(r),i=24,a=t_(s,i/2,n[4]/2),o=n[5]===2?t_(s,(i+n[4])/2):GV(n,Math.ceil((i+n[4])/4));return new WV(n[0],n[1],n[2],n[3],a,o)},WV=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>wc],r=(r<<gy)+(e&wy),this.data[r];if(e<=65535)return r=this.index[sU+(e-55296>>wc)],r=(r<<gy)+(e&wy),this.data[r];if(e<this.highStart)return r=HV-VV+(e>>Ab),r=this.index[r],r+=e>>wc&qV,r=this.index[r],r=(r<<gy)+(e&wy),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),r_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$V=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Km=0;Km<r_.length;Km++)$V[r_.charCodeAt(Km)]=Km;var XV="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",n_=50,JV=1,iU=2,aU=3,YV=4,ZV=5,s_=7,oU=8,i_=9,VA=10,E2=11,a_=12,_2=13,e7=14,Zh=15,I2=16,qm=17,Uh=18,t7=19,o_=20,N2=21,Qh=22,vy=23,bu=24,ni=25,ef=26,tf=27,Cu=28,r7=29,Ac=30,n7=31,Gm=32,zm=33,S2=34,F2=35,T2=36,fp=37,U2=38,Gg=39,zg=40,yy=41,AU=42,s7=43,i7=[9001,65288],lU="!",nr="",Wm="",Q2=zV(XV),lo=[Ac,T2],P2=[JV,iU,aU,ZV],cU=[VA,oU],A_=[tf,ef],a7=P2.concat(cU),l_=[U2,Gg,zg,S2,F2],o7=[Zh,_2],A7=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(i,a){var o=Q2.get(i);if(o>n_?(s.push(!0),o-=n_):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(a),r.push(I2);if(o===YV||o===E2){if(a===0)return n.push(a),r.push(Ac);var A=r[a-1];return a7.indexOf(A)===-1?(n.push(n[a-1]),r.push(A)):(n.push(a),r.push(Ac))}if(n.push(a),o===n7)return r.push(e==="strict"?N2:fp);if(o===AU||o===r7)return r.push(Ac);if(o===s7)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(fp):r.push(Ac);r.push(o)}),[n,r,s]},By=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=r;i<=n.length;){i++;var a=n[i];if(a===e)return!0;if(a!==VA)break}if(s===VA)for(var i=r;i>0;){i--;var o=n[i];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var A=r;A<=n.length;){A++;var a=n[A];if(a===e)return!0;if(a!==VA)break}if(o!==VA)break}return!1},c_=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===VA)r--;else return n}return 0},l7=function(t,e,r,n,s){if(r[n]===0)return nr;var i=n-1;if(Array.isArray(s)&&s[i]===!0)return nr;var a=i-1,o=i+1,A=e[i],c=a>=0?e[a]:0,d=e[o];if(A===iU&&d===aU)return nr;if(P2.indexOf(A)!==-1)return lU;if(P2.indexOf(d)!==-1||cU.indexOf(d)!==-1)return nr;if(c_(i,e)===oU)return Wm;if(Q2.get(t[i])===E2||(A===Gm||A===zm)&&Q2.get(t[o])===E2||A===s_||d===s_||A===i_||[VA,_2,Zh].indexOf(A)===-1&&d===i_||[qm,Uh,t7,bu,Cu].indexOf(d)!==-1||c_(i,e)===Qh||By(vy,Qh,i,e)||By([qm,Uh],N2,i,e)||By(a_,a_,i,e))return nr;if(A===VA)return Wm;if(A===vy||d===vy)return nr;if(d===I2||A===I2)return Wm;if([_2,Zh,N2].indexOf(d)!==-1||A===e7||c===T2&&o7.indexOf(A)!==-1||A===Cu&&d===T2||d===o_||lo.indexOf(d)!==-1&&A===ni||lo.indexOf(A)!==-1&&d===ni||A===tf&&[fp,Gm,zm].indexOf(d)!==-1||[fp,Gm,zm].indexOf(A)!==-1&&d===ef||lo.indexOf(A)!==-1&&A_.indexOf(d)!==-1||A_.indexOf(A)!==-1&&lo.indexOf(d)!==-1||[tf,ef].indexOf(A)!==-1&&(d===ni||[Qh,Zh].indexOf(d)!==-1&&e[o+1]===ni)||[Qh,Zh].indexOf(A)!==-1&&d===ni||A===ni&&[ni,Cu,bu].indexOf(d)!==-1)return nr;if([ni,Cu,bu,qm,Uh].indexOf(d)!==-1)for(var f=i;f>=0;){var m=e[f];if(m===ni)return nr;if([Cu,bu].indexOf(m)!==-1)f--;else break}if([tf,ef].indexOf(d)!==-1)for(var f=[qm,Uh].indexOf(A)!==-1?a:i;f>=0;){var m=e[f];if(m===ni)return nr;if([Cu,bu].indexOf(m)!==-1)f--;else break}if(U2===A&&[U2,Gg,S2,F2].indexOf(d)!==-1||[Gg,S2].indexOf(A)!==-1&&[Gg,zg].indexOf(d)!==-1||[zg,F2].indexOf(A)!==-1&&d===zg||l_.indexOf(A)!==-1&&[o_,ef].indexOf(d)!==-1||l_.indexOf(d)!==-1&&A===tf||lo.indexOf(A)!==-1&&lo.indexOf(d)!==-1||A===bu&&lo.indexOf(d)!==-1||lo.concat(ni).indexOf(A)!==-1&&d===Qh&&i7.indexOf(t[o])===-1||lo.concat(ni).indexOf(d)!==-1&&A===Uh)return nr;if(A===yy&&d===yy){for(var g=r[i],B=1;g>0&&(g--,e[g]===yy);)B++;if(B%2!==0)return nr}return A===Gm&&d===zm?nr:Wm},c7=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=A7(t,e.lineBreak),n=r[0],s=r[1],i=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[ni,Ac,AU].indexOf(o)!==-1?fp:o}));var a=e.wordBreak==="keep-all"?i.map(function(o,A){return o&&t[A]>=19968&&t[A]<=40959}):void 0;return[n,s,a]},u7=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===lU,this.start=n,this.end=s}return t.prototype.slice=function(){return pn.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),d7=function(t,e){var r=tv(t),n=c7(r,e),s=n[0],i=n[1],a=n[2],o=r.length,A=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=nr;c<o&&(d=l7(r,i,s,++c,a))===nr;);if(d!==nr||c===o){var f=new u7(r,d,A,c);return A=c,{value:f,done:!1}}return{done:!0,value:null}}}},h7=1,f7=2,Kp=4,u_=8,H0=10,d_=47,xf=92,p7=9,m7=32,$m=34,Ph=61,g7=35,w7=36,v7=37,Xm=39,Jm=40,Lh=41,y7=95,Vs=45,B7=33,x7=60,b7=62,C7=64,E7=91,_7=93,I7=61,N7=123,Ym=63,S7=125,h_=124,F7=126,T7=128,f_=65533,xy=42,hc=43,U7=44,Q7=58,P7=59,pp=46,L7=0,k7=8,R7=11,D7=14,j7=31,O7=127,Ia=-1,uU=48,dU=97,hU=101,M7=102,H7=117,V7=122,fU=65,pU=69,mU=70,K7=85,q7=90,ws=function(t){return t>=uU&&t<=57},G7=function(t){return t>=55296&&t<=57343},Eu=function(t){return ws(t)||t>=fU&&t<=mU||t>=dU&&t<=M7},z7=function(t){return t>=dU&&t<=V7},W7=function(t){return t>=fU&&t<=q7},$7=function(t){return z7(t)||W7(t)},X7=function(t){return t>=T7},Zm=function(t){return t===H0||t===p7||t===m7},V0=function(t){return $7(t)||X7(t)||t===y7},p_=function(t){return V0(t)||ws(t)||t===Vs},J7=function(t){return t>=L7&&t<=k7||t===R7||t>=D7&&t<=j7||t===O7},FA=function(t,e){return t!==xf?!1:e!==H0},eg=function(t,e,r){return t===Vs?V0(e)||FA(e,r):V0(t)?!0:!!(t===xf&&FA(t,e))},by=function(t,e,r){return t===hc||t===Vs?ws(e)?!0:e===pp&&ws(r):ws(t===pp?e:t)},Y7=function(t){var e=0,r=1;(t[e]===hc||t[e]===Vs)&&(t[e]===Vs&&(r=-1),e++);for(var n=[];ws(t[e]);)n.push(t[e++]);var s=n.length?parseInt(pn.apply(void 0,n),10):0;t[e]===pp&&e++;for(var i=[];ws(t[e]);)i.push(t[e++]);var a=i.length,o=a?parseInt(pn.apply(void 0,i),10):0;(t[e]===pU||t[e]===hU)&&e++;var A=1;(t[e]===hc||t[e]===Vs)&&(t[e]===Vs&&(A=-1),e++);for(var c=[];ws(t[e]);)c.push(t[e++]);var d=c.length?parseInt(pn.apply(void 0,c),10):0;return r*(s+o*Math.pow(10,-a))*Math.pow(10,A*d)},Z7={type:2},e9={type:3},t9={type:4},r9={type:13},n9={type:8},s9={type:21},i9={type:9},a9={type:10},o9={type:11},A9={type:12},l9={type:14},tg={type:23},c9={type:1},u9={type:25},d9={type:24},h9={type:26},f9={type:27},p9={type:28},m9={type:29},g9={type:31},L2={type:32},gU=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(tv(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==L2;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case $m:return this.consumeStringToken($m);case g7:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(p_(r)||FA(n,s)){var i=eg(r,n,s)?f7:h7,a=this.consumeName();return{type:5,value:a,flags:i}}break;case w7:if(this.peekCodePoint(0)===Ph)return this.consumeCodePoint(),r9;break;case Xm:return this.consumeStringToken(Xm);case Jm:return Z7;case Lh:return e9;case xy:if(this.peekCodePoint(0)===Ph)return this.consumeCodePoint(),l9;break;case hc:if(by(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case U7:return t9;case Vs:var o=e,A=this.peekCodePoint(0),c=this.peekCodePoint(1);if(by(o,A,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(eg(o,A,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===Vs&&c===b7)return this.consumeCodePoint(),this.consumeCodePoint(),d9;break;case pp:if(by(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case d_:if(this.peekCodePoint(0)===xy)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===xy&&(d=this.consumeCodePoint(),d===d_))return this.consumeToken();if(d===Ia)return this.consumeToken()}break;case Q7:return h9;case P7:return f9;case x7:if(this.peekCodePoint(0)===B7&&this.peekCodePoint(1)===Vs&&this.peekCodePoint(2)===Vs)return this.consumeCodePoint(),this.consumeCodePoint(),u9;break;case C7:var f=this.peekCodePoint(0),m=this.peekCodePoint(1),g=this.peekCodePoint(2);if(eg(f,m,g)){var a=this.consumeName();return{type:7,value:a}}break;case E7:return p9;case xf:if(FA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case _7:return m9;case I7:if(this.peekCodePoint(0)===Ph)return this.consumeCodePoint(),n9;break;case N7:return o9;case S7:return A9;case H7:case K7:var B=this.peekCodePoint(0),b=this.peekCodePoint(1);return B===hc&&(Eu(b)||b===Ym)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case h_:if(this.peekCodePoint(0)===Ph)return this.consumeCodePoint(),i9;if(this.peekCodePoint(0)===h_)return this.consumeCodePoint(),s9;break;case F7:if(this.peekCodePoint(0)===Ph)return this.consumeCodePoint(),a9;break;case Ia:return L2}return Zm(e)?(this.consumeWhiteSpace(),g9):ws(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):V0(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:pn(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Eu(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===Ym&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(pn.apply(void 0,e.map(function(A){return A===Ym?uU:A})),16),i=parseInt(pn.apply(void 0,e.map(function(A){return A===Ym?mU:A})),16);return{type:30,start:s,end:i}}var a=parseInt(pn.apply(void 0,e),16);if(this.peekCodePoint(0)===Vs&&Eu(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Eu(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var i=parseInt(pn.apply(void 0,o),16);return{type:30,start:a,end:i}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Jm?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Jm?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ia)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Xm||r===$m){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ia||this.peekCodePoint(0)===Lh)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),tg)}for(;;){var s=this.consumeCodePoint();if(s===Ia||s===Lh)return{type:22,value:pn.apply(void 0,e)};if(Zm(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ia||this.peekCodePoint(0)===Lh?(this.consumeCodePoint(),{type:22,value:pn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),tg);if(s===$m||s===Xm||s===Jm||J7(s))return this.consumeBadUrlRemnants(),tg;if(s===xf)if(FA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),tg;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Zm(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Lh||e===Ia)return;FA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=pn.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===Ia||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===H0)return this._value.splice(0,n),c9;if(s===xf){var i=this._value[n+1];i!==Ia&&i!==void 0&&(i===H0?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):FA(s,i)&&(r+=this.consumeStringSlice(n),r+=pn(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Kp,n=this.peekCodePoint(0);for((n===hc||n===Vs)&&e.push(this.consumeCodePoint());ws(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===pp&&ws(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=u_;ws(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===pU||n===hU)&&((s===hc||s===Vs)&&ws(i)||ws(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=u_;ws(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Y7(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(eg(s,i,a)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return s===v7?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Eu(e)){for(var r=pn(e);Eu(this.peekCodePoint(0))&&r.length<6;)r+=pn(this.consumeCodePoint());Zm(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||G7(n)||n>1114111?f_:n}return e===Ia?f_:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(p_(r))e+=pn(r);else if(FA(r,this.peekCodePoint(0)))e+=pn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),wU=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new gU;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||v9(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?L2:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),qp=function(t){return t.type===15},$d=function(t){return t.type===17},Er=function(t){return t.type===20},w9=function(t){return t.type===0},k2=function(t,e){return Er(t)&&t.value===e},vU=function(t){return t.type!==31},Qd=function(t){return t.type!==31&&t.type!==4},Ha=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},v9=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},gl=function(t){return t.type===17||t.type===15},Cn=function(t){return t.type===16||gl(t)},yU=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},as={type:17,number:0,flags:Kp},lb={type:16,number:50,flags:Kp},KA={type:16,number:100,flags:Kp},rf=function(t,e,r){var n=t[0],s=t[1];return[Ur(n,e),Ur(typeof s<"u"?s:n,r)]},Ur=function(t,e){if(t.type===16)return t.number/100*e;if(qp(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},BU="deg",xU="grad",bU="rad",CU="turn",rv={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case BU:return Math.PI*e.number/180;case xU:return Math.PI/200*e.number;case bU:return e.number;case CU:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},EU=function(t){return t.type===15&&(t.unit===BU||t.unit===xU||t.unit===bU||t.unit===CU)},_U=function(t){var e=t.filter(Er).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[as,as];case"to top":case"bottom":return Ti(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[as,KA];case"to right":case"left":return Ti(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[KA,KA];case"to bottom":case"top":return Ti(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[KA,as];case"to left":case"right":return Ti(270)}return 0},Ti=function(t){return Math.PI*t/180},al={name:"color",parse:function(t,e){if(e.type===18){var r=y9[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return qA(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),a=e.value.substring(3,4);return qA(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(a+a,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return qA(parseInt(n,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),a=e.value.substring(6,8);return qA(parseInt(n,16),parseInt(s,16),parseInt(i,16),parseInt(a,16)/255)}}if(e.type===20){var o=Fo[e.value.toUpperCase()];if(typeof o<"u")return o}return Fo.TRANSPARENT}},ol=function(t){return(255&t)===0},On=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},qA=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},m_=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},g_=function(t,e){var r=e.filter(Qd);if(r.length===3){var n=r.map(m_),s=n[0],i=n[1],a=n[2];return qA(s,i,a,1)}if(r.length===4){var o=r.map(m_),s=o[0],i=o[1],a=o[2],A=o[3];return qA(s,i,a,A)}return 0};function Cy(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var w_=function(t,e){var r=e.filter(Qd),n=r[0],s=r[1],i=r[2],a=r[3],o=(n.type===17?Ti(n.number):rv.parse(t,n))/(Math.PI*2),A=Cn(s)?s.number/100:0,c=Cn(i)?i.number/100:0,d=typeof a<"u"&&Cn(a)?Ur(a,1):1;if(A===0)return qA(c*255,c*255,c*255,1);var f=c<=.5?c*(A+1):c+A-c*A,m=c*2-f,g=Cy(m,f,o+1/3),B=Cy(m,f,o),b=Cy(m,f,o-1/3);return qA(g*255,B*255,b*255,d)},y9={hsl:w_,hsla:w_,rgb:g_,rgba:g_},bf=function(t,e){return al.parse(t,wU.create(e).parseComponentValue())},Fo={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},B9={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Er(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},x9={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nv=function(t,e){var r=al.parse(t,e[0]),n=e[1];return n&&Cn(n)?{color:r,stop:n}:{color:r,stop:null}},v_=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=as),n.stop===null&&(n.stop=KA);for(var s=[],i=0,a=0;a<t.length;a++){var o=t[a].stop;if(o!==null){var A=Ur(o,e);A>i?s.push(A):s.push(i),i=A}else s.push(null)}for(var c=null,a=0;a<s.length;a++){var d=s[a];if(d===null)c===null&&(c=a);else if(c!==null){for(var f=a-c,m=s[c-1],g=(d-m)/(f+1),B=1;B<=f;B++)s[c+B-1]=g*B;c=null}}return t.map(function(b,_){var w=b.color;return{color:w,stop:Math.max(Math.min(1,s[_]/e),0)}})},b9=function(t,e,r){var n=e/2,s=r/2,i=Ur(t[0],e)-n,a=s-Ur(t[1],r);return(Math.atan2(a,i)+Math.PI*2)%(Math.PI*2)},C9=function(t,e,r){var n=typeof t=="number"?t:b9(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),i=e/2,a=r/2,o=s/2,A=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[s,i-c,i+c,a-A,a+A]},Xi=function(t,e){return Math.sqrt(t*t+e*e)},y_=function(t,e,r,n,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(a,o){var A=o[0],c=o[1],d=Xi(r-A,n-c);return(s?d<a.optimumDistance:d>a.optimumDistance)?{optimumCorner:o,optimumDistance:d}:a},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},E9=function(t,e,r,n,s){var i=0,a=0;switch(t.size){case 0:t.shape===0?i=a=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-n)),a=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)i=a=Math.min(Xi(e,r),Xi(e,r-s),Xi(e-n,r),Xi(e-n,r-s));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),A=y_(n,s,e,r,!0),c=A[0],d=A[1];i=Xi(c-e,(d-r)/o),a=o*i}break;case 1:t.shape===0?i=a=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-n)),a=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)i=a=Math.max(Xi(e,r),Xi(e,r-s),Xi(e-n,r),Xi(e-n,r-s));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),f=y_(n,s,e,r,!1),c=f[0],d=f[1];i=Xi(c-e,(d-r)/o),a=o*i}break}return Array.isArray(t.size)&&(i=Ur(t.size[0],n),a=t.size.length===2?Ur(t.size[1],s):i),[i,a]},_9=function(t,e){var r=Ti(180),n=[];return Ha(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&a.value==="to"){r=_U(s);return}else if(EU(a)){r=rv.parse(t,a);return}}var o=nv(t,s);n.push(o)}),{angle:r,stops:n,type:1}},rg=function(t,e){var r=Ti(180),n=[];return Ha(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){r=_U(s);return}else if(EU(a)){r=(rv.parse(t,a)+Ti(270))%Ti(360);return}}var o=nv(t,s);n.push(o)}),{angle:r,stops:n,type:1}},I9=function(t,e){var r=Ti(180),n=[],s=1,i=0,a=3,o=[];return Ha(e).forEach(function(A,c){var d=A[0];if(c===0){if(Er(d)&&d.value==="linear"){s=1;return}else if(Er(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var f=al.parse(t,d.values[0]);n.push({stop:as,color:f})}else if(d.name==="to"){var f=al.parse(t,d.values[0]);n.push({stop:KA,color:f})}else if(d.name==="color-stop"){var m=d.values.filter(Qd);if(m.length===2){var f=al.parse(t,m[1]),g=m[0];$d(g)&&n.push({stop:{type:16,number:g.number*100,flags:g.flags},color:f})}}}}),s===1?{angle:(r+Ti(180))%Ti(360),stops:n,type:s}:{size:a,shape:i,stops:n,position:o,type:s}},IU="closest-side",NU="farthest-side",SU="closest-corner",FU="farthest-corner",TU="circle",UU="ellipse",QU="cover",PU="contain",N9=function(t,e){var r=0,n=3,s=[],i=[];return Ha(e).forEach(function(a,o){var A=!0;if(o===0){var c=!1;A=a.reduce(function(f,m){if(c)if(Er(m))switch(m.value){case"center":return i.push(lb),f;case"top":case"left":return i.push(as),f;case"right":case"bottom":return i.push(KA),f}else(Cn(m)||gl(m))&&i.push(m);else if(Er(m))switch(m.value){case TU:return r=0,!1;case UU:return r=1,!1;case"at":return c=!0,!1;case IU:return n=0,!1;case QU:case NU:return n=1,!1;case PU:case SU:return n=2,!1;case FU:return n=3,!1}else if(gl(m)||Cn(m))return Array.isArray(n)||(n=[]),n.push(m),!1;return f},A)}if(A){var d=nv(t,a);s.push(d)}}),{size:n,shape:r,stops:s,position:i,type:2}},ng=function(t,e){var r=0,n=3,s=[],i=[];return Ha(e).forEach(function(a,o){var A=!0;if(o===0?A=a.reduce(function(d,f){if(Er(f))switch(f.value){case"center":return i.push(lb),!1;case"top":case"left":return i.push(as),!1;case"right":case"bottom":return i.push(KA),!1}else if(Cn(f)||gl(f))return i.push(f),!1;return d},A):o===1&&(A=a.reduce(function(d,f){if(Er(f))switch(f.value){case TU:return r=0,!1;case UU:return r=1,!1;case PU:case IU:return n=0,!1;case NU:return n=1,!1;case SU:return n=2,!1;case QU:case FU:return n=3,!1}else if(gl(f)||Cn(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},A)),A){var c=nv(t,a);s.push(c)}}),{size:n,shape:r,stops:s,position:i,type:2}},S9=function(t){return t.type===1},F9=function(t){return t.type===2},cb={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=LU[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function T9(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!LU[t.name])}var LU={"linear-gradient":_9,"-moz-linear-gradient":rg,"-ms-linear-gradient":rg,"-o-linear-gradient":rg,"-webkit-linear-gradient":rg,"radial-gradient":N9,"-moz-radial-gradient":ng,"-ms-radial-gradient":ng,"-o-radial-gradient":ng,"-webkit-radial-gradient":ng,"-webkit-gradient":I9},U9={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Qd(n)&&T9(n)}).map(function(n){return cb.parse(t,n)})}},Q9={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Er(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},P9={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Ha(e).map(function(r){return r.filter(Cn)}).map(yU)}},L9={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Ha(e).map(function(r){return r.filter(Er).map(function(n){return n.value}).join(" ")}).map(k9)}},k9=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},pd;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(pd||(pd={}));var R9={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Ha(e).map(function(r){return r.filter(D9)})}},D9=function(t){return Er(t)||Cn(t)},sv=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},j9=sv("top"),O9=sv("right"),M9=sv("bottom"),H9=sv("left"),iv=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return yU(r.filter(Cn))}}},V9=iv("top-left"),K9=iv("top-right"),q9=iv("bottom-right"),G9=iv("bottom-left"),av=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},z9=av("top"),W9=av("right"),$9=av("bottom"),X9=av("left"),ov=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return qp(r)?r.number:0}}},J9=ov("top"),Y9=ov("right"),Z9=ov("bottom"),eK=ov("left"),tK={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},rK={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},nK={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Er).reduce(function(r,n){return r|sK(n.value)},0)}},sK=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},iK={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},aK={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},K0;(function(t){t.NORMAL="normal",t.STRICT="strict"})(K0||(K0={}));var oK={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return K0.STRICT;case"normal":default:return K0.NORMAL}}},AK={name:"line-height",initialValue:"normal",prefix:!1,type:4},B_=function(t,e){return Er(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Cn(t)?Ur(t,e):e},lK={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:cb.parse(t,e)}},cK={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},R2={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Av=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},uK=Av("top"),dK=Av("right"),hK=Av("bottom"),fK=Av("left"),pK={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Er).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},mK={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},lv=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},gK=lv("top"),wK=lv("right"),vK=lv("bottom"),yK=lv("left"),BK={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},xK={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},bK={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&k2(e[0],"none")?[]:Ha(e).map(function(r){for(var n={color:Fo.TRANSPARENT,offsetX:as,offsetY:as,blur:as},s=0,i=0;i<r.length;i++){var a=r[i];gl(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:n.blur=a,s++):n.color=al.parse(t,a)}return n})}},CK={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},EK={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=NK[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},_K=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},IK=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,s,i,a,o]:null},NK={matrix:_K,matrix3d:IK},x_={type:16,number:50,flags:Kp},SK=[x_,x_],FK={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Cn);return r.length!==2?SK:[r[0],r[1]]}},TK={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Cf;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Cf||(Cf={}));var UK={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Cf.BREAK_ALL;case"keep-all":return Cf.KEEP_ALL;case"normal":default:return Cf.NORMAL}}},QK={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if($d(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},kU={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},PK={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return $d(e)?e.number:1}},LK={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},kK={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Er).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},RK={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},DK={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},jK={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if($d(e))return e.number;if(Er(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},OK={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Er).map(function(r){return r.value})}},MK={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Fn=function(t,e){return(t&e)!==0},HK={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},VK={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(vU),i=0;i<s.length;i++){var a=s[i],o=s[i+1];if(a.type===20){var A=o&&$d(o)?o.number:1;n.push({counter:a.value,increment:A})}}return n}},KK={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(vU),s=0;s<n.length;s++){var i=n[s],a=n[s+1];if(Er(i)&&i.value!=="none"){var o=a&&$d(a)?a.number:0;r.push({counter:i.value,reset:o})}}return r}},qK={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(qp).map(function(r){return kU.parse(t,r)})}},GK={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(w9);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var a=s[i].value,o=s[i+1].value;n.push({open:a,close:o})}return n}},b_=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},zK={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&k2(e[0],"none")?[]:Ha(e).map(function(r){for(var n={color:255,offsetX:as,offsetY:as,blur:as,spread:as,inset:!1},s=0,i=0;i<r.length;i++){var a=r[i];k2(a,"inset")?n.inset=!0:gl(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:s===2?n.blur=a:n.spread=a,s++):n.color=al.parse(t,a)}return n})}},WK={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Er).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},$K={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},XK={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return qp(e)?e.number:0}},JK=function(){function t(e,r){var n,s;this.animationDuration=vt(e,qK,r.animationDuration),this.backgroundClip=vt(e,B9,r.backgroundClip),this.backgroundColor=vt(e,x9,r.backgroundColor),this.backgroundImage=vt(e,U9,r.backgroundImage),this.backgroundOrigin=vt(e,Q9,r.backgroundOrigin),this.backgroundPosition=vt(e,P9,r.backgroundPosition),this.backgroundRepeat=vt(e,L9,r.backgroundRepeat),this.backgroundSize=vt(e,R9,r.backgroundSize),this.borderTopColor=vt(e,j9,r.borderTopColor),this.borderRightColor=vt(e,O9,r.borderRightColor),this.borderBottomColor=vt(e,M9,r.borderBottomColor),this.borderLeftColor=vt(e,H9,r.borderLeftColor),this.borderTopLeftRadius=vt(e,V9,r.borderTopLeftRadius),this.borderTopRightRadius=vt(e,K9,r.borderTopRightRadius),this.borderBottomRightRadius=vt(e,q9,r.borderBottomRightRadius),this.borderBottomLeftRadius=vt(e,G9,r.borderBottomLeftRadius),this.borderTopStyle=vt(e,z9,r.borderTopStyle),this.borderRightStyle=vt(e,W9,r.borderRightStyle),this.borderBottomStyle=vt(e,$9,r.borderBottomStyle),this.borderLeftStyle=vt(e,X9,r.borderLeftStyle),this.borderTopWidth=vt(e,J9,r.borderTopWidth),this.borderRightWidth=vt(e,Y9,r.borderRightWidth),this.borderBottomWidth=vt(e,Z9,r.borderBottomWidth),this.borderLeftWidth=vt(e,eK,r.borderLeftWidth),this.boxShadow=vt(e,zK,r.boxShadow),this.color=vt(e,tK,r.color),this.direction=vt(e,rK,r.direction),this.display=vt(e,nK,r.display),this.float=vt(e,iK,r.cssFloat),this.fontFamily=vt(e,RK,r.fontFamily),this.fontSize=vt(e,DK,r.fontSize),this.fontStyle=vt(e,MK,r.fontStyle),this.fontVariant=vt(e,OK,r.fontVariant),this.fontWeight=vt(e,jK,r.fontWeight),this.letterSpacing=vt(e,aK,r.letterSpacing),this.lineBreak=vt(e,oK,r.lineBreak),this.lineHeight=vt(e,AK,r.lineHeight),this.listStyleImage=vt(e,lK,r.listStyleImage),this.listStylePosition=vt(e,cK,r.listStylePosition),this.listStyleType=vt(e,R2,r.listStyleType),this.marginTop=vt(e,uK,r.marginTop),this.marginRight=vt(e,dK,r.marginRight),this.marginBottom=vt(e,hK,r.marginBottom),this.marginLeft=vt(e,fK,r.marginLeft),this.opacity=vt(e,PK,r.opacity);var i=vt(e,pK,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=vt(e,mK,r.overflowWrap),this.paddingTop=vt(e,gK,r.paddingTop),this.paddingRight=vt(e,wK,r.paddingRight),this.paddingBottom=vt(e,vK,r.paddingBottom),this.paddingLeft=vt(e,yK,r.paddingLeft),this.paintOrder=vt(e,WK,r.paintOrder),this.position=vt(e,xK,r.position),this.textAlign=vt(e,BK,r.textAlign),this.textDecorationColor=vt(e,LK,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=vt(e,kK,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=vt(e,bK,r.textShadow),this.textTransform=vt(e,CK,r.textTransform),this.transform=vt(e,EK,r.transform),this.transformOrigin=vt(e,FK,r.transformOrigin),this.visibility=vt(e,TK,r.visibility),this.webkitTextStrokeColor=vt(e,$K,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=vt(e,XK,r.webkitTextStrokeWidth),this.wordBreak=vt(e,UK,r.wordBreak),this.zIndex=vt(e,QK,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return ol(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Fn(this.display,4)||Fn(this.display,33554432)||Fn(this.display,268435456)||Fn(this.display,536870912)||Fn(this.display,67108864)||Fn(this.display,134217728)},t}(),YK=function(){function t(e,r){this.content=vt(e,HK,r.content),this.quotes=vt(e,GK,r.quotes)}return t}(),C_=function(){function t(e,r){this.counterIncrement=vt(e,VK,r.counterIncrement),this.counterReset=vt(e,KK,r.counterReset)}return t}(),vt=function(t,e,r){var n=new gU,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var i=new wU(n.read());switch(e.type){case 2:var a=i.parseComponentValue();return e.parse(t,Er(a)?a.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return rv.parse(t,i.parseComponentValue());case"color":return al.parse(t,i.parseComponentValue());case"image":return cb.parse(t,i.parseComponentValue());case"length":var o=i.parseComponentValue();return gl(o)?o:as;case"length-percentage":var A=i.parseComponentValue();return Cn(A)?A:as;case"time":return kU.parse(t,i.parseComponentValue())}break}},ZK="data-html2canvas-debug",eq=function(t){var e=t.getAttribute(ZK);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},D2=function(t,e){var r=eq(t);return r===1||e===r},Va=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,D2(r,3))debugger;this.styles=new JK(e,window.getComputedStyle(r,null)),M2(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=ev(this.context,r),D2(r,4)&&(this.flags|=16)}return t}(),tq="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",E_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var sg=0;sg<E_.length;sg++)nf[E_.charCodeAt(sg)]=sg;var rq=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=nf[t.charCodeAt(n)],a=nf[t.charCodeAt(n+1)],o=nf[t.charCodeAt(n+2)],A=nf[t.charCodeAt(n+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|o>>2,d[s++]=(o&3)<<6|A&63;return c},nq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},sq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},vc=5,ub=11,Ey=2,iq=ub-vc,RU=65536>>vc,aq=1<<vc,_y=aq-1,oq=1024>>vc,Aq=RU+oq,lq=Aq,cq=32,uq=lq+cq,dq=65536>>ub,hq=1<<iq,fq=hq-1,__=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},pq=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},mq=function(t,e){var r=rq(t),n=Array.isArray(r)?sq(r):new Uint32Array(r),s=Array.isArray(r)?nq(r):new Uint16Array(r),i=24,a=__(s,i/2,n[4]/2),o=n[5]===2?__(s,(i+n[4])/2):pq(n,Math.ceil((i+n[4])/4));return new gq(n[0],n[1],n[2],n[3],a,o)},gq=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>vc],r=(r<<Ey)+(e&_y),this.data[r];if(e<=65535)return r=this.index[RU+(e-55296>>vc)],r=(r<<Ey)+(e&_y),this.data[r];if(e<this.highStart)return r=uq-dq+(e>>ub),r=this.index[r],r+=e>>vc&fq,r=this.index[r],r=(r<<Ey)+(e&_y),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),I_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wq=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ig=0;ig<I_.length;ig++)wq[I_.charCodeAt(ig)]=ig;var vq=1,Iy=2,Ny=3,N_=4,S_=5,yq=7,F_=8,Sy=9,Fy=10,T_=11,U_=12,Q_=13,P_=14,Ty=15,Bq=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},xq=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},bq=mq(tq),Ei="",Uy="",Cq=function(t){return bq.get(t)},Eq=function(t,e,r){var n=r-2,s=e[n],i=e[r-1],a=e[r];if(i===Iy&&a===Ny)return Ei;if(i===Iy||i===Ny||i===N_||a===Iy||a===Ny||a===N_)return Uy;if(i===F_&&[F_,Sy,T_,U_].indexOf(a)!==-1||(i===T_||i===Sy)&&(a===Sy||a===Fy)||(i===U_||i===Fy)&&a===Fy||a===Q_||a===S_||a===yq||i===vq)return Ei;if(i===Q_&&a===P_){for(;s===S_;)s=e[--n];if(s===P_)return Ei}if(i===Ty&&a===Ty){for(var o=0;s===Ty;)o++,s=e[--n];if(o%2===0)return Ei}return Uy},_q=function(t){var e=Bq(t),r=e.length,n=0,s=0,i=e.map(Cq);return{next:function(){if(n>=r)return{done:!0,value:null};for(var a=Ei;n<r&&(a=Eq(e,i,++n))===Ei;);if(a!==Ei||n===r){var o=xq.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},Iq=function(t){for(var e=_q(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},Nq=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(n),i===e)return!0}}return!1},Sq=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=tv(n.data).map(function(A){return pn(A)}),i=0,a={},o=s.every(function(A,c){r.setStart(n,i),r.setEnd(n,i+A.length);var d=r.getBoundingClientRect();i+=A.length;var f=d.x>a.x||d.y>a.y;return a=d,c===0?!0:f});return t.body.removeChild(e),o},Fq=function(){return typeof new Image().crossOrigin<"u"},Tq=function(){return typeof new XMLHttpRequest().responseType=="string"},Uq=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},L_=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Qq=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,i=e.toDataURL();s.src=i;var a=j2(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),k_(a).then(function(o){n.drawImage(o,0,0);var A=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=r+"px",L_(A)?k_(j2(r,r,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),L_(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},j2=function(t,e,r,n,s){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(s),a},k_=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ts={get SUPPORT_RANGE_BOUNDS(){var t=Nq(document);return Object.defineProperty(ts,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ts.SUPPORT_RANGE_BOUNDS&&Sq(document);return Object.defineProperty(ts,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Uq(document);return Object.defineProperty(ts,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Qq(document):Promise.resolve(!1);return Object.defineProperty(ts,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Fq();return Object.defineProperty(ts,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Tq();return Object.defineProperty(ts,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ts,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ts,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Ef=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Pq=function(t,e,r,n){var s=Rq(e,r),i=[],a=0;return s.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(ts.SUPPORT_RANGE_BOUNDS){var A=R_(n,a,o.length).getClientRects();if(A.length>1){var c=db(o),d=0;c.forEach(function(m){i.push(new Ef(m,Oo.fromDOMRectList(t,R_(n,d+a,m.length).getClientRects()))),d+=m.length})}else i.push(new Ef(o,Oo.fromDOMRectList(t,A)))}else{var f=n.splitText(o.length);i.push(new Ef(o,Lq(t,n))),n=f}else ts.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));a+=o.length}),i},Lq=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var i=ev(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),i}}return Oo.EMPTY},R_=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},db=function(t){if(ts.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return Iq(t)},kq=function(t,e){if(ts.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return jq(t,e)},Rq=function(t,e){return e.letterSpacing!==0?db(t):kq(t,e)},Dq=[32,160,4961,65792,65793,4153,4241],jq=function(t,e){for(var r=d7(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,i=function(){if(s.value){var a=s.value.slice(),o=tv(a),A="";o.forEach(function(c){Dq.indexOf(c)===-1?A+=pn(c):(A.length&&n.push(A),n.push(pn(c)),A="")}),A.length&&n.push(A)}};!(s=r.next()).done;)i();return n},Oq=function(){function t(e,r,n){this.text=Mq(r.data,n.textTransform),this.textBounds=Pq(e,this.text,n,r)}return t}(),Mq=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Hq,Vq);case 2:return t.toUpperCase();default:return t}},Hq=/(^|\s|:|-|\(|\))([a-z])/g,Vq=function(t,e,r){return t.length>0?e+r.toUpperCase():t},DU=function(t){ca(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Va),jU=function(t){ca(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Va),OU=function(t){ca(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=new XMLSerializer,a=ev(r,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Va),MU=function(t){ca(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Va),O2=function(t){ca(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Va),Kq=[{type:15,flags:0,unit:"px",number:3}],qq=[{type:16,flags:0,number:50}],Gq=function(t){return t.width>t.height?new Oo(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Oo(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},zq=function(t){var e=t.type===Wq?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},q0="checkbox",G0="radio",Wq="password",D_=707406591,hb=function(t){ca(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=zq(n),(s.type===q0||s.type===G0)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=Gq(s.bounds)),s.type){case q0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Kq;break;case G0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=qq;break}return s}return e}(Va),HU=function(t){ca(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=n.options[n.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(Va),VU=function(t){ca(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Va),KU=function(t){ca(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=GU(r,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?bf(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Fo.TRANSPARENT,a=n.contentWindow.document.body?bf(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Fo.TRANSPARENT;s.backgroundColor=ol(i)?ol(a)?s.styles.backgroundColor:a:i}}catch{}return s}return e}(Va),$q=["OL","UL","MENU"],Wg=function(t,e,r,n){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,zU(s)&&s.data.trim().length>0)r.textNodes.push(new Oq(t,s,r.styles));else if(sd(s))if(JU(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Wg(t,o,r,n)});else{var a=qU(t,s);a.styles.isVisible()&&(Xq(s,a,n)?a.flags|=4:Jq(a.styles)&&(a.flags|=2),$q.indexOf(s.tagName)!==-1&&(a.flags|=8),r.elements.push(a),s.slot,s.shadowRoot?Wg(t,s.shadowRoot,a,n):!z0(s)&&!WU(s)&&!W0(s)&&Wg(t,s,a,n))}},qU=function(t,e){return H2(e)?new DU(t,e):$U(e)?new jU(t,e):WU(e)?new OU(t,e):Yq(e)?new MU(t,e):Zq(e)?new O2(t,e):eG(e)?new hb(t,e):W0(e)?new HU(t,e):z0(e)?new VU(t,e):XU(e)?new KU(t,e):new Va(t,e)},GU=function(t,e){var r=qU(t,e);return r.flags|=4,Wg(t,e,r,r),r},Xq=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||fb(t)&&r.styles.isTransparent()},Jq=function(t){return t.isPositioned()||t.isFloating()},zU=function(t){return t.nodeType===Node.TEXT_NODE},sd=function(t){return t.nodeType===Node.ELEMENT_NODE},M2=function(t){return sd(t)&&typeof t.style<"u"&&!$g(t)},$g=function(t){return typeof t.className=="object"},Yq=function(t){return t.tagName==="LI"},Zq=function(t){return t.tagName==="OL"},eG=function(t){return t.tagName==="INPUT"},tG=function(t){return t.tagName==="HTML"},WU=function(t){return t.tagName==="svg"},fb=function(t){return t.tagName==="BODY"},$U=function(t){return t.tagName==="CANVAS"},j_=function(t){return t.tagName==="VIDEO"},H2=function(t){return t.tagName==="IMG"},XU=function(t){return t.tagName==="IFRAME"},O_=function(t){return t.tagName==="STYLE"},rG=function(t){return t.tagName==="SCRIPT"},z0=function(t){return t.tagName==="TEXTAREA"},W0=function(t){return t.tagName==="SELECT"},JU=function(t){return t.tagName==="SLOT"},M_=function(t){return t.tagName.indexOf("-")>0},nG=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,i=!0;n!==null&&n.forEach(function(o){var A=r.counters[o.counter];A&&o.increment!==0&&(i=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=o.increment)});var a=[];return i&&s.forEach(function(o){var A=r.counters[o.counter];a.push(o.counter),A||(A=r.counters[o.counter]=[]),A.push(o.reset)}),a},t}(),H_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},V_={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},sG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},iG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},_u=function(t,e,r,n,s,i){return t<e||t>r?mp(t,s,i.length>0):n.integers.reduce(function(a,o,A){for(;t>=o;)t-=o,a+=n.values[A];return a},"")+i},YU=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},fn=function(t,e,r,n,s){var i=r-e+1;return(t<0?"-":"")+(YU(Math.abs(t),i,n,function(a){return pn(Math.floor(a%i)+e)})+s)},Xl=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return YU(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},Mu=1,_A=2,IA=4,sf=8,co=function(t,e,r,n,s,i){if(t<-9999||t>9999)return mp(t,4,s.length>0);var a=Math.abs(t),o=s;if(a===0)return e[0]+o;for(var A=0;a>0&&A<=4;A++){var c=a%10;c===0&&Fn(i,Mu)&&o!==""?o=e[c]+o:c>1||c===1&&A===0||c===1&&A===1&&Fn(i,_A)||c===1&&A===1&&Fn(i,IA)&&t>100||c===1&&A>1&&Fn(i,sf)?o=e[c]+(A>0?r[A-1]:"")+o:c===1&&A>0&&(o=r[A-1]+o),a=Math.floor(a/10)}return(t<0?n:"")+o},K_="",q_="",G_="",Qy="",mp=function(t,e,r){var n=r?". ":"",s=r?"":"",i=r?", ":"",a=r?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var o=fn(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Xl(t,"",s);case 6:return _u(t,1,3999,H_,3,n).toLowerCase();case 7:return _u(t,1,3999,H_,3,n);case 8:return fn(t,945,969,!1,n);case 9:return fn(t,97,122,!1,n);case 10:return fn(t,65,90,!1,n);case 11:return fn(t,1632,1641,!0,n);case 12:case 49:return _u(t,1,9999,V_,3,n);case 35:return _u(t,1,9999,V_,3,n).toLowerCase();case 13:return fn(t,2534,2543,!0,n);case 14:case 30:return fn(t,6112,6121,!0,n);case 15:return Xl(t,"",s);case 16:return Xl(t,"",s);case 17:case 48:return co(t,"",K_,"",s,_A|IA|sf);case 47:return co(t,"",q_,"",s,Mu|_A|IA|sf);case 42:return co(t,"",K_,"",s,_A|IA|sf);case 41:return co(t,"",q_,"",s,Mu|_A|IA|sf);case 26:return co(t,"","",G_,s,0);case 25:return co(t,"","",G_,s,Mu|_A|IA);case 31:return co(t,"","",Qy,i,Mu|_A|IA);case 33:return co(t,"","",Qy,i,0);case 32:return co(t,"","",Qy,i,Mu|_A|IA);case 18:return fn(t,2406,2415,!0,n);case 20:return _u(t,1,19999,iG,3,n);case 21:return fn(t,2790,2799,!0,n);case 22:return fn(t,2662,2671,!0,n);case 22:return _u(t,1,10999,sG,3,n);case 23:return Xl(t,"");case 24:return Xl(t,"");case 27:return fn(t,3302,3311,!0,n);case 28:return Xl(t,"",s);case 29:return Xl(t,"",s);case 34:return fn(t,3792,3801,!0,n);case 37:return fn(t,6160,6169,!0,n);case 38:return fn(t,4160,4169,!0,n);case 39:return fn(t,2918,2927,!0,n);case 40:return fn(t,1776,1785,!0,n);case 43:return fn(t,3046,3055,!0,n);case 44:return fn(t,3174,3183,!0,n);case 45:return fn(t,3664,3673,!0,n);case 46:return fn(t,3872,3881,!0,n);case 3:default:return fn(t,48,57,!0,n)}},ZU="data-html2canvas-ignore",z_=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new nG,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=aG(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=s.contentWindow,A=o.document,c=lG(s).then(function(){return Is(n,void 0,void 0,function(){var d,f;return gs(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(hG),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,AG(A)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(A,f)}).then(function(){return s})]:[2,s]}})})});return A.open(),A.write(uG(document.doctype)+"<html></html>"),dG(this.referenceElement.ownerDocument,i,a),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),c},t.prototype.createElementClone=function(e){if(D2(e,2))debugger;if($U(e))return this.createCanvasClone(e);if(j_(e))return this.createVideoClone(e);if(O_(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return H2(r)&&(H2(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),M_(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Py(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(i,a){return a&&typeof a.cssText=="string"?i+a.cssText:i},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),a=s.getContext("2d");if(a)if(!this.options.allowTaint&&i)a.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var A=o.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!sd(r)||!rG(r)&&!r.hasAttribute(ZU)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!sd(r)||!O_(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(sd(i)&&JU(i)&&typeof i.assignedNodes=="function"){var a=i.assignedNodes();a.length&&a.forEach(function(o){return s.appendChildNode(r,o,n)})}else this.appendChildNode(r,i,n)},t.prototype.cloneNode=function(e,r){if(zU(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&sd(e)&&(M2(e)||$g(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&M2(s)&&(this.clonedReferenceElement=s),fb(s)&&mG(s);var A=this.counters.parse(new C_(this.context,i)),c=this.resolvePseudoContent(e,s,a,_f.BEFORE);M_(e)&&(r=!0),j_(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,o,_f.AFTER);return d&&s.appendChild(d),this.counters.pop(A),(i&&(this.options.copyStyles||$g(e))&&!XU(e)||r)&&Py(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(z0(e)||W0(e))&&(z0(s)||W0(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var i=this;if(n){var a=n.content,o=r.ownerDocument;if(!(!o||!a||a==="none"||a==="-moz-alt-content"||n.display==="none")){this.counters.parse(new C_(this.context,n));var A=new YK(this.context,n),c=o.createElement("html2canvaspseudoelement");Py(n,c),A.content.forEach(function(f){if(f.type===0)c.appendChild(o.createTextNode(f.value));else if(f.type===22){var m=o.createElement("img");m.src=f.value,m.style.opacity="1",c.appendChild(m)}else if(f.type===18){if(f.name==="attr"){var g=f.values.filter(Er);g.length&&c.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(f.name==="counter"){var B=f.values.filter(Qd),b=B[0],_=B[1];if(b&&Er(b)){var w=i.counters.getCounterValue(b.value),y=_&&Er(_)?R2.parse(i.context,_.value):3;c.appendChild(o.createTextNode(mp(w,y,!1)))}}else if(f.name==="counters"){var I=f.values.filter(Qd),b=I[0],D=I[1],_=I[2];if(b&&Er(b)){var H=i.counters.getCounterValues(b.value),k=_&&Er(_)?R2.parse(i.context,_.value):3,T=D&&D.type===0?D.value:"",E=H.map(function(S){return mp(S,k,!1)}).join(T);c.appendChild(o.createTextNode(E))}}}else if(f.type===20)switch(f.value){case"open-quote":c.appendChild(o.createTextNode(b_(A.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(b_(A.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(f.value))}}),c.className=V2+" "+K2;var d=s===_f.BEFORE?" "+V2:" "+K2;return $g(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),_f;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(_f||(_f={}));var aG=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(ZU,"true"),t.body.appendChild(r),r},oG=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},AG=function(t){return Promise.all([].slice.call(t.images,0).map(oG))},lG=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},cG=["all","d","content"],Py=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);cG.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},uG=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},dG=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},hG=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},fG=":before",pG=":after",V2="___html2canvas___pseudoelement_before",K2="___html2canvas___pseudoelement_after",W_=`{
    content: "" !important;
    display: none !important;
}`,mG=function(t){gG(t,"."+V2+fG+W_+`
         .`+K2+pG+W_)},gG=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},e3=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),wG=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(ky(e)||xG(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Is(this,void 0,void 0,function(){var r,n,s,i,a=this;return gs(this,function(o){switch(o.label){case 0:return r=e3.isSameOrigin(e),n=!Ly(e)&&this._options.useCORS===!0&&ts.SUPPORT_CORS_IMAGES&&!r,s=!Ly(e)&&!r&&!ky(e)&&typeof this._options.proxy=="string"&&ts.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Ly(e)&&!ky(e)&&!s&&!n?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(A,c){var d=new Image;d.onload=function(){return A(d)},d.onerror=c,(bG(i)||n)&&(d.crossOrigin="anonymous"),d.src=i,d.complete===!0&&setTimeout(function(){return A(d)},500),a._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,a){var o=ts.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(o==="text")i(A.response);else{var f=new FileReader;f.addEventListener("load",function(){return i(f.result)},!1),f.addEventListener("error",function(m){return a(m)},!1),f.readAsDataURL(A.response)}else a("Failed to proxy resource "+s+" with status code "+A.status)},A.onerror=a;var c=n.indexOf("?")>-1?"&":"?";if(A.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;A.timeout=d,A.ontimeout=function(){return a("Timed out ("+d+"ms) proxying "+s)}}A.send()})},t}(),vG=/^data:image\/svg\+xml/i,yG=/^data:image\/.*;base64,/i,BG=/^data:image\/.*/i,xG=function(t){return ts.SUPPORT_SVG_DRAWING||!CG(t)},Ly=function(t){return BG.test(t)},bG=function(t){return yG.test(t)},ky=function(t){return t.substr(0,4)==="blob"},CG=function(t){return t.substr(-3).toLowerCase()==="svg"||vG.test(t)},ft=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Iu=function(t,e,r){return new ft(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},ag=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Iu(this.start,this.startControl,e),s=Iu(this.startControl,this.endControl,e),i=Iu(this.endControl,this.end,e),a=Iu(n,s,e),o=Iu(s,i,e),A=Iu(a,o,e);return r?new t(this.start,n,a,A):new t(A,o,i,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Ni=function(t){return t.type===1},EG=function(){function t(e){var r=e.styles,n=e.bounds,s=rf(r.borderTopLeftRadius,n.width,n.height),i=s[0],a=s[1],o=rf(r.borderTopRightRadius,n.width,n.height),A=o[0],c=o[1],d=rf(r.borderBottomRightRadius,n.width,n.height),f=d[0],m=d[1],g=rf(r.borderBottomLeftRadius,n.width,n.height),B=g[0],b=g[1],_=[];_.push((i+A)/n.width),_.push((B+f)/n.width),_.push((a+b)/n.height),_.push((c+m)/n.height);var w=Math.max.apply(Math,_);w>1&&(i/=w,a/=w,A/=w,c/=w,f/=w,m/=w,B/=w,b/=w);var y=n.width-A,I=n.height-m,D=n.width-f,H=n.height-b,k=r.borderTopWidth,T=r.borderRightWidth,E=r.borderBottomWidth,Q=r.borderLeftWidth,j=Ur(r.paddingTop,e.bounds.width),S=Ur(r.paddingRight,e.bounds.width),N=Ur(r.paddingBottom,e.bounds.width),U=Ur(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||a>0?Mr(n.left+Q/3,n.top+k/3,i-Q/3,a-k/3,pr.TOP_LEFT):new ft(n.left+Q/3,n.top+k/3),this.topRightBorderDoubleOuterBox=i>0||a>0?Mr(n.left+y,n.top+k/3,A-T/3,c-k/3,pr.TOP_RIGHT):new ft(n.left+n.width-T/3,n.top+k/3),this.bottomRightBorderDoubleOuterBox=f>0||m>0?Mr(n.left+D,n.top+I,f-T/3,m-E/3,pr.BOTTOM_RIGHT):new ft(n.left+n.width-T/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=B>0||b>0?Mr(n.left+Q/3,n.top+H,B-Q/3,b-E/3,pr.BOTTOM_LEFT):new ft(n.left+Q/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=i>0||a>0?Mr(n.left+Q*2/3,n.top+k*2/3,i-Q*2/3,a-k*2/3,pr.TOP_LEFT):new ft(n.left+Q*2/3,n.top+k*2/3),this.topRightBorderDoubleInnerBox=i>0||a>0?Mr(n.left+y,n.top+k*2/3,A-T*2/3,c-k*2/3,pr.TOP_RIGHT):new ft(n.left+n.width-T*2/3,n.top+k*2/3),this.bottomRightBorderDoubleInnerBox=f>0||m>0?Mr(n.left+D,n.top+I,f-T*2/3,m-E*2/3,pr.BOTTOM_RIGHT):new ft(n.left+n.width-T*2/3,n.top+n.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=B>0||b>0?Mr(n.left+Q*2/3,n.top+H,B-Q*2/3,b-E*2/3,pr.BOTTOM_LEFT):new ft(n.left+Q*2/3,n.top+n.height-E*2/3),this.topLeftBorderStroke=i>0||a>0?Mr(n.left+Q/2,n.top+k/2,i-Q/2,a-k/2,pr.TOP_LEFT):new ft(n.left+Q/2,n.top+k/2),this.topRightBorderStroke=i>0||a>0?Mr(n.left+y,n.top+k/2,A-T/2,c-k/2,pr.TOP_RIGHT):new ft(n.left+n.width-T/2,n.top+k/2),this.bottomRightBorderStroke=f>0||m>0?Mr(n.left+D,n.top+I,f-T/2,m-E/2,pr.BOTTOM_RIGHT):new ft(n.left+n.width-T/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=B>0||b>0?Mr(n.left+Q/2,n.top+H,B-Q/2,b-E/2,pr.BOTTOM_LEFT):new ft(n.left+Q/2,n.top+n.height-E/2),this.topLeftBorderBox=i>0||a>0?Mr(n.left,n.top,i,a,pr.TOP_LEFT):new ft(n.left,n.top),this.topRightBorderBox=A>0||c>0?Mr(n.left+y,n.top,A,c,pr.TOP_RIGHT):new ft(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||m>0?Mr(n.left+D,n.top+I,f,m,pr.BOTTOM_RIGHT):new ft(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=B>0||b>0?Mr(n.left,n.top+H,B,b,pr.BOTTOM_LEFT):new ft(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||a>0?Mr(n.left+Q,n.top+k,Math.max(0,i-Q),Math.max(0,a-k),pr.TOP_LEFT):new ft(n.left+Q,n.top+k),this.topRightPaddingBox=A>0||c>0?Mr(n.left+Math.min(y,n.width-T),n.top+k,y>n.width+T?0:Math.max(0,A-T),Math.max(0,c-k),pr.TOP_RIGHT):new ft(n.left+n.width-T,n.top+k),this.bottomRightPaddingBox=f>0||m>0?Mr(n.left+Math.min(D,n.width-Q),n.top+Math.min(I,n.height-E),Math.max(0,f-T),Math.max(0,m-E),pr.BOTTOM_RIGHT):new ft(n.left+n.width-T,n.top+n.height-E),this.bottomLeftPaddingBox=B>0||b>0?Mr(n.left+Q,n.top+Math.min(H,n.height-E),Math.max(0,B-Q),Math.max(0,b-E),pr.BOTTOM_LEFT):new ft(n.left+Q,n.top+n.height-E),this.topLeftContentBox=i>0||a>0?Mr(n.left+Q+U,n.top+k+j,Math.max(0,i-(Q+U)),Math.max(0,a-(k+j)),pr.TOP_LEFT):new ft(n.left+Q+U,n.top+k+j),this.topRightContentBox=A>0||c>0?Mr(n.left+Math.min(y,n.width+Q+U),n.top+k+j,y>n.width+Q+U?0:A-Q+U,c-(k+j),pr.TOP_RIGHT):new ft(n.left+n.width-(T+S),n.top+k+j),this.bottomRightContentBox=f>0||m>0?Mr(n.left+Math.min(D,n.width-(Q+U)),n.top+Math.min(I,n.height+k+j),Math.max(0,f-(T+S)),m-(E+N),pr.BOTTOM_RIGHT):new ft(n.left+n.width-(T+S),n.top+n.height-(E+N)),this.bottomLeftContentBox=B>0||b>0?Mr(n.left+Q+U,n.top+H,Math.max(0,B-(Q+U)),b-(E+N),pr.BOTTOM_LEFT):new ft(n.left+Q+U,n.top+n.height-(E+N))}return t}(),pr;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(pr||(pr={}));var Mr=function(t,e,r,n,s){var i=4*((Math.sqrt(2)-1)/3),a=r*i,o=n*i,A=t+r,c=e+n;switch(s){case pr.TOP_LEFT:return new ag(new ft(t,c),new ft(t,c-o),new ft(A-a,e),new ft(A,e));case pr.TOP_RIGHT:return new ag(new ft(t,e),new ft(t+a,e),new ft(A,c-o),new ft(A,c));case pr.BOTTOM_RIGHT:return new ag(new ft(A,e),new ft(A,e+o),new ft(t+a,c),new ft(t,c));case pr.BOTTOM_LEFT:default:return new ag(new ft(A,c),new ft(A-a,c),new ft(t,e+o),new ft(t,e))}},$0=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},_G=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},X0=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},IG=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),og=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),NG=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),SG=function(t){return t.type===0},t3=function(t){return t.type===1},FG=function(t){return t.type===2},$_=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},TG=function(t,e,r,n,s){return t.map(function(i,a){switch(a){case 0:return i.add(e,r);case 1:return i.add(e+n,r);case 2:return i.add(e+n,r+s);case 3:return i.add(e,r+s)}return i})},r3=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),n3=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new EG(this.container),this.container.styles.opacity<1&&this.effects.push(new NG(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new IG(n,s,i))}if(this.container.styles.overflowX!==0){var a=$0(this.curves),o=X0(this.curves);$_(a,o)?this.effects.push(new og(a,6)):(this.effects.push(new og(a,2)),this.effects.push(new og(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var i=n.effects.filter(function(A){return!t3(A)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,i),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=$0(n.curves),o=X0(n.curves);$_(a,o)||s.unshift(new og(o,6))}}else s.unshift.apply(s,i);n=n.parent}return s.filter(function(A){return Fn(A.target,e)})},t}(),q2=function(t,e,r,n){t.container.elements.forEach(function(s){var i=Fn(s.flags,4),a=Fn(s.flags,2),o=new n3(s,t);Fn(s.styles.display,2048)&&n.push(o);var A=Fn(s.flags,8)?[]:n;if(i||a){var c=i||s.styles.isPositioned()?r:e,d=new r3(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var f=s.styles.zIndex.order;if(f<0){var m=0;c.negativeZIndex.some(function(B,b){return f>B.element.container.styles.zIndex.order?(m=b,!1):m>0}),c.negativeZIndex.splice(m,0,d)}else if(f>0){var g=0;c.positiveZIndex.some(function(B,b){return f>=B.element.container.styles.zIndex.order?(g=b+1,!1):g>0}),c.positiveZIndex.splice(g,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);q2(o,d,i?d:r,A)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),q2(o,e,r,A);Fn(s.flags,8)&&s3(s,A)})},s3=function(t,e){for(var r=t instanceof O2?t.start:1,n=t instanceof O2?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof MU&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=mp(r,i.container.styles.listStyleType,!0),r+=n?-1:1}},UG=function(t){var e=new n3(t,null),r=new r3(e),n=[];return q2(e,r,r,n),s3(e.container,n),r},X_=function(t,e){switch(e){case 0:return Ui(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Ui(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Ui(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Ui(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},QG=function(t,e){switch(e){case 0:return Ui(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Ui(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Ui(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Ui(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},PG=function(t,e){switch(e){case 0:return Ui(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Ui(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Ui(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Ui(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},LG=function(t,e){switch(e){case 0:return Ag(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Ag(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Ag(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Ag(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Ag=function(t,e){var r=[];return Ni(t)?r.push(t.subdivide(.5,!1)):r.push(t),Ni(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Ui=function(t,e,r,n){var s=[];return Ni(t)?s.push(t.subdivide(.5,!1)):s.push(t),Ni(r)?s.push(r.subdivide(.5,!0)):s.push(r),Ni(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Ni(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},i3=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},J0=function(t){var e=t.styles,r=t.bounds,n=Ur(e.paddingLeft,r.width),s=Ur(e.paddingRight,r.width),i=Ur(e.paddingTop,r.width),a=Ur(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+i+a))},kG=function(t,e){return t===0?e.bounds:t===2?J0(e):i3(e)},RG=function(t,e){return t===0?e.bounds:t===2?J0(e):i3(e)},Ry=function(t,e,r){var n=kG(Hu(t.styles.backgroundOrigin,e),t),s=RG(Hu(t.styles.backgroundClip,e),t),i=DG(Hu(t.styles.backgroundSize,e),r,n),a=i[0],o=i[1],A=rf(Hu(t.styles.backgroundPosition,e),n.width-a,n.height-o),c=jG(Hu(t.styles.backgroundRepeat,e),A,i,n,s),d=Math.round(n.left+A[0]),f=Math.round(n.top+A[1]);return[c,d,f,a,o]},Nu=function(t){return Er(t)&&t.value===pd.AUTO},lg=function(t){return typeof t=="number"},DG=function(t,e,r){var n=e[0],s=e[1],i=e[2],a=t[0],o=t[1];if(!a)return[0,0];if(Cn(a)&&o&&Cn(o))return[Ur(a,r.width),Ur(o,r.height)];var A=lg(i);if(Er(a)&&(a.value===pd.CONTAIN||a.value===pd.COVER)){if(lg(i)){var c=r.width/r.height;return c<i!=(a.value===pd.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var d=lg(n),f=lg(s),m=d||f;if(Nu(a)&&(!o||Nu(o))){if(d&&f)return[n,s];if(!A&&!m)return[r.width,r.height];if(m&&A){var g=d?n:s*i,B=f?s:n/i;return[g,B]}var b=d?n:r.width,_=f?s:r.height;return[b,_]}if(A){var w=0,y=0;return Cn(a)?w=Ur(a,r.width):Cn(o)&&(y=Ur(o,r.height)),Nu(a)?w=y*i:(!o||Nu(o))&&(y=w/i),[w,y]}var I=null,D=null;if(Cn(a)?I=Ur(a,r.width):o&&Cn(o)&&(D=Ur(o,r.height)),I!==null&&(!o||Nu(o))&&(D=d&&f?I/n*s:r.height),D!==null&&Nu(a)&&(I=d&&f?D/s*n:r.width),I!==null&&D!==null)return[I,D];throw new Error("Unable to calculate background-size for element")},Hu=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},jG=function(t,e,r,n,s){var i=e[0],a=e[1],o=r[0],A=r[1];switch(t){case 2:return[new ft(Math.round(n.left),Math.round(n.top+a)),new ft(Math.round(n.left+n.width),Math.round(n.top+a)),new ft(Math.round(n.left+n.width),Math.round(A+n.top+a)),new ft(Math.round(n.left),Math.round(A+n.top+a))];case 3:return[new ft(Math.round(n.left+i),Math.round(n.top)),new ft(Math.round(n.left+i+o),Math.round(n.top)),new ft(Math.round(n.left+i+o),Math.round(n.height+n.top)),new ft(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new ft(Math.round(n.left+i),Math.round(n.top+a)),new ft(Math.round(n.left+i+o),Math.round(n.top+a)),new ft(Math.round(n.left+i+o),Math.round(n.top+a+A)),new ft(Math.round(n.left+i),Math.round(n.top+a+A))];default:return[new ft(Math.round(s.left),Math.round(s.top)),new ft(Math.round(s.left+s.width),Math.round(s.top)),new ft(Math.round(s.left+s.width),Math.round(s.height+s.top)),new ft(Math.round(s.left),Math.round(s.height+s.top))]}},OG="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",J_="Hidden Text",MG=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),s.src=OG,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(J_)),n.appendChild(i),n.appendChild(s);var o=s.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(J_)),n.style.lineHeight="normal",s.style.verticalAlign="super";var A=s.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:A}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),a3=function(){function t(e,r){this.context=e,this.options=r}return t}(),HG=1e4,VG=function(t){ca(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new MG(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),FG(r)&&(this.ctx.globalAlpha=r.opacity),SG(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),t3(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Is(this,void 0,void 0,function(){var n;return gs(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Is(this,void 0,void 0,function(){return gs(this,function(n){switch(n.label){case 0:if(Fn(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var i=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var a=db(r.text);a.reduce(function(o,A){return i.ctx.fillText(A,o,r.bounds.top+s),o+i.ctx.measureText(A).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),s=WG(r.fontFamily).join(", "),i=qp(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(r,n){return Is(this,void 0,void 0,function(){var s,i,a,o,A,c,d,f,m=this;return gs(this,function(g){return s=this.createFontStyle(n),i=s[0],a=s[1],o=s[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(a,o),c=A.baseline,d=A.middle,f=n.paintOrder,r.textBounds.forEach(function(B){f.forEach(function(b){switch(b){case 0:m.ctx.fillStyle=On(n.color),m.renderTextWithLetterSpacing(B,n.letterSpacing,c);var _=n.textShadow;_.length&&B.text.trim().length&&(_.slice(0).reverse().forEach(function(w){m.ctx.shadowColor=On(w.color),m.ctx.shadowOffsetX=w.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=w.offsetY.number*m.options.scale,m.ctx.shadowBlur=w.blur.number,m.renderTextWithLetterSpacing(B,n.letterSpacing,c)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),n.textDecorationLine.length&&(m.ctx.fillStyle=On(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(w){switch(w){case 1:m.ctx.fillRect(B.bounds.left,Math.round(B.bounds.top+c),B.bounds.width,1);break;case 2:m.ctx.fillRect(B.bounds.left,Math.round(B.bounds.top),B.bounds.width,1);break;case 3:m.ctx.fillRect(B.bounds.left,Math.ceil(B.bounds.top+d),B.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&B.text.trim().length&&(m.ctx.strokeStyle=On(n.webkitTextStrokeColor),m.ctx.lineWidth=n.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(B.text,B.bounds.left,B.bounds.top+c)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=J0(r),a=X0(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Is(this,void 0,void 0,function(){var n,s,i,a,o,A,y,y,c,d,f,m,D,g,B,H,b,_,w,y,I,D,H;return gs(this,function(k){switch(k.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,i=n.styles,a=0,o=n.textNodes,k.label=1;case 1:return a<o.length?(A=o[a],[4,this.renderTextNode(A,i)]):[3,4];case 2:k.sent(),k.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof DU))return[3,8];k.label=5;case 5:return k.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=k.sent(),this.renderReplacedElement(n,s,y),[3,8];case 7:return k.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof jU&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof OU))return[3,12];k.label=9;case 9:return k.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=k.sent(),this.renderReplacedElement(n,s,y),[3,12];case 11:return k.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof KU&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=k.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),k.label=14;case 14:if(n instanceof hb&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===q0?n.checked&&(this.ctx.save(),this.path([new ft(n.bounds.left+f*.39363,n.bounds.top+f*.79),new ft(n.bounds.left+f*.16,n.bounds.top+f*.5549),new ft(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new ft(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new ft(n.bounds.left+f*.72983,n.bounds.top+f*.23),new ft(n.bounds.left+f*.84,n.bounds.top+f*.34085),new ft(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=On(D_),this.ctx.fill(),this.ctx.restore()):n.type===G0&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=On(D_),this.ctx.fill(),this.ctx.restore())),KG(n)&&n.value.length){switch(m=this.createFontStyle(i),D=m[0],g=m[1],B=this.fontMetrics.getMetrics(D,g).baseline,this.ctx.font=D,this.ctx.fillStyle=On(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=GG(n.styles.textAlign),H=J0(n),b=0,n.styles.textAlign){case 1:b+=H.width/2;break;case 2:b+=H.width;break}_=H.add(b,0,0,-H.height/2+1),this.ctx.save(),this.path([new ft(H.left,H.top),new ft(H.left+H.width,H.top),new ft(H.left+H.width,H.top+H.height),new ft(H.left,H.top+H.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ef(n.value,_),i.letterSpacing,B),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Fn(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(w=n.styles.listStyleImage,w.type!==0)return[3,18];y=void 0,I=w.url,k.label=15;case 15:return k.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return y=k.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return k.sent(),this.context.logger.error("Error loading list-style-image "+I),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(D=this.createFontStyle(i)[0],this.ctx.font=D,this.ctx.fillStyle=On(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",H=new Oo(n.bounds.left,n.bounds.top+Ur(n.styles.paddingTop,n.bounds.width),n.bounds.width,B_(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ef(r.listValue,H),i.letterSpacing,B_(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),k.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Is(this,void 0,void 0,function(){var n,s,w,i,a,w,o,A,w,c,d,w,f,m,w,g,B,w,b,_,w;return gs(this,function(y){switch(y.label){case 0:if(Fn(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,s=r.negativeZIndex,y.label=2;case 2:return n<s.length?(w=s[n],[4,this.renderStack(w)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),i=0,a=r.nonInlineLevel,y.label=7;case 7:return i<a.length?(w=a[i],[4,this.renderNode(w)]):[3,10];case 8:y.sent(),y.label=9;case 9:return i++,[3,7];case 10:o=0,A=r.nonPositionedFloats,y.label=11;case 11:return o<A.length?(w=A[o],[4,this.renderStack(w)]):[3,14];case 12:y.sent(),y.label=13;case 13:return o++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return c<d.length?(w=d[c],[4,this.renderStack(w)]):[3,18];case 16:y.sent(),y.label=17;case 17:return c++,[3,15];case 18:f=0,m=r.inlineLevel,y.label=19;case 19:return f<m.length?(w=m[f],[4,this.renderNode(w)]):[3,22];case 20:y.sent(),y.label=21;case 21:return f++,[3,19];case 22:g=0,B=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return g<B.length?(w=B[g],[4,this.renderStack(w)]):[3,26];case 24:y.sent(),y.label=25;case 25:return g++,[3,23];case 26:b=0,_=r.positiveZIndex,y.label=27;case 27:return b<_.length?(w=_[b],[4,this.renderStack(w)]):[3,30];case 28:y.sent(),y.label=29;case 29:return b++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,i){var a=Ni(s)?s.start:s;i===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),Ni(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,i){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(r,n,s){var i;if(r.width===n&&r.height===s)return r;var a=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,o=a.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,s);var A=o.getContext("2d");return A.drawImage(r,0,0,r.width,r.height,0,0,n,s),o},e.prototype.renderBackgroundImage=function(r){return Is(this,void 0,void 0,function(){var n,s,i,a,o,A;return gs(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var f,m,g,j,ie,z,U,Z,E,B,j,ie,z,U,Z,b,_,w,y,I,D,H,k,T,E,Q,j,S,N,U,Z,ue,ie,z,W,ae,q,pe,R,G,te,J;return gs(this,function(le){switch(le.label){case 0:if(d.type!==0)return[3,5];f=void 0,m=d.url,le.label=1;case 1:return le.trys.push([1,3,,4]),[4,i.context.cache.match(m)];case 2:return f=le.sent(),[3,4];case 3:return le.sent(),i.context.logger.error("Error loading background-image "+m),[3,4];case 4:return f&&(g=Ry(r,n,[f.width,f.height,f.width/f.height]),j=g[0],ie=g[1],z=g[2],U=g[3],Z=g[4],E=i.ctx.createPattern(i.resizeImage(f,U,Z),"repeat"),i.renderRepeat(j,E,ie,z)),[3,6];case 5:S9(d)?(B=Ry(r,n,[null,null,null]),j=B[0],ie=B[1],z=B[2],U=B[3],Z=B[4],b=C9(d.angle,U,Z),_=b[0],w=b[1],y=b[2],I=b[3],D=b[4],H=document.createElement("canvas"),H.width=U,H.height=Z,k=H.getContext("2d"),T=k.createLinearGradient(w,I,y,D),v_(d.stops,_).forEach(function(ne){return T.addColorStop(ne.stop,On(ne.color))}),k.fillStyle=T,k.fillRect(0,0,U,Z),U>0&&Z>0&&(E=i.ctx.createPattern(H,"repeat"),i.renderRepeat(j,E,ie,z))):F9(d)&&(Q=Ry(r,n,[null,null,null]),j=Q[0],S=Q[1],N=Q[2],U=Q[3],Z=Q[4],ue=d.position.length===0?[lb]:d.position,ie=Ur(ue[0],U),z=Ur(ue[ue.length-1],Z),W=E9(d,ie,z,U,Z),ae=W[0],q=W[1],ae>0&&q>0&&(pe=i.ctx.createRadialGradient(S+ie,N+z,0,S+ie,N+z,ae),v_(d.stops,ae*2).forEach(function(ne){return pe.addColorStop(ne.stop,On(ne.color))}),i.path(j),i.ctx.fillStyle=pe,ae!==q?(R=r.bounds.left+.5*r.bounds.width,G=r.bounds.top+.5*r.bounds.height,te=q/ae,J=1/te,i.ctx.save(),i.ctx.translate(R,G),i.ctx.transform(1,0,0,te,0,0),i.ctx.translate(-R,-G),i.ctx.fillRect(S,J*(N-G)+G,U,Z*J),i.ctx.restore()):i.ctx.fill())),le.label=6;case 6:return n--,[2]}})},i=this,a=0,o=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return a<o.length?(A=o[a],[5,s(A)]):[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return Is(this,void 0,void 0,function(){return gs(this,function(i){return this.path(X_(s,n)),this.ctx.fillStyle=On(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,i){return Is(this,void 0,void 0,function(){var a,o;return gs(this,function(A){switch(A.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,i)]:[3,2];case 1:return A.sent(),[2];case 2:return a=QG(i,s),this.path(a),this.ctx.fillStyle=On(r),this.ctx.fill(),o=PG(i,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Is(this,void 0,void 0,function(){var n,s,i,a,o,A,c,d,f=this;return gs(this,function(m){switch(m.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!ol(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=qG(Hu(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),ol(n.backgroundColor)||(this.ctx.fillStyle=On(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(g){f.ctx.save();var B=$0(r.curves),b=g.inset?0:HG,_=TG(B,-b+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(f.path(B),f.ctx.clip(),f.mask(_)):(f.mask(B),f.ctx.clip(),f.path(_)),f.ctx.shadowOffsetX=g.offsetX.number+b,f.ctx.shadowOffsetY=g.offsetY.number,f.ctx.shadowColor=On(g.color),f.ctx.shadowBlur=g.blur.number,f.ctx.fillStyle=g.inset?On(g.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),m.label=2;case 2:o=0,A=0,c=i,m.label=3;case 3:return A<c.length?(d=c[A],d.style!==0&&!ol(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:m.sent(),m.label=11;case 11:o++,m.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,i,a){return Is(this,void 0,void 0,function(){var o,A,c,d,f,m,g,B,b,_,w,y,I,D,H,k,H,k;return gs(this,function(T){return this.ctx.save(),o=LG(i,s),A=X_(i,s),a===2&&(this.path(A),this.ctx.clip()),Ni(A[0])?(c=A[0].start.x,d=A[0].start.y):(c=A[0].x,d=A[0].y),Ni(A[1])?(f=A[1].end.x,m=A[1].end.y):(f=A[1].x,m=A[1].y),s===0||s===2?g=Math.abs(c-f):g=Math.abs(d-m),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(A.slice(0,2)),B=n<3?n*3:n*2,b=n<3?n*2:n,a===3&&(B=n,b=n),_=!0,g<=B*2?_=!1:g<=B*2+b?(w=g/(2*B+b),B*=w,b*=w):(y=Math.floor((g+b)/(B+b)),I=(g-y*B)/(y-1),D=(g-(y+1)*B)/y,b=D<=0||Math.abs(b-I)<Math.abs(b-D)?I:D),_&&(a===3?this.ctx.setLineDash([0,B+b]):this.ctx.setLineDash([B,b])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=On(r),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(Ni(A[0])&&(H=A[3],k=A[0],this.ctx.beginPath(),this.formatPath([new ft(H.end.x,H.end.y),new ft(k.start.x,k.start.y)]),this.ctx.stroke()),Ni(A[1])&&(H=A[1],k=A[2],this.ctx.beginPath(),this.formatPath([new ft(H.end.x,H.end.y),new ft(k.start.x,k.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Is(this,void 0,void 0,function(){var n;return gs(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=On(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=UG(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(a3),KG=function(t){return t instanceof VU||t instanceof HU?!0:t instanceof hb&&t.type!==G0&&t.type!==q0},qG=function(t,e){switch(t){case 0:return $0(e);case 2:return _G(e);case 1:default:return X0(e)}},GG=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},zG=["-apple-system","system-ui"],WG=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return zG.indexOf(e)===-1}):t},$G=function(t){ca(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return Is(this,void 0,void 0,function(){var n,s;return gs(this,function(i){switch(i.label){case 0:return n=j2(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,XG(n)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=On(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(a3),XG=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},JG=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Mm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Mm([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Mm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Mm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),YG=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new JG({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new wG(this,e)}return t.instanceCount=1,t}(),pb=function(t,e){return e===void 0&&(e={}),ZG(t,e)};typeof window<"u"&&e3.setContext(window);var ZG=function(t,e){return Is(void 0,void 0,void 0,function(){var r,n,s,i,a,o,A,c,d,f,m,g,B,b,_,w,y,I,D,H,T,k,T,E,Q,j,S,N,U,Z,ue,ie,z,W,ae,q,pe,R,G,te;return gs(this,function(J){switch(J.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(Q=e.imageTimeout)!==null&&Q!==void 0?Q:15e3,proxy:e.proxy,useCORS:(j=e.useCORS)!==null&&j!==void 0?j:!1},i=C2({logging:(S=e.logging)!==null&&S!==void 0?S:!0,cache:e.cache},s),a={windowWidth:(N=e.windowWidth)!==null&&N!==void 0?N:n.innerWidth,windowHeight:(U=e.windowHeight)!==null&&U!==void 0?U:n.innerHeight,scrollX:(Z=e.scrollX)!==null&&Z!==void 0?Z:n.pageXOffset,scrollY:(ue=e.scrollY)!==null&&ue!==void 0?ue:n.pageYOffset},o=new Oo(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),A=new YG(i,o),c=(ie=e.foreignObjectRendering)!==null&&ie!==void 0?ie:!1,d={allowTaint:(z=e.allowTaint)!==null&&z!==void 0?z:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},A.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new z_(A,t,d),m=f.clonedReferenceElement,m?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=J.sent(),B=fb(m)||tG(m)?TV(m.ownerDocument):ev(A,m),b=B.width,_=B.height,w=B.left,y=B.top,I=ez(A,m,e.backgroundColor),D={canvas:e.canvas,backgroundColor:I,scale:(ae=(W=e.scale)!==null&&W!==void 0?W:n.devicePixelRatio)!==null&&ae!==void 0?ae:1,x:((q=e.x)!==null&&q!==void 0?q:0)+w,y:((pe=e.y)!==null&&pe!==void 0?pe:0)+y,width:(R=e.width)!==null&&R!==void 0?R:Math.ceil(b),height:(G=e.height)!==null&&G!==void 0?G:Math.ceil(_)},c?(A.logger.debug("Document cloned, using foreign object rendering"),T=new $G(A,D),[4,T.render(m)]):[3,3];case 2:return H=J.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+w+","+y+" with size "+b+"x"+_+" using computed rendering"),A.logger.debug("Starting DOM parsing"),k=GU(A,m),I===k.styles.backgroundColor&&(k.styles.backgroundColor=Fo.TRANSPARENT),A.logger.debug("Starting renderer for element at "+D.x+","+D.y+" with size "+D.width+"x"+D.height),T=new VG(A,D),[4,T.render(k)];case 4:H=J.sent(),J.label=5;case 5:return(!((te=e.removeContainer)!==null&&te!==void 0)||te)&&(z_.destroy(g)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,H]}})})},ez=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?bf(t,getComputedStyle(n.documentElement).backgroundColor):Fo.TRANSPARENT,i=n.body?bf(t,getComputedStyle(n.body).backgroundColor):Fo.TRANSPARENT,a=typeof r=="string"?bf(t,r):r===null?Fo.TRANSPARENT:4294967295;return e===n.documentElement?ol(s)?ol(i)?a:i:s:a};const mb=Object.freeze(Object.defineProperty({__proto__:null,default:pb},Symbol.toStringTag,{value:"Module"})),tz="modulepreload",rz=function(t){return"/"+t},Y_={},To=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(A=>{if(A=rz(A),A in Y_)return;Y_[A]=!0;const c=A.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":tz,c||(f.as="script"),f.crossOrigin="",f.href=A,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${A}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function xr(t){"@babel/helpers - typeof";return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(t)}var ys=Uint8Array,oi=Uint16Array,gb=Int32Array,cv=new ys([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),uv=new ys([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),G2=new ys([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o3=function(t,e){for(var r=new oi(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new gb(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},A3=o3(cv,2),l3=A3.b,z2=A3.r;l3[28]=258,z2[258]=28;var c3=o3(uv,0),nz=c3.b,Z_=c3.r,W2=new oi(32768);for(var Dr=0;Dr<32768;++Dr){var bA=(Dr&43690)>>1|(Dr&21845)<<1;bA=(bA&52428)>>2|(bA&13107)<<2,bA=(bA&61680)>>4|(bA&3855)<<4,W2[Dr]=((bA&65280)>>8|(bA&255)<<8)>>1}var ja=function(t,e,r){for(var n=t.length,s=0,i=new oi(e);s<n;++s)t[s]&&++i[t[s]-1];var a=new oi(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(r){o=new oi(1<<e);var A=15-e;for(s=0;s<n;++s)if(t[s])for(var c=s<<4|t[s],d=e-t[s],f=a[t[s]-1]++<<d,m=f|(1<<d)-1;f<=m;++f)o[W2[f]>>A]=c}else for(o=new oi(n),s=0;s<n;++s)t[s]&&(o[s]=W2[a[t[s]-1]++]>>15-t[s]);return o},wl=new ys(288);for(var Dr=0;Dr<144;++Dr)wl[Dr]=8;for(var Dr=144;Dr<256;++Dr)wl[Dr]=9;for(var Dr=256;Dr<280;++Dr)wl[Dr]=7;for(var Dr=280;Dr<288;++Dr)wl[Dr]=8;var gp=new ys(32);for(var Dr=0;Dr<32;++Dr)gp[Dr]=5;var sz=ja(wl,9,0),iz=ja(wl,9,1),az=ja(gp,5,0),oz=ja(gp,5,1),Dy=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Wi=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},jy=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},wb=function(t){return(t+7)/8|0},u3=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new ys(t.subarray(e,r))},Az=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Yi=function(t,e,r){var n=new Error(e||Az[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Yi),!r)throw n;return n},lz=function(t,e,r,n){var s=t.length,i=0;if(!s||e.f&&!e.l)return r||new ys(0);var a=!r,o=a||e.i!=2,A=e.i;a&&(r=new ys(s*3));var c=function(Te){var ce=r.length;if(Te>ce){var xe=new ys(Math.max(ce*2,Te));xe.set(r),r=xe}},d=e.f||0,f=e.p||0,m=e.b||0,g=e.l,B=e.d,b=e.m,_=e.n,w=s*8;do{if(!g){d=Wi(t,f,1);var y=Wi(t,f+1,3);if(f+=3,y)if(y==1)g=iz,B=oz,b=9,_=5;else if(y==2){var k=Wi(t,f,31)+257,T=Wi(t,f+10,15)+4,E=k+Wi(t,f+5,31)+1;f+=14;for(var Q=new ys(E),j=new ys(19),S=0;S<T;++S)j[G2[S]]=Wi(t,f+S*3,7);f+=T*3;for(var N=Dy(j),U=(1<<N)-1,Z=ja(j,N,1),S=0;S<E;){var ue=Z[Wi(t,f,U)];f+=ue&15;var I=ue>>4;if(I<16)Q[S++]=I;else{var ie=0,z=0;for(I==16?(z=3+Wi(t,f,3),f+=2,ie=Q[S-1]):I==17?(z=3+Wi(t,f,7),f+=3):I==18&&(z=11+Wi(t,f,127),f+=7);z--;)Q[S++]=ie}}var W=Q.subarray(0,k),ae=Q.subarray(k);b=Dy(W),_=Dy(ae),g=ja(W,b,1),B=ja(ae,_,1)}else Yi(1);else{var I=wb(f)+4,D=t[I-4]|t[I-3]<<8,H=I+D;if(H>s){A&&Yi(0);break}o&&c(m+D),r.set(t.subarray(I,H),m),e.b=m+=D,e.p=f=H*8,e.f=d;continue}if(f>w){A&&Yi(0);break}}o&&c(m+131072);for(var q=(1<<b)-1,pe=(1<<_)-1,R=f;;R=f){var ie=g[jy(t,f)&q],G=ie>>4;if(f+=ie&15,f>w){A&&Yi(0);break}if(ie||Yi(2),G<256)r[m++]=G;else if(G==256){R=f,g=null;break}else{var te=G-254;if(G>264){var S=G-257,J=cv[S];te=Wi(t,f,(1<<J)-1)+l3[S],f+=J}var le=B[jy(t,f)&pe],ne=le>>4;le||Yi(3),f+=le&15;var ae=nz[ne];if(ne>3){var J=uv[ne];ae+=jy(t,f)&(1<<J)-1,f+=J}if(f>w){A&&Yi(0);break}o&&c(m+131072);var ee=m+te;if(m<ae){var oe=i-ae,ye=Math.min(ae,ee);for(oe+m<0&&Yi(3);m<ye;++m)r[m]=n[oe+m]}for(;m<ee;++m)r[m]=r[m-ae]}}e.l=g,e.p=R,e.b=m,e.f=d,g&&(d=1,e.m=b,e.d=B,e.n=_)}while(!d);return m!=r.length&&a?u3(r,0,m):r.subarray(0,m)},uo=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},kh=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Oy=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,i=r.slice();if(!s)return{t:h3,l:0};if(s==1){var a=new ys(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(H,k){return H.f-k.f}),r.push({s:-1,f:25001});var o=r[0],A=r[1],c=0,d=1,f=2;for(r[0]={s:-1,f:o.f+A.f,l:o,r:A};d!=s-1;)o=r[r[c].f<r[f].f?c++:f++],A=r[c!=d&&r[c].f<r[f].f?c++:f++],r[d++]={s:-1,f:o.f+A.f,l:o,r:A};for(var m=i[0].s,n=1;n<s;++n)i[n].s>m&&(m=i[n].s);var g=new oi(m+1),B=$2(r[d-1],g,0);if(B>e){var n=0,b=0,_=B-e,w=1<<_;for(i.sort(function(k,T){return g[T.s]-g[k.s]||k.f-T.f});n<s;++n){var y=i[n].s;if(g[y]>e)b+=w-(1<<B-g[y]),g[y]=e;else break}for(b>>=_;b>0;){var I=i[n].s;g[I]<e?b-=1<<e-g[I]++-1:++n}for(;n>=0&&b;--n){var D=i[n].s;g[D]==e&&(--g[D],++b)}B=e}return{t:new ys(g),l:B}},$2=function(t,e,r){return t.s==-1?Math.max($2(t.l,e,r+1),$2(t.r,e,r+1)):e[t.s]=r},eI=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new oi(++e),n=0,s=t[0],i=1,a=function(A){r[n++]=A},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:r.subarray(0,n),n:e}},Rh=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},d3=function(t,e,r){var n=r.length,s=wb(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<n;++i)t[s+i+4]=r[i];return(s+4+n)*8},tI=function(t,e,r,n,s,i,a,o,A,c,d){uo(e,d++,r),++s[256];for(var f=Oy(s,15),m=f.t,g=f.l,B=Oy(i,15),b=B.t,_=B.l,w=eI(m),y=w.c,I=w.n,D=eI(b),H=D.c,k=D.n,T=new oi(19),E=0;E<y.length;++E)++T[y[E]&31];for(var E=0;E<H.length;++E)++T[H[E]&31];for(var Q=Oy(T,7),j=Q.t,S=Q.l,N=19;N>4&&!j[G2[N-1]];--N);var U=c+5<<3,Z=Rh(s,wl)+Rh(i,gp)+a,ue=Rh(s,m)+Rh(i,b)+a+14+3*N+Rh(T,j)+2*T[16]+3*T[17]+7*T[18];if(A>=0&&U<=Z&&U<=ue)return d3(e,d,t.subarray(A,A+c));var ie,z,W,ae;if(uo(e,d,1+(ue<Z)),d+=2,ue<Z){ie=ja(m,g,0),z=m,W=ja(b,_,0),ae=b;var q=ja(j,S,0);uo(e,d,I-257),uo(e,d+5,k-1),uo(e,d+10,N-4),d+=14;for(var E=0;E<N;++E)uo(e,d+3*E,j[G2[E]]);d+=3*N;for(var pe=[y,H],R=0;R<2;++R)for(var G=pe[R],E=0;E<G.length;++E){var te=G[E]&31;uo(e,d,q[te]),d+=j[te],te>15&&(uo(e,d,G[E]>>5&127),d+=G[E]>>12)}}else ie=sz,z=wl,W=az,ae=gp;for(var E=0;E<o;++E){var J=n[E];if(J>255){var te=J>>18&31;kh(e,d,ie[te+257]),d+=z[te+257],te>7&&(uo(e,d,J>>23&31),d+=cv[te]);var le=J&31;kh(e,d,W[le]),d+=ae[le],le>3&&(kh(e,d,J>>5&8191),d+=uv[le])}else kh(e,d,ie[J]),d+=z[J]}return kh(e,d,ie[256]),d+z[256]},cz=new gb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),h3=new ys(0),uz=function(t,e,r,n,s,i){var a=i.z||t.length,o=new ys(n+a+5*(1+Math.ceil(a/7e3))+s),A=o.subarray(n,o.length-s),c=i.l,d=(i.r||0)&7;if(e){d&&(A[0]=i.r>>3);for(var f=cz[e-1],m=f>>13,g=f&8191,B=(1<<r)-1,b=i.p||new oi(32768),_=i.h||new oi(B+1),w=Math.ceil(r/3),y=2*w,I=function(Ce){return(t[Ce]^t[Ce+1]<<w^t[Ce+2]<<y)&B},D=new gb(25e3),H=new oi(288),k=new oi(32),T=0,E=0,Q=i.i||0,j=0,S=i.w||0,N=0;Q+2<a;++Q){var U=I(Q),Z=Q&32767,ue=_[U];if(b[Z]=ue,_[U]=Z,S<=Q){var ie=a-Q;if((T>7e3||j>24576)&&(ie>423||!c)){d=tI(t,A,0,D,H,k,E,j,N,Q-N,d),j=T=E=0,N=Q;for(var z=0;z<286;++z)H[z]=0;for(var z=0;z<30;++z)k[z]=0}var W=2,ae=0,q=g,pe=Z-ue&32767;if(ie>2&&U==I(Q-pe))for(var R=Math.min(m,ie)-1,G=Math.min(32767,Q),te=Math.min(258,ie);pe<=G&&--q&&Z!=ue;){if(t[Q+W]==t[Q+W-pe]){for(var J=0;J<te&&t[Q+J]==t[Q+J-pe];++J);if(J>W){if(W=J,ae=pe,J>R)break;for(var le=Math.min(pe,J-2),ne=0,z=0;z<le;++z){var ee=Q-pe+z&32767,oe=b[ee],ye=ee-oe&32767;ye>ne&&(ne=ye,ue=ee)}}}Z=ue,ue=b[Z],pe+=Z-ue&32767}if(ae){D[j++]=268435456|z2[W]<<18|Z_[ae];var Te=z2[W]&31,ce=Z_[ae]&31;E+=cv[Te]+uv[ce],++H[257+Te],++k[ce],S=Q+W,++T}else D[j++]=t[Q],++H[t[Q]]}}for(Q=Math.max(Q,S);Q<a;++Q)D[j++]=t[Q],++H[t[Q]];d=tI(t,A,c,D,H,k,E,j,N,Q-N,d),c||(i.r=d&7|A[d/8|0]<<3,d-=7,i.h=_,i.p=b,i.i=Q,i.w=S)}else{for(var Q=i.w||0;Q<a+c;Q+=65535){var xe=Q+65535;xe>=a&&(A[d/8|0]=c,xe=a),d=d3(A,d+1,t.subarray(Q,xe))}i.i=a}return u3(o,0,n+wb(d)+s)},f3=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=n+=r[a];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},dz=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new ys(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return uz(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},p3=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},hz=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=f3();s.p(e.dictionary),p3(t,2,s.d())}},fz=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Yi(6,"invalid zlib data"),(t[1]>>5&1)==1&&Yi(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function X2(t,e){e||(e={});var r=f3();r.p(t);var n=dz(t,e,e.dictionary?6:2,4);return hz(n,e),p3(n,n.length-4,r.d()),n}function pz(t,e){return lz(t.subarray(fz(t),-4),{i:2},e,e)}var mz=typeof TextDecoder<"u"&&new TextDecoder,gz=0;try{mz.decode(h3,{stream:!0}),gz=1}catch{}var kt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function My(){kt.console&&typeof kt.console.log=="function"&&kt.console.log.apply(kt.console,arguments)}var Sr={log:My,warn:function(t){kt.console&&(typeof kt.console.warn=="function"?kt.console.warn.apply(kt.console,arguments):My.call(null,arguments))},error:function(t){kt.console&&(typeof kt.console.error=="function"?kt.console.error.apply(kt.console,arguments):My(t))}};function Hy(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){nc(n.response,e,r)},n.onerror=function(){Sr.error("could not download file")},n.send()}function rI(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function cg(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var If,J2,nc=kt.saveAs||((typeof window>"u"?"undefined":xr(window))!=="object"||window!==kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=kt.URL||kt.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?rI(s.href)?Hy(t,e,r):cg(s,s.target="_blank"):cg(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){cg(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(rI(t))Hy(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){cg(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:xr(i)!=="object"&&(Sr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return Hy(t,e,r);var s=t.type==="application/octet-stream",i=/constructor/i.test(kt.HTMLElement)||kt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":xr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var A=kt.URL||kt.webkitURL,c=A.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){A.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function m3(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),A=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),A.length==1&&(A="0"+A),c.length==1&&(c="0"+c),"#"+o+A+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Vy(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r=hs(r,n,s,i,e[0],7,-680876936),i=hs(i,r,n,s,e[1],12,-389564586),s=hs(s,i,r,n,e[2],17,606105819),n=hs(n,s,i,r,e[3],22,-1044525330),r=hs(r,n,s,i,e[4],7,-176418897),i=hs(i,r,n,s,e[5],12,1200080426),s=hs(s,i,r,n,e[6],17,-1473231341),n=hs(n,s,i,r,e[7],22,-45705983),r=hs(r,n,s,i,e[8],7,1770035416),i=hs(i,r,n,s,e[9],12,-1958414417),s=hs(s,i,r,n,e[10],17,-42063),n=hs(n,s,i,r,e[11],22,-1990404162),r=hs(r,n,s,i,e[12],7,1804603682),i=hs(i,r,n,s,e[13],12,-40341101),s=hs(s,i,r,n,e[14],17,-1502002290),r=fs(r,n=hs(n,s,i,r,e[15],22,1236535329),s,i,e[1],5,-165796510),i=fs(i,r,n,s,e[6],9,-1069501632),s=fs(s,i,r,n,e[11],14,643717713),n=fs(n,s,i,r,e[0],20,-373897302),r=fs(r,n,s,i,e[5],5,-701558691),i=fs(i,r,n,s,e[10],9,38016083),s=fs(s,i,r,n,e[15],14,-660478335),n=fs(n,s,i,r,e[4],20,-405537848),r=fs(r,n,s,i,e[9],5,568446438),i=fs(i,r,n,s,e[14],9,-1019803690),s=fs(s,i,r,n,e[3],14,-187363961),n=fs(n,s,i,r,e[8],20,1163531501),r=fs(r,n,s,i,e[13],5,-1444681467),i=fs(i,r,n,s,e[2],9,-51403784),s=fs(s,i,r,n,e[7],14,1735328473),r=ps(r,n=fs(n,s,i,r,e[12],20,-1926607734),s,i,e[5],4,-378558),i=ps(i,r,n,s,e[8],11,-2022574463),s=ps(s,i,r,n,e[11],16,1839030562),n=ps(n,s,i,r,e[14],23,-35309556),r=ps(r,n,s,i,e[1],4,-1530992060),i=ps(i,r,n,s,e[4],11,1272893353),s=ps(s,i,r,n,e[7],16,-155497632),n=ps(n,s,i,r,e[10],23,-1094730640),r=ps(r,n,s,i,e[13],4,681279174),i=ps(i,r,n,s,e[0],11,-358537222),s=ps(s,i,r,n,e[3],16,-722521979),n=ps(n,s,i,r,e[6],23,76029189),r=ps(r,n,s,i,e[9],4,-640364487),i=ps(i,r,n,s,e[12],11,-421815835),s=ps(s,i,r,n,e[15],16,530742520),r=ms(r,n=ps(n,s,i,r,e[2],23,-995338651),s,i,e[0],6,-198630844),i=ms(i,r,n,s,e[7],10,1126891415),s=ms(s,i,r,n,e[14],15,-1416354905),n=ms(n,s,i,r,e[5],21,-57434055),r=ms(r,n,s,i,e[12],6,1700485571),i=ms(i,r,n,s,e[3],10,-1894986606),s=ms(s,i,r,n,e[10],15,-1051523),n=ms(n,s,i,r,e[1],21,-2054922799),r=ms(r,n,s,i,e[8],6,1873313359),i=ms(i,r,n,s,e[15],10,-30611744),s=ms(s,i,r,n,e[6],15,-1560198380),n=ms(n,s,i,r,e[13],21,1309151649),r=ms(r,n,s,i,e[4],6,-145523070),i=ms(i,r,n,s,e[11],10,-1120210379),s=ms(s,i,r,n,e[2],15,718787259),n=ms(n,s,i,r,e[9],21,-343485551),t[0]=GA(r,t[0]),t[1]=GA(n,t[1]),t[2]=GA(s,t[2]),t[3]=GA(i,t[3])}function dv(t,e,r,n,s,i){return e=GA(GA(e,t),GA(n,i)),GA(e<<s|e>>>32-s,r)}function hs(t,e,r,n,s,i,a){return dv(e&r|~e&n,t,e,s,i,a)}function fs(t,e,r,n,s,i,a){return dv(e&n|r&~n,t,e,s,i,a)}function ps(t,e,r,n,s,i,a){return dv(e^r^n,t,e,s,i,a)}function ms(t,e,r,n,s,i,a){return dv(r^(e|~n),t,e,s,i,a)}function g3(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Vy(n,wz(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(Vy(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,Vy(n,s),n}function wz(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}If=kt.atob.bind(kt),J2=kt.btoa.bind(kt);var nI="0123456789abcdef".split("");function vz(t){for(var e="",r=0;r<4;r++)e+=nI[t>>8*r+4&15]+nI[t>>8*r&15];return e}function yz(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Y2(t){return g3(t).map(yz).join("")}var Bz=function(t){for(var e=0;e<t.length;e++)t[e]=vz(t[e]);return t.join("")}(g3("hello"))!="5d41402abc4b2a76b9719d911017c592";function GA(t,e){if(Bz){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Z2(t,e){var r,n,s,i;if(t!==r){for(var a=(s=t,i=1+(256/t.length>>0),new Array(i+1).join(s)),o=[],A=0;A<256;A++)o[A]=A;var c=0;for(A=0;A<256;A++){var d=o[A];c=(c+d+a.charCodeAt(A))%256,o[A]=o[c],o[c]=d}r=t,n=o}else o=n;var f=e.length,m=0,g=0,B="";for(A=0;A<f;A++)g=(g+(d=o[m=(m+1)%256]))%256,o[m]=o[g],o[g]=d,a=o[(o[m]+o[g])%256],B+=String.fromCharCode(e.charCodeAt(A)^a);return B}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var sI={print:4,modify:8,copy:16,"annot-forms":32};function Vu(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(sI.perm!==void 0)throw new Error("Invalid permission: "+o);s+=sI[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=Y2(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Z2(this.encryptionKey,this.padding)}function Ku(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function iI(t){if(xr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[r]){var a=e[r][i];try{a[0].apply(t,n)}catch(o){kt.console&&Sr.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function wp(t){if(!(this instanceof wp))return new wp(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function w3(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function jA(t,e,r,n,s){if(!(this instanceof jA))return new jA(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,w3.call(this,n,s)}function fc(t,e,r,n,s){if(!(this instanceof fc))return new fc(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,w3.call(this,n,s)}function Ut(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,A=16,c="S",d=null;xr(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,i=t.compress||t.compressPdf||i,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(A=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=iI;var B="1.3",b=g.__private__.getPdfVersion=function(){return B};g.__private__.setPdfVersion=function(v){B=v};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return _};var w=g.__private__.getPageFormat=function(v){return _[v]};s=s||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},I=y.COMPAT;function D(){this.saveGraphicsState(),re(new ct(Xe,0,0,-Xe,0,ls()*Xe).toString()+" cm"),this.setFontSize(this.getFontSize()/Xe),c="n",I=y.ADVANCED}function H(){this.restoreGraphicsState(),c="S",I=y.COMPAT}var k=g.__private__.combineFontStyleAndFontWeight=function(v,O){if(v=="bold"&&O=="normal"||v=="bold"&&O==400||v=="normal"&&O=="italic"||v=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(v=O==400||O==="normal"?v==="italic"?"italic":"normal":O!=700&&O!=="bold"||v!=="normal"?(O==700?"bold":O)+""+v:"bold"),v};g.advancedAPI=function(v){var O=I===y.COMPAT;return O&&D.call(this),typeof v!="function"||(v(this),O&&H.call(this)),this},g.compatAPI=function(v){var O=I===y.ADVANCED;return O&&H.call(this),typeof v!="function"||(v(this),O&&D.call(this)),this},g.isAdvancedAPI=function(){return I===y.ADVANCED};var T,E=function(v){if(I!==y.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Q=g.roundToPrecision=g.__private__.roundToPrecision=function(v,O){var Ae=e||O;if(isNaN(v)||isNaN(Ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Ae).replace(/0+$/,"")};T=g.hpf=g.__private__.hpf=typeof A=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(v,A)}:A==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(v,16)};var j=g.f2=g.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return Q(v,2)},S=g.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return Q(v,3)},N=g.scale=g.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return I===y.COMPAT?v*Xe:I===y.ADVANCED?v:void 0},U=function(v){return I===y.COMPAT?ls()-v:I===y.ADVANCED?v:void 0},Z=function(v){return N(U(v))};g.__private__.setPrecision=g.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var ue,ie="00000000000000000000000000000000",z=g.__private__.getFileId=function(){return ie},W=g.__private__.setFileId=function(v){return ie=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():ie.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Lr=new Vu(d.userPermissions,d.userPassword,d.ownerPassword,ie)),ie};g.setFileId=function(v){return W(v),this},g.getFileId=function(){return z()};var ae=g.__private__.convertDateToPDFDate=function(v){var O=v.getTimezoneOffset(),Ae=O<0?"+":"-",de=Math.floor(Math.abs(O/60)),ve=Math.abs(O%60),Pe=[Ae,te(de),"'",te(ve),"'"].join("");return["D:",v.getFullYear(),te(v.getMonth()+1),te(v.getDate()),te(v.getHours()),te(v.getMinutes()),te(v.getSeconds()),Pe].join("")},q=g.__private__.convertPDFDateToDate=function(v){var O=parseInt(v.substr(2,4),10),Ae=parseInt(v.substr(6,2),10)-1,de=parseInt(v.substr(8,2),10),ve=parseInt(v.substr(10,2),10),Pe=parseInt(v.substr(12,2),10),Ve=parseInt(v.substr(14,2),10);return new Date(O,Ae,de,ve,Pe,Ve,0)},pe=g.__private__.setCreationDate=function(v){var O;if(v===void 0&&(v=new Date),v instanceof Date)O=ae(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=v}return ue=O},R=g.__private__.getCreationDate=function(v){var O=ue;return v==="jsDate"&&(O=q(ue)),O};g.setCreationDate=function(v){return pe(v),this},g.getCreationDate=function(v){return R(v)};var G,te=g.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},J=g.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},le=0,ne=[],ee=[],oe=0,ye=[],Te=[],ce=!1,xe=ee,Ce=function(){le=0,oe=0,ee=[],ne=[],ye=[],rt=Or(),nt=Or()};g.__private__.setCustomOutputDestination=function(v){ce=!0,xe=v};var me=function(v){ce||(xe=v)};g.__private__.resetCustomOutputDestination=function(){ce=!1,xe=ee};var re=g.__private__.out=function(v){return v=v.toString(),oe+=v.length+1,xe.push(v),xe},yt=g.__private__.write=function(v){return re(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Oe=g.__private__.getArrayBuffer=function(v){for(var O=v.length,Ae=new ArrayBuffer(O),de=new Uint8Array(Ae);O--;)de[O]=v.charCodeAt(O);return Ae},ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return ke};var Ke=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(v){return Ke=I===y.ADVANCED?v/Xe:v,this};var Je,Ye=g.__private__.getFontSize=g.getFontSize=function(){return I===y.COMPAT?Ke:Ke*Xe},wt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(v){return wt=v,this},g.__private__.getR2L=g.getR2L=function(){return wt};var Fe,Ge=g.__private__.setZoomMode=function(v){var O=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Je=v;else if(isNaN(v)){if(O.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Je=v}else Je=parseInt(v,10)};g.__private__.getZoomMode=function(){return Je};var ze,et=g.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Fe=v};g.__private__.getPageMode=function(){return Fe};var pt=g.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');ze=v};g.__private__.getLayoutMode=function(){return ze},g.__private__.setDisplayMode=g.setDisplayMode=function(v,O,Ae){return Ge(v),pt(O),et(Ae),this};var it={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(v){if(Object.keys(it).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return it[v]},g.__private__.getDocumentProperties=function(){return it},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(v){for(var O in it)it.hasOwnProperty(O)&&v[O]&&(it[O]=v[O]);return this},g.__private__.setDocumentProperty=function(v,O){if(Object.keys(it).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return it[v]=O};var tt,Xe,Ot,Ft,tn,Xt={},cr={},zn=[],Gt={},Wn={},Se={},ut={},Nt=null,at=0,He=[],ht=new iI(g),Bt=t.hotfixes||[],Et={},$t={},or=[],ct=function v(O,Ae,de,ve,Pe,Ve){if(!(this instanceof v))return new v(O,Ae,de,ve,Pe,Ve);isNaN(O)&&(O=1),isNaN(Ae)&&(Ae=0),isNaN(de)&&(de=0),isNaN(ve)&&(ve=1),isNaN(Pe)&&(Pe=0),isNaN(Ve)&&(Ve=0),this._matrix=[O,Ae,de,ve,Pe,Ve]};Object.defineProperty(ct.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ct.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ct.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ct.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ct.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ct.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ct.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ct.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ct.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ct.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ct.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ct.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ct.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ct.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ct.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ct.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ct.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(v)},ct.prototype.multiply=function(v){var O=v.sx*this.sx+v.shy*this.shx,Ae=v.sx*this.shy+v.shy*this.sy,de=v.shx*this.sx+v.sy*this.shx,ve=v.shx*this.shy+v.sy*this.sy,Pe=v.tx*this.sx+v.ty*this.shx+this.tx,Ve=v.tx*this.shy+v.ty*this.sy+this.ty;return new ct(O,Ae,de,ve,Pe,Ve)},ct.prototype.decompose=function(){var v=this.sx,O=this.shy,Ae=this.shx,de=this.sy,ve=this.tx,Pe=this.ty,Ve=Math.sqrt(v*v+O*O),ot=(v/=Ve)*Ae+(O/=Ve)*de;Ae-=v*ot,de-=O*ot;var h=Math.sqrt(Ae*Ae+de*de);return ot/=h,v*(de/=h)<O*(Ae/=h)&&(v=-v,O=-O,ot=-ot,Ve=-Ve),{scale:new ct(Ve,0,0,h,0,0),translate:new ct(1,0,0,1,ve,Pe),rotate:new ct(v,O,-O,v,0,0),skew:new ct(1,0,ot,1,0,0)}},ct.prototype.toString=function(v){return this.join(" ")},ct.prototype.inversed=function(){var v=this.sx,O=this.shy,Ae=this.shx,de=this.sy,ve=this.tx,Pe=this.ty,Ve=1/(v*de-O*Ae),ot=de*Ve,h=-O*Ve,C=-Ae*Ve,P=v*Ve;return new ct(ot,h,C,P,-ot*ve-C*Pe,-h*ve-P*Pe)},ct.prototype.applyToPoint=function(v){var O=v.x*this.sx+v.y*this.shx+this.tx,Ae=v.x*this.shy+v.y*this.sy+this.ty;return new eo(O,Ae)},ct.prototype.applyToRectangle=function(v){var O=this.applyToPoint(v),Ae=this.applyToPoint(new eo(v.x+v.w,v.y+v.h));return new nA(O.x,O.y,Ae.x-O.x,Ae.y-O.y)},ct.prototype.clone=function(){var v=this.sx,O=this.shy,Ae=this.shx,de=this.sy,ve=this.tx,Pe=this.ty;return new ct(v,O,Ae,de,ve,Pe)},g.Matrix=ct;var rn=g.matrixMult=function(v,O){return O.multiply(v)},Pn=new ct(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Pn;var Xr=function(v,O){if(!Wn[v]){var Ae=(O instanceof jA?"Sh":"P")+(Object.keys(Gt).length+1).toString(10);O.id=Ae,Wn[v]=Ae,Gt[Ae]=O,ht.publish("addPattern",O)}};g.ShadingPattern=jA,g.TilingPattern=fc,g.addShadingPattern=function(v,O){return E("addShadingPattern()"),Xr(v,O),this},g.beginTilingPattern=function(v){E("beginTilingPattern()"),sA(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},g.endTilingPattern=function(v,O){E("endTilingPattern()"),O.stream=Te[G].join(`
`),Xr(v,O),ht.publish("endTilingPattern",O),or.pop().restore()};var Jr=g.__private__.newObject=function(){var v=Or();return nn(v,!0),v},Or=g.__private__.newObjectDeferred=function(){return le++,ne[le]=function(){return oe},le},nn=function(v,O){return O=typeof O=="boolean"&&O,ne[v]=oe,O&&re(v+" 0 obj"),v},be=g.__private__.newAdditionalObject=function(){var v={objId:Or(),content:""};return ye.push(v),v},rt=Or(),nt=Or(),Kt=g.__private__.decodeColorString=function(v){var O=v.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length===5&&(O[4]==="k"||O[4]==="K")&&(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var Ae=parseFloat(O[0]);O=[Ae,Ae,Ae,"r"]}for(var de="#",ve=0;ve<3;ve++)de+=("0"+Math.floor(255*parseFloat(O[ve])).toString(16)).slice(-2);return de},Wt=g.__private__.encodeColorString=function(v){var O;typeof v=="string"&&(v={ch1:v});var Ae=v.ch1,de=v.ch2,ve=v.ch3,Pe=v.ch4,Ve=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ae=="string"&&Ae.charAt(0)!=="#"){var ot=new m3(Ae);if(ot.ok)Ae=ot.toHex();else if(!/^\d*\.?\d*$/.test(Ae))throw new Error('Invalid color "'+Ae+'" passed to jsPDF.encodeColorString.')}if(typeof Ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ae)&&(Ae="#"+Ae[1]+Ae[1]+Ae[2]+Ae[2]+Ae[3]+Ae[3]),typeof Ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ae)){var h=parseInt(Ae.substr(1),16);Ae=h>>16&255,de=h>>8&255,ve=255&h}if(de===void 0||Pe===void 0&&Ae===de&&de===ve)if(typeof Ae=="string")O=Ae+" "+Ve[0];else switch(v.precision){case 2:O=j(Ae/255)+" "+Ve[0];break;case 3:default:O=S(Ae/255)+" "+Ve[0]}else if(Pe===void 0||xr(Pe)==="object"){if(Pe&&!isNaN(Pe.a)&&Pe.a===0)return O=["1.","1.","1.",Ve[1]].join(" ");if(typeof Ae=="string")O=[Ae,de,ve,Ve[1]].join(" ");else switch(v.precision){case 2:O=[j(Ae/255),j(de/255),j(ve/255),Ve[1]].join(" ");break;default:case 3:O=[S(Ae/255),S(de/255),S(ve/255),Ve[1]].join(" ")}}else if(typeof Ae=="string")O=[Ae,de,ve,Pe,Ve[2]].join(" ");else switch(v.precision){case 2:O=[j(Ae),j(de),j(ve),j(Pe),Ve[2]].join(" ");break;case 3:default:O=[S(Ae),S(de),S(ve),S(Pe),Ve[2]].join(" ")}return O},_t=g.__private__.getFilters=function(){return a},mt=g.__private__.putStream=function(v){var O=(v=v||{}).data||"",Ae=v.filters||_t(),de=v.alreadyAppliedFilters||[],ve=v.addLength1||!1,Pe=O.length,Ve=v.objectId,ot=function(Mt){return Mt};if(d!==null&&Ve===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(ot=Lr.encryptor(Ve,0));var h={};Ae===!0&&(Ae=["FlateEncode"]);var C=v.additionalKeyValues||[],P=(h=Ut.API.processDataByFilters!==void 0?Ut.API.processDataByFilters(O,Ae):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(de)?de.join(" "):de.toString());if(h.data.length!==0&&(C.push({key:"Length",value:h.data.length}),ve===!0&&C.push({key:"Length1",value:Pe})),P.length!=0)if(P.split("/").length-1==1)C.push({key:"Filter",value:P});else{C.push({key:"Filter",value:"["+P+"]"});for(var $=0;$<C.length;$+=1)if(C[$].key==="DecodeParms"){for(var we=[],Ie=0;Ie<h.reverseChain.split("/").length-1;Ie+=1)we.push("null");we.push(C[$].value),C[$].value="["+we.join(" ")+"]"}}re("<<");for(var qe=0;qe<C.length;qe++)re("/"+C[qe].key+" "+C[qe].value);re(">>"),h.data.length!==0&&(re("stream"),re(ot(h.data)),re("endstream"))},xs=g.__private__.putPage=function(v){var O=v.number,Ae=v.data,de=v.objId,ve=v.contentsObjId;nn(de,!0),re("<</Type /Page"),re("/Parent "+v.rootDictionaryObjId+" 0 R"),re("/Resources "+v.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(T(v.mediaBox.bottomLeftX))+" "+parseFloat(T(v.mediaBox.bottomLeftY))+" "+T(v.mediaBox.topRightX)+" "+T(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&re("/CropBox ["+T(v.cropBox.bottomLeftX)+" "+T(v.cropBox.bottomLeftY)+" "+T(v.cropBox.topRightX)+" "+T(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&re("/BleedBox ["+T(v.bleedBox.bottomLeftX)+" "+T(v.bleedBox.bottomLeftY)+" "+T(v.bleedBox.topRightX)+" "+T(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&re("/TrimBox ["+T(v.trimBox.bottomLeftX)+" "+T(v.trimBox.bottomLeftY)+" "+T(v.trimBox.topRightX)+" "+T(v.trimBox.topRightY)+"]"),v.artBox!==null&&re("/ArtBox ["+T(v.artBox.bottomLeftX)+" "+T(v.artBox.bottomLeftY)+" "+T(v.artBox.topRightX)+" "+T(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&re("/UserUnit "+v.userUnit),ht.publish("putPage",{objId:de,pageContext:He[O],pageNumber:O,page:Ae}),re("/Contents "+ve+" 0 R"),re(">>"),re("endobj");var Pe=Ae.join(`
`);return I===y.ADVANCED&&(Pe+=`
Q`),nn(ve,!0),mt({data:Pe,filters:_t(),objectId:ve}),re("endobj"),de},ha=g.__private__.putPages=function(){var v,O,Ae=[];for(v=1;v<=at;v++)He[v].objId=Or(),He[v].contentsObjId=Or();for(v=1;v<=at;v++)Ae.push(xs({number:v,data:Te[v],objId:He[v].objId,contentsObjId:He[v].contentsObjId,mediaBox:He[v].mediaBox,cropBox:He[v].cropBox,bleedBox:He[v].bleedBox,trimBox:He[v].trimBox,artBox:He[v].artBox,userUnit:He[v].userUnit,rootDictionaryObjId:rt,resourceDictionaryObjId:nt}));nn(rt,!0),re("<</Type /Pages");var de="/Kids [";for(O=0;O<at;O++)de+=Ae[O]+" 0 R ";re(de+"]"),re("/Count "+at),re(">>"),re("endobj"),ht.publish("postPutPages")},fa=function(v){ht.publish("putFont",{font:v,out:re,newObject:Jr,putStream:mt}),v.isAlreadyPutted!==!0&&(v.objectNumber=Jr(),re("<<"),re("/Type /Font"),re("/BaseFont /"+Ku(v.postScriptName)),re("/Subtype /Type1"),typeof v.encoding=="string"&&re("/Encoding /"+v.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},pa=function(){for(var v in Xt)Xt.hasOwnProperty(v)&&(f===!1||f===!0&&m.hasOwnProperty(v))&&fa(Xt[v])},qa=function(v){v.objectNumber=Jr();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[T(v.x),T(v.y),T(v.x+v.width),T(v.y+v.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Ae=v.pages[1].join(`
`);mt({data:Ae,additionalKeyValues:O,objectId:v.objectNumber}),re("endobj")},Ga=function(){for(var v in Et)Et.hasOwnProperty(v)&&qa(Et[v])},zc=function(v,O){var Ae,de=[],ve=1/(O-1);for(Ae=0;Ae<1;Ae+=ve)de.push(Ae);if(de.push(1),v[0].offset!=0){var Pe={offset:0,color:v[0].color};v.unshift(Pe)}if(v[v.length-1].offset!=1){var Ve={offset:1,color:v[v.length-1].color};v.push(Ve)}for(var ot="",h=0,C=0;C<de.length;C++){for(Ae=de[C];Ae>v[h+1].offset;)h++;var P=v[h].offset,$=(Ae-P)/(v[h+1].offset-P),we=v[h].color,Ie=v[h+1].color;ot+=J(Math.round((1-$)*we[0]+$*Ie[0]).toString(16))+J(Math.round((1-$)*we[1]+$*Ie[1]).toString(16))+J(Math.round((1-$)*we[2]+$*Ie[2]).toString(16))}return ot.trim()},Ko=function(v,O){O||(O=21);var Ae=Jr(),de=zc(v.colors,O),ve=[];ve.push({key:"FunctionType",value:"0"}),ve.push({key:"Domain",value:"[0.0 1.0]"}),ve.push({key:"Size",value:"["+O+"]"}),ve.push({key:"BitsPerSample",value:"8"}),ve.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ve.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),mt({data:de,additionalKeyValues:ve,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ae}),re("endobj"),v.objectNumber=Jr(),re("<< /ShadingType "+v.type),re("/ColorSpace /DeviceRGB");var Pe="/Coords ["+T(parseFloat(v.coords[0]))+" "+T(parseFloat(v.coords[1]))+" ";v.type===2?Pe+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3])):Pe+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3]))+" "+T(parseFloat(v.coords[4]))+" "+T(parseFloat(v.coords[5])),re(Pe+="]"),v.matrix&&re("/Matrix ["+v.matrix.toString()+"]"),re("/Function "+Ae+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},Wc=function(v,O){var Ae=Or(),de=Jr();O.push({resourcesOid:Ae,objectOid:de}),v.objectNumber=de;var ve=[];ve.push({key:"Type",value:"/Pattern"}),ve.push({key:"PatternType",value:"1"}),ve.push({key:"PaintType",value:"1"}),ve.push({key:"TilingType",value:"1"}),ve.push({key:"BBox",value:"["+v.boundingBox.map(T).join(" ")+"]"}),ve.push({key:"XStep",value:T(v.xStep)}),ve.push({key:"YStep",value:T(v.yStep)}),ve.push({key:"Resources",value:Ae+" 0 R"}),v.matrix&&ve.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),mt({data:v.stream,additionalKeyValues:ve,objectId:v.objectNumber}),re("endobj")},ma=function(v){var O;for(O in Gt)Gt.hasOwnProperty(O)&&(Gt[O]instanceof jA?Ko(Gt[O]):Gt[O]instanceof fc&&Wc(Gt[O],v))},ga=function(v){for(var O in v.objectNumber=Jr(),re("<<"),v)switch(O){case"opacity":re("/ca "+j(v[O]));break;case"stroke-opacity":re("/CA "+j(v[O]))}re(">>"),re("endobj")},Ri=function(){var v;for(v in Se)Se.hasOwnProperty(v)&&ga(Se[v])},za=function(){for(var v in re("/XObject <<"),Et)Et.hasOwnProperty(v)&&Et[v].objectNumber>=0&&re("/"+v+" "+Et[v].objectNumber+" 0 R");ht.publish("putXobjectDict"),re(">>")},Yd=function(){Lr.oid=Jr(),re("<<"),re("/Filter /Standard"),re("/V "+Lr.v),re("/R "+Lr.r),re("/U <"+Lr.toHexString(Lr.U)+">"),re("/O <"+Lr.toHexString(Lr.O)+">"),re("/P "+Lr.P),re(">>"),re("endobj")},Sl=function(){for(var v in re("/Font <<"),Xt)Xt.hasOwnProperty(v)&&(f===!1||f===!0&&m.hasOwnProperty(v))&&re("/"+v+" "+Xt[v].objectNumber+" 0 R");re(">>")},$c=function(){if(Object.keys(Gt).length>0){for(var v in re("/Shading <<"),Gt)Gt.hasOwnProperty(v)&&Gt[v]instanceof jA&&Gt[v].objectNumber>=0&&re("/"+v+" "+Gt[v].objectNumber+" 0 R");ht.publish("putShadingPatternDict"),re(">>")}},Wa=function(v){if(Object.keys(Gt).length>0){for(var O in re("/Pattern <<"),Gt)Gt.hasOwnProperty(O)&&Gt[O]instanceof g.TilingPattern&&Gt[O].objectNumber>=0&&Gt[O].objectNumber<v&&re("/"+O+" "+Gt[O].objectNumber+" 0 R");ht.publish("putTilingPatternDict"),re(">>")}},Fl=function(){if(Object.keys(Se).length>0){var v;for(v in re("/ExtGState <<"),Se)Se.hasOwnProperty(v)&&Se[v].objectNumber>=0&&re("/"+v+" "+Se[v].objectNumber+" 0 R");ht.publish("putGStateDict"),re(">>")}},Pr=function(v){nn(v.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Sl(),$c(),Wa(v.objectOid),Fl(),za(),re(">>"),re("endobj")},Tl=function(){var v=[];pa(),Ri(),Ga(),ma(v),ht.publish("putResources"),v.forEach(Pr),Pr({resourcesOid:nt,objectOid:Number.MAX_SAFE_INTEGER}),ht.publish("postPutResources")},Ul=function(){ht.publish("putAdditionalObjects");for(var v=0;v<ye.length;v++){var O=ye[v];nn(O.objId,!0),re(O.content),re("endobj")}ht.publish("postPutAdditionalObjects")},Xc=function(v){cr[v.fontName]=cr[v.fontName]||{},cr[v.fontName][v.fontStyle]=v.id},Ql=function(v,O,Ae,de,ve){var Pe={id:"F"+(Object.keys(Xt).length+1).toString(10),postScriptName:v,fontName:O,fontStyle:Ae,encoding:de,isStandardFont:ve||!1,metadata:{}};return ht.publish("addFont",{font:Pe,instance:this}),Xt[Pe.id]=Pe,Xc(Pe),Pe.id},Jc=function(v){for(var O=0,Ae=ke.length;O<Ae;O++){var de=Ql.call(this,v[O][0],v[O][1],v[O][2],ke[O][3],!0);f===!1&&(m[de]=!0);var ve=v[O][0].split("-");Xc({id:de,fontName:ve[0],fontStyle:ve[1]||""})}ht.publish("addFonts",{fonts:Xt,dictionary:cr})},Rs=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(de){var O=de.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var Ae="Error in function "+O.split(`
`)[0].split("<")[0]+": "+de.message;if(!kt.console)throw new Error(Ae);kt.console.error(Ae,de),kt.alert&&alert(Ae)}},v.foo.bar=v,v.foo},qo=function(v,O){var Ae,de,ve,Pe,Ve,ot,h,C,P;if(ve=(O=O||{}).sourceEncoding||"Unicode",Ve=O.outputEncoding,(O.autoencode||Ve)&&Xt[tt].metadata&&Xt[tt].metadata[ve]&&Xt[tt].metadata[ve].encoding&&(Pe=Xt[tt].metadata[ve].encoding,!Ve&&Xt[tt].encoding&&(Ve=Xt[tt].encoding),!Ve&&Pe.codePages&&(Ve=Pe.codePages[0]),typeof Ve=="string"&&(Ve=Pe[Ve]),Ve)){for(h=!1,ot=[],Ae=0,de=v.length;Ae<de;Ae++)(C=Ve[v.charCodeAt(Ae)])?ot.push(String.fromCharCode(C)):ot.push(v[Ae]),ot[Ae].charCodeAt(0)>>8&&(h=!0);v=ot.join("")}for(Ae=v.length;h===void 0&&Ae!==0;)v.charCodeAt(Ae-1)>>8&&(h=!0),Ae--;if(!h)return v;for(ot=O.noBOM?[]:[254,255],Ae=0,de=v.length;Ae<de;Ae++){if((P=(C=v.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ot.push(P),ot.push(C-(P<<8))}return String.fromCharCode.apply(void 0,ot)},sn=g.__private__.pdfEscape=g.pdfEscape=function(v,O){return qo(v,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bs=g.__private__.beginPage=function(v){Te[++at]=[],He[at]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Pl(at),me(Te[G])},$a=function(v,O){var Ae,de,ve;switch(r=O||r,typeof v=="string"&&(Ae=w(v.toLowerCase()),Array.isArray(Ae)&&(de=Ae[0],ve=Ae[1])),Array.isArray(v)&&(de=v[0]*Xe,ve=v[1]*Xe),isNaN(de)&&(de=s[0],ve=s[1]),(de>14400||ve>14400)&&(Sr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),de=Math.min(14400,de),ve=Math.min(14400,ve)),s=[de,ve],r.substr(0,1)){case"l":ve>de&&(s=[ve,de]);break;case"p":de>ve&&(s=[ve,de])}bs(s),jl(Dl),re($n),Hl!==0&&re(Hl+" J"),rA!==0&&re(rA+" j"),ht.publish("addPage",{pageNumber:at})},Go=function(v){v>0&&v<=at&&(Te.splice(v,1),He.splice(v,1),at--,G>at&&(G=at),this.setPage(G))},Pl=function(v){v>0&&v<=at&&(G=v)},gr=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Te.length-1},Xa=function(v,O,Ae){var de,ve=void 0;return Ae=Ae||{},v=v!==void 0?v:Xt[tt].fontName,O=O!==void 0?O:Xt[tt].fontStyle,de=v.toLowerCase(),cr[de]!==void 0&&cr[de][O]!==void 0?ve=cr[de][O]:cr[v]!==void 0&&cr[v][O]!==void 0?ve=cr[v][O]:Ae.disableWarning===!1&&Sr.warn("Unable to look up font label for font '"+v+"', '"+O+"'. Refer to getFontList() for available fonts."),ve||Ae.noFallback||(ve=cr.times[O])==null&&(ve=cr.times.normal),ve},Ja=g.__private__.putInfo=function(){var v=Jr(),O=function(de){return de};for(var Ae in d!==null&&(O=Lr.encryptor(v,0)),re("<<"),re("/Producer ("+sn(O("jsPDF "+Ut.version))+")"),it)it.hasOwnProperty(Ae)&&it[Ae]&&re("/"+Ae.substr(0,1).toUpperCase()+Ae.substr(1)+" ("+sn(O(it[Ae]))+")");re("/CreationDate ("+sn(O(ue))+")"),re(">>"),re("endobj")},Di=g.__private__.putCatalog=function(v){var O=(v=v||{}).rootDictionaryObjId||rt;switch(Jr(),re("<<"),re("/Type /Catalog"),re("/Pages "+O+" 0 R"),Je||(Je="fullwidth"),Je){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ae=""+Je;Ae.substr(Ae.length-1)==="%"&&(Je=parseInt(Je)/100),typeof Je=="number"&&re("/OpenAction [3 0 R /XYZ null null "+j(Je)+"]")}switch(ze||(ze="continuous"),ze){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}Fe&&re("/PageMode /"+Fe),ht.publish("putCatalog"),re(">>"),re("endobj")},Zd=g.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(le+1)),re("/Root "+le+" 0 R"),re("/Info "+(le-1)+" 0 R"),d!==null&&re("/Encrypt "+Lr.oid+" 0 R"),re("/ID [ <"+ie+"> <"+ie+"> ]"),re(">>")},Yc=g.__private__.putHeader=function(){re("%PDF-"+B),re("%")},eh=g.__private__.putXRef=function(){var v="0000000000";re("xref"),re("0 "+(le+1)),re("0000000000 65535 f ");for(var O=1;O<=le;O++)typeof ne[O]=="function"?re((v+ne[O]()).slice(-10)+" 00000 n "):ne[O]!==void 0?re((v+ne[O]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},ji=g.__private__.buildDocument=function(){Ce(),me(ee),ht.publish("buildDocument"),Yc(),ha(),Ul(),Tl(),d!==null&&Yd(),Ja(),Di();var v=oe;return eh(),Zd(),re("startxref"),re(""+v),re("%%EOF"),me(Te[G]),ee.join(`
`)},zo=g.__private__.getBlob=function(v){return new Blob([Oe(v)],{type:"application/pdf"})},Wo=g.output=g.__private__.output=Rs(function(v,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",v){case void 0:return ji();case"save":g.save(O.filename);break;case"arraybuffer":return Oe(ji());case"blob":return zo(ji());case"bloburi":case"bloburl":if(kt.URL!==void 0&&typeof kt.URL.createObjectURL=="function")return kt.URL&&kt.URL.createObjectURL(zo(ji()))||void 0;Sr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ae="",de=ji();try{Ae=J2(de)}catch{Ae=J2(unescape(encodeURIComponent(de)))}return"data:application/pdf;filename="+O.filename+";base64,"+Ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var ve="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Pe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(ve=O.pdfObjectUrl,Pe="");var Ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ve+'"'+Pe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",ot=kt.open();return ot!==null&&ot.document.write(Ve),ot}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',C=kt.open();if(C!==null){C.document.write(h);var P=this;C.document.documentElement.querySelector("#pdfViewer").onload=function(){C.document.title=O.filename,C.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(P.output("bloburl"))}}return C}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var $='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',we=kt.open();if(we!==null&&(we.document.write($),we.document.title=O.filename),we||typeof safari>"u")return we;break;case"datauri":case"dataurl":return kt.document.location.href=this.output("datauristring",O);default:return null}}),wa=function(v){return Array.isArray(Bt)===!0&&Bt.indexOf(v)>-1};switch(n){case"pt":Xe=1;break;case"mm":Xe=72/25.4;break;case"cm":Xe=72/2.54;break;case"in":Xe=72;break;case"px":Xe=wa("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xe=12;break;case"ex":Xe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Xe=n}var Lr=null;pe(),W();var Zc=function(v){return d!==null?Lr.encryptor(v,0):function(O){return O}},Ll=g.__private__.getPageInfo=g.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:He[v].objId,pageNumber:v,pageContext:He[v]}},Rt=g.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in He)if(He[O].objId===v)break;return Ll(O)},va=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:He[G].objId,pageNumber:G,pageContext:He[G]}};g.addPage=function(){return $a.apply(this,arguments),this},g.setPage=function(){return Pl.apply(this,arguments),me.call(this,Te[G]),this},g.insertPage=function(v){return this.addPage(),this.movePage(G,v),this},g.movePage=function(v,O){var Ae,de;if(v>O){Ae=Te[v],de=He[v];for(var ve=v;ve>O;ve--)Te[ve]=Te[ve-1],He[ve]=He[ve-1];Te[O]=Ae,He[O]=de,this.setPage(O)}else if(v<O){Ae=Te[v],de=He[v];for(var Pe=v;Pe<O;Pe++)Te[Pe]=Te[Pe+1],He[Pe]=He[Pe+1];Te[O]=Ae,He[O]=de,this.setPage(O)}return this},g.deletePage=function(){return Go.apply(this,arguments),this},g.__private__.text=g.text=function(v,O,Ae,de,ve){var Pe,Ve,ot,h,C,P,$,we,Ie,qe=(de=de||{}).scope||this;if(typeof v=="number"&&typeof O=="number"&&(typeof Ae=="string"||Array.isArray(Ae))){var Mt=Ae;Ae=O,O=v,v=Mt}if(arguments[3]instanceof ct?(E("The transform parameter of text() with a Matrix value"),Ie=ve):(ot=arguments[4],h=arguments[5],xr($=arguments[3])==="object"&&$!==null||(typeof ot=="string"&&(h=ot,ot=null),typeof $=="string"&&(h=$,$=null),typeof $=="number"&&(ot=$,$=null),de={flags:$,angle:ot,align:h})),isNaN(O)||isNaN(Ae)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return qe;var tr="",Ht=!1,fr=typeof de.lineHeightFactor=="number"?de.lineHeightFactor:hr,Ir=qe.internal.scaleFactor;function Ki(Fr){return Fr=Fr.split("	").join(Array(de.TabLen||9).join(" ")),sn(Fr,$)}function Xn(Fr){for(var Tr,dn=Fr.concat(),In=[],io=dn.length;io--;)typeof(Tr=dn.shift())=="string"?In.push(Tr):Array.isArray(Fr)&&(Tr.length===1||Tr[1]===void 0&&Tr[2]===void 0)?In.push(Tr[0]):In.push([Tr[0],Tr[1],Tr[2]]);return In}function ba(Fr,Tr){var dn;if(typeof Fr=="string")dn=Tr(Fr)[0];else if(Array.isArray(Fr)){for(var In,io,lh=Fr.concat(),du=[],Xp=lh.length;Xp--;)typeof(In=lh.shift())=="string"?du.push(Tr(In)[0]):Array.isArray(In)&&typeof In[0]=="string"&&(io=Tr(In[0],In[1],In[2]),du.push([io[0],io[1],io[2]]));dn=du}return dn}var Ca=!1,rh=!0;if(typeof v=="string")Ca=!0;else if(Array.isArray(v)){var nh=v.concat();Ve=[];for(var su,Jn=nh.length;Jn--;)(typeof(su=nh.shift())!="string"||Array.isArray(su)&&typeof su[0]!="string")&&(rh=!1);Ca=rh}if(Ca===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var iu=Ke/qe.internal.scaleFactor,au=iu*(fr-1);switch(de.baseline){case"bottom":Ae-=au;break;case"top":Ae+=iu-au;break;case"hanging":Ae+=iu-2*au;break;case"middle":Ae+=iu/2-au}if((P=de.maxWidth||0)>0&&(typeof v=="string"?v=qe.splitTextToSize(v,P):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Fr,Tr){return Fr.concat(qe.splitTextToSize(Tr,P))},[]))),Pe={text:v,x:O,y:Ae,options:de,mutex:{pdfEscape:sn,activeFontKey:tt,fonts:Xt,activeFontSize:Ke}},ht.publish("preProcessText",Pe),v=Pe.text,ot=(de=Pe.options).angle,!(Ie instanceof ct)&&ot&&typeof ot=="number"){ot*=Math.PI/180,de.rotationDirection===0&&(ot=-ot),I===y.ADVANCED&&(ot=-ot);var ou=Math.cos(ot),sh=Math.sin(ot);Ie=new ct(ou,sh,-sh,ou,0,0)}else ot&&ot instanceof ct&&(Ie=ot);I!==y.ADVANCED||Ie||(Ie=Pn),(C=de.charSpace||Za)!==void 0&&(tr+=T(N(C))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(we=de.horizontalScale)!==void 0&&(tr+=T(100*we)+` Tz
`),de.lang;var Ds=-1,hv=de.renderingMode!==void 0?de.renderingMode:de.stroke,ih=qe.internal.getCurrentPageInfo().pageContext;switch(hv){case 0:case!1:case"fill":Ds=0;break;case 1:case!0:case"stroke":Ds=1;break;case 2:case"fillThenStroke":Ds=2;break;case 3:case"invisible":Ds=3;break;case 4:case"fillAndAddForClipping":Ds=4;break;case 5:case"strokeAndAddPathForClipping":Ds=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ds=6;break;case 7:case"addToPathForClipping":Ds=7}var Gp=ih.usedRenderingMode!==void 0?ih.usedRenderingMode:-1;Ds!==-1?tr+=Ds+` Tr
`:Gp!==-1&&(tr+=`0 Tr
`),Ds!==-1&&(ih.usedRenderingMode=Ds),h=de.align||"left";var mi,Au=Ke*fr,zp=qe.internal.pageSize.getWidth(),Wp=Xt[tt];C=de.charSpace||Za,P=de.maxWidth||0,$=Object.assign({autoencode:!0,noBOM:!0},de.flags);var oA=[],Vl=function(Fr){return qe.getStringUnitWidth(Fr,{font:Wp,charSpace:C,fontSize:Ke,doKerning:!1})*Ke/Ir};if(Object.prototype.toString.call(v)==="[object Array]"){var js;Ve=Xn(v),h!=="left"&&(mi=Ve.map(Vl));var Cs,AA=0;if(h==="right"){O-=mi[0],v=[],Jn=Ve.length;for(var ro=0;ro<Jn;ro++)ro===0?(Cs=Zs(O),js=_n(Ae)):(Cs=N(AA-mi[ro]),js=-Au),v.push([Ve[ro],Cs,js]),AA=mi[ro]}else if(h==="center"){O-=mi[0]/2,v=[],Jn=Ve.length;for(var no=0;no<Jn;no++)no===0?(Cs=Zs(O),js=_n(Ae)):(Cs=N((AA-mi[no])/2),js=-Au),v.push([Ve[no],Cs,js]),AA=mi[no]}else if(h==="left"){v=[],Jn=Ve.length;for(var lu=0;lu<Jn;lu++)v.push(Ve[lu])}else if(h==="justify"&&Wp.encoding==="Identity-H"){v=[],Jn=Ve.length,P=P!==0?P:zp;for(var so=0,un=0;un<Jn;un++)if(js=un===0?_n(Ae):-Au,Cs=un===0?Zs(O):so,un<Jn-1){var ah=N((P-mi[un])/(Ve[un].split(" ").length-1)),Es=Ve[un].split(" ");v.push([Es[0]+" ",Cs,js]),so=0;for(var gi=1;gi<Es.length;gi++){var cu=(Vl(Es[gi-1]+" "+Es[gi])-Vl(Es[gi]))*Ir+ah;gi==Es.length-1?v.push([Es[gi],cu,0]):v.push([Es[gi]+" ",cu,0]),so-=cu}}else v.push([Ve[un],Cs,js]);v.push(["",so,0])}else{if(h!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Jn=Ve.length,P=P!==0?P:zp,un=0;un<Jn;un++)js=un===0?_n(Ae):-Au,Cs=un===0?Zs(O):0,un<Jn-1?oA.push(T(N((P-mi[un])/(Ve[un].split(" ").length-1)))):oA.push(0),v.push([Ve[un],Cs,js])}}var $p=typeof de.R2L=="boolean"?de.R2L:wt;$p===!0&&(v=ba(v,function(Fr,Tr,dn){return[Fr.split("").reverse().join(""),Tr,dn]})),Pe={text:v,x:O,y:Ae,options:de,mutex:{pdfEscape:sn,activeFontKey:tt,fonts:Xt,activeFontSize:Ke}},ht.publish("postProcessText",Pe),v=Pe.text,Ht=Pe.mutex.isHex||!1;var oh=Xt[tt].encoding;oh!=="WinAnsiEncoding"&&oh!=="StandardEncoding"||(v=ba(v,function(Fr,Tr,dn){return[Ki(Fr),Tr,dn]})),Ve=Xn(v),v=[];for(var Kl,ql,lA,Gl=0,uu=1,zl=Array.isArray(Ve[0])?uu:Gl,cA="",Ah=function(Fr,Tr,dn){var In="";return dn instanceof ct?(dn=typeof de.angle=="number"?rn(dn,new ct(1,0,0,1,Fr,Tr)):rn(new ct(1,0,0,1,Fr,Tr),dn),I===y.ADVANCED&&(dn=rn(new ct(1,0,0,-1,0,0),dn)),In=dn.join(" ")+` Tm
`):In=T(Fr)+" "+T(Tr)+` Td
`,In},wi=0;wi<Ve.length;wi++){switch(cA="",zl){case uu:lA=(Ht?"<":"(")+Ve[wi][0]+(Ht?">":")"),Kl=parseFloat(Ve[wi][1]),ql=parseFloat(Ve[wi][2]);break;case Gl:lA=(Ht?"<":"(")+Ve[wi]+(Ht?">":")"),Kl=Zs(O),ql=_n(Ae)}oA!==void 0&&oA[wi]!==void 0&&(cA=oA[wi]+` Tw
`),wi===0?v.push(cA+Ah(Kl,ql,Ie)+lA):zl===Gl?v.push(cA+lA):zl===uu&&v.push(cA+Ah(Kl,ql,Ie)+lA)}v=zl===Gl?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var vi=`BT
/`;return vi+=tt+" "+Ke+` Tf
`,vi+=T(Ke*fr)+` TL
`,vi+=Hi+`
`,vi+=tr,vi+=v,re(vi+="ET"),m[tt]=!0,qe};var th=g.__private__.clip=g.clip=function(v){return re(v==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return th("evenodd")},g.__private__.discardPath=g.discardPath=function(){return re("n"),this};var pi=g.__private__.isValidStyle=function(v){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(O=!0),O};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(v){return pi(v)&&(c=v),this};var eu=g.__private__.getStyle=g.getStyle=function(v){var O=c;switch(v){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=v}return O},Js=g.close=function(){return re("h"),this};g.stroke=function(){return re("S"),this},g.fill=function(v){return $o("f",v),this},g.fillEvenOdd=function(v){return $o("f*",v),this},g.fillStroke=function(v){return $o("B",v),this},g.fillStrokeEvenOdd=function(v){return $o("B*",v),this};var $o=function(v,O){xr(O)==="object"?Jo(O,v):re(v)},kl=function(v){v===null||I===y.ADVANCED&&v===void 0||(v=eu(v),re(v))};function Xo(v,O,Ae,de,ve){var Pe=new fc(O||this.boundingBox,Ae||this.xStep,de||this.yStep,this.gState,ve||this.matrix);Pe.stream=this.stream;var Ve=v+"$$"+this.cloneIndex+++"$$";return Xr(Ve,Pe),Pe}var Jo=function(v,O){var Ae=Wn[v.key],de=Gt[Ae];if(de instanceof jA)re("q"),re(tu(O)),de.gState&&g.setGState(de.gState),re(v.matrix.toString()+" cm"),re("/"+Ae+" sh"),re("Q");else if(de instanceof fc){var ve=new ct(1,0,0,-1,0,ls());v.matrix&&(ve=ve.multiply(v.matrix||Pn),Ae=Xo.call(de,v.key,v.boundingBox,v.xStep,v.yStep,ve).id),re("q"),re("/Pattern cs"),re("/"+Ae+" scn"),de.gState&&g.setGState(de.gState),re(O),re("Q")}},tu=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Oi=g.moveTo=function(v,O){return re(T(N(v))+" "+T(Z(O))+" m"),this},Ys=g.lineTo=function(v,O){return re(T(N(v))+" "+T(Z(O))+" l"),this},Mi=g.curveTo=function(v,O,Ae,de,ve,Pe){return re([T(N(v)),T(Z(O)),T(N(Ae)),T(Z(de)),T(N(ve)),T(Z(Pe)),"c"].join(" ")),this};g.__private__.line=g.line=function(v,O,Ae,de,ve){if(isNaN(v)||isNaN(O)||isNaN(Ae)||isNaN(de)||!pi(ve))throw new Error("Invalid arguments passed to jsPDF.line");return I===y.COMPAT?this.lines([[Ae-v,de-O]],v,O,[1,1],ve||"S"):this.lines([[Ae-v,de-O]],v,O,[1,1]).stroke()},g.__private__.lines=g.lines=function(v,O,Ae,de,ve,Pe){var Ve,ot,h,C,P,$,we,Ie,qe,Mt,tr,Ht;if(typeof v=="number"&&(Ht=Ae,Ae=O,O=v,v=Ht),de=de||[1,1],Pe=Pe||!1,isNaN(O)||isNaN(Ae)||!Array.isArray(v)||!Array.isArray(de)||!pi(ve)||typeof Pe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Oi(O,Ae),Ve=de[0],ot=de[1],C=v.length,Mt=O,tr=Ae,h=0;h<C;h++)(P=v[h]).length===2?(Mt=P[0]*Ve+Mt,tr=P[1]*ot+tr,Ys(Mt,tr)):($=P[0]*Ve+Mt,we=P[1]*ot+tr,Ie=P[2]*Ve+Mt,qe=P[3]*ot+tr,Mt=P[4]*Ve+Mt,tr=P[5]*ot+tr,Mi($,we,Ie,qe,Mt,tr));return Pe&&Js(),kl(ve),this},g.path=function(v){for(var O=0;O<v.length;O++){var Ae=v[O],de=Ae.c;switch(Ae.op){case"m":Oi(de[0],de[1]);break;case"l":Ys(de[0],de[1]);break;case"c":Mi.apply(this,de);break;case"h":Js()}}return this},g.__private__.rect=g.rect=function(v,O,Ae,de,ve){if(isNaN(v)||isNaN(O)||isNaN(Ae)||isNaN(de)||!pi(ve))throw new Error("Invalid arguments passed to jsPDF.rect");return I===y.COMPAT&&(de=-de),re([T(N(v)),T(Z(O)),T(N(Ae)),T(N(de)),"re"].join(" ")),kl(ve),this},g.__private__.triangle=g.triangle=function(v,O,Ae,de,ve,Pe,Ve){if(isNaN(v)||isNaN(O)||isNaN(Ae)||isNaN(de)||isNaN(ve)||isNaN(Pe)||!pi(Ve))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ae-v,de-O],[ve-Ae,Pe-de],[v-ve,O-Pe]],v,O,[1,1],Ve,!0),this},g.__private__.roundedRect=g.roundedRect=function(v,O,Ae,de,ve,Pe,Ve){if(isNaN(v)||isNaN(O)||isNaN(Ae)||isNaN(de)||isNaN(ve)||isNaN(Pe)||!pi(Ve))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ot=4/3*(Math.SQRT2-1);return ve=Math.min(ve,.5*Ae),Pe=Math.min(Pe,.5*de),this.lines([[Ae-2*ve,0],[ve*ot,0,ve,Pe-Pe*ot,ve,Pe],[0,de-2*Pe],[0,Pe*ot,-ve*ot,Pe,-ve,Pe],[2*ve-Ae,0],[-ve*ot,0,-ve,-Pe*ot,-ve,-Pe],[0,2*Pe-de],[0,-Pe*ot,ve*ot,-Pe,ve,-Pe]],v+ve,O,[1,1],Ve,!0),this},g.__private__.ellipse=g.ellipse=function(v,O,Ae,de,ve){if(isNaN(v)||isNaN(O)||isNaN(Ae)||isNaN(de)||!pi(ve))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Pe=4/3*(Math.SQRT2-1)*Ae,Ve=4/3*(Math.SQRT2-1)*de;return Oi(v+Ae,O),Mi(v+Ae,O-Ve,v+Pe,O-de,v,O-de),Mi(v-Pe,O-de,v-Ae,O-Ve,v-Ae,O),Mi(v-Ae,O+Ve,v-Pe,O+de,v,O+de),Mi(v+Pe,O+de,v+Ae,O+Ve,v+Ae,O),kl(ve),this},g.__private__.circle=g.circle=function(v,O,Ae,de){if(isNaN(v)||isNaN(O)||isNaN(Ae)||!pi(de))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,O,Ae,Ae,de)},g.setFont=function(v,O,Ae){return Ae&&(O=k(O,Ae)),tt=Xa(v,O,{disableWarning:!1}),this};var Rl=g.__private__.getFont=g.getFont=function(){return Xt[Xa.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var v,O,Ae={};for(v in cr)if(cr.hasOwnProperty(v))for(O in Ae[v]=[],cr[v])cr[v].hasOwnProperty(O)&&Ae[v].push(O);return Ae},g.addFont=function(v,O,Ae,de,ve){var Pe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Pe.indexOf(arguments[3])!==-1?ve=arguments[3]:arguments[3]&&Pe.indexOf(arguments[3])==-1&&(Ae=k(Ae,de)),ve=ve||"Identity-H",Ql.call(this,v,O,Ae,ve)};var hr,Dl=t.lineWidth||.200025,Yo=g.__private__.getLineWidth=g.getLineWidth=function(){return Dl},jl=g.__private__.setLineWidth=g.setLineWidth=function(v){return Dl=v,re(T(N(v))+" w"),this};g.__private__.setLineDash=Ut.API.setLineDash=Ut.API.setLineDashPattern=function(v,O){if(v=v||[],O=O||0,isNaN(O)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Ae){return T(N(Ae))}).join(" "),O=T(N(O)),re("["+v+"] "+O+" d"),this};var Ol=g.__private__.getLineHeight=g.getLineHeight=function(){return Ke*hr};g.__private__.getLineHeight=g.getLineHeight=function(){return Ke*hr};var Ml=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(hr=v),this},Ya=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return hr};Ml(t.lineHeight);var Zs=g.__private__.getHorizontalCoordinate=function(v){return N(v)},_n=g.__private__.getVerticalCoordinate=function(v){return I===y.ADVANCED?v:He[G].mediaBox.topRightY-He[G].mediaBox.bottomLeftY-N(v)},ru=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(v){return T(Zs(v))},ya=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(v){return T(_n(v))},$n=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Kt($n)},g.__private__.setStrokeColor=g.setDrawColor=function(v,O,Ae,de){return $n=Wt({ch1:v,ch2:O,ch3:Ae,ch4:de,pdfColorType:"draw",precision:2}),re($n),this};var Zo=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Kt(Zo)},g.__private__.setFillColor=g.setFillColor=function(v,O,Ae,de){return Zo=Wt({ch1:v,ch2:O,ch3:Ae,ch4:de,pdfColorType:"fill",precision:2}),re(Zo),this};var Hi=t.textColor||"0 g",eA=g.__private__.getTextColor=g.getTextColor=function(){return Kt(Hi)};g.__private__.setTextColor=g.setTextColor=function(v,O,Ae,de){return Hi=Wt({ch1:v,ch2:O,ch3:Ae,ch4:de,pdfColorType:"text",precision:3}),this};var Za=t.charSpace,tA=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Za||0)};g.__private__.setCharSpace=g.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Za=v,this};var Hl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(v){var O=g.CapJoinStyles[v];if(O===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hl=O,re(O+" J"),this};var rA=0;g.__private__.setLineJoin=g.setLineJoin=function(v){var O=g.CapJoinStyles[v];if(O===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return rA=O,re(O+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(T(N(v))+" M"),this},g.GState=wp,g.setGState=function(v){(v=typeof v=="string"?Se[ut[v]]:Ba(null,v)).equals(Nt)||(re("/"+v.id+" gs"),Nt=v)};var Ba=function(v,O){if(!v||!ut[v]){var Ae=!1;for(var de in Se)if(Se.hasOwnProperty(de)&&Se[de].equals(O)){Ae=!0;break}if(Ae)O=Se[de];else{var ve="GS"+(Object.keys(Se).length+1).toString(10);Se[ve]=O,O.id=ve}return v&&(ut[v]=O.id),ht.publish("addGState",O),O}};g.addGState=function(v,O){return Ba(v,O),this},g.saveGraphicsState=function(){return re("q"),zn.push({key:tt,size:Ke,color:Hi}),this},g.restoreGraphicsState=function(){re("Q");var v=zn.pop();return tt=v.key,Ke=v.size,Hi=v.color,Nt=null,this},g.setCurrentTransformationMatrix=function(v){return re(v.toString()+" cm"),this},g.comment=function(v){return re("#"+v),this};var eo=function(v,O){var Ae=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ae},set:function(Pe){isNaN(Pe)||(Ae=parseFloat(Pe))}});var de=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return de},set:function(Pe){isNaN(Pe)||(de=parseFloat(Pe))}});var ve="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ve},set:function(Pe){ve=Pe.toString()}}),this},nA=function(v,O,Ae,de){eo.call(this,v,O),this.type="rect";var ve=Ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ve},set:function(Ve){isNaN(Ve)||(ve=parseFloat(Ve))}});var Pe=de||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Pe},set:function(Ve){isNaN(Ve)||(Pe=parseFloat(Ve))}}),this},to=function(){this.page=at,this.currentPage=G,this.pages=Te.slice(0),this.pagesContext=He.slice(0),this.x=Ot,this.y=Ft,this.matrix=tn,this.width=xa(G),this.height=ls(G),this.outputDestination=xe,this.id="",this.objectNumber=-1};to.prototype.restore=function(){at=this.page,G=this.currentPage,He=this.pagesContext,Te=this.pages,Ot=this.x,Ft=this.y,tn=this.matrix,iA(G,this.width),aA(G,this.height),xe=this.outputDestination};var sA=function(v,O,Ae,de,ve){or.push(new to),at=G=0,Te=[],Ot=v,Ft=O,tn=ve,bs([Ae,de])},nu=function(v){if($t[v])or.pop().restore();else{var O=new to,Ae="Xo"+(Object.keys(Et).length+1).toString(10);O.id=Ae,$t[v]=Ae,Et[Ae]=O,ht.publish("addFormObject",O),or.pop().restore()}};for(var Vi in g.beginFormObject=function(v,O,Ae,de,ve){return sA(v,O,Ae,de,ve),this},g.endFormObject=function(v){return nu(v),this},g.doFormObject=function(v,O){var Ae=Et[$t[v]];return re("q"),re(O.toString()+" cm"),re("/"+Ae.id+" Do"),re("Q"),this},g.getFormObject=function(v){var O=Et[$t[v]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},g.save=function(v,O){return v=v||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(nc(zo(ji()),v),typeof nc.unload=="function"&&kt.setTimeout&&setTimeout(nc.unload,911),this):new Promise(function(Ae,de){try{var ve=nc(zo(ji()),v);typeof nc.unload=="function"&&kt.setTimeout&&setTimeout(nc.unload,911),Ae(ve)}catch(Pe){de(Pe.message)}})},Ut.API)Ut.API.hasOwnProperty(Vi)&&(Vi==="events"&&Ut.API.events.length?function(v,O){var Ae,de,ve;for(ve=O.length-1;ve!==-1;ve--)Ae=O[ve][0],de=O[ve][1],v.subscribe.apply(v,[Ae].concat(typeof de=="function"?[de]:de))}(ht,Ut.API.events):g[Vi]=Ut.API[Vi]);var xa=g.getPageWidth=function(v){return(He[v=v||G].mediaBox.topRightX-He[v].mediaBox.bottomLeftX)/Xe},iA=g.setPageWidth=function(v,O){He[v].mediaBox.topRightX=O*Xe+He[v].mediaBox.bottomLeftX},ls=g.getPageHeight=function(v){return(He[v=v||G].mediaBox.topRightY-He[v].mediaBox.bottomLeftY)/Xe},aA=g.setPageHeight=function(v,O){He[v].mediaBox.topRightY=O*Xe+He[v].mediaBox.bottomLeftY};return g.internal={pdfEscape:sn,getStyle:eu,getFont:Rl,getFontSize:Ye,getCharSpace:tA,getTextColor:eA,getLineHeight:Ol,getLineHeightFactor:Ya,getLineWidth:Yo,write:yt,getHorizontalCoordinate:Zs,getVerticalCoordinate:_n,getCoordinateString:ru,getVerticalCoordinateString:ya,collections:{},newObject:Jr,newAdditionalObject:be,newObjectDeferred:Or,newObjectDeferredBegin:nn,getFilters:_t,putStream:mt,events:ht,scaleFactor:Xe,pageSize:{getWidth:function(){return xa(G)},setWidth:function(v){iA(G,v)},getHeight:function(){return ls(G)},setHeight:function(v){aA(G,v)}},encryptionOptions:d,encryption:Lr,getEncryptor:Zc,output:Wo,getNumberOfPages:gr,pages:Te,out:re,f2:j,f3:S,getPageInfo:Ll,getPageInfoByObjId:Rt,getCurrentPageInfo:va,getPDFVersion:b,Point:eo,Rectangle:nA,Matrix:ct,hasHotfix:wa},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return xa(G)},set:function(v){iA(G,v)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return ls(G)},set:function(v){aA(G,v)},enumerable:!0,configurable:!0}),Jc.call(g,ke),tt="F1",$a(s,r),ht.publish("initialized"),g}Vu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Vu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Vu.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Vu.prototype.processOwnerPassword=function(t,e){return Z2(Y2(e).substr(0,5),t)},Vu.prototype.encryptor=function(t,e){var r=Y2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Z2(r,n)}},wp.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||xr(t)!==xr(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Ut.API={events:[]},Ut.version="3.0.1";var An=Ut.API,vb=1,Gc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Su=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Vt=function(t){return t.toFixed(2)},CA=function(t){return t.toFixed(5)};An.__acroform__={};var Xs=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},aI=function(t){return t*vb},Na=function(t){var e=new y3,r=bt.internal.getHeight(t)||0,n=bt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Vt(n)),Number(Vt(r))],e},xz=An.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},bz=An.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Cz=An.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},gn=An.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Cz(t,e-1)},wn=An.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return xz(t,e-1)},vn=An.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return bz(t,e-1)},Ez=An.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],A={};return A.lowerLeft_X=r(s)||0,A.lowerLeft_Y=n(i+o)||0,A.upperRight_X=r(s+a)||0,A.upperRight_Y=n(i)||0,[Number(Vt(A.lowerLeft_X)),Number(Vt(A.lowerLeft_Y)),Number(Vt(A.upperRight_X)),Number(Vt(A.upperRight_Y))]},_z=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=eB(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Vt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Na(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},eB=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(S){return S.split(`
`)}):s.map(function(S){return[S]});var i=r,a=bt.internal.getHeight(t)||0;a=a<0?-a:a;var o=bt.internal.getWidth(t)||0;o=o<0?-o:o;var A=function(S,N,U){if(S+1<s.length){var Z=N+" "+s[S+1][0];return ug(Z,t,U).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var c,d,f=ug("3",t,i).height,m=t.multiline?a-i:(a-f)/2,g=m+=2,B=0,b=0,_=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+ug(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var w="",y=0,I=0;I<s.length;I++)if(s.hasOwnProperty(I)){var D=!1;if(s[I].length!==1&&_!==s[I].length-1){if((f+2)*(y+2)+2>a)continue e;w+=s[I][_],D=!0,b=I,I--}else{w=(w+=s[I][_]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var H=parseInt(I),k=A(H,w,i),T=I>=s.length-1;if(k&&!T){w+=" ",_=0;continue}if(k||T){if(T)b=H;else if(t.multiline&&(f+2)*(y+2)+2>a)continue e}else{if(!t.multiline||(f+2)*(y+2)+2>a)continue e;b=H}}for(var E="",Q=B;Q<=b;Q++){var j=s[Q];if(t.multiline){if(Q===b){E+=j[_]+" ",_=(_+1)%j.length;continue}if(Q===B){E+=j[j.length-1]+" ";continue}}E+=j[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=ug(E,t,i).width,t.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;case"left":default:c=2}e+=Vt(c)+" "+Vt(g)+` Td
`,e+="("+Gc(E)+`) Tj
`,e+=-Vt(c)+` 0 Td
`,g=-(i+2),d=0,B=D?b:b+1,y++,w=""}break}return n.text=e,n.fontSize=i,n},ug=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},Iz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Nz=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Sz=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),xr(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},Fz=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ua.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Iz)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");vb=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new B3,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&Nz(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var a in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],A=[],c=o.Rect;if(o.Rect&&(o.Rect=Ez(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=bt.createDefaultAppearanceStream(o),xr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(A=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=_z(o);A.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var g=o.appearanceStreamContent[m];if(f+="/"+m+" ",f+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var B=g[a];typeof B=="function"&&(B=B.call(s,o)),f+="/"+a+" "+B+" ",s.internal.acroformPlugin.xForms.indexOf(B)>=0||s.internal.acroformPlugin.xForms.push(B)}}else typeof(B=g)=="function"&&(B=B.call(s,o)),f+="/"+a+" "+B,s.internal.acroformPlugin.xForms.indexOf(B)>=0||s.internal.acroformPlugin.xForms.push(B);f+=">>"}A.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:A,objectId:o.objId}),s.internal.out("endobj")}i&&Sz(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},v3=An.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),xr(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+Gc(n(t[i].toString()))+")"):s+=t[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ky=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Gc(n(t))+")"},Pa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Pa.prototype.toString=function(){return this.objId+" 0 R"},Pa.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Pa.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:v3(s,this.objId,this.scope)}):s instanceof Pa?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var y3=function(){Pa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Xs(y3,Pa);var B3=function(){Pa.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Gc(r(t))+")"}},set:function(r){t=r}})};Xs(B3,Pa);var ua=function t(){Pa.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!gn(e,3)},set:function(w){w?this.F=wn(e,3):this.F=vn(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');r=w}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(w){n=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(w){n[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(w){n[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(w){n[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(w){n[3]=w}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Y0)return;i="FieldObject"+t.FieldNum++}var w=function(y){return y};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Gc(w(i))+")"},set:function(w){i=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(w){i=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(w){A=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/vb:c},set:function(w){c=w}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Y0||this instanceof Al))return Ky(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=w}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Sn?m:Ky(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof Sn?w:w.substr(0,1)==="("?Su(w.substr(1,w.length-2)):Su(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Sn?Su(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof Sn?"/"+w:w}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Sn?g:Ky(g,this.objId,this.scope)},set:function(w){w=w.toString(),g=this instanceof Sn?w:w.substr(0,1)==="("?Su(w.substr(1,w.length-2)):Su(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Sn?Su(g.substr(1,g.length-1)):g},set:function(w){w=w.toString(),g=this instanceof Sn?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var B,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(w){w=!!w,b=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(B)return B},set:function(w){B=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,1)},set:function(w){w?this.Ff=wn(this.Ff,1):this.Ff=vn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,2)},set:function(w){w?this.Ff=wn(this.Ff,2):this.Ff=vn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,3)},set:function(w){w?this.Ff=wn(this.Ff,3):this.Ff=vn(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');_=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(_){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:_=2;break;case"center":case 1:_=1;break;case"left":case 0:default:_=0}}})};Xs(ua,Pa);var yc=function(){ua.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return v3(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,a,o){o||(o=1);for(var A,c=[];A=a.exec(i);)c.push(A[o]);return c}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,18)},set:function(r){r?this.Ff=wn(this.Ff,18):this.Ff=vn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=wn(this.Ff,19):this.Ff=vn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,20)},set:function(r){r?(this.Ff=wn(this.Ff,20),e.sort()):this.Ff=vn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,22)},set:function(r){r?this.Ff=wn(this.Ff,22):this.Ff=vn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,23)},set:function(r){r?this.Ff=wn(this.Ff,23):this.Ff=vn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,27)},set:function(r){r?this.Ff=wn(this.Ff,27):this.Ff=vn(this.Ff,27)}}),this.hasAppearanceStream=!1};Xs(yc,ua);var Bc=function(){yc.call(this),this.fontName="helvetica",this.combo=!1};Xs(Bc,yc);var xc=function(){Bc.call(this),this.combo=!0};Xs(xc,Bc);var Nf=function(){xc.call(this),this.edit=!0};Xs(Nf,xc);var Sn=function(){ua.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,15)},set:function(r){r?this.Ff=wn(this.Ff,15):this.Ff=vn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,16)},set:function(r){r?this.Ff=wn(this.Ff,16):this.Ff=vn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,17)},set:function(r){r?this.Ff=wn(this.Ff,17):this.Ff=vn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,26)},set:function(r){r?this.Ff=wn(this.Ff,26):this.Ff=vn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Gc(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){xr(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Xs(Sn,ua);var Sf=function(){Sn.call(this),this.pushButton=!0};Xs(Sf,Sn);var bc=function(){Sn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Xs(bc,Sn);var Y0=function(){var t,e;ua.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),n)a.push("/"+i+" ("+Gc(s(n[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){xr(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xs(Y0,ua),bc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},bc.prototype.createOption=function(t){var e=new Y0;return e.Parent=this,e.optionName=t,this.Kids.push(e),Tz.call(this.scope,e),e};var Ff=function(){Sn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bt.CheckBox.createAppearanceStream()};Xs(Ff,Sn);var Al=function(){ua.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,13)},set:function(e){e?this.Ff=wn(this.Ff,13):this.Ff=vn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,21)},set:function(e){e?this.Ff=wn(this.Ff,21):this.Ff=vn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,23)},set:function(e){e?this.Ff=wn(this.Ff,23):this.Ff=vn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,24)},set:function(e){e?this.Ff=wn(this.Ff,24):this.Ff=vn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,25)},set:function(e){e?this.Ff=wn(this.Ff,25):this.Ff=vn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,26)},set:function(e){e?this.Ff=wn(this.Ff,26):this.Ff=vn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xs(Al,ua);var Tf=function(){Al.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,14)},set:function(t){t?this.Ff=wn(this.Ff,14):this.Ff=vn(this.Ff,14)}}),this.password=!0};Xs(Tf,Al);var bt={CheckBox:{createAppearanceStream:function(){return{N:{On:bt.CheckBox.YesNormal},D:{On:bt.CheckBox.YesPushDown,Off:bt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Na(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=eB(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Vt(bt.internal.getWidth(t))+" "+Vt(bt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Vt(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Na(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],i=bt.internal.getHeight(t),a=bt.internal.getWidth(t),o=eB(t,t.caption);return s.push("1 g"),s.push("0 0 "+Vt(a)+" "+Vt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Vt(a-1)+" "+Vt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Vt(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Na(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Vt(bt.internal.getWidth(t))+" "+Vt(bt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:bt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=bt.RadioButton.Circle.YesNormal,e.D[t]=bt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Na(t);e.scope=t.scope;var r=[],n=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=bt.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+CA(bt.internal.getWidth(t)/2)+" "+CA(bt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Na(t);e.scope=t.scope;var r=[],n=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*bt.internal.Bezier_C).toFixed(5)),a=Number((n*bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+CA(bt.internal.getWidth(t)/2)+" "+CA(bt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+CA(bt.internal.getWidth(t)/2)+" "+CA(bt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Na(t);e.scope=t.scope;var r=[],n=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+CA(bt.internal.getWidth(t)/2)+" "+CA(bt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:bt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=bt.RadioButton.Cross.YesNormal,e.D[t]=bt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Na(t);e.scope=t.scope;var r=[],n=bt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Vt(bt.internal.getWidth(t)-2)+" "+Vt(bt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Vt(n.x1.x)+" "+Vt(n.x1.y)+" m"),r.push(Vt(n.x2.x)+" "+Vt(n.x2.y)+" l"),r.push(Vt(n.x4.x)+" "+Vt(n.x4.y)+" m"),r.push(Vt(n.x3.x)+" "+Vt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Na(t);e.scope=t.scope;var r=bt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Vt(bt.internal.getWidth(t))+" "+Vt(bt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Vt(bt.internal.getWidth(t)-2)+" "+Vt(bt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Vt(r.x1.x)+" "+Vt(r.x1.y)+" m"),n.push(Vt(r.x2.x)+" "+Vt(r.x2.y)+" l"),n.push(Vt(r.x4.x)+" "+Vt(r.x4.y)+" m"),n.push(Vt(r.x3.x)+" "+Vt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Na(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Vt(bt.internal.getWidth(t))+" "+Vt(bt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};bt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=bt.internal.getWidth(t),r=bt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},bt.internal.getWidth=function(t){var e=0;return xr(t)==="object"&&(e=aI(t.Rect[2])),e},bt.internal.getHeight=function(t){var e=0;return xr(t)==="object"&&(e=aI(t.Rect[3])),e};var Tz=An.addField=function(t){if(Fz(this,t),!(t instanceof ua))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};An.AcroFormChoiceField=yc,An.AcroFormListBox=Bc,An.AcroFormComboBox=xc,An.AcroFormEditBox=Nf,An.AcroFormButton=Sn,An.AcroFormPushButton=Sf,An.AcroFormRadioButton=bc,An.AcroFormCheckBox=Ff,An.AcroFormTextField=Al,An.AcroFormPasswordField=Tf,An.AcroFormAppearance=bt,An.AcroForm={ChoiceField:yc,ListBox:Bc,ComboBox:xc,EditBox:Nf,Button:Sn,PushButton:Sf,RadioButton:bc,CheckBox:Ff,TextField:Al,PasswordField:Tf,Appearance:bt},Ut.AcroForm={ChoiceField:yc,ListBox:Bc,ComboBox:xc,EditBox:Nf,Button:Sn,PushButton:Sf,RadioButton:bc,CheckBox:Ff,TextField:Al,PasswordField:Tf,Appearance:bt};var Uz=Ut.AcroForm;function x3(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(S,N){var U,Z,ue,ie,z,W=e;if((N=N||e)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(k(S))for(z in r)for(ue=r[z],U=0;U<ue.length;U+=1){for(ie=!0,Z=0;Z<ue[U].length;Z+=1)if(ue[U][Z]!==void 0&&ue[U][Z]!==S[Z]){ie=!1;break}if(ie===!0){W=z;break}}else for(z in r)for(ue=r[z],U=0;U<ue.length;U+=1){for(ie=!0,Z=0;Z<ue[U].length;Z+=1)if(ue[U][Z]!==void 0&&ue[U][Z]!==S.charCodeAt(Z)){ie=!1;break}if(ie===!0){W=z;break}}return W===e&&N!==e&&(W=N),W},s=function S(N){for(var U=this.internal.write,Z=this.internal.putStream,ue=(0,this.internal.getFilters)();ue.indexOf("FlateEncode")!==-1;)ue.splice(ue.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var ie=[];if(ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Image"}),ie.push({key:"Width",value:N.width}),ie.push({key:"Height",value:N.height}),N.colorSpace===_.INDEXED?ie.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(ie.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===_.DEVICE_CMYK&&ie.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ie.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&ie.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var z="",W=0,ae=N.transparency.length;W<ae;W++)z+=N.transparency[W]+" "+N.transparency[W]+" ";ie.push({key:"Mask",value:"["+z+"]"})}N.sMask!==void 0&&ie.push({key:"SMask",value:N.objectId+1+" 0 R"});var q=N.filter!==void 0?["/"+N.filter]:void 0;if(Z({data:N.data,additionalKeyValues:ie,alreadyAppliedFilters:q,objectId:N.objectId}),U("endobj"),"sMask"in N&&N.sMask!==void 0){var pe="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,R={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:pe,data:N.sMask};"filter"in N&&(R.filter=N.filter),S.call(this,R)}if(N.colorSpace===_.INDEXED){var G=this.internal.newObject();Z({data:E(new Uint8Array(N.palette)),objectId:G}),U("endobj")}},i=function(){var S=this.internal.collections.addImage_images;for(var N in S)s.call(this,S[N])},a=function(){var S,N=this.internal.collections.addImage_images,U=this.internal.write;for(var Z in N)U("/I"+(S=N[Z]).index,S.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},A=function(){var S=this.internal.collections.addImage_images;return o.call(this),S},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(S){return typeof t["process"+S.toUpperCase()]=="function"},f=function(S){return xr(S)==="object"&&S.nodeType===1},m=function(S,N){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var U=""+S.getAttribute("src");if(U.indexOf("data:image/")===0)return If(unescape(U).split("base64,").pop());var Z=t.loadFile(U,!0);if(Z!==void 0)return Z}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var ue;switch(N){case"PNG":ue="image/png";break;case"WEBP":ue="image/webp";break;case"JPEG":case"JPG":default:ue="image/jpeg"}return If(S.toDataURL(ue,1).split("base64,").pop())}},g=function(S){var N=this.internal.collections.addImage_images;if(N){for(var U in N)if(S===N[U].alias)return N[U]}},B=function(S,N,U){return S||N||(S=-96,N=-96),S<0&&(S=-1*U.width*72/S/this.internal.scaleFactor),N<0&&(N=-1*U.height*72/N/this.internal.scaleFactor),S===0&&(S=N*U.width/U.height),N===0&&(N=S*U.height/U.width),[S,N]},b=function(S,N,U,Z,ue,ie){var z=B.call(this,U,Z,ue),W=this.internal.getCoordinateString,ae=this.internal.getVerticalCoordinateString,q=A.call(this);if(U=z[0],Z=z[1],q[ue.index]=ue,ie){ie*=Math.PI/180;var pe=Math.cos(ie),R=Math.sin(ie),G=function(J){return J.toFixed(4)},te=[G(pe),G(R),G(-1*R),G(pe),0,0,"cm"]}this.internal.write("q"),ie?(this.internal.write([1,"0","0",1,W(S),ae(N+Z),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([W(U),"0","0",W(Z),"0","0","cm"].join(" "))):this.internal.write([W(U),"0","0",W(Z),W(S),ae(N+Z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ue.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=t.__addimage__.sHashCode=function(S){var N,U,Z=0;if(typeof S=="string")for(U=S.length,N=0;N<U;N++)Z=(Z<<5)-Z+S.charCodeAt(N),Z|=0;else if(k(S))for(U=S.byteLength/2,N=0;N<U;N++)Z=(Z<<5)-Z+S[N],Z|=0;return Z},I=t.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var N=!0;return S.length===0&&(N=!1),S.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(N=!1),N},D=t.__addimage__.extractImageFromDataUrl=function(S){if(S==null||!(S=S.trim()).startsWith("data:"))return null;var N=S.indexOf(",");return N<0?null:S.substring(0,N).trim().endsWith("base64")?S.substring(N+1):null},H=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(S){return H()&&S instanceof ArrayBuffer};var k=t.__addimage__.isArrayBufferView=function(S){return H()&&typeof Uint32Array<"u"&&(S instanceof Int8Array||S instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array)},T=t.__addimage__.binaryStringToUint8Array=function(S){for(var N=S.length,U=new Uint8Array(N),Z=0;Z<N;Z++)U[Z]=S.charCodeAt(Z);return U},E=t.__addimage__.arrayBufferToBinaryString=function(S){for(var N="",U=k(S)?S:new Uint8Array(S),Z=0;Z<U.length;Z+=8192)N+=String.fromCharCode.apply(null,U.subarray(Z,Z+8192));return N};t.addImage=function(){var S,N,U,Z,ue,ie,z,W,ae;if(typeof arguments[1]=="number"?(N=e,U=arguments[1],Z=arguments[2],ue=arguments[3],ie=arguments[4],z=arguments[5],W=arguments[6],ae=arguments[7]):(N=arguments[1],U=arguments[2],Z=arguments[3],ue=arguments[4],ie=arguments[5],z=arguments[6],W=arguments[7],ae=arguments[8]),xr(S=arguments[0])==="object"&&!f(S)&&"imageData"in S){var q=S;S=q.imageData,N=q.format||N||e,U=q.x||U||0,Z=q.y||Z||0,ue=q.w||q.width||ue,ie=q.h||q.height||ie,z=q.alias||z,W=q.compression||W,ae=q.rotation||q.angle||ae}var pe=this.internal.getFilters();if(W===void 0&&pe.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(U)||isNaN(Z))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var R=Q.call(this,S,N,z,W);return b.call(this,U,Z,ue,ie,R,ae),this};var Q=function(S,N,U,Z){var ue,ie,z;if(typeof S=="string"&&n(S)===e){S=unescape(S);var W=j(S,!1);(W!==""||(W=t.loadFile(S,!0))!==void 0)&&(S=W)}if(f(S)&&(S=m(S,N)),N=n(S,N),!d(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((z=U)==null||z.length===0)&&(U=function(ae){return typeof ae=="string"||k(ae)?y(ae):k(ae.data)?y(ae.data):null}(S)),(ue=g.call(this,U))||(H()&&(S instanceof Uint8Array||N==="RGBA"||(ie=S,S=T(S))),ue=this["process"+N.toUpperCase()](S,c.call(this),U,function(ae){return ae&&typeof ae=="string"&&(ae=ae.toUpperCase()),ae in t.image_compression?ae:w.NONE}(Z),ie)),!ue)throw new Error("An unknown error occurred whilst processing the image.");return ue},j=t.__addimage__.convertBase64ToBinaryString=function(S,N){N=typeof N!="boolean"||N;var U,Z="";if(typeof S=="string"){var ue;U=(ue=D(S))!==null&&ue!==void 0?ue:S;try{Z=If(U)}catch(ie){if(N)throw I(U)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ie.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};t.getImageProperties=function(S){var N,U,Z="";if(f(S)&&(S=m(S)),typeof S=="string"&&n(S)===e&&((Z=j(S,!1))===""&&(Z=t.loadFile(S)||""),S=Z),U=n(S),!d(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!H()||S instanceof Uint8Array||(S=T(S)),!(N=this["process"+U.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=U,N}})(Ut.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Ut.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,d=!1,f=0;f<c.length&&!d;f++)switch((n=c[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<c.length;m++){n=c[m];var g=this.internal.pdfEscape,B=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(b.objId),y=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+g(w(n.contents))+")",i+=" /Popup "+_.objId+" 0 R",i+=" /P "+A.objId+" 0 R",i+=" /T ("+g(w(y))+") >>",b.content=i;var I=b.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+I,n.open&&(i+=" /Open true"),i+=" >>",_.content=i,this.internal.write(b.objId,"0 R",_.objId,"0 R");break;case"freetext":s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var D=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+g(B(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var H=this.annotations._nameMap[n.options.name];n.options.pageNumber=H.page,n.options.top=H.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+g(B(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var k=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+k+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,i,a){var o=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:A(r),y:c(n),w:A(r+s),h:c(n+i)},options:a,type:"link"})},t.textWithLink=function(r,n,s,i){var a,o,A=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var d=this.splitTextToSize(r,o).length;a=Math.ceil(c*d)}else o=A,a=c;return this.text(r,n,s,i),s+=.2*c,i.align==="center"&&(n-=A/2),i.align==="right"&&(n-=A),this.link(n,s-c,o,a,i),A},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Ut.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},o=t.__arabicParser__.isArabicEndLetter=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length<=2},A=t.__arabicParser__.isArabicAlfLetter=function(b){return a(b)&&s.indexOf(b.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(b){var _=0,w=r,y="",I=0;for(_=0;_<b.length;_+=1)w[b.charCodeAt(_)]!==void 0?(I++,typeof(w=w[b.charCodeAt(_)])=="number"&&(y+=String.fromCharCode(w),w=r,I=0),_===b.length-1&&(w=r,y+=b.charAt(_-(I-1)),_-=I-1,I=0)):(w=r,y+=b.charAt(_-I),_-=I,I=0);return y};t.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&n[b.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(b,_,w){return a(b)?i(b)===!1?-1:!c(b)||!a(_)&&!a(w)||!a(w)&&o(_)||o(b)&&!a(_)||o(b)&&A(_)||o(b)&&o(_)?0:d(b)&&a(_)&&!o(_)&&a(w)&&c(w)?3:o(b)||!a(w)?1:2:-1},g=function(b){var _=0,w=0,y=0,I="",D="",H="",k=(b=b||"").split("\\s+"),T=[];for(_=0;_<k.length;_+=1){for(T.push(""),w=0;w<k[_].length;w+=1)I=k[_][w],D=k[_][w-1],H=k[_][w+1],a(I)?(y=m(I,D,H),T[_]+=y!==-1?String.fromCharCode(e[I.charCodeAt(0)][y]):I):T[_]+=I;T[_]=f(T[_])}return T.join(" ")},B=t.__arabicParser__.processArabic=t.processArabic=function(){var b,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(_)){var y=0;for(w=[],y=0;y<_.length;y+=1)Array.isArray(_[y])?w.push([g(_[y][0]),_[y][1],_[y][2]]):w.push([g(_[y])]);b=w}else b=g(_);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};t.events.push(["preProcessText",B])}(Ut.API),Ut.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Ut.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(b){A=b}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var B=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return B},set:function(b){B=b}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(A){return n.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},t.getTextDimensions=function(A,c){n.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),f=c.font||this.getFont(),m=c.scaleFactor||this.internal.scaleFactor,g=0,B=0,b=0,_=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var w=c.maxWidth;w>0?typeof A=="string"?A=this.splitTextToSize(A,w):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(I,D){return I.concat(_.splitTextToSize(D,w))},[])):A=Array.isArray(A)?A:[A];for(var y=0;y<A.length;y++)g<(b=this.getStringUnitWidth(A[y],{font:f})*d)&&(g=b);return g!==0&&(B=A.length),{w:g/=m,h:Math.max((B*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var A;A=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===A.lineNumber?(A.x=(c.x||0)+(c.width||0),A.y=c.y||0):c.y+c.height+A.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=f.top,g&&m&&(this.printHeaderRow(A.lineNumber,!0),A.y+=m[0].height)):A.y=c.y+c.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,r===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-d,A.y+d,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+d,{align:"center",baseline:"top",maxWidth:A.width-d-d}):this.text(A.text,A.x+d,A.y+d,{align:"left",baseline:"top",maxWidth:A.width-d-d})),this.internal.__cell__.lastCell=A,this};t.table=function(A,c,d,f,m){if(n.call(this),!d)throw new Error("No data for PDF table.");var g,B,b,_,w=[],y=[],I=[],D={},H={},k=[],T=[],E=(m=m||{}).autoSize||!1,Q=m.printHeaders!==!1,j=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,S=m.margins||Object.assign({width:this.getPageWidth()},e),N=typeof m.padding=="number"?m.padding:3,U=m.headerBackgroundColor||"#c8c8c8",Z=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=Q,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=j,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=Z,this.setFontSize(j),f==null)y=w=Object.keys(d[0]),I=w.map(function(){return"left"});else if(Array.isArray(f)&&xr(f[0])==="object")for(w=f.map(function(q){return q.name}),y=f.map(function(q){return q.prompt||q.name||""}),I=f.map(function(q){return q.align||"left"}),g=0;g<f.length;g+=1)H[f[g].name]=f[g].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(y=w=f,I=w.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(g=0;g<w.length;g+=1){for(D[_=w[g]]=d.map(function(q){return q[_]}),this.setFont(void 0,"bold"),k.push(this.getTextDimensions(y[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),B=D[_],this.setFont(void 0,"normal"),b=0;b<B.length;b+=1)k.push(this.getTextDimensions(B[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);H[_]=Math.max.apply(null,k)+N+N,k=[]}if(Q){var ue={};for(g=0;g<w.length;g+=1)ue[w[g]]={},ue[w[g]].text=y[g],ue[w[g]].align=I[g];var ie=o.call(this,ue,H);T=w.map(function(q){return new i(A,c,H[q],ie,ue[q].text,void 0,ue[q].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var z=f.reduce(function(q,pe){return q[pe.name]=pe.align,q},{});for(g=0;g<d.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:d[g]},this);var W=o.call(this,d[g],H);for(b=0;b<w.length;b+=1){var ae=d[g][w[b]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:b,data:ae},this),a.call(this,new i(A,c,H[w[b]],W,ae,g+2,z[w[b]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=c,this};var o=function(A,c){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(A).map(function(g){var B=A[g];return this.splitTextToSize(B.hasOwnProperty("text")?B.text:B,c[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*f/m+d+d},this).reduce(function(g,B){return Math.max(g,B)},0)};t.setTableHeaderRow=function(A){n.call(this),this.internal.__cell__.tableHeaderRow=A},t.printHeaderRow=function(A,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=A;var B=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(B)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(Ut.API);var b3={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},C3=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],tB=x3(C3),E3=[100,200,300,400,500,600,700,800,900],Qz=x3(E3);function rB(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return b3[i=i||"normal"]?i:"normal"}(t.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(i){return typeof tB[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function oI(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var Pz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},AI={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function lI(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Lz(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},Pz,r.genericFontFamilies||{}),i=null,a=null,o=0;o<e.length;++o)if(s[(i=rB(e[o])).family]&&(i.family=s[i.family]),t.hasOwnProperty(i.family)){a=t[i.family];break}if(!(a=a||t[n]))throw new Error("Could not find a font-family for the rule '"+lI(i)+"' and default family '"+n+"'.");if(a=function(A,c){if(c[A])return c[A];var d=tB[A],f=d<=tB.normal?-1:1,m=oI(c,C3,d,f);if(!m)throw new Error("Could not find a matching font-stretch value for "+A);return m}(i.stretch,a),a=function(A,c){if(c[A])return c[A];for(var d=b3[A],f=0;f<d.length;++f)if(c[d[f]])return c[d[f]];throw new Error("Could not find a matching font-style for "+A)}(i.style,a),!(a=function(A,c){if(c[A])return c[A];if(A===400&&c[500])return c[500];if(A===500&&c[400])return c[400];var d=Qz[A],f=oI(c,E3,d,A<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+A);return f}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+lI(i)+"'.");return a}function cI(t){return t.trimLeft()}function kz(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Rz(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var dg,uI,dI,qy=["times"];(function(t){var e,r,n,s,i,a,o,A,c,d=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new A,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new a,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new a,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,A=this.internal.Matrix,c=new d}]);var f=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=R;Object.defineProperty(this,"pdf",{get:function(){return G}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(me){te=!!me}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(me){J=!!me}});var le=0;Object.defineProperty(this,"posX",{get:function(){return le},set:function(me){isNaN(me)||(le=me)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(me){isNaN(me)||(ne=me)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(me){var re;typeof me=="number"?re=[me,me,me,me]:((re=new Array(4))[0]=me[0],re[1]=me.length>=2?me[1]:re[0],re[2]=me.length>=3?me[2]:re[0],re[3]=me.length>=4?me[3]:re[1]),c.margin=re}});var ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ee},set:function(me){ee=me}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(me){oe=me}});var ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ye},set:function(me){ye=me}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(me){me instanceof d&&(c=me)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(me){c.path=me}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(me){Te=me}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(me){var re;re=m(me),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=re.a===0,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(me){var re=m(me);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=re.a===0,this.ctx.strokeOpacity=re.a,re.a===0?this.pdf.setDrawColor(255,255,255):(re.a,this.pdf.setDrawColor(re.r,re.g,re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(me){["butt","round","square"].indexOf(me)!==-1&&(this.ctx.lineCap=me,this.pdf.setLineCap(me))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(me){isNaN(me)||(this.ctx.lineWidth=me,this.pdf.setLineWidth(me))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(me){["bevel","round","miter"].indexOf(me)!==-1&&(this.ctx.lineJoin=me,this.pdf.setLineJoin(me))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(me){isNaN(me)||(this.ctx.miterLimit=me,this.pdf.setMiterLimit(me))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(me){this.ctx.textBaseline=me}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(me){["right","end","center","left","start"].indexOf(me)!==-1&&(this.ctx.textAlign=me)}});var ce=null;function xe(me,re){if(ce===null){var yt=function(Oe){var ke=[];return Object.keys(Oe).forEach(function(Ke){Oe[Ke].forEach(function(Je){var Ye=null;switch(Je){case"bold":Ye={family:Ke,weight:"bold"};break;case"italic":Ye={family:Ke,style:"italic"};break;case"bolditalic":Ye={family:Ke,weight:"bold",style:"italic"};break;case"":case"normal":Ye={family:Ke}}Ye!==null&&(Ye.ref={name:Ke,style:Je},ke.push(Ye))})}),ke}(me.getFontList());ce=function(Oe){for(var ke={},Ke=0;Ke<Oe.length;++Ke){var Je=rB(Oe[Ke]),Ye=Je.family,wt=Je.stretch,Fe=Je.style,Ge=Je.weight;ke[Ye]=ke[Ye]||{},ke[Ye][wt]=ke[Ye][wt]||{},ke[Ye][wt][Fe]=ke[Ye][wt][Fe]||{},ke[Ye][wt][Fe][Ge]=Je}return ke}(yt.concat(re))}return ce}var Ce=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ce},set:function(me){ce=null,Ce=me}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(me){var re;if(this.ctx.font=me,(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(me))!==null){var yt=re[1];re[2];var Oe=re[3],ke=re[4];re[5];var Ke=re[6],Je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ke)[2];ke=Math.floor(Je==="px"?parseFloat(ke)*this.pdf.internal.scaleFactor:Je==="em"?parseFloat(ke)*this.pdf.getFontSize():parseFloat(ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ke);var Ye=function(it){var tt,Xe,Ot=[],Ft=it.trim();if(Ft==="")return qy;if(Ft in AI)return[AI[Ft]];for(;Ft!=="";){switch(Xe=null,tt=(Ft=cI(Ft)).charAt(0)){case'"':case"'":Xe=kz(Ft.substring(1),tt);break;default:Xe=Rz(Ft)}if(Xe===null||(Ot.push(Xe[0]),(Ft=cI(Xe[1]))!==""&&Ft.charAt(0)!==","))return qy;Ft=Ft.replace(/^,/,"")}return Ot}(Ke);if(this.fontFaces){var wt=Lz(xe(this.pdf,this.fontFaces),Ye.map(function(it){return{family:it,stretch:"normal",weight:Oe,style:yt}}));this.pdf.setFont(wt.ref.name,wt.ref.style)}else{var Fe="";(Oe==="bold"||parseInt(Oe,10)>=700||yt==="bold")&&(Fe="bold"),yt==="italic"&&(Fe+="italic"),Fe.length===0&&(Fe="normal");for(var Ge="",ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},et=0;et<Ye.length;et++){if(this.pdf.internal.getFont(Ye[et],Fe,{noFallback:!0,disableWarning:!0})!==void 0){Ge=Ye[et];break}if(Fe==="bolditalic"&&this.pdf.internal.getFont(Ye[et],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ge=Ye[et],Fe="bold";else if(this.pdf.internal.getFont(Ye[et],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ge=Ye[et],Fe="normal";break}}if(Ge===""){for(var pt=0;pt<Ye.length;pt++)if(ze[Ye[pt]]){Ge=ze[Ye[pt]];break}}Ge=Ge===""?"Times":Ge,this.pdf.setFont(Ge,Fe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(me){this.ctx.globalCompositeOperation=me}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(me){this.ctx.globalAlpha=me}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(me){this.ctx.lineDashOffset=me,pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(me){this.ctx.lineDash=me,pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(me){this.ctx.ignoreClearRect=!!me}})};f.prototype.setLineDash=function(R){this.lineDash=R},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){D.call(this,"fill",!1)},f.prototype.stroke=function(){D.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(R,G){if(isNaN(R)||isNaN(G))throw Sr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new a(R,G));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new a(R,G)},f.prototype.closePath=function(){var R=new a(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&xr(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){R=new a(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(R.x,R.y)},f.prototype.lineTo=function(R,G){if(isNaN(R)||isNaN(G))throw Sr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new a(R,G));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new a(te.x,te.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},f.prototype.quadraticCurveTo=function(R,G,te,J){if(isNaN(te)||isNaN(J)||isNaN(R)||isNaN(G))throw Sr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var le=this.ctx.transform.applyToPoint(new a(te,J)),ne=this.ctx.transform.applyToPoint(new a(R,G));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:le.x,y:le.y}),this.ctx.lastPoint=new a(le.x,le.y)},f.prototype.bezierCurveTo=function(R,G,te,J,le,ne){if(isNaN(le)||isNaN(ne)||isNaN(R)||isNaN(G)||isNaN(te)||isNaN(J))throw Sr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ee=this.ctx.transform.applyToPoint(new a(le,ne)),oe=this.ctx.transform.applyToPoint(new a(R,G)),ye=this.ctx.transform.applyToPoint(new a(te,J));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:ye.x,y2:ye.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new a(ee.x,ee.y)},f.prototype.arc=function(R,G,te,J,le,ne){if(isNaN(R)||isNaN(G)||isNaN(te)||isNaN(J)||isNaN(le))throw Sr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=!!ne,!this.ctx.transform.isIdentity){var ee=this.ctx.transform.applyToPoint(new a(R,G));R=ee.x,G=ee.y;var oe=this.ctx.transform.applyToPoint(new a(0,te)),ye=this.ctx.transform.applyToPoint(new a(0,0));te=Math.sqrt(Math.pow(oe.x-ye.x,2)+Math.pow(oe.y-ye.y,2))}Math.abs(le-J)>=2*Math.PI&&(J=0,le=2*Math.PI),this.path.push({type:"arc",x:R,y:G,radius:te,startAngle:J,endAngle:le,counterclockwise:ne})},f.prototype.arcTo=function(R,G,te,J,le){throw new Error("arcTo not implemented.")},f.prototype.rect=function(R,G,te,J){if(isNaN(R)||isNaN(G)||isNaN(te)||isNaN(J))throw Sr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,G),this.lineTo(R+te,G),this.lineTo(R+te,G+J),this.lineTo(R,G+J),this.lineTo(R,G),this.lineTo(R+te,G),this.lineTo(R,G)},f.prototype.fillRect=function(R,G,te,J){if(isNaN(R)||isNaN(G)||isNaN(te)||isNaN(J))throw Sr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var le={};this.lineCap!=="butt"&&(le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,G,te,J),this.fill(),le.hasOwnProperty("lineCap")&&(this.lineCap=le.lineCap),le.hasOwnProperty("lineJoin")&&(this.lineJoin=le.lineJoin)}},f.prototype.strokeRect=function(R,G,te,J){if(isNaN(R)||isNaN(G)||isNaN(te)||isNaN(J))throw Sr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");B.call(this)||(this.beginPath(),this.rect(R,G,te,J),this.stroke())},f.prototype.clearRect=function(R,G,te,J){if(isNaN(R)||isNaN(G)||isNaN(te)||isNaN(J))throw Sr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,G,te,J))},f.prototype.save=function(R){R=typeof R!="boolean"||R;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},f.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage(G),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(R){var G,te,J,le;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))G=0,te=0,J=0,le=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(ne!==null)G=parseInt(ne[1]),te=parseInt(ne[2]),J=parseInt(ne[3]),le=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)G=parseInt(ne[1]),te=parseInt(ne[2]),J=parseInt(ne[3]),le=parseFloat(ne[4]);else{if(le=1,typeof R=="string"&&R.charAt(0)!=="#"){var ee=new m3(R);R=ee.ok?ee.toHex():"#000000"}R.length===4?(G=R.substring(1,2),G+=G,te=R.substring(2,3),te+=te,J=R.substring(3,4),J+=J):(G=R.substring(1,3),te=R.substring(3,5),J=R.substring(5,7)),G=parseInt(G,16),te=parseInt(te,16),J=parseInt(J,16)}}return{r:G,g:te,b:J,a:le,style:R}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},B=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(R,G,te,J){if(isNaN(G)||isNaN(te)||typeof R!="string")throw Sr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!g.call(this)){var le=W(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;N.call(this,{text:R,x:G,y:te,scale:ne,angle:le,align:this.textAlign,maxWidth:J})}},f.prototype.strokeText=function(R,G,te,J){if(isNaN(G)||isNaN(te)||typeof R!="string")throw Sr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!B.call(this)){J=isNaN(J)?void 0:J;var le=W(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;N.call(this,{text:R,x:G,y:te,scale:ne,renderingMode:"stroke",angle:le,align:this.textAlign,maxWidth:J})}},f.prototype.measureText=function(R){if(typeof R!="string")throw Sr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,te=this.pdf.internal.scaleFactor,J=G.internal.getFontSize(),le=G.getStringUnitWidth(R)*J/G.internal.scaleFactor,ne=function(ee){var oe=(ee=ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this};return new ne({width:le*=Math.round(96*te/72*1e4)/1e4})},f.prototype.scale=function(R,G){if(isNaN(R)||isNaN(G))throw Sr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new A(R,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},f.prototype.rotate=function(R){if(isNaN(R))throw Sr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new A(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.translate=function(R,G){if(isNaN(R)||isNaN(G))throw Sr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new A(1,0,0,1,R,G);this.ctx.transform=this.ctx.transform.multiply(te)},f.prototype.transform=function(R,G,te,J,le,ne){if(isNaN(R)||isNaN(G)||isNaN(te)||isNaN(J)||isNaN(le)||isNaN(ne))throw Sr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ee=new A(R,G,te,J,le,ne);this.ctx.transform=this.ctx.transform.multiply(ee)},f.prototype.setTransform=function(R,G,te,J,le,ne){R=isNaN(R)?1:R,G=isNaN(G)?0:G,te=isNaN(te)?0:te,J=isNaN(J)?1:J,le=isNaN(le)?0:le,ne=isNaN(ne)?0:ne,this.ctx.transform=new A(R,G,te,J,le,ne)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(R,G,te,J,le,ne,ee,oe,ye){var Te=this.pdf.getImageProperties(R),ce=1,xe=1,Ce=1,me=1;J!==void 0&&oe!==void 0&&(Ce=oe/J,me=ye/le,ce=Te.width/J*oe/J,xe=Te.height/le*ye/le),ne===void 0&&(ne=G,ee=te,G=0,te=0),J!==void 0&&oe===void 0&&(oe=J,ye=le),J===void 0&&oe===void 0&&(oe=Te.width,ye=Te.height);for(var re,yt=this.ctx.transform.decompose(),Oe=W(yt.rotate.shx),ke=new A,Ke=(ke=(ke=(ke=ke.multiply(yt.translate)).multiply(yt.skew)).multiply(yt.scale)).applyToRectangle(new o(ne-G*Ce,ee-te*me,J*ce,le*xe)),Je=_.call(this,Ke),Ye=[],wt=0;wt<Je.length;wt+=1)Ye.indexOf(Je[wt])===-1&&Ye.push(Je[wt]);if(I(Ye),this.autoPaging)for(var Fe=Ye[0],Ge=Ye[Ye.length-1],ze=Fe;ze<Ge+1;ze++){this.pdf.setPage(ze);var et=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pt=ze===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=ze===1?0:it+(ze-2)*tt;if(this.ctx.clip_path.length!==0){var Ot=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(re,this.posX+this.margin[3],-Xe+pt+this.ctx.prevPageLastElemOffset),H.call(this,"fill",!0),this.path=Ot}var Ft=JSON.parse(JSON.stringify(Ke));Ft=y([Ft],this.posX+this.margin[3],-Xe+pt+this.ctx.prevPageLastElemOffset)[0];var tn=(ze>Fe||ze<Ge)&&b.call(this);tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,tt,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",Ft.x,Ft.y,Ft.w,Ft.h,null,null,Oe),tn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,Oe)};var _=function(R,G,te){var J=[];G=G||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var le=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":J.push(Math.floor((R.y+le)/te)+1);break;case"arc":J.push(Math.floor((R.y+le-R.radius)/te)+1),J.push(Math.floor((R.y+le+R.radius)/te)+1);break;case"qct":var ne=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);J.push(Math.floor((ne.y+le)/te)+1),J.push(Math.floor((ne.y+ne.h+le)/te)+1);break;case"bct":var ee=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);J.push(Math.floor((ee.y+le)/te)+1),J.push(Math.floor((ee.y+ee.h+le)/te)+1);break;case"rect":J.push(Math.floor((R.y+le)/te)+1),J.push(Math.floor((R.y+R.h+le)/te)+1)}for(var oe=0;oe<J.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<J[oe];)w.call(this);return J},w=function(){var R=this.fillStyle,G=this.strokeStyle,te=this.font,J=this.lineCap,le=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=G,this.font=te,this.lineCap=J,this.lineWidth=le,this.lineJoin=ne},y=function(R,G,te){for(var J=0;J<R.length;J++)switch(R[J].type){case"bct":R[J].x2+=G,R[J].y2+=te;case"qct":R[J].x1+=G,R[J].y1+=te;case"mt":case"lt":case"arc":default:R[J].x+=G,R[J].y+=te}return R},I=function(R){return R.sort(function(G,te){return G-te})},D=function(R,G){for(var te,J,le=this.fillStyle,ne=this.strokeStyle,ee=this.lineCap,oe=this.lineWidth,ye=Math.abs(oe*this.ctx.transform.scaleX),Te=this.lineJoin,ce=JSON.parse(JSON.stringify(this.path)),xe=JSON.parse(JSON.stringify(this.path)),Ce=[],me=0;me<xe.length;me++)if(xe[me].x!==void 0)for(var re=_.call(this,xe[me]),yt=0;yt<re.length;yt+=1)Ce.indexOf(re[yt])===-1&&Ce.push(re[yt]);for(var Oe=0;Oe<Ce.length;Oe++)for(;this.pdf.internal.getNumberOfPages()<Ce[Oe];)w.call(this);if(I(Ce),this.autoPaging)for(var ke=Ce[0],Ke=Ce[Ce.length-1],Je=ke;Je<Ke+1;Je++){this.pdf.setPage(Je),this.fillStyle=le,this.strokeStyle=ne,this.lineCap=ee,this.lineWidth=ye,this.lineJoin=Te;var Ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wt=Je===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=Je===1?0:Fe+(Je-2)*Ge;if(this.ctx.clip_path.length!==0){var et=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(te,this.posX+this.margin[3],-ze+wt+this.ctx.prevPageLastElemOffset),H.call(this,R,!0),this.path=et}if(J=JSON.parse(JSON.stringify(ce)),this.path=y(J,this.posX+this.margin[3],-ze+wt+this.ctx.prevPageLastElemOffset),G===!1||Je===0){var pt=(Je>ke||Je<Ke)&&b.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ye,Ge,null).clip().discardPath()),H.call(this,R,G),pt&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=ye,H.call(this,R,G),this.lineWidth=oe;this.path=ce},H=function(R,G){if((R!=="stroke"||G||!B.call(this))&&(R==="stroke"||G||!g.call(this))){for(var te,J,le=[],ne=this.path,ee=0;ee<ne.length;ee++){var oe=ne[ee];switch(oe.type){case"begin":le.push({begin:!0});break;case"close":le.push({close:!0});break;case"mt":le.push({start:oe,deltas:[],abs:[]});break;case"lt":var ye=le.length;if(ne[ee-1]&&!isNaN(ne[ee-1].x)&&(te=[oe.x-ne[ee-1].x,oe.y-ne[ee-1].y],ye>0)){for(;ye>=0;ye--)if(le[ye-1].close!==!0&&le[ye-1].begin!==!0){le[ye-1].deltas.push(te),le[ye-1].abs.push(oe);break}}break;case"bct":te=[oe.x1-ne[ee-1].x,oe.y1-ne[ee-1].y,oe.x2-ne[ee-1].x,oe.y2-ne[ee-1].y,oe.x-ne[ee-1].x,oe.y-ne[ee-1].y],le[le.length-1].deltas.push(te);break;case"qct":var Te=ne[ee-1].x+2/3*(oe.x1-ne[ee-1].x),ce=ne[ee-1].y+2/3*(oe.y1-ne[ee-1].y),xe=oe.x+2/3*(oe.x1-oe.x),Ce=oe.y+2/3*(oe.y1-oe.y),me=oe.x,re=oe.y;te=[Te-ne[ee-1].x,ce-ne[ee-1].y,xe-ne[ee-1].x,Ce-ne[ee-1].y,me-ne[ee-1].x,re-ne[ee-1].y],le[le.length-1].deltas.push(te);break;case"arc":le.push({deltas:[],abs:[],arc:!0}),Array.isArray(le[le.length-1].abs)&&le[le.length-1].abs.push(oe)}}J=G?null:R==="stroke"?"stroke":"fill";for(var yt=!1,Oe=0;Oe<le.length;Oe++)if(le[Oe].arc)for(var ke=le[Oe].abs,Ke=0;Ke<ke.length;Ke++){var Je=ke[Ke];Je.type==="arc"?E.call(this,Je.x,Je.y,Je.radius,Je.startAngle,Je.endAngle,Je.counterclockwise,void 0,G,!yt):U.call(this,Je.x,Je.y),yt=!0}else if(le[Oe].close===!0)this.pdf.internal.out("h"),yt=!1;else if(le[Oe].begin!==!0){var Ye=le[Oe].start.x,wt=le[Oe].start.y;Z.call(this,le[Oe].deltas,Ye,wt),yt=!0}J&&Q.call(this,J),G&&j.call(this)}},k=function(R){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-te;case"top":return R+G-te;case"hanging":return R+G-2*te;case"middle":return R+G/2-te;case"ideographic":return R;case"alphabetic":default:return R}},T=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(G,te){this.colorStops.push([G,te])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(R,G,te,J,le,ne,ee,oe,ye){for(var Te=ie.call(this,te,J,le,ne),ce=0;ce<Te.length;ce++){var xe=Te[ce];ce===0&&(ye?S.call(this,xe.x1+R,xe.y1+G):U.call(this,xe.x1+R,xe.y1+G)),ue.call(this,R,G,xe.x2,xe.y2,xe.x3,xe.y3,xe.x4,xe.y4)}oe?j.call(this):Q.call(this,ee)},Q=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},j=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(R,G){this.pdf.internal.out(r(R)+" "+n(G)+" m")},N=function(R){var G;switch(R.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var te=this.pdf.getTextDimensions(R.text),J=k.call(this,R.y),le=T.call(this,J)-te.h,ne=this.ctx.transform.applyToPoint(new a(R.x,J)),ee=this.ctx.transform.decompose(),oe=new A;oe=(oe=(oe=oe.multiply(ee.translate)).multiply(ee.skew)).multiply(ee.scale);for(var ye,Te,ce,xe=this.ctx.transform.applyToRectangle(new o(R.x,J,te.w,te.h)),Ce=oe.applyToRectangle(new o(R.x,le,te.w,te.h)),me=_.call(this,Ce),re=[],yt=0;yt<me.length;yt+=1)re.indexOf(me[yt])===-1&&re.push(me[yt]);if(I(re),this.autoPaging)for(var Oe=re[0],ke=re[re.length-1],Ke=Oe;Ke<ke+1;Ke++){this.pdf.setPage(Ke);var Je=Ke===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[2],Fe=wt-this.margin[0],Ge=this.pdf.internal.pageSize.width-this.margin[1],ze=Ge-this.margin[3],et=Ke===1?0:Ye+(Ke-2)*Fe;if(this.ctx.clip_path.length!==0){var pt=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ye,this.posX+this.margin[3],-1*et+Je),H.call(this,"fill",!0),this.path=pt}var it=y([JSON.parse(JSON.stringify(Ce))],this.posX+this.margin[3],-et+Je+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*R.scale),ce=this.lineWidth,this.lineWidth=ce*R.scale);var tt=this.autoPaging!=="text";if(tt||it.y+it.h<=wt){if(tt||it.y>=Je&&it.x<=Ge){var Xe=tt?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||Ge-it.x)[0],Ot=y([JSON.parse(JSON.stringify(xe))],this.posX+this.margin[3],-et+Je+this.ctx.prevPageLastElemOffset)[0],Ft=tt&&(Ke>Oe||Ke<ke)&&b.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,Fe,null).clip().discardPath()),this.pdf.text(Xe,Ot.x,Ot.y,{angle:R.angle,align:G,renderingMode:R.renderingMode}),Ft&&this.pdf.restoreGraphicsState()}}else it.y<wt&&(this.ctx.prevPageLastElemOffset+=wt-it.y);R.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=ce)}else R.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*R.scale),ce=this.lineWidth,this.lineWidth=ce*R.scale),this.pdf.text(R.text,ne.x+this.posX,ne.y+this.posY,{angle:R.angle,align:G,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=ce)},U=function(R,G,te,J){te=te||0,J=J||0,this.pdf.internal.out(r(R+te)+" "+n(G+J)+" l")},Z=function(R,G,te){return this.pdf.lines(R,G,te,null,null)},ue=function(R,G,te,J,le,ne,ee,oe){this.pdf.internal.out([e(s(te+R)),e(i(J+G)),e(s(le+R)),e(i(ne+G)),e(s(ee+R)),e(i(oe+G)),"c"].join(" "))},ie=function(R,G,te,J){for(var le=2*Math.PI,ne=Math.PI/2;G>te;)G-=le;var ee=Math.abs(te-G);ee<le&&J&&(ee=le-ee);for(var oe=[],ye=J?-1:1,Te=G;ee>1e-5;){var ce=Te+ye*Math.min(ee,ne);oe.push(z.call(this,R,Te,ce)),ee-=Math.abs(ce-Te),Te=ce}return oe},z=function(R,G,te){var J=(te-G)/2,le=R*Math.cos(J),ne=R*Math.sin(J),ee=le,oe=-ne,ye=ee*ee+oe*oe,Te=ye+ee*le+oe*ne,ce=4/3*(Math.sqrt(2*ye*Te)-Te)/(ee*ne-oe*le),xe=ee-ce*oe,Ce=oe+ce*ee,me=xe,re=-Ce,yt=J+G,Oe=Math.cos(yt),ke=Math.sin(yt);return{x1:R*Math.cos(G),y1:R*Math.sin(G),x2:xe*Oe-Ce*ke,y2:xe*ke+Ce*Oe,x3:me*Oe-re*ke,y3:me*ke+re*Oe,x4:R*Math.cos(te),y4:R*Math.sin(te)}},W=function(R){return 180*R/Math.PI},ae=function(R,G,te,J,le,ne){var ee=R+.5*(te-R),oe=G+.5*(J-G),ye=le+.5*(te-le),Te=ne+.5*(J-ne),ce=Math.min(R,le,ee,ye),xe=Math.max(R,le,ee,ye),Ce=Math.min(G,ne,oe,Te),me=Math.max(G,ne,oe,Te);return new o(ce,Ce,xe-ce,me-Ce)},q=function(R,G,te,J,le,ne,ee,oe){var ye,Te,ce,xe,Ce,me,re,yt,Oe,ke,Ke,Je,Ye,wt,Fe=te-R,Ge=J-G,ze=le-te,et=ne-J,pt=ee-le,it=oe-ne;for(Te=0;Te<41;Te++)Oe=(re=(ce=R+(ye=Te/40)*Fe)+ye*((Ce=te+ye*ze)-ce))+ye*(Ce+ye*(le+ye*pt-Ce)-re),ke=(yt=(xe=G+ye*Ge)+ye*((me=J+ye*et)-xe))+ye*(me+ye*(ne+ye*it-me)-yt),Te==0?(Ke=Oe,Je=ke,Ye=Oe,wt=ke):(Ke=Math.min(Ke,Oe),Je=Math.min(Je,ke),Ye=Math.max(Ye,Oe),wt=Math.max(wt,ke));return new o(Math.round(Ke),Math.round(Je),Math.round(Ye-Ke),Math.round(wt-Je))},pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,G,te=(R=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:G}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})(Ut.API),function(t){var e=function(i){var a,o,A,c,d,f,m,g,B,b;for(o=[],A=0,c=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;c>A;A+=4)(d=(i.charCodeAt(A)<<24)+(i.charCodeAt(A+1)<<16)+(i.charCodeAt(A+2)<<8)+i.charCodeAt(A+3))!==0?(f=(d=((d=((d=((d=(d-(b=d%85))/85)-(B=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)%85,o.push(f+33,m+33,g+33,B+33,b+33)):o.push(122);return function(_,w){for(var y=w;y>0;y--)_.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},r=function(i){var a,o,A,c,d,f=String,m="length",g=255,B="charCodeAt",b="slice",_="replace";for(i[b](-2),i=i[b](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),A=[],c=0,d=(i+=a="uuuuu"[b](i[m]%5||5))[m];d>c;c+=5)o=52200625*(i[B](c)-33)+614125*(i[B](c+1)-33)+7225*(i[B](c+2)-33)+85*(i[B](c+3)-33)+(i[B](c+4)-33),A.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(w,y){for(var I=y;I>0;I--)w.pop()}(A,a[m]),f.fromCharCode.apply(f,A)},n=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var o="",A=0;A<i.length;A+=2)o+=String.fromCharCode("0x"+(i[A]+i[A+1]));return o},s=function(i){for(var a=new Uint8Array(i.length),o=i.length;o--;)a[o]=i.charCodeAt(o);return i=(a=X2(a)).reduce(function(A,c){return A+String.fromCharCode(c)},"")};t.processDataByFilters=function(i,a){var o=0,A=i||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":A=r(A),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":A=e(A),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":A=n(A),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":A=A.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":A=s(A),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:A,reverseChain:c.reverse().join(" ")}}}(Ut.API),function(t){t.loadFile=function(e,r,n){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(A,c,d){var f=new XMLHttpRequest,m=0,g=function(B){var b=B.length,_=[],w=String.fromCharCode;for(m=0;m<b;m+=1)_.push(w(255&B.charCodeAt(m)));return _.join("")};if(f.open("GET",A,!c),f.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(f.onload=function(){f.status===200?d(g(this.responseText)):d(void 0)}),f.send(null),c&&f.status===200)return g(f.responseText)}(s,i,a)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(Ut.API),function(t){function e(){return(kt.html2canvas?Promise.resolve(kt.html2canvas):To(()=>Promise.resolve().then(()=>mb),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(kt.DOMPurify?Promise.resolve(kt.DOMPurify):To(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var o=xr(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(a,o){var A=document.createElement(a);for(var c in o.className&&(A.className=o.className),o.innerHTML&&o.dompurify&&(A.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)A.style[c]=o.style[c];return A},i=function a(o){var A=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),A);return c=(c=c.setProgress(1,a,1,[a])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,o){return a.__proto__=o||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(A){switch(n(A)){case"string":return"string";case"element":return A.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(r).then(function(A){return this.set({src:s("div",{innerHTML:a,dompurify:A})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function A(c,d){for(var f=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||f.appendChild(A(m,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(f.value=c.value),f.addEventListener("load",function(){f.scrollTop=c.scrollTop,f.scrollLeft=c.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var A=Object.assign({},this.opt.html2canvas);return delete A.onrendered,o(this.prop.container,A)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var A=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,A.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,A.context2d.posX=this.opt.x,A.context2d.posY=this.opt.y,A.context2d.margin=this.opt.margin,A.context2d.fontFaces=c,c)for(var m=0;m<c.length;++m){var g=c[m],B=g.src.find(function(b){return b.format==="truetype"});B&&A.addFont(B.url,g.ref.name,g.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,A.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,o,A){return(A=A||"pdf").toLowerCase()==="img"||A.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},i.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(n(a)!=="object")return this;var o=Object.keys(a||{}).map(function(A){if(A in i.template.prop)return function(){this.prop[A]=a[A]};switch(A){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[A]=a[A]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(a,o){return this.then(function(){var A=a in i.template.prop?this.prop[a]:this.opt[a];return o?o(A):A})},i.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function o(A,c){return Math.floor(A*c/72*96)}return this.then(function(){(a=a||Ut.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,o,A,c){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),A!=null&&(this.progress.n=A),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,o,A,c){return this.setProgress(a?this.progress.val+a:null,o||null,A?this.progress.n+A:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(a,o){var A=this;return this.thenCore(a,o,function(c,d){return A.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(f){return A.updateProgress(null,c),f}).then(c,d).then(function(f){return A.updateProgress(1),f})})},i.prototype.thenCore=function(a,o,A){A=A||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),d=A.call(c,a,o);return i.convert(d,this.__proto__)},i.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},i.prototype.thenList=function(a){var o=this;return a.forEach(function(A){o=o.thenCore(A)}),o},i.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return i.convert(o,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Ut.getPageSize=function(a,o,A){if(xr(a)==="object"){var c=a;a=c.orientation,o=c.unit||o,A=c.format||A}o=o||"mm",A=A||"a4",a=(""+(a||"P")).toLowerCase();var d,f=(""+A).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var g,B=0,b=0;if(m.hasOwnProperty(f))B=m[f][1]/d,b=m[f][0]/d;else try{B=A[1],b=A[0]}catch{throw new Error("Invalid format: "+A)}if(a==="p"||a==="portrait")a="p",b>B&&(g=b,b=B,B=g);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",B>b&&(g=b,b=B,B=g)}return{width:b,height:B,unit:o,k:d,orientation:a}},t.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(rB):null;var A=new i(o);return o.worker?A:A.from(a).doCallback()}}(Ut.API),Ut.API.addJS=function(t){return dI=t,this.internal.events.subscribe("postPutResources",function(){dg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(dg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),uI=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+dI+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){dg!==void 0&&uI!==void 0&&this.internal.out("/Names <</JavaScript "+dg+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=n.exec(a);if(o!=null){var A=o[1];r.internal.newObjectDeferredBegin(A,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(i=0;i<c;i++){var f=r.internal.newObject();d.push(f);var m=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var a={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var a=n.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var A=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(Ut.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,i,a,o){var A,c=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(A=function(f){for(var m,g=256*f.charCodeAt(4)+f.charCodeAt(5),B=f.length,b={width:0,height:0,numcomponents:1},_=4;_<B;_+=2){if(_+=g,e.indexOf(f.charCodeAt(_+1))!==-1){m=256*f.charCodeAt(_+5)+f.charCodeAt(_+6),b={width:256*f.charCodeAt(_+7)+f.charCodeAt(_+8),height:m,numcomponents:f.charCodeAt(_+9)};break}g=256*f.charCodeAt(_+2)+f.charCodeAt(_+3)}return b}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:A.width,height:A.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:s}}return d}}(Ut.API);var Fu,hg,hI,fI,pI,Dz=function(){var t,e,r;function n(i){var a,o,A,c,d,f,m,g,B,b,_,w,y,I;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(a=this.readUInt32(),B=(function(){var D,H;for(H=[],D=0;D<4;++D)H.push(String.fromCharCode(this.data[this.pos++]));return H}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,f.delay=1e3*d/c,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(B==="fdAT"&&(this.pos+=4,a-=4),i=(f!=null?f.data:void 0)||this.imgData,w=0;0<=a?w<a:w>a;0<=a?++w:--w)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(A=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>A)throw new Error("More transparent colors than palette size");if((b=A-this.transparency.indexed.length)>0)for(y=0;0<=b?y<b:y>b;0<=b?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":m=(_=this.read(a)).indexOf(0),g=String.fromCharCode.apply(String,_.slice(0,m)),this.text[g]=String.fromCharCode.apply(String,_.slice(m+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(I=this.colorType)===4||I===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var a,o;for(o=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),A=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function d(f,m,g,B){var b,_,w,y,I,D,H,k,T,E,Q,j,S,N,U,Z,ue,ie,z,W,ae,q=Math.ceil((c.width-f)/g),pe=Math.ceil((c.height-m)/B),R=c.width==q&&c.height==pe;for(N=a*q,j=R?o:new Uint8Array(N*pe),D=i.length,S=0,_=0;S<pe&&A<D;){switch(i[A++]){case 0:for(y=ue=0;ue<N;y=ue+=1)j[_++]=i[A++];break;case 1:for(y=ie=0;ie<N;y=ie+=1)b=i[A++],I=y<a?0:j[_-a],j[_++]=(b+I)%256;break;case 2:for(y=z=0;z<N;y=z+=1)b=i[A++],w=(y-y%a)/a,U=S&&j[(S-1)*N+w*a+y%a],j[_++]=(U+b)%256;break;case 3:for(y=W=0;W<N;y=W+=1)b=i[A++],w=(y-y%a)/a,I=y<a?0:j[_-a],U=S&&j[(S-1)*N+w*a+y%a],j[_++]=(b+Math.floor((I+U)/2))%256;break;case 4:for(y=ae=0;ae<N;y=ae+=1)b=i[A++],w=(y-y%a)/a,I=y<a?0:j[_-a],S===0?U=Z=0:(U=j[(S-1)*N+w*a+y%a],Z=w&&j[(S-1)*N+(w-1)*a+y%a]),H=I+U-Z,k=Math.abs(H-I),E=Math.abs(H-U),Q=Math.abs(H-Z),T=k<=E&&k<=Q?I:E<=Q?U:Z,j[_++]=(b+T)%256;break;default:throw new Error("Invalid filter algorithm: "+i[A-1])}if(!R){var G=((m+S*B)*c.width+f)*a,te=S*N;for(y=0;y<q;y+=1){for(var J=0;J<a;J+=1)o[G++]=j[te++];G+=(g-1)*a}}S++}}return i=pz(i),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var i,a,o,A,c,d,f,m,g;for(o=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+o.length),A=0,i=0,a=f=0,m=o.length;f<m;a=f+=3)c[A++]=o[a],c[A++]=o[a+1],c[A++]=o[a+2],c[A++]=(g=d[i++])!=null?g:255;return c},n.prototype.copyToImageData=function(i,a){var o,A,c,d,f,m,g,B,b,_,w;if(A=this.colors,b=null,o=this.hasAlphaChannel,this.palette.length&&(b=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),A=4,o=!0),B=(c=i.data||i).length,f=b||a,d=m=0,A===1)for(;d<B;)g=b?4*a[d/4]:m,_=f[g++],c[d++]=_,c[d++]=_,c[d++]=_,c[d++]=o?f[g++]:255,m=g;else for(;d<B;)g=b?4*a[d/4]:m,c[d++]=f[g++],c[d++]=f[g++],c[d++]=f[g++],c[d++]=o?f[g++]:255,m=g},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(kt)==="[object Window]"){try{e=kt.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(i){var a;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var a,o,A,c,d,f,m,g;if(this.animation){for(g=[],o=d=0,f=(m=this.animation.frames).length;d<f;o=++d)a=m[o],A=i.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(A,c),a.imageData=A,g.push(a.image=t(A));return g}},n.prototype.renderFrame=function(i,a){var o,A,c;return o=(A=this.animation.frames)[a],c=A[a-1],a===0&&i.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(i){var a,o,A,c,d,f,m=this;return o=0,f=this.animation,c=f.numFrames,A=f.frames,d=f.numPlays,(a=function(){var g,B;if(g=o++%c,B=A[g],m.renderFrame(i,g),c>1&&o/c<d)return m.animation._timeout=setTimeout(a,B.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var a,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function jz(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<(7&s)+1;t[e++],t[e++];var o=null,A=null;i&&(o=e,A=a,e+=3*a);var c=!0,d=[],f=0,m=null,g=0,B=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,B=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=t[e++];f=t[e++]|t[e++]<<8,m=t[e++],!(1&b)&&(m=null),g=b>>2&7,e++;break;case 254:for(;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,D=t[e++],H=D>>6&1,k=1<<(7&D)+1,T=o,E=A,Q=!1;D>>7&&(Q=!0,T=e,E=k,e+=3*k);var j=e;for(e++;;){var S;if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}d.push({x:_,y:w,width:y,height:I,has_local_palette:Q,palette_offset:T,palette_size:E,data_offset:j,data_length:e-j,transparent_index:m,interlaced:!!H,delay:f,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return B},this.frameInfo=function(N){if(N<0||N>=d.length)throw new Error("Frame index out of range.");return d[N]},this.decodeAndBlitFrameBGRA=function(N,U){var Z=this.frameInfo(N),ue=Z.width*Z.height,ie=new Uint8Array(ue);mI(t,Z.data_offset,ie,ue);var z=Z.palette_offset,W=Z.transparent_index;W===null&&(W=256);var ae=Z.width,q=r-ae,pe=ae,R=4*(Z.y*r+Z.x),G=4*((Z.y+Z.height)*r+Z.x),te=R,J=4*q;Z.interlaced===!0&&(J+=4*r*7);for(var le=8,ne=0,ee=ie.length;ne<ee;++ne){var oe=ie[ne];if(pe===0&&(pe=ae,(te+=J)>=G&&(J=4*q+4*r*(le-1),te=R+(ae+q)*(le<<1),le>>=1)),oe===W)te+=4;else{var ye=t[z+3*oe],Te=t[z+3*oe+1],ce=t[z+3*oe+2];U[te++]=ce,U[te++]=Te,U[te++]=ye,U[te++]=255}--pe}},this.decodeAndBlitFrameRGBA=function(N,U){var Z=this.frameInfo(N),ue=Z.width*Z.height,ie=new Uint8Array(ue);mI(t,Z.data_offset,ie,ue);var z=Z.palette_offset,W=Z.transparent_index;W===null&&(W=256);var ae=Z.width,q=r-ae,pe=ae,R=4*(Z.y*r+Z.x),G=4*((Z.y+Z.height)*r+Z.x),te=R,J=4*q;Z.interlaced===!0&&(J+=4*r*7);for(var le=8,ne=0,ee=ie.length;ne<ee;++ne){var oe=ie[ne];if(pe===0&&(pe=ae,(te+=J)>=G&&(J=4*q+4*r*(le-1),te=R+(ae+q)*(le<<1),le>>=1)),oe===W)te+=4;else{var ye=t[z+3*oe],Te=t[z+3*oe+1],ce=t[z+3*oe+2];U[te++]=ye,U[te++]=Te,U[te++]=ce,U[te++]=255}--pe}}}function mI(t,e,r,n){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,A=s+1,c=(1<<A)-1,d=0,f=0,m=0,g=t[e++],B=new Int32Array(4096),b=null;;){for(;d<16&&g!==0;)f|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<A)break;var _=f&c;if(f>>=A,d-=A,_!==i){if(_===a)break;for(var w=_<o?_:b,y=0,I=w;I>i;)I=B[I]>>8,++y;var D=I;if(m+y+(w!==_?1:0)>n)return void Sr.log("Warning, gif stream longer than expected.");r[m++]=D;var H=m+=y;for(w!==_&&(r[m++]=D),I=w;y--;)I=B[I],r[--H]=255&I,I>>=8;b!==null&&o<4096&&(B[o++]=b<<8|D,o>=c+1&&A<12&&(++A,c=c<<1|1)),b=_}else o=a+1,c=(1<<(A=s+1))-1,b=null}return m!==n&&Sr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Gy(t){var e,r,n,s,i,a=Math.floor,o=new Array(64),A=new Array(64),c=new Array(64),d=new Array(64),f=new Array(65535),m=new Array(65535),g=new Array(64),B=new Array(64),b=[],_=0,w=7,y=new Array(64),I=new Array(64),D=new Array(64),H=new Array(256),k=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ue=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ie(R,G){for(var te=0,J=0,le=new Array,ne=1;ne<=16;ne++){for(var ee=1;ee<=R[ne];ee++)le[G[J]]=[],le[G[J]][0]=te,le[G[J]][1]=ne,J++,te++;te*=2}return le}function z(R){for(var G=R[0],te=R[1]-1;te>=0;)G&1<<te&&(_|=1<<w),te--,--w<0&&(_==255?(W(255),W(0)):W(_),w=7,_=0)}function W(R){b.push(R)}function ae(R){W(R>>8&255),W(255&R)}function q(R,G,te,J,le){for(var ne,ee=le[0],oe=le[240],ye=function(ke,Ke){var Je,Ye,wt,Fe,Ge,ze,et,pt,it,tt,Xe=0;for(it=0;it<8;++it){Je=ke[Xe],Ye=ke[Xe+1],wt=ke[Xe+2],Fe=ke[Xe+3],Ge=ke[Xe+4],ze=ke[Xe+5],et=ke[Xe+6];var Ot=Je+(pt=ke[Xe+7]),Ft=Je-pt,tn=Ye+et,Xt=Ye-et,cr=wt+ze,zn=wt-ze,Gt=Fe+Ge,Wn=Fe-Ge,Se=Ot+Gt,ut=Ot-Gt,Nt=tn+cr,at=tn-cr;ke[Xe]=Se+Nt,ke[Xe+4]=Se-Nt;var He=.707106781*(at+ut);ke[Xe+2]=ut+He,ke[Xe+6]=ut-He;var ht=.382683433*((Se=Wn+zn)-(at=Xt+Ft)),Bt=.5411961*Se+ht,Et=1.306562965*at+ht,$t=.707106781*(Nt=zn+Xt),or=Ft+$t,ct=Ft-$t;ke[Xe+5]=ct+Bt,ke[Xe+3]=ct-Bt,ke[Xe+1]=or+Et,ke[Xe+7]=or-Et,Xe+=8}for(Xe=0,it=0;it<8;++it){Je=ke[Xe],Ye=ke[Xe+8],wt=ke[Xe+16],Fe=ke[Xe+24],Ge=ke[Xe+32],ze=ke[Xe+40],et=ke[Xe+48];var rn=Je+(pt=ke[Xe+56]),Pn=Je-pt,Xr=Ye+et,Jr=Ye-et,Or=wt+ze,nn=wt-ze,be=Fe+Ge,rt=Fe-Ge,nt=rn+be,Kt=rn-be,Wt=Xr+Or,_t=Xr-Or;ke[Xe]=nt+Wt,ke[Xe+32]=nt-Wt;var mt=.707106781*(_t+Kt);ke[Xe+16]=Kt+mt,ke[Xe+48]=Kt-mt;var xs=.382683433*((nt=rt+nn)-(_t=Jr+Pn)),ha=.5411961*nt+xs,fa=1.306562965*_t+xs,pa=.707106781*(Wt=nn+Jr),qa=Pn+pa,Ga=Pn-pa;ke[Xe+40]=Ga+ha,ke[Xe+24]=Ga-ha,ke[Xe+8]=qa+fa,ke[Xe+56]=qa-fa,Xe++}for(it=0;it<64;++it)tt=ke[it]*Ke[it],g[it]=tt>0?tt+.5|0:tt-.5|0;return g}(R,G),Te=0;Te<64;++Te)B[T[Te]]=ye[Te];var ce=B[0]-te;te=B[0],ce==0?z(J[0]):(z(J[m[ne=32767+ce]]),z(f[ne]));for(var xe=63;xe>0&&B[xe]==0;)xe--;if(xe==0)return z(ee),te;for(var Ce,me=1;me<=xe;){for(var re=me;B[me]==0&&me<=xe;)++me;var yt=me-re;if(yt>=16){Ce=yt>>4;for(var Oe=1;Oe<=Ce;++Oe)z(oe);yt&=15}ne=32767+B[me],z(le[(yt<<4)+m[ne]]),z(f[ne]),me++}return xe!=63&&z(ee),te}function pe(R){R=Math.min(Math.max(R,1),100),i!=R&&(function(G){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var le=a((te[J]*G+50)/100);le=Math.min(Math.max(le,1),255),o[T[J]]=le}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ee=0;ee<64;ee++){var oe=a((ne[ee]*G+50)/100);oe=Math.min(Math.max(oe,1),255),A[T[ee]]=oe}for(var ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,ce=0;ce<8;ce++)for(var xe=0;xe<8;xe++)c[Te]=1/(o[T[Te]]*ye[ce]*ye[xe]*8),d[Te]=1/(A[T[Te]]*ye[ce]*ye[xe]*8),Te++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),i=R)}this.encode=function(R,G){G&&pe(G),b=new Array,_=0,w=7,ae(65496),ae(65504),ae(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),ae(1),ae(1),W(0),W(0),function(){ae(65499),ae(132),W(0);for(var Ye=0;Ye<64;Ye++)W(o[Ye]);W(1);for(var wt=0;wt<64;wt++)W(A[wt])}(),function(Ye,wt){ae(65472),ae(17),W(8),ae(wt),ae(Ye),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(R.width,R.height),function(){ae(65476),ae(418),W(0);for(var Ye=0;Ye<16;Ye++)W(E[Ye+1]);for(var wt=0;wt<=11;wt++)W(Q[wt]);W(16);for(var Fe=0;Fe<16;Fe++)W(j[Fe+1]);for(var Ge=0;Ge<=161;Ge++)W(S[Ge]);W(1);for(var ze=0;ze<16;ze++)W(N[ze+1]);for(var et=0;et<=11;et++)W(U[et]);W(17);for(var pt=0;pt<16;pt++)W(Z[pt+1]);for(var it=0;it<=161;it++)W(ue[it])}(),ae(65498),ae(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var te=0,J=0,le=0;_=0,w=7,this.encode.displayName="_encode_";for(var ne,ee,oe,ye,Te,ce,xe,Ce,me,re=R.data,yt=R.width,Oe=R.height,ke=4*yt,Ke=0;Ke<Oe;){for(ne=0;ne<ke;){for(Te=ke*Ke+ne,xe=-1,Ce=0,me=0;me<64;me++)ce=Te+(Ce=me>>3)*ke+(xe=4*(7&me)),Ke+Ce>=Oe&&(ce-=ke*(Ke+1+Ce-Oe)),ne+xe>=ke&&(ce-=ne+xe-ke+4),ee=re[ce++],oe=re[ce++],ye=re[ce++],y[me]=(k[ee]+k[oe+256>>0]+k[ye+512>>0]>>16)-128,I[me]=(k[ee+768>>0]+k[oe+1024>>0]+k[ye+1280>>0]>>16)-128,D[me]=(k[ee+1280>>0]+k[oe+1536>>0]+k[ye+1792>>0]>>16)-128;te=q(y,c,te,e,n),J=q(I,d,J,r,s),le=q(D,d,le,r,s),ne+=32}Ke+=8}if(w>=0){var Je=[];Je[1]=w+1,Je[0]=(1<<w+1)-1,z(Je)}return ae(65497),new Uint8Array(b)},t=t||50,function(){for(var R=String.fromCharCode,G=0;G<256;G++)H[G]=R(G)}(),e=ie(E,Q),r=ie(N,U),n=ie(j,S),s=ie(Z,ue),function(){for(var R=1,G=2,te=1;te<=15;te++){for(var J=R;J<G;J++)m[32767+J]=te,f[32767+J]=[],f[32767+J][1]=te,f[32767+J][0]=J;for(var le=-(G-1);le<=-R;le++)m[32767+le]=te,f[32767+le]=[],f[32767+le][1]=te,f[32767+le][0]=G-1+le;R<<=1,G<<=1}}(),function(){for(var R=0;R<256;R++)k[R]=19595*R,k[R+256>>0]=38470*R,k[R+512>>0]=7471*R+32768,k[R+768>>0]=-11059*R,k[R+1024>>0]=-21709*R,k[R+1280>>0]=32768*R+8421375,k[R+1536>>0]=-27439*R,k[R+1792>>0]=-5329*R}(),pe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function $i(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function gI(t){function e(E){if(!E)throw Error("assert :P")}function r(E,Q,j){for(var S=0;4>S;S++)if(E[Q+S]!=j.charCodeAt(S))return!0;return!1}function n(E,Q,j,S,N){for(var U=0;U<N;U++)E[Q+U]=j[S+U]}function s(E,Q,j,S){for(var N=0;N<S;N++)E[Q+N]=j}function i(E){return new Int32Array(E)}function a(E,Q){for(var j=[],S=0;S<E;S++)j.push(new Q);return j}function o(E,Q){var j=[];return function S(N,U,Z){for(var ue=Z[U],ie=0;ie<ue&&(N.push(Z.length>U+1?[]:new Q),!(Z.length<U+1));ie++)S(N[ie],U+1,Z)}(j,0,E),j}var A=function(){var E=this;function Q(u,p){for(var x=1<<p-1>>>0;u&x;)x>>>=1;return x?(u&x-1)+x:u}function j(u,p,x,F,M){e(!(F%x));do u[p+(F-=x)]=M;while(0<F)}function S(u,p,x,F,M){if(e(2328>=M),512>=M)var V=i(512);else if((V=i(M))==null)return 0;return function(K,X,Y,se,he,Ee){var _e,Be,je=X,Ue=1<<Y,fe=i(16),ge=i(16);for(e(he!=0),e(se!=null),e(K!=null),e(0<Y),Be=0;Be<he;++Be){if(15<se[Be])return 0;++fe[se[Be]]}if(fe[0]==he)return 0;for(ge[1]=0,_e=1;15>_e;++_e){if(fe[_e]>1<<_e)return 0;ge[_e+1]=ge[_e]+fe[_e]}for(Be=0;Be<he;++Be)_e=se[Be],0<se[Be]&&(Ee[ge[_e]++]=Be);if(ge[15]==1)return(se=new N).g=0,se.value=Ee[0],j(K,je,1,Ue,se),Ue;var Re,Me=-1,De=Ue-1,gt=0,st=1,Qt=1,At=1<<Y;for(Be=0,_e=1,he=2;_e<=Y;++_e,he<<=1){if(st+=Qt<<=1,0>(Qt-=fe[_e]))return 0;for(;0<fe[_e];--fe[_e])(se=new N).g=_e,se.value=Ee[Be++],j(K,je+gt,he,At,se),gt=Q(gt,_e)}for(_e=Y+1,he=2;15>=_e;++_e,he<<=1){if(st+=Qt<<=1,0>(Qt-=fe[_e]))return 0;for(;0<fe[_e];--fe[_e]){if(se=new N,(gt&De)!=Me){for(je+=At,Re=1<<(Me=_e)-Y;15>Me&&!(0>=(Re-=fe[Me]));)++Me,Re<<=1;Ue+=At=1<<(Re=Me-Y),K[X+(Me=gt&De)].g=Re+Y,K[X+Me].value=je-X-Me}se.g=_e-Y,se.value=Ee[Be++],j(K,je+(gt>>Y),he,At,se),gt=Q(gt,_e)}}return st!=2*ge[15]-1?0:Ue}(u,p,x,F,M,V)}function N(){this.value=this.g=0}function U(){this.value=this.g=0}function Z(){this.G=a(5,N),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Jn,U)}function ue(u,p,x,F){e(u!=null),e(p!=null),e(2147483648>F),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=p,u.pa=x,u.Jd=p,u.Yc=x+F,u.Zc=4<=F?x+F-4+1:x,ne(u)}function ie(u,p){for(var x=0;0<p--;)x|=oe(u,128)<<p;return x}function z(u,p){var x=ie(u,p);return ee(u)?-x:x}function W(u,p,x,F){var M,V=0;for(e(u!=null),e(p!=null),e(4294967288>F),u.Sb=F,u.Ra=0,u.u=0,u.h=0,4<F&&(F=4),M=0;M<F;++M)V+=p[x+M]<<8*M;u.Ra=V,u.bb=F,u.oa=p,u.pa=x}function ae(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<ou-8>>>0,++u.bb,u.u-=8;te(u)&&(u.h=1,u.u=0)}function q(u,p){if(e(0<=p),!u.h&&p<=au){var x=G(u)&iu[p];return u.u+=p,ae(u),x}return u.h=1,u.u=0}function pe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(u){return u.Ra>>>(u.u&ou-1)>>>0}function te(u){return e(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>ou}function J(u,p){u.u=p,u.h=te(u)}function le(u){u.u>=sh&&(e(u.u>=sh),ae(u))}function ne(u){e(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(e(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function ee(u){return ie(u,1)}function oe(u,p){var x=u.Ca;0>u.b&&ne(u);var F=u.b,M=x*p>>>8,V=(u.I>>>F>M)+0;for(V?(x-=M,u.I-=M+1<<F>>>0):x=M+1,F=x,M=0;256<=F;)M+=8,F>>=8;return F=7^M+Ds[F],u.b-=F,u.Ca=(x<<F)-1,V}function ye(u,p,x){u[p+0]=x>>24&255,u[p+1]=x>>16&255,u[p+2]=x>>8&255,u[p+3]=x>>0&255}function Te(u,p){return u[p+0]<<0|u[p+1]<<8}function ce(u,p){return Te(u,p)|u[p+2]<<16}function xe(u,p){return Te(u,p)|Te(u,p+2)<<16}function Ce(u,p){var x=1<<p;return e(u!=null),e(0<p),u.X=i(x),u.X==null?0:(u.Mb=32-p,u.Xa=p,1)}function me(u,p){e(u!=null),e(p!=null),e(u.Xa==p.Xa),n(p.X,0,u.X,0,1<<p.Xa)}function re(){this.X=[],this.Xa=this.Mb=0}function yt(u,p,x,F){e(x!=null),e(F!=null);var M=x[0],V=F[0];return M==0&&(M=(u*V+p/2)/p),V==0&&(V=(p*M+u/2)/u),0>=M||0>=V?0:(x[0]=M,F[0]=V,1)}function Oe(u,p){return u+(1<<p)-1>>>p}function ke(u,p){return((4278255360&u)+(4278255360&p)>>>0&4278255360)+((16711935&u)+(16711935&p)>>>0&16711935)>>>0}function Ke(u,p){E[p]=function(x,F,M,V,K,X,Y){var se;for(se=0;se<K;++se){var he=E[u](X[Y+se-1],M,V+se);X[Y+se]=ke(x[F+se],he)}}}function Je(){this.ud=this.hd=this.jd=0}function Ye(u,p){return((4278124286&(u^p))>>>1)+(u&p)>>>0}function wt(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function Fe(u,p){return wt(u+(u-p+.5>>1))}function Ge(u,p,x){return Math.abs(p-x)-Math.abs(u-x)}function ze(u,p,x,F,M,V,K){for(F=V[K-1],x=0;x<M;++x)V[K+x]=F=ke(u[p+x],F)}function et(u,p,x,F,M){var V;for(V=0;V<x;++V){var K=u[p+V],X=K>>8&255,Y=16711935&(Y=(Y=16711935&K)+((X<<16)+X));F[M+V]=(4278255360&K)+Y>>>0}}function pt(u,p){p.jd=u>>0&255,p.hd=u>>8&255,p.ud=u>>16&255}function it(u,p,x,F,M,V){var K;for(K=0;K<F;++K){var X=p[x+K],Y=X>>>8,se=X,he=255&(he=(he=X>>>16)+((u.jd<<24>>24)*(Y<<24>>24)>>>5));se=255&(se=(se=se+((u.hd<<24>>24)*(Y<<24>>24)>>>5))+((u.ud<<24>>24)*(he<<24>>24)>>>5)),M[V+K]=(4278255360&X)+(he<<16)+se}}function tt(u,p,x,F,M){E[p]=function(V,K,X,Y,se,he,Ee,_e,Be){for(Y=Ee;Y<_e;++Y)for(Ee=0;Ee<Be;++Ee)se[he++]=M(X[F(V[K++])])},E[u]=function(V,K,X,Y,se,he,Ee){var _e=8>>V.b,Be=V.Ea,je=V.K[0],Ue=V.w;if(8>_e)for(V=(1<<V.b)-1,Ue=(1<<_e)-1;K<X;++K){var fe,ge=0;for(fe=0;fe<Be;++fe)fe&V||(ge=F(Y[se++])),he[Ee++]=M(je[ge&Ue]),ge>>=_e}else E["VP8LMapColor"+x](Y,se,je,Ue,he,Ee,K,X,Be)}}function Xe(u,p,x,F,M){for(x=p+x;p<x;){var V=u[p++];F[M++]=V>>16&255,F[M++]=V>>8&255,F[M++]=V>>0&255}}function Ot(u,p,x,F,M){for(x=p+x;p<x;){var V=u[p++];F[M++]=V>>16&255,F[M++]=V>>8&255,F[M++]=V>>0&255,F[M++]=V>>24&255}}function Ft(u,p,x,F,M){for(x=p+x;p<x;){var V=(K=u[p++])>>16&240|K>>12&15,K=K>>0&240|K>>28&15;F[M++]=V,F[M++]=K}}function tn(u,p,x,F,M){for(x=p+x;p<x;){var V=(K=u[p++])>>16&248|K>>13&7,K=K>>5&224|K>>3&31;F[M++]=V,F[M++]=K}}function Xt(u,p,x,F,M){for(x=p+x;p<x;){var V=u[p++];F[M++]=V>>0&255,F[M++]=V>>8&255,F[M++]=V>>16&255}}function cr(u,p,x,F,M,V){if(V==0)for(x=p+x;p<x;)ye(F,((V=u[p++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),M+=32;else n(F,M,u,p,x)}function zn(u,p){E[p][0]=E[u+"0"],E[p][1]=E[u+"1"],E[p][2]=E[u+"2"],E[p][3]=E[u+"3"],E[p][4]=E[u+"4"],E[p][5]=E[u+"5"],E[p][6]=E[u+"6"],E[p][7]=E[u+"7"],E[p][8]=E[u+"8"],E[p][9]=E[u+"9"],E[p][10]=E[u+"10"],E[p][11]=E[u+"11"],E[p][12]=E[u+"12"],E[p][13]=E[u+"13"],E[p][14]=E[u+"0"],E[p][15]=E[u+"0"]}function Gt(u){return u==mv||u==gv||u==rm||u==wv}function Wn(){this.eb=[],this.size=this.A=this.fb=0}function Se(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ut(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Wn,this.f.kb=new Se,this.sd=null}function Nt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function at(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function He(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function ht(u,p){var x=u.T,F=p.ba.f.RGBA,M=F.eb,V=F.fb+u.ka*F.A,K=Bi[p.ba.S],X=u.y,Y=u.O,se=u.f,he=u.N,Ee=u.ea,_e=u.W,Be=p.cc,je=p.dc,Ue=p.Mc,fe=p.Nc,ge=u.ka,Re=u.ka+u.T,Me=u.U,De=Me+1>>1;for(ge==0?K(X,Y,null,null,se,he,Ee,_e,se,he,Ee,_e,M,V,null,null,Me):(K(p.ec,p.fc,X,Y,Be,je,Ue,fe,se,he,Ee,_e,M,V-F.A,M,V,Me),++x);ge+2<Re;ge+=2)Be=se,je=he,Ue=Ee,fe=_e,he+=u.Rc,_e+=u.Rc,V+=2*F.A,K(X,(Y+=2*u.fa)-u.fa,X,Y,Be,je,Ue,fe,se,he,Ee,_e,M,V-F.A,M,V,Me);return Y+=u.fa,u.j+Re<u.o?(n(p.ec,p.fc,X,Y,Me),n(p.cc,p.dc,se,he,De),n(p.Mc,p.Nc,Ee,_e,De),x--):1&Re||K(X,Y,null,null,se,he,Ee,_e,se,he,Ee,_e,M,V+F.A,null,null,Me),x}function Bt(u,p,x){var F=u.F,M=[u.J];if(F!=null){var V=u.U,K=p.ba.S,X=K==tm||K==rm;p=p.ba.f.RGBA;var Y=[0],se=u.ka;Y[0]=u.T,u.Kb&&(se==0?--Y[0]:(--se,M[0]-=u.width),u.j+u.ka+u.T==u.o&&(Y[0]=u.o-u.j-se));var he=p.eb;se=p.fb+se*p.A,u=Tr(F,M[0],u.width,V,Y,he,se+(X?0:3),p.A),e(x==Y),u&&Gt(K)&&vi(he,se,X,V,Y,p.A)}return 0}function Et(u){var p=u.ma,x=p.ba.S,F=11>x,M=x==Zp||x==em||x==tm||x==pv||x==12||Gt(x);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!rh(p.Oa,u,M?11:12))return 0;if(M&&Gt(x)&&Ve(),u.da)alert("todo:use_scaling");else{if(F){if(p.Ib=He,u.Kb){if(x=u.U+1>>1,p.memory=i(u.U+2*x),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+u.U,p.Mc=p.cc,p.Nc=p.dc+x,p.Ib=ht,Ve()}}else alert("todo:EmitYUV");M&&(p.Jb=Bt,F&&ve())}if(F&&!Sb){for(u=0;256>u;++u)Y3[u]=89858*(u-128)+sm>>nm,tQ[u]=-22014*(u-128)+sm,eQ[u]=-45773*(u-128),Z3[u]=113618*(u-128)+sm>>nm;for(u=uh;u<Bv;++u)p=76283*(u-16)+sm>>nm,rQ[u-uh]=fr(p,255),nQ[u-uh]=fr(p+8>>4,15);Sb=1}return 1}function $t(u){var p=u.ma,x=u.U,F=u.T;return e(!(1&u.ka)),0>=x||0>=F?0:(x=p.Ib(u,p),p.Jb!=null&&p.Jb(u,p,x),p.Dc+=x,1)}function or(u){u.ma.memory=null}function ct(u,p,x,F){return q(u,8)!=47?0:(p[0]=q(u,14)+1,x[0]=q(u,14)+1,F[0]=q(u,1),q(u,3)!=0?0:!u.h)}function rn(u,p){if(4>u)return u+1;var x=u-2>>1;return(2+(1&u)<<x)+q(p,x)+1}function Pn(u,p){return 120<p?p-120:1<=(x=((x=D3[p-1])>>4)*u+(8-(15&x)))?x:1;var x}function Xr(u,p,x){var F=G(x),M=u[p+=255&F].g-8;return 0<M&&(J(x,x.u+8),F=G(x),p+=u[p].value,p+=F&(1<<M)-1),J(x,x.u+u[p].g),u[p].value}function Jr(u,p,x){return x.g+=u.g,x.value+=u.value<<p>>>0,e(8>=x.g),u.g}function Or(u,p,x){var F=u.xc;return e((p=F==0?0:u.vc[u.md*(x>>F)+(p>>F)])<u.Wb),u.Ya[p]}function nn(u,p,x,F){var M=u.ab,V=u.c*p,K=u.C;p=K+p;var X=x,Y=F;for(F=u.Ta,x=u.Ua;0<M--;){var se=u.gc[M],he=K,Ee=p,_e=X,Be=Y,je=(Y=F,X=x,se.Ea);switch(e(he<Ee),e(Ee<=se.nc),se.hc){case 2:Gp(_e,Be,(Ee-he)*je,Y,X);break;case 0:var Ue=he,fe=Ee,ge=Y,Re=X,Me=(At=se).Ea;Ue==0&&(hv(_e,Be,null,null,1,ge,Re),ze(_e,Be+1,0,0,Me-1,ge,Re+1),Be+=Me,Re+=Me,++Ue);for(var De=1<<At.b,gt=De-1,st=Oe(Me,At.b),Qt=At.K,At=At.w+(Ue>>At.b)*st;Ue<fe;){var dr=Qt,wr=At,Ar=1;for(ih(_e,Be,ge,Re-Me,1,ge,Re);Ar<Me;){var rr=(Ar&~gt)+De;rr>Me&&(rr=Me),(0,oA[dr[wr++]>>8&15])(_e,Be+ +Ar,ge,Re+Ar-Me,rr-Ar,ge,Re+Ar),Ar=rr}Be+=Me,Re+=Me,++Ue&gt||(At+=st)}Ee!=se.nc&&n(Y,X-je,Y,X+(Ee-he-1)*je,je);break;case 1:for(je=_e,fe=Be,Me=(_e=se.Ea)-(Re=_e&~(ge=(Be=1<<se.b)-1)),Ue=Oe(_e,se.b),De=se.K,se=se.w+(he>>se.b)*Ue;he<Ee;){for(gt=De,st=se,Qt=new Je,At=fe+Re,dr=fe+_e;fe<At;)pt(gt[st++],Qt),Vl(Qt,je,fe,Be,Y,X),fe+=Be,X+=Be;fe<dr&&(pt(gt[st++],Qt),Vl(Qt,je,fe,Me,Y,X),fe+=Me,X+=Me),++he&ge||(se+=Ue)}break;case 3:if(_e==Y&&Be==X&&0<se.b){for(fe=Y,_e=je=X+(Ee-he)*je-(Re=(Ee-he)*Oe(se.Ea,se.b)),Be=Y,ge=X,Ue=[],Re=(Me=Re)-1;0<=Re;--Re)Ue[Re]=Be[ge+Re];for(Re=Me-1;0<=Re;--Re)fe[_e+Re]=Ue[Re];mi(se,he,Ee,Y,je,Y,X)}else mi(se,he,Ee,_e,Be,Y,X)}X=F,Y=x}Y!=x&&n(F,x,X,Y,V)}function be(u,p){var x=u.V,F=u.Ba+u.c*u.C,M=p-u.C;if(e(p<=u.l.o),e(16>=M),0<M){var V=u.l,K=u.Ta,X=u.Ua,Y=V.width;if(nn(u,M,x,F),M=X=[X],e((x=u.C)<(F=p)),e(V.v<V.va),F>V.o&&(F=V.o),x<V.j){var se=V.j-x;x=V.j,M[0]+=se*Y}if(x>=F?x=0:(M[0]+=4*V.v,V.ka=x-V.j,V.U=V.va-V.v,V.T=F-x,x=1),x){if(X=X[0],11>(x=u.ca).S){var he=x.f.RGBA,Ee=(F=x.S,M=V.U,V=V.T,se=he.eb,he.A),_e=V;for(he=he.fb+u.Ma*he.A;0<_e--;){var Be=K,je=X,Ue=M,fe=se,ge=he;switch(F){case Yp:js(Be,je,Ue,fe,ge);break;case Zp:Cs(Be,je,Ue,fe,ge);break;case mv:Cs(Be,je,Ue,fe,ge),vi(fe,ge,0,Ue,1,0);break;case yb:no(Be,je,Ue,fe,ge);break;case em:cr(Be,je,Ue,fe,ge,1);break;case gv:cr(Be,je,Ue,fe,ge,1),vi(fe,ge,0,Ue,1,0);break;case tm:cr(Be,je,Ue,fe,ge,0);break;case rm:cr(Be,je,Ue,fe,ge,0),vi(fe,ge,1,Ue,1,0);break;case pv:AA(Be,je,Ue,fe,ge);break;case wv:AA(Be,je,Ue,fe,ge),Fr(fe,ge,Ue,1,0);break;case Bb:ro(Be,je,Ue,fe,ge);break;default:e(0)}X+=Y,he+=Ee}u.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");e(u.Ma<=x.height)}}u.C=p,e(u.C<=u.i)}function rt(u){var p;if(0<u.ua)return 0;for(p=0;p<u.Wb;++p){var x=u.Ya[p].G,F=u.Ya[p].H;if(0<x[1][F[1]+0].g||0<x[2][F[2]+0].g||0<x[3][F[3]+0].g)return 0}return 1}function nt(u,p,x,F,M,V){if(u.Z!=0){var K=u.qd,X=u.rd;for(e(dA[u.Z]!=null);p<x;++p)dA[u.Z](K,X,F,M,F,M,V),K=F,X=M,M+=V;u.qd=K,u.rd=X}}function Kt(u,p){var x=u.l.ma,F=x.Z==0||x.Z==1?u.l.j:u.C;if(F=u.C<F?F:u.C,e(p<=u.l.o),p>F){var M=u.l.width,V=x.ca,K=x.tb+M*F,X=u.V,Y=u.Ba+u.c*F,se=u.gc;e(u.ab==1),e(se[0].hc==3),zp(se[0],F,p,X,Y,V,K),nt(x,F,p,V,K,M)}u.C=u.Ma=p}function Wt(u,p,x,F,M,V,K){var X=u.$/F,Y=u.$%F,se=u.m,he=u.s,Ee=x+u.$,_e=Ee;M=x+F*M;var Be=x+F*V,je=280+he.ua,Ue=u.Pb?X:16777216,fe=0<he.ua?he.Wa:null,ge=he.wc,Re=Ee<Be?Or(he,Y,X):null;e(u.C<V),e(Be<=M);var Me=!1;e:for(;;){for(;Me||Ee<Be;){var De=0;if(X>=Ue){var gt=Ee-x;e((Ue=u).Pb),Ue.wd=Ue.m,Ue.xd=gt,0<Ue.s.ua&&me(Ue.s.Wa,Ue.s.vb),Ue=X+O3}if(Y&ge||(Re=Or(he,Y,X)),e(Re!=null),Re.Qb&&(p[Ee]=Re.qb,Me=!0),!Me)if(le(se),Re.jc){De=se,gt=p;var st=Ee,Qt=Re.pd[G(De)&Jn-1];e(Re.jc),256>Qt.g?(J(De,De.u+Qt.g),gt[st]=Qt.value,De=0):(J(De,De.u+Qt.g-256),e(256<=Qt.value),De=Qt.value),De==0&&(Me=!0)}else De=Xr(Re.G[0],Re.H[0],se);if(se.h)break;if(Me||256>De){if(!Me)if(Re.nd)p[Ee]=(Re.qb|De<<8)>>>0;else{if(le(se),Me=Xr(Re.G[1],Re.H[1],se),le(se),gt=Xr(Re.G[2],Re.H[2],se),st=Xr(Re.G[3],Re.H[3],se),se.h)break;p[Ee]=(st<<24|Me<<16|De<<8|gt)>>>0}if(Me=!1,++Ee,++Y>=F&&(Y=0,++X,K!=null&&X<=V&&!(X%16)&&K(u,X),fe!=null))for(;_e<Ee;)De=p[_e++],fe.X[(506832829*De&4294967295)>>>fe.Mb]=De}else if(280>De){if(De=rn(De-256,se),gt=Xr(Re.G[4],Re.H[4],se),le(se),gt=Pn(F,gt=rn(gt,se)),se.h)break;if(Ee-x<gt||M-Ee<De)break e;for(st=0;st<De;++st)p[Ee+st]=p[Ee+st-gt];for(Ee+=De,Y+=De;Y>=F;)Y-=F,++X,K!=null&&X<=V&&!(X%16)&&K(u,X);if(e(Ee<=M),Y&ge&&(Re=Or(he,Y,X)),fe!=null)for(;_e<Ee;)De=p[_e++],fe.X[(506832829*De&4294967295)>>>fe.Mb]=De}else{if(!(De<je))break e;for(Me=De-280,e(fe!=null);_e<Ee;)De=p[_e++],fe.X[(506832829*De&4294967295)>>>fe.Mb]=De;De=Ee,e(!(Me>>>(gt=fe).Xa)),p[De]=gt.X[Me],Me=!0}Me||e(se.h==te(se))}if(u.Pb&&se.h&&Ee<M)e(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&me(u.s.vb,u.s.Wa);else{if(se.h)break e;K!=null&&K(u,X>V?V:X),u.a=0,u.$=Ee-x}return 1}return u.a=3,0}function _t(u){e(u!=null),u.vc=null,u.yc=null,u.Ya=null;var p=u.Wa;p!=null&&(p.X=null),u.vb=null,e(u!=null)}function mt(){var u=new nu;return u==null?null:(u.a=0,u.xb=Cb,zn("Predictor","VP8LPredictors"),zn("Predictor","VP8LPredictors_C"),zn("PredictorAdd","VP8LPredictorsAdd"),zn("PredictorAdd","VP8LPredictorsAdd_C"),Gp=et,Vl=it,js=Xe,Cs=Ot,AA=Ft,ro=tn,no=Xt,E.VP8LMapColor32b=Au,E.VP8LMapColor8b=Wp,u)}function xs(u,p,x,F,M){var V=1,K=[u],X=[p],Y=F.m,se=F.s,he=null,Ee=0;e:for(;;){if(x)for(;V&&q(Y,1);){var _e=K,Be=X,je=F,Ue=1,fe=je.m,ge=je.gc[je.ab],Re=q(fe,2);if(je.Oc&1<<Re)V=0;else{switch(je.Oc|=1<<Re,ge.hc=Re,ge.Ea=_e[0],ge.nc=Be[0],ge.K=[null],++je.ab,e(4>=je.ab),Re){case 0:case 1:ge.b=q(fe,3)+2,Ue=xs(Oe(ge.Ea,ge.b),Oe(ge.nc,ge.b),0,je,ge.K),ge.K=ge.K[0];break;case 3:var Me,De=q(fe,8)+1,gt=16<De?0:4<De?1:2<De?2:3;if(_e[0]=Oe(ge.Ea,gt),ge.b=gt,Me=Ue=xs(De,1,0,je,ge.K)){var st,Qt=De,At=ge,dr=1<<(8>>At.b),wr=i(dr);if(wr==null)Me=0;else{var Ar=At.K[0],rr=At.w;for(wr[0]=At.K[0][0],st=1;st<1*Qt;++st)wr[st]=ke(Ar[rr+st],wr[st-1]);for(;st<4*dr;++st)wr[st]=0;At.K[0]=null,At.K[0]=wr,Me=1}}Ue=Me;break;case 2:break;default:e(0)}V=Ue}}if(K=K[0],X=X[0],V&&q(Y,1)&&!(V=1<=(Ee=q(Y,4))&&11>=Ee)){F.a=3;break e}var Nr;if(Nr=V)t:{var Cr,zt,Bn,Os=F,xn=K,Ms=X,vr=Ee,ti=x,ri=Os.m,Ln=Os.s,Yn=[null],_s=1,xi=0,Ea=j3[vr];r:for(;;){if(ti&&q(ri,1)){var kn=q(ri,3)+2,oo=Oe(xn,kn),Wl=Oe(Ms,kn),hu=oo*Wl;if(!xs(oo,Wl,0,Os,Yn))break r;for(Yn=Yn[0],Ln.xc=kn,Cr=0;Cr<hu;++Cr){var hA=Yn[Cr]>>8&65535;Yn[Cr]=hA,hA>=_s&&(_s=hA+1)}}if(ri.h)break r;for(zt=0;5>zt;++zt){var an=xb[zt];!zt&&0<vr&&(an+=1<<vr),xi<an&&(xi=an)}var xv=a(_s*Ea,N),Ub=_s,Qb=a(Ub,Z);if(Qb==null)var am=null;else e(65536>=Ub),am=Qb;var dh=i(xi);if(am==null||dh==null||xv==null){Os.a=1;break r}var om=xv;for(Cr=Bn=0;Cr<_s;++Cr){var Gi=am[Cr],fu=Gi.G,pu=Gi.H,Pb=0,Am=1,Lb=0;for(zt=0;5>zt;++zt){an=xb[zt],fu[zt]=om,pu[zt]=Bn,!zt&&0<vr&&(an+=1<<vr);s:{var lm,bv=an,cm=Os,hh=dh,aQ=om,oQ=Bn,Cv=0,fA=cm.m,AQ=q(fA,1);if(s(hh,0,0,bv),AQ){var lQ=q(fA,1)+1,cQ=q(fA,1),kb=q(fA,cQ==0?1:8);hh[kb]=1,lQ==2&&(hh[kb=q(fA,8)]=1);var um=1}else{var Rb=i(19),Db=q(fA,4)+4;if(19<Db){cm.a=3;var dm=0;break s}for(lm=0;lm<Db;++lm)Rb[R3[lm]]=q(fA,3);var Ev=void 0,fh=void 0,jb=cm,uQ=Rb,hm=bv,Ob=hh,_v=0,pA=jb.m,Mb=8,Hb=a(128,N);n:for(;S(Hb,0,7,uQ,19);){if(q(pA,1)){var dQ=2+2*q(pA,3);if((Ev=2+q(pA,dQ))>hm)break n}else Ev=hm;for(fh=0;fh<hm&&Ev--;){le(pA);var Vb=Hb[0+(127&G(pA))];J(pA,pA.u+Vb.g);var mu=Vb.value;if(16>mu)Ob[fh++]=mu,mu!=0&&(Mb=mu);else{var hQ=mu==16,Kb=mu-16,fQ=L3[Kb],qb=q(pA,P3[Kb])+fQ;if(fh+qb>hm)break n;for(var pQ=hQ?Mb:0;0<qb--;)Ob[fh++]=pQ}}_v=1;break n}_v||(jb.a=3),um=_v}(um=um&&!fA.h)&&(Cv=S(aQ,oQ,8,hh,bv)),um&&Cv!=0?dm=Cv:(cm.a=3,dm=0)}if(dm==0)break r;if(Am&&k3[zt]==1&&(Am=om[Bn].g==0),Pb+=om[Bn].g,Bn+=dm,3>=zt){var ph,Iv=dh[0];for(ph=1;ph<an;++ph)dh[ph]>Iv&&(Iv=dh[ph]);Lb+=Iv}}if(Gi.nd=Am,Gi.Qb=0,Am&&(Gi.qb=(fu[3][pu[3]+0].value<<24|fu[1][pu[1]+0].value<<16|fu[2][pu[2]+0].value)>>>0,Pb==0&&256>fu[0][pu[0]+0].value&&(Gi.Qb=1,Gi.qb+=fu[0][pu[0]+0].value<<8)),Gi.jc=!Gi.Qb&&6>Lb,Gi.jc){var fm,Ao=Gi;for(fm=0;fm<Jn;++fm){var mA=fm,gA=Ao.pd[mA],pm=Ao.G[0][Ao.H[0]+mA];256<=pm.value?(gA.g=pm.g+256,gA.value=pm.value):(gA.g=0,gA.value=0,mA>>=Jr(pm,8,gA),mA>>=Jr(Ao.G[1][Ao.H[1]+mA],16,gA),mA>>=Jr(Ao.G[2][Ao.H[2]+mA],0,gA),Jr(Ao.G[3][Ao.H[3]+mA],24,gA))}}}Ln.vc=Yn,Ln.Wb=_s,Ln.Ya=am,Ln.yc=xv,Nr=1;break t}Nr=0}if(!(V=Nr)){F.a=3;break e}if(0<Ee){if(se.ua=1<<Ee,!Ce(se.Wa,Ee)){F.a=1,V=0;break e}}else se.ua=0;var Nv=F,Gb=K,mQ=X,Sv=Nv.s,Fv=Sv.xc;if(Nv.c=Gb,Nv.i=mQ,Sv.md=Oe(Gb,Fv),Sv.wc=Fv==0?-1:(1<<Fv)-1,x){F.xb=z3;break e}if((he=i(K*X))==null){F.a=1,V=0;break e}V=(V=Wt(F,he,0,K,X,X,null))&&!Y.h;break e}return V?(M!=null?M[0]=he:(e(he==null),e(x)),F.$=0,x||_t(se)):_t(se),V}function ha(u,p){var x=u.c*u.i,F=x+p+16*p;return e(u.c<=p),u.V=i(F),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+x+p,1)}function fa(u,p){var x=u.C,F=p-x,M=u.V,V=u.Ba+u.c*x;for(e(p<=u.l.o);0<F;){var K=16<F?16:F,X=u.l.ma,Y=u.l.width,se=Y*K,he=X.ca,Ee=X.tb+Y*x,_e=u.Ta,Be=u.Ua;nn(u,K,M,V),dn(_e,Be,he,Ee,se),nt(X,x,x+K,he,Ee,Y),F-=K,M+=K*u.c,x+=K}e(x==p),u.C=u.Ma=p}function pa(){this.ub=this.yd=this.td=this.Rb=0}function qa(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ga(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function zc(){this.Yb=function(){var u=[];return function p(x,F,M){for(var V=M[F],K=0;K<V&&(x.push(M.length>F+1?[]:0),!(M.length<F+1));K++)p(x[K],F+1,M)}(u,0,[3,11]),u}()}function Ko(){this.jb=i(3),this.Wc=o([4,8],zc),this.Xc=o([4,17],zc)}function Wc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ma(){this.ld=this.La=this.dd=this.tc=0}function ga(){this.Na=this.la=0}function Ri(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function za(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Yd(){this.uc=this.M=this.Nb=0,this.wa=Array(new ma),this.Y=0,this.ya=Array(new za),this.aa=0,this.l=new Wa}function Sl(){this.y=i(16),this.f=i(8),this.ea=i(8)}function $c(){this.cb=this.a=0,this.sc="",this.m=new pe,this.Od=new pa,this.Kc=new qa,this.ed=new Wc,this.Qa=new Ga,this.Ic=this.$c=this.Aa=0,this.D=new Yd,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,pe),this.ia=0,this.pb=a(4,Ri),this.Pa=new Ko,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Sl),this.Hd=0,this.rb=Array(new ga),this.sb=0,this.wa=Array(new ma),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new za),this.L=this.aa=0,this.gd=o([4,2],ma),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fl(){var u=new $c;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,ch||(ch=Xc)),u}function Pr(u,p,x){return u.a==0&&(u.a=p,u.sc=x,u.cb=0),0}function Tl(u,p,x){return 3<=x&&u[p+0]==157&&u[p+1]==1&&u[p+2]==42}function Ul(u,p){if(u==null)return 0;if(u.a=0,u.sc="OK",p==null)return Pr(u,2,"null VP8Io passed to VP8GetHeaders()");var x=p.data,F=p.w,M=p.ha;if(4>M)return Pr(u,7,"Truncated header.");var V=x[F+0]|x[F+1]<<8|x[F+2]<<16,K=u.Od;if(K.Rb=!(1&V),K.td=V>>1&7,K.yd=V>>4&1,K.ub=V>>5,3<K.td)return Pr(u,3,"Incorrect keyframe parameters.");if(!K.yd)return Pr(u,4,"Frame not displayable.");F+=3,M-=3;var X=u.Kc;if(K.Rb){if(7>M)return Pr(u,7,"cannot parse picture header");if(!Tl(x,F,M))return Pr(u,3,"Bad code word");X.c=16383&(x[F+4]<<8|x[F+3]),X.Td=x[F+4]>>6,X.i=16383&(x[F+6]<<8|x[F+5]),X.Ud=x[F+6]>>6,F+=7,M-=7,u.za=X.c+15>>4,u.Ub=X.i+15>>4,p.width=X.c,p.height=X.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,s((V=u.Pa).jb,0,255,V.jb.length),e((V=u.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,s(V.Zb,0,0,V.Zb.length),s(V.Lb,0,0,V.Lb)}if(K.ub>M)return Pr(u,7,"bad partition length");ue(V=u.m,x,F,K.ub),F+=K.ub,M-=K.ub,K.Rb&&(X.Ld=ee(V),X.Kd=ee(V)),X=u.Qa;var Y,se=u.Pa;if(e(V!=null),e(X!=null),X.Cb=ee(V),X.Cb){if(X.Bb=ee(V),ee(V)){for(X.Fb=ee(V),Y=0;4>Y;++Y)X.Zb[Y]=ee(V)?z(V,7):0;for(Y=0;4>Y;++Y)X.Lb[Y]=ee(V)?z(V,6):0}if(X.Bb)for(Y=0;3>Y;++Y)se.jb[Y]=ee(V)?ie(V,8):255}else X.Bb=0;if(V.Ka)return Pr(u,3,"cannot parse segment header");if((X=u.ed).zd=ee(V),X.Tb=ie(V,6),X.wb=ie(V,3),X.Pc=ee(V),X.Pc&&ee(V)){for(se=0;4>se;++se)ee(V)&&(X.vd[se]=z(V,6));for(se=0;4>se;++se)ee(V)&&(X.od[se]=z(V,6))}if(u.L=X.Tb==0?0:X.zd?1:2,V.Ka)return Pr(u,3,"cannot parse filter header");var he=M;if(M=Y=F,F=Y+he,X=he,u.Xb=(1<<ie(u.m,2))-1,he<3*(se=u.Xb))x=7;else{for(Y+=3*se,X-=3*se,he=0;he<se;++he){var Ee=x[M+0]|x[M+1]<<8|x[M+2]<<16;Ee>X&&(Ee=X),ue(u.Jc[+he],x,Y,Ee),Y+=Ee,X-=Ee,M+=3}ue(u.Jc[+se],x,Y,X),x=Y<F?0:5}if(x!=0)return Pr(u,x,"cannot parse partitions");for(x=ie(Y=u.m,7),M=ee(Y)?z(Y,4):0,F=ee(Y)?z(Y,4):0,X=ee(Y)?z(Y,4):0,se=ee(Y)?z(Y,4):0,Y=ee(Y)?z(Y,4):0,he=u.Qa,Ee=0;4>Ee;++Ee){if(he.Cb){var _e=he.Zb[Ee];he.Fb||(_e+=x)}else{if(0<Ee){u.pb[Ee]=u.pb[0];continue}_e=x}var Be=u.pb[Ee];Be.Sc[0]=vv[fr(_e+M,127)],Be.Sc[1]=yv[fr(_e+0,127)],Be.Eb[0]=2*vv[fr(_e+F,127)],Be.Eb[1]=101581*yv[fr(_e+X,127)]>>16,8>Be.Eb[1]&&(Be.Eb[1]=8),Be.Qc[0]=vv[fr(_e+se,117)],Be.Qc[1]=yv[fr(_e+Y,127)],Be.lc=_e+Y}if(!K.Rb)return Pr(u,4,"Not a key frame.");for(ee(V),K=u.Pa,x=0;4>x;++x){for(M=0;8>M;++M)for(F=0;3>F;++F)for(X=0;11>X;++X)se=oe(V,q3[x][M][F][X])?ie(V,8):V3[x][M][F][X],K.Wc[x][M].Yb[F][X]=se;for(M=0;17>M;++M)K.Xc[x][M]=K.Wc[x][G3[M]]}return u.kc=ee(V),u.kc&&(u.Bd=ie(V,8)),u.cb=1}function Xc(u,p,x,F,M,V,K){var X=p[M].Yb[x];for(x=0;16>M;++M){if(!oe(u,X[x+0]))return M;for(;!oe(u,X[x+1]);)if(X=p[++M].Yb[0],x=0,M==16)return 16;var Y=p[M+1].Yb;if(oe(u,X[x+2])){var se=u,he=0;if(oe(se,(_e=X)[(Ee=x)+3]))if(oe(se,_e[Ee+6])){for(X=0,Ee=2*(he=oe(se,_e[Ee+8]))+(_e=oe(se,_e[Ee+9+he])),he=0,_e=M3[Ee];_e[X];++X)he+=he+oe(se,_e[X]);he+=3+(8<<Ee)}else oe(se,_e[Ee+7])?(he=7+2*oe(se,165),he+=oe(se,145)):he=5+oe(se,159);else he=oe(se,_e[Ee+4])?3+oe(se,_e[Ee+5]):2;X=Y[2]}else he=1,X=Y[1];Y=K+H3[M],0>(se=u).b&&ne(se);var Ee,_e=se.b,Be=(Ee=se.Ca>>1)-(se.I>>_e)>>31;--se.b,se.Ca+=Be,se.Ca|=1,se.I-=(Ee+1&Be)<<_e,V[Y]=((he^Be)-Be)*F[(0<M)+0]}return 16}function Ql(u){var p=u.rb[u.sb-1];p.la=0,p.Na=0,s(u.zc,0,0,u.zc.length),u.ja=0}function Jc(u,p){if(u==null)return 0;if(p==null)return Pr(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!Ul(u,p))return 0;if(e(u.cb),p.ac==null||p.ac(p)){p.ob&&(u.L=0);var x=im[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=p.v-x>>4,u.zb=p.j-x>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=p.o+15+x>>4,u.Hb=p.va+15+x>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var F=u.ed;for(x=0;4>x;++x){var M;if(u.Qa.Cb){var V=u.Qa.Lb[x];u.Qa.Fb||(V+=F.Tb)}else V=F.Tb;for(M=0;1>=M;++M){var K=u.gd[x][M],X=V;if(F.Pc&&(X+=F.vd[0],M&&(X+=F.od[0])),0<(X=0>X?0:63<X?63:X)){var Y=X;0<F.wb&&(Y=4<F.wb?Y>>2:Y>>1)>9-F.wb&&(Y=9-F.wb),1>Y&&(Y=1),K.dd=Y,K.tc=2*X+Y,K.ld=40<=X?2:15<=X?1:0}else K.tc=0;K.La=M}}}x=0}else Pr(u,6,"Frame setup failed"),x=u.a;if(x=x==0){if(x){u.$c=0,0<u.Aa||(u.Ic=iQ);e:{x=u.Ic,F=4*(Y=u.za);var se=32*Y,he=Y+1,Ee=0<u.L?Y*(0<u.Aa?2:1):0,_e=(u.Aa==2?2:1)*Y;if((K=F+832+(M=3*(16*x+im[u.L])/2*se)+(V=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=K)x=0;else{if(K>u.Vb){if(u.Vb=0,u.Ec=i(K),u.Fc=0,u.Ec==null){x=Pr(u,1,"no memory during frame initialization.");break e}u.Vb=K}K=u.Ec,X=u.Fc,u.Ac=K,u.Bc=X,X+=F,u.Gd=a(se,Sl),u.Hd=0,u.rb=a(he+1,ga),u.sb=1,u.wa=Ee?a(Ee,ma):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=Y),e(!0),u.oc=K,u.pc=X,X+=832,u.ya=a(_e,za),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=Y),u.R=16*Y,u.B=8*Y,Y=(se=im[u.L])*u.R,se=se/2*u.B,u.sa=K,u.ta=X+Y,u.qa=u.sa,u.ra=u.ta+16*x*u.R+se,u.Ha=u.qa,u.Ia=u.ra+8*x*u.B+se,u.$c=0,X+=M,u.mb=V?K:null,u.nb=V?X:null,e(X+V<=u.Fc+u.Vb),Ql(u),s(u.Ac,u.Bc,0,F),x=1}}if(x){if(p.ka=0,p.y=u.sa,p.O=u.ta,p.f=u.qa,p.N=u.ra,p.ea=u.Ha,p.Vd=u.Ia,p.fa=u.R,p.Rc=u.B,p.F=null,p.J=0,!Xp){for(x=-255;255>=x;++x)In[255+x]=0>x?-x:x;for(x=-1020;1020>=x;++x)io[1020+x]=-128>x?-128:127<x?127:x;for(x=-112;112>=x;++x)lh[112+x]=-16>x?-16:15<x?15:x;for(x=-255;510>=x;++x)du[255+x]=0>x?0:255<x?255:x;Xp=1}lu=Ja,so=Go,ah=Pl,Es=gr,gi=Xa,un=$a,cu=Zo,$p=Hi,oh=tA,Kl=Hl,ql=eA,lA=Za,Gl=rA,uu=Ba,zl=Ya,cA=Zs,Ah=_n,wi=ru,qi[0]=pi,qi[1]=Zd,qi[2]=va,qi[3]=th,qi[4]=eu,qi[5]=$o,qi[6]=Js,qi[7]=kl,qi[8]=Jo,qi[9]=Xo,uA[0]=wa,uA[1]=eh,uA[2]=ji,uA[3]=zo,uA[4]=Lr,uA[5]=Zc,uA[6]=Ll,ao[0]=Mi,ao[1]=Yc,ao[2]=tu,ao[3]=Oi,ao[4]=hr,ao[5]=Rl,ao[6]=Dl,x=1}else x=0}x&&(x=function(Be,je){for(Be.M=0;Be.M<Be.Va;++Be.M){var Ue,fe=Be.Jc[Be.M&Be.Xb],ge=Be.m,Re=Be;for(Ue=0;Ue<Re.za;++Ue){var Me=ge,De=Re,gt=De.Ac,st=De.Bc+4*Ue,Qt=De.zc,At=De.ya[De.aa+Ue];if(De.Qa.Bb?At.$b=oe(Me,De.Pa.jb[0])?2+oe(Me,De.Pa.jb[2]):oe(Me,De.Pa.jb[1]):At.$b=0,De.kc&&(At.Ad=oe(Me,De.Bd)),At.Za=!oe(Me,145)+0,At.Za){var dr=At.Ob,wr=0;for(De=0;4>De;++De){var Ar,rr=Qt[0+De];for(Ar=0;4>Ar;++Ar){rr=K3[gt[st+Ar]][rr];for(var Nr=bb[oe(Me,rr[0])];0<Nr;)Nr=bb[2*Nr+oe(Me,rr[Nr])];rr=-Nr,gt[st+Ar]=rr}n(dr,wr,gt,st,4),wr+=4,Qt[0+De]=rr}}else rr=oe(Me,156)?oe(Me,128)?1:3:oe(Me,163)?2:0,At.Ob[0]=rr,s(gt,st,rr,4),s(Qt,0,rr,4);At.Dd=oe(Me,142)?oe(Me,114)?oe(Me,183)?1:3:2:0}if(Re.m.Ka)return Pr(Be,7,"Premature end-of-partition0 encountered.");for(;Be.ja<Be.za;++Be.ja){if(Re=fe,Me=(ge=Be).rb[ge.sb-1],gt=ge.rb[ge.sb+ge.ja],Ue=ge.ya[ge.aa+ge.ja],st=ge.kc?Ue.Ad:0)Me.la=gt.la=0,Ue.Za||(Me.Na=gt.Na=0),Ue.Hc=0,Ue.Gc=0,Ue.ia=0;else{var Cr,zt;if(Me=gt,gt=Re,st=ge.Pa.Xc,Qt=ge.ya[ge.aa+ge.ja],At=ge.pb[Qt.$b],De=Qt.ad,dr=0,wr=ge.rb[ge.sb-1],rr=Ar=0,s(De,dr,0,384),Qt.Za)var Bn=0,Os=st[3];else{Nr=i(16);var xn=Me.Na+wr.Na;if(xn=ch(gt,st[1],xn,At.Eb,0,Nr,0),Me.Na=wr.Na=(0<xn)+0,1<xn)lu(Nr,0,De,dr);else{var Ms=Nr[0]+3>>3;for(Nr=0;256>Nr;Nr+=16)De[dr+Nr]=Ms}Bn=1,Os=st[0]}var vr=15&Me.la,ti=15&wr.la;for(Nr=0;4>Nr;++Nr){var ri=1&ti;for(Ms=zt=0;4>Ms;++Ms)vr=vr>>1|(ri=(xn=ch(gt,Os,xn=ri+(1&vr),At.Sc,Bn,De,dr))>Bn)<<7,zt=zt<<2|(3<xn?3:1<xn?2:De[dr+0]!=0),dr+=16;vr>>=4,ti=ti>>1|ri<<7,Ar=(Ar<<8|zt)>>>0}for(Os=vr,Bn=ti>>4,Cr=0;4>Cr;Cr+=2){for(zt=0,vr=Me.la>>4+Cr,ti=wr.la>>4+Cr,Nr=0;2>Nr;++Nr){for(ri=1&ti,Ms=0;2>Ms;++Ms)xn=ri+(1&vr),vr=vr>>1|(ri=0<(xn=ch(gt,st[2],xn,At.Qc,0,De,dr)))<<3,zt=zt<<2|(3<xn?3:1<xn?2:De[dr+0]!=0),dr+=16;vr>>=2,ti=ti>>1|ri<<5}rr|=zt<<4*Cr,Os|=vr<<4<<Cr,Bn|=(240&ti)<<Cr}Me.la=Os,wr.la=Bn,Qt.Hc=Ar,Qt.Gc=rr,Qt.ia=43690&rr?0:At.ia,st=!(Ar|rr)}if(0<ge.L&&(ge.wa[ge.Y+ge.ja]=ge.gd[Ue.$b][Ue.Za],ge.wa[ge.Y+ge.ja].La|=!st),Re.Ka)return Pr(Be,7,"Premature end-of-file encountered.")}if(Ql(Be),ge=je,Re=1,Ue=(fe=Be).D,Me=0<fe.L&&fe.M>=fe.zb&&fe.M<=fe.Va,fe.Aa==0)e:{if(Ue.M=fe.M,Ue.uc=Me,ba(fe,Ue),Re=1,Ue=(zt=fe.D).Nb,Me=(rr=im[fe.L])*fe.R,gt=rr/2*fe.B,Nr=16*Ue*fe.R,Ms=8*Ue*fe.B,st=fe.sa,Qt=fe.ta-Me+Nr,At=fe.qa,De=fe.ra-gt+Ms,dr=fe.Ha,wr=fe.Ia-gt+Ms,ti=(vr=zt.M)==0,Ar=vr>=fe.Va-1,fe.Aa==2&&ba(fe,zt),zt.uc)for(ri=(xn=fe).D.M,e(xn.D.uc),zt=xn.yb;zt<xn.Hb;++zt){Bn=zt,Os=ri;var Ln=(Yn=(an=xn).D).Nb;Cr=an.R;var Yn=Yn.wa[Yn.Y+Bn],_s=an.sa,xi=an.ta+16*Ln*Cr+16*Bn,Ea=Yn.dd,kn=Yn.tc;if(kn!=0)if(e(3<=kn),an.L==1)0<Bn&&cA(_s,xi,Cr,kn+4),Yn.La&&wi(_s,xi,Cr,kn),0<Os&&zl(_s,xi,Cr,kn+4),Yn.La&&Ah(_s,xi,Cr,kn);else{var oo=an.B,Wl=an.qa,hu=an.ra+8*Ln*oo+8*Bn,hA=an.Ha,an=an.Ia+8*Ln*oo+8*Bn;Ln=Yn.ld,0<Bn&&($p(_s,xi,Cr,kn+4,Ea,Ln),Kl(Wl,hu,hA,an,oo,kn+4,Ea,Ln)),Yn.La&&(lA(_s,xi,Cr,kn,Ea,Ln),uu(Wl,hu,hA,an,oo,kn,Ea,Ln)),0<Os&&(cu(_s,xi,Cr,kn+4,Ea,Ln),oh(Wl,hu,hA,an,oo,kn+4,Ea,Ln)),Yn.La&&(ql(_s,xi,Cr,kn,Ea,Ln),Gl(Wl,hu,hA,an,oo,kn,Ea,Ln))}}if(fe.ia&&alert("todo:DitherRow"),ge.put!=null){if(zt=16*vr,vr=16*(vr+1),ti?(ge.y=fe.sa,ge.O=fe.ta+Nr,ge.f=fe.qa,ge.N=fe.ra+Ms,ge.ea=fe.Ha,ge.W=fe.Ia+Ms):(zt-=rr,ge.y=st,ge.O=Qt,ge.f=At,ge.N=De,ge.ea=dr,ge.W=wr),Ar||(vr-=rr),vr>ge.o&&(vr=ge.o),ge.F=null,ge.J=null,fe.Fa!=null&&0<fe.Fa.length&&zt<vr&&(ge.J=aA(fe,ge,zt,vr-zt),ge.F=fe.mb,ge.F==null&&ge.F.length==0)){Re=Pr(fe,3,"Could not decode alpha data.");break e}zt<ge.j&&(rr=ge.j-zt,zt=ge.j,e(!(1&rr)),ge.O+=fe.R*rr,ge.N+=fe.B*(rr>>1),ge.W+=fe.B*(rr>>1),ge.F!=null&&(ge.J+=ge.width*rr)),zt<vr&&(ge.O+=ge.v,ge.N+=ge.v>>1,ge.W+=ge.v>>1,ge.F!=null&&(ge.J+=ge.v),ge.ka=zt-ge.j,ge.U=ge.va-ge.v,ge.T=vr-zt,Re=ge.put(ge))}Ue+1!=fe.Ic||Ar||(n(fe.sa,fe.ta-Me,st,Qt+16*fe.R,Me),n(fe.qa,fe.ra-gt,At,De+8*fe.B,gt),n(fe.Ha,fe.Ia-gt,dr,wr+8*fe.B,gt))}if(!Re)return Pr(Be,6,"Output aborted.")}return 1}(u,p)),p.bc!=null&&p.bc(p),x&=1}return x?(u.cb=0,x):0}function Rs(u,p,x,F,M){M=u[p+x+32*F]+(M>>3),u[p+x+32*F]=-256&M?0>M?0:255:M}function qo(u,p,x,F,M,V){Rs(u,p,0,x,F+M),Rs(u,p,1,x,F+V),Rs(u,p,2,x,F-V),Rs(u,p,3,x,F-M)}function sn(u){return(20091*u>>16)+u}function bs(u,p,x,F){var M,V=0,K=i(16);for(M=0;4>M;++M){var X=u[p+0]+u[p+8],Y=u[p+0]-u[p+8],se=(35468*u[p+4]>>16)-sn(u[p+12]),he=sn(u[p+4])+(35468*u[p+12]>>16);K[V+0]=X+he,K[V+1]=Y+se,K[V+2]=Y-se,K[V+3]=X-he,V+=4,p++}for(M=V=0;4>M;++M)X=(u=K[V+0]+4)+K[V+8],Y=u-K[V+8],se=(35468*K[V+4]>>16)-sn(K[V+12]),Rs(x,F,0,0,X+(he=sn(K[V+4])+(35468*K[V+12]>>16))),Rs(x,F,1,0,Y+se),Rs(x,F,2,0,Y-se),Rs(x,F,3,0,X-he),V++,F+=32}function $a(u,p,x,F){var M=u[p+0]+4,V=35468*u[p+4]>>16,K=sn(u[p+4]),X=35468*u[p+1]>>16;qo(x,F,0,M+K,u=sn(u[p+1]),X),qo(x,F,1,M+V,u,X),qo(x,F,2,M-V,u,X),qo(x,F,3,M-K,u,X)}function Go(u,p,x,F,M){bs(u,p,x,F),M&&bs(u,p+16,x,F+4)}function Pl(u,p,x,F){so(u,p+0,x,F,1),so(u,p+32,x,F+128,1)}function gr(u,p,x,F){var M;for(u=u[p+0]+4,M=0;4>M;++M)for(p=0;4>p;++p)Rs(x,F,p,M,u)}function Xa(u,p,x,F){u[p+0]&&Es(u,p+0,x,F),u[p+16]&&Es(u,p+16,x,F+4),u[p+32]&&Es(u,p+32,x,F+128),u[p+48]&&Es(u,p+48,x,F+128+4)}function Ja(u,p,x,F){var M,V=i(16);for(M=0;4>M;++M){var K=u[p+0+M]+u[p+12+M],X=u[p+4+M]+u[p+8+M],Y=u[p+4+M]-u[p+8+M],se=u[p+0+M]-u[p+12+M];V[0+M]=K+X,V[8+M]=K-X,V[4+M]=se+Y,V[12+M]=se-Y}for(M=0;4>M;++M)K=(u=V[0+4*M]+3)+V[3+4*M],X=V[1+4*M]+V[2+4*M],Y=V[1+4*M]-V[2+4*M],se=u-V[3+4*M],x[F+0]=K+X>>3,x[F+16]=se+Y>>3,x[F+32]=K-X>>3,x[F+48]=se-Y>>3,F+=64}function Di(u,p,x){var F,M=p-32,V=ei,K=255-u[M-1];for(F=0;F<x;++F){var X,Y=V,se=K+u[p-1];for(X=0;X<x;++X)u[p+X]=Y[se+u[M+X]];p+=32}}function Zd(u,p){Di(u,p,4)}function Yc(u,p){Di(u,p,8)}function eh(u,p){Di(u,p,16)}function ji(u,p){var x;for(x=0;16>x;++x)n(u,p+32*x,u,p-32,16)}function zo(u,p){var x;for(x=16;0<x;--x)s(u,p,u[p-1],16),p+=32}function Wo(u,p,x){var F;for(F=0;16>F;++F)s(p,x+32*F,u,16)}function wa(u,p){var x,F=16;for(x=0;16>x;++x)F+=u[p-1+32*x]+u[p+x-32];Wo(F>>5,u,p)}function Lr(u,p){var x,F=8;for(x=0;16>x;++x)F+=u[p-1+32*x];Wo(F>>4,u,p)}function Zc(u,p){var x,F=8;for(x=0;16>x;++x)F+=u[p+x-32];Wo(F>>4,u,p)}function Ll(u,p){Wo(128,u,p)}function Rt(u,p,x){return u+2*p+x+2>>2}function va(u,p){var x,F=p-32;for(F=new Uint8Array([Rt(u[F-1],u[F+0],u[F+1]),Rt(u[F+0],u[F+1],u[F+2]),Rt(u[F+1],u[F+2],u[F+3]),Rt(u[F+2],u[F+3],u[F+4])]),x=0;4>x;++x)n(u,p+32*x,F,0,F.length)}function th(u,p){var x=u[p-1],F=u[p-1+32],M=u[p-1+64],V=u[p-1+96];ye(u,p+0,16843009*Rt(u[p-1-32],x,F)),ye(u,p+32,16843009*Rt(x,F,M)),ye(u,p+64,16843009*Rt(F,M,V)),ye(u,p+96,16843009*Rt(M,V,V))}function pi(u,p){var x,F=4;for(x=0;4>x;++x)F+=u[p+x-32]+u[p-1+32*x];for(F>>=3,x=0;4>x;++x)s(u,p+32*x,F,4)}function eu(u,p){var x=u[p-1+0],F=u[p-1+32],M=u[p-1+64],V=u[p-1-32],K=u[p+0-32],X=u[p+1-32],Y=u[p+2-32],se=u[p+3-32];u[p+0+96]=Rt(F,M,u[p-1+96]),u[p+1+96]=u[p+0+64]=Rt(x,F,M),u[p+2+96]=u[p+1+64]=u[p+0+32]=Rt(V,x,F),u[p+3+96]=u[p+2+64]=u[p+1+32]=u[p+0+0]=Rt(K,V,x),u[p+3+64]=u[p+2+32]=u[p+1+0]=Rt(X,K,V),u[p+3+32]=u[p+2+0]=Rt(Y,X,K),u[p+3+0]=Rt(se,Y,X)}function Js(u,p){var x=u[p+1-32],F=u[p+2-32],M=u[p+3-32],V=u[p+4-32],K=u[p+5-32],X=u[p+6-32],Y=u[p+7-32];u[p+0+0]=Rt(u[p+0-32],x,F),u[p+1+0]=u[p+0+32]=Rt(x,F,M),u[p+2+0]=u[p+1+32]=u[p+0+64]=Rt(F,M,V),u[p+3+0]=u[p+2+32]=u[p+1+64]=u[p+0+96]=Rt(M,V,K),u[p+3+32]=u[p+2+64]=u[p+1+96]=Rt(V,K,X),u[p+3+64]=u[p+2+96]=Rt(K,X,Y),u[p+3+96]=Rt(X,Y,Y)}function $o(u,p){var x=u[p-1+0],F=u[p-1+32],M=u[p-1+64],V=u[p-1-32],K=u[p+0-32],X=u[p+1-32],Y=u[p+2-32],se=u[p+3-32];u[p+0+0]=u[p+1+64]=V+K+1>>1,u[p+1+0]=u[p+2+64]=K+X+1>>1,u[p+2+0]=u[p+3+64]=X+Y+1>>1,u[p+3+0]=Y+se+1>>1,u[p+0+96]=Rt(M,F,x),u[p+0+64]=Rt(F,x,V),u[p+0+32]=u[p+1+96]=Rt(x,V,K),u[p+1+32]=u[p+2+96]=Rt(V,K,X),u[p+2+32]=u[p+3+96]=Rt(K,X,Y),u[p+3+32]=Rt(X,Y,se)}function kl(u,p){var x=u[p+0-32],F=u[p+1-32],M=u[p+2-32],V=u[p+3-32],K=u[p+4-32],X=u[p+5-32],Y=u[p+6-32],se=u[p+7-32];u[p+0+0]=x+F+1>>1,u[p+1+0]=u[p+0+64]=F+M+1>>1,u[p+2+0]=u[p+1+64]=M+V+1>>1,u[p+3+0]=u[p+2+64]=V+K+1>>1,u[p+0+32]=Rt(x,F,M),u[p+1+32]=u[p+0+96]=Rt(F,M,V),u[p+2+32]=u[p+1+96]=Rt(M,V,K),u[p+3+32]=u[p+2+96]=Rt(V,K,X),u[p+3+64]=Rt(K,X,Y),u[p+3+96]=Rt(X,Y,se)}function Xo(u,p){var x=u[p-1+0],F=u[p-1+32],M=u[p-1+64],V=u[p-1+96];u[p+0+0]=x+F+1>>1,u[p+2+0]=u[p+0+32]=F+M+1>>1,u[p+2+32]=u[p+0+64]=M+V+1>>1,u[p+1+0]=Rt(x,F,M),u[p+3+0]=u[p+1+32]=Rt(F,M,V),u[p+3+32]=u[p+1+64]=Rt(M,V,V),u[p+3+64]=u[p+2+64]=u[p+0+96]=u[p+1+96]=u[p+2+96]=u[p+3+96]=V}function Jo(u,p){var x=u[p-1+0],F=u[p-1+32],M=u[p-1+64],V=u[p-1+96],K=u[p-1-32],X=u[p+0-32],Y=u[p+1-32],se=u[p+2-32];u[p+0+0]=u[p+2+32]=x+K+1>>1,u[p+0+32]=u[p+2+64]=F+x+1>>1,u[p+0+64]=u[p+2+96]=M+F+1>>1,u[p+0+96]=V+M+1>>1,u[p+3+0]=Rt(X,Y,se),u[p+2+0]=Rt(K,X,Y),u[p+1+0]=u[p+3+32]=Rt(x,K,X),u[p+1+32]=u[p+3+64]=Rt(F,x,K),u[p+1+64]=u[p+3+96]=Rt(M,F,x),u[p+1+96]=Rt(V,M,F)}function tu(u,p){var x;for(x=0;8>x;++x)n(u,p+32*x,u,p-32,8)}function Oi(u,p){var x;for(x=0;8>x;++x)s(u,p,u[p-1],8),p+=32}function Ys(u,p,x){var F;for(F=0;8>F;++F)s(p,x+32*F,u,8)}function Mi(u,p){var x,F=8;for(x=0;8>x;++x)F+=u[p+x-32]+u[p-1+32*x];Ys(F>>4,u,p)}function Rl(u,p){var x,F=4;for(x=0;8>x;++x)F+=u[p+x-32];Ys(F>>3,u,p)}function hr(u,p){var x,F=4;for(x=0;8>x;++x)F+=u[p-1+32*x];Ys(F>>3,u,p)}function Dl(u,p){Ys(128,u,p)}function Yo(u,p,x){var F=u[p-x],M=u[p+0],V=3*(M-F)+fv[1020+u[p-2*x]-u[p+x]],K=Jp[112+(V+4>>3)];u[p-x]=ei[255+F+Jp[112+(V+3>>3)]],u[p+0]=ei[255+M-K]}function jl(u,p,x,F){var M=u[p+0],V=u[p+x];return yi[255+u[p-2*x]-u[p-x]]>F||yi[255+V-M]>F}function Ol(u,p,x,F){return 4*yi[255+u[p-x]-u[p+0]]+yi[255+u[p-2*x]-u[p+x]]<=F}function Ml(u,p,x,F,M){var V=u[p-3*x],K=u[p-2*x],X=u[p-x],Y=u[p+0],se=u[p+x],he=u[p+2*x],Ee=u[p+3*x];return 4*yi[255+X-Y]+yi[255+K-se]>F?0:yi[255+u[p-4*x]-V]<=M&&yi[255+V-K]<=M&&yi[255+K-X]<=M&&yi[255+Ee-he]<=M&&yi[255+he-se]<=M&&yi[255+se-Y]<=M}function Ya(u,p,x,F){var M=2*F+1;for(F=0;16>F;++F)Ol(u,p+F,x,M)&&Yo(u,p+F,x)}function Zs(u,p,x,F){var M=2*F+1;for(F=0;16>F;++F)Ol(u,p+F*x,1,M)&&Yo(u,p+F*x,1)}function _n(u,p,x,F){var M;for(M=3;0<M;--M)Ya(u,p+=4*x,x,F)}function ru(u,p,x,F){var M;for(M=3;0<M;--M)Zs(u,p+=4,x,F)}function ya(u,p,x,F,M,V,K,X){for(V=2*V+1;0<M--;){if(Ml(u,p,x,V,K))if(jl(u,p,x,X))Yo(u,p,x);else{var Y=u,se=p,he=x,Ee=Y[se-2*he],_e=Y[se-he],Be=Y[se+0],je=Y[se+he],Ue=Y[se+2*he],fe=27*(Re=fv[1020+3*(Be-_e)+fv[1020+Ee-je]])+63>>7,ge=18*Re+63>>7,Re=9*Re+63>>7;Y[se-3*he]=ei[255+Y[se-3*he]+Re],Y[se-2*he]=ei[255+Ee+ge],Y[se-he]=ei[255+_e+fe],Y[se+0]=ei[255+Be-fe],Y[se+he]=ei[255+je-ge],Y[se+2*he]=ei[255+Ue-Re]}p+=F}}function $n(u,p,x,F,M,V,K,X){for(V=2*V+1;0<M--;){if(Ml(u,p,x,V,K))if(jl(u,p,x,X))Yo(u,p,x);else{var Y=u,se=p,he=x,Ee=Y[se-he],_e=Y[se+0],Be=Y[se+he],je=Jp[112+((Ue=3*(_e-Ee))+4>>3)],Ue=Jp[112+(Ue+3>>3)],fe=je+1>>1;Y[se-2*he]=ei[255+Y[se-2*he]+fe],Y[se-he]=ei[255+Ee+Ue],Y[se+0]=ei[255+_e-je],Y[se+he]=ei[255+Be-fe]}p+=F}}function Zo(u,p,x,F,M,V){ya(u,p,x,1,16,F,M,V)}function Hi(u,p,x,F,M,V){ya(u,p,1,x,16,F,M,V)}function eA(u,p,x,F,M,V){var K;for(K=3;0<K;--K)$n(u,p+=4*x,x,1,16,F,M,V)}function Za(u,p,x,F,M,V){var K;for(K=3;0<K;--K)$n(u,p+=4,1,x,16,F,M,V)}function tA(u,p,x,F,M,V,K,X){ya(u,p,M,1,8,V,K,X),ya(x,F,M,1,8,V,K,X)}function Hl(u,p,x,F,M,V,K,X){ya(u,p,1,M,8,V,K,X),ya(x,F,1,M,8,V,K,X)}function rA(u,p,x,F,M,V,K,X){$n(u,p+4*M,M,1,8,V,K,X),$n(x,F+4*M,M,1,8,V,K,X)}function Ba(u,p,x,F,M,V,K,X){$n(u,p+4,1,M,8,V,K,X),$n(x,F+4,1,M,8,V,K,X)}function eo(){this.ba=new ut,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new at,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function to(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sA(){this.ua=0,this.Wa=new re,this.vb=new re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new N}function nu(){this.xb=this.a=0,this.l=new Wa,this.ca=new ut,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sA,this.ab=0,this.gc=a(4,to),this.Oc=0}function Vi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xa(u,p,x,F,M,V,K){for(u=u==null?0:u[p+0],p=0;p<K;++p)M[V+p]=u+x[F+p]&255,u=M[V+p]}function iA(u,p,x,F,M,V,K){var X;if(u==null)xa(null,null,x,F,M,V,K);else for(X=0;X<K;++X)M[V+X]=u[p+X]+x[F+X]&255}function ls(u,p,x,F,M,V,K){if(u==null)xa(null,null,x,F,M,V,K);else{var X,Y=u[p+0],se=Y,he=Y;for(X=0;X<K;++X)se=he+(Y=u[p+X])-se,he=x[F+X]+(-256&se?0>se?0:255:se)&255,se=Y,M[V+X]=he}}function aA(u,p,x,F){var M=p.width,V=p.o;if(e(u!=null&&p!=null),0>x||0>=F||x+F>V)return null;if(!u.Cc){if(u.ga==null){var K;if(u.ga=new Vi,(K=u.ga==null)||(K=p.width*p.o,e(u.Gb.length==0),u.Gb=i(K),u.Uc=0,u.Gb==null?K=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,K=1),K=!K),!K){K=u.ga;var X=u.Fa,Y=u.P,se=u.qc,he=u.mb,Ee=u.nb,_e=Y+1,Be=se-1,je=K.l;if(e(X!=null&&he!=null&&p!=null),dA[0]=null,dA[1]=xa,dA[2]=iA,dA[3]=ls,K.ca=he,K.tb=Ee,K.c=p.width,K.i=p.height,e(0<K.c&&0<K.i),1>=se)p=0;else if(K.$a=X[Y+0]>>0&3,K.Z=X[Y+0]>>2&3,K.Lc=X[Y+0]>>4&3,Y=X[Y+0]>>6&3,0>K.$a||1<K.$a||4<=K.Z||1<K.Lc||Y)p=0;else if(je.put=$t,je.ac=Et,je.bc=or,je.ma=K,je.width=p.width,je.height=p.height,je.Da=p.Da,je.v=p.v,je.va=p.va,je.j=p.j,je.o=p.o,K.$a)e:{e(K.$a==1),p=mt();t:for(;;){if(p==null){p=0;break e}if(e(K!=null),K.mc=p,p.c=K.c,p.i=K.i,p.l=K.l,p.l.ma=K,p.l.width=K.c,p.l.height=K.i,p.a=0,W(p.m,X,_e,Be),!xs(K.c,K.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&rt(p.s)?(K.ic=1,X=p.c*p.i,p.Ta=null,p.Ua=0,p.V=i(X),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(K.ic=0,p=ha(p,K.c)),!p))break t;p=1;break e}K.mc=null,p=0}else p=Be>=K.c*K.i;K=!p}if(K)return null;u.ga.Lc!=1?u.Ga=0:F=V-x}e(u.ga!=null),e(x+F<=V);e:{if(p=(X=u.ga).c,V=X.l.o,X.$a==0){if(_e=u.rc,Be=u.Vc,je=u.Fa,Y=u.P+1+x*p,se=u.mb,he=u.nb+x*p,e(Y<=u.P+u.qc),X.Z!=0)for(e(dA[X.Z]!=null),K=0;K<F;++K)dA[X.Z](_e,Be,je,Y,se,he,p),_e=se,Be=he,he+=p,Y+=p;else for(K=0;K<F;++K)n(se,he,je,Y,p),_e=se,Be=he,he+=p,Y+=p;u.rc=_e,u.Vc=Be}else{if(e(X.mc!=null),p=x+F,e((K=X.mc)!=null),e(p<=K.i),K.C>=p)p=1;else if(X.ic||ve(),X.ic){X=K.V,_e=K.Ba,Be=K.c;var Ue=K.i,fe=(je=1,Y=K.$/Be,se=K.$%Be,he=K.m,Ee=K.s,K.$),ge=Be*Ue,Re=Be*p,Me=Ee.wc,De=fe<Re?Or(Ee,se,Y):null;e(fe<=ge),e(p<=Ue),e(rt(Ee));t:for(;;){for(;!he.h&&fe<Re;){if(se&Me||(De=Or(Ee,se,Y)),e(De!=null),le(he),256>(Ue=Xr(De.G[0],De.H[0],he)))X[_e+fe]=Ue,++fe,++se>=Be&&(se=0,++Y<=p&&!(Y%16)&&Kt(K,Y));else{if(!(280>Ue)){je=0;break t}Ue=rn(Ue-256,he);var gt,st=Xr(De.G[4],De.H[4],he);if(le(he),!(fe>=(st=Pn(Be,st=rn(st,he)))&&ge-fe>=Ue)){je=0;break t}for(gt=0;gt<Ue;++gt)X[_e+fe+gt]=X[_e+fe+gt-st];for(fe+=Ue,se+=Ue;se>=Be;)se-=Be,++Y<=p&&!(Y%16)&&Kt(K,Y);fe<Re&&se&Me&&(De=Or(Ee,se,Y))}e(he.h==te(he))}Kt(K,Y>p?p:Y);break t}!je||he.h&&fe<ge?(je=0,K.a=he.h?5:3):K.$=fe,p=je}else p=Wt(K,K.V,K.Ba,K.c,K.i,p,fa);if(!p){F=0;break e}}x+F>=V&&(u.Cc=1),F=1}if(!F)return null;if(u.Cc&&((F=u.ga)!=null&&(F.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+x*M}function v(u,p,x,F,M,V){for(;0<M--;){var K,X=u,Y=p+(x?1:0),se=u,he=p+(x?0:3);for(K=0;K<F;++K){var Ee=se[he+4*K];Ee!=255&&(Ee*=32897,X[Y+4*K+0]=X[Y+4*K+0]*Ee>>23,X[Y+4*K+1]=X[Y+4*K+1]*Ee>>23,X[Y+4*K+2]=X[Y+4*K+2]*Ee>>23)}p+=V}}function O(u,p,x,F,M){for(;0<F--;){var V;for(V=0;V<x;++V){var K=u[p+2*V+0],X=15&(se=u[p+2*V+1]),Y=4369*X,se=(240&se|se>>4)*Y>>16;u[p+2*V+0]=(240&K|K>>4)*Y>>16&240|(15&K|K<<4)*Y>>16>>4&15,u[p+2*V+1]=240&se|X}p+=M}}function Ae(u,p,x,F,M,V,K,X){var Y,se,he=255;for(se=0;se<M;++se){for(Y=0;Y<F;++Y){var Ee=u[p+Y];V[K+4*Y]=Ee,he&=Ee}p+=x,K+=X}return he!=255}function de(u,p,x,F,M){var V;for(V=0;V<M;++V)x[F+V]=u[p+V]>>8}function ve(){vi=v,Fr=O,Tr=Ae,dn=de}function Pe(u,p,x){E[u]=function(F,M,V,K,X,Y,se,he,Ee,_e,Be,je,Ue,fe,ge,Re,Me){var De,gt=Me-1>>1,st=X[Y+0]|se[he+0]<<16,Qt=Ee[_e+0]|Be[je+0]<<16;e(F!=null);var At=3*st+Qt+131074>>2;for(p(F[M+0],255&At,At>>16,Ue,fe),V!=null&&(At=3*Qt+st+131074>>2,p(V[K+0],255&At,At>>16,ge,Re)),De=1;De<=gt;++De){var dr=X[Y+De]|se[he+De]<<16,wr=Ee[_e+De]|Be[je+De]<<16,Ar=st+dr+Qt+wr+524296,rr=Ar+2*(dr+Qt)>>3;At=rr+st>>1,st=(Ar=Ar+2*(st+wr)>>3)+dr>>1,p(F[M+2*De-1],255&At,At>>16,Ue,fe+(2*De-1)*x),p(F[M+2*De-0],255&st,st>>16,Ue,fe+(2*De-0)*x),V!=null&&(At=Ar+Qt>>1,st=rr+wr>>1,p(V[K+2*De-1],255&At,At>>16,ge,Re+(2*De-1)*x),p(V[K+2*De+0],255&st,st>>16,ge,Re+(2*De+0)*x)),st=dr,Qt=wr}1&Me||(At=3*st+Qt+131074>>2,p(F[M+Me-1],255&At,At>>16,Ue,fe+(Me-1)*x),V!=null&&(At=3*Qt+st+131074>>2,p(V[K+Me-1],255&At,At>>16,ge,Re+(Me-1)*x)))}}function Ve(){Bi[Yp]=W3,Bi[Zp]=Eb,Bi[yb]=$3,Bi[em]=_b,Bi[tm]=Ib,Bi[pv]=Nb,Bi[Bb]=X3,Bi[mv]=Eb,Bi[gv]=_b,Bi[rm]=Ib,Bi[wv]=Nb}function ot(u){return u&-16384?0>u?0:255:u>>J3}function h(u,p){return ot((19077*u>>8)+(26149*p>>8)-14234)}function C(u,p,x){return ot((19077*u>>8)-(6419*p>>8)-(13320*x>>8)+8708)}function P(u,p){return ot((19077*u>>8)+(33050*p>>8)-17685)}function $(u,p,x,F,M){F[M+0]=h(u,x),F[M+1]=C(u,p,x),F[M+2]=P(u,p)}function we(u,p,x,F,M){F[M+0]=P(u,p),F[M+1]=C(u,p,x),F[M+2]=h(u,x)}function Ie(u,p,x,F,M){var V=C(u,p,x);p=V<<3&224|P(u,p)>>3,F[M+0]=248&h(u,x)|V>>5,F[M+1]=p}function qe(u,p,x,F,M){var V=240&P(u,p)|15;F[M+0]=240&h(u,x)|C(u,p,x)>>4,F[M+1]=V}function Mt(u,p,x,F,M){F[M+0]=255,$(u,p,x,F,M+1)}function tr(u,p,x,F,M){we(u,p,x,F,M),F[M+3]=255}function Ht(u,p,x,F,M){$(u,p,x,F,M),F[M+3]=255}function fr(u,p){return 0>u?0:u>p?p:u}function Ir(u,p,x){E[u]=function(F,M,V,K,X,Y,se,he,Ee){for(var _e=he+(-2&Ee)*x;he!=_e;)p(F[M+0],V[K+0],X[Y+0],se,he),p(F[M+1],V[K+0],X[Y+0],se,he+x),M+=2,++K,++Y,he+=2*x;1&Ee&&p(F[M+0],V[K+0],X[Y+0],se,he)}}function Ki(u,p,x){return x==0?u==0?p==0?6:5:p==0?4:0:x}function Xn(u,p,x,F,M){switch(u>>>30){case 3:so(p,x,F,M,0);break;case 2:un(p,x,F,M);break;case 1:Es(p,x,F,M)}}function ba(u,p){var x,F,M=p.M,V=p.Nb,K=u.oc,X=u.pc+40,Y=u.oc,se=u.pc+584,he=u.oc,Ee=u.pc+600;for(x=0;16>x;++x)K[X+32*x-1]=129;for(x=0;8>x;++x)Y[se+32*x-1]=129,he[Ee+32*x-1]=129;for(0<M?K[X-1-32]=Y[se-1-32]=he[Ee-1-32]=129:(s(K,X-32-1,127,21),s(Y,se-32-1,127,9),s(he,Ee-32-1,127,9)),F=0;F<u.za;++F){var _e=p.ya[p.aa+F];if(0<F){for(x=-1;16>x;++x)n(K,X+32*x-4,K,X+32*x+12,4);for(x=-1;8>x;++x)n(Y,se+32*x-4,Y,se+32*x+4,4),n(he,Ee+32*x-4,he,Ee+32*x+4,4)}var Be=u.Gd,je=u.Hd+F,Ue=_e.ad,fe=_e.Hc;if(0<M&&(n(K,X-32,Be[je].y,0,16),n(Y,se-32,Be[je].f,0,8),n(he,Ee-32,Be[je].ea,0,8)),_e.Za){var ge=K,Re=X-32+16;for(0<M&&(F>=u.za-1?s(ge,Re,Be[je].y[15],4):n(ge,Re,Be[je+1].y,0,4)),x=0;4>x;x++)ge[Re+128+x]=ge[Re+256+x]=ge[Re+384+x]=ge[Re+0+x];for(x=0;16>x;++x,fe<<=2)ge=K,Re=X+Fb[x],qi[_e.Ob[x]](ge,Re),Xn(fe,Ue,16*+x,ge,Re)}else if(ge=Ki(F,M,_e.Ob[0]),uA[ge](K,X),fe!=0)for(x=0;16>x;++x,fe<<=2)Xn(fe,Ue,16*+x,K,X+Fb[x]);for(x=_e.Gc,ge=Ki(F,M,_e.Dd),ao[ge](Y,se),ao[ge](he,Ee),fe=Ue,ge=Y,Re=se,255&(_e=x>>0)&&(170&_e?ah(fe,256,ge,Re):gi(fe,256,ge,Re)),_e=he,fe=Ee,255&(x>>=8)&&(170&x?ah(Ue,320,_e,fe):gi(Ue,320,_e,fe)),M<u.Ub-1&&(n(Be[je].y,0,K,X+480,16),n(Be[je].f,0,Y,se+224,8),n(Be[je].ea,0,he,Ee+224,8)),x=8*V*u.B,Be=u.sa,je=u.ta+16*F+16*V*u.R,Ue=u.qa,_e=u.ra+8*F+x,fe=u.Ha,ge=u.Ia+8*F+x,x=0;16>x;++x)n(Be,je+x*u.R,K,X+32*x,16);for(x=0;8>x;++x)n(Ue,_e+x*u.B,Y,se+32*x,8),n(fe,ge+x*u.B,he,Ee+32*x,8)}}function Ca(u,p,x,F,M,V,K,X,Y){var se=[0],he=[0],Ee=0,_e=Y!=null?Y.kd:0,Be=Y??new nA;if(u==null||12>x)return 7;Be.data=u,Be.w=p,Be.ha=x,p=[p],x=[x],Be.gb=[Be.gb];e:{var je=p,Ue=x,fe=Be.gb;if(e(u!=null),e(Ue!=null),e(fe!=null),fe[0]=0,12<=Ue[0]&&!r(u,je[0],"RIFF")){if(r(u,je[0]+8,"WEBP")){fe=3;break e}var ge=xe(u,je[0]+4);if(12>ge||4294967286<ge){fe=3;break e}if(_e&&ge>Ue[0]-8){fe=7;break e}fe[0]=ge,je[0]+=12,Ue[0]-=12}fe=0}if(fe!=0)return fe;for(ge=0<Be.gb[0],x=x[0];;){e:{var Re=u;Ue=p,fe=x;var Me=se,De=he,gt=je=[0];if((At=Ee=[Ee])[0]=0,8>fe[0])fe=7;else{if(!r(Re,Ue[0],"VP8X")){if(xe(Re,Ue[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var st=xe(Re,Ue[0]+8),Qt=1+ce(Re,Ue[0]+12);if(2147483648<=Qt*(Re=1+ce(Re,Ue[0]+15))){fe=3;break e}gt!=null&&(gt[0]=st),Me!=null&&(Me[0]=Qt),De!=null&&(De[0]=Re),Ue[0]+=18,fe[0]-=18,At[0]=1}fe=0}}if(Ee=Ee[0],je=je[0],fe!=0)return fe;if(Ue=!!(2&je),!ge&&Ee)return 3;if(V!=null&&(V[0]=!!(16&je)),K!=null&&(K[0]=Ue),X!=null&&(X[0]=0),K=se[0],je=he[0],Ee&&Ue&&Y==null){fe=0;break}if(4>x){fe=7;break}if(ge&&Ee||!ge&&!Ee&&!r(u,p[0],"ALPH")){x=[x],Be.na=[Be.na],Be.P=[Be.P],Be.Sa=[Be.Sa];e:{st=u,fe=p,ge=x;var At=Be.gb;Me=Be.na,De=Be.P,gt=Be.Sa,Qt=22,e(st!=null),e(ge!=null),Re=fe[0];var dr=ge[0];for(e(Me!=null),e(gt!=null),Me[0]=null,De[0]=null,gt[0]=0;;){if(fe[0]=Re,ge[0]=dr,8>dr){fe=7;break e}var wr=xe(st,Re+4);if(4294967286<wr){fe=3;break e}var Ar=8+wr+1&-2;if(Qt+=Ar,0<At&&Qt>At){fe=3;break e}if(!r(st,Re,"VP8 ")||!r(st,Re,"VP8L")){fe=0;break e}if(dr[0]<Ar){fe=7;break e}r(st,Re,"ALPH")||(Me[0]=st,De[0]=Re+8,gt[0]=wr),Re+=Ar,dr-=Ar}}if(x=x[0],Be.na=Be.na[0],Be.P=Be.P[0],Be.Sa=Be.Sa[0],fe!=0)break}x=[x],Be.Ja=[Be.Ja],Be.xa=[Be.xa];e:if(At=u,fe=p,ge=x,Me=Be.gb[0],De=Be.Ja,gt=Be.xa,st=fe[0],Re=!r(At,st,"VP8 "),Qt=!r(At,st,"VP8L"),e(At!=null),e(ge!=null),e(De!=null),e(gt!=null),8>ge[0])fe=7;else{if(Re||Qt){if(At=xe(At,st+4),12<=Me&&At>Me-12){fe=3;break e}if(_e&&At>ge[0]-8){fe=7;break e}De[0]=At,fe[0]+=8,ge[0]-=8,gt[0]=Qt}else gt[0]=5<=ge[0]&&At[st+0]==47&&!(At[st+4]>>5),De[0]=ge[0];fe=0}if(x=x[0],Be.Ja=Be.Ja[0],Be.xa=Be.xa[0],p=p[0],fe!=0)break;if(4294967286<Be.Ja)return 3;if(X==null||Ue||(X[0]=Be.xa?2:1),K=[K],je=[je],Be.xa){if(5>x){fe=7;break}X=K,_e=je,Ue=V,u==null||5>x?u=0:5<=x&&u[p+0]==47&&!(u[p+4]>>5)?(ge=[0],At=[0],Me=[0],W(De=new R,u,p,x),ct(De,ge,At,Me)?(X!=null&&(X[0]=ge[0]),_e!=null&&(_e[0]=At[0]),Ue!=null&&(Ue[0]=Me[0]),u=1):u=0):u=0}else{if(10>x){fe=7;break}X=je,u==null||10>x||!Tl(u,p+3,x-3)?u=0:(_e=u[p+0]|u[p+1]<<8|u[p+2]<<16,Ue=16383&(u[p+7]<<8|u[p+6]),u=16383&(u[p+9]<<8|u[p+8]),1&_e||3<(_e>>1&7)||!(_e>>4&1)||_e>>5>=Be.Ja||!Ue||!u?u=0:(K&&(K[0]=Ue),X&&(X[0]=u),u=1))}if(!u||(K=K[0],je=je[0],Ee&&(se[0]!=K||he[0]!=je)))return 3;Y!=null&&(Y[0]=Be,Y.offset=p-Y.w,e(4294967286>p-Y.w),e(Y.offset==Y.ha-x));break}return fe==0||fe==7&&Ee&&Y==null?(V!=null&&(V[0]|=Be.na!=null&&0<Be.na.length),F!=null&&(F[0]=K),M!=null&&(M[0]=je),0):fe}function rh(u,p,x){var F=p.width,M=p.height,V=0,K=0,X=F,Y=M;if(p.Da=u!=null&&0<u.Da,p.Da&&(X=u.cd,Y=u.bd,V=u.v,K=u.j,11>x||(V&=-2,K&=-2),0>V||0>K||0>=X||0>=Y||V+X>F||K+Y>M))return 0;if(p.v=V,p.j=K,p.va=V+X,p.o=K+Y,p.U=X,p.T=Y,p.da=u!=null&&0<u.da,p.da){if(!yt(X,Y,x=[u.ib],V=[u.hb]))return 0;p.ib=x[0],p.hb=V[0]}return p.ob=u!=null&&u.ob,p.Kb=u==null||!u.Sd,p.da&&(p.ob=p.ib<3*F/4&&p.hb<3*M/4,p.Kb=0),1}function nh(u){if(u==null)return 2;if(11>u.S){var p=u.f.RGBA;p.fb+=(u.height-1)*p.A,p.A=-p.A}else p=u.f.kb,u=u.height,p.O+=(u-1)*p.fa,p.fa=-p.fa,p.N+=(u-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(u-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(u-1)*p.lb,p.lb=-p.lb);return 0}function su(u,p,x,F){if(F==null||0>=u||0>=p)return 2;if(x!=null){if(x.Da){var M=x.cd,V=x.bd,K=-2&x.v,X=-2&x.j;if(0>K||0>X||0>=M||0>=V||K+M>u||X+V>p)return 2;u=M,p=V}if(x.da){if(!yt(u,p,M=[x.ib],V=[x.hb]))return 2;u=M[0],p=V[0]}}F.width=u,F.height=p;e:{var Y=F.width,se=F.height;if(u=F.S,0>=Y||0>=se||!(u>=Yp&&13>u))u=2;else{if(0>=F.Rd&&F.sd==null){K=V=M=p=0;var he=(X=Y*Tb[u])*se;if(11>u||(V=(se+1)/2*(p=(Y+1)/2),u==12&&(K=(M=Y)*se)),(se=i(he+2*V+K))==null){u=1;break e}F.sd=se,11>u?((Y=F.f.RGBA).eb=se,Y.fb=0,Y.A=X,Y.size=he):((Y=F.f.kb).y=se,Y.O=0,Y.fa=X,Y.Fd=he,Y.f=se,Y.N=0+he,Y.Ab=p,Y.Cd=V,Y.ea=se,Y.W=0+he+V,Y.Db=p,Y.Ed=V,u==12&&(Y.F=se,Y.J=0+he+2*V),Y.Tc=K,Y.lb=M)}if(p=1,M=F.S,V=F.width,K=F.height,M>=Yp&&13>M)if(11>M)u=F.f.RGBA,p&=(X=Math.abs(u.A))*(K-1)+V<=u.size,p&=X>=V*Tb[M],p&=u.eb!=null;else{u=F.f.kb,X=(V+1)/2,he=(K+1)/2,Y=Math.abs(u.fa),se=Math.abs(u.Ab);var Ee=Math.abs(u.Db),_e=Math.abs(u.lb),Be=_e*(K-1)+V;p&=Y*(K-1)+V<=u.Fd,p&=se*(he-1)+X<=u.Cd,p=(p&=Ee*(he-1)+X<=u.Ed)&Y>=V&se>=X&Ee>=X,p&=u.y!=null,p&=u.f!=null,p&=u.ea!=null,M==12&&(p&=_e>=V,p&=Be<=u.Tc,p&=u.F!=null)}else p=0;u=p?0:2}}return u!=0||x!=null&&x.fd&&(u=nh(F)),u}var Jn=64,iu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],au=24,ou=32,sh=8,Ds=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(u){return u},E.Predictor2=function(u,p,x){return p[x+0]},E.Predictor3=function(u,p,x){return p[x+1]},E.Predictor4=function(u,p,x){return p[x-1]},E.Predictor5=function(u,p,x){return Ye(Ye(u,p[x+1]),p[x+0])},E.Predictor6=function(u,p,x){return Ye(u,p[x-1])},E.Predictor7=function(u,p,x){return Ye(u,p[x+0])},E.Predictor8=function(u,p,x){return Ye(p[x-1],p[x+0])},E.Predictor9=function(u,p,x){return Ye(p[x+0],p[x+1])},E.Predictor10=function(u,p,x){return Ye(Ye(u,p[x-1]),Ye(p[x+0],p[x+1]))},E.Predictor11=function(u,p,x){var F=p[x+0];return 0>=Ge(F>>24&255,u>>24&255,(p=p[x-1])>>24&255)+Ge(F>>16&255,u>>16&255,p>>16&255)+Ge(F>>8&255,u>>8&255,p>>8&255)+Ge(255&F,255&u,255&p)?F:u},E.Predictor12=function(u,p,x){var F=p[x+0];return(wt((u>>24&255)+(F>>24&255)-((p=p[x-1])>>24&255))<<24|wt((u>>16&255)+(F>>16&255)-(p>>16&255))<<16|wt((u>>8&255)+(F>>8&255)-(p>>8&255))<<8|wt((255&u)+(255&F)-(255&p)))>>>0},E.Predictor13=function(u,p,x){var F=p[x-1];return(Fe((u=Ye(u,p[x+0]))>>24&255,F>>24&255)<<24|Fe(u>>16&255,F>>16&255)<<16|Fe(u>>8&255,F>>8&255)<<8|Fe(u>>0&255,F>>0&255))>>>0};var hv=E.PredictorAdd0;E.PredictorAdd1=ze,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var ih=E.PredictorAdd2;tt("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),tt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var Gp,mi=E.ColorIndexInverseTransform,Au=E.MapARGB,zp=E.VP8LColorIndexInverseTransformAlpha,Wp=E.MapAlpha,oA=E.VP8LPredictorsAdd=[];oA.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var Vl,js,Cs,AA,ro,no,lu,so,un,ah,Es,gi,cu,$p,oh,Kl,ql,lA,Gl,uu,zl,cA,Ah,wi,vi,Fr,Tr,dn,In=i(511),io=i(2041),lh=i(225),du=i(767),Xp=0,fv=io,Jp=lh,ei=du,yi=In,Yp=0,Zp=1,yb=2,em=3,tm=4,pv=5,Bb=6,mv=7,gv=8,rm=9,wv=10,P3=[2,3,7],L3=[3,3,11],xb=[280,256,256,256,40],k3=[0,1,1,1,0],R3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],D3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],j3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],O3=8,vv=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],yv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ch=null,M3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],H3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],bb=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],V3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],K3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],q3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],G3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],uA=[],qi=[],ao=[],z3=1,Cb=2,dA=[],Bi=[];Pe("UpsampleRgbLinePair",$,3),Pe("UpsampleBgrLinePair",we,3),Pe("UpsampleRgbaLinePair",Ht,4),Pe("UpsampleBgraLinePair",tr,4),Pe("UpsampleArgbLinePair",Mt,4),Pe("UpsampleRgba4444LinePair",qe,2),Pe("UpsampleRgb565LinePair",Ie,2);var W3=E.UpsampleRgbLinePair,$3=E.UpsampleBgrLinePair,Eb=E.UpsampleRgbaLinePair,_b=E.UpsampleBgraLinePair,Ib=E.UpsampleArgbLinePair,Nb=E.UpsampleRgba4444LinePair,X3=E.UpsampleRgb565LinePair,nm=16,sm=1<<nm-1,uh=-227,Bv=482,J3=6,Sb=0,Y3=i(256),Z3=i(256),eQ=i(256),tQ=i(256),rQ=i(Bv-uh),nQ=i(Bv-uh);Ir("YuvToRgbRow",$,3),Ir("YuvToBgrRow",we,3),Ir("YuvToRgbaRow",Ht,4),Ir("YuvToBgraRow",tr,4),Ir("YuvToArgbRow",Mt,4),Ir("YuvToRgba4444Row",qe,2),Ir("YuvToRgb565Row",Ie,2);var Fb=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],im=[0,2,8],sQ=[8,7,6,4,4,2,2,2,1,1,1,1],iQ=1;this.WebPDecodeRGBA=function(u,p,x,F,M){var V=Zp,K=new eo,X=new ut;K.ba=X,X.S=V,X.width=[X.width],X.height=[X.height];var Y=X.width,se=X.height,he=new Nt;if(he==null||u==null)var Ee=2;else e(he!=null),Ee=Ca(u,p,x,he.width,he.height,he.Pd,he.Qd,he.format,null);if(Ee!=0?Y=0:(Y!=null&&(Y[0]=he.width[0]),se!=null&&(se[0]=he.height[0]),Y=1),Y){X.width=X.width[0],X.height=X.height[0],F!=null&&(F[0]=X.width),M!=null&&(M[0]=X.height);e:{if(F=new Wa,(M=new nA).data=u,M.w=p,M.ha=x,M.kd=1,p=[0],e(M!=null),((u=Ca(M.data,M.w,M.ha,null,null,null,p,null,M))==0||u==7)&&p[0]&&(u=4),(p=u)==0){if(e(K!=null),F.data=M.data,F.w=M.w+M.offset,F.ha=M.ha-M.offset,F.put=$t,F.ac=Et,F.bc=or,F.ma=K,M.xa){if((u=mt())==null){K=1;break e}if(function(_e,Be){var je=[0],Ue=[0],fe=[0];t:for(;;){if(_e==null)return 0;if(Be==null)return _e.a=2,0;if(_e.l=Be,_e.a=0,W(_e.m,Be.data,Be.w,Be.ha),!ct(_e.m,je,Ue,fe)){_e.a=3;break t}if(_e.xb=Cb,Be.width=je[0],Be.height=Ue[0],!xs(je[0],Ue[0],1,_e,null))break t;return 1}return e(_e.a!=0),0}(u,F)){if(F=(p=su(F.width,F.height,K.Oa,K.ba))==0){t:{F=u;r:for(;;){if(F==null){F=0;break t}if(e(F.s.yc!=null),e(F.s.Ya!=null),e(0<F.s.Wb),e((x=F.l)!=null),e((M=x.ma)!=null),F.xb!=0){if(F.ca=M.ba,F.tb=M.tb,e(F.ca!=null),!rh(M.Oa,x,em)){F.a=2;break r}if(!ha(F,x.width)||x.da)break r;if((x.da||Gt(F.ca.S))&&ve(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&ve()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!Ce(F.s.vb,F.s.Wa.Xa)){F.a=1;break r}F.xb=0}if(!Wt(F,F.V,F.Ba,F.c,F.i,x.o,be))break r;M.Dc=F.Ma,F=1;break t}e(F.a!=0),F=0}F=!F}F&&(p=u.a)}else p=u.a}else{if((u=new Fl)==null){K=1;break e}if(u.Fa=M.na,u.P=M.P,u.qc=M.Sa,Ul(u,F)){if((p=su(F.width,F.height,K.Oa,K.ba))==0){if(u.Aa=0,x=K.Oa,e((M=u)!=null),x!=null){if(0<(Y=0>(Y=x.Md)?0:100<Y?255:255*Y/100)){for(se=he=0;4>se;++se)12>(Ee=M.pb[se]).lc&&(Ee.ia=Y*sQ[0>Ee.lc?0:Ee.lc]>>3),he|=Ee.ia;he&&(alert("todo:VP8InitRandom"),M.ia=1)}M.Ga=x.Id,100<M.Ga?M.Ga=100:0>M.Ga&&(M.Ga=0)}Jc(u,F)||(p=u.a)}}else p=u.a}p==0&&K.Oa!=null&&K.Oa.fd&&(p=nh(K.ba))}K=p}V=K!=0?null:11>V?X.f.RGBA.eb:X.f.kb.y}else V=null;return V};var Tb=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(E,Q){for(var j="",S=0;S<4;S++)j+=String.fromCharCode(E[Q++]);return j}function d(E,Q){return(E[Q+0]<<0|E[Q+1]<<8|E[Q+2]<<16)>>>0}function f(E,Q){return(E[Q+0]<<0|E[Q+1]<<8|E[Q+2]<<16|E[Q+3]<<24)>>>0}new A;var m=[0],g=[0],B=[],b=new A,_=t,w=function(E,Q){var j={},S=0,N=!1,U=0,Z=0;if(j.frames=[],!function(G,te,J,le){for(var ne=0;ne<le;ne++)if(G[te+ne]!=J.charCodeAt(ne))return!0;return!1}(E,Q,"RIFF",4)){for(f(E,Q+=4),Q+=8;Q<E.length;){var ue=c(E,Q),ie=f(E,Q+=4);Q+=4;var z=ie+(1&ie);switch(ue){case"VP8 ":case"VP8L":j.frames[S]===void 0&&(j.frames[S]={}),(q=j.frames[S]).src_off=N?Z:Q-8,q.src_size=U+ie+8,S++,N&&(N=!1,U=0,Z=0);break;case"VP8X":(q=j.header={}).feature_flags=E[Q];var W=Q+4;q.canvas_width=1+d(E,W),W+=3,q.canvas_height=1+d(E,W),W+=3;break;case"ALPH":N=!0,U=z+8,Z=Q-8;break;case"ANIM":(q=j.header).bgcolor=f(E,Q),W=Q+4,q.loop_count=(pe=E)[(R=W)+0]<<0|pe[R+1]<<8,W+=2;break;case"ANMF":var ae,q;(q=j.frames[S]={}).offset_x=2*d(E,Q),Q+=3,q.offset_y=2*d(E,Q),Q+=3,q.width=1+d(E,Q),Q+=3,q.height=1+d(E,Q),Q+=3,q.duration=d(E,Q),Q+=3,ae=E[Q++],q.dispose=1&ae,q.blend=ae>>1&1}ue!="ANMF"&&(Q+=z)}var pe,R;return j}}(_,0);w.response=_,w.rgbaoutput=!0,w.dataurl=!1;var y=w.header?w.header:null,I=w.frames?w.frames:null;if(y){y.loop_counter=y.loop_count,m=[y.canvas_height],g=[y.canvas_width];for(var D=0;D<I.length&&I[D].blend!=0;D++);}var H=I[0],k=b.WebPDecodeRGBA(_,H.src_off,H.src_size,g,m);H.rgba=k,H.imgwidth=g[0],H.imgheight=m[0];for(var T=0;T<g[0]*m[0]*4;T++)B[T]=k[T];return this.width=g,this.height=m,this.data=B,this}(function(t){var e=function(){return typeof X2=="function"},r=function(m,g,B,b){var _=4,w=a;switch(b){case t.image_compression.FAST:_=1,w=i;break;case t.image_compression.MEDIUM:_=6,w=o;break;case t.image_compression.SLOW:_=9,w=A}m=n(m,g,B,w);var y=X2(m,{level:_});return t.__addimage__.arrayBufferToBinaryString(y)},n=function(m,g,B,b){for(var _,w,y,I=m.length/g,D=new Uint8Array(m.length+I),H=d(),k=0;k<I;k+=1){if(y=k*g,_=m.subarray(y,y+g),b)D.set(b(_,B,w),y+k);else{for(var T,E=H.length,Q=[];T<E;T+=1)Q[T]=H[T](_,B,w);var j=f(Q.concat());D.set(Q[j],y+k)}w=_}return D},s=function(m){var g=Array.apply([],m);return g.unshift(0),g},i=function(m,g){var B,b=[],_=m.length;b[0]=1;for(var w=0;w<_;w+=1)B=m[w-g]||0,b[w+1]=m[w]-B+256&255;return b},a=function(m,g,B){var b,_=[],w=m.length;_[0]=2;for(var y=0;y<w;y+=1)b=B&&B[y]||0,_[y+1]=m[y]-b+256&255;return _},o=function(m,g,B){var b,_,w=[],y=m.length;w[0]=3;for(var I=0;I<y;I+=1)b=m[I-g]||0,_=B&&B[I]||0,w[I+1]=m[I]+256-(b+_>>>1)&255;return w},A=function(m,g,B){var b,_,w,y,I=[],D=m.length;I[0]=4;for(var H=0;H<D;H+=1)b=m[H-g]||0,_=B&&B[H]||0,w=B&&B[H-g]||0,y=c(b,_,w),I[H+1]=m[H]-y+256&255;return I},c=function(m,g,B){if(m===g&&g===B)return m;var b=Math.abs(g-B),_=Math.abs(m-B),w=Math.abs(m+g-B-B);return b<=_&&b<=w?m:_<=w?g:B},d=function(){return[s,i,a,o,A]},f=function(m){var g=m.map(function(B){return B.reduce(function(b,_){return b+Math.abs(_)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(m,g,B,b){var _,w,y,I,D,H,k,T,E,Q,j,S,N,U,Z,ue=this.decode.FLATE_DECODE,ie="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(y=new Dz(m)).imgData,w=y.bits,_=y.colorSpace,D=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){E=(T=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,j=new Uint8Array(E*y.colors),Q=new Uint8Array(E);var z,W=y.pixelBitlength-y.bits;for(U=0,Z=0;U<E;U++){for(N=T[U],z=0;z<W;)j[Z++]=N>>>z&255,z+=y.bits;Q[U]=N>>>z&255}}if(y.bits===16){E=(T=new Uint32Array(y.decodePixels().buffer)).length,j=new Uint8Array(E*(32/y.pixelBitlength)*y.colors),Q=new Uint8Array(E*(32/y.pixelBitlength)),S=y.colors>1,U=0,Z=0;for(var ae=0;U<E;)N=T[U++],j[Z++]=N>>>0&255,S&&(j[Z++]=N>>>16&255,N=T[U++],j[Z++]=N>>>0&255),Q[ae++]=N>>>16&255;w=8}b!==t.image_compression.NONE&&e()?(m=r(j,y.width*y.colors,y.colors,b),k=r(Q,y.width,1,b)):(m=j,k=Q,ue=void 0)}if(y.colorType===3&&(_=this.color_spaces.INDEXED,H=y.palette,y.transparency.indexed)){var q=y.transparency.indexed,pe=0;for(U=0,E=q.length;U<E;++U)pe+=q[U];if((pe/=255)===E-1&&q.indexOf(0)!==-1)I=[q.indexOf(0)];else if(pe!==E){for(T=y.decodePixels(),Q=new Uint8Array(T.length),U=0,E=T.length;U<E;U++)Q[U]=q[T[U]];k=r(Q,y.width,1)}}var R=function(G){var te;switch(G){case t.image_compression.FAST:te=11;break;case t.image_compression.MEDIUM:te=13;break;case t.image_compression.SLOW:te=14;break;default:te=12}return te}(b);return ue===this.decode.FLATE_DECODE&&(ie="/Predictor "+R+" "),ie+="/Colors "+D+" /BitsPerComponent "+w+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(k&&this.__addimage__.isArrayBuffer(k)||this.__addimage__.isArrayBufferView(k))&&(k=this.__addimage__.arrayBufferToBinaryString(k)),{alias:B,data:m,index:g,filter:ue,decodeParameters:ie,transparency:I,palette:H,sMask:k,predictor:R,width:y.width,height:y.height,bitsPerComponent:w,colorSpace:_}}}})(Ut.API),function(t){t.processGIF89A=function(e,r,n,s){var i=new jz(e),a=i.width,o=i.height,A=[];i.decodeAndBlitFrameRGBA(0,A);var c={data:A,width:a,height:o},d=new Gy(100).encode(c,100);return t.processJPEG.call(this,d,r,n,s)},t.processGIF87A=t.processGIF89A}(Ut.API),$i.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$i.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Sr.log("bit decode error:"+r)}},$i.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var A=this.palette[i>>7-o&1];this.data[a+4*o]=A.blue,this.data[a+4*o+1]=A.green,this.data[a+4*o+2]=A.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},$i.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*s*4,o=i>>4,A=15&i,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[A],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},$i.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},$i.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,A=(i>>10&e)/e*255|0,c=i>>15?255:0,d=n*this.width*4+4*s;this.data[d]=A,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=c}this.pos+=t}},$i.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,A=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,d=s*this.width*4+4*i;this.data[d]=c,this.data[d+1]=A,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},$i.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},$i.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=a}},$i.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var i=new $i(e,!1),a=i.width,o=i.height,A={data:i.getData(),width:a,height:o},c=new Gy(100).encode(A,100);return t.processJPEG.call(this,c,r,n,s)}}(Ut.API),gI.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var i=new gI(e),a=i.width,o=i.height,A={data:i.getData(),width:a,height:o},c=new Gy(100).encode(A,100);return t.processJPEG.call(this,c,r,n,s)}}(Ut.API),Ut.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,A=0,c=0;c<s;c+=4){var d=n[c],f=n[c+1],m=n[c+2],g=n[c+3];i[o++]=d,i[o++]=f,i[o++]=m,a[A++]=g}var B=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:B,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Ut.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Fu=Ut.API,hg=Fu.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,A=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=c.fof?c.fof:1,f=e.doKerning!==!1,m=0,g=t.length,B=0,b=o[0]||A,_=[];for(r=0;r<g;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?_.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+a*(1e3/i)||0)/1e3):(m=f&&xr(c[n])==="object"&&!isNaN(parseInt(c[n][B],10))?c[n][B]/d:0,_.push((o[n]||b)/A+m)),B=n;return _},hI=Fu.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Fu.processArabic&&(t=Fu.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:hg.apply(this,arguments).reduce(function(i,a){return i+a},0)},fI=function(t,e,r,n){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<r;)o+=e[i],i++;s.push(t.slice(0,i));var A=i;for(o=0;i!==a;)o+e[i]>n&&(s.push(t.slice(A,i)),o=0,A=i),o+=e[i],i++;return A!==i&&s.push(t.slice(A,i)),s},pI=function(t,e,r){r||(r={});var n,s,i,a,o,A,c,d=[],f=[d],m=r.textIndent||0,g=0,B=0,b=t.split(" "),_=hg.apply(this,[" ",r])[0];if(A=r.lineIndent===-1?b[0].length+2:r.lineIndent||0){var w=Array(A).join(" "),y=[];b.map(function(D){(D=D.split(/\s*\n/)).length>1?y=y.concat(D.map(function(H,k){return(k&&H.length?`
`:"")+H})):y.push(D[0])}),b=y,A=hI.apply(this,[w,r])}for(i=0,a=b.length;i<a;i++){var I=0;if(n=b[i],A&&n[0]==`
`&&(n=n.substr(1),I=1),m+g+(B=(s=hg.apply(this,[n,r])).reduce(function(D,H){return D+H},0))>e||I){if(B>e){for(o=fI.apply(this,[n,s,e-(m+g),e]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);B=s.slice(n.length-(d[0]?d[0].length:0)).reduce(function(D,H){return D+H},0)}else d=[n];f.push(d),m=B+A,g=_}else d.push(n),m+=g+B,g=_}return c=A?function(D,H){return(H?w:"")+D.join(" ")}:function(D){return D.join(" ")},f.map(c)},Fu.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var o,A,c=[];for(o=0,A=n.length;o<A;o++)c=c.concat(pI.apply(this,[n[o],a,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var i=function(f){return"0x"+parseInt(f,10).toString(16)},a=t.__fontmetrics__.compress=function(f){var m,g,B,b,_=["{"];for(var w in f){if(m=f[w],isNaN(parseInt(w,10))?g="'"+w+"'":(w=parseInt(w,10),g=(g=i(w).slice(2)).slice(0,-1)+n[g.slice(-1)]),typeof m=="number")m<0?(B=i(m).slice(3),b="-"):(B=i(m).slice(2),b=""),B=b+B.slice(0,-1)+n[B.slice(-1)];else{if(xr(m)!=="object")throw new Error("Don't know what to do with value type "+xr(m)+".");B=a(m)}_.push(g+B)}return _.push("}"),_.join("")},o=t.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,B,b,_={},w=1,y=_,I=[],D="",H="",k=f.length-1,T=1;T<k;T+=1)(b=f[T])=="'"?m?(B=m.join(""),m=void 0):m=[]:m?m.push(b):b=="{"?(I.push([y,B]),y={},B=void 0):b=="}"?((g=I.pop())[0][g[1]]=y,B=void 0,y=g[0]):b=="-"?w=-1:B===void 0?r.hasOwnProperty(b)?(D+=r[b],B=parseInt(D,16)*w,w=1,D=""):D+=b:r.hasOwnProperty(b)?(H+=r[b],y[B]=parseInt(H,16)*w,w=1,B=void 0,H=""):H+=b;return _},A={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:A,"Courier-Bold":A,"Courier-BoldOblique":A,"Courier-Oblique":A,Helvetica:A,"Helvetica-Bold":A,"Helvetica-BoldOblique":A,"Helvetica-Oblique":A,"Times-Roman":A,"Times-Bold":A,"Times-BoldItalic":A,"Times-Italic":A}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(f){var m=f.font,g=d.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var B=c.Unicode[m.postScriptName];B&&(m.metadata.Unicode.encoding=B,m.encoding=B.codePages[0])}])}(Ut.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(If(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,n)}}])}(Ut),function(t){function e(){return(kt.canvg?Promise.resolve(kt.canvg):To(()=>import("./index.es-jfe-xrOS.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Ut.API.addSvgAsImage=function(r,n,s,i,a,o,A,c){if(isNaN(n)||isNaN(s))throw Sr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw Sr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=i,d.height=a;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(B){return B.fromString(f,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(B){return B.render(m)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),n,s,i,a,A,c)})}}(),Ut.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},Ut.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),A=[],c=0,d=0,f=0;function m(B,b){var _,w=!1;for(_=0;_<B.length;_+=1)B[_]===b&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(f=0;f<g;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(xr(t)==="object"){for(s in t)if(i=t[s],m(o,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&m(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")A.push(String(i[c]-1));else if(i[c].length>1){for(d=0;d<i[c].length;d+=1)typeof i[c][d]!="number"&&(n=!1);n===!0&&A.push([i[c][0]-1,i[c][1]-1].join(" "))}r[s].value="["+A.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var B,b=[];for(B in r)r[B].explicitSet===!0&&(r[B].type==="name"?b.push("/"+B+" /"+r[B].value):b.push("/"+B+" "+r[B].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+a.length+o.length+s.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+A),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Ut.API),function(t){var e=t.API,r=e.pdfEscape16=function(i,a){for(var o,A=a.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],f=0,m=i.length;f<m;++f){if(o=a.metadata.characterToGlyph(i.charCodeAt(f)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(f),A.indexOf(o)==-1&&(A.push(o),A.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(c[4-o.length],o)}return d.join("")},n=function(i){var a,o,A,c,d,f,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],f=0,m=(o=Object.keys(i).sort(function(g,B){return g-B})).length;f<m;f++)a=o[f],A.length>=100&&(d+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),A.push("<"+a+"><"+c+">"));return A.length&&(d+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,A=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",B=0;B<m.length;B++)g+=String.fromCharCode(m[B]);var b=c();d({data:g,addLength1:!0,objectId:b}),A("endobj");var _=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:_}),A("endobj");var w=c();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+Ku(o.fontName)),A("/FontFile2 "+b+" 0 R"),A("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),A("/Flags "+o.metadata.flags),A("/StemV "+o.metadata.stemV),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A(">>"),A("endobj");var y=c();A("<<"),A("/Type /Font"),A("/BaseFont /"+Ku(o.fontName)),A("/FontDescriptor "+w+" 0 R"),A("/W "+t.API.PDFObject.convert(f)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+o.encoding+")"),A(">>"),A(">>"),A("endobj"),o.objectNumber=c(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+_+" 0 R"),A("/BaseFont /"+Ku(o.fontName)),A("/Encoding /"+o.encoding),A("/DescendantFonts ["+y+" 0 R]"),A(">>"),A("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,A=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,m="",g=0;g<f.length;g++)m+=String.fromCharCode(f[g]);var B=c();d({data:m,addLength1:!0,objectId:B}),A("endobj");var b=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),A("endobj");var _=c();A("<<"),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A("/StemV "+o.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+B+" 0 R"),A("/Flags 96"),A("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),A("/FontName /"+Ku(o.fontName)),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A(">>"),A("endobj"),o.objectNumber=c();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Ku(o.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),A("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",A=i.x,c=i.y,d=i.options||{},f=i.mutex||{},m=f.pdfEscape,g=f.activeFontKey,B=f.fonts,b=g,_="",w=0,y="",I=B[b].encoding;if(B[b].encoding!=="Identity-H")return{text:o,x:A,y:c,options:d,mutex:f};for(y=o,b=g,Array.isArray(o)&&(y=o[0]),w=0;w<y.length;w+=1)B[b].metadata.hasOwnProperty("cmap")&&(a=B[b].metadata.cmap.unicode.codeMap[y[w].charCodeAt(0)]),a||y[w].charCodeAt(0)<256&&B[b].metadata.hasOwnProperty("Unicode")?_+=y[w]:_+="";var D="";return parseInt(b.slice(1))<14||I==="WinAnsiEncoding"?D=m(_,b).split("").map(function(H){return H.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(D=r(_,B[b])),f.isHex=!0,{text:D,x:A,y:c,options:d,mutex:f}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],A={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},A,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},A,{text:a[c]})).text);i.text=o}else i.text=s(Object.assign({},A,{text:a})).text}])}(Ut),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Ut.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,i,a,o,A,c,d,f=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],B={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,I=0;this.__bidiEngine__={};var D=function(S){var N=S.charCodeAt(),U=N>>8,Z=b[U];return Z!==void 0?f[256*Z+(255&N)]:U===252||U===253?"AL":w.test(U)?"L":U===8?"R":"N"},H=function(S){for(var N,U=0;U<S.length;U++){if((N=D(S.charAt(U)))==="L")return!1;if(N==="R")return!0}return!1},k=function(S,N,U,Z){var ue,ie,z,W,ae=N[Z];switch(ae){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(ae="AN");break;case"AL":y=!0,ae="R";break;case"WS":ae="N";break;case"CS":Z<1||Z+1>=N.length||(ue=U[Z-1])!=="EN"&&ue!=="AN"||(ie=N[Z+1])!=="EN"&&ie!=="AN"?ae="N":y&&(ie="AN"),ae=ie===ue?ie:"N";break;case"ES":ae=(ue=Z>0?U[Z-1]:"B")==="EN"&&Z+1<N.length&&N[Z+1]==="EN"?"EN":"N";break;case"ET":if(Z>0&&U[Z-1]==="EN"){ae="EN";break}if(y){ae="N";break}for(z=Z+1,W=N.length;z<W&&N[z]==="ET";)z++;ae=z<W&&N[z]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(W=N.length,z=Z+1;z<W&&N[z]==="NSM";)z++;if(z<W){var q=S[Z],pe=q>=1425&&q<=2303||q===64286;if(ue=N[z],pe&&(ue==="R"||ue==="AL")){ae="R";break}}}ae=Z<1||(ue=N[Z-1])==="B"?"N":U[Z-1];break;case"B":y=!1,s=!0,ae=I;break;case"S":i=!0,ae="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":ae="N"}return ae},T=function(S,N,U){var Z=S.split("");return U&&E(Z,U,{hiLevel:I}),Z.reverse(),N&&N.reverse(),Z.join("")},E=function(S,N,U){var Z,ue,ie,z,W,ae=-1,q=S.length,pe=0,R=[],G=I?g:m,te=[];for(y=!1,s=!1,i=!1,ue=0;ue<q;ue++)te[ue]=D(S[ue]);for(ie=0;ie<q;ie++){if(W=pe,R[ie]=k(S,te,R,ie),Z=240&(pe=G[W][B[R[ie]]]),pe&=15,N[ie]=z=G[pe][5],Z>0)if(Z===16){for(ue=ae;ue<ie;ue++)N[ue]=1;ae=-1}else ae=-1;if(G[pe][6])ae===-1&&(ae=ie);else if(ae>-1){for(ue=ae;ue<ie;ue++)N[ue]=z;ae=-1}te[ie]==="B"&&(N[ie]=0),U.hiLevel|=z}i&&function(J,le,ne){for(var ee=0;ee<ne;ee++)if(J[ee]==="S"){le[ee]=I;for(var oe=ee-1;oe>=0&&J[oe]==="WS";oe--)le[oe]=I}}(te,N,q)},Q=function(S,N,U,Z,ue){if(!(ue.hiLevel<S)){if(S===1&&I===1&&!s)return N.reverse(),void(U&&U.reverse());for(var ie,z,W,ae,q=N.length,pe=0;pe<q;){if(Z[pe]>=S){for(W=pe+1;W<q&&Z[W]>=S;)W++;for(ae=pe,z=W-1;ae<z;ae++,z--)ie=N[ae],N[ae]=N[z],N[z]=ie,U&&(ie=U[ae],U[ae]=U[z],U[z]=ie);pe=W}pe++}}},j=function(S,N,U){var Z=S.split(""),ue={hiLevel:I};return U||(U=[]),E(Z,U,ue),function(ie,z,W){if(W.hiLevel!==0&&d)for(var ae,q=0;q<ie.length;q++)z[q]===1&&(ae=_.indexOf(ie[q]))>=0&&(ie[q]=_[ae+1])}(Z,U,ue),Q(2,Z,N,U,ue),Q(1,Z,N,U,ue),Z.join("")};return this.__bidiEngine__.doBidiReorder=function(S,N,U){if(function(ue,ie){if(ie)for(var z=0;z<ue.length;z++)ie[z]=z;o===void 0&&(o=H(ue)),c===void 0&&(c=H(ue))}(S,N),a||!A||c)if(a&&A&&o^c)I=o?1:0,S=T(S,N,U);else if(!a&&A&&c)I=o?1:0,S=j(S,N,U),S=T(S,N);else if(!a||o||A||c){if(a&&!A&&o^c)S=T(S,N),o?(I=0,S=j(S,N,U)):(I=1,S=j(S,N,U),S=T(S,N));else if(a&&o&&!A&&c)I=1,S=j(S,N,U),S=T(S,N);else if(!a&&!A&&o^c){var Z=d;o?(I=1,S=j(S,N,U),I=0,d=!1,S=j(S,N,U),d=Z):(I=0,S=j(S,N,U),S=T(S,N),I=1,d=!1,S=j(S,N,U),d=Z,S=T(S,N))}}else I=0,S=j(S,N,U);else I=o?1:0,S=j(S,N,U);return S},this.__bidiEngine__.setOptions=function(S){S&&(a=S.isInputVisual,A=S.isOutputVisual,o=S.isInputRtl,c=S.isOutputRtl,d=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([r.doBidiReorder(s[o])]);n.text=a}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(Ut),Ut.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new vl(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new eW(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Oz(this.contents),this.head=new Hz(this),this.name=new zz(this),this.cmap=new _3(this),this.toUnicode={},this.hhea=new Vz(this),this.maxp=new Wz(this),this.hmtx=new $z(this),this.post=new qz(this),this.os2=new Kz(this),this.loca=new Zz(this),this.glyf=new Xz(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,A,c;for(c=[],a=0,o=(A=this.bbox).length;a<o;a++)e=A[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var da,vl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,i,a,o,A;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^A)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*a+256*o+A},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)r=e[n],i.push(this.writeByte(r));return i},t}(),Oz=function(){var t;function e(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,i,a,o,A,c,d,f,m,g,B,b;for(b in g=Object.keys(r).length,A=Math.log(2),f=16*Math.floor(Math.log(g)/A),a=Math.floor(f/A),d=16*g-f,(s=new vl).writeInt(this.scalarType),s.writeShort(g),s.writeShort(f),s.writeShort(a),s.writeShort(d),i=16*g,c=s.pos+i,o=null,B=[],r)for(m=r[b],s.writeString(b),s.writeInt(t(m)),s.writeInt(c),s.writeInt(m.length),B=B.concat(m),b==="head"&&(o=c),c+=m.length;c%4;)B.push(0),c++;return s.write(B),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,i,a;for(r=I3.call(r);r.length%4;)r.push(0);for(i=new vl(r),s=0,n=0,a=r.length;n<a;n=n+=4)s+=i.readUInt32();return 4294967295&s},e}(),Mz={}.hasOwnProperty,Ka=function(t,e){for(var r in e)Mz.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};da=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Hz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new vl).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),wI=function(){function t(e,r){var n,s,i,a,o,A,c,d,f,m,g,B,b,_,w,y,I;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,i=function(){var D,H;for(H=[],A=D=0;0<=m?D<m:D>m;A=0<=m?++D:--D)H.push(e.readUInt16());return H}(),e.pos+=2,b=function(){var D,H;for(H=[],A=D=0;0<=m?D<m:D>m;A=0<=m?++D:--D)H.push(e.readUInt16());return H}(),c=function(){var D,H;for(H=[],A=D=0;0<=m?D<m:D>m;A=0<=m?++D:--D)H.push(e.readUInt16());return H}(),d=function(){var D,H;for(H=[],A=D=0;0<=m?D<m:D>m;A=0<=m?++D:--D)H.push(e.readUInt16());return H}(),s=(this.length-e.pos+this.offset)/2,o=function(){var D,H;for(H=[],A=D=0;0<=s?D<s:D>s;A=0<=s?++D:--D)H.push(e.readUInt16());return H}(),A=w=0,I=i.length;w<I;A=++w)for(_=i[A],n=y=B=b[A];B<=_?y<=_:y>=_;n=B<=_?++y:--y)d[A]===0?a=n+c[A]:(a=o[d[A]/2+(n-B)-(m-A)]||0)!==0&&(a+=c[A]),this.codeMap[n]=65535&a}e.pos=f}return t.encode=function(e,r){var n,s,i,a,o,A,c,d,f,m,g,B,b,_,w,y,I,D,H,k,T,E,Q,j,S,N,U,Z,ue,ie,z,W,ae,q,pe,R,G,te,J,le,ne,ee,oe,ye,Te,ce;switch(Z=new vl,a=Object.keys(e).sort(function(xe,Ce){return xe-Ce}),r){case"macroman":for(b=0,_=function(){var xe=[];for(B=0;B<256;++B)xe.push(0);return xe}(),y={0:0},i={},ue=0,ae=a.length;ue<ae;ue++)y[oe=e[s=a[ue]]]==null&&(y[oe]=++b),i[s]={old:e[s],new:y[e[s]]},_[s]=y[e[s]];return Z.writeUInt16(1),Z.writeUInt16(0),Z.writeUInt32(12),Z.writeUInt16(0),Z.writeUInt16(262),Z.writeUInt16(0),Z.write(_),{charMap:i,subtable:Z.data,maxGlyphID:b+1};case"unicode":for(N=[],f=[],I=0,y={},n={},w=c=null,ie=0,q=a.length;ie<q;ie++)y[H=e[s=a[ie]]]==null&&(y[H]=++I),n[s]={old:H,new:y[H]},o=y[H]-s,w!=null&&o===c||(w&&f.push(w),N.push(s),c=o),w=s;for(w&&f.push(w),f.push(65535),N.push(65535),j=2*(Q=N.length),E=2*Math.pow(Math.log(Q)/Math.LN2,2),m=Math.log(E/2)/Math.LN2,T=2*Q-E,A=[],k=[],g=[],B=z=0,pe=N.length;z<pe;B=++z){if(S=N[B],d=f[B],S===65535){A.push(0),k.push(0);break}if(S-(U=n[S].new)>=32768)for(A.push(0),k.push(2*(g.length+Q-B)),s=W=S;S<=d?W<=d:W>=d;s=S<=d?++W:--W)g.push(n[s].new);else A.push(U-S),k.push(0)}for(Z.writeUInt16(3),Z.writeUInt16(1),Z.writeUInt32(12),Z.writeUInt16(4),Z.writeUInt16(16+8*Q+2*g.length),Z.writeUInt16(0),Z.writeUInt16(j),Z.writeUInt16(E),Z.writeUInt16(m),Z.writeUInt16(T),ne=0,R=f.length;ne<R;ne++)s=f[ne],Z.writeUInt16(s);for(Z.writeUInt16(0),ee=0,G=N.length;ee<G;ee++)s=N[ee],Z.writeUInt16(s);for(ye=0,te=A.length;ye<te;ye++)o=A[ye],Z.writeUInt16(o);for(Te=0,J=k.length;Te<J;Te++)D=k[Te],Z.writeUInt16(D);for(ce=0,le=g.length;ce<le;ce++)b=g[ce],Z.writeUInt16(b);return{charMap:n,subtable:Z.data,maxGlyphID:I+1}}},t}(),_3=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new wI(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=wI.encode(r,n),(i=new vl).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),Vz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),Kz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),qz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var a;for(s=r.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var o,A,c;for(c=[],a=o=0,A=this.file.maxp.numGlyphs;0<=A?o<A:o>A;a=0<=A?++o:--o)c.push(r.readUInt32());return c}).call(this)}},e}(),Gz=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},zz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,i,a,o,A,c,d,f,m,g;for(r.pos=this.offset,r.readShort(),n=r.readShort(),A=r.readShort(),s=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+A+r.readShort()});for(c={},a=f=0,m=s.length;f<m;a=++f)i=s[a],r.pos=i.offset,d=r.readString(i.length),o=new Gz(d,i),c[g=i.nameID]==null&&(c[g]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Wz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),$z=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,i,a,o,A,c;for(r.pos=this.offset,this.metrics=[],n=0,A=this.file.hhea.numberOfMetrics;0<=A?n<A:n>A;n=0<=A?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=i?d<i:d>i;n=0<=i?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,m,g;for(g=[],d=0,f=(m=this.metrics).length;d<f;d++)a=m[d],g.push(a.advance);return g}).call(this),s=this.widths[this.widths.length-1],c=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),I3=[].slice,Xz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,i,a,o,A,c,d,f,m;return r in this.cache?this.cache[r]:(a=this.file.loca,n=this.file.contents,s=a.indexOf(r),(i=a.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,o=(A=new vl(n.read(i))).readShort(),d=A.readShort(),m=A.readShort(),c=A.readShort(),f=A.readShort(),this.cache[r]=o===-1?new Yz(A,d,m,c,f):new Jz(A,o,d,m,c,f),this.cache[r]))},e.prototype.encode=function(r,n,s){var i,a,o,A,c;for(o=[],a=[],A=0,c=n.length;A<c;A++)i=r[n[A]],a.push(o.length),i&&(o=o.concat(i.encode(s)));return a.push(o.length),{table:o,offsets:a}},e}(),Jz=function(){function t(e,r,n,s,i,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Yz=function(){function t(e,r,n,s,i){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new vl(I3.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),Zz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=2)a.push(2*r.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=4)a.push(r.readUInt32());return a}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<s.length;++o)if(s[o]=i,a<n.length&&n[a]==o){++a,s[o]=i;var A=this.offsets[o],c=this.offsets[o+1]-A;c>0&&(i+=c)}for(var d=new Array(4*s.length),f=0;f<s.length;++f)d[4*f+3]=255&s[f],d[4*f+2]=(65280&s[f])>>8,d[4*f+1]=(16711680&s[f])>>16,d[4*f]=(4278190080&s[f])>>24;return d},e}(),eW=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,i,a,o,A;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in A=this.glyphsFor(r))n=A[i],s[i]=n;return s},t.prototype.encode=function(e,r){var n,s,i,a,o,A,c,d,f,m,g,B,b,_,w;for(s in n=_3.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),g={0:0},w=n.charMap)g[(A=w[s]).old]=A.new;for(B in m=n.maxGlyphID,a)B in g||(g[B]=m++);return d=function(y){var I,D;for(I in D={},y)D[y[I]]=I;return D}(g),f=Object.keys(d).sort(function(y,I){return y-I}),b=function(){var y,I,D;for(D=[],y=0,I=f.length;y<I;y++)o=f[y],D.push(d[o]);return D}(),i=this.font.glyf.encode(a,b,g),c=this.font.loca.encode(i.offsets,b),_={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t}();Ut.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,i,a;if(Array.isArray(r))return"["+function(){var o,A,c;for(c=[],o=0,A=r.length;o<A;o++)n=r[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)a=r[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+r},e}();const nB=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Uz,AcroFormAppearance:bt,AcroFormButton:Sn,AcroFormCheckBox:Ff,AcroFormChoiceField:yc,AcroFormComboBox:xc,AcroFormEditBox:Nf,AcroFormListBox:Bc,AcroFormPasswordField:Tf,AcroFormPushButton:Sf,AcroFormRadioButton:bc,AcroFormTextField:Al,GState:wp,ShadingPattern:jA,TilingPattern:fc,default:Ut,jsPDF:Ut},Symbol.toStringTag,{value:"Module"}));async function tW(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:Pt.now()};return is(dt(Qe,"inventory_batches"),e)}async function N3(t,e){await $r(Tt(Qe,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:Pt.now()})}async function rW(t,e){const r=Yt(dt(Qe,"batch_allocations"),mr("saleDate",">=",t),mr("saleDate","<=",e)),n=await Lt(r),s={};return n.forEach(i=>{const a=i.data(),o=a.batchId;s[o]||(s[o]={batchId:a.batchId,batchDate:a.batchDate,productName:a.productName,quantity:0,amountCharged:0}),s[o].quantity+=Number(a.quantity||0),s[o].amountCharged+=Number(a.amountCharged||0)}),Object.values(s)}async function nW(t){const e=Tt(Qe,"salesV2",t),r=await Nl(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),s=[];if(Array.isArray(n.items)){for(const o of n.items)if(Array.isArray(o==null?void 0:o.allocations))for(const A of o.allocations){const c=String((A==null?void 0:A.batchId)||"").trim(),d=Number((A==null?void 0:A.qty)||0);c&&d&&s.push({batchId:c,qty:d})}}if(Array.isArray(n.allocations))for(const o of n.allocations){const A=String((o==null?void 0:o.batchId)||"").trim(),c=Number((o==null?void 0:o.qty)||0);A&&c&&s.push({batchId:A,qty:c})}if(s.length===0)return await il(Qe,async o=>{o.delete(e)}),{restored:0};const i=new Map;for(const o of s)i.set(o.batchId,Number((i.get(o.batchId)||0)+o.qty));let a=0;return await il(Qe,async o=>{const A=Array.from(i.entries()),c=A.map(([f])=>Tt(Qe,"inventory_batches",f)),d=await Promise.all(c.map(f=>o.get(f)));A.forEach(([f,m],g)=>{const B=d[g];if(!B.exists())return;const b=B.data(),_=Number((b==null?void 0:b.remaining)??0),w=Number((_+Number(m||0)).toFixed(3));o.update(c[g],{remaining:w}),a+=Number(m||0)}),o.delete(e)}),{restored:a}}var S3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vI=Co.createContext&&Co.createContext(S3),sW=["attr","size","title"];function iW(t,e){if(t==null)return{};var r=aW(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function aW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Z0(){return Z0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Z0.apply(this,arguments)}function yI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ew(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yI(Object(r),!0).forEach(function(n){oW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oW(t,e,r){return e=AW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AW(t){var e=lW(t,"string");return typeof e=="symbol"?e:e+""}function lW(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F3(t){return t&&t.map((e,r)=>Co.createElement(e.tag,ew({key:r},e.attr),F3(e.child)))}function cW(t){return e=>Co.createElement(uW,Z0({attr:ew({},t.attr)},e),F3(t.child))}function uW(t){var e=r=>{var{attr:n,size:s,title:i}=t,a=iW(t,sW),o=s||r.size||"1em",A;return r.className&&(A=r.className),t.className&&(A=(A?A+" ":"")+t.className),Co.createElement("svg",Z0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:A,style:ew(ew({color:t.color||r.color},r.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&Co.createElement("title",null,i),t.children)};return vI!==void 0?Co.createElement(vI.Consumer,null,r=>e(r)):e(S3)}function dW(t){return cW({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Xd({onClick:t,loading:e,className:r=""}){return l.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-sm
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[l.jsx(dW,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}function Jd(){const[t,e]=L.useState(0),r=L.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const Ci=t=>Math.round((Number(t)||0)*100)/100,fg=t=>Math.round((Number(t)||0)*1e3)/1e3,Dh=t=>Number(t??0).toFixed(2),zy=t=>Number(t??0).toFixed(3),BI=(t,e)=>{var n;const r=t.date??((n=t.timestamp)!=null&&n.toDate?Zt(t.timestamp.toDate(),"yyyy-MM-dd"):"");return r?Array.isArray(t.items)&&t.items.length>0?t.items.map((s,i)=>{const a=Number((s==null?void 0:s.qty)??0),o=Number((s==null?void 0:s.lineFinal)??0)||Math.max(0,Number((s==null?void 0:s.unitPrice)||0)*a-Number((s==null?void 0:s.discount)||0));return{id:`${e}#${i}`,productName:String((s==null?void 0:s.productName)??"(sin nombre)"),quantity:a,amount:Ci(o),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(s==null?void 0:s.allocations)?s.allocations:t.allocations,avgUnitCost:Number((s==null?void 0:s.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((s==null?void 0:s.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]:[]};function hW({role:t}){const[e,r]=L.useState([]),[n,s]=L.useState([]),[i,a]=L.useState(null),[o,A]=L.useState(!0),[c,d]=L.useState(""),[f,m]=L.useState("ALL"),[g,B]=L.useState(null),[b,_]=L.useState(0),[w,y]=L.useState(0),[I,D]=L.useState(""),[H,k]=L.useState(0),[T,E]=L.useState("0"),Q=Zt(new Date,"yyyy-MM-dd"),j=L.useRef(null),{refreshKey:S,refresh:N}=Jd();L.useEffect(()=>{const ne=Yt(dt(Qe,"salesV2"),mr("date","==",Q)),ee=x2(ne,oe=>{const ye=[];oe.forEach(Te=>{const ce=BI(Te.data(),Te.id);ye.push(...ce)}),r(ye),A(!1)});return()=>ee()},[Q,S]),L.useEffect(()=>{const ne=Yt(dt(Qe,"salesV2"),mr("status","==","FLOTANTE")),ee=x2(ne,oe=>{const ye=[];oe.forEach(Te=>{const ce=BI(Te.data(),Te.id);ye.push(...ce)}),s(ye)});return()=>ee()},[S]),L.useEffect(()=>{(async()=>{const ee=Yt(dt(Qe,"daily_closures"),mr("date","==",Q)),oe=await Lt(ee);if(oe.empty)a(null);else{const ye=oe.docs[0];a({id:ye.id,...ye.data()})}})()},[Q,S]);const U=Co.useMemo(()=>{if(f==="FLOTANTE"){const ne=[...e,...n],ee=new Map;for(const oe of ne)oe.status==="FLOTANTE"&&ee.set(oe.id,oe);return Array.from(ee.values())}if(f==="ALL"){const ne=[...e,...n],ee=new Map;for(const oe of ne)ee.set(oe.id,oe);return Array.from(ee.values())}return e.filter(ne=>ne.status==="PROCESADA")},[f,e,n]);Ci(U.reduce((ne,ee)=>ne+(ee.amountSuggested||0),0));const Z=Ci(U.reduce((ne,ee)=>ne+(ee.amount||0),0)),ue=fg(U.reduce((ne,ee)=>ne+(ee.quantity||0),0)),ie=Ci(U.reduce((ne,ee)=>ne+Number(ee.cogsAmount??0),0)),z=Ci(Z-ie),W={};U.forEach(ne=>{const ee=ne.productName||"(sin nombre)";W[ee]||(W[ee]={totalQuantity:0,totalAmount:0}),W[ee].totalQuantity=fg(W[ee].totalQuantity+(ne.quantity||0)),W[ee].totalAmount=Ci(W[ee].totalAmount+(ne.amount||0))});const ae=Object.entries(W).map(([ne,ee])=>({productName:ne,totalQuantity:ee.totalQuantity,totalAmount:ee.totalAmount})),q=async()=>{try{const ne=U.filter(Ce=>Ce.status==="FLOTANTE"),ee=ne.length>0?ne:e.filter(Ce=>Ce.status!=="PROCESADA");if(ee.length===0){d("No hay ventas para procesar.");return}const oe={totalCharged:Ci(ee.reduce((Ce,me)=>Ce+(me.amount||0),0)),totalSuggested:Ci(ee.reduce((Ce,me)=>Ce+(me.amountSuggested||0),0)),totalUnits:fg(ee.reduce((Ce,me)=>Ce+(me.quantity||0),0)),totalCOGS:Ci(ee.reduce((Ce,me)=>Ce+Number(me.cogsAmount??0),0))},ye=Ci(oe.totalCharged-oe.totalSuggested),Te=Ci(oe.totalCharged-oe.totalCOGS),ce=await is(dt(Qe,"daily_closures"),{date:Q,createdAt:Pt.now(),totalCharged:oe.totalCharged,totalSuggested:oe.totalSuggested,totalDifference:ye,totalUnits:oe.totalUnits,totalCOGS:oe.totalCOGS,grossProfit:Te,products:ee.map(Ce=>({productName:Ce.productName,quantity:Ce.quantity,amount:Ce.amount})),salesV2:ee.map(Ce=>({id:Ce.id,productName:Ce.productName,quantity:Ce.quantity,amount:Ce.amount,amountSuggested:Ce.amountSuggested,userEmail:Ce.userEmail,clientName:Ce.clientName,amountReceived:Ce.amountReceived,change:Ce.change,status:Ce.status,cogsAmount:Ce.cogsAmount??0,avgUnitCost:Ce.avgUnitCost??null,allocations:Ce.allocations??[],date:Ce.date})),productSummary:Object.entries(ee.reduce((Ce,me)=>{const re=me.productName||"(sin nombre)";return Ce[re]||(Ce[re]={totalQuantity:0,totalAmount:0}),Ce[re].totalQuantity=fg(Ce[re].totalQuantity+(me.quantity||0)),Ce[re].totalAmount=Ci(Ce[re].totalAmount+(me.amount||0)),Ce},{})).map(([Ce,me])=>({productName:Ce,totalQuantity:me.totalQuantity,totalAmount:me.totalAmount}))}),xe=Jw(Qe);ee.forEach(Ce=>{xe.update(Tt(Qe,"salesV2",Ce.id.split("#")[0]),{status:"PROCESADA",closureId:ce.id,closureDate:Q})}),await xe.commit(),d(` Cierre guardado. Ventas procesadas: ${ee.length}.`)}catch(ne){console.error(ne),d(" Error al guardar el cierre.")}},pe=async ne=>{if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await $r(Tt(Qe,"salesV2",ne.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),d(" Venta revertida a FLOTANTE.")}catch(ee){console.error(ee),d(" No se pudo revertir la venta.")}},R=ne=>{B(ne),_(ne.quantity),y(ne.amount),D(ne.clientName),k(ne.amountReceived),E(ne.change)},G=async()=>{if(g)try{await $r(Tt(Qe,"salesV2",g.id.split("#")[0]),{quantity:b,amount:w,amountCharged:w,clientName:I,amountReceived:H,change:T}),B(null),d(" Venta actualizada.")}catch(ne){console.error(ne),d(" No se pudo actualizar la venta.")}},te=async ne=>{if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:ee}=await nW(ne.split("#")[0]);d(` Venta eliminada. Stock restaurado: ${Number(ee).toFixed(2)}.`)}catch(ee){console.error(ee),d(" No se pudo eliminar la venta.")}},J=async()=>{if(j.current){j.current.classList.add("force-pdf-colors");try{const ee=(await pb(j.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),oe=new Ut;oe.addImage(ee,"PNG",10,10,190,0),oe.save(`cierre_${Q}.pdf`)}finally{j.current.classList.remove("force-pdf-colors")}}},le=!t||t==="admin";return l.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded shadow",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas - ",Q]}),l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsx(Xd,{onClick:N,loading:o})}),l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("label",{className:"text-sm",children:"Filtrar:"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:f,onChange:ne=>m(ne.target.value),children:[l.jsx("option",{value:"ALL",children:"Todas"}),l.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),l.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),o?l.jsx("p",{children:"Cargando ventas..."}):l.jsxs("div",{ref:j,children:[l.jsxs("table",{className:"min-w-full border text-sm mb-4",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Estado"}),l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"}),l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsxs("tbody",{children:[U.map(ne=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ne.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ne.status})}),l.jsx("td",{className:"border p-1",children:ne.productName}),l.jsx("td",{className:"border p-1",children:zy(ne.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Dh(ne.amount)]}),l.jsx("td",{className:"border p-1",children:ne.date}),l.jsx("td",{className:"border p-1",children:ne.userEmail}),l.jsx("td",{className:"border p-1",children:ne.status==="FLOTANTE"?l.jsxs("div",{className:"flex gap-2 justify-center",children:[le&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>R(ne),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),l.jsx("button",{onClick:()=>te(ne.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}),!le&&l.jsx("span",{className:"text-gray-400 text-xs",children:""})]}):ne.status==="PROCESADA"?l.jsx("div",{className:"flex gap-2 justify-center",children:le?l.jsx("button",{onClick:()=>pe(ne.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):l.jsx("span",{className:"text-gray-400 text-xs",children:""})}):l.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},ne.id)),U.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[l.jsxs("div",{children:[" ","Total unidades: ",l.jsx("strong",{children:zy(ue)})]}),l.jsxs("div",{children:[" ","Total cobrado: ",l.jsxs("strong",{children:["C$",Dh(Z)]})]})]}),(ie>0||z!==Z)&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[l.jsxs("div",{children:[" ","Calculo a Precio compra:"," ",l.jsxs("strong",{children:["C$",Dh(ie)]})]}),l.jsxs("div",{children:[" ","Ganancia antes de gasto:"," ",l.jsxs("strong",{children:["C$",Dh(z)]})]})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm mb-2",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),l.jsxs("tbody",{children:[ae.map(ne=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:ne.productName}),l.jsx("td",{className:"border p-1",children:zy(ne.totalQuantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Dh(ne.totalAmount)]})]},ne.productName)),ae.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:q,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),l.jsx("button",{onClick:J,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),c&&l.jsx("p",{className:"mt-2 text-sm",children:c}),g&&l.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),l.jsxs("div",{className:"text-sm text-gray-500",children:[g.productName,"  ",g.userEmail]}),l.jsx("label",{className:"text-sm",children:"Cantidad"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:b,onChange:ne=>_(parseFloat(ne.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Monto cobrado"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:w,onChange:ne=>y(parseFloat(ne.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Cliente"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:I,onChange:ne=>D(ne.target.value)}),l.jsx("label",{className:"text-sm",children:"Paga con"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:H,onChange:ne=>k(parseFloat(ne.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Vuelto"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:T,onChange:ne=>E(ne.target.value)}),l.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[l.jsx("button",{onClick:()=>B(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),l.jsx("button",{onClick:G,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const bi=t=>Number(t??0).toFixed(2),Tu=t=>Number(t??0).toFixed(3);function fW(){var y,I,D,H;const t=async k=>{if(!window.confirm(`Eliminar el cierre del ${k.date}?`))return;const T=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(T){const E=await Lt(Yt(dt(Qe,"salesV2"),mr("closureId","==",k.id)));if(!E.empty){const Q=Jw(Qe);E.forEach(j=>{Q.update(Tt(Qe,"salesV2",j.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await Q.commit()}}await Ts(Tt(Qe,"daily_closures",k.id)),(c==null?void 0:c.id)===k.id&&d(null),await B(),m(` Cierre eliminado${T?" y ventas reabiertas.":"."}`)}catch(E){console.error(E),m(" No se pudo eliminar el cierre.")}},[e,r]=L.useState(Zt(SV(new Date),"yyyy-MM-dd")),[n,s]=L.useState(Zt(new Date,"yyyy-MM-dd")),[i,a]=L.useState(!0),[o,A]=L.useState([]),[c,d]=L.useState(null),[f,m]=L.useState(""),g=L.useRef(null),B=async()=>{try{a(!0);const k=Yt(dt(Qe,"daily_closures"),mr("date",">=",e),mr("date","<=",n)),T=await Lt(k),E=[];T.forEach(Q=>E.push({id:Q.id,...Q.data()})),E.sort((Q,j)=>Q.date<j.date?1:Q.date>j.date?-1:0),A(E)}catch(k){console.error(k),m(" Error cargando el historial.")}finally{a(!1)}};L.useEffect(()=>{B()},[]);const b=async k=>{k.preventDefault(),B()},_=L.useMemo(()=>{if(!c)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const k=Number(c.totalUnits??0),T=Number(c.totalSuggested??0),E=Number(c.totalCharged??0),Q=Number(c.totalDifference??(isFinite(E-T)?E-T:0)),j=Number(c.totalCOGS??0),S=Number(c.grossProfit??(isFinite(E-j)?E-j:0));return{units:k,sug:T,chg:E,diff:Q,cogs:j,profit:S}},[c]),w=async()=>{if(!g.current||!c)return;const k=g.current;k.classList.add("force-pdf-colors");try{const[{default:T},{jsPDF:E}]=await Promise.all([To(()=>Promise.resolve().then(()=>mb),void 0),To(()=>Promise.resolve().then(()=>nB),void 0)]),j=(await T(k,{backgroundColor:"#ffffff",onclone:U=>{const Z=U.defaultView;U.body.querySelectorAll("*").forEach(ie=>{const z=Z.getComputedStyle(ie);z.color&&(ie.style.color=z.color),z.backgroundColor&&z.backgroundColor!=="rgba(0, 0, 0, 0)"&&(ie.style.backgroundColor=z.backgroundColor),z.borderColor&&(ie.style.borderColor=z.borderColor)})}})).toDataURL("image/png"),{jsPDF:S}=await To(async()=>{const{jsPDF:U}=await Promise.resolve().then(()=>nB);return{jsPDF:U}},void 0),N=new S;N.addImage(j,"PNG",10,10,190,0),N.save(`cierre_${c.date}.pdf`)}finally{k.classList.remove("force-pdf-colors")}};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),l.jsxs("form",{onSubmit:b,className:"flex flex-wrap items-end gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:k=>r(k.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:k=>s(k.target.value)})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i?l.jsx("p",{children:"Cargando..."}):o.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):l.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Monto de venta"}),l.jsx("th",{className:"border p-2",children:"Monto al costo"}),l.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsx("tbody",{children:o.map(k=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:k.date}),l.jsx("td",{className:"border p-1",children:Tu(k.totalUnits)}),l.jsxs("td",{className:"border p-1",children:["C$",bi(k.totalCharged)]}),l.jsxs("td",{className:"border p-1",children:["C$",bi(k.totalCOGS)]}),l.jsxs("td",{className:"border p-1",children:["C$",bi(k.grossProfit??Number(k.totalCharged??0)-Number(k.totalCOGS??0))]}),l.jsx("td",{className:"border p-1",children:l.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[l.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(k),children:"Ver detalle"}),l.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(k),children:"Eliminar"})]})})]},k.id))})]}),c&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",c.date]}),l.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),l.jsx("button",{onClick:w,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),l.jsxs("div",{ref:g,className:"space-y-4",children:[l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:l.jsxs("div",{children:["Total unidades: ",l.jsx("strong",{children:Tu(_.units)})]})}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[l.jsxs("div",{children:["Monto al costo:"," ",l.jsxs("strong",{children:["C$",bi(_.cogs)]})]}),l.jsxs("div",{children:["Ganancia sin gastos:"," ",l.jsxs("strong",{children:["C$",bi(_.profit)]})]})]}),(y=c.salesV2)!=null&&y.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto de ventas"}),l.jsx("th",{className:"border p-2",children:"Monto al costo"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"}),l.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),l.jsx("tbody",{children:c.salesV2.map((k,T)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:k.productName??"(sin nombre)"}),l.jsx("td",{className:"border p-1",children:Tu(k.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",bi(k.amount)]}),l.jsxs("td",{className:"border p-1",children:["C$",bi(k.cogsAmount)]}),l.jsx("td",{className:"border p-1",children:k.date??""}),l.jsx("td",{className:"border p-1",children:k.userEmail??""})]},T))})]})]}):(I=c.sales)!=null&&I.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Cliente"}),l.jsx("th",{className:"border p-2",children:"Paga con"}),l.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),l.jsx("tbody",{children:c.sales.map((k,T)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:k.productName??"(sin nombre)"}),l.jsx("td",{className:"border p-1",children:Tu(k.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",bi(k.amount)]}),l.jsx("td",{className:"border p-1",children:k.userEmail??""}),l.jsx("td",{className:"border p-1",children:k.clientName??""}),l.jsxs("td",{className:"border p-1",children:["C$",bi(k.amountReceived)]}),l.jsx("td",{className:"border p-1",children:typeof k.change=="number"?bi(k.change):k.change??"0"})]},T))})]})]}):(D=c.products)!=null&&D.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto"})]})}),l.jsx("tbody",{children:c.products.map((k,T)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:k.productName}),l.jsx("td",{className:"border p-1",children:Tu(k.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",bi(k.amount)]})]},T))})]})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(H=c.productSummary)!=null&&H.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),l.jsx("tbody",{children:c.productSummary.map((k,T)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:k.productName}),l.jsx("td",{className:"border p-1",children:Tu(k.totalQuantity)}),l.jsxs("td",{className:"border p-1",children:["C$",bi(k.totalAmount)]})]},T))})]})]}):null]})]}),f&&l.jsx("p",{className:"mt-3 text-sm",children:f})]})}function pW(){const[t,e]=L.useState(""),[r,n]=L.useState(""),[s,i]=L.useState("vendedor"),[a,o]=L.useState(""),[A,c]=L.useState([]),[d,f]=L.useState(!0),[m,g]=L.useState(null),[B,b]=L.useState("vendedor"),_=async()=>{f(!0);const k=await Lt(dt(Qe,"users")),T=[];k.forEach(E=>{const Q=E.data();T.push({id:E.id,email:Q.email??"",role:Q.role??"vendedor"})}),c(T),f(!1)};L.useEffect(()=>{_()},[]);const w=async k=>{k.preventDefault(),o("");try{const T=cx(),E=lx(T.options,"Secondary"),Q=JF(E),j=await jj(Q,t,r);await $T(Tt(dt(Qe,"users"),j.user.uid),{email:t,role:s}),await OF(Q),await PD(E),c(S=>[{id:j.user.uid,email:t,role:s},...S]),o(" Usuario creado correctamente."),e(""),n(""),i("vendedor")}catch(T){console.error(T),o(" Error al crear el usuario: "+T.message)}},y=k=>{g(k.id),b(k.role||"vendedor")},I=()=>{g(null),b("vendedor")},D=async()=>{if(!m)return;const k=Tt(Qe,"users",m);await $r(k,{role:B}),c(T=>T.map(E=>E.id===m?{...E,role:B}:E)),I()},H=async k=>{confirm("Eliminar este usuario del listado?")&&(await Ts(Tt(Qe,"users",k)),c(E=>E.filter(Q=>Q.id!==k)))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("form",{onSubmit:w,className:"max-w-md mx-auto bg-white p-8 shadow-lg rounded-lg space-y-6 border border-gray-200",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4 text-purple-700 flex items-center gap-2",children:[l.jsx("span",{className:"inline-block bg-purple-100 text-purple-700 rounded-full p-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar nuevo usuario"]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),l.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:k=>e(k.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea"}),l.jsx("input",{type:"password",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:k=>n(k.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Rol"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:k=>i(k.target.value),children:[l.jsx("option",{value:"vendedor",children:"Vendedor"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Crear usuario"}),a&&l.jsx("p",{className:"text-sm mt-2",children:a})]}),l.jsxs("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mt-6",children:[l.jsx("h3",{className:"text-lg font-semibold p-2",children:"Usuarios"}),l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Email"}),l.jsx("th",{className:"p-2 border",children:"Rol"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:d?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-4 text-center",children:"Cargando"})}):A.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-4 text-center",children:"Sin usuarios"})}):A.map(k=>{const T=m===k.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:k.email}),l.jsx("td",{className:"p-2 border",children:T?l.jsxs("select",{className:"w-full border p-1 rounded",value:B,onChange:E=>b(E.target.value),children:[l.jsx("option",{value:"vendedor",children:"Vendedor"}),l.jsx("option",{value:"admin",children:"Admin"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${k.role==="admin"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:k.role})}),l.jsx("td",{className:"p-2 border space-x-2",children:T?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:D,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:I,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>y(k),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>H(k.id),children:"Eliminar"})]})})]},k.id)})})]})]})]})}const mW=t=>`C$${(Number(t)||0).toFixed(2)}`;function gW(){const[t,e]=L.useState(""),[r,n]=L.useState(0),[s,i]=L.useState(""),[a,o]=L.useState(""),[A,c]=L.useState(""),[d,f]=L.useState([]),[m,g]=L.useState(!0),[B,b]=L.useState(!1),[_,w]=L.useState(null),[y,I]=L.useState(""),[D,H]=L.useState(""),[k,T]=L.useState(""),[E,Q]=L.useState(0),[j,S]=L.useState(!1),N=async()=>{g(!0);const q=await Lt(dt(Qe,"products")),pe=[];q.forEach(R=>{const G=R.data();pe.push({id:R.id,name:G.name??"",price:Number(G.price??0),category:G.category??"",measurement:G.measurement??"",active:G.active!==!1})}),f(pe),g(!1)};L.useEffect(()=>{N()},[]);const U=async q=>{if(q.preventDefault(),i(""),!t||r<=0||!A){i(" Completa nombre, precio vlido y unidad de medida");return}try{const pe={name:t,price:parseFloat(r.toFixed(2)),category:a,measurement:A,active:!0},R=await is(dt(Qe,"products"),pe);f(G=>[{id:R.id,...pe},...G]),i(" Producto registrado con exito."),e(""),n(0),c(""),o(""),S(!1)}catch(pe){i(" Error: "+pe.message)}},Z=q=>{w(q.id),I(q.name),H(q.category),T(q.measurement),Q(q.price)},ue=()=>{w(null),I(""),H(""),T(""),Q(0)},ie=async()=>{if(!_)return;const q=Tt(Qe,"products",_);await $r(q,{name:y,category:D,measurement:k,price:parseFloat((E||0).toFixed(2))}),f(pe=>pe.map(R=>R.id===_?{...R,name:y,category:D,measurement:k,price:parseFloat((E||0).toFixed(2))}:R)),ue()},z=async q=>{const pe=Tt(Qe,"products",q.id),R=q.active===!1;await $r(pe,{active:R}),f(G=>G.map(te=>te.id===q.id?{...te,active:R}:te))},W=async q=>{const pe=Yt(dt(Qe,"inventory_batches"),mr("productId","==",q),zT(1));if(!(await Lt(pe)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await Ts(Tt(Qe,"products",q)),f(te=>te.filter(J=>J.id!==q)))},ae=B?d:d.filter(q=>q.active!==!1);return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),l.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{i(""),S(!0)},children:[l.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),j&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>S(!1)}),l.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[l.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),children:"Cerrar"})]}),l.jsxs("form",{onSubmit:U,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),l.jsxs("select",{value:a,onChange:q=>o(q.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"pollo",children:"Pollo"}),l.jsx("option",{value:"cerdo",children:"Cerdo"}),l.jsx("option",{value:"huevo",children:"Huevos"}),l.jsx("option",{value:"ropa",children:"Ropa"}),l.jsx("option",{value:"otros",children:"Otros"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:q=>e(q.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),l.jsxs("select",{value:A,onChange:q=>c(q.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"lb",children:"Libra"}),l.jsx("option",{value:"kg",children:"Kilogramo"}),l.jsx("option",{value:"unidad",children:"Unidad"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:q=>n(parseFloat(q.target.value)),onFocus:q=>q.target.value==="0"?n(NaN):null})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),s&&l.jsx("p",{className:"text-sm mt-2",children:s})]})]})]}),l.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),l.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:B,onChange:q=>b(q.target.checked)}),"Mostrar inactivos"]})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Precio"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:m?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ae.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):ae.map(q=>{const pe=_===q.id,R=q.active!==!1;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:pe?l.jsx("input",{className:"w-full border p-1 rounded",value:y,onChange:G=>I(G.target.value)}):q.name}),l.jsx("td",{className:"p-2 border",children:pe?l.jsxs("select",{className:"w-full border p-1 rounded",value:D,onChange:G=>H(G.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"pollo",children:"Pollo"}),l.jsx("option",{value:"cerdo",children:"Cerdo"}),l.jsx("option",{value:"huevo",children:"Huevos"}),l.jsx("option",{value:"ropa",children:"Ropa"}),l.jsx("option",{value:"otros",children:"Otros"})]}):q.category}),l.jsx("td",{className:"p-2 border",children:pe?l.jsxs("select",{className:"w-full border p-1 rounded",value:k,onChange:G=>T(G.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"lb",children:"Libra"}),l.jsx("option",{value:"kg",children:"Kilogramo"}),l.jsx("option",{value:"unidad",children:"Unidad"})]}):q.measurement}),l.jsx("td",{className:"p-2 border",children:pe?l.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(E)?"":E,onChange:G=>Q(parseFloat(G.target.value))}):mW(q.price)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:R?"Activo":"Inactivo"})}),l.jsx("td",{className:"p-2 border space-x-2",children:pe?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ue,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Z(q),children:"Editar"}),l.jsx("button",{className:`px-2 py-1 rounded ${R?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>z(q),children:R?"Desactivar":"Activar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>W(q.id),children:"Eliminar"})]})})]},q.id)})})]})})]})}const Zn=[];for(let t=0;t<256;++t)Zn.push((t+256).toString(16).slice(1));function wW(t,e=0){return(Zn[t[e+0]]+Zn[t[e+1]]+Zn[t[e+2]]+Zn[t[e+3]]+"-"+Zn[t[e+4]]+Zn[t[e+5]]+"-"+Zn[t[e+6]]+Zn[t[e+7]]+"-"+Zn[t[e+8]]+Zn[t[e+9]]+"-"+Zn[t[e+10]]+Zn[t[e+11]]+Zn[t[e+12]]+Zn[t[e+13]]+Zn[t[e+14]]+Zn[t[e+15]]).toLowerCase()}let Wy;const vW=new Uint8Array(16);function yW(){if(!Wy){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Wy=crypto.getRandomValues.bind(crypto)}return Wy(vW)}const BW=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xI={randomUUID:BW};function xW(t,e,r){var s;if(xI.randomUUID&&!t)return xI.randomUUID();t=t||{};const n=t.random??((s=t.rng)==null?void 0:s.call(t))??yW();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,wW(n)}async function bW(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const s=dt(t,"inventory_batches"),i=Yt(s,mr("productName","==",e)),A=(await Lt(i)).docs.map(c=>({id:c.id,data:c.data()})).sort((c,d)=>{var b,_;const f=c.data.date??"",m=d.data.date??"";if(f!==m)return f<m?-1:1;const g=((b=c.data.createdAt)==null?void 0:b.seconds)??0,B=((_=d.data.createdAt)==null?void 0:_.seconds)??0;return g-B}).map(c=>Tt(t,"inventory_batches",c.id));return il(t,async c=>{let d=Number(r);const f=[],m=await Promise.all(A.map(_=>c.get(_)));for(let _=0;_<A.length&&d>0;_++){const w=A[_],y=m[_];if(!y.exists())continue;const I=y.data(),D=Number(I.quantity??0),H=Number(I.remaining??D??0),k=Number(I.purchasePrice??0);if(H<=0)continue;const T=Math.min(H,d),E=Number((H-T).toFixed(3));c.update(w,{remaining:E}),f.push({batchId:w.id,qty:T,unitCost:k,lineCost:Number((T*k).toFixed(2))}),d=Number((d-T).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const g=Number(f.reduce((_,w)=>_+w.lineCost,0).toFixed(2)),B=f.reduce((_,w)=>_+w.qty,0),b=B>0?Number((g/B).toFixed(4)):0;return{allocations:f,avgUnitCost:b,cogsAmount:g}})}const T3=3,CW=.5*10**-T3;function Ss(t){const e=Number(t??0);return Number(e.toFixed(T3))}function bI(t,e){return Ss((t??0)+(e??0))}function pg(t,e){return Ss(t)+CW>=Ss(e)}async function EW(t,e){const r=await Lt(dt(Qe,"inventory_batches")),n=t.trim().toLowerCase();let s=0;for(const i of r.docs){const a=i.data();(a.productName||"").trim().toLowerCase()===n&&a.productId!==e&&(await $r(Tt(Qe,"inventory_batches",i.id),{productId:e}),s++)}return s}function CI({user:t}){const[e,r]=L.useState([]),[n,s]=L.useState([]),[i,a]=L.useState(""),[o,A]=L.useState(Zt(new Date,"yyyy-MM-dd")),[c,d]=L.useState(""),[f,m]=L.useState([]),[g,B]=L.useState(0),[b,_]=L.useState(0),[w,y]=L.useState("0"),[I,D]=L.useState(""),H=z=>Math.round(z*100)/100,k=async z=>{if(!z)return 0;const W=Yt(dt(Qe,"inventory_batches"),mr("productId","==",z)),ae=await Lt(W);let q=0;return ae.forEach(pe=>{const R=pe.data();q=bI(q,Number(R.remaining||0))}),Ss(q)},T=async z=>{if(!z)return 0;const W=await Lt(dt(Qe,"inventory_batches"));let ae=0;return W.forEach(q=>{const pe=q.data();(pe.productName||"").trim().toLowerCase()===z.trim().toLowerCase()&&(ae=bI(ae,Number(pe.remaining||0)))}),Ss(ae)};L.useEffect(()=>{(async()=>{const z=await Lt(dt(Qe,"products")),W=[];z.forEach(ae=>{const q=ae.data();(q==null?void 0:q.active)!==!1&&W.push({id:ae.id,productName:q.name??q.productName??"(sin nombre)",price:Number(q.price??0),measurement:q.measurement??"(sin unidad)",category:q.category??"(sin categora)"})}),r(W)})()},[]),L.useEffect(()=>{(async()=>{const z=await Lt(dt(Qe,"users")),W=[];z.forEach(ae=>{const q=ae.data();W.push({id:ae.id,email:q.email??"(sin email)",role:q.role??"USER"})}),s(W)})()},[]);const E=async()=>{if(!i)return;const z=e.find(ae=>ae.id===i);if(!z)return;if(f.some(ae=>ae.productId===z.id)){a("");return}const W=await k(z.id);m(ae=>[...ae,{productId:z.id,productName:z.productName,measurement:z.measurement,price:Number(z.price||0),stock:W,qty:0,discount:0}]),a("")},Q=z=>{m(W=>W.filter(ae=>ae.productId!==z))},j=async(z,W)=>{m(ae=>ae.map(q=>{if(q.productId!==z)return q;const pe=(q.measurement||"").toLowerCase()!=="lb",R=W===""?0:Number(W),G=pe?Math.max(0,Math.round(R)):Ss(R);return{...q,qty:G}}))},S=(z,W)=>{m(ae=>ae.map(q=>{if(q.productId!==z)return q;const pe=Math.max(0,Math.floor(Number(W||0)));return{...q,discount:pe}}))},N=L.useMemo(()=>{let z=0;for(const W of f){const ae=Number(W.price||0)*Number(W.qty||0),q=Math.max(0,ae-Math.max(0,Number(W.discount||0)));z+=q}return H(z)},[f]);L.useEffect(()=>{B(N)},[N]),L.useEffect(()=>{const z=Number(b)||0,W=Number(g)||0;y((z-W).toFixed(2))},[b,g]);const U=z=>{z.key===","&&(z.preventDefault(),z.target.value+=".")},Z=async()=>{if(f.length===0)return"Agrega al menos un producto.";for(const z of f){if(!z.qty||z.qty<=0)return`Cantidad invlida para "${z.productName}".`;const W=await k(z.productId);if(!pg(W,z.qty)){const ae=await T(z.productName);if(pg(ae,0)&&!pg(W,0)){const q=await EW(z.productName,z.productId),pe=await k(z.productId);if(!pg(pe,z.qty))return`Stock insuficiente tras corregir ${q} lote(s) para "${z.productName}".`}else return`Stock insuficiente para "${z.productName}". Disponible: ${W}`}}return null},ue=async z=>{var ae,q;z.preventDefault(),D("");const W=await Z();if(W){D(" "+W);return}try{const pe=[];for(const te of f){const J=te.qty,{allocations:le,avgUnitCost:ne,cogsAmount:ee}=await bW(Qe,te.productName,J,!1),oe=Number(te.price||0)*Number(J||0),ye=Math.max(0,Number(te.discount||0)),Te=Math.max(0,oe-ye);pe.push({productId:te.productId,productName:te.productName,measurement:te.measurement,unitPrice:Number(te.price||0),qty:J,discount:ye,lineTotal:H(oe),lineFinal:H(Te),allocations:le,avgUnitCost:ne,cogsAmount:ee})}const R=pe.reduce((te,J)=>te+J.lineFinal,0),G=pe.reduce((te,J)=>te+Number(J.qty||0),0);await is(dt(Qe,"salesV2"),{id:xW(),quantity:G,amount:R,amountCharged:R,amountReceived:Number(b)||0,change:w,clientName:c.trim(),timestamp:Pt.now(),date:o,userEmail:((ae=n[0])==null?void 0:ae.email)??"sin usuario",vendor:((q=n[0])==null?void 0:q.role)??"sin usuario",status:"FLOTANTE",items:pe,itemsTotal:R}),D(" Venta registrada y asignada a inventario (FIFO)."),m([]),a(""),B(0),_(0),y("0"),d(""),A(Zt(new Date,"yyyy-MM-dd"))}catch(pe){console.error(pe),D(` ${(pe==null?void 0:pe.message)||"Error al registrar la venta."}`)}},ie=L.useMemo(()=>new Set(f.map(z=>z.productId)),[f]);return l.jsxs("form",{onSubmit:ue,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl
                 p-4 sm:p-6 md:p-8
                 max-w-5xl space-y-4`,children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-400",value:i,onChange:z=>a(z.target.value),children:[l.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),e.map(z=>l.jsxs("option",{value:z.id,disabled:ie.has(z.id),title:ie.has(z.id)?"Ya est en la lista":"",children:[z.productName,"  ",z.measurement,"  C$ ",z.price]},z.id))]}),l.jsx("button",{type:"button",onClick:E,disabled:!i||ie.has(i),className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),l.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-400",value:o,onChange:z=>A(z.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente"}),l.jsx("input",{className:"w-full border border-gray-300 p-2 rounded",value:c,onChange:z=>d(z.target.value),placeholder:"Opcional"})]})]}),l.jsx("div",{className:"rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"text-center",children:[l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:""})]})}),l.jsx("tbody",{children:f.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):f.map(z=>{const W=Number(z.price||0)*Number(z.qty||0),ae=Math.max(0,W-Math.max(0,Number(z.discount||0))),q=(z.measurement||"").toLowerCase()!=="lb",pe=Ss(Number(z.stock)-Number(z.qty||0));return l.jsxs("tr",{className:"text-center",children:[l.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[z.productName,"  ",z.measurement]}),l.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",H(z.price).toFixed(2)]}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:pe.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",step:q?1:.01,inputMode:q?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:z.qty===0?"":z.qty,onKeyDown:U,onChange:R=>j(z.productId,R.target.value),placeholder:"0",title:"Cantidad"})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:z.discount===0?"":z.discount,onChange:R=>S(z.productId,R.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),l.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",H(ae).toFixed(2)]}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>Q(z.productId),title:"Quitar",children:""})})]},z.productId)})})]})}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:" Monto total"}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded bg-gray-100",value:`C$ ${g.toFixed(2)}`,readOnly:!0,title:"Suma de (precio  cantidad  descuento) de cada producto."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded",value:b===0?"":b,onChange:z=>_(Number(z.target.value||0))})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded bg-gray-100",value:`C$ ${w}`,readOnly:!0})]})]}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-lg font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:f.length===0,children:"Guardar venta"}),I&&l.jsx("p",{className:`text-sm mt-2 ${I.startsWith("")?"text-green-600":I.startsWith("")?"text-yellow-600":"text-red-600"}`,children:I})]})}const Rn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function _W(){const[t,e]=L.useState([]),[r,n]=L.useState([]),[s,i]=L.useState(!0),[a,o]=L.useState(""),{refreshKey:A,refresh:c}=Jd(),[d,f]=L.useState(Zt(Vp(new Date),"yyyy-MM-dd")),[m,g]=L.useState(Zt(Hp(new Date),"yyyy-MM-dd")),[B,b]=L.useState(""),[_,w]=L.useState(!1),[y,I]=L.useState(""),[D,H]=L.useState(0),[k,T]=L.useState(0),[E,Q]=L.useState(0),[j,S]=L.useState(Zt(new Date,"yyyy-MM-dd")),[N,U]=L.useState(0),[Z,ue]=L.useState(0),[ie,z]=L.useState(""),[W,ae]=L.useState(null),[q,pe]=L.useState(""),[R,G]=L.useState(0),[te,J]=L.useState(0),[le,ne]=L.useState(0),[ee,oe]=L.useState(""),[ye,Te]=L.useState(0),[ce,xe]=L.useState(0);L.useEffect(()=>{(async()=>{i(!0),console.log("Refrescando...",A);const Fe=await Lt(dt(Qe,"products")),Ge=[];Fe.forEach(it=>{const tt=it.data();Ge.push({id:it.id,name:tt.name??tt.productName??"(sin nombre)",category:tt.category??"(sin categora)",measurement:tt.measurement??"lb",price:Number(tt.price??0)})}),e(Ge);const ze=Yt(dt(Qe,"inventory_batches"),di("date","desc")),et=await Lt(ze),pt=[];et.forEach(it=>{const tt=it.data(),Xe=Ss(Number(tt.quantity||0)),Ot=Number(tt.purchasePrice||0),Ft=Number(tt.salePrice||0),tn=Number((Xe*Ot).toFixed(2)),Xt=Number((Xe*Ft).toFixed(2));pt.push({id:it.id,productId:tt.productId,productName:tt.productName,category:tt.category,unit:tt.unit,quantity:Xe,remaining:Ss(Number(tt.remaining||0)),purchasePrice:Ot,salePrice:Ft,invoiceTotal:tt.invoiceTotal!=null?Number(tt.invoiceTotal):tn,expectedTotal:tt.expectedTotal!=null?Number(tt.expectedTotal):Xt,date:tt.date,createdAt:tt.createdAt,status:tt.status,notes:tt.notes,paidAmount:Number(tt.paidAmount||0),paidAt:tt.paidAt})}),n(pt),i(!1)})()},[A]),L.useEffect(()=>{const Fe=t.find(Ge=>Ge.id===y);Fe&&Q(Number(Fe.price||0))},[y,t,A]),L.useEffect(()=>{U(Math.floor(D*k*100)/100)},[D,k,A]),L.useEffect(()=>{ue(Math.floor(D*E*100)/100)},[D,E,A]);const Ce=Fe=>{const Ge=(Fe||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(Ge)||Ge==="lb"},me=L.useMemo(()=>r.filter(Fe=>!(d&&Fe.date<d||m&&Fe.date>m||B&&Fe.productId!==B)),[r,d,m,B]),re=L.useMemo(()=>{const Fe=me.reduce((Ot,Ft)=>Ot+Number(Ft.invoiceTotal||0),0),Ge=me.reduce((Ot,Ft)=>Ot+Number(Ft.expectedTotal||0),0);let ze=0,et=0,pt=0,it=0;for(const Ot of me)Ce(Ot.unit)?(ze+=Ot.quantity,et+=Ot.remaining):(pt+=Ot.quantity,it+=Ot.remaining);const tt=me.reduce((Ot,Ft)=>Ot+Ft.quantity,0),Xe=me.reduce((Ot,Ft)=>Ot+Ft.remaining,0);return{lbsIng:ze,lbsRem:et,udsIng:pt,udsRem:it,qty:tt,rem:Xe,totalFacturado:Fe,totalEsperado:Ge}},[me]),yt=async Fe=>{Fe.preventDefault();const Ge=t.find(ze=>ze.id===y);if(!Ge||D<=0||k<=0){o("Completa producto, cantidad y costo.");return}try{const ze=Ss(D),et=await tW({productId:Ge.id,productName:Ge.name,category:Ge.category,unit:Ge.measurement,quantity:ze,purchasePrice:k,salePrice:E,invoiceTotal:N,expectedTotal:Z,date:j,notes:ie});n(pt=>[{id:et.id,productId:Ge.id,productName:Ge.name,category:Ge.category,unit:Ge.measurement,quantity:ze,remaining:ze,purchasePrice:k,salePrice:E,invoiceTotal:N,expectedTotal:Z,date:j,createdAt:Pt.now(),status:"PENDIENTE",notes:ie},...pt]),o(" Lote creado"),I(""),H(0),T(0),Q(Ge.price||0),U(0),ue(0),z(""),w(!1)}catch(ze){console.error(ze),o(" Error al crear lote")}},Oe=async Fe=>{confirm(`Marcar PAGADO el lote del ${Fe.date} (${Fe.productName})?`)&&(await N3(Fe.id),n(ze=>ze.map(et=>et.id===Fe.id?{...et,status:"PAGADO"}:et)))},ke=Fe=>{ae(Fe.id),pe(Fe.date),G(Ss(Fe.quantity)),J(Fe.purchasePrice),ne(Fe.salePrice),oe(Fe.notes||""),Te(Number((Fe.quantity*Fe.purchasePrice).toFixed(2))),xe(Number((Fe.quantity*Fe.salePrice).toFixed(2)))},Ke=()=>{ae(null),pe(""),G(0),J(0),ne(0),oe(""),Te(0),xe(0)};L.useEffect(()=>{W&&Te(Math.floor(R*te*100)/100)},[W,R,te,A]),L.useEffect(()=>{W&&xe(Math.floor(R*le*100)/100)},[W,R,le,A]);const Je=async()=>{if(!W)return;const Fe=r.find(pt=>pt.id===W);if(!Fe)return;const Ge=Ss(Fe.quantity-Fe.remaining),ze=Math.max(0,Ss(R-Ge)),et=Tt(Qe,"inventory_batches",W);await $r(et,{date:q,quantity:Ss(R),purchasePrice:te,salePrice:le,invoiceTotal:ye,expectedTotal:ce,notes:ee,remaining:ze}),n(pt=>pt.map(it=>it.id===W?{...it,date:q,quantity:Ss(R),purchasePrice:te,salePrice:le,invoiceTotal:ye,expectedTotal:ce,notes:ee,remaining:ze}:it)),Ke(),o(" Lote actualizado")},Ye=async Fe=>{confirm(`Eliminar el lote del ${Fe.date} (${Fe.productName})?`)&&(await Ts(Tt(Qe,"inventory_batches",Fe.id)),n(ze=>ze.filter(et=>et.id!==Fe.id)),o(" Lote eliminado"))},wt=()=>{const Fe=(d?`Desde ${d}`:"Desde inicio")+"  "+(m?`Hasta ${m}`:"Hasta hoy"),Ge=me.map(pt=>{const it=Number(pt.invoiceTotal||0),tt=Number(pt.expectedTotal||0);return`
      <tr>
        <td>${pt.date}</td>
        <td>${(pt.category||"").toUpperCase()}</td>
        <td>${pt.productName}</td>
        <td>${(pt.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${pt.quantity.toFixed(3)}</td>
        <td style="text-align:right">${pt.remaining.toFixed(3)}</td>
        <td style="text-align:right">${Rn(pt.purchasePrice)}</td>
        <td style="text-align:right">${Rn(pt.salePrice)}</td>
        <td style="text-align:right">${Rn(it)}</td>
        <td style="text-align:right">${Rn(tt)}</td>
        <td>${pt.status}</td>
      </tr>`}).join(""),ze=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario por Lotes</title>
 <style>
  * { font-family: Arial, sans-serif; }
  h1 { margin: 0 0 4px; }
  .muted { color: #555; font-size: 12px; margin-bottom: 12px; }

  table { width: 100%; border-collapse: collapse; font-size: 12px; }
  th, td { border: 1px solid #ddd; padding: 6px; }
  th { background: #f5f5f5; text-align: left; }

  .totals {
    margin: 10px 0 16px;
    font-size: 12px;
    display: grid;
    grid-template-columns: repeat(2, max-content);
    column-gap: 32px;
    row-gap: 6px;
    align-items: center;
  }
  .totals span {
    margin: 0;
    white-space: nowrap;
  }

  @media print {
    @page { size: A4 landscape; margin: 15mm; }
    button { display: none; }
  }
</style>

</head>

<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario por Lotes</h1>
<div class="muted">${Fe}</div>
<div class="totals">
  <span><strong>Libras ingresadas:</strong> ${re.lbsIng.toFixed(3)}</span>
  <span><strong>Libras restantes:</strong> ${re.lbsRem.toFixed(3)}</span>

  <span><strong>Unidades ingresadas:</strong> ${re.udsIng.toFixed(3)}</span>
  <span><strong>Unidades restantes:</strong> ${re.udsRem.toFixed(3)}</span>

  <span><strong>Total esperado a ganar:</strong> ${Rn(re.totalEsperado)}</span>
  <span><strong>Total facturado:</strong> ${Rn(re.totalFacturado)}</span>
  <span><strong>Ganancia sin gastos:</strong> ${Rn(Number((re.totalEsperado-re.totalFacturado).toFixed(2)))}</span>
</div>

  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Tipo</th>
        <th>Producto</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      ${Ge||'<tr><td colspan="11" style="text-align:center">Sin lotes</td></tr>'}
    </tbody>
  </table>
</body>
</html>`,et=window.open("","_blank");et&&(et.document.open(),et.document.write(ze),et.document.close())};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Inventario (Pollo)"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>w(!0),children:"Crear Lote"})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:Fe=>f(Fe.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:m,onChange:Fe=>g(Fe.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:B,onChange:Fe=>b(Fe.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),t.map(Fe=>l.jsxs("option",{value:Fe.id,children:[Fe.name,"  ",Fe.category]},Fe.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{f(""),g(""),b("")},children:"Quitar filtro"}),l.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:wt,children:"Imprimir PDF"}),l.jsx("div",{className:"ml-auto",children:l.jsx(Xd,{onClick:()=>c(),loading:s})})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",re.lbsIng.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",re.udsIng.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," C$"," ",re.totalEsperado.toFixed(2)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",re.lbsRem.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",re.udsRem.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",re.totalFacturado.toFixed(2)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(re.totalEsperado-re.totalFacturado).toFixed(2)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Ingresado"}),l.jsx("th",{className:"p-2 border",children:"Restantes"}),l.jsx("th",{className:"p-2 border",children:"Precio Compra"}),l.jsx("th",{className:"p-2 border",children:"Precio Venta"}),l.jsx("th",{className:"p-2 border",children:"Total factura"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Total ganancia"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:s?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):me.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes"})}):me.map(Fe=>{const Ge=W===Fe.id,ze=Number(Fe.invoiceTotal||0),et=Number(Fe.expectedTotal||0);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Ge?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:q,onChange:pt=>pe(pt.target.value)}):Fe.date}),l.jsx("td",{className:"p-2 border",children:Fe.category.toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Fe.productName}),l.jsx("td",{className:"p-2 border",children:Fe.unit.toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Ge?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(R)?"":R,onChange:pt=>{const it=pt.target.value.replace(",","."),tt=parseFloat(it),Xe=Number.isFinite(tt)?parseFloat(tt.toFixed(3)):0;G(Math.max(0,Xe))}}):Fe.quantity.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:Ge?Fe.remaining:Fe.remaining.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:Ge?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(te)?"":te,onChange:pt=>{const it=pt.target.value.replace(",","."),tt=parseFloat(it),Xe=Number.isFinite(tt)?parseFloat(tt.toFixed(2)):0;J(Math.max(0,Xe))}}):Rn(Fe.purchasePrice)}),l.jsx("td",{className:"p-2 border",children:Ge?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(le)?"":le,onChange:pt=>{const it=pt.target.value.replace(",","."),tt=parseFloat(it),Xe=Number.isFinite(tt)?parseFloat(tt.toFixed(2)):0;ne(Math.max(0,Xe))}}):Rn(Fe.salePrice)}),l.jsx("td",{className:"p-2 border",children:Rn(Ge?ye:ze)}),l.jsx("td",{className:"p-2 border",children:Rn(Ge?ce:et)}),l.jsx("td",{className:"p-2 border",children:Rn(Ge?ce-ye:et-ze)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Fe.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Fe.status})}),l.jsx("td",{className:"flex space-x-2 justify-center",children:Ge?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Je,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ke,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[Fe.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>Oe(Fe),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ke(Fe),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Ye(Fe),children:"Borrar"})]})})]},Fe.id)})})]})}),a&&l.jsx("p",{className:"mt-2 text-sm",children:a}),_&&$f.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>w(!1)}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Crear Lote"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>w(!1),type:"button",children:"Cerrar"})]}),l.jsxs("form",{onSubmit:yt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:y,onChange:Fe=>I(Fe.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un producto"}),t.map(Fe=>l.jsxs("option",{value:Fe.id,children:[Fe.name,"  ",Fe.category,"  ",Fe.measurement,"  Precio:"," ",Rn(Fe.price)]},Fe.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:Fe=>S(Fe.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (Lo que esta ingresando)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:D===0?"":D,onChange:Fe=>{const Ge=Fe.target.value.replace(",","."),ze=parseFloat(Ge),et=Number.isFinite(ze)?parseFloat(ze.toFixed(3)):0;H(et)},disabled:!y,placeholder:y?"":"Selecciona un producto primero",title:y?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (compra)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:k===0?"":k,onChange:Fe=>{const Ge=Fe.target.value.replace(",","."),ze=parseFloat(Ge),et=Number.isFinite(ze)?parseFloat(ze.toFixed(2)):0;T(et)},disabled:!y,placeholder:y?"":"Selecciona un producto primero",title:y?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (venta)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:E===0?"":E,onChange:Fe=>{const Ge=Fe.target.value.replace(",","."),ze=parseFloat(Ge),et=Number.isFinite(ze)?parseFloat(ze.toFixed(2)):0;Q(et)},disabled:!y,placeholder:y?"":"Selecciona un producto primero",title:y?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Rn(N),readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Rn(Z),readOnly:!0})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Notas"}),l.jsx("input",{className:"w-full border p-2 rounded",value:ie,onChange:Fe=>z(Fe.target.value)})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>w(!1),children:"Cancelar"}),l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body)]})}const ho=t=>`C$${(Number(t)||0).toFixed(2)}`;function IW(){const t=FV(new Date),[e,r]=L.useState(Zt(t,"yyyy-MM")),[n,s]=L.useState([]),[i,a]=L.useState(!1),[o,A]=L.useState(""),c=L.useRef(null),d=L.useMemo(()=>{const[_,w]=e.split("-").map(D=>parseInt(D,10)),y=Zt(Vp(new Date(_,w-1,1)),"yyyy-MM-dd"),I=Zt(Hp(new Date(_,w-1,1)),"yyyy-MM-dd");return{from:y,to:I}},[e]),f=async()=>{a(!0);try{const _=await rW(d.from,d.to),w=[];for(const y of _){const I=Tt(Qe,"inventory_batches",y.batchId),D=await Nl(I);if(!D.exists())continue;const H=D.data();w.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:H.status??"PENDIENTE",purchasePrice:Number(H.purchasePrice||0),salePrice:Number(H.salePrice||0),supplier:H.supplier})}s(w)}catch(_){console.error(_),A(" Error al cargar liquidaciones")}finally{a(!1)}};L.useEffect(()=>{f()},[e]);const m=async _=>{confirm("Marcar este lote como PAGADO?")&&(await N3(_),s(y=>y.map(I=>I.batchId===_?{...I,status:"PAGADO"}:I)))},g=L.useMemo(()=>{const _=n.reduce((D,H)=>D+H.soldQty,0),w=n.reduce((D,H)=>D+H.soldAmount,0),y=n.reduce((D,H)=>D+H.soldQty*H.purchasePrice,0),I=w-y;return{q:_,amt:w,cogs:y,profit:I}},[n]),B=L.useMemo(()=>{const _=new Map;for(const w of n){const y=w.productName||"(sin nombre)";_.has(y)||_.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const I=_.get(y);I.qty+=w.soldQty,I.revenue+=w.soldAmount;const D=w.soldQty*w.purchasePrice;I.cogs+=D,I.profit=I.revenue-I.cogs}return Array.from(_.values()).sort((w,y)=>w.productName.localeCompare(y.productName))},[n]),b=async()=>{if(!c.current)return;const _=c.current;_.classList.add("force-pdf-colors");try{const[{default:w},{jsPDF:y}]=await Promise.all([To(()=>Promise.resolve().then(()=>mb),void 0),To(()=>Promise.resolve().then(()=>nB),void 0)]),D=(await w(_,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),H=new y("p","mm","a4"),k=190,T=H.getImageProperties(D),E=k,Q=T.height*E/T.width;H.addImage(D,"PNG",10,10,E,Q),H.save(`liquidaciones_${e}.pdf`)}catch(w){console.error(w),alert("No se pudo generar el PDF")}finally{_.classList.remove("force-pdf-colors")}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),l.jsx("button",{onClick:b,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[l.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),l.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:_=>r(_.target.value)}),l.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),l.jsxs("div",{ref:c,children:[l.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",g.q]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",ho(g.amt)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",ho(g.cogs)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",ho(g.profit)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Proveedor"}),l.jsx("th",{className:"p-2 border",children:"Vendido"}),l.jsx("th",{className:"p-2 border",children:"Monto vendido"}),l.jsx("th",{className:"p-2 border",children:"COGS"}),l.jsx("th",{className:"p-2 border",children:"Utilidad"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:i?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(_=>{const w=_.soldQty*_.purchasePrice,y=_.soldAmount-w;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:_.batchDate}),l.jsx("td",{className:"p-2 border",children:_.productName}),l.jsx("td",{className:"p-2 border",children:_.supplier||"-"}),l.jsx("td",{className:"p-2 border",children:_.soldQty}),l.jsx("td",{className:"p-2 border",children:ho(_.soldAmount)}),l.jsx("td",{className:"p-2 border",children:ho(w)}),l.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:ho(y)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${_.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:_.status})}),l.jsx("td",{className:"p-2 border",children:_.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>m(_.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},_.batchId)})})]})}),l.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),l.jsx("th",{className:"p-2 border",children:"Ingreso"}),l.jsx("th",{className:"p-2 border",children:"COGS"}),l.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),l.jsx("tbody",{children:B.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):B.map(_=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:_.productName}),l.jsx("td",{className:"p-2 border",children:_.qty}),l.jsx("td",{className:"p-2 border",children:ho(_.revenue)}),l.jsx("td",{className:"p-2 border",children:ho(_.cogs)}),l.jsx("td",{className:`p-2 border ${_.profit>=0?"text-green-700":"text-red-700"}`,children:ho(_.profit)})]},_.productName))})]})})]}),o&&l.jsx("p",{className:"mt-2 text-sm",children:o})]})}const fo=t=>`C$${Number(t??0).toFixed(2)}`,NW=()=>Zt(new Date,"yyyy-MM-dd"),SW=t=>Number(t||0).toFixed(3);function FW(){const[t,e]=L.useState(()=>{const B=new Date,b=new Date(B.getFullYear(),B.getMonth(),1);return Zt(b,"yyyy-MM-dd")}),[r,n]=L.useState(NW()),[s,i]=L.useState(!0),[a,o]=L.useState([]),[A,c]=L.useState([]),{refreshKey:d,refresh:f}=Jd();L.useEffect(()=>{(async()=>{i(!0);const b=Yt(dt(Qe,"salesV2"),mr("date",">=",t),mr("date","<=",r)),_=await Lt(b),w=[];_.forEach(H=>{const k=H.data(),T=k.date??"";if(Array.isArray(k.items)&&k.items.length>0){k.items.forEach((E,Q)=>{const j=String(E.productName??"(sin nombre)"),S=Number(E.qty??0),N=Number(E.lineFinal??0)||Math.max(0,Number(E.unitPrice||0)*S-Number(E.discount||0));w.push({id:`${H.id}#${Q}`,date:T,productName:j,quantity:S,amount:N,allocations:Array.isArray(E.allocations)?E.allocations:k.allocations,avgUnitCost:Number(E.avgUnitCost??k.avgUnitCost??0)})});return}w.push({id:H.id,date:T,productName:k.productName??"(sin nombre)",quantity:Number(k.quantity??0),amount:Number(k.amount??k.amountCharged??0),allocations:Array.isArray(k.allocations)?k.allocations:[],avgUnitCost:Number(k.avgUnitCost??0)})}),o(w);const y=Yt(dt(Qe,"expenses"),mr("date",">=",t),mr("date","<=",r)),I=await Lt(y),D=[];I.forEach(H=>{const k=H.data();D.push({id:H.id,date:k.date??"",category:k.category??"(sin categora)",description:k.description??"",amount:Number(k.amount??0),status:k.status??"PAGADO",createdAt:k.createdAt})}),c(D),i(!1)})()},[t,r,d]);const m=L.useMemo(()=>{const B=a.reduce((I,D)=>I+(D.amount||0),0);let b=0;a.forEach(I=>{var D;(D=I.allocations)!=null&&D.length?b+=I.allocations.reduce((H,k)=>H+Number(k.lineCost||0),0):I.avgUnitCost&&I.quantity&&(b+=Number(I.avgUnitCost)*Number(I.quantity))});const _=B-b,w=A.reduce((I,D)=>I+(D.amount||0),0),y=_-w;return{revenue:B,cogsReal:b,grossProfit:_,expensesSum:w,netProfit:y}},[a,A]),g=L.useMemo(()=>{var b;const B=new Map;for(const _ of a){const w=_.productName||"(sin nombre)";B.has(w)||B.set(w,{productName:w,units:0,revenue:0,cogs:0,profit:0});const y=B.get(w);y.units+=Number(_.quantity||0),y.revenue+=Number(_.amount||0);let I=0;(b=_.allocations)!=null&&b.length?I=_.allocations.reduce((D,H)=>D+Number(H.lineCost||0),0):_.avgUnitCost&&(I=Number(_.avgUnitCost)*Number(_.quantity||0)),y.cogs+=I,y.profit=y.revenue-y.cogs}return Array.from(B.values()).sort((_,w)=>_.productName.localeCompare(w.productName))},[a]);return l.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded shadow ",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),l.jsx(Xd,{onClick:f,loading:s})]}),l.jsxs("div",{className:"flex flex-wrap items-end gap-2 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:t,onChange:B=>e(B.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:r,onChange:B=>n(B.target.value)})]})]}),s?l.jsx("p",{children:"Cargando"}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-6 text-3xl font-bold",children:[l.jsx(jh,{title:"Ventas Totales",value:fo(m.revenue)}),l.jsx(jh,{title:"Costo de Mercaderia",value:fo(m.cogsReal)}),l.jsx(jh,{title:"Ganancia antes de Gastos",value:fo(m.grossProfit),positive:!0}),l.jsx(jh,{title:"Gastos del Negocio",value:fo(m.expensesSum)}),l.jsx(jh,{title:"Ganancia despues de Gastos",value:fo(m.netProfit),positive:!0})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Ingreso"}),l.jsx("th",{className:"border p-2",children:"Costo"}),l.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),l.jsxs("tbody",{children:[g.map(B=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:B.productName}),l.jsx("td",{className:"border p-1",children:SW(B.units)}),l.jsx("td",{className:"border p-1",children:fo(B.revenue)}),l.jsx("td",{className:"border p-1",children:fo(B.cogs)}),l.jsx("td",{className:`border p-1 ${B.profit>=0?"text-green-700":"text-red-700"}`,children:fo(B.profit)})]},B.productName)),g.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Categora"}),l.jsx("th",{className:"border p-2",children:"Descripcin"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Estado"})]})}),l.jsxs("tbody",{children:[A.map(B=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:B.date}),l.jsx("td",{className:"border p-1",children:B.category}),l.jsx("td",{className:"border p-1",children:B.description}),l.jsx("td",{className:"border p-1",children:fo(B.amount)}),l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${B.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:B.status})})]},B.id)),A.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})]})]})}function jh({title:t,value:e,positive:r}){return l.jsxs("div",{className:"border rounded-lg p-3",children:[l.jsx("div",{className:"text-xs text-gray-500",children:t}),l.jsx("div",{className:`text-xl font-bold ${r?"text-green-700":""}`,children:e})]})}const TW=t=>`C$${Number(t??0).toFixed(2)}`;function UW(){const[t,e]=L.useState([]),[r,n]=L.useState(!0),[s,i]=L.useState(Zt(new Date,"yyyy-MM-dd")),[a,o]=L.useState("Varios"),[A,c]=L.useState(""),[d,f]=L.useState(0),[m,g]=L.useState("PENDIENTE"),[B,b]=L.useState(""),[_,w]=L.useState(null),[y,I]=L.useState(""),[D,H]=L.useState(""),[k,T]=L.useState(""),[E,Q]=L.useState(0),j=async()=>{const z=Yt(dt(Qe,"expenses"),di("createdAt","desc")),W=await Lt(z),ae=[];W.forEach(q=>ae.push({id:q.id,...q.data()})),e(ae)};L.useEffect(()=>{(async()=>(n(!0),await j(),n(!1)))()},[]);const S=async()=>{try{await is(dt(Qe,"expenses"),{date:s,category:a,description:A,amount:Number(d)||0,status:m,createdAt:Pt.now()}),b(" Gasto registrado."),i(Zt(new Date,"yyyy-MM-dd")),o("Varios"),c(""),f(0),g("PENDIENTE"),await j()}catch(z){console.error(z),b(" No se pudo registrar el gasto.")}},N=async z=>{confirm("Eliminar gasto?")&&(await Ts(Tt(Qe,"expenses",z)),e(W=>W.filter(ae=>ae.id!==z)))},U=async z=>{if(z.status==="PAGADO")return;const W=Tt(Qe,"expenses",z.id);await $r(W,{status:"PAGADO",paidAt:Pt.now()}),e(ae=>ae.map(q=>q.id===z.id?{...q,status:"PAGADO",paidAt:Pt.now()}:q))},Z=z=>{w(z.id),I(z.date||""),H(z.category||"Varios"),T(z.description||""),Q(Number(z.amount||0))},ue=()=>{w(null),I(""),H("Varios"),T(""),Q(0)},ie=async()=>{if(!_)return;const z=Tt(Qe,"expenses",_);await $r(z,{date:y,category:D,description:k,amount:Number(E)||0}),e(W=>W.map(ae=>ae.id===_?{...ae,date:y,category:D,description:k,amount:Number(E)||0}:ae)),ue()};return l.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-6 rounded shadow",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Gastos"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:s,onChange:z=>i(z.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Categora"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",value:a,onChange:z=>o(z.target.value)})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Descripcin"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",value:A,onChange:z=>c(z.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"border rounded px-3 py-2 w-full",onKeyDown:z=>{z.key===","&&(z.preventDefault(),z.target.value+=".")},value:d===0?"":d,onChange:z=>f(parseFloat((z.target.value||"0").replace(",",".")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Estado"}),l.jsxs("select",{className:"border rounded px-3 py-2 w-full",value:m,onChange:z=>g(z.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]})]})]}),l.jsx("button",{onClick:S,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Registrar gasto"}),B&&l.jsx("p",{className:"mt-2 text-sm",children:B}),l.jsx("h3",{className:"font-semibold mt-6 mb-2",children:"Listado"}),r?l.jsx("p",{children:"Cargando"}):l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Categora"}),l.jsx("th",{className:"border p-2",children:"Descripcin"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Estado"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsxs("tbody",{children:[t.map(z=>{const W=_===z.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:W?l.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:ae=>I(ae.target.value)}):z.date}),l.jsx("td",{className:"border p-1",children:W?l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:D,onChange:ae=>H(ae.target.value)}):z.category}),l.jsx("td",{className:"border p-1",children:W?l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:k,onChange:ae=>T(ae.target.value)}):z.description}),l.jsx("td",{className:"border p-1",children:W?l.jsx("input",{type:"number",step:"0.01",className:"border rounded px-2 py-1 w-full text-right",value:Number.isNaN(E)?"":E,onChange:ae=>Q(parseFloat(ae.target.value||"0"))}):TW(z.amount)}),l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${z.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:z.status})}),l.jsx("td",{className:"border p-1 space-x-1",children:W?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:ie,className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:"Guardar"}),l.jsx("button",{onClick:ue,className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[z.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>U(z),className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Pagar"}),l.jsx("button",{onClick:()=>Z(z),className:"text-xs bg-yellow-600 text-white px-2 py-1 rounded hover:bg-yellow-700",children:"Editar"}),l.jsx("button",{onClick:()=>N(z.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]})})]},z.id)}),t.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin gastos an."})})]})]})]})}function tw(t){return(t||"").trim().toLowerCase()}async function U3(){const t=await Lt(dt(Qe,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),s=tw(n.name??n.productName);s&&e.set(s,r.id)}),e}async function QW(t=!1){const e=await U3(),r=await Lt(dt(Qe,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const s of r.docs){n.checked++;const i=s.data(),a=tw(i.productName);if(!a){n.missingName++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"missingName"});continue}const o=e.get(a);if(!o){n.withoutMatch++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"withoutMatch"});continue}if(i.productId===o){n.alreadyOk++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:o,status:"alreadyOk"});continue}t||await $r(Tt(Qe,"inventory_batches",s.id),{productId:o}),n.fixed++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:o,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function PW(t,e=!1){const r=tw(t),s=(await U3()).get(r);if(!s)throw new Error(`No existe un producto activo con nombre "${t}".`);const i=await Lt(dt(Qe,"inventory_batches"));let a=0;for(const o of i.docs){const A=o.data();tw(A.productName)===r&&A.productId!==s&&(e||await $r(Tt(Qe,"inventory_batches",o.id),{productId:s}),a++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${a} lote(s)`),a}function LW(){const[t,e]=L.useState(!1),[r,n]=L.useState(""),s=async()=>{try{e(!0),n("");const A=await QW(!1);n(` Hecho. Revisados: ${A.checked}, Corregidos: ${A.fixed}, Ok: ${A.alreadyOk}, Sin nombre: ${A.missingName}, Sin match: ${A.withoutMatch}. (Mira consola para detalles)`)}catch(A){n(" Error: "+((A==null?void 0:A.message)||A))}finally{e(!1)}},[i,a]=L.useState(""),o=async()=>{if(!i.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const A=await PW(i.trim(),!1);n(` Hecho. Corregidos ${A} lote(s) para "${i}".`)}catch(A){n(" Error: "+((A==null?void 0:A.message)||A))}finally{e(!1)}};return l.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[l.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",l.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),l.jsx("div",{className:"space-y-2",children:l.jsx("button",{onClick:s,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),l.jsx("hr",{}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),l.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:i,onChange:A=>a(A.target.value)}),l.jsx("button",{onClick:o,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&l.jsx("p",{className:"text-sm",children:r})]})}const po=t=>`C$ ${Number(t||0).toFixed(2)}`,Oh=t=>Number(t||0).toFixed(3);function kW(){var f,m,g,B,b;const[t,e]=L.useState([]),[r,n]=L.useState(!0),[s,i]=L.useState(null),a=L.useRef(null);L.useEffect(()=>{(async()=>{n(!0);const _=Yt(dt(Qe,"invoices"),di("date","desc")),w=await Lt(_),y=[];w.forEach(I=>{const D=I.data();y.push({id:I.id,...D,batches:D.batches||[],expenses:D.expenses||[],totals:D.totals||{lbs:D.totalLbs||0,units:D.totalUnits||0,amount:D.totalAmount||0,expenses:D.totalExpenses||0,finalAmount:D.finalAmount||0}})}),e(y),n(!1)})()},[]);const o=async _=>{const w=_.status==="PAGADA"?"PENDIENTE":"PAGADA";await $r(Tt(Qe,"invoices",_.id),{status:w}),e(y=>y.map(I=>I.id===_.id?{...I,status:w}:I)),(s==null?void 0:s.id)===_.id&&i({..._,status:w})},A=async _=>{if(window.confirm(`Eliminar factura del ${_.date}?`))try{const w=Tt(Qe,"invoices",_.id),y=await Nl(w),I=y.exists()?y.data():null,D=Jw(Qe),H=(I==null?void 0:I.batches)||[];for(const k of H){const T=k.batchId||k.id;if(!T)continue;const E=Tt(Qe,"inventory_batches",T);D.update(E,{invoiceId:null,invoiceNumber:null,invoiceTotal:null})}D.delete(w),await D.commit(),e(k=>k.filter(T=>T.id!==_.id)),(s==null?void 0:s.id)===_.id&&i(null)}catch(w){console.error(w),alert("No se pudo eliminar la factura por completo.")}},c=async()=>{if(!a.current||!s)return;const _=a.current,w=await pb(_,{backgroundColor:"#ffffff"}),y=w.toDataURL("image/png"),I=new Ut("p","mm","a4"),D=I.internal.pageSize.getWidth(),H=w.height*D/w.width;I.addImage(y,"PNG",0,0,D,H),I.save(`factura_${s.number||s.date}.pdf`)},d=_=>_.totals||{lbs:_.totalLbs||0,units:_.totalUnits||0,amount:_.totalAmount||0,expenses:_.totalExpenses||0,finalAmount:_.finalAmount||0};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Facturacin"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"N factura"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Libras"}),l.jsx("th",{className:"p-2 border",children:"Unidades"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Gastos"}),l.jsx("th",{className:"p-2 border",children:"Monto final"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Cargando"})}):t.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Sin facturas"})}):t.map(_=>{const w=d(_);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:_.date}),l.jsx("td",{className:"p-2 border",children:_.number||""}),l.jsx("td",{className:"p-2 border",children:_.description||""}),l.jsx("td",{className:"p-2 border",children:Oh(w.lbs)}),l.jsx("td",{className:"p-2 border",children:Oh(w.units)}),l.jsx("td",{className:"p-2 border",children:po(w.amount)}),l.jsx("td",{className:"p-2 border",children:po(w.expenses)}),l.jsx("td",{className:"p-2 border",children:po(w.finalAmount)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${_.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:_.status})}),l.jsx("td",{className:"p-2 border",children:l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>i(_),children:"Ver"}),l.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>o(_),children:_.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),l.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>A(_),children:"Eliminar"})]})})]},_.id)})})]})}),s&&l.jsxs("div",{ref:a,className:"bg-white p-4 rounded shadow border",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",s.date," ",s.number?` ${s.number}`:""]}),l.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>i(null),children:"Cerrar"}),l.jsx("button",{onClick:c,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-3",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Estado:"})," ",s.status]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras:"})," ",Oh(((f=s.totals)==null?void 0:f.lbs)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades:"})," ",Oh(((m=s.totals)==null?void 0:m.units)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto:"})," ",po(((g=s.totals)==null?void 0:g.amount)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",po(((B=s.totals)==null?void 0:B.expenses)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto final:"})," ",po(((b=s.totals)==null?void 0:b.finalAmount)||0)]})]}),l.jsx("h4",{className:"font-semibold mb-1",children:"Lotes"}),l.jsxs("table",{className:"min-w-full text-sm mb-4",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Cantidad"}),l.jsx("th",{className:"p-2 border",children:"Precio venta"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"})]})}),l.jsx("tbody",{children:s.batches&&s.batches.length>0?s.batches.map((_,w)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:_.productName||"(sin nombre)"}),l.jsx("td",{className:"p-2 border",children:(_.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Oh(_.quantity)}),l.jsx("td",{className:"p-2 border",children:po(_.salePrice)}),l.jsx("td",{className:"p-2 border",children:po(_.amount)})]},w)):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin items"})})})]}),l.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:s.expenses&&s.expenses.length>0?s.expenses.map((_,w)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:_.date}),l.jsx("td",{className:"p-2 border",children:_.description}),l.jsx("td",{className:"p-2 border",children:po(_.amount)})]},w)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin gastos"})})})]})]})]})}const Uu=t=>`C$${Number(t||0).toFixed(2)}`,$y=t=>Number(t||0).toFixed(3),RW=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function DW({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[s,i]=L.useState(Zt(new Date,"yyyy-MM-dd")),[a,o]=L.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[A,c]=L.useState(""),[d,f]=L.useState(n.map(N=>N.id)),[m,g]=L.useState([]),[B,b]=L.useState([]),[_,w]=L.useState(!1),[y,I]=L.useState(!1),[D,H]=L.useState("");L.useEffect(()=>{(async()=>{try{w(!0);const N=Yt(dt(Qe,"expenses"),di("date","desc")),U=await Lt(N),Z=[];U.forEach(ue=>{const ie=ue.data();Z.push({id:ue.id,date:ie.date,description:ie.description,amount:Number(ie.amount||0)})}),g(Z)}catch(N){console.error(N)}finally{w(!1)}})()},[]);const k=L.useMemo(()=>n.filter(N=>d.includes(N.id)),[n,d]),T=L.useMemo(()=>{let N=0,U=0,Z=0;for(const z of k){RW(z.unit)?N+=Number(z.quantity||0):U+=Number(z.quantity||0);const W=z.expectedTotal??Number((Number(z.quantity||0)*Number(z.salePrice||0)).toFixed(2));Z+=Number(W||0)}const ue=m.filter(z=>B.includes(z.id)).reduce((z,W)=>z+Number(W.amount||0),0),ie=Z-ue;return{totalLbs:N,totalUnits:U,totalAmount:Z,totalGastos:ue,finalAmount:ie}},[k,m,B]),E=(N,U)=>{f(Z=>U?[...new Set([...Z,N])]:Z.filter(ue=>ue!==N))},Q=(N,U)=>{b(Z=>U?[...new Set([...Z,N])]:Z.filter(ue=>ue!==N))},j=N=>{f(N?n.map(U=>U.id):[])},S=async()=>{if(H(""),k.length===0){H("Selecciona al menos 1 lote pagado.");return}try{I(!0);const N={number:a.trim(),date:s,description:A.trim(),status:"PENDIENTE",createdAt:Pt.now(),totalLbs:Number(T.totalLbs.toFixed(3)),totalUnits:Number(T.totalUnits.toFixed(3)),totalAmount:Number(T.totalAmount.toFixed(2)),totalExpenses:Number(T.totalGastos.toFixed(2)),finalAmount:Number(T.finalAmount.toFixed(2)),batches:k.map(U=>{var Z;return{id:U.id,productId:U.productId,productName:U.productName,unit:U.unit,quantity:Number(Number(U.quantity||0).toFixed(3)),salePrice:Number(Number(U.salePrice||0).toFixed(2)),amount:Number((Number(U.quantity||0)*Number(U.salePrice||0)).toFixed(2)),batchDate:U.date,paidAt:(Z=U.paidAt)!=null&&Z.toDate?Zt(U.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:m.filter(U=>B.includes(U.id)).map(U=>({id:U.id,date:U.date||null,description:U.description||"",amount:Number(Number(U.amount||0).toFixed(2))}))};await is(dt(Qe,"invoices"),N),H(" Factura creada."),r()}catch(N){console.error(N),H(` Error al crear factura: ${(N==null?void 0:N.message)||"desconocido"}`)}finally{I(!1)}};return l.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:l.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),l.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:s,onChange:N=>i(N.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:a,onChange:N=>o(N.target.value),placeholder:"FAC-001"})]}),l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:A,onChange:N=>c(N.target.value),placeholder:"Comentarios de la factura"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),l.jsxs("label",{className:"text-sm flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:n.length>0&&d.length===n.length,onChange:N=>j(N.target.checked)}),"Seleccionar todos"]})]}),n.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):l.jsx("div",{className:"border rounded",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Sel"}),l.jsx("th",{className:"p-2 border",children:"Fecha lote"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Cantidad"}),l.jsx("th",{className:"p-2 border",children:"Precio venta"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),l.jsx("tbody",{children:n.map(N=>{var ue;const U=d.includes(N.id),Z=N.expectedTotal??Number((Number(N.quantity||0)*Number(N.salePrice||0)).toFixed(2));return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"checkbox",checked:U,onChange:ie=>E(N.id,ie.target.checked)})}),l.jsx("td",{className:"p-2 border",children:N.date}),l.jsx("td",{className:"p-2 border",children:N.productName}),l.jsx("td",{className:"p-2 border",children:(N.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:$y(N.quantity)}),l.jsx("td",{className:"p-2 border",children:Uu(N.salePrice)}),l.jsx("td",{className:"p-2 border",children:Uu(Z)}),l.jsx("td",{className:"p-2 border",children:(ue=N.paidAt)!=null&&ue.toDate?Zt(N.paidAt.toDate(),"yyyy-MM-dd"):""})]},N.id)})})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),_&&l.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"})]}),m.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos registrados o no estn disponibles."}):l.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Sel"}),l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:m.map(N=>{const U=B.includes(N.id);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"checkbox",checked:U,onChange:Z=>Q(N.id,Z.target.checked)})}),l.jsx("td",{className:"p-2 border",children:N.date||""}),l.jsx("td",{className:"p-2 border",children:N.description||""}),l.jsx("td",{className:"p-2 border",children:Uu(Number(N.amount||0))})]},N.id)})})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm mb-4",children:[l.jsxs("div",{children:["Total libras: ",l.jsx("strong",{children:$y(T.totalLbs)})]}),l.jsxs("div",{children:["Total unidades: ",l.jsx("strong",{children:$y(T.totalUnits)})]}),l.jsxs("div",{children:["Total monto: ",l.jsx("strong",{children:Uu(T.totalAmount)})]}),l.jsxs("div",{children:["Total gastos: ",l.jsx("strong",{children:Uu(T.totalGastos)})]}),l.jsxs("div",{className:"md:col-span-2",children:["Monto final (monto - gastos):"," ",l.jsx("strong",{children:Uu(T.finalAmount)})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{disabled:y,onClick:S,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:y?"Creando":"Crear factura"}),l.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),D&&l.jsx("span",{className:"text-sm ml-2",children:D})]})]})})}const Jl=t=>`C$ ${Number(t||0).toFixed(2)}`,Qu=t=>Number(t||0).toFixed(3),jW=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function OW(){const[t,e]=L.useState([]),[r,n]=L.useState(!0),[s,i]=L.useState(Zt(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[a,o]=L.useState(Zt(new Date,"yyyy-MM-dd")),[A,c]=L.useState(""),[d,f]=L.useState(!1),{refreshKey:m,refresh:g}=Jd();L.useEffect(()=>{(async()=>{n(!0);const y=Yt(dt(Qe,"inventory_batches"),mr("status","==","PAGADO"),di("date","desc")),I=await Lt(y),D=[];I.forEach(H=>{const k=H.data();D.push({id:H.id,productId:k.productId,productName:k.productName,category:k.category,unit:k.unit,quantity:Number(k.quantity||0),remaining:Number(k.remaining||0),purchasePrice:Number(k.purchasePrice||0),salePrice:Number(k.salePrice||0),invoiceTotal:Number(k.invoiceTotal||0),expectedTotal:Number(k.expectedTotal||Number(k.quantity||0)*Number(k.salePrice||0)),date:k.date,status:k.status,paidAt:k.paidAt})}),e(D),n(!1)})()},[m]);const B=L.useMemo(()=>t.filter(y=>!(s&&y.date<s||a&&y.date>a||A&&y.productId!==A)),[t,s,a,A]),b=L.useMemo(()=>{let y=0,I=0,D=0,H=0,k=0,T=0;for(const E of B)jW(E.unit)?(y+=E.quantity,I+=E.remaining):(D+=E.quantity,H+=E.remaining),k+=Number(E.expectedTotal||0),T+=Number(E.invoiceTotal||0);return{lbsIng:y,lbsRem:I,udsIng:D,udsRem:H,totalEsperado:k,totalFact:T,gross:k-T}},[B]),_=async y=>{window.confirm(`Marcar PENDIENTE el lote ${y.productName} (${y.date})?`)&&(await $r(Tt(Qe,"inventory_batches",y.id),{status:"PENDIENTE"}),e(I=>I.map(D=>D.id===y.id?{...D,status:"PENDIENTE"}:D)))},w=L.useMemo(()=>{const y=new Map;return t.forEach(I=>y.set(I.productId,{id:I.productId,name:I.productName})),Array.from(y.values())},[t]);return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),l.jsx(Xd,{onClick:g,loading:r})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:y=>i(y.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:y=>o(y.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:y=>c(y.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),w.map(y=>l.jsx("option",{value:y.id,children:y.name},y.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{i(""),o(""),c("")},children:"Quitar filtro"}),l.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>f(!0),children:"Crear factura"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Qu(b.lbsIng)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Qu(b.udsIng)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Jl(b.totalEsperado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Qu(b.lbsRem)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Qu(b.udsRem)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Jl(b.totalFact)]}),l.jsxs("div",{className:"col-span-3",children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Jl(b.gross)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Ingresado"}),l.jsx("th",{className:"p-2 border",children:"Restantes"}),l.jsx("th",{className:"p-2 border",children:"Precio Compra"}),l.jsx("th",{className:"p-2 border",children:"Precio Venta"}),l.jsx("th",{className:"p-2 border",children:"Total factura"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Fecha pago"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):B.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):B.map(y=>{var I;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:y.date}),l.jsx("td",{className:"p-2 border",children:(y.category||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:y.productName}),l.jsx("td",{className:"p-2 border",children:(y.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Qu(y.quantity)}),l.jsx("td",{className:"p-2 border",children:Qu(y.remaining)}),l.jsx("td",{className:"p-2 border",children:Jl(y.purchasePrice)}),l.jsx("td",{className:"p-2 border",children:Jl(y.salePrice)}),l.jsx("td",{className:"p-2 border",children:Jl(y.invoiceTotal||0)}),l.jsx("td",{className:"p-2 border",children:Jl(y.expectedTotal||0)}),l.jsx("td",{className:"p-2 border",children:(I=y.paidAt)!=null&&I.toDate?Zt(y.paidAt.toDate(),"yyyy-MM-dd"):""}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>_(y),children:"Marcar PENDIENTE"})})]},y.id)})})]})}),d&&l.jsx(DW,{paidBatches:B,onClose:()=>f(!1),onCreated:()=>f(!1)})]})}const Dn=t=>`C$ ${(Number(t)||0).toFixed(2)}`,MW=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function mg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function HW(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function VW(t){const e="ROP",r=mg(t.subcat).slice(0,3)||"GEN",n=HW(t.gender),s=mg(t.color).slice(0,3)||"COL",i=mg(t.size)||"TLL",a=mg(t.brand).slice(0,4)||"BRD",o=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${s}-${i}-${a}-${o}`}const Mh=/^[A-Za-z0-9._-]{0,32}$/;function KW(){const[t,e]=L.useState([]),[r,n]=L.useState([]),[s,i]=L.useState(!0),[a,o]=L.useState(""),[A,c]=L.useState(Zt(Vp(new Date),"yyyy-MM-dd")),[d,f]=L.useState(Zt(Hp(new Date),"yyyy-MM-dd")),[m,g]=L.useState(""),[B,b]=L.useState(""),[_,w]=L.useState(Zt(new Date,"yyyy-MM-dd")),[y,I]=L.useState(0),[D,H]=L.useState(0),[k,T]=L.useState(0),[E,Q]=L.useState(0),[j,S]=L.useState(0),[N,U]=L.useState(""),[Z,ue]=L.useState(""),[ie,z]=L.useState(""),[W,ae]=L.useState(""),[q,pe]=L.useState(""),[R,G]=L.useState(""),[te,J]=L.useState(""),[le,ne]=L.useState(!1),[ee,oe]=L.useState(""),[ye,Te]=L.useState("Camisa"),[ce,xe]=L.useState(null),[Ce,me]=L.useState(""),[re,yt]=L.useState(0),[Oe,ke]=L.useState(0),[Ke,Je]=L.useState(0),[Ye,wt]=L.useState(0),[Fe,Ge]=L.useState(0),[ze,et]=L.useState(""),[pt,it]=L.useState(""),[tt,Xe]=L.useState(""),[Ot,Ft]=L.useState(""),[tn,Xt]=L.useState(""),[cr,zn]=L.useState(""),[Gt,Wn]=L.useState(""),[Se,ut]=L.useState(null),[Nt,at]=L.useState({x:0,y:0}),[He,ht]=L.useState(!1);L.useEffect(()=>{const be=()=>ut(null),rt=nt=>nt.key==="Escape"&&ut(null);return document.addEventListener("click",be),document.addEventListener("keydown",rt),()=>{document.removeEventListener("click",be),document.removeEventListener("keydown",rt)}},[]);const Bt=(be,rt,nt=192,Kt=160)=>{let _t=be;be+nt+8>window.innerWidth&&(_t=be-nt),_t=Math.max(8,Math.min(_t,window.innerWidth-nt-8));let mt=rt;return rt+Kt+8>window.innerHeight&&(mt=window.innerHeight-Kt-8),mt=Math.max(8,Math.min(mt,window.innerHeight-Kt-8)),{x:_t,y:mt}},Et=(be,rt)=>{be.stopPropagation();const nt=be.currentTarget.getBoundingClientRect(),Kt=nt.right,Wt=nt.bottom,_t=Bt(Kt,Wt);at(_t),ut(mt=>mt===rt?null:rt)};L.useEffect(()=>{const be=()=>ut(null),rt=nt=>{nt.key==="Escape"&&ut(null)};return document.addEventListener("click",be),document.addEventListener("keydown",rt),()=>{document.removeEventListener("click",be),document.removeEventListener("keydown",rt)}},[]),L.useEffect(()=>{if(!Se)return;const be=()=>ut(null);return window.addEventListener("scroll",be,!0),window.addEventListener("resize",be),()=>{window.removeEventListener("scroll",be,!0),window.removeEventListener("resize",be)}},[Se]),L.useEffect(()=>{(async()=>{const be=await Lt(dt(Qe,"products_clothes")),rt=[];be.forEach(_t=>{const mt=_t.data();rt.push({id:_t.id,name:mt.name??"(sin nombre)",category:mt.category??"(sin categora)",measurement:mt.measurement??"unidad",price:Number(mt.price??0),sku:mt.sku||"",size:mt.size||"",color:mt.color||"",gender:mt.gender||"",brand:mt.brand||""})}),e(rt);const nt=Yt(dt(Qe,"inventory_clothes_batches"),di("date","desc")),Kt=await Lt(nt),Wt=[];Kt.forEach(_t=>{const mt=_t.data();Wt.push({id:_t.id,productId:mt.productId,productName:mt.productName,category:mt.category,unit:mt.unit,quantity:Number(mt.quantity||0),remaining:Number(mt.remaining??mt.quantity??0),purchasePrice:Number(mt.purchasePrice||0),salePrice:Number(mt.salePrice||0),invoiceTotal:Number(mt.invoiceTotal??Number(mt.quantity||0)*Number(mt.purchasePrice||0)),expectedTotal:Number(mt.expectedTotal??Number(mt.quantity||0)*Number(mt.salePrice||0)),date:mt.date,createdAt:mt.createdAt,status:mt.status,notes:mt.notes||"",sku:mt.sku||"",size:mt.size||"",color:mt.color||"",gender:mt.gender||"",brand:mt.brand||"",clientCode:mt.clientCode||""})}),n(Wt),i(!1)})()},[]),L.useEffect(()=>{const be=t.find(rt=>rt.id===B);be&&(T(Number(be.price||0)),be.sku&&ue(be.sku),be.size&&z(rt=>rt||be.size),be.color&&ae(rt=>rt||be.color),be.gender&&pe(rt=>rt||be.gender),be.brand&&G(rt=>rt||be.brand))},[B,t]),L.useEffect(()=>{Q(Math.floor(y*D*100)/100)},[y,D]),L.useEffect(()=>{S(Math.floor(y*k*100)/100)},[y,k]),L.useEffect(()=>{const be=t.find(Kt=>Kt.id===B);if(be!=null&&be.sku){ue(be.sku);return}const rt=le&&ye?ye:(be==null?void 0:be.category)||"";if(!rt&&!q&&!W&&!ie&&!R){ue("");return}const nt=VW({subcat:rt,gender:q||"",color:W||"",size:ie||"",brand:R||""});ue(nt)},[le,ye,B,q,W,ie,R,t]);const $t=L.useMemo(()=>r.filter(be=>!(A&&be.date<A||d&&be.date>d||m&&be.productId!==m)),[r,A,d,m]),or=L.useMemo(()=>{const be=$t.reduce((Wt,_t)=>Wt+(_t.invoiceTotal||0),0),rt=$t.reduce((Wt,_t)=>Wt+(_t.expectedTotal||0),0),nt=$t.reduce((Wt,_t)=>Wt+_t.quantity,0),Kt=$t.reduce((Wt,_t)=>Wt+_t.remaining,0);return{udsIng:nt,udsRem:Kt,totalFacturado:be,totalEsperado:rt}},[$t]),ct=async be=>{be.preventDefault(),o("");const rt=!!B&&!le,nt=t.find(mt=>mt.id===B),Kt=rt?(nt==null?void 0:nt.name)||"":ee||"",Wt=rt?(nt==null?void 0:nt.category)||"":ye||"General",_t=rt&&(nt==null?void 0:nt.measurement)||"unidad";if(!Kt||y<=0||D<=0){o("Completa nombre/cantidad/costo.");return}if(te&&!Mh.test(te)){o("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const mt=await is(dt(Qe,"inventory_clothes_batches"),{productId:rt?nt.id:"",productName:Kt,category:Wt,unit:_t,quantity:y,remaining:y,purchasePrice:D,salePrice:k,invoiceTotal:E,expectedTotal:j,date:_,createdAt:Pt.now(),status:"PENDIENTE",notes:N||"",sku:Z||"",size:ie||"",color:W||"",gender:q||"",brand:R||"",clientCode:te||""});n(xs=>[{id:mt.id,productId:rt?nt.id:"",productName:Kt,category:Wt,unit:_t,quantity:y,remaining:y,purchasePrice:D,salePrice:k,invoiceTotal:E,expectedTotal:j,date:_,createdAt:Pt.now(),status:"PENDIENTE",notes:N||"",sku:Z||"",size:ie||"",color:W||"",gender:q||"",brand:R||"",clientCode:te||""},...xs]),o(" Lote de ropa creado"),b(""),w(Zt(new Date,"yyyy-MM-dd")),I(0),H(0),T(0),Q(0),S(0),U(""),ue(""),z(""),ae(""),pe(""),G(""),J(""),ne(!1),oe(""),Te("Camisa")}catch(mt){console.error(mt),o(" Error al crear lote")}},rn=async be=>{confirm(`Marcar PAGADO el lote del ${be.date} (${be.productName})?`)&&(await $r(Tt(Qe,"inventory_clothes_batches",be.id),{status:"PAGADO"}),n(nt=>nt.map(Kt=>Kt.id===be.id?{...Kt,status:"PAGADO"}:Kt)))},Pn=be=>{xe(be.id),me(be.date),yt(be.quantity),ke(be.purchasePrice),Je(be.salePrice),wt(Number((be.quantity*be.purchasePrice).toFixed(2))),Ge(Number((be.quantity*be.salePrice).toFixed(2))),et(be.notes||""),it(be.sku||""),Xe(be.size||""),Ft(be.color||""),Xt(be.gender||""),zn(be.brand||""),Wn(be.clientCode||"")},Xr=()=>{xe(null),me(""),yt(0),ke(0),Je(0),wt(0),Ge(0),et(""),it(""),Xe(""),Ft(""),Xt(""),zn(""),Wn("")};L.useEffect(()=>{ce&&wt(Math.floor(re*Oe*100)/100)},[ce,re,Oe]),L.useEffect(()=>{ce&&Ge(Math.floor(re*Ke*100)/100)},[ce,re,Ke]);const Jr=async()=>{if(!ce)return;const be=r.find(Wt=>Wt.id===ce);if(!be)return;const rt=Math.max(0,be.quantity-be.remaining),nt=Math.max(0,re-rt);if(Gt&&!Mh.test(Gt)){o("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const Kt=Tt(Qe,"inventory_clothes_batches",ce);await $r(Kt,{date:Ce,quantity:re,purchasePrice:Oe,salePrice:Ke,invoiceTotal:Ye,expectedTotal:Fe,notes:ze,remaining:nt,sku:pt,size:tt,color:Ot,gender:tn||"",brand:cr||"",clientCode:Gt||""}),n(Wt=>Wt.map(_t=>_t.id===ce?{..._t,date:Ce,quantity:re,purchasePrice:Oe,salePrice:Ke,invoiceTotal:Ye,expectedTotal:Fe,notes:ze,remaining:nt,sku:pt,size:tt,color:Ot,gender:tn||"",brand:cr||"",clientCode:Gt||""}:_t)),Xr(),o(" Lote actualizado")},Or=async be=>{confirm(`Eliminar el lote del ${be.date} (${be.productName})?`)&&(await Ts(Tt(Qe,"inventory_clothes_batches",be.id)),n(nt=>nt.filter(Kt=>Kt.id!==be.id)),o(" Lote eliminado"))},nn=()=>{const be=(A?`Desde ${A}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),rt=_t=>(_t||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),nt=$t.map(_t=>`
      <tr>
        <td>${_t.date}</td>
        <td>${(_t.category||"").toUpperCase()}</td>
        <td>${rt(_t.productName)}</td>
        <td>${rt(_t.sku||"")}</td>
        <td>${rt(_t.size||"")}</td>
        <td>${rt(_t.color||"")}</td>
        <td>${rt(_t.clientCode||"")}</td>
        <td>${rt(_t.gender||"")}</td>
        <td>${(_t.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${_t.quantity.toFixed(0)}</td>
        <td style="text-align:right">${_t.remaining.toFixed(0)}</td>
        <td style="text-align:right">${Dn(_t.purchasePrice)}</td>
        <td style="text-align:right">${Dn(_t.salePrice)}</td>
        <td style="text-align:right">${Dn(_t.invoiceTotal||0)}</td>
        <td style="text-align:right">${Dn(_t.expectedTotal||0)}</td>
        <td>${rt((_t.notes||"").slice(0,120))}</td>
        <td>${_t.status}</td>
      </tr>`).join(""),Kt=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${be}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${or.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${or.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${Dn(or.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${Dn(or.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${Dn(Number((or.totalEsperado-or.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${nt||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Wt=window.open("","_blank");Wt&&(Wt.document.open(),Wt.document.write(Kt),Wt.document.close())};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ht(!0),type:"button",children:"Crear Inventario"})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:A,onChange:be=>c(be.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:be=>f(be.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:be=>g(be.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),t.map(be=>l.jsxs("option",{value:be.id,children:[be.name,"  ",be.category]},be.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(""),f(""),g("")},children:"Quitar filtro"}),l.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:nn,children:"Imprimir PDF"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",or.udsIng.toFixed(0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",or.udsRem.toFixed(0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Dn(or.totalEsperado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Dn(or.totalFacturado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Dn(Number((or.totalEsperado-or.totalFacturado).toFixed(2)))]})]})}),l.jsx("div",{className:"bg-white rounded shadow border",children:l.jsx("div",{className:"w-full overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),l.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),l.jsx("tbody",{className:"whitespace-nowrap",children:s?l.jsx("tr",{children:l.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):$t.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):$t.map(be=>{const rt=ce===be.id;return l.jsxs("tr",{className:"text-left",children:[l.jsx("td",{className:"p-2 md:p-3 border align-top",children:rt?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Ce,onChange:nt=>me(nt.target.value)}):be.date}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(be.category||"").toUpperCase()}),l.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:l.jsx("span",{className:"block truncate",title:be.productName,children:be.productName})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:rt?l.jsx("input",{className:"w-full border p-1 rounded",value:pt,onChange:nt=>it(nt.target.value)}):l.jsx("span",{className:"block truncate",title:be.sku||"",children:be.sku||""})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:rt?l.jsx("input",{className:"w-full border p-1 rounded",value:tt,onChange:nt=>Xe(nt.target.value)}):be.size||""}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:rt?l.jsx("input",{className:"w-full border p-1 rounded",value:Ot,onChange:nt=>Ft(nt.target.value)}):be.color||""}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:rt?l.jsx("input",{className:"w-full border p-1 rounded",value:Gt,onChange:nt=>{const Kt=nt.target.value;Mh.test(Kt)&&Wn(Kt)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):l.jsx("span",{className:"block truncate",title:be.clientCode||"",children:be.clientCode||""})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:rt?l.jsx("select",{className:"w-full border p-1 rounded",value:tn,onChange:nt=>Xt(nt.target.value),children:MW.map(nt=>l.jsx("option",{value:nt,children:nt||""},nt))}):be.gender||""}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(be.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:rt?l.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(re)?"":re,onChange:nt=>yt(Math.max(0,parseInt(nt.target.value||"0",10)))}):be.quantity.toFixed(0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:rt?be.remaining:be.remaining.toFixed(0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:rt?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Oe)?"":Oe,onChange:nt=>ke(Math.max(0,parseFloat(nt.target.value||"0")))}):Dn(be.purchasePrice)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:rt?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Ke)?"":Ke,onChange:nt=>Je(Math.max(0,parseFloat(nt.target.value||"0")))}):Dn(be.salePrice)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Dn(rt?Ye:be.invoiceTotal||0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Dn(rt?Fe:be.expectedTotal||0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:rt?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ze,onChange:nt=>et(nt.target.value),maxLength:500}):l.jsx("span",{className:"block truncate",title:be.notes||"",children:be.notes||""})}),l.jsx("td",{className:"p-2 md:p-3 border align-top",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${be.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:be.status})}),l.jsx("td",{className:"p-2 md:p-3 border align-top",children:rt?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Jr,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Xr,children:"Cancelar"})]}):l.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:nt=>Et(nt,be.id),children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[l.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),l.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),l.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},be.id)})})]})})}),Se&&$f.createPortal(l.jsxs(l.Fragment,{children:[l.jsx("div",{onClick:()=>ut(null),className:"fixed inset-0 z-[60]"}),l.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:Nt.x,top:Nt.y},onClick:be=>be.stopPropagation(),role:"menu","aria-orientation":"vertical",children:l.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const be=$t.find(rt=>rt.id===Se);return(be==null?void 0:be.status)==="PENDIENTE"?l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{ut(null),rn(be)},children:" Pagar"}):null})(),l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const be=$t.find(rt=>rt.id===Se);be&&(ut(null),Pn(be))},children:" Editar"}),l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const be=$t.find(rt=>rt.id===Se);be&&(ut(null),Or(be))},children:" Borrar"})]})})]}),document.body),He&&$f.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ht(!1)}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ht(!1),type:"button",children:"Cerrar"})]}),l.jsxs("form",{onSubmit:ct,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:B,onChange:be=>b(be.target.value),children:[l.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(be=>l.jsxs("option",{value:be.id,children:[be.name,"  ",be.category,"  ",be.sku?`SKU: ${be.sku}`:""]},be.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:_,onChange:be=>w(be.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),l.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:be=>I(Math.max(0,parseInt(be.target.value||"0",10))),placeholder:""})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:D===0?"":D,onChange:be=>H(Math.max(0,parseFloat(be.target.value||"0")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:k===0?"":k,onChange:be=>T(Math.max(0,parseFloat(be.target.value||"0")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Z,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ie,readOnly:!0,onChange:be=>z(be.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:W,readOnly:!0,onChange:be=>ae(be.target.value),placeholder:"Negro, Azul, Rojo"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:q,readOnly:!0,onChange:be=>pe(be.target.value),placeholder:"Masculino, Femenino, Otro"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:R,onChange:be=>G(be.target.value),placeholder:"Shein, Usado, Otro"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:te,onChange:be=>{const rt=be.target.value;Mh.test(rt)&&J(rt)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!Mh.test(te)&&te.length>0&&l.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:N,onChange:be=>U(be.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[N.length,"/500"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Dn(E),readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Dn(j),readOnly:!0})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ht(!1),children:"Cancelar"}),l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),a&&l.jsx("p",{className:"mt-2 text-sm",children:a})]})}const qW=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],GW=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],zW=["XS","S","M","L","XL","2XL"],WW=["2","4","6","8","10","12","14"],$W=["26","28","30","32","34","36","38"],XW=["Shein","Usado","Otro"],JW=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function gg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function YW(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function ZW(t){const e="ROP",r=gg(t.subcat).slice(0,3)||"GEN",n=YW(t.gender),s=gg(t.color).slice(0,3)||"COL",i=gg(t.size)||"TLL",a=gg(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${s}-${i}-${a}`}const e$=/^[A-Za-z0-9._-]{0,32}$/;function t$(){const[t,e]=L.useState(""),[r,n]=L.useState("Camisa"),[s,i]=L.useState(""),[a,o]=L.useState(""),[A,c]=L.useState("Shein"),[d,f]=L.useState(""),[m,g]=L.useState(""),[B,b]=L.useState(""),[_,w]=L.useState(""),[y,I]=L.useState([]),[D,H]=L.useState(!0),[k,T]=L.useState(""),{refreshKey:E,refresh:Q}=Jd(),[j,S]=L.useState(!1),N=L.useMemo(()=>r.toLowerCase()==="jean"?$W:d==="NINO"||d==="NINA"?WW:zW,[r,d]);L.useEffect(()=>{b(ZW({subcat:r,gender:d,color:a,size:s,brand:A}))},[r,d,a,s,A]),L.useEffect(()=>{(async()=>{H(!0);const ie=Yt(dt(Qe,"products_clothes"),di("createdAt","desc")),z=await Lt(ie),W=[];z.forEach(ae=>{const q=ae.data();W.push({id:ae.id,name:q.name??"(sin nombre)",category:q.category??"",measurement:q.measurement??"unidad",sku:q.sku??"",size:q.size||"",color:q.color||"",brand:q.brand||"",gender:q.gender||"",clientCode:q.clientCode||"",notes:q.notes||"",createdAt:q.createdAt??Pt.now()})}),I(W),H(!1)})()},[E]);const U=()=>{e(""),n("Camisa"),i(""),o(""),c("Shein"),f(""),g(""),w("")},Z=async ie=>{if(ie.preventDefault(),T(""),!t.trim()){T("Ingresa el nombre del producto.");return}if(m&&!e$.test(m)){T("Cdigo del cliente invlido");return}try{const z=await is(dt(Qe,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:B,size:s||"",color:a||"",brand:A||"",gender:d||"",clientCode:m||"",notes:_||"",createdAt:Pt.now()});I(W=>[{id:z.id,name:t.trim(),category:r,measurement:"unidad",sku:B,size:s||"",color:a||"",brand:A||"",gender:d||"",clientCode:m||"",notes:_||"",createdAt:Pt.now()},...W]),U(),S(!1),T(" Producto de ropa creado")}catch(z){console.error(z),T(" Error al crear producto")}},ue=async ie=>{confirm(`Eliminar el producto "${ie.name}"?`)&&(await Ts(Tt(Qe,"products_clothes",ie.id)),I(W=>W.filter(ae=>ae.id!==ie.id)))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Xd,{onClick:Q,loading:D}),l.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{S(!0)},children:[l.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),j&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),l.jsxs("form",{onSubmit:Z,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:ie=>e(ie.target.value),placeholder:"Ej: Blusa floral"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),l.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:ie=>n(ie.target.value),children:qW.map(ie=>l.jsx("option",{value:ie,children:ie},ie))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),l.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:ie=>f(ie.target.value),children:JW.map(ie=>l.jsx("option",{value:ie,children:ie||""},ie))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:ie=>i(ie.target.value),children:[l.jsx("option",{value:"",children:""}),N.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:ie=>o(ie.target.value),children:[l.jsx("option",{value:"",children:""}),GW.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),l.jsx("select",{className:"w-full border p-2 rounded",value:A,onChange:ie=>c(ie.target.value),children:XW.map(ie=>l.jsx("option",{value:ie,children:ie},ie))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:B,readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),l.jsx("input",{className:"w-full border p-2 rounded",value:m,onChange:ie=>g(ie.target.value)})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:_,onChange:ie=>w(ie.target.value),maxLength:500})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[l.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Subcat."}),l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Talla"}),l.jsx("th",{className:"p-2 border",children:"Color"}),l.jsx("th",{className:"p-2 border",children:"Marca"}),l.jsx("th",{className:"p-2 border",children:"Gnero"}),l.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:D?l.jsx("tr",{children:l.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):y.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):y.map(ie=>{var z;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:(z=ie.createdAt)!=null&&z.toDate?ie.createdAt.toDate().toISOString().slice(0,10):""}),l.jsx("td",{className:"p-2 border",children:ie.category}),l.jsx("td",{className:"p-2 border",children:ie.name}),l.jsx("td",{className:"p-2 border",children:ie.sku}),l.jsx("td",{className:"p-2 border",children:ie.size||""}),l.jsx("td",{className:"p-2 border",children:ie.color||""}),l.jsx("td",{className:"p-2 border",children:ie.brand||""}),l.jsx("td",{className:"p-2 border",children:ie.gender||""}),l.jsx("td",{className:"p-2 border",children:ie.clientCode||""}),l.jsx("td",{className:"p-2 border",children:ie.notes||""}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ue(ie),children:"Borrar"})})]},ie.id)})})]})}),k&&l.jsx("p",{className:"mt-2 text-sm",children:k})]})}async function r$(t){const{productId:e,quantity:r,saleDate:n,saleId:s}=t,i=Math.max(0,Math.floor(Number(r||0)));if(!e||i<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const a=Yt(dt(Qe,"inventory_clothes_batches"),mr("productId","==",e)),c=(await Lt(a)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,m)=>{var w,y;const g=String(f.data.date||""),B=String(m.data.date||"");if(g!==B)return g<B?-1:1;const b=((w=f.data.createdAt)==null?void 0:w.seconds)??0,_=((y=m.data.createdAt)==null?void 0:y.seconds)??0;return b-_}).map(f=>Tt(Qe,"inventory_clothes_batches",f.id)),d=[];return await il(Qe,async f=>{const m=await Promise.all(c.map(B=>f.get(B)));let g=i;for(let B=0;B<c.length&&g>0;B++){const b=c[B],_=m[B];if(!_.exists())continue;const w=_.data(),y=Math.max(0,Math.floor(Number(w.quantity||0))),I=Number.isFinite(Number(w.remaining))?Math.max(0,Math.floor(Number(w.remaining||0))):y;if(I<=0)continue;const D=Math.min(I,g),H=Math.max(0,I-D);f.update(b,{remaining:H}),d.push({batchId:b.id,qty:D,batchDate:String(w.date||""),productName:String(w.productName||"")}),g-=D}if(g>0)throw new Error(`Inventario insuficiente. Faltan ${g} unidades.`);if(s)for(const B of d)await is(dt(Qe,"batch_clothes_allocations"),{saleId:s,saleDate:n,productId:e,productName:B.productName??"",batchId:B.batchId,batchDate:B.batchDate??"",quantity:B.qty,createdAt:Pt.now()})}),{allocations:d}}async function sB(t){const e=Tt(Qe,"sales_clothes",t),r=await Nl(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),s=[];if(Array.isArray(n.items)&&n.items.length>0){const o={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const A of Object.keys(n.allocationsByItem)){const c=n.allocationsByItem[A],d=String((c==null?void 0:c.productId)||A||"");if(!d)continue;const f=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];o[d]=f.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const A of n.allocationsByItem){const c=String((A==null?void 0:A.productId)||"");if(!c)continue;const d=Array.isArray(A==null?void 0:A.allocations)?A.allocations:[];o[c]=d.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const A of n.items){const c=String((A==null?void 0:A.productId)||"");if(!c)continue;const d=Math.max(0,Math.floor(Number((A==null?void 0:A.qty)||(A==null?void 0:A.quantity)||0))),f=Array.isArray(A==null?void 0:A.allocations)?A.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):o[c]||[];s.push({productId:c,productName:String((A==null?void 0:A.productName)||""),qty:d,allocations:f.length?f:void 0})}}else{const o=n.item||{},A=String(o.productId||n.productId||""),c=Math.max(0,Math.floor(Number(o.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];A&&c>0&&s.push({productId:A,productName:String(o.productName||n.productName||""),qty:c,allocations:d.length?d:void 0})}return s.length===0?(await il(Qe,async o=>{o.delete(e)}),{restored:0}):s.every(o=>Array.isArray(o.allocations)&&o.allocations.length>0)?(await il(Qe,async A=>{const c=[];for(const f of s)for(const m of f.allocations||[])c.push({ref:Tt(Qe,"inventory_clothes_batches",m.batchId),addBack:Math.max(0,Math.floor(Number(m.qty||0)))});const d=await Promise.all(c.map(f=>A.get(f.ref)));for(let f=0;f<c.length;f++){const m=d[f];if(!m.exists())continue;const g=m.data(),B=Math.max(0,Math.floor(Number(g.remaining||0)));A.update(c[f].ref,{remaining:B+c[f].addBack})}A.delete(e)}),{restored:s.reduce((A,c)=>A+(c.allocations||[]).reduce((d,f)=>d+f.qty,0),0)}):(await il(Qe,async o=>{const A={};for(const g of s){if(!g.productId||g.qty<=0)continue;const B=Yt(dt(Qe,"inventory_clothes_batches"),mr("productId","==",g.productId)),_=(await Lt(B)).docs.map(w=>{const y=w.data(),I=Math.max(0,Math.floor(Number(y.quantity||0))),D=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):I;return{id:w.id,date:String(y.date||""),quantity:I,remaining:D}}).sort((w,y)=>w.date.localeCompare(y.date));A[g.productId]=_}const c=[];for(const g of s){if(!g.productId||g.qty<=0)continue;if(Array.isArray(g.allocations)&&g.allocations.length>0){for(const _ of g.allocations)c.push({id:_.batchId,addBack:Math.max(0,Math.floor(Number(_.qty||0)))});continue}const B=A[g.productId]||[];let b=g.qty;for(const _ of B){if(b<=0)break;const w=Math.max(0,_.quantity-_.remaining);if(w<=0)continue;const y=Math.min(w,b);c.push({id:_.id,addBack:y}),b-=y}for(const _ of B){if(b<=0)break;const w=Math.min(b,g.qty);c.push({id:_.id,addBack:w}),b-=w}}const d={};for(const g of c)d[g.id]=(d[g.id]||0)+Math.max(0,Math.floor(Number(g.addBack||0)));const f=Object.keys(d).map(g=>Tt(Qe,"inventory_clothes_batches",g)),m=await Promise.all(f.map(g=>o.get(g)));for(let g=0;g<f.length;g++){const B=m[g];if(!B.exists())continue;const b=B.data(),_=Math.max(0,Math.floor(Number(b.remaining||0))),w=Math.max(0,Math.floor(Number(d[f[g].id]||0)));o.update(f[g],{remaining:_+w})}o.delete(e)}),{restored:s.reduce((o,A)=>o+A.qty,0)})}const EI=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Pu=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function wg(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function _I(t){const e=Yt(dt(Qe,"ar_movements"),mr("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Ts(Tt(Qe,"ar_movements",n.id))))}function n$(){const[t,e]=L.useState(""),[r,n]=L.useState("+505 "),[s,i]=L.useState(""),[a,o]=L.useState(""),[A,c]=L.useState("ACTIVO"),[d,f]=L.useState(0),[m,g]=L.useState([]),[B,b]=L.useState(!0),[_,w]=L.useState(""),[y,I]=L.useState(null),[D,H]=L.useState(""),[k,T]=L.useState("+505 "),[E,Q]=L.useState(""),[j,S]=L.useState(""),[N,U]=L.useState("ACTIVO"),[Z,ue]=L.useState(0),[ie,z]=L.useState(!1),[W,ae]=L.useState(null),[q,pe]=L.useState(!1),[R,G]=L.useState([]),[te,J]=L.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[le,ne]=L.useState(!1),[ee,oe]=L.useState(0),[ye,Te]=L.useState(new Date().toISOString().slice(0,10)),[ce,xe]=L.useState(""),[Ce,me]=L.useState(!1),[re,yt]=L.useState(null),[Oe,ke]=L.useState(""),[Ke,Je]=L.useState(0),[Ye,wt]=L.useState(""),[Fe,Ge]=L.useState(!1);L.useEffect(()=>{(async()=>{const Se=Yt(dt(Qe,"customers_clothes"),di("createdAt","desc")),ut=await Lt(Se),Nt=[];ut.forEach(at=>{const He=at.data();Nt.push({id:at.id,name:He.name??"",phone:He.phone??"+505 ",place:He.place??"",notes:He.notes??"",status:He.status??"ACTIVO",creditLimit:Number(He.creditLimit??0),createdAt:He.createdAt??Pt.now(),balance:0})});for(const at of Nt)try{const He=Yt(dt(Qe,"ar_movements"),mr("customerId","==",at.id)),ht=await Lt(He);let Bt=0;ht.forEach(Et=>Bt+=Number(Et.data().amount||0)),at.balance=Bt}catch{at.balance=0}g(Nt),b(!1)})()},[]);const ze=()=>{e(""),n("+505 "),i(""),o(""),c("ACTIVO"),f(0)},et=async Se=>{if(Se.preventDefault(),w(""),!t.trim()){w("Ingresa el nombre.");return}const ut=wg(r);if(ut.length<6){w("Telfono incompleto.");return}try{const Nt=await is(dt(Qe,"customers_clothes"),{name:t.trim(),phone:ut,place:s||"",notes:a||"",status:A,creditLimit:Number(d||0),createdAt:Pt.now()});g(at=>[{id:Nt.id,name:t.trim(),phone:ut,place:s||"",notes:a||"",status:A,creditLimit:Number(d||0),createdAt:Pt.now(),balance:0},...at]),ze(),Ge(!1),w(" Cliente creado")}catch(Nt){console.error(Nt),w(" Error al crear cliente")}},pt=Se=>{I(Se.id),H(Se.name),T(Se.phone||"+505 "),Q(Se.place||""),S(Se.notes||""),U(Se.status||"ACTIVO"),ue(Number(Se.creditLimit||0))},it=()=>{I(null),H(""),T("+505 "),Q(""),S(""),U("ACTIVO"),ue(0)},tt=async()=>{if(!y)return;const Se=wg(k);if(!D.trim()){w("Ingresa el nombre.");return}try{await $r(Tt(Qe,"customers_clothes",y),{name:D.trim(),phone:Se,place:E||"",notes:j||"",status:N,creditLimit:Number(Z||0)}),g(ut=>ut.map(Nt=>Nt.id===y?{...Nt,name:D.trim(),phone:Se,place:E||"",notes:j||"",status:N,creditLimit:Number(Z||0)}:Nt)),it(),w(" Cliente actualizado")}catch(ut){console.error(ut),w(" Error al actualizar")}},Xe=async Se=>{if(confirm(`Eliminar al cliente "${Se.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{b(!0);const Nt=Yt(dt(Qe,"sales_clothes"),mr("customerId","==",Se.id)),at=await Lt(Nt);for(const Bt of at.docs){const Et=Bt.id;try{await sB(Et)}catch($t){console.warn("restoreSaleAndDeleteClothes error",$t);try{await Ts(Tt(Qe,"sales_clothes",Et))}catch{}}await _I(Et)}const He=Yt(dt(Qe,"ar_movements"),mr("customerId","==",Se.id)),ht=await Lt(He);await Promise.all(ht.docs.map(Bt=>Ts(Tt(Qe,"ar_movements",Bt.id)))),await Ts(Tt(Qe,"customers_clothes",Se.id)),g(Bt=>Bt.filter(Et=>Et.id!==Se.id)),w(" Cliente eliminado y prendas devueltas al inventario")}catch(Nt){console.error(Nt),w(" No se pudo eliminar el cliente.")}finally{b(!1)}},Ot=async Se=>{ae(Se),G([]),J({saldoActual:0,totalAbonado:0,totalCargos:0}),z(!0),ne(!1),oe(0),Te(new Date().toISOString().slice(0,10)),xe(""),yt(null),pe(!0);try{const ut=Yt(dt(Qe,"ar_movements"),mr("customerId","==",Se.id)),Nt=await Lt(ut),at=[];Nt.forEach(He=>{var Bt,Et;const ht=He.data();at.push({id:He.id,date:ht.date??((Et=(Bt=ht.createdAt)==null?void 0:Bt.toDate)!=null&&Et.call(Bt)?ht.createdAt.toDate().toISOString().slice(0,10):""),type:ht.type??"CARGO",amount:Number(ht.amount||0),ref:ht.ref||{},comment:ht.comment||"",createdAt:ht.createdAt})}),at.sort((He,ht)=>{var $t,or;if(He.date!==ht.date)return He.date.localeCompare(ht.date);const Bt=(($t=He.createdAt)==null?void 0:$t.seconds)||0,Et=((or=ht.createdAt)==null?void 0:or.seconds)||0;return Bt-Et}),G(at),Ft(at)}catch(ut){console.error(ut),w(" No se pudo cargar el estado de cuenta")}finally{pe(!1)}},Ft=Se=>{const ut=Se.reduce((He,ht)=>He+(Number(ht.amount)||0),0),Nt=Se.filter(He=>Number(He.amount)<0).reduce((He,ht)=>He+Math.abs(Number(ht.amount)||0),0),at=Se.filter(He=>Number(He.amount)>0).reduce((He,ht)=>He+Number(ht.amount)||0,0);J({saldoActual:ut,totalAbonado:Nt,totalCargos:at})},tn=async()=>{if(!W)return;w("");const Se=Number(ee||0);if(!(Se>0)){w("Ingresa un monto de abono mayor a 0.");return}const ut=parseFloat(Se.toFixed(2));if(!ye){w("Selecciona la fecha del abono.");return}try{me(!0);const Nt={customerId:W.id,type:"ABONO",amount:-ut,date:ye,comment:ce||"",createdAt:Pt.now()},He={id:(await is(dt(Qe,"ar_movements"),Nt)).id,date:ye,type:"ABONO",amount:-ut,comment:ce||"",createdAt:Pt.now()},ht=[...R,He].sort((Bt,Et)=>{var ct,rn;if(Bt.date!==Et.date)return Bt.date.localeCompare(Et.date);const $t=((ct=Bt.createdAt)==null?void 0:ct.seconds)||0,or=((rn=Et.createdAt)==null?void 0:rn.seconds)||0;return $t-or});G(ht),Ft(ht),g(Bt=>Bt.map(Et=>Et.id===W.id?{...Et,balance:(Et.balance||0)-ut}:Et)),ae(Bt=>Bt&&{...Bt,balance:(Bt.balance||0)-ut}),oe(0),xe(""),Te(new Date().toISOString().slice(0,10)),ne(!1),w(" Abono registrado")}catch(Nt){console.error(Nt),w(" Error al registrar el abono")}finally{me(!1)}},Xt=Se=>{yt(Se.id),ke(Se.date||new Date().toISOString().slice(0,10)),Je(Math.abs(Number(Se.amount||0))),wt(Se.comment||"")},cr=()=>{yt(null),ke(""),Je(0),wt("")},zn=async()=>{if(!re)return;const Se=R.findIndex(He=>He.id===re);if(Se===-1)return;const ut=R[Se],Nt=Number(Ke||0);if(!(Nt>0)){w("El monto debe ser mayor a 0.");return}const at=ut.type==="ABONO"?-parseFloat(Nt.toFixed(2)):+parseFloat(Nt.toFixed(2));try{await $r(Tt(Qe,"ar_movements",re),{date:Oe,amount:at,comment:Ye||""});const He=[...R];He[Se]={...ut,date:Oe,amount:at,comment:Ye||""},He.sort((Bt,Et)=>{var ct,rn;if(Bt.date!==Et.date)return Bt.date.localeCompare(Et.date);const $t=((ct=Bt.createdAt)==null?void 0:ct.seconds)||0,or=((rn=Et.createdAt)==null?void 0:rn.seconds)||0;return $t-or}),G(He),Ft(He);const ht=He.reduce((Bt,Et)=>Bt+(Number(Et.amount)||0),0);g(Bt=>Bt.map(Et=>Et.id===(W==null?void 0:W.id)?{...Et,balance:ht}:Et)),ae(Bt=>Bt&&{...Bt,balance:ht}),cr(),w(" Movimiento actualizado")}catch(He){console.error(He),w(" Error al actualizar movimiento")}},Gt=async Se=>{var Nt,at;if(confirm(`Eliminar este movimiento (${Se.type==="ABONO"?"Abono":"Compra"}) del ${Se.date}?${Se.type==="CARGO"&&((Nt=Se.ref)!=null&&Nt.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(b(!0),Se.type==="CARGO"&&((at=Se.ref)!=null&&at.saleId)){try{await sB(Se.ref.saleId)}catch(Bt){console.warn("restoreSaleAndDeleteClothes error",Bt),b(!1),w(" No se pudo devolver inventario de la venta.");return}await _I(Se.ref.saleId)}else await Ts(Tt(Qe,"ar_movements",Se.id));const He=R.filter(Bt=>{var Et,$t;return Se.type==="CARGO"&&((Et=Se.ref)!=null&&Et.saleId)?(($t=Bt.ref)==null?void 0:$t.saleId)!==Se.ref.saleId:Bt.id!==Se.id});G(He),Ft(He);const ht=He.reduce((Bt,Et)=>Bt+(Number(Et.amount)||0),0);g(Bt=>Bt.map(Et=>Et.id===(W==null?void 0:W.id)?{...Et,balance:ht}:Et)),ae(Bt=>Bt&&{...Bt,balance:ht}),w(" Movimiento eliminado")}catch(He){console.error(He),w(" Error al eliminar movimiento")}finally{b(!1)}},Wn=L.useMemo(()=>[...m].sort((Se,ut)=>{var Nt,at;return Se.status!==ut.status?Se.status==="BLOQUEADO"?1:-1:(((Nt=ut.createdAt)==null?void 0:Nt.seconds)||0)-(((at=Se.createdAt)==null?void 0:at.seconds)||0)}),[m]);return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Ge(!0),type:"button",children:"Crear Cliente"})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Telfono"}),l.jsx("th",{className:"p-2 border",children:"Lugar"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Lmite"}),l.jsx("th",{className:"p-2 border",children:"Saldo"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:B?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):Wn.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):Wn.map(Se=>{var Nt;const ut=y===Se.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:(Nt=Se.createdAt)!=null&&Nt.toDate?Se.createdAt.toDate().toISOString().slice(0,10):""}),l.jsx("td",{className:"p-2 border",children:ut?l.jsx("input",{className:"w-full border p-1 rounded",value:D,onChange:at=>H(at.target.value)}):Se.name}),l.jsx("td",{className:"p-2 border",children:ut?l.jsx("input",{className:"w-full border p-1 rounded",value:k,onChange:at=>T(wg(at.target.value))}):Se.phone}),l.jsx("td",{className:"p-2 border",children:ut?l.jsxs("select",{className:"w-full border p-1 rounded",value:E,onChange:at=>Q(at.target.value),children:[l.jsx("option",{value:"",children:""}),EI.map(at=>l.jsx("option",{value:at,children:at},at))]}):Se.place||""}),l.jsx("td",{className:"p-2 border",children:ut?l.jsxs("select",{className:"w-full border p-1 rounded",value:N,onChange:at=>U(at.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Se.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Se.status})}),l.jsx("td",{className:"p-2 border",children:ut?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Z)?"":Z,onChange:at=>ue(Math.max(0,Number(at.target.value||0)))}):Pu(Se.creditLimit||0)}),l.jsx("td",{className:"p-2 border font-semibold",children:Pu(Se.balance||0)}),l.jsx("td",{className:"p-2 border",children:ut?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:j,onChange:at=>S(at.target.value),maxLength:500}):l.jsx("span",{title:Se.notes||"",children:(Se.notes||"").length>40?(Se.notes||"").slice(0,40)+"":Se.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:ut?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:tt,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:it,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>pt(Se),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Xe(Se),children:"Borrar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Ot(Se),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},Se.id)})})]})}),_&&l.jsx("p",{className:"mt-2 text-sm",children:_}),Fe&&$f.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ge(!1)}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ge(!1),type:"button",children:"Cerrar"})]}),l.jsxs("form",{onSubmit:et,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:t,onChange:Se=>e(Se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),l.jsx("input",{className:"w-full border p-2 rounded",value:r,onChange:Se=>n(wg(Se.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:Se=>i(Se.target.value),children:[l.jsx("option",{value:"",children:""}),EI.map(Se=>l.jsx("option",{value:Se,children:Se},Se))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:Se=>c(Se.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:d===0?"":d,onChange:Se=>f(Math.max(0,Number(Se.target.value||0))),placeholder:"Ej: 2000"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:a,onChange:Se=>o(Se.target.value),maxLength:500,placeholder:"Notas del cliente"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[a.length,"/500"]})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ge(!1),children:"Cancelar"}),l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),ie&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(W==null?void 0:W.name)||""]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{oe(0),Te(new Date().toISOString().slice(0,10)),xe(""),ne(!0)},children:"Abonar"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>z(!1),children:"Cerrar"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-xl font-semibold",children:Pu(te.saldoActual)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),l.jsx("div",{className:"text-xl font-semibold",children:Pu(te.totalAbonado)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),l.jsx("div",{className:"text-xl font-semibold",children:Pu(te.saldoActual)})]})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Referencia"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:q?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):R.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):R.map(Se=>{var Nt;const ut=re===Se.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:ut?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Oe,onChange:at=>ke(at.target.value)}):Se.date||""}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Se.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:Se.amount>=0?"COMPRA (CARGO)":"ABONO"})}),l.jsx("td",{className:"p-2 border",children:(Nt=Se.ref)!=null&&Nt.saleId?`Venta #${Se.ref.saleId}`:""}),l.jsx("td",{className:"p-2 border",children:ut?l.jsx("input",{className:"w-full border p-1 rounded",value:Ye,onChange:at=>wt(at.target.value),placeholder:"Comentario"}):l.jsx("span",{title:Se.comment||"",children:(Se.comment||"").length>40?(Se.comment||"").slice(0,40)+"":Se.comment||""})}),l.jsx("td",{className:"p-2 border font-semibold",children:ut?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ke)?"":Ke,onChange:at=>{const He=Number(at.target.value||0),ht=Number.isFinite(He)?Math.max(0,parseFloat(He.toFixed(2))):0;Je(ht)},placeholder:"0.00",title:Se.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):Pu(Se.amount)}),l.jsx("td",{className:"p-2 border",children:ut?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:zn,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:cr,children:"Cancelar"})]}):l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Xt(Se),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Gt(Se),children:"Borrar"})]})})]},Se.id)})})]})})]})}),le&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(W==null?void 0:W.name)||""]}),l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:ye,onChange:Se=>Te(Se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ee===0?"":ee,onChange:Se=>{const ut=Number(Se.target.value||0),Nt=Number.isFinite(ut)?Math.max(0,parseFloat(ut.toFixed(2))):0;oe(Nt)},placeholder:"0.00"}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ce,onChange:Se=>xe(Se.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ce.length,"/250"]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ne(!1),disabled:Ce,children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:tn,disabled:Ce,children:Ce?"Guardando...":"Guardar abono"})]})]})})]})}const Lu=t=>`C$ ${(Number(t)||0).toFixed(2)}`,s$=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function i$(t){if(!t)return 0;const e=Yt(dt(Qe,"inventory_clothes_batches"),mr("productId","==",t)),r=await Lt(e);let n="0000-00-00",s=-1,i=0;return r.forEach(a=>{const o=a.data(),A=String(o.date||"0000-00-00"),c=Number(o.salePrice||0),d=o.createdAt,f=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;A>n?(n=A,s=f,i=c):A===n&&f>s&&(s=f,i=c)}),Number(i||0)}async function II(t){if(!t)return 0;const e=Yt(dt(Qe,"inventory_clothes_batches"),mr("productId","==",t)),r=await Lt(e);let n=0;return r.forEach(s=>n+=Number(s.data().remaining||0)),n}function NI(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function a$(){const[t,e]=L.useState([]),[r,n]=L.useState([]),[s,i]=L.useState("CONTADO"),[a,o]=L.useState(""),[A,c]=L.useState(""),[d,f]=L.useState(new Date().toISOString().slice(0,10)),[m,g]=L.useState(""),[B,b]=L.useState([]),_=L.useMemo(()=>B.reduce((ce,xe)=>ce+(xe.qty||0),0),[B]),w=L.useMemo(()=>{const ce=B.reduce((xe,Ce)=>{const me=Math.max(0,(Number(Ce.unitPrice)||0)*(Ce.qty||0)-(Number(Ce.discount)||0));return xe+me},0);return Math.floor(ce*100)/100},[B]),[y,I]=L.useState(0),[D,H]=L.useState(""),[k,T]=L.useState(!1),[E,Q]=L.useState(!1),[j,S]=L.useState(""),[N,U]=L.useState("+505 "),[Z,ue]=L.useState(""),[ie,z]=L.useState(""),[W,ae]=L.useState("ACTIVO"),[q,pe]=L.useState(0),R=()=>{S(""),U("+505 "),ue(""),z(""),ae("ACTIVO"),pe(0)};L.useEffect(()=>{(async()=>{const ce=Yt(dt(Qe,"customers_clothes"),di("createdAt","desc")),xe=await Lt(ce),Ce=[];xe.forEach(Oe=>{const ke=Oe.data();Ce.push({id:Oe.id,name:ke.name??"",phone:ke.phone??"+505 ",place:ke.place??"",status:ke.status??"ACTIVO",creditLimit:Number(ke.creditLimit??0),balance:0})});for(const Oe of Ce)try{const ke=Yt(dt(Qe,"ar_movements"),mr("customerId","==",Oe.id)),Ke=await Lt(ke);let Je=0;Ke.forEach(Ye=>Je+=Number(Ye.data().amount||0)),Oe.balance=Je}catch{Oe.balance=0}e(Ce);const me=Yt(dt(Qe,"products_clothes"),di("createdAt","desc")),re=await Lt(me),yt=[];re.forEach(Oe=>{const ke=Oe.data();yt.push({id:Oe.id,name:ke.name??"(sin nombre)",sku:ke.sku??""})}),n(yt)})()},[]);const G=L.useMemo(()=>t.find(ce=>ce.id===a),[t,a]),te=(G==null?void 0:G.balance)||0,J=s==="CREDITO"?te+Math.max(0,Number(w||0))-Math.max(0,Number(y||0)):0,le=async ce=>{if(!ce)return;if(B.some(yt=>yt.productId===ce)){g("");return}const xe=r.find(yt=>yt.id===ce);if(!xe){g("");return}let Ce=await i$(ce);Ce||(Ce=Number((xe==null?void 0:xe.price)||0));const me=await II(ce),re={productId:ce,productName:xe.name||"",sku:xe.sku||"",unitPrice:Number(Ce)||0,available:Number(me)||0,qty:0,discount:0};b(yt=>[...yt,re]),g("")},ne=(ce,xe)=>{b(Ce=>Ce.map(me=>{if(me.productId!==ce)return me;if(xe==="")return{...me,qty:0};const re=Math.max(0,Math.floor(Number(xe)));return{...me,qty:re}}))},ee=(ce,xe)=>{b(Ce=>Ce.map(me=>{if(me.productId!==ce)return me;if(xe==="")return{...me,discount:0};const re=Math.max(0,Math.floor(Number(xe)));return{...me,discount:re}}))},oe=ce=>b(xe=>xe.filter(Ce=>Ce.productId!==ce)),ye=async()=>{if(!d)return"Selecciona la fecha.";if(B.length===0)return"Agrega al menos un producto.";const ce=B.filter(xe=>(xe.qty||0)>0);if(ce.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(w>0))return"El total debe ser mayor a cero.";if(s==="CONTADO"){if(!A.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!a)return"Selecciona un cliente (crdito).";if(y<0)return"El pago inicial no puede ser negativo.";if(y>w)return"El pago inicial no puede superar el total.";if((G==null?void 0:G.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const xe of ce){const Ce=await II(xe.productId);if(xe.qty>Ce)return`Inventario insuficiente para "${xe.productName}". Disponible: ${Ce} unidades.`;const me=(Number(xe.unitPrice)||0)*(xe.qty||0),re=Number(xe.discount)||0;if(!Number.isInteger(re)||re<0)return`El descuento en "${xe.productName}" debe ser entero y  0.`;if(re>me)return`El descuento en "${xe.productName}" no puede exceder C$ ${me.toFixed(2)}.`}return null},Te=async ce=>{ce.preventDefault(),H("");const xe=await ye();if(xe){H(" "+xe);return}try{T(!0);const Ce=B.filter(Oe=>(Oe.qty||0)>0).map(Oe=>{const ke=(Number(Oe.unitPrice)||0)*(Oe.qty||0),Ke=Math.max(0,Math.floor(Number(Oe.discount)||0)),Je=Math.max(0,ke-Ke);return{productId:Oe.productId,productName:Oe.productName,sku:Oe.sku||"",qty:Oe.qty,unitPrice:Number(Oe.unitPrice)||0,discount:Ke,total:Math.floor(Je*100)/100}}),me={type:s,date:d,createdAt:Pt.now(),itemsTotal:Number(w)||0,total:Number(w)||0,quantity:Number(_)||0,items:Ce};s==="CONTADO"?me.customerName=A.trim():(me.customerId=a,me.downPayment=Number(y)||0);const re=await is(dt(Qe,"sales_clothes"),me);if(s==="CREDITO"&&a){const Oe={customerId:a,date:d,createdAt:Pt.now(),ref:{saleId:re.id}};await is(dt(Qe,"ar_movements"),{...Oe,type:"CARGO",amount:Number(w)||0}),Number(y)>0&&await is(dt(Qe,"ar_movements"),{...Oe,type:"ABONO",amount:-Number(y)})}const yt={};for(const Oe of Ce)if(Oe.qty>0){const{allocations:ke}=await r$({productId:Oe.productId,quantity:Oe.qty,saleDate:d,saleId:re.id});yt[Oe.productId]={productId:Oe.productId,allocations:ke}}await $r(Tt(Qe,"sales_clothes",re.id),{allocationsByItem:yt}),i("CONTADO"),o(""),c(""),f(new Date().toISOString().slice(0,10)),b([]),I(0),s==="CREDITO"&&a&&e(Oe=>Oe.map(ke=>ke.id===a?{...ke,balance:(ke.balance||0)+(Number(w)||0)-(Number(y)||0)}:ke)),H(" Venta registrada")}catch(Ce){console.error(Ce),H(" Error al guardar la venta")}finally{T(!1)}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),l.jsxs("form",{onSubmit:Te,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:ce=>i(ce.target.value),children:[l.jsx("option",{value:"CONTADO",children:"Contado"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),s==="CONTADO"?l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:A,onChange:ce=>c(ce.target.value)})]}):l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:"flex-1 border p-2 rounded",value:a,onChange:ce=>o(ce.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un cliente"}),t.map(ce=>l.jsxs("option",{value:ce.status==="ACTIVO"?ce.id:"",disabled:ce.status==="BLOQUEADO",children:[ce.name," | ",ce.phone," | Saldo: ",Lu(ce.balance||0)]},ce.id))]}),l.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>Q(!0),children:"Crear Cliente"})]}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-lg font-semibold",children:Lu(te)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:ce=>I(Math.max(0,Number(ce.target.value||0))),placeholder:"0.00"})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),l.jsx("div",{className:"text-lg font-semibold",children:Lu(J)})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:d,onChange:ce=>f(ce.target.value)})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:async ce=>{const xe=ce.target.value;g(xe),await le(xe)},children:[l.jsx("option",{value:"",children:"Selecciona un producto"}),r.map(ce=>{const xe=B.some(Ce=>Ce.productId===ce.id);return l.jsxs("option",{value:xe?"":ce.id,disabled:xe,children:[ce.name," ",ce.sku?` ${ce.sku}`:""," ",xe?" (seleccionado)":""]},ce.id)})]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Los productos ya aadidos quedan bloqueados para evitar duplicados."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("div",{className:"border rounded overflow-hidden",children:[l.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[l.jsx("div",{className:"col-span-4",children:"Producto"}),l.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),l.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),l.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),l.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),l.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),l.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),B.length===0?l.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):B.map(ce=>{const xe=Math.max(0,(ce.available||0)-(ce.qty||0)),Ce=(Number(ce.unitPrice)||0)*(ce.qty||0),me=Math.max(0,Ce-(Number(ce.discount)||0));return l.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[l.jsx("div",{className:"col-span-4",children:l.jsxs("div",{className:"font-medium",children:[ce.productName,ce.sku?`  ${ce.sku}`:""]})}),l.jsx("div",{className:"col-span-2 text-right",children:Lu(ce.unitPrice)}),l.jsx("div",{className:"col-span-2 text-right",children:xe}),l.jsx("div",{className:"col-span-1",children:l.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ce.qty)||ce.qty===0?"":ce.qty,onChange:re=>ne(ce.productId,re.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),l.jsx("div",{className:"col-span-1",children:l.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ce.discount)||ce.discount===0?"":ce.discount,onChange:re=>ee(ce.productId,re.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),l.jsx("div",{className:"col-span-1 text-right",children:Lu(me)}),l.jsx("div",{className:"col-span-1 text-center",children:l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>oe(ce.productId),title:"Quitar producto",children:""})})]},ce.productId)})]}),B.length>0&&l.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),l.jsx("span",{className:"font-semibold",children:_})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Total: "}),l.jsx("span",{className:"font-semibold",children:Lu(w)})]})]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:k,children:k?"Guardando...":"Registrar venta"})})]}),D&&l.jsx("p",{className:"mt-2 text-sm",children:D}),E&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",value:j,onChange:ce=>S(ce.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),l.jsx("input",{className:"w-full border p-2 rounded",value:N,onChange:ce=>U(NI(ce.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:Z,onChange:ce=>ue(ce.target.value),children:[l.jsx("option",{value:"",children:""}),s$.map(ce=>l.jsx("option",{value:ce,children:ce},ce))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:W,onChange:ce=>ae(ce.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:q===0?"":q,onChange:ce=>pe(Math.max(0,Number(ce.target.value||0))),placeholder:"Ej: 2000"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ie,onChange:ce=>z(ce.target.value),maxLength:500})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{R(),Q(!1)},children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(H(""),!j.trim()){H("Ingresa el nombre del nuevo cliente.");return}const ce=NI(N);try{const xe=await is(dt(Qe,"customers_clothes"),{name:j.trim(),phone:ce,place:Z||"",notes:ie||"",status:W,creditLimit:Number(q||0),createdAt:Pt.now()}),Ce={id:xe.id,name:j.trim(),phone:ce,place:Z||"",status:W,creditLimit:Number(q||0),balance:0};e(me=>[Ce,...me]),o(xe.id),R(),Q(!1),H(" Cliente creado")}catch(xe){console.error(xe),H(" Error al crear cliente")}},children:"Guardar cliente"})]})]})})]})}const jn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Xg(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Zt(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function o$(t,e){const r=Xg(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(a=>({productId:String(a.productId||""),productName:String(a.productName||""),sku:a.sku||"",qty:Number(a.qty||0),unitPrice:Number(a.unitPrice??(Number(a.total||0)/Math.max(1,Number(a.qty||0))||0)),discount:Number(a.discount||0)})),customerId:t.customerId||void 0};const n=t.item||{},s=Number(t.quantity??n.qty??0),i=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??i??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:s,unitPrice:Number(n.unitPrice??(i&&s?i/s:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0}}function A$(t,e,r,n){const s={};for(const o of t)s[o.productId]||(s[o.productId]={productName:o.productName,lots:[]}),s[o.productId].lots.push({date:o.date,qtyLeft:Number(o.quantity||0),cost:Number(o.purchasePrice||0)});for(const o of Object.keys(s))s[o].lots.sort((A,c)=>A.date.localeCompare(c.date));const i=[...e].sort((o,A)=>o.date.localeCompare(A.date));let a=0;for(const o of i)for(const A of o.items||[]){const c=s[A.productId];if(!c)continue;let d=Number(A.qty||0);if(!(d<=0))for(const f of c.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const m=Math.min(f.qtyLeft,d);o.date>=r&&o.date<=n&&(a+=m*f.cost),f.qtyLeft-=m,d-=m}}return a}function l$(){const{refreshKey:t,refresh:e}=Jd(),[r,n]=L.useState(Zt(Vp(new Date),"yyyy-MM-dd")),[s,i]=L.useState(Zt(Hp(new Date),"yyyy-MM-dd")),[a,o]=L.useState([]),[A,c]=L.useState([]),[d,f]=L.useState([]),[m,g]=L.useState([]),[B,b]=L.useState([]),[_,w]=L.useState([]),[y,I]=L.useState(!0),[D,H]=L.useState(""),[k,T]=L.useState(!1),[E,Q]=L.useState(null),[j,S]=L.useState([]),[N,U]=L.useState(!1),[Z,ue]=L.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});L.useEffect(()=>{(async()=>{I(!0),H("");try{const q=await Lt(dt(Qe,"sales_clothes")),pe=[],R=[];q.forEach(ce=>{const xe=ce.data(),Ce=o$(xe,ce.id);Ce&&(Ce.date<=s&&pe.push(Ce),Ce.date>=r&&Ce.date<=s&&R.push(Ce))}),c(pe),o(R);const G=await Lt(dt(Qe,"inventory_clothes_batches")),te=[];G.forEach(ce=>{const xe=ce.data(),Ce=Xg(xe);!Ce||Ce>s||te.push({id:ce.id,productId:xe.productId,productName:xe.productName||"",date:Ce,quantity:Number(xe.quantity||0),remaining:Number(xe.remaining||0),purchasePrice:Number(xe.purchasePrice||0)})}),f(te);const J=await Lt(dt(Qe,"expenses_clothes")),le=[];J.forEach(ce=>{const xe=ce.data(),Ce=Xg(xe);Ce&&Ce>=r&&Ce<=s&&le.push({id:ce.id,date:Ce,category:xe.category||"",description:xe.description||"",amount:Number(xe.amount||0),status:xe.status||""})}),g(le);const ne=await Lt(dt(Qe,"ar_movements")),ee=[],oe={};ne.forEach(ce=>{const xe=ce.data(),Ce=Xg(xe);if(!Ce)return;const me=xe.customerId,re=Number(xe.amount||0);me&&(oe[me]=(oe[me]||0)+re),xe.type==="ABONO"&&Ce>=r&&Ce<=s&&ee.push({id:ce.id,customerId:me,type:"ABONO",amount:re,date:Ce})}),b(ee);const ye=await Lt(dt(Qe,"customers_clothes")),Te=[];ye.forEach(ce=>{const xe=ce.data();Te.push({id:ce.id,name:xe.name||"",balance:oe[ce.id]||0})}),w(Te)}catch(q){console.error(q),H(" Error cargando datos del dashboard.")}finally{I(!1)}})()},[r,s,t]);const ie=L.useMemo(()=>{try{return A$(d,A,r,s)}catch(q){return console.error(q),0}},[d,A,r,s]),z=L.useMemo(()=>{const q=a.reduce((oe,ye)=>oe+(ye.total||0),0),pe=m.reduce((oe,ye)=>oe+(ye.amount||0),0),R=q-ie,G=R-pe,te=B.reduce((oe,ye)=>oe+Math.abs(ye.amount||0),0),J=_.filter(oe=>(oe.balance||0)>0),le=J.reduce((oe,ye)=>oe+(ye.balance||0),0);let ne=0,ee=0;for(const oe of a){const ye=(oe.items||[]).reduce((Te,ce)=>Te+(Number(ce.qty)||0),0);oe.type==="CONTADO"?ne+=ye:ee+=ye}return{ventasTotales:q,costoMercaderia:ie,gastosPeriodo:pe,gananciaAntes:R,gananciaDespues:G,abonosRecibidos:te,saldosPendientes:le,clientesConSaldo:J.length,prendasCash:ne,prendasCredito:ee}},[a,m,B,_,ie]),W=L.useMemo(()=>{const q={};for(const pe of a){if(pe.type!=="CREDITO"||!pe.customerId)continue;const R=(pe.items||[]).reduce((G,te)=>G+(Number(te.qty)||0),0);q[pe.customerId]=(q[pe.customerId]||0)+R}return _.filter(pe=>(pe.balance||0)>0).map(pe=>({customerId:pe.id,name:pe.name,prendasCredito:q[pe.id]||0,saldo:pe.balance||0})).sort((pe,R)=>R.saldo-pe.saldo)},[_,a]),ae=async q=>{T(!0),Q({id:q.customerId,name:q.name}),S([]),U(!0),ue({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const pe=[];let R=0,G=0,te=0;for(const ee of a)if(!(ee.type!=="CREDITO"||ee.customerId!==q.customerId))for(const oe of ee.items||[]){const ye=Number(oe.qty||0),Te=Number(oe.unitPrice||0),ce=ye*Te,xe=Math.max(0,Number(oe.discount||0)),Ce=Math.max(0,ce-xe);pe.push({saleId:ee.id,date:ee.date,productName:oe.productName,sku:oe.sku||"",qty:ye,unitPrice:Te,lineTotal:ce,discount:xe,lineFinal:Ce}),R+=ce,G+=xe,te+=Ce}let J=0;for(const ee of B)ee.customerId===q.customerId&&(J+=Math.abs(ee.amount||0));const le=_.find(ee=>ee.id===q.customerId),ne=(le==null?void 0:le.balance)||0;S(pe),ue({totalBruto:R,totalDescuento:G,totalFiado:te,saldoActual:ne,abonadoPeriodo:J})}catch(pe){console.error(pe),H(" No se pudo cargar el detalle del cliente.")}finally{U(!1)}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),l.jsx(Xd,{onClick:e,loading:y})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:q=>n(q.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:q=>i(q.target.value)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),l.jsx("div",{className:"text-xl font-semibold",children:jn(z.ventasTotales)}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),l.jsx("div",{className:"text-xl font-semibold",children:jn(z.costoMercaderia)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),l.jsx("div",{className:"text-xl font-semibold text-green-600",children:jn(z.gananciaAntes)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),l.jsx("div",{className:"text-xl font-semibold",children:jn(z.gastosPeriodo)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),l.jsx("div",{className:"text-xl font-semibold text-green-600",children:jn(z.gananciaDespues)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),l.jsx("div",{className:"text-xl font-semibold",children:jn(z.abonosRecibidos)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),l.jsx("div",{className:"text-xl font-semibold",children:jn(z.saldosPendientes)}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),l.jsx("div",{className:"text-xl font-semibold",children:z.clientesConSaldo})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:z.prendasCash})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),l.jsx("div",{className:"text-xl font-semibold",children:z.prendasCredito})]})]}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),l.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):W.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):W.map(q=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:q.name}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ae({customerId:q.customerId,name:q.name}),title:"Ver piezas fiadas del periodo",children:q.prendasCredito})}),l.jsx("td",{className:"p-2 border font-semibold",children:jn(q.saldo)})]},q.customerId))})]})}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):m.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):m.sort((q,pe)=>q.date.localeCompare(pe.date)).map(q=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:q.date}),l.jsx("td",{className:"p-2 border",children:q.category||""}),l.jsx("td",{className:"p-2 border",children:q.description?l.jsx("span",{title:q.description,children:q.description.length>40?q.description.slice(0,40)+"":q.description}):""}),l.jsx("td",{className:"p-2 border",children:jn(q.amount)}),l.jsx("td",{className:"p-2 border",children:q.status||""})]},q.id))})]})}),D&&l.jsx("p",{className:"mt-2 text-sm",children:D}),k&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(E==null?void 0:E.name)||""]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>T(!1),children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:jn(Z.totalBruto)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:jn(Z.totalDescuento)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:jn(Z.totalFiado)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-xl font-semibold",children:jn(Z.saldoActual)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:jn(Z.abonadoPeriodo)})]})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha compra"}),l.jsx("th",{className:"p-2 border",children:"Pieza"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Cant."}),l.jsx("th",{className:"p-2 border",children:"P. Unit"}),l.jsx("th",{className:"p-2 border",children:"Monto"})," ",l.jsx("th",{className:"p-2 border",children:"Descuento"})," ",l.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),l.jsx("tbody",{children:N?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):j.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):j.sort((q,pe)=>q.date.localeCompare(pe.date)).map((q,pe)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:q.date}),l.jsx("td",{className:"p-2 border",children:q.productName}),l.jsx("td",{className:"p-2 border",children:q.sku||""}),l.jsx("td",{className:"p-2 border",children:q.qty}),l.jsx("td",{className:"p-2 border",children:jn(q.unitPrice)}),l.jsx("td",{className:"p-2 border",children:jn(q.lineTotal)}),l.jsx("td",{className:"p-2 border",children:jn(q.discount)}),l.jsx("td",{className:"p-2 border",children:jn(q.lineFinal)})]},`${q.saleId}-${pe}`))})]})})]})})]})}const SI=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],vg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function c$(){const[t,e]=L.useState(Zt(Vp(new Date),"yyyy-MM-dd")),[r,n]=L.useState(Zt(Hp(new Date),"yyyy-MM-dd")),[s,i]=L.useState(Zt(new Date,"yyyy-MM-dd")),[a,o]=L.useState(""),[A,c]=L.useState(""),[d,f]=L.useState(0),[m,g]=L.useState("PENDIENTE"),[B,b]=L.useState(""),[_,w]=L.useState([]),[y,I]=L.useState(!0),[D,H]=L.useState(""),[k,T]=L.useState(null),[E,Q]=L.useState(""),[j,S]=L.useState(""),[N,U]=L.useState(""),[Z,ue]=L.useState(0),[ie,z]=L.useState("PENDIENTE"),[W,ae]=L.useState("");L.useEffect(()=>{(async()=>{I(!0);try{const ee=Yt(dt(Qe,"expenses_clothes"),di("date","desc")),oe=await Lt(ee),ye=[];oe.forEach(Te=>{const ce=Te.data();ye.push({id:Te.id,date:ce.date||Zt(new Date,"yyyy-MM-dd"),category:ce.category||"",description:ce.description||"",amount:Number(ce.amount||0),status:ce.status||"PENDIENTE",notes:ce.notes||"",createdAt:ce.createdAt??Pt.now()})}),w(ye)}catch(ee){console.error(ee),H(" Error al cargar gastos")}finally{I(!1)}})()},[]);const q=L.useMemo(()=>_.filter(ee=>!(t&&ee.date<t||r&&ee.date>r)),[_,t,r]),pe=L.useMemo(()=>{const ee=q.reduce((Te,ce)=>Te+(ce.amount||0),0),oe=q.filter(Te=>Te.status==="PAGADO").reduce((Te,ce)=>Te+(ce.amount||0),0),ye=ee-oe;return{total:ee,pagado:oe,pendiente:ye}},[q]),R=()=>{i(Zt(new Date,"yyyy-MM-dd")),o(""),c(""),f(0),g("PENDIENTE"),b("")},G=async ee=>{if(ee.preventDefault(),H(""),!a){H("Selecciona una categora.");return}if(!A.trim()){H("Ingresa una descripcin.");return}if(!d||d<=0){H("Ingresa un monto vlido.");return}try{const oe=await is(dt(Qe,"expenses_clothes"),{date:s,category:a,description:A.trim(),amount:Number(d.toFixed(2)),status:m,notes:B||"",createdAt:Pt.now()});w(ye=>[{id:oe.id,date:s,category:a,description:A.trim(),amount:Number(d.toFixed(2)),status:m,notes:B||"",createdAt:Pt.now()},...ye]),R(),H(" Gasto registrado")}catch(oe){console.error(oe),H(" Error al guardar gasto")}},te=ee=>{T(ee.id),Q(ee.date),S(ee.category||""),U(ee.description||""),ue(Number(ee.amount||0)),z(ee.status||"PENDIENTE"),ae(ee.notes||"")},J=()=>{T(null),Q(""),S(""),U(""),ue(0),z("PENDIENTE"),ae("")},le=async()=>{if(k){if(!j){H("Selecciona una categora.");return}if(!N.trim()){H("Ingresa una descripcin.");return}if(!Z||Z<=0){H("Ingresa un monto vlido.");return}try{await $r(Tt(Qe,"expenses_clothes",k),{date:E,category:j,description:N.trim(),amount:Number(Z.toFixed(2)),status:ie,notes:W||""}),w(ee=>ee.map(oe=>oe.id===k?{...oe,date:E,category:j,description:N.trim(),amount:Number(Z.toFixed(2)),status:ie,notes:W||""}:oe)),J(),H(" Gasto actualizado")}catch(ee){console.error(ee),H(" Error al actualizar gasto")}}},ne=async ee=>{confirm(`Eliminar el gasto "${ee.description}"?`)&&(await Ts(Tt(Qe,"expenses_clothes",ee.id)),w(ye=>ye.filter(Te=>Te.id!==ee.id)),H(" Gasto borrado"))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:ee=>e(ee.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:ee=>n(ee.target.value)})]}),l.jsxs("div",{className:"ml-auto text-sm",children:[l.jsx("div",{className:"font-semibold",children:"Totales del rango"}),l.jsxs("div",{children:["Total: ",vg(pe.total)]}),l.jsxs("div",{children:["Pagado: ",vg(pe.pagado)]}),l.jsxs("div",{children:["Pendiente: ",vg(pe.pendiente)]})]})]}),l.jsxs("form",{onSubmit:G,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:s,onChange:ee=>i(ee.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:ee=>o(ee.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),SI.map(ee=>l.jsx("option",{value:ee,children:ee},ee))]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:A,onChange:ee=>c(ee.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:ee=>f(Math.max(0,Number(ee.target.value||0))),placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:ee=>g(ee.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:B,onChange:ee=>b(ee.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[B.length,"/500"]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):q.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):q.slice().sort((ee,oe)=>ee.date.localeCompare(oe.date)).map(ee=>{const oe=k===ee.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:oe?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:ye=>Q(ye.target.value)}):ee.date}),l.jsx("td",{className:"p-2 border",children:oe?l.jsxs("select",{className:"w-full border p-1 rounded",value:j,onChange:ye=>S(ye.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),SI.map(ye=>l.jsx("option",{value:ye,children:ye},ye))]}):ee.category||""}),l.jsx("td",{className:"p-2 border",children:oe?l.jsx("input",{className:"w-full border p-1 rounded",value:N,onChange:ye=>U(ye.target.value)}):l.jsx("span",{title:ee.description,children:ee.description.length>40?ee.description.slice(0,40)+"":ee.description})}),l.jsx("td",{className:"p-2 border",children:oe?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Z)?"":Z,onChange:ye=>ue(Math.max(0,Number(ye.target.value||0)))}):vg(ee.amount)}),l.jsx("td",{className:"p-2 border",children:oe?l.jsxs("select",{className:"w-full border p-1 rounded",value:ie,onChange:ye=>z(ye.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ee.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ee.status})}),l.jsx("td",{className:"p-2 border",children:oe?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:W,onChange:ye=>ae(ye.target.value),maxLength:500}):l.jsx("span",{title:ee.notes||"",children:(ee.notes||"").length>40?(ee.notes||"").slice(0,40)+"":ee.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:oe?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:le,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:J,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>te(ee),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ne(ee),children:"Borrar"})]})})})]},ee.id)})})]})}),D&&l.jsx("p",{className:"mt-2 text-sm",children:D})]})}const EA=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function u$(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Zt(t.createdAt.toDate(),"yyyy-MM-dd"):""}function d$(t,e){const r=u$(t);if(!r)return null;const n=t.item||{},s=Number((n==null?void 0:n.qty)??t.quantity??0)||0,i=Number((n==null?void 0:n.total)??t.total??0)||0,a=Number((n==null?void 0:n.unitPrice)??(s>0?i/s:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||s||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:s,unitPrice:a,total:s*a}}}async function h$(t,e){if(e<=0)return;const r=Yt(dt(Qe,"inventory_clothes_batches"),mr("productId","==",t)),n=await Lt(r),s=[];n.forEach(a=>{const o=a.data();s.push({id:a.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),s.sort((a,o)=>a.date.localeCompare(o.date));let i=e;for(const a of s){if(i<=0)break;if(a.remaining<=0)continue;const o=Math.min(a.remaining,i);i-=o,await $r(Tt(Qe,"inventory_clothes_batches",a.id),{remaining:Math.max(0,Number((a.remaining-o).toFixed(0)))})}i>0&&console.warn("consumeFIFO: falt inventario",i)}async function f$(t,e){if(e<=0)return;const r=Yt(dt(Qe,"inventory_clothes_batches"),mr("productId","==",t)),n=await Lt(r),s=[];n.forEach(a=>{const o=a.data();s.push({id:a.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),s.sort((a,o)=>a.date.localeCompare(o.date));let i=e;for(const a of s){if(i<=0)break;const o=Math.max(0,a.quantity-a.remaining);if(o<=0)continue;const A=Math.min(o,i);i-=A,await $r(Tt(Qe,"inventory_clothes_batches",a.id),{remaining:Number((a.remaining+A).toFixed(0))})}i>0&&console.warn("restoreFIFO: no se devolvi todo",i)}async function Q3(t){const e=Yt(dt(Qe,"ar_movements"),mr("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Ts(Tt(Qe,"ar_movements",n.id))))}async function p$(t,e,r){if(await Q3(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:Pt.now(),ref:{saleId:t.id}},{addDoc:s}=await To(async()=>{const{addDoc:a}=await Promise.resolve().then(()=>gH);return{addDoc:a}},void 0);await s(dt(Qe,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const i=Math.max(0,Number(r??t.downPayment??0));i>0&&await s(dt(Qe,"ar_movements"),{...n,type:"ABONO",amount:-i})}function m$(){const[t,e]=L.useState(Zt(new Date,"yyyy-MM-01")),[r,n]=L.useState(Zt(new Date,"yyyy-MM-dd")),[s,i]=L.useState([]),[a,o]=L.useState([]),[A,c]=L.useState(!0),[d,f]=L.useState(""),[m,g]=L.useState(""),[B,b]=L.useState(""),[_,w]=L.useState(null),[y,I]=L.useState(!1),[D,H]=L.useState(null),[k,T]=L.useState(0),E=15,[Q,j]=L.useState(1),S=L.useMemo(()=>{const J={};return s.forEach(le=>J[le.id]=le.name),J},[s]);L.useEffect(()=>{(async()=>{c(!0),f("");try{const J=await Lt(dt(Qe,"customers_clothes")),le=[];J.forEach(oe=>le.push({id:oe.id,name:oe.data().name||""})),i(le);const ne=await Lt(Yt(dt(Qe,"sales_clothes"),di("createdAt","desc"))),ee=[];ne.forEach(oe=>{const ye=d$(oe.data(),oe.id);ye&&ye.date>=t&&ye.date<=r&&ee.push(ye)}),o(ee.sort((oe,ye)=>ye.date.localeCompare(oe.date))),j(1)}catch(J){console.error(J),f(" Error cargando transacciones.")}finally{c(!1)}})()},[t,r]);const N=L.useMemo(()=>a.filter(J=>!(m&&J.customerId!==m||B&&J.type!==B)),[a,m,B]),U=L.useMemo(()=>{let J=0,le=0,ne=0,ee=0;for(const oe of N)oe.type==="CONTADO"?(J+=oe.item.qty,ne+=oe.total):(le+=oe.item.qty,ee+=oe.total);return{piezasCash:J,piezasCredito:le,montoCash:ne,montoCredito:ee}},[N]),Z=Math.max(1,Math.ceil(N.length/E)),ue=L.useMemo(()=>{const J=(Q-1)*E;return N.slice(J,J+E)},[N,Q]),ie=J=>{w(null),H(J),T(J.item.qty||0),I(!0)},z=async J=>{if(w(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{c(!0),await sB(J.id),await Q3(J.id),o(le=>le.filter(ne=>ne.id!==J.id)),f(" Venta eliminada")}catch(le){console.error(le),f(" No se pudo eliminar la venta.")}finally{c(!1)}},W=async()=>{if(!D)return;const J=Number(D.item.qty||0),le=Math.max(1,Math.floor(Number(k)||0));if(le===J){I(!1);return}const ne=Number(D.item.unitPrice||0),ee=Number((ne*le).toFixed(2));try{c(!0);const oe=le-J;oe>0?await h$(D.item.productId,oe):oe<0&&await f$(D.item.productId,-oe);const ye=Tt(Qe,"sales_clothes",D.id);await $r(ye,{quantity:le,total:ee,itemsTotal:ee,"item.qty":le,"item.total":ee,updatedAt:Pt.now()});const Te=Math.min(Number(D.downPayment||0),ee);await p$(D,ee,Te),o(ce=>ce.map(xe=>xe.id===D.id?{...xe,quantity:le,total:ee,item:{...xe.item,qty:le,total:ee},downPayment:Te}:xe)),f(" Venta actualizada"),I(!1)}catch(oe){console.error(oe),f(" No se pudo actualizar la venta.")}finally{c(!1)}},ae=()=>{const J=`Reporte de transacciones (Ropa)  ${t} a ${r}`,le=ye=>(ye||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ne=N.map(ye=>{const Te=ye.customerName||(ye.customerId?S[ye.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${ye.date}</td>
          <td>${le(Te)}</td>
          <td>${ye.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${ye.item.qty}</td>
          <td style="text-align:right">${EA(ye.total)}</td>
        </tr>`}).join(""),ee=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${le(J)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${le(J)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${U.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${U.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${EA(U.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${EA(U.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${ne||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,oe=window.open("","_blank");oe&&(oe.document.open(),oe.document.write(ee),oe.document.close())},q=()=>j(1),pe=()=>j(J=>Math.max(1,J-1)),R=()=>j(J=>Math.min(Z,J+1)),G=()=>j(Z),te=()=>{const J=[];if(Z<=7)for(let ne=1;ne<=Z;ne++)J.push(ne);else{const ne=Math.max(1,Q-2),ee=Math.min(Z,Q+2);J.push(1),ne>2&&J.push(-1);for(let oe=ne;oe<=ee;oe++)oe!==1&&oe!==Z&&J.push(oe);ee<Z-1&&J.push(-2),J.push(Z)}return l.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:q,disabled:Q===1,children:" Primero"}),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:pe,disabled:Q===1,children:" Anterior"}),J.map((ne,ee)=>typeof ne=="number"?l.jsx("button",{className:`px-3 py-1 border rounded ${ne===Q?"bg-blue-600 text-white":""}`,onClick:()=>j(ne),children:ne},ee):l.jsx("span",{className:"px-2",children:""},ee)),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:R,disabled:Q===Z,children:"Siguiente "}),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:G,disabled:Q===Z,children:"ltimo "})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",Q," de ",Z,"  ",N.length," transaccin(es)"]})]})};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:J=>{e(J.target.value),j(1)}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:J=>{n(J.target.value),j(1)}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),l.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:m,onChange:J=>{g(J.target.value),j(1)},children:[l.jsx("option",{value:"",children:"Todos"}),s.map(J=>l.jsx("option",{value:J.id,children:J.name},J.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Tipo"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:B,onChange:J=>{b(J.target.value),j(1)},children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"CONTADO",children:"Cash"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),l.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ae,children:"Exportar PDF"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:U.piezasCash})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),l.jsx("div",{className:"text-xl font-semibold",children:U.piezasCredito})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:EA(U.montoCash)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),l.jsx("div",{className:"text-xl font-semibold",children:EA(U.montoCredito)})]})]}),l.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Piezas"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:A?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):ue.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):ue.map(J=>{const le=J.customerName||(J.customerId?S[J.customerId]:"")||"Nombre cliente";return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:J.date}),l.jsx("td",{className:"p-2 border",children:le}),l.jsx("td",{className:"p-2 border",children:J.type==="CREDITO"?"Crdito":"Cash"}),l.jsx("td",{className:"p-2 border",children:J.item.qty}),l.jsx("td",{className:"p-2 border",children:EA(J.total)}),l.jsxs("td",{className:"p-2 border relative",children:[l.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>w(ne=>ne===J.id?null:J.id),title:"Acciones",children:""}),_===J.id&&l.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[l.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>ie(J),children:"Editar"}),l.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>z(J),children:"Eliminar"})]})]})]},J.id)})})]}),te()]}),d&&l.jsx("p",{className:"mt-2 text-sm",children:d}),y&&D&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),l.jsxs("div",{className:"font-semibold",children:[D.item.productName," ",D.item.sku?` ${D.item.sku}`:""]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),l.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:k,onChange:J=>T(Math.max(1,Math.floor(Number(J.target.value||0))))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),l.jsx("div",{className:"text-lg font-semibold",children:EA(D.item.unitPrice)})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),l.jsx("div",{className:"text-lg font-semibold",children:EA(Number(D.item.unitPrice)*Number(k||0))})]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{I(!1),H(null)},children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:W,children:"Guardar cambios"})]})]})})]})}function g$(){const[t,e]=L.useState(null),[r,n]=L.useState(""),[s,i]=L.useState(!0);return L.useEffect(()=>{const a=jF(Yw,async o=>{if(i(!0),o){e(o);const A=Tt(Qe,"users",o.uid),c=await Nl(A);n(c.exists()?c.data().role:"")}else e(null),n("");i(!1)});return()=>a()},[]),s?l.jsx("div",{className:"p-6 text-center",children:"Cargando..."}):l.jsx(sR,{children:l.jsxs(Lk,{children:[l.jsx(Rr,{path:"/",element:l.jsx(vH,{})}),l.jsxs(Rr,{path:"/admin",element:l.jsx(hn,{allowedRoles:["admin","vendedor"],children:l.jsx(yH,{role:r})}),children:[l.jsx(Rr,{index:!0,element:l.jsx(K1,{to:"bills",replace:!0})}),l.jsx(Rr,{path:"bills",element:l.jsx(hn,{allowedRoles:["vendedor","admin"],children:l.jsx(hW,{})})}),l.jsx(Rr,{path:"fix",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(LW,{})})}),l.jsx(Rr,{path:"salesV2",element:l.jsx(hn,{allowedRoles:["vendedor","admin"],children:l.jsx(CI,{user:t})})}),l.jsx(Rr,{path:"billhistoric",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(fW,{})})}),l.jsx(Rr,{path:"users",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(pW,{})})}),l.jsx(Rr,{path:"products",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(gW,{})})}),l.jsx(Rr,{path:"batches",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(_W,{})})}),l.jsx(Rr,{path:"transactionclose",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(IW,{})})}),l.jsx(Rr,{path:"financialDashboard",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(FW,{})})}),l.jsx(Rr,{path:"TransactionsReportClothes",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(m$,{})})}),l.jsx(Rr,{path:"expenses",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(UW,{})})}),l.jsx(Rr,{path:"billing",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(kW,{})})}),l.jsx(Rr,{path:"paidBatches",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(OW,{})})}),l.jsx(Rr,{path:"inventoryClothesBatches",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(KW,{})})}),l.jsx(Rr,{path:"productsClothes",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(t$,{})})}),l.jsx(Rr,{path:"CustomersClothes",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(n$,{})})}),l.jsx(Rr,{path:"salesClothes",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(a$,{})})}),l.jsx(Rr,{path:"financialDashboardClothes",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(l$,{})})}),l.jsx(Rr,{path:"ExpensesClothes",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(c$,{})})})]}),l.jsx(Rr,{path:"/salesV2",element:l.jsx(hn,{allowedRoles:["vendedor","admin"],children:l.jsx(CI,{user:t})})}),l.jsx(Rr,{path:"*",element:l.jsx(K1,{to:"/"})})]})})}Xy.createRoot(document.getElementById("root")).render(l.jsx(Co.StrictMode,{children:l.jsx(g$,{})}));export{xr as _,w$ as c,gQ as g};
