var Pde=Object.defineProperty;var Bde=(t,e,r)=>e in t?Pde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var vr=(t,e,r)=>Bde(t,typeof e!="symbol"?e+"":e,r);function Tde(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Ait=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kz={exports:{}},VI={},qz={exports:{}},Jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw=Symbol.for("react.element"),kde=Symbol.for("react.portal"),Fde=Symbol.for("react.fragment"),Ode=Symbol.for("react.strict_mode"),Dde=Symbol.for("react.profiler"),Rde=Symbol.for("react.provider"),Mde=Symbol.for("react.context"),Lde=Symbol.for("react.forward_ref"),Ude=Symbol.for("react.suspense"),Qde=Symbol.for("react.memo"),Vde=Symbol.for("react.lazy"),fL=Symbol.iterator;function Hde(t){return t===null||typeof t!="object"?null:(t=fL&&t[fL]||t["@@iterator"],typeof t=="function"?t:null)}var zz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wz=Object.assign,Xz={};function zv(t,e,r){this.props=t,this.context=e,this.refs=Xz,this.updater=r||zz}zv.prototype.isReactComponent={};zv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yz(){}Yz.prototype=zv.prototype;function cO(t,e,r){this.props=t,this.context=e,this.refs=Xz,this.updater=r||zz}var uO=cO.prototype=new Yz;uO.constructor=cO;Wz(uO,zv.prototype);uO.isPureReactComponent=!0;var hL=Array.isArray,Jz=Object.prototype.hasOwnProperty,dO={current:null},Zz={key:!0,ref:!0,__self:!0,__source:!0};function eW(t,e,r){var n,a={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Jz.call(e,n)&&!Zz.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:aw,type:t,key:s,ref:o,props:a,_owner:dO.current}}function $de(t,e){return{$$typeof:aw,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fO(t){return typeof t=="object"&&t!==null&&t.$$typeof===aw}function Gde(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var AL=/\/+/g;function k4(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gde(""+t.key):e.toString(36)}function j_(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case aw:case kde:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+k4(o,0):n,hL(a)?(r="",t!=null&&(r=t.replace(AL,"$&/")+"/"),j_(a,e,r,"",function(u){return u})):a!=null&&(fO(a)&&(a=$de(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(AL,"$&/")+"/")+t)),e.push(a)),1;if(o=0,n=n===""?".":n+":",hL(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+k4(s,l);o+=j_(s,e,r,c,a)}else if(c=Hde(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+k4(s,l++),o+=j_(s,e,r,c,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function jN(t,e,r){if(t==null)return t;var n=[],a=0;return j_(t,n,"","",function(s){return e.call(r,s,a++)}),n}function Kde(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pc={current:null},P_={transition:null},qde={ReactCurrentDispatcher:pc,ReactCurrentBatchConfig:P_,ReactCurrentOwner:dO};function tW(){throw Error("act(...) is not supported in production builds of React.")}Jn.Children={map:jN,forEach:function(t,e,r){jN(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return jN(t,function(){e++}),e},toArray:function(t){return jN(t,function(e){return e})||[]},only:function(t){if(!fO(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Jn.Component=zv;Jn.Fragment=Fde;Jn.Profiler=Dde;Jn.PureComponent=cO;Jn.StrictMode=Ode;Jn.Suspense=Ude;Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qde;Jn.act=tW;Jn.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Wz({},t.props),a=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=dO.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Jz.call(e,c)&&!Zz.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:aw,type:t.type,key:a,ref:s,props:n,_owner:o}};Jn.createContext=function(t){return t={$$typeof:Mde,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rde,_context:t},t.Consumer=t};Jn.createElement=eW;Jn.createFactory=function(t){var e=eW.bind(null,t);return e.type=t,e};Jn.createRef=function(){return{current:null}};Jn.forwardRef=function(t){return{$$typeof:Lde,render:t}};Jn.isValidElement=fO;Jn.lazy=function(t){return{$$typeof:Vde,_payload:{_status:-1,_result:t},_init:Kde}};Jn.memo=function(t,e){return{$$typeof:Qde,type:t,compare:e===void 0?null:e}};Jn.startTransition=function(t){var e=P_.transition;P_.transition={};try{t()}finally{P_.transition=e}};Jn.unstable_act=tW;Jn.useCallback=function(t,e){return pc.current.useCallback(t,e)};Jn.useContext=function(t){return pc.current.useContext(t)};Jn.useDebugValue=function(){};Jn.useDeferredValue=function(t){return pc.current.useDeferredValue(t)};Jn.useEffect=function(t,e){return pc.current.useEffect(t,e)};Jn.useId=function(){return pc.current.useId()};Jn.useImperativeHandle=function(t,e,r){return pc.current.useImperativeHandle(t,e,r)};Jn.useInsertionEffect=function(t,e){return pc.current.useInsertionEffect(t,e)};Jn.useLayoutEffect=function(t,e){return pc.current.useLayoutEffect(t,e)};Jn.useMemo=function(t,e){return pc.current.useMemo(t,e)};Jn.useReducer=function(t,e,r){return pc.current.useReducer(t,e,r)};Jn.useRef=function(t){return pc.current.useRef(t)};Jn.useState=function(t){return pc.current.useState(t)};Jn.useSyncExternalStore=function(t,e,r){return pc.current.useSyncExternalStore(t,e,r)};Jn.useTransition=function(){return pc.current.useTransition()};Jn.version="18.3.1";qz.exports=Jn;var x=qz.exports;const Ro=pA(x),zde=Tde({__proto__:null,default:Ro},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wde=x,Xde=Symbol.for("react.element"),Yde=Symbol.for("react.fragment"),Jde=Object.prototype.hasOwnProperty,Zde=Wde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,efe={key:!0,ref:!0,__self:!0,__source:!0};function rW(t,e,r){var n,a={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Jde.call(e,n)&&!efe.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Xde,type:t,key:s,ref:o,props:a,_owner:Zde.current}}VI.Fragment=Yde;VI.jsx=rW;VI.jsxs=rW;Kz.exports=VI;var i=Kz.exports,_B={},nW={exports:{}},_u={},aW={exports:{}},sW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ge,se){var je=ge.length;ge.push(se);e:for(;0<je;){var Te=je-1>>>1,D=ge[Te];if(0<a(D,se))ge[Te]=se,ge[je]=D,je=Te;else break e}}function r(ge){return ge.length===0?null:ge[0]}function n(ge){if(ge.length===0)return null;var se=ge[0],je=ge.pop();if(je!==se){ge[0]=je;e:for(var Te=0,D=ge.length,K=D>>>1;Te<K;){var z=2*(Te+1)-1,Q=ge[z],J=z+1,ee=ge[J];if(0>a(Q,je))J<D&&0>a(ee,Q)?(ge[Te]=ee,ge[J]=je,Te=J):(ge[Te]=Q,ge[z]=je,Te=z);else if(J<D&&0>a(ee,je))ge[Te]=ee,ge[J]=je,Te=J;else break e}}return se}function a(ge,se){var je=ge.sortIndex-se.sortIndex;return je!==0?je:ge.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,A=3,h=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ge){for(var se=r(u);se!==null;){if(se.callback===null)n(u);else if(se.startTime<=ge)n(u),se.sortIndex=se.expirationTime,e(c,se);else break;se=r(u)}}function w(ge){if(p=!1,b(ge),!m)if(r(c)!==null)m=!0,pe(P);else{var se=r(u);se!==null&&he(w,se.startTime-ge)}}function P(ge,se){m=!1,p&&(p=!1,v(I),I=-1),h=!0;var je=A;try{for(b(se),f=r(c);f!==null&&(!(f.expirationTime>se)||ge&&!k());){var Te=f.callback;if(typeof Te=="function"){f.callback=null,A=f.priorityLevel;var D=Te(f.expirationTime<=se);se=t.unstable_now(),typeof D=="function"?f.callback=D:f===r(c)&&n(c),b(se)}else n(c);f=r(c)}if(f!==null)var K=!0;else{var z=r(u);z!==null&&he(w,z.startTime-se),K=!1}return K}finally{f=null,A=je,h=!1}}var j=!1,_=null,I=-1,E=5,F=-1;function k(){return!(t.unstable_now()-F<E)}function B(){if(_!==null){var ge=t.unstable_now();F=ge;var se=!0;try{se=_(!0,ge)}finally{se?R():(j=!1,_=null)}}else j=!1}var R;if(typeof y=="function")R=function(){y(B)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,me=Y.port2;Y.port1.onmessage=B,R=function(){me.postMessage(null)}}else R=function(){g(B,0)};function pe(ge){_=ge,j||(j=!0,R())}function he(ge,se){I=g(function(){ge(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ge){ge.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,pe(P))},t.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<ge?Math.floor(1e3/ge):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(ge){switch(A){case 1:case 2:case 3:var se=3;break;default:se=A}var je=A;A=se;try{return ge()}finally{A=je}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ge,se){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var je=A;A=ge;try{return se()}finally{A=je}},t.unstable_scheduleCallback=function(ge,se,je){var Te=t.unstable_now();switch(typeof je=="object"&&je!==null?(je=je.delay,je=typeof je=="number"&&0<je?Te+je:Te):je=Te,ge){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=je+D,ge={id:d++,callback:se,priorityLevel:ge,startTime:je,expirationTime:D,sortIndex:-1},je>Te?(ge.sortIndex=je,e(u,ge),r(c)===null&&ge===r(u)&&(p?(v(I),I=-1):p=!0,he(w,je-Te))):(ge.sortIndex=D,e(c,ge),m||h||(m=!0,pe(P))),ge},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(ge){var se=A;return function(){var je=A;A=se;try{return ge.apply(this,arguments)}finally{A=je}}}})(sW);aW.exports=sW;var tfe=aW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rfe=x,yu=tfe;function Cr(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iW=new Set,Rb={};function yg(t,e){gv(t,e),gv(t+"Capture",e)}function gv(t,e){for(Rb[t]=e,t=0;t<e.length;t++)iW.add(e[t])}var Jh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),EB=Object.prototype.hasOwnProperty,nfe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mL={},pL={};function afe(t){return EB.call(pL,t)?!0:EB.call(mL,t)?!1:nfe.test(t)?pL[t]=!0:(mL[t]=!0,!1)}function sfe(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ife(t,e,r,n){if(e===null||typeof e>"u"||sfe(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gc(t,e,r,n,a,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var gl={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gl[t]=new gc(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gl[e]=new gc(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gl[t]=new gc(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gl[t]=new gc(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gl[t]=new gc(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gl[t]=new gc(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gl[t]=new gc(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gl[t]=new gc(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gl[t]=new gc(t,5,!1,t.toLowerCase(),null,!1,!1)});var hO=/[\-:]([a-z])/g;function AO(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hO,AO);gl[e]=new gc(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hO,AO);gl[e]=new gc(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hO,AO);gl[e]=new gc(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gl[t]=new gc(t,1,!1,t.toLowerCase(),null,!1,!1)});gl.xlinkHref=new gc("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gl[t]=new gc(t,1,!1,t.toLowerCase(),null,!0,!0)});function mO(t,e,r,n){var a=gl.hasOwnProperty(e)?gl[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ife(e,r,a,n)&&(r=null),n||a===null?afe(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var gA=rfe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,PN=Symbol.for("react.element"),Bx=Symbol.for("react.portal"),Tx=Symbol.for("react.fragment"),pO=Symbol.for("react.strict_mode"),SB=Symbol.for("react.profiler"),oW=Symbol.for("react.provider"),lW=Symbol.for("react.context"),gO=Symbol.for("react.forward_ref"),IB=Symbol.for("react.suspense"),jB=Symbol.for("react.suspense_list"),xO=Symbol.for("react.memo"),A0=Symbol.for("react.lazy"),cW=Symbol.for("react.offscreen"),gL=Symbol.iterator;function V1(t){return t===null||typeof t!="object"?null:(t=gL&&t[gL]||t["@@iterator"],typeof t=="function"?t:null)}var ti=Object.assign,F4;function Ey(t){if(F4===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);F4=e&&e[1]||""}return`
`+F4+t}var O4=!1;function D4(t,e){if(!t||O4)return"";O4=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{O4=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ey(t):""}function ofe(t){switch(t.tag){case 5:return Ey(t.type);case 16:return Ey("Lazy");case 13:return Ey("Suspense");case 19:return Ey("SuspenseList");case 0:case 2:case 15:return t=D4(t.type,!1),t;case 11:return t=D4(t.type.render,!1),t;case 1:return t=D4(t.type,!0),t;default:return""}}function PB(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Tx:return"Fragment";case Bx:return"Portal";case SB:return"Profiler";case pO:return"StrictMode";case IB:return"Suspense";case jB:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lW:return(t.displayName||"Context")+".Consumer";case oW:return(t._context.displayName||"Context")+".Provider";case gO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xO:return e=t.displayName||null,e!==null?e:PB(t.type)||"Memo";case A0:e=t._payload,t=t._init;try{return PB(t(e))}catch{}}return null}function lfe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return PB(e);case 8:return e===pO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sm(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uW(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cfe(t){var e=uW(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function BN(t){t._valueTracker||(t._valueTracker=cfe(t))}function dW(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=uW(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function xE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function BB(t,e){var r=e.checked;return ti({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function xL(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=sm(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fW(t,e){e=e.checked,e!=null&&mO(t,"checked",e,!1)}function TB(t,e){fW(t,e);var r=sm(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kB(t,e.type,r):e.hasOwnProperty("defaultValue")&&kB(t,e.type,sm(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vL(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function kB(t,e,r){(e!=="number"||xE(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Sy=Array.isArray;function Zx(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+sm(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function FB(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Cr(91));return ti({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yL(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Cr(92));if(Sy(r)){if(1<r.length)throw Error(Cr(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:sm(r)}}function hW(t,e){var r=sm(e.value),n=sm(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function bL(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function AW(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function OB(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?AW(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var TN,mW=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(TN=TN||document.createElement("div"),TN.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=TN.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Mb(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Jy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ufe=["Webkit","ms","Moz","O"];Object.keys(Jy).forEach(function(t){ufe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jy[e]=Jy[t]})});function pW(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Jy.hasOwnProperty(t)&&Jy[t]?(""+e).trim():e+"px"}function gW(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=pW(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var dfe=ti({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function DB(t,e){if(e){if(dfe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Cr(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Cr(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Cr(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Cr(62))}}function RB(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var MB=null;function vO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var LB=null,ev=null,tv=null;function wL(t){if(t=ow(t)){if(typeof LB!="function")throw Error(Cr(280));var e=t.stateNode;e&&(e=qI(e),LB(t.stateNode,t.type,e))}}function xW(t){ev?tv?tv.push(t):tv=[t]:ev=t}function vW(){if(ev){var t=ev,e=tv;if(tv=ev=null,wL(t),e)for(t=0;t<e.length;t++)wL(e[t])}}function yW(t,e){return t(e)}function bW(){}var R4=!1;function wW(t,e,r){if(R4)return t(e,r);R4=!0;try{return yW(t,e,r)}finally{R4=!1,(ev!==null||tv!==null)&&(bW(),vW())}}function Lb(t,e){var r=t.stateNode;if(r===null)return null;var n=qI(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Cr(231,e,typeof r));return r}var UB=!1;if(Jh)try{var H1={};Object.defineProperty(H1,"passive",{get:function(){UB=!0}}),window.addEventListener("test",H1,H1),window.removeEventListener("test",H1,H1)}catch{UB=!1}function ffe(t,e,r,n,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Zy=!1,vE=null,yE=!1,QB=null,hfe={onError:function(t){Zy=!0,vE=t}};function Afe(t,e,r,n,a,s,o,l,c){Zy=!1,vE=null,ffe.apply(hfe,arguments)}function mfe(t,e,r,n,a,s,o,l,c){if(Afe.apply(this,arguments),Zy){if(Zy){var u=vE;Zy=!1,vE=null}else throw Error(Cr(198));yE||(yE=!0,QB=u)}}function bg(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function NW(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function NL(t){if(bg(t)!==t)throw Error(Cr(188))}function pfe(t){var e=t.alternate;if(!e){if(e=bg(t),e===null)throw Error(Cr(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return NL(a),t;if(s===n)return NL(a),e;s=s.sibling}throw Error(Cr(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(Cr(189))}}if(r.alternate!==n)throw Error(Cr(190))}if(r.tag!==3)throw Error(Cr(188));return r.stateNode.current===r?t:e}function CW(t){return t=pfe(t),t!==null?_W(t):null}function _W(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_W(t);if(e!==null)return e;t=t.sibling}return null}var EW=yu.unstable_scheduleCallback,CL=yu.unstable_cancelCallback,gfe=yu.unstable_shouldYield,xfe=yu.unstable_requestPaint,ji=yu.unstable_now,vfe=yu.unstable_getCurrentPriorityLevel,yO=yu.unstable_ImmediatePriority,SW=yu.unstable_UserBlockingPriority,bE=yu.unstable_NormalPriority,yfe=yu.unstable_LowPriority,IW=yu.unstable_IdlePriority,HI=null,Qf=null;function bfe(t){if(Qf&&typeof Qf.onCommitFiberRoot=="function")try{Qf.onCommitFiberRoot(HI,t,void 0,(t.current.flags&128)===128)}catch{}}var Xd=Math.clz32?Math.clz32:Cfe,wfe=Math.log,Nfe=Math.LN2;function Cfe(t){return t>>>=0,t===0?32:31-(wfe(t)/Nfe|0)|0}var kN=64,FN=4194304;function Iy(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wE(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Iy(l):(s&=o,s!==0&&(n=Iy(s)))}else o=r&~a,o!==0?n=Iy(o):s!==0&&(n=Iy(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Xd(e),a=1<<r,n|=t[r],e&=~a;return n}function _fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Efe(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Xd(s),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=_fe(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function VB(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jW(){var t=kN;return kN<<=1,!(kN&4194240)&&(kN=64),t}function M4(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function sw(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xd(e),t[e]=r}function Sfe(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Xd(r),s=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~s}}function bO(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Xd(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var $a=0;function PW(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var BW,wO,TW,kW,FW,HB=!1,ON=[],Q0=null,V0=null,H0=null,Ub=new Map,Qb=new Map,y0=[],Ife="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _L(t,e){switch(t){case"focusin":case"focusout":Q0=null;break;case"dragenter":case"dragleave":V0=null;break;case"mouseover":case"mouseout":H0=null;break;case"pointerover":case"pointerout":Ub.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qb.delete(e.pointerId)}}function $1(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=ow(e),e!==null&&wO(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function jfe(t,e,r,n,a){switch(e){case"focusin":return Q0=$1(Q0,t,e,r,n,a),!0;case"dragenter":return V0=$1(V0,t,e,r,n,a),!0;case"mouseover":return H0=$1(H0,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return Ub.set(s,$1(Ub.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Qb.set(s,$1(Qb.get(s)||null,t,e,r,n,a)),!0}return!1}function OW(t){var e=hp(t.target);if(e!==null){var r=bg(e);if(r!==null){if(e=r.tag,e===13){if(e=NW(r),e!==null){t.blockedOn=e,FW(t.priority,function(){TW(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function B_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=$B(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);MB=n,r.target.dispatchEvent(n),MB=null}else return e=ow(r),e!==null&&wO(e),t.blockedOn=r,!1;e.shift()}return!0}function EL(t,e,r){B_(t)&&r.delete(e)}function Pfe(){HB=!1,Q0!==null&&B_(Q0)&&(Q0=null),V0!==null&&B_(V0)&&(V0=null),H0!==null&&B_(H0)&&(H0=null),Ub.forEach(EL),Qb.forEach(EL)}function G1(t,e){t.blockedOn===e&&(t.blockedOn=null,HB||(HB=!0,yu.unstable_scheduleCallback(yu.unstable_NormalPriority,Pfe)))}function Vb(t){function e(a){return G1(a,t)}if(0<ON.length){G1(ON[0],t);for(var r=1;r<ON.length;r++){var n=ON[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Q0!==null&&G1(Q0,t),V0!==null&&G1(V0,t),H0!==null&&G1(H0,t),Ub.forEach(e),Qb.forEach(e),r=0;r<y0.length;r++)n=y0[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<y0.length&&(r=y0[0],r.blockedOn===null);)OW(r),r.blockedOn===null&&y0.shift()}var rv=gA.ReactCurrentBatchConfig,NE=!0;function Bfe(t,e,r,n){var a=$a,s=rv.transition;rv.transition=null;try{$a=1,NO(t,e,r,n)}finally{$a=a,rv.transition=s}}function Tfe(t,e,r,n){var a=$a,s=rv.transition;rv.transition=null;try{$a=4,NO(t,e,r,n)}finally{$a=a,rv.transition=s}}function NO(t,e,r,n){if(NE){var a=$B(t,e,r,n);if(a===null)z4(t,e,n,CE,r),_L(t,n);else if(jfe(a,t,e,r,n))n.stopPropagation();else if(_L(t,n),e&4&&-1<Ife.indexOf(t)){for(;a!==null;){var s=ow(a);if(s!==null&&BW(s),s=$B(t,e,r,n),s===null&&z4(t,e,n,CE,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else z4(t,e,n,null,r)}}var CE=null;function $B(t,e,r,n){if(CE=null,t=vO(n),t=hp(t),t!==null)if(e=bg(t),e===null)t=null;else if(r=e.tag,r===13){if(t=NW(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return CE=t,null}function DW(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vfe()){case yO:return 1;case SW:return 4;case bE:case yfe:return 16;case IW:return 536870912;default:return 16}default:return 16}}var B0=null,CO=null,T_=null;function RW(){if(T_)return T_;var t,e=CO,r=e.length,n,a="value"in B0?B0.value:B0.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===a[s-n];n++);return T_=a.slice(t,1<n?1-n:void 0)}function k_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function DN(){return!0}function SL(){return!1}function Eu(t){function e(r,n,a,s,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?DN:SL,this.isPropagationStopped=SL,this}return ti(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=DN)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=DN)},persist:function(){},isPersistent:DN}),e}var Wv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_O=Eu(Wv),iw=ti({},Wv,{view:0,detail:0}),kfe=Eu(iw),L4,U4,K1,$I=ti({},iw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:EO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==K1&&(K1&&t.type==="mousemove"?(L4=t.screenX-K1.screenX,U4=t.screenY-K1.screenY):U4=L4=0,K1=t),L4)},movementY:function(t){return"movementY"in t?t.movementY:U4}}),IL=Eu($I),Ffe=ti({},$I,{dataTransfer:0}),Ofe=Eu(Ffe),Dfe=ti({},iw,{relatedTarget:0}),Q4=Eu(Dfe),Rfe=ti({},Wv,{animationName:0,elapsedTime:0,pseudoElement:0}),Mfe=Eu(Rfe),Lfe=ti({},Wv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ufe=Eu(Lfe),Qfe=ti({},Wv,{data:0}),jL=Eu(Qfe),Vfe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hfe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$fe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gfe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$fe[t])?!!e[t]:!1}function EO(){return Gfe}var Kfe=ti({},iw,{key:function(t){if(t.key){var e=Vfe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=k_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hfe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:EO,charCode:function(t){return t.type==="keypress"?k_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?k_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qfe=Eu(Kfe),zfe=ti({},$I,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),PL=Eu(zfe),Wfe=ti({},iw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:EO}),Xfe=Eu(Wfe),Yfe=ti({},Wv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jfe=Eu(Yfe),Zfe=ti({},$I,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ehe=Eu(Zfe),the=[9,13,27,32],SO=Jh&&"CompositionEvent"in window,eb=null;Jh&&"documentMode"in document&&(eb=document.documentMode);var rhe=Jh&&"TextEvent"in window&&!eb,MW=Jh&&(!SO||eb&&8<eb&&11>=eb),BL=" ",TL=!1;function LW(t,e){switch(t){case"keyup":return the.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UW(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kx=!1;function nhe(t,e){switch(t){case"compositionend":return UW(e);case"keypress":return e.which!==32?null:(TL=!0,BL);case"textInput":return t=e.data,t===BL&&TL?null:t;default:return null}}function ahe(t,e){if(kx)return t==="compositionend"||!SO&&LW(t,e)?(t=RW(),T_=CO=B0=null,kx=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MW&&e.locale!=="ko"?null:e.data;default:return null}}var she={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!she[t.type]:e==="textarea"}function QW(t,e,r,n){xW(n),e=_E(e,"onChange"),0<e.length&&(r=new _O("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var tb=null,Hb=null;function ihe(t){JW(t,0)}function GI(t){var e=Dx(t);if(dW(e))return t}function ohe(t,e){if(t==="change")return e}var VW=!1;if(Jh){var V4;if(Jh){var H4="oninput"in document;if(!H4){var FL=document.createElement("div");FL.setAttribute("oninput","return;"),H4=typeof FL.oninput=="function"}V4=H4}else V4=!1;VW=V4&&(!document.documentMode||9<document.documentMode)}function OL(){tb&&(tb.detachEvent("onpropertychange",HW),Hb=tb=null)}function HW(t){if(t.propertyName==="value"&&GI(Hb)){var e=[];QW(e,Hb,t,vO(t)),wW(ihe,e)}}function lhe(t,e,r){t==="focusin"?(OL(),tb=e,Hb=r,tb.attachEvent("onpropertychange",HW)):t==="focusout"&&OL()}function che(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return GI(Hb)}function uhe(t,e){if(t==="click")return GI(e)}function dhe(t,e){if(t==="input"||t==="change")return GI(e)}function fhe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var af=typeof Object.is=="function"?Object.is:fhe;function $b(t,e){if(af(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!EB.call(e,a)||!af(t[a],e[a]))return!1}return!0}function DL(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function RL(t,e){var r=DL(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=DL(r)}}function $W(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$W(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GW(){for(var t=window,e=xE();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=xE(t.document)}return e}function IO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hhe(t){var e=GW(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&$W(r.ownerDocument.documentElement,r)){if(n!==null&&IO(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!t.extend&&s>n&&(a=n,n=s,s=a),a=RL(r,s);var o=RL(r,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ahe=Jh&&"documentMode"in document&&11>=document.documentMode,Fx=null,GB=null,rb=null,KB=!1;function ML(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;KB||Fx==null||Fx!==xE(n)||(n=Fx,"selectionStart"in n&&IO(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),rb&&$b(rb,n)||(rb=n,n=_E(GB,"onSelect"),0<n.length&&(e=new _O("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Fx)))}function RN(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ox={animationend:RN("Animation","AnimationEnd"),animationiteration:RN("Animation","AnimationIteration"),animationstart:RN("Animation","AnimationStart"),transitionend:RN("Transition","TransitionEnd")},$4={},KW={};Jh&&(KW=document.createElement("div").style,"AnimationEvent"in window||(delete Ox.animationend.animation,delete Ox.animationiteration.animation,delete Ox.animationstart.animation),"TransitionEvent"in window||delete Ox.transitionend.transition);function KI(t){if($4[t])return $4[t];if(!Ox[t])return t;var e=Ox[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in KW)return $4[t]=e[r];return t}var qW=KI("animationend"),zW=KI("animationiteration"),WW=KI("animationstart"),XW=KI("transitionend"),YW=new Map,LL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nm(t,e){YW.set(t,e),yg(e,[t])}for(var G4=0;G4<LL.length;G4++){var K4=LL[G4],mhe=K4.toLowerCase(),phe=K4[0].toUpperCase()+K4.slice(1);Nm(mhe,"on"+phe)}Nm(qW,"onAnimationEnd");Nm(zW,"onAnimationIteration");Nm(WW,"onAnimationStart");Nm("dblclick","onDoubleClick");Nm("focusin","onFocus");Nm("focusout","onBlur");Nm(XW,"onTransitionEnd");gv("onMouseEnter",["mouseout","mouseover"]);gv("onMouseLeave",["mouseout","mouseover"]);gv("onPointerEnter",["pointerout","pointerover"]);gv("onPointerLeave",["pointerout","pointerover"]);yg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yg("onBeforeInput",["compositionend","keypress","textInput","paste"]);yg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ghe=new Set("cancel close invalid load scroll toggle".split(" ").concat(jy));function UL(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,mfe(n,e,void 0,t),t.currentTarget=null}function JW(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;UL(a,l,u),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;UL(a,l,u),s=c}}}if(yE)throw t=QB,yE=!1,QB=null,t}function ms(t,e){var r=e[YB];r===void 0&&(r=e[YB]=new Set);var n=t+"__bubble";r.has(n)||(ZW(e,t,2,!1),r.add(n))}function q4(t,e,r){var n=0;e&&(n|=4),ZW(r,t,n,e)}var MN="_reactListening"+Math.random().toString(36).slice(2);function Gb(t){if(!t[MN]){t[MN]=!0,iW.forEach(function(r){r!=="selectionchange"&&(ghe.has(r)||q4(r,!1,t),q4(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[MN]||(e[MN]=!0,q4("selectionchange",!1,e))}}function ZW(t,e,r,n){switch(DW(e)){case 1:var a=Bfe;break;case 4:a=Tfe;break;default:a=NO}r=a.bind(null,e,r,t),a=void 0,!UB||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function z4(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=hp(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}wW(function(){var u=s,d=vO(r),f=[];e:{var A=YW.get(t);if(A!==void 0){var h=_O,m=t;switch(t){case"keypress":if(k_(r)===0)break e;case"keydown":case"keyup":h=qfe;break;case"focusin":m="focus",h=Q4;break;case"focusout":m="blur",h=Q4;break;case"beforeblur":case"afterblur":h=Q4;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=IL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Ofe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Xfe;break;case qW:case zW:case WW:h=Mfe;break;case XW:h=Jfe;break;case"scroll":h=kfe;break;case"wheel":h=ehe;break;case"copy":case"cut":case"paste":h=Ufe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=PL}var p=(e&4)!==0,g=!p&&t==="scroll",v=p?A!==null?A+"Capture":null:A;p=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,v!==null&&(w=Lb(y,v),w!=null&&p.push(Kb(y,w,b)))),g)break;y=y.return}0<p.length&&(A=new h(A,m,null,r,d),f.push({event:A,listeners:p}))}}if(!(e&7)){e:{if(A=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",A&&r!==MB&&(m=r.relatedTarget||r.fromElement)&&(hp(m)||m[Zh]))break e;if((h||A)&&(A=d.window===d?d:(A=d.ownerDocument)?A.defaultView||A.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=u,m=m?hp(m):null,m!==null&&(g=bg(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(p=IL,w="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=PL,w="onPointerLeave",v="onPointerEnter",y="pointer"),g=h==null?A:Dx(h),b=m==null?A:Dx(m),A=new p(w,y+"leave",h,r,d),A.target=g,A.relatedTarget=b,w=null,hp(d)===u&&(p=new p(v,y+"enter",m,r,d),p.target=b,p.relatedTarget=g,w=p),g=w,h&&m)t:{for(p=h,v=m,y=0,b=p;b;b=Kg(b))y++;for(b=0,w=v;w;w=Kg(w))b++;for(;0<y-b;)p=Kg(p),y--;for(;0<b-y;)v=Kg(v),b--;for(;y--;){if(p===v||v!==null&&p===v.alternate)break t;p=Kg(p),v=Kg(v)}p=null}else p=null;h!==null&&QL(f,A,h,p,!1),m!==null&&g!==null&&QL(f,g,m,p,!0)}}e:{if(A=u?Dx(u):window,h=A.nodeName&&A.nodeName.toLowerCase(),h==="select"||h==="input"&&A.type==="file")var P=ohe;else if(kL(A))if(VW)P=dhe;else{P=che;var j=lhe}else(h=A.nodeName)&&h.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(P=uhe);if(P&&(P=P(t,u))){QW(f,P,r,d);break e}j&&j(t,A,u),t==="focusout"&&(j=A._wrapperState)&&j.controlled&&A.type==="number"&&kB(A,"number",A.value)}switch(j=u?Dx(u):window,t){case"focusin":(kL(j)||j.contentEditable==="true")&&(Fx=j,GB=u,rb=null);break;case"focusout":rb=GB=Fx=null;break;case"mousedown":KB=!0;break;case"contextmenu":case"mouseup":case"dragend":KB=!1,ML(f,r,d);break;case"selectionchange":if(Ahe)break;case"keydown":case"keyup":ML(f,r,d)}var _;if(SO)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else kx?LW(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(MW&&r.locale!=="ko"&&(kx||I!=="onCompositionStart"?I==="onCompositionEnd"&&kx&&(_=RW()):(B0=d,CO="value"in B0?B0.value:B0.textContent,kx=!0)),j=_E(u,I),0<j.length&&(I=new jL(I,t,null,r,d),f.push({event:I,listeners:j}),_?I.data=_:(_=UW(r),_!==null&&(I.data=_)))),(_=rhe?nhe(t,r):ahe(t,r))&&(u=_E(u,"onBeforeInput"),0<u.length&&(d=new jL("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=_))}JW(f,e)})}function Kb(t,e,r){return{instance:t,listener:e,currentTarget:r}}function _E(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Lb(t,r),s!=null&&n.unshift(Kb(t,s,a)),s=Lb(t,e),s!=null&&n.push(Kb(t,s,a))),t=t.return}return n}function Kg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function QL(t,e,r,n,a){for(var s=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Lb(r,s),c!=null&&o.unshift(Kb(r,c,l))):a||(c=Lb(r,s),c!=null&&o.push(Kb(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var xhe=/\r\n?/g,vhe=/\u0000|\uFFFD/g;function VL(t){return(typeof t=="string"?t:""+t).replace(xhe,`
`).replace(vhe,"")}function LN(t,e,r){if(e=VL(e),VL(t)!==e&&r)throw Error(Cr(425))}function EE(){}var qB=null,zB=null;function WB(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var XB=typeof setTimeout=="function"?setTimeout:void 0,yhe=typeof clearTimeout=="function"?clearTimeout:void 0,HL=typeof Promise=="function"?Promise:void 0,bhe=typeof queueMicrotask=="function"?queueMicrotask:typeof HL<"u"?function(t){return HL.resolve(null).then(t).catch(whe)}:XB;function whe(t){setTimeout(function(){throw t})}function W4(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),Vb(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Vb(e)}function $0(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $L(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Xv=Math.random().toString(36).slice(2),Bf="__reactFiber$"+Xv,qb="__reactProps$"+Xv,Zh="__reactContainer$"+Xv,YB="__reactEvents$"+Xv,Nhe="__reactListeners$"+Xv,Che="__reactHandles$"+Xv;function hp(t){var e=t[Bf];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Zh]||r[Bf]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=$L(t);t!==null;){if(r=t[Bf])return r;t=$L(t)}return e}t=r,r=t.parentNode}return null}function ow(t){return t=t[Bf]||t[Zh],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dx(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Cr(33))}function qI(t){return t[qb]||null}var JB=[],Rx=-1;function Cm(t){return{current:t}}function bs(t){0>Rx||(t.current=JB[Rx],JB[Rx]=null,Rx--)}function us(t,e){Rx++,JB[Rx]=t.current,t.current=e}var im={},$l=Cm(im),Rc=Cm(!1),Vp=im;function xv(t,e){var r=t.type.contextTypes;if(!r)return im;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Mc(t){return t=t.childContextTypes,t!=null}function SE(){bs(Rc),bs($l)}function GL(t,e,r){if($l.current!==im)throw Error(Cr(168));us($l,e),us(Rc,r)}function eX(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(Cr(108,lfe(t)||"Unknown",a));return ti({},r,n)}function IE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||im,Vp=$l.current,us($l,t),us(Rc,Rc.current),!0}function KL(t,e,r){var n=t.stateNode;if(!n)throw Error(Cr(169));r?(t=eX(t,e,Vp),n.__reactInternalMemoizedMergedChildContext=t,bs(Rc),bs($l),us($l,t)):bs(Rc),us(Rc,r)}var Eh=null,zI=!1,X4=!1;function tX(t){Eh===null?Eh=[t]:Eh.push(t)}function _he(t){zI=!0,tX(t)}function _m(){if(!X4&&Eh!==null){X4=!0;var t=0,e=$a;try{var r=Eh;for($a=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Eh=null,zI=!1}catch(a){throw Eh!==null&&(Eh=Eh.slice(t+1)),EW(yO,_m),a}finally{$a=e,X4=!1}}return null}var Mx=[],Lx=0,jE=null,PE=0,ed=[],td=0,Hp=null,Bh=1,Th="";function Xm(t,e){Mx[Lx++]=PE,Mx[Lx++]=jE,jE=t,PE=e}function rX(t,e,r){ed[td++]=Bh,ed[td++]=Th,ed[td++]=Hp,Hp=t;var n=Bh;t=Th;var a=32-Xd(n)-1;n&=~(1<<a),r+=1;var s=32-Xd(e)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Bh=1<<32-Xd(e)+a|r<<a|n,Th=s+t}else Bh=1<<s|r<<a|n,Th=t}function jO(t){t.return!==null&&(Xm(t,1),rX(t,1,0))}function PO(t){for(;t===jE;)jE=Mx[--Lx],Mx[Lx]=null,PE=Mx[--Lx],Mx[Lx]=null;for(;t===Hp;)Hp=ed[--td],ed[td]=null,Th=ed[--td],ed[td]=null,Bh=ed[--td],ed[td]=null}var gu=null,hu=null,Ps=!1,Vd=null;function nX(t,e){var r=nd(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function qL(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gu=t,hu=$0(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gu=t,hu=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Hp!==null?{id:Bh,overflow:Th}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=nd(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,gu=t,hu=null,!0):!1;default:return!1}}function ZB(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eT(t){if(Ps){var e=hu;if(e){var r=e;if(!qL(t,e)){if(ZB(t))throw Error(Cr(418));e=$0(r.nextSibling);var n=gu;e&&qL(t,e)?nX(n,r):(t.flags=t.flags&-4097|2,Ps=!1,gu=t)}}else{if(ZB(t))throw Error(Cr(418));t.flags=t.flags&-4097|2,Ps=!1,gu=t}}}function zL(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gu=t}function UN(t){if(t!==gu)return!1;if(!Ps)return zL(t),Ps=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!WB(t.type,t.memoizedProps)),e&&(e=hu)){if(ZB(t))throw aX(),Error(Cr(418));for(;e;)nX(t,e),e=$0(e.nextSibling)}if(zL(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Cr(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){hu=$0(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}hu=null}}else hu=gu?$0(t.stateNode.nextSibling):null;return!0}function aX(){for(var t=hu;t;)t=$0(t.nextSibling)}function vv(){hu=gu=null,Ps=!1}function BO(t){Vd===null?Vd=[t]:Vd.push(t)}var Ehe=gA.ReactCurrentBatchConfig;function q1(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Cr(309));var n=r.stateNode}if(!n)throw Error(Cr(147,t));var a=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Cr(284));if(!r._owner)throw Error(Cr(290,t))}return t}function QN(t,e){throw t=Object.prototype.toString.call(e),Error(Cr(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function WL(t){var e=t._init;return e(t._payload)}function sX(t){function e(v,y){if(t){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function r(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function a(v,y){return v=z0(v,y),v.index=0,v.sibling=null,v}function s(v,y,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,y,b,w){return y===null||y.tag!==6?(y=n3(b,v.mode,w),y.return=v,y):(y=a(y,b),y.return=v,y)}function c(v,y,b,w){var P=b.type;return P===Tx?d(v,y,b.props.children,w,b.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===A0&&WL(P)===y.type)?(w=a(y,b.props),w.ref=q1(v,y,b),w.return=v,w):(w=U_(b.type,b.key,b.props,null,v.mode,w),w.ref=q1(v,y,b),w.return=v,w)}function u(v,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=a3(b,v.mode,w),y.return=v,y):(y=a(y,b.children||[]),y.return=v,y)}function d(v,y,b,w,P){return y===null||y.tag!==7?(y=_p(b,v.mode,w,P),y.return=v,y):(y=a(y,b),y.return=v,y)}function f(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=n3(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case PN:return b=U_(y.type,y.key,y.props,null,v.mode,b),b.ref=q1(v,null,y),b.return=v,b;case Bx:return y=a3(y,v.mode,b),y.return=v,y;case A0:var w=y._init;return f(v,w(y._payload),b)}if(Sy(y)||V1(y))return y=_p(y,v.mode,b,null),y.return=v,y;QN(v,y)}return null}function A(v,y,b,w){var P=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return P!==null?null:l(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case PN:return b.key===P?c(v,y,b,w):null;case Bx:return b.key===P?u(v,y,b,w):null;case A0:return P=b._init,A(v,y,P(b._payload),w)}if(Sy(b)||V1(b))return P!==null?null:d(v,y,b,w,null);QN(v,b)}return null}function h(v,y,b,w,P){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(b)||null,l(y,v,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case PN:return v=v.get(w.key===null?b:w.key)||null,c(y,v,w,P);case Bx:return v=v.get(w.key===null?b:w.key)||null,u(y,v,w,P);case A0:var j=w._init;return h(v,y,b,j(w._payload),P)}if(Sy(w)||V1(w))return v=v.get(b)||null,d(y,v,w,P,null);QN(y,w)}return null}function m(v,y,b,w){for(var P=null,j=null,_=y,I=y=0,E=null;_!==null&&I<b.length;I++){_.index>I?(E=_,_=null):E=_.sibling;var F=A(v,_,b[I],w);if(F===null){_===null&&(_=E);break}t&&_&&F.alternate===null&&e(v,_),y=s(F,y,I),j===null?P=F:j.sibling=F,j=F,_=E}if(I===b.length)return r(v,_),Ps&&Xm(v,I),P;if(_===null){for(;I<b.length;I++)_=f(v,b[I],w),_!==null&&(y=s(_,y,I),j===null?P=_:j.sibling=_,j=_);return Ps&&Xm(v,I),P}for(_=n(v,_);I<b.length;I++)E=h(_,v,I,b[I],w),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?I:E.key),y=s(E,y,I),j===null?P=E:j.sibling=E,j=E);return t&&_.forEach(function(k){return e(v,k)}),Ps&&Xm(v,I),P}function p(v,y,b,w){var P=V1(b);if(typeof P!="function")throw Error(Cr(150));if(b=P.call(b),b==null)throw Error(Cr(151));for(var j=P=null,_=y,I=y=0,E=null,F=b.next();_!==null&&!F.done;I++,F=b.next()){_.index>I?(E=_,_=null):E=_.sibling;var k=A(v,_,F.value,w);if(k===null){_===null&&(_=E);break}t&&_&&k.alternate===null&&e(v,_),y=s(k,y,I),j===null?P=k:j.sibling=k,j=k,_=E}if(F.done)return r(v,_),Ps&&Xm(v,I),P;if(_===null){for(;!F.done;I++,F=b.next())F=f(v,F.value,w),F!==null&&(y=s(F,y,I),j===null?P=F:j.sibling=F,j=F);return Ps&&Xm(v,I),P}for(_=n(v,_);!F.done;I++,F=b.next())F=h(_,v,I,F.value,w),F!==null&&(t&&F.alternate!==null&&_.delete(F.key===null?I:F.key),y=s(F,y,I),j===null?P=F:j.sibling=F,j=F);return t&&_.forEach(function(B){return e(v,B)}),Ps&&Xm(v,I),P}function g(v,y,b,w){if(typeof b=="object"&&b!==null&&b.type===Tx&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case PN:e:{for(var P=b.key,j=y;j!==null;){if(j.key===P){if(P=b.type,P===Tx){if(j.tag===7){r(v,j.sibling),y=a(j,b.props.children),y.return=v,v=y;break e}}else if(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===A0&&WL(P)===j.type){r(v,j.sibling),y=a(j,b.props),y.ref=q1(v,j,b),y.return=v,v=y;break e}r(v,j);break}else e(v,j);j=j.sibling}b.type===Tx?(y=_p(b.props.children,v.mode,w,b.key),y.return=v,v=y):(w=U_(b.type,b.key,b.props,null,v.mode,w),w.ref=q1(v,y,b),w.return=v,v=w)}return o(v);case Bx:e:{for(j=b.key;y!==null;){if(y.key===j)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(v,y.sibling),y=a(y,b.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else e(v,y);y=y.sibling}y=a3(b,v.mode,w),y.return=v,v=y}return o(v);case A0:return j=b._init,g(v,y,j(b._payload),w)}if(Sy(b))return m(v,y,b,w);if(V1(b))return p(v,y,b,w);QN(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(v,y.sibling),y=a(y,b),y.return=v,v=y):(r(v,y),y=n3(b,v.mode,w),y.return=v,v=y),o(v)):r(v,y)}return g}var yv=sX(!0),iX=sX(!1),BE=Cm(null),TE=null,Ux=null,TO=null;function kO(){TO=Ux=TE=null}function FO(t){var e=BE.current;bs(BE),t._currentValue=e}function tT(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function nv(t,e){TE=t,TO=Ux=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fc=!0),t.firstContext=null)}function Ad(t){var e=t._currentValue;if(TO!==t)if(t={context:t,memoizedValue:e,next:null},Ux===null){if(TE===null)throw Error(Cr(308));Ux=t,TE.dependencies={lanes:0,firstContext:t}}else Ux=Ux.next=t;return e}var Ap=null;function OO(t){Ap===null?Ap=[t]:Ap.push(t)}function oX(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,OO(e)):(r.next=a.next,a.next=r),e.interleaved=r,eA(t,n)}function eA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var m0=!1;function DO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lX(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function G0(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,da&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,eA(t,r)}return a=n.interleaved,a===null?(e.next=e,OO(n)):(e.next=a.next,a.next=e),n.interleaved=e,eA(t,r)}function F_(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,bO(t,r)}}function XL(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function kE(t,e,r,n){var a=t.updateQueue;m0=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;o=0,d=u=c=null,l=s;do{var A=l.lane,h=l.eventTime;if((n&A)===A){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,p=l;switch(A=e,h=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){f=m.call(h,f,A);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,A=typeof m=="function"?m.call(h,f,A):m,A==null)break e;f=ti({},f,A);break e;case 2:m0=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,A=a.effects,A===null?a.effects=[l]:A.push(l))}else h={eventTime:h,lane:A,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=A;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;A=l,l=A.next,A.next=null,a.lastBaseUpdate=A,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);Gp|=o,t.lanes=o,t.memoizedState=f}}function YL(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Cr(191,a));a.call(n)}}}var lw={},Vf=Cm(lw),zb=Cm(lw),Wb=Cm(lw);function mp(t){if(t===lw)throw Error(Cr(174));return t}function RO(t,e){switch(us(Wb,e),us(zb,t),us(Vf,lw),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:OB(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=OB(e,t)}bs(Vf),us(Vf,e)}function bv(){bs(Vf),bs(zb),bs(Wb)}function cX(t){mp(Wb.current);var e=mp(Vf.current),r=OB(e,t.type);e!==r&&(us(zb,t),us(Vf,r))}function MO(t){zb.current===t&&(bs(Vf),bs(zb))}var Ws=Cm(0);function FE(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Y4=[];function LO(){for(var t=0;t<Y4.length;t++)Y4[t]._workInProgressVersionPrimary=null;Y4.length=0}var O_=gA.ReactCurrentDispatcher,J4=gA.ReactCurrentBatchConfig,$p=0,Zs=null,oo=null,Do=null,OE=!1,nb=!1,Xb=0,She=0;function bl(){throw Error(Cr(321))}function UO(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!af(t[r],e[r]))return!1;return!0}function QO(t,e,r,n,a,s){if($p=s,Zs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,O_.current=t===null||t.memoizedState===null?Bhe:The,t=r(n,a),nb){s=0;do{if(nb=!1,Xb=0,25<=s)throw Error(Cr(301));s+=1,Do=oo=null,e.updateQueue=null,O_.current=khe,t=r(n,a)}while(nb)}if(O_.current=DE,e=oo!==null&&oo.next!==null,$p=0,Do=oo=Zs=null,OE=!1,e)throw Error(Cr(300));return t}function VO(){var t=Xb!==0;return Xb=0,t}function Pf(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Do===null?Zs.memoizedState=Do=t:Do=Do.next=t,Do}function md(){if(oo===null){var t=Zs.alternate;t=t!==null?t.memoizedState:null}else t=oo.next;var e=Do===null?Zs.memoizedState:Do.next;if(e!==null)Do=e,oo=t;else{if(t===null)throw Error(Cr(310));oo=t,t={memoizedState:oo.memoizedState,baseState:oo.baseState,baseQueue:oo.baseQueue,queue:oo.queue,next:null},Do===null?Zs.memoizedState=Do=t:Do=Do.next=t}return Do}function Yb(t,e){return typeof e=="function"?e(t):e}function Z4(t){var e=md(),r=e.queue;if(r===null)throw Error(Cr(311));r.lastRenderedReducer=t;var n=oo,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if(($p&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Zs.lanes|=d,Gp|=d}u=u.next}while(u!==null&&u!==s);c===null?o=n:c.next=l,af(n,e.memoizedState)||(Fc=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do s=a.lane,Zs.lanes|=s,Gp|=s,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function e3(t){var e=md(),r=e.queue;if(r===null)throw Error(Cr(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do s=t(s,o.action),o=o.next;while(o!==a);af(s,e.memoizedState)||(Fc=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function uX(){}function dX(t,e){var r=Zs,n=md(),a=e(),s=!af(n.memoizedState,a);if(s&&(n.memoizedState=a,Fc=!0),n=n.queue,HO(AX.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Do!==null&&Do.memoizedState.tag&1){if(r.flags|=2048,Jb(9,hX.bind(null,r,n,a,e),void 0,null),Qo===null)throw Error(Cr(349));$p&30||fX(r,e,a)}return a}function fX(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Zs.updateQueue,e===null?(e={lastEffect:null,stores:null},Zs.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function hX(t,e,r,n){e.value=r,e.getSnapshot=n,mX(e)&&pX(t)}function AX(t,e,r){return r(function(){mX(e)&&pX(t)})}function mX(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!af(t,r)}catch{return!0}}function pX(t){var e=eA(t,1);e!==null&&Yd(e,t,1,-1)}function JL(t){var e=Pf();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yb,lastRenderedState:t},e.queue=t,t=t.dispatch=Phe.bind(null,Zs,t),[e.memoizedState,t]}function Jb(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Zs.updateQueue,e===null?(e={lastEffect:null,stores:null},Zs.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function gX(){return md().memoizedState}function D_(t,e,r,n){var a=Pf();Zs.flags|=t,a.memoizedState=Jb(1|e,r,void 0,n===void 0?null:n)}function WI(t,e,r,n){var a=md();n=n===void 0?null:n;var s=void 0;if(oo!==null){var o=oo.memoizedState;if(s=o.destroy,n!==null&&UO(n,o.deps)){a.memoizedState=Jb(e,r,s,n);return}}Zs.flags|=t,a.memoizedState=Jb(1|e,r,s,n)}function ZL(t,e){return D_(8390656,8,t,e)}function HO(t,e){return WI(2048,8,t,e)}function xX(t,e){return WI(4,2,t,e)}function vX(t,e){return WI(4,4,t,e)}function yX(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bX(t,e,r){return r=r!=null?r.concat([t]):null,WI(4,4,yX.bind(null,e,t),r)}function $O(){}function wX(t,e){var r=md();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&UO(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function NX(t,e){var r=md();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&UO(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function CX(t,e,r){return $p&21?(af(r,e)||(r=jW(),Zs.lanes|=r,Gp|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fc=!0),t.memoizedState=r)}function Ihe(t,e){var r=$a;$a=r!==0&&4>r?r:4,t(!0);var n=J4.transition;J4.transition={};try{t(!1),e()}finally{$a=r,J4.transition=n}}function _X(){return md().memoizedState}function jhe(t,e,r){var n=q0(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},EX(t))SX(e,r);else if(r=oX(t,e,r,n),r!==null){var a=dc();Yd(r,t,n,a),IX(r,e,n)}}function Phe(t,e,r){var n=q0(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(EX(t))SX(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,af(l,o)){var c=e.interleaved;c===null?(a.next=a,OO(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=oX(t,e,a,n),r!==null&&(a=dc(),Yd(r,t,n,a),IX(r,e,n))}}function EX(t){var e=t.alternate;return t===Zs||e!==null&&e===Zs}function SX(t,e){nb=OE=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function IX(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,bO(t,r)}}var DE={readContext:Ad,useCallback:bl,useContext:bl,useEffect:bl,useImperativeHandle:bl,useInsertionEffect:bl,useLayoutEffect:bl,useMemo:bl,useReducer:bl,useRef:bl,useState:bl,useDebugValue:bl,useDeferredValue:bl,useTransition:bl,useMutableSource:bl,useSyncExternalStore:bl,useId:bl,unstable_isNewReconciler:!1},Bhe={readContext:Ad,useCallback:function(t,e){return Pf().memoizedState=[t,e===void 0?null:e],t},useContext:Ad,useEffect:ZL,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,D_(4194308,4,yX.bind(null,e,t),r)},useLayoutEffect:function(t,e){return D_(4194308,4,t,e)},useInsertionEffect:function(t,e){return D_(4,2,t,e)},useMemo:function(t,e){var r=Pf();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Pf();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=jhe.bind(null,Zs,t),[n.memoizedState,t]},useRef:function(t){var e=Pf();return t={current:t},e.memoizedState=t},useState:JL,useDebugValue:$O,useDeferredValue:function(t){return Pf().memoizedState=t},useTransition:function(){var t=JL(!1),e=t[0];return t=Ihe.bind(null,t[1]),Pf().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Zs,a=Pf();if(Ps){if(r===void 0)throw Error(Cr(407));r=r()}else{if(r=e(),Qo===null)throw Error(Cr(349));$p&30||fX(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,ZL(AX.bind(null,n,s,t),[t]),n.flags|=2048,Jb(9,hX.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Pf(),e=Qo.identifierPrefix;if(Ps){var r=Th,n=Bh;r=(n&~(1<<32-Xd(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Xb++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=She++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},The={readContext:Ad,useCallback:wX,useContext:Ad,useEffect:HO,useImperativeHandle:bX,useInsertionEffect:xX,useLayoutEffect:vX,useMemo:NX,useReducer:Z4,useRef:gX,useState:function(){return Z4(Yb)},useDebugValue:$O,useDeferredValue:function(t){var e=md();return CX(e,oo.memoizedState,t)},useTransition:function(){var t=Z4(Yb)[0],e=md().memoizedState;return[t,e]},useMutableSource:uX,useSyncExternalStore:dX,useId:_X,unstable_isNewReconciler:!1},khe={readContext:Ad,useCallback:wX,useContext:Ad,useEffect:HO,useImperativeHandle:bX,useInsertionEffect:xX,useLayoutEffect:vX,useMemo:NX,useReducer:e3,useRef:gX,useState:function(){return e3(Yb)},useDebugValue:$O,useDeferredValue:function(t){var e=md();return oo===null?e.memoizedState=t:CX(e,oo.memoizedState,t)},useTransition:function(){var t=e3(Yb)[0],e=md().memoizedState;return[t,e]},useMutableSource:uX,useSyncExternalStore:dX,useId:_X,unstable_isNewReconciler:!1};function Ud(t,e){if(t&&t.defaultProps){e=ti({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function rT(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ti({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var XI={isMounted:function(t){return(t=t._reactInternals)?bg(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=dc(),a=q0(t),s=Qh(n,a);s.payload=e,r!=null&&(s.callback=r),e=G0(t,s,a),e!==null&&(Yd(e,t,a,n),F_(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=dc(),a=q0(t),s=Qh(n,a);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=G0(t,s,a),e!==null&&(Yd(e,t,a,n),F_(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=dc(),n=q0(t),a=Qh(r,n);a.tag=2,e!=null&&(a.callback=e),e=G0(t,a,n),e!==null&&(Yd(e,t,n,r),F_(e,t,n))}};function eU(t,e,r,n,a,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!$b(r,n)||!$b(a,s):!0}function jX(t,e,r){var n=!1,a=im,s=e.contextType;return typeof s=="object"&&s!==null?s=Ad(s):(a=Mc(e)?Vp:$l.current,n=e.contextTypes,s=(n=n!=null)?xv(t,a):im),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=XI,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function tU(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&XI.enqueueReplaceState(e,e.state,null)}function nT(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},DO(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=Ad(s):(s=Mc(e)?Vp:$l.current,a.context=xv(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(rT(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&XI.enqueueReplaceState(a,a.state,null),kE(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function wv(t,e){try{var r="",n=e;do r+=ofe(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function t3(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function aT(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Fhe=typeof WeakMap=="function"?WeakMap:Map;function PX(t,e,r){r=Qh(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ME||(ME=!0,AT=n),aT(t,e)},r}function BX(t,e,r){r=Qh(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){aT(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){aT(t,e),typeof n!="function"&&(K0===null?K0=new Set([this]):K0.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function rU(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Fhe;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=zhe.bind(null,t,e,r),e.then(t,t))}function nU(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function aU(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Qh(-1,1),e.tag=2,G0(r,e,1))),r.lanes|=1),t)}var Ohe=gA.ReactCurrentOwner,Fc=!1;function sc(t,e,r,n){e.child=t===null?iX(e,null,r,n):yv(e,t.child,r,n)}function sU(t,e,r,n,a){r=r.render;var s=e.ref;return nv(e,a),n=QO(t,e,r,n,s,a),r=VO(),t!==null&&!Fc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,tA(t,e,a)):(Ps&&r&&jO(e),e.flags|=1,sc(t,e,n,a),e.child)}function iU(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!JO(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,TX(t,e,s,n,a)):(t=U_(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:$b,r(o,n)&&t.ref===e.ref)return tA(t,e,a)}return e.flags|=1,t=z0(s,n),t.ref=e.ref,t.return=e,e.child=t}function TX(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if($b(s,n)&&t.ref===e.ref)if(Fc=!1,e.pendingProps=n=s,(t.lanes&a)!==0)t.flags&131072&&(Fc=!0);else return e.lanes=t.lanes,tA(t,e,a)}return sT(t,e,r,n,a)}function kX(t,e,r){var n=e.pendingProps,a=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},us(Vx,iu),iu|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,us(Vx,iu),iu|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,us(Vx,iu),iu|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,us(Vx,iu),iu|=n;return sc(t,e,a,r),e.child}function FX(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function sT(t,e,r,n,a){var s=Mc(r)?Vp:$l.current;return s=xv(e,s),nv(e,a),r=QO(t,e,r,n,s,a),n=VO(),t!==null&&!Fc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,tA(t,e,a)):(Ps&&n&&jO(e),e.flags|=1,sc(t,e,r,a),e.child)}function oU(t,e,r,n,a){if(Mc(r)){var s=!0;IE(e)}else s=!1;if(nv(e,a),e.stateNode===null)R_(t,e),jX(e,r,n),nT(e,r,n,a),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ad(u):(u=Mc(r)?Vp:$l.current,u=xv(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&tU(e,o,n,u),m0=!1;var A=e.memoizedState;o.state=A,kE(e,n,o,a),c=e.memoizedState,l!==n||A!==c||Rc.current||m0?(typeof d=="function"&&(rT(e,r,d,n),c=e.memoizedState),(l=m0||eU(e,r,l,n,A,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,lX(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ud(e.type,l),o.props=u,f=e.pendingProps,A=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ad(c):(c=Mc(r)?Vp:$l.current,c=xv(e,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||A!==c)&&tU(e,o,n,c),m0=!1,A=e.memoizedState,o.state=A,kE(e,n,o,a);var m=e.memoizedState;l!==f||A!==m||Rc.current||m0?(typeof h=="function"&&(rT(e,r,h,n),m=e.memoizedState),(u=m0||eU(e,r,u,n,A,m,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),n=!1)}return iT(t,e,r,n,s,a)}function iT(t,e,r,n,a,s){FX(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return a&&KL(e,r,!1),tA(t,e,s);n=e.stateNode,Ohe.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=yv(e,t.child,null,s),e.child=yv(e,null,l,s)):sc(t,e,l,s),e.memoizedState=n.state,a&&KL(e,r,!0),e.child}function OX(t){var e=t.stateNode;e.pendingContext?GL(t,e.pendingContext,e.pendingContext!==e.context):e.context&&GL(t,e.context,!1),RO(t,e.containerInfo)}function lU(t,e,r,n,a){return vv(),BO(a),e.flags|=256,sc(t,e,r,n),e.child}var oT={dehydrated:null,treeContext:null,retryLane:0};function lT(t){return{baseLanes:t,cachePool:null,transitions:null}}function DX(t,e,r){var n=e.pendingProps,a=Ws.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),us(Ws,a&1),t===null)return eT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ZI(o,n,0,null),t=_p(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=lT(r),e.memoizedState=oT,t):GO(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Dhe(t,e,o,n,l,a,r);if(s){s=n.fallback,o=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=z0(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=z0(l,s):(s=_p(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?lT(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=oT,n}return s=t.child,t=s.sibling,n=z0(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function GO(t,e){return e=ZI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function VN(t,e,r,n){return n!==null&&BO(n),yv(e,t.child,null,r),t=GO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Dhe(t,e,r,n,a,s,o){if(r)return e.flags&256?(e.flags&=-257,n=t3(Error(Cr(422))),VN(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,a=e.mode,n=ZI({mode:"visible",children:n.children},a,0,null),s=_p(s,a,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&yv(e,t.child,null,o),e.child.memoizedState=lT(o),e.memoizedState=oT,s);if(!(e.mode&1))return VN(t,e,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(Cr(419)),n=t3(s,n,void 0),VN(t,e,o,n)}if(l=(o&t.childLanes)!==0,Fc||l){if(n=Qo,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,eA(t,a),Yd(n,t,a,-1))}return YO(),n=t3(Error(Cr(421))),VN(t,e,o,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Whe.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,hu=$0(a.nextSibling),gu=e,Ps=!0,Vd=null,t!==null&&(ed[td++]=Bh,ed[td++]=Th,ed[td++]=Hp,Bh=t.id,Th=t.overflow,Hp=e),e=GO(e,n.children),e.flags|=4096,e)}function cU(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),tT(t.return,e,r)}function r3(t,e,r,n,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function RX(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;if(sc(t,e,n.children,r),n=Ws.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cU(t,r,e);else if(t.tag===19)cU(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(us(Ws,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&FE(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),r3(e,!1,a,r,s);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&FE(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}r3(e,!0,r,null,s);break;case"together":r3(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function R_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Gp|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Cr(153));if(e.child!==null){for(t=e.child,r=z0(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=z0(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Rhe(t,e,r){switch(e.tag){case 3:OX(e),vv();break;case 5:cX(e);break;case 1:Mc(e.type)&&IE(e);break;case 4:RO(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;us(BE,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(us(Ws,Ws.current&1),e.flags|=128,null):r&e.child.childLanes?DX(t,e,r):(us(Ws,Ws.current&1),t=tA(t,e,r),t!==null?t.sibling:null);us(Ws,Ws.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return RX(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),us(Ws,Ws.current),n)break;return null;case 22:case 23:return e.lanes=0,kX(t,e,r)}return tA(t,e,r)}var MX,cT,LX,UX;MX=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};cT=function(){};LX=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,mp(Vf.current);var s=null;switch(r){case"input":a=BB(t,a),n=BB(t,n),s=[];break;case"select":a=ti({},a,{value:void 0}),n=ti({},n,{value:void 0}),s=[];break;case"textarea":a=FB(t,a),n=FB(t,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=EE)}DB(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rb.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Rb.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ms("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};UX=function(t,e,r,n){r!==n&&(e.flags|=4)};function z1(t,e){if(!Ps)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function wl(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Mhe(t,e,r){var n=e.pendingProps;switch(PO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wl(e),null;case 1:return Mc(e.type)&&SE(),wl(e),null;case 3:return n=e.stateNode,bv(),bs(Rc),bs($l),LO(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(UN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vd!==null&&(gT(Vd),Vd=null))),cT(t,e),wl(e),null;case 5:MO(e);var a=mp(Wb.current);if(r=e.type,t!==null&&e.stateNode!=null)LX(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Cr(166));return wl(e),null}if(t=mp(Vf.current),UN(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Bf]=e,n[qb]=s,t=(e.mode&1)!==0,r){case"dialog":ms("cancel",n),ms("close",n);break;case"iframe":case"object":case"embed":ms("load",n);break;case"video":case"audio":for(a=0;a<jy.length;a++)ms(jy[a],n);break;case"source":ms("error",n);break;case"img":case"image":case"link":ms("error",n),ms("load",n);break;case"details":ms("toggle",n);break;case"input":xL(n,s),ms("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ms("invalid",n);break;case"textarea":yL(n,s),ms("invalid",n)}DB(r,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&LN(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&LN(n.textContent,l,t),a=["children",""+l]):Rb.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ms("scroll",n)}switch(r){case"input":BN(n),vL(n,s,!0);break;case"textarea":BN(n),bL(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=EE)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=AW(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Bf]=e,t[qb]=n,MX(t,e,!1,!1),e.stateNode=t;e:{switch(o=RB(r,n),r){case"dialog":ms("cancel",t),ms("close",t),a=n;break;case"iframe":case"object":case"embed":ms("load",t),a=n;break;case"video":case"audio":for(a=0;a<jy.length;a++)ms(jy[a],t);a=n;break;case"source":ms("error",t),a=n;break;case"img":case"image":case"link":ms("error",t),ms("load",t),a=n;break;case"details":ms("toggle",t),a=n;break;case"input":xL(t,n),a=BB(t,n),ms("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=ti({},n,{value:void 0}),ms("invalid",t);break;case"textarea":yL(t,n),a=FB(t,n),ms("invalid",t);break;default:a=n}DB(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?gW(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&mW(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Mb(t,c):typeof c=="number"&&Mb(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rb.hasOwnProperty(s)?c!=null&&s==="onScroll"&&ms("scroll",t):c!=null&&mO(t,s,c,o))}switch(r){case"input":BN(t),vL(t,n,!1);break;case"textarea":BN(t),bL(t);break;case"option":n.value!=null&&t.setAttribute("value",""+sm(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Zx(t,!!n.multiple,s,!1):n.defaultValue!=null&&Zx(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=EE)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wl(e),null;case 6:if(t&&e.stateNode!=null)UX(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Cr(166));if(r=mp(Wb.current),mp(Vf.current),UN(e)){if(n=e.stateNode,r=e.memoizedProps,n[Bf]=e,(s=n.nodeValue!==r)&&(t=gu,t!==null))switch(t.tag){case 3:LN(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&LN(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Bf]=e,e.stateNode=n}return wl(e),null;case 13:if(bs(Ws),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ps&&hu!==null&&e.mode&1&&!(e.flags&128))aX(),vv(),e.flags|=98560,s=!1;else if(s=UN(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Cr(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Cr(317));s[Bf]=e}else vv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wl(e),s=!1}else Vd!==null&&(gT(Vd),Vd=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ws.current&1?go===0&&(go=3):YO())),e.updateQueue!==null&&(e.flags|=4),wl(e),null);case 4:return bv(),cT(t,e),t===null&&Gb(e.stateNode.containerInfo),wl(e),null;case 10:return FO(e.type._context),wl(e),null;case 17:return Mc(e.type)&&SE(),wl(e),null;case 19:if(bs(Ws),s=e.memoizedState,s===null)return wl(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)z1(s,!1);else{if(go!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=FE(t),o!==null){for(e.flags|=128,z1(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return us(Ws,Ws.current&1|2),e.child}t=t.sibling}s.tail!==null&&ji()>Nv&&(e.flags|=128,n=!0,z1(s,!1),e.lanes=4194304)}else{if(!n)if(t=FE(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),z1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ps)return wl(e),null}else 2*ji()-s.renderingStartTime>Nv&&r!==1073741824&&(e.flags|=128,n=!0,z1(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ji(),e.sibling=null,r=Ws.current,us(Ws,n?r&1|2:r&1),e):(wl(e),null);case 22:case 23:return XO(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?iu&1073741824&&(wl(e),e.subtreeFlags&6&&(e.flags|=8192)):wl(e),null;case 24:return null;case 25:return null}throw Error(Cr(156,e.tag))}function Lhe(t,e){switch(PO(e),e.tag){case 1:return Mc(e.type)&&SE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bv(),bs(Rc),bs($l),LO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return MO(e),null;case 13:if(bs(Ws),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Cr(340));vv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bs(Ws),null;case 4:return bv(),null;case 10:return FO(e.type._context),null;case 22:case 23:return XO(),null;case 24:return null;default:return null}}var HN=!1,Ml=!1,Uhe=typeof WeakSet=="function"?WeakSet:Set,Kr=null;function Qx(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){hi(t,e,n)}else r.current=null}function uT(t,e,r){try{r()}catch(n){hi(t,e,n)}}var uU=!1;function Qhe(t,e){if(qB=NE,t=GW(),IO(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=t,A=null;t:for(;;){for(var h;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==s||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)A=f,f=h;for(;;){if(f===t)break t;if(A===r&&++u===a&&(l=o),A===s&&++d===n&&(c=o),(h=f.nextSibling)!==null)break;f=A,A=f.parentNode}f=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(zB={focusedElem:t,selectionRange:r},NE=!1,Kr=e;Kr!==null;)if(e=Kr,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Kr=t;else for(;Kr!==null;){e=Kr;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?p:Ud(e.type,p),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Cr(163))}}catch(w){hi(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Kr=t;break}Kr=e.return}return m=uU,uU=!1,m}function ab(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&uT(e,r,s)}a=a.next}while(a!==n)}}function YI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function dT(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function QX(t){var e=t.alternate;e!==null&&(t.alternate=null,QX(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bf],delete e[qb],delete e[YB],delete e[Nhe],delete e[Che])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function VX(t){return t.tag===5||t.tag===3||t.tag===4}function dU(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||VX(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=EE));else if(n!==4&&(t=t.child,t!==null))for(fT(t,e,r),t=t.sibling;t!==null;)fT(t,e,r),t=t.sibling}function hT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(hT(t,e,r),t=t.sibling;t!==null;)hT(t,e,r),t=t.sibling}var sl=null,Qd=!1;function XA(t,e,r){for(r=r.child;r!==null;)HX(t,e,r),r=r.sibling}function HX(t,e,r){if(Qf&&typeof Qf.onCommitFiberUnmount=="function")try{Qf.onCommitFiberUnmount(HI,r)}catch{}switch(r.tag){case 5:Ml||Qx(r,e);case 6:var n=sl,a=Qd;sl=null,XA(t,e,r),sl=n,Qd=a,sl!==null&&(Qd?(t=sl,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):sl.removeChild(r.stateNode));break;case 18:sl!==null&&(Qd?(t=sl,r=r.stateNode,t.nodeType===8?W4(t.parentNode,r):t.nodeType===1&&W4(t,r),Vb(t)):W4(sl,r.stateNode));break;case 4:n=sl,a=Qd,sl=r.stateNode.containerInfo,Qd=!0,XA(t,e,r),sl=n,Qd=a;break;case 0:case 11:case 14:case 15:if(!Ml&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&uT(r,e,o),a=a.next}while(a!==n)}XA(t,e,r);break;case 1:if(!Ml&&(Qx(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){hi(r,e,l)}XA(t,e,r);break;case 21:XA(t,e,r);break;case 22:r.mode&1?(Ml=(n=Ml)||r.memoizedState!==null,XA(t,e,r),Ml=n):XA(t,e,r);break;default:XA(t,e,r)}}function fU(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Uhe),e.forEach(function(n){var a=Xhe.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Bd(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:sl=l.stateNode,Qd=!1;break e;case 3:sl=l.stateNode.containerInfo,Qd=!0;break e;case 4:sl=l.stateNode.containerInfo,Qd=!0;break e}l=l.return}if(sl===null)throw Error(Cr(160));HX(s,o,a),sl=null,Qd=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){hi(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$X(e,t),e=e.sibling}function $X(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bd(e,t),bf(t),n&4){try{ab(3,t,t.return),YI(3,t)}catch(p){hi(t,t.return,p)}try{ab(5,t,t.return)}catch(p){hi(t,t.return,p)}}break;case 1:Bd(e,t),bf(t),n&512&&r!==null&&Qx(r,r.return);break;case 5:if(Bd(e,t),bf(t),n&512&&r!==null&&Qx(r,r.return),t.flags&32){var a=t.stateNode;try{Mb(a,"")}catch(p){hi(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&fW(a,s),RB(l,o);var u=RB(l,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?gW(a,f):d==="dangerouslySetInnerHTML"?mW(a,f):d==="children"?Mb(a,f):mO(a,d,f,u)}switch(l){case"input":TB(a,s);break;case"textarea":hW(a,s);break;case"select":var A=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Zx(a,!!s.multiple,h,!1):A!==!!s.multiple&&(s.defaultValue!=null?Zx(a,!!s.multiple,s.defaultValue,!0):Zx(a,!!s.multiple,s.multiple?[]:"",!1))}a[qb]=s}catch(p){hi(t,t.return,p)}}break;case 6:if(Bd(e,t),bf(t),n&4){if(t.stateNode===null)throw Error(Cr(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(p){hi(t,t.return,p)}}break;case 3:if(Bd(e,t),bf(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Vb(e.containerInfo)}catch(p){hi(t,t.return,p)}break;case 4:Bd(e,t),bf(t);break;case 13:Bd(e,t),bf(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(zO=ji())),n&4&&fU(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Ml=(u=Ml)||d,Bd(e,t),Ml=u):Bd(e,t),bf(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Kr=t,d=t.child;d!==null;){for(f=Kr=d;Kr!==null;){switch(A=Kr,h=A.child,A.tag){case 0:case 11:case 14:case 15:ab(4,A,A.return);break;case 1:Qx(A,A.return);var m=A.stateNode;if(typeof m.componentWillUnmount=="function"){n=A,r=A.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){hi(n,r,p)}}break;case 5:Qx(A,A.return);break;case 22:if(A.memoizedState!==null){AU(f);continue}}h!==null?(h.return=A,Kr=h):AU(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=pW("display",o))}catch(p){hi(t,t.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){hi(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Bd(e,t),bf(t),n&4&&fU(t);break;case 21:break;default:Bd(e,t),bf(t)}}function bf(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(VX(r)){var n=r;break e}r=r.return}throw Error(Cr(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Mb(a,""),n.flags&=-33);var s=dU(t);hT(t,s,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=dU(t);fT(t,l,o);break;default:throw Error(Cr(161))}}catch(c){hi(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Vhe(t,e,r){Kr=t,GX(t)}function GX(t,e,r){for(var n=(t.mode&1)!==0;Kr!==null;){var a=Kr,s=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||HN;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Ml;l=HN;var u=Ml;if(HN=o,(Ml=c)&&!u)for(Kr=a;Kr!==null;)o=Kr,c=o.child,o.tag===22&&o.memoizedState!==null?mU(a):c!==null?(c.return=o,Kr=c):mU(a);for(;s!==null;)Kr=s,GX(s),s=s.sibling;Kr=a,HN=l,Ml=u}hU(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,Kr=s):hU(t)}}function hU(t){for(;Kr!==null;){var e=Kr;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ml||YI(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ml)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:Ud(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&YL(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}YL(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Vb(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Cr(163))}Ml||e.flags&512&&dT(e)}catch(A){hi(e,e.return,A)}}if(e===t){Kr=null;break}if(r=e.sibling,r!==null){r.return=e.return,Kr=r;break}Kr=e.return}}function AU(t){for(;Kr!==null;){var e=Kr;if(e===t){Kr=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Kr=r;break}Kr=e.return}}function mU(t){for(;Kr!==null;){var e=Kr;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{YI(4,e)}catch(c){hi(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){hi(e,a,c)}}var s=e.return;try{dT(e)}catch(c){hi(e,s,c)}break;case 5:var o=e.return;try{dT(e)}catch(c){hi(e,o,c)}}}catch(c){hi(e,e.return,c)}if(e===t){Kr=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Kr=l;break}Kr=e.return}}var Hhe=Math.ceil,RE=gA.ReactCurrentDispatcher,KO=gA.ReactCurrentOwner,cd=gA.ReactCurrentBatchConfig,da=0,Qo=null,Ki=null,pl=0,iu=0,Vx=Cm(0),go=0,Zb=null,Gp=0,JI=0,qO=0,sb=null,Tc=null,zO=0,Nv=1/0,_h=null,ME=!1,AT=null,K0=null,$N=!1,T0=null,LE=0,ib=0,mT=null,M_=-1,L_=0;function dc(){return da&6?ji():M_!==-1?M_:M_=ji()}function q0(t){return t.mode&1?da&2&&pl!==0?pl&-pl:Ehe.transition!==null?(L_===0&&(L_=jW()),L_):(t=$a,t!==0||(t=window.event,t=t===void 0?16:DW(t.type)),t):1}function Yd(t,e,r,n){if(50<ib)throw ib=0,mT=null,Error(Cr(185));sw(t,r,n),(!(da&2)||t!==Qo)&&(t===Qo&&(!(da&2)&&(JI|=r),go===4&&b0(t,pl)),Lc(t,n),r===1&&da===0&&!(e.mode&1)&&(Nv=ji()+500,zI&&_m()))}function Lc(t,e){var r=t.callbackNode;Efe(t,e);var n=wE(t,t===Qo?pl:0);if(n===0)r!==null&&CL(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&CL(r),e===1)t.tag===0?_he(pU.bind(null,t)):tX(pU.bind(null,t)),bhe(function(){!(da&6)&&_m()}),r=null;else{switch(PW(n)){case 1:r=yO;break;case 4:r=SW;break;case 16:r=bE;break;case 536870912:r=IW;break;default:r=bE}r=ZX(r,KX.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function KX(t,e){if(M_=-1,L_=0,da&6)throw Error(Cr(327));var r=t.callbackNode;if(av()&&t.callbackNode!==r)return null;var n=wE(t,t===Qo?pl:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=UE(t,n);else{e=n;var a=da;da|=2;var s=zX();(Qo!==t||pl!==e)&&(_h=null,Nv=ji()+500,Cp(t,e));do try{Khe();break}catch(l){qX(t,l)}while(!0);kO(),RE.current=s,da=a,Ki!==null?e=0:(Qo=null,pl=0,e=go)}if(e!==0){if(e===2&&(a=VB(t),a!==0&&(n=a,e=pT(t,a))),e===1)throw r=Zb,Cp(t,0),b0(t,n),Lc(t,ji()),r;if(e===6)b0(t,n);else{if(a=t.current.alternate,!(n&30)&&!$he(a)&&(e=UE(t,n),e===2&&(s=VB(t),s!==0&&(n=s,e=pT(t,s))),e===1))throw r=Zb,Cp(t,0),b0(t,n),Lc(t,ji()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(Cr(345));case 2:Ym(t,Tc,_h);break;case 3:if(b0(t,n),(n&130023424)===n&&(e=zO+500-ji(),10<e)){if(wE(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){dc(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=XB(Ym.bind(null,t,Tc,_h),e);break}Ym(t,Tc,_h);break;case 4:if(b0(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var o=31-Xd(n);s=1<<o,o=e[o],o>a&&(a=o),n&=~s}if(n=a,n=ji()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Hhe(n/1960))-n,10<n){t.timeoutHandle=XB(Ym.bind(null,t,Tc,_h),n);break}Ym(t,Tc,_h);break;case 5:Ym(t,Tc,_h);break;default:throw Error(Cr(329))}}}return Lc(t,ji()),t.callbackNode===r?KX.bind(null,t):null}function pT(t,e){var r=sb;return t.current.memoizedState.isDehydrated&&(Cp(t,e).flags|=256),t=UE(t,e),t!==2&&(e=Tc,Tc=r,e!==null&&gT(e)),t}function gT(t){Tc===null?Tc=t:Tc.push.apply(Tc,t)}function $he(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!af(s(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function b0(t,e){for(e&=~qO,e&=~JI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Xd(e),n=1<<r;t[r]=-1,e&=~n}}function pU(t){if(da&6)throw Error(Cr(327));av();var e=wE(t,0);if(!(e&1))return Lc(t,ji()),null;var r=UE(t,e);if(t.tag!==0&&r===2){var n=VB(t);n!==0&&(e=n,r=pT(t,n))}if(r===1)throw r=Zb,Cp(t,0),b0(t,e),Lc(t,ji()),r;if(r===6)throw Error(Cr(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ym(t,Tc,_h),Lc(t,ji()),null}function WO(t,e){var r=da;da|=1;try{return t(e)}finally{da=r,da===0&&(Nv=ji()+500,zI&&_m())}}function Kp(t){T0!==null&&T0.tag===0&&!(da&6)&&av();var e=da;da|=1;var r=cd.transition,n=$a;try{if(cd.transition=null,$a=1,t)return t()}finally{$a=n,cd.transition=r,da=e,!(da&6)&&_m()}}function XO(){iu=Vx.current,bs(Vx)}function Cp(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,yhe(r)),Ki!==null)for(r=Ki.return;r!==null;){var n=r;switch(PO(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&SE();break;case 3:bv(),bs(Rc),bs($l),LO();break;case 5:MO(n);break;case 4:bv();break;case 13:bs(Ws);break;case 19:bs(Ws);break;case 10:FO(n.type._context);break;case 22:case 23:XO()}r=r.return}if(Qo=t,Ki=t=z0(t.current,null),pl=iu=e,go=0,Zb=null,qO=JI=Gp=0,Tc=sb=null,Ap!==null){for(e=0;e<Ap.length;e++)if(r=Ap[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=a,n.next=o}r.pending=n}Ap=null}return t}function qX(t,e){do{var r=Ki;try{if(kO(),O_.current=DE,OE){for(var n=Zs.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}OE=!1}if($p=0,Do=oo=Zs=null,nb=!1,Xb=0,KO.current=null,r===null||r.return===null){go=1,Zb=e,Ki=null;break}e:{var s=t,o=r.return,l=r,c=e;if(e=pl,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var A=d.alternate;A?(d.updateQueue=A.updateQueue,d.memoizedState=A.memoizedState,d.lanes=A.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=nU(o);if(h!==null){h.flags&=-257,aU(h,o,l,s,e),h.mode&1&&rU(s,u,e),e=h,c=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(c),e.updateQueue=p}else m.add(c);break e}else{if(!(e&1)){rU(s,u,e),YO();break e}c=Error(Cr(426))}}else if(Ps&&l.mode&1){var g=nU(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),aU(g,o,l,s,e),BO(wv(c,l));break e}}s=c=wv(c,l),go!==4&&(go=2),sb===null?sb=[s]:sb.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=PX(s,c,e);XL(s,v);break e;case 1:l=c;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(K0===null||!K0.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=BX(s,l,e);XL(s,w);break e}}s=s.return}while(s!==null)}XX(r)}catch(P){e=P,Ki===r&&r!==null&&(Ki=r=r.return);continue}break}while(!0)}function zX(){var t=RE.current;return RE.current=DE,t===null?DE:t}function YO(){(go===0||go===3||go===2)&&(go=4),Qo===null||!(Gp&268435455)&&!(JI&268435455)||b0(Qo,pl)}function UE(t,e){var r=da;da|=2;var n=zX();(Qo!==t||pl!==e)&&(_h=null,Cp(t,e));do try{Ghe();break}catch(a){qX(t,a)}while(!0);if(kO(),da=r,RE.current=n,Ki!==null)throw Error(Cr(261));return Qo=null,pl=0,go}function Ghe(){for(;Ki!==null;)WX(Ki)}function Khe(){for(;Ki!==null&&!gfe();)WX(Ki)}function WX(t){var e=JX(t.alternate,t,iu);t.memoizedProps=t.pendingProps,e===null?XX(t):Ki=e,KO.current=null}function XX(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Lhe(r,e),r!==null){r.flags&=32767,Ki=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{go=6,Ki=null;return}}else if(r=Mhe(r,e,iu),r!==null){Ki=r;return}if(e=e.sibling,e!==null){Ki=e;return}Ki=e=t}while(e!==null);go===0&&(go=5)}function Ym(t,e,r){var n=$a,a=cd.transition;try{cd.transition=null,$a=1,qhe(t,e,r,n)}finally{cd.transition=a,$a=n}return null}function qhe(t,e,r,n){do av();while(T0!==null);if(da&6)throw Error(Cr(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Cr(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Sfe(t,s),t===Qo&&(Ki=Qo=null,pl=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||$N||($N=!0,ZX(bE,function(){return av(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=cd.transition,cd.transition=null;var o=$a;$a=1;var l=da;da|=4,KO.current=null,Qhe(t,r),$X(r,t),hhe(zB),NE=!!qB,zB=qB=null,t.current=r,Vhe(r),xfe(),da=l,$a=o,cd.transition=s}else t.current=r;if($N&&($N=!1,T0=t,LE=a),s=t.pendingLanes,s===0&&(K0=null),bfe(r.stateNode),Lc(t,ji()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(ME)throw ME=!1,t=AT,AT=null,t;return LE&1&&t.tag!==0&&av(),s=t.pendingLanes,s&1?t===mT?ib++:(ib=0,mT=t):ib=0,_m(),null}function av(){if(T0!==null){var t=PW(LE),e=cd.transition,r=$a;try{if(cd.transition=null,$a=16>t?16:t,T0===null)var n=!1;else{if(t=T0,T0=null,LE=0,da&6)throw Error(Cr(331));var a=da;for(da|=4,Kr=t.current;Kr!==null;){var s=Kr,o=s.child;if(Kr.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Kr=u;Kr!==null;){var d=Kr;switch(d.tag){case 0:case 11:case 15:ab(8,d,s)}var f=d.child;if(f!==null)f.return=d,Kr=f;else for(;Kr!==null;){d=Kr;var A=d.sibling,h=d.return;if(QX(d),d===u){Kr=null;break}if(A!==null){A.return=h,Kr=A;break}Kr=h}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Kr=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Kr=o;else e:for(;Kr!==null;){if(s=Kr,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ab(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Kr=v;break e}Kr=s.return}}var y=t.current;for(Kr=y;Kr!==null;){o=Kr;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Kr=b;else e:for(o=y;Kr!==null;){if(l=Kr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:YI(9,l)}}catch(P){hi(l,l.return,P)}if(l===o){Kr=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Kr=w;break e}Kr=l.return}}if(da=a,_m(),Qf&&typeof Qf.onPostCommitFiberRoot=="function")try{Qf.onPostCommitFiberRoot(HI,t)}catch{}n=!0}return n}finally{$a=r,cd.transition=e}}return!1}function gU(t,e,r){e=wv(r,e),e=PX(t,e,1),t=G0(t,e,1),e=dc(),t!==null&&(sw(t,1,e),Lc(t,e))}function hi(t,e,r){if(t.tag===3)gU(t,t,r);else for(;e!==null;){if(e.tag===3){gU(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(K0===null||!K0.has(n))){t=wv(r,t),t=BX(e,t,1),e=G0(e,t,1),t=dc(),e!==null&&(sw(e,1,t),Lc(e,t));break}}e=e.return}}function zhe(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=dc(),t.pingedLanes|=t.suspendedLanes&r,Qo===t&&(pl&r)===r&&(go===4||go===3&&(pl&130023424)===pl&&500>ji()-zO?Cp(t,0):qO|=r),Lc(t,e)}function YX(t,e){e===0&&(t.mode&1?(e=FN,FN<<=1,!(FN&130023424)&&(FN=4194304)):e=1);var r=dc();t=eA(t,e),t!==null&&(sw(t,e,r),Lc(t,r))}function Whe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),YX(t,r)}function Xhe(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Cr(314))}n!==null&&n.delete(e),YX(t,r)}var JX;JX=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rc.current)Fc=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Fc=!1,Rhe(t,e,r);Fc=!!(t.flags&131072)}else Fc=!1,Ps&&e.flags&1048576&&rX(e,PE,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;R_(t,e),t=e.pendingProps;var a=xv(e,$l.current);nv(e,r),a=QO(null,e,n,t,a,r);var s=VO();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mc(n)?(s=!0,IE(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,DO(e),a.updater=XI,e.stateNode=a,a._reactInternals=e,nT(e,n,t,r),e=iT(null,e,n,!0,s,r)):(e.tag=0,Ps&&s&&jO(e),sc(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(R_(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Jhe(n),t=Ud(n,t),a){case 0:e=sT(null,e,n,t,r);break e;case 1:e=oU(null,e,n,t,r);break e;case 11:e=sU(null,e,n,t,r);break e;case 14:e=iU(null,e,n,Ud(n.type,t),r);break e}throw Error(Cr(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ud(n,a),sT(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ud(n,a),oU(t,e,n,a,r);case 3:e:{if(OX(e),t===null)throw Error(Cr(387));n=e.pendingProps,s=e.memoizedState,a=s.element,lX(t,e),kE(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=wv(Error(Cr(423)),e),e=lU(t,e,n,r,a);break e}else if(n!==a){a=wv(Error(Cr(424)),e),e=lU(t,e,n,r,a);break e}else for(hu=$0(e.stateNode.containerInfo.firstChild),gu=e,Ps=!0,Vd=null,r=iX(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vv(),n===a){e=tA(t,e,r);break e}sc(t,e,n,r)}e=e.child}return e;case 5:return cX(e),t===null&&eT(e),n=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,o=a.children,WB(n,a)?o=null:s!==null&&WB(n,s)&&(e.flags|=32),FX(t,e),sc(t,e,o,r),e.child;case 6:return t===null&&eT(e),null;case 13:return DX(t,e,r);case 4:return RO(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=yv(e,null,n,r):sc(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ud(n,a),sU(t,e,n,a,r);case 7:return sc(t,e,e.pendingProps,r),e.child;case 8:return sc(t,e,e.pendingProps.children,r),e.child;case 12:return sc(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,s=e.memoizedProps,o=a.value,us(BE,n._currentValue),n._currentValue=o,s!==null)if(af(s.value,o)){if(s.children===a.children&&!Rc.current){e=tA(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Qh(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),tT(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Cr(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),tT(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}sc(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,nv(e,r),a=Ad(a),n=n(a),e.flags|=1,sc(t,e,n,r),e.child;case 14:return n=e.type,a=Ud(n,e.pendingProps),a=Ud(n.type,a),iU(t,e,n,a,r);case 15:return TX(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ud(n,a),R_(t,e),e.tag=1,Mc(n)?(t=!0,IE(e)):t=!1,nv(e,r),jX(e,n,a),nT(e,n,a,r),iT(null,e,n,!0,t,r);case 19:return RX(t,e,r);case 22:return kX(t,e,r)}throw Error(Cr(156,e.tag))};function ZX(t,e){return EW(t,e)}function Yhe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nd(t,e,r,n){return new Yhe(t,e,r,n)}function JO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jhe(t){if(typeof t=="function")return JO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gO)return 11;if(t===xO)return 14}return 2}function z0(t,e){var r=t.alternate;return r===null?(r=nd(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function U_(t,e,r,n,a,s){var o=2;if(n=t,typeof t=="function")JO(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Tx:return _p(r.children,a,s,e);case pO:o=8,a|=8;break;case SB:return t=nd(12,r,e,a|2),t.elementType=SB,t.lanes=s,t;case IB:return t=nd(13,r,e,a),t.elementType=IB,t.lanes=s,t;case jB:return t=nd(19,r,e,a),t.elementType=jB,t.lanes=s,t;case cW:return ZI(r,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oW:o=10;break e;case lW:o=9;break e;case gO:o=11;break e;case xO:o=14;break e;case A0:o=16,n=null;break e}throw Error(Cr(130,t==null?t:typeof t,""))}return e=nd(o,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function _p(t,e,r,n){return t=nd(7,t,n,e),t.lanes=r,t}function ZI(t,e,r,n){return t=nd(22,t,n,e),t.elementType=cW,t.lanes=r,t.stateNode={isHidden:!1},t}function n3(t,e,r){return t=nd(6,t,null,e),t.lanes=r,t}function a3(t,e,r){return e=nd(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zhe(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=M4(0),this.expirationTimes=M4(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=M4(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ZO(t,e,r,n,a,s,o,l,c){return t=new Zhe(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=nd(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},DO(s),t}function eAe(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bx,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function eY(t){if(!t)return im;t=t._reactInternals;e:{if(bg(t)!==t||t.tag!==1)throw Error(Cr(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Cr(171))}if(t.tag===1){var r=t.type;if(Mc(r))return eX(t,r,e)}return e}function tY(t,e,r,n,a,s,o,l,c){return t=ZO(r,n,!0,t,a,s,o,l,c),t.context=eY(null),r=t.current,n=dc(),a=q0(r),s=Qh(n,a),s.callback=e??null,G0(r,s,a),t.current.lanes=a,sw(t,a,n),Lc(t,n),t}function ej(t,e,r,n){var a=e.current,s=dc(),o=q0(a);return r=eY(r),e.context===null?e.context=r:e.pendingContext=r,e=Qh(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=G0(a,e,o),t!==null&&(Yd(t,a,o,s),F_(t,a,o)),o}function QE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xU(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function eD(t,e){xU(t,e),(t=t.alternate)&&xU(t,e)}function tAe(){return null}var rY=typeof reportError=="function"?reportError:function(t){console.error(t)};function tD(t){this._internalRoot=t}tj.prototype.render=tD.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Cr(409));ej(t,e,null,null)};tj.prototype.unmount=tD.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kp(function(){ej(null,t,null,null)}),e[Zh]=null}};function tj(t){this._internalRoot=t}tj.prototype.unstable_scheduleHydration=function(t){if(t){var e=kW();t={blockedOn:null,target:t,priority:e};for(var r=0;r<y0.length&&e!==0&&e<y0[r].priority;r++);y0.splice(r,0,t),r===0&&OW(t)}};function rD(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rj(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vU(){}function rAe(t,e,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=QE(o);s.call(u)}}var o=tY(e,n,t,0,null,!1,!1,"",vU);return t._reactRootContainer=o,t[Zh]=o.current,Gb(t.nodeType===8?t.parentNode:t),Kp(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=QE(c);l.call(u)}}var c=ZO(t,0,!1,null,null,!1,!1,"",vU);return t._reactRootContainer=c,t[Zh]=c.current,Gb(t.nodeType===8?t.parentNode:t),Kp(function(){ej(e,c,r,n)}),c}function nj(t,e,r,n,a){var s=r._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=QE(o);l.call(c)}}ej(e,o,t,a)}else o=rAe(r,e,t,a,n);return QE(o)}BW=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Iy(e.pendingLanes);r!==0&&(bO(e,r|1),Lc(e,ji()),!(da&6)&&(Nv=ji()+500,_m()))}break;case 13:Kp(function(){var n=eA(t,1);if(n!==null){var a=dc();Yd(n,t,1,a)}}),eD(t,1)}};wO=function(t){if(t.tag===13){var e=eA(t,134217728);if(e!==null){var r=dc();Yd(e,t,134217728,r)}eD(t,134217728)}};TW=function(t){if(t.tag===13){var e=q0(t),r=eA(t,e);if(r!==null){var n=dc();Yd(r,t,e,n)}eD(t,e)}};kW=function(){return $a};FW=function(t,e){var r=$a;try{return $a=t,e()}finally{$a=r}};LB=function(t,e,r){switch(e){case"input":if(TB(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=qI(n);if(!a)throw Error(Cr(90));dW(n),TB(n,a)}}}break;case"textarea":hW(t,r);break;case"select":e=r.value,e!=null&&Zx(t,!!r.multiple,e,!1)}};yW=WO;bW=Kp;var nAe={usingClientEntryPoint:!1,Events:[ow,Dx,qI,xW,vW,WO]},W1={findFiberByHostInstance:hp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aAe={bundleType:W1.bundleType,version:W1.version,rendererPackageName:W1.rendererPackageName,rendererConfig:W1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=CW(t),t===null?null:t.stateNode},findFiberByHostInstance:W1.findFiberByHostInstance||tAe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var GN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!GN.isDisabled&&GN.supportsFiber)try{HI=GN.inject(aAe),Qf=GN}catch{}}_u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nAe;_u.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rD(e))throw Error(Cr(200));return eAe(t,e,null,r)};_u.createRoot=function(t,e){if(!rD(t))throw Error(Cr(299));var r=!1,n="",a=rY;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=ZO(t,1,!1,null,null,r,!1,n,a),t[Zh]=e.current,Gb(t.nodeType===8?t.parentNode:t),new tD(e)};_u.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Cr(188)):(t=Object.keys(t).join(","),Error(Cr(268,t)));return t=CW(e),t=t===null?null:t.stateNode,t};_u.flushSync=function(t){return Kp(t)};_u.hydrate=function(t,e,r){if(!rj(e))throw Error(Cr(200));return nj(null,t,e,!0,r)};_u.hydrateRoot=function(t,e,r){if(!rD(t))throw Error(Cr(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",o=rY;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=tY(e,null,t,1,r??null,a,!1,s,o),t[Zh]=e.current,Gb(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new tj(e)};_u.render=function(t,e,r){if(!rj(e))throw Error(Cr(200));return nj(null,t,e,!1,r)};_u.unmountComponentAtNode=function(t){if(!rj(t))throw Error(Cr(40));return t._reactRootContainer?(Kp(function(){nj(null,null,t,!1,function(){t._reactRootContainer=null,t[Zh]=null})}),!0):!1};_u.unstable_batchedUpdates=WO;_u.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!rj(r))throw Error(Cr(200));if(t==null||t._reactInternals===void 0)throw Error(Cr(38));return nj(t,e,r,!1,n)};_u.version="18.3.1-next-f1338f8080-20240426";function nY(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nY)}catch(t){console.error(t)}}nY(),nW.exports=_u;var xu=nW.exports,yU=xu;_B.createRoot=yU.createRoot,_B.hydrateRoot=yU.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bU="popstate";function sAe(t={}){function e(n,a){let{pathname:s,search:o,hash:l}=n.location;return xT("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:e2(a)}return oAe(e,r,null,t)}function Os(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iAe(){return Math.random().toString(36).substring(2,10)}function wU(t,e){return{usr:t.state,key:t.key,idx:e}}function xT(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Yv(e):e,state:r,key:e&&e.key||n||iAe()}}function e2({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Yv(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function oAe(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,o=a.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let g=d(),v=g==null?null:g-u;u=g,c&&c({action:l,location:p.location,delta:v})}function A(g,v){l="PUSH";let y=xT(p.location,g,v);u=d()+1;let b=wU(y,u),w=p.createHref(y);try{o.pushState(b,"",w)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(w)}s&&c&&c({action:l,location:p.location,delta:1})}function h(g,v){l="REPLACE";let y=xT(p.location,g,v);u=d();let b=wU(y,u),w=p.createHref(y);o.replaceState(b,"",w),s&&c&&c({action:l,location:p.location,delta:0})}function m(g){return lAe(g)}let p={get action(){return l},get location(){return t(a,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(bU,f),c=g,()=>{a.removeEventListener(bU,f),c=null}},createHref(g){return e(a,g)},createURL:m,encodeLocation(g){let v=m(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:A,replace:h,go(g){return o.go(g)}};return p}function lAe(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Os(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:e2(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function aY(t,e,r="/"){return cAe(t,e,r,!1)}function cAe(t,e,r,n){let a=typeof e=="string"?Yv(e):e,s=rA(a.pathname||"/",r);if(s==null)return null;let o=sY(t);uAe(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=bAe(s);l=vAe(o[c],u,n)}return l}function sY(t,e=[],r=[],n="",a=!1){let s=(o,l,c=a,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;Os(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=Vh([n,d.relativePath]),A=r.concat(d);o.children&&o.children.length>0&&(Os(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),sY(o.children,e,A,f,c)),!(o.path==null&&!o.index)&&e.push({path:f,score:gAe(f,o.index),routesMeta:A})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let u of iY(o.path))s(o,l,!0,u)}),e}function iY(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let o=iY(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function uAe(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:xAe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var dAe=/^:[\w-]+$/,fAe=3,hAe=2,AAe=1,mAe=10,pAe=-2,NU=t=>t==="*";function gAe(t,e){let r=t.split("/"),n=r.length;return r.some(NU)&&(n+=pAe),e&&(n+=hAe),r.filter(a=>!NU(a)).reduce((a,s)=>a+(dAe.test(s)?fAe:s===""?AAe:mAe),n)}function xAe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function vAe(t,e,r=!1){let{routesMeta:n}=t,a={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=VE({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),A=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=VE({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Vh([s,f.pathname]),pathnameBase:_Ae(Vh([s,f.pathnameBase])),route:A}),f.pathnameBase!=="/"&&(s=Vh([s,f.pathnameBase]))}return o}function VE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=yAe(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},A)=>{if(d==="*"){let m=l[A]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const h=l[A];return f&&!h?u[d]=void 0:u[d]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function yAe(t,e=!1,r=!0){sf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function bAe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sf(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function rA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function wAe(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Yv(t):t;return{pathname:r?r.startsWith("/")?r:NAe(r,e):e,search:EAe(n),hash:SAe(a)}}function NAe(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function s3(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CAe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function nD(t){let e=CAe(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function aD(t,e,r,n=!1){let a;typeof t=="string"?a=Yv(t):(a={...t},Os(!a.pathname||!a.pathname.includes("?"),s3("?","pathname","search",a)),Os(!a.pathname||!a.pathname.includes("#"),s3("#","pathname","hash",a)),Os(!a.search||!a.search.includes("#"),s3("#","search","hash",a)));let s=t===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let A=o.split("/");for(;A[0]==="..";)A.shift(),f-=1;a.pathname=A.join("/")}l=f>=0?e[f]:"/"}let c=wAe(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Vh=t=>t.join("/").replace(/\/\/+/g,"/"),_Ae=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EAe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,SAe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function IAe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var oY=["POST","PUT","PATCH","DELETE"];new Set(oY);var jAe=["GET",...oY];new Set(jAe);var Jv=x.createContext(null);Jv.displayName="DataRouter";var aj=x.createContext(null);aj.displayName="DataRouterState";x.createContext(!1);var lY=x.createContext({isTransitioning:!1});lY.displayName="ViewTransition";var PAe=x.createContext(new Map);PAe.displayName="Fetchers";var BAe=x.createContext(null);BAe.displayName="Await";var uf=x.createContext(null);uf.displayName="Navigation";var cw=x.createContext(null);cw.displayName="Location";var df=x.createContext({outlet:null,matches:[],isDataRoute:!1});df.displayName="Route";var sD=x.createContext(null);sD.displayName="RouteError";function TAe(t,{relative:e}={}){Os(Zv(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=x.useContext(uf),{hash:a,pathname:s,search:o}=dw(t,{relative:e}),l=s;return r!=="/"&&(l=s==="/"?r:Vh([r,s])),n.createHref({pathname:l,search:o,hash:a})}function Zv(){return x.useContext(cw)!=null}function xA(){return Os(Zv(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(cw).location}var cY="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uY(t){x.useContext(uf).static||x.useLayoutEffect(t)}function uw(){let{isDataRoute:t}=x.useContext(df);return t?qAe():kAe()}function kAe(){Os(Zv(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(Jv),{basename:e,navigator:r}=x.useContext(uf),{matches:n}=x.useContext(df),{pathname:a}=xA(),s=JSON.stringify(nD(n)),o=x.useRef(!1);return uY(()=>{o.current=!0}),x.useCallback((c,u={})=>{if(sf(o.current,cY),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=aD(c,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Vh([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}var FAe=x.createContext(null);function OAe(t){let e=x.useContext(df).outlet;return e&&x.createElement(FAe.Provider,{value:t},e)}function dw(t,{relative:e}={}){let{matches:r}=x.useContext(df),{pathname:n}=xA(),a=JSON.stringify(nD(r));return x.useMemo(()=>aD(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function DAe(t,e){return dY(t,e)}function dY(t,e,r,n){var v;Os(Zv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=x.useContext(uf),{matches:s}=x.useContext(df),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let y=d&&d.path||"";fY(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=xA(),A;if(e){let y=typeof e=="string"?Yv(e):e;Os(u==="/"||((v=y.pathname)==null?void 0:v.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),A=y}else A=f;let h=A.pathname||"/",m=h;if(u!=="/"){let y=u.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=aY(t,{pathname:m});sf(d||p!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),sf(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=QAe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Vh([u,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Vh([u,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&g?x.createElement(cw.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},g):g}function RAe(){let t=KAe(),e=IAe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:s},"ErrorBoundary")," or"," ",x.createElement("code",{style:s},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),r?x.createElement("pre",{style:a},r):null,o)}var MAe=x.createElement(RAe,null),LAe=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?x.createElement(df.Provider,{value:this.props.routeContext},x.createElement(sD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UAe({routeContext:t,match:e,children:r}){let n=x.useContext(Jv);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(df.Provider,{value:t},r)}function QAe(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Os(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=r,A=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||A){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let f,A=!1,h=null,m=null;r&&(f=s&&u.route.id?s[u.route.id]:void 0,h=u.route.errorElement||MAe,o&&(l<0&&d===0?(fY("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,m=null):l===d&&(A=!0,m=u.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,d+1)),g=()=>{let v;return f?v=h:A?v=m:u.route.Component?v=x.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=c,x.createElement(UAe,{match:u,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:v})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?x.createElement(LAe,{location:r.location,revalidation:r.revalidation,component:h,error:f,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function iD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VAe(t){let e=x.useContext(Jv);return Os(e,iD(t)),e}function HAe(t){let e=x.useContext(aj);return Os(e,iD(t)),e}function $Ae(t){let e=x.useContext(df);return Os(e,iD(t)),e}function oD(t){let e=$Ae(t),r=e.matches[e.matches.length-1];return Os(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function GAe(){return oD("useRouteId")}function KAe(){var n;let t=x.useContext(sD),e=HAe("useRouteError"),r=oD("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function qAe(){let{router:t}=VAe("useNavigate"),e=oD("useNavigate"),r=x.useRef(!1);return uY(()=>{r.current=!0}),x.useCallback(async(a,s={})=>{sf(r.current,cY),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var CU={};function fY(t,e,r){!e&&!CU[t]&&(CU[t]=!0,sf(!1,r))}x.memo(zAe);function zAe({routes:t,future:e,state:r}){return dY(t,void 0,r,e)}function Nh({to:t,replace:e,state:r,relative:n}){Os(Zv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=x.useContext(uf);sf(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=x.useContext(df),{pathname:o}=xA(),l=uw(),c=aD(t,nD(s),o,n==="path"),u=JSON.stringify(c);return x.useEffect(()=>{l(JSON.parse(u),{replace:e,state:r,relative:n})},[l,u,n,e,r]),null}function hY(t){return OAe(t.context)}function Pn(t){Os(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WAe({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){Os(!Zv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=x.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);typeof r=="string"&&(r=Yv(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:A="default"}=r,h=x.useMemo(()=>{let m=rA(c,o);return m==null?null:{location:{pathname:m,search:u,hash:d,state:f,key:A},navigationType:n}},[o,c,u,d,f,A,n]);return sf(h!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:x.createElement(uf.Provider,{value:l},x.createElement(cw.Provider,{children:e,value:h}))}function XAe({children:t,location:e}){return DAe(vT(t),e)}function vT(t,e=[]){let r=[];return x.Children.forEach(t,(n,a)=>{if(!x.isValidElement(n))return;let s=[...e,a];if(n.type===x.Fragment){r.push.apply(r,vT(n.props.children,s));return}Os(n.type===Pn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Os(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=vT(n.props.children,s)),r.push(o)}),r}var Q_="get",V_="application/x-www-form-urlencoded";function sj(t){return t!=null&&typeof t.tagName=="string"}function YAe(t){return sj(t)&&t.tagName.toLowerCase()==="button"}function JAe(t){return sj(t)&&t.tagName.toLowerCase()==="form"}function ZAe(t){return sj(t)&&t.tagName.toLowerCase()==="input"}function e0e(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function t0e(t,e){return t.button===0&&(!e||e==="_self")&&!e0e(t)}var KN=null;function r0e(){if(KN===null)try{new FormData(document.createElement("form"),0),KN=!1}catch{KN=!0}return KN}var n0e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function i3(t){return t!=null&&!n0e.has(t)?(sf(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${V_}"`),null):t}function a0e(t,e){let r,n,a,s,o;if(JAe(t)){let l=t.getAttribute("action");n=l?rA(l,e):null,r=t.getAttribute("method")||Q_,a=i3(t.getAttribute("enctype"))||V_,s=new FormData(t)}else if(YAe(t)||ZAe(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?rA(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||Q_,a=i3(t.getAttribute("formenctype"))||i3(l.getAttribute("enctype"))||V_,s=new FormData(l,t),!r0e()){let{name:u,type:d,value:f}=t;if(d==="image"){let A=u?`${u}.`:"";s.append(`${A}x`,"0"),s.append(`${A}y`,"0")}else u&&s.append(u,f)}}else{if(sj(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Q_,n=null,a=V_,o=t}return s&&a==="text/plain"&&(o=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function s0e(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&rA(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function i0e(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function o0e(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function l0e(t,e,r){let n=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let o=await i0e(s,r);return o.links?o.links():[]}return[]}));return f0e(n.flat(1).filter(o0e).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function _U(t,e,r,n,a,s){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let A=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function c0e(t,e,{includeHydrateFallback:r}={}){return u0e(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function u0e(t){return[...new Set(t)]}function d0e(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function f0e(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let s=JSON.stringify(d0e(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function AY(){let t=x.useContext(Jv);return lD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function h0e(){let t=x.useContext(aj);return lD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var cD=x.createContext(void 0);cD.displayName="FrameworkContext";function mY(){let t=x.useContext(cD);return lD(t,"You must render this element inside a <HydratedRouter> element"),t}function A0e(t,e){let r=x.useContext(cD),[n,a]=x.useState(!1),[s,o]=x.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,A=x.useRef(null);x.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let p=v=>{v.forEach(y=>{o(y.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return A.current&&g.observe(A.current),()=>{g.disconnect()}}},[t]),x.useEffect(()=>{if(n){let p=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(p)}}},[n]);let h=()=>{a(!0)},m=()=>{a(!1),o(!1)};return r?t!=="intent"?[s,A,{}]:[s,A,{onFocus:X1(l,h),onBlur:X1(c,m),onMouseEnter:X1(u,h),onMouseLeave:X1(d,m),onTouchStart:X1(f,h)}]:[!1,A,{}]}function X1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function m0e({page:t,...e}){let{router:r}=AY(),n=x.useMemo(()=>aY(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?x.createElement(g0e,{page:t,matches:n,...e}):null}function p0e(t){let{manifest:e,routeModules:r}=mY(),[n,a]=x.useState([]);return x.useEffect(()=>{let s=!1;return l0e(t,e,r).then(o=>{s||a(o)}),()=>{s=!0}},[t,e,r]),n}function g0e({page:t,matches:e,...r}){let n=xA(),{manifest:a,routeModules:s}=mY(),{basename:o}=AY(),{loaderData:l,matches:c}=h0e(),u=x.useMemo(()=>_U(t,e,c,a,n,"data"),[t,e,c,a,n]),d=x.useMemo(()=>_U(t,e,c,a,n,"assets"),[t,e,c,a,n]),f=x.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let m=new Set,p=!1;if(e.forEach(v=>{var b;let y=a.routes[v.route.id];!y||!y.hasLoader||(!u.some(w=>w.route.id===v.route.id)&&v.route.id in l&&((b=s[v.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?p=!0:m.add(v.route.id))}),m.size===0)return[];let g=s0e(t,o,"data");return p&&m.size>0&&g.searchParams.set("_routes",e.filter(v=>m.has(v.route.id)).map(v=>v.route.id).join(",")),[g.pathname+g.search]},[o,l,n,a,u,e,t,s]),A=x.useMemo(()=>c0e(d,a),[d,a]),h=p0e(d);return x.createElement(x.Fragment,null,f.map(m=>x.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),A.map(m=>x.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),h.map(({key:m,link:p})=>x.createElement("link",{key:m,nonce:r.nonce,...p})))}function x0e(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var pY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pY&&(window.__reactRouterVersion="7.8.1")}catch{}function v0e({basename:t,children:e,window:r}){let n=x.useRef();n.current==null&&(n.current=sAe({window:r,v5Compat:!0}));let a=n.current,[s,o]=x.useState({action:a.action,location:a.location}),l=x.useCallback(c=>{x.startTransition(()=>o(c))},[o]);return x.useLayoutEffect(()=>a.listen(l),[a,l]),x.createElement(WAe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var gY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xY=x.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...A},h){let{basename:m}=x.useContext(uf),p=typeof u=="string"&&gY.test(u),g,v=!1;if(typeof u=="string"&&p&&(g=u,pY))try{let E=new URL(window.location.href),F=u.startsWith("//")?new URL(E.protocol+u):new URL(u),k=rA(F.pathname,m);F.origin===E.origin&&k!=null?u=k+F.search+F.hash:v=!0}catch{sf(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=TAe(u,{relative:a}),[b,w,P]=A0e(n,A),j=w0e(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function _(E){e&&e(E),E.defaultPrevented||j(E)}let I=x.createElement("a",{...A,...P,href:g||y,onClick:v||s?e:_,ref:x0e(h,w),target:c,"data-discover":!p&&r==="render"?"true":void 0});return b&&!p?x.createElement(x.Fragment,null,I,x.createElement(m0e,{page:y})):I});xY.displayName="Link";var An=x.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:o,viewTransition:l,children:c,...u},d){let f=dw(o,{relative:u.relative}),A=xA(),h=x.useContext(aj),{navigator:m,basename:p}=x.useContext(uf),g=h!=null&&S0e(f)&&l===!0,v=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,y=A.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&p&&(b=rA(b,p)||b);const w=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let P=y===v||!a&&y.startsWith(v)&&y.charAt(w)==="/",j=b!=null&&(b===v||!a&&b.startsWith(v)&&b.charAt(v.length)==="/"),_={isActive:P,isPending:j,isTransitioning:g},I=P?e:void 0,E;typeof n=="function"?E=n(_):E=[n,P?"active":null,j?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let F=typeof s=="function"?s(_):s;return x.createElement(xY,{...u,"aria-current":I,className:E,ref:d,style:F,to:o,viewTransition:l},typeof c=="function"?c(_):c)});An.displayName="NavLink";var y0e=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:s,method:o=Q_,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...A},h)=>{let m=_0e(),p=E0e(l,{relative:u}),g=o.toLowerCase()==="get"?"get":"post",v=typeof l=="string"&&gY.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,P=(w==null?void 0:w.getAttribute("formmethod"))||o;m(w||b.currentTarget,{fetcherKey:e,method:P,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:f})};return x.createElement("form",{ref:h,method:g,action:p,onSubmit:n?c:y,...A,"data-discover":!v&&t==="render"?"true":void 0})});y0e.displayName="Form";function b0e(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vY(t){let e=x.useContext(Jv);return Os(e,b0e(t)),e}function w0e(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:o}={}){let l=uw(),c=xA(),u=dw(t,{relative:s});return x.useCallback(d=>{if(t0e(d,e)){d.preventDefault();let f=r!==void 0?r:e2(c)===e2(u);l(t,{replace:f,state:n,preventScrollReset:a,relative:s,viewTransition:o})}},[c,l,u,r,n,e,t,a,s,o])}var N0e=0,C0e=()=>`__${String(++N0e)}__`;function _0e(){let{router:t}=vY("useSubmit"),{basename:e}=x.useContext(uf),r=GAe();return x.useCallback(async(n,a={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=a0e(n,e);if(a.navigate===!1){let d=a.fetcherKey||C0e();await t.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function E0e(t,{relative:e}={}){let{basename:r}=x.useContext(uf),n=x.useContext(df);Os(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...dw(t||".",{relative:e})},o=xA();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:Vh([r,s.pathname])),e2(s)}function S0e(t,{relative:e}={}){let r=x.useContext(lY);Os(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=vY("useViewTransitionState"),a=dw(t,{relative:e});if(!r.isTransitioning)return!1;let s=rA(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=rA(r.nextLocation.pathname,n)||r.nextLocation.pathname;return VE(a.pathname,o)!=null||VE(a.pathname,s)!=null}function mn(t,e){if(!t)return!1;const r=String(e);if(Array.isArray(t))return t.map(String).includes(r);const n=String(t);return n===r||n==="vendedor"&&r==="vendedor_pollo"}var EU={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yY=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},I0e=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],o=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],o=a+1<t.length,l=o?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let A=(l&15)<<2|u>>6,h=u&63;c||(h=64,o||(A=64)),n.push(r[d],r[f],r[A],r[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yY(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):I0e(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new j0e;const A=s<<2|l>>4;if(n.push(A),u!==64){const h=l<<4&240|u>>2;if(n.push(h),f!==64){const m=u<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class j0e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P0e=function(t){const e=yY(t);return bY.encodeByteArray(e,!0)},HE=function(t){return P0e(t).replace(/\./g,"")},wY=function(t){try{return bY.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0e=()=>B0e().__FIREBASE_DEFAULTS__,k0e=()=>{if(typeof process>"u"||typeof EU>"u")return;const t=EU.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},F0e=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wY(t[1]);return e&&JSON.parse(e)},ij=()=>{try{return T0e()||k0e()||F0e()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NY=t=>{var e,r;return(r=(e=ij())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},O0e=t=>{const e=NY(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},CY=()=>{var t;return(t=ij())===null||t===void 0?void 0:t.config},_Y=t=>{var e;return(e=ij())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0e(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[HE(JSON.stringify(r)),HE(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M0e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vo())}function L0e(){var t;const e=(t=ij())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function U0e(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Q0e(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function V0e(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function H0e(){const t=vo();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function EY(){return!L0e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SY(){try{return typeof indexedDB=="object"}catch{return!1}}function $0e(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0e="FirebaseError";class vA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=G0e,Object.setPrototypeOf(this,vA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fw.prototype.create)}}class fw{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],o=s?K0e(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new vA(a,l,n)}}function K0e(t,e){return t.replace(q0e,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const q0e=/\{\$([^}]+)}/g;function z0e(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function t2(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],o=e[a];if(SU(s)&&SU(o)){if(!t2(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function SU(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Py(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function By(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function W0e(t,e){const r=new X0e(t,e);return r.subscribe.bind(r)}class X0e{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Y0e(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=o3),a.error===void 0&&(a.error=o3),a.complete===void 0&&(a.complete=o3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y0e(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function o3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t){return t&&t._delegate?t._delegate:t}class qp{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J0e=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new D0e;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eme(e))try{this.getOrInitializeService({instanceIdentifier:Jm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=Jm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jm){return this.instances.has(e)}getOptions(e=Jm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const o=this.instances.get(a);return o&&e(o,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Z0e(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Jm){return this.component?this.component.multipleInstances?e:Jm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Z0e(t){return t===Jm?void 0:t}function eme(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tme{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new J0e(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ra;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ra||(ra={}));const rme={debug:ra.DEBUG,verbose:ra.VERBOSE,info:ra.INFO,warn:ra.WARN,error:ra.ERROR,silent:ra.SILENT},nme=ra.INFO,ame={[ra.DEBUG]:"log",[ra.VERBOSE]:"log",[ra.INFO]:"info",[ra.WARN]:"warn",[ra.ERROR]:"error"},sme=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=ame[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let uD=class{constructor(e){this.name=e,this._logLevel=nme,this._logHandler=sme,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ra))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rme[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ra.DEBUG,...e),this._logHandler(this,ra.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ra.VERBOSE,...e),this._logHandler(this,ra.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ra.INFO,...e),this._logHandler(this,ra.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ra.WARN,...e),this._logHandler(this,ra.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ra.ERROR,...e),this._logHandler(this,ra.ERROR,...e)}};const ime=(t,e)=>e.some(r=>t instanceof r);let IU,jU;function ome(){return IU||(IU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lme(){return jU||(jU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IY=new WeakMap,yT=new WeakMap,jY=new WeakMap,l3=new WeakMap,dD=new WeakMap;function cme(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(W0(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&IY.set(r,t)}).catch(()=>{}),dD.set(e,t),e}function ume(t){if(yT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});yT.set(t,e)}let bT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return yT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jY.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return W0(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dme(t){bT=t(bT)}function fme(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(c3(this),e,...r);return jY.set(n,e.sort?e.sort():[e]),W0(n)}:lme().includes(t)?function(...e){return t.apply(c3(this),e),W0(IY.get(this))}:function(...e){return W0(t.apply(c3(this),e))}}function hme(t){return typeof t=="function"?fme(t):(t instanceof IDBTransaction&&ume(t),ime(t,ome())?new Proxy(t,bT):t)}function W0(t){if(t instanceof IDBRequest)return cme(t);if(l3.has(t))return l3.get(t);const e=hme(t);return e!==t&&(l3.set(t,e),dD.set(e,t)),e}const c3=t=>dD.get(t);function Ame(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(t,e),l=W0(o);return n&&o.addEventListener("upgradeneeded",c=>{n(W0(o.result),c.oldVersion,c.newVersion,W0(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const mme=["get","getKey","getAll","getAllKeys","count"],pme=["put","add","delete","clear"],u3=new Map;function PU(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(u3.get(e))return u3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=pme.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||mme.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return u3.set(e,s),s}dme(t=>({...t,get:(e,r,n)=>PU(e,r)||t.get(e,r,n),has:(e,r)=>!!PU(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gme{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(xme(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function xme(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wT="@firebase/app",BU="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=new uD("@firebase/app"),vme="@firebase/app-compat",yme="@firebase/analytics-compat",bme="@firebase/analytics",wme="@firebase/app-check-compat",Nme="@firebase/app-check",Cme="@firebase/auth",_me="@firebase/auth-compat",Eme="@firebase/database",Sme="@firebase/data-connect",Ime="@firebase/database-compat",jme="@firebase/functions",Pme="@firebase/functions-compat",Bme="@firebase/installations",Tme="@firebase/installations-compat",kme="@firebase/messaging",Fme="@firebase/messaging-compat",Ome="@firebase/performance",Dme="@firebase/performance-compat",Rme="@firebase/remote-config",Mme="@firebase/remote-config-compat",Lme="@firebase/storage",Ume="@firebase/storage-compat",Qme="@firebase/firestore",Vme="@firebase/vertexai-preview",Hme="@firebase/firestore-compat",$me="firebase",Gme="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="[DEFAULT]",Kme={[wT]:"fire-core",[vme]:"fire-core-compat",[bme]:"fire-analytics",[yme]:"fire-analytics-compat",[Nme]:"fire-app-check",[wme]:"fire-app-check-compat",[Cme]:"fire-auth",[_me]:"fire-auth-compat",[Eme]:"fire-rtdb",[Sme]:"fire-data-connect",[Ime]:"fire-rtdb-compat",[jme]:"fire-fn",[Pme]:"fire-fn-compat",[Bme]:"fire-iid",[Tme]:"fire-iid-compat",[kme]:"fire-fcm",[Fme]:"fire-fcm-compat",[Ome]:"fire-perf",[Dme]:"fire-perf-compat",[Rme]:"fire-rc",[Mme]:"fire-rc-compat",[Lme]:"fire-gcs",[Ume]:"fire-gcs-compat",[Qme]:"fire-fst",[Hme]:"fire-fst-compat",[Vme]:"fire-vertex","fire-js":"fire-js",[$me]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map,CT=new Map,_T=new Map;function TU(t,e){try{t.container.addComponent(e)}catch(r){nA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function _v(t){const e=t.name;if(_T.has(e))return nA.debug(`There were multiple attempts to register component ${e}.`),!1;_T.set(e,t);for(const r of Cv.values())TU(r,t);for(const r of CT.values())TU(r,t);return!0}function fD(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ff(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qme={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},X0=new fw("app","Firebase",qme);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zme{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new qp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw X0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=Gme;function hD(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:NT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw X0.create("bad-app-name",{appName:String(a)});if(r||(r=CY()),!r)throw X0.create("no-options");const s=Cv.get(a);if(s){if(t2(r,s.options)&&t2(n,s.config))return s;throw X0.create("duplicate-app",{appName:a})}const o=new tme(a);for(const c of _T.values())o.addComponent(c);const l=new zme(r,n,o);return Cv.set(a,l),l}function AD(t=NT){const e=Cv.get(t);if(!e&&t===NT&&CY())return hD();if(!e)throw X0.create("no-app",{appName:t});return e}async function Wme(t){let e=!1;const r=t.name;Cv.has(r)?(e=!0,Cv.delete(r)):CT.has(r)&&t.decRefCount()<=0&&(CT.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Y0(t,e,r){var n;let a=(n=Kme[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${a}" with version "${e}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nA.warn(l.join(" "));return}_v(new qp(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xme="firebase-heartbeat-database",Yme=1,r2="firebase-heartbeat-store";let d3=null;function PY(){return d3||(d3=Ame(Xme,Yme,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(r2)}catch(r){console.warn(r)}}}}).catch(t=>{throw X0.create("idb-open",{originalErrorMessage:t.message})})),d3}async function Jme(t){try{const r=(await PY()).transaction(r2),n=await r.objectStore(r2).get(BY(t));return await r.done,n}catch(e){if(e instanceof vA)nA.warn(e.message);else{const r=X0.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nA.warn(r.message)}}}async function kU(t,e){try{const n=(await PY()).transaction(r2,"readwrite");await n.objectStore(r2).put(e,BY(t)),await n.done}catch(r){if(r instanceof vA)nA.warn(r.message);else{const n=X0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});nA.warn(n.message)}}}function BY(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zme=1024,epe=30*24*60*60*1e3;class tpe{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new npe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=FU();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=epe}),this._storage.overwrite(this._heartbeatsCache))}catch(n){nA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=FU(),{heartbeatsToSend:n,unsentEntries:a}=rpe(this._heartbeatsCache.heartbeats),s=HE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return nA.warn(r),""}}}function FU(){return new Date().toISOString().substring(0,10)}function rpe(t,e=Zme){const r=[];let n=t.slice();for(const a of t){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),OU(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),OU(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class npe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SY()?$0e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Jme(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return kU(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return kU(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function OU(t){return HE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ape(t){_v(new qp("platform-logger",e=>new gme(e),"PRIVATE")),_v(new qp("heartbeat",e=>new tpe(e),"PRIVATE")),Y0(wT,BU,t),Y0(wT,BU,"esm2017"),Y0("fire-js","")}ape("");function mD(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function TY(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const spe=TY,kY=new fw("auth","Firebase",TY());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=new uD("@firebase/auth");function ipe(t,...e){$E.logLevel<=ra.WARN&&$E.warn(`Auth (${e1}): ${t}`,...e)}function H_(t,...e){$E.logLevel<=ra.ERROR&&$E.error(`Auth (${e1}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t,...e){throw pD(t,...e)}function Hf(t,...e){return pD(t,...e)}function FY(t,e,r){const n=Object.assign(Object.assign({},spe()),{[e]:r});return new fw("auth","Firebase",n).create(e,{appName:t.name})}function Hh(t){return FY(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pD(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return kY.create(t,...e)}function En(t,e,...r){if(!t)throw pD(e,...r)}function kh(t){const e="INTERNAL ASSERTION FAILED: "+t;throw H_(e),new Error(e)}function aA(t,e){t||kh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ope(){return DU()==="http:"||DU()==="https:"}function DU(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lpe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ope()||Q0e()||"connection"in navigator)?navigator.onLine:!0}function cpe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,r){this.shortDelay=e,this.longDelay=r,aA(r>e,"Short delay should be less than long delay!"),this.isMobile=M0e()||V0e()}get(){return lpe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t,e){aA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OY{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const upe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dpe=new Aw(3e4,6e4);function yA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bA(t,e,r,n,a={}){return DY(t,a,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const l=hw(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return U0e()||(u.referrerPolicy="no-referrer"),OY.fetch()(RY(t,t.config.apiHost,r,l),u)})}async function DY(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},upe),e);try{const a=new hpe(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw qN(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qN(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw qN(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw qN(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw FY(t,d,u);of(t,d)}}catch(a){if(a instanceof vA)throw a;of(t,"network-request-failed",{message:String(a)})}}async function mw(t,e,r,n,a={}){const s=await bA(t,e,r,n,a);return"mfaPendingCredential"in s&&of(t,"multi-factor-auth-required",{_serverResponse:s}),s}function RY(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?gD(t.config,a):`${t.config.apiScheme}://${a}`}function fpe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hpe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Hf(this.auth,"network-request-failed")),dpe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qN(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Hf(t,e,n);return a.customData._tokenResponse=r,a}function RU(t){return t!==void 0&&t.enterprise!==void 0}class Ape{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return fpe(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function mpe(t,e){return bA(t,"GET","/v2/recaptchaConfig",yA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ppe(t,e){return bA(t,"POST","/v1/accounts:delete",e)}async function MY(t,e){return bA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gpe(t,e=!1){const r=ri(t),n=await r.getIdToken(e),a=xD(n);En(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:ob(f3(a.auth_time)),issuedAtTime:ob(f3(a.iat)),expirationTime:ob(f3(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function f3(t){return Number(t)*1e3}function xD(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return H_("JWT malformed, contained fewer than 3 sections"),null;try{const a=wY(r);return a?JSON.parse(a):(H_("Failed to decode base64 JWT payload"),null)}catch(a){return H_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function MU(t){const e=xD(t);return En(e,"internal-error"),En(typeof e.exp<"u","internal-error"),En(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof vA&&xpe(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function xpe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vpe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ob(this.lastLoginAt),this.creationTime=ob(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GE(t){var e;const r=t.auth,n=await t.getIdToken(),a=await n2(t,MY(r,{idToken:n}));En(a==null?void 0:a.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?LY(s.providerUserInfo):[],l=bpe(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new ST(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function ype(t){const e=ri(t);await GE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bpe(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function LY(t){return t.map(e=>{var{providerId:r}=e,n=mD(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wpe(t,e){const r=await DY(t,{},async()=>{const n=hw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,o=RY(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",OY.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Npe(t,e){return bA(t,"POST","/v2/accounts:revokeToken",yA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){En(e.idToken,"internal-error"),En(typeof e.idToken<"u","internal-error"),En(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):MU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){En(e.length!==0,"internal-error");const r=MU(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(En(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await wpe(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new sv;return n&&(En(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(En(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),s&&(En(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sv,this.toJSON())}_performRefresh(){return kh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t,e){En(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fh{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=mD(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vpe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ST(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await n2(this,this.stsTokenManager.getToken(this.auth,e));return En(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return gpe(this,e)}reload(){return ype(this)}_assign(e){this!==e&&(En(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Fh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){En(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await GE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ff(this.auth.app))return Promise.reject(Hh(this.auth));const e=await this.getIdToken();return await n2(this,ppe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,o,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,A=(a=r.email)!==null&&a!==void 0?a:void 0,h=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=r.photoURL)!==null&&o!==void 0?o:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,g=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,v=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:w,isAnonymous:P,providerData:j,stsTokenManager:_}=r;En(b&&_,e,"internal-error");const I=sv.fromJSON(this.name,_);En(typeof b=="string",e,"internal-error"),YA(f,e.name),YA(A,e.name),En(typeof w=="boolean",e,"internal-error"),En(typeof P=="boolean",e,"internal-error"),YA(h,e.name),YA(m,e.name),YA(p,e.name),YA(g,e.name),YA(v,e.name),YA(y,e.name);const E=new Fh({uid:b,auth:e,email:A,emailVerified:w,displayName:f,isAnonymous:P,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:I,createdAt:v,lastLoginAt:y});return j&&Array.isArray(j)&&(E.providerData=j.map(F=>Object.assign({},F))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,r,n=!1){const a=new sv;a.updateFromServerResponse(r);const s=new Fh({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await GE(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];En(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?LY(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new sv;l.updateFromIdToken(n);const c=new Fh({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new ST(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=new Map;function Oh(t){aA(t instanceof Function,"Expected a class definition");let e=LU.get(t);return e?(aA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LU.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}UY.type="NONE";const UU=UY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t,e,r){return`firebase:${t}:${e}:${r}`}class iv{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=$_(this.userKey,a.apiKey,s),this.fullPersistenceKey=$_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fh._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new iv(Oh(UU),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Oh(UU);const o=$_(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){const f=Fh._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new iv(s,e,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new iv(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($Y(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QY(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KY(e))return"Blackberry";if(qY(e))return"Webos";if(VY(e))return"Safari";if((e.includes("chrome/")||HY(e))&&!e.includes("edge/"))return"Chrome";if(GY(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function QY(t=vo()){return/firefox\//i.test(t)}function VY(t=vo()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HY(t=vo()){return/crios\//i.test(t)}function $Y(t=vo()){return/iemobile/i.test(t)}function GY(t=vo()){return/android/i.test(t)}function KY(t=vo()){return/blackberry/i.test(t)}function qY(t=vo()){return/webos/i.test(t)}function vD(t=vo()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Cpe(t=vo()){var e;return vD(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _pe(){return H0e()&&document.documentMode===10}function zY(t=vo()){return vD(t)||GY(t)||qY(t)||KY(t)||/windows phone/i.test(t)||$Y(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WY(t,e=[]){let r;switch(t){case"Browser":r=QU(vo());break;case"Worker":r=`${QU(vo())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${e1}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Epe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Spe(t,e={}){return bA(t,"GET","/v2/passwordPolicy",yA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ipe=6;class jpe{constructor(e){var r,n,a,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:Ipe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ppe{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VU(this),this.idTokenSubscription=new VU(this),this.beforeStateQueue=new Epe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Oh(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await iv.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await MY(this,{idToken:e}),n=await Fh._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ff(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return En(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await GE(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cpe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ff(this.app))return Promise.reject(Hh(this));const r=e?ri(e):null;return r&&En(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&En(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ff(this.app)?Promise.reject(Hh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ff(this.app)?Promise.reject(Hh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oh(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Spe(this),r=new jpe(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fw("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Npe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Oh(e)||this._popupRedirectResolver;En(r,this,"argument-error"),this.redirectPersistenceManager=await iv.create(this,[Oh(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(En(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return En(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WY(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&ipe(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Em(t){return ri(t)}class VU{constructor(e){this.auth=e,this.observer=null,this.addObserver=W0e(r=>this.observer=r)}get next(){return En(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oj={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Bpe(t){oj=t}function XY(t){return oj.loadJS(t)}function Tpe(){return oj.recaptchaEnterpriseScript}function kpe(){return oj.gapiScript}function Fpe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Ope="recaptcha-enterprise",Dpe="NO_RECAPTCHA";class Rpe{constructor(e){this.type=Ope,this.auth=Em(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{mpe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Ape(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;RU(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(Dpe)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&RU(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Tpe();c.length!==0&&(c+=l),XY(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function HU(t,e,r,n=!1){const a=new Rpe(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function KE(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await HU(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await HU(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mpe(t,e){const r=fD(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(t2(s,e??{}))return a;of(a,"already-initialized")}return r.initialize({options:e})}function Lpe(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Oh);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Upe(t,e,r){const n=Em(t);En(n._canInitEmulator,n,"emulator-config-failed"),En(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=YY(e),{host:o,port:l}=Qpe(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${s}//${o}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),Vpe()}function YY(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Qpe(t){const e=YY(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:$U(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:$U(o)}}}function $U(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Vpe(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return kh("not implemented")}_getIdTokenResponse(e){return kh("not implemented")}_linkToIdToken(e,r){return kh("not implemented")}_getReauthenticationResolver(e){return kh("not implemented")}}async function Hpe(t,e){return bA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $pe(t,e){return mw(t,"POST","/v1/accounts:signInWithPassword",yA(t,e))}async function Gpe(t,e){return bA(t,"POST","/v1/accounts:sendOobCode",yA(t,e))}async function Kpe(t,e){return Gpe(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qpe(t,e){return mw(t,"POST","/v1/accounts:signInWithEmailLink",yA(t,e))}async function zpe(t,e){return mw(t,"POST","/v1/accounts:signInWithEmailLink",yA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends yD{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new a2(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new a2(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return KE(e,r,"signInWithPassword",$pe);case"emailLink":return qpe(e,{email:this._email,oobCode:this._password});default:of(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return KE(e,n,"signUpPassword",Hpe);case"emailLink":return zpe(e,{idToken:r,email:this._email,oobCode:this._password});default:of(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ov(t,e){return mw(t,"POST","/v1/accounts:signInWithIdp",yA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wpe="http://localhost";class zp extends yD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new zp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):of("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=mD(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new zp(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return ov(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ov(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ov(e,r)}buildRequest(){const e={requestUri:Wpe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=hw(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xpe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ype(t){const e=Py(By(t)).link,r=e?Py(By(e)).deep_link_id:null,n=Py(By(t)).deep_link_id;return(n?Py(By(n)).link:null)||n||r||e||t}class bD{constructor(e){var r,n,a,s,o,l;const c=Py(By(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,f=Xpe((a=c.mode)!==null&&a!==void 0?a:null);En(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=Ype(e);try{return new bD(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(){this.providerId=t1.PROVIDER_ID}static credential(e,r){return a2._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=bD.parseLink(r);return En(n,"argument-error"),a2._fromEmailAndCode(e,n.code,n.tenantId)}}t1.PROVIDER_ID="password";t1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";t1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JY{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw extends JY{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends pw{constructor(){super("facebook.com")}static credential(e){return zp._fromParams({providerId:w0.PROVIDER_ID,signInMethod:w0.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return w0.credentialFromTaggedObject(e)}static credentialFromError(e){return w0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return w0.credential(e.oauthAccessToken)}catch{return null}}}w0.FACEBOOK_SIGN_IN_METHOD="facebook.com";w0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0 extends pw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return zp._fromParams({providerId:N0.PROVIDER_ID,signInMethod:N0.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return N0.credentialFromTaggedObject(e)}static credentialFromError(e){return N0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return N0.credential(r,n)}catch{return null}}}N0.GOOGLE_SIGN_IN_METHOD="google.com";N0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0 extends pw{constructor(){super("github.com")}static credential(e){return zp._fromParams({providerId:C0.PROVIDER_ID,signInMethod:C0.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return C0.credentialFromTaggedObject(e)}static credentialFromError(e){return C0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return C0.credential(e.oauthAccessToken)}catch{return null}}}C0.GITHUB_SIGN_IN_METHOD="github.com";C0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends pw{constructor(){super("twitter.com")}static credential(e,r){return zp._fromParams({providerId:_0.PROVIDER_ID,signInMethod:_0.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return _0.credentialFromTaggedObject(e)}static credentialFromError(e){return _0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return _0.credential(r,n)}catch{return null}}}_0.TWITTER_SIGN_IN_METHOD="twitter.com";_0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jpe(t,e){return mw(t,"POST","/v1/accounts:signUp",yA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await Fh._fromIdTokenResponse(e,n,a),o=GU(n);return new Wp({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=GU(n);return new Wp({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function GU(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends vA{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,qE.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new qE(e,r,n,a)}}function ZY(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?qE._fromErrorAndOperation(t,s,e,n):s})}async function Zpe(t,e,r=!1){const n=await n2(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Wp._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ege(t,e,r=!1){const{auth:n}=t;if(Ff(n.app))return Promise.reject(Hh(n));const a="reauthenticate";try{const s=await n2(t,ZY(n,a,e,t),r);En(s.idToken,n,"internal-error");const o=xD(s.idToken);En(o,n,"internal-error");const{sub:l}=o;return En(t.uid===l,n,"user-mismatch"),Wp._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&of(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eJ(t,e,r=!1){if(Ff(t.app))return Promise.reject(Hh(t));const n="signIn",a=await ZY(t,n,e),s=await Wp._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function tge(t,e){return eJ(Em(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tJ(t){const e=Em(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rge(t,e,r){const n=Em(t);await KE(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Kpe)}async function nge(t,e,r){if(Ff(t.app))return Promise.reject(Hh(t));const n=Em(t),o=await KE(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jpe).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&tJ(t),c}),l=await Wp._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function age(t,e,r){return Ff(t.app)?Promise.reject(Hh(t)):tge(ri(t),t1.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&tJ(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(t,e){return ri(t).setPersistence(e)}function sge(t,e,r,n){return ri(t).onIdTokenChanged(e,r,n)}function ige(t,e,r){return ri(t).beforeAuthStateChanged(e,r)}function lj(t,e,r,n){return ri(t).onAuthStateChanged(e,r,n)}function wD(t){return ri(t).signOut()}const zE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(zE,"1"),this.storage.removeItem(zE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oge=1e3,lge=10;class nJ extends rJ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zY(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);_pe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,lge):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},oge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}nJ.type="LOCAL";const ND=nJ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aJ extends rJ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}aJ.type="SESSION";const CD=aJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cge(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new cj(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await cge(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cj.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uge{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=_D("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(f){const A=f;if(A.data.eventId===u)switch(A.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(A.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(){return window}function dge(t){$f().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sJ(){return typeof $f().WorkerGlobalScope<"u"&&typeof $f().importScripts=="function"}async function fge(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hge(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Age(){return sJ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iJ="firebaseLocalStorageDb",mge=1,WE="firebaseLocalStorage",oJ="fbase_key";class gw{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function uj(t,e){return t.transaction([WE],e?"readwrite":"readonly").objectStore(WE)}function pge(){const t=indexedDB.deleteDatabase(iJ);return new gw(t).toPromise()}function IT(){const t=indexedDB.open(iJ,mge);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(WE,{keyPath:oJ})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(WE)?e(n):(n.close(),await pge(),e(await IT()))})})}async function KU(t,e,r){const n=uj(t,!0).put({[oJ]:e,value:r});return new gw(n).toPromise()}async function gge(t,e){const r=uj(t,!1).get(e),n=await new gw(r).toPromise();return n===void 0?null:n.value}function qU(t,e){const r=uj(t,!0).delete(e);return new gw(r).toPromise()}const xge=800,vge=3;class lJ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await IT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>vge)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sJ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cj._getInstance(Age()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await fge(),!this.activeServiceWorker)return;this.sender=new uge(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hge()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await IT();return await KU(e,zE,"1"),await qU(e,zE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>KU(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>gge(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>qU(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=uj(a,!1).getAll();return new gw(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lJ.type="LOCAL";const cJ=lJ;new Aw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yge(t,e){return e?Oh(e):(En(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED extends yD{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ov(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ov(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ov(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function bge(t){return eJ(t.auth,new ED(t),t.bypassAuthState)}function wge(t){const{auth:e,user:r}=t;return En(r,e,"internal-error"),ege(r,new ED(t),t.bypassAuthState)}async function Nge(t){const{auth:e,user:r}=t;return En(r,e,"internal-error"),Zpe(r,new ED(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uJ{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bge;case"linkViaPopup":case"linkViaRedirect":return Nge;case"reauthViaPopup":case"reauthViaRedirect":return wge;default:of(this.auth,"internal-error")}}resolve(e){aA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){aA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cge=new Aw(2e3,1e4);class Hx extends uJ{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,Hx.currentPopupAction&&Hx.currentPopupAction.cancel(),Hx.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return En(e,this.auth,"internal-error"),e}async onExecution(){aA(this.filter.length===1,"Popup operations only handle one event");const e=_D();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Hf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hx.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Cge.get())};e()}}Hx.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ge="pendingRedirect",K_=new Map;class Ege extends uJ{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=K_.get(this.auth._key());if(!e){try{const n=await Sge(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}K_.set(this.auth._key(),e)}return this.bypassAuthState||K_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Sge(t,e){const r=Pge(e),n=jge(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Ige(t,e){K_.set(t._key(),e)}function jge(t){return Oh(t._redirectPersistence)}function Pge(t){return $_(_ge,t.config.apiKey,t.name)}async function Bge(t,e,r=!1){if(Ff(t.app))return Promise.reject(Hh(t));const n=Em(t),a=yge(n,e),o=await new Ege(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tge=10*60*1e3;class kge{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Fge(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!dJ(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Hf(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Tge&&this.cachedEventUids.clear(),this.cachedEventUids.has(zU(e))}saveEventToCache(e){this.cachedEventUids.add(zU(e)),this.lastProcessedEventTime=Date.now()}}function zU(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dJ({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Fge(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dJ(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oge(t,e={}){return bA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dge=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rge=/^https?/;async function Mge(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Oge(t);for(const r of e)try{if(Lge(r))return}catch{}of(t,"unauthorized-domain")}function Lge(t){const e=ET(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!Rge.test(r))return!1;if(Dge.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uge=new Aw(3e4,6e4);function WU(){const t=$f().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Qge(t){return new Promise((e,r)=>{var n,a,s;function o(){WU(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WU(),r(Hf(t,"network-request-failed"))},timeout:Uge.get()})}if(!((a=(n=$f().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=$f().gapi)===null||s===void 0)&&s.load)o();else{const l=Fpe("iframefcb");return $f()[l]=()=>{gapi.load?o():r(Hf(t,"network-request-failed"))},XY(`${kpe()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw q_=null,e})}let q_=null;function Vge(t){return q_=q_||Qge(t),q_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hge=new Aw(5e3,15e3),$ge="__/auth/iframe",Gge="emulator/auth/iframe",Kge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qge=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zge(t){const e=t.config;En(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?gD(e,Gge):`https://${t.config.authDomain}/${$ge}`,n={apiKey:e.apiKey,appName:t.name,v:e1},a=qge.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${hw(n).slice(1)}`}async function Wge(t){const e=await Vge(t),r=$f().gapi;return En(r,t,"internal-error"),e.open({where:document.body,url:zge(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kge,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=Hf(t,"network-request-failed"),l=$f().setTimeout(()=>{s(o)},Hge.get());function c(){$f().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yge=500,Jge=600,Zge="_blank",exe="http://localhost";class XU{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function txe(t,e,r,n=Yge,a=Jge){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Xge),{width:n.toString(),height:a.toString(),top:s,left:o}),u=vo().toLowerCase();r&&(l=HY(u)?Zge:r),QY(u)&&(e=e||exe,c.scrollbars="yes");const d=Object.entries(c).reduce((A,[h,m])=>`${A}${h}=${m},`,"");if(Cpe(u)&&l!=="_self")return rxe(e||"",l),new XU(null);const f=window.open(e||"",l,d);En(f,t,"popup-blocked");try{f.focus()}catch{}return new XU(f)}function rxe(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nxe="__/auth/handler",axe="emulator/auth/handler",sxe=encodeURIComponent("fac");async function YU(t,e,r,n,a,s){En(t.config.authDomain,t,"auth-domain-config-required"),En(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:e1,eventId:a};if(e instanceof JY){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",z0e(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof pw){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${sxe}=${encodeURIComponent(c)}`:"";return`${ixe(t)}?${hw(l).slice(1)}${u}`}function ixe({config:t}){return t.emulator?gD(t,axe):`https://${t.authDomain}/${nxe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3="webStorageSupport";class oxe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CD,this._completeRedirectFn=Bge,this._overrideRedirectResult=Ige}async _openPopup(e,r,n,a){var s;aA((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await YU(e,r,n,ET(),a);return txe(e,o,_D())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await YU(e,r,n,ET(),a);return dge(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(aA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Wge(e),n=new kge(e);return r.register("authEvent",a=>(En(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(h3,{type:h3},a=>{var s;const o=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s[h3];o!==void 0&&r(!!o),of(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Mge(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return zY()||VY()||vD()}}const lxe=oxe;var JU="@firebase/auth",ZU="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cxe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){En(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uxe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dxe(t){_v(new qp("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;En(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WY(t)},u=new Ppe(n,a,s,c);return Lpe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),_v(new qp("auth-internal",e=>{const r=Em(e.getProvider("auth").getImmediate());return(n=>new cxe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Y0(JU,ZU,uxe(t)),Y0(JU,ZU,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fxe=5*60,hxe=_Y("authIdTokenMaxAge")||fxe;let e7=null;const Axe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>hxe)return;const a=r==null?void 0:r.token;e7!==a&&(e7=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function jT(t=AD()){const e=fD(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Mpe(t,{popupRedirectResolver:lxe,persistence:[cJ,ND,CD]}),n=_Y("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=Axe(s.toString());ige(r,o,()=>o(r.currentUser)),sge(r,l=>o(l))}}const a=NY("auth");return a&&Upe(r,`http://${a}`),r}function mxe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Bpe({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=Hf("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",mxe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dxe("Browser");var pxe="firebase",gxe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Y0(pxe,gxe,"app");var t7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ep,fJ;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,I){function E(){}E.prototype=I.prototype,_.D=I.prototype,_.prototype=new E,_.prototype.constructor=_,_.C=function(F,k,B){for(var R=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)R[Y-2]=arguments[Y];return I.prototype[k].apply(F,R)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(_,I,E){E||(E=0);var F=Array(16);if(typeof I=="string")for(var k=0;16>k;++k)F[k]=I.charCodeAt(E++)|I.charCodeAt(E++)<<8|I.charCodeAt(E++)<<16|I.charCodeAt(E++)<<24;else for(k=0;16>k;++k)F[k]=I[E++]|I[E++]<<8|I[E++]<<16|I[E++]<<24;I=_.g[0],E=_.g[1],k=_.g[2];var B=_.g[3],R=I+(B^E&(k^B))+F[0]+3614090360&4294967295;I=E+(R<<7&4294967295|R>>>25),R=B+(k^I&(E^k))+F[1]+3905402710&4294967295,B=I+(R<<12&4294967295|R>>>20),R=k+(E^B&(I^E))+F[2]+606105819&4294967295,k=B+(R<<17&4294967295|R>>>15),R=E+(I^k&(B^I))+F[3]+3250441966&4294967295,E=k+(R<<22&4294967295|R>>>10),R=I+(B^E&(k^B))+F[4]+4118548399&4294967295,I=E+(R<<7&4294967295|R>>>25),R=B+(k^I&(E^k))+F[5]+1200080426&4294967295,B=I+(R<<12&4294967295|R>>>20),R=k+(E^B&(I^E))+F[6]+2821735955&4294967295,k=B+(R<<17&4294967295|R>>>15),R=E+(I^k&(B^I))+F[7]+4249261313&4294967295,E=k+(R<<22&4294967295|R>>>10),R=I+(B^E&(k^B))+F[8]+1770035416&4294967295,I=E+(R<<7&4294967295|R>>>25),R=B+(k^I&(E^k))+F[9]+2336552879&4294967295,B=I+(R<<12&4294967295|R>>>20),R=k+(E^B&(I^E))+F[10]+4294925233&4294967295,k=B+(R<<17&4294967295|R>>>15),R=E+(I^k&(B^I))+F[11]+2304563134&4294967295,E=k+(R<<22&4294967295|R>>>10),R=I+(B^E&(k^B))+F[12]+1804603682&4294967295,I=E+(R<<7&4294967295|R>>>25),R=B+(k^I&(E^k))+F[13]+4254626195&4294967295,B=I+(R<<12&4294967295|R>>>20),R=k+(E^B&(I^E))+F[14]+2792965006&4294967295,k=B+(R<<17&4294967295|R>>>15),R=E+(I^k&(B^I))+F[15]+1236535329&4294967295,E=k+(R<<22&4294967295|R>>>10),R=I+(k^B&(E^k))+F[1]+4129170786&4294967295,I=E+(R<<5&4294967295|R>>>27),R=B+(E^k&(I^E))+F[6]+3225465664&4294967295,B=I+(R<<9&4294967295|R>>>23),R=k+(I^E&(B^I))+F[11]+643717713&4294967295,k=B+(R<<14&4294967295|R>>>18),R=E+(B^I&(k^B))+F[0]+3921069994&4294967295,E=k+(R<<20&4294967295|R>>>12),R=I+(k^B&(E^k))+F[5]+3593408605&4294967295,I=E+(R<<5&4294967295|R>>>27),R=B+(E^k&(I^E))+F[10]+38016083&4294967295,B=I+(R<<9&4294967295|R>>>23),R=k+(I^E&(B^I))+F[15]+3634488961&4294967295,k=B+(R<<14&4294967295|R>>>18),R=E+(B^I&(k^B))+F[4]+3889429448&4294967295,E=k+(R<<20&4294967295|R>>>12),R=I+(k^B&(E^k))+F[9]+568446438&4294967295,I=E+(R<<5&4294967295|R>>>27),R=B+(E^k&(I^E))+F[14]+3275163606&4294967295,B=I+(R<<9&4294967295|R>>>23),R=k+(I^E&(B^I))+F[3]+4107603335&4294967295,k=B+(R<<14&4294967295|R>>>18),R=E+(B^I&(k^B))+F[8]+1163531501&4294967295,E=k+(R<<20&4294967295|R>>>12),R=I+(k^B&(E^k))+F[13]+2850285829&4294967295,I=E+(R<<5&4294967295|R>>>27),R=B+(E^k&(I^E))+F[2]+4243563512&4294967295,B=I+(R<<9&4294967295|R>>>23),R=k+(I^E&(B^I))+F[7]+1735328473&4294967295,k=B+(R<<14&4294967295|R>>>18),R=E+(B^I&(k^B))+F[12]+2368359562&4294967295,E=k+(R<<20&4294967295|R>>>12),R=I+(E^k^B)+F[5]+4294588738&4294967295,I=E+(R<<4&4294967295|R>>>28),R=B+(I^E^k)+F[8]+2272392833&4294967295,B=I+(R<<11&4294967295|R>>>21),R=k+(B^I^E)+F[11]+1839030562&4294967295,k=B+(R<<16&4294967295|R>>>16),R=E+(k^B^I)+F[14]+4259657740&4294967295,E=k+(R<<23&4294967295|R>>>9),R=I+(E^k^B)+F[1]+2763975236&4294967295,I=E+(R<<4&4294967295|R>>>28),R=B+(I^E^k)+F[4]+1272893353&4294967295,B=I+(R<<11&4294967295|R>>>21),R=k+(B^I^E)+F[7]+4139469664&4294967295,k=B+(R<<16&4294967295|R>>>16),R=E+(k^B^I)+F[10]+3200236656&4294967295,E=k+(R<<23&4294967295|R>>>9),R=I+(E^k^B)+F[13]+681279174&4294967295,I=E+(R<<4&4294967295|R>>>28),R=B+(I^E^k)+F[0]+3936430074&4294967295,B=I+(R<<11&4294967295|R>>>21),R=k+(B^I^E)+F[3]+3572445317&4294967295,k=B+(R<<16&4294967295|R>>>16),R=E+(k^B^I)+F[6]+76029189&4294967295,E=k+(R<<23&4294967295|R>>>9),R=I+(E^k^B)+F[9]+3654602809&4294967295,I=E+(R<<4&4294967295|R>>>28),R=B+(I^E^k)+F[12]+3873151461&4294967295,B=I+(R<<11&4294967295|R>>>21),R=k+(B^I^E)+F[15]+530742520&4294967295,k=B+(R<<16&4294967295|R>>>16),R=E+(k^B^I)+F[2]+3299628645&4294967295,E=k+(R<<23&4294967295|R>>>9),R=I+(k^(E|~B))+F[0]+4096336452&4294967295,I=E+(R<<6&4294967295|R>>>26),R=B+(E^(I|~k))+F[7]+1126891415&4294967295,B=I+(R<<10&4294967295|R>>>22),R=k+(I^(B|~E))+F[14]+2878612391&4294967295,k=B+(R<<15&4294967295|R>>>17),R=E+(B^(k|~I))+F[5]+4237533241&4294967295,E=k+(R<<21&4294967295|R>>>11),R=I+(k^(E|~B))+F[12]+1700485571&4294967295,I=E+(R<<6&4294967295|R>>>26),R=B+(E^(I|~k))+F[3]+2399980690&4294967295,B=I+(R<<10&4294967295|R>>>22),R=k+(I^(B|~E))+F[10]+4293915773&4294967295,k=B+(R<<15&4294967295|R>>>17),R=E+(B^(k|~I))+F[1]+2240044497&4294967295,E=k+(R<<21&4294967295|R>>>11),R=I+(k^(E|~B))+F[8]+1873313359&4294967295,I=E+(R<<6&4294967295|R>>>26),R=B+(E^(I|~k))+F[15]+4264355552&4294967295,B=I+(R<<10&4294967295|R>>>22),R=k+(I^(B|~E))+F[6]+2734768916&4294967295,k=B+(R<<15&4294967295|R>>>17),R=E+(B^(k|~I))+F[13]+1309151649&4294967295,E=k+(R<<21&4294967295|R>>>11),R=I+(k^(E|~B))+F[4]+4149444226&4294967295,I=E+(R<<6&4294967295|R>>>26),R=B+(E^(I|~k))+F[11]+3174756917&4294967295,B=I+(R<<10&4294967295|R>>>22),R=k+(I^(B|~E))+F[2]+718787259&4294967295,k=B+(R<<15&4294967295|R>>>17),R=E+(B^(k|~I))+F[9]+3951481745&4294967295,_.g[0]=_.g[0]+I&4294967295,_.g[1]=_.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,_.g[2]=_.g[2]+k&4294967295,_.g[3]=_.g[3]+B&4294967295}n.prototype.u=function(_,I){I===void 0&&(I=_.length);for(var E=I-this.blockSize,F=this.B,k=this.h,B=0;B<I;){if(k==0)for(;B<=E;)a(this,_,B),B+=this.blockSize;if(typeof _=="string"){for(;B<I;)if(F[k++]=_.charCodeAt(B++),k==this.blockSize){a(this,F),k=0;break}}else for(;B<I;)if(F[k++]=_[B++],k==this.blockSize){a(this,F),k=0;break}}this.h=k,this.o+=I},n.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var I=1;I<_.length-8;++I)_[I]=0;var E=8*this.o;for(I=_.length-8;I<_.length;++I)_[I]=E&255,E/=256;for(this.u(_),_=Array(16),I=E=0;4>I;++I)for(var F=0;32>F;F+=8)_[E++]=this.g[I]>>>F&255;return _};function s(_,I){var E=l;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=I(_)}function o(_,I){this.h=I;for(var E=[],F=!0,k=_.length-1;0<=k;k--){var B=_[k]|0;F&&B==I||(E[k]=B,F=!1)}this.g=E}var l={};function c(_){return-128<=_&&128>_?s(_,function(I){return new o([I|0],0>I?-1:0)}):new o([_|0],0>_?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return f;if(0>_)return g(u(-_));for(var I=[],E=1,F=0;_>=E;F++)I[F]=_/E|0,E*=4294967296;return new o(I,0)}function d(_,I){if(_.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_.charAt(0)=="-")return g(d(_.substring(1),I));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(I,8)),F=f,k=0;k<_.length;k+=8){var B=Math.min(8,_.length-k),R=parseInt(_.substring(k,k+B),I);8>B?(B=u(Math.pow(I,B)),F=F.j(B).add(u(R))):(F=F.j(E),F=F.add(u(R)))}return F}var f=c(0),A=c(1),h=c(16777216);t=o.prototype,t.m=function(){if(p(this))return-g(this).m();for(var _=0,I=1,E=0;E<this.g.length;E++){var F=this.i(E);_+=(0<=F?F:4294967296+F)*I,I*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+g(this).toString(_);for(var I=u(Math.pow(_,6)),E=this,F="";;){var k=w(E,I).g;E=v(E,k.j(I));var B=((0<E.g.length?E.g[0]:E.h)>>>0).toString(_);if(E=k,m(E))return B+F;for(;6>B.length;)B="0"+B;F=B+F}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var I=0;I<_.g.length;I++)if(_.g[I]!=0)return!1;return!0}function p(_){return _.h==-1}t.l=function(_){return _=v(this,_),p(_)?-1:m(_)?0:1};function g(_){for(var I=_.g.length,E=[],F=0;F<I;F++)E[F]=~_.g[F];return new o(E,~_.h).add(A)}t.abs=function(){return p(this)?g(this):this},t.add=function(_){for(var I=Math.max(this.g.length,_.g.length),E=[],F=0,k=0;k<=I;k++){var B=F+(this.i(k)&65535)+(_.i(k)&65535),R=(B>>>16)+(this.i(k)>>>16)+(_.i(k)>>>16);F=R>>>16,B&=65535,R&=65535,E[k]=R<<16|B}return new o(E,E[E.length-1]&-2147483648?-1:0)};function v(_,I){return _.add(g(I))}t.j=function(_){if(m(this)||m(_))return f;if(p(this))return p(_)?g(this).j(g(_)):g(g(this).j(_));if(p(_))return g(this.j(g(_)));if(0>this.l(h)&&0>_.l(h))return u(this.m()*_.m());for(var I=this.g.length+_.g.length,E=[],F=0;F<2*I;F++)E[F]=0;for(F=0;F<this.g.length;F++)for(var k=0;k<_.g.length;k++){var B=this.i(F)>>>16,R=this.i(F)&65535,Y=_.i(k)>>>16,me=_.i(k)&65535;E[2*F+2*k]+=R*me,y(E,2*F+2*k),E[2*F+2*k+1]+=B*me,y(E,2*F+2*k+1),E[2*F+2*k+1]+=R*Y,y(E,2*F+2*k+1),E[2*F+2*k+2]+=B*Y,y(E,2*F+2*k+2)}for(F=0;F<I;F++)E[F]=E[2*F+1]<<16|E[2*F];for(F=I;F<2*I;F++)E[F]=0;return new o(E,0)};function y(_,I){for(;(_[I]&65535)!=_[I];)_[I+1]+=_[I]>>>16,_[I]&=65535,I++}function b(_,I){this.g=_,this.h=I}function w(_,I){if(m(I))throw Error("division by zero");if(m(_))return new b(f,f);if(p(_))return I=w(g(_),I),new b(g(I.g),g(I.h));if(p(I))return I=w(_,g(I)),new b(g(I.g),I.h);if(30<_.g.length){if(p(_)||p(I))throw Error("slowDivide_ only works with positive integers.");for(var E=A,F=I;0>=F.l(_);)E=P(E),F=P(F);var k=j(E,1),B=j(F,1);for(F=j(F,2),E=j(E,2);!m(F);){var R=B.add(F);0>=R.l(_)&&(k=k.add(E),B=R),F=j(F,1),E=j(E,1)}return I=v(_,k.j(I)),new b(k,I)}for(k=f;0<=_.l(I);){for(E=Math.max(1,Math.floor(_.m()/I.m())),F=Math.ceil(Math.log(E)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),B=u(E),R=B.j(I);p(R)||0<R.l(_);)E-=F,B=u(E),R=B.j(I);m(B)&&(B=A),k=k.add(B),_=v(_,R)}return new b(k,_)}t.A=function(_){return w(this,_).h},t.and=function(_){for(var I=Math.max(this.g.length,_.g.length),E=[],F=0;F<I;F++)E[F]=this.i(F)&_.i(F);return new o(E,this.h&_.h)},t.or=function(_){for(var I=Math.max(this.g.length,_.g.length),E=[],F=0;F<I;F++)E[F]=this.i(F)|_.i(F);return new o(E,this.h|_.h)},t.xor=function(_){for(var I=Math.max(this.g.length,_.g.length),E=[],F=0;F<I;F++)E[F]=this.i(F)^_.i(F);return new o(E,this.h^_.h)};function P(_){for(var I=_.g.length+1,E=[],F=0;F<I;F++)E[F]=_.i(F)<<1|_.i(F-1)>>>31;return new o(E,_.h)}function j(_,I){var E=I>>5;I%=32;for(var F=_.g.length-E,k=[],B=0;B<F;B++)k[B]=0<I?_.i(B+E)>>>I|_.i(B+E+1)<<32-I:_.i(B+E);return new o(k,_.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,fJ=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Ep=o}).apply(typeof t7<"u"?t7:typeof self<"u"?self:typeof window<"u"?window:{});var zN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hJ,Ty,AJ,z_,PT,mJ,pJ,gJ;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,Z,xe){return C==Array.prototype||C==Object.prototype||(C[Z]=xe.value),C};function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof zN=="object"&&zN];for(var Z=0;Z<C.length;++Z){var xe=C[Z];if(xe&&xe.Math==Math)return xe}throw Error("Cannot find global object")}var n=r(this);function a(C,Z){if(Z)e:{var xe=n;C=C.split(".");for(var ze=0;ze<C.length-1;ze++){var Rt=C[ze];if(!(Rt in xe))break e;xe=xe[Rt]}C=C[C.length-1],ze=xe[C],Z=Z(ze),Z!=ze&&Z!=null&&e(xe,C,{configurable:!0,writable:!0,value:Z})}}function s(C,Z){C instanceof String&&(C+="");var xe=0,ze=!1,Rt={next:function(){if(!ze&&xe<C.length){var Wt=xe++;return{value:Z(Wt,C[Wt]),done:!1}}return ze=!0,{done:!0,value:void 0}}};return Rt[Symbol.iterator]=function(){return Rt},Rt}a("Array.prototype.values",function(C){return C||function(){return s(this,function(Z,xe){return xe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(C){var Z=typeof C;return Z=Z!="object"?Z:C?Array.isArray(C)?"array":Z:"null",Z=="array"||Z=="object"&&typeof C.length=="number"}function u(C){var Z=typeof C;return Z=="object"&&C!=null||Z=="function"}function d(C,Z,xe){return C.call.apply(C.bind,arguments)}function f(C,Z,xe){if(!C)throw Error();if(2<arguments.length){var ze=Array.prototype.slice.call(arguments,2);return function(){var Rt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Rt,ze),C.apply(Z,Rt)}}return function(){return C.apply(Z,arguments)}}function A(C,Z,xe){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,A.apply(null,arguments)}function h(C,Z){var xe=Array.prototype.slice.call(arguments,1);return function(){var ze=xe.slice();return ze.push.apply(ze,arguments),C.apply(this,ze)}}function m(C,Z){function xe(){}xe.prototype=Z.prototype,C.aa=Z.prototype,C.prototype=new xe,C.prototype.constructor=C,C.Qb=function(ze,Rt,Wt){for(var Sr=Array(arguments.length-2),aa=2;aa<arguments.length;aa++)Sr[aa-2]=arguments[aa];return Z.prototype[Rt].apply(ze,Sr)}}function p(C){const Z=C.length;if(0<Z){const xe=Array(Z);for(let ze=0;ze<Z;ze++)xe[ze]=C[ze];return xe}return[]}function g(C,Z){for(let xe=1;xe<arguments.length;xe++){const ze=arguments[xe];if(c(ze)){const Rt=C.length||0,Wt=ze.length||0;C.length=Rt+Wt;for(let Sr=0;Sr<Wt;Sr++)C[Rt+Sr]=ze[Sr]}else C.push(ze)}}class v{constructor(Z,xe){this.i=Z,this.j=xe,this.h=0,this.g=null}get(){let Z;return 0<this.h?(this.h--,Z=this.g,this.g=Z.next,Z.next=null):Z=this.i(),Z}}function y(C){return/^[\s\xa0]*$/.test(C)}function b(){var C=l.navigator;return C&&(C=C.userAgent)?C:""}function w(C){return w[" "](C),C}w[" "]=function(){};var P=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function j(C,Z,xe){for(const ze in C)Z.call(xe,C[ze],ze,C)}function _(C,Z){for(const xe in C)Z.call(void 0,C[xe],xe,C)}function I(C){const Z={};for(const xe in C)Z[xe]=C[xe];return Z}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(C,Z){let xe,ze;for(let Rt=1;Rt<arguments.length;Rt++){ze=arguments[Rt];for(xe in ze)C[xe]=ze[xe];for(let Wt=0;Wt<E.length;Wt++)xe=E[Wt],Object.prototype.hasOwnProperty.call(ze,xe)&&(C[xe]=ze[xe])}}function k(C){var Z=1;C=C.split(":");const xe=[];for(;0<Z&&C.length;)xe.push(C.shift()),Z--;return C.length&&xe.push(C.join(":")),xe}function B(C){l.setTimeout(()=>{throw C},0)}function R(){var C=se;let Z=null;return C.g&&(Z=C.g,C.g=C.g.next,C.g||(C.h=null),Z.next=null),Z}class Y{constructor(){this.h=this.g=null}add(Z,xe){const ze=me.get();ze.set(Z,xe),this.h?this.h.next=ze:this.g=ze,this.h=ze}}var me=new v(()=>new pe,C=>C.reset());class pe{constructor(){this.next=this.g=this.h=null}set(Z,xe){this.h=Z,this.g=xe,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ge=!1,se=new Y,je=()=>{const C=l.Promise.resolve(void 0);he=()=>{C.then(Te)}};var Te=()=>{for(var C;C=R();){try{C.h.call(C.g)}catch(xe){B(xe)}var Z=me;Z.j(C),100>Z.h&&(Z.h++,C.next=Z.g,Z.g=C)}ge=!1};function D(){this.s=this.s,this.C=this.C}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(C,Z){this.type=C,this.g=this.target=Z,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var C=!1,Z=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const xe=()=>{};l.addEventListener("test",xe,Z),l.removeEventListener("test",xe,Z)}catch{}return C}();function Q(C,Z){if(K.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var xe=this.type=C.type,ze=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=Z,Z=C.relatedTarget){if(P){e:{try{w(Z.nodeName);var Rt=!0;break e}catch{}Rt=!1}Rt||(Z=null)}}else xe=="mouseover"?Z=C.fromElement:xe=="mouseout"&&(Z=C.toElement);this.relatedTarget=Z,ze?(this.clientX=ze.clientX!==void 0?ze.clientX:ze.pageX,this.clientY=ze.clientY!==void 0?ze.clientY:ze.pageY,this.screenX=ze.screenX||0,this.screenY=ze.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:J[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&Q.aa.h.call(this)}}m(Q,K);var J={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var ee="closure_listenable_"+(1e6*Math.random()|0),M=0;function G(C,Z,xe,ze,Rt){this.listener=C,this.proxy=null,this.src=Z,this.type=xe,this.capture=!!ze,this.ha=Rt,this.key=++M,this.da=this.fa=!1}function ne(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function ve(C){this.src=C,this.g={},this.h=0}ve.prototype.add=function(C,Z,xe,ze,Rt){var Wt=C.toString();C=this.g[Wt],C||(C=this.g[Wt]=[],this.h++);var Sr=qe(C,Z,ze,Rt);return-1<Sr?(Z=C[Sr],xe||(Z.fa=!1)):(Z=new G(Z,this.src,Wt,!!ze,Rt),Z.fa=xe,C.push(Z)),Z};function V(C,Z){var xe=Z.type;if(xe in C.g){var ze=C.g[xe],Rt=Array.prototype.indexOf.call(ze,Z,void 0),Wt;(Wt=0<=Rt)&&Array.prototype.splice.call(ze,Rt,1),Wt&&(ne(Z),C.g[xe].length==0&&(delete C.g[xe],C.h--))}}function qe(C,Z,xe,ze){for(var Rt=0;Rt<C.length;++Rt){var Wt=C[Rt];if(!Wt.da&&Wt.listener==Z&&Wt.capture==!!xe&&Wt.ha==ze)return Rt}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),re={};function Fe(C,Z,xe,ze,Rt){if(Array.isArray(Z)){for(var Wt=0;Wt<Z.length;Wt++)Fe(C,Z[Wt],xe,ze,Rt);return null}return xe=kt(xe),C&&C[ee]?C.K(Z,xe,u(ze)?!!ze.capture:!1,Rt):de(C,Z,xe,!1,ze,Rt)}function de(C,Z,xe,ze,Rt,Wt){if(!Z)throw Error("Invalid event type");var Sr=u(Rt)?!!Rt.capture:!!Rt,aa=xt(C);if(aa||(C[ie]=aa=new ve(C)),xe=aa.add(Z,xe,ze,Sr,Wt),xe.proxy)return xe;if(ze=we(),xe.proxy=ze,ze.src=C,ze.listener=xe,C.addEventListener)z||(Rt=Sr),Rt===void 0&&(Rt=!1),C.addEventListener(Z.toString(),ze,Rt);else if(C.attachEvent)C.attachEvent(ft(Z.toString()),ze);else if(C.addListener&&C.removeListener)C.addListener(ze);else throw Error("addEventListener and attachEvent are unavailable.");return xe}function we(){function C(xe){return Z.call(C.src,C.listener,xe)}const Z=ht;return C}function Le(C,Z,xe,ze,Rt){if(Array.isArray(Z))for(var Wt=0;Wt<Z.length;Wt++)Le(C,Z[Wt],xe,ze,Rt);else ze=u(ze)?!!ze.capture:!!ze,xe=kt(xe),C&&C[ee]?(C=C.i,Z=String(Z).toString(),Z in C.g&&(Wt=C.g[Z],xe=qe(Wt,xe,ze,Rt),-1<xe&&(ne(Wt[xe]),Array.prototype.splice.call(Wt,xe,1),Wt.length==0&&(delete C.g[Z],C.h--)))):C&&(C=xt(C))&&(Z=C.g[Z.toString()],C=-1,Z&&(C=qe(Z,xe,ze,Rt)),(xe=-1<C?Z[C]:null)&&Ge(xe))}function Ge(C){if(typeof C!="number"&&C&&!C.da){var Z=C.src;if(Z&&Z[ee])V(Z.i,C);else{var xe=C.type,ze=C.proxy;Z.removeEventListener?Z.removeEventListener(xe,ze,C.capture):Z.detachEvent?Z.detachEvent(ft(xe),ze):Z.addListener&&Z.removeListener&&Z.removeListener(ze),(xe=xt(Z))?(V(xe,C),xe.h==0&&(xe.src=null,Z[ie]=null)):ne(C)}}}function ft(C){return C in re?re[C]:re[C]="on"+C}function ht(C,Z){if(C.da)C=!0;else{Z=new Q(Z,this);var xe=C.listener,ze=C.ha||C.src;C.fa&&Ge(C),C=xe.call(ze,Z)}return C}function xt(C){return C=C[ie],C instanceof ve?C:null}var jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function kt(C){return typeof C=="function"?C:(C[jt]||(C[jt]=function(Z){return C.handleEvent(Z)}),C[jt])}function wt(){D.call(this),this.i=new ve(this),this.M=this,this.F=null}m(wt,D),wt.prototype[ee]=!0,wt.prototype.removeEventListener=function(C,Z,xe,ze){Le(this,C,Z,xe,ze)};function Ve(C,Z){var xe,ze=C.F;if(ze)for(xe=[];ze;ze=ze.F)xe.push(ze);if(C=C.M,ze=Z.type||Z,typeof Z=="string")Z=new K(Z,C);else if(Z instanceof K)Z.target=Z.target||C;else{var Rt=Z;Z=new K(ze,C),F(Z,Rt)}if(Rt=!0,xe)for(var Wt=xe.length-1;0<=Wt;Wt--){var Sr=Z.g=xe[Wt];Rt=Pe(Sr,ze,!0,Z)&&Rt}if(Sr=Z.g=C,Rt=Pe(Sr,ze,!0,Z)&&Rt,Rt=Pe(Sr,ze,!1,Z)&&Rt,xe)for(Wt=0;Wt<xe.length;Wt++)Sr=Z.g=xe[Wt],Rt=Pe(Sr,ze,!1,Z)&&Rt}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var C=this.i,Z;for(Z in C.g){for(var xe=C.g[Z],ze=0;ze<xe.length;ze++)ne(xe[ze]);delete C.g[Z],C.h--}}this.F=null},wt.prototype.K=function(C,Z,xe,ze){return this.i.add(String(C),Z,!1,xe,ze)},wt.prototype.L=function(C,Z,xe,ze){return this.i.add(String(C),Z,!0,xe,ze)};function Pe(C,Z,xe,ze){if(Z=C.i.g[String(Z)],!Z)return!0;Z=Z.concat();for(var Rt=!0,Wt=0;Wt<Z.length;++Wt){var Sr=Z[Wt];if(Sr&&!Sr.da&&Sr.capture==xe){var aa=Sr.listener,Hs=Sr.ha||Sr.src;Sr.fa&&V(C.i,Sr),Rt=aa.call(Hs,ze)!==!1&&Rt}}return Rt&&!ze.defaultPrevented}function be(C,Z,xe){if(typeof C=="function")xe&&(C=A(C,xe));else if(C&&typeof C.handleEvent=="function")C=A(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(Z)?-1:l.setTimeout(C,Z||0)}function ce(C){C.g=be(()=>{C.g=null,C.i&&(C.i=!1,ce(C))},C.l);const Z=C.h;C.h=null,C.m.apply(null,Z)}class te extends D{constructor(Z,xe){super(),this.m=Z,this.l=xe,this.h=null,this.i=!1,this.g=null}j(Z){this.h=arguments,this.g?this.i=!0:ce(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(C){D.call(this),this.h=C,this.g={}}m(Ne,D);var Re=[];function ye(C){j(C.g,function(Z,xe){this.g.hasOwnProperty(xe)&&Ge(Z)},C),C.g={}}Ne.prototype.N=function(){Ne.aa.N.call(this),ye(this)},Ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xe=l.JSON.stringify,mt=l.JSON.parse,rt=class{stringify(C){return l.JSON.stringify(C,void 0)}parse(C){return l.JSON.parse(C,void 0)}};function ue(){}ue.prototype.h=null;function _e(C){return C.h||(C.h=C.i())}function We(){}var ot={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ce(){K.call(this,"d")}m(Ce,K);function $e(){K.call(this,"c")}m($e,K);var gt={},Kt=null;function Ut(){return Kt=Kt||new wt}gt.La="serverreachability";function Jt(C){K.call(this,gt.La,C)}m(Jt,K);function it(C){const Z=Ut();Ve(Z,new Jt(Z))}gt.STAT_EVENT="statevent";function X(C,Z){K.call(this,gt.STAT_EVENT,C),this.stat=Z}m(X,K);function oe(C){const Z=Ut();Ve(Z,new X(Z,C))}gt.Ma="timingevent";function L(C,Z){K.call(this,gt.Ma,C),this.size=Z}m(L,K);function Ae(C,Z){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){C()},Z)}function Ee(){this.g=!0}Ee.prototype.xa=function(){this.g=!1};function Oe(C,Z,xe,ze,Rt,Wt){C.info(function(){if(C.g)if(Wt)for(var Sr="",aa=Wt.split("&"),Hs=0;Hs<aa.length;Hs++){var qn=aa[Hs].split("=");if(1<qn.length){var ma=qn[0];qn=qn[1];var ss=ma.split("_");Sr=2<=ss.length&&ss[1]=="type"?Sr+(ma+"="+qn+"&"):Sr+(ma+"=redacted&")}}else Sr=null;else Sr=Wt;return"XMLHTTP REQ ("+ze+") [attempt "+Rt+"]: "+Z+`
`+xe+`
`+Sr})}function Be(C,Z,xe,ze,Rt,Wt,Sr){C.info(function(){return"XMLHTTP RESP ("+ze+") [ attempt "+Rt+"]: "+Z+`
`+xe+`
`+Wt+" "+Sr})}function S(C,Z,xe,ze){C.info(function(){return"XMLHTTP TEXT ("+Z+"): "+U(C,xe)+(ze?" "+ze:"")})}function O(C,Z){C.info(function(){return"TIMEOUT: "+Z})}Ee.prototype.info=function(){};function U(C,Z){if(!C.g)return Z;if(!Z)return null;try{var xe=JSON.parse(Z);if(xe){for(C=0;C<xe.length;C++)if(Array.isArray(xe[C])){var ze=xe[C];if(!(2>ze.length)){var Rt=ze[1];if(Array.isArray(Rt)&&!(1>Rt.length)){var Wt=Rt[0];if(Wt!="noop"&&Wt!="stop"&&Wt!="close")for(var Sr=1;Sr<Rt.length;Sr++)Rt[Sr]=""}}}}return Xe(xe)}catch{return Z}}var q={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fe;function Ue(){}m(Ue,ue),Ue.prototype.g=function(){return new XMLHttpRequest},Ue.prototype.i=function(){return{}},fe=new Ue;function Ze(C,Z,xe,ze){this.j=C,this.i=Z,this.l=xe,this.R=ze||1,this.U=new Ne(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lt}function lt(){this.i=null,this.g="",this.h=!1}var Qe={},tt={};function ut(C,Z,xe){C.L=1,C.v=Nt(Tt(Z)),C.m=xe,C.P=!0,Pt(C,null)}function Pt(C,Z){C.F=Date.now(),St(C),C.A=Tt(C.v);var xe=C.A,ze=C.R;Array.isArray(ze)||(ze=[String(ze)]),On(xe.i,"t",ze),C.C=0,xe=C.j.J,C.h=new lt,C.g=oi(C.j,xe?Z:null,!C.m),0<C.O&&(C.M=new te(A(C.Y,C,C.g),C.O)),Z=C.U,xe=C.g,ze=C.ca;var Rt="readystatechange";Array.isArray(Rt)||(Rt&&(Re[0]=Rt.toString()),Rt=Re);for(var Wt=0;Wt<Rt.length;Wt++){var Sr=Fe(xe,Rt[Wt],ze||Z.handleEvent,!1,Z.h||Z);if(!Sr)break;Z.g[Sr.key]=Sr}Z=C.H?I(C.H):{},C.m?(C.u||(C.u="POST"),Z["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,Z)):(C.u="GET",C.g.ea(C.A,C.u,null,Z)),it(),Oe(C.i,C.u,C.A,C.l,C.R,C.m)}Ze.prototype.ca=function(C){C=C.target;const Z=this.M;Z&&zl(C)==3?Z.j():this.Y(C)},Ze.prototype.Y=function(C){try{if(C==this.g)e:{const ss=zl(this.g);var Z=this.g.Ba();const qc=this.g.Z();if(!(3>ss)&&(ss!=3||this.g&&(this.h.h||this.g.oa()||Dm(this.g)))){this.J||ss!=4||Z==7||(Z==8||0>=qc?it(3):it(2)),Er(this);var xe=this.g.Z();this.X=xe;t:if(Ct(this)){var ze=Dm(this.g);C="";var Rt=ze.length,Wt=zl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dr(this),Nr(this);var Sr="";break t}this.h.i=new l.TextDecoder}for(Z=0;Z<Rt;Z++)this.h.h=!0,C+=this.h.i.decode(ze[Z],{stream:!(Wt&&Z==Rt-1)});ze.length=0,this.h.g+=C,this.C=0,Sr=this.h.g}else Sr=this.g.oa();if(this.o=xe==200,Be(this.i,this.u,this.A,this.l,this.R,ss,xe),this.o){if(this.T&&!this.K){t:{if(this.g){var aa,Hs=this.g;if((aa=Hs.g?Hs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(aa)){var qn=aa;break t}}qn=null}if(xe=qn)S(this.i,this.l,xe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nn(this,xe);else{this.o=!1,this.s=3,oe(12),Dr(this),Nr(this);break e}}if(this.P){xe=!0;let vl;for(;!this.J&&this.C<Sr.length;)if(vl=It(this,Sr),vl==tt){ss==4&&(this.s=4,oe(14),xe=!1),S(this.i,this.l,null,"[Incomplete Response]");break}else if(vl==Qe){this.s=4,oe(15),S(this.i,this.l,Sr,"[Invalid Chunk]"),xe=!1;break}else S(this.i,this.l,vl,null),nn(this,vl);if(Ct(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ss!=4||Sr.length!=0||this.h.h||(this.s=1,oe(16),xe=!1),this.o=this.o&&xe,!xe)S(this.i,this.l,Sr,"[Invalid Chunked Response]"),Dr(this),Nr(this);else if(0<Sr.length&&!this.W){this.W=!0;var ma=this.j;ma.g==this&&ma.ba&&!ma.M&&(ma.j.info("Great, no buffering proxy detected. Bytes received: "+Sr.length),Gr(ma),ma.M=!0,oe(11))}}else S(this.i,this.l,Sr,null),nn(this,Sr);ss==4&&Dr(this),this.o&&!this.J&&(ss==4?jn(this.j,this):(this.o=!1,St(this)))}else Vg(this.g),xe==400&&0<Sr.indexOf("Unknown SID")?(this.s=3,oe(12)):(this.s=0,oe(13)),Dr(this),Nr(this)}}}catch{}finally{}};function Ct(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function It(C,Z){var xe=C.C,ze=Z.indexOf(`
`,xe);return ze==-1?tt:(xe=Number(Z.substring(xe,ze)),isNaN(xe)?Qe:(ze+=1,ze+xe>Z.length?tt:(Z=Z.slice(ze,ze+xe),C.C=ze+xe,Z)))}Ze.prototype.cancel=function(){this.J=!0,Dr(this)};function St(C){C.S=Date.now()+C.I,Zt(C,C.I)}function Zt(C,Z){if(C.B!=null)throw Error("WatchDog timer not null");C.B=Ae(A(C.ba,C),Z)}function Er(C){C.B&&(l.clearTimeout(C.B),C.B=null)}Ze.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(O(this.i,this.A),this.L!=2&&(it(),oe(17)),Dr(this),this.s=2,Nr(this)):Zt(this,this.S-C)};function Nr(C){C.j.G==0||C.J||jn(C.j,C)}function Dr(C){Er(C);var Z=C.M;Z&&typeof Z.ma=="function"&&Z.ma(),C.M=null,ye(C.U),C.g&&(Z=C.g,C.g=null,Z.abort(),Z.ma())}function nn(C,Z){try{var xe=C.j;if(xe.G!=0&&(xe.g==C||an(xe.h,C))){if(!C.K&&an(xe.h,C)&&xe.G==3){try{var ze=xe.Da.g.parse(Z)}catch{ze=null}if(Array.isArray(ze)&&ze.length==3){var Rt=ze;if(Rt[0]==0){e:if(!xe.u){if(xe.g)if(xe.g.F+3e3<C.F)yn(xe),Bu(xe);else break e;fr(xe),oe(18)}}else xe.za=Rt[1],0<xe.za-xe.T&&37500>Rt[2]&&xe.F&&xe.v==0&&!xe.C&&(xe.C=Ae(A(xe.Za,xe),6e3));if(1>=Vn(xe.h)&&xe.ca){try{xe.ca()}catch{}xe.ca=void 0}}else ba(xe,11)}else if((C.K||xe.g==C)&&yn(xe),!y(Z))for(Rt=xe.Da.g.parse(Z),Z=0;Z<Rt.length;Z++){let qn=Rt[Z];if(xe.T=qn[0],qn=qn[1],xe.G==2)if(qn[0]=="c"){xe.K=qn[1],xe.ia=qn[2];const ma=qn[3];ma!=null&&(xe.la=ma,xe.j.info("VER="+xe.la));const ss=qn[4];ss!=null&&(xe.Aa=ss,xe.j.info("SVER="+xe.Aa));const qc=qn[5];qc!=null&&typeof qc=="number"&&0<qc&&(ze=1.5*qc,xe.L=ze,xe.j.info("backChannelRequestTimeoutMs_="+ze)),ze=xe;const vl=C.g;if(vl){const qo=vl.g?vl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qo){var Wt=ze.h;Wt.g||qo.indexOf("spdy")==-1&&qo.indexOf("quic")==-1&&qo.indexOf("h2")==-1||(Wt.j=Wt.l,Wt.g=new Set,Wt.h&&(Je(Wt,Wt.h),Wt.h=null))}if(ze.D){const Sd=vl.g?vl.g.getResponseHeader("X-HTTP-Session-Id"):null;Sd&&(ze.ya=Sd,yt(ze.I,ze.D,Sd))}}xe.G=3,xe.l&&xe.l.ua(),xe.ba&&(xe.R=Date.now()-C.F,xe.j.info("Handshake RTT: "+xe.R+"ms")),ze=xe;var Sr=C;if(ze.qa=Pa(ze,ze.J?ze.ia:null,ze.W),Sr.K){Bt(ze.h,Sr);var aa=Sr,Hs=ze.L;Hs&&(aa.I=Hs),aa.B&&(Er(aa),St(aa)),ze.g=Sr}else sr(ze);0<xe.i.length&&H(xe)}else qn[0]!="stop"&&qn[0]!="close"||ba(xe,7);else xe.G==3&&(qn[0]=="stop"||qn[0]=="close"?qn[0]=="stop"?ba(xe,7):DA(xe):qn[0]!="noop"&&xe.l&&xe.l.ta(qn),xe.v=0)}}it(4)}catch{}}var pn=class{constructor(C,Z){this.g=C,this.map=Z}};function Yr(C){this.l=C||10,l.PerformanceNavigationTiming?(C=l.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dn(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function Vn(C){return C.h?1:C.g?C.g.size:0}function an(C,Z){return C.h?C.h==Z:C.g?C.g.has(Z):!1}function Je(C,Z){C.g?C.g.add(Z):C.h=Z}function Bt(C,Z){C.h&&C.h==Z?C.h=null:C.g&&C.g.has(Z)&&C.g.delete(Z)}Yr.prototype.cancel=function(){if(this.i=Ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function Ft(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let Z=C.i;for(const xe of C.g.values())Z=Z.concat(xe.D);return Z}return p(C.i)}function hr(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(c(C)){for(var Z=[],xe=C.length,ze=0;ze<xe;ze++)Z.push(C[ze]);return Z}Z=[],xe=0;for(ze in C)Z[xe++]=C[ze];return Z}function dr(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(c(C)||typeof C=="string"){var Z=[];C=C.length;for(var xe=0;xe<C;xe++)Z.push(xe);return Z}Z=[],xe=0;for(const ze in C)Z[xe++]=ze;return Z}}}function lr(C,Z){if(C.forEach&&typeof C.forEach=="function")C.forEach(Z,void 0);else if(c(C)||typeof C=="string")Array.prototype.forEach.call(C,Z,void 0);else for(var xe=dr(C),ze=hr(C),Rt=ze.length,Wt=0;Wt<Rt;Wt++)Z.call(void 0,ze[Wt],xe&&xe[Wt],C)}var dt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Et(C,Z){if(C){C=C.split("&");for(var xe=0;xe<C.length;xe++){var ze=C[xe].indexOf("="),Rt=null;if(0<=ze){var Wt=C[xe].substring(0,ze);Rt=C[xe].substring(ze+1)}else Wt=C[xe];Z(Wt,Rt?decodeURIComponent(Rt.replace(/\+/g," ")):"")}}}function bt(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof bt){this.h=C.h,Ht(this,C.j),this.o=C.o,this.g=C.g,Dt(this,C.s),this.l=C.l;var Z=C.i,xe=new Ar;xe.i=Z.i,Z.g&&(xe.g=new Map(Z.g),xe.h=Z.h),ke(this,xe),this.m=C.m}else C&&(Z=String(C).match(dt))?(this.h=!1,Ht(this,Z[1]||"",!0),this.o=ct(Z[2]||""),this.g=ct(Z[3]||"",!0),Dt(this,Z[4]),this.l=ct(Z[5]||"",!0),ke(this,Z[6]||"",!0),this.m=ct(Z[7]||"")):(this.h=!1,this.i=new Ar(null,this.h))}bt.prototype.toString=function(){var C=[],Z=this.j;Z&&C.push(Xt(Z,xr,!0),":");var xe=this.g;return(xe||Z=="file")&&(C.push("//"),(Z=this.o)&&C.push(Xt(Z,xr,!0),"@"),C.push(encodeURIComponent(String(xe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),xe=this.s,xe!=null&&C.push(":",String(xe))),(xe=this.l)&&(this.g&&xe.charAt(0)!="/"&&C.push("/"),C.push(Xt(xe,xe.charAt(0)=="/"?yr:cr,!0))),(xe=this.i.toString())&&C.push("?",xe),(xe=this.m)&&C.push("#",Xt(xe,sn)),C.join("")};function Tt(C){return new bt(C)}function Ht(C,Z,xe){C.j=xe?ct(Z,!0):Z,C.j&&(C.j=C.j.replace(/:$/,""))}function Dt(C,Z){if(Z){if(Z=Number(Z),isNaN(Z)||0>Z)throw Error("Bad port number "+Z);C.s=Z}else C.s=null}function ke(C,Z,xe){Z instanceof Ar?(C.i=Z,Yi(C.i,C.h)):(xe||(Z=Xt(Z,Tr)),C.i=new Ar(Z,C.h))}function yt(C,Z,xe){C.i.set(Z,xe)}function Nt(C){return yt(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function ct(C,Z){return C?Z?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function Xt(C,Z,xe){return typeof C=="string"?(C=encodeURI(C).replace(Z,zt),xe&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function zt(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var xr=/[#\/\?@]/g,cr=/[#\?:]/g,yr=/[#\?]/g,Tr=/[#\?@]/g,sn=/#/g;function Ar(C,Z){this.h=this.g=null,this.i=C||null,this.j=!!Z}function Qr(C){C.g||(C.g=new Map,C.h=0,C.i&&Et(C.i,function(Z,xe){C.add(decodeURIComponent(Z.replace(/\+/g," ")),xe)}))}t=Ar.prototype,t.add=function(C,Z){Qr(this),this.i=null,C=Vr(this,C);var xe=this.g.get(C);return xe||this.g.set(C,xe=[]),xe.push(Z),this.h+=1,this};function vn(C,Z){Qr(C),Z=Vr(C,Z),C.g.has(Z)&&(C.i=null,C.h-=C.g.get(Z).length,C.g.delete(Z))}function Aa(C,Z){return Qr(C),Z=Vr(C,Z),C.g.has(Z)}t.forEach=function(C,Z){Qr(this),this.g.forEach(function(xe,ze){xe.forEach(function(Rt){C.call(Z,Rt,ze,this)},this)},this)},t.na=function(){Qr(this);const C=Array.from(this.g.values()),Z=Array.from(this.g.keys()),xe=[];for(let ze=0;ze<Z.length;ze++){const Rt=C[ze];for(let Wt=0;Wt<Rt.length;Wt++)xe.push(Z[ze])}return xe},t.V=function(C){Qr(this);let Z=[];if(typeof C=="string")Aa(this,C)&&(Z=Z.concat(this.g.get(Vr(this,C))));else{C=Array.from(this.g.values());for(let xe=0;xe<C.length;xe++)Z=Z.concat(C[xe])}return Z},t.set=function(C,Z){return Qr(this),this.i=null,C=Vr(this,C),Aa(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[Z]),this.h+=1,this},t.get=function(C,Z){return C?(C=this.V(C),0<C.length?String(C[0]):Z):Z};function On(C,Z,xe){vn(C,Z),0<xe.length&&(C.i=null,C.g.set(Vr(C,Z),p(xe)),C.h+=xe.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],Z=Array.from(this.g.keys());for(var xe=0;xe<Z.length;xe++){var ze=Z[xe];const Wt=encodeURIComponent(String(ze)),Sr=this.V(ze);for(ze=0;ze<Sr.length;ze++){var Rt=Wt;Sr[ze]!==""&&(Rt+="="+encodeURIComponent(String(Sr[ze]))),C.push(Rt)}}return this.i=C.join("&")};function Vr(C,Z){return Z=String(Z),C.j&&(Z=Z.toLowerCase()),Z}function Yi(C,Z){Z&&!C.j&&(Qr(C),C.i=null,C.g.forEach(function(xe,ze){var Rt=ze.toLowerCase();ze!=Rt&&(vn(this,ze),On(this,Rt,xe))},C)),C.j=Z}function Ms(C,Z){const xe=new Ee;if(l.Image){const ze=new Image;ze.onload=h(Tn,xe,"TestLoadImage: loaded",!0,Z,ze),ze.onerror=h(Tn,xe,"TestLoadImage: error",!1,Z,ze),ze.onabort=h(Tn,xe,"TestLoadImage: abort",!1,Z,ze),ze.ontimeout=h(Tn,xe,"TestLoadImage: timeout",!1,Z,ze),l.setTimeout(function(){ze.ontimeout&&ze.ontimeout()},1e4),ze.src=C}else Z(!1)}function Ls(C,Z){const xe=new Ee,ze=new AbortController,Rt=setTimeout(()=>{ze.abort(),Tn(xe,"TestPingServer: timeout",!1,Z)},1e4);fetch(C,{signal:ze.signal}).then(Wt=>{clearTimeout(Rt),Wt.ok?Tn(xe,"TestPingServer: ok",!0,Z):Tn(xe,"TestPingServer: server error",!1,Z)}).catch(()=>{clearTimeout(Rt),Tn(xe,"TestPingServer: error",!1,Z)})}function Tn(C,Z,xe,ze,Rt){try{Rt&&(Rt.onload=null,Rt.onerror=null,Rt.onabort=null,Rt.ontimeout=null),ze(xe)}catch{}}function ii(){this.g=new rt}function Gc(C,Z,xe){const ze=xe||"";try{lr(C,function(Rt,Wt){let Sr=Rt;u(Rt)&&(Sr=Xe(Rt)),Z.push(ze+Wt+"="+encodeURIComponent(Sr))})}catch(Rt){throw Z.push(ze+"type="+encodeURIComponent("_badmap")),Rt}}function kA(C){this.l=C.Ub||null,this.j=C.eb||!1}m(kA,ue),kA.prototype.g=function(){return new Ed(this.l,this.j)},kA.prototype.i=function(C){return function(){return C}}({});function Ed(C,Z){wt.call(this),this.D=C,this.o=Z,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Ed,wt),t=Ed.prototype,t.open=function(C,Z){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=Z,this.readyState=1,sh(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Z={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(Z.body=C),(this.D||l).fetch(new Request(this.A,Z)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kc(this)),this.readyState=0},t.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,sh(this)),this.g&&(this.readyState=3,sh(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;FA(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function FA(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}t.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var Z=C.value?C.value:new Uint8Array(0);(Z=this.v.decode(Z,{stream:!C.done}))&&(this.response=this.responseText+=Z)}C.done?Kc(this):sh(this),this.readyState==3&&FA(this)}},t.Ra=function(C){this.g&&(this.response=this.responseText=C,Kc(this))},t.Qa=function(C){this.g&&(this.response=C,Kc(this))},t.ga=function(){this.g&&Kc(this)};function Kc(C){C.readyState=4,C.l=null,C.j=null,C.v=null,sh(C)}t.setRequestHeader=function(C,Z){this.u.append(C,Z)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],Z=this.h.entries();for(var xe=Z.next();!xe.done;)xe=xe.value,C.push(xe[0]+": "+xe[1]),xe=Z.next();return C.join(`\r
`)};function sh(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(Ed.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function Iu(C){let Z="";return j(C,function(xe,ze){Z+=ze,Z+=":",Z+=xe,Z+=`\r
`}),Z}function Fm(C,Z,xe){e:{for(ze in xe){var ze=!1;break e}ze=!0}ze||(xe=Iu(xe),typeof C=="string"?xe!=null&&encodeURIComponent(String(xe)):yt(C,Z,xe))}function Ka(C){wt.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Ka,wt);var Om=/^https?$/i,Qg=["POST","PUT"];t=Ka.prototype,t.Ha=function(C){this.J=C},t.ea=function(C,Z,xe,ze){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);Z=Z?Z.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fe.g(),this.v=this.o?_e(this.o):_e(fe),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(Z,String(C),!0),this.B=!1}catch(Wt){ju(this,Wt);return}if(C=xe||"",xe=new Map(this.headers),ze)if(Object.getPrototypeOf(ze)===Object.prototype)for(var Rt in ze)xe.set(Rt,ze[Rt]);else if(typeof ze.keys=="function"&&typeof ze.get=="function")for(const Wt of ze.keys())xe.set(Wt,ze.get(Wt));else throw Error("Unknown input type for opt_headers: "+String(ze));ze=Array.from(xe.keys()).find(Wt=>Wt.toLowerCase()=="content-type"),Rt=l.FormData&&C instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Qg,Z,void 0))||ze||Rt||xe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Wt,Sr]of xe)this.g.setRequestHeader(Wt,Sr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gf(this),this.u=!0,this.g.send(C),this.u=!1}catch(Wt){ju(this,Wt)}};function ju(C,Z){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=Z,C.m=5,OA(C),pf(C)}function OA(C){C.A||(C.A=!0,Ve(C,"complete"),Ve(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,Ve(this,"complete"),Ve(this,"abort"),pf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pf(this,!0)),Ka.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ih(this):this.bb())},t.bb=function(){ih(this)};function ih(C){if(C.h&&typeof o<"u"&&(!C.v[1]||zl(C)!=4||C.Z()!=2)){if(C.u&&zl(C)==4)be(C.Ea,0,C);else if(Ve(C,"readystatechange"),zl(C)==4){C.h=!1;try{const Sr=C.Z();e:switch(Sr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Z=!0;break e;default:Z=!1}var xe;if(!(xe=Z)){var ze;if(ze=Sr===0){var Rt=String(C.D).match(dt)[1]||null;!Rt&&l.self&&l.self.location&&(Rt=l.self.location.protocol.slice(0,-1)),ze=!Om.test(Rt?Rt.toLowerCase():"")}xe=ze}if(xe)Ve(C,"complete"),Ve(C,"success");else{C.m=6;try{var Wt=2<zl(C)?C.g.statusText:""}catch{Wt=""}C.l=Wt+" ["+C.Z()+"]",OA(C)}}finally{pf(C)}}}}function pf(C,Z){if(C.g){gf(C);const xe=C.g,ze=C.v[0]?()=>{}:null;C.g=null,C.v=null,Z||Ve(C,"ready");try{xe.onreadystatechange=ze}catch{}}}function gf(C){C.I&&(l.clearTimeout(C.I),C.I=null)}t.isActive=function(){return!!this.g};function zl(C){return C.g?C.g.readyState:0}t.Z=function(){try{return 2<zl(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(C){if(this.g){var Z=this.g.responseText;return C&&Z.indexOf(C)==0&&(Z=Z.substring(C.length)),mt(Z)}};function Dm(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function Vg(C){const Z={};C=(C.g&&2<=zl(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let ze=0;ze<C.length;ze++){if(y(C[ze]))continue;var xe=k(C[ze]);const Rt=xe[0];if(xe=xe[1],typeof xe!="string")continue;xe=xe.trim();const Wt=Z[Rt]||[];Z[Rt]=Wt,Wt.push(xe)}_(Z,function(ze){return ze.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wl(C,Z,xe){return xe&&xe.internalChannelParams&&xe.internalChannelParams[C]||Z}function Pu(C){this.Aa=0,this.i=[],this.j=new Ee,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wl("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wl("baseRetryDelayMs",5e3,C),this.cb=Wl("retryDelaySeedMs",1e4,C),this.Wa=Wl("forwardChannelMaxRetries",2,C),this.wa=Wl("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new Yr(C&&C.concurrentRequestLimit),this.Da=new ii,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pu.prototype,t.la=8,t.G=1,t.connect=function(C,Z,xe,ze){oe(0),this.W=C,this.H=Z||{},xe&&ze!==void 0&&(this.H.OSID=xe,this.H.OAID=ze),this.F=this.X,this.I=Pa(this,null,this.W),H(this)};function DA(C){if(Rm(C),C.G==3){var Z=C.U++,xe=Tt(C.I);if(yt(xe,"SID",C.K),yt(xe,"RID",Z),yt(xe,"TYPE","terminate"),pt(C,xe),Z=new Ze(C,C.j,Z),Z.L=2,Z.v=Nt(Tt(xe)),xe=!1,l.navigator&&l.navigator.sendBeacon)try{xe=l.navigator.sendBeacon(Z.v.toString(),"")}catch{}!xe&&l.Image&&(new Image().src=Z.v,xe=!0),xe||(Z.g=oi(Z.j,null),Z.g.ea(Z.v)),Z.F=Date.now(),St(Z)}Us(C)}function Bu(C){C.g&&(Gr(C),C.g.cancel(),C.g=null)}function Rm(C){Bu(C),C.u&&(l.clearTimeout(C.u),C.u=null),yn(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&l.clearTimeout(C.s),C.s=null)}function H(C){if(!dn(C.h)&&!C.s){C.s=!0;var Z=C.Ga;he||je(),ge||(he(),ge=!0),se.add(Z,C),C.B=0}}function Se(C,Z){return Vn(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=Z.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=Ae(A(C.Ga,C,Z),Zn(C,C.B)),C.B++,!0)}t.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const Rt=new Ze(this,this.j,C);let Wt=this.o;if(this.S&&(Wt?(Wt=I(Wt),F(Wt,this.S)):Wt=this.S),this.m!==null||this.O||(Rt.H=Wt,Wt=null),this.P)e:{for(var Z=0,xe=0;xe<this.i.length;xe++){t:{var ze=this.i[xe];if("__data__"in ze.map&&(ze=ze.map.__data__,typeof ze=="string")){ze=ze.length;break t}ze=void 0}if(ze===void 0)break;if(Z+=ze,4096<Z){Z=xe;break e}if(Z===4096||xe===this.i.length-1){Z=xe+1;break e}}Z=1e3}else Z=1e3;Z=Ot(this,Rt,Z),xe=Tt(this.I),yt(xe,"RID",C),yt(xe,"CVER",22),this.D&&yt(xe,"X-HTTP-Session-Id",this.D),pt(this,xe),Wt&&(this.O?Z="headers="+encodeURIComponent(String(Iu(Wt)))+"&"+Z:this.m&&Fm(xe,this.m,Wt)),Je(this.h,Rt),this.Ua&&yt(xe,"TYPE","init"),this.P?(yt(xe,"$req",Z),yt(xe,"SID","null"),Rt.T=!0,ut(Rt,xe,null)):ut(Rt,xe,Z),this.G=2}}else this.G==3&&(C?nt(this,C):this.i.length==0||dn(this.h)||nt(this))};function nt(C,Z){var xe;Z?xe=Z.l:xe=C.U++;const ze=Tt(C.I);yt(ze,"SID",C.K),yt(ze,"RID",xe),yt(ze,"AID",C.T),pt(C,ze),C.m&&C.o&&Fm(ze,C.m,C.o),xe=new Ze(C,C.j,xe,C.B+1),C.m===null&&(xe.H=C.o),Z&&(C.i=Z.D.concat(C.i)),Z=Ot(C,xe,1e3),xe.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Je(C.h,xe),ut(xe,ze,Z)}function pt(C,Z){C.H&&j(C.H,function(xe,ze){yt(Z,ze,xe)}),C.l&&lr({},function(xe,ze){yt(Z,ze,xe)})}function Ot(C,Z,xe){xe=Math.min(C.i.length,xe);var ze=C.l?A(C.l.Na,C.l,C):null;e:{var Rt=C.i;let Wt=-1;for(;;){const Sr=["count="+xe];Wt==-1?0<xe?(Wt=Rt[0].g,Sr.push("ofs="+Wt)):Wt=0:Sr.push("ofs="+Wt);let aa=!0;for(let Hs=0;Hs<xe;Hs++){let qn=Rt[Hs].g;const ma=Rt[Hs].map;if(qn-=Wt,0>qn)Wt=Math.max(0,Rt[Hs].g-100),aa=!1;else try{Gc(ma,Sr,"req"+qn+"_")}catch{ze&&ze(ma)}}if(aa){ze=Sr.join("&");break e}}}return C=C.i.splice(0,xe),Z.D=C,ze}function sr(C){if(!C.g&&!C.u){C.Y=1;var Z=C.Fa;he||je(),ge||(he(),ge=!0),se.add(Z,C),C.v=0}}function fr(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=Ae(A(C.Fa,C),Zn(C,C.v)),C.v++,!0)}t.Fa=function(){if(this.u=null,Jr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=Ae(A(this.ab,this),C)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oe(10),Bu(this),Jr(this))};function Gr(C){C.A!=null&&(l.clearTimeout(C.A),C.A=null)}function Jr(C){C.g=new Ze(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var Z=Tt(C.qa);yt(Z,"RID","rpc"),yt(Z,"SID",C.K),yt(Z,"AID",C.T),yt(Z,"CI",C.F?"0":"1"),!C.F&&C.ja&&yt(Z,"TO",C.ja),yt(Z,"TYPE","xmlhttp"),pt(C,Z),C.m&&C.o&&Fm(Z,C.m,C.o),C.L&&(C.g.I=C.L);var xe=C.g;C=C.ia,xe.L=1,xe.v=Nt(Tt(Z)),xe.m=null,xe.P=!0,Pt(xe,C)}t.Za=function(){this.C!=null&&(this.C=null,Bu(this),fr(this),oe(19))};function yn(C){C.C!=null&&(l.clearTimeout(C.C),C.C=null)}function jn(C,Z){var xe=null;if(C.g==Z){yn(C),Gr(C),C.g=null;var ze=2}else if(an(C.h,Z))xe=Z.D,Bt(C.h,Z),ze=1;else return;if(C.G!=0){if(Z.o)if(ze==1){xe=Z.m?Z.m.length:0,Z=Date.now()-Z.F;var Rt=C.B;ze=Ut(),Ve(ze,new L(ze,xe)),H(C)}else sr(C);else if(Rt=Z.s,Rt==3||Rt==0&&0<Z.X||!(ze==1&&Se(C,Z)||ze==2&&fr(C)))switch(xe&&0<xe.length&&(Z=C.h,Z.i=Z.i.concat(xe)),Rt){case 1:ba(C,5);break;case 4:ba(C,10);break;case 3:ba(C,6);break;default:ba(C,2)}}}function Zn(C,Z){let xe=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(xe*=2),xe*Z}function ba(C,Z){if(C.j.info("Error code "+Z),Z==2){var xe=A(C.fb,C),ze=C.Xa;const Rt=!ze;ze=new bt(ze||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ht(ze,"https"),Nt(ze),Rt?Ms(ze.toString(),xe):Ls(ze.toString(),xe)}else oe(2);C.G=0,C.l&&C.l.sa(Z),Us(C),Rm(C)}t.fb=function(C){C?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function Us(C){if(C.G=0,C.ka=[],C.l){const Z=Ft(C.h);(Z.length!=0||C.i.length!=0)&&(g(C.ka,Z),g(C.ka,C.i),C.h.i.length=0,p(C.i),C.i.length=0),C.l.ra()}}function Pa(C,Z,xe){var ze=xe instanceof bt?Tt(xe):new bt(xe);if(ze.g!="")Z&&(ze.g=Z+"."+ze.g),Dt(ze,ze.s);else{var Rt=l.location;ze=Rt.protocol,Z=Z?Z+"."+Rt.hostname:Rt.hostname,Rt=+Rt.port;var Wt=new bt(null);ze&&Ht(Wt,ze),Z&&(Wt.g=Z),Rt&&Dt(Wt,Rt),xe&&(Wt.l=xe),ze=Wt}return xe=C.D,Z=C.ya,xe&&Z&&yt(ze,xe,Z),yt(ze,"VER",C.la),pt(C,ze),ze}function oi(C,Z,xe){if(Z&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return Z=C.Ca&&!C.pa?new Ka(new kA({eb:xe})):new Ka(C.pa),Z.Ha(C.J),Z}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qs(){}t=Qs.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function li(){}li.prototype.g=function(C,Z){return new Vs(C,Z)};function Vs(C,Z){wt.call(this),this.g=new Pu(Z),this.l=C,this.h=Z&&Z.messageUrlParams||null,C=Z&&Z.messageHeaders||null,Z&&Z.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=Z&&Z.initMessageHeaders||null,Z&&Z.messageContentType&&(C?C["X-WebChannel-Content-Type"]=Z.messageContentType:C={"X-WebChannel-Content-Type":Z.messageContentType}),Z&&Z.va&&(C?C["X-WebChannel-Client-Profile"]=Z.va:C={"X-WebChannel-Client-Profile":Z.va}),this.g.S=C,(C=Z&&Z.Sb)&&!y(C)&&(this.g.m=C),this.v=Z&&Z.supportsCrossDomainXhr||!1,this.u=Z&&Z.sendRawJson||!1,(Z=Z&&Z.httpSessionIdParam)&&!y(Z)&&(this.g.D=Z,C=this.h,C!==null&&Z in C&&(C=this.h,Z in C&&delete C[Z])),this.j=new ku(this)}m(Vs,wt),Vs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vs.prototype.close=function(){DA(this.g)},Vs.prototype.o=function(C){var Z=this.g;if(typeof C=="string"){var xe={};xe.__data__=C,C=xe}else this.u&&(xe={},xe.__data__=Xe(C),C=xe);Z.i.push(new pn(Z.Ya++,C)),Z.G==3&&H(Z)},Vs.prototype.N=function(){this.g.l=null,delete this.j,DA(this.g),delete this.g,Vs.aa.N.call(this)};function yc(C){Ce.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var Z=C.__sm__;if(Z){e:{for(const xe in Z){C=xe;break e}C=void 0}(this.i=C)&&(C=this.i,Z=Z!==null&&C in Z?Z[C]:void 0),this.data=Z}else this.data=C}m(yc,Ce);function Tu(){$e.call(this),this.status=1}m(Tu,$e);function ku(C){this.g=C}m(ku,Qs),ku.prototype.ua=function(){Ve(this.g,"a")},ku.prototype.ta=function(C){Ve(this.g,new yc(C))},ku.prototype.sa=function(C){Ve(this.g,new Tu)},ku.prototype.ra=function(){Ve(this.g,"b")},li.prototype.createWebChannel=li.prototype.g,Vs.prototype.send=Vs.prototype.o,Vs.prototype.open=Vs.prototype.m,Vs.prototype.close=Vs.prototype.close,gJ=function(){return new li},pJ=function(){return Ut()},mJ=gt,PT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},q.NO_ERROR=0,q.TIMEOUT=8,q.HTTP_ERROR=6,z_=q,ae.COMPLETE="complete",AJ=ae,We.EventType=ot,ot.OPEN="a",ot.CLOSE="b",ot.ERROR="c",ot.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Ty=We,Ka.prototype.listenOnce=Ka.prototype.L,Ka.prototype.getLastError=Ka.prototype.Ka,Ka.prototype.getLastErrorCode=Ka.prototype.Ba,Ka.prototype.getStatus=Ka.prototype.Z,Ka.prototype.getResponseJson=Ka.prototype.Oa,Ka.prototype.getResponseText=Ka.prototype.oa,Ka.prototype.send=Ka.prototype.ea,Ka.prototype.setWithCredentials=Ka.prototype.Ha,hJ=Ka}).apply(typeof zN<"u"?zN:typeof self<"u"?self:typeof window<"u"?window:{});const r7="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ll.UNAUTHENTICATED=new ll(null),ll.GOOGLE_CREDENTIALS=new ll("google-credentials-uid"),ll.FIRST_PARTY=new ll("first-party-uid"),ll.MOCK_USER=new ll("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r1="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=new uD("@firebase/firestore");function yx(){return Xp.logLevel}function wr(t,...e){if(Xp.logLevel<=ra.DEBUG){const r=e.map(SD);Xp.debug(`Firestore (${r1}): ${t}`,...r)}}function cc(t,...e){if(Xp.logLevel<=ra.ERROR){const r=e.map(SD);Xp.error(`Firestore (${r1}): ${t}`,...r)}}function om(t,...e){if(Xp.logLevel<=ra.WARN){const r=e.map(SD);Xp.warn(`Firestore (${r1}): ${t}`,...r)}}function SD(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t="Unexpected state"){const e=`FIRESTORE (${r1}) INTERNAL ASSERTION FAILED: `+t;throw cc(e),new Error(e)}function rn(t,e){t||Xr()}function In(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pr extends vA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xJ{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(ll.UNAUTHENTICATED))}shutdown(){}}class xxe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class vxe{constructor(e){this.t=e,this.currentUser=ll.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){rn(this.o===void 0);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new Jd;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Jd,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{wr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(wr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Jd)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(wr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(rn(typeof n.accessToken=="string"),new xJ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rn(e===null||typeof e=="string"),new ll(e)}}class yxe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ll.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class bxe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new yxe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(ll.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wxe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nxe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){rn(this.o===void 0);const n=s=>{s.error!=null&&wr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,wr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{wr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):wr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(rn(typeof r.token=="string"),this.R=r.token,new wxe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cxe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=Cxe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function Fn(t,e){return t<e?-1:t>e?1:0}function Ev(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function yJ(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Pr(ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Pr(ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Pr(ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pr(ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mr.fromMillis(Date.now())}static fromDate(e){return mr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new mr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fn(this.nanoseconds,e.nanoseconds):Fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.timestamp=e}static fromTimestamp(e){return new un(e)}static min(){return new un(new mr(0,0))}static max(){return new un(new mr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,r,n){r===void 0?r=0:r>e.length&&Xr(),n===void 0?n=e.length-r:n>e.length-r&&Xr(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return s2.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof s2?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),o=r.get(a);if(s<o)return-1;if(s>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class xa extends s2{construct(e,r,n){return new xa(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Pr(ar.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new xa(r)}static emptyPath(){return new xa([])}}const _xe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ts extends s2{construct(e,r,n){return new Ts(e,r,n)}static isValidIdentifier(e){return _xe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ts.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ts(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Pr(ar.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new Pr(ar.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Pr(ar.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new Pr(ar.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ts(r)}static emptyPath(){return new Ts([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.path=e}static fromPath(e){return new Mr(xa.fromString(e))}static fromName(e){return new Mr(xa.fromString(e).popFirst(5))}static empty(){return new Mr(xa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xa.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return xa.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mr(new xa(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function BT(t){return t.fields.find(e=>e.kind===2)}function Zm(t){return t.fields.filter(e=>e.kind!==2)}XE.UNKNOWN_ID=-1;class W_{constructor(e,r){this.fieldPath=e,this.kind=r}}class i2{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new i2(0,bu.min())}}function Exe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=un.fromTimestamp(n===1e9?new mr(r+1,0):new mr(r,n));return new bu(a,Mr.empty(),e)}function bJ(t){return new bu(t.readTime,t.key,-1)}class bu{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new bu(un.min(),Mr.empty(),-1)}static max(){return new bu(un.max(),Mr.empty(),-1)}}function jD(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Mr.comparator(t.documentKey,e.documentKey),r!==0?r:Fn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wg(t){if(t.code!==ar.FAILED_PRECONDITION||t.message!==wJ)throw t;wr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Xr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Gt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Gt?r:Gt.resolve(r)}catch(r){return Gt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Gt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Gt.reject(r)}static resolve(e){return new Gt((r,n)=>{r(e)})}static reject(e){return new Gt((r,n)=>{n(e)})}static waitFor(e){return new Gt((r,n)=>{let a=0,s=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(e){let r=Gt.resolve(!1);for(const n of e)r=r.next(a=>a?Gt.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new Gt((n,a)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(e,r){return new Gt((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Jd,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new lb(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=PD(n.target.error);this.V.reject(new lb(e,a))}}static open(e,r,n,a){try{return new dj(r,e.transaction(a,n))}catch(s){throw new lb(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(wr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Ixe(r)}}class J0{constructor(e,r,n){this.name=e,this.version=r,this.p=n,J0.S(vo())===12.2&&cc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return wr("SimpleDb","Removing database:",e),op(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!SY())return!1;if(J0.v())return!0;const e=vo(),r=J0.S(e),n=0<r&&r<10,a=CJ(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(wr("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const o=s.target.result;r(o)},a.onblocked=()=>{n(new lb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const o=s.target.error;o.name==="VersionError"?n(new Pr(ar.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new Pr(ar.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new lb(e,o))},a.onupgradeneeded=s=>{wr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,a.transaction,s.oldVersion,this.version).next(()=>{wr("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=dj.open(this.db,e,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),Gt.reject(u))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&o<3;if(wr("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function CJ(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Sxe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return op(this.B.delete())}}class lb extends Pr{constructor(e,r){super(ar.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Sm(t){return t.name==="IndexedDbTransactionError"}class Ixe{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(wr("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(wr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),op(n)}add(e){return wr("SimpleDb","ADD",this.store.name,e,e),op(this.store.add(e))}get(e){return op(this.store.get(e)).next(r=>(r===void 0&&(r=null),wr("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return wr("SimpleDb","DELETE",this.store.name,e),op(this.store.delete(e))}count(){return wr("SimpleDb","COUNT",this.store.name),op(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new Gt((o,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(n),o=[];return this.W(s,(l,c)=>{o.push(c)}).next(()=>o)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Gt((a,s)=>{n.onerror=o=>{s(o.target.error)},n.onsuccess=o=>{a(o.target.result)}})}j(e,r){wr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,(s,o,l)=>l.delete())}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Gt((n,a)=>{r.onerror=s=>{const o=PD(s.target.error);a(o)},r.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():n()}):n()}})}W(e,r){const n=[];return new Gt((a,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void a();const c=new Sxe(l),u=r(l.primaryKey,l.value,c);if(u instanceof Gt){const d=u.catch(f=>(c.done(),Gt.reject(f)));n.push(d)}c.isDone?a():c.K===null?l.continue():l.continue(c.K)}}).next(()=>Gt.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function op(t){return new Gt((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=PD(n.target.error);r(a)}})}let n7=!1;function PD(t){const e=J0.S(vo());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Pr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return n7||(n7=!0,setTimeout(()=>{throw n},0)),n}}return t}class jxe{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){wr("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{wr("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Sm(r)?wr("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await wg(r)}await this.X(6e4)})}}class Pxe{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let a=r,s=!0;return Gt.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!n.has(o))return wr("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,a).next(l=>{a-=l,n.add(o)});s=!1})).next(()=>r-a)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(a,s)).next(l=>(wr("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>o.size)}))}re(e,r){let n=e;return r.changes.forEach((a,s)=>{const o=bJ(s);jD(o,n)>0&&(n=o)}),new bu(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ad.oe=-1;function xw(t){return t==null}function o2(t){return t===0&&1/t==-1/0}function Bxe(t){return typeof t=="number"&&Number.isInteger(t)&&!o2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=a7(e)),e=Txe(t.get(r),e);return a7(e)}function Txe(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function a7(t){return t+""}function Of(t){const e=t.length;if(rn(e>=2),e===2)return rn(t.charAt(0)===""&&t.charAt(1)===""),xa.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>r)&&Xr(),t.charAt(o+1)){case"":const l=t.substring(s,o);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,o),a+="\0";break;case"":a+=t.substring(s,o+1);break;default:Xr()}s=o+2}return new xa(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t,e){return[t,fc(e)]}function _J(t,e,r){return[t,fc(e),r]}const kxe={},Fxe=["prefixPath","collectionGroup","readTime","documentId"],Oxe=["prefixPath","collectionGroup","documentId"],Dxe=["collectionGroup","readTime","prefixPath","documentId"],Rxe=["canonicalId","targetId"],Mxe=["targetId","path"],Lxe=["path","targetId"],Uxe=["collectionId","parent"],Qxe=["indexId","uid"],Vxe=["uid","sequenceNumber"],Hxe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$xe=["indexId","uid","orderedDocumentKey"],Gxe=["userId","collectionPath","documentId"],Kxe=["userId","collectionPath","largestBatchId"],qxe=["userId","collectionGroup","largestBatchId"],EJ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zxe=[...EJ,"documentOverlays"],SJ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IJ=SJ,BD=[...IJ,"indexConfiguration","indexState","indexEntries"],Wxe=BD,Xxe=[...BD,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT extends NJ{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function bo(t,e){const r=In(t);return J0.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ng(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function jJ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,r){this.comparator=e,this.root=r||cl.EMPTY}insert(e,r){return new Ds(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,cl.BLACK,null,null))}remove(e){return new Ds(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cl.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new WN(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new WN(this.root,e,this.comparator,!1)}getReverseIterator(){return new WN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new WN(this.root,e,this.comparator,!0)}}class WN{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cl{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??cl.RED,this.left=a??cl.EMPTY,this.right=s??cl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new cl(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return cl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return cl.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xr();const e=this.left.check();if(e!==this.right.check())throw Xr();return e+(this.isRed()?0:1)}}cl.EMPTY=null,cl.RED=!0,cl.BLACK=!1;cl.EMPTY=new class{constructor(){this.size=0}get key(){throw Xr()}get value(){throw Xr()}get color(){throw Xr()}get left(){throw Xr()}get right(){throw Xr()}copy(e,r,n,a,s){return this}insert(e,r,n){return new cl(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.comparator=e,this.data=new Ds(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new o7(this.data.getIterator())}getIteratorFrom(e){return new o7(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ya)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ya(this.comparator);return r.data=e,r}}class o7{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qg(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.fields=e,e.sort(Ts.comparator)}static empty(){return new Oc([])}unionWith(e){let r=new Ya(Ts.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Oc(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ev(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new PJ("Invalid base64 string: "+s):s}}(e);return new Ri(r)}static fromUint8Array(e){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(e);return new Ri(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ri.EMPTY_BYTE_STRING=new Ri("");const Yxe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sA(t){if(rn(!!t),typeof t=="string"){let e=0;const r=Yxe.exec(t);if(rn(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:js(t.seconds),nanos:js(t.nanos)}}function js(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function lm(t){return typeof t=="string"?Ri.fromBase64String(t):Ri.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function kD(t){const e=t.mapValue.fields.__previous_value__;return TD(e)?kD(e):e}function l2(t){const e=sA(t.mapValue.fields.__local_write_time__.timestampValue);return new mr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jxe{constructor(e,r,n,a,s,o,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class cm{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new cm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof cm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Y_={nullValue:"NULL_VALUE"};function Yp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?TD(t)?4:BJ(t)?9007199254740991:fj(t)?10:11:Xr()}function Kf(t,e){if(t===e)return!0;const r=Yp(t);if(r!==Yp(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return l2(t).isEqual(l2(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=sA(a.timestampValue),l=sA(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return lm(a.bytesValue).isEqual(lm(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return js(a.geoPointValue.latitude)===js(s.geoPointValue.latitude)&&js(a.geoPointValue.longitude)===js(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return js(a.integerValue)===js(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=js(a.doubleValue),l=js(s.doubleValue);return o===l?o2(o)===o2(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ev(t.arrayValue.values||[],e.arrayValue.values||[],Kf);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(i7(o)!==i7(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Kf(o[c],l[c])))return!1;return!0}(t,e);default:return Xr()}}function c2(t,e){return(t.values||[]).find(r=>Kf(r,e))!==void 0}function um(t,e){if(t===e)return 0;const r=Yp(t),n=Yp(e);if(r!==n)return Fn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Fn(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=js(s.integerValue||s.doubleValue),c=js(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return l7(t.timestampValue,e.timestampValue);case 4:return l7(l2(t),l2(e));case 5:return Fn(t.stringValue,e.stringValue);case 6:return function(s,o){const l=lm(s),c=lm(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Fn(l[u],c[u]);if(d!==0)return d}return Fn(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Fn(js(s.latitude),js(o.latitude));return l!==0?l:Fn(js(s.longitude),js(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return c7(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,c,u,d;const f=s.fields||{},A=o.fields||{},h=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=(c=A.value)===null||c===void 0?void 0:c.arrayValue,p=Fn(((u=h==null?void 0:h.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:c7(h,m)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===k0.mapValue&&o===k0.mapValue)return 0;if(s===k0.mapValue)return 1;if(o===k0.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const A=Fn(c[f],d[f]);if(A!==0)return A;const h=um(l[c[f]],u[d[f]]);if(h!==0)return h}return Fn(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Xr()}}function l7(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fn(t,e);const r=sA(t),n=sA(e),a=Fn(r.seconds,n.seconds);return a!==0?a:Fn(r.nanos,n.nanos)}function c7(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=um(r[a],n[a]);if(s)return s}return Fn(r.length,n.length)}function Sv(t){return kT(t)}function kT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=sA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return lm(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Mr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=kT(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${kT(r.fields[o])}`;return a+"}"}(t.mapValue):Xr()}function u2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function FT(t){return!!t&&"integerValue"in t}function d2(t){return!!t&&"arrayValue"in t}function u7(t){return!!t&&"nullValue"in t}function d7(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function J_(t){return!!t&&"mapValue"in t}function fj(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function cb(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ng(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=cb(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=cb(t.arrayValue.values[r]);return e}return Object.assign({},t)}function BJ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const TJ={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Zxe(t){return"nullValue"in t?Y_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?u2(cm.empty(),Mr.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?fj(t)?TJ:{mapValue:{}}:Xr()}function eve(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?u2(cm.empty(),Mr.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?TJ:"mapValue"in t?fj(t)?{mapValue:{}}:k0:Xr()}function f7(t,e){const r=um(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function h7(t,e){const r=um(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.value=e}static empty(){return new dl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!J_(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=cb(r)}setAll(e){let r=Ts.emptyPath(),n={},a=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=cb(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());J_(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Kf(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];J_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){Ng(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new dl(cb(this.value))}}function kJ(t){const e=[];return Ng(t.fields,(r,n)=>{const a=new Ts([r]);if(J_(n)){const s=kJ(n.mapValue).fields;if(s.length===0)e.push(a);else for(const o of s)e.push(a.child(o))}else e.push(a)}),new Oc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,r,n,a,s,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Bs(e,0,un.min(),un.min(),un.min(),dl.empty(),0)}static newFoundDocument(e,r,n,a){return new Bs(e,1,r,un.min(),n,a,0)}static newNoDocument(e,r){return new Bs(e,2,r,un.min(),un.min(),dl.empty(),0)}static newUnknownDocument(e,r){return new Bs(e,3,r,un.min(),un.min(),dl.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(un.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=un.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,r){this.position=e,this.inclusive=r}}function A7(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],o=t.position[a];if(s.field.isKeyField()?n=Mr.comparator(Mr.fromName(o.referenceValue),r.key):n=um(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function m7(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Kf(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,r="asc"){this.field=e,this.dir=r}}function tve(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FJ{}class na extends FJ{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new rve(e,r,n):r==="array-contains"?new sve(e,n):r==="in"?new UJ(e,n):r==="not-in"?new ive(e,n):r==="array-contains-any"?new ove(e,n):new na(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new nve(e,n):new ave(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(um(r,this.value)):r!==null&&Yp(this.value)===Yp(r)&&this.matchesComparison(um(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Va extends FJ{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Va(e,r)}matches(e){return jv(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jv(t){return t.op==="and"}function OT(t){return t.op==="or"}function FD(t){return OJ(t)&&jv(t)}function OJ(t){for(const e of t.filters)if(e instanceof Va)return!1;return!0}function DT(t){if(t instanceof na)return t.field.canonicalString()+t.op.toString()+Sv(t.value);if(FD(t))return t.filters.map(e=>DT(e)).join(",");{const e=t.filters.map(r=>DT(r)).join(",");return`${t.op}(${e})`}}function DJ(t,e){return t instanceof na?function(n,a){return a instanceof na&&n.op===a.op&&n.field.isEqual(a.field)&&Kf(n.value,a.value)}(t,e):t instanceof Va?function(n,a){return a instanceof Va&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&DJ(o,a.filters[l]),!0):!1}(t,e):void Xr()}function RJ(t,e){const r=t.filters.concat(e);return Va.create(r,t.op)}function MJ(t){return t instanceof na?function(r){return`${r.field.canonicalString()} ${r.op} ${Sv(r.value)}`}(t):t instanceof Va?function(r){return r.op.toString()+" {"+r.getFilters().map(MJ).join(" ,")+"}"}(t):"Filter"}class rve extends na{constructor(e,r,n){super(e,r,n),this.key=Mr.fromName(n.referenceValue)}matches(e){const r=Mr.comparator(e.key,this.key);return this.matchesComparison(r)}}class nve extends na{constructor(e,r){super(e,"in",r),this.keys=LJ("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class ave extends na{constructor(e,r){super(e,"not-in",r),this.keys=LJ("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function LJ(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Mr.fromName(n.referenceValue))}class sve extends na{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return d2(r)&&c2(r.arrayValue,this.value)}}class UJ extends na{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&c2(this.value.arrayValue,r)}}class ive extends na{constructor(e,r){super(e,"not-in",r)}matches(e){if(c2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!c2(this.value.arrayValue,r)}}class ove extends na{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!d2(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>c2(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lve{constructor(e,r=null,n=[],a=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function RT(t,e=null,r=[],n=[],a=null,s=null,o=null){return new lve(t,e,r,n,a,s,o)}function Jp(t){const e=In(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>DT(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),xw(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Sv(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Sv(n)).join(",")),e.ue=r}return e.ue}function vw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!tve(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!DJ(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!m7(t.startAt,e.startAt)&&m7(t.endAt,e.endAt)}function YE(t){return Mr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function JE(t,e){return t.filters.filter(r=>r instanceof na&&r.field.isEqual(e))}function p7(t,e,r){let n=Y_,a=!0;for(const s of JE(t,e)){let o=Y_,l=!0;switch(s.op){case"<":case"<=":o=Zxe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=Y_}f7({value:n,inclusive:a},{value:o,inclusive:l})<0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];f7({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function g7(t,e,r){let n=k0,a=!0;for(const s of JE(t,e)){let o=k0,l=!0;switch(s.op){case">=":case">":o=eve(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=k0}h7({value:n,inclusive:a},{value:o,inclusive:l})>0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];h7({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cve(t,e,r,n,a,s,o,l){return new n1(t,e,r,n,a,s,o,l)}function yw(t){return new n1(t)}function x7(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QJ(t){return t.collectionGroup!==null}function ub(t){const e=In(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ya(Ts.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new f2(s,n))}),r.has(Ts.keyField().canonicalString())||e.ce.push(new f2(Ts.keyField(),n))}return e.ce}function ud(t){const e=In(t);return e.le||(e.le=uve(e,ub(t))),e.le}function uve(t,e){if(t.limitType==="F")return RT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new f2(a.field,s)});const r=t.endAt?new Iv(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Iv(t.startAt.position,t.startAt.inclusive):null;return RT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function MT(t,e){const r=t.filters.concat([e]);return new n1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function ZE(t,e,r){return new n1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function hj(t,e){return vw(ud(t),ud(e))&&t.limitType===e.limitType}function VJ(t){return`${Jp(ud(t))}|lt:${t.limitType}`}function bx(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>MJ(a)).join(", ")}]`),xw(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Sv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Sv(a)).join(",")),`Target(${n})`}(ud(t))}; limitType=${t.limitType})`}function bw(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Mr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of ub(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=A7(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,ub(n),a)||n.endAt&&!function(o,l,c){const u=A7(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,ub(n),a))}(t,e)}function dve(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HJ(t){return(e,r)=>{let n=!1;for(const a of ub(t)){const s=fve(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function fve(t,e,r){const n=t.field.isKeyField()?Mr.comparator(e.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?um(c,u):Xr()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Xr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ng(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return jJ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hve=new Ds(Mr.comparator);function Au(){return hve}const $J=new Ds(Mr.comparator);function ky(...t){let e=$J;for(const r of t)e=e.insert(r.key,r);return e}function GJ(t){let e=$J;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Df(){return db()}function KJ(){return db()}function db(){return new Im(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ave=new Ds(Mr.comparator),mve=new Ya(Mr.comparator);function Kn(...t){let e=mve;for(const r of t)e=e.add(r);return e}const pve=new Ya(Fn);function gve(){return pve}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:o2(e)?"-0":e}}function qJ(t){return{integerValue:""+t}}function xve(t,e){return Bxe(e)?qJ(e):OD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this._=void 0}}function vve(t,e,r){return t instanceof h2?function(a,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&TD(s)&&(s=kD(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(r,e):t instanceof Zp?WJ(t,e):t instanceof Pv?XJ(t,e):function(a,s){const o=zJ(a,s),l=v7(o)+v7(a.Pe);return FT(o)&&FT(a.Pe)?qJ(l):OD(a.serializer,l)}(t,e)}function yve(t,e,r){return t instanceof Zp?WJ(t,e):t instanceof Pv?XJ(t,e):r}function zJ(t,e){return t instanceof A2?function(n){return FT(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class h2 extends Aj{}class Zp extends Aj{constructor(e){super(),this.elements=e}}function WJ(t,e){const r=YJ(e);for(const n of t.elements)r.some(a=>Kf(a,n))||r.push(n);return{arrayValue:{values:r}}}class Pv extends Aj{constructor(e){super(),this.elements=e}}function XJ(t,e){let r=YJ(e);for(const n of t.elements)r=r.filter(a=>!Kf(a,n));return{arrayValue:{values:r}}}class A2 extends Aj{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function v7(t){return js(t.integerValue||t.doubleValue)}function YJ(t){return d2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JJ{constructor(e,r){this.field=e,this.transform=r}}function bve(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof Zp&&a instanceof Zp||n instanceof Pv&&a instanceof Pv?Ev(n.elements,a.elements,Kf):n instanceof A2&&a instanceof A2?Kf(n.Pe,a.Pe):n instanceof h2&&a instanceof h2}(t.transform,e.transform)}class wve{constructor(e,r){this.version=e,this.transformResults=r}}class ks{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ks}static exists(e){return new ks(void 0,e)}static updateTime(e){return new ks(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Z_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mj{}function ZJ(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new s1(t.key,ks.none()):new a1(t.key,t.data,ks.none());{const r=t.data,n=dl.empty();let a=new Ya(Ts.comparator);for(let s of e.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new wA(t.key,n,new Oc(a.toArray()),ks.none())}}function Nve(t,e,r){t instanceof a1?function(a,s,o){const l=a.value.clone(),c=b7(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof wA?function(a,s,o){if(!Z_(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=b7(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(eZ(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function fb(t,e,r,n){return t instanceof a1?function(s,o,l,c){if(!Z_(s.precondition,o))return l;const u=s.value.clone(),d=w7(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof wA?function(s,o,l,c){if(!Z_(s.precondition,o))return l;const u=w7(s.fieldTransforms,c,o),d=o.data;return d.setAll(eZ(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(s,o,l){return Z_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function Cve(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=zJ(n.transform,a||null);s!=null&&(r===null&&(r=dl.empty()),r.set(n.field,s))}return r||null}function y7(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Ev(n,a,(s,o)=>bve(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class a1 extends mj{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class wA extends mj{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function eZ(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function b7(t,e,r){const n=new Map;rn(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],o=s.transform,l=e.data.field(s.field);n.set(s.field,yve(o,l,r[a]))}return n}function w7(t,e,r){const n=new Map;for(const a of t){const s=a.transform,o=r.data.field(a.field);n.set(a.field,vve(s,o,e))}return n}class s1 extends mj{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DD extends mj{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&Nve(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=fb(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=fb(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=KJ();return this.mutations.forEach(a=>{const s=e.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=ZJ(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(un.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Kn())}isEqual(e){return this.batchId===e.batchId&&Ev(this.mutations,e.mutations,(r,n)=>y7(r,n))&&Ev(this.baseMutations,e.baseMutations,(r,n)=>y7(r,n))}}class MD{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){rn(e.mutations.length===n.length);let a=function(){return Ave}();const s=e.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new MD(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ve{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qi,oa;function tZ(t){switch(t){default:return Xr();case ar.CANCELLED:case ar.UNKNOWN:case ar.DEADLINE_EXCEEDED:case ar.RESOURCE_EXHAUSTED:case ar.INTERNAL:case ar.UNAVAILABLE:case ar.UNAUTHENTICATED:return!1;case ar.INVALID_ARGUMENT:case ar.NOT_FOUND:case ar.ALREADY_EXISTS:case ar.PERMISSION_DENIED:case ar.FAILED_PRECONDITION:case ar.ABORTED:case ar.OUT_OF_RANGE:case ar.UNIMPLEMENTED:case ar.DATA_LOSS:return!0}}function rZ(t){if(t===void 0)return cc("GRPC error has no .code"),ar.UNKNOWN;switch(t){case Qi.OK:return ar.OK;case Qi.CANCELLED:return ar.CANCELLED;case Qi.UNKNOWN:return ar.UNKNOWN;case Qi.DEADLINE_EXCEEDED:return ar.DEADLINE_EXCEEDED;case Qi.RESOURCE_EXHAUSTED:return ar.RESOURCE_EXHAUSTED;case Qi.INTERNAL:return ar.INTERNAL;case Qi.UNAVAILABLE:return ar.UNAVAILABLE;case Qi.UNAUTHENTICATED:return ar.UNAUTHENTICATED;case Qi.INVALID_ARGUMENT:return ar.INVALID_ARGUMENT;case Qi.NOT_FOUND:return ar.NOT_FOUND;case Qi.ALREADY_EXISTS:return ar.ALREADY_EXISTS;case Qi.PERMISSION_DENIED:return ar.PERMISSION_DENIED;case Qi.FAILED_PRECONDITION:return ar.FAILED_PRECONDITION;case Qi.ABORTED:return ar.ABORTED;case Qi.OUT_OF_RANGE:return ar.OUT_OF_RANGE;case Qi.UNIMPLEMENTED:return ar.UNIMPLEMENTED;case Qi.DATA_LOSS:return ar.DATA_LOSS;default:return Xr()}}(oa=Qi||(Qi={}))[oa.OK=0]="OK",oa[oa.CANCELLED=1]="CANCELLED",oa[oa.UNKNOWN=2]="UNKNOWN",oa[oa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oa[oa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oa[oa.NOT_FOUND=5]="NOT_FOUND",oa[oa.ALREADY_EXISTS=6]="ALREADY_EXISTS",oa[oa.PERMISSION_DENIED=7]="PERMISSION_DENIED",oa[oa.UNAUTHENTICATED=16]="UNAUTHENTICATED",oa[oa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oa[oa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oa[oa.ABORTED=10]="ABORTED",oa[oa.OUT_OF_RANGE=11]="OUT_OF_RANGE",oa[oa.UNIMPLEMENTED=12]="UNIMPLEMENTED",oa[oa.INTERNAL=13]="INTERNAL",oa[oa.UNAVAILABLE=14]="UNAVAILABLE",oa[oa.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eve(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sve=new Ep([4294967295,4294967295],0);function N7(t){const e=Eve().encode(t),r=new fJ;return r.update(e),new Uint8Array(r.digest())}function C7(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ep([r,n],0),new Ep([a,s],0)]}class UD{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Fy(`Invalid padding: ${r}`);if(n<0)throw new Fy(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Fy(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Fy(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Ep.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Ep.fromNumber(n)));return a.compare(Sve)===1&&(a=new Ep([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=N7(e),[n,a]=C7(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new UD(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const r=N7(e),[n,a]=C7(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Fy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,ww.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new pj(un.min(),a,new Ds(Fn),Au(),Kn())}}class ww{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new ww(n,r,Kn(),Kn(),Kn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class nZ{constructor(e,r){this.targetId=e,this.me=r}}class aZ{constructor(e,r,n=Ri.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class _7{constructor(){this.fe=0,this.ge=S7(),this.pe=Ri.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Kn(),r=Kn(),n=Kn();return this.ge.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Xr()}}),new ww(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=S7()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,rn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ive{constructor(e){this.Le=e,this.Be=new Map,this.ke=Au(),this.qe=E7(),this.Qe=new Ds(Fn)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Xr()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,a)=>{this.ze(a)&&r(a)})}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if(YE(s))if(n===0){const o=new Mr(s.path);this.Ue(r,o,Bs.newNoDocument(o,un.min()))}else rn(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=lm(n).toUint8Array()}catch(c){if(c instanceof PJ)return om("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new UD(o,a,s)}catch(c){return om(c instanceof Fy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,s,null),a++)}),a}rt(e){const r=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&YE(l.target)){const c=new Mr(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Bs.newNoDocument(c,e))}s.be&&(r.set(o,s.ve()),s.Ce())}});let n=Kn();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const a=new pj(e,r,this.Qe,this.ke,n);return this.ke=Au(),this.qe=E7(),this.Qe=new Ds(Fn),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new _7,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Ya(Fn),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||wr("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _7),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function E7(){return new Ds(Mr.comparator)}function S7(){return new Ds(Mr.comparator)}const jve={asc:"ASCENDING",desc:"DESCENDING"},Pve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bve={and:"AND",or:"OR"};class Tve{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function LT(t,e){return t.useProto3Json||xw(e)?e:{value:e}}function Bv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sZ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kve(t,e){return Bv(t,e.toTimestamp())}function Vo(t){return rn(!!t),un.fromTimestamp(function(r){const n=sA(r);return new mr(n.seconds,n.nanos)}(t))}function QD(t,e){return UT(t,e).canonicalString()}function UT(t,e){const r=function(a){return new xa(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function iZ(t){const e=xa.fromString(t);return rn(mZ(e)),e}function m2(t,e){return QD(t.databaseId,e.path)}function $h(t,e){const r=iZ(e);if(r.get(1)!==t.databaseId.projectId)throw new Pr(ar.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Pr(ar.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Mr(cZ(r))}function oZ(t,e){return QD(t.databaseId,e)}function lZ(t){const e=iZ(t);return e.length===4?xa.emptyPath():cZ(e)}function QT(t){return new xa(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cZ(t){return rn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function I7(t,e,r){return{name:m2(t,e),fields:r.value.mapValue.fields}}function Fve(t,e,r){const n=$h(t,e.name),a=Vo(e.updateTime),s=e.createTime?Vo(e.createTime):un.min(),o=new dl({mapValue:{fields:e.fields}}),l=Bs.newFoundDocument(n,a,s,o);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function Ove(t,e){return"found"in e?function(n,a){rn(!!a.found),a.found.name,a.found.updateTime;const s=$h(n,a.found.name),o=Vo(a.found.updateTime),l=a.found.createTime?Vo(a.found.createTime):un.min(),c=new dl({mapValue:{fields:a.found.fields}});return Bs.newFoundDocument(s,o,l,c)}(t,e):"missing"in e?function(n,a){rn(!!a.missing),rn(!!a.readTime);const s=$h(n,a.missing),o=Vo(a.readTime);return Bs.newNoDocument(s,o)}(t,e):Xr()}function Dve(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Xr()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(rn(d===void 0||typeof d=="string"),Ri.fromBase64String(d||"")):(rn(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ri.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?ar.UNKNOWN:rZ(u.code);return new Pr(d,u.message||"")}(o);r=new aZ(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=$h(t,n.document.name),s=Vo(n.document.updateTime),o=n.document.createTime?Vo(n.document.createTime):un.min(),l=new dl({mapValue:{fields:n.document.fields}}),c=Bs.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new eE(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=$h(t,n.document),s=n.readTime?Vo(n.readTime):un.min(),o=Bs.newNoDocument(a,s),l=n.removedTargetIds||[];r=new eE([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=$h(t,n.document),s=n.removedTargetIds||[];r=new eE([],s,a,null)}else{if(!("filter"in e))return Xr();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new _ve(a,s),l=n.targetId;r=new nZ(l,o)}}return r}function p2(t,e){let r;if(e instanceof a1)r={update:I7(t,e.key,e.value)};else if(e instanceof s1)r={delete:m2(t,e.key)};else if(e instanceof wA)r={update:I7(t,e.key,e.data),updateMask:Vve(e.fieldMask)};else{if(!(e instanceof DD))return Xr();r={verify:m2(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof h2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Zp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Pv)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof A2)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Xr()}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:kve(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Xr()}(t,e.precondition)),r}function VT(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?ks.updateTime(Vo(s.updateTime)):s.exists!==void 0?ks.exists(s.exists):ks.none()}(e.currentDocument):ks.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(o,l){let c=null;if("setToServerValue"in l)rn(l.setToServerValue==="REQUEST_TIME"),c=new h2;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new Zp(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new Pv(d)}else"increment"in l?c=new A2(o,l.increment):Xr();const u=Ts.fromServerFormat(l.fieldPath);return new JJ(u,c)}(t,a)):[];if(e.update){e.update.name;const a=$h(t,e.update.name),s=new dl({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new Oc(u.map(d=>Ts.fromServerFormat(d)))}(e.updateMask);return new wA(a,s,o,r,n)}return new a1(a,s,r,n)}if(e.delete){const a=$h(t,e.delete);return new s1(a,r)}if(e.verify){const a=$h(t,e.verify);return new DD(a,r)}return Xr()}function Rve(t,e){return t&&t.length>0?(rn(e!==void 0),t.map(r=>function(a,s){let o=a.updateTime?Vo(a.updateTime):Vo(s);return o.isEqual(un.min())&&(o=Vo(s)),new wve(o,a.transformResults||[])}(r,e))):[]}function uZ(t,e){return{documents:[oZ(t,e.path)]}}function dZ(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=oZ(t,a);const s=function(u){if(u.length!==0)return AZ(Va.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(A){return{field:wx(A.field),direction:Lve(A.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=LT(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:a}}function fZ(t){let e=lZ(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){rn(n===1);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(f){const A=hZ(f);return A instanceof Va&&FD(A)?A.getFilters():[A]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(A=>function(m){return new f2(Nx(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(A))}(r.orderBy));let l=null;r.limit&&(l=function(f){let A;return A=typeof f=="object"?f.value:f,xw(A)?null:A}(r.limit));let c=null;r.startAt&&(c=function(f){const A=!!f.before,h=f.values||[];return new Iv(h,A)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const A=!f.before,h=f.values||[];return new Iv(h,A)}(r.endAt)),cve(e,a,o,s,l,"F",c,u)}function Mve(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xr()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function hZ(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Nx(r.unaryFilter.field);return na.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Nx(r.unaryFilter.field);return na.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nx(r.unaryFilter.field);return na.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nx(r.unaryFilter.field);return na.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xr()}}(t):t.fieldFilter!==void 0?function(r){return na.create(Nx(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xr()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Va.create(r.compositeFilter.filters.map(n=>hZ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Xr()}}(r.compositeFilter.op))}(t):Xr()}function Lve(t){return jve[t]}function Uve(t){return Pve[t]}function Qve(t){return Bve[t]}function wx(t){return{fieldPath:t.canonicalString()}}function Nx(t){return Ts.fromServerFormat(t.fieldPath)}function AZ(t){return t instanceof na?function(r){if(r.op==="=="){if(d7(r.value))return{unaryFilter:{field:wx(r.field),op:"IS_NAN"}};if(u7(r.value))return{unaryFilter:{field:wx(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(d7(r.value))return{unaryFilter:{field:wx(r.field),op:"IS_NOT_NAN"}};if(u7(r.value))return{unaryFilter:{field:wx(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wx(r.field),op:Uve(r.op),value:r.value}}}(t):t instanceof Va?function(r){const n=r.getFilters().map(a=>AZ(a));return n.length===1?n[0]:{compositeFilter:{op:Qve(r.op),filters:n}}}(t):Xr()}function Vve(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function mZ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,r,n,a,s=un.min(),o=un.min(),l=Ri.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Dh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Dh(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(e){this.ct=e}}function Hve(t,e){let r;if(e.document)r=Fve(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Mr.fromSegments(e.noDocument.path),a=tg(e.noDocument.readTime);r=Bs.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xr();{const n=Mr.fromSegments(e.unknownDocument.path),a=tg(e.unknownDocument.version);r=Bs.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new mr(a[0],a[1]);return un.fromTimestamp(s)}(e.readTime)),r}function j7(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:eS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,o){return{name:m2(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Bv(s,o.version.toTimestamp()),createTime:Bv(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:eg(e.version)};else{if(!e.isUnknownDocument())return Xr();n.unknownDocument={path:r.path.toArray(),version:eg(e.version)}}return n}function eS(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function eg(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tg(t){const e=new mr(t.seconds,t.nanoseconds);return un.fromTimestamp(e)}function lp(t,e){const r=(e.baseMutations||[]).map(s=>VT(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>VT(t.ct,s)),a=mr.fromMillis(e.localWriteTimeMs);return new RD(e.batchId,a,r,n)}function Oy(t){const e=tg(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?tg(t.lastLimboFreeSnapshotVersion):un.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return rn(s.documents.length===1),ud(yw(lZ(s.documents[0])))}(t.query):function(s){return ud(fZ(s))}(t.query),new Dh(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Ri.fromBase64String(t.resumeToken))}function gZ(t,e){const r=eg(e.snapshotVersion),n=eg(e.lastLimboFreeSnapshotVersion);let a;a=YE(e.target)?uZ(t.ct,e.target):dZ(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Jp(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function xZ(t){const e=fZ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ZE(e,e.limit,"L"):e}function A3(t,e){return new LD(e.largestBatchId,VT(t.ct,e.overlayMutation))}function P7(t,e){const r=e.path.lastSegment();return[t,fc(e.path.popLast()),r]}function B7(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:eg(n.readTime),documentKey:fc(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ve{getBundleMetadata(e,r){return T7(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:tg(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return T7(e).put(function(a){return{bundleId:a.id,createTime:eg(Vo(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return k7(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:xZ(s.bundledQuery),readTime:tg(s.readTime)}}(n)})}saveNamedQuery(e,r){return k7(e).put(function(a){return{name:a.name,readTime:eg(Vo(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function T7(t){return bo(t,"bundles")}function k7(t){return bo(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new gj(e,n)}getOverlay(e,r){return Y1(e).get(P7(this.userId,r)).next(n=>n?A3(this.serializer,n):null)}getOverlays(e,r){const n=Df();return Gt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,o)=>{const l=new LD(r,o);a.push(this.ht(e,l))}),Gt.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(o=>a.add(fc(o.getCollectionPath())));const s=[];return a.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);s.push(Y1(e).j("collectionPathOverlayIndex",l))}),Gt.waitFor(s)}getOverlaysForCollection(e,r,n){const a=Df(),s=fc(r),o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Y1(e).U("collectionPathOverlayIndex",o).next(l=>{for(const c of l){const u=A3(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=Df();let o;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Y1(e).J({index:"collectionGroupOverlayIndex",range:l},(c,u,d)=>{const f=A3(this.serializer,u);s.size()<a||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return Y1(e).put(function(a,s,o){const[l,c,u]=P7(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:p2(a.ct,o.mutation)}}(this.serializer,this.userId,r))}}function Y1(t){return bo(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gve{Pt(e){return bo(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Ri.fromUint8Array(n):Ri.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(js(e.integerValue));else if("doubleValue"in e){const n=js(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),o2(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=sA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(lm(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?BJ(e)?this.dt(r,Number.MAX_SAFE_INTEGER):fj(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Xr()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const s=e.fields||{};this.dt(r,53);const o="value",l=((a=(n=s[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(js(l)),this.Vt(o,r),this.Tt(s[o],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),Mr.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}cp.vt=new cp;function Kve(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function F7(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const o=Kve(255&n[s]);if(a+=o,o!==8)break}return a}(t);return Math.ceil(e/8)}class qve{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=F7(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=F7(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class zve{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Wve{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class J1{constructor(){this.jt=new qve,this.Ht=new zve(this.jt),this.Jt=new Wve(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new up(this.indexId,this.documentKey,this.arrayValue,n)}}function JA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=O7(t.arrayValue,e.arrayValue),r!==0?r:(r=O7(t.directionalValue,e.directionalValue),r!==0?r:Mr.comparator(t.documentKey,e.documentKey)))}function O7(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e){this.Xt=new Ya((r,n)=>Ts.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(rn(e.collectionGroup===this.collectionId),this.nn)return!1;const r=BT(e);if(r!==void 0&&!this.sn(r))return!1;const n=Zm(e);let a=new Set,s=0,o=0;for(;s<n.length&&this.sn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.on(l,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(o>=this.en.length||!this._n(this.en[o++],l))return!1}return!0}an(){if(this.nn)return null;let e=new Ya(Ts.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new W_(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new W_(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new W_(n.field,n.dir==="asc"?0:1)));return new XE(XE.UNKNOWN_ID,this.collectionId,r,i2.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vZ(t){var e,r;if(rn(t instanceof na||t instanceof Va),t instanceof na){if(t instanceof UJ){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>na.create(t.field,"==",s)))||[];return Va.create(a,"or")}return t}const n=t.filters.map(a=>vZ(a));return Va.create(n,t.op)}function Xve(t){if(t.getFilters().length===0)return[];const e=GT(vZ(t));return rn(yZ(e)),HT(e)||$T(e)?[e]:e.getFilters()}function HT(t){return t instanceof na}function $T(t){return t instanceof Va&&FD(t)}function yZ(t){return HT(t)||$T(t)||function(r){if(r instanceof Va&&OT(r)){for(const n of r.getFilters())if(!HT(n)&&!$T(n))return!1;return!0}return!1}(t)}function GT(t){if(rn(t instanceof na||t instanceof Va),t instanceof na)return t;if(t.filters.length===1)return GT(t.filters[0]);const e=t.filters.map(n=>GT(n));let r=Va.create(e,t.op);return r=tS(r),yZ(r)?r:(rn(r instanceof Va),rn(jv(r)),rn(r.filters.length>1),r.filters.reduce((n,a)=>VD(n,a)))}function VD(t,e){let r;return rn(t instanceof na||t instanceof Va),rn(e instanceof na||e instanceof Va),r=t instanceof na?e instanceof na?function(a,s){return Va.create([a,s],"and")}(t,e):R7(t,e):e instanceof na?R7(e,t):function(a,s){if(rn(a.filters.length>0&&s.filters.length>0),jv(a)&&jv(s))return RJ(a,s.getFilters());const o=OT(a)?a:s,l=OT(a)?s:a,c=o.filters.map(u=>VD(u,l));return Va.create(c,"or")}(t,e),tS(r)}function R7(t,e){if(jv(e))return RJ(e,t.getFilters());{const r=e.filters.map(n=>VD(t,n));return Va.create(r,"or")}}function tS(t){if(rn(t instanceof na||t instanceof Va),t instanceof na)return t;const e=t.getFilters();if(e.length===1)return tS(e[0]);if(OJ(t))return t;const r=e.map(a=>tS(a)),n=[];return r.forEach(a=>{a instanceof na?n.push(a):a instanceof Va&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:Va.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yve{constructor(){this.un=new HD}addToCollectionParentIndex(e,r){return this.un.add(r),Gt.resolve()}getCollectionParents(e,r){return Gt.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Gt.resolve()}deleteFieldIndex(e,r){return Gt.resolve()}deleteAllFieldIndexes(e){return Gt.resolve()}createTargetIndexes(e,r){return Gt.resolve()}getDocumentsMatchingTarget(e,r){return Gt.resolve(null)}getIndexType(e,r){return Gt.resolve(0)}getFieldIndexes(e,r){return Gt.resolve([])}getNextCollectionGroupToUpdate(e){return Gt.resolve(null)}getMinOffset(e,r){return Gt.resolve(bu.min())}getMinOffsetFromCollectionGroup(e,r){return Gt.resolve(bu.min())}updateCollectionGroup(e,r,n){return Gt.resolve()}updateIndexEntries(e,r){return Gt.resolve()}}class HD{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Ya(xa.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Ya(xa.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new Uint8Array(0);class Jve{constructor(e,r){this.databaseId=r,this.cn=new HD,this.ln=new Im(n=>Jp(n),(n,a)=>vw(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:fc(a)};return M7(e).put(s)}return Gt.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[yJ(r),""],!1,!0);return M7(e).U(a).next(s=>{for(const o of s){if(o.collectionId!==r)break;n.push(Of(o.parent))}return n})}addFieldIndex(e,r){const n=Z1(e),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const o=Wg(e);return s.next(l=>{o.put(B7(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=Z1(e),a=Wg(e),s=zg(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Z1(e),n=zg(e),a=Wg(e);return r.j().next(()=>n.j()).next(()=>a.j())}createTargetIndexes(e,r){return Gt.forEach(this.hn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new D7(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=zg(e);let a=!0;const s=new Map;return Gt.forEach(this.hn(r),o=>this.Pn(e,o).next(l=>{a&&(a=!!l),s.set(o,l)})).next(()=>{if(a){let o=Kn();const l=[];return Gt.forEach(s,(c,u)=>{wr("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(c)} to execute ${Jp(r)}`);const d=function(b,w){const P=BT(w);if(P===void 0)return null;for(const j of JE(b,P.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(u,c),f=function(b,w){const P=new Map;for(const j of Zm(w))for(const _ of JE(b,j.fieldPath))switch(_.op){case"==":case"in":P.set(j.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return P.set(j.fieldPath.canonicalString(),_.value),Array.from(P.values())}return null}(u,c),A=function(b,w){const P=[];let j=!0;for(const _ of Zm(w)){const I=_.kind===0?p7(b,_.fieldPath,b.startAt):g7(b,_.fieldPath,b.startAt);P.push(I.value),j&&(j=I.inclusive)}return new Iv(P,j)}(u,c),h=function(b,w){const P=[];let j=!0;for(const _ of Zm(w)){const I=_.kind===0?g7(b,_.fieldPath,b.endAt):p7(b,_.fieldPath,b.endAt);P.push(I.value),j&&(j=I.inclusive)}return new Iv(P,j)}(u,c),m=this.In(c,u,A),p=this.In(c,u,h),g=this.Tn(c,u,f),v=this.En(c.indexId,d,m,A.inclusive,p,h.inclusive,g);return Gt.forEach(v,y=>n.G(y,r.limit).next(b=>{b.forEach(w=>{const P=Mr.fromSegments(w.documentKey);o.has(P)||(o=o.add(P),l.push(P))})}))}).next(()=>l)}return Gt.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Xve(Va.create(e.filters,"and")).map(n=>RT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,a,s,o,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let f=0;f<c;++f){const A=r?this.dn(r[f/u]):XN,h=this.An(e,A,n[f%u],a),m=this.Rn(e,A,s[f%u],o),p=l.map(g=>this.An(e,A,g,!0));d.push(...this.createRange(h,m,p))}return d}An(e,r,n,a){const s=new up(e,Mr.empty(),r,n);return a?s:s.Zt()}Rn(e,r,n,a){const s=new up(e,Mr.empty(),r,n);return a?s.Zt():s}Pn(e,r){const n=new D7(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let o=null;for(const l of s)n.rn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,r){let n=2;const a=this.hn(r);return Gt.forEach(a,s=>this.Pn(e,s).next(o=>{o?n!==0&&o.fields.length<function(c){let u=new Ya(Ts.comparator),d=!1;for(const f of c.filters)for(const A of f.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?d=!0:u=u.add(A.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(o){return o.limit!==null}(r)&&a.length>1&&n===2?1:n)}Vn(e,r){const n=new J1;for(const a of Zm(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const o=n.Yt(a.kind);cp.vt.It(s,o)}return n.zt()}dn(e){const r=new J1;return cp.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new J1;return cp.vt.It(u2(this.databaseId,r),n.Yt(function(s){const o=Zm(s);return o.length===0?0:o[o.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new J1);let s=0;for(const o of Zm(e)){const l=n[s++];for(const c of a)if(this.fn(r,o.fieldPath)&&d2(l))a=this.gn(a,o,l);else{const u=c.Yt(o.kind);cp.vt.It(l,u)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],s=[];for(const o of n.arrayValue.values||[])for(const l of a){const c=new J1;c.seed(l.zt()),cp.vt.It(o,c.Yt(r.kind)),s.push(c)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof na&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Z1(e),a=Wg(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const o=[];return Gt.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{o.push(function(d,f){const A=f?new i2(f.sequenceNumber,new bu(tg(f.readTime),new Mr(Of(f.documentKey)),f.largestBatchId)):i2.empty(),h=d.fields.map(([m,p])=>new W_(Ts.fromServerFormat(m),p));return new XE(d.indexId,d.collectionGroup,h,A)}(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:Fn(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=Z1(e),s=Wg(e);return this.yn(e).next(o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>Gt.forEach(l,c=>s.put(B7(c.indexId,this.uid,o,n)))))}updateIndexEntries(e,r){const n=new Map;return Gt.forEach(r,(a,s)=>{const o=n.get(a.collectionGroup);return(o?Gt.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),Gt.forEach(l,c=>this.wn(e,a,c).next(u=>{const d=this.Sn(s,c);return u.isEqual(d)?Gt.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,r,n,a){return zg(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return zg(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=zg(e);let s=new Ya(JA);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(o,l)=>{s=s.add(new up(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(e,r){let n=new Ya(JA);const a=this.Vn(r,e);if(a==null)return n;const s=BT(r);if(s!=null){const o=e.data.field(s.fieldPath);if(d2(o))for(const l of o.arrayValue.values||[])n=n.add(new up(r.indexId,e.key,this.dn(l),a))}else n=n.add(new up(r.indexId,e.key,XN,a));return n}bn(e,r,n,a,s){wr("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return function(c,u,d,f,A){const h=c.getIterator(),m=u.getIterator();let p=qg(h),g=qg(m);for(;p||g;){let v=!1,y=!1;if(p&&g){const b=d(p,g);b<0?y=!0:b>0&&(v=!0)}else p!=null?y=!0:v=!0;v?(f(g),g=qg(m)):y?(A(p),p=qg(h)):(p=qg(h),g=qg(m))}}(a,s,JA,l=>{o.push(this.Dn(e,r,n,l))},l=>{o.push(this.vn(e,r,n,l))}),Gt.waitFor(o)}yn(e){let r=1;return Wg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((o,l)=>JA(o,l)).filter((o,l,c)=>!l||JA(o,c[l-1])!==0);const a=[];a.push(e);for(const o of n){const l=JA(o,e),c=JA(o,r);if(l===0)a[0]=e.Zt();else if(l>0&&c<0)a.push(o),a.push(o.Zt());else if(c>0)break}a.push(r);const s=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const l=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,XN,[]],c=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,XN,[]];s.push(IDBKeyRange.bound(l,c))}return s}Cn(e,r){return JA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(L7)}getMinOffset(e,r){return Gt.mapArray(this.hn(r),n=>this.Pn(e,n).next(a=>a||Xr())).next(L7)}}function M7(t){return bo(t,"collectionParents")}function zg(t){return bo(t,"indexEntries")}function Z1(t){return bo(t,"indexConfiguration")}function Wg(t){return bo(t,"indexState")}function L7(t){rn(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;jD(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new bu(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pc{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Pc(e,Pc.DEFAULT_COLLECTION_PERCENTILE,Pc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bZ(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),s=[],o=IDBKeyRange.only(r.batchId);let l=0;const c=n.J({range:o},(d,f,A)=>(l++,A.delete()));s.push(c.next(()=>{rn(l===1)}));const u=[];for(const d of r.mutations){const f=_J(e,d.key.path,r.batchId);s.push(a.delete(f)),u.push(d.key)}return Gt.waitFor(s).next(()=>u)}function rS(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Xr();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pc.DEFAULT_COLLECTION_PERCENTILE=10,Pc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pc.DEFAULT=new Pc(41943040,Pc.DEFAULT_COLLECTION_PERCENTILE,Pc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pc.DISABLED=new Pc(-1,0,0);class xj{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){rn(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new xj(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ZA(e).J({index:"userMutationsIndex",range:n},(a,s,o)=>{r=!1,o.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=Cx(e),o=ZA(e);return o.add({}).next(l=>{rn(typeof l=="number");const c=new RD(l,r,n,a),u=function(h,m,p){const g=p.baseMutations.map(y=>p2(h.ct,y)),v=p.mutations.map(y=>p2(h.ct,y));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:v}}(this.serializer,this.userId,c),d=[];let f=new Ya((A,h)=>Fn(A.canonicalString(),h.canonicalString()));for(const A of a){const h=_J(this.userId,A.key.path,l);f=f.add(A.key.path.popLast()),d.push(o.put(u)),d.push(s.put(h,kxe))}return f.forEach(A=>{d.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Fn[l]=c.keys()}),Gt.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return ZA(e).get(r).next(n=>n?(rn(n.userId===this.userId),lp(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Gt.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return ZA(e).J({index:"userMutationsIndex",range:a},(o,l,c)=>{l.userId===this.userId&&(rn(l.batchId>=n),s=lp(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return ZA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(a,s,o)=>{n=s.batchId,o.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ZA(e).U("userMutationsIndex",r).next(n=>n.map(a=>lp(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=X_(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return Cx(e).J({range:a},(o,l,c)=>{const[u,d,f]=o,A=Of(d);if(u===this.userId&&r.path.isEqual(A))return ZA(e).get(f).next(h=>{if(!h)throw Xr();rn(h.userId===this.userId),s.push(lp(this.serializer,h))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ya(Fn);const a=[];return r.forEach(s=>{const o=X_(this.userId,s.path),l=IDBKeyRange.lowerBound(o),c=Cx(e).J({range:l},(u,d,f)=>{const[A,h,m]=u,p=Of(h);A===this.userId&&s.path.isEqual(p)?n=n.add(m):f.done()});a.push(c)}),Gt.waitFor(a).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=X_(this.userId,n),o=IDBKeyRange.lowerBound(s);let l=new Ya(Fn);return Cx(e).J({range:o},(c,u,d)=>{const[f,A,h]=c,m=Of(A);f===this.userId&&n.isPrefixOf(m)?m.length===a&&(l=l.add(h)):d.done()}).next(()=>this.xn(e,l))}xn(e,r){const n=[],a=[];return r.forEach(s=>{a.push(ZA(e).get(s).next(o=>{if(o===null)throw Xr();rn(o.userId===this.userId),n.push(lp(this.serializer,o))}))}),Gt.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return bZ(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Gt.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Gt.resolve();const n=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),a=[];return Cx(e).J({range:n},(s,o,l)=>{if(s[0]===this.userId){const c=Of(s[1]);a.push(c)}else l.done()}).next(()=>{rn(a.length===0)})})}containsKey(e,r){return wZ(e,this.userId,r)}Nn(e){return NZ(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function wZ(t,e,r){const n=X_(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let o=!1;return Cx(t).J({range:s,H:!0},(l,c,u)=>{const[d,f,A]=l;d===e&&f===a&&(o=!0),u.done()}).next(()=>o)}function ZA(t){return bo(t,"mutations")}function Cx(t){return bo(t,"documentMutations")}function NZ(t){return bo(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new rg(0)}static kn(){return new rg(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zve{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new rg(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>un.fromTimestamp(new mr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Xg(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(rn(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return Xg(e).J((o,l)=>{const c=Oy(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>Gt.waitFor(s)).next(()=>a)}forEachTarget(e,r){return Xg(e).J((n,a)=>{const s=Oy(a);r(s)})}qn(e){return Q7(e).get("targetGlobalKey").next(r=>(rn(r!==null),r))}Qn(e,r){return Q7(e).put("targetGlobalKey",r)}Kn(e,r){return Xg(e).put(gZ(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Jp(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Xg(e).J({range:a,index:"queryTargetsIndex"},(o,l,c)=>{const u=Oy(l);vw(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=E0(e);return r.forEach(o=>{const l=fc(o.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(e,n,o))}),Gt.waitFor(a)}removeMatchingKeys(e,r,n){const a=E0(e);return Gt.forEach(r,s=>{const o=fc(s.path);return Gt.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=E0(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=E0(e);let s=Kn();return a.J({range:n,H:!0},(o,l,c)=>{const u=Of(o[1]),d=new Mr(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=fc(r.path),a=IDBKeyRange.bound([n],[yJ(n)],!1,!0);let s=0;return E0(e).J({index:"documentTargetsIndex",H:!0,range:a},([o,l],c,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,r){return Xg(e).get(r).next(n=>n?Oy(n):null)}}function Xg(t){return bo(t,"targets")}function Q7(t){return bo(t,"targetGlobal")}function E0(t){return bo(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7([t,e],[r,n]){const a=Fn(t,r);return a===0?Fn(e,n):a}class e1e{constructor(e){this.Un=e,this.buffer=new Ya(V7),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();V7(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class t1e{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){wr("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Sm(r)?wr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await wg(r)}await this.Hn(3e5)})}}class r1e{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Gt.resolve(ad.oe);const n=new e1e(r);return this.Jn.forEachTarget(e,a=>n.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(e,a=>n.zn(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(wr("LruGarbageCollector","Garbage collection skipped; disabled"),Gt.resolve(U7)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(wr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U7):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(wr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,o=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),yx()<=ra.DEBUG&&wr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Gt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function n1e(t,e){return new r1e(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1e{constructor(e,r){this.db=e,this.garbageCollector=n1e(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,a)=>r(a))}addReference(e,r,n){return YN(e,n)}removeReference(e,r,n){return YN(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return YN(e,r)}nr(e,r){return function(a,s){let o=!1;return NZ(a).Y(l=>wZ(a,l,s).next(c=>(c&&(o=!0),Gt.resolve(!c)))).next(()=>o)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.tr(e,(o,l)=>{if(l<=r){const c=this.nr(e,o).next(u=>{if(!u)return s++,n.getEntry(e,o).next(()=>(n.removeEntry(o,un.min()),E0(e).delete(function(f){return[0,fc(f.path)]}(o))))});a.push(c)}}).next(()=>Gt.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return YN(e,r)}tr(e,r){const n=E0(e);let a,s=ad.oe;return n.J({index:"documentTargetsIndex"},([o,l],{path:c,sequenceNumber:u})=>{o===0?(s!==ad.oe&&r(new Mr(Of(a)),s),s=u,a=c):s=ad.oe}).next(()=>{s!==ad.oe&&r(new Mr(Of(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function YN(t,e){return E0(t).put(function(n,a){return{targetId:0,path:fc(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CZ{constructor(){this.changes=new Im(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Bs.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Gt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1e{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Vm(e).put(n)}removeEntry(e,r,n){return Vm(e).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],eS(o),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Bs.newInvalidDocument(r);return Vm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ey(r))},(a,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:Bs.newInvalidDocument(r)};return Vm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ey(r))},(a,s)=>{n={document:this.ir(r,s),size:rS(s)}}).next(()=>n)}getEntries(e,r){let n=Au();return this._r(e,r,(a,s)=>{const o=this.ir(a,s);n=n.insert(a,o)}).next(()=>n)}ar(e,r){let n=Au(),a=new Ds(Mr.comparator);return this._r(e,r,(s,o)=>{const l=this.ir(s,o);n=n.insert(s,l),a=a.insert(s,rS(o))}).next(()=>({documents:n,ur:a}))}_r(e,r,n){if(r.isEmpty())return Gt.resolve();let a=new Ya(G7);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(ey(a.first()),ey(a.last())),o=a.getIterator();let l=o.getNext();return Vm(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{const f=Mr.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&G7(l,f)<0;)n(l,null),l=o.getNext();l&&l.isEqual(f)&&(n(l,u),l=o.hasNext()?o.getNext():null),l?d.$(ey(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const o=r.path,l=[o.popLast().toArray(),o.lastSegment(),eS(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vm(e).U(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Au();for(const f of u){const A=this.ir(Mr.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);A.isFoundDocument()&&(bw(r,A)||a.has(A.key))&&(d=d.insert(A.key,A))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=Au();const o=$7(r,n),l=$7(r,bu.max());return Vm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(c,u,d)=>{const f=this.ir(Mr.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new i1e(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return H7(e).get("remoteDocumentGlobalKey").next(r=>(rn(!!r),r))}rr(e,r){return H7(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Hve(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(un.min())))return n}return Bs.newInvalidDocument(e)}}function _Z(t){return new s1e(t)}class i1e extends CZ{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Im(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new Ya((s,o)=>Fn(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,l.readTime)),o.isValidDocument()){const c=j7(this.cr.serializer,o);a=a.add(s.path.popLast());const u=rS(c);n+=u-l.size,r.push(this.cr.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){const c=j7(this.cr.serializer,o.convertToNoDocument(un.min()));r.push(this.cr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),Gt.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:a})=>(a.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:n.get(s).readTime})}),n))}}function H7(t){return bo(t,"remoteDocumentGlobal")}function Vm(t){return bo(t,"remoteDocumentsV14")}function ey(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $7(t,e){const r=e.documentKey.path.toArray();return[t,eS(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function G7(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=Fn(r[s],n[s]),a)return a;return a=Fn(r.length,n.length),a||(a=Fn(r[r.length-2],n[n.length-2]),a||Fn(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1e{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&fb(n.mutation,a,Oc.empty(),mr.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Kn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Kn()){const a=Df();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let o=ky();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Df();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Kn()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,a){let s=Au();const o=db(),l=function(){return db()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof wA)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),fb(d.mutation,u,d.mutation.getFieldMask(),mr.now())):o.set(u.key,Oc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>{var f;return l.set(u,new o1e(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=db();let a=new Ds((o,l)=>o-l),s=Kn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Oc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||Kn()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=KJ();d.forEach(A=>{if(!s.has(A)){const h=ZJ(r.get(A),n.get(A));h!==null&&f.set(A,h),s=s.add(A)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Gt.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(o){return Mr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):QJ(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):Gt.resolve(Df());let l=-1,c=s;return o.next(u=>Gt.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?Gt.resolve():this.remoteDocumentCache.getEntry(e,d).next(A=>{c=c.insert(d,A)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Kn())).next(d=>({batchId:l,changes:GJ(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Mr(r)).next(n=>{let a=ky();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let o=ky();return this.indexManager.getCollectionParents(e,s).next(l=>Gt.forEach(l,c=>{const u=function(f,A){return new n1(A,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((f,A)=>{o=o.insert(f,A)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Bs.newInvalidDocument(d)))});let l=ky();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&fb(d.mutation,u,Oc.empty(),mr.now()),bw(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1e{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Gt.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Vo(a.createTime)}}(r)),Gt.resolve()}getNamedQuery(e,r){return Gt.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(a){return{name:a.name,query:xZ(a.bundledQuery),readTime:Vo(a.readTime)}}(r)),Gt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1e{constructor(){this.overlays=new Ds(Mr.comparator),this.Ir=new Map}getOverlay(e,r){return Gt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Df();return Gt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.ht(e,r,s)}),Gt.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),Gt.resolve()}getOverlaysForCollection(e,r,n){const a=Df(),s=r.length+1,o=new Mr(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Gt.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new Ds((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Df(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Df(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Gt.resolve(l)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new LD(r,n));let s=this.Ir.get(r);s===void 0&&(s=Kn(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1e{constructor(){this.sessionToken=Ri.EMPTY_BYTE_STRING}getSessionToken(e){return Gt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Gt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.Tr=new Ya(ko.Er),this.dr=new Ya(ko.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new ko(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new ko(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Mr(new xa([])),n=new ko(r,e),a=new ko(r,e+1),s=[];return this.dr.forEachInRange([n,a],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Mr(new xa([])),n=new ko(r,e),a=new ko(r,e+1);let s=Kn();return this.dr.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(e){const r=new ko(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ko{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Mr.comparator(e.key,r.key)||Fn(e.wr,r.wr)}static Ar(e,r){return Fn(e.wr,r.wr)||Mr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1e{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Ya(ko.Er)}checkEmpty(e){return Gt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new RD(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.br=this.br.add(new ko(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Gt.resolve(o)}lookupMutationBatch(e,r){return Gt.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return Gt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Gt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ko(r,0),a=new ko(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],o=>{const l=this.Dr(o.wr);s.push(l)}),Gt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ya(Fn);return r.forEach(a=>{const s=new ko(a,0),o=new ko(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{n=n.add(l.wr)})}),Gt.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;Mr.isDocumentKey(s)||(s=s.child(""));const o=new ko(new Mr(s),0);let l=new Ya(Fn);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.wr)),!0)},o),Gt.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const a=this.Dr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){rn(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Gt.forEach(r.mutations,a=>{const s=new ko(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new ko(r,0),a=this.br.firstAfterOrEqual(n);return Gt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Gt.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1e{constructor(e){this.Mr=e,this.docs=function(){return new Ds(Mr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Gt.resolve(n?n.document.mutableCopy():Bs.newInvalidDocument(r))}getEntries(e,r){let n=Au();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Bs.newInvalidDocument(a))}),Gt.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=Au();const o=r.path,l=new Mr(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||jD(bJ(d),n)<=0||(a.has(d.key)||bw(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Gt.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Xr()}Or(e,r){return Gt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new h1e(this)}getSize(e){return Gt.resolve(this.size)}}class h1e extends CZ{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)}),Gt.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1e{constructor(e){this.persistence=e,this.Nr=new Im(r=>Jp(r),vw),this.lastRemoteSnapshotVersion=un.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $D,this.targetCount=0,this.kr=rg.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,a)=>r(a)),Gt.resolve()}getLastRemoteSnapshotVersion(e){return Gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Gt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Gt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Gt.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new rg(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Gt.resolve()}updateTargetData(e,r){return this.Kn(r),Gt.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Gt.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),Gt.waitFor(s).next(()=>a)}getTargetCount(e){return Gt.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Gt.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Gt.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(e,o))}),Gt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Gt.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Gt.resolve(n)}containsKey(e,r){return Gt.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(e,r){this.qr={},this.overlays={},this.Qr=new ad(0),this.Kr=!1,this.Kr=!0,this.$r=new u1e,this.referenceDelegate=e(this),this.Ur=new A1e(this),this.indexManager=new Yve,this.remoteDocumentCache=function(a){return new f1e(a)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new pZ(r),this.Gr=new l1e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new c1e,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new d1e(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){wr("MemoryPersistence","Starting transaction:",e);const a=new m1e(this.Qr.next());return this.referenceDelegate.zr(),n(a).next(s=>this.referenceDelegate.jr(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Hr(e,r){return Gt.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class m1e extends NJ{constructor(e){super(),this.currentSequenceNumber=e}}class vj{constructor(e){this.persistence=e,this.Jr=new $D,this.Yr=null}static Zr(e){return new vj(e)}get Xr(){if(this.Yr)return this.Yr;throw Xr()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Gt.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Gt.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Gt.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(a=>this.Xr.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Gt.forEach(this.Xr,n=>{const a=Mr.fromPath(n);return this.ei(e,a).next(s=>{s||r.removeEntry(a,un.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Gt.or([()=>Gt.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1e{constructor(e){this.serializer=e}O(e,r,n,a){const s=new dj("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",s7,{unique:!0}),c.createObjectStore("documentMutations")}(e),K7(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=Gt.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),K7(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:un.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),n<4&&a>=4&&(n!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",s7,{unique:!0});const f=u.store("mutations"),A=d.map(h=>f.put(h));return Gt.waitFor(A)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&a>=5&&(o=o.next(()=>this.ni(s))),n<6&&a>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&a>=7&&(o=o.next(()=>this.ii(s))),n<8&&a>=8&&(o=o.next(()=>this.si(e,s))),n<9&&a>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(o=o.next(()=>this.oi(s))),n<11&&a>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&a>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:Gxe});u.createIndex("collectionPathOverlayIndex",Kxe,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",qxe,{unique:!1})})(e)})),n<13&&a>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:Fxe});u.createIndex("documentKeyIndex",Oxe),u.createIndex("collectionGroupIndex",Dxe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&a>=14&&(o=o.next(()=>this.ai(e,s))),n<15&&a>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Qxe}).createIndex("sequenceNumberIndex",Vxe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Hxe}).createIndex("documentKeyIndex",$xe,{unique:!1})}(e))),n<16&&a>=16&&(o=o.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&a>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let r=0;return e.store("remoteDocuments").J((n,a)=>{r+=rS(a)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(a=>Gt.forEach(a,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next(l=>Gt.forEach(l,c=>{rn(c.userId===s.userId);const u=lp(this.serializer,c);return bZ(e,s.userId,u).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const s=[];return n.J((o,l)=>{const c=new xa(o),u=function(f){return[0,fc(f)]}(c);s.push(r.get(u).next(d=>d?Gt.resolve():(f=>r.put({targetId:0,path:fc(f),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>Gt.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:Uxe});const n=r.store("collectionParents"),a=new HD,s=o=>{if(a.add(o)){const l=o.lastSegment(),c=o.popLast();return n.put({collectionId:l,parent:fc(c)})}};return r.store("remoteDocuments").J({H:!0},(o,l)=>{const c=new xa(o);return s(c.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([o,l,c],u)=>{const d=Of(l);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,a)=>{const s=Oy(a),o=gZ(this.serializer,s);return r.put(o)})}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J((s,o)=>{const l=r.store("remoteDocumentsV14"),c=function(f){return f.document?new Mr(xa.fromString(f.document.name).popFirst(5)):f.noDocument?Mr.fromSegments(f.noDocument.path):f.unknownDocument?Mr.fromSegments(f.unknownDocument.path):Xr()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(l.put(u))}).next(()=>Gt.waitFor(a))}ai(e,r){const n=r.store("mutations"),a=_Z(this.serializer),s=new SZ(vj.Zr,this.serializer.ct);return n.U().next(o=>{const l=new Map;return o.forEach(c=>{var u;let d=(u=l.get(c.userId))!==null&&u!==void 0?u:Kn();lp(this.serializer,c).keys().forEach(f=>d=d.add(f)),l.set(c.userId,d)}),Gt.forEach(l,(c,u)=>{const d=new ll(u),f=gj.lt(this.serializer,d),A=s.getIndexManager(d),h=xj.lt(d,this.serializer,A,s.referenceDelegate);return new EZ(a,h,f,A).recalculateAndSaveOverlaysForDocumentKeys(new TT(r,ad.oe),c).next()})})}}function K7(t){t.createObjectStore("targetDocuments",{keyPath:Mxe}).createIndex("documentTargetsIndex",Lxe,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Rxe,{unique:!0}),t.createObjectStore("targetGlobal")}const m3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class GD{constructor(e,r,n,a,s,o,l,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=o,this.document=l,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=A=>Promise.resolve(),!GD.D())throw new Pr(ar.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new a1e(this,a),this.Ai=r+"main",this.serializer=new pZ(c),this.Ri=new J0(this.Ai,this.hi,new p1e(this.serializer)),this.$r=new Gve,this.Ur=new Zve(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_Z(this.serializer),this.Gr=new $ve,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&cc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pr(ar.FAILED_PRECONDITION,m3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ad(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>JN(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(Sm(e))return wr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return wr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ty(e).get("owner").next(r=>Gt.resolve(this.vi(r)))}Ci(e){return JN(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=bo(r,"clientMetadata");return n.U().next(a=>{const s=this.xi(a,18e5),o=a.filter(l=>s.indexOf(l)===-1);return Gt.forEach(o,l=>n.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Gt.resolve(!0):ty(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Pr(ar.FAILED_PRECONDITION,m3);return!1}}return!(!this.networkEnabled||!this.inForeground)||JN(e).U().next(n=>this.xi(n,5e3).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&wr("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new TT(e,ad.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>JN(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return xj.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Jve(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return gj.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){wr("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===17?Xxe:c===16?Wxe:c===15?BD:c===14?IJ:c===13?SJ:c===12?zxe:c===11?EJ:void Xr()}(this.hi);let o;return this.Ri.runTransaction(e,a,s,l=>(o=new TT(l,this.Qr?this.Qr.next():ad.oe),r==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw cc(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Pr(ar.FAILED_PRECONDITION,wJ);return n(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>n(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e){return ty(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Pr(ar.FAILED_PRECONDITION,m3)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ty(e).put("owner",r)}static D(){return J0.D()}bi(e){const r=ty(e);return r.get("owner").next(n=>this.vi(n)?(wr("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Gt.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(cc(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;EY()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return wr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return cc("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){cc("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ty(t){return bo(t,"owner")}function JN(t){return bo(t,"clientMetadata")}function g1e(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=Kn(),a=Kn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new KD(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IZ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return EY()?8:CJ(vo())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new x1e;return this.Xi(e,r,o).next(l=>{if(s.result=l,this.zi)return this.es(e,r,o,l.size)})}).next(()=>s.result)}es(e,r,n,a){return n.documentReadCount<this.ji?(yx()<=ra.DEBUG&&wr("QueryEngine","SDK will not create cache indexes for query:",bx(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Gt.resolve()):(yx()<=ra.DEBUG&&wr("QueryEngine","Query:",bx(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(yx()<=ra.DEBUG&&wr("QueryEngine","The SDK decides to create cache indexes for query:",bx(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ud(r))):Gt.resolve())}Yi(e,r){if(x7(r))return Gt.resolve(null);let n=ud(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=ZE(r,null,"F"),n=ud(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=Kn(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,o,c.readTime)?this.Yi(e,ZE(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,a){return x7(r)||a.isEqual(un.min())?Gt.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const o=this.ts(r,s);return this.ns(r,o,n,a)?Gt.resolve(null):(yx()<=ra.DEBUG&&wr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),bx(r)),this.rs(e,o,r,Exe(a,-1)).next(l=>l))})}ts(e,r){let n=new Ya(HJ(e));return r.forEach((a,s)=>{bw(e,s)&&(n=n.add(s))}),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return yx()<=ra.DEBUG&&wr("QueryEngine","Using full collection scan to execute query:",bx(r)),this.Ji.getDocumentsMatchingQuery(e,r,bu.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1e{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Ds(Fn),this._s=new Im(s=>Jp(s),vw),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EZ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function jZ(t,e,r,n){return new v1e(t,e,r,n)}async function PZ(t,e){const r=In(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=Kn();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function y1e(t,e){const r=In(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,A=f.keys();let h=Gt.resolve();return A.forEach(m=>{h=h.next(()=>d.getEntry(c,m)).next(p=>{const g=u.docVersions.get(m);rn(g!==null),p.version.compareTo(g)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),h.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Kn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function BZ(t){const e=In(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function b1e(t,e){const r=In(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const l=[];e.targetChanges.forEach((d,f)=>{const A=a.get(f);if(!A)return;l.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,f)));let h=A.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?h=h.withResumeToken(Ri.EMPTY_BYTE_STRING,un.min()).withLastLimboFreeSnapshotVersion(un.min()):d.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(d.resumeToken,n)),a=a.insert(f,h),function(p,g,v){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(A,h,d)&&l.push(r.Ur.updateTargetData(s,h))});let c=Au(),u=Kn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(w1e(s,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(un.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(f=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Gt.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.os=a,s))}function w1e(t,e,r){let n=Kn(),a=Kn();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let o=Au();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(un.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):wr("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:a}})}function N1e(t,e){const r=In(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function C1e(t,e){const r=In(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Ur.getTargetData(n,e).next(s=>s?(a=s,Gt.resolve(a)):r.Ur.allocateTargetId(n).next(o=>(a=new Dh(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function KT(t,e,r){const n=In(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!Sm(o))throw o;wr("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function q7(t,e,r){const n=In(t);let a=un.min(),s=Kn();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=In(c),A=f._s.get(d);return A!==void 0?Gt.resolve(f.os.get(A)):f.Ur.getTargetData(u,d)}(n,o,ud(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:un.min(),r?s:Kn())).next(l=>(_1e(n,dve(e),l),{documents:l,Ts:s})))}function _1e(t,e,r){let n=t.us.get(e)||un.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}class z7{constructor(){this.activeTargetIds=gve()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TZ{constructor(){this.so=new z7,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new z7,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1e{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){wr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){wr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZN=null;function p3(){return ZN===null?ZN=function(){return 268435456+Math.round(2147483648*Math.random())}():ZN++,"0x"+ZN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1e{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl="WebChannelConnection";class j1e extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,o){const l=p3(),c=this.xo(r,n.toUriEncodedString());wr("RestConnection",`Sending RPC '${r}' ${l}:`,c,a);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(r,c,u,a).then(d=>(wr("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw om("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",a),d})}Lo(r,n,a,s,o,l){return this.Mo(r,n,a,s,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+r1}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>r[o]=s),a&&a.headers.forEach((s,o)=>r[o]=s)}xo(r,n){const a=S1e[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=p3();return new Promise((o,l)=>{const c=new hJ;c.setWithCredentials(!0),c.listenOnce(AJ.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case z_.NO_ERROR:const d=c.getResponseJson();wr(Nl,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case z_.TIMEOUT:wr(Nl,`RPC '${e}' ${s} timed out`),l(new Pr(ar.DEADLINE_EXCEEDED,"Request time out"));break;case z_.HTTP_ERROR:const f=c.getStatus();if(wr(Nl,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let A=c.getResponseJson();Array.isArray(A)&&(A=A[0]);const h=A==null?void 0:A.error;if(h&&h.status&&h.message){const m=function(g){const v=g.toLowerCase().replace(/_/g,"-");return Object.values(ar).indexOf(v)>=0?v:ar.UNKNOWN}(h.status);l(new Pr(m,h.message))}else l(new Pr(ar.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Pr(ar.UNAVAILABLE,"Connection failed."));break;default:Xr()}}finally{wr(Nl,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(a);wr(Nl,`RPC '${e}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const a=p3(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gJ(),l=pJ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");wr(Nl,`Creating RPC '${e}' stream ${a}: ${d}`,c);const f=o.createWebChannel(d,c);let A=!1,h=!1;const m=new I1e({Io:g=>{h?wr(Nl,`Not sending because RPC '${e}' stream ${a} is closed:`,g):(A||(wr(Nl,`Opening RPC '${e}' stream ${a} transport.`),f.open(),A=!0),wr(Nl,`RPC '${e}' stream ${a} sending:`,g),f.send(g))},To:()=>f.close()}),p=(g,v,y)=>{g.listen(v,b=>{try{y(b)}catch(w){setTimeout(()=>{throw w},0)}})};return p(f,Ty.EventType.OPEN,()=>{h||(wr(Nl,`RPC '${e}' stream ${a} transport opened.`),m.yo())}),p(f,Ty.EventType.CLOSE,()=>{h||(h=!0,wr(Nl,`RPC '${e}' stream ${a} transport closed`),m.So())}),p(f,Ty.EventType.ERROR,g=>{h||(h=!0,om(Nl,`RPC '${e}' stream ${a} transport errored:`,g),m.So(new Pr(ar.UNAVAILABLE,"The operation could not be completed")))}),p(f,Ty.EventType.MESSAGE,g=>{var v;if(!h){const y=g.data[0];rn(!!y);const b=y,w=b.error||((v=b[0])===null||v===void 0?void 0:v.error);if(w){wr(Nl,`RPC '${e}' stream ${a} received error:`,w);const P=w.status;let j=function(E){const F=Qi[E];if(F!==void 0)return rZ(F)}(P),_=w.message;j===void 0&&(j=ar.INTERNAL,_="Unknown error status: "+P+" with message "+w.message),h=!0,m.So(new Pr(j,_)),f.close()}else wr(Nl,`RPC '${e}' stream ${a} received:`,y),m.bo(y)}}),p(l,mJ.STAT_EVENT,g=>{g.stat===PT.PROXY?wr(Nl,`RPC '${e}' stream ${a} detected buffering proxy`):g.stat===PT.NOPROXY&&wr(Nl,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1e(){return typeof window<"u"?window:null}function tE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t){return new Tve(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&wr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kZ{constructor(e,r,n,a,s,o,l,c){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new qD(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===ar.RESOURCE_EXHAUSTED?(cc(r.toString()),cc("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===ar.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.Yo===r&&this.P_(n,a)},n=>{e(()=>{const a=new Pr(ar.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{n(()=>this.I_(a))}),this.stream.onMessage(a=>{n(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return wr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(wr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class B1e extends kZ{constructor(e,r,n,a,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Dve(this.serializer,e),n=function(s){if(!("targetChange"in s))return un.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?un.min():o.readTime?Vo(o.readTime):un.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=QT(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=YE(c)?{documents:uZ(s,c)}:{query:dZ(s,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=sZ(s,o.resumeToken);const u=LT(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(un.min())>0){l.readTime=Bv(s,o.snapshotVersion.toTimestamp());const u=LT(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=Mve(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=QT(this.serializer),r.removeTarget=e,this.a_(r)}}class T1e extends kZ{constructor(e,r,n,a,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return rn(!!e.streamToken),this.lastStreamToken=e.streamToken,rn(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){rn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Rve(e.writeResults,e.commitTime),n=Vo(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=QT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>p2(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1e extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new Pr(ar.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,UT(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ar.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Pr(ar.UNKNOWN,s.toString())})}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,UT(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ar.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pr(ar.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class F1e{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cc(r),this.D_=!1):wr("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1e{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{n.enqueueAndForget(async()=>{Cg(this)&&(wr("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=In(c);u.L_.add(4),await Nw(u),u.q_.set("Unknown"),u.L_.delete(4),await bj(u)}(this))})}),this.q_=new F1e(n,a)}}async function bj(t){if(Cg(t))for(const e of t.B_)await e(!0)}async function Nw(t){for(const e of t.B_)await e(!1)}function FZ(t,e){const r=In(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),YD(r)?XD(r):i1(r).r_()&&WD(r,e))}function zD(t,e){const r=In(t),n=i1(r);r.N_.delete(e),n.r_()&&OZ(r,e),r.N_.size===0&&(n.r_()?n.o_():Cg(r)&&r.q_.set("Unknown"))}function WD(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(un.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}i1(t).A_(e)}function OZ(t,e){t.Q_.xe(e),i1(t).R_(e)}function XD(t){t.Q_=new Ive({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),i1(t).start(),t.q_.v_()}function YD(t){return Cg(t)&&!i1(t).n_()&&t.N_.size>0}function Cg(t){return In(t).L_.size===0}function DZ(t){t.Q_=void 0}async function D1e(t){t.q_.set("Online")}async function R1e(t){t.N_.forEach((e,r)=>{WD(t,e)})}async function M1e(t,e){DZ(t),YD(t)?(t.q_.M_(e),XD(t)):t.q_.set("Unknown")}async function L1e(t,e,r){if(t.q_.set("Online"),e instanceof aZ&&e.state===2&&e.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.N_.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.N_.delete(l),a.Q_.removeTarget(l))}(t,e)}catch(n){wr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await nS(t,n)}else if(e instanceof eE?t.Q_.Ke(e):e instanceof nZ?t.Q_.He(e):t.Q_.We(e),!r.isEqual(un.min()))try{const n=await BZ(t.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Ri.EMPTY_BYTE_STRING,d.snapshotVersion)),OZ(s,c);const f=new Dh(d.target,c,u,d.sequenceNumber);WD(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){wr("RemoteStore","Failed to raise snapshot:",n),await nS(t,n)}}async function nS(t,e,r){if(!Sm(e))throw e;t.L_.add(1),await Nw(t),t.q_.set("Offline"),r||(r=()=>BZ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{wr("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await bj(t)})}function RZ(t,e){return e().catch(r=>nS(t,r,e))}async function Cw(t){const e=In(t),r=dm(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;U1e(e);)try{const a=await N1e(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,Q1e(e,a)}catch(a){await nS(e,a)}MZ(e)&&LZ(e)}function U1e(t){return Cg(t)&&t.O_.length<10}function Q1e(t,e){t.O_.push(e);const r=dm(t);r.r_()&&r.V_&&r.m_(e.mutations)}function MZ(t){return Cg(t)&&!dm(t).n_()&&t.O_.length>0}function LZ(t){dm(t).start()}async function V1e(t){dm(t).p_()}async function H1e(t){const e=dm(t);for(const r of t.O_)e.m_(r.mutations)}async function $1e(t,e,r){const n=t.O_.shift(),a=MD.from(n,e,r);await RZ(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Cw(t)}async function G1e(t,e){e&&dm(t).V_&&await async function(n,a){if(function(o){return tZ(o)&&o!==ar.ABORTED}(a.code)){const s=n.O_.shift();dm(n).s_(),await RZ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await Cw(n)}}(t,e),MZ(t)&&LZ(t)}async function X7(t,e){const r=In(t);r.asyncQueue.verifyOperationInProgress(),wr("RemoteStore","RemoteStore received new credentials");const n=Cg(r);r.L_.add(3),await Nw(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await bj(r)}async function K1e(t,e){const r=In(t);e?(r.L_.delete(2),await bj(r)):e||(r.L_.add(2),await Nw(r),r.q_.set("Unknown"))}function i1(t){return t.K_||(t.K_=function(r,n,a){const s=In(r);return s.w_(),new B1e(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:D1e.bind(null,t),Ro:R1e.bind(null,t),mo:M1e.bind(null,t),d_:L1e.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),YD(t)?XD(t):t.q_.set("Unknown")):(await t.K_.stop(),DZ(t))})),t.K_}function dm(t){return t.U_||(t.U_=function(r,n,a){const s=In(r);return s.w_(),new T1e(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:V1e.bind(null,t),mo:G1e.bind(null,t),f_:H1e.bind(null,t),g_:$1e.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Cw(t)):(await t.U_.stop(),t.O_.length>0&&(wr("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Jd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const o=Date.now()+n,l=new JD(e,r,o,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pr(ar.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ZD(t,e){if(cc("AsyncQueue",`${e}: ${t}`),Sm(t))return new Pr(ar.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Mr.comparator(r.key,n.key):(r,n)=>Mr.comparator(r.key,n.key),this.keyedMap=ky(),this.sortedSet=new Ds(this.comparator)}static emptySet(e){return new lv(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof lv)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new lv;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(){this.W_=new Ds(Mr.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Xr():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Tv{constructor(e,r,n,a,s,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Tv(e,r,lv.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hj(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1e{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class z1e{constructor(){this.queries=J7(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=In(r),s=a.queries;a.queries=J7(),s.forEach((o,l)=>{for(const c of l.j_)c.onError(n)})})(this,new Pr(ar.ABORTED,"Firestore shutting down"))}}function J7(){return new Im(t=>VJ(t),hj)}async function e6(t,e){const r=In(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new q1e,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=ZD(o,`Initialization of query '${bx(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&r6(r)}async function t6(t,e){const r=In(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function W1e(t,e){const r=In(t);let n=!1;for(const a of e){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.j_)l.X_(a)&&(n=!0);o.z_=a}}n&&r6(r)}function X1e(t,e,r){const n=In(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function r6(t){t.Y_.forEach(e=>{e.next()})}var qT,Z7;(Z7=qT||(qT={})).ea="default",Z7.Cache="cache";class n6{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Tv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Tv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==qT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(e){this.key=e}}class QZ{constructor(e){this.key=e}}class Y1e{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Kn(),this.mutatedKeys=Kn(),this.Aa=HJ(e),this.Ra=new lv(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new Y7,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,f)=>{const A=a.get(d),h=bw(this.query,f)?f:null,m=!!A&&this.mutatedKeys.has(A.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;A&&h?A.data.isEqual(h.data)?m!==p&&(n.track({type:3,doc:h}),g=!0):this.ga(A,h)||(n.track({type:2,doc:h}),g=!0,(c&&this.Aa(h,c)>0||u&&this.Aa(h,u)<0)&&(l=!0)):!A&&h?(n.track({type:0,doc:h}),g=!0):A&&!h&&(n.track({type:1,doc:A}),g=!0,(c||u)&&(l=!0)),g&&(h?(o=o.add(h),s=p?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:o,fa:n,ns:l,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(h,m){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xr()}};return p(h)-p(m)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(n),a=a!=null&&a;const l=r&&!a?this.ya():[],c=this.da.size===0&&this.current&&!a?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Tv(this.query,e.Ra,s,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Y7,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Kn(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new QZ(n))}),this.da.forEach(n=>{e.has(n)||r.push(new UZ(n))}),r}ba(e){this.Ta=e.Ts,this.da=Kn();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Tv.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class J1e{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Z1e{constructor(e){this.key=e,this.va=!1}}class eye{constructor(e,r,n,a,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Im(l=>VJ(l),hj),this.Ma=new Map,this.xa=new Set,this.Oa=new Ds(Mr.comparator),this.Na=new Map,this.La=new $D,this.Ba={},this.ka=new Map,this.qa=rg.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function tye(t,e,r=!0){const n=qZ(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await VZ(n,e,r,!0),a}async function rye(t,e){const r=qZ(t);await VZ(r,e,!0,!1)}async function VZ(t,e,r,n){const a=await C1e(t.localStore,ud(e)),s=a.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await nye(t,e,s,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&FZ(t.remoteStore,a),l}async function nye(t,e,r,n,a){t.Ka=(f,A,h)=>async function(p,g,v,y){let b=g.view.ma(v);b.ns&&(b=await q7(p.localStore,g.query,!1).then(({documents:_})=>g.view.ma(_,b)));const w=y&&y.targetChanges.get(g.targetId),P=y&&y.targetMismatches.get(g.targetId)!=null,j=g.view.applyChanges(b,p.isPrimaryClient,w,P);return t9(p,g.targetId,j.wa),j.snapshot}(t,f,A,h);const s=await q7(t.localStore,e,!0),o=new Y1e(e,s.Ts),l=o.ma(s.documents),c=ww.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=o.applyChanges(l,t.isPrimaryClient,c);t9(t,r,u.wa);const d=new J1e(e,r,o);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function aye(t,e,r){const n=In(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter(o=>!hj(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await KT(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&zD(n.remoteStore,a.targetId),zT(n,a.targetId)}).catch(wg)):(zT(n,a.targetId),await KT(n.localStore,a.targetId,!0))}async function sye(t,e){const r=In(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),zD(r.remoteStore,n.targetId))}async function iye(t,e,r){const n=zZ(t);try{const a=await function(o,l){const c=In(o),u=mr.now(),d=l.reduce((h,m)=>h.add(m.key),Kn());let f,A;return c.persistence.runTransaction("Locally write mutations","readwrite",h=>{let m=Au(),p=Kn();return c.cs.getEntries(h,d).next(g=>{m=g,m.forEach((v,y)=>{y.isValidDocument()||(p=p.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(h,m)).next(g=>{f=g;const v=[];for(const y of l){const b=Cve(y,f.get(y.key).overlayedDocument);b!=null&&v.push(new wA(y.key,b,kJ(b.value.mapValue),ks.exists(!0)))}return c.mutationQueue.addMutationBatch(h,u,v,l)}).next(g=>{A=g;const v=g.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(h,g.batchId,v)})}).then(()=>({batchId:A.batchId,changes:GJ(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Ds(Fn)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(n,a.batchId,r),await _w(n,a.changes),await Cw(n.remoteStore)}catch(a){const s=ZD(a,"Failed to persist write");r.reject(s)}}async function HZ(t,e){const r=In(t);try{const n=await b1e(r.localStore,e);e.targetChanges.forEach((a,s)=>{const o=r.Na.get(s);o&&(rn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?rn(o.va):a.removedDocuments.size>0&&(rn(o.va),o.va=!1))}),await _w(r,n,e)}catch(n){await wg(n)}}function e9(t,e,r){const n=In(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=In(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const A of f.j_)A.Z_(l)&&(u=!0)}),u&&r6(c)}(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function oye(t,e,r){const n=In(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let o=new Ds(Mr.comparator);o=o.insert(s,Bs.newNoDocument(s,un.min()));const l=Kn().add(s),c=new pj(un.min(),new Map,new Ds(Fn),o,l);await HZ(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),a6(n)}else await KT(n.localStore,e,!1).then(()=>zT(n,e,r)).catch(wg)}async function lye(t,e){const r=In(t),n=e.batch.batchId;try{const a=await y1e(r.localStore,e);GZ(r,n,null),$Z(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await _w(r,a)}catch(a){await wg(a)}}async function cye(t,e,r){const n=In(t);try{const a=await function(o,l){const c=In(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(rn(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);GZ(n,e,r),$Z(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await _w(n,a)}catch(a){await wg(a)}}function $Z(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function GZ(t,e,r){const n=In(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function zT(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||KZ(t,n)})}function KZ(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(zD(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),a6(t))}function t9(t,e,r){for(const n of r)n instanceof UZ?(t.La.addReference(n.key,e),uye(t,n)):n instanceof QZ?(wr("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||KZ(t,n.key)):Xr()}function uye(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(wr("SyncEngine","New document in limbo: "+r),t.xa.add(n),a6(t))}function a6(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Mr(xa.fromString(e)),n=t.qa.next();t.Na.set(n,new Z1e(r)),t.Oa=t.Oa.insert(r,n),FZ(t.remoteStore,new Dh(ud(yw(r.path)),n,"TargetPurposeLimboResolution",ad.oe))}}async function _w(t,e,r){const n=In(t),a=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{o.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=KD.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(o),n.Ca.d_(a),await async function(c,u){const d=In(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Gt.forEach(u,A=>Gt.forEach(A.$i,h=>d.persistence.referenceDelegate.addReference(f,A.targetId,h)).next(()=>Gt.forEach(A.Ui,h=>d.persistence.referenceDelegate.removeReference(f,A.targetId,h)))))}catch(f){if(!Sm(f))throw f;wr("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const A=f.targetId;if(!f.fromCache){const h=d.os.get(A),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(A,p)}}}(n.localStore,s))}async function dye(t,e){const r=In(t);if(!r.currentUser.isEqual(e)){wr("SyncEngine","User change. New user:",e.toKey());const n=await PZ(r.localStore,e);r.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new Pr(ar.CANCELLED,o))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await _w(r,n.hs)}}function fye(t,e){const r=In(t),n=r.Na.get(e);if(n&&n.va)return Kn().add(n.key);{let a=Kn();const s=r.Ma.get(e);if(!s)return a;for(const o of s){const l=r.Fa.get(o);a=a.unionWith(l.view.Va)}return a}}function qZ(t){const e=In(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HZ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fye.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oye.bind(null,e),e.Ca.d_=W1e.bind(null,e.eventManager),e.Ca.$a=X1e.bind(null,e.eventManager),e}function zZ(t){const e=In(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lye.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cye.bind(null,e),e}class g2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yj(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return jZ(this.persistence,new IZ,e.initialUser,this.serializer)}Ga(e){return new SZ(vj.Zr,this.serializer)}Wa(e){return new TZ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}g2.provider={build:()=>new g2};class hye extends g2{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await zZ(this.Ja.syncEngine),await Cw(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return jZ(this.persistence,new IZ,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new t1e(n,e.asyncQueue,r)}Ha(e,r){const n=new Pxe(r,this.persistence);return new jxe(e.asyncQueue,n)}Ga(e){const r=g1e(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Pc.withCacheSize(this.cacheSizeBytes):Pc.DEFAULT;return new GD(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,P1e(),tE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new TZ}}class aS{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>e9(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=dye.bind(null,this.syncEngine),await K1e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new z1e}()}createDatastore(e){const r=yj(e.databaseInfo.databaseId),n=function(s){return new j1e(s)}(e.databaseInfo);return function(s,o,l,c){return new k1e(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,o,l){return new O1e(n,a,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>e9(this.syncEngine,r,0),function(){return W7.D()?new W7:new E1e}())}createSyncEngine(e,r){return function(a,s,o,l,c,u,d){const f=new eye(a,s,o,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=In(a);wr("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Nw(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}aS.provider={build:()=>new aS};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cc("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aye{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Pr(ar.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(a,s){const o=In(a),l={documents:s.map(f=>m2(o.serializer,f))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,xa.emptyPath(),l,s.length),u=new Map;c.forEach(f=>{const A=Ove(o.serializer,f);u.set(A.key.toString(),A)});const d=[];return s.forEach(f=>{const A=u.get(f.toString());rn(!!A),d.push(A)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new s1(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const a=Mr.fromPath(n);this.mutations.push(new DD(a,this.precondition(a)))}),await async function(n,a){const s=In(n),o={writes:a.map(l=>p2(s.serializer,l))};await s.Mo("Commit",s.serializer.databaseId,xa.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Xr();r=un.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Pr(ar.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(un.min())?ks.exists(!1):ks.updateTime(r):ks.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(un.min()))throw new Pr(ar.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ks.updateTime(r)}return ks.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mye{constructor(e,r,n,a,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=s,this._u=n.maxAttempts,this.t_=new qD(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new Aye(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.lu(a)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!xw(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!tZ(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pye{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=ll.UNAUTHENTICATED,this.clientId=ID.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{wr("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(wr("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=ZD(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function g3(t,e){t.asyncQueue.verifyOperationInProgress(),wr("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await PZ(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function r9(t,e){t.asyncQueue.verifyOperationInProgress();const r=await gye(t);wr("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>X7(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>X7(e.remoteStore,a)),t._onlineComponents=e}async function gye(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){wr("FirestoreClient","Using user provided OfflineComponentProvider");try{await g3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===ar.FAILED_PRECONDITION||a.code===ar.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;om("Error using user provided cache. Falling back to memory cache: "+r),await g3(t,new g2)}}else wr("FirestoreClient","Using default OfflineComponentProvider"),await g3(t,new g2);return t._offlineComponents}async function i6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(wr("FirestoreClient","Using user provided OnlineComponentProvider"),await r9(t,t._uninitializedComponentsProvider._online)):(wr("FirestoreClient","Using default OnlineComponentProvider"),await r9(t,new aS))),t._onlineComponents}function xye(t){return i6(t).then(e=>e.syncEngine)}function vye(t){return i6(t).then(e=>e.datastore)}async function sS(t){const e=await i6(t),r=e.eventManager;return r.onListen=tye.bind(null,e.syncEngine),r.onUnlisten=aye.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=rye.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=sye.bind(null,e.syncEngine),r}function yye(t,e,r={}){const n=new Jd;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new s6({next:A=>{d.Za(),o.enqueueAndForget(()=>t6(s,f));const h=A.docs.has(l);!h&&A.fromCache?u.reject(new Pr(ar.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&A.fromCache&&c&&c.source==="server"?u.reject(new Pr(ar.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new n6(yw(l.path),d,{includeMetadataChanges:!0,_a:!0});return e6(s,f)}(await sS(t),t.asyncQueue,e,r,n)),n.promise}function bye(t,e,r={}){const n=new Jd;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new s6({next:A=>{d.Za(),o.enqueueAndForget(()=>t6(s,f)),A.fromCache&&c.source==="server"?u.reject(new Pr(ar.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new n6(l,d,{includeMetadataChanges:!0,_a:!0});return e6(s,f)}(await sS(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WZ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XZ(t,e,r){if(!r)throw new Pr(ar.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YZ(t,e,r,n){if(e===!0&&n===!0)throw new Pr(ar.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function a9(t){if(!Mr.isDocumentKey(t))throw new Pr(ar.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function s9(t){if(Mr.isDocumentKey(t))throw new Pr(ar.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wj(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Xr()}function Ho(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Pr(ar.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=wj(t);throw new Pr(ar.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Pr(ar.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Pr(ar.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WZ((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Pr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Pr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Pr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nj{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i9({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pr(ar.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pr(ar.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i9(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new vJ;switch(n.type){case"firstParty":return new bxe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Pr(ar.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=n9.get(r);n&&(wr("ComponentProvider","Removing Datastore"),n9.delete(r),n.terminate())}(this),Promise.resolve()}}function JZ(t,e,r,n={}){var a;const s=(t=Ho(t,Nj))._getSettings(),o=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&om("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=ll.MOCK_USER;else{l=R0e(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new Pr(ar.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ll(u)}t._authCredentials=new xxe(new xJ(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Jf(this.firestore,e,this._query)}}class $o{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $o(this.firestore,e,this._key)}}class Gh extends Jf{constructor(e,r,n){super(e,r,yw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $o(this.firestore,null,new Mr(e))}withConverter(e){return new Gh(this.firestore,e,this._path)}}function At(t,e,...r){if(t=ri(t),XZ("collection","path",e),t instanceof Nj){const n=xa.fromString(e,...r);return s9(n),new Gh(t,null,n)}{if(!(t instanceof $o||t instanceof Gh))throw new Pr(ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(xa.fromString(e,...r));return s9(n),new Gh(t.firestore,null,n)}}function Yt(t,e,...r){if(t=ri(t),arguments.length===1&&(e=ID.newId()),XZ("doc","path",e),t instanceof Nj){const n=xa.fromString(e,...r);return a9(n),new $o(t,null,new Mr(n))}{if(!(t instanceof $o||t instanceof Gh))throw new Pr(ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(xa.fromString(e,...r));return a9(n),new $o(t.firestore,t instanceof Gh?t.converter:null,new Mr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new qD(this,"async_queue_retry"),this.Vu=()=>{const n=tE();n&&wr("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=tE();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=tE();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Jd;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Sm(e))throw e;wr("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const a=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw cc("INTERNAL UNHANDLED ERROR: ",a),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=JD.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(a),a}fu(){this.Eu&&Xr()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function l9(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class wu extends Nj{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new o9,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o9(e),this._firestoreClient=void 0,await e}}}function ZZ(t,e){const r=typeof t=="object"?t:AD(),n=typeof t=="string"?t:"(default)",a=fD(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=O0e("firestore");s&&JZ(a,...s)}return a}function _g(t){if(t._terminated)throw new Pr(ar.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eee(t),t._firestoreClient}function eee(t){var e,r,n;const a=t._freezeSettings(),s=function(l,c,u,d){return new Jxe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,WZ(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new pye(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function tee(t,e){om("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return wye(t,aS.provider,{build:n=>new hye(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function wye(t,e,r){if((t=Ho(t,wu))._firestoreClient||t._terminated)throw new Pr(ar.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Pr(ar.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},eee(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fm(Ri.fromBase64String(e))}catch(r){throw new Pr(ar.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new fm(Ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Pr(ar.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ts(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Pr(ar.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Pr(ar.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fn(this._lat,e._lat)||Fn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nye=/^__.*__$/;class Cye{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new wA(e,this.data,this.fieldMask,r,this.fieldTransforms):new a1(e,this.data,r,this.fieldTransforms)}}class ree{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new wA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function nee(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xr()}}class Ej{constructor(e,r,n,a,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ej(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return iS(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nee(this.Cu)&&Nye.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class _ye{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||yj(e)}Qu(e,r,n,a=!1){return new Ej({Cu:e,methodName:r,qu:n,path:Ts.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function o1(t){const e=t._freezeSettings(),r=yj(t._databaseId);return new _ye(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Sj(t,e,r,n,a,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);u6("Data must be an object, but it was:",o,n);const l=aee(n,o);let c,u;if(s.merge)c=new Oc(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const A=WT(e,f,r);if(!o.contains(A))throw new Pr(ar.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);iee(d,A)||d.push(A)}c=new Oc(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Cye(new dl(l),c,u)}class Ij extends Ew{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ij}}function Eye(t,e,r){return new Ej({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class o6 extends Ew{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Eye(this,e,!0),n=this.Ku.map(s=>l1(s,r)),a=new Zp(n);return new JJ(e.path,a)}isEqual(e){return e instanceof o6&&t2(this.Ku,e.Ku)}}function l6(t,e,r,n){const a=t.Qu(1,e,r);u6("Data must be an object, but it was:",a,n);const s=[],o=dl.empty();Ng(n,(c,u)=>{const d=d6(e,c,r);u=ri(u);const f=a.Nu(d);if(u instanceof Ij)s.push(d);else{const A=l1(u,f);A!=null&&(s.push(d),o.set(d,A))}});const l=new Oc(s);return new ree(o,l,a.fieldTransforms)}function c6(t,e,r,n,a,s){const o=t.Qu(1,e,r),l=[WT(e,n,r)],c=[a];if(s.length%2!=0)throw new Pr(ar.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)l.push(WT(e,s[A])),c.push(s[A+1]);const u=[],d=dl.empty();for(let A=l.length-1;A>=0;--A)if(!iee(u,l[A])){const h=l[A];let m=c[A];m=ri(m);const p=o.Nu(h);if(m instanceof Ij)u.push(h);else{const g=l1(m,p);g!=null&&(u.push(h),d.set(h,g))}}const f=new Oc(u);return new ree(d,f,o.fieldTransforms)}function Sye(t,e,r,n=!1){return l1(r,t.Qu(n?4:3,e))}function l1(t,e){if(see(t=ri(t)))return u6("Unsupported field value:",e,t),aee(t,e);if(t instanceof Ew)return function(n,a){if(!nee(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=l1(l,a.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=ri(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return xve(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=mr.fromDate(n);return{timestampValue:Bv(a.serializer,s)}}if(n instanceof mr){const s=new mr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Bv(a.serializer,s)}}if(n instanceof Cj)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof fm)return{bytesValue:sZ(a.serializer,n._byteString)};if(n instanceof $o){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:QD(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof _j)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return OD(l.serializer,c)})}}}}}}(n,a);throw a.Bu(`Unsupported field value: ${wj(n)}`)}(t,e)}function aee(t,e){const r={};return jJ(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ng(t,(n,a)=>{const s=l1(a,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function see(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mr||t instanceof Cj||t instanceof fm||t instanceof $o||t instanceof Ew||t instanceof _j)}function u6(t,e,r){if(!see(r)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(r)){const n=wj(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function WT(t,e,r){if((e=ri(e))instanceof Eg)return e._internalPath;if(typeof e=="string")return d6(t,e);throw iS("Field path arguments must be of type string or ",t,!1,void 0,r)}const Iye=new RegExp("[~\\*/\\[\\]]");function d6(t,e,r){if(e.search(Iye)>=0)throw iS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Eg(...e.split("."))._internalPath}catch{throw iS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function iS(t,e,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new Pr(ar.INVALID_ARGUMENT,l+t+c)}function iee(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $o(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jye(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(jj("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class jye extends oS{data(){return super.data()}}function jj(t,e){return typeof e=="string"?d6(t,e):e instanceof Eg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oee(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Pr(ar.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f6{}class Pj extends f6{}function er(t,e,...r){let n=[];e instanceof f6&&n.push(e),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof Bj).length,l=s.filter(c=>c instanceof Sw).length;if(o>1||o>0&&l>0)throw new Pr(ar.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class Sw extends Pj{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Sw(e,r,n)}_apply(e){const r=this._parse(e);return lee(e._query,r),new Jf(e.firestore,e.converter,MT(e._query,r))}_parse(e){const r=o1(e.firestore);return function(s,o,l,c,u,d,f){let A;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Pr(ar.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){u9(f,d);const h=[];for(const m of f)h.push(c9(c,s,m));A={arrayValue:{values:h}}}else A=c9(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||u9(f,d),A=Sye(l,o,f,d==="in"||d==="not-in");return na.create(u,d,A)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function ur(t,e,r){const n=e,a=jj("where",t);return Sw._create(a,n,r)}class Bj extends f6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Bj(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Va.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)lee(o,c),o=MT(o,c)}(e._query,r),new Jf(e.firestore,e.converter,MT(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tj extends Pj{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Tj(e,r)}_apply(e){const r=function(a,s,o){if(a.startAt!==null)throw new Pr(ar.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Pr(ar.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new f2(s,o)}(e._query,this._field,this._direction);return new Jf(e.firestore,e.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new n1(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function bn(t,e="asc"){const r=e,n=jj("orderBy",t);return Tj._create(n,r)}class kj extends Pj{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new kj(e,r,n)}_apply(e){return new Jf(e.firestore,e.converter,ZE(e._query,this._limit,this._limitType))}}function lS(t){return kj._create("limit",t,"F")}function c9(t,e,r){if(typeof(r=ri(r))=="string"){if(r==="")throw new Pr(ar.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QJ(e)&&r.indexOf("/")!==-1)throw new Pr(ar.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(xa.fromString(r));if(!Mr.isDocumentKey(n))throw new Pr(ar.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return u2(t,new Mr(n))}if(r instanceof $o)return u2(t,r._key);throw new Pr(ar.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wj(r)}.`)}function u9(t,e){if(!Array.isArray(t)||t.length===0)throw new Pr(ar.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lee(t,e){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Pr(ar.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Pr(ar.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class h6{convertValue(e,r="none"){switch(Yp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return js(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(lm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Xr()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Ng(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(o=>js(o.doubleValue));return new _j(s)}convertGeoPoint(e){return new Cj(js(e.latitude),js(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=kD(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(l2(e));default:return null}}convertTimestamp(e){const r=sA(e);return new mr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=xa.fromString(e);rn(mZ(n));const a=new cm(n.get(1),n.get(3)),s=new Mr(n.popFirst(5));return a.isEqual(r)||cc(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Pye extends h6{constructor(e){super(),this.firestore=e}convertBytes(e){return new fm(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new $o(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oj extends oS{constructor(e,r,n,a,s,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new hb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(jj("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class hb extends Oj{data(e={}){return super.data(e)}}class A6{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new pp(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new hb(this._firestore,this._userDataWriter,n.key,n,new pp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Pr(ar.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new hb(a._firestore,a._userDataWriter,l.doc.key,l.doc,new pp(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new hb(a._firestore,a._userDataWriter,l.doc.key,l.doc,new pp(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:Bye(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Bye(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t){t=Ho(t,$o);const e=Ho(t.firestore,wu);return yye(_g(e),t._key).then(r=>uee(e,t,r))}class Dj extends h6{constructor(e){super(),this.firestore=e}convertBytes(e){return new fm(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new $o(this.firestore,null,r)}}function Lt(t){t=Ho(t,Jf);const e=Ho(t.firestore,wu),r=_g(e),n=new Dj(e);return oee(t._query),bye(r,t._query).then(a=>new A6(e,n,t,a))}function cee(t,e,r){t=Ho(t,$o);const n=Ho(t.firestore,wu),a=Fj(t.converter,e,r);return c1(n,[Sj(o1(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ks.none())])}function Cn(t,e,r,...n){t=Ho(t,$o);const a=Ho(t.firestore,wu),s=o1(a);let o;return o=typeof(e=ri(e))=="string"||e instanceof Eg?c6(s,"updateDoc",t._key,e,r,n):l6(s,"updateDoc",t._key,e),c1(a,[o.toMutation(t._key,ks.exists(!0))])}function Dn(t){return c1(Ho(t.firestore,wu),[new s1(t._key,ks.none())])}function Hn(t,e){const r=Ho(t.firestore,wu),n=Yt(t),a=Fj(t.converter,e);return c1(r,[Sj(o1(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ks.exists(!1))]).then(()=>n)}function dd(t,...e){var r,n,a;t=ri(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||l9(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(l9(e[o])){const f=e[o];e[o]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[o+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[o+2]=(a=f.complete)===null||a===void 0?void 0:a.bind(f)}let c,u,d;if(t instanceof $o)u=Ho(t.firestore,wu),d=yw(t._key.path),c={next:f=>{e[o]&&e[o](uee(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Ho(t,Jf);u=Ho(f.firestore,wu),d=f._query;const A=new Dj(u);c={next:h=>{e[o]&&e[o](new A6(u,A,f,h))},error:e[o+1],complete:e[o+2]},oee(t._query)}return function(A,h,m,p){const g=new s6(p),v=new n6(h,g,m);return A.asyncQueue.enqueueAndForget(async()=>e6(await sS(A),v)),()=>{g.Za(),A.asyncQueue.enqueueAndForget(async()=>t6(await sS(A),v))}}(_g(u),d,l,c)}function c1(t,e){return function(n,a){const s=new Jd;return n.asyncQueue.enqueueAndForget(async()=>iye(await xye(n),a,s)),s.promise}(_g(t),e)}function uee(t,e,r){const n=r.docs.get(e._key),a=new Dj(t);return new Oj(t,a,e._key,n,new pp(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tye={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dee{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=o1(e)}set(e,r,n){this._verifyNotCommitted();const a=S0(e,this._firestore),s=Fj(a.converter,r,n),o=Sj(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,ks.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=S0(e,this._firestore);let o;return o=typeof(r=ri(r))=="string"||r instanceof Eg?c6(this._dataReader,"WriteBatch.update",s._key,r,n,a):l6(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,ks.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=S0(e,this._firestore);return this._mutations=this._mutations.concat(new s1(r._key,ks.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pr(ar.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function S0(t,e){if((t=ri(t)).firestore!==e)throw new Pr(ar.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fee extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=o1(r)}get(r){const n=S0(r,this._firestore),a=new Pye(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Xr();const o=s[0];if(o.isFoundDocument())return new oS(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new oS(this._firestore,a,n._key,null,n.converter);throw Xr()})}set(r,n,a){const s=S0(r,this._firestore),o=Fj(s.converter,n,a),l=Sj(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,a);return this._transaction.set(s._key,l),this}update(r,n,a,...s){const o=S0(r,this._firestore);let l;return l=typeof(n=ri(n))=="string"||n instanceof Eg?c6(this._dataReader,"Transaction.update",o._key,n,a,s):l6(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,l),this}delete(r){const n=S0(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=S0(e,this._firestore),n=new Dj(this._firestore);return super.get(e).then(a=>new Oj(this._firestore,n,r._key,a._document,new pp(!1,!1),r.converter))}}function ki(t,e,r){t=Ho(t,wu);const n=Object.assign(Object.assign({},Tye),r);return function(s){if(s.maxAttempts<1)throw new Pr(ar.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,o,l){const c=new Jd;return s.asyncQueue.enqueueAndForget(async()=>{const u=await vye(s);new mye(s.asyncQueue,u,l,o,c).au()}),c.promise}(_g(t),a=>e(new fee(t,a)),n)}function hee(...t){return new o6("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t){return _g(t=Ho(t,wu)),new dee(t,e=>c1(t,e))}(function(e,r=!0){(function(a){r1=a})(e1),_v(new qp("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new wu(new vxe(n.getProvider("auth-internal")),new Nxe(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Pr(ar.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cm(u.options.projectId,d)}(o,a),o);return s=Object.assign({useFetchStreams:r},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Y0(r7,"4.7.3",e),Y0(r7,"4.7.3","esm2017")})();const kye=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:h6,Bytes:fm,CollectionReference:Gh,DocumentReference:$o,DocumentSnapshot:Oj,FieldPath:Eg,FieldValue:Ew,Firestore:wu,FirestoreError:Pr,GeoPoint:Cj,Query:Jf,QueryCompositeFilterConstraint:Bj,QueryConstraint:Pj,QueryDocumentSnapshot:hb,QueryFieldFilterConstraint:Sw,QueryLimitConstraint:kj,QueryOrderByConstraint:Tj,QuerySnapshot:A6,SnapshotMetadata:pp,Timestamp:mr,Transaction:fee,VectorValue:_j,WriteBatch:dee,_AutoId:ID,_ByteString:Ri,_DatabaseId:cm,_DocumentKey:Mr,_EmptyAuthCredentialsProvider:vJ,_FieldPath:Ts,_cast:Ho,_logWarn:om,_validateIsNotUsedTogether:YZ,addDoc:Hn,arrayUnion:hee,collection:At,connectFirestoreEmulator:JZ,deleteDoc:Dn,doc:Yt,enableIndexedDbPersistence:tee,ensureFirestoreConfigured:_g,executeWrite:c1,getDoc:ei,getDocs:Lt,getFirestore:ZZ,limit:lS,onSnapshot:dd,orderBy:bn,query:er,runTransaction:ki,setDoc:cee,updateDoc:Cn,where:ur,writeBatch:Zd},Symbol.toStringTag,{value:"Module"})),Fye={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},Aee=hD(Fye),De=ZZ(Aee),ef=jT(Aee),Oye=(async()=>{try{return await G_(ef,ND),console.info(" Auth persistence: browserLocalPersistence enabled"),"local"}catch(t){console.warn(" browserLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await G_(ef,cJ),console.info(" Auth persistence: indexedDBLocalPersistence enabled"),"indexeddb"}catch(t){console.warn(" indexedDBLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await G_(ef,CD),console.info(" Auth persistence: browserSessionPersistence enabled (session only)"),"session"}catch(t){console.warn(" browserSessionPersistence failed:",(t==null?void 0:t.code)||t)}return console.warn(" No se pudo establecer ninguna persistencia para Auth."),"none"})();tee(De).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function Dye(){const[t,e]=x.useState(""),[r,n]=x.useState(""),[a,s]=x.useState(!1),[o,l]=x.useState(""),[c,u]=x.useState(!1),d=uw();x.useEffect(()=>{let h=!0;const m=lj(ef,async p=>{if(!(!p||!h))try{const g=await ei(Yt(De,"users",p.uid));if(!g.exists())return;const v=g.data(),y=Array.isArray(v.roles)?v.roles:v.role?[v.role]:[],b=y[0]||"",w=v.name||"";localStorage.setItem("user_email",p.email||""),w&&localStorage.setItem("user_name",w),localStorage.setItem("roles",JSON.stringify(y)),y.length===1?f(b):d("/admin",{replace:!0})}catch{}});return()=>{h=!1,m()}},[d]);const f=h=>{if(Array.isArray(h)){if(h.length!==1)return localStorage.setItem("role",h[0]||""),d("/admin");h=h[0]||""}const m=String(h||"");if(localStorage.setItem("role",m),mn(m,"admin"))return d("/admin");if(mn(m,"vendedor_pollo"))return d("/admin/salesV2");if(mn(m,"vendedor_ropa"))return d("/admin/salesClothes");if(mn(m,"vendedor_dulces"))return d("/admin/salesCandies");if(mn(m,"supervisor_pollo")||mn(m,"contador"))return d("/admin/batches")},A=async h=>{if(h.preventDefault(),l(""),!t.trim()){l("Ingresa el correo.");return}if(r.length<6){l("La contrasea debe tener al menos 6 caracteres.");return}try{u(!0),console.info&&console.info("[Login] attempting signIn",{email:t}),await G_(ef,ND);const m=await age(ef,t,r);console.info&&console.info("[Login] signInWithEmailAndPassword success",{uid:m.user.uid,email:m.user.email});const p=m.user.uid;localStorage.setItem("POSYS_LOGIN_AT",String(Date.now()));const g=await ei(Yt(De,"users",p));if(console.info&&console.info("[Login] firestore users doc snap: exists=",g.exists()),!g.exists()){console.warn&&console.warn("[Login] user doc missing for uid",p),l("Tu usuario no tiene perfil en la base de datos.");return}const v=g.data();console.info&&console.info("[Login] user profile:",v);const y=Array.isArray(v.roles)?v.roles:v.role?[v.role]:[],b=y[0]||"",w=v.name||"",P=["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"];if(!y.some(j=>P.includes(j))){l("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",m.user.email||""),w&&localStorage.setItem("user_name",w),localStorage.setItem("roles",JSON.stringify(y)),y.length===1?f(b):d("/admin")}catch(m){console.error&&console.error("[Login] sign-in error:",m);const p=String((m==null?void 0:m.code)||"");l(p==="auth/invalid-credential"||p==="auth/wrong-password"?"Credenciales incorrectas. ("+p+")":p==="auth/user-not-found"?"Usuario no encontrado. ("+p+")":p==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde. ("+p+")":((m==null?void 0:m.message)||"Error al iniciar sesin.")+(p?` (${p})`:""))}finally{u(!1)}};return i.jsx("div",{className:"min-h-screen grid place-items-center ",children:i.jsxs("form",{onSubmit:A,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),i.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),i.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:h=>e(h.target.value),autoComplete:"username"}),i.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx("input",{type:a?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:h=>n(h.target.value),minLength:6,autoComplete:"current-password"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>s(h=>!h),children:a?"Ocultar":"Mostrar"})]}),i.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),i.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:c,children:c?"Entrando...":"Entrar"}),o&&i.jsx("p",{className:`mt-3 text-sm ${o.startsWith("Error")||o.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:o})]})})}function Un({children:t,allowedRoles:e}){const[r,n]=x.useState(!0),[a,s]=x.useState(!1);return x.useEffect(()=>{const o=lj(ef,async l=>{if(l){const c=Yt(De,"users",l.uid),u=await ei(c);if(u.exists()){const d=u.data(),f=Array.isArray(d.roles)?d.roles:d.role?[d.role]:[];try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e):console.debug&&console.debug("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e)}catch{}let A=!1;for(const h of e)if(mn(f,h)){A=!0;break}s(A)}else try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] no user doc for uid:",l.uid):console.debug&&console.debug("[PrivateRoute] no user doc for uid:",l.uid)}catch{}}n(!1)});return()=>o()},[e]),r?i.jsx("div",{className:"p-4",children:"Cargando..."}):a?t:i.jsx(Nh,{to:"/"})}const Rye={admin:{},supervisor_pollo:{bills:{view:!0,edit:!1},customersPollo:{view:!0,edit:!1},transactionsPollo:{view:!0,edit:!1},batches:{view:!0,edit:!1}},contador:{salesV2:{view:!0,edit:!0},customersPollo:{view:!0,edit:!0},batches:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1},financialDashboard:{view:!0,edit:!1}},vendedor_pollo:{salesV2:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1},customersPollo:{view:!0,edit:!0}},vendedor_dulces:{salesCandies:{view:!0,edit:!0},productsVendorsCandies:{view:!0,edit:!1},productsPricesCandies:{view:!0,edit:!1},transactionCandies:{view:!0,edit:!1},cierreVentasCandies:{view:!0,edit:!1},customersCandies:{view:!0,edit:!0}},vendedor_ropa:{}};function mee(t){return t?Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean):[]}function ta(t,e,r="view"){const n=mee(t);return n.some(a=>a==="admin")?!0:n.some(a=>{var s,o;return!!((o=(s=Rye[a])==null?void 0:s[e])!=null&&o[r])})}const Mye={admin:{},supervisor_pollo:{bills:{cerrarVentas:!1},batches:{create:!1,update:!1,delete:!1,export:!1}},contador:{batches:{create:!0,update:!1,delete:!1,export:!0},bills:{cerrarVentas:!1}},vendedor_pollo:{salesV2:{create:!0,update:!0},customersPollo:{update:!0},bills:{cerrarVentas:!0}},vendedor_dulces:{salesCandies:{create:!0,update:!0},productsVendorsCandies:{create:!0,update:!1,delete:!1},customersCandies:{update:!0},productsPricesCandies:{price_edit:!1}},vendedor_ropa:{}};function Lye(t,e,r){const n=mee(t);return n.some(a=>a==="admin")?!0:ta(t,e,"view")?n.some(a=>{var o;const s=(o=Mye[a])==null?void 0:o[e];return!!(s!=null&&s[r])}):!1}function Uye({role:t,roles:e}){const r="/admin",n=({isActive:ie})=>`block rounded px-3 py-2 text-sm ${ie?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,a=uw(),[s,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,A]=x.useState(!1),[h,m]=x.useState(!1),[p,g]=x.useState(!1),[v,y]=x.useState(!1),[b,w]=x.useState(!1),[P,j]=x.useState(!1),[_,I]=x.useState(!1),[E,F]=x.useState(!1),[k,B]=x.useState(!1),[R,Y]=x.useState(!1),[me,pe]=x.useState(!1),[he,ge]=x.useState(!1),[se,je]=x.useState(!1),[Te,D]=x.useState(!1),[K,z]=x.useState(!1),Q=async()=>{z(!0)},J=async()=>{try{await wD(ef)}catch(ie){console.error("signOut error:",ie)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}z(!1),a("/")}},ee=({open:ie,onClick:re,children:Fe})=>i.jsxs("button",{type:"button",onClick:re,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[i.jsx("span",{children:Fe}),i.jsx("span",{className:"text-xs",children:ie?"":""})]}),M=({open:ie,onClick:re,title:Fe})=>i.jsxs("button",{type:"button",onClick:re,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[i.jsx("span",{className:"text-blue-500 font-medium ",children:Fe}),i.jsx("span",{className:"text-xs",children:ie?"":""})]}),G=e&&e.length?e:t,ne=mn(G,"admin");mn(G,"vendedor_pollo");const ve=mn(G,"vendedor_ropa");mn(G,"vendedor_dulces"),mn(G,"supervisor_pollo")||mn(G,"contador"),mn(G,"contador");const V=ta(G,"salesV2","view")||ta(G,"customersPollo","view")||ta(G,"transactionsPollo","view")||ta(G,"bills","view")||ta(G,"batches","view"),qe=ta(G,"salesCandies","view")||ta(G,"productsVendorsCandies","view")||ta(G,"customersCandies","view")||ta(G,"productsPricesCandies","view")||ta(G,"transactionCandies","view")||ta(G,"cierreVentasCandies","view");return i.jsxs("div",{className:"min-h-screen flex",children:[i.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-[#f1f3f7] border-r p-3 transition-all duration-300 flex flex-col`,children:[i.jsx("button",{onClick:()=>o(!s),className:"mb-2 p-2 rounded-2xl shadow-2xl bg-gray-300 hover:bg-gray-400","aria-label":s?"Expandir men":"Colapsar men",children:s?i.jsx("span",{title:"Expandir men",children:"Menu "}):i.jsx("span",{title:"Colapsar men",children:"Cerrar "})}),!s&&i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:"space-y-1",children:[ne&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(ee,{open:l,onClick:()=>c(ie=>!ie),children:"Pollos Bea"}),l&&i.jsxs("div",{className:"pb-2",children:[i.jsx(M,{open:p,onClick:()=>g(ie=>!ie),title:"Operaciones"}),p&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(An,{to:`${r}/salesV2`,className:n,children:"Vender"}),i.jsx(An,{to:`${r}/customersPollo`,className:n,children:"Saldo Pendientes"}),i.jsx(An,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),i.jsx(An,{to:`${r}/bills`,className:n,children:"Cierre Ventas"})]}),i.jsx(M,{open:u,onClick:()=>d(ie=>!ie),title:"Inventarios"}),u&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(An,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),i.jsx(An,{to:`${r}/paidBatches`,className:n,children:"Inventarios Pagados"})]}),i.jsx(M,{open:f,onClick:()=>A(ie=>!ie),title:"Finanzas"}),f&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(An,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),i.jsx(An,{to:`${r}/billing`,className:n,children:"Facturacion"}),i.jsx(An,{to:`${r}/expenses`,className:n,children:"Gastos"}),i.jsx(An,{to:`${r}/salesV2`,className:n,children:"Venta"}),i.jsx(An,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),i.jsx(An,{to:`${r}/billhistoric`,className:n,children:"Historial de Cierres"})]}),i.jsx(M,{open:h,onClick:()=>m(ie=>!ie),title:"Productos"}),h&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/products`,className:n,children:"Productos"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(ee,{open:v,onClick:()=>y(ie=>!ie),children:"Gonper"}),v&&i.jsxs("div",{className:"pb-2",children:[i.jsx(M,{open:b,onClick:()=>w(ie=>!ie),title:"Inventarios"}),b&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/notebooksInventory`,className:n,children:"Productos y Precios"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(ee,{open:R,onClick:()=>Y(ie=>!ie),children:"CandyShop"}),R&&i.jsxs("div",{className:"pb-2",children:[i.jsx(M,{open:he,onClick:()=>ge(ie=>!ie),title:"Vendedores"}),he&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),he&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/productsVendorsCandies`,className:n,children:"Sub ordenes"})}),he&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})}),i.jsx(M,{open:me,onClick:()=>pe(ie=>!ie),title:"Inventario"}),me&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/mainordersCandies`,className:n,children:"Ordenes Maestras"})}),me&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/inventoryMainOrderCandies`,className:n,children:"Lista de Ordenes"})}),me&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/inventoryCandies`,className:n,children:"Lista Productos"})}),me&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/productsCandies`,className:n,children:"Productos"})}),i.jsx(M,{open:se,onClick:()=>je(ie=>!ie),title:"Finanzas"}),se&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/datacenter`,className:n,children:"Data Center"})}),se&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/cashDeliveries`,className:n,children:"Entregas Cash"})}),se&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/transactionCandies`,className:n,children:"Transacciones"})}),se&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierres"})}),se&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/reporteCierresCandies`,className:n,children:"Reporte Cierres"})}),se&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/billingsCandies`,className:n,children:"Facturas"})}),se&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/consolidatedVendors`,className:n,children:"Consolidado Vendedores"})}),se&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/dashboardCandies`,className:n,children:"Dashboard"})}),se&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),se&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/vendorsCandies`,className:n,children:"Vendedores"})}),se&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/expensesCandies`,className:n,children:"Gastos"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(ee,{open:Te,onClick:()=>D(ie=>!ie),children:"Operaciones Otras"}),Te&&i.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[i.jsx(An,{to:`${r}/users`,className:n,children:"Usuarios"}),i.jsx(An,{to:`${r}/fix`,className:n,children:"Fix de lotes"}),i.jsx(An,{to:`${r}/transactionclose`,className:n,children:"Liquidaciones"})]})]})]}),!ne&&V&&i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(ee,{open:l,onClick:()=>c(ie=>!ie),children:"Pollos Bea"}),l&&i.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[ta(G,"salesV2")&&i.jsx(An,{to:`${r}/salesV2`,className:n,children:"Vender"}),ta(G,"financialDashboard")&&i.jsx(An,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),ta(G,"batches")&&i.jsx(An,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),ta(G,"bills")&&i.jsx(An,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),ta(G,"transactionsPollo")&&i.jsx(An,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),ta(G,"customersPollo")&&i.jsx(An,{to:`${r}/customersPollo`,className:n,children:"Saldos Pendientes"})]})]}),!ne&&qe&&i.jsxs("div",{className:"border rounded",children:[i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:ta(G,"salesCandies")&&i.jsx(An,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:ta(G,"transactionCandies")&&i.jsx(An,{to:`${r}/transactionCandies`,className:n,children:"Ventas del dia"})}),i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:ta(G,"cierreVentasCandies")&&i.jsx(An,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierre de Ventas"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:ta(G,"productsVendorsCandies")&&i.jsx(An,{to:`${r}/productsVendorsCandies`,className:n,children:"Pedidos"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:ta(G,"customersCandies")&&i.jsx(An,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:ta(G,"productsPricesCandies")&&i.jsx(An,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})})]}),ve&&i.jsxs("div",{className:"border rounded",children:[i.jsx(ee,{open:v,onClick:()=>y(ie=>!ie),children:"Operaciones Ropa"}),v&&i.jsxs("div",{className:"pb-2",children:[i.jsx(M,{open:E,onClick:()=>F(ie=>!ie),title:"Ventas"}),E&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(An,{to:`${r}/salesClothes`,className:n,children:"Venta Ropa"}),i.jsx(An,{to:`${r}/TransactionsReportClothes`,className:n,children:"Transacciones"})]}),i.jsx(M,{open:P,onClick:()=>j(ie=>!ie),title:"Productos"}),P&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/productsClothes`,className:n,children:"Agregar Productos"})}),i.jsx(M,{open:_,onClick:()=>I(ie=>!ie),title:"Clientes"}),_&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(An,{to:`${r}/CustomersClothes`,className:n,children:"Listado de Clientes"})})]})]})]}),i.jsx("button",{onClick:Q,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded-2xl shadow-2xl hover:bg-red-600",children:"Cerrar sesin"}),i.jsx("div",{className:"mt-2 text-[20px] text-gray-700",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))}),K&&i.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>z(!1)}),i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[i.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{onClick:()=>z(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),i.jsx("button",{onClick:J,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]}),i.jsx("main",{className:"flex-1 p-6",children:i.jsx(hY,{})})]})}function ry(...t){return t.filter(Boolean).join(" ")}function Qye({role:t,roles:e}){const r=uw(),n=xA(),a="/admin",s=e&&e.length?e:t,o=mn(s,"admin"),l=mn(s,"vendedor_pollo"),c=mn(s,"vendedor_dulces"),u=mn(s,"supervisor_pollo")||mn(s,"contador"),d=mn(s,"contador"),f=ta(s,"salesV2","view")||ta(s,"batches","view")||ta(s,"bills","view")||ta(s,"transactionsPollo","view")||ta(s,"customersPollo","view"),A=ta(s,"salesCandies","view")||ta(s,"productsVendorsCandies","view")||ta(s,"customersCandies","view")||ta(s,"productsPricesCandies","view")||ta(s,"transactionCandies","view")||ta(s,"cierreVentasCandies","view"),h=f&&A,[m,p]=x.useState(()=>{try{const F=typeof window<"u"?localStorage.getItem("rubro"):null;if(F==="POLLO"||F==="DULCES")return F}catch{}return f?"POLLO":A?"DULCES":"POLLO"}),[g,v]=x.useState(!1),[y,b]=x.useState(!1),w=x.useMemo(()=>{let F=[];if(o||h){if(m==="POLLO")if(o)F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"invPag",label:"Factura",to:`${a}/paidBatches`},{key:"gastos",label:"Gastos",to:`${a}/expenses`}];else if(u){const R=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`}];mn(s,"contador")&&(F=R)}else l?F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:d?F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:F=[{key:"home",label:"Inicio",to:`${a}`}];m==="DULCES"&&(o?F=[{key:"dc",label:"Data Center Reporte",to:`${a}/datacenter`},{key:"maes",label:"Inventario Maestro",to:`${a}/mainordersCandies`},{key:"ord",label:"Inventario Vendedor",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas del dia",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre de ventas",to:`${a}/cierreVentasCandies`},{key:"cash",label:"Entregas Efectivo ",to:`${a}/cashDeliveries`},{key:"items",label:"Productos",to:`${a}/productsCandies`},{key:"precios",label:"Precio Ventas",to:`${a}/productsPricesCandies`},{key:"gonper",label:"Productos Gonper",to:`${a}/notebooksInventory`}]:c?F=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:F=[{key:"home",label:"Inicio",to:`${a}`}])}else if(u){const R=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre",to:`${a}/bills`}];mn(s,"contador"),F=R}else l?F=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"cierre",label:"Cierre",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:c?F=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:F=[{key:"home",label:"Inicio",to:`${a}`}];const k=new Set(["bills","customersPollo","transactionsPollo","batches","salesV2","financialDashboard","salesCandies","productsVendorsCandies","productsPricesCandies","transactionCandies","cierreVentasCandies","customersCandies"]);return F.filter(R=>{const me=R.to.replace(`${a}/`,"");return k.has(me)?ta(s,me,"view"):!0})},[a,m,o,h,u,l,c,d,s]);x.useEffect(()=>{if((o||h)&&w.length){try{localStorage.setItem("rubro",m)}catch{}r(w[0].to,{replace:!0})}},[m]),x.useEffect(()=>{g&&v(!1)},[n.pathname]),x.useEffect(()=>{const F=k=>{k.key==="Escape"&&v(!1)};return g&&window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[g]);const P=async()=>{b(!0)},j=async()=>{try{await wD(ef)}catch(F){console.error("signOut error:",F)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}b(!1),v(!1),r("/")}},_=({isActive:F})=>ry("flex-1 text-center text-[11px] py-1.5 rounded-lg","leading-none select-none",F?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),I=w.length<=2,E=({isActive:F})=>ry("w-full flex items-center justify-between px-4 py-3 rounded-xl border",F?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50");return i.jsxs("div",{className:"min-h-screen bg-[#f1f3f7] flex flex-col",children:[i.jsx("header",{className:"sticky top-0 z-50 bg-white border-b shadow-sm",children:i.jsxs("div",{className:"px-3 py-3 flex items-center gap-2",children:[o||h?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>p("POLLO"),className:ry("px-3 py-2 rounded-2xl text-sm font-semibold",m==="POLLO"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Carniceria"}),i.jsx("button",{type:"button",onClick:()=>p("DULCES"),className:ry("px-3 py-2 rounded-2xl text-sm font-semibold",m==="DULCES"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Mr. Candy"})]}):i.jsx("div",{className:"text-sm font-semibold text-gray-800",children:l?"Pollos Bea":c?"CandyShop":"Posys"}),i.jsx("div",{className:"ml-auto flex items-center gap-2",children:i.jsx("button",{type:"button",onClick:()=>v(!0),className:"px-3 py-2 rounded-2xl bg-gray-100 text-gray-800 text-sm font-bold shadow hover:bg-gray-200","aria-label":"Abrir men",title:"Men",children:""})})]})}),g&&i.jsxs("div",{className:"fixed inset-0 z-[80]",children:[i.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>v(!1),"aria-label":"Cerrar men"}),i.jsxs("aside",{className:"absolute right-0 top-0 h-full w-[86%] max-w-sm bg-white shadow-2xl border-l flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"font-bold text-gray-900",children:"Men"}),i.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200",children:""})]}),i.jsx("div",{className:"mt-2 text-[20px] text-gray-600",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))})]}),i.jsx("div",{className:"p-3 flex-1 overflow-y-auto space-y-2",children:w.map(F=>i.jsxs(An,{to:F.to,className:E,children:[i.jsx("span",{className:"font-semibold",children:F.label}),i.jsx("span",{className:"text-sm opacity-80",children:""})]},F.key))}),i.jsxs("div",{className:"p-3 border-t space-y-2 pb-[calc(12px+env(safe-area-inset-bottom))]",children:[i.jsx("button",{onClick:P,className:"w-full px-4 py-3 rounded-xl bg-red-500 text-white font-semibold shadow hover:bg-red-600",children:"Cerrar sesin"}),y&&i.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>b(!1)}),i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[i.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{onClick:()=>b(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),i.jsx("button",{onClick:j,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]})]}),i.jsx("main",{className:ry("flex-1 overflow-y-auto px-3 pt-3",I?"pb-[calc(92px+env(safe-area-inset-bottom))]":"pb-[calc(16px+env(safe-area-inset-bottom))]"),children:i.jsx(hY,{})}),I&&i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-md pb-[env(safe-area-inset-bottom)]",children:i.jsx("div",{className:"max-w-3xl mx-auto px-2 py-1.5 flex gap-1.5",children:w.map(F=>i.jsx(An,{to:F.to,className:_,children:F.label},F.key))})})]})}const pee=6048e5,Vye=864e5,Hye=6e4,$ye=36e5,Gye=1e3,d9=Symbol.for("constructDateFrom");function Xi(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&d9 in t?t[d9](e):t instanceof Date?new t.constructor(e):new Date(e)}function ni(t,e){return Xi(e||t,t)}function m6(t,e,r){const n=ni(t,r==null?void 0:r.in);return isNaN(e)?Xi((r==null?void 0:r.in)||t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Kye(t,e,r){const n=ni(t,r==null?void 0:r.in);if(isNaN(e))return Xi(t,NaN);const a=n.getDate(),s=Xi(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const o=s.getDate();return a>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let qye={};function u1(){return qye}function hm(t,e){var l,c,u,d;const r=u1(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=ni(t,e==null?void 0:e.in),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function kv(t,e){return hm(t,{...e,weekStartsOn:1})}function gee(t,e){const r=ni(t,e==null?void 0:e.in),n=r.getFullYear(),a=Xi(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=kv(a),o=Xi(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=kv(o);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function cS(t){const e=ni(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function zye(t,...e){const r=Xi.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function f9(t,e){const r=ni(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function Wye(t,e,r){const[n,a]=zye(r==null?void 0:r.in,t,e),s=f9(n),o=f9(a),l=+s-cS(s),c=+o-cS(o);return Math.round((l-c)/Vye)}function Xye(t,e){const r=gee(t,e),n=Xi(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),kv(n)}function Yye(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function p6(t){return!(!Yye(t)&&typeof t!="number"||isNaN(+ni(t)))}function bd(t,e){const r=ni(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function wd(t,e){const r=ni(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Jye(t,e){const r=ni(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Zye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ebe=(t,e,r)=>{let n;const a=Zye[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function x3(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const tbe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rbe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},nbe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},abe={date:x3({formats:tbe,defaultWidth:"full"}),time:x3({formats:rbe,defaultWidth:"full"}),dateTime:x3({formats:nbe,defaultWidth:"full"})},sbe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ibe=(t,e,r,n)=>sbe[t];function ny(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const obe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lbe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cbe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ube={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dbe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fbe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hbe=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Abe={ordinalNumber:hbe,era:ny({values:obe,defaultWidth:"wide"}),quarter:ny({values:lbe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ny({values:cbe,defaultWidth:"wide"}),day:ny({values:ube,defaultWidth:"wide"}),dayPeriod:ny({values:dbe,defaultWidth:"wide",formattingValues:fbe,defaultFormattingWidth:"wide"})};function ay(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const o=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?pbe(l,f=>f.test(o)):mbe(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function mbe(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function pbe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function gbe(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const xbe=/^(\d+)(th|st|nd|rd)?/i,vbe=/\d+/i,ybe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bbe={any:[/^b/i,/^(a|c)/i]},wbe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Nbe={any:[/1/i,/2/i,/3/i,/4/i]},Cbe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_be={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ebe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Sbe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ibe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jbe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Pbe={ordinalNumber:gbe({matchPattern:xbe,parsePattern:vbe,valueCallback:t=>parseInt(t,10)}),era:ay({matchPatterns:ybe,defaultMatchWidth:"wide",parsePatterns:bbe,defaultParseWidth:"any"}),quarter:ay({matchPatterns:wbe,defaultMatchWidth:"wide",parsePatterns:Nbe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ay({matchPatterns:Cbe,defaultMatchWidth:"wide",parsePatterns:_be,defaultParseWidth:"any"}),day:ay({matchPatterns:Ebe,defaultMatchWidth:"wide",parsePatterns:Sbe,defaultParseWidth:"any"}),dayPeriod:ay({matchPatterns:Ibe,defaultMatchWidth:"any",parsePatterns:jbe,defaultParseWidth:"any"})},xee={code:"en-US",formatDistance:ebe,formatLong:abe,formatRelative:ibe,localize:Abe,match:Pbe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Bbe(t,e){const r=ni(t,e==null?void 0:e.in);return Wye(r,Jye(r))+1}function vee(t,e){const r=ni(t,e==null?void 0:e.in),n=+kv(r)-+Xye(r);return Math.round(n/pee)+1}function g6(t,e){var d,f,A,h;const r=ni(t,e==null?void 0:e.in),n=r.getFullYear(),a=u1(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(A=a.locale)==null?void 0:A.options)==null?void 0:h.firstWeekContainsDate)??1,o=Xi((e==null?void 0:e.in)||t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=hm(o,e),c=Xi((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=hm(c,e);return+r>=+l?n+1:+r>=+u?n:n-1}function Tbe(t,e){var l,c,u,d;const r=u1(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=g6(t,e),s=Xi((e==null?void 0:e.in)||t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),hm(s,e)}function yee(t,e){const r=ni(t,e==null?void 0:e.in),n=+hm(r,e)-+Tbe(r,e);return Math.round(n/pee)+1}function Ma(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const e0={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Ma(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Ma(r+1,2)},d(t,e){return Ma(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Ma(t.getHours()%12||12,e.length)},H(t,e){return Ma(t.getHours(),e.length)},m(t,e){return Ma(t.getMinutes(),e.length)},s(t,e){return Ma(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Ma(a,e.length)}},Yg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},h9={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return e0.y(t,e)},Y:function(t,e,r,n){const a=g6(t,n),s=a>0?a:1-a;if(e==="YY"){const o=s%100;return Ma(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):Ma(s,e.length)},R:function(t,e){const r=gee(t);return Ma(r,e.length)},u:function(t,e){const r=t.getFullYear();return Ma(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Ma(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Ma(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return e0.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Ma(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=yee(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):Ma(a,e.length)},I:function(t,e,r){const n=vee(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Ma(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):e0.d(t,e)},D:function(t,e,r){const n=Bbe(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ma(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ma(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ma(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return Ma(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=Yg.noon:n===0?a=Yg.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=Yg.evening:n>=12?a=Yg.afternoon:n>=4?a=Yg.morning:a=Yg.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return e0.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):e0.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ma(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ma(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):e0.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):e0.s(t,e)},S:function(t,e){return e0.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return m9(n);case"XXXX":case"XX":return ep(n);case"XXXXX":case"XXX":default:return ep(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return m9(n);case"xxxx":case"xx":return ep(n);case"xxxxx":case"xxx":default:return ep(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+A9(n,":");case"OOOO":default:return"GMT"+ep(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+A9(n,":");case"zzzz":default:return"GMT"+ep(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Ma(n,e.length)},T:function(t,e,r){return Ma(+t,e.length)}};function A9(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+Ma(s,2)}function m9(t,e){return t%60===0?(t>0?"-":"+")+Ma(Math.abs(t)/60,2):ep(t,e)}function ep(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Ma(Math.trunc(n/60),2),s=Ma(n%60,2);return r+a+e+s}const p9=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},bee=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},kbe=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return p9(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",p9(n,e)).replace("{{time}}",bee(a,e))},XT={p:bee,P:kbe},Fbe=/^D+$/,Obe=/^Y+$/,Dbe=["D","DD","YY","YYYY"];function wee(t){return Fbe.test(t)}function Nee(t){return Obe.test(t)}function YT(t,e,r){const n=Rbe(t,e,r);if(console.warn(n),Dbe.includes(t))throw new RangeError(n)}function Rbe(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Mbe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Lbe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ube=/^'([^]*?)'?$/,Qbe=/''/g,Vbe=/[a-zA-Z]/;function jr(t,e,r){var d,f,A,h;const n=u1(),a=n.locale??xee,s=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=n.weekStartsOn??((h=(A=n.locale)==null?void 0:A.options)==null?void 0:h.weekStartsOn)??0,l=ni(t,r==null?void 0:r.in);if(!p6(l))throw new RangeError("Invalid time value");let c=e.match(Lbe).map(m=>{const p=m[0];if(p==="p"||p==="P"){const g=XT[p];return g(m,a.formatLong)}return m}).join("").match(Mbe).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:Hbe(m)};if(h9[p])return{isToken:!0,value:m};if(p.match(Vbe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(Nee(p)||wee(p))&&YT(p,e,String(t));const g=h9[p[0]];return g(l,p,a.localize,u)}).join("")}function Hbe(t){const e=t.match(Ube);return e?e[1].replace(Qbe,"'"):t}function $be(){return Object.assign({},u1())}function Gbe(t,e){const r=ni(t,e==null?void 0:e.in).getDay();return r===0?7:r}function Kbe(t,e){const r=qbe(e)?new e(0):Xi(e,0);return r.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),r.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),r}function qbe(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const zbe=10;class Cee{constructor(){vr(this,"subPriority",0)}validate(e,r){return!0}}class Wbe extends Cee{constructor(e,r,n,a,s){super(),this.value=e,this.validateValue=r,this.setValue=n,this.priority=a,s&&(this.subPriority=s)}validate(e,r){return this.validateValue(e,this.value,r)}set(e,r,n){return this.setValue(e,r,this.value,n)}}class Xbe extends Cee{constructor(r,n){super();vr(this,"priority",zbe);vr(this,"subPriority",-1);this.context=r||(a=>Xi(n,a))}set(r,n){return n.timestampIsSet?r:Xi(r,Kbe(r,this.context))}}let Ea=class{run(e,r,n,a){const s=this.parse(e,r,n,a);return s?{setter:new Wbe(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,r,n){return!0}};class Ybe extends Ea{constructor(){super(...arguments);vr(this,"priority",140);vr(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,a){switch(n){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})||a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"})}}set(r,n,a){return n.era=a,r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}const Fi={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Tf={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Oi(t,e){return t&&{value:e(t.value),rest:t.rest}}function Xs(t,e){const r=e.match(t);return r?{value:parseInt(r[0],10),rest:e.slice(r[0].length)}:null}function kf(t,e){const r=e.match(t);if(!r)return null;if(r[0]==="Z")return{value:0,rest:e.slice(1)};const n=r[1]==="+"?1:-1,a=r[2]?parseInt(r[2],10):0,s=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(a*$ye+s*Hye+o*Gye),rest:e.slice(r[0].length)}}function _ee(t){return Xs(Fi.anyDigitsSigned,t)}function gi(t,e){switch(t){case 1:return Xs(Fi.singleDigit,e);case 2:return Xs(Fi.twoDigits,e);case 3:return Xs(Fi.threeDigits,e);case 4:return Xs(Fi.fourDigits,e);default:return Xs(new RegExp("^\\d{1,"+t+"}"),e)}}function uS(t,e){switch(t){case 1:return Xs(Fi.singleDigitSigned,e);case 2:return Xs(Fi.twoDigitsSigned,e);case 3:return Xs(Fi.threeDigitsSigned,e);case 4:return Xs(Fi.fourDigitsSigned,e);default:return Xs(new RegExp("^-?\\d{1,"+t+"}"),e)}}function x6(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Eee(t,e){const r=e>0,n=r?e:1-e;let a;if(n<=50)a=t||100;else{const s=n+50,o=Math.trunc(s/100)*100,l=t>=s%100;a=t+o-(l?100:0)}return r?a:1-a}function See(t){return t%400===0||t%4===0&&t%100!==0}class Jbe extends Ea{constructor(){super(...arguments);vr(this,"priority",130);vr(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,a){const s=o=>({year:o,isTwoDigitYear:n==="yy"});switch(n){case"y":return Oi(gi(4,r),s);case"yo":return Oi(a.ordinalNumber(r,{unit:"year"}),s);default:return Oi(gi(n.length,r),s)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a){const s=r.getFullYear();if(a.isTwoDigitYear){const l=Eee(a.year,s);return r.setFullYear(l,0,1),r.setHours(0,0,0,0),r}const o=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}}class Zbe extends Ea{constructor(){super(...arguments);vr(this,"priority",130);vr(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,a){const s=o=>({year:o,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Oi(gi(4,r),s);case"Yo":return Oi(a.ordinalNumber(r,{unit:"year"}),s);default:return Oi(gi(n.length,r),s)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a,s){const o=g6(r,s);if(a.isTwoDigitYear){const c=Eee(a.year,o);return r.setFullYear(c,0,s.firstWeekContainsDate),r.setHours(0,0,0,0),hm(r,s)}const l=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(l,0,s.firstWeekContainsDate),r.setHours(0,0,0,0),hm(r,s)}}class e2e extends Ea{constructor(){super(...arguments);vr(this,"priority",130);vr(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return uS(n==="R"?4:n.length,r)}set(r,n,a){const s=Xi(r,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),kv(s)}}class t2e extends Ea{constructor(){super(...arguments);vr(this,"priority",130);vr(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return uS(n==="u"?4:n.length,r)}set(r,n,a){return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}class r2e extends Ea{constructor(){super(...arguments);vr(this,"priority",120);vr(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"Q":case"QQ":return gi(n.length,r);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})||a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class n2e extends Ea{constructor(){super(...arguments);vr(this,"priority",120);vr(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"q":case"qq":return gi(n.length,r);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})||a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class a2e extends Ea{constructor(){super(...arguments);vr(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);vr(this,"priority",110)}parse(r,n,a){const s=o=>o-1;switch(n){case"M":return Oi(Xs(Fi.month,r),s);case"MM":return Oi(gi(2,r),s);case"Mo":return Oi(a.ordinalNumber(r,{unit:"month"}),s);case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})||a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}class s2e extends Ea{constructor(){super(...arguments);vr(this,"priority",110);vr(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,a){const s=o=>o-1;switch(n){case"L":return Oi(Xs(Fi.month,r),s);case"LL":return Oi(gi(2,r),s);case"Lo":return Oi(a.ordinalNumber(r,{unit:"month"}),s);case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})||a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}function i2e(t,e,r){const n=ni(t,r==null?void 0:r.in),a=yee(n,r)-e;return n.setDate(n.getDate()-a*7),ni(n,r==null?void 0:r.in)}class o2e extends Ea{constructor(){super(...arguments);vr(this,"priority",100);vr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,a){switch(n){case"w":return Xs(Fi.week,r);case"wo":return a.ordinalNumber(r,{unit:"week"});default:return gi(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a,s){return hm(i2e(r,a,s),s)}}function l2e(t,e,r){const n=ni(t,r==null?void 0:r.in),a=vee(n,r)-e;return n.setDate(n.getDate()-a*7),n}class c2e extends Ea{constructor(){super(...arguments);vr(this,"priority",100);vr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,a){switch(n){case"I":return Xs(Fi.week,r);case"Io":return a.ordinalNumber(r,{unit:"week"});default:return gi(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a){return kv(l2e(r,a))}}const u2e=[31,28,31,30,31,30,31,31,30,31,30,31],d2e=[31,29,31,30,31,30,31,31,30,31,30,31];class f2e extends Ea{constructor(){super(...arguments);vr(this,"priority",90);vr(this,"subPriority",1);vr(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"d":return Xs(Fi.date,r);case"do":return a.ordinalNumber(r,{unit:"date"});default:return gi(n.length,r)}}validate(r,n){const a=r.getFullYear(),s=See(a),o=r.getMonth();return s?n>=1&&n<=d2e[o]:n>=1&&n<=u2e[o]}set(r,n,a){return r.setDate(a),r.setHours(0,0,0,0),r}}class h2e extends Ea{constructor(){super(...arguments);vr(this,"priority",90);vr(this,"subpriority",1);vr(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,a){switch(n){case"D":case"DD":return Xs(Fi.dayOfYear,r);case"Do":return a.ordinalNumber(r,{unit:"date"});default:return gi(n.length,r)}}validate(r,n){const a=r.getFullYear();return See(a)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,a){return r.setMonth(0,a),r.setHours(0,0,0,0),r}}function v6(t,e,r){var f,A,h,m;const n=u1(),a=(r==null?void 0:r.weekStartsOn)??((A=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:A.weekStartsOn)??n.weekStartsOn??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,s=ni(t,r==null?void 0:r.in),o=s.getDay(),c=(e%7+7)%7,u=7-a,d=e<0||e>6?e-(o+u)%7:(c+u)%7-(o+u)%7;return m6(s,d,r)}class A2e extends Ea{constructor(){super(...arguments);vr(this,"priority",90);vr(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=v6(r,a,s),r.setHours(0,0,0,0),r}}class m2e extends Ea{constructor(){super(...arguments);vr(this,"priority",90);vr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,a,s){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return Oi(gi(n.length,r),o);case"eo":return Oi(a.ordinalNumber(r,{unit:"day"}),o);case"eee":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=v6(r,a,s),r.setHours(0,0,0,0),r}}class p2e extends Ea{constructor(){super(...arguments);vr(this,"priority",90);vr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,a,s){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return Oi(gi(n.length,r),o);case"co":return Oi(a.ordinalNumber(r,{unit:"day"}),o);case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})||a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=v6(r,a,s),r.setHours(0,0,0,0),r}}function g2e(t,e,r){const n=ni(t,r==null?void 0:r.in),a=Gbe(n,r),s=e-a;return m6(n,s,r)}class x2e extends Ea{constructor(){super(...arguments);vr(this,"priority",90);vr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,a){const s=o=>o===0?7:o;switch(n){case"i":case"ii":return gi(n.length,r);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return Oi(a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s);case"iiiii":return Oi(a.day(r,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Oi(a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Oi(a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s)}}validate(r,n){return n>=1&&n<=7}set(r,n,a){return r=g2e(r,a),r.setHours(0,0,0,0),r}}class v2e extends Ea{constructor(){super(...arguments);vr(this,"priority",80);vr(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,a){switch(n){case"a":case"aa":case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(x6(a),0,0,0),r}}class y2e extends Ea{constructor(){super(...arguments);vr(this,"priority",80);vr(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,a){switch(n){case"b":case"bb":case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(x6(a),0,0,0),r}}class b2e extends Ea{constructor(){super(...arguments);vr(this,"priority",80);vr(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,a){switch(n){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(x6(a),0,0,0),r}}class w2e extends Ea{constructor(){super(...arguments);vr(this,"priority",70);vr(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,a){switch(n){case"h":return Xs(Fi.hour12h,r);case"ho":return a.ordinalNumber(r,{unit:"hour"});default:return gi(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,a){const s=r.getHours()>=12;return s&&a<12?r.setHours(a+12,0,0,0):!s&&a===12?r.setHours(0,0,0,0):r.setHours(a,0,0,0),r}}class N2e extends Ea{constructor(){super(...arguments);vr(this,"priority",70);vr(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,a){switch(n){case"H":return Xs(Fi.hour23h,r);case"Ho":return a.ordinalNumber(r,{unit:"hour"});default:return gi(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,a){return r.setHours(a,0,0,0),r}}class C2e extends Ea{constructor(){super(...arguments);vr(this,"priority",70);vr(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,a){switch(n){case"K":return Xs(Fi.hour11h,r);case"Ko":return a.ordinalNumber(r,{unit:"hour"});default:return gi(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.getHours()>=12&&a<12?r.setHours(a+12,0,0,0):r.setHours(a,0,0,0),r}}class _2e extends Ea{constructor(){super(...arguments);vr(this,"priority",70);vr(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,a){switch(n){case"k":return Xs(Fi.hour24h,r);case"ko":return a.ordinalNumber(r,{unit:"hour"});default:return gi(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,a){const s=a<=24?a%24:a;return r.setHours(s,0,0,0),r}}class E2e extends Ea{constructor(){super(...arguments);vr(this,"priority",60);vr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"m":return Xs(Fi.minute,r);case"mo":return a.ordinalNumber(r,{unit:"minute"});default:return gi(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setMinutes(a,0,0),r}}class S2e extends Ea{constructor(){super(...arguments);vr(this,"priority",50);vr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"s":return Xs(Fi.second,r);case"so":return a.ordinalNumber(r,{unit:"second"});default:return gi(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setSeconds(a,0),r}}class I2e extends Ea{constructor(){super(...arguments);vr(this,"priority",30);vr(this,"incompatibleTokens",["t","T"])}parse(r,n){const a=s=>Math.trunc(s*Math.pow(10,-n.length+3));return Oi(gi(n.length,r),a)}set(r,n,a){return r.setMilliseconds(a),r}}class j2e extends Ea{constructor(){super(...arguments);vr(this,"priority",10);vr(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return kf(Tf.basicOptionalMinutes,r);case"XX":return kf(Tf.basic,r);case"XXXX":return kf(Tf.basicOptionalSeconds,r);case"XXXXX":return kf(Tf.extendedOptionalSeconds,r);case"XXX":default:return kf(Tf.extended,r)}}set(r,n,a){return n.timestampIsSet?r:Xi(r,r.getTime()-cS(r)-a)}}class P2e extends Ea{constructor(){super(...arguments);vr(this,"priority",10);vr(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return kf(Tf.basicOptionalMinutes,r);case"xx":return kf(Tf.basic,r);case"xxxx":return kf(Tf.basicOptionalSeconds,r);case"xxxxx":return kf(Tf.extendedOptionalSeconds,r);case"xxx":default:return kf(Tf.extended,r)}}set(r,n,a){return n.timestampIsSet?r:Xi(r,r.getTime()-cS(r)-a)}}class B2e extends Ea{constructor(){super(...arguments);vr(this,"priority",40);vr(this,"incompatibleTokens","*")}parse(r){return _ee(r)}set(r,n,a){return[Xi(r,a*1e3),{timestampIsSet:!0}]}}class T2e extends Ea{constructor(){super(...arguments);vr(this,"priority",20);vr(this,"incompatibleTokens","*")}parse(r){return _ee(r)}set(r,n,a){return[Xi(r,a),{timestampIsSet:!0}]}}const k2e={G:new Ybe,y:new Jbe,Y:new Zbe,R:new e2e,u:new t2e,Q:new r2e,q:new n2e,M:new a2e,L:new s2e,w:new o2e,I:new c2e,d:new f2e,D:new h2e,E:new A2e,e:new m2e,c:new p2e,i:new x2e,a:new v2e,b:new y2e,B:new b2e,h:new w2e,H:new N2e,K:new C2e,k:new _2e,m:new E2e,s:new S2e,S:new I2e,X:new j2e,x:new P2e,t:new B2e,T:new T2e},F2e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,O2e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,D2e=/^'([^]*?)'?$/,R2e=/''/g,M2e=/\S/,L2e=/[a-zA-Z]/;function dS(t,e,r,n){var g,v,y,b;const a=()=>Xi(r,NaN),s=$be(),o=s.locale??xee,l=s.firstWeekContainsDate??((v=(g=s.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,c=s.weekStartsOn??((b=(y=s.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??0;if(!e)return t?a():ni(r,n==null?void 0:n.in);const u={firstWeekContainsDate:l,weekStartsOn:c,locale:o},d=[new Xbe(n==null?void 0:n.in,r)],f=e.match(O2e).map(w=>{const P=w[0];if(P in XT){const j=XT[P];return j(w,o.formatLong)}return w}).join("").match(F2e),A=[];for(let w of f){Nee(w)&&YT(w,e,t),wee(w)&&YT(w,e,t);const P=w[0],j=k2e[P];if(j){const{incompatibleTokens:_}=j;if(Array.isArray(_)){const E=A.find(F=>_.includes(F.token)||F.token===P);if(E)throw new RangeError(`The format string mustn't contain \`${E.fullToken}\` and \`${w}\` at the same time`)}else if(j.incompatibleTokens==="*"&&A.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);A.push({token:P,fullToken:w});const I=j.run(t,w,o.match,u);if(!I)return a();d.push(I.setter),t=I.rest}else{if(P.match(L2e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");if(w==="''"?w="'":P==="'"&&(w=U2e(w)),t.indexOf(w)===0)t=t.slice(w.length);else return a()}}if(t.length>0&&M2e.test(t))return a();const h=d.map(w=>w.priority).sort((w,P)=>P-w).filter((w,P,j)=>j.indexOf(w)===P).map(w=>d.filter(P=>P.priority===w).sort((P,j)=>j.subPriority-P.subPriority)).map(w=>w[0]);let m=ni(r,n==null?void 0:n.in);if(isNaN(+m))return a();const p={};for(const w of h){if(!w.validate(m,u))return a();const P=w.set(m,p,u);Array.isArray(P)?(m=P[0],Object.assign(p,P[1])):m=P}return m}function U2e(t){return t.match(D2e)[1].replace(R2e,"'")}function Iee(t,e,r){return m6(t,-14,r)}function Q2e(t,e,r){return Kye(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var JT=function(t,e){return JT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},JT(t,e)};function ff(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");JT(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ZT=function(){return ZT=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ZT.apply(this,arguments)};function nc(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function kl(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function eC(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var iA=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Rj=function(t,e){return iA.fromClientRect(t,e.getBoundingClientRect())},V2e=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new iA(0,0,n,a)},Mj=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Si=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=t[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},g9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tC=0;tC<g9.length;tC++)H2e[g9.charCodeAt(tC)]=tC;var x9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var rC=0;rC<x9.length;rC++)Dy[x9.charCodeAt(rC)]=rC;var $2e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Dy[t.charCodeAt(n)],o=Dy[t.charCodeAt(n+1)],l=Dy[t.charCodeAt(n+2)],c=Dy[t.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},G2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},K2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Sp=5,y6=11,v3=2,q2e=y6-Sp,jee=65536>>Sp,z2e=1<<Sp,y3=z2e-1,W2e=1024>>Sp,X2e=jee+W2e,Y2e=X2e,J2e=32,Z2e=Y2e+J2e,ewe=65536>>y6,twe=1<<q2e,rwe=twe-1,v9=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},nwe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},awe=function(t,e){var r=$2e(t),n=Array.isArray(r)?K2e(r):new Uint32Array(r),a=Array.isArray(r)?G2e(r):new Uint16Array(r),s=24,o=v9(a,s/2,n[4]/2),l=n[5]===2?v9(a,(s+n[4])/2):nwe(n,Math.ceil((s+n[4])/4));return new swe(n[0],n[1],n[2],n[3],o,l)},swe=function(){function t(e,r,n,a,s,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Sp],r=(r<<v3)+(e&y3),this.data[r];if(e<=65535)return r=this.index[jee+(e-55296>>Sp)],r=(r<<v3)+(e&y3),this.data[r];if(e<this.highStart)return r=Z2e-ewe+(e>>y6),r=this.index[r],r+=e>>Sp&rwe,r=this.index[r],r=(r<<v3)+(e&y3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),y9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iwe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var nC=0;nC<y9.length;nC++)iwe[y9.charCodeAt(nC)]=nC;var owe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",b9=50,lwe=1,Pee=2,Bee=3,cwe=4,uwe=5,w9=7,Tee=8,N9=9,F0=10,ek=11,C9=12,tk=13,dwe=14,Ry=15,rk=16,aC=17,sy=18,fwe=19,_9=20,nk=21,iy=22,b3=23,Jg=24,su=25,My=26,Ly=27,Zg=28,hwe=29,dp=30,Awe=31,sC=32,iC=33,ak=34,sk=35,ik=36,x2=37,ok=38,rE=39,nE=40,w3=41,kee=42,mwe=43,pwe=[9001,65288],Fee="!",ea="",oC="",lk=awe(owe),fh=[dp,ik],ck=[lwe,Pee,Bee,uwe],Oee=[F0,Tee],E9=[Ly,My],gwe=ck.concat(Oee),S9=[ok,rE,nE,ak,sk],xwe=[Ry,tk],vwe=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,o){var l=lk.get(s);if(l>b9?(a.push(!0),l-=b9):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),r.push(rk);if(l===cwe||l===ek){if(o===0)return n.push(o),r.push(dp);var c=r[o-1];return gwe.indexOf(c)===-1?(n.push(n[o-1]),r.push(c)):(n.push(o),r.push(dp))}if(n.push(o),l===Awe)return r.push(e==="strict"?nk:x2);if(l===kee||l===hwe)return r.push(dp);if(l===mwe)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(x2):r.push(dp);r.push(l)}),[n,r,a]},N3=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var o=n[s];if(o===e)return!0;if(o!==F0)break}if(a===F0)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var c=r;c<=n.length;){c++;var o=n[c];if(o===e)return!0;if(o!==F0)break}if(l!==F0)break}return!1},I9=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===F0)r--;else return n}return 0},ywe=function(t,e,r,n,a){if(r[n]===0)return ea;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return ea;var o=s-1,l=s+1,c=e[s],u=o>=0?e[o]:0,d=e[l];if(c===Pee&&d===Bee)return ea;if(ck.indexOf(c)!==-1)return Fee;if(ck.indexOf(d)!==-1||Oee.indexOf(d)!==-1)return ea;if(I9(s,e)===Tee)return oC;if(lk.get(t[s])===ek||(c===sC||c===iC)&&lk.get(t[l])===ek||c===w9||d===w9||c===N9||[F0,tk,Ry].indexOf(c)===-1&&d===N9||[aC,sy,fwe,Jg,Zg].indexOf(d)!==-1||I9(s,e)===iy||N3(b3,iy,s,e)||N3([aC,sy],nk,s,e)||N3(C9,C9,s,e))return ea;if(c===F0)return oC;if(c===b3||d===b3)return ea;if(d===rk||c===rk)return oC;if([tk,Ry,nk].indexOf(d)!==-1||c===dwe||u===ik&&xwe.indexOf(c)!==-1||c===Zg&&d===ik||d===_9||fh.indexOf(d)!==-1&&c===su||fh.indexOf(c)!==-1&&d===su||c===Ly&&[x2,sC,iC].indexOf(d)!==-1||[x2,sC,iC].indexOf(c)!==-1&&d===My||fh.indexOf(c)!==-1&&E9.indexOf(d)!==-1||E9.indexOf(c)!==-1&&fh.indexOf(d)!==-1||[Ly,My].indexOf(c)!==-1&&(d===su||[iy,Ry].indexOf(d)!==-1&&e[l+1]===su)||[iy,Ry].indexOf(c)!==-1&&d===su||c===su&&[su,Zg,Jg].indexOf(d)!==-1)return ea;if([su,Zg,Jg,aC,sy].indexOf(d)!==-1)for(var f=s;f>=0;){var A=e[f];if(A===su)return ea;if([Zg,Jg].indexOf(A)!==-1)f--;else break}if([Ly,My].indexOf(d)!==-1)for(var f=[aC,sy].indexOf(c)!==-1?o:s;f>=0;){var A=e[f];if(A===su)return ea;if([Zg,Jg].indexOf(A)!==-1)f--;else break}if(ok===c&&[ok,rE,ak,sk].indexOf(d)!==-1||[rE,ak].indexOf(c)!==-1&&[rE,nE].indexOf(d)!==-1||[nE,sk].indexOf(c)!==-1&&d===nE||S9.indexOf(c)!==-1&&[_9,My].indexOf(d)!==-1||S9.indexOf(d)!==-1&&c===Ly||fh.indexOf(c)!==-1&&fh.indexOf(d)!==-1||c===Jg&&fh.indexOf(d)!==-1||fh.concat(su).indexOf(c)!==-1&&d===iy&&pwe.indexOf(t[l])===-1||fh.concat(su).indexOf(d)!==-1&&c===sy)return ea;if(c===w3&&d===w3){for(var h=r[s],m=1;h>0&&(h--,e[h]===w3);)m++;if(m%2!==0)return ea}return c===sC&&d===iC?ea:oC},bwe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=vwe(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(l){return[su,dp,kee].indexOf(l)!==-1?x2:l}));var o=e.wordBreak==="keep-all"?s.map(function(l,c){return l&&t[c]>=19968&&t[c]<=40959}):void 0;return[n,a,o]},wwe=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===Fee,this.start=n,this.end=a}return t.prototype.slice=function(){return Si.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Nwe=function(t,e){var r=Mj(t),n=bwe(r,e),a=n[0],s=n[1],o=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=ea;u<l&&(d=ywe(r,s,a,++u,o))===ea;);if(d!==ea||u===l){var f=new wwe(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Cwe=1,_we=2,Iw=4,j9=8,fS=10,P9=47,Ab=92,Ewe=9,Swe=32,lC=34,oy=61,Iwe=35,jwe=36,Pwe=37,cC=39,uC=40,ly=41,Bwe=95,Bc=45,Twe=33,kwe=60,Fwe=62,Owe=64,Dwe=91,Rwe=93,Mwe=61,Lwe=123,dC=63,Uwe=125,B9=124,Qwe=126,Vwe=128,T9=65533,C3=42,gp=43,Hwe=44,$we=58,Gwe=59,v2=46,Kwe=0,qwe=8,zwe=11,Wwe=14,Xwe=31,Ywe=127,wf=-1,Dee=48,Ree=97,Mee=101,Jwe=102,Zwe=117,eNe=122,Lee=65,Uee=69,Qee=70,tNe=85,rNe=90,Dl=function(t){return t>=Dee&&t<=57},nNe=function(t){return t>=55296&&t<=57343},ex=function(t){return Dl(t)||t>=Lee&&t<=Qee||t>=Ree&&t<=Jwe},aNe=function(t){return t>=Ree&&t<=eNe},sNe=function(t){return t>=Lee&&t<=rNe},iNe=function(t){return aNe(t)||sNe(t)},oNe=function(t){return t>=Vwe},fC=function(t){return t===fS||t===Ewe||t===Swe},hS=function(t){return iNe(t)||oNe(t)||t===Bwe},k9=function(t){return hS(t)||Dl(t)||t===Bc},lNe=function(t){return t>=Kwe&&t<=qwe||t===zwe||t>=Wwe&&t<=Xwe||t===Ywe},p0=function(t,e){return t!==Ab?!1:e!==fS},hC=function(t,e,r){return t===Bc?hS(e)||p0(e,r):hS(t)?!0:!!(t===Ab&&p0(t,e))},_3=function(t,e,r){return t===gp||t===Bc?Dl(e)?!0:e===v2&&Dl(r):Dl(t===v2?e:t)},cNe=function(t){var e=0,r=1;(t[e]===gp||t[e]===Bc)&&(t[e]===Bc&&(r=-1),e++);for(var n=[];Dl(t[e]);)n.push(t[e++]);var a=n.length?parseInt(Si.apply(void 0,n),10):0;t[e]===v2&&e++;for(var s=[];Dl(t[e]);)s.push(t[e++]);var o=s.length,l=o?parseInt(Si.apply(void 0,s),10):0;(t[e]===Uee||t[e]===Mee)&&e++;var c=1;(t[e]===gp||t[e]===Bc)&&(t[e]===Bc&&(c=-1),e++);for(var u=[];Dl(t[e]);)u.push(t[e++]);var d=u.length?parseInt(Si.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,c*d)},uNe={type:2},dNe={type:3},fNe={type:4},hNe={type:13},ANe={type:8},mNe={type:21},pNe={type:9},gNe={type:10},xNe={type:11},vNe={type:12},yNe={type:14},AC={type:23},bNe={type:1},wNe={type:25},NNe={type:24},CNe={type:26},_Ne={type:27},ENe={type:28},SNe={type:29},INe={type:31},uk={type:32},Vee=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Mj(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==uk;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case lC:return this.consumeStringToken(lC);case Iwe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(k9(r)||p0(n,a)){var s=hC(r,n,a)?_we:Cwe,o=this.consumeName();return{type:5,value:o,flags:s}}break;case jwe:if(this.peekCodePoint(0)===oy)return this.consumeCodePoint(),hNe;break;case cC:return this.consumeStringToken(cC);case uC:return uNe;case ly:return dNe;case C3:if(this.peekCodePoint(0)===oy)return this.consumeCodePoint(),yNe;break;case gp:if(_3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Hwe:return fNe;case Bc:var l=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(_3(l,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(hC(l,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===Bc&&u===Fwe)return this.consumeCodePoint(),this.consumeCodePoint(),NNe;break;case v2:if(_3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case P9:if(this.peekCodePoint(0)===C3)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===C3&&(d=this.consumeCodePoint(),d===P9))return this.consumeToken();if(d===wf)return this.consumeToken()}break;case $we:return CNe;case Gwe:return _Ne;case kwe:if(this.peekCodePoint(0)===Twe&&this.peekCodePoint(1)===Bc&&this.peekCodePoint(2)===Bc)return this.consumeCodePoint(),this.consumeCodePoint(),wNe;break;case Owe:var f=this.peekCodePoint(0),A=this.peekCodePoint(1),h=this.peekCodePoint(2);if(hC(f,A,h)){var o=this.consumeName();return{type:7,value:o}}break;case Dwe:return ENe;case Ab:if(p0(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Rwe:return SNe;case Mwe:if(this.peekCodePoint(0)===oy)return this.consumeCodePoint(),ANe;break;case Lwe:return xNe;case Uwe:return vNe;case Zwe:case tNe:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===gp&&(ex(p)||p===dC)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case B9:if(this.peekCodePoint(0)===oy)return this.consumeCodePoint(),pNe;if(this.peekCodePoint(0)===B9)return this.consumeCodePoint(),mNe;break;case Qwe:if(this.peekCodePoint(0)===oy)return this.consumeCodePoint(),gNe;break;case wf:return uk}return fC(e)?(this.consumeWhiteSpace(),INe):Dl(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):hS(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Si(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();ex(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===dC&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Si.apply(void 0,e.map(function(c){return c===dC?Dee:c})),16),s=parseInt(Si.apply(void 0,e.map(function(c){return c===dC?Qee:c})),16);return{type:30,start:a,end:s}}var o=parseInt(Si.apply(void 0,e),16);if(this.peekCodePoint(0)===Bc&&ex(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];ex(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(Si.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===uC?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===uC?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===wf)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===cC||r===lC){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===wf||this.peekCodePoint(0)===ly)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),AC)}for(;;){var a=this.consumeCodePoint();if(a===wf||a===ly)return{type:22,value:Si.apply(void 0,e)};if(fC(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===wf||this.peekCodePoint(0)===ly?(this.consumeCodePoint(),{type:22,value:Si.apply(void 0,e)}):(this.consumeBadUrlRemnants(),AC);if(a===lC||a===cC||a===uC||lNe(a))return this.consumeBadUrlRemnants(),AC;if(a===Ab)if(p0(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),AC;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;fC(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ly||e===wf)return;p0(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=Si.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===wf||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===fS)return this._value.splice(0,n),bNe;if(a===Ab){var s=this._value[n+1];s!==wf&&s!==void 0&&(s===fS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):p0(a,s)&&(r+=this.consumeStringSlice(n),r+=Si(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Iw,n=this.peekCodePoint(0);for((n===gp||n===Bc)&&e.push(this.consumeCodePoint());Dl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===v2&&Dl(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=j9;Dl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Uee||n===Mee)&&((a===gp||a===Bc)&&Dl(s)||Dl(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=j9;Dl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[cNe(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(hC(a,s,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===Pwe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ex(e)){for(var r=Si(e);ex(this.peekCodePoint(0))&&r.length<6;)r+=Si(this.consumeCodePoint());fC(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||nNe(n)||n>1114111?T9:n}return e===wf?T9:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(k9(r))e+=Si(r);else if(p0(r,this.peekCodePoint(0)))e+=Si(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),Hee=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new Vee;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||PNe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?uk:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),jw=function(t){return t.type===15},d1=function(t){return t.type===17},Wa=function(t){return t.type===20},jNe=function(t){return t.type===0},dk=function(t,e){return Wa(t)&&t.value===e},$ee=function(t){return t.type!==31},Fv=function(t){return t.type!==31&&t.type!==4},Zf=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},PNe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Am=function(t){return t.type===17||t.type===15},Gi=function(t){return t.type===16||Am(t)},Gee=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},hl={type:17,number:0,flags:Iw},b6={type:16,number:50,flags:Iw},O0={type:16,number:100,flags:Iw},Uy=function(t,e,r){var n=t[0],a=t[1];return[cs(n,e),cs(typeof a<"u"?a:n,r)]},cs=function(t,e){if(t.type===16)return t.number/100*e;if(jw(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Kee="deg",qee="grad",zee="rad",Wee="turn",Lj={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Kee:return Math.PI*e.number/180;case qee:return Math.PI/200*e.number;case zee:return e.number;case Wee:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Xee=function(t){return t.type===15&&(t.unit===Kee||t.unit===qee||t.unit===zee||t.unit===Wee)},Yee=function(t){var e=t.filter(Wa).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[hl,hl];case"to top":case"bottom":return sd(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[hl,O0];case"to right":case"left":return sd(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[O0,O0];case"to bottom":case"top":return sd(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[O0,hl];case"to left":case"right":return sd(270)}return 0},sd=function(t){return Math.PI*t/180},Z0={name:"color",parse:function(t,e){if(e.type===18){var r=BNe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return D0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),o=e.value.substring(3,4);return D0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return D0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return D0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(o,16)/255)}}if(e.type===20){var l=Kh[e.value.toUpperCase()];if(typeof l<"u")return l}return Kh.TRANSPARENT}},em=function(t){return(255&t)===0},Io=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},D0=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},F9=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},O9=function(t,e){var r=e.filter(Fv);if(r.length===3){var n=r.map(F9),a=n[0],s=n[1],o=n[2];return D0(a,s,o,1)}if(r.length===4){var l=r.map(F9),a=l[0],s=l[1],o=l[2],c=l[3];return D0(a,s,o,c)}return 0};function E3(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var D9=function(t,e){var r=e.filter(Fv),n=r[0],a=r[1],s=r[2],o=r[3],l=(n.type===17?sd(n.number):Lj.parse(t,n))/(Math.PI*2),c=Gi(a)?a.number/100:0,u=Gi(s)?s.number/100:0,d=typeof o<"u"&&Gi(o)?cs(o,1):1;if(c===0)return D0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,A=u*2-f,h=E3(A,f,l+1/3),m=E3(A,f,l),p=E3(A,f,l-1/3);return D0(h*255,m*255,p*255,d)},BNe={hsl:D9,hsla:D9,rgb:O9,rgba:O9},mb=function(t,e){return Z0.parse(t,Hee.create(e).parseComponentValue())},Kh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},TNe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},kNe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Uj=function(t,e){var r=Z0.parse(t,e[0]),n=e[1];return n&&Gi(n)?{color:r,stop:n}:{color:r,stop:null}},R9=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=hl),n.stop===null&&(n.stop=O0);for(var a=[],s=0,o=0;o<t.length;o++){var l=t[o].stop;if(l!==null){var c=cs(l,e);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var d=a[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var f=o-u,A=a[u-1],h=(d-A)/(f+1),m=1;m<=f;m++)a[u+m-1]=h*m;u=null}}return t.map(function(p,g){var v=p.color;return{color:v,stop:Math.max(Math.min(1,a[g]/e),0)}})},FNe=function(t,e,r){var n=e/2,a=r/2,s=cs(t[0],e)-n,o=a-cs(t[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},ONe=function(t,e,r){var n=typeof t=="number"?t:FNe(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,o=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,o-c,o+c]},Ld=function(t,e){return Math.sqrt(t*t+e*e)},M9=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(o,l){var c=l[0],u=l[1],d=Ld(r-c,n-u);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},DNe=function(t,e,r,n,a){var s=0,o=0;switch(t.size){case 0:t.shape===0?s=o=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=o=Math.min(Ld(e,r),Ld(e,r-a),Ld(e-n,r),Ld(e-n,r-a));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),c=M9(n,a,e,r,!0),u=c[0],d=c[1];s=Ld(u-e,(d-r)/l),o=l*s}break;case 1:t.shape===0?s=o=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=o=Math.max(Ld(e,r),Ld(e,r-a),Ld(e-n,r),Ld(e-n,r-a));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),f=M9(n,a,e,r,!1),u=f[0],d=f[1];s=Ld(u-e,(d-r)/l),o=l*s}break}return Array.isArray(t.size)&&(s=cs(t.size[0],n),o=t.size.length===2?cs(t.size[1],a):s),[s,o]},RNe=function(t,e){var r=sd(180),n=[];return Zf(e).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&o.value==="to"){r=Yee(a);return}else if(Xee(o)){r=Lj.parse(t,o);return}}var l=Uj(t,a);n.push(l)}),{angle:r,stops:n,type:1}},mC=function(t,e){var r=sd(180),n=[];return Zf(e).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=Yee(a);return}else if(Xee(o)){r=(Lj.parse(t,o)+sd(270))%sd(360);return}}var l=Uj(t,a);n.push(l)}),{angle:r,stops:n,type:1}},MNe=function(t,e){var r=sd(180),n=[],a=1,s=0,o=3,l=[];return Zf(e).forEach(function(c,u){var d=c[0];if(u===0){if(Wa(d)&&d.value==="linear"){a=1;return}else if(Wa(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=Z0.parse(t,d.values[0]);n.push({stop:hl,color:f})}else if(d.name==="to"){var f=Z0.parse(t,d.values[0]);n.push({stop:O0,color:f})}else if(d.name==="color-stop"){var A=d.values.filter(Fv);if(A.length===2){var f=Z0.parse(t,A[1]),h=A[0];d1(h)&&n.push({stop:{type:16,number:h.number*100,flags:h.flags},color:f})}}}}),a===1?{angle:(r+sd(180))%sd(360),stops:n,type:a}:{size:o,shape:s,stops:n,position:l,type:a}},Jee="closest-side",Zee="farthest-side",ete="closest-corner",tte="farthest-corner",rte="circle",nte="ellipse",ate="cover",ste="contain",LNe=function(t,e){var r=0,n=3,a=[],s=[];return Zf(e).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(f,A){if(u)if(Wa(A))switch(A.value){case"center":return s.push(b6),f;case"top":case"left":return s.push(hl),f;case"right":case"bottom":return s.push(O0),f}else(Gi(A)||Am(A))&&s.push(A);else if(Wa(A))switch(A.value){case rte:return r=0,!1;case nte:return r=1,!1;case"at":return u=!0,!1;case Jee:return n=0,!1;case ate:case Zee:return n=1,!1;case ste:case ete:return n=2,!1;case tte:return n=3,!1}else if(Am(A)||Gi(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return f},c)}if(c){var d=Uj(t,o);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},pC=function(t,e){var r=0,n=3,a=[],s=[];return Zf(e).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,f){if(Wa(f))switch(f.value){case"center":return s.push(b6),!1;case"top":case"left":return s.push(hl),!1;case"right":case"bottom":return s.push(O0),!1}else if(Gi(f)||Am(f))return s.push(f),!1;return d},c):l===1&&(c=o.reduce(function(d,f){if(Wa(f))switch(f.value){case rte:return r=0,!1;case nte:return r=1,!1;case ste:case Jee:return n=0,!1;case Zee:return n=1,!1;case ete:return n=2,!1;case ate:case tte:return n=3,!1}else if(Am(f)||Gi(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=Uj(t,o);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},UNe=function(t){return t.type===1},QNe=function(t){return t.type===2},w6={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=ite[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function VNe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!ite[t.name])}var ite={"linear-gradient":RNe,"-moz-linear-gradient":mC,"-ms-linear-gradient":mC,"-o-linear-gradient":mC,"-webkit-linear-gradient":mC,"radial-gradient":LNe,"-moz-radial-gradient":pC,"-ms-radial-gradient":pC,"-o-radial-gradient":pC,"-webkit-radial-gradient":pC,"-webkit-gradient":MNe},HNe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Fv(n)&&VNe(n)}).map(function(n){return w6.parse(t,n)})}},$Ne={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},GNe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Zf(e).map(function(r){return r.filter(Gi)}).map(Gee)}},KNe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Zf(e).map(function(r){return r.filter(Wa).map(function(n){return n.value}).join(" ")}).map(qNe)}},qNe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},cv;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(cv||(cv={}));var zNe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Zf(e).map(function(r){return r.filter(WNe)})}},WNe=function(t){return Wa(t)||Gi(t)},Qj=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},XNe=Qj("top"),YNe=Qj("right"),JNe=Qj("bottom"),ZNe=Qj("left"),Vj=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return Gee(r.filter(Gi))}}},eCe=Vj("top-left"),tCe=Vj("top-right"),rCe=Vj("bottom-right"),nCe=Vj("bottom-left"),Hj=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},aCe=Hj("top"),sCe=Hj("right"),iCe=Hj("bottom"),oCe=Hj("left"),$j=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return jw(r)?r.number:0}}},lCe=$j("top"),cCe=$j("right"),uCe=$j("bottom"),dCe=$j("left"),fCe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},hCe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},ACe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Wa).reduce(function(r,n){return r|mCe(n.value)},0)}},mCe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},pCe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},gCe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},AS;(function(t){t.NORMAL="normal",t.STRICT="strict"})(AS||(AS={}));var xCe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return AS.STRICT;case"normal":default:return AS.NORMAL}}},vCe={name:"line-height",initialValue:"normal",prefix:!1,type:4},L9=function(t,e){return Wa(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Gi(t)?cs(t,e):e},yCe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:w6.parse(t,e)}},bCe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},fk={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Gj=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},wCe=Gj("top"),NCe=Gj("right"),CCe=Gj("bottom"),_Ce=Gj("left"),ECe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Wa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},SCe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Kj=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},ICe=Kj("top"),jCe=Kj("right"),PCe=Kj("bottom"),BCe=Kj("left"),TCe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},kCe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},FCe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&dk(e[0],"none")?[]:Zf(e).map(function(r){for(var n={color:Kh.TRANSPARENT,offsetX:hl,offsetY:hl,blur:hl},a=0,s=0;s<r.length;s++){var o=r[s];Am(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=Z0.parse(t,o)}return n})}},OCe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},DCe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=LCe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},RCe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},MCe=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,a,s,o,l]:null},LCe={matrix:RCe,matrix3d:MCe},U9={type:16,number:50,flags:Iw},UCe=[U9,U9],QCe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Gi);return r.length!==2?UCe:[r[0],r[1]]}},VCe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},pb;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(pb||(pb={}));var HCe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return pb.BREAK_ALL;case"keep-all":return pb.KEEP_ALL;case"normal":default:return pb.NORMAL}}},$Ce={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(d1(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},ote={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},GCe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return d1(e)?e.number:1}},KCe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qCe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Wa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},zCe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},WCe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},XCe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(d1(e))return e.number;if(Wa(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},YCe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Wa).map(function(r){return r.value})}},JCe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ho=function(t,e){return(t&e)!==0},ZCe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},e_e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter($ee),s=0;s<a.length;s++){var o=a[s],l=a[s+1];if(o.type===20){var c=l&&d1(l)?l.number:1;n.push({counter:o.value,increment:c})}}return n}},t_e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter($ee),a=0;a<n.length;a++){var s=n[a],o=n[a+1];if(Wa(s)&&s.value!=="none"){var l=o&&d1(o)?o.number:0;r.push({counter:s.value,reset:l})}}return r}},r_e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(jw).map(function(r){return ote.parse(t,r)})}},n_e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(jNe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var o=a[s].value,l=a[s+1].value;n.push({open:o,close:l})}return n}},Q9=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},a_e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&dk(e[0],"none")?[]:Zf(e).map(function(r){for(var n={color:255,offsetX:hl,offsetY:hl,blur:hl,spread:hl,inset:!1},a=0,s=0;s<r.length;s++){var o=r[s];dk(o,"inset")?n.inset=!0:Am(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=Z0.parse(t,o)}return n})}},s_e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Wa).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},i_e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},o_e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return jw(e)?e.number:0}},l_e=function(){function t(e,r){var n,a;this.animationDuration=Hr(e,r_e,r.animationDuration),this.backgroundClip=Hr(e,TNe,r.backgroundClip),this.backgroundColor=Hr(e,kNe,r.backgroundColor),this.backgroundImage=Hr(e,HNe,r.backgroundImage),this.backgroundOrigin=Hr(e,$Ne,r.backgroundOrigin),this.backgroundPosition=Hr(e,GNe,r.backgroundPosition),this.backgroundRepeat=Hr(e,KNe,r.backgroundRepeat),this.backgroundSize=Hr(e,zNe,r.backgroundSize),this.borderTopColor=Hr(e,XNe,r.borderTopColor),this.borderRightColor=Hr(e,YNe,r.borderRightColor),this.borderBottomColor=Hr(e,JNe,r.borderBottomColor),this.borderLeftColor=Hr(e,ZNe,r.borderLeftColor),this.borderTopLeftRadius=Hr(e,eCe,r.borderTopLeftRadius),this.borderTopRightRadius=Hr(e,tCe,r.borderTopRightRadius),this.borderBottomRightRadius=Hr(e,rCe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Hr(e,nCe,r.borderBottomLeftRadius),this.borderTopStyle=Hr(e,aCe,r.borderTopStyle),this.borderRightStyle=Hr(e,sCe,r.borderRightStyle),this.borderBottomStyle=Hr(e,iCe,r.borderBottomStyle),this.borderLeftStyle=Hr(e,oCe,r.borderLeftStyle),this.borderTopWidth=Hr(e,lCe,r.borderTopWidth),this.borderRightWidth=Hr(e,cCe,r.borderRightWidth),this.borderBottomWidth=Hr(e,uCe,r.borderBottomWidth),this.borderLeftWidth=Hr(e,dCe,r.borderLeftWidth),this.boxShadow=Hr(e,a_e,r.boxShadow),this.color=Hr(e,fCe,r.color),this.direction=Hr(e,hCe,r.direction),this.display=Hr(e,ACe,r.display),this.float=Hr(e,pCe,r.cssFloat),this.fontFamily=Hr(e,zCe,r.fontFamily),this.fontSize=Hr(e,WCe,r.fontSize),this.fontStyle=Hr(e,JCe,r.fontStyle),this.fontVariant=Hr(e,YCe,r.fontVariant),this.fontWeight=Hr(e,XCe,r.fontWeight),this.letterSpacing=Hr(e,gCe,r.letterSpacing),this.lineBreak=Hr(e,xCe,r.lineBreak),this.lineHeight=Hr(e,vCe,r.lineHeight),this.listStyleImage=Hr(e,yCe,r.listStyleImage),this.listStylePosition=Hr(e,bCe,r.listStylePosition),this.listStyleType=Hr(e,fk,r.listStyleType),this.marginTop=Hr(e,wCe,r.marginTop),this.marginRight=Hr(e,NCe,r.marginRight),this.marginBottom=Hr(e,CCe,r.marginBottom),this.marginLeft=Hr(e,_Ce,r.marginLeft),this.opacity=Hr(e,GCe,r.opacity);var s=Hr(e,ECe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Hr(e,SCe,r.overflowWrap),this.paddingTop=Hr(e,ICe,r.paddingTop),this.paddingRight=Hr(e,jCe,r.paddingRight),this.paddingBottom=Hr(e,PCe,r.paddingBottom),this.paddingLeft=Hr(e,BCe,r.paddingLeft),this.paintOrder=Hr(e,s_e,r.paintOrder),this.position=Hr(e,kCe,r.position),this.textAlign=Hr(e,TCe,r.textAlign),this.textDecorationColor=Hr(e,KCe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Hr(e,qCe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Hr(e,FCe,r.textShadow),this.textTransform=Hr(e,OCe,r.textTransform),this.transform=Hr(e,DCe,r.transform),this.transformOrigin=Hr(e,QCe,r.transformOrigin),this.visibility=Hr(e,VCe,r.visibility),this.webkitTextStrokeColor=Hr(e,i_e,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Hr(e,o_e,r.webkitTextStrokeWidth),this.wordBreak=Hr(e,HCe,r.wordBreak),this.zIndex=Hr(e,$Ce,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return em(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return ho(this.display,4)||ho(this.display,33554432)||ho(this.display,268435456)||ho(this.display,536870912)||ho(this.display,67108864)||ho(this.display,134217728)},t}(),c_e=function(){function t(e,r){this.content=Hr(e,ZCe,r.content),this.quotes=Hr(e,n_e,r.quotes)}return t}(),V9=function(){function t(e,r){this.counterIncrement=Hr(e,e_e,r.counterIncrement),this.counterReset=Hr(e,t_e,r.counterReset)}return t}(),Hr=function(t,e,r){var n=new Vee,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new Hee(n.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(t,Wa(o)?o.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Lj.parse(t,s.parseComponentValue());case"color":return Z0.parse(t,s.parseComponentValue());case"image":return w6.parse(t,s.parseComponentValue());case"length":var l=s.parseComponentValue();return Am(l)?l:hl;case"length-percentage":var c=s.parseComponentValue();return Gi(c)?c:hl;case"time":return ote.parse(t,s.parseComponentValue())}break}},u_e="data-html2canvas-debug",d_e=function(t){var e=t.getAttribute(u_e);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},hk=function(t,e){var r=d_e(t);return r===1||e===r},eh=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,hk(r,3))debugger;this.styles=new l_e(e,window.getComputedStyle(r,null)),pk(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Rj(this.context,r),hk(r,4)&&(this.flags|=16)}return t}(),f_e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",H9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gC=0;gC<H9.length;gC++)Qy[H9.charCodeAt(gC)]=gC;var h_e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Qy[t.charCodeAt(n)],o=Qy[t.charCodeAt(n+1)],l=Qy[t.charCodeAt(n+2)],c=Qy[t.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},A_e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},m_e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Ip=5,N6=11,S3=2,p_e=N6-Ip,lte=65536>>Ip,g_e=1<<Ip,I3=g_e-1,x_e=1024>>Ip,v_e=lte+x_e,y_e=v_e,b_e=32,w_e=y_e+b_e,N_e=65536>>N6,C_e=1<<p_e,__e=C_e-1,$9=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},E_e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},S_e=function(t,e){var r=h_e(t),n=Array.isArray(r)?m_e(r):new Uint32Array(r),a=Array.isArray(r)?A_e(r):new Uint16Array(r),s=24,o=$9(a,s/2,n[4]/2),l=n[5]===2?$9(a,(s+n[4])/2):E_e(n,Math.ceil((s+n[4])/4));return new I_e(n[0],n[1],n[2],n[3],o,l)},I_e=function(){function t(e,r,n,a,s,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Ip],r=(r<<S3)+(e&I3),this.data[r];if(e<=65535)return r=this.index[lte+(e-55296>>Ip)],r=(r<<S3)+(e&I3),this.data[r];if(e<this.highStart)return r=w_e-N_e+(e>>N6),r=this.index[r],r+=e>>Ip&__e,r=this.index[r],r=(r<<S3)+(e&I3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),G9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j_e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xC=0;xC<G9.length;xC++)j_e[G9.charCodeAt(xC)]=xC;var P_e=1,j3=2,P3=3,K9=4,q9=5,B_e=7,z9=8,B3=9,T3=10,W9=11,X9=12,Y9=13,J9=14,k3=15,T_e=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},k_e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=t[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},F_e=S_e(f_e),Yu="",F3="",O_e=function(t){return F_e.get(t)},D_e=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],o=e[r];if(s===j3&&o===P3)return Yu;if(s===j3||s===P3||s===K9||o===j3||o===P3||o===K9)return F3;if(s===z9&&[z9,B3,W9,X9].indexOf(o)!==-1||(s===W9||s===B3)&&(o===B3||o===T3)||(s===X9||s===T3)&&o===T3||o===Y9||o===q9||o===B_e||s===P_e)return Yu;if(s===Y9&&o===J9){for(;a===q9;)a=e[--n];if(a===J9)return Yu}if(s===k3&&o===k3){for(var l=0;a===k3;)l++,a=e[--n];if(l%2===0)return Yu}return F3},R_e=function(t){var e=T_e(t),r=e.length,n=0,a=0,s=e.map(O_e);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=Yu;n<r&&(o=D_e(e,s,++n))===Yu;);if(o!==Yu||n===r){var l=k_e.apply(null,e.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},M_e=function(t){for(var e=R_e(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},L_e=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},U_e=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=Mj(n.data).map(function(c){return Si(c)}),s=0,o={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,u===0?!0:f});return t.body.removeChild(e),l},Q_e=function(){return typeof new Image().crossOrigin<"u"},V_e=function(){return typeof new XMLHttpRequest().responseType=="string"},H_e=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},Z9=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},$_e=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var o=Ak(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),eQ(o).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",Z9(c)?eQ(Ak(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),Z9(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},Ak=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},eQ=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ol={get SUPPORT_RANGE_BOUNDS(){var t=L_e(document);return Object.defineProperty(ol,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ol.SUPPORT_RANGE_BOUNDS&&U_e(document);return Object.defineProperty(ol,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=H_e(document);return Object.defineProperty(ol,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?$_e(document):Promise.resolve(!1);return Object.defineProperty(ol,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Q_e();return Object.defineProperty(ol,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=V_e();return Object.defineProperty(ol,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ol,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ol,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},gb=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),G_e=function(t,e,r,n){var a=z_e(e,r),s=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(ol.SUPPORT_RANGE_BOUNDS){var c=tQ(n,o,l.length).getClientRects();if(c.length>1){var u=C6(l),d=0;u.forEach(function(A){s.push(new gb(A,iA.fromDOMRectList(t,tQ(n,d+o,A.length).getClientRects()))),d+=A.length})}else s.push(new gb(l,iA.fromDOMRectList(t,c)))}else{var f=n.splitText(l.length);s.push(new gb(l,K_e(t,n))),n=f}else ol.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),s},K_e=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=Rj(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return iA.EMPTY},tQ=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},C6=function(t){if(ol.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return M_e(t)},q_e=function(t,e){if(ol.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return X_e(t,e)},z_e=function(t,e){return e.letterSpacing!==0?C6(t):q_e(t,e)},W_e=[32,160,4961,65792,65793,4153,4241],X_e=function(t,e){for(var r=Nwe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var o=a.value.slice(),l=Mj(o),c="";l.forEach(function(u){W_e.indexOf(u)===-1?c+=Si(u):(c.length&&n.push(c),n.push(Si(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},Y_e=function(){function t(e,r,n){this.text=J_e(r.data,n.textTransform),this.textBounds=G_e(e,this.text,n,r)}return t}(),J_e=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Z_e,eEe);case 2:return t.toUpperCase();default:return t}},Z_e=/(^|\s|:|-|\(|\))([a-z])/g,eEe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},cte=function(t){ff(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(eh),ute=function(t){ff(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(eh),dte=function(t){ff(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,o=Rj(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(eh),fte=function(t){ff(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(eh),mk=function(t){ff(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(eh),tEe=[{type:15,flags:0,unit:"px",number:3}],rEe=[{type:16,flags:0,number:50}],nEe=function(t){return t.width>t.height?new iA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new iA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},aEe=function(t){var e=t.type===sEe?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},mS="checkbox",pS="radio",sEe="password",rQ=707406591,_6=function(t){ff(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=aEe(n),(a.type===mS||a.type===pS)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=nEe(a.bounds)),a.type){case mS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=tEe;break;case pS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=rEe;break}return a}return e}(eh),hte=function(t){ff(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(eh),Ate=function(t){ff(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(eh),mte=function(t){ff(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=gte(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?mb(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Kh.TRANSPARENT,o=n.contentWindow.document.body?mb(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Kh.TRANSPARENT;a.backgroundColor=em(s)?em(o)?a.styles.backgroundColor:o:s}}catch{}return a}return e}(eh),iEe=["OL","UL","MENU"],aE=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,xte(a)&&a.data.trim().length>0)r.textNodes.push(new Y_e(t,a,r.styles));else if($x(a))if(wte(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return aE(t,l,r,n)});else{var o=pte(t,a);o.styles.isVisible()&&(oEe(a,o,n)?o.flags|=4:lEe(o.styles)&&(o.flags|=2),iEe.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?aE(t,a.shadowRoot,o,n):!gS(a)&&!vte(a)&&!xS(a)&&aE(t,a,o,n))}},pte=function(t,e){return gk(e)?new cte(t,e):yte(e)?new ute(t,e):vte(e)?new dte(t,e):cEe(e)?new fte(t,e):uEe(e)?new mk(t,e):dEe(e)?new _6(t,e):xS(e)?new hte(t,e):gS(e)?new Ate(t,e):bte(e)?new mte(t,e):new eh(t,e)},gte=function(t,e){var r=pte(t,e);return r.flags|=4,aE(t,e,r,r),r},oEe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||E6(t)&&r.styles.isTransparent()},lEe=function(t){return t.isPositioned()||t.isFloating()},xte=function(t){return t.nodeType===Node.TEXT_NODE},$x=function(t){return t.nodeType===Node.ELEMENT_NODE},pk=function(t){return $x(t)&&typeof t.style<"u"&&!sE(t)},sE=function(t){return typeof t.className=="object"},cEe=function(t){return t.tagName==="LI"},uEe=function(t){return t.tagName==="OL"},dEe=function(t){return t.tagName==="INPUT"},fEe=function(t){return t.tagName==="HTML"},vte=function(t){return t.tagName==="svg"},E6=function(t){return t.tagName==="BODY"},yte=function(t){return t.tagName==="CANVAS"},nQ=function(t){return t.tagName==="VIDEO"},gk=function(t){return t.tagName==="IMG"},bte=function(t){return t.tagName==="IFRAME"},aQ=function(t){return t.tagName==="STYLE"},hEe=function(t){return t.tagName==="SCRIPT"},gS=function(t){return t.tagName==="TEXTAREA"},xS=function(t){return t.tagName==="SELECT"},wte=function(t){return t.tagName==="SLOT"},sQ=function(t){return t.tagName.indexOf("-")>0},AEe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},t}(),iQ={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},oQ={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},mEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},pEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},tx=function(t,e,r,n,a,s){return t<e||t>r?y2(t,a,s.length>0):n.integers.reduce(function(o,l,c){for(;t>=l;)t-=l,o+=n.values[c];return o},"")+s},Nte=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},Ni=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(Nte(Math.abs(t),s,n,function(o){return Si(Math.floor(o%s)+e)})+a)},Hm=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return Nte(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},_x=1,f0=2,h0=4,Vy=8,hh=function(t,e,r,n,a,s){if(t<-9999||t>9999)return y2(t,4,a.length>0);var o=Math.abs(t),l=a;if(o===0)return e[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&ho(s,_x)&&l!==""?l=e[u]+l:u>1||u===1&&c===0||u===1&&c===1&&ho(s,f0)||u===1&&c===1&&ho(s,h0)&&t>100||u===1&&c>1&&ho(s,Vy)?l=e[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(t<0?n:"")+l},lQ="",cQ="",uQ="",O3="",y2=function(t,e,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",o=r?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=Ni(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return Hm(t,"",a);case 6:return tx(t,1,3999,iQ,3,n).toLowerCase();case 7:return tx(t,1,3999,iQ,3,n);case 8:return Ni(t,945,969,!1,n);case 9:return Ni(t,97,122,!1,n);case 10:return Ni(t,65,90,!1,n);case 11:return Ni(t,1632,1641,!0,n);case 12:case 49:return tx(t,1,9999,oQ,3,n);case 35:return tx(t,1,9999,oQ,3,n).toLowerCase();case 13:return Ni(t,2534,2543,!0,n);case 14:case 30:return Ni(t,6112,6121,!0,n);case 15:return Hm(t,"",a);case 16:return Hm(t,"",a);case 17:case 48:return hh(t,"",lQ,"",a,f0|h0|Vy);case 47:return hh(t,"",cQ,"",a,_x|f0|h0|Vy);case 42:return hh(t,"",lQ,"",a,f0|h0|Vy);case 41:return hh(t,"",cQ,"",a,_x|f0|h0|Vy);case 26:return hh(t,"","",uQ,a,0);case 25:return hh(t,"","",uQ,a,_x|f0|h0);case 31:return hh(t,"","",O3,s,_x|f0|h0);case 33:return hh(t,"","",O3,s,0);case 32:return hh(t,"","",O3,s,_x|f0|h0);case 18:return Ni(t,2406,2415,!0,n);case 20:return tx(t,1,19999,pEe,3,n);case 21:return Ni(t,2790,2799,!0,n);case 22:return Ni(t,2662,2671,!0,n);case 22:return tx(t,1,10999,mEe,3,n);case 23:return Hm(t,"");case 24:return Hm(t,"");case 27:return Ni(t,3302,3311,!0,n);case 28:return Hm(t,"",a);case 29:return Hm(t,"",a);case 34:return Ni(t,3792,3801,!0,n);case 37:return Ni(t,6160,6169,!0,n);case 38:return Ni(t,4160,4169,!0,n);case 39:return Ni(t,2918,2927,!0,n);case 40:return Ni(t,1776,1785,!0,n);case 43:return Ni(t,3046,3055,!0,n);case 44:return Ni(t,3174,3183,!0,n);case 45:return Ni(t,3664,3673,!0,n);case 46:return Ni(t,3872,3881,!0,n);case 3:default:return Ni(t,48,57,!0,n)}},Cte="data-html2canvas-ignore",dQ=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new AEe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=gEe(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=yEe(a).then(function(){return nc(n,void 0,void 0,function(){var d,f;return kl(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(CEe),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,vEe(c)]:[3,4];case 3:A.sent(),A.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(wEe(document.doctype)+"<html></html>"),NEe(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(hk(e,2))debugger;if(yte(e))return this.createCanvasClone(e);if(nQ(e))return this.createVideoClone(e);if(aQ(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return gk(r)&&(gk(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),sQ(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return D3(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!$x(r)||!hEe(r)&&!r.hasAttribute(Cte)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!$x(r)||!aQ(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if($x(s)&&wte(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(xte(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&$x(e)&&(pk(e)||sE(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),o=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&pk(a)&&(this.clonedReferenceElement=a),E6(a)&&SEe(a);var c=this.counters.parse(new V9(this.context,s)),u=this.resolvePseudoContent(e,a,o,xb.BEFORE);sQ(e)&&(r=!0),nQ(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,l,xb.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||sE(e))&&!bte(e)||r)&&D3(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(gS(e)||xS(e))&&(gS(a)||xS(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new V9(this.context,n));var c=new c_e(this.context,n),u=l.createElement("html2canvaspseudoelement");D3(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var A=l.createElement("img");A.src=f.value,A.style.opacity="1",u.appendChild(A)}else if(f.type===18){if(f.name==="attr"){var h=f.values.filter(Wa);h.length&&u.appendChild(l.createTextNode(e.getAttribute(h[0].value)||""))}else if(f.name==="counter"){var m=f.values.filter(Fv),p=m[0],g=m[1];if(p&&Wa(p)){var v=s.counters.getCounterValue(p.value),y=g&&Wa(g)?fk.parse(s.context,g.value):3;u.appendChild(l.createTextNode(y2(v,y,!1)))}}else if(f.name==="counters"){var b=f.values.filter(Fv),p=b[0],w=b[1],g=b[2];if(p&&Wa(p)){var P=s.counters.getCounterValues(p.value),j=g&&Wa(g)?fk.parse(s.context,g.value):3,_=w&&w.type===0?w.value:"",I=P.map(function(k){return y2(k,j,!1)}).join(_);u.appendChild(l.createTextNode(I))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(Q9(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(Q9(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=xk+" "+vk;var d=a===xb.BEFORE?" "+xk:" "+vk;return sE(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),xb;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(xb||(xb={}));var gEe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(Cte,"true"),t.body.appendChild(r),r},xEe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},vEe=function(t){return Promise.all([].slice.call(t.images,0).map(xEe))},yEe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},bEe=["all","d","content"],D3=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);bEe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},wEe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},NEe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},CEe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},_Ee=":before",EEe=":after",xk="___html2canvas___pseudoelement_before",vk="___html2canvas___pseudoelement_after",fQ=`{
    content: "" !important;
    display: none !important;
}`,SEe=function(t){IEe(t,"."+xk+_Ee+fQ+`
         .`+vk+EEe+fQ)},IEe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},_te=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),jEe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(M3(e)||kEe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return nc(this,void 0,void 0,function(){var r,n,a,s,o=this;return kl(this,function(l){switch(l.label){case 0:return r=_te.isSameOrigin(e),n=!R3(e)&&this._options.useCORS===!0&&ol.SUPPORT_CORS_IMAGES&&!r,a=!R3(e)&&!r&&!M3(e)&&typeof this._options.proxy=="string"&&ol.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!R3(e)&&!M3(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(FEe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,o){var l=ol.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(A){return o(A)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}c.send()})},t}(),PEe=/^data:image\/svg\+xml/i,BEe=/^data:image\/.*;base64,/i,TEe=/^data:image\/.*/i,kEe=function(t){return ol.SUPPORT_SVG_DRAWING||!OEe(t)},R3=function(t){return TEe.test(t)},FEe=function(t){return BEe.test(t)},M3=function(t){return t.substr(0,4)==="blob"},OEe=function(t){return t.substr(-3).toLowerCase()==="svg"||PEe.test(t)},Ur=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),rx=function(t,e,r){return new Ur(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},vC=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=rx(this.start,this.startControl,e),a=rx(this.startControl,this.endControl,e),s=rx(this.endControl,this.end,e),o=rx(n,a,e),l=rx(a,s,e),c=rx(o,l,e);return r?new t(this.start,n,o,c):new t(c,l,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),rd=function(t){return t.type===1},DEe=function(){function t(e){var r=e.styles,n=e.bounds,a=Uy(r.borderTopLeftRadius,n.width,n.height),s=a[0],o=a[1],l=Uy(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=Uy(r.borderBottomRightRadius,n.width,n.height),f=d[0],A=d[1],h=Uy(r.borderBottomLeftRadius,n.width,n.height),m=h[0],p=h[1],g=[];g.push((s+c)/n.width),g.push((m+f)/n.width),g.push((o+p)/n.height),g.push((u+A)/n.height);var v=Math.max.apply(Math,g);v>1&&(s/=v,o/=v,c/=v,u/=v,f/=v,A/=v,m/=v,p/=v);var y=n.width-c,b=n.height-A,w=n.width-f,P=n.height-p,j=r.borderTopWidth,_=r.borderRightWidth,I=r.borderBottomWidth,E=r.borderLeftWidth,F=cs(r.paddingTop,e.bounds.width),k=cs(r.paddingRight,e.bounds.width),B=cs(r.paddingBottom,e.bounds.width),R=cs(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?_s(n.left+E/3,n.top+j/3,s-E/3,o-j/3,ja.TOP_LEFT):new Ur(n.left+E/3,n.top+j/3),this.topRightBorderDoubleOuterBox=s>0||o>0?_s(n.left+y,n.top+j/3,c-_/3,u-j/3,ja.TOP_RIGHT):new Ur(n.left+n.width-_/3,n.top+j/3),this.bottomRightBorderDoubleOuterBox=f>0||A>0?_s(n.left+w,n.top+b,f-_/3,A-I/3,ja.BOTTOM_RIGHT):new Ur(n.left+n.width-_/3,n.top+n.height-I/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?_s(n.left+E/3,n.top+P,m-E/3,p-I/3,ja.BOTTOM_LEFT):new Ur(n.left+E/3,n.top+n.height-I/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?_s(n.left+E*2/3,n.top+j*2/3,s-E*2/3,o-j*2/3,ja.TOP_LEFT):new Ur(n.left+E*2/3,n.top+j*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?_s(n.left+y,n.top+j*2/3,c-_*2/3,u-j*2/3,ja.TOP_RIGHT):new Ur(n.left+n.width-_*2/3,n.top+j*2/3),this.bottomRightBorderDoubleInnerBox=f>0||A>0?_s(n.left+w,n.top+b,f-_*2/3,A-I*2/3,ja.BOTTOM_RIGHT):new Ur(n.left+n.width-_*2/3,n.top+n.height-I*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?_s(n.left+E*2/3,n.top+P,m-E*2/3,p-I*2/3,ja.BOTTOM_LEFT):new Ur(n.left+E*2/3,n.top+n.height-I*2/3),this.topLeftBorderStroke=s>0||o>0?_s(n.left+E/2,n.top+j/2,s-E/2,o-j/2,ja.TOP_LEFT):new Ur(n.left+E/2,n.top+j/2),this.topRightBorderStroke=s>0||o>0?_s(n.left+y,n.top+j/2,c-_/2,u-j/2,ja.TOP_RIGHT):new Ur(n.left+n.width-_/2,n.top+j/2),this.bottomRightBorderStroke=f>0||A>0?_s(n.left+w,n.top+b,f-_/2,A-I/2,ja.BOTTOM_RIGHT):new Ur(n.left+n.width-_/2,n.top+n.height-I/2),this.bottomLeftBorderStroke=m>0||p>0?_s(n.left+E/2,n.top+P,m-E/2,p-I/2,ja.BOTTOM_LEFT):new Ur(n.left+E/2,n.top+n.height-I/2),this.topLeftBorderBox=s>0||o>0?_s(n.left,n.top,s,o,ja.TOP_LEFT):new Ur(n.left,n.top),this.topRightBorderBox=c>0||u>0?_s(n.left+y,n.top,c,u,ja.TOP_RIGHT):new Ur(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||A>0?_s(n.left+w,n.top+b,f,A,ja.BOTTOM_RIGHT):new Ur(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?_s(n.left,n.top+P,m,p,ja.BOTTOM_LEFT):new Ur(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?_s(n.left+E,n.top+j,Math.max(0,s-E),Math.max(0,o-j),ja.TOP_LEFT):new Ur(n.left+E,n.top+j),this.topRightPaddingBox=c>0||u>0?_s(n.left+Math.min(y,n.width-_),n.top+j,y>n.width+_?0:Math.max(0,c-_),Math.max(0,u-j),ja.TOP_RIGHT):new Ur(n.left+n.width-_,n.top+j),this.bottomRightPaddingBox=f>0||A>0?_s(n.left+Math.min(w,n.width-E),n.top+Math.min(b,n.height-I),Math.max(0,f-_),Math.max(0,A-I),ja.BOTTOM_RIGHT):new Ur(n.left+n.width-_,n.top+n.height-I),this.bottomLeftPaddingBox=m>0||p>0?_s(n.left+E,n.top+Math.min(P,n.height-I),Math.max(0,m-E),Math.max(0,p-I),ja.BOTTOM_LEFT):new Ur(n.left+E,n.top+n.height-I),this.topLeftContentBox=s>0||o>0?_s(n.left+E+R,n.top+j+F,Math.max(0,s-(E+R)),Math.max(0,o-(j+F)),ja.TOP_LEFT):new Ur(n.left+E+R,n.top+j+F),this.topRightContentBox=c>0||u>0?_s(n.left+Math.min(y,n.width+E+R),n.top+j+F,y>n.width+E+R?0:c-E+R,u-(j+F),ja.TOP_RIGHT):new Ur(n.left+n.width-(_+k),n.top+j+F),this.bottomRightContentBox=f>0||A>0?_s(n.left+Math.min(w,n.width-(E+R)),n.top+Math.min(b,n.height+j+F),Math.max(0,f-(_+k)),A-(I+B),ja.BOTTOM_RIGHT):new Ur(n.left+n.width-(_+k),n.top+n.height-(I+B)),this.bottomLeftContentBox=m>0||p>0?_s(n.left+E+R,n.top+P,Math.max(0,m-(E+R)),p-(I+B),ja.BOTTOM_LEFT):new Ur(n.left+E+R,n.top+n.height-(I+B))}return t}(),ja;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ja||(ja={}));var _s=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),o=r*s,l=n*s,c=t+r,u=e+n;switch(a){case ja.TOP_LEFT:return new vC(new Ur(t,u),new Ur(t,u-l),new Ur(c-o,e),new Ur(c,e));case ja.TOP_RIGHT:return new vC(new Ur(t,e),new Ur(t+o,e),new Ur(c,u-l),new Ur(c,u));case ja.BOTTOM_RIGHT:return new vC(new Ur(c,e),new Ur(c,e+l),new Ur(t+o,u),new Ur(t,u));case ja.BOTTOM_LEFT:default:return new vC(new Ur(c,u),new Ur(c-o,u),new Ur(t,e+l),new Ur(t,e))}},vS=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},REe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},yS=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},MEe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),yC=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),LEe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),UEe=function(t){return t.type===0},Ete=function(t){return t.type===1},QEe=function(t){return t.type===2},hQ=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},VEe=function(t,e,r,n,a){return t.map(function(s,o){switch(o){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},Ste=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),Ite=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new DEe(this.container),this.container.styles.opacity<1&&this.effects.push(new LEe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new MEe(n,a,s))}if(this.container.styles.overflowX!==0){var o=vS(this.curves),l=yS(this.curves);hQ(o,l)?this.effects.push(new yC(o,6)):(this.effects.push(new yC(o,2)),this.effects.push(new yC(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!Ete(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=vS(n.curves),l=yS(n.curves);hQ(o,l)||a.unshift(new yC(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return ho(c.target,e)})},t}(),yk=function(t,e,r,n){t.container.elements.forEach(function(a){var s=ho(a.flags,4),o=ho(a.flags,2),l=new Ite(a,t);ho(a.styles.display,2048)&&n.push(l);var c=ho(a.flags,8)?[]:n;if(s||o){var u=s||a.styles.isPositioned()?r:e,d=new Ste(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var A=0;u.negativeZIndex.some(function(m,p){return f>m.element.container.styles.zIndex.order?(A=p,!1):A>0}),u.negativeZIndex.splice(A,0,d)}else if(f>0){var h=0;u.positiveZIndex.some(function(m,p){return f>=m.element.container.styles.zIndex.order?(h=p+1,!1):h>0}),u.positiveZIndex.splice(h,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);yk(l,d,s?d:r,c)}else a.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),yk(l,e,r,c);ho(a.flags,8)&&jte(a,c)})},jte=function(t,e){for(var r=t instanceof mk?t.start:1,n=t instanceof mk?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof fte&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=y2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},HEe=function(t){var e=new Ite(t,null),r=new Ste(e),n=[];return yk(e,r,r,n),jte(e.container,n),r},AQ=function(t,e){switch(e){case 0:return id(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return id(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return id(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return id(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},$Ee=function(t,e){switch(e){case 0:return id(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return id(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return id(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return id(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},GEe=function(t,e){switch(e){case 0:return id(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return id(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return id(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return id(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},KEe=function(t,e){switch(e){case 0:return bC(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return bC(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return bC(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return bC(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},bC=function(t,e){var r=[];return rd(t)?r.push(t.subdivide(.5,!1)):r.push(t),rd(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},id=function(t,e,r,n){var a=[];return rd(t)?a.push(t.subdivide(.5,!1)):a.push(t),rd(r)?a.push(r.subdivide(.5,!0)):a.push(r),rd(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),rd(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},Pte=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},bS=function(t){var e=t.styles,r=t.bounds,n=cs(e.paddingLeft,r.width),a=cs(e.paddingRight,r.width),s=cs(e.paddingTop,r.width),o=cs(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+o))},qEe=function(t,e){return t===0?e.bounds:t===2?bS(e):Pte(e)},zEe=function(t,e){return t===0?e.bounds:t===2?bS(e):Pte(e)},L3=function(t,e,r){var n=qEe(Ex(t.styles.backgroundOrigin,e),t),a=zEe(Ex(t.styles.backgroundClip,e),t),s=WEe(Ex(t.styles.backgroundSize,e),r,n),o=s[0],l=s[1],c=Uy(Ex(t.styles.backgroundPosition,e),n.width-o,n.height-l),u=XEe(Ex(t.styles.backgroundRepeat,e),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,o,l]},nx=function(t){return Wa(t)&&t.value===cv.AUTO},wC=function(t){return typeof t=="number"},WEe=function(t,e,r){var n=e[0],a=e[1],s=e[2],o=t[0],l=t[1];if(!o)return[0,0];if(Gi(o)&&l&&Gi(l))return[cs(o,r.width),cs(l,r.height)];var c=wC(s);if(Wa(o)&&(o.value===cv.CONTAIN||o.value===cv.COVER)){if(wC(s)){var u=r.width/r.height;return u<s!=(o.value===cv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=wC(n),f=wC(a),A=d||f;if(nx(o)&&(!l||nx(l))){if(d&&f)return[n,a];if(!c&&!A)return[r.width,r.height];if(A&&c){var h=d?n:a*s,m=f?a:n/s;return[h,m]}var p=d?n:r.width,g=f?a:r.height;return[p,g]}if(c){var v=0,y=0;return Gi(o)?v=cs(o,r.width):Gi(l)&&(y=cs(l,r.height)),nx(o)?v=y*s:(!l||nx(l))&&(y=v/s),[v,y]}var b=null,w=null;if(Gi(o)?b=cs(o,r.width):l&&Gi(l)&&(w=cs(l,r.height)),b!==null&&(!l||nx(l))&&(w=d&&f?b/n*a:r.height),w!==null&&nx(o)&&(b=d&&f?w/a*n:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},Ex=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},XEe=function(t,e,r,n,a){var s=e[0],o=e[1],l=r[0],c=r[1];switch(t){case 2:return[new Ur(Math.round(n.left),Math.round(n.top+o)),new Ur(Math.round(n.left+n.width),Math.round(n.top+o)),new Ur(Math.round(n.left+n.width),Math.round(c+n.top+o)),new Ur(Math.round(n.left),Math.round(c+n.top+o))];case 3:return[new Ur(Math.round(n.left+s),Math.round(n.top)),new Ur(Math.round(n.left+s+l),Math.round(n.top)),new Ur(Math.round(n.left+s+l),Math.round(n.height+n.top)),new Ur(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Ur(Math.round(n.left+s),Math.round(n.top+o)),new Ur(Math.round(n.left+s+l),Math.round(n.top+o)),new Ur(Math.round(n.left+s+l),Math.round(n.top+o+c)),new Ur(Math.round(n.left+s),Math.round(n.top+o+c))];default:return[new Ur(Math.round(a.left),Math.round(a.top)),new Ur(Math.round(a.left+a.width),Math.round(a.top)),new Ur(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Ur(Math.round(a.left),Math.round(a.height+a.top))]}},YEe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",mQ="Hidden Text",JEe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=YEe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(mQ)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(mQ)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:c}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),Bte=function(){function t(e,r){this.context=e,this.options=r}return t}(),ZEe=1e4,eSe=function(t){ff(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new JEe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),QEe(r)&&(this.ctx.globalAlpha=r.opacity),UEe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),Ete(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return nc(this,void 0,void 0,function(){var n;return kl(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return nc(this,void 0,void 0,function(){return kl(this,function(n){switch(n.label){case 0:if(ho(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=C6(r.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=sSe(r.fontFamily).join(", "),s=jw(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return nc(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,A=this;return kl(this,function(h){return a=this.createFontStyle(n),s=a[0],o=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(m){f.forEach(function(p){switch(p){case 0:A.ctx.fillStyle=Io(n.color),A.renderTextWithLetterSpacing(m,n.letterSpacing,u);var g=n.textShadow;g.length&&m.text.trim().length&&(g.slice(0).reverse().forEach(function(v){A.ctx.shadowColor=Io(v.color),A.ctx.shadowOffsetX=v.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=v.offsetY.number*A.options.scale,A.ctx.shadowBlur=v.blur.number,A.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),n.textDecorationLine.length&&(A.ctx.fillStyle=Io(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(v){switch(v){case 1:A.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:A.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:A.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(A.ctx.strokeStyle=Io(n.webkitTextStrokeColor),A.ctx.lineWidth=n.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=bS(r),o=yS(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return nc(this,void 0,void 0,function(){var n,a,s,o,l,c,y,y,u,d,f,A,w,h,m,P,p,g,v,y,b,w,P;return kl(this,function(j){switch(j.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,o=0,l=n.textNodes,j.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:j.sent(),j.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof cte))return[3,8];j.label=5;case 5:return j.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=j.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return j.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof ute&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof dte))return[3,12];j.label=9;case 9:return j.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=j.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return j.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof mte&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=j.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),j.label=14;case 14:if(n instanceof _6&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===mS?n.checked&&(this.ctx.save(),this.path([new Ur(n.bounds.left+f*.39363,n.bounds.top+f*.79),new Ur(n.bounds.left+f*.16,n.bounds.top+f*.5549),new Ur(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new Ur(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new Ur(n.bounds.left+f*.72983,n.bounds.top+f*.23),new Ur(n.bounds.left+f*.84,n.bounds.top+f*.34085),new Ur(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Io(rQ),this.ctx.fill(),this.ctx.restore()):n.type===pS&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Io(rQ),this.ctx.fill(),this.ctx.restore())),tSe(n)&&n.value.length){switch(A=this.createFontStyle(s),w=A[0],h=A[1],m=this.fontMetrics.getMetrics(w,h).baseline,this.ctx.font=w,this.ctx.fillStyle=Io(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=nSe(n.styles.textAlign),P=bS(n),p=0,n.styles.textAlign){case 1:p+=P.width/2;break;case 2:p+=P.width;break}g=P.add(p,0,0,-P.height/2+1),this.ctx.save(),this.path([new Ur(P.left,P.top),new Ur(P.left+P.width,P.top),new Ur(P.left+P.width,P.top+P.height),new Ur(P.left,P.top+P.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new gb(n.value,g),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ho(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(v=n.styles.listStyleImage,v.type!==0)return[3,18];y=void 0,b=v.url,j.label=15;case 15:return j.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=j.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return j.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=Io(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",P=new iA(n.bounds.left,n.bounds.top+cs(n.styles.paddingTop,n.bounds.width),n.bounds.width,L9(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new gb(r.listValue,P),s.letterSpacing,L9(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),j.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return nc(this,void 0,void 0,function(){var n,a,v,s,o,v,l,c,v,u,d,v,f,A,v,h,m,v,p,g,v;return kl(this,function(y){switch(y.label){case 0:if(ho(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,a=r.negativeZIndex,y.label=2;case 2:return n<a.length?(v=a[n],[4,this.renderStack(v)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),s=0,o=r.nonInlineLevel,y.label=7;case 7:return s<o.length?(v=o[s],[4,this.renderNode(v)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,y.label=11;case 11:return l<c.length?(v=c[l],[4,this.renderStack(v)]):[3,14];case 12:y.sent(),y.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return u<d.length?(v=d[u],[4,this.renderStack(v)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:f=0,A=r.inlineLevel,y.label=19;case 19:return f<A.length?(v=A[f],[4,this.renderNode(v)]):[3,22];case 20:y.sent(),y.label=21;case 21:return f++,[3,19];case 22:h=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return h<m.length?(v=m[h],[4,this.renderStack(v)]):[3,26];case 24:y.sent(),y.label=25;case 25:return h++,[3,23];case 26:p=0,g=r.positiveZIndex,y.label=27;case 27:return p<g.length?(v=g[p],[4,this.renderStack(v)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var o=rd(a)?a.start:a;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),rd(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},e.prototype.renderBackgroundImage=function(r){return nc(this,void 0,void 0,function(){var n,a,s,o,l,c;return kl(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,A,h,F,pe,he,R,Y,I,m,F,pe,he,R,Y,p,g,v,y,b,w,P,j,_,I,E,F,k,B,R,Y,me,pe,he,ge,se,je,Te,D,K,z,Q;return kl(this,function(J){switch(J.label){case 0:if(d.type!==0)return[3,5];f=void 0,A=d.url,J.label=1;case 1:return J.trys.push([1,3,,4]),[4,s.context.cache.match(A)];case 2:return f=J.sent(),[3,4];case 3:return J.sent(),s.context.logger.error("Error loading background-image "+A),[3,4];case 4:return f&&(h=L3(r,n,[f.width,f.height,f.width/f.height]),F=h[0],pe=h[1],he=h[2],R=h[3],Y=h[4],I=s.ctx.createPattern(s.resizeImage(f,R,Y),"repeat"),s.renderRepeat(F,I,pe,he)),[3,6];case 5:UNe(d)?(m=L3(r,n,[null,null,null]),F=m[0],pe=m[1],he=m[2],R=m[3],Y=m[4],p=ONe(d.angle,R,Y),g=p[0],v=p[1],y=p[2],b=p[3],w=p[4],P=document.createElement("canvas"),P.width=R,P.height=Y,j=P.getContext("2d"),_=j.createLinearGradient(v,b,y,w),R9(d.stops,g).forEach(function(ee){return _.addColorStop(ee.stop,Io(ee.color))}),j.fillStyle=_,j.fillRect(0,0,R,Y),R>0&&Y>0&&(I=s.ctx.createPattern(P,"repeat"),s.renderRepeat(F,I,pe,he))):QNe(d)&&(E=L3(r,n,[null,null,null]),F=E[0],k=E[1],B=E[2],R=E[3],Y=E[4],me=d.position.length===0?[b6]:d.position,pe=cs(me[0],R),he=cs(me[me.length-1],Y),ge=DNe(d,pe,he,R,Y),se=ge[0],je=ge[1],se>0&&je>0&&(Te=s.ctx.createRadialGradient(k+pe,B+he,0,k+pe,B+he,se),R9(d.stops,se*2).forEach(function(ee){return Te.addColorStop(ee.stop,Io(ee.color))}),s.path(F),s.ctx.fillStyle=Te,se!==je?(D=r.bounds.left+.5*r.bounds.width,K=r.bounds.top+.5*r.bounds.height,z=je/se,Q=1/z,s.ctx.save(),s.ctx.translate(D,K),s.ctx.transform(1,0,0,z,0,0),s.ctx.translate(-D,-K),s.ctx.fillRect(k,Q*(B-K)+K,R,Y*Q),s.ctx.restore()):s.ctx.fill())),J.label=6;case 6:return n--,[2]}})},s=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return nc(this,void 0,void 0,function(){return kl(this,function(s){return this.path(AQ(a,n)),this.ctx.fillStyle=Io(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return nc(this,void 0,void 0,function(){var o,l;return kl(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=$Ee(s,a),this.path(o),this.ctx.fillStyle=Io(r),this.ctx.fill(),l=GEe(s,a),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return nc(this,void 0,void 0,function(){var n,a,s,o,l,c,u,d,f=this;return kl(this,function(A){switch(A.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!em(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=rSe(Ex(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),em(n.backgroundColor)||(this.ctx.fillStyle=Io(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(h){f.ctx.save();var m=vS(r.curves),p=h.inset?0:ZEe,g=VEe(m,-p+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(f.path(m),f.ctx.clip(),f.mask(g)):(f.mask(m),f.ctx.clip(),f.path(g)),f.ctx.shadowOffsetX=h.offsetX.number+p,f.ctx.shadowOffsetY=h.offsetY.number,f.ctx.shadowColor=Io(h.color),f.ctx.shadowBlur=h.blur.number,f.ctx.fillStyle=h.inset?Io(h.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),A.label=2;case 2:l=0,c=0,u=s,A.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!em(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return A.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return A.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:A.sent(),A.label=11;case 11:l++,A.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,o){return nc(this,void 0,void 0,function(){var l,c,u,d,f,A,h,m,p,g,v,y,b,w,P,j,P,j;return kl(this,function(_){return this.ctx.save(),l=KEe(s,a),c=AQ(s,a),o===2&&(this.path(c),this.ctx.clip()),rd(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),rd(c[1])?(f=c[1].end.x,A=c[1].end.y):(f=c[1].x,A=c[1].y),a===0||a===2?h=Math.abs(u-f):h=Math.abs(d-A),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,o===3&&(m=n,p=n),g=!0,h<=m*2?g=!1:h<=m*2+p?(v=h/(2*m+p),m*=v,p*=v):(y=Math.floor((h+p)/(m+p)),b=(h-y*m)/(y-1),w=(h-(y+1)*m)/y,p=w<=0||Math.abs(p-b)<Math.abs(p-w)?b:w),g&&(o===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Io(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(rd(c[0])&&(P=c[3],j=c[0],this.ctx.beginPath(),this.formatPath([new Ur(P.end.x,P.end.y),new Ur(j.start.x,j.start.y)]),this.ctx.stroke()),rd(c[1])&&(P=c[1],j=c[2],this.ctx.beginPath(),this.formatPath([new Ur(P.end.x,P.end.y),new Ur(j.start.x,j.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return nc(this,void 0,void 0,function(){var n;return kl(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Io(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=HEe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Bte),tSe=function(t){return t instanceof Ate||t instanceof hte?!0:t instanceof _6&&t.type!==pS&&t.type!==mS},rSe=function(t,e){switch(t){case 0:return vS(e);case 2:return REe(e);case 1:default:return yS(e)}},nSe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},aSe=["-apple-system","system-ui"],sSe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return aSe.indexOf(e)===-1}):t},iSe=function(t){ff(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return nc(this,void 0,void 0,function(){var n,a;return kl(this,function(s){switch(s.label){case 0:return n=Ak(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,oSe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Io(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Bte),oSe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},lSe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,eC([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,eC([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,eC([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,eC([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),cSe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new lSe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new jEe(this,e)}return t.instanceCount=1,t}(),Sg=function(t,e){return e===void 0&&(e={}),uSe(t,e)};typeof window<"u"&&_te.setContext(window);var uSe=function(t,e){return nc(void 0,void 0,void 0,function(){var r,n,a,s,o,l,c,u,d,f,A,h,m,p,g,v,y,b,w,P,_,j,_,I,E,F,k,B,R,Y,me,pe,he,ge,se,je,Te,D,K,z;return kl(this,function(Q){switch(Q.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(I=e.allowTaint)!==null&&I!==void 0?I:!1,imageTimeout:(E=e.imageTimeout)!==null&&E!==void 0?E:15e3,proxy:e.proxy,useCORS:(F=e.useCORS)!==null&&F!==void 0?F:!1},s=ZT({logging:(k=e.logging)!==null&&k!==void 0?k:!0,cache:e.cache},a),o={windowWidth:(B=e.windowWidth)!==null&&B!==void 0?B:n.innerWidth,windowHeight:(R=e.windowHeight)!==null&&R!==void 0?R:n.innerHeight,scrollX:(Y=e.scrollX)!==null&&Y!==void 0?Y:n.pageXOffset,scrollY:(me=e.scrollY)!==null&&me!==void 0?me:n.pageYOffset},l=new iA(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new cSe(s,l),u=(pe=e.foreignObjectRendering)!==null&&pe!==void 0?pe:!1,d={allowTaint:(he=e.allowTaint)!==null&&he!==void 0?he:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new dQ(c,t,d),A=f.clonedReferenceElement,A?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=Q.sent(),m=E6(A)||fEe(A)?V2e(A.ownerDocument):Rj(c,A),p=m.width,g=m.height,v=m.left,y=m.top,b=dSe(c,A,e.backgroundColor),w={canvas:e.canvas,backgroundColor:b,scale:(se=(ge=e.scale)!==null&&ge!==void 0?ge:n.devicePixelRatio)!==null&&se!==void 0?se:1,x:((je=e.x)!==null&&je!==void 0?je:0)+v,y:((Te=e.y)!==null&&Te!==void 0?Te:0)+y,width:(D=e.width)!==null&&D!==void 0?D:Math.ceil(p),height:(K=e.height)!==null&&K!==void 0?K:Math.ceil(g)},u?(c.logger.debug("Document cloned, using foreign object rendering"),_=new iSe(c,w),[4,_.render(A)]):[3,3];case 2:return P=Q.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+v+","+y+" with size "+p+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),j=gte(c,A),b===j.styles.backgroundColor&&(j.styles.backgroundColor=Kh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),_=new eSe(c,w),[4,_.render(j)];case 4:P=Q.sent(),Q.label=5;case 5:return(!((z=e.removeContainer)!==null&&z!==void 0)||z)&&(dQ.destroy(h)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,P]}})})},dSe=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?mb(t,getComputedStyle(n.documentElement).backgroundColor):Kh.TRANSPARENT,s=n.body?mb(t,getComputedStyle(n.body).backgroundColor):Kh.TRANSPARENT,o=typeof r=="string"?mb(t,r):r===null?Kh.TRANSPARENT:4294967295;return e===n.documentElement?em(a)?em(s)?o:s:a:o};const S6=Object.freeze(Object.defineProperty({__proto__:null,default:Sg},Symbol.toStringTag,{value:"Module"})),fSe="modulepreload",hSe=function(t){return"/"+t},pQ={},qh=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=hSe(c),c in pQ)return;pQ[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":fSe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((A,h)=>{f.addEventListener("load",A),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function Qa(t){"@babel/helpers - typeof";return Qa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qa(t)}var lf=Uint8Array,mu=Uint16Array,I6=Int32Array,j6=new lf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),P6=new lf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gQ=new lf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tte=function(t,e){for(var r=new mu(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new I6(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},kte=Tte(j6,2),ASe=kte.b,bk=kte.r;ASe[28]=258,bk[258]=28;var mSe=Tte(P6,0),xQ=mSe.r,wk=new mu(32768);for(var ys=0;ys<32768;++ys){var t0=(ys&43690)>>1|(ys&21845)<<1;t0=(t0&52428)>>2|(t0&13107)<<2,t0=(t0&61680)>>4|(t0&3855)<<4,wk[ys]=((t0&65280)>>8|(t0&255)<<8)>>1}var vb=function(t,e,r){for(var n=t.length,a=0,s=new mu(e);a<n;++a)t[a]&&++s[t[a]-1];var o=new mu(e);for(a=1;a<e;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new mu(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],f=o[t[a]-1]++<<d,A=f|(1<<d)-1;f<=A;++f)l[wk[f]>>c]=u}else for(l=new mu(n),a=0;a<n;++a)t[a]&&(l[a]=wk[o[t[a]-1]++]>>15-t[a]);return l},ng=new lf(288);for(var ys=0;ys<144;++ys)ng[ys]=8;for(var ys=144;ys<256;++ys)ng[ys]=9;for(var ys=256;ys<280;++ys)ng[ys]=7;for(var ys=280;ys<288;++ys)ng[ys]=8;var wS=new lf(32);for(var ys=0;ys<32;++ys)wS[ys]=5;var pSe=vb(ng,9,0),gSe=vb(wS,5,0),Fte=function(t){return(t+7)/8|0},xSe=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new lf(t.subarray(e,r))},Ah=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},cy=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},U3=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:Dte,l:0};if(a==1){var o=new lf(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(P,j){return P.f-j.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var A=s[0].s,n=1;n<a;++n)s[n].s>A&&(A=s[n].s);var h=new mu(A+1),m=Nk(r[d-1],h,0);if(m>e){var n=0,p=0,g=m-e,v=1<<g;for(s.sort(function(j,_){return h[_.s]-h[j.s]||j.f-_.f});n<a;++n){var y=s[n].s;if(h[y]>e)p+=v-(1<<m-h[y]),h[y]=e;else break}for(p>>=g;p>0;){var b=s[n].s;h[b]<e?p-=1<<e-h[b]++-1:++n}for(;n>=0&&p;--n){var w=s[n].s;h[w]==e&&(--h[w],++p)}m=e}return{t:new lf(h),l:m}},Nk=function(t,e,r){return t.s==-1?Math.max(Nk(t.l,e,r+1),Nk(t.r,e,r+1)):e[t.s]=r},vQ=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new mu(++e),n=0,a=t[0],s=1,o=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[l]}return{c:r.subarray(0,n),n:e}},uy=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Ote=function(t,e,r){var n=r.length,a=Fte(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},yQ=function(t,e,r,n,a,s,o,l,c,u,d){Ah(e,d++,r),++a[256];for(var f=U3(a,15),A=f.t,h=f.l,m=U3(s,15),p=m.t,g=m.l,v=vQ(A),y=v.c,b=v.n,w=vQ(p),P=w.c,j=w.n,_=new mu(19),I=0;I<y.length;++I)++_[y[I]&31];for(var I=0;I<P.length;++I)++_[P[I]&31];for(var E=U3(_,7),F=E.t,k=E.l,B=19;B>4&&!F[gQ[B-1]];--B);var R=u+5<<3,Y=uy(a,ng)+uy(s,wS)+o,me=uy(a,A)+uy(s,p)+o+14+3*B+uy(_,F)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&R<=Y&&R<=me)return Ote(e,d,t.subarray(c,c+u));var pe,he,ge,se;if(Ah(e,d,1+(me<Y)),d+=2,me<Y){pe=vb(A,h,0),he=A,ge=vb(p,g,0),se=p;var je=vb(F,k,0);Ah(e,d,b-257),Ah(e,d+5,j-1),Ah(e,d+10,B-4),d+=14;for(var I=0;I<B;++I)Ah(e,d+3*I,F[gQ[I]]);d+=3*B;for(var Te=[y,P],D=0;D<2;++D)for(var K=Te[D],I=0;I<K.length;++I){var z=K[I]&31;Ah(e,d,je[z]),d+=F[z],z>15&&(Ah(e,d,K[I]>>5&127),d+=K[I]>>12)}}else pe=pSe,he=ng,ge=gSe,se=wS;for(var I=0;I<l;++I){var Q=n[I];if(Q>255){var z=Q>>18&31;cy(e,d,pe[z+257]),d+=he[z+257],z>7&&(Ah(e,d,Q>>23&31),d+=j6[z]);var J=Q&31;cy(e,d,ge[J]),d+=se[J],J>3&&(cy(e,d,Q>>5&8191),d+=P6[J])}else cy(e,d,pe[Q]),d+=he[Q]}return cy(e,d,pe[256]),d+he[256]},vSe=new I6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Dte=new lf(0),ySe=function(t,e,r,n,a,s){var o=s.z||t.length,l=new lf(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var f=vSe[e-1],A=f>>13,h=f&8191,m=(1<<r)-1,p=s.p||new mu(32768),g=s.h||new mu(m+1),v=Math.ceil(r/3),y=2*v,b=function(ie){return(t[ie]^t[ie+1]<<v^t[ie+2]<<y)&m},w=new I6(25e3),P=new mu(288),j=new mu(32),_=0,I=0,E=s.i||0,F=0,k=s.w||0,B=0;E+2<o;++E){var R=b(E),Y=E&32767,me=g[R];if(p[Y]=me,g[R]=Y,k<=E){var pe=o-E;if((_>7e3||F>24576)&&(pe>423||!u)){d=yQ(t,c,0,w,P,j,I,F,B,E-B,d),F=_=I=0,B=E;for(var he=0;he<286;++he)P[he]=0;for(var he=0;he<30;++he)j[he]=0}var ge=2,se=0,je=h,Te=Y-me&32767;if(pe>2&&R==b(E-Te))for(var D=Math.min(A,pe)-1,K=Math.min(32767,E),z=Math.min(258,pe);Te<=K&&--je&&Y!=me;){if(t[E+ge]==t[E+ge-Te]){for(var Q=0;Q<z&&t[E+Q]==t[E+Q-Te];++Q);if(Q>ge){if(ge=Q,se=Te,Q>D)break;for(var J=Math.min(Te,Q-2),ee=0,he=0;he<J;++he){var M=E-Te+he&32767,G=p[M],ne=M-G&32767;ne>ee&&(ee=ne,me=M)}}}Y=me,me=p[Y],Te+=Y-me&32767}if(se){w[F++]=268435456|bk[ge]<<18|xQ[se];var ve=bk[ge]&31,V=xQ[se]&31;I+=j6[ve]+P6[V],++P[257+ve],++j[V],k=E+ge,++_}else w[F++]=t[E],++P[t[E]]}}for(E=Math.max(E,k);E<o;++E)w[F++]=t[E],++P[t[E]];d=yQ(t,c,u,w,P,j,I,F,B,E-B,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=g,s.p=p,s.i=E,s.w=k)}else{for(var E=s.w||0;E<o+u;E+=65535){var qe=E+65535;qe>=o&&(c[d/8|0]=u,qe=o),d=Ote(c,d+1,t.subarray(E,qe))}s.i=o}return xSe(l,0,n+Fte(d)+a)},Rte=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},bSe=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new lf(s.length+t.length);o.set(s),o.set(t,s.length),t=o,a.w=s.length}return ySe(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},Mte=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},wSe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=Rte();a.p(e.dictionary),Mte(t,2,a.d())}};function Ck(t,e){e||(e={});var r=Rte();r.p(t);var n=bSe(t,e,e.dictionary?6:2,4);return wSe(n,e),Mte(n,n.length-4,r.d()),n}var NSe=typeof TextDecoder<"u"&&new TextDecoder,CSe=0;try{NSe.decode(Dte,{stream:!0}),CSe=1}catch{}function _Se(t){if(Array.isArray(t))return t}function ESe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function bQ(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function SSe(t,e){if(t){if(typeof t=="string")return bQ(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bQ(t,e):void 0}}function ISe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wQ(t,e){return _Se(t)||ESe(t,e)||SSe(t,e)||ISe()}function NQ(t,e="utf8"){return new TextDecoder(e).decode(t)}const jSe=new TextEncoder;function PSe(t){return jSe.encode(t)}const BSe=1024*8,TSe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),Q3={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class B6{constructor(e=BSe,r={}){vr(this,"buffer");vr(this,"byteLength");vr(this,"byteOffset");vr(this,"length");vr(this,"offset");vr(this,"lastWrittenByte");vr(this,"littleEndian");vr(this,"_data");vr(this,"_mark");vr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let o=a;(ArrayBuffer.isView(e)||e instanceof B6)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=Q3[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===TSe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new Q3[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new Q3[r](s);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return NQ(this.readBytes(e))}decodeText(e=1,r="utf8"){return NQ(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(PSe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function f1(t){let e=t.length;for(;--e>=0;)t[e]=0}const kSe=3,FSe=258,Lte=29,OSe=256,DSe=OSe+1+Lte,Ute=30,RSe=512,MSe=new Array((DSe+2)*2);f1(MSe);const LSe=new Array(Ute*2);f1(LSe);const USe=new Array(RSe);f1(USe);const QSe=new Array(FSe-kSe+1);f1(QSe);const VSe=new Array(Lte);f1(VSe);const HSe=new Array(Ute);f1(HSe);const $Se=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+e[n++]|0,s=s+a|0;while(--o);a%=65521,s%=65521}return a|s<<16|0};var _k=$Se;const GSe=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},KSe=new Uint32Array(GSe()),qSe=(t,e,r,n)=>{const a=KSe,s=n+r;t^=-1;for(let o=n;o<s;o++)t=t>>>8^a[(t^e[o])&255];return t^-1};var Nf=qSe,Ek={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Qte={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const zSe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var WSe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)zSe(r,n)&&(t[n]=r[n])}}return t},XSe=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let o=t[n];r.set(o,a),a+=o.length}return r},Vte={assign:WSe,flattenChunks:XSe};let Hte=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Hte=!1}const b2=new Uint8Array(256);for(let t=0;t<256;t++)b2[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;b2[254]=b2[254]=1;var YSe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,o=t.length,l=0;for(a=0;a<o;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const JSe=(t,e)=>{if(e<65534&&t.subarray&&Hte)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var ZSe=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let o=t[n++];if(o<128){s[a++]=o;continue}let l=b2[o];if(l>4){s[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){s[a++]=65533;continue}o<65536?s[a++]=o:(o-=65536,s[a++]=55296|o>>10&1023,s[a++]=56320|o&1023)}return JSe(s,a)},eIe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+b2[t[r]]>e?r:e},Sk={string2buf:YSe,buf2string:ZSe,utf8border:eIe};function tIe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var rIe=tIe;const NC=16209,nIe=16191;var aIe=function(e,r){let n,a,s,o,l,c,u,d,f,A,h,m,p,g,v,y,b,w,P,j,_,I,E,F;const k=e.state;n=e.next_in,E=e.input,a=n+(e.avail_in-5),s=e.next_out,F=e.output,o=s-(r-e.avail_out),l=s+(e.avail_out-257),c=k.dmax,u=k.wsize,d=k.whave,f=k.wnext,A=k.window,h=k.hold,m=k.bits,p=k.lencode,g=k.distcode,v=(1<<k.lenbits)-1,y=(1<<k.distbits)-1;e:do{m<15&&(h+=E[n++]<<m,m+=8,h+=E[n++]<<m,m+=8),b=p[h&v];t:for(;;){if(w=b>>>24,h>>>=w,m-=w,w=b>>>16&255,w===0)F[s++]=b&65535;else if(w&16){P=b&65535,w&=15,w&&(m<w&&(h+=E[n++]<<m,m+=8),P+=h&(1<<w)-1,h>>>=w,m-=w),m<15&&(h+=E[n++]<<m,m+=8,h+=E[n++]<<m,m+=8),b=g[h&y];r:for(;;){if(w=b>>>24,h>>>=w,m-=w,w=b>>>16&255,w&16){if(j=b&65535,w&=15,m<w&&(h+=E[n++]<<m,m+=8,m<w&&(h+=E[n++]<<m,m+=8)),j+=h&(1<<w)-1,j>c){e.msg="invalid distance too far back",k.mode=NC;break e}if(h>>>=w,m-=w,w=s-o,j>w){if(w=j-w,w>d&&k.sane){e.msg="invalid distance too far back",k.mode=NC;break e}if(_=0,I=A,f===0){if(_+=u-w,w<P){P-=w;do F[s++]=A[_++];while(--w);_=s-j,I=F}}else if(f<w){if(_+=u+f-w,w-=f,w<P){P-=w;do F[s++]=A[_++];while(--w);if(_=0,f<P){w=f,P-=w;do F[s++]=A[_++];while(--w);_=s-j,I=F}}}else if(_+=f-w,w<P){P-=w;do F[s++]=A[_++];while(--w);_=s-j,I=F}for(;P>2;)F[s++]=I[_++],F[s++]=I[_++],F[s++]=I[_++],P-=3;P&&(F[s++]=I[_++],P>1&&(F[s++]=I[_++]))}else{_=s-j;do F[s++]=F[_++],F[s++]=F[_++],F[s++]=F[_++],P-=3;while(P>2);P&&(F[s++]=F[_++],P>1&&(F[s++]=F[_++]))}}else if(w&64){e.msg="invalid distance code",k.mode=NC;break e}else{b=g[(b&65535)+(h&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){k.mode=nIe;break e}else{e.msg="invalid literal/length code",k.mode=NC;break e}else{b=p[(b&65535)+(h&(1<<w)-1)];continue t}break}}while(n<a&&s<l);P=m>>3,n-=P,m-=P<<3,h&=(1<<m)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<l?257+(l-s):257-(s-l),k.hold=h,k.bits=m};const ax=15,CQ=852,_Q=592,EQ=0,V3=1,SQ=2,sIe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),iIe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),oIe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),lIe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),cIe=(t,e,r,n,a,s,o,l)=>{const c=l.bits;let u=0,d=0,f=0,A=0,h=0,m=0,p=0,g=0,v=0,y=0,b,w,P,j,_,I=null,E;const F=new Uint16Array(ax+1),k=new Uint16Array(ax+1);let B=null,R,Y,me;for(u=0;u<=ax;u++)F[u]=0;for(d=0;d<n;d++)F[e[r+d]]++;for(h=c,A=ax;A>=1&&F[A]===0;A--);if(h>A&&(h=A),A===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<A&&F[f]===0;f++);for(h<f&&(h=f),g=1,u=1;u<=ax;u++)if(g<<=1,g-=F[u],g<0)return-1;if(g>0&&(t===EQ||A!==1))return-1;for(k[1]=0,u=1;u<ax;u++)k[u+1]=k[u]+F[u];for(d=0;d<n;d++)e[r+d]!==0&&(o[k[e[r+d]]++]=d);if(t===EQ?(I=B=o,E=20):t===V3?(I=sIe,B=iIe,E=257):(I=oIe,B=lIe,E=0),y=0,d=0,u=f,_=s,m=h,p=0,P=-1,v=1<<h,j=v-1,t===V3&&v>CQ||t===SQ&&v>_Q)return 1;for(;;){R=u-p,o[d]+1<E?(Y=0,me=o[d]):o[d]>=E?(Y=B[o[d]-E],me=I[o[d]-E]):(Y=96,me=0),b=1<<u-p,w=1<<m,f=w;do w-=b,a[_+(y>>p)+w]=R<<24|Y<<16|me|0;while(w!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,d++,--F[u]===0){if(u===A)break;u=e[r+o[d]]}if(u>h&&(y&j)!==P){for(p===0&&(p=h),_+=f,m=u-p,g=1<<m;m+p<A&&(g-=F[m+p],!(g<=0));)m++,g<<=1;if(v+=1<<m,t===V3&&v>CQ||t===SQ&&v>_Q)return 1;P=y&j,a[P]=h<<24|m<<16|_-s|0}}return y!==0&&(a[_+y]=u-p<<24|64<<16|0),l.bits=h,0};var yb=cIe;const uIe=0,$te=1,Gte=2,{Z_FINISH:IQ,Z_BLOCK:dIe,Z_TREES:CC,Z_OK:ag,Z_STREAM_END:fIe,Z_NEED_DICT:hIe,Z_STREAM_ERROR:pd,Z_DATA_ERROR:Kte,Z_MEM_ERROR:qte,Z_BUF_ERROR:AIe,Z_DEFLATED:jQ}=Qte,qj=16180,PQ=16181,BQ=16182,TQ=16183,kQ=16184,FQ=16185,OQ=16186,DQ=16187,RQ=16188,MQ=16189,NS=16190,mh=16191,H3=16192,LQ=16193,$3=16194,UQ=16195,QQ=16196,VQ=16197,HQ=16198,_C=16199,EC=16200,$Q=16201,GQ=16202,KQ=16203,qQ=16204,zQ=16205,G3=16206,WQ=16207,XQ=16208,Es=16209,zte=16210,Wte=16211,mIe=852,pIe=592,gIe=15,xIe=gIe,YQ=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function vIe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ig=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<qj||e.mode>Wte?1:0},Xte=t=>{if(Ig(t))return pd;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=qj,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(mIe),e.distcode=e.distdyn=new Int32Array(pIe),e.sane=1,e.back=-1,ag},Yte=t=>{if(Ig(t))return pd;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Xte(t)},Jte=(t,e)=>{let r;if(Ig(t))return pd;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?pd:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Yte(t))},Zte=(t,e)=>{if(!t)return pd;const r=new vIe;t.state=r,r.strm=t,r.window=null,r.mode=qj;const n=Jte(t,e);return n!==ag&&(t.state=null),n},yIe=t=>Zte(t,xIe);let JQ=!0,K3,q3;const bIe=t=>{if(JQ){K3=new Int32Array(512),q3=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(yb($te,t.lens,0,288,K3,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;yb(Gte,t.lens,0,32,q3,0,t.work,{bits:5}),JQ=!1}t.lencode=K3,t.lenbits=9,t.distcode=q3,t.distbits=5},ere=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},wIe=(t,e)=>{let r,n,a,s,o,l,c,u,d,f,A,h,m,p,g=0,v,y,b,w,P,j,_,I;const E=new Uint8Array(4);let F,k;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ig(t)||!t.output||!t.input&&t.avail_in!==0)return pd;r=t.state,r.mode===mh&&(r.mode=H3),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,f=l,A=c,I=ag;e:for(;;)switch(r.mode){case qj:if(r.wrap===0){r.mode=H3;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,E[0]=u&255,E[1]=u>>>8&255,r.check=Nf(r.check,E,2,0),u=0,d=0,r.mode=PQ;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Es;break}if((u&15)!==jQ){t.msg="unknown compression method",r.mode=Es;break}if(u>>>=4,d-=4,_=(u&15)+8,r.wbits===0&&(r.wbits=_),_>15||_>r.wbits){t.msg="invalid window size",r.mode=Es;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?MQ:mh,u=0,d=0;break;case PQ:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==jQ){t.msg="unknown compression method",r.mode=Es;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Es;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=Nf(r.check,E,2,0)),u=0,d=0,r.mode=BQ;case BQ:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=Nf(r.check,E,4,0)),u=0,d=0,r.mode=TQ;case TQ:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=Nf(r.check,E,2,0)),u=0,d=0,r.mode=kQ;case kQ:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=Nf(r.check,E,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=FQ;case FQ:if(r.flags&1024&&(h=r.length,h>l&&(h=l),h&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+h),_)),r.flags&512&&r.wrap&4&&(r.check=Nf(r.check,n,h,s)),l-=h,s+=h,r.length-=h),r.length))break e;r.length=0,r.mode=OQ;case OQ:if(r.flags&2048){if(l===0)break e;h=0;do _=n[s+h++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_));while(_&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=Nf(r.check,n,h,s)),l-=h,s+=h,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=DQ;case DQ:if(r.flags&4096){if(l===0)break e;h=0;do _=n[s+h++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_));while(_&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=Nf(r.check,n,h,s)),l-=h,s+=h,_)break e}else r.head&&(r.head.comment=null);r.mode=RQ;case RQ:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Es;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=mh;break;case MQ:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=YQ(u),u=0,d=0,r.mode=NS;case NS:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,hIe;t.adler=r.check=1,r.mode=mh;case mh:if(e===dIe||e===CC)break e;case H3:if(r.last){u>>>=d&7,d-=d&7,r.mode=G3;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=LQ;break;case 1:if(bIe(r),r.mode=_C,e===CC){u>>>=2,d-=2;break e}break;case 2:r.mode=QQ;break;case 3:t.msg="invalid block type",r.mode=Es}u>>>=2,d-=2;break;case LQ:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Es;break}if(r.length=u&65535,u=0,d=0,r.mode=$3,e===CC)break e;case $3:r.mode=UQ;case UQ:if(h=r.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;a.set(n.subarray(s,s+h),o),l-=h,s+=h,c-=h,o+=h,r.length-=h;break}r.mode=mh;break;case QQ:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Es;break}r.have=0,r.mode=VQ;case VQ:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[B[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,F={bits:r.lenbits},I=yb(uIe,r.lens,0,19,r.lencode,0,r.work,F),r.lenbits=F.bits,I){t.msg="invalid code lengths set",r.mode=Es;break}r.have=0,r.mode=HQ;case HQ:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],v=g>>>24,y=g>>>16&255,b=g&65535,!(v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(b<16)u>>>=v,d-=v,r.lens[r.have++]=b;else{if(b===16){for(k=v+2;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=v,d-=v,r.have===0){t.msg="invalid bit length repeat",r.mode=Es;break}_=r.lens[r.have-1],h=3+(u&3),u>>>=2,d-=2}else if(b===17){for(k=v+3;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=v,d-=v,_=0,h=3+(u&7),u>>>=3,d-=3}else{for(k=v+7;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=v,d-=v,_=0,h=11+(u&127),u>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Es;break}for(;h--;)r.lens[r.have++]=_}}if(r.mode===Es)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Es;break}if(r.lenbits=9,F={bits:r.lenbits},I=yb($te,r.lens,0,r.nlen,r.lencode,0,r.work,F),r.lenbits=F.bits,I){t.msg="invalid literal/lengths set",r.mode=Es;break}if(r.distbits=6,r.distcode=r.distdyn,F={bits:r.distbits},I=yb(Gte,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,F),r.distbits=F.bits,I){t.msg="invalid distances set",r.mode=Es;break}if(r.mode=_C,e===CC)break e;case _C:r.mode=EC;case EC:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,aIe(t,A),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===mh&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],v=g>>>24,y=g>>>16&255,b=g&65535,!(v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(y&&!(y&240)){for(w=v,P=y,j=b;g=r.lencode[j+((u&(1<<w+P)-1)>>w)],v=g>>>24,y=g>>>16&255,b=g&65535,!(w+v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=v,d-=v,r.back+=v,r.length=b,y===0){r.mode=zQ;break}if(y&32){r.back=-1,r.mode=mh;break}if(y&64){t.msg="invalid literal/length code",r.mode=Es;break}r.extra=y&15,r.mode=$Q;case $Q:if(r.extra){for(k=r.extra;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=GQ;case GQ:for(;g=r.distcode[u&(1<<r.distbits)-1],v=g>>>24,y=g>>>16&255,b=g&65535,!(v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(y&240)){for(w=v,P=y,j=b;g=r.distcode[j+((u&(1<<w+P)-1)>>w)],v=g>>>24,y=g>>>16&255,b=g&65535,!(w+v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=v,d-=v,r.back+=v,y&64){t.msg="invalid distance code",r.mode=Es;break}r.offset=b,r.extra=y&15,r.mode=KQ;case KQ:if(r.extra){for(k=r.extra;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Es;break}r.mode=qQ;case qQ:if(c===0)break e;if(h=A-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Es;break}h>r.wnext?(h-=r.wnext,m=r.wsize-h):m=r.wnext-h,h>r.length&&(h=r.length),p=r.window}else p=a,m=o-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do a[o++]=p[m++];while(--h);r.length===0&&(r.mode=EC);break;case zQ:if(c===0)break e;a[o++]=r.length,c--,r.mode=EC;break;case G3:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(A-=c,t.total_out+=A,r.total+=A,r.wrap&4&&A&&(t.adler=r.check=r.flags?Nf(r.check,a,A,o-A):_k(r.check,a,A,o-A)),A=c,r.wrap&4&&(r.flags?u:YQ(u))!==r.check){t.msg="incorrect data check",r.mode=Es;break}u=0,d=0}r.mode=WQ;case WQ:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Es;break}u=0,d=0}r.mode=XQ;case XQ:I=fIe;break e;case Es:I=Kte;break e;case zte:return qte;case Wte:default:return pd}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||A!==t.avail_out&&r.mode<Es&&(r.mode<G3||e!==IQ))&&ere(t,t.output,t.next_out,A-t.avail_out),f-=t.avail_in,A-=t.avail_out,t.total_in+=f,t.total_out+=A,r.total+=A,r.wrap&4&&A&&(t.adler=r.check=r.flags?Nf(r.check,a,A,t.next_out-A):_k(r.check,a,A,t.next_out-A)),t.data_type=r.bits+(r.last?64:0)+(r.mode===mh?128:0)+(r.mode===_C||r.mode===$3?256:0),(f===0&&A===0||e===IQ)&&I===ag&&(I=AIe),I},NIe=t=>{if(Ig(t))return pd;let e=t.state;return e.window&&(e.window=null),t.state=null,ag},CIe=(t,e)=>{if(Ig(t))return pd;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,ag):pd},_Ie=(t,e)=>{const r=e.length;let n,a,s;return Ig(t)||(n=t.state,n.wrap!==0&&n.mode!==NS)?pd:n.mode===NS&&(a=1,a=_k(a,e,r,0),a!==n.check)?Kte:(s=ere(t,e,r,r),s?(n.mode=zte,qte):(n.havedict=1,ag))};var EIe=Yte,SIe=Jte,IIe=Xte,jIe=yIe,PIe=Zte,BIe=wIe,TIe=NIe,kIe=CIe,FIe=_Ie,OIe="pako inflate (from Nodeca project)",Sh={inflateReset:EIe,inflateReset2:SIe,inflateResetKeep:IIe,inflateInit:jIe,inflateInit2:PIe,inflate:BIe,inflateEnd:TIe,inflateGetHeader:kIe,inflateSetDictionary:FIe,inflateInfo:OIe};function DIe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var RIe=DIe;const tre=Object.prototype.toString,{Z_NO_FLUSH:MIe,Z_FINISH:LIe,Z_OK:w2,Z_STREAM_END:z3,Z_NEED_DICT:W3,Z_STREAM_ERROR:UIe,Z_DATA_ERROR:ZQ,Z_MEM_ERROR:QIe}=Qte;function Pw(t){this.options=Vte.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rIe,this.strm.avail_out=0;let r=Sh.inflateInit2(this.strm,e.windowBits);if(r!==w2)throw new Error(Ek[r]);if(this.header=new RIe,Sh.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Sk.string2buf(e.dictionary):tre.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Sh.inflateSetDictionary(this.strm,e.dictionary),r!==w2)))throw new Error(Ek[r])}Pw.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?LIe:MIe,tre.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Sh.inflate(r,o),s===W3&&a&&(s=Sh.inflateSetDictionary(r,a),s===w2?s=Sh.inflate(r,o):s===ZQ&&(s=W3));r.avail_in>0&&s===z3&&r.state.wrap>0&&t[r.next_in]!==0;)Sh.inflateReset(r),s=Sh.inflate(r,o);switch(s){case UIe:case ZQ:case W3:case QIe:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===z3))if(this.options.to==="string"){let c=Sk.utf8border(r.output,r.next_out),u=r.next_out-c,d=Sk.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===w2&&l===0)){if(s===z3)return s=Sh.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Pw.prototype.onData=function(t){this.chunks.push(t)};Pw.prototype.onEnd=function(t){t===w2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Vte.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function VIe(t,e){const r=new Pw(e);if(r.push(t),r.err)throw r.msg||Ek[r.err];return r.result}var HIe=Pw,$Ie=VIe,GIe={Inflate:HIe,inflate:$Ie};const{Inflate:KIe,inflate:qIe}=GIe;var eV=KIe,zIe=qIe;const rre=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;rre[t]=e}const tV=4294967295;function WIe(t,e,r){let n=t;for(let a=0;a<r;a++)n=rre[(n^e[a])&255]^n>>>8;return n}function XIe(t,e){return(WIe(tV,t,e)^tV)>>>0}function rV(t,e,r){const n=t.readUint32(),a=XIe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function nre(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function are(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function sre(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function ire(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function ore(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+YIe(e[s-a],r[s],r[s-a])&255}}function YIe(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),o=Math.abs(n-r);return a<=s&&a<=o?t:s<=o?e:r}function JIe(t,e,r,n,a,s){switch(t){case 0:nre(e,r,a);break;case 1:are(e,r,a,s);break;case 2:sre(e,r,n,a);break;case 3:ire(e,r,n,a,s);break;case 4:ore(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const ZIe=new Uint16Array([255]),eje=new Uint8Array(ZIe.buffer),tje=eje[0]===255;function rje(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=o[d],A=Math.ceil((r-f.x)/f.xStep),h=Math.ceil((n-f.y)/f.yStep);if(A<=0||h<=0)continue;const m=A*l,p=new Uint8Array(m);for(let g=0;g<h;g++){const v=e[u++],y=e.subarray(u,u+m);u+=m;const b=new Uint8Array(m);JIe(v,y,b,p,m,l),p.set(b);for(let w=0;w<A;w++){const P=f.x+w*f.xStep,j=f.y+g*f.yStep;if(!(P>=r||j>=n))for(let _=0;_<l;_++)c[(j*r+P)*l+_]=b[w*l+_]}}}if(s===16){const d=new Uint16Array(c.buffer);if(tje)for(let f=0;f<d.length;f++)d[f]=nje(d[f]);return d}else return c}function nje(t){return(t&255)<<8|t>>8&255}const aje=new Uint16Array([255]),sje=new Uint8Array(aje.buffer),ije=sje[0]===255,oje=new Uint8Array(0);function nV(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=oje,d=0,f,A;for(let h=0;h<n;h++){switch(f=e.subarray(d+1,d+1+l),A=c.subarray(h*l,(h+1)*l),e[d]){case 0:nre(f,A,l);break;case 1:are(f,A,l,o);break;case 2:sre(f,A,u,l);break;case 3:ire(f,A,u,l,o);break;case 4:ore(f,A,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=A,d+=l+1}if(s===16){const h=new Uint16Array(c.buffer);if(ije)for(let m=0;m<h.length;m++)h[m]=lje(h[m]);return h}else return c}function lje(t){return(t&255)<<8|t>>8&255}const iE=Uint8Array.of(137,80,78,71,13,10,26,10);function aV(t){if(!cje(t.readBytes(iE.length)))throw new Error("wrong PNG signature")}function cje(t){if(t.length<iE.length)return!1;for(let e=0;e<iE.length;e++)if(t[e]!==iE[e])return!1;return!0}const uje="tEXt",dje=0,lre=new TextDecoder("latin1");function fje(t){if(Aje(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const hje=/^[\u0000-\u00FF]*$/;function Aje(t){if(!hje.test(t))throw new Error("invalid latin1 text")}function mje(t,e,r){const n=cre(e);t[n]=pje(e,r-n.length-1)}function cre(t){for(t.mark();t.readByte()!==dje;);const e=t.offset;t.reset();const r=lre.decode(t.readBytes(e-t.offset-1));return t.skip(1),fje(r),r}function pje(t,e){return lre.decode(t.readBytes(e))}const ru={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},X3={UNKNOWN:-1,DEFLATE:0},sV={UNKNOWN:-1,ADAPTIVE:0},Y3={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},SC={NONE:0,BACKGROUND:1,PREVIOUS:2},J3={SOURCE:0,OVER:1};class gje extends B6{constructor(r,n={}){super(r);vr(this,"_checkCrc");vr(this,"_inflator");vr(this,"_png");vr(this,"_apng");vr(this,"_end");vr(this,"_hasPalette");vr(this,"_palette");vr(this,"_hasTransparency");vr(this,"_transparency");vr(this,"_compressionMethod");vr(this,"_filterMethod");vr(this,"_interlaceMethod");vr(this,"_colorType");vr(this,"_isAnimated");vr(this,"_numberOfFrames");vr(this,"_numberOfPlays");vr(this,"_frames");vr(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new eV,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=X3.UNKNOWN,this._filterMethod=sV.UNKNOWN,this._interlaceMethod=Y3.UNKNOWN,this._colorType=ru.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(aV(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(aV(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case uje:mje(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?rV(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?rV(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=xje(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case ru.GREYSCALE:a=1;break;case ru.TRUECOLOUR:a=3;break;case ru.INDEXED_COLOUR:a=1;break;case ru.GREYSCALE_ALPHA:a=2;break;case ru.TRUECOLOUR_ALPHA:a=4;break;case ru.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==X3.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case ru.GREYSCALE:case ru.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case ru.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ru.UNKNOWN:case ru.GREYSCALE_ALPHA:case ru.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=cre(this),a=this.readUint8();if(a!==X3.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:zIe(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=nV({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case SC.NONE:break;case SC.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case SC.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case J3.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case J3.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,A=d%(this._png.channels-1)===0?1:n.data[u+d],h=Math.floor(f*A+(1-f)*r.data[c+d]);r.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==sV.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Y3.NO_INTERLACE)this._png.data=nV({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Y3.ADAM7)this._png.data=rje({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:SC.NONE,blendOp:J3.SOURCE,data:r}),this._inflator=new eV,this._writingDataChunks=!1}}function xje(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var iV;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(iV||(iV={}));function vje(t,e){return new gje(t,e).decode()}var Sn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Z3(){Sn.console&&typeof Sn.console.log=="function"&&Sn.console.log.apply(Sn.console,arguments)}var ts={log:Z3,warn:function(t){Sn.console&&(typeof Sn.console.warn=="function"?Sn.console.warn.apply(Sn.console,arguments):Z3.call(null,arguments))},error:function(t){Sn.console&&(typeof Sn.console.error=="function"?Sn.console.error.apply(Sn.console,arguments):Z3(t))}};function e5(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){tp(n.response,e,r)},n.onerror=function(){ts.error("could not download file")},n.send()}function oV(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function IC(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var tp=Sn.saveAs||((typeof window>"u"?"undefined":Qa(window))!=="object"||window!==Sn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Sn.URL||Sn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?oV(a.href)?e5(t,e,r):IC(a,a.target="_blank"):IC(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){IC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(oV(t))e5(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){IC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Qa(s)!=="object"&&(ts.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return e5(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(Sn.HTMLElement)||Sn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":Qa(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=Sn.URL||Sn.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ure(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var oE=Sn.atob.bind(Sn),lV=Sn.btoa.bind(Sn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function t5(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=Cl(r,n,a,s,e[0],7,-680876936),s=Cl(s,r,n,a,e[1],12,-389564586),a=Cl(a,s,r,n,e[2],17,606105819),n=Cl(n,a,s,r,e[3],22,-1044525330),r=Cl(r,n,a,s,e[4],7,-176418897),s=Cl(s,r,n,a,e[5],12,1200080426),a=Cl(a,s,r,n,e[6],17,-1473231341),n=Cl(n,a,s,r,e[7],22,-45705983),r=Cl(r,n,a,s,e[8],7,1770035416),s=Cl(s,r,n,a,e[9],12,-1958414417),a=Cl(a,s,r,n,e[10],17,-42063),n=Cl(n,a,s,r,e[11],22,-1990404162),r=Cl(r,n,a,s,e[12],7,1804603682),s=Cl(s,r,n,a,e[13],12,-40341101),a=Cl(a,s,r,n,e[14],17,-1502002290),r=_l(r,n=Cl(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=_l(s,r,n,a,e[6],9,-1069501632),a=_l(a,s,r,n,e[11],14,643717713),n=_l(n,a,s,r,e[0],20,-373897302),r=_l(r,n,a,s,e[5],5,-701558691),s=_l(s,r,n,a,e[10],9,38016083),a=_l(a,s,r,n,e[15],14,-660478335),n=_l(n,a,s,r,e[4],20,-405537848),r=_l(r,n,a,s,e[9],5,568446438),s=_l(s,r,n,a,e[14],9,-1019803690),a=_l(a,s,r,n,e[3],14,-187363961),n=_l(n,a,s,r,e[8],20,1163531501),r=_l(r,n,a,s,e[13],5,-1444681467),s=_l(s,r,n,a,e[2],9,-51403784),a=_l(a,s,r,n,e[7],14,1735328473),r=El(r,n=_l(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=El(s,r,n,a,e[8],11,-2022574463),a=El(a,s,r,n,e[11],16,1839030562),n=El(n,a,s,r,e[14],23,-35309556),r=El(r,n,a,s,e[1],4,-1530992060),s=El(s,r,n,a,e[4],11,1272893353),a=El(a,s,r,n,e[7],16,-155497632),n=El(n,a,s,r,e[10],23,-1094730640),r=El(r,n,a,s,e[13],4,681279174),s=El(s,r,n,a,e[0],11,-358537222),a=El(a,s,r,n,e[3],16,-722521979),n=El(n,a,s,r,e[6],23,76029189),r=El(r,n,a,s,e[9],4,-640364487),s=El(s,r,n,a,e[12],11,-421815835),a=El(a,s,r,n,e[15],16,530742520),r=Sl(r,n=El(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Sl(s,r,n,a,e[7],10,1126891415),a=Sl(a,s,r,n,e[14],15,-1416354905),n=Sl(n,a,s,r,e[5],21,-57434055),r=Sl(r,n,a,s,e[12],6,1700485571),s=Sl(s,r,n,a,e[3],10,-1894986606),a=Sl(a,s,r,n,e[10],15,-1051523),n=Sl(n,a,s,r,e[1],21,-2054922799),r=Sl(r,n,a,s,e[8],6,1873313359),s=Sl(s,r,n,a,e[15],10,-30611744),a=Sl(a,s,r,n,e[6],15,-1560198380),n=Sl(n,a,s,r,e[13],21,1309151649),r=Sl(r,n,a,s,e[4],6,-145523070),s=Sl(s,r,n,a,e[11],10,-1120210379),a=Sl(a,s,r,n,e[2],15,718787259),n=Sl(n,a,s,r,e[9],21,-343485551),t[0]=R0(r,t[0]),t[1]=R0(n,t[1]),t[2]=R0(a,t[2]),t[3]=R0(s,t[3])}function zj(t,e,r,n,a,s){return e=R0(R0(e,t),R0(n,s)),R0(e<<a|e>>>32-a,r)}function Cl(t,e,r,n,a,s,o){return zj(e&r|~e&n,t,e,a,s,o)}function _l(t,e,r,n,a,s,o){return zj(e&n|r&~n,t,e,a,s,o)}function El(t,e,r,n,a,s,o){return zj(e^r^n,t,e,a,s,o)}function Sl(t,e,r,n,a,s,o){return zj(r^(e|~n),t,e,a,s,o)}function dre(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)t5(n,yje(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(t5(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,t5(n,a),n}function yje(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var cV="0123456789abcdef".split("");function bje(t){for(var e="",r=0;r<4;r++)e+=cV[t>>8*r+4&15]+cV[t>>8*r&15];return e}function wje(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Ik(t){return dre(t).map(wje).join("")}var Nje=function(t){for(var e=0;e<t.length;e++)t[e]=bje(t[e]);return t.join("")}(dre("hello"))!="5d41402abc4b2a76b9719d911017c592";function R0(t,e){if(Nje){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function jk(t,e){var r,n,a,s;if(t!==r){for(var o=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var f=e.length,A=0,h=0,m="";for(c=0;c<f;c++)h=(h+(d=l[A=(A+1)%256]))%256,l[A]=l[h],l[h]=d,o=l[(l[A]+l[h])%256],m+=String.fromCharCode(e.charCodeAt(c)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var uV={print:4,modify:8,copy:16,"annot-forms":32};function Sx(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(uV.perm!==void 0)throw new Error("Invalid permission: "+l);a+=uV[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=Ik(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=jk(this.encryptionKey,this.padding)}function Ix(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function dV(t){if(Qa(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var o=e[r][s];try{o[0].apply(t,n)}catch(l){Sn.console&&ts.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function N2(t){if(!(this instanceof N2))return new N2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function fre(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function I0(t,e,r,n,a){if(!(this instanceof I0))return new I0(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,fre.call(this,n,a)}function xp(t,e,r,n,a){if(!(this instanceof xp))return new xp(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,fre.call(this,n,a)}function $r(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;Qa(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,A={},h={internal:{},__private__:{}};h.__private__.PubSub=dV;var m="1.3",p=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(H){m=H};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return g};var v=h.__private__.getPageFormat=function(H){return g[H]};a=a||"a4";var y="compat",b="advanced",w=y;function P(){this.saveGraphicsState(),re(new X(ce,0,0,-ce,0,Bu()*ce).toString()+" cm"),this.setFontSize(this.getFontSize()/ce),u="n",w=b}function j(){this.restoreGraphicsState(),u="S",w=y}var _=h.__private__.combineFontStyleAndFontWeight=function(H,Se){if(H=="bold"&&Se=="normal"||H=="bold"&&Se==400||H=="normal"&&Se=="italic"||H=="bold"&&Se=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Se&&(H=Se==400||Se==="normal"?H==="italic"?"italic":"normal":Se!=700&&Se!=="bold"||H!=="normal"?(Se==700?"bold":Se)+""+H:"bold"),H};h.advancedAPI=function(H){var Se=w===y;return Se&&P.call(this),typeof H!="function"||(H(this),Se&&j.call(this)),this},h.compatAPI=function(H){var Se=w===b;return Se&&j.call(this),typeof H!="function"||(H(this),Se&&P.call(this)),this},h.isAdvancedAPI=function(){return w===b};var I,E=function(H){if(w!==b)throw new Error(H+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=h.roundToPrecision=h.__private__.roundToPrecision=function(H,Se){var nt=e||Se;if(isNaN(H)||isNaN(nt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return H.toFixed(nt).replace(/0+$/,"")};I=h.hpf=h.__private__.hpf=typeof c=="number"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return F(H,c)}:c==="smart"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return F(H,H>-1&&H<1?16:5)}:function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return F(H,16)};var k=h.f2=h.__private__.f2=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f2");return F(H,2)},B=h.__private__.f3=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f3");return F(H,3)},R=h.scale=h.__private__.scale=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?H*ce:w===b?H:void 0},Y=function(H){return R(function(Se){return w===y?Bu()-Se:w===b?Se:void 0}(H))};h.__private__.setPrecision=h.setPrecision=function(H){typeof parseInt(H,10)=="number"&&(e=parseInt(H,10))};var me,pe="00000000000000000000000000000000",he=h.__private__.getFileId=function(){return pe},ge=h.__private__.setFileId=function(H){return pe=H!==void 0&&/^[a-fA-F0-9]{32}$/.test(H)?H.toUpperCase():pe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(bt=new Sx(d.userPermissions,d.userPassword,d.ownerPassword,pe)),pe};h.setFileId=function(H){return ge(H),this},h.getFileId=function(){return he()};var se=h.__private__.convertDateToPDFDate=function(H){var Se=H.getTimezoneOffset(),nt=Se<0?"+":"-",pt=Math.floor(Math.abs(Se/60)),Ot=Math.abs(Se%60),sr=[nt,z(pt),"'",z(Ot),"'"].join("");return["D:",H.getFullYear(),z(H.getMonth()+1),z(H.getDate()),z(H.getHours()),z(H.getMinutes()),z(H.getSeconds()),sr].join("")},je=h.__private__.convertPDFDateToDate=function(H){var Se=parseInt(H.substr(2,4),10),nt=parseInt(H.substr(6,2),10)-1,pt=parseInt(H.substr(8,2),10),Ot=parseInt(H.substr(10,2),10),sr=parseInt(H.substr(12,2),10),fr=parseInt(H.substr(14,2),10);return new Date(Se,nt,pt,Ot,sr,fr,0)},Te=h.__private__.setCreationDate=function(H){var Se;if(H===void 0&&(H=new Date),H instanceof Date)Se=se(H);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(H))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Se=H}return me=Se},D=h.__private__.getCreationDate=function(H){var Se=me;return H==="jsDate"&&(Se=je(me)),Se};h.setCreationDate=function(H){return Te(H),this},h.getCreationDate=function(H){return D(H)};var K,z=h.__private__.padd2=function(H){return("0"+parseInt(H)).slice(-2)},Q=h.__private__.padd2Hex=function(H){return("00"+(H=H.toString())).substr(H.length)},J=0,ee=[],M=[],G=0,ne=[],ve=[],V=!1,qe=M;h.__private__.setCustomOutputDestination=function(H){V=!0,qe=H};var ie=function(H){V||(qe=H)};h.__private__.resetCustomOutputDestination=function(){V=!1,qe=M};var re=h.__private__.out=function(H){return H=H.toString(),G+=H.length+1,qe.push(H),qe},Fe=h.__private__.write=function(H){return re(arguments.length===1?H.toString():Array.prototype.join.call(arguments," "))},de=h.__private__.getArrayBuffer=function(H){for(var Se=H.length,nt=new ArrayBuffer(Se),pt=new Uint8Array(nt);Se--;)pt[Se]=H.charCodeAt(Se);return nt},we=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return we};var Le=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(H){return Le=w===b?H/ce:H,this};var Ge,ft=h.__private__.getFontSize=h.getFontSize=function(){return w===y?Le:Le*ce},ht=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(H){return ht=H,this},h.__private__.getR2L=h.getR2L=function(){return ht};var xt,jt=h.__private__.setZoomMode=function(H){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(H))Ge=H;else if(isNaN(H)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(H)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+H+'" is not recognized.');Ge=H}else Ge=parseInt(H,10)};h.__private__.getZoomMode=function(){return Ge};var kt,wt=h.__private__.setPageMode=function(H){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(H)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+H+'" is not recognized.');xt=H};h.__private__.getPageMode=function(){return xt};var Ve=h.__private__.setLayoutMode=function(H){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(H)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+H+'" is not recognized.');kt=H};h.__private__.getLayoutMode=function(){return kt},h.__private__.setDisplayMode=h.setDisplayMode=function(H,Se,nt){return jt(H),Ve(Se),wt(nt),this};var Pe={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(H){if(Object.keys(Pe).indexOf(H)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pe[H]},h.__private__.getDocumentProperties=function(){return Pe},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(H){for(var Se in Pe)Pe.hasOwnProperty(Se)&&H[Se]&&(Pe[Se]=H[Se]);return this},h.__private__.setDocumentProperty=function(H,Se){if(Object.keys(Pe).indexOf(H)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pe[H]=Se};var be,ce,te,Ne,Re,ye={},Xe={},mt=[],rt={},ue={},_e={},We={},ot=null,Ce=0,$e=[],gt=new dV(h),Kt=t.hotfixes||[],Ut={},Jt={},it=[],X=function H(Se,nt,pt,Ot,sr,fr){if(!(this instanceof H))return new H(Se,nt,pt,Ot,sr,fr);isNaN(Se)&&(Se=1),isNaN(nt)&&(nt=0),isNaN(pt)&&(pt=0),isNaN(Ot)&&(Ot=1),isNaN(sr)&&(sr=0),isNaN(fr)&&(fr=0),this._matrix=[Se,nt,pt,Ot,sr,fr]};Object.defineProperty(X.prototype,"sx",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(X.prototype,"shy",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(X.prototype,"shx",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(X.prototype,"sy",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(X.prototype,"tx",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(X.prototype,"ty",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(X.prototype,"a",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(X.prototype,"b",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(X.prototype,"c",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(X.prototype,"d",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(X.prototype,"e",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(X.prototype,"f",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(X.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(X.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(X.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(X.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),X.prototype.join=function(H){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(H)},X.prototype.multiply=function(H){var Se=H.sx*this.sx+H.shy*this.shx,nt=H.sx*this.shy+H.shy*this.sy,pt=H.shx*this.sx+H.sy*this.shx,Ot=H.shx*this.shy+H.sy*this.sy,sr=H.tx*this.sx+H.ty*this.shx+this.tx,fr=H.tx*this.shy+H.ty*this.sy+this.ty;return new X(Se,nt,pt,Ot,sr,fr)},X.prototype.decompose=function(){var H=this.sx,Se=this.shy,nt=this.shx,pt=this.sy,Ot=this.tx,sr=this.ty,fr=Math.sqrt(H*H+Se*Se),Gr=(H/=fr)*nt+(Se/=fr)*pt;nt-=H*Gr,pt-=Se*Gr;var Jr=Math.sqrt(nt*nt+pt*pt);return Gr/=Jr,H*(pt/=Jr)<Se*(nt/=Jr)&&(H=-H,Se=-Se,Gr=-Gr,fr=-fr),{scale:new X(fr,0,0,Jr,0,0),translate:new X(1,0,0,1,Ot,sr),rotate:new X(H,Se,-Se,H,0,0),skew:new X(1,0,Gr,1,0,0)}},X.prototype.toString=function(H){return this.join(" ")},X.prototype.inversed=function(){var H=this.sx,Se=this.shy,nt=this.shx,pt=this.sy,Ot=this.tx,sr=this.ty,fr=1/(H*pt-Se*nt),Gr=pt*fr,Jr=-Se*fr,yn=-nt*fr,jn=H*fr;return new X(Gr,Jr,yn,jn,-Gr*Ot-yn*sr,-Jr*Ot-jn*sr)},X.prototype.applyToPoint=function(H){var Se=H.x*this.sx+H.y*this.shx+this.tx,nt=H.x*this.shy+H.y*this.sy+this.ty;return new ju(Se,nt)},X.prototype.applyToRectangle=function(H){var Se=this.applyToPoint(H),nt=this.applyToPoint(new ju(H.x+H.w,H.y+H.h));return new OA(Se.x,Se.y,nt.x-Se.x,nt.y-Se.y)},X.prototype.clone=function(){var H=this.sx,Se=this.shy,nt=this.shx,pt=this.sy,Ot=this.tx,sr=this.ty;return new X(H,Se,nt,pt,Ot,sr)},h.Matrix=X;var oe=h.matrixMult=function(H,Se){return Se.multiply(H)},L=new X(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=L;var Ae=function(H,Se){if(!ue[H]){var nt=(Se instanceof I0?"Sh":"P")+(Object.keys(rt).length+1).toString(10);Se.id=nt,ue[H]=nt,rt[nt]=Se,gt.publish("addPattern",Se)}};h.ShadingPattern=I0,h.TilingPattern=xp,h.addShadingPattern=function(H,Se){return E("addShadingPattern()"),Ae(H,Se),this},h.beginTilingPattern=function(H){E("beginTilingPattern()"),pf(H.boundingBox[0],H.boundingBox[1],H.boundingBox[2]-H.boundingBox[0],H.boundingBox[3]-H.boundingBox[1],H.matrix)},h.endTilingPattern=function(H,Se){E("endTilingPattern()"),Se.stream=ve[K].join(`
`),Ae(H,Se),gt.publish("endTilingPattern",Se),it.pop().restore()};var Ee,Oe=h.__private__.newObject=function(){var H=Be();return S(H,!0),H},Be=h.__private__.newObjectDeferred=function(){return J++,ee[J]=function(){return G},J},S=function(H,Se){return Se=typeof Se=="boolean"&&Se,ee[H]=G,Se&&re(H+" 0 obj"),H},O=h.__private__.newAdditionalObject=function(){var H={objId:Be(),content:""};return ne.push(H),H},U=Be(),q=Be(),ae=h.__private__.decodeColorString=function(H){var Se=H.split(" ");if(Se.length!==2||Se[1]!=="g"&&Se[1]!=="G")Se.length!==5||Se[4]!=="k"&&Se[4]!=="K"||(Se=[(1-Se[0])*(1-Se[3]),(1-Se[1])*(1-Se[3]),(1-Se[2])*(1-Se[3]),"r"]);else{var nt=parseFloat(Se[0]);Se=[nt,nt,nt,"r"]}for(var pt="#",Ot=0;Ot<3;Ot++)pt+=("0"+Math.floor(255*parseFloat(Se[Ot])).toString(16)).slice(-2);return pt},fe=h.__private__.encodeColorString=function(H){var Se;typeof H=="string"&&(H={ch1:H});var nt=H.ch1,pt=H.ch2,Ot=H.ch3,sr=H.ch4,fr=H.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof nt=="string"&&nt.charAt(0)!=="#"){var Gr=new ure(nt);if(Gr.ok)nt=Gr.toHex();else if(!/^\d*\.?\d*$/.test(nt))throw new Error('Invalid color "'+nt+'" passed to jsPDF.encodeColorString.')}if(typeof nt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(nt)&&(nt="#"+nt[1]+nt[1]+nt[2]+nt[2]+nt[3]+nt[3]),typeof nt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(nt)){var Jr=parseInt(nt.substr(1),16);nt=Jr>>16&255,pt=Jr>>8&255,Ot=255&Jr}if(pt===void 0||sr===void 0&&nt===pt&&pt===Ot)Se=typeof nt=="string"?nt+" "+fr[0]:H.precision===2?k(nt/255)+" "+fr[0]:B(nt/255)+" "+fr[0];else if(sr===void 0||Qa(sr)==="object"){if(sr&&!isNaN(sr.a)&&sr.a===0)return["1.","1.","1.",fr[1]].join(" ");Se=typeof nt=="string"?[nt,pt,Ot,fr[1]].join(" "):H.precision===2?[k(nt/255),k(pt/255),k(Ot/255),fr[1]].join(" "):[B(nt/255),B(pt/255),B(Ot/255),fr[1]].join(" ")}else Se=typeof nt=="string"?[nt,pt,Ot,sr,fr[2]].join(" "):H.precision===2?[k(nt),k(pt),k(Ot),k(sr),fr[2]].join(" "):[B(nt),B(pt),B(Ot),B(sr),fr[2]].join(" ");return Se},Ue=h.__private__.getFilters=function(){return o},Ze=h.__private__.putStream=function(H){var Se=(H=H||{}).data||"",nt=H.filters||Ue(),pt=H.alreadyAppliedFilters||[],Ot=H.addLength1||!1,sr=Se.length,fr=H.objectId,Gr=function(oi){return oi};if(d!==null&&fr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Gr=bt.encryptor(fr,0));var Jr={};nt===!0&&(nt=["FlateEncode"]);var yn=H.additionalKeyValues||[],jn=(Jr=$r.API.processDataByFilters!==void 0?$r.API.processDataByFilters(Se,nt):{data:Se,reverseChain:[]}).reverseChain+(Array.isArray(pt)?pt.join(" "):pt.toString());if(Jr.data.length!==0&&(yn.push({key:"Length",value:Jr.data.length}),Ot===!0&&yn.push({key:"Length1",value:sr})),jn.length!=0)if(jn.split("/").length-1==1)yn.push({key:"Filter",value:jn});else{yn.push({key:"Filter",value:"["+jn+"]"});for(var Zn=0;Zn<yn.length;Zn+=1)if(yn[Zn].key==="DecodeParms"){for(var ba=[],Us=0;Us<Jr.reverseChain.split("/").length-1;Us+=1)ba.push("null");ba.push(yn[Zn].value),yn[Zn].value="["+ba.join(" ")+"]"}}re("<<");for(var Pa=0;Pa<yn.length;Pa++)re("/"+yn[Pa].key+" "+yn[Pa].value);re(">>"),Jr.data.length!==0&&(re("stream"),re(Gr(Jr.data)),re("endstream"))},lt=h.__private__.putPage=function(H){var Se=H.number,nt=H.data,pt=H.objId,Ot=H.contentsObjId;S(pt,!0),re("<</Type /Page"),re("/Parent "+H.rootDictionaryObjId+" 0 R"),re("/Resources "+H.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(I(H.mediaBox.bottomLeftX))+" "+parseFloat(I(H.mediaBox.bottomLeftY))+" "+I(H.mediaBox.topRightX)+" "+I(H.mediaBox.topRightY)+"]"),H.cropBox!==null&&re("/CropBox ["+I(H.cropBox.bottomLeftX)+" "+I(H.cropBox.bottomLeftY)+" "+I(H.cropBox.topRightX)+" "+I(H.cropBox.topRightY)+"]"),H.bleedBox!==null&&re("/BleedBox ["+I(H.bleedBox.bottomLeftX)+" "+I(H.bleedBox.bottomLeftY)+" "+I(H.bleedBox.topRightX)+" "+I(H.bleedBox.topRightY)+"]"),H.trimBox!==null&&re("/TrimBox ["+I(H.trimBox.bottomLeftX)+" "+I(H.trimBox.bottomLeftY)+" "+I(H.trimBox.topRightX)+" "+I(H.trimBox.topRightY)+"]"),H.artBox!==null&&re("/ArtBox ["+I(H.artBox.bottomLeftX)+" "+I(H.artBox.bottomLeftY)+" "+I(H.artBox.topRightX)+" "+I(H.artBox.topRightY)+"]"),typeof H.userUnit=="number"&&H.userUnit!==1&&re("/UserUnit "+H.userUnit),gt.publish("putPage",{objId:pt,pageContext:$e[Se],pageNumber:Se,page:nt}),re("/Contents "+Ot+" 0 R"),re(">>"),re("endobj");var sr=nt.join(`
`);return w===b&&(sr+=`
Q`),S(Ot,!0),Ze({data:sr,filters:Ue(),objectId:Ot}),re("endobj"),pt},Qe=h.__private__.putPages=function(){var H,Se,nt=[];for(H=1;H<=Ce;H++)$e[H].objId=Be(),$e[H].contentsObjId=Be();for(H=1;H<=Ce;H++)nt.push(lt({number:H,data:ve[H],objId:$e[H].objId,contentsObjId:$e[H].contentsObjId,mediaBox:$e[H].mediaBox,cropBox:$e[H].cropBox,bleedBox:$e[H].bleedBox,trimBox:$e[H].trimBox,artBox:$e[H].artBox,userUnit:$e[H].userUnit,rootDictionaryObjId:U,resourceDictionaryObjId:q}));S(U,!0),re("<</Type /Pages");var pt="/Kids [";for(Se=0;Se<Ce;Se++)pt+=nt[Se]+" 0 R ";re(pt+"]"),re("/Count "+Ce),re(">>"),re("endobj"),gt.publish("postPutPages")},tt=function(H){gt.publish("putFont",{font:H,out:re,newObject:Oe,putStream:Ze}),H.isAlreadyPutted!==!0&&(H.objectNumber=Oe(),re("<<"),re("/Type /Font"),re("/BaseFont /"+Ix(H.postScriptName)),re("/Subtype /Type1"),typeof H.encoding=="string"&&re("/Encoding /"+H.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},ut=function(H){H.objectNumber=Oe();var Se=[];Se.push({key:"Type",value:"/XObject"}),Se.push({key:"Subtype",value:"/Form"}),Se.push({key:"BBox",value:"["+[I(H.x),I(H.y),I(H.x+H.width),I(H.y+H.height)].join(" ")+"]"}),Se.push({key:"Matrix",value:"["+H.matrix.toString()+"]"});var nt=H.pages[1].join(`
`);Ze({data:nt,additionalKeyValues:Se,objectId:H.objectNumber}),re("endobj")},Pt=function(H,Se){Se||(Se=21);var nt=Oe(),pt=function(fr,Gr){var Jr,yn=[],jn=1/(Gr-1);for(Jr=0;Jr<1;Jr+=jn)yn.push(Jr);if(yn.push(1),fr[0].offset!=0){var Zn={offset:0,color:fr[0].color};fr.unshift(Zn)}if(fr[fr.length-1].offset!=1){var ba={offset:1,color:fr[fr.length-1].color};fr.push(ba)}for(var Us="",Pa=0,oi=0;oi<yn.length;oi++){for(Jr=yn[oi];Jr>fr[Pa+1].offset;)Pa++;var Qs=fr[Pa].offset,li=(Jr-Qs)/(fr[Pa+1].offset-Qs),Vs=fr[Pa].color,yc=fr[Pa+1].color;Us+=Q(Math.round((1-li)*Vs[0]+li*yc[0]).toString(16))+Q(Math.round((1-li)*Vs[1]+li*yc[1]).toString(16))+Q(Math.round((1-li)*Vs[2]+li*yc[2]).toString(16))}return Us.trim()}(H.colors,Se),Ot=[];Ot.push({key:"FunctionType",value:"0"}),Ot.push({key:"Domain",value:"[0.0 1.0]"}),Ot.push({key:"Size",value:"["+Se+"]"}),Ot.push({key:"BitsPerSample",value:"8"}),Ot.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ot.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ze({data:pt,additionalKeyValues:Ot,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:nt}),re("endobj"),H.objectNumber=Oe(),re("<< /ShadingType "+H.type),re("/ColorSpace /DeviceRGB");var sr="/Coords ["+I(parseFloat(H.coords[0]))+" "+I(parseFloat(H.coords[1]))+" ";H.type===2?sr+=I(parseFloat(H.coords[2]))+" "+I(parseFloat(H.coords[3])):sr+=I(parseFloat(H.coords[2]))+" "+I(parseFloat(H.coords[3]))+" "+I(parseFloat(H.coords[4]))+" "+I(parseFloat(H.coords[5])),re(sr+="]"),H.matrix&&re("/Matrix ["+H.matrix.toString()+"]"),re("/Function "+nt+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},Ct=function(H,Se){var nt=Be(),pt=Oe();Se.push({resourcesOid:nt,objectOid:pt}),H.objectNumber=pt;var Ot=[];Ot.push({key:"Type",value:"/Pattern"}),Ot.push({key:"PatternType",value:"1"}),Ot.push({key:"PaintType",value:"1"}),Ot.push({key:"TilingType",value:"1"}),Ot.push({key:"BBox",value:"["+H.boundingBox.map(I).join(" ")+"]"}),Ot.push({key:"XStep",value:I(H.xStep)}),Ot.push({key:"YStep",value:I(H.yStep)}),Ot.push({key:"Resources",value:nt+" 0 R"}),H.matrix&&Ot.push({key:"Matrix",value:"["+H.matrix.toString()+"]"}),Ze({data:H.stream,additionalKeyValues:Ot,objectId:H.objectNumber}),re("endobj")},It=function(H){for(var Se in H.objectNumber=Oe(),re("<<"),H)switch(Se){case"opacity":re("/ca "+k(H[Se]));break;case"stroke-opacity":re("/CA "+k(H[Se]))}re(">>"),re("endobj")},St=function(H){S(H.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Se in re("/Font <<"),ye)ye.hasOwnProperty(Se)&&(f===!1||f===!0&&A.hasOwnProperty(Se))&&re("/"+Se+" "+ye[Se].objectNumber+" 0 R");re(">>")}(),function(){if(Object.keys(rt).length>0){for(var Se in re("/Shading <<"),rt)rt.hasOwnProperty(Se)&&rt[Se]instanceof I0&&rt[Se].objectNumber>=0&&re("/"+Se+" "+rt[Se].objectNumber+" 0 R");gt.publish("putShadingPatternDict"),re(">>")}}(),function(Se){if(Object.keys(rt).length>0){for(var nt in re("/Pattern <<"),rt)rt.hasOwnProperty(nt)&&rt[nt]instanceof h.TilingPattern&&rt[nt].objectNumber>=0&&rt[nt].objectNumber<Se&&re("/"+nt+" "+rt[nt].objectNumber+" 0 R");gt.publish("putTilingPatternDict"),re(">>")}}(H.objectOid),function(){if(Object.keys(_e).length>0){var Se;for(Se in re("/ExtGState <<"),_e)_e.hasOwnProperty(Se)&&_e[Se].objectNumber>=0&&re("/"+Se+" "+_e[Se].objectNumber+" 0 R");gt.publish("putGStateDict"),re(">>")}}(),function(){for(var Se in re("/XObject <<"),Ut)Ut.hasOwnProperty(Se)&&Ut[Se].objectNumber>=0&&re("/"+Se+" "+Ut[Se].objectNumber+" 0 R");gt.publish("putXobjectDict"),re(">>")}(),re(">>"),re("endobj")},Zt=function(H){Xe[H.fontName]=Xe[H.fontName]||{},Xe[H.fontName][H.fontStyle]=H.id},Er=function(H,Se,nt,pt,Ot){var sr={id:"F"+(Object.keys(ye).length+1).toString(10),postScriptName:H,fontName:Se,fontStyle:nt,encoding:pt,isStandardFont:Ot||!1,metadata:{}};return gt.publish("addFont",{font:sr,instance:this}),ye[sr.id]=sr,Zt(sr),sr.id},Nr=h.__private__.pdfEscape=h.pdfEscape=function(H,Se){return function(nt,pt){var Ot,sr,fr,Gr,Jr,yn,jn,Zn,ba;if(fr=(pt=pt||{}).sourceEncoding||"Unicode",Jr=pt.outputEncoding,(pt.autoencode||Jr)&&ye[be].metadata&&ye[be].metadata[fr]&&ye[be].metadata[fr].encoding&&(Gr=ye[be].metadata[fr].encoding,!Jr&&ye[be].encoding&&(Jr=ye[be].encoding),!Jr&&Gr.codePages&&(Jr=Gr.codePages[0]),typeof Jr=="string"&&(Jr=Gr[Jr]),Jr)){for(jn=!1,yn=[],Ot=0,sr=nt.length;Ot<sr;Ot++)(Zn=Jr[nt.charCodeAt(Ot)])?yn.push(String.fromCharCode(Zn)):yn.push(nt[Ot]),yn[Ot].charCodeAt(0)>>8&&(jn=!0);nt=yn.join("")}for(Ot=nt.length;jn===void 0&&Ot!==0;)nt.charCodeAt(Ot-1)>>8&&(jn=!0),Ot--;if(!jn)return nt;for(yn=pt.noBOM?[]:[254,255],Ot=0,sr=nt.length;Ot<sr;Ot++){if((ba=(Zn=nt.charCodeAt(Ot))>>8)>>8)throw new Error("Character at position "+Ot+" of string '"+nt+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");yn.push(ba),yn.push(Zn-(ba<<8))}return String.fromCharCode.apply(void 0,yn)}(H,Se).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dr=h.__private__.beginPage=function(H){ve[++Ce]=[],$e[Ce]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(H[0]),topRightY:Number(H[1])}},Yr(Ce),ie(ve[K])},nn=function(H,Se){var nt,pt,Ot;switch(r=Se||r,typeof H=="string"&&(nt=v(H.toLowerCase()),Array.isArray(nt)&&(pt=nt[0],Ot=nt[1])),Array.isArray(H)&&(pt=H[0]*ce,Ot=H[1]*ce),isNaN(pt)&&(pt=a[0],Ot=a[1]),(pt>14400||Ot>14400)&&(ts.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pt=Math.min(14400,pt),Ot=Math.min(14400,Ot)),a=[pt,Ot],r.substr(0,1)){case"l":Ot>pt&&(a=[Ot,pt]);break;case"p":pt>Ot&&(a=[Ot,pt])}Dr(a),Vr(Aa),re(Ed),Ka!==0&&re(Ka+" J"),Om!==0&&re(Om+" j"),gt.publish("addPage",{pageNumber:Ce})},pn=function(H){H>0&&H<=Ce&&(ve.splice(H,1),$e.splice(H,1),Ce--,K>Ce&&(K=Ce),this.setPage(K))},Yr=function(H){H>0&&H<=Ce&&(K=H)},dn=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return ve.length-1},Vn=function(H,Se,nt){var pt,Ot=void 0;return nt=nt||{},H=H!==void 0?H:ye[be].fontName,Se=Se!==void 0?Se:ye[be].fontStyle,pt=H.toLowerCase(),Xe[pt]!==void 0&&Xe[pt][Se]!==void 0?Ot=Xe[pt][Se]:Xe[H]!==void 0&&Xe[H][Se]!==void 0?Ot=Xe[H][Se]:nt.disableWarning===!1&&ts.warn("Unable to look up font label for font '"+H+"', '"+Se+"'. Refer to getFontList() for available fonts."),Ot||nt.noFallback||(Ot=Xe.times[Se])==null&&(Ot=Xe.times.normal),Ot},an=h.__private__.putInfo=function(){var H=Oe(),Se=function(pt){return pt};for(var nt in d!==null&&(Se=bt.encryptor(H,0)),re("<<"),re("/Producer ("+Nr(Se("jsPDF "+$r.version))+")"),Pe)Pe.hasOwnProperty(nt)&&Pe[nt]&&re("/"+nt.substr(0,1).toUpperCase()+nt.substr(1)+" ("+Nr(Se(Pe[nt]))+")");re("/CreationDate ("+Nr(Se(me))+")"),re(">>"),re("endobj")},Je=h.__private__.putCatalog=function(H){var Se=(H=H||{}).rootDictionaryObjId||U;switch(Oe(),re("<<"),re("/Type /Catalog"),re("/Pages "+Se+" 0 R"),Ge||(Ge="fullwidth"),Ge){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var nt=""+Ge;nt.substr(nt.length-1)==="%"&&(Ge=parseInt(Ge)/100),typeof Ge=="number"&&re("/OpenAction [3 0 R /XYZ null null "+k(Ge)+"]")}switch(kt||(kt="continuous"),kt){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}xt&&re("/PageMode /"+xt),gt.publish("putCatalog"),re(">>"),re("endobj")},Bt=h.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(J+1)),re("/Root "+J+" 0 R"),re("/Info "+(J-1)+" 0 R"),d!==null&&re("/Encrypt "+bt.oid+" 0 R"),re("/ID [ <"+pe+"> <"+pe+"> ]"),re(">>")},Ft=h.__private__.putHeader=function(){re("%PDF-"+m),re("%")},hr=h.__private__.putXRef=function(){var H="0000000000";re("xref"),re("0 "+(J+1)),re("0000000000 65535 f ");for(var Se=1;Se<=J;Se++)typeof ee[Se]=="function"?re((H+ee[Se]()).slice(-10)+" 00000 n "):ee[Se]!==void 0?re((H+ee[Se]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},dr=h.__private__.buildDocument=function(){var H;J=0,G=0,M=[],ee=[],ne=[],U=Be(),q=Be(),ie(M),gt.publish("buildDocument"),Ft(),Qe(),function(){gt.publish("putAdditionalObjects");for(var nt=0;nt<ne.length;nt++){var pt=ne[nt];S(pt.objId,!0),re(pt.content),re("endobj")}gt.publish("postPutAdditionalObjects")}(),H=[],function(){for(var nt in ye)ye.hasOwnProperty(nt)&&(f===!1||f===!0&&A.hasOwnProperty(nt))&&tt(ye[nt])}(),function(){var nt;for(nt in _e)_e.hasOwnProperty(nt)&&It(_e[nt])}(),function(){for(var nt in Ut)Ut.hasOwnProperty(nt)&&ut(Ut[nt])}(),function(nt){var pt;for(pt in rt)rt.hasOwnProperty(pt)&&(rt[pt]instanceof I0?Pt(rt[pt]):rt[pt]instanceof xp&&Ct(rt[pt],nt))}(H),gt.publish("putResources"),H.forEach(St),St({resourcesOid:q,objectOid:Number.MAX_SAFE_INTEGER}),gt.publish("postPutResources"),d!==null&&(bt.oid=Oe(),re("<<"),re("/Filter /Standard"),re("/V "+bt.v),re("/R "+bt.r),re("/U <"+bt.toHexString(bt.U)+">"),re("/O <"+bt.toHexString(bt.O)+">"),re("/P "+bt.P),re(">>"),re("endobj")),an(),Je();var Se=G;return hr(),Bt(),re("startxref"),re(""+Se),re("%%EOF"),ie(ve[K]),M.join(`
`)},lr=h.__private__.getBlob=function(H){return new Blob([de(H)],{type:"application/pdf"})},dt=h.output=h.__private__.output=(Ee=function(H,Se){switch(typeof(Se=Se||{})=="string"?Se={filename:Se}:Se.filename=Se.filename||"generated.pdf",H){case void 0:return dr();case"save":h.save(Se.filename);break;case"arraybuffer":return de(dr());case"blob":return lr(dr());case"bloburi":case"bloburl":if(Sn.URL!==void 0&&typeof Sn.URL.createObjectURL=="function")return Sn.URL&&Sn.URL.createObjectURL(lr(dr()))||void 0;ts.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var nt="",pt=dr();try{nt=lV(pt)}catch{nt=lV(unescape(encodeURIComponent(pt)))}return"data:application/pdf;filename="+Se.filename+";base64,"+nt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Sn)==="[object Window]"){var Ot="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",sr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Se.pdfObjectUrl&&(Ot=Se.pdfObjectUrl,sr="");var fr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ot+'"'+sr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Se)+");<\/script></body></html>",Gr=Sn.open();return Gr!==null&&Gr.document.write(fr),Gr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Sn)==="[object Window]"){var Jr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Se.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Se.filename+'" width="500px" height="400px" /></body></html>',yn=Sn.open();if(yn!==null){yn.document.write(Jr);var jn=this;yn.document.documentElement.querySelector("#pdfViewer").onload=function(){yn.document.title=Se.filename,yn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(jn.output("bloburl"))}}return yn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Sn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Zn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Se)+'"></iframe></body></html>',ba=Sn.open();if(ba!==null&&(ba.document.write(Zn),ba.document.title=Se.filename),ba||typeof safari>"u")return ba;break;case"datauri":case"dataurl":return Sn.document.location.href=this.output("datauristring",Se);default:return null}},Ee.foo=function(){try{return Ee.apply(this,arguments)}catch(nt){var H=nt.stack||"";~H.indexOf(" at ")&&(H=H.split(" at ")[1]);var Se="Error in function "+H.split(`
`)[0].split("<")[0]+": "+nt.message;if(!Sn.console)throw new Error(Se);Sn.console.error(Se,nt),Sn.alert&&alert(Se)}},Ee.foo.bar=Ee,Ee.foo),Et=function(H){return Array.isArray(Kt)===!0&&Kt.indexOf(H)>-1};switch(n){case"pt":ce=1;break;case"mm":ce=72/25.4;break;case"cm":ce=72/2.54;break;case"in":ce=72;break;case"px":ce=Et("px_scaling")==1?.75:96/72;break;case"pc":case"em":ce=12;break;case"ex":ce=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ce=n}var bt=null;Te(),ge();var Tt=h.__private__.getPageInfo=h.getPageInfo=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:$e[H].objId,pageNumber:H,pageContext:$e[H]}},Ht=h.__private__.getPageInfoByObjId=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Se in $e)if($e[Se].objId===H)break;return Tt(Se)},Dt=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:$e[K].objId,pageNumber:K,pageContext:$e[K]}};h.addPage=function(){return nn.apply(this,arguments),this},h.setPage=function(){return Yr.apply(this,arguments),ie.call(this,ve[K]),this},h.insertPage=function(H){return this.addPage(),this.movePage(K,H),this},h.movePage=function(H,Se){var nt,pt;if(H>Se){nt=ve[H],pt=$e[H];for(var Ot=H;Ot>Se;Ot--)ve[Ot]=ve[Ot-1],$e[Ot]=$e[Ot-1];ve[Se]=nt,$e[Se]=pt,this.setPage(Se)}else if(H<Se){nt=ve[H],pt=$e[H];for(var sr=H;sr<Se;sr++)ve[sr]=ve[sr+1],$e[sr]=$e[sr+1];ve[Se]=nt,$e[Se]=pt,this.setPage(Se)}return this},h.deletePage=function(){return pn.apply(this,arguments),this},h.__private__.text=h.text=function(H,Se,nt,pt,Ot){var sr,fr,Gr,Jr,yn,jn,Zn,ba,Us,Pa=(pt=pt||{}).scope||this;if(typeof H=="number"&&typeof Se=="number"&&(typeof nt=="string"||Array.isArray(nt))){var oi=nt;nt=Se,Se=H,H=oi}if(arguments[3]instanceof X==0?(Gr=arguments[4],Jr=arguments[5],Qa(Zn=arguments[3])==="object"&&Zn!==null||(typeof Gr=="string"&&(Jr=Gr,Gr=null),typeof Zn=="string"&&(Jr=Zn,Zn=null),typeof Zn=="number"&&(Gr=Zn,Zn=null),pt={flags:Zn,angle:Gr,align:Jr})):(E("The transform parameter of text() with a Matrix value"),Us=Ot),isNaN(Se)||isNaN(nt)||H==null)throw new Error("Invalid arguments passed to jsPDF.text");if(H.length===0)return Pa;var Qs,li="",Vs=typeof pt.lineHeightFactor=="number"?pt.lineHeightFactor:vn,yc=Pa.internal.scaleFactor;function Tu(Sa){return Sa=Sa.split("	").join(Array(pt.TabLen||9).join(" ")),Nr(Sa,Zn)}function ku(Sa){for(var Ja,yi=Sa.concat(),Ji=[],lh=yi.length;lh--;)typeof(Ja=yi.shift())=="string"?Ji.push(Ja):Array.isArray(Sa)&&(Ja.length===1||Ja[1]===void 0&&Ja[2]===void 0)?Ji.push(Ja[0]):Ji.push([Ja[0],Ja[1],Ja[2]]);return Ji}function C(Sa,Ja){var yi;if(typeof Sa=="string")yi=Ja(Sa)[0];else if(Array.isArray(Sa)){for(var Ji,lh,O1=Sa.concat(),$g=[],fN=O1.length;fN--;)typeof(Ji=O1.shift())=="string"?$g.push(Ja(Ji)[0]):Array.isArray(Ji)&&typeof Ji[0]=="string"&&(lh=Ja(Ji[0],Ji[1],Ji[2]),$g.push([lh[0],lh[1],lh[2]]));yi=$g}return yi}var Z=!1,xe=!0;if(typeof H=="string")Z=!0;else if(Array.isArray(H)){var ze=H.concat();fr=[];for(var Rt,Wt=ze.length;Wt--;)(typeof(Rt=ze.shift())!="string"||Array.isArray(Rt)&&typeof Rt[0]!="string")&&(xe=!1);Z=xe}if(Z===!1)throw new Error('Type of text must be string or Array. "'+H+'" is not recognized.');typeof H=="string"&&(H=H.match(/[\r?\n]/)?H.split(/\r\n|\r|\n/g):[H]);var Sr=Le/Pa.internal.scaleFactor,aa=Sr*(Vs-1);switch(pt.baseline){case"bottom":nt-=aa;break;case"top":nt+=Sr-aa;break;case"hanging":nt+=Sr-2*aa;break;case"middle":nt+=Sr/2-aa}if((jn=pt.maxWidth||0)>0&&(typeof H=="string"?H=Pa.splitTextToSize(H,jn):Object.prototype.toString.call(H)==="[object Array]"&&(H=H.reduce(function(Sa,Ja){return Sa.concat(Pa.splitTextToSize(Ja,jn))},[]))),sr={text:H,x:Se,y:nt,options:pt,mutex:{pdfEscape:Nr,activeFontKey:be,fonts:ye,activeFontSize:Le}},gt.publish("preProcessText",sr),H=sr.text,Gr=(pt=sr.options).angle,Us instanceof X==0&&Gr&&typeof Gr=="number"){Gr*=Math.PI/180,pt.rotationDirection===0&&(Gr=-Gr),w===b&&(Gr=-Gr);var Hs=Math.cos(Gr),qn=Math.sin(Gr);Us=new X(Hs,qn,-qn,Hs,0,0)}else Gr&&Gr instanceof X&&(Us=Gr);w!==b||Us||(Us=L),(yn=pt.charSpace||Iu)!==void 0&&(li+=I(R(yn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ba=pt.horizontalScale)!==void 0&&(li+=I(100*ba)+` Tz
`),pt.lang;var ma=-1,ss=pt.renderingMode!==void 0?pt.renderingMode:pt.stroke,qc=Pa.internal.getCurrentPageInfo().pageContext;switch(ss){case 0:case!1:case"fill":ma=0;break;case 1:case!0:case"stroke":ma=1;break;case 2:case"fillThenStroke":ma=2;break;case 3:case"invisible":ma=3;break;case 4:case"fillAndAddForClipping":ma=4;break;case 5:case"strokeAndAddPathForClipping":ma=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ma=6;break;case 7:case"addToPathForClipping":ma=7}var vl=qc.usedRenderingMode!==void 0?qc.usedRenderingMode:-1;ma!==-1?li+=ma+` Tr
`:vl!==-1&&(li+=`0 Tr
`),ma!==-1&&(qc.usedRenderingMode=ma),Jr=pt.align||"left";var qo,Sd=Le*Vs,I1=Pa.internal.pageSize.getWidth(),j1=ye[be];yn=pt.charSpace||Iu,jn=pt.maxWidth||0,Zn=Object.assign({autoencode:!0,noBOM:!0},pt.flags);var RA=[],Mm=function(Sa){return Pa.getStringUnitWidth(Sa,{font:j1,charSpace:yn,fontSize:Le,doKerning:!1})*Le/yc};if(Object.prototype.toString.call(H)==="[object Array]"){var zc;fr=ku(H),Jr!=="left"&&(qo=fr.map(Mm));var Wc,MA=0;if(Jr==="right"){Se-=qo[0],H=[],Wt=fr.length;for(var oh=0;oh<Wt;oh++)oh===0?(Wc=Tn(Se),zc=ii(nt)):(Wc=R(MA-qo[oh]),zc=-Sd),H.push([fr[oh],Wc,zc]),MA=qo[oh]}else if(Jr==="center"){Se-=qo[0]/2,H=[],Wt=fr.length;for(var LA=0;LA<Wt;LA++)LA===0?(Wc=Tn(Se),zc=ii(nt)):(Wc=R((MA-qo[LA])/2),zc=-Sd),H.push([fr[LA],Wc,zc]),MA=qo[LA]}else if(Jr==="left"){H=[],Wt=fr.length;for(var P1=0;P1<Wt;P1++)H.push(fr[P1])}else if(Jr==="justify"&&j1.encoding==="Identity-H"){H=[],Wt=fr.length,jn=jn!==0?jn:I1;for(var Hg=0,vi=0;vi<Wt;vi++)if(zc=vi===0?ii(nt):-Sd,Wc=vi===0?Tn(Se):Hg,vi<Wt-1){var dN=R((jn-qo[vi])/(fr[vi].split(" ").length-1)),xf=fr[vi].split(" ");H.push([xf[0]+" ",Wc,zc]),Hg=0;for(var vf=1;vf<xf.length;vf++){var B1=(Mm(xf[vf-1]+" "+xf[vf])-Mm(xf[vf]))*yc+dN;vf==xf.length-1?H.push([xf[vf],B1,0]):H.push([xf[vf]+" ",B1,0]),Hg-=B1}}else H.push([fr[vi],Wc,zc]);H.push(["",Hg,0])}else{if(Jr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(H=[],Wt=fr.length,jn=jn!==0?jn:I1,vi=0;vi<Wt;vi++){zc=vi===0?ii(nt):-Sd,Wc=vi===0?Tn(Se):0;var T1=fr[vi].split(" ").length-1,k1=T1>0?(jn-qo[vi])/T1:0;vi<Wt-1?RA.push(I(R(k1))):RA.push(0),H.push([fr[vi],Wc,zc])}}}(typeof pt.R2L=="boolean"?pt.R2L:ht)===!0&&(H=C(H,function(Sa,Ja,yi){return[Sa.split("").reverse().join(""),Ja,yi]})),sr={text:H,x:Se,y:nt,options:pt,mutex:{pdfEscape:Nr,activeFontKey:be,fonts:ye,activeFontSize:Le}},gt.publish("postProcessText",sr),H=sr.text,Qs=sr.mutex.isHex||!1;var F1=ye[be].encoding;F1!=="WinAnsiEncoding"&&F1!=="StandardEncoding"||(H=C(H,function(Sa,Ja,yi){return[Tu(Sa),Ja,yi]})),fr=ku(H),H=[];for(var UA,QA,VA,Lm=Array.isArray(fr[0])?1:0,HA="",Um=function(Sa,Ja,yi){var Ji="";return yi instanceof X?(yi=typeof pt.angle=="number"?oe(yi,new X(1,0,0,1,Sa,Ja)):oe(new X(1,0,0,1,Sa,Ja),yi),w===b&&(yi=oe(new X(1,0,0,-1,0,0),yi)),Ji=yi.join(" ")+` Tm
`):Ji=I(Sa)+" "+I(Ja)+` Td
`,Ji},Fu=0;Fu<fr.length;Fu++){switch(HA="",Lm){case 1:VA=(Qs?"<":"(")+fr[Fu][0]+(Qs?">":")"),UA=parseFloat(fr[Fu][1]),QA=parseFloat(fr[Fu][2]);break;case 0:VA=(Qs?"<":"(")+fr[Fu]+(Qs?">":")"),UA=Tn(Se),QA=ii(nt)}RA!==void 0&&RA[Fu]!==void 0&&(HA=RA[Fu]+` Tw
`),Fu===0?H.push(HA+Um(UA,QA,Us)+VA):Lm===0?H.push(HA+VA):Lm===1&&H.push(HA+Um(UA,QA,Us)+VA)}H=Lm===0?H.join(` Tj
T* `):H.join(` Tj
`),H+=` Tj
`;var yf=`BT
/`;return yf+=be+" "+Le+` Tf
`,yf+=I(Le*Vs)+` TL
`,yf+=Kc+`
`,yf+=li,yf+=H,re(yf+="ET"),A[be]=!0,Pa};var ke=h.__private__.clip=h.clip=function(H){return re(H==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return ke("evenodd")},h.__private__.discardPath=h.discardPath=function(){return re("n"),this};var yt=h.__private__.isValidStyle=function(H){var Se=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(H)!==-1&&(Se=!0),Se};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(H){return yt(H)&&(u=H),this};var Nt=h.__private__.getStyle=h.getStyle=function(H){var Se=u;switch(H){case"D":case"S":Se="S";break;case"F":Se="f";break;case"FD":case"DF":Se="B";break;case"f":case"f*":case"B":case"B*":Se=H}return Se},ct=h.close=function(){return re("h"),this};h.stroke=function(){return re("S"),this},h.fill=function(H){return Xt("f",H),this},h.fillEvenOdd=function(H){return Xt("f*",H),this},h.fillStroke=function(H){return Xt("B",H),this},h.fillStrokeEvenOdd=function(H){return Xt("B*",H),this};var Xt=function(H,Se){Qa(Se)==="object"?cr(Se,H):re(H)},zt=function(H){H===null||w===b&&H===void 0||(H=Nt(H),re(H))};function xr(H,Se,nt,pt,Ot){var sr=new xp(Se||this.boundingBox,nt||this.xStep,pt||this.yStep,this.gState,Ot||this.matrix);sr.stream=this.stream;var fr=H+"$$"+this.cloneIndex+++"$$";return Ae(fr,sr),sr}var cr=function(H,Se){var nt=ue[H.key],pt=rt[nt];if(pt instanceof I0)re("q"),re(yr(Se)),pt.gState&&h.setGState(pt.gState),re(H.matrix.toString()+" cm"),re("/"+nt+" sh"),re("Q");else if(pt instanceof xp){var Ot=new X(1,0,0,-1,0,Bu());H.matrix&&(Ot=Ot.multiply(H.matrix||L),nt=xr.call(pt,H.key,H.boundingBox,H.xStep,H.yStep,Ot).id),re("q"),re("/Pattern cs"),re("/"+nt+" scn"),pt.gState&&h.setGState(pt.gState),re(Se),re("Q")}},yr=function(H){switch(H){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Tr=h.moveTo=function(H,Se){return re(I(R(H))+" "+I(Y(Se))+" m"),this},sn=h.lineTo=function(H,Se){return re(I(R(H))+" "+I(Y(Se))+" l"),this},Ar=h.curveTo=function(H,Se,nt,pt,Ot,sr){return re([I(R(H)),I(Y(Se)),I(R(nt)),I(Y(pt)),I(R(Ot)),I(Y(sr)),"c"].join(" ")),this};h.__private__.line=h.line=function(H,Se,nt,pt,Ot){if(isNaN(H)||isNaN(Se)||isNaN(nt)||isNaN(pt)||!yt(Ot))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[nt-H,pt-Se]],H,Se,[1,1],Ot||"S"):this.lines([[nt-H,pt-Se]],H,Se,[1,1]).stroke()},h.__private__.lines=h.lines=function(H,Se,nt,pt,Ot,sr){var fr,Gr,Jr,yn,jn,Zn,ba,Us,Pa,oi,Qs,li;if(typeof H=="number"&&(li=nt,nt=Se,Se=H,H=li),pt=pt||[1,1],sr=sr||!1,isNaN(Se)||isNaN(nt)||!Array.isArray(H)||!Array.isArray(pt)||!yt(Ot)||typeof sr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Tr(Se,nt),fr=pt[0],Gr=pt[1],yn=H.length,oi=Se,Qs=nt,Jr=0;Jr<yn;Jr++)(jn=H[Jr]).length===2?(oi=jn[0]*fr+oi,Qs=jn[1]*Gr+Qs,sn(oi,Qs)):(Zn=jn[0]*fr+oi,ba=jn[1]*Gr+Qs,Us=jn[2]*fr+oi,Pa=jn[3]*Gr+Qs,oi=jn[4]*fr+oi,Qs=jn[5]*Gr+Qs,Ar(Zn,ba,Us,Pa,oi,Qs));return sr&&ct(),zt(Ot),this},h.path=function(H){for(var Se=0;Se<H.length;Se++){var nt=H[Se],pt=nt.c;switch(nt.op){case"m":Tr(pt[0],pt[1]);break;case"l":sn(pt[0],pt[1]);break;case"c":Ar.apply(this,pt);break;case"h":ct()}}return this},h.__private__.rect=h.rect=function(H,Se,nt,pt,Ot){if(isNaN(H)||isNaN(Se)||isNaN(nt)||isNaN(pt)||!yt(Ot))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(pt=-pt),re([I(R(H)),I(Y(Se)),I(R(nt)),I(R(pt)),"re"].join(" ")),zt(Ot),this},h.__private__.triangle=h.triangle=function(H,Se,nt,pt,Ot,sr,fr){if(isNaN(H)||isNaN(Se)||isNaN(nt)||isNaN(pt)||isNaN(Ot)||isNaN(sr)||!yt(fr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[nt-H,pt-Se],[Ot-nt,sr-pt],[H-Ot,Se-sr]],H,Se,[1,1],fr,!0),this},h.__private__.roundedRect=h.roundedRect=function(H,Se,nt,pt,Ot,sr,fr){if(isNaN(H)||isNaN(Se)||isNaN(nt)||isNaN(pt)||isNaN(Ot)||isNaN(sr)||!yt(fr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Gr=4/3*(Math.SQRT2-1);return Ot=Math.min(Ot,.5*nt),sr=Math.min(sr,.5*pt),this.lines([[nt-2*Ot,0],[Ot*Gr,0,Ot,sr-sr*Gr,Ot,sr],[0,pt-2*sr],[0,sr*Gr,-Ot*Gr,sr,-Ot,sr],[2*Ot-nt,0],[-Ot*Gr,0,-Ot,-sr*Gr,-Ot,-sr],[0,2*sr-pt],[0,-sr*Gr,Ot*Gr,-sr,Ot,-sr]],H+Ot,Se,[1,1],fr,!0),this},h.__private__.ellipse=h.ellipse=function(H,Se,nt,pt,Ot){if(isNaN(H)||isNaN(Se)||isNaN(nt)||isNaN(pt)||!yt(Ot))throw new Error("Invalid arguments passed to jsPDF.ellipse");var sr=4/3*(Math.SQRT2-1)*nt,fr=4/3*(Math.SQRT2-1)*pt;return Tr(H+nt,Se),Ar(H+nt,Se-fr,H+sr,Se-pt,H,Se-pt),Ar(H-sr,Se-pt,H-nt,Se-fr,H-nt,Se),Ar(H-nt,Se+fr,H-sr,Se+pt,H,Se+pt),Ar(H+sr,Se+pt,H+nt,Se+fr,H+nt,Se),zt(Ot),this},h.__private__.circle=h.circle=function(H,Se,nt,pt){if(isNaN(H)||isNaN(Se)||isNaN(nt)||!yt(pt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(H,Se,nt,nt,pt)},h.setFont=function(H,Se,nt){return nt&&(Se=_(Se,nt)),be=Vn(H,Se,{disableWarning:!1}),this};var Qr=h.__private__.getFont=h.getFont=function(){return ye[Vn.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var H,Se,nt={};for(H in Xe)if(Xe.hasOwnProperty(H))for(Se in nt[H]=[],Xe[H])Xe[H].hasOwnProperty(Se)&&nt[H].push(Se);return nt},h.addFont=function(H,Se,nt,pt,Ot){var sr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&sr.indexOf(arguments[3])!==-1?Ot=arguments[3]:arguments[3]&&sr.indexOf(arguments[3])==-1&&(nt=_(nt,pt)),Er.call(this,H,Se,nt,Ot=Ot||"Identity-H")};var vn,Aa=t.lineWidth||.200025,On=h.__private__.getLineWidth=h.getLineWidth=function(){return Aa},Vr=h.__private__.setLineWidth=h.setLineWidth=function(H){return Aa=H,re(I(R(H))+" w"),this};h.__private__.setLineDash=$r.API.setLineDash=$r.API.setLineDashPattern=function(H,Se){if(H=H||[],Se=Se||0,isNaN(Se)||!Array.isArray(H))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return H=H.map(function(nt){return I(R(nt))}).join(" "),Se=I(R(Se)),re("["+H+"] "+Se+" d"),this};var Yi=h.__private__.getLineHeight=h.getLineHeight=function(){return Le*vn};h.__private__.getLineHeight=h.getLineHeight=function(){return Le*vn};var Ms=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(H){return typeof(H=H||1.15)=="number"&&(vn=H),this},Ls=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return vn};Ms(t.lineHeight);var Tn=h.__private__.getHorizontalCoordinate=function(H){return R(H)},ii=h.__private__.getVerticalCoordinate=function(H){return w===b?H:$e[K].mediaBox.topRightY-$e[K].mediaBox.bottomLeftY-R(H)},Gc=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(H){return I(Tn(H))},kA=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(H){return I(ii(H))},Ed=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return ae(Ed)},h.__private__.setStrokeColor=h.setDrawColor=function(H,Se,nt,pt){return Ed=fe({ch1:H,ch2:Se,ch3:nt,ch4:pt,pdfColorType:"draw",precision:2}),re(Ed),this};var FA=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return ae(FA)},h.__private__.setFillColor=h.setFillColor=function(H,Se,nt,pt){return FA=fe({ch1:H,ch2:Se,ch3:nt,ch4:pt,pdfColorType:"fill",precision:2}),re(FA),this};var Kc=t.textColor||"0 g",sh=h.__private__.getTextColor=h.getTextColor=function(){return ae(Kc)};h.__private__.setTextColor=h.setTextColor=function(H,Se,nt,pt){return Kc=fe({ch1:H,ch2:Se,ch3:nt,ch4:pt,pdfColorType:"text",precision:3}),this};var Iu=t.charSpace,Fm=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Iu||0)};h.__private__.setCharSpace=h.setCharSpace=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Iu=H,this};var Ka=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(H){var Se=h.CapJoinStyles[H];if(Se===void 0)throw new Error("Line cap style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ka=Se,re(Se+" J"),this};var Om=0;h.__private__.setLineJoin=h.setLineJoin=function(H){var Se=h.CapJoinStyles[H];if(Se===void 0)throw new Error("Line join style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Om=Se,re(Se+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(H){if(H=H||0,isNaN(H))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(I(R(H))+" M"),this},h.GState=N2,h.setGState=function(H){(H=typeof H=="string"?_e[We[H]]:Qg(null,H)).equals(ot)||(re("/"+H.id+" gs"),ot=H)};var Qg=function(H,Se){if(!H||!We[H]){var nt=!1;for(var pt in _e)if(_e.hasOwnProperty(pt)&&_e[pt].equals(Se)){nt=!0;break}if(nt)Se=_e[pt];else{var Ot="GS"+(Object.keys(_e).length+1).toString(10);_e[Ot]=Se,Se.id=Ot}return H&&(We[H]=Se.id),gt.publish("addGState",Se),Se}};h.addGState=function(H,Se){return Qg(H,Se),this},h.saveGraphicsState=function(){return re("q"),mt.push({key:be,size:Le,color:Kc}),this},h.restoreGraphicsState=function(){re("Q");var H=mt.pop();return be=H.key,Le=H.size,Kc=H.color,ot=null,this},h.setCurrentTransformationMatrix=function(H){return re(H.toString()+" cm"),this},h.comment=function(H){return re("#"+H),this};var ju=function(H,Se){var nt=H||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return nt},set:function(sr){isNaN(sr)||(nt=parseFloat(sr))}});var pt=Se||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pt},set:function(sr){isNaN(sr)||(pt=parseFloat(sr))}});var Ot="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ot},set:function(sr){Ot=sr.toString()}}),this},OA=function(H,Se,nt,pt){ju.call(this,H,Se),this.type="rect";var Ot=nt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ot},set:function(fr){isNaN(fr)||(Ot=parseFloat(fr))}});var sr=pt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return sr},set:function(fr){isNaN(fr)||(sr=parseFloat(fr))}}),this},ih=function(){this.page=Ce,this.currentPage=K,this.pages=ve.slice(0),this.pagesContext=$e.slice(0),this.x=te,this.y=Ne,this.matrix=Re,this.width=zl(K),this.height=Vg(K),this.outputDestination=qe,this.id="",this.objectNumber=-1};ih.prototype.restore=function(){Ce=this.page,K=this.currentPage,$e=this.pagesContext,ve=this.pages,te=this.x,Ne=this.y,Re=this.matrix,Dm(K,this.width),Wl(K,this.height),qe=this.outputDestination};var pf=function(H,Se,nt,pt,Ot){it.push(new ih),Ce=K=0,ve=[],te=H,Ne=Se,Re=Ot,Dr([nt,pt])};for(var gf in h.beginFormObject=function(H,Se,nt,pt,Ot){return pf(H,Se,nt,pt,Ot),this},h.endFormObject=function(H){return function(Se){if(Jt[Se])it.pop().restore();else{var nt=new ih,pt="Xo"+(Object.keys(Ut).length+1).toString(10);nt.id=pt,Jt[Se]=pt,Ut[pt]=nt,gt.publish("addFormObject",nt),it.pop().restore()}}(H),this},h.doFormObject=function(H,Se){var nt=Ut[Jt[H]];return re("q"),re(Se.toString()+" cm"),re("/"+nt.id+" Do"),re("Q"),this},h.getFormObject=function(H){var Se=Ut[Jt[H]];return{x:Se.x,y:Se.y,width:Se.width,height:Se.height,matrix:Se.matrix}},h.save=function(H,Se){return H=H||"generated.pdf",(Se=Se||{}).returnPromise=Se.returnPromise||!1,Se.returnPromise===!1?(tp(lr(dr()),H),typeof tp.unload=="function"&&Sn.setTimeout&&setTimeout(tp.unload,911),this):new Promise(function(nt,pt){try{var Ot=tp(lr(dr()),H);typeof tp.unload=="function"&&Sn.setTimeout&&setTimeout(tp.unload,911),nt(Ot)}catch(sr){pt(sr.message)}})},$r.API)$r.API.hasOwnProperty(gf)&&(gf==="events"&&$r.API.events.length?function(H,Se){var nt,pt,Ot;for(Ot=Se.length-1;Ot!==-1;Ot--)nt=Se[Ot][0],pt=Se[Ot][1],H.subscribe.apply(H,[nt].concat(typeof pt=="function"?[pt]:pt))}(gt,$r.API.events):h[gf]=$r.API[gf]);function zl(H){return $e[H].mediaBox.topRightX-$e[H].mediaBox.bottomLeftX}function Dm(H,Se){$e[H].mediaBox.topRightX=Se+$e[H].mediaBox.bottomLeftX}function Vg(H){return $e[H].mediaBox.topRightY-$e[H].mediaBox.bottomLeftY}function Wl(H,Se){$e[H].mediaBox.topRightY=Se+$e[H].mediaBox.bottomLeftY}var Pu=h.getPageWidth=function(H){return zl(H=H||K)/ce},DA=h.setPageWidth=function(H,Se){Dm(H,Se*ce)},Bu=h.getPageHeight=function(H){return Vg(H=H||K)/ce},Rm=h.setPageHeight=function(H,Se){Wl(H,Se*ce)};return h.internal={pdfEscape:Nr,getStyle:Nt,getFont:Qr,getFontSize:ft,getCharSpace:Fm,getTextColor:sh,getLineHeight:Yi,getLineHeightFactor:Ls,getLineWidth:On,write:Fe,getHorizontalCoordinate:Tn,getVerticalCoordinate:ii,getCoordinateString:Gc,getVerticalCoordinateString:kA,collections:{},newObject:Oe,newAdditionalObject:O,newObjectDeferred:Be,newObjectDeferredBegin:S,getFilters:Ue,putStream:Ze,events:gt,scaleFactor:ce,pageSize:{getWidth:function(){return Pu(K)},setWidth:function(H){DA(K,H)},getHeight:function(){return Bu(K)},setHeight:function(H){Rm(K,H)}},encryptionOptions:d,encryption:bt,getEncryptor:function(H){return d!==null?bt.encryptor(H,0):function(Se){return Se}},output:dt,getNumberOfPages:dn,get pages(){return ve},out:re,f2:k,f3:B,getPageInfo:Tt,getPageInfoByObjId:Ht,getCurrentPageInfo:Dt,getPDFVersion:p,Point:ju,Rectangle:OA,Matrix:X,hasHotfix:Et},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Pu(K)},set:function(H){DA(K,H)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Bu(K)},set:function(H){Rm(K,H)},enumerable:!0,configurable:!0}),(function(H){for(var Se=0,nt=we.length;Se<nt;Se++){var pt=Er.call(this,H[Se][0],H[Se][1],H[Se][2],we[Se][3],!0);f===!1&&(A[pt]=!0);var Ot=H[Se][0].split("-");Zt({id:pt,fontName:Ot[0],fontStyle:Ot[1]||""})}gt.publish("addFonts",{fonts:ye,dictionary:Xe})}).call(h,we),be="F1",nn(a,r),gt.publish("initialized"),h}Sx.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Sx.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Sx.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Sx.prototype.processOwnerPassword=function(t,e){return jk(Ik(e).substr(0,5),t)},Sx.prototype.encryptor=function(t,e){var r=Ik(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return jk(r,n)}},N2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Qa(t)!==Qa(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},$r.API={events:[]},$r.version="3.0.4";var di=$r.API,T6=1,jg=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},sx=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Bn=function(t){return t.toFixed(2)},r0=function(t){return t.toFixed(5)};di.__acroform__={};var Vc=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},fV=function(t){return t*T6},Sf=function(t){var e=new Are,r=Wr.internal.getHeight(t)||0,n=Wr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Bn(n)),Number(Bn(r))],e},Cje=di.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},_je=di.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Eje=di.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Pi=di.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Eje(t,e-1)},Bi=di.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Cje(t,e-1)},Ti=di.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _je(t,e-1)},Sje=di.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(Bn(c.lowerLeft_X)),Number(Bn(c.lowerLeft_Y)),Number(Bn(c.upperRight_X)),Number(Bn(c.upperRight_Y))]},Ije=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Pk(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Bn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Sf(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Pk=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(k){return k.split(`
`)}):a.map(function(k){return[k]});var s=r,o=Wr.internal.getHeight(t)||0;o=o<0?-o:o;var l=Wr.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(k,B,R){if(k+1<a.length){var Y=B+" "+a[k+1][0];return jC(Y,t,R).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,f=jC("3",t,s).height,A=t.multiline?o-s:(o-f)/2,h=A+=2,m=0,p=0,g=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+jC(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var v="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(a[b].length!==1&&g!==a[b].length-1){if((f+2)*(y+2)+2>o)continue e;v+=a[b][g],w=!0,p=b,b--}else{v=(v+=a[b][g]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var P=parseInt(b),j=c(P,v,s),_=b>=a.length-1;if(j&&!_){v+=" ",g=0;continue}if(j||_){if(_)p=P;else if(t.multiline&&(f+2)*(y+2)+2>o)continue e}else{if(!t.multiline||(f+2)*(y+2)+2>o)continue e;p=P}}for(var I="",E=m;E<=p;E++){var F=a[E];if(t.multiline){if(E===p){I+=F[g]+" ",g=(g+1)%F.length;continue}if(E===m){I+=F[F.length-1]+" ";continue}}I+=F[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,d=jC(I,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=Bn(u)+" "+Bn(h)+` Td
`,e+="("+jg(I)+`) Tj
`,e+=-Bn(u)+` 0 Td
`,h=-(s+2),d=0,m=w?p:p+1,y++,v=""}break}return n.text=e,n.fontSize=s,n},jC=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},jje={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Pje=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Bje=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(hf.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(jje)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");T6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new mre,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&Pje(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=Sje(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Wr.createDefaultAppearanceStream(l),Qa(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=Ije(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var A in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(A)){var h=l.appearanceStreamContent[A];if(f+="/"+A+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var m=h[o];typeof m=="function"&&(m=m.call(a,l)),f+="/"+o+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(a,l)),f+="/"+o+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(p,g){for(var v in p)if(p.hasOwnProperty(v)){var y=v,b=p[v];g.internal.newObjectDeferredBegin(b.objId,!0),Qa(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete p[y]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},hre=di.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),Qa(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+jg(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},r5=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+jg(n(t))+")"},Rf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Rf.prototype.toString=function(){return this.objId+" 0 R"},Rf.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Rf.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:hre(a,this.objId,this.scope)}):a instanceof Rf?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var Are=function(){Rf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Vc(Are,Rf);var mre=function(){Rf.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+jg(r(t))+")"}},set:function(r){t=r}})};Vc(mre,Rf);var hf=function t(){Rf.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Pi(e,3)},set:function(v){v?this.F=Bi(e,3):this.F=Ti(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof CS)return;s="FieldObject"+t.FieldNum++}var v=function(y){return y};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+jg(v(s))+")"},set:function(v){s=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(v){s=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/T6:u},set:function(v){u=v}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(v){d=v}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof CS||this instanceof tm))return r5(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=v}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof lo==0?r5(A,this.objId,this.scope):A},set:function(v){v=v.toString(),A=this instanceof lo==0?v.substr(0,1)==="("?sx(v.substr(1,v.length-2)):sx(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof lo==1?sx(A.substr(1,A.length-1)):A},set:function(v){v=v.toString(),A=this instanceof lo==1?"/"+v:v}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof lo==0?r5(h,this.objId,this.scope):h},set:function(v){v=v.toString(),h=this instanceof lo==0?v.substr(0,1)==="("?sx(v.substr(1,v.length-2)):sx(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof lo==1?sx(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof lo==1?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(v){v=!!v,p=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(v){m=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,1)},set:function(v){v?this.Ff=Bi(this.Ff,1):this.Ff=Ti(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,2)},set:function(v){v?this.Ff=Bi(this.Ff,2):this.Ff=Ti(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,3)},set:function(v){v?this.Ff=Bi(this.Ff,3):this.Ff=Ti(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');g=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(g){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Vc(hf,Rf);var jp=function(){hf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return hre(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,18)},set:function(r){r?this.Ff=Bi(this.Ff,18):this.Ff=Ti(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Bi(this.Ff,19):this.Ff=Ti(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,20)},set:function(r){r?(this.Ff=Bi(this.Ff,20),e.sort()):this.Ff=Ti(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,22)},set:function(r){r?this.Ff=Bi(this.Ff,22):this.Ff=Ti(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,23)},set:function(r){r?this.Ff=Bi(this.Ff,23):this.Ff=Ti(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,27)},set:function(r){r?this.Ff=Bi(this.Ff,27):this.Ff=Ti(this.Ff,27)}}),this.hasAppearanceStream=!1};Vc(jp,hf);var Pp=function(){jp.call(this),this.fontName="helvetica",this.combo=!1};Vc(Pp,jp);var Bp=function(){Pp.call(this),this.combo=!0};Vc(Bp,Pp);var bb=function(){Bp.call(this),this.edit=!0};Vc(bb,Bp);var lo=function(){hf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,15)},set:function(r){r?this.Ff=Bi(this.Ff,15):this.Ff=Ti(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,16)},set:function(r){r?this.Ff=Bi(this.Ff,16):this.Ff=Ti(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,17)},set:function(r){r?this.Ff=Bi(this.Ff,17):this.Ff=Ti(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,26)},set:function(r){r?this.Ff=Bi(this.Ff,26):this.Ff=Ti(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+jg(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Qa(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Vc(lo,hf);var wb=function(){lo.call(this),this.pushButton=!0};Vc(wb,lo);var Tp=function(){lo.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Vc(Tp,lo);var CS=function(){var t,e;hf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+jg(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Qa(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Wr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Vc(CS,hf),Tp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Tp.prototype.createOption=function(t){var e=new CS;return e.Parent=this,e.optionName=t,this.Kids.push(e),Tje.call(this.scope,e),e};var Nb=function(){lo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Wr.CheckBox.createAppearanceStream()};Vc(Nb,lo);var tm=function(){hf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,13)},set:function(e){e?this.Ff=Bi(this.Ff,13):this.Ff=Ti(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,21)},set:function(e){e?this.Ff=Bi(this.Ff,21):this.Ff=Ti(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,23)},set:function(e){e?this.Ff=Bi(this.Ff,23):this.Ff=Ti(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,24)},set:function(e){e?this.Ff=Bi(this.Ff,24):this.Ff=Ti(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,25)},set:function(e){e?this.Ff=Bi(this.Ff,25):this.Ff=Ti(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,26)},set:function(e){e?this.Ff=Bi(this.Ff,26):this.Ff=Ti(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Vc(tm,hf);var Cb=function(){tm.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,14)},set:function(t){t?this.Ff=Bi(this.Ff,14):this.Ff=Ti(this.Ff,14)}}),this.password=!0};Vc(Cb,tm);var Wr={CheckBox:{createAppearanceStream:function(){return{N:{On:Wr.CheckBox.YesNormal},D:{On:Wr.CheckBox.YesPushDown,Off:Wr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Sf(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=Pk(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Bn(Wr.internal.getWidth(t))+" "+Bn(Wr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Bn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Sf(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=Wr.internal.getHeight(t),o=Wr.internal.getWidth(t),l=Pk(t,t.caption);return a.push("1 g"),a.push("0 0 "+Bn(o)+" "+Bn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Bn(o-1)+" "+Bn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Bn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Sf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Bn(Wr.internal.getWidth(t))+" "+Bn(Wr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Wr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Wr.RadioButton.Circle.YesNormal,e.D[t]=Wr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Sf(t);e.scope=t.scope;var r=[],n=Wr.internal.getWidth(t)<=Wr.internal.getHeight(t)?Wr.internal.getWidth(t)/4:Wr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Wr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+r0(Wr.internal.getWidth(t)/2)+" "+r0(Wr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Sf(t);e.scope=t.scope;var r=[],n=Wr.internal.getWidth(t)<=Wr.internal.getHeight(t)?Wr.internal.getWidth(t)/4:Wr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Wr.internal.Bezier_C).toFixed(5)),o=Number((n*Wr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+r0(Wr.internal.getWidth(t)/2)+" "+r0(Wr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+r0(Wr.internal.getWidth(t)/2)+" "+r0(Wr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Sf(t);e.scope=t.scope;var r=[],n=Wr.internal.getWidth(t)<=Wr.internal.getHeight(t)?Wr.internal.getWidth(t)/4:Wr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Wr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+r0(Wr.internal.getWidth(t)/2)+" "+r0(Wr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Wr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Wr.RadioButton.Cross.YesNormal,e.D[t]=Wr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Sf(t);e.scope=t.scope;var r=[],n=Wr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Bn(Wr.internal.getWidth(t)-2)+" "+Bn(Wr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Bn(n.x1.x)+" "+Bn(n.x1.y)+" m"),r.push(Bn(n.x2.x)+" "+Bn(n.x2.y)+" l"),r.push(Bn(n.x4.x)+" "+Bn(n.x4.y)+" m"),r.push(Bn(n.x3.x)+" "+Bn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Sf(t);e.scope=t.scope;var r=Wr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Bn(Wr.internal.getWidth(t))+" "+Bn(Wr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Bn(Wr.internal.getWidth(t)-2)+" "+Bn(Wr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Bn(r.x1.x)+" "+Bn(r.x1.y)+" m"),n.push(Bn(r.x2.x)+" "+Bn(r.x2.y)+" l"),n.push(Bn(r.x4.x)+" "+Bn(r.x4.y)+" m"),n.push(Bn(r.x3.x)+" "+Bn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Sf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Bn(Wr.internal.getWidth(t))+" "+Bn(Wr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Wr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Wr.internal.getWidth(t),r=Wr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Wr.internal.getWidth=function(t){var e=0;return Qa(t)==="object"&&(e=fV(t.Rect[2])),e},Wr.internal.getHeight=function(t){var e=0;return Qa(t)==="object"&&(e=fV(t.Rect[3])),e};var Tje=di.addField=function(t){if(Bje(this,t),!(t instanceof hf))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};di.AcroFormChoiceField=jp,di.AcroFormListBox=Pp,di.AcroFormComboBox=Bp,di.AcroFormEditBox=bb,di.AcroFormButton=lo,di.AcroFormPushButton=wb,di.AcroFormRadioButton=Tp,di.AcroFormCheckBox=Nb,di.AcroFormTextField=tm,di.AcroFormPasswordField=Cb,di.AcroFormAppearance=Wr,di.AcroForm={ChoiceField:jp,ListBox:Pp,ComboBox:Bp,EditBox:bb,Button:lo,PushButton:wb,RadioButton:Tp,CheckBox:Nb,TextField:tm,PasswordField:Cb,Appearance:Wr},$r.AcroForm={ChoiceField:jp,ListBox:Pp,ComboBox:Bp,EditBox:bb,Button:lo,PushButton:wb,RadioButton:Tp,CheckBox:Nb,TextField:tm,PasswordField:Cb,Appearance:Wr};var kje=$r.AcroForm;function pre(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(k,B){var R,Y,me,pe,he,ge=r;if((B=B||r)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(j(k))for(he in n)for(me=n[he],R=0;R<me.length;R+=1){for(pe=!0,Y=0;Y<me[R].length;Y+=1)if(me[R][Y]!==void 0&&me[R][Y]!==k[Y]){pe=!1;break}if(pe===!0){ge=he;break}}else for(he in n)for(me=n[he],R=0;R<me.length;R+=1){for(pe=!0,Y=0;Y<me[R].length;Y+=1)if(me[R][Y]!==void 0&&me[R][Y]!==k.charCodeAt(Y)){pe=!1;break}if(pe===!0){ge=he;break}}return ge===r&&B!==r&&(ge=B),ge},s=function k(B){for(var R=this.internal.write,Y=this.internal.putStream,me=(0,this.internal.getFilters)();me.indexOf("FlateEncode")!==-1;)me.splice(me.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var pe=[];if(pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Image"}),pe.push({key:"Width",value:B.width}),pe.push({key:"Height",value:B.height}),B.colorSpace===v.INDEXED?pe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(pe.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===v.DEVICE_CMYK&&pe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),pe.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&pe.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)&&B.transparency.length>0){for(var he="",ge=0,se=B.transparency.length;ge<se;ge++)he+=B.transparency[ge]+" "+B.transparency[ge]+" ";pe.push({key:"Mask",value:"["+he+"]"})}B.sMask!==void 0&&pe.push({key:"SMask",value:B.objectId+1+" 0 R"});var je=B.filter!==void 0?["/"+B.filter]:void 0;if(Y({data:B.data,additionalKeyValues:pe,alreadyAppliedFilters:je,objectId:B.objectId}),R("endobj"),"sMask"in B&&B.sMask!==void 0){var Te,D=(Te=B.sMaskBitsPerComponent)!==null&&Te!==void 0?Te:B.bitsPerComponent,K={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:D,data:B.sMask};"filter"in B&&(K.decodeParameters="/Predictor ".concat(B.predictor," /Colors 1 /BitsPerComponent ").concat(D," /Columns ").concat(B.width),K.filter=B.filter),k.call(this,K)}if(B.colorSpace===v.INDEXED){var z=this.internal.newObject();Y({data:I(new Uint8Array(B.palette)),objectId:z}),R("endobj")}},o=function(){var k=this.internal.collections[e+"images"];for(var B in k)s.call(this,k[B])},l=function(){var k,B=this.internal.collections[e+"images"],R=this.internal.write;for(var Y in B)R("/I"+(k=B[Y]).index,k.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var k=this.internal.collections[e+"images"];return c.call(this),k},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(k){return typeof t["process"+k.toUpperCase()]=="function"},A=function(k){return Qa(k)==="object"&&k.nodeType===1},h=function(k,B){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var R=""+k.getAttribute("src");if(R.indexOf("data:image/")===0)return oE(unescape(R).split("base64,").pop());var Y=t.loadFile(R,!0);if(Y!==void 0)return Y}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var me;switch(B){case"PNG":me="image/png";break;case"WEBP":me="image/webp";break;default:me="image/jpeg"}return oE(k.toDataURL(me,1).split("base64,").pop())}},m=function(k){var B=this.internal.collections[e+"images"];if(B){for(var R in B)if(k===B[R].alias)return B[R]}},p=function(k,B,R){return k||B||(k=-96,B=-96),k<0&&(k=-1*R.width*72/k/this.internal.scaleFactor),B<0&&(B=-1*R.height*72/B/this.internal.scaleFactor),k===0&&(k=B*R.width/R.height),B===0&&(B=k*R.height/R.width),[k,B]},g=function(k,B,R,Y,me,pe){var he=p.call(this,R,Y,me),ge=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,je=u.call(this);if(R=he[0],Y=he[1],je[me.index]=me,pe){pe*=Math.PI/180;var Te=Math.cos(pe),D=Math.sin(pe),K=function(Q){return Q.toFixed(4)},z=[K(Te),K(D),K(-1*D),K(Te),0,0,"cm"]}this.internal.write("q"),pe?(this.internal.write([1,"0","0",1,ge(k),se(B+Y),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([ge(R),"0","0",ge(Y),"0","0","cm"].join(" "))):this.internal.write([ge(R),"0","0",ge(Y),ge(k),se(B+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+me.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(k){var B,R,Y=0;if(typeof k=="string")for(R=k.length,B=0;B<R;B++)Y=(Y<<5)-Y+k.charCodeAt(B),Y|=0;else if(j(k))for(R=k.byteLength/2,B=0;B<R;B++)Y=(Y<<5)-Y+k[B],Y|=0;return Y},w=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var B=!0;return k.length===0&&(B=!1),k.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(B=!1),B},P=t.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var B=k.indexOf(",");return B<0?null:k.substring(0,B).trim().endsWith("base64")?k.substring(B+1):null};t.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var j=t.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},_=t.__addimage__.binaryStringToUint8Array=function(k){for(var B=k.length,R=new Uint8Array(B),Y=0;Y<B;Y++)R[Y]=k.charCodeAt(Y);return R},I=t.__addimage__.arrayBufferToBinaryString=function(k){for(var B="",R=j(k)?k:new Uint8Array(k),Y=0;Y<R.length;Y+=8192)B+=String.fromCharCode.apply(null,R.subarray(Y,Y+8192));return B};t.addImage=function(){var k,B,R,Y,me,pe,he,ge,se;if(typeof arguments[1]=="number"?(B=r,R=arguments[1],Y=arguments[2],me=arguments[3],pe=arguments[4],he=arguments[5],ge=arguments[6],se=arguments[7]):(B=arguments[1],R=arguments[2],Y=arguments[3],me=arguments[4],pe=arguments[5],he=arguments[6],ge=arguments[7],se=arguments[8]),Qa(k=arguments[0])==="object"&&!A(k)&&"imageData"in k){var je=k;k=je.imageData,B=je.format||B||r,R=je.x||R||0,Y=je.y||Y||0,me=je.w||je.width||me,pe=je.h||je.height||pe,he=je.alias||he,ge=je.compression||ge,se=je.rotation||je.angle||se}var Te=this.internal.getFilters();if(ge===void 0&&Te.indexOf("FlateEncode")!==-1&&(ge="SLOW"),isNaN(R)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var D=E.call(this,k,B,he,ge);return g.call(this,R,Y,me,pe,D,se),this};var E=function(k,B,R,Y){var me,pe,he;if(typeof k=="string"&&a(k)===r){k=unescape(k);var ge=F(k,!1);(ge!==""||(ge=t.loadFile(k,!0))!==void 0)&&(k=ge)}if(A(k)&&(k=h(k,B)),B=a(k,B),!f(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((he=R)==null||he.length===0)&&(R=function(se){return typeof se=="string"||j(se)?b(se):j(se.data)?b(se.data):null}(k)),(me=m.call(this,R))||(k instanceof Uint8Array||B==="RGBA"||(pe=k,k=_(k)),me=this["process"+B.toUpperCase()](k,d.call(this),R,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in t.image_compression?se:y.NONE}(Y),pe)),!me)throw new Error("An unknown error occurred whilst processing the image.");return me},F=t.__addimage__.convertBase64ToBinaryString=function(k,B){B=typeof B!="boolean"||B;var R,Y="";if(typeof k=="string"){var me;R=(me=P(k))!==null&&me!==void 0?me:k;try{Y=oE(R)}catch(pe){if(B)throw w(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+pe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};t.getImageProperties=function(k){var B,R,Y="";if(A(k)&&(k=h(k)),typeof k=="string"&&a(k)===r&&((Y=F(k,!1))===""&&(Y=t.loadFile(k)||""),k=Y),R=a(k),!f(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(k instanceof Uint8Array||(k=_(k)),!(B=this["process"+R.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=R,B}})($r.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};$r.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var A=0;A<u.length;A++){n=u[A];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(p.objId),y=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(v(n.contents))+")",s+=" /Popup "+g.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+h(v(y))+") >>",p.content=s;var b=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(s+=" /Open true"),s+=" >>",g.content=s,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var P=this.annotations._nameMap[n.options.name];n.options.pageNumber=P.page,n.options.top=P.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var j=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+j+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},t.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}($r.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=t.__arabicParser__.isArabicEndLetter=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return o(p)&&a.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(p){var g=0,v=r,y="",b=0;for(g=0;g<p.length;g+=1)v[p.charCodeAt(g)]!==void 0?(b++,typeof(v=v[p.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(v),v=r,b=0),g===p.length-1&&(v=r,y+=p.charAt(g-(b-1)),g-=b-1,b=0)):(v=r,y+=p.charAt(g-b),g-=b,b=0);return y};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var A=t.__arabicParser__.getCorrectForm=function(p,g,v){return o(p)?s(p)===!1?-1:!u(p)||!o(g)&&!o(v)||!o(v)&&l(g)||l(p)&&!o(g)||l(p)&&c(g)||l(p)&&l(g)?0:d(p)&&o(g)&&!l(g)&&o(v)&&u(v)?3:l(p)||!o(v)?1:2:-1},h=function(p){var g=0,v=0,y=0,b="",w="",P="",j=(p=p||"").split("\\s+"),_=[];for(g=0;g<j.length;g+=1){for(_.push(""),v=0;v<j[g].length;v+=1)b=j[g][v],w=j[g][v-1],P=j[g][v+1],o(b)?(y=A(b,w,P),_[g]+=y!==-1?String.fromCharCode(e[b.charCodeAt(0)][y]):b):_[g]+=b;_[g]=f(_[g])}return _.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(g)){var y=0;for(v=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?v.push([h(g[y][0]),g[y][1],g[y][2]]):v.push([h(g[y])]);p=v}else p=h(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",m])}($r.API),$r.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}($r.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),A=u.scaleFactor||this.internal.scaleFactor,h=0,m=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=u.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,w){return b.concat(g.splitTextToSize(w,v))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)h<(p=this.getStringUnitWidth(c[y],{font:f})*d)&&(h=p);return h!==0&&(m=c.length),{w:h/=A,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/A,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,A=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&A&&(this.printHeaderRow(c.lineNumber,!0),c.y+=A[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,A){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,m,p,g,v=[],y=[],b=[],w={},P={},j=[],_=[],I=(A=A||{}).autoSize||!1,E=A.printHeaders!==!1,F=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,k=A.margins||Object.assign({width:this.getPageWidth()},e),B=typeof A.padding=="number"?A.padding:3,R=A.headerBackgroundColor||"#c8c8c8",Y=A.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=Y,this.setFontSize(F),f==null)y=v=Object.keys(d[0]),b=v.map(function(){return"left"});else if(Array.isArray(f)&&Qa(f[0])==="object")for(v=f.map(function(je){return je.name}),y=f.map(function(je){return je.prompt||je.name||""}),b=f.map(function(je){return je.align||"left"}),h=0;h<f.length;h+=1)P[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(y=v=f,b=v.map(function(){return"left"}));if(I||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<v.length;h+=1){for(w[g=v[h]]=d.map(function(je){return je[g]}),this.setFont(void 0,"bold"),j.push(this.getTextDimensions(y[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[g],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)j.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[g]=Math.max.apply(null,j)+B+B,j=[]}if(E){var me={};for(h=0;h<v.length;h+=1)me[v[h]]={},me[v[h]].text=y[h],me[v[h]].align=b[h];var pe=l.call(this,me,P);_=v.map(function(je){return new s(c,u,P[je],pe,me[je].text,void 0,me[je].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var he=f.reduce(function(je,Te){return je[Te.name]=Te.align,je},{});for(h=0;h<d.length;h+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:h,data:d[h]},this);var ge=l.call(this,d[h],P);for(p=0;p<v.length;p+=1){var se=d[h][v[p]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:h,col:p,data:se},this),o.call(this,new s(c,u,P[v[p]],ge,se,h+2,he[v[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(c).map(function(h){var m=c[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/A+d+d},this).reduce(function(h,m){return Math.max(h,m)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,A.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(m)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),r=!1}}($r.API);var gre={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},xre=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Bk=pre(xre),vre=[100,200,300,400,500,600,700,800,900],Fje=pre(vre);function n5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return gre[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof Bk[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function hV(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var Oje={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},AV={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function mV(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function pV(t){return t.trimLeft()}function Dje(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Rje(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var PC,gV,xV,ix,BC,vV,yV,bV,a5=["times"];function wV(t,e,r,n,a){var s=4,o=CV;switch(a){case $r.API.image_compression.FAST:s=1,o=NV;break;case $r.API.image_compression.MEDIUM:s=6,o=_V;break;case $r.API.image_compression.SLOW:s=9,o=EV}t=function(c,u,d,f){for(var A,h=c.length/u,m=new Uint8Array(c.length+h),p=[Mje,NV,CV,_V,EV],g=0;g<h;g+=1){var v=g*u,y=c.subarray(v,v+u);if(f)m.set(f(y,d,A),v+g);else{for(var b=p.length,w=[],P=0;P<b;P+=1)w[P]=p[P](y,d,A);var j=Uje(w.concat());m.set(w[j],v+g)}A=y}return m}(t,e,Math.ceil(r*n/8),o);var l=Ck(t,{level:s});return $r.API.__addimage__.arrayBufferToBinaryString(l)}function Mje(t){var e=Array.apply([],t);return e.unshift(0),e}function NV(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function CV(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var o=r&&r[s]||0;a[s+1]=t[s]-o+256&255}return a}function _V(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var o=t[s-e]||0,l=r&&r[s]||0;a[s+1]=t[s]+256-(o+l>>>1)&255}return a}function EV(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var o=Lje(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-o+256&255}return a}function Lje(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function Uje(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function s5(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),o=(1<<r)-1;return yre(t,a)>>s&o}function SV(t,e,r,n){var a=r*n,s=Math.floor(a/8),o=16-(a-8*s+n),l=(1<<n)-1,c=(e&l)<<o;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var A=f>>8&255;u.setUint8(d,A)}})(t,s,yre(t,s)&~(l<<o)&65535|c)}function yre(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function Qje(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,o=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=o,e+=3*o);var u=!0,d=[],f=0,A=null,h=0,m=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];f=t[e++]|t[e++]<<8,A=t[e++],1&p||(A=null),h=p>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],P=w>>6&1,j=1<<1+(7&w),_=l,I=c,E=!1;w>>7&&(E=!0,_=e,I=j,e+=3*j);var F=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}d.push({x:g,y:v,width:y,height:b,has_local_palette:E,palette_offset:_,palette_size:I,data_offset:F,data_length:e-F,transparent_index:A,interlaced:!!P,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(B){if(B<0||B>=d.length)throw new Error("Frame index out of range.");return d[B]},this.decodeAndBlitFrameBGRA=function(B,R){var Y=this.frameInfo(B),me=Y.width*Y.height,pe=new Uint8Array(me);IV(t,Y.data_offset,pe,me);var he=Y.palette_offset,ge=Y.transparent_index;ge===null&&(ge=256);var se=Y.width,je=r-se,Te=se,D=4*(Y.y*r+Y.x),K=4*((Y.y+Y.height)*r+Y.x),z=D,Q=4*je;Y.interlaced===!0&&(Q+=4*r*7);for(var J=8,ee=0,M=pe.length;ee<M;++ee){var G=pe[ee];if(Te===0&&(Te=se,(z+=Q)>=K&&(Q=4*je+4*r*(J-1),z=D+(se+je)*(J<<1),J>>=1)),G===ge)z+=4;else{var ne=t[he+3*G],ve=t[he+3*G+1],V=t[he+3*G+2];R[z++]=V,R[z++]=ve,R[z++]=ne,R[z++]=255}--Te}},this.decodeAndBlitFrameRGBA=function(B,R){var Y=this.frameInfo(B),me=Y.width*Y.height,pe=new Uint8Array(me);IV(t,Y.data_offset,pe,me);var he=Y.palette_offset,ge=Y.transparent_index;ge===null&&(ge=256);var se=Y.width,je=r-se,Te=se,D=4*(Y.y*r+Y.x),K=4*((Y.y+Y.height)*r+Y.x),z=D,Q=4*je;Y.interlaced===!0&&(Q+=4*r*7);for(var J=8,ee=0,M=pe.length;ee<M;++ee){var G=pe[ee];if(Te===0&&(Te=se,(z+=Q)>=K&&(Q=4*je+4*r*(J-1),z=D+(se+je)*(J<<1),J>>=1)),G===ge)z+=4;else{var ne=t[he+3*G],ve=t[he+3*G+1],V=t[he+3*G+2];R[z++]=ne,R[z++]=ve,R[z++]=V,R[z++]=255}--Te}}}function IV(t,e,r,n){for(var a=t[e++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,A=0,h=t[e++],m=new Int32Array(4096),p=null;;){for(;d<16&&h!==0;)f|=t[e++]<<d,d+=8,h===1?h=t[e++]:--h;if(d<c)break;var g=f&u;if(f>>=c,d-=c,g!==s){if(g===o)break;for(var v=g<l?g:p,y=0,b=v;b>s;)b=m[b]>>8,++y;var w=b;if(A+y+(v!==g?1:0)>n)return void ts.log("Warning, gif stream longer than expected.");r[A++]=w;var P=A+=y;for(v!==g&&(r[A++]=w),b=v;y--;)b=m[b],r[--P]=255&b,b>>=8;p!==null&&l<4096&&(m[l++]=p<<8|w,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=g}else l=o+1,u=(1<<(c=a+1))-1,p=null}return A!==n&&ts.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function i5(t){var e,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),A=new Array(65535),h=new Array(64),m=new Array(64),p=[],g=0,v=7,y=new Array(64),b=new Array(64),w=new Array(64),P=new Array(256),j=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],me=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pe(D,K){for(var z=0,Q=0,J=new Array,ee=1;ee<=16;ee++){for(var M=1;M<=D[ee];M++)J[K[Q]]=[],J[K[Q]][0]=z,J[K[Q]][1]=ee,Q++,z++;z*=2}return J}function he(D){for(var K=D[0],z=D[1]-1;z>=0;)K&1<<z&&(g|=1<<v),z--,--v<0&&(g==255?(ge(255),ge(0)):ge(g),v=7,g=0)}function ge(D){p.push(D)}function se(D){ge(D>>8&255),ge(255&D)}function je(D,K,z,Q,J){for(var ee,M=J[0],G=J[240],ne=function(Le,Ge){var ft,ht,xt,jt,kt,wt,Ve,Pe,be,ce,te=0;for(be=0;be<8;++be){ft=Le[te],ht=Le[te+1],xt=Le[te+2],jt=Le[te+3],kt=Le[te+4],wt=Le[te+5],Ve=Le[te+6];var Ne=ft+(Pe=Le[te+7]),Re=ft-Pe,ye=ht+Ve,Xe=ht-Ve,mt=xt+wt,rt=xt-wt,ue=jt+kt,_e=jt-kt,We=Ne+ue,ot=Ne-ue,Ce=ye+mt,$e=ye-mt;Le[te]=We+Ce,Le[te+4]=We-Ce;var gt=.707106781*($e+ot);Le[te+2]=ot+gt,Le[te+6]=ot-gt;var Kt=.382683433*((We=_e+rt)-($e=Xe+Re)),Ut=.5411961*We+Kt,Jt=1.306562965*$e+Kt,it=.707106781*(Ce=rt+Xe),X=Re+it,oe=Re-it;Le[te+5]=oe+Ut,Le[te+3]=oe-Ut,Le[te+1]=X+Jt,Le[te+7]=X-Jt,te+=8}for(te=0,be=0;be<8;++be){ft=Le[te],ht=Le[te+8],xt=Le[te+16],jt=Le[te+24],kt=Le[te+32],wt=Le[te+40],Ve=Le[te+48];var L=ft+(Pe=Le[te+56]),Ae=ft-Pe,Ee=ht+Ve,Oe=ht-Ve,Be=xt+wt,S=xt-wt,O=jt+kt,U=jt-kt,q=L+O,ae=L-O,fe=Ee+Be,Ue=Ee-Be;Le[te]=q+fe,Le[te+32]=q-fe;var Ze=.707106781*(Ue+ae);Le[te+16]=ae+Ze,Le[te+48]=ae-Ze;var lt=.382683433*((q=U+S)-(Ue=Oe+Ae)),Qe=.5411961*q+lt,tt=1.306562965*Ue+lt,ut=.707106781*(fe=S+Oe),Pt=Ae+ut,Ct=Ae-ut;Le[te+40]=Ct+Qe,Le[te+24]=Ct-Qe,Le[te+8]=Pt+tt,Le[te+56]=Pt-tt,te++}for(be=0;be<64;++be)ce=Le[be]*Ge[be],h[be]=ce>0?ce+.5|0:ce-.5|0;return h}(D,K),ve=0;ve<64;++ve)m[_[ve]]=ne[ve];var V=m[0]-z;z=m[0],V==0?he(Q[0]):(he(Q[A[ee=32767+V]]),he(f[ee]));for(var qe=63;qe>0&&m[qe]==0;)qe--;if(qe==0)return he(M),z;for(var ie,re=1;re<=qe;){for(var Fe=re;m[re]==0&&re<=qe;)++re;var de=re-Fe;if(de>=16){ie=de>>4;for(var we=1;we<=ie;++we)he(G);de&=15}ee=32767+m[re],he(J[(de<<4)+A[ee]]),he(f[ee]),re++}return qe!=63&&he(M),z}function Te(D){D=Math.min(Math.max(D,1),100),s!=D&&(function(K){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var J=o((z[Q]*K+50)/100);J=Math.min(Math.max(J,1),255),l[_[Q]]=J}for(var ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],M=0;M<64;M++){var G=o((ee[M]*K+50)/100);G=Math.min(Math.max(G,1),255),c[_[M]]=G}for(var ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,V=0;V<8;V++)for(var qe=0;qe<8;qe++)u[ve]=1/(l[_[ve]]*ne[V]*ne[qe]*8),d[ve]=1/(c[_[ve]]*ne[V]*ne[qe]*8),ve++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),s=D)}this.encode=function(D,K){K&&Te(K),p=new Array,g=0,v=7,se(65496),se(65504),se(16),ge(74),ge(70),ge(73),ge(70),ge(0),ge(1),ge(1),ge(0),se(1),se(1),ge(0),ge(0),function(){se(65499),se(132),ge(0);for(var ht=0;ht<64;ht++)ge(l[ht]);ge(1);for(var xt=0;xt<64;xt++)ge(c[xt])}(),function(ht,xt){se(65472),se(17),ge(8),se(xt),se(ht),ge(3),ge(1),ge(17),ge(0),ge(2),ge(17),ge(1),ge(3),ge(17),ge(1)}(D.width,D.height),function(){se(65476),se(418),ge(0);for(var ht=0;ht<16;ht++)ge(I[ht+1]);for(var xt=0;xt<=11;xt++)ge(E[xt]);ge(16);for(var jt=0;jt<16;jt++)ge(F[jt+1]);for(var kt=0;kt<=161;kt++)ge(k[kt]);ge(1);for(var wt=0;wt<16;wt++)ge(B[wt+1]);for(var Ve=0;Ve<=11;Ve++)ge(R[Ve]);ge(17);for(var Pe=0;Pe<16;Pe++)ge(Y[Pe+1]);for(var be=0;be<=161;be++)ge(me[be])}(),se(65498),se(12),ge(3),ge(1),ge(0),ge(2),ge(17),ge(3),ge(17),ge(0),ge(63),ge(0);var z=0,Q=0,J=0;g=0,v=7,this.encode.displayName="_encode_";for(var ee,M,G,ne,ve,V,qe,ie,re,Fe=D.data,de=D.width,we=D.height,Le=4*de,Ge=0;Ge<we;){for(ee=0;ee<Le;){for(ve=Le*Ge+ee,qe=-1,ie=0,re=0;re<64;re++)V=ve+(ie=re>>3)*Le+(qe=4*(7&re)),Ge+ie>=we&&(V-=Le*(Ge+1+ie-we)),ee+qe>=Le&&(V-=ee+qe-Le+4),M=Fe[V++],G=Fe[V++],ne=Fe[V++],y[re]=(j[M]+j[G+256|0]+j[ne+512|0]>>16)-128,b[re]=(j[M+768|0]+j[G+1024|0]+j[ne+1280|0]>>16)-128,w[re]=(j[M+1280|0]+j[G+1536|0]+j[ne+1792|0]>>16)-128;z=je(y,u,z,e,n),Q=je(b,d,Q,r,a),J=je(w,d,J,r,a),ee+=32}Ge+=8}if(v>=0){var ft=[];ft[1]=v+1,ft[0]=(1<<v+1)-1,he(ft)}return se(65497),new Uint8Array(p)},t=t||50,function(){for(var D=String.fromCharCode,K=0;K<256;K++)P[K]=D(K)}(),e=pe(I,E),r=pe(B,R),n=pe(F,k),a=pe(Y,me),function(){for(var D=1,K=2,z=1;z<=15;z++){for(var Q=D;Q<K;Q++)A[32767+Q]=z,f[32767+Q]=[],f[32767+Q][1]=z,f[32767+Q][0]=Q;for(var J=-(K-1);J<=-D;J++)A[32767+J]=z,f[32767+J]=[],f[32767+J][1]=z,f[32767+J][0]=K-1+J;D<<=1,K<<=1}}(),function(){for(var D=0;D<256;D++)j[D]=19595*D,j[D+256|0]=38470*D,j[D+512|0]=7471*D+32768,j[D+768|0]=-11059*D,j[D+1024|0]=-21709*D,j[D+1280|0]=32768*D+8421375,j[D+1536|0]=-27439*D,j[D+1792|0]=-5329*D}(),Te(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Td(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jV(t){function e(E){if(!E)throw Error("assert :P")}function r(E,F,k){for(var B=0;4>B;B++)if(E[F+B]!=k.charCodeAt(B))return!0;return!1}function n(E,F,k,B,R){for(var Y=0;Y<R;Y++)E[F+Y]=k[B+Y]}function a(E,F,k,B){for(var R=0;R<B;R++)E[F+R]=k}function s(E){return new Int32Array(E)}function o(E,F){for(var k=[],B=0;B<E;B++)k.push(new F);return k}function l(E,F){var k=[];return function B(R,Y,me){for(var pe=me[Y],he=0;he<pe&&(R.push(me.length>Y+1?[]:new F),!(me.length<Y+1));he++)B(R[he],Y+1,me)}(k,0,E),k}var c=function(){var E=this;function F(N,T){for(var W=1<<T-1>>>0;N&W;)W>>>=1;return W?(N&W-1)+W:N}function k(N,T,W,le,Ie){e(!(le%W));do N[T+(le-=W)]=Ie;while(0<le)}function B(N,T,W,le,Ie){if(e(2328>=Ie),512>=Ie)var Me=s(512);else if((Me=s(Ie))==null)return 0;return function(He,Ke,Ye,at,vt,$t){var st,_t,Mt=Ke,nr=1<<Ye,Vt=s(16),ir=s(16);for(e(vt!=0),e(at!=null),e(He!=null),e(0<Ye),_t=0;_t<vt;++_t){if(15<at[_t])return 0;++Vt[at[_t]]}if(Vt[0]==vt)return 0;for(ir[1]=0,st=1;15>st;++st){if(Vt[st]>1<<st)return 0;ir[st+1]=ir[st]+Vt[st]}for(_t=0;_t<vt;++_t)st=at[_t],0<at[_t]&&($t[ir[st]++]=_t);if(ir[15]==1)return(at=new R).g=0,at.value=$t[0],k(He,Mt,1,nr,at),nr;var or,br=-1,gr=nr-1,ln=0,zr=1,Mn=1,en=1<<Ye;for(_t=0,st=1,vt=2;st<=Ye;++st,vt<<=1){if(zr+=Mn<<=1,0>(Mn-=Vt[st]))return 0;for(;0<Vt[st];--Vt[st])(at=new R).g=st,at.value=$t[_t++],k(He,Mt+ln,vt,en,at),ln=F(ln,st)}for(st=Ye+1,vt=2;15>=st;++st,vt<<=1){if(zr+=Mn<<=1,0>(Mn-=Vt[st]))return 0;for(;0<Vt[st];--Vt[st]){if(at=new R,(ln&gr)!=br){for(Mt+=en,or=1<<(br=st)-Ye;15>br&&!(0>=(or-=Vt[br]));)++br,or<<=1;nr+=en=1<<(or=br-Ye),He[Ke+(br=ln&gr)].g=or+Ye,He[Ke+br].value=Mt-Ke-br}at.g=st-Ye,at.value=$t[_t++],k(He,Mt+(ln>>Ye),vt,en,at),ln=F(ln,st)}}return zr!=2*ir[15]-1?0:nr}(N,T,W,le,Ie,Me)}function R(){this.value=this.g=0}function Y(){this.value=this.g=0}function me(){this.G=o(5,R),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Mm,Y)}function pe(N,T,W,le){e(N!=null),e(T!=null),e(2147483648>le),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=T,N.pa=W,N.Jd=T,N.Yc=W+le,N.Zc=4<=le?W+le-4+1:W,M(N)}function he(N,T){for(var W=0;0<T--;)W|=ne(N,128)<<T;return W}function ge(N,T){var W=he(N,T);return G(N)?-W:W}function se(N,T,W,le){var Ie,Me=0;for(e(N!=null),e(T!=null),e(4294967288>le),N.Sb=le,N.Ra=0,N.u=0,N.h=0,4<le&&(le=4),Ie=0;Ie<le;++Ie)Me+=T[W+Ie]<<8*Ie;N.Ra=Me,N.bb=le,N.oa=T,N.pa=W}function je(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<MA-8>>>0,++N.bb,N.u-=8;Q(N)&&(N.h=1,N.u=0)}function Te(N,T){if(e(0<=T),!N.h&&T<=Wc){var W=z(N)&zc[T];return N.u+=T,je(N),W}return N.h=1,N.u=0}function D(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(N){return N.Ra>>>(N.u&MA-1)>>>0}function Q(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>MA}function J(N,T){N.u=T,N.h=Q(N)}function ee(N){N.u>=oh&&(e(N.u>=oh),je(N))}function M(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function G(N){return he(N,1)}function ne(N,T){var W=N.Ca;0>N.b&&M(N);var le=N.b,Ie=W*T>>>8,Me=(N.I>>>le>Ie)+0;for(Me?(W-=Ie,N.I-=Ie+1<<le>>>0):W=Ie+1,le=W,Ie=0;256<=le;)Ie+=8,le>>=8;return le=7^Ie+LA[le],N.b-=le,N.Ca=(W<<le)-1,Me}function ve(N,T,W){N[T+0]=W>>24&255,N[T+1]=W>>16&255,N[T+2]=W>>8&255,N[T+3]=255&W}function V(N,T){return N[T+0]|N[T+1]<<8}function qe(N,T){return V(N,T)|N[T+2]<<16}function ie(N,T){return V(N,T)|V(N,T+2)<<16}function re(N,T){var W=1<<T;return e(N!=null),e(0<T),N.X=s(W),N.X==null?0:(N.Mb=32-T,N.Xa=T,1)}function Fe(N,T){e(N!=null),e(T!=null),e(N.Xa==T.Xa),n(T.X,0,N.X,0,1<<T.Xa)}function de(){this.X=[],this.Xa=this.Mb=0}function we(N,T,W,le){e(W!=null),e(le!=null);var Ie=W[0],Me=le[0];return Ie==0&&(Ie=(N*Me+T/2)/T),Me==0&&(Me=(T*Ie+N/2)/N),0>=Ie||0>=Me?0:(W[0]=Ie,le[0]=Me,1)}function Le(N,T){return N+(1<<T)-1>>>T}function Ge(N,T){return((4278255360&N)+(4278255360&T)>>>0&4278255360)+((16711935&N)+(16711935&T)>>>0&16711935)>>>0}function ft(N,T){E[T]=function(W,le,Ie,Me,He,Ke,Ye){var at;for(at=0;at<He;++at){var vt=E[N](Ke[Ye+at-1],Ie,Me+at);Ke[Ye+at]=Ge(W[le+at],vt)}}}function ht(){this.ud=this.hd=this.jd=0}function xt(N,T){return((4278124286&(N^T))>>>1)+(N&T)>>>0}function jt(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function kt(N,T){return jt(N+(N-T+.5>>1))}function wt(N,T,W){return Math.abs(T-W)-Math.abs(N-W)}function Ve(N,T,W,le,Ie,Me,He){for(le=Me[He-1],W=0;W<Ie;++W)Me[He+W]=le=Ge(N[T+W],le)}function Pe(N,T,W,le,Ie){var Me;for(Me=0;Me<W;++Me){var He=N[T+Me],Ke=He>>8&255,Ye=16711935&(Ye=(Ye=16711935&He)+((Ke<<16)+Ke));le[Ie+Me]=(4278255360&He)+Ye>>>0}}function be(N,T){T.jd=255&N,T.hd=N>>8&255,T.ud=N>>16&255}function ce(N,T,W,le,Ie,Me){var He;for(He=0;He<le;++He){var Ke=T[W+He],Ye=Ke>>>8,at=Ke,vt=255&(vt=(vt=Ke>>>16)+((N.jd<<24>>24)*(Ye<<24>>24)>>>5));at=255&(at=(at+=(N.hd<<24>>24)*(Ye<<24>>24)>>>5)+((N.ud<<24>>24)*(vt<<24>>24)>>>5)),Ie[Me+He]=(4278255360&Ke)+(vt<<16)+at}}function te(N,T,W,le,Ie){E[T]=function(Me,He,Ke,Ye,at,vt,$t,st,_t){for(Ye=$t;Ye<st;++Ye)for($t=0;$t<_t;++$t)at[vt++]=Ie(Ke[le(Me[He++])])},E[N]=function(Me,He,Ke,Ye,at,vt,$t){var st=8>>Me.b,_t=Me.Ea,Mt=Me.K[0],nr=Me.w;if(8>st)for(Me=(1<<Me.b)-1,nr=(1<<st)-1;He<Ke;++He){var Vt,ir=0;for(Vt=0;Vt<_t;++Vt)Vt&Me||(ir=le(Ye[at++])),vt[$t++]=Ie(Mt[ir&nr]),ir>>=st}else E["VP8LMapColor"+W](Ye,at,Mt,nr,vt,$t,He,Ke,_t)}}function Ne(N,T,W,le,Ie){for(W=T+W;T<W;){var Me=N[T++];le[Ie++]=Me>>16&255,le[Ie++]=Me>>8&255,le[Ie++]=255&Me}}function Re(N,T,W,le,Ie){for(W=T+W;T<W;){var Me=N[T++];le[Ie++]=Me>>16&255,le[Ie++]=Me>>8&255,le[Ie++]=255&Me,le[Ie++]=Me>>24&255}}function ye(N,T,W,le,Ie){for(W=T+W;T<W;){var Me=(He=N[T++])>>16&240|He>>12&15,He=240&He|He>>28&15;le[Ie++]=Me,le[Ie++]=He}}function Xe(N,T,W,le,Ie){for(W=T+W;T<W;){var Me=(He=N[T++])>>16&248|He>>13&7,He=He>>5&224|He>>3&31;le[Ie++]=Me,le[Ie++]=He}}function mt(N,T,W,le,Ie){for(W=T+W;T<W;){var Me=N[T++];le[Ie++]=255&Me,le[Ie++]=Me>>8&255,le[Ie++]=Me>>16&255}}function rt(N,T,W,le,Ie,Me){if(Me==0)for(W=T+W;T<W;)ve(le,((Me=N[T++])[0]>>24|Me[1]>>8&65280|Me[2]<<8&16711680|Me[3]<<24)>>>0),Ie+=32;else n(le,Ie,N,T,W)}function ue(N,T){E[T][0]=E[N+"0"],E[T][1]=E[N+"1"],E[T][2]=E[N+"2"],E[T][3]=E[N+"3"],E[T][4]=E[N+"4"],E[T][5]=E[N+"5"],E[T][6]=E[N+"6"],E[T][7]=E[N+"7"],E[T][8]=E[N+"8"],E[T][9]=E[N+"9"],E[T][10]=E[N+"10"],E[T][11]=E[N+"11"],E[T][12]=E[N+"12"],E[T][13]=E[N+"13"],E[T][14]=E[N+"0"],E[T][15]=E[N+"0"]}function _e(N){return N==v4||N==y4||N==xN||N==b4}function We(){this.eb=[],this.size=this.A=this.fb=0}function ot(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ce(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new We,this.f.kb=new ot,this.sd=null}function $e(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function gt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Kt(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function Ut(N,T){var W=N.T,le=T.ba.f.RGBA,Ie=le.eb,Me=le.fb+N.ka*le.A,He=Du[T.ba.S],Ke=N.y,Ye=N.O,at=N.f,vt=N.N,$t=N.ea,st=N.W,_t=T.cc,Mt=T.dc,nr=T.Mc,Vt=T.Nc,ir=N.ka,or=N.ka+N.T,br=N.U,gr=br+1>>1;for(ir==0?He(Ke,Ye,null,null,at,vt,$t,st,at,vt,$t,st,Ie,Me,null,null,br):(He(T.ec,T.fc,Ke,Ye,_t,Mt,nr,Vt,at,vt,$t,st,Ie,Me-le.A,Ie,Me,br),++W);ir+2<or;ir+=2)_t=at,Mt=vt,nr=$t,Vt=st,vt+=N.Rc,st+=N.Rc,Me+=2*le.A,He(Ke,(Ye+=2*N.fa)-N.fa,Ke,Ye,_t,Mt,nr,Vt,at,vt,$t,st,Ie,Me-le.A,Ie,Me,br);return Ye+=N.fa,N.j+or<N.o?(n(T.ec,T.fc,Ke,Ye,br),n(T.cc,T.dc,at,vt,gr),n(T.Mc,T.Nc,$t,st,gr),W--):1&or||He(Ke,Ye,null,null,at,vt,$t,st,at,vt,$t,st,Ie,Me+le.A,null,null,br),W}function Jt(N,T,W){var le=N.F,Ie=[N.J];if(le!=null){var Me=N.U,He=T.ba.S,Ke=He==gN||He==xN;T=T.ba.f.RGBA;var Ye=[0],at=N.ka;Ye[0]=N.T,N.Kb&&(at==0?--Ye[0]:(--at,Ie[0]-=N.width),N.j+N.ka+N.T==N.o&&(Ye[0]=N.o-N.j-at));var vt=T.eb;at=T.fb+at*T.A,N=D8(le,Ie[0],N.width,Me,Ye,vt,at+(Ke?0:3),T.A),e(W==Ye),N&&_e(He)&&D1(vt,at,Ke,Me,Ye,T.A)}return 0}function it(N){var T=N.ma,W=T.ba.S,le=11>W,Ie=W==mN||W==pN||W==gN||W==x4||W==12||_e(W);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!I1(T.Oa,N,Ie?11:12))return 0;if(Ie&&_e(W)&&ku(),N.da)alert("todo:use_scaling");else{if(le){if(T.Ib=Kt,N.Kb){if(W=N.U+1>>1,T.memory=s(N.U+2*W),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+N.U,T.Mc=T.cc,T.Nc=T.dc+W,T.Ib=Ut,ku()}}else alert("todo:EmitYUV");Ie&&(T.Jb=Jt,le&&yc())}if(le&&!J8){for(N=0;256>N;++N)dde[N]=89858*(N-128)+yN>>vN,Ade[N]=-22014*(N-128)+yN,hde[N]=-45773*(N-128),fde[N]=113618*(N-128)+yN>>vN;for(N=M1;N<C4;++N)T=76283*(N-16)+yN>>vN,mde[N-M1]=an(T,255),pde[N-M1]=an(T+8>>4,15);J8=1}return 1}function X(N){var T=N.ma,W=N.U,le=N.T;return e(!(1&N.ka)),0>=W||0>=le?0:(W=T.Ib(N,T),T.Jb!=null&&T.Jb(N,T,W),T.Dc+=W,1)}function oe(N){N.ma.memory=null}function L(N,T,W,le){return Te(N,8)!=47?0:(T[0]=Te(N,14)+1,W[0]=Te(N,14)+1,le[0]=Te(N,1),Te(N,3)!=0?0:!N.h)}function Ae(N,T){if(4>N)return N+1;var W=N-2>>1;return(2+(1&N)<<W)+Te(T,W)+1}function Ee(N,T){return 120<T?T-120:1<=(W=((W=Yue[T-1])>>4)*N+(8-(15&W)))?W:1;var W}function Oe(N,T,W){var le=z(W),Ie=N[T+=255&le].g-8;return 0<Ie&&(J(W,W.u+8),le=z(W),T+=N[T].value,T+=le&(1<<Ie)-1),J(W,W.u+N[T].g),N[T].value}function Be(N,T,W){return W.g+=N.g,W.value+=N.value<<T>>>0,e(8>=W.g),N.g}function S(N,T,W){var le=N.xc;return e((T=le==0?0:N.vc[N.md*(W>>le)+(T>>le)])<N.Wb),N.Ya[T]}function O(N,T,W,le){var Ie=N.ab,Me=N.c*T,He=N.C;T=He+T;var Ke=W,Ye=le;for(le=N.Ta,W=N.Ua;0<Ie--;){var at=N.gc[Ie],vt=He,$t=T,st=Ke,_t=Ye,Mt=(Ye=le,Ke=W,at.Ea);switch(e(vt<$t),e($t<=at.nc),at.hc){case 2:vi(st,_t,($t-vt)*Mt,Ye,Ke);break;case 0:var nr=vt,Vt=$t,ir=Ye,or=Ke,br=(en=at).Ea;nr==0&&(P1(st,_t,null,null,1,ir,or),Ve(st,_t+1,0,0,br-1,ir,or+1),_t+=br,or+=br,++nr);for(var gr=1<<en.b,ln=gr-1,zr=Le(br,en.b),Mn=en.K,en=en.w+(nr>>en.b)*zr;nr<Vt;){var sa=Mn,Zi=en,Ln=1;for(Hg(st,_t,ir,or-br,1,ir,or);Ln<br;){var tn=(Ln&~ln)+gr;tn>br&&(tn=br),(0,T1[sa[Zi++]>>8&15])(st,_t+ +Ln,ir,or+Ln-br,tn-Ln,ir,or+Ln),Ln=tn}_t+=br,or+=br,++nr&ln||(en+=zr)}$t!=at.nc&&n(Ye,Ke-Mt,Ye,Ke+($t-vt-1)*Mt,Mt);break;case 1:for(Mt=st,Vt=_t,br=(st=at.Ea)-(or=st&~(ir=(_t=1<<at.b)-1)),nr=Le(st,at.b),gr=at.K,at=at.w+(vt>>at.b)*nr;vt<$t;){for(ln=gr,zr=at,Mn=new ht,en=Vt+or,sa=Vt+st;Vt<en;)be(ln[zr++],Mn),k1(Mn,Mt,Vt,_t,Ye,Ke),Vt+=_t,Ke+=_t;Vt<sa&&(be(ln[zr++],Mn),k1(Mn,Mt,Vt,br,Ye,Ke),Vt+=br,Ke+=br),++vt&ir||(at+=nr)}break;case 3:if(st==Ye&&_t==Ke&&0<at.b){for(Vt=Ye,st=Mt=Ke+($t-vt)*Mt-(or=($t-vt)*Le(at.Ea,at.b)),_t=Ye,ir=Ke,nr=[],or=(br=or)-1;0<=or;--or)nr[or]=_t[ir+or];for(or=br-1;0<=or;--or)Vt[st+or]=nr[or];dN(at,vt,$t,Ye,Mt,Ye,Ke)}else dN(at,vt,$t,st,_t,Ye,Ke)}Ke=le,Ye=W}Ye!=W&&n(le,W,Ke,Ye,Me)}function U(N,T){var W=N.V,le=N.Ba+N.c*N.C,Ie=T-N.C;if(e(T<=N.l.o),e(16>=Ie),0<Ie){var Me=N.l,He=N.Ta,Ke=N.Ua,Ye=Me.width;if(O(N,Ie,W,le),Ie=Ke=[Ke],e((W=N.C)<(le=T)),e(Me.v<Me.va),le>Me.o&&(le=Me.o),W<Me.j){var at=Me.j-W;W=Me.j,Ie[0]+=at*Ye}if(W>=le?W=0:(Ie[0]+=4*Me.v,Me.ka=W-Me.j,Me.U=Me.va-Me.v,Me.T=le-W,W=1),W){if(Ke=Ke[0],11>(W=N.ca).S){var vt=W.f.RGBA,$t=(le=W.S,Ie=Me.U,Me=Me.T,at=vt.eb,vt.A),st=Me;for(vt=vt.fb+N.Ma*vt.A;0<st--;){var _t=He,Mt=Ke,nr=Ie,Vt=at,ir=vt;switch(le){case AN:F1(_t,Mt,nr,Vt,ir);break;case mN:UA(_t,Mt,nr,Vt,ir);break;case v4:UA(_t,Mt,nr,Vt,ir),D1(Vt,ir,0,nr,1,0);break;case H8:Lm(_t,Mt,nr,Vt,ir);break;case pN:rt(_t,Mt,nr,Vt,ir,1);break;case y4:rt(_t,Mt,nr,Vt,ir,1),D1(Vt,ir,0,nr,1,0);break;case gN:rt(_t,Mt,nr,Vt,ir,0);break;case xN:rt(_t,Mt,nr,Vt,ir,0),D1(Vt,ir,1,nr,1,0);break;case x4:QA(_t,Mt,nr,Vt,ir);break;case b4:QA(_t,Mt,nr,Vt,ir),O8(Vt,ir,nr,1,0);break;case $8:VA(_t,Mt,nr,Vt,ir);break;default:e(0)}Ke+=Ye,vt+=$t}N.Ma+=Me}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=W.height)}}N.C=T,e(N.C<=N.i)}function q(N){var T;if(0<N.ua)return 0;for(T=0;T<N.Wb;++T){var W=N.Ya[T].G,le=N.Ya[T].H;if(0<W[1][le[1]+0].g||0<W[2][le[2]+0].g||0<W[3][le[3]+0].g)return 0}return 1}function ae(N,T,W,le,Ie,Me){if(N.Z!=0){var He=N.qd,Ke=N.rd;for(e(GA[N.Z]!=null);T<W;++T)GA[N.Z](He,Ke,le,Ie,le,Ie,Me),He=le,Ke=Ie,Ie+=Me;N.qd=He,N.rd=Ke}}function fe(N,T){var W=N.l.ma,le=W.Z==0||W.Z==1?N.l.j:N.C;if(le=N.C<le?le:N.C,e(T<=N.l.o),T>le){var Ie=N.l.width,Me=W.ca,He=W.tb+Ie*le,Ke=N.V,Ye=N.Ba+N.c*le,at=N.gc;e(N.ab==1),e(at[0].hc==3),vf(at[0],le,T,Ke,Ye,Me,He),ae(W,le,T,Me,He,Ie)}N.C=N.Ma=T}function Ue(N,T,W,le,Ie,Me,He){var Ke=N.$/le,Ye=N.$%le,at=N.m,vt=N.s,$t=W+N.$,st=$t;Ie=W+le*Ie;var _t=W+le*Me,Mt=280+vt.ua,nr=N.Pb?Ke:16777216,Vt=0<vt.ua?vt.Wa:null,ir=vt.wc,or=$t<_t?S(vt,Ye,Ke):null;e(N.C<Me),e(_t<=Ie);var br=!1;e:for(;;){for(;br||$t<_t;){var gr=0;if(Ke>=nr){var ln=$t-W;e((nr=N).Pb),nr.wd=nr.m,nr.xd=ln,0<nr.s.ua&&Fe(nr.s.Wa,nr.s.vb),nr=Ke+Zue}if(Ye&ir||(or=S(vt,Ye,Ke)),e(or!=null),or.Qb&&(T[$t]=or.qb,br=!0),!br)if(ee(at),or.jc){gr=at,ln=T;var zr=$t,Mn=or.pd[z(gr)&Mm-1];e(or.jc),256>Mn.g?(J(gr,gr.u+Mn.g),ln[zr]=Mn.value,gr=0):(J(gr,gr.u+Mn.g-256),e(256<=Mn.value),gr=Mn.value),gr==0&&(br=!0)}else gr=Oe(or.G[0],or.H[0],at);if(at.h)break;if(br||256>gr){if(!br)if(or.nd)T[$t]=(or.qb|gr<<8)>>>0;else{if(ee(at),br=Oe(or.G[1],or.H[1],at),ee(at),ln=Oe(or.G[2],or.H[2],at),zr=Oe(or.G[3],or.H[3],at),at.h)break;T[$t]=(zr<<24|br<<16|gr<<8|ln)>>>0}if(br=!1,++$t,++Ye>=le&&(Ye=0,++Ke,He!=null&&Ke<=Me&&!(Ke%16)&&He(N,Ke),Vt!=null))for(;st<$t;)gr=T[st++],Vt.X[(506832829*gr&4294967295)>>>Vt.Mb]=gr}else if(280>gr){if(gr=Ae(gr-256,at),ln=Oe(or.G[4],or.H[4],at),ee(at),ln=Ee(le,ln=Ae(ln,at)),at.h)break;if($t-W<ln||Ie-$t<gr)break e;for(zr=0;zr<gr;++zr)T[$t+zr]=T[$t+zr-ln];for($t+=gr,Ye+=gr;Ye>=le;)Ye-=le,++Ke,He!=null&&Ke<=Me&&!(Ke%16)&&He(N,Ke);if(e($t<=Ie),Ye&ir&&(or=S(vt,Ye,Ke)),Vt!=null)for(;st<$t;)gr=T[st++],Vt.X[(506832829*gr&4294967295)>>>Vt.Mb]=gr}else{if(!(gr<Mt))break e;for(br=gr-280,e(Vt!=null);st<$t;)gr=T[st++],Vt.X[(506832829*gr&4294967295)>>>Vt.Mb]=gr;gr=$t,e(!(br>>>(ln=Vt).Xa)),T[gr]=ln.X[br],br=!0}br||e(at.h==Q(at))}if(N.Pb&&at.h&&$t<Ie)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&Fe(N.s.vb,N.s.Wa);else{if(at.h)break e;He!=null&&He(N,Ke>Me?Me:Ke),N.a=0,N.$=$t-W}return 1}return N.a=3,0}function Ze(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var T=N.Wa;T!=null&&(T.X=null),N.vb=null,e(N!=null)}function lt(){var N=new yn;return N==null?null:(N.a=0,N.xb=q8,ue("Predictor","VP8LPredictors"),ue("Predictor","VP8LPredictors_C"),ue("PredictorAdd","VP8LPredictorsAdd"),ue("PredictorAdd","VP8LPredictorsAdd_C"),vi=Pe,k1=ce,F1=Ne,UA=Re,QA=ye,VA=Xe,Lm=mt,E.VP8LMapColor32b=xf,E.VP8LMapColor8b=B1,N)}function Qe(N,T,W,le,Ie){var Me=1,He=[N],Ke=[T],Ye=le.m,at=le.s,vt=null,$t=0;e:for(;;){if(W)for(;Me&&Te(Ye,1);){var st=He,_t=Ke,Mt=le,nr=1,Vt=Mt.m,ir=Mt.gc[Mt.ab],or=Te(Vt,2);if(Mt.Oc&1<<or)Me=0;else{switch(Mt.Oc|=1<<or,ir.hc=or,ir.Ea=st[0],ir.nc=_t[0],ir.K=[null],++Mt.ab,e(4>=Mt.ab),or){case 0:case 1:ir.b=Te(Vt,3)+2,nr=Qe(Le(ir.Ea,ir.b),Le(ir.nc,ir.b),0,Mt,ir.K),ir.K=ir.K[0];break;case 3:var br,gr=Te(Vt,8)+1,ln=16<gr?0:4<gr?1:2<gr?2:3;if(st[0]=Le(ir.Ea,ln),ir.b=ln,br=nr=Qe(gr,1,0,Mt,ir.K)){var zr,Mn=gr,en=ir,sa=1<<(8>>en.b),Zi=s(sa);if(Zi==null)br=0;else{var Ln=en.K[0],tn=en.w;for(Zi[0]=en.K[0][0],zr=1;zr<1*Mn;++zr)Zi[zr]=Ge(Ln[tn+zr],Zi[zr-1]);for(;zr<4*sa;++zr)Zi[zr]=0;en.K[0]=null,en.K[0]=Zi,br=1}}nr=br;break;case 2:break;default:e(0)}Me=nr}}if(He=He[0],Ke=Ke[0],Me&&Te(Ye,1)&&!(Me=1<=($t=Te(Ye,4))&&11>=$t)){le.a=3;break e}var Rr;if(Rr=Me)t:{var bi,kn,ia,As=le,zo=He,Xl=Ke,ci=$t,yl=W,Yl=As.m,eo=As.s,ca=[null],Ba=1,ui=0,Ta=Jue[ci];r:for(;;){if(yl&&Te(Yl,1)){var Wo=Te(Yl,3)+2,jd=Le(zo,Wo),wi=Le(Xl,Wo),bc=jd*wi;if(!Qe(jd,wi,0,As,ca))break r;for(ca=ca[0],eo.xc=Wo,bi=0;bi<bc;++bi){var Za=ca[bi]>>8&65535;ca[bi]=Za,Za>=Ba&&(Ba=Za+1)}}if(Yl.h)break r;for(kn=0;5>kn;++kn){var to=G8[kn];!kn&&0<ci&&(to+=1<<ci),ui<to&&(ui=to)}var Yc=o(Ba*Ta,R),Jl=Ba,Jc=o(Jl,me);if(Jc==null)var Zc=null;else e(65536>=Jl),Zc=Jc;var wc=s(ui);if(Zc==null||wc==null||Yc==null){As.a=1;break r}var eu=Yc;for(bi=ia=0;bi<Ba;++bi){var is=Zc[bi],tu=is.G,Pd=is.H,Qm=0,uh=1,Xo=0;for(kn=0;5>kn;++kn){to=G8[kn],tu[kn]=eu,Pd[kn]=ia,!kn&&0<ci&&(to+=1<<ci);a:{var wN,_4=to,NN=As,L1=wc,vde=eu,yde=ia,E4=0,KA=NN.m,bde=Te(KA,1);if(a(L1,0,0,_4),bde){var wde=Te(KA,1)+1,Nde=Te(KA,1),tL=Te(KA,Nde==0?1:8);L1[tL]=1,wde==2&&(L1[tL=Te(KA,8)]=1);var CN=1}else{var rL=s(19),nL=Te(KA,4)+4;if(19<nL){NN.a=3;var _N=0;break a}for(wN=0;wN<nL;++wN)rL[Xue[wN]]=Te(KA,3);var S4=void 0,U1=void 0,aL=NN,Cde=rL,EN=_4,sL=L1,I4=0,qA=aL.m,iL=8,oL=o(128,R);n:for(;B(oL,0,7,Cde,19);){if(Te(qA,1)){var _de=2+2*Te(qA,3);if((S4=2+Te(qA,_de))>EN)break n}else S4=EN;for(U1=0;U1<EN&&S4--;){ee(qA);var lL=oL[0+(127&z(qA))];J(qA,qA.u+lL.g);var Gg=lL.value;if(16>Gg)sL[U1++]=Gg,Gg!=0&&(iL=Gg);else{var Ede=Gg==16,cL=Gg-16,Sde=zue[cL],uL=Te(qA,que[cL])+Sde;if(U1+uL>EN)break n;for(var Ide=Ede?iL:0;0<uL--;)sL[U1++]=Ide}}I4=1;break n}I4||(aL.a=3),CN=I4}(CN=CN&&!KA.h)&&(E4=B(vde,yde,8,L1,_4)),CN&&E4!=0?_N=E4:(NN.a=3,_N=0)}if(_N==0)break r;if(uh&&Wue[kn]==1&&(uh=eu[ia].g==0),Qm+=eu[ia].g,ia+=_N,3>=kn){var Q1,j4=wc[0];for(Q1=1;Q1<to;++Q1)wc[Q1]>j4&&(j4=wc[Q1]);Xo+=j4}}if(is.nd=uh,is.Qb=0,uh&&(is.qb=(tu[3][Pd[3]+0].value<<24|tu[1][Pd[1]+0].value<<16|tu[2][Pd[2]+0].value)>>>0,Qm==0&&256>tu[0][Pd[0]+0].value&&(is.Qb=1,is.qb+=tu[0][Pd[0]+0].value<<8)),is.jc=!is.Qb&&6>Xo,is.jc){var SN,dh=is;for(SN=0;SN<Mm;++SN){var zA=SN,WA=dh.pd[zA],IN=dh.G[0][dh.H[0]+zA];256<=IN.value?(WA.g=IN.g+256,WA.value=IN.value):(WA.g=0,WA.value=0,zA>>=Be(IN,8,WA),zA>>=Be(dh.G[1][dh.H[1]+zA],16,WA),zA>>=Be(dh.G[2][dh.H[2]+zA],0,WA),Be(dh.G[3][dh.H[3]+zA],24,WA))}}}eo.vc=ca,eo.Wb=Ba,eo.Ya=Zc,eo.yc=Yc,Rr=1;break t}Rr=0}if(!(Me=Rr)){le.a=3;break e}if(0<$t){if(at.ua=1<<$t,!re(at.Wa,$t)){le.a=1,Me=0;break e}}else at.ua=0;var P4=le,dL=He,jde=Ke,B4=P4.s,T4=B4.xc;if(P4.c=dL,P4.i=jde,B4.md=Le(dL,T4),B4.wc=T4==0?-1:(1<<T4)-1,W){le.xb=ide;break e}if((vt=s(He*Ke))==null){le.a=1,Me=0;break e}Me=(Me=Ue(le,vt,0,He,Ke,Ke,null))&&!Ye.h;break e}return Me?(Ie!=null?Ie[0]=vt:(e(vt==null),e(W)),le.$=0,W||Ze(at)):Ze(at),Me}function tt(N,T){var W=N.c*N.i,le=W+T+16*T;return e(N.c<=T),N.V=s(le),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+W+T,1)}function ut(N,T){var W=N.C,le=T-W,Ie=N.V,Me=N.Ba+N.c*W;for(e(T<=N.l.o);0<le;){var He=16<le?16:le,Ke=N.l.ma,Ye=N.l.width,at=Ye*He,vt=Ke.ca,$t=Ke.tb+Ye*W,st=N.Ta,_t=N.Ua;O(N,He,Ie,Me),R8(st,_t,vt,$t,at),ae(Ke,W,W+He,vt,$t,Ye),le-=He,Ie+=He*N.c,W+=He}e(W==T),N.C=N.Ma=T}function Pt(){this.ub=this.yd=this.td=this.Rb=0}function Ct(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function It(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function St(){this.Yb=function(){var N=[];return function T(W,le,Ie){for(var Me=Ie[le],He=0;He<Me&&(W.push(Ie.length>le+1?[]:0),!(Ie.length<le+1));He++)T(W[He],le+1,Ie)}(N,0,[3,11]),N}()}function Zt(){this.jb=s(3),this.Wc=l([4,8],St),this.Xc=l([4,17],St)}function Er(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Nr(){this.ld=this.La=this.dd=this.tc=0}function Dr(){this.Na=this.la=0}function nn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function pn(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Yr(){this.uc=this.M=this.Nb=0,this.wa=Array(new Nr),this.Y=0,this.ya=Array(new pn),this.aa=0,this.l=new Je}function dn(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Vn(){this.cb=this.a=0,this.sc="",this.m=new D,this.Od=new Pt,this.Kc=new Ct,this.ed=new Er,this.Qa=new It,this.Ic=this.$c=this.Aa=0,this.D=new Yr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,D),this.ia=0,this.pb=o(4,nn),this.Pa=new Zt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new dn),this.Hd=0,this.rb=Array(new Dr),this.sb=0,this.wa=Array(new Nr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new pn),this.L=this.aa=0,this.gd=l([4,2],Nr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function an(N,T){return 0>N?0:N>T?T:N}function Je(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bt(){var N=new Vn;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,R1||(R1=lr)),N}function Ft(N,T,W){return N.a==0&&(N.a=T,N.sc=W,N.cb=0),0}function hr(N,T,W){return 3<=W&&N[T+0]==157&&N[T+1]==1&&N[T+2]==42}function dr(N,T){if(N==null)return 0;if(N.a=0,N.sc="OK",T==null)return Ft(N,2,"null VP8Io passed to VP8GetHeaders()");var W=T.data,le=T.w,Ie=T.ha;if(4>Ie)return Ft(N,7,"Truncated header.");var Me=W[le+0]|W[le+1]<<8|W[le+2]<<16,He=N.Od;if(He.Rb=!(1&Me),He.td=Me>>1&7,He.yd=Me>>4&1,He.ub=Me>>5,3<He.td)return Ft(N,3,"Incorrect keyframe parameters.");if(!He.yd)return Ft(N,4,"Frame not displayable.");le+=3,Ie-=3;var Ke=N.Kc;if(He.Rb){if(7>Ie)return Ft(N,7,"cannot parse picture header");if(!hr(W,le,Ie))return Ft(N,3,"Bad code word");Ke.c=16383&(W[le+4]<<8|W[le+3]),Ke.Td=W[le+4]>>6,Ke.i=16383&(W[le+6]<<8|W[le+5]),Ke.Ud=W[le+6]>>6,le+=7,Ie-=7,N.za=Ke.c+15>>4,N.Ub=Ke.i+15>>4,T.width=Ke.c,T.height=Ke.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,a((Me=N.Pa).jb,0,255,Me.jb.length),e((Me=N.Qa)!=null),Me.Cb=0,Me.Bb=0,Me.Fb=1,a(Me.Zb,0,0,Me.Zb.length),a(Me.Lb,0,0,Me.Lb)}if(He.ub>Ie)return Ft(N,7,"bad partition length");pe(Me=N.m,W,le,He.ub),le+=He.ub,Ie-=He.ub,He.Rb&&(Ke.Ld=G(Me),Ke.Kd=G(Me)),Ke=N.Qa;var Ye,at=N.Pa;if(e(Me!=null),e(Ke!=null),Ke.Cb=G(Me),Ke.Cb){if(Ke.Bb=G(Me),G(Me)){for(Ke.Fb=G(Me),Ye=0;4>Ye;++Ye)Ke.Zb[Ye]=G(Me)?ge(Me,7):0;for(Ye=0;4>Ye;++Ye)Ke.Lb[Ye]=G(Me)?ge(Me,6):0}if(Ke.Bb)for(Ye=0;3>Ye;++Ye)at.jb[Ye]=G(Me)?he(Me,8):255}else Ke.Bb=0;if(Me.Ka)return Ft(N,3,"cannot parse segment header");if((Ke=N.ed).zd=G(Me),Ke.Tb=he(Me,6),Ke.wb=he(Me,3),Ke.Pc=G(Me),Ke.Pc&&G(Me)){for(at=0;4>at;++at)G(Me)&&(Ke.vd[at]=ge(Me,6));for(at=0;4>at;++at)G(Me)&&(Ke.od[at]=ge(Me,6))}if(N.L=Ke.Tb==0?0:Ke.zd?1:2,Me.Ka)return Ft(N,3,"cannot parse filter header");var vt=Ie;if(Ie=Ye=le,le=Ye+vt,Ke=vt,N.Xb=(1<<he(N.m,2))-1,vt<3*(at=N.Xb))W=7;else{for(Ye+=3*at,Ke-=3*at,vt=0;vt<at;++vt){var $t=W[Ie+0]|W[Ie+1]<<8|W[Ie+2]<<16;$t>Ke&&($t=Ke),pe(N.Jc[+vt],W,Ye,$t),Ye+=$t,Ke-=$t,Ie+=3}pe(N.Jc[+at],W,Ye,Ke),W=Ye<le?0:5}if(W!=0)return Ft(N,W,"cannot parse partitions");for(W=he(Ye=N.m,7),Ie=G(Ye)?ge(Ye,4):0,le=G(Ye)?ge(Ye,4):0,Ke=G(Ye)?ge(Ye,4):0,at=G(Ye)?ge(Ye,4):0,Ye=G(Ye)?ge(Ye,4):0,vt=N.Qa,$t=0;4>$t;++$t){if(vt.Cb){var st=vt.Zb[$t];vt.Fb||(st+=W)}else{if(0<$t){N.pb[$t]=N.pb[0];continue}st=W}var _t=N.pb[$t];_t.Sc[0]=w4[an(st+Ie,127)],_t.Sc[1]=N4[an(st+0,127)],_t.Eb[0]=2*w4[an(st+le,127)],_t.Eb[1]=101581*N4[an(st+Ke,127)]>>16,8>_t.Eb[1]&&(_t.Eb[1]=8),_t.Qc[0]=w4[an(st+at,117)],_t.Qc[1]=N4[an(st+Ye,127)],_t.lc=st+Ye}if(!He.Rb)return Ft(N,4,"Not a key frame.");for(G(Me),He=N.Pa,W=0;4>W;++W){for(Ie=0;8>Ie;++Ie)for(le=0;3>le;++le)for(Ke=0;11>Ke;++Ke)at=ne(Me,ade[W][Ie][le][Ke])?he(Me,8):rde[W][Ie][le][Ke],He.Wc[W][Ie].Yb[le][Ke]=at;for(Ie=0;17>Ie;++Ie)He.Xc[W][Ie]=He.Wc[W][sde[Ie]]}return N.kc=G(Me),N.kc&&(N.Bd=he(Me,8)),N.cb=1}function lr(N,T,W,le,Ie,Me,He){var Ke=T[Ie].Yb[W];for(W=0;16>Ie;++Ie){if(!ne(N,Ke[W+0]))return Ie;for(;!ne(N,Ke[W+1]);)if(Ke=T[++Ie].Yb[0],W=0,Ie==16)return 16;var Ye=T[Ie+1].Yb;if(ne(N,Ke[W+2])){var at=N,vt=0;if(ne(at,(st=Ke)[($t=W)+3]))if(ne(at,st[$t+6])){for(Ke=0,$t=2*(vt=ne(at,st[$t+8]))+(st=ne(at,st[$t+9+vt])),vt=0,st=ede[$t];st[Ke];++Ke)vt+=vt+ne(at,st[Ke]);vt+=3+(8<<$t)}else ne(at,st[$t+7])?(vt=7+2*ne(at,165),vt+=ne(at,145)):vt=5+ne(at,159);else vt=ne(at,st[$t+4])?3+ne(at,st[$t+5]):2;Ke=Ye[2]}else vt=1,Ke=Ye[1];Ye=He+tde[Ie],0>(at=N).b&&M(at);var $t,st=at.b,_t=($t=at.Ca>>1)-(at.I>>st)>>31;--at.b,at.Ca+=_t,at.Ca|=1,at.I-=($t+1&_t)<<st,Me[Ye]=((vt^_t)-_t)*le[(0<Ie)+0]}return 16}function dt(N){var T=N.rb[N.sb-1];T.la=0,T.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function Et(N,T,W,le,Ie){Ie=N[T+W+32*le]+(Ie>>3),N[T+W+32*le]=-256&Ie?0>Ie?0:255:Ie}function bt(N,T,W,le,Ie,Me){Et(N,T,0,W,le+Ie),Et(N,T,1,W,le+Me),Et(N,T,2,W,le-Me),Et(N,T,3,W,le-Ie)}function Tt(N){return(20091*N>>16)+N}function Ht(N,T,W,le){var Ie,Me=0,He=s(16);for(Ie=0;4>Ie;++Ie){var Ke=N[T+0]+N[T+8],Ye=N[T+0]-N[T+8],at=(35468*N[T+4]>>16)-Tt(N[T+12]),vt=Tt(N[T+4])+(35468*N[T+12]>>16);He[Me+0]=Ke+vt,He[Me+1]=Ye+at,He[Me+2]=Ye-at,He[Me+3]=Ke-vt,Me+=4,T++}for(Ie=Me=0;4>Ie;++Ie)Ke=(N=He[Me+0]+4)+He[Me+8],Ye=N-He[Me+8],at=(35468*He[Me+4]>>16)-Tt(He[Me+12]),Et(W,le,0,0,Ke+(vt=Tt(He[Me+4])+(35468*He[Me+12]>>16))),Et(W,le,1,0,Ye+at),Et(W,le,2,0,Ye-at),Et(W,le,3,0,Ke-vt),Me++,le+=32}function Dt(N,T,W,le){var Ie=N[T+0]+4,Me=35468*N[T+4]>>16,He=Tt(N[T+4]),Ke=35468*N[T+1]>>16;bt(W,le,0,Ie+He,N=Tt(N[T+1]),Ke),bt(W,le,1,Ie+Me,N,Ke),bt(W,le,2,Ie-Me,N,Ke),bt(W,le,3,Ie-He,N,Ke)}function ke(N,T,W,le,Ie){Ht(N,T,W,le),Ie&&Ht(N,T+16,W,le+4)}function yt(N,T,W,le){Um(N,T+0,W,le,1),Um(N,T+32,W,le+128,1)}function Nt(N,T,W,le){var Ie;for(N=N[T+0]+4,Ie=0;4>Ie;++Ie)for(T=0;4>T;++T)Et(W,le,T,Ie,N)}function ct(N,T,W,le){N[T+0]&&Sa(N,T+0,W,le),N[T+16]&&Sa(N,T+16,W,le+4),N[T+32]&&Sa(N,T+32,W,le+128),N[T+48]&&Sa(N,T+48,W,le+128+4)}function Xt(N,T,W,le){var Ie,Me=s(16);for(Ie=0;4>Ie;++Ie){var He=N[T+0+Ie]+N[T+12+Ie],Ke=N[T+4+Ie]+N[T+8+Ie],Ye=N[T+4+Ie]-N[T+8+Ie],at=N[T+0+Ie]-N[T+12+Ie];Me[0+Ie]=He+Ke,Me[8+Ie]=He-Ke,Me[4+Ie]=at+Ye,Me[12+Ie]=at-Ye}for(Ie=0;4>Ie;++Ie)He=(N=Me[0+4*Ie]+3)+Me[3+4*Ie],Ke=Me[1+4*Ie]+Me[2+4*Ie],Ye=Me[1+4*Ie]-Me[2+4*Ie],at=N-Me[3+4*Ie],W[le+0]=He+Ke>>3,W[le+16]=at+Ye>>3,W[le+32]=He-Ke>>3,W[le+48]=at-Ye>>3,le+=64}function zt(N,T,W){var le,Ie=T-32,Me=Xc,He=255-N[Ie-1];for(le=0;le<W;++le){var Ke,Ye=Me,at=He+N[T-1];for(Ke=0;Ke<W;++Ke)N[T+Ke]=Ye[at+N[Ie+Ke]];T+=32}}function xr(N,T){zt(N,T,4)}function cr(N,T){zt(N,T,8)}function yr(N,T){zt(N,T,16)}function Tr(N,T){var W;for(W=0;16>W;++W)n(N,T+32*W,N,T-32,16)}function sn(N,T){var W;for(W=16;0<W;--W)a(N,T,N[T-1],16),T+=32}function Ar(N,T,W){var le;for(le=0;16>le;++le)a(T,W+32*le,N,16)}function Qr(N,T){var W,le=16;for(W=0;16>W;++W)le+=N[T-1+32*W]+N[T+W-32];Ar(le>>5,N,T)}function vn(N,T){var W,le=8;for(W=0;16>W;++W)le+=N[T-1+32*W];Ar(le>>4,N,T)}function Aa(N,T){var W,le=8;for(W=0;16>W;++W)le+=N[T+W-32];Ar(le>>4,N,T)}function On(N,T){Ar(128,N,T)}function Vr(N,T,W){return N+2*T+W+2>>2}function Yi(N,T){var W,le=T-32;for(le=new Uint8Array([Vr(N[le-1],N[le+0],N[le+1]),Vr(N[le+0],N[le+1],N[le+2]),Vr(N[le+1],N[le+2],N[le+3]),Vr(N[le+2],N[le+3],N[le+4])]),W=0;4>W;++W)n(N,T+32*W,le,0,le.length)}function Ms(N,T){var W=N[T-1],le=N[T-1+32],Ie=N[T-1+64],Me=N[T-1+96];ve(N,T+0,16843009*Vr(N[T-1-32],W,le)),ve(N,T+32,16843009*Vr(W,le,Ie)),ve(N,T+64,16843009*Vr(le,Ie,Me)),ve(N,T+96,16843009*Vr(Ie,Me,Me))}function Ls(N,T){var W,le=4;for(W=0;4>W;++W)le+=N[T+W-32]+N[T-1+32*W];for(le>>=3,W=0;4>W;++W)a(N,T+32*W,le,4)}function Tn(N,T){var W=N[T-1+0],le=N[T-1+32],Ie=N[T-1+64],Me=N[T-1-32],He=N[T+0-32],Ke=N[T+1-32],Ye=N[T+2-32],at=N[T+3-32];N[T+0+96]=Vr(le,Ie,N[T-1+96]),N[T+1+96]=N[T+0+64]=Vr(W,le,Ie),N[T+2+96]=N[T+1+64]=N[T+0+32]=Vr(Me,W,le),N[T+3+96]=N[T+2+64]=N[T+1+32]=N[T+0+0]=Vr(He,Me,W),N[T+3+64]=N[T+2+32]=N[T+1+0]=Vr(Ke,He,Me),N[T+3+32]=N[T+2+0]=Vr(Ye,Ke,He),N[T+3+0]=Vr(at,Ye,Ke)}function ii(N,T){var W=N[T+1-32],le=N[T+2-32],Ie=N[T+3-32],Me=N[T+4-32],He=N[T+5-32],Ke=N[T+6-32],Ye=N[T+7-32];N[T+0+0]=Vr(N[T+0-32],W,le),N[T+1+0]=N[T+0+32]=Vr(W,le,Ie),N[T+2+0]=N[T+1+32]=N[T+0+64]=Vr(le,Ie,Me),N[T+3+0]=N[T+2+32]=N[T+1+64]=N[T+0+96]=Vr(Ie,Me,He),N[T+3+32]=N[T+2+64]=N[T+1+96]=Vr(Me,He,Ke),N[T+3+64]=N[T+2+96]=Vr(He,Ke,Ye),N[T+3+96]=Vr(Ke,Ye,Ye)}function Gc(N,T){var W=N[T-1+0],le=N[T-1+32],Ie=N[T-1+64],Me=N[T-1-32],He=N[T+0-32],Ke=N[T+1-32],Ye=N[T+2-32],at=N[T+3-32];N[T+0+0]=N[T+1+64]=Me+He+1>>1,N[T+1+0]=N[T+2+64]=He+Ke+1>>1,N[T+2+0]=N[T+3+64]=Ke+Ye+1>>1,N[T+3+0]=Ye+at+1>>1,N[T+0+96]=Vr(Ie,le,W),N[T+0+64]=Vr(le,W,Me),N[T+0+32]=N[T+1+96]=Vr(W,Me,He),N[T+1+32]=N[T+2+96]=Vr(Me,He,Ke),N[T+2+32]=N[T+3+96]=Vr(He,Ke,Ye),N[T+3+32]=Vr(Ke,Ye,at)}function kA(N,T){var W=N[T+0-32],le=N[T+1-32],Ie=N[T+2-32],Me=N[T+3-32],He=N[T+4-32],Ke=N[T+5-32],Ye=N[T+6-32],at=N[T+7-32];N[T+0+0]=W+le+1>>1,N[T+1+0]=N[T+0+64]=le+Ie+1>>1,N[T+2+0]=N[T+1+64]=Ie+Me+1>>1,N[T+3+0]=N[T+2+64]=Me+He+1>>1,N[T+0+32]=Vr(W,le,Ie),N[T+1+32]=N[T+0+96]=Vr(le,Ie,Me),N[T+2+32]=N[T+1+96]=Vr(Ie,Me,He),N[T+3+32]=N[T+2+96]=Vr(Me,He,Ke),N[T+3+64]=Vr(He,Ke,Ye),N[T+3+96]=Vr(Ke,Ye,at)}function Ed(N,T){var W=N[T-1+0],le=N[T-1+32],Ie=N[T-1+64],Me=N[T-1+96];N[T+0+0]=W+le+1>>1,N[T+2+0]=N[T+0+32]=le+Ie+1>>1,N[T+2+32]=N[T+0+64]=Ie+Me+1>>1,N[T+1+0]=Vr(W,le,Ie),N[T+3+0]=N[T+1+32]=Vr(le,Ie,Me),N[T+3+32]=N[T+1+64]=Vr(Ie,Me,Me),N[T+3+64]=N[T+2+64]=N[T+0+96]=N[T+1+96]=N[T+2+96]=N[T+3+96]=Me}function FA(N,T){var W=N[T-1+0],le=N[T-1+32],Ie=N[T-1+64],Me=N[T-1+96],He=N[T-1-32],Ke=N[T+0-32],Ye=N[T+1-32],at=N[T+2-32];N[T+0+0]=N[T+2+32]=W+He+1>>1,N[T+0+32]=N[T+2+64]=le+W+1>>1,N[T+0+64]=N[T+2+96]=Ie+le+1>>1,N[T+0+96]=Me+Ie+1>>1,N[T+3+0]=Vr(Ke,Ye,at),N[T+2+0]=Vr(He,Ke,Ye),N[T+1+0]=N[T+3+32]=Vr(W,He,Ke),N[T+1+32]=N[T+3+64]=Vr(le,W,He),N[T+1+64]=N[T+3+96]=Vr(Ie,le,W),N[T+1+96]=Vr(Me,Ie,le)}function Kc(N,T){var W;for(W=0;8>W;++W)n(N,T+32*W,N,T-32,8)}function sh(N,T){var W;for(W=0;8>W;++W)a(N,T,N[T-1],8),T+=32}function Iu(N,T,W){var le;for(le=0;8>le;++le)a(T,W+32*le,N,8)}function Fm(N,T){var W,le=8;for(W=0;8>W;++W)le+=N[T+W-32]+N[T-1+32*W];Iu(le>>4,N,T)}function Ka(N,T){var W,le=4;for(W=0;8>W;++W)le+=N[T+W-32];Iu(le>>3,N,T)}function Om(N,T){var W,le=4;for(W=0;8>W;++W)le+=N[T-1+32*W];Iu(le>>3,N,T)}function Qg(N,T){Iu(128,N,T)}function ju(N,T,W){var le=N[T-W],Ie=N[T+0],Me=3*(Ie-le)+g4[1020+N[T-2*W]-N[T+W]],He=hN[112+(Me+4>>3)];N[T-W]=Xc[255+le+hN[112+(Me+3>>3)]],N[T+0]=Xc[255+Ie-He]}function OA(N,T,W,le){var Ie=N[T+0],Me=N[T+W];return Ou[255+N[T-2*W]-N[T-W]]>le||Ou[255+Me-Ie]>le}function ih(N,T,W,le){return 4*Ou[255+N[T-W]-N[T+0]]+Ou[255+N[T-2*W]-N[T+W]]<=le}function pf(N,T,W,le,Ie){var Me=N[T-3*W],He=N[T-2*W],Ke=N[T-W],Ye=N[T+0],at=N[T+W],vt=N[T+2*W],$t=N[T+3*W];return 4*Ou[255+Ke-Ye]+Ou[255+He-at]>le?0:Ou[255+N[T-4*W]-Me]<=Ie&&Ou[255+Me-He]<=Ie&&Ou[255+He-Ke]<=Ie&&Ou[255+$t-vt]<=Ie&&Ou[255+vt-at]<=Ie&&Ou[255+at-Ye]<=Ie}function gf(N,T,W,le){var Ie=2*le+1;for(le=0;16>le;++le)ih(N,T+le,W,Ie)&&ju(N,T+le,W)}function zl(N,T,W,le){var Ie=2*le+1;for(le=0;16>le;++le)ih(N,T+le*W,1,Ie)&&ju(N,T+le*W,1)}function Dm(N,T,W,le){var Ie;for(Ie=3;0<Ie;--Ie)gf(N,T+=4*W,W,le)}function Vg(N,T,W,le){var Ie;for(Ie=3;0<Ie;--Ie)zl(N,T+=4,W,le)}function Wl(N,T,W,le,Ie,Me,He,Ke){for(Me=2*Me+1;0<Ie--;){if(pf(N,T,W,Me,He))if(OA(N,T,W,Ke))ju(N,T,W);else{var Ye=N,at=T,vt=W,$t=Ye[at-2*vt],st=Ye[at-vt],_t=Ye[at+0],Mt=Ye[at+vt],nr=Ye[at+2*vt],Vt=27*(or=g4[1020+3*(_t-st)+g4[1020+$t-Mt]])+63>>7,ir=18*or+63>>7,or=9*or+63>>7;Ye[at-3*vt]=Xc[255+Ye[at-3*vt]+or],Ye[at-2*vt]=Xc[255+$t+ir],Ye[at-vt]=Xc[255+st+Vt],Ye[at+0]=Xc[255+_t-Vt],Ye[at+vt]=Xc[255+Mt-ir],Ye[at+2*vt]=Xc[255+nr-or]}T+=le}}function Pu(N,T,W,le,Ie,Me,He,Ke){for(Me=2*Me+1;0<Ie--;){if(pf(N,T,W,Me,He))if(OA(N,T,W,Ke))ju(N,T,W);else{var Ye=N,at=T,vt=W,$t=Ye[at-vt],st=Ye[at+0],_t=Ye[at+vt],Mt=hN[112+(4+(nr=3*(st-$t))>>3)],nr=hN[112+(nr+3>>3)],Vt=Mt+1>>1;Ye[at-2*vt]=Xc[255+Ye[at-2*vt]+Vt],Ye[at-vt]=Xc[255+$t+nr],Ye[at+0]=Xc[255+st-Mt],Ye[at+vt]=Xc[255+_t-Vt]}T+=le}}function DA(N,T,W,le,Ie,Me){Wl(N,T,W,1,16,le,Ie,Me)}function Bu(N,T,W,le,Ie,Me){Wl(N,T,1,W,16,le,Ie,Me)}function Rm(N,T,W,le,Ie,Me){var He;for(He=3;0<He;--He)Pu(N,T+=4*W,W,1,16,le,Ie,Me)}function H(N,T,W,le,Ie,Me){var He;for(He=3;0<He;--He)Pu(N,T+=4,1,W,16,le,Ie,Me)}function Se(N,T,W,le,Ie,Me,He,Ke){Wl(N,T,Ie,1,8,Me,He,Ke),Wl(W,le,Ie,1,8,Me,He,Ke)}function nt(N,T,W,le,Ie,Me,He,Ke){Wl(N,T,1,Ie,8,Me,He,Ke),Wl(W,le,1,Ie,8,Me,He,Ke)}function pt(N,T,W,le,Ie,Me,He,Ke){Pu(N,T+4*Ie,Ie,1,8,Me,He,Ke),Pu(W,le+4*Ie,Ie,1,8,Me,He,Ke)}function Ot(N,T,W,le,Ie,Me,He,Ke){Pu(N,T+4,1,Ie,8,Me,He,Ke),Pu(W,le+4,1,Ie,8,Me,He,Ke)}function sr(){this.ba=new Ce,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new gt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function fr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Gr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Jr(){this.ua=0,this.Wa=new de,this.vb=new de,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new me,this.yc=new R}function yn(){this.xb=this.a=0,this.l=new Je,this.ca=new Ce,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Jr,this.ab=0,this.gc=o(4,Gr),this.Oc=0}function jn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Je,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Zn(N,T,W,le,Ie,Me,He){for(N=N==null?0:N[T+0],T=0;T<He;++T)Ie[Me+T]=N+W[le+T]&255,N=Ie[Me+T]}function ba(N,T,W,le,Ie,Me,He){var Ke;if(N==null)Zn(null,null,W,le,Ie,Me,He);else for(Ke=0;Ke<He;++Ke)Ie[Me+Ke]=N[T+Ke]+W[le+Ke]&255}function Us(N,T,W,le,Ie,Me,He){if(N==null)Zn(null,null,W,le,Ie,Me,He);else{var Ke,Ye=N[T+0],at=Ye,vt=Ye;for(Ke=0;Ke<He;++Ke)at=vt+(Ye=N[T+Ke])-at,vt=W[le+Ke]+(-256&at?0>at?0:255:at)&255,at=Ye,Ie[Me+Ke]=vt}}function Pa(N,T,W,le){var Ie=T.width,Me=T.o;if(e(N!=null&&T!=null),0>W||0>=le||W+le>Me)return null;if(!N.Cc){if(N.ga==null){var He;if(N.ga=new jn,(He=N.ga==null)||(He=T.width*T.o,e(N.Gb.length==0),N.Gb=s(He),N.Uc=0,N.Gb==null?He=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,He=1),He=!He),!He){He=N.ga;var Ke=N.Fa,Ye=N.P,at=N.qc,vt=N.mb,$t=N.nb,st=Ye+1,_t=at-1,Mt=He.l;if(e(Ke!=null&&vt!=null&&T!=null),GA[0]=null,GA[1]=Zn,GA[2]=ba,GA[3]=Us,He.ca=vt,He.tb=$t,He.c=T.width,He.i=T.height,e(0<He.c&&0<He.i),1>=at)T=0;else if(He.$a=3&Ke[Ye+0],He.Z=Ke[Ye+0]>>2&3,He.Lc=Ke[Ye+0]>>4&3,Ye=Ke[Ye+0]>>6&3,0>He.$a||1<He.$a||4<=He.Z||1<He.Lc||Ye)T=0;else if(Mt.put=X,Mt.ac=it,Mt.bc=oe,Mt.ma=He,Mt.width=T.width,Mt.height=T.height,Mt.Da=T.Da,Mt.v=T.v,Mt.va=T.va,Mt.j=T.j,Mt.o=T.o,He.$a)e:{e(He.$a==1),T=lt();t:for(;;){if(T==null){T=0;break e}if(e(He!=null),He.mc=T,T.c=He.c,T.i=He.i,T.l=He.l,T.l.ma=He,T.l.width=He.c,T.l.height=He.i,T.a=0,se(T.m,Ke,st,_t),!Qe(He.c,He.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&q(T.s)?(He.ic=1,Ke=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(Ke),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(He.ic=0,T=tt(T,He.c)),!T))break t;T=1;break e}He.mc=null,T=0}else T=_t>=He.c*He.i;He=!T}if(He)return null;N.ga.Lc!=1?N.Ga=0:le=Me-W}e(N.ga!=null),e(W+le<=Me);e:{if(T=(Ke=N.ga).c,Me=Ke.l.o,Ke.$a==0){if(st=N.rc,_t=N.Vc,Mt=N.Fa,Ye=N.P+1+W*T,at=N.mb,vt=N.nb+W*T,e(Ye<=N.P+N.qc),Ke.Z!=0)for(e(GA[Ke.Z]!=null),He=0;He<le;++He)GA[Ke.Z](st,_t,Mt,Ye,at,vt,T),st=at,_t=vt,vt+=T,Ye+=T;else for(He=0;He<le;++He)n(at,vt,Mt,Ye,T),st=at,_t=vt,vt+=T,Ye+=T;N.rc=st,N.Vc=_t}else{if(e(Ke.mc!=null),T=W+le,e((He=Ke.mc)!=null),e(T<=He.i),He.C>=T)T=1;else if(Ke.ic||yc(),Ke.ic){Ke=He.V,st=He.Ba,_t=He.c;var nr=He.i,Vt=(Mt=1,Ye=He.$/_t,at=He.$%_t,vt=He.m,$t=He.s,He.$),ir=_t*nr,or=_t*T,br=$t.wc,gr=Vt<or?S($t,at,Ye):null;e(Vt<=ir),e(T<=nr),e(q($t));t:for(;;){for(;!vt.h&&Vt<or;){if(at&br||(gr=S($t,at,Ye)),e(gr!=null),ee(vt),256>(nr=Oe(gr.G[0],gr.H[0],vt)))Ke[st+Vt]=nr,++Vt,++at>=_t&&(at=0,++Ye<=T&&!(Ye%16)&&fe(He,Ye));else{if(!(280>nr)){Mt=0;break t}nr=Ae(nr-256,vt);var ln,zr=Oe(gr.G[4],gr.H[4],vt);if(ee(vt),!(Vt>=(zr=Ee(_t,zr=Ae(zr,vt)))&&ir-Vt>=nr)){Mt=0;break t}for(ln=0;ln<nr;++ln)Ke[st+Vt+ln]=Ke[st+Vt+ln-zr];for(Vt+=nr,at+=nr;at>=_t;)at-=_t,++Ye<=T&&!(Ye%16)&&fe(He,Ye);Vt<or&&at&br&&(gr=S($t,at,Ye))}e(vt.h==Q(vt))}fe(He,Ye>T?T:Ye);break t}!Mt||vt.h&&Vt<ir?(Mt=0,He.a=vt.h?5:3):He.$=Vt,T=Mt}else T=Ue(He,He.V,He.Ba,He.c,He.i,T,ut);if(!T){le=0;break e}}W+le>=Me&&(N.Cc=1),le=1}if(!le)return null;if(N.Cc&&((le=N.ga)!=null&&(le.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+W*Ie}function oi(N,T,W,le,Ie,Me){for(;0<Ie--;){var He,Ke=N,Ye=T+(W?1:0),at=N,vt=T+(W?0:3);for(He=0;He<le;++He){var $t=at[vt+4*He];$t!=255&&($t*=32897,Ke[Ye+4*He+0]=Ke[Ye+4*He+0]*$t>>23,Ke[Ye+4*He+1]=Ke[Ye+4*He+1]*$t>>23,Ke[Ye+4*He+2]=Ke[Ye+4*He+2]*$t>>23)}T+=Me}}function Qs(N,T,W,le,Ie){for(;0<le--;){var Me;for(Me=0;Me<W;++Me){var He=N[T+2*Me+0],Ke=15&(at=N[T+2*Me+1]),Ye=4369*Ke,at=(240&at|at>>4)*Ye>>16;N[T+2*Me+0]=(240&He|He>>4)*Ye>>16&240|(15&He|He<<4)*Ye>>16>>4&15,N[T+2*Me+1]=240&at|Ke}T+=Ie}}function li(N,T,W,le,Ie,Me,He,Ke){var Ye,at,vt=255;for(at=0;at<Ie;++at){for(Ye=0;Ye<le;++Ye){var $t=N[T+Ye];Me[He+4*Ye]=$t,vt&=$t}T+=W,He+=Ke}return vt!=255}function Vs(N,T,W,le,Ie){var Me;for(Me=0;Me<Ie;++Me)W[le+Me]=N[T+Me]>>8}function yc(){D1=oi,O8=Qs,D8=li,R8=Vs}function Tu(N,T,W){E[N]=function(le,Ie,Me,He,Ke,Ye,at,vt,$t,st,_t,Mt,nr,Vt,ir,or,br){var gr,ln=br-1>>1,zr=Ke[Ye+0]|at[vt+0]<<16,Mn=$t[st+0]|_t[Mt+0]<<16;e(le!=null);var en=3*zr+Mn+131074>>2;for(T(le[Ie+0],255&en,en>>16,nr,Vt),Me!=null&&(en=3*Mn+zr+131074>>2,T(Me[He+0],255&en,en>>16,ir,or)),gr=1;gr<=ln;++gr){var sa=Ke[Ye+gr]|at[vt+gr]<<16,Zi=$t[st+gr]|_t[Mt+gr]<<16,Ln=zr+sa+Mn+Zi+524296,tn=Ln+2*(sa+Mn)>>3;en=tn+zr>>1,zr=(Ln=Ln+2*(zr+Zi)>>3)+sa>>1,T(le[Ie+2*gr-1],255&en,en>>16,nr,Vt+(2*gr-1)*W),T(le[Ie+2*gr-0],255&zr,zr>>16,nr,Vt+(2*gr-0)*W),Me!=null&&(en=Ln+Mn>>1,zr=tn+Zi>>1,T(Me[He+2*gr-1],255&en,en>>16,ir,or+(2*gr-1)*W),T(Me[He+2*gr+0],255&zr,zr>>16,ir,or+(2*gr+0)*W)),zr=sa,Mn=Zi}1&br||(en=3*zr+Mn+131074>>2,T(le[Ie+br-1],255&en,en>>16,nr,Vt+(br-1)*W),Me!=null&&(en=3*Mn+zr+131074>>2,T(Me[He+br-1],255&en,en>>16,ir,or+(br-1)*W)))}}function ku(){Du[AN]=ode,Du[mN]=z8,Du[H8]=lde,Du[pN]=W8,Du[gN]=X8,Du[x4]=Y8,Du[$8]=cde,Du[v4]=z8,Du[y4]=W8,Du[xN]=X8,Du[b4]=Y8}function C(N){return N&-16384?0>N?0:255:N>>ude}function Z(N,T){return C((19077*N>>8)+(26149*T>>8)-14234)}function xe(N,T,W){return C((19077*N>>8)-(6419*T>>8)-(13320*W>>8)+8708)}function ze(N,T){return C((19077*N>>8)+(33050*T>>8)-17685)}function Rt(N,T,W,le,Ie){le[Ie+0]=Z(N,W),le[Ie+1]=xe(N,T,W),le[Ie+2]=ze(N,T)}function Wt(N,T,W,le,Ie){le[Ie+0]=ze(N,T),le[Ie+1]=xe(N,T,W),le[Ie+2]=Z(N,W)}function Sr(N,T,W,le,Ie){var Me=xe(N,T,W);T=Me<<3&224|ze(N,T)>>3,le[Ie+0]=248&Z(N,W)|Me>>5,le[Ie+1]=T}function aa(N,T,W,le,Ie){var Me=240&ze(N,T)|15;le[Ie+0]=240&Z(N,W)|xe(N,T,W)>>4,le[Ie+1]=Me}function Hs(N,T,W,le,Ie){le[Ie+0]=255,Rt(N,T,W,le,Ie+1)}function qn(N,T,W,le,Ie){Wt(N,T,W,le,Ie),le[Ie+3]=255}function ma(N,T,W,le,Ie){Rt(N,T,W,le,Ie),le[Ie+3]=255}function ss(N,T,W){E[N]=function(le,Ie,Me,He,Ke,Ye,at,vt,$t){for(var st=vt+(-2&$t)*W;vt!=st;)T(le[Ie+0],Me[He+0],Ke[Ye+0],at,vt),T(le[Ie+1],Me[He+0],Ke[Ye+0],at,vt+W),Ie+=2,++He,++Ye,vt+=2*W;1&$t&&T(le[Ie+0],Me[He+0],Ke[Ye+0],at,vt)}}function qc(N,T,W){return W==0?N==0?T==0?6:5:T==0?4:0:W}function vl(N,T,W,le,Ie){switch(N>>>30){case 3:Um(T,W,le,Ie,0);break;case 2:Fu(T,W,le,Ie);break;case 1:Sa(T,W,le,Ie)}}function qo(N,T){var W,le,Ie=T.M,Me=T.Nb,He=N.oc,Ke=N.pc+40,Ye=N.oc,at=N.pc+584,vt=N.oc,$t=N.pc+600;for(W=0;16>W;++W)He[Ke+32*W-1]=129;for(W=0;8>W;++W)Ye[at+32*W-1]=129,vt[$t+32*W-1]=129;for(0<Ie?He[Ke-1-32]=Ye[at-1-32]=vt[$t-1-32]=129:(a(He,Ke-32-1,127,21),a(Ye,at-32-1,127,9),a(vt,$t-32-1,127,9)),le=0;le<N.za;++le){var st=T.ya[T.aa+le];if(0<le){for(W=-1;16>W;++W)n(He,Ke+32*W-4,He,Ke+32*W+12,4);for(W=-1;8>W;++W)n(Ye,at+32*W-4,Ye,at+32*W+4,4),n(vt,$t+32*W-4,vt,$t+32*W+4,4)}var _t=N.Gd,Mt=N.Hd+le,nr=st.ad,Vt=st.Hc;if(0<Ie&&(n(He,Ke-32,_t[Mt].y,0,16),n(Ye,at-32,_t[Mt].f,0,8),n(vt,$t-32,_t[Mt].ea,0,8)),st.Za){var ir=He,or=Ke-32+16;for(0<Ie&&(le>=N.za-1?a(ir,or,_t[Mt].y[15],4):n(ir,or,_t[Mt+1].y,0,4)),W=0;4>W;W++)ir[or+128+W]=ir[or+256+W]=ir[or+384+W]=ir[or+0+W];for(W=0;16>W;++W,Vt<<=2)ir=He,or=Ke+Z8[W],Id[st.Ob[W]](ir,or),vl(Vt,nr,16*+W,ir,or)}else if(ir=qc(le,Ie,st.Ob[0]),$A[ir](He,Ke),Vt!=0)for(W=0;16>W;++W,Vt<<=2)vl(Vt,nr,16*+W,He,Ke+Z8[W]);for(W=st.Gc,ir=qc(le,Ie,st.Dd),ch[ir](Ye,at),ch[ir](vt,$t),Vt=nr,ir=Ye,or=at,255&(st=0|W)&&(170&st?yf(Vt,256,ir,or):Ja(Vt,256,ir,or)),st=vt,Vt=$t,255&(W>>=8)&&(170&W?yf(nr,320,st,Vt):Ja(nr,320,st,Vt)),Ie<N.Ub-1&&(n(_t[Mt].y,0,He,Ke+480,16),n(_t[Mt].f,0,Ye,at+224,8),n(_t[Mt].ea,0,vt,$t+224,8)),W=8*Me*N.B,_t=N.sa,Mt=N.ta+16*le+16*Me*N.R,nr=N.qa,st=N.ra+8*le+W,Vt=N.Ha,ir=N.Ia+8*le+W,W=0;16>W;++W)n(_t,Mt+W*N.R,He,Ke+32*W,16);for(W=0;8>W;++W)n(nr,st+W*N.B,Ye,at+32*W,8),n(Vt,ir+W*N.B,vt,$t+32*W,8)}}function Sd(N,T,W,le,Ie,Me,He,Ke,Ye){var at=[0],vt=[0],$t=0,st=Ye!=null?Ye.kd:0,_t=Ye??new fr;if(N==null||12>W)return 7;_t.data=N,_t.w=T,_t.ha=W,T=[T],W=[W],_t.gb=[_t.gb];e:{var Mt=T,nr=W,Vt=_t.gb;if(e(N!=null),e(nr!=null),e(Vt!=null),Vt[0]=0,12<=nr[0]&&!r(N,Mt[0],"RIFF")){if(r(N,Mt[0]+8,"WEBP")){Vt=3;break e}var ir=ie(N,Mt[0]+4);if(12>ir||4294967286<ir){Vt=3;break e}if(st&&ir>nr[0]-8){Vt=7;break e}Vt[0]=ir,Mt[0]+=12,nr[0]-=12}Vt=0}if(Vt!=0)return Vt;for(ir=0<_t.gb[0],W=W[0];;){e:{var or=N;nr=T,Vt=W;var br=at,gr=vt,ln=Mt=[0];if((en=$t=[$t])[0]=0,8>Vt[0])Vt=7;else{if(!r(or,nr[0],"VP8X")){if(ie(or,nr[0]+4)!=10){Vt=3;break e}if(18>Vt[0]){Vt=7;break e}var zr=ie(or,nr[0]+8),Mn=1+qe(or,nr[0]+12);if(2147483648<=Mn*(or=1+qe(or,nr[0]+15))){Vt=3;break e}ln!=null&&(ln[0]=zr),br!=null&&(br[0]=Mn),gr!=null&&(gr[0]=or),nr[0]+=18,Vt[0]-=18,en[0]=1}Vt=0}}if($t=$t[0],Mt=Mt[0],Vt!=0)return Vt;if(nr=!!(2&Mt),!ir&&$t)return 3;if(Me!=null&&(Me[0]=!!(16&Mt)),He!=null&&(He[0]=nr),Ke!=null&&(Ke[0]=0),He=at[0],Mt=vt[0],$t&&nr&&Ye==null){Vt=0;break}if(4>W){Vt=7;break}if(ir&&$t||!ir&&!$t&&!r(N,T[0],"ALPH")){W=[W],_t.na=[_t.na],_t.P=[_t.P],_t.Sa=[_t.Sa];e:{zr=N,Vt=T,ir=W;var en=_t.gb;br=_t.na,gr=_t.P,ln=_t.Sa,Mn=22,e(zr!=null),e(ir!=null),or=Vt[0];var sa=ir[0];for(e(br!=null),e(ln!=null),br[0]=null,gr[0]=null,ln[0]=0;;){if(Vt[0]=or,ir[0]=sa,8>sa){Vt=7;break e}var Zi=ie(zr,or+4);if(4294967286<Zi){Vt=3;break e}var Ln=8+Zi+1&-2;if(Mn+=Ln,0<en&&Mn>en){Vt=3;break e}if(!r(zr,or,"VP8 ")||!r(zr,or,"VP8L")){Vt=0;break e}if(sa[0]<Ln){Vt=7;break e}r(zr,or,"ALPH")||(br[0]=zr,gr[0]=or+8,ln[0]=Zi),or+=Ln,sa-=Ln}}if(W=W[0],_t.na=_t.na[0],_t.P=_t.P[0],_t.Sa=_t.Sa[0],Vt!=0)break}W=[W],_t.Ja=[_t.Ja],_t.xa=[_t.xa];e:if(en=N,Vt=T,ir=W,br=_t.gb[0],gr=_t.Ja,ln=_t.xa,zr=Vt[0],or=!r(en,zr,"VP8 "),Mn=!r(en,zr,"VP8L"),e(en!=null),e(ir!=null),e(gr!=null),e(ln!=null),8>ir[0])Vt=7;else{if(or||Mn){if(en=ie(en,zr+4),12<=br&&en>br-12){Vt=3;break e}if(st&&en>ir[0]-8){Vt=7;break e}gr[0]=en,Vt[0]+=8,ir[0]-=8,ln[0]=Mn}else ln[0]=5<=ir[0]&&en[zr+0]==47&&!(en[zr+4]>>5),gr[0]=ir[0];Vt=0}if(W=W[0],_t.Ja=_t.Ja[0],_t.xa=_t.xa[0],T=T[0],Vt!=0)break;if(4294967286<_t.Ja)return 3;if(Ke==null||nr||(Ke[0]=_t.xa?2:1),He=[He],Mt=[Mt],_t.xa){if(5>W){Vt=7;break}Ke=He,st=Mt,nr=Me,N==null||5>W?N=0:5<=W&&N[T+0]==47&&!(N[T+4]>>5)?(ir=[0],en=[0],br=[0],se(gr=new K,N,T,W),L(gr,ir,en,br)?(Ke!=null&&(Ke[0]=ir[0]),st!=null&&(st[0]=en[0]),nr!=null&&(nr[0]=br[0]),N=1):N=0):N=0}else{if(10>W){Vt=7;break}Ke=Mt,N==null||10>W||!hr(N,T+3,W-3)?N=0:(st=N[T+0]|N[T+1]<<8|N[T+2]<<16,nr=16383&(N[T+7]<<8|N[T+6]),N=16383&(N[T+9]<<8|N[T+8]),1&st||3<(st>>1&7)||!(st>>4&1)||st>>5>=_t.Ja||!nr||!N?N=0:(He&&(He[0]=nr),Ke&&(Ke[0]=N),N=1))}if(!N||(He=He[0],Mt=Mt[0],$t&&(at[0]!=He||vt[0]!=Mt)))return 3;Ye!=null&&(Ye[0]=_t,Ye.offset=T-Ye.w,e(4294967286>T-Ye.w),e(Ye.offset==Ye.ha-W));break}return Vt==0||Vt==7&&$t&&Ye==null?(Me!=null&&(Me[0]|=_t.na!=null&&0<_t.na.length),le!=null&&(le[0]=He),Ie!=null&&(Ie[0]=Mt),0):Vt}function I1(N,T,W){var le=T.width,Ie=T.height,Me=0,He=0,Ke=le,Ye=Ie;if(T.Da=N!=null&&0<N.Da,T.Da&&(Ke=N.cd,Ye=N.bd,Me=N.v,He=N.j,11>W||(Me&=-2,He&=-2),0>Me||0>He||0>=Ke||0>=Ye||Me+Ke>le||He+Ye>Ie))return 0;if(T.v=Me,T.j=He,T.va=Me+Ke,T.o=He+Ye,T.U=Ke,T.T=Ye,T.da=N!=null&&0<N.da,T.da){if(!we(Ke,Ye,W=[N.ib],Me=[N.hb]))return 0;T.ib=W[0],T.hb=Me[0]}return T.ob=N!=null&&N.ob,T.Kb=N==null||!N.Sd,T.da&&(T.ob=T.ib<3*le/4&&T.hb<3*Ie/4,T.Kb=0),1}function j1(N){if(N==null)return 2;if(11>N.S){var T=N.f.RGBA;T.fb+=(N.height-1)*T.A,T.A=-T.A}else T=N.f.kb,N=N.height,T.O+=(N-1)*T.fa,T.fa=-T.fa,T.N+=(N-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(N-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(N-1)*T.lb,T.lb=-T.lb);return 0}function RA(N,T,W,le){if(le==null||0>=N||0>=T)return 2;if(W!=null){if(W.Da){var Ie=W.cd,Me=W.bd,He=-2&W.v,Ke=-2&W.j;if(0>He||0>Ke||0>=Ie||0>=Me||He+Ie>N||Ke+Me>T)return 2;N=Ie,T=Me}if(W.da){if(!we(N,T,Ie=[W.ib],Me=[W.hb]))return 2;N=Ie[0],T=Me[0]}}le.width=N,le.height=T;e:{var Ye=le.width,at=le.height;if(N=le.S,0>=Ye||0>=at||!(N>=AN&&13>N))N=2;else{if(0>=le.Rd&&le.sd==null){He=Me=Ie=T=0;var vt=(Ke=Ye*eL[N])*at;if(11>N||(Me=(at+1)/2*(T=(Ye+1)/2),N==12&&(He=(Ie=Ye)*at)),(at=s(vt+2*Me+He))==null){N=1;break e}le.sd=at,11>N?((Ye=le.f.RGBA).eb=at,Ye.fb=0,Ye.A=Ke,Ye.size=vt):((Ye=le.f.kb).y=at,Ye.O=0,Ye.fa=Ke,Ye.Fd=vt,Ye.f=at,Ye.N=0+vt,Ye.Ab=T,Ye.Cd=Me,Ye.ea=at,Ye.W=0+vt+Me,Ye.Db=T,Ye.Ed=Me,N==12&&(Ye.F=at,Ye.J=0+vt+2*Me),Ye.Tc=He,Ye.lb=Ie)}if(T=1,Ie=le.S,Me=le.width,He=le.height,Ie>=AN&&13>Ie)if(11>Ie)N=le.f.RGBA,T&=(Ke=Math.abs(N.A))*(He-1)+Me<=N.size,T&=Ke>=Me*eL[Ie],T&=N.eb!=null;else{N=le.f.kb,Ke=(Me+1)/2,vt=(He+1)/2,Ye=Math.abs(N.fa),at=Math.abs(N.Ab);var $t=Math.abs(N.Db),st=Math.abs(N.lb),_t=st*(He-1)+Me;T&=Ye*(He-1)+Me<=N.Fd,T&=at*(vt-1)+Ke<=N.Cd,T=(T&=$t*(vt-1)+Ke<=N.Ed)&Ye>=Me&at>=Ke&$t>=Ke,T&=N.y!=null,T&=N.f!=null,T&=N.ea!=null,Ie==12&&(T&=st>=Me,T&=_t<=N.Tc,T&=N.F!=null)}else T=0;N=T?0:2}}return N!=0||W!=null&&W.fd&&(N=j1(le)),N}var Mm=64,zc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Wc=24,MA=32,oh=8,LA=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ft("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(N){return N},E.Predictor2=function(N,T,W){return T[W+0]},E.Predictor3=function(N,T,W){return T[W+1]},E.Predictor4=function(N,T,W){return T[W-1]},E.Predictor5=function(N,T,W){return xt(xt(N,T[W+1]),T[W+0])},E.Predictor6=function(N,T,W){return xt(N,T[W-1])},E.Predictor7=function(N,T,W){return xt(N,T[W+0])},E.Predictor8=function(N,T,W){return xt(T[W-1],T[W+0])},E.Predictor9=function(N,T,W){return xt(T[W+0],T[W+1])},E.Predictor10=function(N,T,W){return xt(xt(N,T[W-1]),xt(T[W+0],T[W+1]))},E.Predictor11=function(N,T,W){var le=T[W+0];return 0>=wt(le>>24&255,N>>24&255,(T=T[W-1])>>24&255)+wt(le>>16&255,N>>16&255,T>>16&255)+wt(le>>8&255,N>>8&255,T>>8&255)+wt(255&le,255&N,255&T)?le:N},E.Predictor12=function(N,T,W){var le=T[W+0];return(jt((N>>24&255)+(le>>24&255)-((T=T[W-1])>>24&255))<<24|jt((N>>16&255)+(le>>16&255)-(T>>16&255))<<16|jt((N>>8&255)+(le>>8&255)-(T>>8&255))<<8|jt((255&N)+(255&le)-(255&T)))>>>0},E.Predictor13=function(N,T,W){var le=T[W-1];return(kt((N=xt(N,T[W+0]))>>24&255,le>>24&255)<<24|kt(N>>16&255,le>>16&255)<<16|kt(N>>8&255,le>>8&255)<<8|kt(255&N,255&le))>>>0};var P1=E.PredictorAdd0;E.PredictorAdd1=Ve,ft("Predictor2","PredictorAdd2"),ft("Predictor3","PredictorAdd3"),ft("Predictor4","PredictorAdd4"),ft("Predictor5","PredictorAdd5"),ft("Predictor6","PredictorAdd6"),ft("Predictor7","PredictorAdd7"),ft("Predictor8","PredictorAdd8"),ft("Predictor9","PredictorAdd9"),ft("Predictor10","PredictorAdd10"),ft("Predictor11","PredictorAdd11"),ft("Predictor12","PredictorAdd12"),ft("Predictor13","PredictorAdd13");var Hg=E.PredictorAdd2;te("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),te("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var vi,dN=E.ColorIndexInverseTransform,xf=E.MapARGB,vf=E.VP8LColorIndexInverseTransformAlpha,B1=E.MapAlpha,T1=E.VP8LPredictorsAdd=[];T1.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var k1,F1,UA,QA,VA,Lm,HA,Um,Fu,yf,Sa,Ja,yi,Ji,lh,O1,$g,fN,j8,P8,B8,T8,k8,F8,D1,O8,D8,R8,M8=s(511),L8=s(2041),U8=s(225),Q8=s(767),V8=0,g4=L8,hN=U8,Xc=Q8,Ou=M8,AN=0,mN=1,H8=2,pN=3,gN=4,x4=5,$8=6,v4=7,y4=8,xN=9,b4=10,que=[2,3,7],zue=[3,3,11],G8=[280,256,256,256,40],Wue=[0,1,1,1,0],Xue=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Yue=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Jue=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zue=8,w4=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],N4=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],R1=null,ede=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],tde=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],K8=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],rde=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],nde=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ade=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],sde=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],$A=[],Id=[],ch=[],ide=1,q8=2,GA=[],Du=[];Tu("UpsampleRgbLinePair",Rt,3),Tu("UpsampleBgrLinePair",Wt,3),Tu("UpsampleRgbaLinePair",ma,4),Tu("UpsampleBgraLinePair",qn,4),Tu("UpsampleArgbLinePair",Hs,4),Tu("UpsampleRgba4444LinePair",aa,2),Tu("UpsampleRgb565LinePair",Sr,2);var ode=E.UpsampleRgbLinePair,lde=E.UpsampleBgrLinePair,z8=E.UpsampleRgbaLinePair,W8=E.UpsampleBgraLinePair,X8=E.UpsampleArgbLinePair,Y8=E.UpsampleRgba4444LinePair,cde=E.UpsampleRgb565LinePair,vN=16,yN=1<<vN-1,M1=-227,C4=482,ude=6,J8=0,dde=s(256),fde=s(256),hde=s(256),Ade=s(256),mde=s(C4-M1),pde=s(C4-M1);ss("YuvToRgbRow",Rt,3),ss("YuvToBgrRow",Wt,3),ss("YuvToRgbaRow",ma,4),ss("YuvToBgraRow",qn,4),ss("YuvToArgbRow",Hs,4),ss("YuvToRgba4444Row",aa,2),ss("YuvToRgb565Row",Sr,2);var Z8=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],bN=[0,2,8],gde=[8,7,6,4,4,2,2,2,1,1,1,1],xde=1;this.WebPDecodeRGBA=function(N,T,W,le,Ie){var Me=mN,He=new sr,Ke=new Ce;He.ba=Ke,Ke.S=Me,Ke.width=[Ke.width],Ke.height=[Ke.height];var Ye=Ke.width,at=Ke.height,vt=new $e;if(vt==null||N==null)var $t=2;else e(vt!=null),$t=Sd(N,T,W,vt.width,vt.height,vt.Pd,vt.Qd,vt.format,null);if($t!=0?Ye=0:(Ye!=null&&(Ye[0]=vt.width[0]),at!=null&&(at[0]=vt.height[0]),Ye=1),Ye){Ke.width=Ke.width[0],Ke.height=Ke.height[0],le!=null&&(le[0]=Ke.width),Ie!=null&&(Ie[0]=Ke.height);e:{if(le=new Je,(Ie=new fr).data=N,Ie.w=T,Ie.ha=W,Ie.kd=1,T=[0],e(Ie!=null),((N=Sd(Ie.data,Ie.w,Ie.ha,null,null,null,T,null,Ie))==0||N==7)&&T[0]&&(N=4),(T=N)==0){if(e(He!=null),le.data=Ie.data,le.w=Ie.w+Ie.offset,le.ha=Ie.ha-Ie.offset,le.put=X,le.ac=it,le.bc=oe,le.ma=He,Ie.xa){if((N=lt())==null){He=1;break e}if(function(st,_t){var Mt=[0],nr=[0],Vt=[0];t:for(;;){if(st==null)return 0;if(_t==null)return st.a=2,0;if(st.l=_t,st.a=0,se(st.m,_t.data,_t.w,_t.ha),!L(st.m,Mt,nr,Vt)){st.a=3;break t}if(st.xb=q8,_t.width=Mt[0],_t.height=nr[0],!Qe(Mt[0],nr[0],1,st,null))break t;return 1}return e(st.a!=0),0}(N,le)){if(le=(T=RA(le.width,le.height,He.Oa,He.ba))==0){t:{le=N;r:for(;;){if(le==null){le=0;break t}if(e(le.s.yc!=null),e(le.s.Ya!=null),e(0<le.s.Wb),e((W=le.l)!=null),e((Ie=W.ma)!=null),le.xb!=0){if(le.ca=Ie.ba,le.tb=Ie.tb,e(le.ca!=null),!I1(Ie.Oa,W,pN)){le.a=2;break r}if(!tt(le,W.width)||W.da)break r;if((W.da||_e(le.ca.S))&&yc(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&yc()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!re(le.s.vb,le.s.Wa.Xa)){le.a=1;break r}le.xb=0}if(!Ue(le,le.V,le.Ba,le.c,le.i,W.o,U))break r;Ie.Dc=le.Ma,le=1;break t}e(le.a!=0),le=0}le=!le}le&&(T=N.a)}else T=N.a}else{if((N=new Bt)==null){He=1;break e}if(N.Fa=Ie.na,N.P=Ie.P,N.qc=Ie.Sa,dr(N,le)){if((T=RA(le.width,le.height,He.Oa,He.ba))==0){if(N.Aa=0,W=He.Oa,e((Ie=N)!=null),W!=null){if(0<(Ye=0>(Ye=W.Md)?0:100<Ye?255:255*Ye/100)){for(at=vt=0;4>at;++at)12>($t=Ie.pb[at]).lc&&($t.ia=Ye*gde[0>$t.lc?0:$t.lc]>>3),vt|=$t.ia;vt&&(alert("todo:VP8InitRandom"),Ie.ia=1)}Ie.Ga=W.Id,100<Ie.Ga?Ie.Ga=100:0>Ie.Ga&&(Ie.Ga=0)}(function(st,_t){if(st==null)return 0;if(_t==null)return Ft(st,2,"NULL VP8Io parameter in VP8Decode().");if(!st.cb&&!dr(st,_t))return 0;if(e(st.cb),_t.ac==null||_t.ac(_t)){_t.ob&&(st.L=0);var Mt=bN[st.L];if(st.L==2?(st.yb=0,st.zb=0):(st.yb=_t.v-Mt>>4,st.zb=_t.j-Mt>>4,0>st.yb&&(st.yb=0),0>st.zb&&(st.zb=0)),st.Va=_t.o+15+Mt>>4,st.Hb=_t.va+15+Mt>>4,st.Hb>st.za&&(st.Hb=st.za),st.Va>st.Ub&&(st.Va=st.Ub),0<st.L){var nr=st.ed;for(Mt=0;4>Mt;++Mt){var Vt;if(st.Qa.Cb){var ir=st.Qa.Lb[Mt];st.Qa.Fb||(ir+=nr.Tb)}else ir=nr.Tb;for(Vt=0;1>=Vt;++Vt){var or=st.gd[Mt][Vt],br=ir;if(nr.Pc&&(br+=nr.vd[0],Vt&&(br+=nr.od[0])),0<(br=0>br?0:63<br?63:br)){var gr=br;0<nr.wb&&(gr=4<nr.wb?gr>>2:gr>>1)>9-nr.wb&&(gr=9-nr.wb),1>gr&&(gr=1),or.dd=gr,or.tc=2*br+gr,or.ld=40<=br?2:15<=br?1:0}else or.tc=0;or.La=Vt}}}Mt=0}else Ft(st,6,"Frame setup failed"),Mt=st.a;if(Mt=Mt==0){if(Mt){st.$c=0,0<st.Aa||(st.Ic=xde);t:{Mt=st.Ic,nr=4*(gr=st.za);var ln=32*gr,zr=gr+1,Mn=0<st.L?gr*(0<st.Aa?2:1):0,en=(st.Aa==2?2:1)*gr;if((or=nr+832+(Vt=3*(16*Mt+bN[st.L])/2*ln)+(ir=st.Fa!=null&&0<st.Fa.length?st.Kc.c*st.Kc.i:0))!=or)Mt=0;else{if(or>st.Vb){if(st.Vb=0,st.Ec=s(or),st.Fc=0,st.Ec==null){Mt=Ft(st,1,"no memory during frame initialization.");break t}st.Vb=or}or=st.Ec,br=st.Fc,st.Ac=or,st.Bc=br,br+=nr,st.Gd=o(ln,dn),st.Hd=0,st.rb=o(zr+1,Dr),st.sb=1,st.wa=Mn?o(Mn,Nr):null,st.Y=0,st.D.Nb=0,st.D.wa=st.wa,st.D.Y=st.Y,0<st.Aa&&(st.D.Y+=gr),e(!0),st.oc=or,st.pc=br,br+=832,st.ya=o(en,pn),st.aa=0,st.D.ya=st.ya,st.D.aa=st.aa,st.Aa==2&&(st.D.aa+=gr),st.R=16*gr,st.B=8*gr,gr=(ln=bN[st.L])*st.R,ln=ln/2*st.B,st.sa=or,st.ta=br+gr,st.qa=st.sa,st.ra=st.ta+16*Mt*st.R+ln,st.Ha=st.qa,st.Ia=st.ra+8*Mt*st.B+ln,st.$c=0,br+=Vt,st.mb=ir?or:null,st.nb=ir?br:null,e(br+ir<=st.Fc+st.Vb),dt(st),a(st.Ac,st.Bc,0,nr),Mt=1}}if(Mt){if(_t.ka=0,_t.y=st.sa,_t.O=st.ta,_t.f=st.qa,_t.N=st.ra,_t.ea=st.Ha,_t.Vd=st.Ia,_t.fa=st.R,_t.Rc=st.B,_t.F=null,_t.J=0,!V8){for(Mt=-255;255>=Mt;++Mt)M8[255+Mt]=0>Mt?-Mt:Mt;for(Mt=-1020;1020>=Mt;++Mt)L8[1020+Mt]=-128>Mt?-128:127<Mt?127:Mt;for(Mt=-112;112>=Mt;++Mt)U8[112+Mt]=-16>Mt?-16:15<Mt?15:Mt;for(Mt=-255;510>=Mt;++Mt)Q8[255+Mt]=0>Mt?0:255<Mt?255:Mt;V8=1}HA=Xt,Um=ke,yf=yt,Sa=Nt,Ja=ct,Fu=Dt,yi=DA,Ji=Bu,lh=Se,O1=nt,$g=Rm,fN=H,j8=pt,P8=Ot,B8=gf,T8=zl,k8=Dm,F8=Vg,Id[0]=Ls,Id[1]=xr,Id[2]=Yi,Id[3]=Ms,Id[4]=Tn,Id[5]=Gc,Id[6]=ii,Id[7]=kA,Id[8]=FA,Id[9]=Ed,$A[0]=Qr,$A[1]=yr,$A[2]=Tr,$A[3]=sn,$A[4]=vn,$A[5]=Aa,$A[6]=On,ch[0]=Fm,ch[1]=cr,ch[2]=Kc,ch[3]=sh,ch[4]=Om,ch[5]=Ka,ch[6]=Qg,Mt=1}else Mt=0}Mt&&(Mt=function(sa,Zi){for(sa.M=0;sa.M<sa.Va;++sa.M){var Ln,tn=sa.Jc[sa.M&sa.Xb],Rr=sa.m,bi=sa;for(Ln=0;Ln<bi.za;++Ln){var kn=Rr,ia=bi,As=ia.Ac,zo=ia.Bc+4*Ln,Xl=ia.zc,ci=ia.ya[ia.aa+Ln];if(ia.Qa.Bb?ci.$b=ne(kn,ia.Pa.jb[0])?2+ne(kn,ia.Pa.jb[2]):ne(kn,ia.Pa.jb[1]):ci.$b=0,ia.kc&&(ci.Ad=ne(kn,ia.Bd)),ci.Za=!ne(kn,145)+0,ci.Za){var yl=ci.Ob,Yl=0;for(ia=0;4>ia;++ia){var eo,ca=Xl[0+ia];for(eo=0;4>eo;++eo){ca=nde[As[zo+eo]][ca];for(var Ba=K8[ne(kn,ca[0])];0<Ba;)Ba=K8[2*Ba+ne(kn,ca[Ba])];ca=-Ba,As[zo+eo]=ca}n(yl,Yl,As,zo,4),Yl+=4,Xl[0+ia]=ca}}else ca=ne(kn,156)?ne(kn,128)?1:3:ne(kn,163)?2:0,ci.Ob[0]=ca,a(As,zo,ca,4),a(Xl,0,ca,4);ci.Dd=ne(kn,142)?ne(kn,114)?ne(kn,183)?1:3:2:0}if(bi.m.Ka)return Ft(sa,7,"Premature end-of-partition0 encountered.");for(;sa.ja<sa.za;++sa.ja){if(bi=tn,kn=(Rr=sa).rb[Rr.sb-1],As=Rr.rb[Rr.sb+Rr.ja],Ln=Rr.ya[Rr.aa+Rr.ja],zo=Rr.kc?Ln.Ad:0)kn.la=As.la=0,Ln.Za||(kn.Na=As.Na=0),Ln.Hc=0,Ln.Gc=0,Ln.ia=0;else{var ui,Ta;if(kn=As,As=bi,zo=Rr.Pa.Xc,Xl=Rr.ya[Rr.aa+Rr.ja],ci=Rr.pb[Xl.$b],ia=Xl.ad,yl=0,Yl=Rr.rb[Rr.sb-1],ca=eo=0,a(ia,yl,0,384),Xl.Za)var Wo=0,jd=zo[3];else{Ba=s(16);var wi=kn.Na+Yl.Na;if(wi=R1(As,zo[1],wi,ci.Eb,0,Ba,0),kn.Na=Yl.Na=(0<wi)+0,1<wi)HA(Ba,0,ia,yl);else{var bc=Ba[0]+3>>3;for(Ba=0;256>Ba;Ba+=16)ia[yl+Ba]=bc}Wo=1,jd=zo[0]}var Za=15&kn.la,to=15&Yl.la;for(Ba=0;4>Ba;++Ba){var Yc=1&to;for(bc=Ta=0;4>bc;++bc)Za=Za>>1|(Yc=(wi=R1(As,jd,wi=Yc+(1&Za),ci.Sc,Wo,ia,yl))>Wo)<<7,Ta=Ta<<2|(3<wi?3:1<wi?2:ia[yl+0]!=0),yl+=16;Za>>=4,to=to>>1|Yc<<7,eo=(eo<<8|Ta)>>>0}for(jd=Za,Wo=to>>4,ui=0;4>ui;ui+=2){for(Ta=0,Za=kn.la>>4+ui,to=Yl.la>>4+ui,Ba=0;2>Ba;++Ba){for(Yc=1&to,bc=0;2>bc;++bc)wi=Yc+(1&Za),Za=Za>>1|(Yc=0<(wi=R1(As,zo[2],wi,ci.Qc,0,ia,yl)))<<3,Ta=Ta<<2|(3<wi?3:1<wi?2:ia[yl+0]!=0),yl+=16;Za>>=2,to=to>>1|Yc<<5}ca|=Ta<<4*ui,jd|=Za<<4<<ui,Wo|=(240&to)<<ui}kn.la=jd,Yl.la=Wo,Xl.Hc=eo,Xl.Gc=ca,Xl.ia=43690&ca?0:ci.ia,zo=!(eo|ca)}if(0<Rr.L&&(Rr.wa[Rr.Y+Rr.ja]=Rr.gd[Ln.$b][Ln.Za],Rr.wa[Rr.Y+Rr.ja].La|=!zo),bi.Ka)return Ft(sa,7,"Premature end-of-file encountered.")}if(dt(sa),Rr=Zi,bi=1,Ln=(tn=sa).D,kn=0<tn.L&&tn.M>=tn.zb&&tn.M<=tn.Va,tn.Aa==0)t:{if(Ln.M=tn.M,Ln.uc=kn,qo(tn,Ln),bi=1,Ln=(Ta=tn.D).Nb,kn=(ca=bN[tn.L])*tn.R,As=ca/2*tn.B,Ba=16*Ln*tn.R,bc=8*Ln*tn.B,zo=tn.sa,Xl=tn.ta-kn+Ba,ci=tn.qa,ia=tn.ra-As+bc,yl=tn.Ha,Yl=tn.Ia-As+bc,to=(Za=Ta.M)==0,eo=Za>=tn.Va-1,tn.Aa==2&&qo(tn,Ta),Ta.uc)for(Yc=(wi=tn).D.M,e(wi.D.uc),Ta=wi.yb;Ta<wi.Hb;++Ta){Wo=Ta,jd=Yc;var Jl=(Jc=(Xo=wi).D).Nb;ui=Xo.R;var Jc=Jc.wa[Jc.Y+Wo],Zc=Xo.sa,wc=Xo.ta+16*Jl*ui+16*Wo,eu=Jc.dd,is=Jc.tc;if(is!=0)if(e(3<=is),Xo.L==1)0<Wo&&T8(Zc,wc,ui,is+4),Jc.La&&F8(Zc,wc,ui,is),0<jd&&B8(Zc,wc,ui,is+4),Jc.La&&k8(Zc,wc,ui,is);else{var tu=Xo.B,Pd=Xo.qa,Qm=Xo.ra+8*Jl*tu+8*Wo,uh=Xo.Ha,Xo=Xo.Ia+8*Jl*tu+8*Wo;Jl=Jc.ld,0<Wo&&(Ji(Zc,wc,ui,is+4,eu,Jl),O1(Pd,Qm,uh,Xo,tu,is+4,eu,Jl)),Jc.La&&(fN(Zc,wc,ui,is,eu,Jl),P8(Pd,Qm,uh,Xo,tu,is,eu,Jl)),0<jd&&(yi(Zc,wc,ui,is+4,eu,Jl),lh(Pd,Qm,uh,Xo,tu,is+4,eu,Jl)),Jc.La&&($g(Zc,wc,ui,is,eu,Jl),j8(Pd,Qm,uh,Xo,tu,is,eu,Jl))}}if(tn.ia&&alert("todo:DitherRow"),Rr.put!=null){if(Ta=16*Za,Za=16*(Za+1),to?(Rr.y=tn.sa,Rr.O=tn.ta+Ba,Rr.f=tn.qa,Rr.N=tn.ra+bc,Rr.ea=tn.Ha,Rr.W=tn.Ia+bc):(Ta-=ca,Rr.y=zo,Rr.O=Xl,Rr.f=ci,Rr.N=ia,Rr.ea=yl,Rr.W=Yl),eo||(Za-=ca),Za>Rr.o&&(Za=Rr.o),Rr.F=null,Rr.J=null,tn.Fa!=null&&0<tn.Fa.length&&Ta<Za&&(Rr.J=Pa(tn,Rr,Ta,Za-Ta),Rr.F=tn.mb,Rr.F==null&&Rr.F.length==0)){bi=Ft(tn,3,"Could not decode alpha data.");break t}Ta<Rr.j&&(ca=Rr.j-Ta,Ta=Rr.j,e(!(1&ca)),Rr.O+=tn.R*ca,Rr.N+=tn.B*(ca>>1),Rr.W+=tn.B*(ca>>1),Rr.F!=null&&(Rr.J+=Rr.width*ca)),Ta<Za&&(Rr.O+=Rr.v,Rr.N+=Rr.v>>1,Rr.W+=Rr.v>>1,Rr.F!=null&&(Rr.J+=Rr.v),Rr.ka=Ta-Rr.j,Rr.U=Rr.va-Rr.v,Rr.T=Za-Ta,bi=Rr.put(Rr))}Ln+1!=tn.Ic||eo||(n(tn.sa,tn.ta-kn,zo,Xl+16*tn.R,kn),n(tn.qa,tn.ra-As,ci,ia+8*tn.B,As),n(tn.Ha,tn.Ia-As,yl,Yl+8*tn.B,As))}if(!bi)return Ft(sa,6,"Output aborted.")}return 1}(st,_t)),_t.bc!=null&&_t.bc(_t),Mt&=1}return Mt?(st.cb=0,Mt):0})(N,le)||(T=N.a)}}else T=N.a}T==0&&He.Oa!=null&&He.Oa.fd&&(T=j1(He.ba))}He=T}Me=He!=0?null:11>Me?Ke.f.RGBA.eb:Ke.f.kb.y}else Me=null;return Me};var eL=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,F){for(var k="",B=0;B<4;B++)k+=String.fromCharCode(E[F++]);return k}function d(E,F){return E[F+0]|E[F+1]<<8}function f(E,F){return(E[F+0]|E[F+1]<<8|E[F+2]<<16)>>>0}function A(E,F){return(E[F+0]|E[F+1]<<8|E[F+2]<<16|E[F+3]<<24)>>>0}new c;var h=[0],m=[0],p=[],g=new c,v=t,y=function(E,F){var k={},B=0,R=!1,Y=0,me=0;if(k.frames=[],!function(D,K){for(var z=0;z<4;z++)if(D[K+z]!="RIFF".charCodeAt(z))return!0;return!1}(E,F)){for(A(E,F+=4),F+=8;F<E.length;){var pe=u(E,F),he=A(E,F+=4);F+=4;var ge=he+(1&he);switch(pe){case"VP8 ":case"VP8L":k.frames[B]===void 0&&(k.frames[B]={}),(Te=k.frames[B]).src_off=R?me:F-8,Te.src_size=Y+he+8,B++,R&&(R=!1,Y=0,me=0);break;case"VP8X":(Te=k.header={}).feature_flags=E[F];var se=F+4;Te.canvas_width=1+f(E,se),se+=3,Te.canvas_height=1+f(E,se),se+=3;break;case"ALPH":R=!0,Y=ge+8,me=F-8;break;case"ANIM":(Te=k.header).bgcolor=A(E,F),se=F+4,Te.loop_count=d(E,se),se+=2;break;case"ANMF":var je,Te;(Te=k.frames[B]={}).offset_x=2*f(E,F),F+=3,Te.offset_y=2*f(E,F),F+=3,Te.width=1+f(E,F),F+=3,Te.height=1+f(E,F),F+=3,Te.duration=f(E,F),F+=3,je=E[F++],Te.dispose=1&je,Te.blend=je>>1&1}pe!="ANMF"&&(F+=ge)}return k}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,w=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],m=[b.canvas_width];for(var P=0;P<w.length&&w[P].blend!=0;P++);}var j=w[0],_=g.WebPDecodeRGBA(v,j.src_off,j.src_size,m,h);j.rgba=_,j.imgwidth=m[0],j.imgheight=h[0];for(var I=0;I<m[0]*h[0]*4;I++)p[I]=_[I];return this.width=m,this.height=h,this.data=p,this}(function(t){var e,r,n,a,s,o,l,c,u,d=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new c,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new o,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new o,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=D;Object.defineProperty(this,"pdf",{get:function(){return K}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(re){z=!!re}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(re){Q=!!re}});var J=0;Object.defineProperty(this,"posX",{get:function(){return J},set:function(re){isNaN(re)||(J=re)}});var ee=0;Object.defineProperty(this,"posY",{get:function(){return ee},set:function(re){isNaN(re)||(ee=re)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(re){var Fe;typeof re=="number"?Fe=[re,re,re,re]:((Fe=new Array(4))[0]=re[0],Fe[1]=re.length>=2?re[1]:Fe[0],Fe[2]=re.length>=3?re[2]:Fe[0],Fe[3]=re.length>=4?re[3]:Fe[1]),u.margin=Fe}});var M=!1;Object.defineProperty(this,"autoPaging",{get:function(){return M},set:function(re){M=re}});var G=0;Object.defineProperty(this,"lastBreak",{get:function(){return G},set:function(re){G=re}});var ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ne},set:function(re){ne=re}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(re){re instanceof d&&(u=re)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(re){u.path=re}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(re){ve=re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(re){var Fe;Fe=A(re),this.ctx.fillStyle=Fe.style,this.ctx.isFillTransparent=Fe.a===0,this.ctx.fillOpacity=Fe.a,this.pdf.setFillColor(Fe.r,Fe.g,Fe.b,{a:Fe.a}),this.pdf.setTextColor(Fe.r,Fe.g,Fe.b,{a:Fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(re){var Fe=A(re);this.ctx.strokeStyle=Fe.style,this.ctx.isStrokeTransparent=Fe.a===0,this.ctx.strokeOpacity=Fe.a,Fe.a===0?this.pdf.setDrawColor(255,255,255):(Fe.a,this.pdf.setDrawColor(Fe.r,Fe.g,Fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(re){["butt","round","square"].indexOf(re)!==-1&&(this.ctx.lineCap=re,this.pdf.setLineCap(re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(re){isNaN(re)||(this.ctx.lineWidth=re,this.pdf.setLineWidth(re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(re){["bevel","round","miter"].indexOf(re)!==-1&&(this.ctx.lineJoin=re,this.pdf.setLineJoin(re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(re){isNaN(re)||(this.ctx.miterLimit=re,this.pdf.setMiterLimit(re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(re){this.ctx.textBaseline=re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(re){["right","end","center","left","start"].indexOf(re)!==-1&&(this.ctx.textAlign=re)}});var V=null,qe=null,ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return ie},set:function(re){V=null,qe=null,ie=re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(re){var Fe;if(this.ctx.font=re,(Fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(re))!==null){var de=Fe[1];Fe[2];var we=Fe[3],Le=Fe[4];Fe[5];var Ge=Fe[6],ft=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(ft==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:ft==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var ht=function(te){var Ne,Re,ye=[],Xe=te.trim();if(Xe==="")return a5;if(Xe in AV)return[AV[Xe]];for(;Xe!=="";){switch(Re=null,Ne=(Xe=pV(Xe)).charAt(0)){case'"':case"'":Re=Dje(Xe.substring(1),Ne);break;default:Re=Rje(Xe)}if(Re===null||(ye.push(Re[0]),(Xe=pV(Re[1]))!==""&&Xe.charAt(0)!==","))return a5;Xe=Xe.replace(/^,/,"")}return ye}(Ge);if(this.fontFaces){var xt=function(te,Ne){var Re=te.getFontList(),ye=JSON.stringify(Re);if(V===null||qe!==ye){var Xe=function(mt){var rt=[];return Object.keys(mt).forEach(function(ue){mt[ue].forEach(function(_e){var We=null;switch(_e){case"bold":We={family:ue,weight:"bold"};break;case"italic":We={family:ue,style:"italic"};break;case"bolditalic":We={family:ue,weight:"bold",style:"italic"};break;case"":case"normal":We={family:ue}}We!==null&&(We.ref={name:ue,style:_e},rt.push(We))})}),rt}(Re);V=function(mt){for(var rt={},ue=0;ue<mt.length;++ue){var _e=n5(mt[ue]),We=_e.family,ot=_e.stretch,Ce=_e.style,$e=_e.weight;rt[We]=rt[We]||{},rt[We][ot]=rt[We][ot]||{},rt[We][ot][Ce]=rt[We][ot][Ce]||{},rt[We][ot][Ce][$e]=_e}return rt}(Xe.concat(Ne)),qe=ye}return V}(this.pdf,this.fontFaces),jt=ht.map(function(te){return{family:te,stretch:"normal",weight:we,style:de}}),kt=function(te,Ne,Re){for(var ye=(Re=Re||{}).defaultFontFamily||"times",Xe=Object.assign({},Oje,Re.genericFontFamilies||{}),mt=null,rt=null,ue=0;ue<Ne.length;++ue)if(Xe[(mt=n5(Ne[ue])).family]&&(mt.family=Xe[mt.family]),te.hasOwnProperty(mt.family)){rt=te[mt.family];break}if(!(rt=rt||te[ye]))throw new Error("Could not find a font-family for the rule '"+mV(mt)+"' and default family '"+ye+"'.");if(rt=function(_e,We){if(We[_e])return We[_e];var ot=Bk[_e],Ce=ot<=Bk.normal?-1:1,$e=hV(We,xre,ot,Ce);if(!$e)throw new Error("Could not find a matching font-stretch value for "+_e);return $e}(mt.stretch,rt),rt=function(_e,We){if(We[_e])return We[_e];for(var ot=gre[_e],Ce=0;Ce<ot.length;++Ce)if(We[ot[Ce]])return We[ot[Ce]];throw new Error("Could not find a matching font-style for "+_e)}(mt.style,rt),!(rt=function(_e,We){if(We[_e])return We[_e];if(_e===400&&We[500])return We[500];if(_e===500&&We[400])return We[400];var ot=Fje[_e],Ce=hV(We,vre,ot,_e<400?-1:1);if(!Ce)throw new Error("Could not find a matching font-weight for value "+_e);return Ce}(mt.weight,rt)))throw new Error("Failed to resolve a font for the rule '"+mV(mt)+"'.");return rt}(xt,jt);this.pdf.setFont(kt.ref.name,kt.ref.style)}else{var wt="";(we==="bold"||parseInt(we,10)>=700||de==="bold")&&(wt="bold"),de==="italic"&&(wt+="italic"),wt.length===0&&(wt="normal");for(var Ve="",Pe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},be=0;be<ht.length;be++){if(this.pdf.internal.getFont(ht[be],wt,{noFallback:!0,disableWarning:!0})!==void 0){Ve=ht[be];break}if(wt==="bolditalic"&&this.pdf.internal.getFont(ht[be],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ve=ht[be],wt="bold";else if(this.pdf.internal.getFont(ht[be],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ve=ht[be],wt="normal";break}}if(Ve===""){for(var ce=0;ce<ht.length;ce++)if(Pe[ht[ce]]){Ve=Pe[ht[ce]];break}}Ve=Ve===""?"Times":Ve,this.pdf.setFont(Ve,wt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(re){this.ctx.globalCompositeOperation=re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(re){this.ctx.globalAlpha=re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(re){this.ctx.lineDashOffset=re,Te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(re){this.ctx.lineDash=re,Te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(re){this.ctx.ignoreClearRect=!!re}})};f.prototype.setLineDash=function(D){this.lineDash=D},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){w.call(this,"fill",!1)},f.prototype.stroke=function(){w.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(D,K){if(isNaN(D)||isNaN(K))throw ts.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new o(D,K));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(D,K)},f.prototype.closePath=function(){var D=new o(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&Qa(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){D=new o(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(D.x,D.y)},f.prototype.lineTo=function(D,K){if(isNaN(D)||isNaN(K))throw ts.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new o(D,K));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(z.x,z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},f.prototype.quadraticCurveTo=function(D,K,z,Q){if(isNaN(z)||isNaN(Q)||isNaN(D)||isNaN(K))throw ts.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var J=this.ctx.transform.applyToPoint(new o(z,Q)),ee=this.ctx.transform.applyToPoint(new o(D,K));this.path.push({type:"qct",x1:ee.x,y1:ee.y,x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},f.prototype.bezierCurveTo=function(D,K,z,Q,J,ee){if(isNaN(J)||isNaN(ee)||isNaN(D)||isNaN(K)||isNaN(z)||isNaN(Q))throw ts.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var M=this.ctx.transform.applyToPoint(new o(J,ee)),G=this.ctx.transform.applyToPoint(new o(D,K)),ne=this.ctx.transform.applyToPoint(new o(z,Q));this.path.push({type:"bct",x1:G.x,y1:G.y,x2:ne.x,y2:ne.y,x:M.x,y:M.y}),this.ctx.lastPoint=new o(M.x,M.y)},f.prototype.arc=function(D,K,z,Q,J,ee){if(isNaN(D)||isNaN(K)||isNaN(z)||isNaN(Q)||isNaN(J))throw ts.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ee=!!ee,!this.ctx.transform.isIdentity){var M=this.ctx.transform.applyToPoint(new o(D,K));D=M.x,K=M.y;var G=this.ctx.transform.applyToPoint(new o(0,z)),ne=this.ctx.transform.applyToPoint(new o(0,0));z=Math.sqrt(Math.pow(G.x-ne.x,2)+Math.pow(G.y-ne.y,2))}Math.abs(J-Q)>=2*Math.PI&&(Q=0,J=2*Math.PI),this.path.push({type:"arc",x:D,y:K,radius:z,startAngle:Q,endAngle:J,counterclockwise:ee})},f.prototype.arcTo=function(D,K,z,Q,J){throw new Error("arcTo not implemented.")},f.prototype.rect=function(D,K,z,Q){if(isNaN(D)||isNaN(K)||isNaN(z)||isNaN(Q))throw ts.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,K),this.lineTo(D+z,K),this.lineTo(D+z,K+Q),this.lineTo(D,K+Q),this.lineTo(D,K),this.lineTo(D+z,K),this.lineTo(D,K)},f.prototype.fillRect=function(D,K,z,Q){if(isNaN(D)||isNaN(K)||isNaN(z)||isNaN(Q))throw ts.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var J={};this.lineCap!=="butt"&&(J.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(J.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,K,z,Q),this.fill(),J.hasOwnProperty("lineCap")&&(this.lineCap=J.lineCap),J.hasOwnProperty("lineJoin")&&(this.lineJoin=J.lineJoin)}},f.prototype.strokeRect=function(D,K,z,Q){if(isNaN(D)||isNaN(K)||isNaN(z)||isNaN(Q))throw ts.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(D,K,z,Q),this.stroke())},f.prototype.clearRect=function(D,K,z,Q){if(isNaN(D)||isNaN(K)||isNaN(z)||isNaN(Q))throw ts.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,K,z,Q))},f.prototype.save=function(D){D=typeof D!="boolean"||D;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},f.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(K),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(D){var K,z,Q,J;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))K=0,z=0,Q=0,J=0;else{var ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(ee!==null)K=parseInt(ee[1]),z=parseInt(ee[2]),Q=parseInt(ee[3]),J=1;else if((ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)K=parseInt(ee[1]),z=parseInt(ee[2]),Q=parseInt(ee[3]),J=parseFloat(ee[4]);else{if(J=1,typeof D=="string"&&D.charAt(0)!=="#"){var M=new ure(D);D=M.ok?M.toHex():"#000000"}D.length===4?(K=D.substring(1,2),K+=K,z=D.substring(2,3),z+=z,Q=D.substring(3,4),Q+=Q):(K=D.substring(1,3),z=D.substring(3,5),Q=D.substring(5,7)),K=parseInt(K,16),z=parseInt(z,16),Q=parseInt(Q,16)}}return{r:K,g:z,b:Q,a:J,style:D}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(D,K,z,Q){if(isNaN(K)||isNaN(z)||typeof D!="string")throw ts.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!h.call(this)){var J=ge(this.ctx.transform.rotation),ee=this.ctx.transform.scaleX;B.call(this,{text:D,x:K,y:z,scale:ee,angle:J,align:this.textAlign,maxWidth:Q})}},f.prototype.strokeText=function(D,K,z,Q){if(isNaN(K)||isNaN(z)||typeof D!="string")throw ts.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){Q=isNaN(Q)?void 0:Q;var J=ge(this.ctx.transform.rotation),ee=this.ctx.transform.scaleX;B.call(this,{text:D,x:K,y:z,scale:ee,renderingMode:"stroke",angle:J,align:this.textAlign,maxWidth:Q})}},f.prototype.measureText=function(D){if(typeof D!="string")throw ts.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,z=this.pdf.internal.scaleFactor,Q=K.internal.getFontSize(),J=K.getStringUnitWidth(D)*Q/K.internal.scaleFactor;return new function(ee){var M=(ee=ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return M}}),this}({width:J*=Math.round(96*z/72*1e4)/1e4})},f.prototype.scale=function(D,K){if(isNaN(D)||isNaN(K))throw ts.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new c(D,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.rotate=function(D){if(isNaN(D))throw ts.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new c(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},f.prototype.translate=function(D,K){if(isNaN(D)||isNaN(K))throw ts.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new c(1,0,0,1,D,K);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.transform=function(D,K,z,Q,J,ee){if(isNaN(D)||isNaN(K)||isNaN(z)||isNaN(Q)||isNaN(J)||isNaN(ee))throw ts.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var M=new c(D,K,z,Q,J,ee);this.ctx.transform=this.ctx.transform.multiply(M)},f.prototype.setTransform=function(D,K,z,Q,J,ee){D=isNaN(D)?1:D,K=isNaN(K)?0:K,z=isNaN(z)?0:z,Q=isNaN(Q)?1:Q,J=isNaN(J)?0:J,ee=isNaN(ee)?0:ee,this.ctx.transform=new c(D,K,z,Q,J,ee)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(D,K,z,Q,J,ee,M,G,ne){var ve=this.pdf.getImageProperties(D),V=1,qe=1,ie=1,re=1;Q!==void 0&&G!==void 0&&(ie=G/Q,re=ne/J,V=ve.width/Q*G/Q,qe=ve.height/J*ne/J),ee===void 0&&(ee=K,M=z,K=0,z=0),Q!==void 0&&G===void 0&&(G=Q,ne=J),Q===void 0&&G===void 0&&(G=ve.width,ne=ve.height);var Fe=this.ctx.transform.decompose(),de=ge(Fe.rotate.shx),we=new c,Le=(we=(we=(we=we.multiply(Fe.translate)).multiply(Fe.skew)).multiply(Fe.scale)).applyToRectangle(new l(ee-K*ie,M-z*re,Q*V,J*qe));if(this.autoPaging){for(var Ge,ft=g.call(this,Le),ht=[],xt=0;xt<ft.length;xt+=1)ht.indexOf(ft[xt])===-1&&ht.push(ft[xt]);b(ht);for(var jt=ht[0],kt=ht[ht.length-1],wt=jt;wt<kt+1;wt++){this.pdf.setPage(wt);var Ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pe=wt===1?this.posY+this.margin[0]:this.margin[0],be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ce=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],te=wt===1?0:be+(wt-2)*ce;if(this.ctx.clip_path.length!==0){var Ne=this.path;Ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Ge,this.posX+this.margin[3],-te+Pe+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=Ne}var Re=JSON.parse(JSON.stringify(Le));Re=y([Re],this.posX+this.margin[3],-te+Pe+this.ctx.prevPageLastElemOffset)[0];var ye=(wt>jt||wt<kt)&&p.call(this);ye&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ve,ce,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",Re.x,Re.y,Re.w,Re.h,null,null,de),ye&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(D,"JPEG",Le.x,Le.y,Le.w,Le.h,null,null,de)};var g=function(D,K,z){var Q=[];K=K||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var J=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":Q.push(Math.floor((D.y+J)/z)+1);break;case"arc":Q.push(Math.floor((D.y+J-D.radius)/z)+1),Q.push(Math.floor((D.y+J+D.radius)/z)+1);break;case"qct":var ee=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);Q.push(Math.floor((ee.y+J)/z)+1),Q.push(Math.floor((ee.y+ee.h+J)/z)+1);break;case"bct":var M=je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);Q.push(Math.floor((M.y+J)/z)+1),Q.push(Math.floor((M.y+M.h+J)/z)+1);break;case"rect":Q.push(Math.floor((D.y+J)/z)+1),Q.push(Math.floor((D.y+D.h+J)/z)+1)}for(var G=0;G<Q.length;G+=1)for(;this.pdf.internal.getNumberOfPages()<Q[G];)v.call(this);return Q},v=function(){var D=this.fillStyle,K=this.strokeStyle,z=this.font,Q=this.lineCap,J=this.lineWidth,ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=K,this.font=z,this.lineCap=Q,this.lineWidth=J,this.lineJoin=ee},y=function(D,K,z){for(var Q=0;Q<D.length;Q++)switch(D[Q].type){case"bct":D[Q].x2+=K,D[Q].y2+=z;case"qct":D[Q].x1+=K,D[Q].y1+=z;default:D[Q].x+=K,D[Q].y+=z}return D},b=function(D){return D.sort(function(K,z){return K-z})},w=function(D,K){var z=this.fillStyle,Q=this.strokeStyle,J=this.lineCap,ee=this.lineWidth,M=Math.abs(ee*this.ctx.transform.scaleX),G=this.lineJoin;if(this.autoPaging){for(var ne,ve,V=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),ie=[],re=0;re<qe.length;re++)if(qe[re].x!==void 0)for(var Fe=g.call(this,qe[re]),de=0;de<Fe.length;de+=1)ie.indexOf(Fe[de])===-1&&ie.push(Fe[de]);for(var we=0;we<ie.length;we++)for(;this.pdf.internal.getNumberOfPages()<ie[we];)v.call(this);b(ie);for(var Le=ie[0],Ge=ie[ie.length-1],ft=Le;ft<Ge+1;ft++){this.pdf.setPage(ft),this.fillStyle=z,this.strokeStyle=Q,this.lineCap=J,this.lineWidth=M,this.lineJoin=G;var ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xt=ft===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=ft===1?0:jt+(ft-2)*kt;if(this.ctx.clip_path.length!==0){var Ve=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ne,this.posX+this.margin[3],-wt+xt+this.ctx.prevPageLastElemOffset),P.call(this,D,!0),this.path=Ve}if(ve=JSON.parse(JSON.stringify(V)),this.path=y(ve,this.posX+this.margin[3],-wt+xt+this.ctx.prevPageLastElemOffset),K===!1||ft===0){var Pe=(ft>Le||ft<Ge)&&p.call(this);Pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,kt,null).clip().discardPath()),P.call(this,D,K),Pe&&this.pdf.restoreGraphicsState()}this.lineWidth=ee}this.path=V}else this.lineWidth=M,P.call(this,D,K),this.lineWidth=ee},P=function(D,K){if((D!=="stroke"||K||!m.call(this))&&(D==="stroke"||K||!h.call(this))){for(var z,Q,J=[],ee=this.path,M=0;M<ee.length;M++){var G=ee[M];switch(G.type){case"begin":J.push({begin:!0});break;case"close":J.push({close:!0});break;case"mt":J.push({start:G,deltas:[],abs:[]});break;case"lt":var ne=J.length;if(ee[M-1]&&!isNaN(ee[M-1].x)&&(z=[G.x-ee[M-1].x,G.y-ee[M-1].y],ne>0)){for(;ne>=0;ne--)if(J[ne-1].close!==!0&&J[ne-1].begin!==!0){J[ne-1].deltas.push(z),J[ne-1].abs.push(G);break}}break;case"bct":z=[G.x1-ee[M-1].x,G.y1-ee[M-1].y,G.x2-ee[M-1].x,G.y2-ee[M-1].y,G.x-ee[M-1].x,G.y-ee[M-1].y],J[J.length-1].deltas.push(z);break;case"qct":var ve=ee[M-1].x+2/3*(G.x1-ee[M-1].x),V=ee[M-1].y+2/3*(G.y1-ee[M-1].y),qe=G.x+2/3*(G.x1-G.x),ie=G.y+2/3*(G.y1-G.y),re=G.x,Fe=G.y;z=[ve-ee[M-1].x,V-ee[M-1].y,qe-ee[M-1].x,ie-ee[M-1].y,re-ee[M-1].x,Fe-ee[M-1].y],J[J.length-1].deltas.push(z);break;case"arc":J.push({deltas:[],abs:[],arc:!0}),Array.isArray(J[J.length-1].abs)&&J[J.length-1].abs.push(G)}}Q=K?null:D==="stroke"?"stroke":"fill";for(var de=!1,we=0;we<J.length;we++)if(J[we].arc)for(var Le=J[we].abs,Ge=0;Ge<Le.length;Ge++){var ft=Le[Ge];ft.type==="arc"?I.call(this,ft.x,ft.y,ft.radius,ft.startAngle,ft.endAngle,ft.counterclockwise,void 0,K,!de):R.call(this,ft.x,ft.y),de=!0}else if(J[we].close===!0)this.pdf.internal.out("h"),de=!1;else if(J[we].begin!==!0){var ht=J[we].start.x,xt=J[we].start.y;Y.call(this,J[we].deltas,ht,xt),de=!0}Q&&E.call(this,Q),K&&F.call(this)}},j=function(D){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-z;case"top":return D+K-z;case"hanging":return D+K-2*z;case"middle":return D+K/2-z;default:return D}},_=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(K,z){this.colorStops.push([K,z])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(D,K,z,Q,J,ee,M,G,ne){for(var ve=pe.call(this,z,Q,J,ee),V=0;V<ve.length;V++){var qe=ve[V];V===0&&(ne?k.call(this,qe.x1+D,qe.y1+K):R.call(this,qe.x1+D,qe.y1+K)),me.call(this,D,K,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}G?F.call(this):E.call(this,M)},E=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(D,K){this.pdf.internal.out(r(D)+" "+n(K)+" m")},B=function(D){var K;switch(D.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var z,Q,J,ee=this.pdf.getTextDimensions(D.text),M=j.call(this,D.y),G=_.call(this,M)-ee.h,ne=this.ctx.transform.applyToPoint(new o(D.x,M));if(this.autoPaging){var ve=this.ctx.transform.decompose(),V=new c;V=(V=(V=V.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale);for(var qe=this.ctx.transform.applyToRectangle(new l(D.x,M,ee.w,ee.h)),ie=V.applyToRectangle(new l(D.x,G,ee.w,ee.h)),re=g.call(this,ie),Fe=[],de=0;de<re.length;de+=1)Fe.indexOf(re[de])===-1&&Fe.push(re[de]);b(Fe);for(var we=Fe[0],Le=Fe[Fe.length-1],Ge=we;Ge<Le+1;Ge++){this.pdf.setPage(Ge);var ft=Ge===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[2],jt=xt-this.margin[0],kt=this.pdf.internal.pageSize.width-this.margin[1],wt=kt-this.margin[3],Ve=Ge===1?0:ht+(Ge-2)*jt;if(this.ctx.clip_path.length!==0){var Pe=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(z,this.posX+this.margin[3],-1*Ve+ft),P.call(this,"fill",!0),this.path=Pe}var be=y([JSON.parse(JSON.stringify(ie))],this.posX+this.margin[3],-Ve+ft+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(Q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Q*D.scale),J=this.lineWidth,this.lineWidth=J*D.scale);var ce=this.autoPaging!=="text";if(ce||be.y+be.h<=xt){if(ce||be.y>=ft&&be.x<=kt){var te=ce?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||kt-be.x)[0],Ne=y([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-Ve+ft+this.ctx.prevPageLastElemOffset)[0],Re=ce&&(Ge>we||Ge<Le)&&p.call(this);Re&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wt,jt,null).clip().discardPath()),this.pdf.text(te,Ne.x,Ne.y,{angle:D.angle,align:K,renderingMode:D.renderingMode}),Re&&this.pdf.restoreGraphicsState()}}else be.y<xt&&(this.ctx.prevPageLastElemOffset+=xt-be.y);D.scale>=.01&&(this.pdf.setFontSize(Q),this.lineWidth=J)}}else D.scale>=.01&&(Q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Q*D.scale),J=this.lineWidth,this.lineWidth=J*D.scale),this.pdf.text(D.text,ne.x+this.posX,ne.y+this.posY,{angle:D.angle,align:K,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(Q),this.lineWidth=J)},R=function(D,K,z,Q){z=z||0,Q=Q||0,this.pdf.internal.out(r(D+z)+" "+n(K+Q)+" l")},Y=function(D,K,z){return this.pdf.lines(D,K,z,null,null)},me=function(D,K,z,Q,J,ee,M,G){this.pdf.internal.out([e(a(z+D)),e(s(Q+K)),e(a(J+D)),e(s(ee+K)),e(a(M+D)),e(s(G+K)),"c"].join(" "))},pe=function(D,K,z,Q){for(var J=2*Math.PI,ee=Math.PI/2;K>z;)K-=J;var M=Math.abs(z-K);M<J&&Q&&(M=J-M);for(var G=[],ne=Q?-1:1,ve=K;M>1e-5;){var V=ve+ne*Math.min(M,ee);G.push(he.call(this,D,ve,V)),M-=Math.abs(V-ve),ve=V}return G},he=function(D,K,z){var Q=(z-K)/2,J=D*Math.cos(Q),ee=D*Math.sin(Q),M=J,G=-ee,ne=M*M+G*G,ve=ne+M*J+G*ee,V=4/3*(Math.sqrt(2*ne*ve)-ve)/(M*ee-G*J),qe=M-V*G,ie=G+V*M,re=qe,Fe=-ie,de=Q+K,we=Math.cos(de),Le=Math.sin(de);return{x1:D*Math.cos(K),y1:D*Math.sin(K),x2:qe*we-ie*Le,y2:qe*Le+ie*we,x3:re*we-Fe*Le,y3:re*Le+Fe*we,x4:D*Math.cos(z),y4:D*Math.sin(z)}},ge=function(D){return 180*D/Math.PI},se=function(D,K,z,Q,J,ee){var M=D+.5*(z-D),G=K+.5*(Q-K),ne=J+.5*(z-J),ve=ee+.5*(Q-ee),V=Math.min(D,J,M,ne),qe=Math.max(D,J,M,ne),ie=Math.min(K,ee,G,ve),re=Math.max(K,ee,G,ve);return new l(V,ie,qe-V,re-ie)},je=function(D,K,z,Q,J,ee,M,G){var ne,ve,V,qe,ie,re,Fe,de,we,Le,Ge,ft,ht,xt,jt=z-D,kt=Q-K,wt=J-z,Ve=ee-Q,Pe=M-J,be=G-ee;for(ve=0;ve<41;ve++)we=(Fe=(V=D+(ne=ve/40)*jt)+ne*((ie=z+ne*wt)-V))+ne*(ie+ne*(J+ne*Pe-ie)-Fe),Le=(de=(qe=K+ne*kt)+ne*((re=Q+ne*Ve)-qe))+ne*(re+ne*(ee+ne*be-re)-de),ve==0?(Ge=we,ft=Le,ht=we,xt=Le):(Ge=Math.min(Ge,we),ft=Math.min(ft,Le),ht=Math.max(ht,we),xt=Math.max(xt,Le));return new l(Math.round(Ge),Math.round(ft),Math.round(ht-Ge),Math.round(xt-ft))},Te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,K,z=(D=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:K}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})($r.API),function(t){var e=function(o){var l,c,u,d,f,A,h,m,p,g;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(f=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(A=(f=((f=((f=((f=(f-(g=f%85))/85)-(p=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)%85,c.push(A+33,h+33,m+33,p+33,g+33)):c.push(122);return function(v,y){for(var b=y;b>0;b--)v.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,f,A=String,h="length",m=255,p="charCodeAt",g="slice",v="replace";for(o[g](-2),o=o[g](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),u=[],d=0,f=(o+=l="uuuuu"[g](o[h]%5||5))[h];f>d;d+=5)c=52200625*(o[p](d)-33)+614125*(o[p](d+1)-33)+7225*(o[p](d+2)-33)+85*(o[p](d+3)-33)+(o[p](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(y,b){for(var w=b;w>0;w--)y.pop()}(u,l[h]),A.fromCharCode.apply(A,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=Ck(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}($r.API),function(t){t.loadFile=function(e,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,A=0,h=function(m){var p=m.length,g=[],v=String.fromCharCode;for(A=0;A<p;A+=1)g.push(v(255&m.charCodeAt(A)));return g.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(a,s,o)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}($r.API),function(t){function e(){return(Sn.html2canvas?Promise.resolve(Sn.html2canvas):qh(()=>Promise.resolve().then(()=>S6),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(Sn.DOMPurify?Promise.resolve(Sn.DOMPurify):qh(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Qa(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var m=d[h],p=m.src.find(function(g){return g.format==="truetype"});p&&u.addFont(p.url,m.ref.name,m.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,u.context2d.save(!0),c(this.prop.container,A)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||$r.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(A){return u.updateProgress(null,d),A}).then(d,f).then(function(A){return u.updateProgress(1),A})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),A=u.call(f,l,c);return o.convert(A,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,$r.getPageSize=function(l,c,u){if(Qa(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,A=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var m,p=0,g=0;if(h.hasOwnProperty(A))p=h[A][1]/f,g=h[A][0]/f;else try{p=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",g>p&&(m=g,g=p,p=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>g&&(m=g,g=p,p=m)}return{width:g,height:p,unit:c,k:f,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(n5):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}($r.API),$r.API.addJS=function(t){return xV=t,this.internal.events.subscribe("postPutResources",function(){PC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(PC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),gV=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+xV+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){PC!==void 0&&gV!==void 0&&this.internal.out("/Names <</JavaScript "+PC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var A=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}($r.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var A,h=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,p={width:0,height:0,numcomponents:1},g=4;g<m;g+=2){if(g+=h,e.indexOf(f.charCodeAt(g+1))!==-1){A=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),p={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:A,numcomponents:f.charCodeAt(g+9)};break}h=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}($r.API),$r.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=vje(t,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(I){for(var E=I.width,F=I.height,k=I.data,B=I.palette,R=I.depth,Y=!1,me=[],pe=[],he=void 0,ge=!1,se=0,je=0;je<B.length;je++){var Te=wQ(B[je],4),D=Te[0],K=Te[1],z=Te[2],Q=Te[3];me.push(D,K,z),Q!=null&&(Q===0?(se++,pe.length<1&&pe.push(je)):Q<255&&(ge=!0))}if(ge||se>1){Y=!0,pe=void 0;var J=E*F;he=new Uint8Array(J);for(var ee=new DataView(k.buffer),M=0;M<J;M++){var G=s5(ee,M,R),ne=wQ(B[G],4)[3];he[M]=ne}}else se===0&&(pe=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Y?8:void 0,colorBytes:k,alphaBytes:he,needSMask:Y,palette:me,mask:pe}}(s):c===2||c===4?function(I){for(var E=I.data,F=I.width,k=I.height,B=I.channels,R=I.depth,Y=B===2?"DeviceGray":"DeviceRGB",me=B-1,pe=F*k,he=me,ge=pe*he,se=1*pe,je=Math.ceil(ge*R/8),Te=Math.ceil(se*R/8),D=new Uint8Array(je),K=new Uint8Array(Te),z=new DataView(E.buffer),Q=new DataView(D.buffer),J=new DataView(K.buffer),ee=!1,M=0;M<pe;M++){for(var G=M*B,ne=0;ne<he;ne++)SV(Q,s5(z,G+ne,R),M*he+ne,R);var ve=s5(z,G+he,R);ve<(1<<R)-1&&(ee=!0),SV(J,ve,1*M,R)}return{colorSpace:Y,colorsPerPixel:me,sMaskBitsPerComponent:ee?R:void 0,colorBytes:D,alphaBytes:K,needSMask:ee}}(s):function(I){var E=I.data,F=I.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:E instanceof Uint16Array?function(k){for(var B=k.length,R=new Uint8Array(2*B),Y=new DataView(R.buffer,R.byteOffset,R.byteLength),me=0;me<B;me++)Y.setUint16(2*me,k[me],!1);return R}(E):E,needSMask:!1}}(s);var f,A,h,m=a,p=m.colorSpace,g=m.colorsPerPixel,v=m.sMaskBitsPerComponent,y=m.colorBytes,b=m.alphaBytes,w=m.needSMask,P=m.palette,j=m.mask,_=null;return n!==$r.API.image_compression.NONE&&typeof Ck=="function"?(_=function(I){var E;switch(I){case $r.API.image_compression.FAST:E=11;break;case $r.API.image_compression.MEDIUM:E=13;break;case $r.API.image_compression.SLOW:E=14;break;default:E=12}return E}(n),f=this.decode.FLATE_DECODE,A="/Predictor ".concat(_," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(o),t=wV(y,Math.ceil(o*g*d/8),g,d,n),w&&(h=wV(b,Math.ceil(o*v/8),1,v,n))):(f=void 0,A=void 0,t=y,w&&(h=b)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:t,index:e,filter:f,decodeParameters:A,transparency:j,palette:P,sMask:h,predictor:_,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:v,colorSpace:p}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new Qje(e),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new i5(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}($r.API),Td.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Td.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){ts.log("bit decode error:"+r)}},Td.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Td.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Td.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Td.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},Td.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},Td.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Td.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},Td.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new Td(e,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new i5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}($r.API),jV.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new jV(e),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new i5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}($r.API),$r.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],A=n[u+2],h=n[u+3];s[l++]=d,s[l++]=f,s[l++]=A,o[c++]=h}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},$r.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ix=$r.API,BC=ix.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,A=0,h=t.length,m=0,p=l[0]||c,g=[];for(r=0;r<h;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(A=f&&Qa(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,g.push((l[n]||p)/c+A)),m=n;return g},vV=ix.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return ix.processArabic&&(t=ix.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:BC.apply(this,arguments).reduce(function(s,o){return s+o},0)},yV=function(t,e,r,n){for(var a=[],s=0,o=t.length,l=0;s!==o&&l+e[s]<r;)l+=e[s],s++;a.push(t.slice(0,s));var c=s;for(l=0;s!==o;)l+e[s]>n&&(a.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},bV=function(t,e,r){r||(r={});var n,a,s,o,l,c,u,d=[],f=[d],A=r.textIndent||0,h=0,m=0,p=t.split(" "),g=BC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),y=[];p.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(P,j){return(j&&P.length?`
`:"")+P})):y.push(w[0])}),p=y,c=vV.apply(this,[v,r])}for(s=0,o=p.length;s<o;s++){var b=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),b=1),A+h+(m=(a=BC.apply(this,[n,r])).reduce(function(w,P){return w+P},0))>e||b){if(m>e){for(l=yV.apply(this,[n,a,e-(A+h),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(w,P){return w+P},0)}else d=[n];f.push(d),A=m+c,h=g}else d.push(n),A+=h+m,h=g}return u=c?function(w,P){return(P?v:"")+w.join(" ")}:function(w){return w.join(" ")},f.map(u)},ix.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),A="Unicode";return f.metadata[A]?{widths:f.metadata[A].widths||{0:1},kerning:f.metadata[A].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(bV.apply(this,[n[l],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var o=function(A){return"0x"+parseInt(A,10).toString(16)},l=t.__fontmetrics__.compress=function(A){var h,m,p,g,v=["{"];for(var y in A){if(h=A[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=o(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof h=="number")h<0?(p=o(h).slice(3),g="-"):(p=o(h).slice(2),g=""),p=g+p.slice(0,-1)+a[p.slice(-1)];else{if(Qa(h)!=="object")throw new Error("Don't know what to do with value type "+Qa(h)+".");p=l(h)}v.push(m+p)}return v.push("}"),v.join("")},c=t.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,p,g,v={},y=1,b=v,w=[],P="",j="",_=A.length-1,I=1;I<_;I+=1)(g=A[I])=="'"?h?(p=h.join(""),h=void 0):h=[]:h?h.push(g):g=="{"?(w.push([b,p]),b={},p=void 0):g=="}"?((m=w.pop())[0][m[1]]=b,p=void 0,b=m[0]):g=="-"?y=-1:p===void 0?n.hasOwnProperty(g)?(P+=n[g],p=parseInt(P,16)*y,y=1,P=""):P+=g:n.hasOwnProperty(g)?(j+=n[g],b[p]=parseInt(j,16)*y,y=1,p=void 0,j=""):j+=g;return v},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(A){var h=A.font,m=f.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode.encoding=p,h.encoding=p.codePages[0])}])}($r.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(oE(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}($r),$r.API.addSvgAsImage=function(t,e,r,n,a,s,o,l){if(isNaN(e)||isNaN(r))throw ts.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw ts.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Sn.canvg?Promise.resolve(Sn.canvg):qh(()=>import("./index.es-AKeTkpwk.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load canvg: "+A))}).then(function(A){return A.default?A.default:A}).then(function(A){return A.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(A){return A.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,o,l)})},$r.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},$r.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function A(m,p){var g,v=!1;for(g=0;g<m.length;g+=1)m[g]===p&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=l.length;for(f=0;f<h;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(Qa(t)==="object"){for(a in t)if(s=t[a],A(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&A(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}($r.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,A=s.length;f<A;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,f,A;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,A=(l=Object.keys(s).sort(function(h,m){return h-m})).length;f<A;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,A=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",m=0;m<A.length;m++)h+=String.fromCharCode(A[m]);var p=u();d({data:h,addLength1:!0,objectId:p}),c("endobj");var g=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var v=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Ix(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Ix(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+Ix(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,A="",h=0;h<f.length;h++)A+=String.fromCharCode(f[h]);var m=u();d({data:A,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Ix(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+Ix(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},A=f.pdfEscape,h=f.activeFontKey,m=f.fonts,p=h,g="",v=0,y="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(y=l,p=h,Array.isArray(l)&&(y=l[0]),v=0;v<y.length;v+=1)m[p].metadata.hasOwnProperty("cmap")&&(o=m[p].metadata.cmap.unicode.codeMap[y[v].charCodeAt(0)]),o||y[v].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?g+=y[v]:g+="";var w="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?w=A(g,p).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(w=r(g,m[p])),f.isHex=!0,{text:w,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}($r),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}($r.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,f=e,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var w=function(k){var B=k.charCodeAt(),R=B>>8,Y=p[R];return Y!==void 0?f[256*Y+(255&B)]:R===252||R===253?"AL":v.test(R)?"L":R===8?"R":"N"},P=function(k){for(var B,R=0;R<k.length;R++){if((B=w(k.charAt(R)))==="L")return!1;if(B==="R")return!0}return!1},j=function(k,B,R,Y){var me,pe,he,ge,se=B[Y];switch(se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(se="AN");break;case"AL":y=!0,se="R";break;case"WS":case"BN":se="N";break;case"CS":Y<1||Y+1>=B.length||(me=R[Y-1])!=="EN"&&me!=="AN"||(pe=B[Y+1])!=="EN"&&pe!=="AN"?se="N":y&&(pe="AN"),se=pe===me?pe:"N";break;case"ES":se=(me=Y>0?R[Y-1]:"B")==="EN"&&Y+1<B.length&&B[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&R[Y-1]==="EN"){se="EN";break}if(y){se="N";break}for(he=Y+1,ge=B.length;he<ge&&B[he]==="ET";)he++;se=he<ge&&B[he]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(ge=B.length,he=Y+1;he<ge&&B[he]==="NSM";)he++;if(he<ge){var je=k[Y],Te=je>=1425&&je<=2303||je===64286;if(me=B[he],Te&&(me==="R"||me==="AL")){se="R";break}}}se=Y<1||(me=B[Y-1])==="B"?"N":R[Y-1];break;case"B":y=!1,a=!0,se=b;break;case"S":s=!0,se="N"}return se},_=function(k,B,R){var Y=k.split("");return R&&I(Y,R,{hiLevel:b}),Y.reverse(),B&&B.reverse(),Y.join("")},I=function(k,B,R){var Y,me,pe,he,ge,se=-1,je=k.length,Te=0,D=[],K=b?h:A,z=[];for(y=!1,a=!1,s=!1,me=0;me<je;me++)z[me]=w(k[me]);for(pe=0;pe<je;pe++){if(ge=Te,D[pe]=j(k,z,D,pe),Y=240&(Te=K[ge][m[D[pe]]]),Te&=15,B[pe]=he=K[Te][5],Y>0)if(Y===16){for(me=se;me<pe;me++)B[me]=1;se=-1}else se=-1;if(K[Te][6])se===-1&&(se=pe);else if(se>-1){for(me=se;me<pe;me++)B[me]=he;se=-1}z[pe]==="B"&&(B[pe]=0),R.hiLevel|=he}s&&function(Q,J,ee){for(var M=0;M<ee;M++)if(Q[M]==="S"){J[M]=b;for(var G=M-1;G>=0&&Q[G]==="WS";G--)J[G]=b}}(z,B,je)},E=function(k,B,R,Y,me){if(!(me.hiLevel<k)){if(k===1&&b===1&&!a)return B.reverse(),void(R&&R.reverse());for(var pe,he,ge,se,je=B.length,Te=0;Te<je;){if(Y[Te]>=k){for(ge=Te+1;ge<je&&Y[ge]>=k;)ge++;for(se=Te,he=ge-1;se<he;se++,he--)pe=B[se],B[se]=B[he],B[he]=pe,R&&(pe=R[se],R[se]=R[he],R[he]=pe);Te=ge}Te++}}},F=function(k,B,R){var Y=k.split(""),me={hiLevel:b};return R||(R=[]),I(Y,R,me),function(pe,he,ge){if(ge.hiLevel!==0&&d)for(var se,je=0;je<pe.length;je++)he[je]===1&&(se=g.indexOf(pe[je]))>=0&&(pe[je]=g[se+1])}(Y,R,me),E(2,Y,B,R,me),E(1,Y,B,R,me),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(k,B,R){if(function(me,pe){if(pe)for(var he=0;he<me.length;he++)pe[he]=he;l===void 0&&(l=P(me)),u===void 0&&(u=P(me))}(k,B),o||!c||u)if(o&&c&&l^u)b=l?1:0,k=_(k,B,R);else if(!o&&c&&u)b=l?1:0,k=F(k,B,R),k=_(k,B);else if(!o||l||c||u){if(o&&!c&&l^u)k=_(k,B),l?(b=0,k=F(k,B,R)):(b=1,k=F(k,B,R),k=_(k,B));else if(o&&l&&!c&&u)b=1,k=F(k,B,R),k=_(k,B);else if(!o&&!c&&l^u){var Y=d;l?(b=1,k=F(k,B,R),b=0,d=!1,k=F(k,B,R),d=Y):(b=0,k=F(k,B,R),k=_(k,B),b=1,d=!1,k=F(k,B,R),d=Y,k=_(k,B))}}else b=0,k=F(k,B,R);else b=l?1:0,k=F(k,B,R);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,c=k.isOutputVisual,l=k.isInputRtl,u=k.isOutputRtl,d=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}($r),$r.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new mm(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new rPe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Vje(this.contents),this.head=new $je(this),this.name=new Wje(this),this.cmap=new bre(this),this.toUnicode={},this.hhea=new Gje(this),this.maxp=new Xje(this),this.hmtx=new Yje(this),this.post=new qje(this),this.os2=new Kje(this),this.loca=new tPe(this),this.glyf=new Jje(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Af,mm=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,o,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),Vje=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,o,l,c,u,d,f,A,h,m,p;for(p in h=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),o=Math.floor(f/c),d=16*h-f,(a=new mm).writeInt(this.scalarType),a.writeShort(h),a.writeShort(f),a.writeShort(o),a.writeShort(d),s=16*h,u=a.pos+s,l=null,m=[],r)for(A=r[p],a.writeString(p),a.writeInt(t(A)),a.writeInt(u),a.writeInt(A.length),m=m.concat(A),p==="head"&&(l=u),u+=A.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,o;for(r=wre.call(r);r.length%4;)r.push(0);for(s=new mm(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),Hje={}.hasOwnProperty,th=function(t,e){for(var r in e)Hje.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Af=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var $je=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return th(t,Af),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new mm).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),PV=function(){function t(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,g,v,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(h=e.readUInt16(),A=h/2,e.pos+=6,s=function(){var w,P;for(P=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)P.push(e.readUInt16());return P}(),e.pos+=2,p=function(){var w,P;for(P=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)P.push(e.readUInt16());return P}(),u=function(){var w,P;for(P=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)P.push(e.readUInt16());return P}(),d=function(){var w,P;for(P=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)P.push(e.readUInt16());return P}(),a=(this.length-e.pos+this.offset)/2,l=function(){var w,P;for(P=[],c=w=0;0<=a?w<a:w>a;c=0<=a?++w:--w)P.push(e.readUInt16());return P}(),c=v=0,b=s.length;v<b;c=++v)for(g=s[c],n=y=m=p[c];m<=g?y<=g:y>=g;n=m<=g?++y:--y)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-m)-(A-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}e.pos=f}return t.encode=function(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,g,v,y,b,w,P,j,_,I,E,F,k,B,R,Y,me,pe,he,ge,se,je,Te,D,K,z,Q,J,ee,M,G,ne,ve,V;switch(Y=new mm,o=Object.keys(e).sort(function(qe,ie){return qe-ie}),r){case"macroman":for(p=0,g=function(){var qe=[];for(m=0;m<256;++m)qe.push(0);return qe}(),y={0:0},s={},me=0,se=o.length;me<se;me++)y[G=e[a=o[me]]]==null&&(y[G]=++p),s[a]={old:e[a],new:y[e[a]]},g[a]=y[e[a]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(g),{charMap:s,subtable:Y.data,maxGlyphID:p+1};case"unicode":for(B=[],f=[],b=0,y={},n={},v=u=null,pe=0,je=o.length;pe<je;pe++)y[P=e[a=o[pe]]]==null&&(y[P]=++b),n[a]={old:P,new:y[P]},l=y[P]-a,v!=null&&l===u||(v&&f.push(v),B.push(a),u=l),v=a;for(v&&f.push(v),f.push(65535),B.push(65535),F=2*(E=B.length),I=2*Math.pow(Math.log(E)/Math.LN2,2),A=Math.log(I/2)/Math.LN2,_=2*E-I,c=[],j=[],h=[],m=he=0,Te=B.length;he<Te;m=++he){if(k=B[m],d=f[m],k===65535){c.push(0),j.push(0);break}if(k-(R=n[k].new)>=32768)for(c.push(0),j.push(2*(h.length+E-m)),a=ge=k;k<=d?ge<=d:ge>=d;a=k<=d?++ge:--ge)h.push(n[a].new);else c.push(R-k),j.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*E+2*h.length),Y.writeUInt16(0),Y.writeUInt16(F),Y.writeUInt16(I),Y.writeUInt16(A),Y.writeUInt16(_),ee=0,D=f.length;ee<D;ee++)a=f[ee],Y.writeUInt16(a);for(Y.writeUInt16(0),M=0,K=B.length;M<K;M++)a=B[M],Y.writeUInt16(a);for(ne=0,z=c.length;ne<z;ne++)l=c[ne],Y.writeUInt16(l);for(ve=0,Q=j.length;ve<Q;ve++)w=j[ve],Y.writeUInt16(w);for(V=0,J=h.length;V<J;V++)p=h[V],Y.writeUInt16(p);return{charMap:n,subtable:Y.data,maxGlyphID:b+1}}},t}(),bre=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return th(t,Af),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new PV(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=PV.encode(e,r),(a=new mm).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),Gje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return th(t,Af),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),Kje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return th(t,Af),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),qje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return th(t,Af),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t}(),zje=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Wje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return th(t,Af),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,o,l,c,u,d,f,A;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,f=n.length;d<f;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),o=new zje(u,a),c[A=a.nameID]==null&&(c[A]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),Xje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return th(t,Af),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),Yje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return th(t,Af),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,o,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,f,A;for(A=[],u=0,d=(f=this.metrics).length;u<d;u++)s=f[u],A.push(s.advance);return A}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),wre=[].slice,Jje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return th(t,Af),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,o,l,c,u,d,f;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(l=new mm(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new ePe(l,u,f,c,d):new Zje(l,o,u,f,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,o,l,c;for(o=[],s=[],l=0,c=r.length;l<c;l++)a=e[r[l]],s.push(o.length),a&&(o=o.concat(a.encode(n)));return s.push(o.length),{table:o,offsets:s}},t}(),Zje=function(){function t(e,r,n,a,s,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),ePe=function(){function t(e,r,n,a,s){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new mm(wre.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),tPe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return th(t,Af),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,o=0;o<n.length;++o)if(n[o]=a,s<r.length&&r[s]==o){++s,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),rPe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,o,l,c;for(a={},o=0,l=e.length;o<l;o++)a[s=e[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,g,v;for(a in n=bre.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},v=n.charMap)h[(c=v[a]).old]=c.new;for(m in A=n.maxGlyphID,o)m in h||(h[m]=A++);return d=function(y){var b,w;for(b in w={},y)w[y[b]]=b;return w}(h),f=Object.keys(d).sort(function(y,b){return y-b}),p=function(){var y,b,w;for(w=[],y=0,b=f.length;y<b;y++)l=f[y],w.push(d[l]);return w}(),s=this.font.glyf.encode(o,p,h),u=this.font.loca.encode(s.offsets,p),g={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();$r.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+r},e}();const Tk=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:kje,AcroFormAppearance:Wr,AcroFormButton:lo,AcroFormCheckBox:Nb,AcroFormChoiceField:jp,AcroFormComboBox:Bp,AcroFormEditBox:bb,AcroFormListBox:Pp,AcroFormPasswordField:Cb,AcroFormPushButton:wb,AcroFormRadioButton:Tp,AcroFormTextField:tm,GState:N2,ShadingPattern:I0,TilingPattern:xp,default:$r,jsPDF:$r},Symbol.toStringTag,{value:"Module"}));async function BV(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:mr.now()};return Hn(At(De,"inventory_batches"),e)}async function Nre(t,e){await Cn(Yt(De,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:mr.now()})}async function nPe(t,e){const r=er(At(De,"batch_allocations"),ur("saleDate",">=",t),ur("saleDate","<=",e)),n=await Lt(r),a={};return n.forEach(s=>{const o=s.data(),l=o.batchId;a[l]||(a[l]={batchId:o.batchId,batchDate:o.batchDate,productName:o.productName,quantity:0,amountCharged:0}),a[l].quantity+=Number(o.quantity||0),a[l].amountCharged+=Number(o.amountCharged||0)}),Object.values(a)}async function Cre(t){const e=Yt(De,"salesV2",t),r=await ei(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)){for(const l of n.items)if(Array.isArray(l==null?void 0:l.allocations))for(const c of l.allocations){const u=String((c==null?void 0:c.batchId)||"").trim(),d=Number((c==null?void 0:c.qty)||0);u&&d&&a.push({batchId:u,qty:d})}}if(Array.isArray(n.allocations))for(const l of n.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&a.push({batchId:c,qty:u})}if(a.length===0)return await ki(De,async l=>{l.delete(e)}),{restored:0};const s=new Map;for(const l of a)s.set(l.batchId,Number((s.get(l.batchId)||0)+l.qty));let o=0;return await ki(De,async l=>{const c=Array.from(s.entries()),u=c.map(([f])=>Yt(De,"inventory_batches",f)),d=await Promise.all(u.map(f=>l.get(f)));c.forEach(([f,A],h)=>{const m=d[h];if(!m.exists())return;const p=m.data(),g=Number((p==null?void 0:p.remaining)??0),v=Number((g+Number(A||0)).toFixed(3));l.update(u[h],{remaining:v}),o+=Number(A||0)}),l.delete(e)}),{restored:o}}var _re={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},TV=Ro.createContext&&Ro.createContext(_re),aPe=["attr","size","title"];function sPe(t,e){if(t==null)return{};var r=iPe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iPe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _S(){return _S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_S.apply(this,arguments)}function kV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ES(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(r),!0).forEach(function(n){oPe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oPe(t,e,r){return e=lPe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lPe(t){var e=cPe(t,"string");return typeof e=="symbol"?e:e+""}function cPe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ere(t){return t&&t.map((e,r)=>Ro.createElement(e.tag,ES({key:r},e.attr),Ere(e.child)))}function uPe(t){return e=>Ro.createElement(dPe,_S({attr:ES({},t.attr)},e),Ere(t.child))}function dPe(t){var e=r=>{var{attr:n,size:a,title:s}=t,o=sPe(t,aPe),l=a||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),Ro.createElement("svg",_S({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:ES(ES({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Ro.createElement("title",null,s),t.children)};return TV!==void 0?Ro.createElement(TV.Consumer,null,r=>e(r)):e(_re)}function fPe(t){return uPe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function xc({onClick:t,loading:e,className:r=""}){return i.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[i.jsx(fPe,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}function vc(){const[t,e]=x.useState(0),r=x.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const Zo=t=>Math.round((Number(t)||0)*100)/100,ph=t=>Math.round((Number(t)||0)*1e3)/1e3,Ru=t=>Number(t??0).toFixed(2),gh=t=>Number(t??0).toFixed(3),FV=(t,e)=>{var o;const r=t.date?String(t.date):"",n=(o=t.timestamp)!=null&&o.toDate?jr(t.timestamp.toDate(),"yyyy-MM-dd"):"";let a=r||n;if(r&&n){const l=new Date(r+"T00:00:00").getTime(),c=new Date(n+"T00:00:00").getTime(),u=Math.abs(l-c)/(1e3*60*60*24);isFinite(u)&&u>30&&(a=n)}if(!a)return[];const s=t.type??"CONTADO";return Array.isArray(t.items)&&t.items.length>0?t.items.map((l,c)=>{const u=Number((l==null?void 0:l.qty)??0),d=Number((l==null?void 0:l.lineFinal)??0)||Math.max(0,Number((l==null?void 0:l.unitPrice)||0)*u-Number((l==null?void 0:l.discount)||0));return{id:`${e}#${c}`,productName:String((l==null?void 0:l.productName)??"(sin nombre)"),quantity:u,amount:Zo(d),amountSuggested:Number(t.amountSuggested??0),date:a,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",type:s,measurement:String((l==null?void 0:l.measurement)??t.measurement??""),allocations:Array.isArray(l==null?void 0:l.allocations)?l.allocations:t.allocations,avgUnitCost:Number((l==null?void 0:l.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((l==null?void 0:l.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:a,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",type:s,measurement:String(t.measurement??""),allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]};function hPe({role:t,roles:e}){const[r,n]=x.useState([]),[a,s]=x.useState([]),[o,l]=x.useState(null),[c,u]=x.useState(!0),[d,f]=x.useState(""),[A,h]=x.useState("ALL"),[m,p]=x.useState("ALL"),[g,v]=x.useState({}),[y,b]=x.useState(null),[w,P]=x.useState(0),[j,_]=x.useState(0),[I,E]=x.useState(""),[F,k]=x.useState(0),[B,R]=x.useState("0"),Y=jr(new Date,"yyyy-MM-dd"),[me,pe]=x.useState(Y),[he,ge]=x.useState(Y),[se,je]=x.useState(!1),[Te,D]=x.useState(!1),[K,z]=x.useState(!1),[Q,J]=x.useState(""),ee=x.useRef(null),{refreshKey:M,refresh:G}=vc(),ne=e&&e.length?e:t,ve=Lye(ne,"bills","cerrarVentas"),V=mn(ne,"admin"),qe=({title:Ce,open:$e,onToggle:gt,right:Kt})=>i.jsxs("button",{type:"button",onClick:gt,className:"w-full flex items-center justify-between gap-3 px-4 py-3 rounded-xl border bg-gray-50 hover:bg-gray-100 active:bg-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[i.jsx("span",{className:"font-semibold truncate",children:Ce}),Kt?i.jsx("span",{className:"text-xs text-gray-600",children:Kt}):null]}),i.jsx("div",{className:"shrink-0 text-lg font-bold leading-none",children:$e?"":"+"})]});x.useEffect(()=>{if(!me||!he)return;u(!0);const Ce=er(At(De,"salesV2"),ur("date",">=",me),ur("date","<=",he)),$e=dd(Ce,gt=>{const Kt=[];gt.forEach(Ut=>{const Jt=FV(Ut.data(),Ut.id);Kt.push(...Jt)}),n(Kt),u(!1)},gt=>{console.error("Error cargando ventas por periodo:",gt),n([]),u(!1)});return()=>$e()},[me,he,M]),x.useEffect(()=>{if(!me||!he)return;const Ce=er(At(De,"salesV2"),ur("status","==","FLOTANTE"),ur("date",">=",me),ur("date","<=",he)),$e=dd(Ce,gt=>{const Kt=[];gt.forEach(Ut=>{const Jt=FV(Ut.data(),Ut.id);Kt.push(...Jt)}),s(Kt)});return()=>$e()},[me,he,M]),x.useEffect(()=>{(async()=>{try{const Ce=await Lt(At(De,"users")),$e={};Ce.forEach(gt=>{const Kt=gt.data(),Ut=String(Kt.email||"").trim().toLowerCase(),Jt=String(Kt.name||"").trim();Ut&&($e[Ut]=Jt||Kt.email||"")}),v($e)}catch(Ce){console.error("Error cargando usuarios:",Ce),v({})}})()},[]);const ie=Ce=>{const $e=String(Ce||"").trim().toLowerCase();return g[$e]||Ce||""};x.useEffect(()=>{(async()=>{const $e=er(At(De,"daily_closures"),ur("date","==",Y)),gt=await Lt($e);if(gt.empty)l(null);else{const Kt=gt.docs[0];l({id:Kt.id,...Kt.data()})}})()},[Y,M]);const re=Ro.useMemo(()=>{let Ce=[];if(A==="FLOTANTE"){const gt=[...r,...a],Kt=new Map;for(const Ut of gt)Ut.status==="FLOTANTE"&&Kt.set(Ut.id,Ut);Ce=Array.from(Kt.values())}else if(A==="ALL"){const gt=[...r,...a],Kt=new Map;for(const Ut of gt)Kt.set(Ut.id,Ut);Ce=Array.from(Kt.values())}else Ce=r.filter(gt=>gt.status==="PROCESADA");m!=="ALL"&&(Ce=Ce.filter(gt=>gt.type===m));const $e=Q.trim().toLowerCase();if($e){const gt=Ut=>String(Ut||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),Kt=gt($e);Ce=Ce.filter(Ut=>gt(Ut.productName).includes(Kt))}return Ce},[A,r,a,Q,m]),Fe=Zo(re.reduce((Ce,$e)=>Ce+($e.amount||0),0)),de=Zo(re.reduce((Ce,$e)=>Ce+Number($e.cogsAmount??0),0)),we=Ce=>String(Ce||"").trim().toLowerCase()!=="lb",Le=re.filter(Ce=>Ce.type==="CONTADO"),Ge=re.filter(Ce=>Ce.type==="CREDITO"),ft=ph(Le.filter(Ce=>we(Ce.measurement)).reduce((Ce,$e)=>Ce+($e.quantity||0),0)),ht=ph(Le.filter(Ce=>!we(Ce.measurement)).reduce((Ce,$e)=>Ce+($e.quantity||0),0)),xt=ph(Ge.filter(Ce=>we(Ce.measurement)).reduce((Ce,$e)=>Ce+($e.quantity||0),0)),jt=ph(Ge.filter(Ce=>!we(Ce.measurement)).reduce((Ce,$e)=>Ce+($e.quantity||0),0)),kt=Zo(Le.reduce((Ce,$e)=>Ce+($e.amount||0),0)),wt=Zo(Ge.reduce((Ce,$e)=>Ce+($e.amount||0),0)),Ve=Zo(Le.reduce((Ce,$e)=>Ce+Number($e.cogsAmount??0),0)),Pe=Zo(Ge.reduce((Ce,$e)=>Ce+Number($e.cogsAmount??0),0)),be=Zo(kt-Ve),ce=Zo(wt-Pe),te=ph(ft+xt),Ne=ph(ht+jt),Re=Zo(kt+wt),ye={};re.forEach(Ce=>{const $e=Ce.productName||"(sin nombre)";ye[$e]||(ye[$e]={totalQuantity:0,totalAmount:0}),ye[$e].totalQuantity=ph(ye[$e].totalQuantity+(Ce.quantity||0)),ye[$e].totalAmount=Zo(ye[$e].totalAmount+(Ce.amount||0))});const Xe=Object.entries(ye).map(([Ce,$e])=>({productName:Ce,totalQuantity:$e.totalQuantity,totalAmount:$e.totalAmount})),mt=async()=>{try{const Ce=re.filter(X=>X.status==="FLOTANTE"),$e=Ce.length>0?Ce:r.filter(X=>X.status!=="PROCESADA");if($e.length===0){f("No hay ventas para procesar.");return}const gt={totalCharged:Zo($e.reduce((X,oe)=>X+(oe.amount||0),0)),totalSuggested:Zo($e.reduce((X,oe)=>X+(oe.amountSuggested||0),0)),totalUnits:ph($e.reduce((X,oe)=>X+(oe.quantity||0),0)),totalCOGS:Zo($e.reduce((X,oe)=>X+Number(oe.cogsAmount??0),0))},Kt=Zo(gt.totalCharged-gt.totalSuggested),Ut=Zo(gt.totalCharged-gt.totalCOGS),Jt=await Hn(At(De,"daily_closures"),{date:Y,createdAt:mr.now(),periodStart:me,periodEnd:he,totalCharged:gt.totalCharged,totalSuggested:gt.totalSuggested,totalDifference:Kt,totalUnits:gt.totalUnits,totalCOGS:gt.totalCOGS,grossProfit:Ut,products:$e.map(X=>({productName:X.productName,quantity:X.quantity,amount:X.amount})),salesV2:$e.map(X=>({id:X.id,productName:X.productName,quantity:X.quantity,amount:X.amount,amountSuggested:X.amountSuggested,userEmail:X.userEmail,clientName:X.clientName,amountReceived:X.amountReceived,change:X.change,status:X.status,cogsAmount:X.cogsAmount??0,avgUnitCost:X.avgUnitCost??null,allocations:X.allocations??[],date:X.date})),productSummary:Object.entries($e.reduce((X,oe)=>{const L=oe.productName||"(sin nombre)";return X[L]||(X[L]={totalQuantity:0,totalAmount:0}),X[L].totalQuantity=ph(X[L].totalQuantity+(oe.quantity||0)),X[L].totalAmount=Zo(X[L].totalAmount+(oe.amount||0)),X},{})).map(([X,oe])=>({productName:X,totalQuantity:oe.totalQuantity,totalAmount:oe.totalAmount}))}),it=Zd(De);$e.forEach(X=>{it.update(Yt(De,"salesV2",X.id.split("#")[0]),{status:"PROCESADA",closureId:Jt.id,closureDate:Y,date:X.date})}),await it.commit(),f(` Cierre guardado. Ventas procesadas: ${$e.length}.`)}catch(Ce){console.error(Ce),f(" Error al guardar el cierre.")}},rt=async Ce=>{if(!V){f(" No tienes permisos para revertir esta venta.");return}if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await Cn(Yt(De,"salesV2",Ce.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),f(" Venta revertida a FLOTANTE.")}catch($e){console.error($e),f(" No se pudo revertir la venta.")}},ue=Ce=>{if(!V){f(" No tienes permisos para editar esta venta.");return}b(Ce),P(Ce.quantity),_(Ce.amount),E(Ce.clientName),k(Ce.amountReceived),R(Ce.change)},_e=async()=>{if(!V){f(" No tienes permisos para guardar cambios.");return}if(y)try{await Cn(Yt(De,"salesV2",y.id.split("#")[0]),{quantity:w,amount:j,amountCharged:j,clientName:I,amountReceived:F,change:B}),b(null),f(" Venta actualizada.")}catch(Ce){console.error(Ce),f(" No se pudo actualizar la venta.")}},We=async Ce=>{if(!V){f(" No tienes permisos para eliminar esta venta.");return}if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:$e}=await Cre(Ce.split("#")[0]);f(` Venta eliminada. Stock restaurado: ${Number($e).toFixed(2)}.`)}catch($e){console.error($e),f(" No se pudo eliminar la venta.")}},ot=async()=>{if(ee.current){ee.current.classList.add("force-pdf-colors"),ee.current.classList.add("pdf-print-mode");try{const $e=(await Sg(ee.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),gt=new $r;gt.addImage($e,"PNG",10,10,190,0),gt.save(`cierre_${Y}.pdf`)}finally{ee.current.classList.remove("pdf-print-mode"),ee.current.classList.remove("force-pdf-colors")}}};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[i.jsxs("h2",{className:"text-2xl font-bold",children:["Cierre de Ventas - ",me,"  ",he]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(xc,{onClick:G})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(qe,{title:"Filtros",open:se,onToggle:()=>je(Ce=>!Ce),right:i.jsxs("span",{className:"ml-1",children:[me,"  ",he,A!=="ALL"?`  ${A}`:"",m!=="ALL"?`  ${m==="CREDITO"?"Crdito":"Cash"}`:"",Q.trim()?`  "${Q.trim()}"`:""]})}),se&&i.jsx("div",{className:"mt-3 border rounded-xl p-3 bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Periodo desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:me,onChange:Ce=>pe(Ce.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:he,onChange:Ce=>ge(Ce.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Estado"}),i.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:A,onChange:Ce=>h(Ce.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Tipo Operacin"}),i.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:m,onChange:Ce=>p(Ce.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),i.jsx("option",{value:"CREDITO",children:"Crdito"}),i.jsx("option",{value:"CONTADO",children:"Cash"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),i.jsx("input",{type:"text",className:"border rounded px-2 py-2 w-full",placeholder:"Buscar por producto...",value:Q,onChange:Ce=>J(Ce.target.value)})]})]})})]}),c?i.jsx("p",{children:"Cargando ventas..."}):i.jsxs("div",{ref:ee,children:[i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Estado"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[re.map(Ce=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ce.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Ce.status})}),i.jsx("td",{className:"border p-1",children:Ce.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:Ce.productName}),i.jsx("td",{className:"border p-1",children:gh(Ce.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Ru(Ce.amount)]}),i.jsx("td",{className:"border p-1",children:Ce.date}),i.jsx("td",{className:"border p-1",children:ie(Ce.userEmail)}),i.jsx("td",{className:"border p-1",children:Ce.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2 justify-center",children:V?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>ue(Ce),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>We(Ce.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):Ce.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2 justify-center",children:V?i.jsx("button",{onClick:()=>rt(Ce.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):i.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},Ce.id)),re.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden mb-4",children:[i.jsx(qe,{title:"Ventas",open:Te,onToggle:()=>D(Ce=>!Ce),right:i.jsxs("span",{className:"ml-1",children:[re.length,"  C$",Ru(Fe)]})}),Te&&i.jsxs("div",{className:"mt-3 space-y-3",children:[re.map(Ce=>i.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[i.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:Ce.productName}),i.jsx("div",{className:"text-xs text-gray-500",children:Ce.date})]}),i.jsxs("div",{className:"text-right shrink-0 ml-3",children:[i.jsxs("div",{className:"font-bold",children:["C$",Ru(Ce.amount)]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${Ce.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Ce.status})]})]}),i.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Cantidad"}),i.jsx("strong",{children:gh(Ce.quantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("strong",{children:Ce.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("strong",{className:"text-right break-all",children:ie(Ce.userEmail)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("strong",{className:"text-right break-all",children:Ce.clientName||""})]}),i.jsx("div",{className:"pt-2",children:Ce.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2",children:V?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>ue(Ce),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>We(Ce.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):Ce.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2",children:V?i.jsx("button",{onClick:()=>rt(Ce.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},Ce.id)),re.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-6",children:[i.jsxs("div",{children:["Total libras Cash: ",i.jsx("strong",{children:gh(ht)})]}),i.jsxs("div",{children:["Total Unidades cash: ",i.jsx("strong",{children:gh(ft)})]}),i.jsxs("div",{children:["Total libras credito: ",i.jsx("strong",{children:gh(jt)})]}),i.jsxs("div",{children:["Total Unidades credito: ",i.jsx("strong",{children:gh(xt)})]}),i.jsxs("div",{children:["Total facturado Cash: ",i.jsxs("strong",{children:["C$",Ru(Ve)]})]}),i.jsxs("div",{children:["Total facturado credito:"," ",i.jsxs("strong",{children:["C$",Ru(Pe)]})]}),i.jsxs("div",{children:["Total venta Cash: ",i.jsxs("strong",{children:["C$",Ru(kt)]})]}),i.jsxs("div",{children:["Total venta Credito: ",i.jsxs("strong",{children:["C$",Ru(wt)]})]}),i.jsxs("div",{children:["Utilidad bruta Cash: ",i.jsxs("strong",{children:["C$",Ru(be)]})]}),i.jsxs("div",{children:["Utilidad bruta credito:"," ",i.jsxs("strong",{children:["C$",Ru(ce)]})]}),i.jsxs("div",{children:["Total libras cash y credito: ",i.jsx("strong",{children:gh(Ne)})]}),i.jsxs("div",{children:["Total unidades cash y credito:"," ",i.jsx("strong",{children:gh(te)})]}),i.jsxs("div",{children:["Total ventas Cash y credito:"," ",i.jsxs("strong",{children:["C$",Ru(Re)]})]}),i.jsxs("div",{children:["Total facturado a precio compra:"," ",i.jsxs("strong",{children:["C$",Ru(de)]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(qe,{title:"Consolidado por producto",open:K,onToggle:()=>z(Ce=>!Ce),right:i.jsx("span",{className:"ml-1",children:Xe.length})}),K&&i.jsx("div",{className:"mt-3",children:i.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),i.jsxs("tbody",{children:[Xe.map(Ce=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:Ce.productName}),i.jsx("td",{className:"border p-1",children:gh(Ce.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Ru(Ce.totalAmount)]})]},Ce.productName)),Xe.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[i.jsx("button",{disabled:!ve,onClick:mt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),i.jsx("button",{onClick:ot,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[y.productName,"  ",ie(y.userEmail)]}),i.jsx("label",{className:"text-sm",children:"Cantidad"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:w,onChange:Ce=>P(parseFloat(Ce.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Monto cobrado"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:j,onChange:Ce=>_(parseFloat(Ce.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Cliente"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:I,onChange:Ce=>E(Ce.target.value)}),i.jsx("label",{className:"text-sm",children:"Paga con"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:F,onChange:Ce=>k(parseFloat(Ce.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Vuelto"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:B,onChange:Ce=>R(Ce.target.value)}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{onClick:()=>b(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),i.jsx("button",{onClick:_e,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Mu=t=>Number(t??0).toFixed(2),ox=t=>Number(t??0).toFixed(3);function APe(){var y,b,w,P;const t=async j=>{if(!window.confirm(`Eliminar el cierre del ${j.date}?`))return;const _=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(_){const I=await Lt(er(At(De,"salesV2"),ur("closureId","==",j.id)));if(!I.empty){const E=Zd(De);I.forEach(F=>{E.update(Yt(De,"salesV2",F.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await E.commit()}}await Dn(Yt(De,"daily_closures",j.id)),(u==null?void 0:u.id)===j.id&&d(null),await m(),A(` Cierre eliminado${_?" y ventas reabiertas.":"."}`)}catch(I){console.error(I),A(" No se pudo eliminar el cierre.")}},[e,r]=x.useState(jr(Iee(new Date),"yyyy-MM-dd")),[n,a]=x.useState(jr(new Date,"yyyy-MM-dd")),[s,o]=x.useState(!0),[l,c]=x.useState([]),[u,d]=x.useState(null),[f,A]=x.useState(""),h=x.useRef(null),m=async()=>{try{o(!0);const j=er(At(De,"daily_closures"),ur("date",">=",e),ur("date","<=",n)),_=await Lt(j),I=[];_.forEach(E=>I.push({id:E.id,...E.data()})),I.sort((E,F)=>E.date<F.date?1:E.date>F.date?-1:0),c(I)}catch(j){console.error(j),A(" Error cargando el historial.")}finally{o(!1)}};x.useEffect(()=>{m()},[]);const p=async j=>{j.preventDefault(),m()},g=x.useMemo(()=>{if(!u)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const j=Number(u.totalUnits??0),_=Number(u.totalSuggested??0),I=Number(u.totalCharged??0),E=Number(u.totalDifference??(isFinite(I-_)?I-_:0)),F=Number(u.totalCOGS??0),k=Number(u.grossProfit??(isFinite(I-F)?I-F:0));return{units:j,sug:_,chg:I,diff:E,cogs:F,profit:k}},[u]),v=async()=>{if(!h.current||!u)return;const j=h.current;j.classList.add("force-pdf-colors");try{const[{default:_},{jsPDF:I}]=await Promise.all([qh(()=>Promise.resolve().then(()=>S6),void 0),qh(()=>Promise.resolve().then(()=>Tk),void 0)]),F=(await _(j,{backgroundColor:"#ffffff",onclone:R=>{const Y=R.defaultView;R.body.querySelectorAll("*").forEach(pe=>{const he=Y.getComputedStyle(pe);he.color&&(pe.style.color=he.color),he.backgroundColor&&he.backgroundColor!=="rgba(0, 0, 0, 0)"&&(pe.style.backgroundColor=he.backgroundColor),he.borderColor&&(pe.style.borderColor=he.borderColor)})}})).toDataURL("image/png"),{jsPDF:k}=await qh(async()=>{const{jsPDF:R}=await Promise.resolve().then(()=>Tk);return{jsPDF:R}},void 0),B=new k;B.addImage(F,"PNG",10,10,190,0),B.save(`cierre_${u.date}.pdf`)}finally{j.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),i.jsxs("form",{onSubmit:p,className:"flex flex-wrap items-end gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:j=>r(j.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:j=>a(j.target.value)})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),s?i.jsx("p",{children:"Cargando..."}):l.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):i.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Monto de venta"}),i.jsx("th",{className:"border p-2",children:"Monto al costo"}),i.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsx("tbody",{children:l.map(j=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:j.date}),i.jsx("td",{className:"border p-1",children:ox(j.totalUnits)}),i.jsxs("td",{className:"border p-1",children:["C$",Mu(j.totalCharged)]}),i.jsxs("td",{className:"border p-1",children:["C$",Mu(j.totalCOGS)]}),i.jsxs("td",{className:"border p-1",children:["C$",Mu(j.grossProfit??Number(j.totalCharged??0)-Number(j.totalCOGS??0))]}),i.jsx("td",{className:"border p-1",children:i.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(j),children:"Ver detalle"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(j),children:"Eliminar"})]})})]},j.id))})]}),u&&i.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",u.date]}),i.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),i.jsx("button",{onClick:v,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),i.jsxs("div",{ref:h,className:"space-y-4",children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:i.jsxs("div",{children:["Total Libras/Unidades: ",i.jsx("strong",{children:ox(g.units)})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[i.jsxs("div",{children:["Monto al costo:"," ",i.jsxs("strong",{children:["C$",Mu(g.cogs)]})]}),i.jsxs("div",{children:["Ganancia sin gastos:"," ",i.jsxs("strong",{children:["C$",Mu(g.profit)]})]})]}),(y=u.salesV2)!=null&&y.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto de ventas"}),i.jsx("th",{className:"border p-2",children:"Monto al costo"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),i.jsx("tbody",{children:u.salesV2.map((j,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:j.productName??"(sin nombre)"}),i.jsx("td",{className:"border p-1",children:ox(j.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Mu(j.amount)]}),i.jsxs("td",{className:"border p-1",children:["C$",Mu(j.cogsAmount)]}),i.jsx("td",{className:"border p-1",children:j.date??""}),i.jsx("td",{className:"border p-1",children:j.userEmail??""})]},_))})]})]}):(b=u.sales)!=null&&b.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Paga con"}),i.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),i.jsx("tbody",{children:u.sales.map((j,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:j.productName??"(sin nombre)"}),i.jsx("td",{className:"border p-1",children:ox(j.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Mu(j.amount)]}),i.jsx("td",{className:"border p-1",children:j.userEmail??""}),i.jsx("td",{className:"border p-1",children:j.clientName??""}),i.jsxs("td",{className:"border p-1",children:["C$",Mu(j.amountReceived)]}),i.jsx("td",{className:"border p-1",children:typeof j.change=="number"?Mu(j.change):j.change??"0"})]},_))})]})]}):(w=u.products)!=null&&w.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto"})]})}),i.jsx("tbody",{children:u.products.map((j,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:j.productName}),i.jsx("td",{className:"border p-1",children:ox(j.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Mu(j.amount)]})]},_))})]})]}):i.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(P=u.productSummary)!=null&&P.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),i.jsx("tbody",{children:u.productSummary.map((j,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:j.productName}),i.jsx("td",{className:"border p-1",children:ox(j.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Mu(j.totalAmount)]})]},_))})]})]}):null]})]}),f&&i.jsx("p",{className:"mt-3 text-sm",children:f})]})}function mPe(){const[t,e]=x.useState(""),[r,n]=x.useState(""),[a,s]=x.useState(""),[o,l]=x.useState(!1),[c,u]=x.useState(["vendedor_pollo"]),[d,f]=x.useState(""),[A,h]=x.useState(""),[m,p]=x.useState([]),[g,v]=x.useState(!0),[y,b]=x.useState(null),[w,P]=x.useState(["vendedor_pollo"]),[j,_]=x.useState(""),[I,E]=x.useState(""),[F,k]=x.useState(!1),[B,R]=x.useState([]),Y=Q=>!Q||Q==="vendedor"?"vendedor_pollo":Q==="admin"||Q==="supervisor_pollo"||Q==="contador"||Q==="vendedor_pollo"||Q==="vendedor_ropa"||Q==="vendedor_dulces"?Q:"vendedor_pollo",me=Q=>Q?Array.isArray(Q)?Q.map(J=>Y(String(J))):[Y(String(Q))]:["vendedor_pollo"],pe=async()=>{v(!0);const Q=await Lt(At(De,"users")),J=[];Q.forEach(ee=>{const M=ee.data();J.push({id:ee.id,email:M.email??"",name:M.name??"",roles:me(M.roles??M.role),sellerCandyId:M.sellerCandyId??""})}),p(J),v(!1)},he=async()=>{try{const Q=await Lt(At(De,"sellers_candies")),J=[];Q.forEach(ee=>{const M=ee.data();J.push({id:ee.id,name:M.name??"(sin nombre)",branchLabel:M.branch??"",commissionPercent:Number(M.commissionPercent??0)})}),R(J)}catch(Q){console.error("Error cargando sellers_candies:",Q)}};x.useEffect(()=>{pe(),he()},[]);const ge=()=>{e(""),n(""),s(""),u(["vendedor_pollo"]),h("")},se=async Q=>{if(Q.preventDefault(),f(""),y){if(a&&a.length>0&&a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}}else if(a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}if(!t.trim()){f(" El nombre es obligatorio.");return}try{if(y){const V=Yt(De,"users",y),qe=w.length?w:["vendedor_pollo"],ie=qe.includes("vendedor_dulces")&&(j||A)||"";if(await Cn(V,{email:r,name:t.trim(),roles:qe,role:qe[0]||"vendedor_pollo",sellerCandyId:ie}),p(re=>re.map(Fe=>Fe.id===y?{...Fe,email:r,name:t.trim(),roles:qe,sellerCandyId:ie}:Fe)),a&&a.length>=6)try{const re=jT(),Fe=I||r;await rge(re,Fe),f(` Usuario actualizado. Se envi correo de restablecimiento a ${Fe}`)}catch(re){console.error("Error sending password reset:",re),f(" Usuario actualizado. No se pudo enviar correo de restablecimiento.")}else f(" Usuario actualizado correctamente.");Te();return}const J=AD(),ee=hD(J.options,"Secondary"),M=jT(ee),G=await nge(M,r,a),ne=c.length?c:["vendedor_pollo"],ve=ne.includes("vendedor_dulces")&&A||"";await cee(Yt(At(De,"users"),G.user.uid),{email:r,name:t.trim(),roles:ne,role:ne[0]||"vendedor_pollo",sellerCandyId:ve}),await wD(M),await Wme(ee),p(V=>[{id:G.user.uid,email:r,name:t.trim(),roles:ne,sellerCandyId:ve},...V]),f(" Usuario creado correctamente."),ge(),k(!1)}catch(J){console.error(J),f(" Error al crear el usuario: "+J.message)}},je=Q=>{b(Q.id),e(Q.name||""),n(Q.email||""),E(Q.email||""),P(Q.roles&&Q.roles.length?Q.roles:["vendedor_pollo"]),h(Q.sellerCandyId||""),_(Q.sellerCandyId||""),s(""),k(!0)},Te=()=>{b(null),P(["vendedor_pollo"]),_(""),E(""),ge(),k(!1)},D=async Q=>{confirm("Eliminar este usuario del listado?")&&(await Dn(Yt(De,"users",Q)),p(ee=>ee.filter(M=>M.id!==Q)))},K=Q=>{const J=Q==="admin"?"admin":Q==="supervisor_pollo"?"supervisor_pollo":Q==="vendedor_ropa"?"vendedor_ropa":Q==="vendedor_dulces"?"vendedor_dulces":"vendedor_pollo",ee=J==="admin"?"bg-blue-100 text-blue-700":J==="supervisor_pollo"?"bg-amber-100 text-amber-700":J==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":J==="vendedor_dulces"?"bg-pink-100 text-pink-700":"bg-green-100 text-green-700";return i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ee}`,children:J})},z=Q=>`${Q.name}  ${Q.branchLabel||"Sin sucursal"}  ${Q.commissionPercent.toFixed(2)}%`;return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),i.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>k(!0),type:"button",children:"Crear usuario"})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Email"}),i.jsx("th",{className:"p-2 border",children:"Rol"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:g?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(Q=>{const J=y===Q.id,ee=(J?w:Q.roles).includes("vendedor_dulces");return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Q.name||""}),i.jsx("td",{className:"p-2 border",children:Q.email}),i.jsx("td",{className:"p-2 border",children:J?i.jsxs("div",{className:"space-y-2 text-left",children:[["supervisor_pollo","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(M=>i.jsxs("label",{className:"inline-flex items-center mr-3",children:[i.jsx("input",{type:"checkbox",className:"mr-2",checked:w.includes(M),onChange:()=>P(G=>G.includes(M)?G.filter(ne=>ne!==M):[...G,M])}),i.jsx("span",{className:"text-sm",children:M})]},M)),w.includes("vendedor_dulces")&&i.jsxs("select",{className:"w-full border p-1 rounded text-xs mt-1",value:j,onChange:M=>_(M.target.value),children:[i.jsx("option",{value:"",children:"Selecciona vendedor de dulces"}),B.map(M=>i.jsx("option",{value:M.id,children:z(M)},M.id))]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex gap-2 justify-center",children:Q.roles.map(M=>i.jsx("span",{children:K(M)},M))}),ee&&Q.sellerCandyId&&i.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Vendedor asignado"})]})}),i.jsx("td",{className:"p-2 border space-x-2",children:i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>je(Q),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>D(Q.id),children:"Eliminar"})]})})]},Q.id)})})]})}),d&&i.jsx("p",{className:"text-sm mt-2",children:d}),F&&i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>k(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:y?"Editar usuario":"Registrar nuevo usuario"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Te,type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:se,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:Q=>e(Q.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),i.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:Q=>n(Q.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-1 relative",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),i.jsx("input",{type:o?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:a,onChange:Q=>s(Q.target.value),required:!y}),i.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>l(Q=>!Q),children:o?"":""})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Roles"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:["supervisor_pollo","contador","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(Q=>i.jsxs("label",{className:"inline-flex items-center mr-3",children:[i.jsx("input",{type:"checkbox",className:"mr-2",checked:y?w.includes(Q):c.includes(Q),onChange:()=>{y?P(J=>J.includes(Q)?J.filter(ee=>ee!==Q):[...J,Q]):u(J=>J.includes(Q)?J.filter(ee=>ee!==Q):[...J,Q])}}),i.jsx("span",{className:"text-sm",children:Q})]},Q))})]}),(y?w.includes("vendedor_dulces"):c.includes("vendedor_dulces"))&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Vendedor (dulces)"}),i.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:A,onChange:Q=>h(Q.target.value),children:[i.jsx("option",{value:"",children:"Selecciona vendedor de dulces asignado"}),B.map(Q=>i.jsx("option",{value:Q.id,children:z(Q)},Q.id))]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Te,children:"Cancelar"}),i.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:y?"Guardar cambios":"Crear usuario"})]})]}),d&&i.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const OV=t=>`C$${(Number(t)||0).toFixed(2)}`;function pPe(){const[t,e]=x.useState(""),[r,n]=x.useState(0),[a,s]=x.useState(0),[o,l]=x.useState(""),[c,u]=x.useState(""),[d,f]=x.useState(""),[A,h]=x.useState([]),[m,p]=x.useState(!0),[g,v]=x.useState(!1),[y,b]=x.useState(null),[w,P]=x.useState(""),[j,_]=x.useState(""),[I,E]=x.useState(""),[F,k]=x.useState(0),[B,R]=x.useState(0),[Y,me]=x.useState(!1),pe=async()=>{p(!0);const z=await Lt(At(De,"products")),Q=[];z.forEach(J=>{const ee=J.data();Q.push({id:J.id,name:ee.name??"",price:Number(ee.price??0),providerPrice:Number(ee.providerPrice??0),category:ee.category??"",measurement:ee.measurement??"",active:ee.active!==!1})}),h(Q),p(!1)};x.useEffect(()=>{pe()},[]);const he=async z=>{if(z.preventDefault(),l(""),!t||r<=0||!d){l(" Completa nombre, precio vlido y unidad de medida");return}try{const Q={name:t,price:parseFloat(r.toFixed(2)),providerPrice:parseFloat((a||0).toFixed(2)),category:c,measurement:d,active:!0},J=await Hn(At(De,"products"),Q);h(ee=>[{id:J.id,...Q},...ee]),l(" Producto registrado con exito."),e(""),n(0),s(0),f(""),u(""),me(!1)}catch(Q){l(" Error: "+Q.message)}},ge=z=>{b(z.id),P(z.name),_(z.category),E(z.measurement),k(z.price),R(z.providerPrice||0)},se=()=>{b(null),P(""),_(""),E(""),k(0)},je=async()=>{if(!y)return;const z=Yt(De,"products",y);await Cn(z,{name:w,category:j,measurement:I,price:parseFloat((F||0).toFixed(2)),providerPrice:parseFloat((B||0).toFixed(2))}),h(Q=>Q.map(J=>J.id===y?{...J,name:w,category:j,measurement:I,price:parseFloat((F||0).toFixed(2)),providerPrice:parseFloat((B||0).toFixed(2))}:J)),se()},Te=async z=>{const Q=Yt(De,"products",z.id),J=z.active===!1;await Cn(Q,{active:J}),h(ee=>ee.map(M=>M.id===z.id?{...M,active:J}:M))},D=async z=>{const Q=er(At(De,"inventory_batches"),ur("productId","==",z),lS(1));if(!(await Lt(Q)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await Dn(Yt(De,"products",z)),h(M=>M.filter(G=>G.id!==z)))},K=g?A:A.filter(z=>z.active!==!1);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{l(""),me(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),Y&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>me(!1)}),i.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[i.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>me(!1),children:"Cerrar"})]}),i.jsxs("form",{onSubmit:he,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),i.jsxs("select",{value:c,onChange:z=>u(z.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"pollo",children:"Pollo"}),i.jsx("option",{value:"cerdo",children:"Cerdo"}),i.jsx("option",{value:"huevo",children:"Huevos"}),i.jsx("option",{value:"ropa",children:"Ropa"}),i.jsx("option",{value:"otros",children:"Otros"})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:z=>e(z.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),i.jsxs("select",{value:d,onChange:z=>f(z.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"lb",children:"Libra"}),i.jsx("option",{value:"kg",children:"Kilogramo"}),i.jsx("option",{value:"unidad",children:"Unidad"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Precio proveedor (ej: 40.00)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(a)?"":a,onChange:z=>s(parseFloat(z.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:z=>n(parseFloat(z.target.value)),onFocus:z=>z.target.value==="0"?n(NaN):null})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),o&&i.jsx("p",{className:"text-sm mt-2",children:o})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),i.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:g,onChange:z=>v(z.target.checked)}),"Mostrar inactivos"]})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):K.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):K.map(z=>{const Q=y===z.id,J=z.active!==!1;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Q?i.jsx("input",{className:"w-full border p-1 rounded",value:w,onChange:ee=>P(ee.target.value)}):z.name}),i.jsx("td",{className:"p-2 border",children:Q?i.jsxs("select",{className:"w-full border p-1 rounded",value:j,onChange:ee=>_(ee.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"pollo",children:"Pollo"}),i.jsx("option",{value:"cerdo",children:"Cerdo"}),i.jsx("option",{value:"huevo",children:"Huevos"}),i.jsx("option",{value:"ropa",children:"Ropa"}),i.jsx("option",{value:"otros",children:"Otros"})]}):z.category}),i.jsx("td",{className:"p-2 border",children:Q?i.jsxs("select",{className:"w-full border p-1 rounded",value:I,onChange:ee=>E(ee.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"lb",children:"Libra"}),i.jsx("option",{value:"kg",children:"Kilogramo"}),i.jsx("option",{value:"unidad",children:"Unidad"})]}):z.measurement}),i.jsx("td",{className:"p-2 border",children:Q?i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(B)?"":B,onChange:ee=>R(parseFloat(ee.target.value))}):OV(z.providerPrice||0)}),i.jsx("td",{className:"p-2 border",children:Q?i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(F)?"":F,onChange:ee=>k(parseFloat(ee.target.value))}):OV(z.price)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${J?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:J?"Activo":"Inactivo"})}),i.jsx("td",{className:"p-2 border space-x-2",children:Q?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:je,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:se,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ge(z),children:"Editar"}),i.jsx("button",{className:`px-2 py-1 rounded ${J?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>Te(z),children:J?"Desactivar":"Activar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>D(z.id),children:"Eliminar"})]})})]},z.id)})})]})})]})}const el=[];for(let t=0;t<256;++t)el.push((t+256).toString(16).slice(1));function gPe(t,e=0){return(el[t[e+0]]+el[t[e+1]]+el[t[e+2]]+el[t[e+3]]+"-"+el[t[e+4]]+el[t[e+5]]+"-"+el[t[e+6]]+el[t[e+7]]+"-"+el[t[e+8]]+el[t[e+9]]+"-"+el[t[e+10]]+el[t[e+11]]+el[t[e+12]]+el[t[e+13]]+el[t[e+14]]+el[t[e+15]]).toLowerCase()}let o5;const xPe=new Uint8Array(16);function vPe(){if(!o5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o5=crypto.getRandomValues.bind(crypto)}return o5(xPe)}const yPe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),DV={randomUUID:yPe};function bPe(t,e,r){var a;if(DV.randomUUID&&!t)return DV.randomUUID();t=t||{};const n=t.random??((a=t.rng)==null?void 0:a.call(t))??vPe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,gPe(n)}async function wPe(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const a=At(t,"inventory_batches"),s=er(a,ur("productName","==",e)),c=(await Lt(s)).docs.map(u=>({id:u.id,data:u.data()})).sort((u,d)=>{var p,g;const f=u.data.date??"",A=d.data.date??"";if(f!==A)return f<A?-1:1;const h=((p=u.data.createdAt)==null?void 0:p.seconds)??0,m=((g=d.data.createdAt)==null?void 0:g.seconds)??0;return h-m}).map(u=>Yt(t,"inventory_batches",u.id));return ki(t,async u=>{let d=Number(r);const f=[],A=await Promise.all(c.map(g=>u.get(g)));for(let g=0;g<c.length&&d>0;g++){const v=c[g],y=A[g];if(!y.exists())continue;const b=y.data(),w=Number(b.quantity??0),P=Number(b.remaining??w??0),j=Number(b.purchasePrice??0);if(P<=0)continue;const _=Math.min(P,d),I=Number((P-_).toFixed(3));u.update(v,{remaining:I}),f.push({batchId:v.id,qty:_,unitCost:j,lineCost:Number((_*j).toFixed(2))}),d=Number((d-_).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const h=Number(f.reduce((g,v)=>g+v.lineCost,0).toFixed(2)),m=f.reduce((g,v)=>g+v.qty,0),p=m>0?Number((h/m).toFixed(4)):0;return{allocations:f,avgUnitCost:p,cogsAmount:h}})}const Sre=3,NPe=.5*10**-Sre;function rs(t){const e=Number(t??0);return Number(e.toFixed(Sre))}function l5(t,e){return rs((t??0)+(e??0))}function TC(t,e){return rs(t)+NPe>=rs(e)}async function CPe(t,e){const r=await Lt(At(De,"inventory_batches")),n=t.trim().toLowerCase();let a=0;for(const s of r.docs){const o=s.data();(o.productName||"").trim().toLowerCase()===n&&o.productId!==e&&(await Cn(Yt(De,"inventory_batches",s.id),{productId:e}),a++)}return a}const n0=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function RV({user:t,role:e,roles:r}){r&&r.length;const[n,a]=x.useState([]),[s,o]=x.useState([]),[l,c]=x.useState(""),[u,d]=x.useState(jr(new Date,"yyyy-MM-dd")),[f,A]=x.useState(""),[h,m]=x.useState(""),[p,g]=x.useState([]),[v,y]=x.useState(0),[b,w]=x.useState(0),[P,j]=x.useState("0"),[_,I]=x.useState(""),[E,F]=x.useState(!1),[k,B]=x.useState({}),R=Ve=>Math.round(Ve*100)/100,Y=Ve=>rs(Ve).toFixed(3),[me,pe]=x.useState("CONTADO"),[he,ge]=x.useState([]),[se,je]=x.useState(""),[Te,D]=x.useState(0),K=Ve=>{pe(Ve),Ve==="CREDITO"?(A(""),w(0),j("0.00")):(je(""),D(0))},z=Ve=>{const Pe=Number(Ve.specialPrice||0);return Pe>0?Pe:Number(Ve.price||0)},Q=async Ve=>{if(!Ve)return 0;const Pe=er(At(De,"inventory_batches"),ur("productId","==",Ve)),be=await Lt(Pe);let ce=0;return be.forEach(te=>{const Ne=te.data();ce=l5(ce,Number(Ne.remaining||0))}),rs(ce)},J=async Ve=>{if(!Ve)return 0;const Pe=await Lt(At(De,"inventory_batches"));let be=0;return Pe.forEach(ce=>{const te=ce.data();(te.productName||"").trim().toLowerCase()===Ve.trim().toLowerCase()&&(be=l5(be,Number(te.remaining||0)))}),rs(be)};x.useEffect(()=>{(async()=>{const Ve=await Lt(At(De,"products")),Pe=[];Ve.forEach(be=>{const ce=be.data();(ce==null?void 0:ce.active)!==!1&&Pe.push({id:be.id,productName:ce.name??ce.productName??"(sin nombre)",price:Number(ce.price??0),measurement:ce.measurement??"(sin unidad)",category:ce.category??"(sin categora)"})}),a(Pe)})()},[]),x.useEffect(()=>{(async()=>{const Ve=await Lt(At(De,"inventory_batches")),Pe={};Ve.forEach(be=>{const ce=be.data(),te=ce.productId,Ne=Number(ce.remaining||0);te&&(Pe[te]=l5(Pe[te]||0,Ne))}),Object.keys(Pe).forEach(be=>Pe[be]=rs(Pe[be])),B(Pe)})()},[]),x.useEffect(()=>{(async()=>{const Ve=await Lt(At(De,"users")),Pe=[];Ve.forEach(be=>{const ce=be.data();Pe.push({id:be.id,email:ce.email??"(sin email)",role:ce.role??"USER"})}),o(Pe)})()},[]);const ee=async()=>{if(!l)return;const Ve=n.find(be=>be.id===l);if(!Ve)return;if(p.some(be=>be.productId===Ve.id)){c("");return}const Pe=await Q(Ve.id);g(be=>[...be,{productId:Ve.id,productName:Ve.productName,measurement:Ve.measurement,price:Number(Ve.price||0),specialPrice:0,stock:Pe,qty:0,qtyInput:"",specialPriceInput:"",discount:0,discountInput:""}]),c("")},M=async Ve=>{if(!Ve)return;const Pe=n.find(ce=>ce.id===Ve);if(!Pe||p.some(ce=>ce.productId===Pe.id))return;const be=await Q(Pe.id);g(ce=>[...ce,{productId:Pe.id,productName:Pe.productName,measurement:Pe.measurement,price:Number(Pe.price||0),specialPrice:0,stock:be,qty:0,qtyInput:"",specialPriceInput:"",discount:0,discountInput:""}]),c("")},G=Ve=>{g(Pe=>Pe.filter(be=>be.productId!==Ve))},ne=Ve=>{const Pe=String(Ve||"").replace(",",".");if(Pe==="")return"";const be=Pe.split(".");return be.length===1?Pe:`${be[0]}.${be.slice(1).join("")}`},ve=async(Ve,Pe)=>{g(be=>be.map(ce=>{if(ce.productId!==Ve)return ce;const te=(ce.measurement||"").toLowerCase()!=="lb",Ne=ne(Pe);if(Ne.trim()==="")return{...ce,qty:0,qtyInput:""};if(!te&&Ne===".")return{...ce,qty:0,qtyInput:"0."};const Re=Number(Ne),ye=Number.isFinite(Re)?Re:0;let Xe=te?Math.max(0,Math.round(ye)):rs(ye);const mt=te?Math.max(0,Math.floor(Number(ce.stock||0))):rs(Number(ce.stock||0));if(Xe>mt){Xe=mt,I(` Cantidad limitada a existencias (${mt})`);const ue=te?String(Xe):Xe===0?"":String(Xe);return{...ce,qty:Xe,qtyInput:ue}}const rt=te?String(Xe):Ne.endsWith(".")?Ne:String(Xe);return{...ce,qty:Xe,qtyInput:rt}}))},V=(Ve,Pe)=>{g(be=>be.map(ce=>{if(ce.productId!==Ve)return ce;const te=ne(Pe);if(te.trim()==="")return{...ce,specialPrice:0,specialPriceInput:""};if(te===".")return{...ce,specialPrice:0,specialPriceInput:"0."};const Ne=Number(te),Re=Number.isFinite(Ne)?Math.max(0,R(Ne)):0,ye=te.endsWith(".")?te:String(Re);return{...ce,specialPrice:Re,specialPriceInput:ye}}))},qe=(Ve,Pe)=>{g(be=>be.map(ce=>{if(ce.productId!==Ve)return ce;const te=ne(Pe);if(te.trim()==="")return{...ce,discount:0,discountInput:""};if(te===".")return{...ce,discount:0,discountInput:"0."};const Ne=Number(te),Re=Number.isFinite(Ne)?Math.max(0,Math.floor(Ne)):0,ye=te.endsWith(".")?te:String(Re);return{...ce,discount:Re,discountInput:ye}}))},ie=x.useMemo(()=>{let Ve=0;for(const Pe of p){const be=z(Pe),ce=Number(be||0)*Number(Pe.qty||0),te=Math.max(0,ce-Math.max(0,Number(Pe.discount||0)));Ve+=te}return R(Ve)},[p]);x.useEffect(()=>{y(ie)},[ie]),x.useEffect(()=>{const Ve=Number(b)||0,Pe=Number(v)||0;j((Ve-Pe).toFixed(2))},[b,v]);const re=Ve=>{Ve.key===","&&(Ve.preventDefault(),Ve.target.value+=".")},[Fe,de]=x.useState(!1);x.useEffect(()=>{var be;const Ve=window.matchMedia("(max-width: 900px)"),Pe=()=>de(Ve.matches);return Pe(),(be=Ve.addEventListener)==null||be.call(Ve,"change",Pe),()=>{var ce;return(ce=Ve.removeEventListener)==null?void 0:ce.call(Ve,"change",Pe)}},[]),x.useEffect(()=>{(async()=>{try{const Ve=await Lt(At(De,"customers_pollo")),Pe=[];Ve.forEach(be=>{const ce=be.data();Pe.push({id:be.id,name:ce.name??"",phone:ce.phone??"",status:ce.status??"ACTIVO",creditLimit:Number(ce.creditLimit??0),vendorId:ce.vendorId??"",vendorName:ce.vendorName??"",balance:0})});for(const be of Pe)try{const ce=er(At(De,"ar_movements_pollo"),ur("customerId","==",be.id)),te=await Lt(ce);let Ne=0;te.forEach(ye=>{Ne+=Number(ye.data().amount||0)});const Re=Number(be.initialDebt||0);be.balance=Ne+Re}catch{be.balance=0}Pe.sort((be,ce)=>(be.name||"").localeCompare(ce.name||"")),ge(Pe)}catch(Ve){console.error("Error cargando customers_pollo:",Ve),ge([])}})()},[]);const we=x.useMemo(()=>he.find(Ve=>Ve.id===se)||null,[he,se]),Le=Number((we==null?void 0:we.balance)||0),Ge=me==="CREDITO"?Math.max(0,Number(Le||0)+Math.max(0,Number(v||0))):0;x.useEffect(()=>{me==="CREDITO"&&D(Ve=>Math.min(Math.max(0,Number(Ve||0)),Ge))},[me,Ge]),x.useEffect(()=>{me==="CREDITO"&&(w(Number(Te||0)),j("0.00"))},[me,Te]);const ft=me==="CREDITO"?Le+Math.max(0,Number(v||0))-Math.max(0,Number(Te||0)):0,ht=async()=>{if(p.length===0)return"Agrega al menos un producto.";for(const Ve of p){if(!Ve.qty||Ve.qty<=0)return`Cantidad invlida para "${Ve.productName}".`;const Pe=await Q(Ve.productId);if(!TC(Pe,Ve.qty)){const be=await J(Ve.productName);if(TC(be,0)&&!TC(Pe,0)){const ce=await CPe(Ve.productName,Ve.productId),te=await Q(Ve.productId);if(!TC(te,Ve.qty))return`Stock insuficiente tras corregir ${ce} lote(s) para "${Ve.productName}".`}else return`Stock insuficiente para "${Ve.productName}". Disponible: ${Pe}`}}return null},xt=async Ve=>{var be,ce;Ve.preventDefault(),I("");const Pe=await ht();if(Pe){I(" "+Pe);return}try{F(!0);const te=[];if(me==="CONTADO"){if(!f.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!se)return"Selecciona un cliente (crdito).";if(Te<0)return"El pago inicial no puede ser negativo.";if(Te>v)return"El pago inicial no puede superar el total.";if((we==null?void 0:we.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede fiar."}for(const ue of p){const _e=ue.qty,{allocations:We,avgUnitCost:ot,cogsAmount:Ce}=await wPe(De,ue.productName,_e,!1),$e=z(ue),gt=Number($e||0)*Number(_e||0),Kt=Math.max(0,Number(ue.discount||0)),Ut=Math.max(0,gt-Kt);te.push({productId:ue.productId,productName:ue.productName,measurement:ue.measurement,unitPrice:Number($e||0),regularPrice:Number(ue.price||0),specialPrice:Number(ue.specialPrice||0)>0?Number(ue.specialPrice):null,qty:_e,discount:Kt,lineTotal:R(gt),lineFinal:R(Ut),allocations:We,avgUnitCost:ot,cogsAmount:Ce})}const Ne=te.reduce((ue,_e)=>ue+_e.lineFinal,0),Re=te.reduce((ue,_e)=>ue+Number(_e.qty||0),0),ye=Number(me==="CREDITO"?Te||0:b||0),Xe=me==="CREDITO"?"0.00":P,mt={id:bPe(),quantity:Re,amount:Ne,amountCharged:Ne,timestamp:mr.now(),date:u,userEmail:(t==null?void 0:t.email)??((be=s[0])==null?void 0:be.email)??"sin usuario",vendor:e??((ce=s[0])==null?void 0:ce.role)??"sin usuario",status:"FLOTANTE",items:te,itemsTotal:Ne,type:me,amountReceived:ye,change:Xe,customerId:me==="CREDITO"?se:"",customerName:me==="CREDITO"?(we==null?void 0:we.name)||"":f.trim(),clientName:me==="CONTADO"?f.trim():""};if(me==="CONTADO"){if(!f.trim()){I(" Ingresa el nombre del cliente (contado).");return}}else{if(!se){I(" Selecciona un cliente (crdito).");return}if(Te<0){I(" El pago inicial no puede ser negativo.");return}if(Te>v){I(" El pago inicial no puede superar el total.");return}if((we==null?void 0:we.status)==="BLOQUEADO"){I(" El cliente est BLOQUEADO. No se puede fiar.");return}const ue=Number((we==null?void 0:we.creditLimit)||0);if(ue>0&&ft>ue){I(` Supera el lmite de crdito (C$ ${ue.toFixed(2)}).`);return}}const rt=await Hn(At(De,"salesV2"),mt);if(me==="CREDITO"&&se){const ue={customerId:se,date:u,createdAt:mr.now(),ref:{saleId:rt.id}};await Hn(At(De,"ar_movements_pollo"),{...ue,type:"CARGO",amount:Number(Ne)||0}),Number(Te)>0&&await Hn(At(De,"ar_movements_pollo"),{...ue,type:"ABONO",amount:-Number(Te)}),ge(_e=>_e.map(We=>We.id===se?{...We,balance:Number(We.balance||0)+Number(Ne||0)-Number(Te||0)}:We))}I(" Venta registrada y asignada a inventario (FIFO)."),g([]),c(""),y(0),w(0),j("0"),A(""),d(jr(new Date,"yyyy-MM-dd")),je(""),D(0),pe("CONTADO")}catch(te){console.error(te),I(` ${(te==null?void 0:te.message)||"Error al registrar la venta."}`)}finally{F(!1)}},jt=x.useMemo(()=>new Set(p.map(Ve=>Ve.productId)),[p]),kt=x.useMemo(()=>n.filter(Ve=>(k[Ve.id]||0)>0),[n,k]),wt=x.useMemo(()=>{const Ve=String(h||"").trim().toLowerCase();return Ve?kt.filter(Pe=>`${Pe.productName||""}`.toLowerCase().includes(Ve)):kt},[kt,h]);return Fe?i.jsx("div",{className:"w-full max-w-lg mx-auto p-3",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"font-bold text-lg text-blue-700",children:"Registrar venta (Pollo)"}),i.jsx("input",{type:"date",className:"text-sm text-gray-700 border rounded px-2 py-1",value:u,onChange:Ve=>d(Ve.target.value),"aria-label":"Fecha de la venta"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:me,onChange:Ve=>K(Ve.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),me==="CONTADO"?i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Contado)"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:f,onChange:Ve=>A(Ve.target.value),placeholder:"Ej: Cliente Mostrador"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Crdito)"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:se,onChange:Ve=>je(Ve.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),he.map(Ve=>i.jsxs("option",{value:Ve.status==="ACTIVO"?Ve.id:"",disabled:Ve.status==="BLOQUEADO",children:[Ve.name,"  Saldo: ",n0(Ve.balance||0)]},Ve.id))]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-base font-semibold",children:n0(Le)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-base font-semibold",children:n0(ft)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-semibold",children:"Pago inicial"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",type:"number",step:"0.01",inputMode:"decimal",max:Ge,value:Te===0?"":Te,onChange:Ve=>{const Pe=Math.max(0,Number(Ve.target.value||0)),be=Math.min(Pe,Ge);D(be)},placeholder:"0.00"}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",n0(Ge)]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 mb-2",placeholder:"Buscar producto por nombre...",value:h,onChange:Ve=>m(Ve.target.value)}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("select",{className:"flex-1 border rounded px-1 py-2 text-sm",value:l,onChange:async Ve=>{const Pe=Ve.target.value;c(Pe),await M(Pe)},children:[i.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),wt.map(Ve=>i.jsxs("option",{value:Ve.id,disabled:jt.has(Ve.id),children:[Ve.productName," | C$ ",Ve.price," | Disp:"," ",Y(k[Ve.id]||0)]},Ve.id))]})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Items"}),p.length===0?i.jsx("div",{className:"text-gray-500",children:"Agrega productos al carrito."}):i.jsx("div",{className:"space-y-2",children:p.map(Ve=>{const Pe=z(Ve),be=Number(Pe||0)*Number(Ve.qty||0),ce=Math.max(0,be-Math.max(0,Number(Ve.discount||0))),te=(Ve.measurement||"").toLowerCase()!=="lb";return i.jsxs("div",{className:"border rounded p-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"font-semibold",children:Ve.productName}),i.jsxs("div",{className:"text-sm",children:["C$ ",R(Pe).toFixed(2)]})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 items-center",children:[i.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:te?"numeric":"decimal",step:te?1:.01,value:Ve.qtyInput??(Ve.qty===0?"":Ve.qty),onKeyDown:re,onChange:Ne=>ve(Ve.productId,Ne.target.value),placeholder:te?"Unid":"Libras",title:te?"Unidades":"Libras"}),i.jsx("input",{className:"border rounded px-1 py-1 text-right",inputMode:"numeric",value:Ve.discountInput??(Ve.discount===0?"":Ve.discount),onChange:Ne=>qe(Ve.productId,Ne.target.value),placeholder:"Descuento",title:"Descuento (C$)"}),i.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:"decimal",value:Ve.specialPriceInput??(Ve.specialPrice===0?"":Ve.specialPrice),onChange:Ne=>V(Ve.productId,Ne.target.value),placeholder:"Sugerido",title:"Precio sugerido (opcional)"})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Exist:"," ",rs(Number(Ve.stock)-Number(Ve.qty||0)).toFixed(3)]}),i.jsxs("div",{className:"font-semibold",children:["C$ ",R(ce).toFixed(2)]})]}),i.jsx("div",{className:"mt-2 text-right",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600",onClick:()=>G(Ve.productId),children:"Quitar"})})]},Ve.productId)})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Monto total"}),i.jsxs("div",{className:"text-xl font-bold",children:["C$ ",v.toFixed(2)]})]}),me==="CONTADO"&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{className:"border rounded px-2 py-2",inputMode:"decimal",value:b===0?"":b,onChange:Ve=>w(Number(Ve.target.value||0)),placeholder:"Monto recibido"}),i.jsxs("div",{className:"border rounded px-2 py-2 bg-gray-100",children:["Cambio: C$ ",P]})]}),i.jsx("button",{onClick:xt,disabled:p.length===0||E,className:"w-full bg-blue-600 text-white px-4 py-2 rounded",children:E?"Guardando...":"Guardar venta"}),_&&i.jsx("div",{className:`text-sm ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]})}):i.jsxs("div",{className:"relative",children:[i.jsxs("form",{onSubmit:xt,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl\r
                 p-4 sm:p-6 md:p-8\r
                 max-w-5xl space-y-4`,children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:l,onChange:Ve=>c(Ve.target.value),children:[i.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),kt.map(Ve=>i.jsxs("option",{value:Ve.id,disabled:jt.has(Ve.id),title:jt.has(Ve.id)?"Ya est en la lista":`Disponible: ${Y(k[Ve.id]||0)}`,children:[Ve.productName,"  ",Ve.measurement,"  C$ ",Ve.price," (disp:"," ",Y(k[Ve.id]||0),")"]},Ve.id))]}),i.jsx("button",{type:"button",onClick:ee,disabled:!l||jt.has(l),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:u,onChange:Ve=>d(Ve.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:me,onChange:Ve=>K(Ve.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),me==="CONTADO"?i.jsxs("div",{className:"md:col-span-2 space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Contado)"}),i.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:f,onChange:Ve=>A(Ve.target.value),placeholder:"Ej: Cliente Mostrador"})]}):i.jsxs("div",{className:"md:col-span-2 space-y-2",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Crdito)"}),i.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:se,onChange:Ve=>je(Ve.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),he.map(Ve=>i.jsxs("option",{value:Ve.status==="ACTIVO"?Ve.id:"",disabled:Ve.status==="BLOQUEADO",children:[Ve.name,"  Saldo: ",n0(Ve.balance||0)]},Ve.id))]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:n0(Le)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Pago inicial"}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",n0(Ge)]}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:Ge,className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:Te===0?"":Te,onChange:Ve=>{const Pe=Math.max(0,Number(Ve.target.value||0)),be=Math.min(Pe,Ge);D(be)},placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:n0(ft)})]})]})]})]}),i.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:i.jsxs("table",{className:"min-w-full text-sm r",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"text-center",children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio especial"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:""})]})}),i.jsx("tbody",{children:p.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):p.map(Ve=>{const Pe=z(Ve),be=Number(Pe||0)*Number(Ve.qty||0),ce=Math.max(0,be-Math.max(0,Number(Ve.discount||0))),te=(Ve.measurement||"").toLowerCase()!=="lb",Ne=rs(Number(Ve.stock)-Number(Ve.qty||0));return i.jsxs("tr",{className:"text-center",children:[i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[Ve.productName,"  ",Ve.measurement]}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",R(Ve.price).toFixed(2)]}),i.jsxs("td",{className:"p-2 border",children:[i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Ve.specialPrice===0?"":Ve.specialPrice,onKeyDown:re,onChange:Re=>V(Ve.productId,Re.target.value),placeholder:"",title:"Precio especial (si se deja vaco, se usa el precio normal)"}),i.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Aplicado: C$ ",R(Pe).toFixed(2)]})]}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ne.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:te?1:.01,inputMode:te?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:Ve.qtyInput??(Ve.qty===0?"":Ve.qty),onKeyDown:re,onChange:Re=>ve(Ve.productId,Re.target.value),placeholder:"0",title:"Cantidad"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:Ve.discount===0?"":Ve.discount,onChange:Re=>qe(Ve.productId,Re.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",R(ce).toFixed(2)]}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>G(Ve.productId),title:"Quitar",children:""})})]},Ve.productId)})})]})}),i.jsxs("div",{className:"space-y-1 ",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${v.toFixed(2)}`,readOnly:!0,title:"Suma de (precio aplicado  cantidad  descuento) de cada producto."})]}),me==="CONTADO"&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:b===0?"":b,onChange:Ve=>w(Number(Ve.target.value||0))})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${P}`,readOnly:!0})]})]})}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:p.length===0||E,children:E?"Guardando...":"Guardar venta"}),_&&i.jsx("p",{className:`text-sm mt-2 ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]}),E&&i.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}function Ire(t,e,r,n,a){n=n||{};var s=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",A=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof t=="string"?t.split(d):t,A=f.length||1),r+=l*(2-s),n.valign==="middle"?r-=A/2*u:n.valign==="bottom"&&(r-=A*u),n.halign==="center"||n.halign==="right"){var h=l;if(n.halign==="center"&&(h*=.5),f&&A>=1){for(var m=0;m<f.length;m++)a.text(f[m],e-a.getStringUnitWidth(f[m])*h,r),r+=u;return a}e-=a.getStringUnitWidth(t)*h}return n.halign==="justify"?a.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(t,e,r),a}var MV={},uv=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:MV=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,a,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){l=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,a,s){return this.jsPDFDocument.rect(e,r,n,a,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return MV||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),kk=function(t,e){return kk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},kk(t,e)};function jre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");kk(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Pre=function(t){jre(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function _Pe(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function EPe(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function SS(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return a}function Bre(t,e,r,n){var a=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:a,lineColor:s});var o=Tre(a,!1);o&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,o)}function Tre(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function Wj(t,e){var r,n,a,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(a=t.right)!==null&&a!==void 0?a:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function kre(t,e){var r=Wj(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function SPe(t,e,r,n,a){var s={},o=1.3333333333333333,l=c5(e,function(b){return a.getComputedStyle(b).backgroundColor});l!=null&&(s.fillColor=l);var c=c5(e,function(b){return a.getComputedStyle(b).color});c!=null&&(s.textColor=c);var u=jPe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=o*r,A=n.borderTopWidth;if(n.borderBottomWidth===A&&n.borderRightWidth===A&&n.borderLeftWidth===A){var h=(parseFloat(A)||0)/f;h&&(s.lineWidth=h)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var m=c5(e,function(b){return a.getComputedStyle(b)[d]});m!=null&&(s.lineColor=m);var p=["left","right","center","justify"];p.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),p=["middle","bottom","top"],p.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var g=parseInt(n.fontSize||"");isNaN(g)||(s.fontSize=g/o);var v=IPe(n);v&&(s.fontStyle=v);var y=(n.fontFamily||"").toLowerCase();return t.indexOf(y)!==-1&&(s.font=y),s}function IPe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function c5(t,e){var r=Fre(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function Fre(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:Fre(t.parentElement,e):r}function jPe(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),a=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=Wj(s,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function Ore(t,e,r,n,a){var s,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof e=="string"?l=r.document.querySelector(e):l=e;var c=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],f=[],A=[];if(!l)return console.error("Html table could not be found with input: ",e),{head:d,body:f,foot:A};for(var h=0;h<l.rows.length;h++){var m=l.rows[h],p=(o=(s=m==null?void 0:m.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),g=PPe(c,u,r,m,n,a);g&&(p==="thead"?d.push(g):p==="tfoot"?A.push(g):f.push(g))}return{head:d,body:f,foot:A}}function PPe(t,e,r,n,a,s){for(var o=new Pre(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=SPe(t,c,e,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:BPe(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function BPe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function TPe(t,e,r){for(var n=0,a=[t,e,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Rh(t,e,r,n,a){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function Dre(t,e){var r=new uv(t),n=r.getDocumentOptions(),a=r.getGlobalOptions();TPe(a,n,e);var s=Rh({},a,n,e),o;typeof window<"u"&&(o=window);var l=kPe(a,n,e),c=FPe(a,n,e),u=OPe(r,s),d=RPe(r,s,o);return{id:e.tableId,content:d,hooks:c,styles:l,settings:u}}function kPe(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=t[c],d=e[c],f=r[c];n.columnStyles=Rh({},u,d,f)}else{var A=[t,e,r],h=A.map(function(m){return m[c]||{}});n[c]=Rh({},h[0],h[1],h[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];a(l)}return n}function FPe(t,e,r){for(var n=[t,e,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function OPe(t,e){var r,n,a,s,o,l,c,u,d,f,A,h,m=Wj(e.margin,40/t.scaleFactor()),p=(r=DPe(t,e.startY))!==null&&r!==void 0?r:m.top,g;e.showFoot===!0?g="everyPage":e.showFoot===!1?g="never":g=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var v;e.showHead===!0?v="everyPage":e.showHead===!1?v="never":v=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var y=(s=e.useCss)!==null&&s!==void 0?s:!1,b=e.theme||(y?"plain":"striped"),w=!!e.horizontalPageBreak,P=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=e.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:y,theme:b,startY:p,margin:m,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:v,showFoot:g,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(A=e.tableLineColor)!==null&&A!==void 0?A:200,horizontalPageBreak:w,horizontalPageBreakRepeat:P,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function DPe(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),a=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===a}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function RPe(t,e,r){var n=e.head||[],a=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(r){var l=Ore(t,e.html,r,o,e.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||MPe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function MPe(t,e,r){var n=t[0]||e[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var Fk=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),LPe=function(t){jre(e,t);function e(r,n,a,s,o,l){var c=t.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=o,c.section=s.section,c}return e}(Fk),UPe=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,a,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new LPe(e,this,n,a,s,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new Fk(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new Fk(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),Rre=function(){function t(e,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof Pre&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(a,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},t}(),Mre=function(){function t(e,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=Wj(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),QPe=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,a=e.allRows();n<a.length;n++){var s=a[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},t}();function VPe(t,e){HPe(t,e);var r=[],n=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=e.getWidth(t.pageSize().width)-n;a&&(a=Ok(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=Ok(r,a,function(s){return s.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/t.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),GPe(e),KPe(e,t),$Pe(e)}function HPe(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,a=kre(t,e);e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=SS(u.text,u.styles,t)+f;var A=SS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=A+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/r;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function Ok(t,e,r){for(var n=e,a=t.reduce(function(h,m){return h+m.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;e-=f-o.width,o.width=f}if(e=Math.round(e*1e10)/1e10,e){var A=t.filter(function(h){return e<0?h.width>r(h):!0});A.length&&(e=Ok(A,e,r))}return e}function $Pe(t){for(var e={},r=1,n=t.allRows(),a=0;a<n.length;a++)for(var s=n[a],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=e[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,A=d.rowSpan>f?f:d.rowSpan;e[c.index]={cell:d,left:A,row:s}}}}}function GPe(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],a=null,s=0,o=0,l=0;l<t.columns.length;l++){var c=t.columns[l];if(o-=1,o>1&&t.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function KPe(t,e){for(var r={count:0,height:0},n=0,a=t.allRows();n<a.length;n++){for(var s=a[n],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=LV(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=LV(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var A=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<A*u.rowSpan?r={height:A,count:u.rowSpan}:r&&r.count>0&&r.height>A&&(A=r.height),A>s.height&&(s.height=A)}}r.count--}}function LV(t,e,r,n,a){return t.map(function(s){return qPe(s,e,r,n,a)})}function qPe(t,e,r,n,a){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=SS(t,r,n))return t;for(;e<SS(t+a,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+a}function Lre(t,e){var r=new uv(t),n=zPe(e,r.scaleFactor()),a=new UPe(e,n);return VPe(r,a),r.applyStyles(r.userStyles),a}function zPe(t,e){var r=t.content,n=XPe(r.columns);if(r.head.length===0){var a=UV(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=UV(n,"foot");a&&r.foot.push(a)}var s=t.settings.theme,o=t.styles;return{columns:n,head:u5("head",r.head,n,o,s,e),body:u5("body",r.body,n,o,s,e),foot:u5("foot",r.foot,n,o,s,e)}}function u5(t,e,r,n,a,s){var o={},l=e.map(function(c,u){for(var d=0,f={},A=0,h=0,m=0,p=r;m<p.length;m++){var g=p[m];if(o[g.index]==null||o[g.index].left===0)if(h===0){var v=void 0;Array.isArray(c)?v=c[g.index-A-d]:v=c[g.dataKey];var y={};typeof v=="object"&&!Array.isArray(v)&&(y=(v==null?void 0:v.styles)||{});var b=YPe(t,g,u,a,n,s,y),w=new Mre(v,b,t);f[g.dataKey]=w,f[g.index]=w,h=w.colSpan-1,o[g.index]={left:w.rowSpan-1,times:h}}else h--,A++;else o[g.index].left--,h=o[g.index].times,d++}return new Rre(c,u,t,f)});return l}function UV(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var a=WPe(e,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function WPe(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function XPe(t){return t.map(function(e,r){var n,a;return typeof e=="object"?a=(n=e.dataKey)!==null&&n!==void 0?n:r:a=r,new QPe(a,e,r)})}function YPe(t,e,r,n,a,s,o){var l=EPe(n),c;t==="head"?c=a.headStyles:t==="body"?c=a.bodyStyles:t==="foot"&&(c=a.footStyles);var u=Rh({},l.table,l[t],a.styles,c),d=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},f=t==="body"?d:{},A=t==="body"&&r%2===0?Rh({},l.alternateRow,a.alternateRowStyles):{},h=_Pe(s),m=Rh({},h,u,A,f);return Rh(m,o)}function JPe(t,e,r){var n;r===void 0&&(r={});var a=kre(t,e),s=new Map,o=[],l=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(A){var h=e.columns.find(function(m){return m.dataKey===A||m.index===A});h&&!s.has(h.index)&&(s.set(h.index,!0),o.push(h.index),l.push(e.columns[h.index]),a-=h.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(s.has(d)){d++;continue}var f=e.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),l.push(e.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function ZPe(t,e){for(var r=[],n=0;n<e.columns.length;n++){var a=JPe(t,e,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function Ure(t,e){var r=e.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(A,h){return A+h.height},0);l+=u}var d=new uv(t);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(Vre(d),s.y=a.top),e.callWillDrawPageHooks(d,s);var f=Rh({},s);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?e4e(d,e,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(A){return oA(d,e,A,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(A,h){var m=h===e.body.length-1;IS(d,e,A,m,f,s,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(A){return oA(d,e,A,s,e.columns)})),Bre(d,e,f,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function e4e(t,e,r,n){var a=ZPe(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?_b(t,e,r,n,u.columns,!0):QV(t,e,n,u.columns),t4e(t,e,r,n,u.columns),d5(t,e,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){t.applyStyles(t.userStyles);var d=l.columns;o>=0?_b(t,e,r,n,d,!0):QV(t,e,n,d),u=VV(t,e,o+1,n,d),d5(t,e,n,d)}var f=u-o;a.slice(1).forEach(function(A){t.applyStyles(t.userStyles),_b(t,e,r,n,A.columns,!0),VV(t,e,o+1,n,A.columns,f),d5(t,e,n,A.columns)}),o=u};o<e.body.length-1;)c()}function QV(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(s){return oA(t,e,s,r,n)})}function t4e(t,e,r,n,a){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var l=o===e.body.length-1;IS(t,e,s,l,r,n,a)})}function VV(t,e,r,n,a,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(r+s,e.body.length),l=-1;return e.body.slice(r,o).forEach(function(c,u){var d=r+u===e.body.length-1,f=Qre(t,e,d,n);c.canEntireRowFit(f,a)&&(oA(t,e,c,n,a),l=r+u)}),l}function d5(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(s){return oA(t,e,s,r,n)})}function r4e(t,e,r){var n=r.getLineHeight(t.styles.fontSize),a=t.padding("vertical"),s=Math.floor((e-a)/n);return Math.max(0,s)}function n4e(t,e,r,n){var a={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=t.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new Mre(u.raw,u.styles,u.section);d=Rh(d,u),d.text=[];var f=r4e(u,e,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var A=n.scaleFactor(),h=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(A,h),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(A,h),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var m=new Rre(t.raw,-1,t.section,a,!0);m.height=s;for(var p=0,g=r.columns;p<g.length;p++){var c=g[p],d=m.cells[c.index];d&&(d.height=m.height);var u=t.cells[c.index];u&&(u.height=t.height)}return m}function a4e(t,e,r,n){var a=t.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=a-o;e.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,t),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),f=e.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function IS(t,e,r,n,a,s,o){var l=Qre(t,e,n,s);if(r.canEntireRowFit(l,o))oA(t,e,r,s,o);else if(a4e(t,r,l,e)){var c=n4e(r,l,e,t);oA(t,e,r,s,o),_b(t,e,a,s,o),IS(t,e,c,n,a,s,o)}else _b(t,e,a,s,o),IS(t,e,r,n,a,s,o)}function oA(t,e,r,n,a){n.x=e.settings.margin.left;for(var s=0,o=a;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}t.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}s4e(t,c,n);var d=c.getTextPos();Ire(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function s4e(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=Tre(n.lineWidth,n.fillColor);a&&t.rect(e.x,r.y,e.width,e.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),i4e(t,e,r,n.lineWidth))}function i4e(t,e,r,n){var a,s,o,l;n.top&&(a=r.x,s=r.y,o=r.x+e.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,o,l)),n.bottom&&(a=r.x,s=r.y+e.height,o=r.x+e.width,l=r.y+e.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,o,l)),n.left&&(a=r.x,s=r.y,o=r.x,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,o,l)),n.right&&(a=r.x+e.width,s=r.y,o=r.x+e.width,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,o,l));function c(u,d,f,A,h){t.getDocument().setLineWidth(u),t.getDocument().line(d,f,A,h,"S")}}function Qre(t,e,r,n){var a=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-a}function _b(t,e,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(l){return oA(t,e,l,n,a)}),e.callEndPageHooks(t,n);var o=e.settings.margin;Bre(t,e,r,n),Vre(t),e.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(l){return oA(t,e,l,n,a)}),t.applyStyles(t.userStyles))}function Vre(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function o4e(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],a=Dre(this,n),s=Lre(this,a);return Ure(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,a){Ire(e,r,n,a,this)},t.API.autoTableSetDefaults=function(e){return uv.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){uv.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new uv(this),s=Ore(a,e,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var f5;function j0(t,e){var r=Dre(t,e),n=Lre(t,r);Ure(t,n)}try{if(typeof window<"u"&&window){var HV=window,$V=HV.jsPDF||((f5=HV.jspdf)===null||f5===void 0?void 0:f5.jsPDF);$V&&o4e($V)}}catch(t){console.error("Could not apply autoTable plugin",t)}const ka=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function h5(t="LOT"){return`${t}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function l4e({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const[a,s]=x.useState([]),[o,l]=x.useState([]),[c,u]=x.useState(!0),[d,f]=x.useState(""),{refreshKey:A,refresh:h}=vc(),m=e&&e.length?e:t,p=mn(m,"admin"),g=p||mn(m,"contador"),[v,y]=x.useState(jr(wd(new Date),"yyyy-MM-dd")),[b,w]=x.useState(jr(bd(new Date),"yyyy-MM-dd")),[P,j]=x.useState(""),[_,I]=x.useState(!1),[E,F]=x.useState(""),[k,B]=x.useState(jr(new Date,"yyyy-MM-dd")),[R,Y]=x.useState("lb"),[me,pe]=x.useState(""),[he,ge]=x.useState(0),[se,je]=x.useState(NaN),[Te,D]=x.useState(0),[K,z]=x.useState([]),[Q,J]=x.useState(null),[ee,M]=x.useState([]),[G,ne]=x.useState(!1),[ve,V]=x.useState(null),[qe,ie]=x.useState(!1),[re,Fe]=x.useState(null),[de,we]=x.useState(null),Le=oe=>we(L=>L===oe?null:oe),[Ge,ft]=x.useState(!1),ht=()=>ft(oe=>!oe),[xt,jt]=x.useState("all"),[kt,wt]=x.useState({}),Ve=oe=>wt(L=>({...L,[oe]:!(L[oe]??!1)})),Pe=(oe,L)=>{const Ae=[];return oe>0&&Ae.push(`${oe.toFixed(3)} lb`),L>0&&Ae.push(`${L.toFixed(3)} un`),Ae.length===0?"0":Ae.join("  ")},be=oe=>{const L=(oe||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(L)||L==="lb"};x.useEffect(()=>{(async()=>{u(!0),f("");const oe=await Lt(At(De,"products")),L=[];oe.forEach(Be=>{const S=Be.data();S.active===!0&&L.push({id:Be.id,name:S.name??S.productName??"(sin nombre)",category:S.category??"(sin categora)",measurement:S.measurement??"lb",price:Number(S.price??0),providerPrice:Object.prototype.hasOwnProperty.call(S,"providerPrice")?Number(S.providerPrice):void 0})}),s(L);const Ae=er(At(De,"inventory_batches"),bn("date","desc")),Ee=await Lt(Ae),Oe=[];Ee.forEach(Be=>{const S=Be.data(),O=rs(Number(S.quantity||0)),U=Number(S.purchasePrice||0),q=Number(S.salePrice||0),ae=Number((O*U).toFixed(2)),fe=Number((O*q).toFixed(2));Oe.push({id:Be.id,productId:S.productId,productName:S.productName,category:S.category,unit:S.unit,quantity:O,remaining:rs(Number(S.remaining||0)),purchasePrice:U,salePrice:q,invoiceTotal:S.invoiceTotal!=null?Number(S.invoiceTotal):ae,expectedTotal:S.expectedTotal!=null?Number(S.expectedTotal):fe,date:S.date,createdAt:S.createdAt,status:S.status,notes:S.notes,paidAmount:Number(S.paidAmount||0),paidAt:S.paidAt,batchGroupId:S.batchGroupId,orderName:S.orderName})}),l(Oe),u(!1)})()},[A]);const ce=x.useMemo(()=>o.filter(oe=>!(v&&oe.date<v||b&&oe.date>b||P&&oe.productId!==P)),[o,v,b,P]),te=x.useMemo(()=>{if(!P)return"Todos";const oe=a.find(L=>L.id===P);return oe?`${oe.name}  ${oe.category}`:"Filtro activo"},[P,a]),Ne=x.useMemo(()=>{const oe=ce.reduce((U,q)=>U+Number(q.invoiceTotal||0),0),L=ce.reduce((U,q)=>U+Number(q.expectedTotal||0),0);let Ae=0,Ee=0,Oe=0,Be=0;for(const U of ce)be(U.unit)?(Ae+=U.quantity,Ee+=U.remaining):(Oe+=U.quantity,Be+=U.remaining);const S=ce.reduce((U,q)=>U+q.quantity,0),O=ce.reduce((U,q)=>U+q.remaining,0);return{lbsIng:Ae,lbsRem:Ee,udsIng:Oe,udsRem:Be,qty:S,rem:O,totalFacturado:oe,totalEsperado:L}},[ce]),Re=x.useMemo(()=>{var Ae,Ee;const oe=new Map;for(const Oe of ce){const Be=Oe.batchGroupId&&String(Oe.batchGroupId).trim()||Oe.id;oe.has(Be)||oe.set(Be,[]),oe.get(Be).push(Oe)}const L=[];for(const[Oe,Be]of oe.entries()){const S=[...Be].sort((Ct,It)=>{var Er,Nr;const St=((Er=Ct.createdAt)==null?void 0:Er.seconds)??0;return(((Nr=It.createdAt)==null?void 0:Nr.seconds)??0)-St}),O=((Ae=S[0])==null?void 0:Ae.date)||"",U=String(((Ee=S[0])==null?void 0:Ee.orderName)||"").trim()||`Pedido ${O||""}`.trim()||"Pedido",q=new Set(S.map(Ct=>String(Ct.category||"").trim()).filter(Boolean)),ae=q.size===1?Array.from(q)[0].toUpperCase():"MIXTO",fe=S.some(Ct=>Ct.status==="PENDIENTE")?"PENDIENTE":"PAGADO",Ue=rs(S.reduce((Ct,It)=>Ct+(be(It.unit)?Number(It.quantity||0):0),0)),Ze=rs(S.reduce((Ct,It)=>Ct+(be(It.unit)?Number(It.remaining||0):0),0)),lt=rs(S.reduce((Ct,It)=>Ct+(be(It.unit)?0:Number(It.quantity||0)),0)),Qe=rs(S.reduce((Ct,It)=>Ct+(be(It.unit)?0:Number(It.remaining||0)),0)),tt=Number(S.reduce((Ct,It)=>Ct+Number(It.invoiceTotal||0),0).toFixed(2)),ut=Number(S.reduce((Ct,It)=>Ct+Number(It.expectedTotal||0),0).toFixed(2)),Pt=Number((ut-tt).toFixed(2));L.push({groupId:Oe,orderName:U,date:O,typeLabel:ae,status:fe,lbsIn:Ue,lbsRem:Ze,udsIn:lt,udsRem:Qe,totalFacturado:tt,totalEsperado:ut,utilidadBruta:Pt,items:S})}return L.sort((Oe,Be)=>Oe.date===Be.date?Oe.groupId<Be.groupId?1:-1:Oe.date<Be.date?1:-1),L},[ce]),ye=x.useMemo(()=>xt==="all"?Re:Re.filter(oe=>{const L=oe.lbsRem>0||oe.udsRem>0;return xt==="with"?L:!L}),[Re,xt]),Xe=x.useMemo(()=>{const oe=new Map;return ye.forEach(L=>{const Ae=L.typeLabel||"MIXTO";oe.has(Ae)||oe.set(Ae,[]),oe.get(Ae).push(L)}),Array.from(oe.entries()).map(([L,Ae])=>({type:L,items:Ae}))},[ye]),mt=x.useMemo(()=>{const oe=String(R||"").toLowerCase().trim();return a.filter(Ae=>String(Ae.measurement||"").toLowerCase().trim()===oe).sort((Ae,Ee)=>Ae.name.localeCompare(Ee.name,"es"))},[a,R]);x.useEffect(()=>{const oe=K.find(Ae=>Ae.productId===me);if(oe){ge(Number(oe.quantity||0)),je(Number(oe.purchasePrice||0)),D(Number(oe.salePrice||0));return}const L=a.find(Ae=>Ae.id===me);L?(ge(0),D(Number(L.price||0)),L.providerPrice!=null&&Number.isFinite(Number(L.providerPrice))?je(Number(L.providerPrice)):je(NaN)):(ge(0),D(0),je(NaN))},[me,a,A,K]);const rt=()=>{f("");const oe=a.find(O=>O.id===me);if(!oe)return f("Selecciona un producto.");if(he<=0||!Number.isFinite(se)||se<=0)return f("Completa libras a ingresar y precio proveedor.");const L=rs(he),Ae=oe.measurement,Ee=Number((L*Number(se||0)).toFixed(2)),Oe=Number((L*Number(Te||0)).toFixed(2)),Be=Number((Oe-Ee).toFixed(2)),S=K.findIndex(O=>O.productId===oe.id);S>=0?z(O=>O.map((U,q)=>q!==S?U:{...U,quantity:L,remaining:L,purchasePrice:Number(se||0),salePrice:Number(Te||0),invoiceTotal:Ee,expectedTotal:Oe,utilidadBruta:Be})):z(O=>[...O,{tempId:h5("IT"),productId:oe.id,productName:oe.name,category:oe.category,unit:Ae,quantity:L,remaining:L,purchasePrice:Number(se||0),salePrice:Number(Te||0),invoiceTotal:Ee,expectedTotal:Oe,utilidadBruta:Be}]),pe(""),ge(0),je(NaN),D(0)},ue=oe=>{z(L=>L.filter(Ae=>Ae.tempId!==oe))},_e=(oe,L,Ae)=>{z(Ee=>Ee.map(Oe=>{if(Oe.tempId!==oe)return Oe;const Be={...Oe};return L==="quantity"&&(Be.quantity=rs(Math.max(0,Ae)),Q||(Be.remaining=Be.quantity)),L==="purchasePrice"&&(Be.purchasePrice=Math.max(0,Number(Ae||0))),L==="salePrice"&&(Be.salePrice=Math.max(0,Number(Ae||0))),Be.invoiceTotal=Number((Be.quantity*Be.purchasePrice).toFixed(2)),Be.expectedTotal=Number((Be.quantity*Be.salePrice).toFixed(2)),Be.utilidadBruta=Number((Be.expectedTotal-Be.invoiceTotal).toFixed(2)),Be}))},We=x.useMemo(()=>{const oe=rs(K.reduce((Be,S)=>Be+(be(S.unit)?Number(S.quantity||0):0),0)),L=rs(K.reduce((Be,S)=>Be+(be(S.unit)?Number(S.remaining||0):0),0)),Ae=Number(K.reduce((Be,S)=>Be+Number(S.invoiceTotal||0),0).toFixed(2)),Ee=Number(K.reduce((Be,S)=>Be+Number(S.expectedTotal||0),0).toFixed(2)),Oe=Number((Ee-Ae).toFixed(2));return{lbsIn:oe,lbsRem:L,totalFacturado:Ae,totalEsperado:Ee,utilidadBruta:Oe}},[K]),ot=()=>{J(null),M([]),F(""),B(jr(new Date,"yyyy-MM-dd")),Y("lb"),pe(""),ge(0),je(NaN),D(0),z([])},Ce=async()=>{if(f(""),!K.length)return f("Agrega al menos un producto al pedido.");const oe=k||jr(new Date,"yyyy-MM-dd"),L=String(E||"").trim()||`Pedido ${oe}`,Ae=Q||h5("BATCH");try{if(!Q){for(const S of K)await BV({productId:S.productId,productName:S.productName,category:S.category,unit:S.unit,quantity:rs(S.quantity),purchasePrice:Number(S.purchasePrice||0),salePrice:Number(S.salePrice||0),invoiceTotal:Number(S.invoiceTotal||0),expectedTotal:Number(S.expectedTotal||0),date:oe,notes:"",batchGroupId:Ae,orderName:L});f(" Pedido creado"),I(!1),ot(),h();return}const Ee=ee,Oe=new Map;for(const S of Ee)Oe.set(S.productId,S);const Be=new Set(K.map(S=>S.productId));for(const S of K){const O=Oe.get(S.productId),U=rs(S.quantity);if(O){const q=rs(O.quantity-O.remaining),ae=Math.max(0,rs(U-q));await Cn(Yt(De,"inventory_batches",O.id),{date:oe,orderName:L,batchGroupId:Ae,quantity:U,purchasePrice:Number(S.purchasePrice||0),salePrice:Number(S.salePrice||0),invoiceTotal:Number(S.invoiceTotal||0),expectedTotal:Number(S.expectedTotal||0),remaining:ae})}else await BV({productId:S.productId,productName:S.productName,category:S.category,unit:S.unit,quantity:U,purchasePrice:Number(S.purchasePrice||0),salePrice:Number(S.salePrice||0),invoiceTotal:Number(S.invoiceTotal||0),expectedTotal:Number(S.expectedTotal||0),date:oe,notes:"",batchGroupId:Ae,orderName:L})}for(const S of Ee)Be.has(S.productId)||await Dn(Yt(De,"inventory_batches",S.id));f(" Pedido actualizado"),I(!1),ot(),h()}catch(Ee){console.error(Ee),f(" Error al guardar pedido")}},$e=oe=>{V(oe),ne(!0)},gt=oe=>{J(oe.groupId),M(oe.items),F(oe.orderName),B(oe.date||jr(new Date,"yyyy-MM-dd"));const L=oe.items.map(Ae=>{const Ee=Number(Ae.invoiceTotal||0),Oe=Number(Ae.expectedTotal||0);return{tempId:h5("IT"),productId:Ae.productId,productName:Ae.productName,category:Ae.category,unit:Ae.unit,quantity:rs(Ae.quantity),remaining:rs(Ae.remaining),purchasePrice:Number(Ae.purchasePrice||0),salePrice:Number(Ae.salePrice||0),invoiceTotal:Ee,expectedTotal:Oe,utilidadBruta:Number((Oe-Ee).toFixed(2))}});z(L),I(!0)},Kt=async oe=>{if(confirm(`Eliminar el pedido "${oe.orderName}" del ${oe.date}?`))try{for(const Ae of oe.items)await Dn(Yt(De,"inventory_batches",Ae.id));f(" Pedido eliminado"),h()}catch(Ae){console.error(Ae),f(" Error al eliminar pedido")}},Ut=oe=>{Fe(oe),ie(!0)},Jt=async()=>{if(re)try{for(const oe of re.items){if(oe.status!=="PENDIENTE")continue;await Nre(oe.id),await Cn(Yt(De,"inventory_batches",oe.id),{remaining:0});const L={date:oe.date,productName:oe.productName,quantity:oe.quantity,amount:Number((oe.expectedTotal??oe.salePrice*oe.quantity).toFixed(2)),allocations:[{batchId:oe.id,qty:oe.quantity,unitCost:oe.purchasePrice,lineCost:Number((oe.purchasePrice*oe.quantity).toFixed(2))}],avgUnitCost:oe.purchasePrice,measurement:oe.unit,createdAt:mr.now(),autoGeneratedFromInventory:!0};await Hn(At(De,"salesV2"),L)}f(" Pedido pagado y reflejado como venta"),h()}catch(oe){console.error(oe),f(" Error al pagar pedido")}finally{ie(!1),Fe(null)}},it=()=>{ie(!1),Fe(null)},X=()=>{const oe=new $r({unit:"pt",format:"a4",orientation:"landscape"}),L="Inventario de Pollo",Ae=`Rango: ${v||"(sin inicio)"} a ${b||"(sin fin)"}`,Ee=`Producto: ${te}`,Oe=O=>Number(O||0).toFixed(3);let Be=40;oe.setFontSize(16),oe.text(L,40,Be),Be+=16,oe.setFontSize(10),oe.text(Ae,40,Be),Be+=12,oe.text(Ee,40,Be),Be+=14;const S=()=>{var O;Be=(O=oe.lastAutoTable)!=null&&O.finalY?oe.lastAutoTable.finalY+18:Be+18};j0(oe,{startY:Be,head:[["KPI","Valor"]],body:[["Libras ingresadas",Oe(Ne.lbsIng)],["Libras restantes",Oe(Ne.lbsRem)],["Unidades ingresadas",Oe(Ne.udsIng)],["Unidades restantes",Oe(Ne.udsRem)],["Total esperado",ka(Ne.totalEsperado)],["Total facturado",ka(Ne.totalFacturado)],["Ganancia sin gastos",ka(Ne.totalEsperado-Ne.totalFacturado)],["Cantidad de lotes",ce.length.toString()]],styles:{fontSize:9},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),S(),j0(oe,{startY:Be,head:[["Fecha","Pedido","Tipo","Lb In","Lb Rem","Ud In","Ud Rem","Facturado","Esperado","Utilidad","Estado"]],body:Re.map(O=>[O.date,O.orderName,O.typeLabel,Oe(O.lbsIn),Oe(O.lbsRem),Oe(O.udsIn),Oe(O.udsRem),ka(O.totalFacturado),ka(O.totalEsperado),ka(O.utilidadBruta),O.status]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),S(),Re.forEach(O=>{oe.setFontSize(11),oe.text(`Pedido: ${O.orderName} (${O.date})  ${O.typeLabel}`,40,Be),Be+=12,j0(oe,{startY:Be,head:[["Producto","Unidad","Ingresado","Restante","Precio compra","Precio venta","Total facturado","Total esperado","Utilidad","Estado"]],body:O.items.map(U=>[U.productName,(U.unit||"").toUpperCase(),Oe(U.quantity),Oe(U.remaining),ka(U.purchasePrice),ka(U.salePrice),ka(U.invoiceTotal||U.purchasePrice*U.quantity),ka(U.expectedTotal||U.salePrice*U.quantity),ka((U.expectedTotal||U.salePrice*U.quantity)-(U.invoiceTotal||U.purchasePrice*U.quantity)),U.status]),styles:{fontSize:8},headStyles:{fillColor:[230,230,230],textColor:[0,0,0]}}),S()}),oe.save(`inventario_pollo_${v||"sin_desde"}_a_${b||"sin_hasta"}.pdf`)};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-2xl bg-gray-900 text-white hover:bg-black",type:"button",onClick:X,disabled:c,children:"Exportar PDF"}),g&&i.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>{ot(),I(!0)},children:"Crear Lote"})]})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:v,onChange:oe=>y(oe.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:b,onChange:oe=>w(oe.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:P,onChange:oe=>j(oe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),a.map(oe=>i.jsxs("option",{value:oe.id,children:[oe.name,"  ",oe.category]},oe.id))]})]}),i.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{y(""),w(""),j("")},children:"Quitar filtro"}),i.jsx("div",{className:"ml-auto",children:i.jsx(xc,{onClick:()=>h(),loading:c})})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:ht,role:"button","aria-expanded":Ge,children:[i.jsxs("div",{className:"flex gap-6 items-center",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Ne.lbsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Ne.lbsRem.toFixed(3)]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:Ge?"Cerrar":"Ver ms"})]}),Ge&&i.jsx("div",{className:"mt-3",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Ne.lbsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Ne.lbsRem.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Ne.udsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Ne.udsRem.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ","C$ ",Ne.totalEsperado.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",Ne.totalFacturado.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(Ne.totalEsperado-Ne.totalFacturado).toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",ce.length.toLocaleString()]})]})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsx("div",{className:"flex gap-2",children:[{key:"all",label:"Todos"},{key:"with",label:"Con disponibilidad"},{key:"without",label:"Sin disponibilidad"}].map(oe=>{const L=xt===oe.key;return i.jsx("button",{type:"button",onClick:()=>jt(oe.key),className:`flex-1 px-3 py-2 rounded-xl text-sm font-semibold shadow ${L?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:oe.label},oe.key)})}),c?i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow",children:"Cargando"}):ye.length===0?i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow text-center",children:xt==="with"?"Sin lotes con disponibilidad.":xt==="without"?"Sin lotes sin disponibilidad.":"Sin lotes"}):Xe.map(({type:oe,items:L})=>{const Ae=kt[oe]??!1;return i.jsxs("div",{className:"bg-white border rounded-2xl",children:[i.jsxs("button",{type:"button",onClick:()=>Ve(oe),className:"w-full px-4 py-3 flex items-center justify-between text-left",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:oe}),i.jsxs("div",{className:"text-xs text-gray-500",children:[L.length," ",L.length===1?"lote":"lotes"]})]}),i.jsx("span",{className:"text-xs text-gray-500",children:Ae?"Cerrar":"Ver"})]}),Ae&&i.jsx("div",{className:"space-y-3 px-2 pb-4",children:L.map(Ee=>{const Oe=de===Ee.groupId,Be=Ee.lbsRem>0||Ee.udsRem>0;return i.jsxs("div",{className:"bg-gray-50 border rounded-2xl",children:[i.jsxs("div",{className:"p-4 flex items-start justify-between gap-3 cursor-pointer",onClick:()=>Le(Ee.groupId),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"font-semibold text-lg",children:[Ee.date,i.jsxs("div",{className:"text-sm text-gray-500",children:["Producto: ",Ee.typeLabel]})]}),i.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["Nombre: ",Ee.orderName]})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${Ee.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Ee.status})})]}),i.jsxs("div",{className:"pb-4 p-4 flex items-start justify-between gap-1 cursor-pointer",children:[i.jsxs("div",{className:"px-2 py-1 rounded text-xs shrink-0 bg-green-100 font-semibold text-gray-700",children:["Ingresado: ",Pe(Ee.lbsIn,Ee.udsIn)]}),i.jsxs("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${Be?"bg-green-100 font-semibold text-gray-700":"bg-red-100 font-semibold text-red-700"}`,children:["Disponible: ",Pe(Ee.lbsRem,Ee.udsRem)]})]}),Oe&&i.jsxs("div",{className:"p-4 pt-0",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-white rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Tipo"}),i.jsx("div",{className:"font-semibold",children:Ee.typeLabel})]}),i.jsxs("div",{className:"bg-white rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Utilidad bruta"}),i.jsx("div",{className:"font-semibold",children:ka(Ee.utilidadBruta)})]}),i.jsxs("div",{className:"bg-white rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs ingresadas"}),i.jsx("div",{className:"font-semibold",children:Ee.lbsIn.toFixed(3)})]}),i.jsxs("div",{className:"bg-white rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs restantes"}),i.jsx("div",{className:"font-semibold",children:Ee.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"bg-white rounded-xl p-2 col-span-2",children:[i.jsxs("div",{className:"flex justify-between text-[11px] text-gray-500",children:[i.jsx("span",{children:"Total facturado"}),i.jsx("span",{children:"Total esperado"})]}),i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:ka(Ee.totalFacturado)}),i.jsx("span",{children:ka(Ee.totalEsperado)})]})]}),Ee.items.length>0&&i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 col-span-2 border border-gray-100",children:[i.jsx("div",{className:"text-[11px] text-gray-500 mb-2",children:"Productos asociados"}),i.jsx("div",{className:"space-y-1",children:Ee.items.map(S=>i.jsxs("div",{className:"flex items-center text-xs justify-between gap-2",children:[i.jsx("div",{className:"font-semibold text-gray-800 truncate",children:S.productName}),i.jsxs("div",{className:"text-gray-600 text-right",children:[i.jsxs("div",{children:["Ingresado:"," ",S.quantity.toFixed(3)]}),i.jsxs("div",{children:["Restante:"," ",S.remaining.toFixed(3)]})]})]},S.id))})]})]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>$e(Ee),children:"Ver detalle"}),p?i.jsxs(i.Fragment,{children:[Ee.status==="PENDIENTE"&&i.jsx("button",{className:"px-3 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-sm",onClick:()=>Ut(Ee),children:"Pagar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-yellow-600 hover:bg-yellow-700 text-white text-sm",onClick:()=>gt(Ee),children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white text-sm",onClick:()=>Kt(Ee),children:"Borrar"})]}):null]})]})]},Ee.groupId)})})]},oe)})]}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Libras restantes"}),i.jsx("th",{className:"p-2 border",children:"Unidades ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Unidades restantes"}),i.jsx("th",{className:"p-2 border",children:"Total Facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:c?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):Re.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin lotes"})}):Re.map(oe=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsxs("td",{className:"p-2 border",children:[i.jsx("button",{className:"underline text-blue-700 hover:text-blue-900",onClick:()=>$e(oe),title:oe.orderName,children:oe.date}),i.jsx("div",{className:"text-[11px] text-gray-500",children:oe.orderName})]}),i.jsx("td",{className:"p-2 border",children:oe.typeLabel}),i.jsx("td",{className:"p-2 border",children:oe.lbsIn.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:oe.lbsRem.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:oe.udsIn.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:oe.udsRem.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:ka(oe.totalFacturado)}),i.jsx("td",{className:"p-2 border",children:ka(oe.totalEsperado)}),i.jsx("td",{className:"p-2 border",children:ka(oe.utilidadBruta)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${oe.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:oe.status})}),i.jsx("td",{className:"p-2 border",children:p?i.jsxs("div",{className:"flex gap-2 justify-center",children:[oe.status==="PENDIENTE"&&i.jsx("button",{onClick:()=>Ut(oe),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>gt(oe),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Kt(oe),children:"Borrar"})]}):i.jsx("span",{className:"text-xs text-gray-500",children:"Solo vista"})})]},oe.groupId))})]})}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),_&&xu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>I(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:Q?"Editar pedido":"Crear pedido"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de pedido"}),i.jsx("input",{className:"w-full border p-2 rounded",value:E,onChange:oe=>F(oe.target.value),placeholder:"Ej: Pedido Pollo - Semana 1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:k,onChange:oe=>B(oe.target.value)})]})]}),i.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Unidad"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:R,onChange:oe=>{Y(oe.target.value),pe(""),ge(0),je(NaN),D(0)},children:[i.jsx("option",{value:"lb",children:"lb"}),i.jsx("option",{value:"unidad",children:"unidad"}),i.jsx("option",{value:"kg",children:"kg"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (solo activos)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:me,onChange:oe=>pe(oe.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),mt.map(oe=>i.jsxs("option",{value:oe.id,children:[oe.name,"  ",oe.category,"  ",oe.measurement]},oe.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Libras a ingresar"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:he===0?"":he,onChange:oe=>{const L=oe.target.value.replace(",","."),Ae=parseFloat(L),Ee=Number.isFinite(Ae)?parseFloat(Ae.toFixed(3)):0;ge(Math.max(0,Ee));const Oe=K.find(Be=>Be.productId===me);Oe&&_e(Oe.tempId,"quantity",Ee)},disabled:!me})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Number.isNaN(se)?"":se,onChange:oe=>{const L=oe.target.value.replace(",",".");if(L==="")return je(NaN);const Ae=parseFloat(L),Ee=Number.isFinite(Ae)?parseFloat(Ae.toFixed(2)):NaN;je(Number.isFinite(Ee)?Math.max(0,Ee):NaN);const Oe=K.find(Be=>Be.productId===me);Oe&&Number.isFinite(Ee)&&_e(Oe.tempId,"purchasePrice",Ee)},disabled:!me})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio venta (editable)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Te===0?"":Te,onChange:oe=>{const L=oe.target.value.replace(",","."),Ae=parseFloat(L),Ee=Number.isFinite(Ae)?parseFloat(Ae.toFixed(2)):0;D(Math.max(0,Ee));const Oe=K.find(Be=>Be.productId===me);Oe&&_e(Oe.tempId,"salePrice",Ee)},disabled:!me})]})]}),i.jsx("div",{className:"flex justify-end mt-3",children:i.jsx("button",{type:"button",onClick:rt,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Libras restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:K.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-500",children:"No hay productos agregados."})}):K.map(oe=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsxs("td",{className:"p-2 border text-left",children:[oe.productName,i.jsxs("div",{className:"text-[11px] text-gray-500",children:[oe.category,"  ",oe.unit]})]}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:oe.quantity,onChange:L=>{const Ae=L.target.value.replace(",","."),Ee=parseFloat(Ae),Oe=Number.isFinite(Ee)?parseFloat(Ee.toFixed(3)):0;_e(oe.tempId,"quantity",Oe)}})}),i.jsx("td",{className:"p-2 border",children:Number(oe.remaining||0).toFixed(3)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:oe.purchasePrice,onChange:L=>{const Ae=L.target.value.replace(",","."),Ee=parseFloat(Ae),Oe=Number.isFinite(Ee)?parseFloat(Ee.toFixed(2)):0;_e(oe.tempId,"purchasePrice",Oe)}})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:oe.salePrice,onChange:L=>{const Ae=L.target.value.replace(",","."),Ee=parseFloat(Ae),Oe=Number.isFinite(Ee)?parseFloat(Ee.toFixed(2)):0;_e(oe.tempId,"salePrice",Oe)}})}),i.jsx("td",{className:"p-2 border",children:ka(oe.invoiceTotal)}),i.jsx("td",{className:"p-2 border",children:ka(oe.expectedTotal)}),i.jsx("td",{className:"p-2 border",children:ka(oe.utilidadBruta)}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ue(oe.tempId),children:"Quitar"})})]},oe.tempId))})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),i.jsx("div",{className:"text-lg font-semibold",children:We.lbsIn.toFixed(3)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Libras restantes"}),i.jsx("div",{className:"text-lg font-semibold",children:We.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado"}),i.jsx("div",{className:"text-lg font-semibold",children:ka(We.totalFacturado)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Total esperado"}),i.jsx("div",{className:"text-lg font-semibold",children:ka(We.totalEsperado)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Utilidad bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:ka(We.utilidadBruta)})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),children:"Cancelar"}),i.jsx("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:Ce,disabled:K.length===0,children:Q?"Editar pedido":"Crear pedido"})]})]})]}),document.body),G&&ve&&xu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[75] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{ne(!1),V(null)}}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold",children:"Detalle del pedido"}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:ve.orderName})," "," ",ve.date]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ne(!1),V(null)},type:"button",children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Ingresado"}),i.jsx("th",{className:"p-2 border",children:"Restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Compra"}),i.jsx("th",{className:"p-2 border",children:"Precio Venta"}),i.jsx("th",{className:"p-2 border",children:"Total factura"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:ve.items.map(oe=>{const L=Number(oe.invoiceTotal||0),Ae=Number(oe.expectedTotal||0);return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border text-left",children:oe.productName}),i.jsx("td",{className:"p-2 border",children:(oe.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:oe.quantity.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:oe.remaining.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:ka(oe.purchasePrice)}),i.jsx("td",{className:"p-2 border",children:ka(oe.salePrice)}),i.jsx("td",{className:"p-2 border",children:ka(L)}),i.jsx("td",{className:"p-2 border",children:ka(Ae)}),i.jsx("td",{className:"p-2 border",children:ka(Ae-L)}),i.jsx("td",{className:"p-2 border",children:oe.status})]},oe.id)})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),i.jsx("div",{className:"text-lg font-semibold",children:ve.lbsIn.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras restantes"}),i.jsx("div",{className:"text-lg font-semibold",children:ve.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:ka(ve.utilidadBruta)})]})]})]})]}),document.body),qe&&re&&xu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:it}),i.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),i.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este pedido?",i.jsx("br",{}),i.jsx("strong",{children:re.orderName})," "," ",re.date,i.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("button",{onClick:Jt,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),i.jsx("button",{onClick:it,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const xh=t=>`C$${(Number(t)||0).toFixed(2)}`;function c4e(){const t=Q2e(new Date),[e,r]=x.useState(jr(t,"yyyy-MM")),[n,a]=x.useState([]),[s,o]=x.useState(!1),[l,c]=x.useState(""),u=x.useRef(null),d=x.useMemo(()=>{const[g,v]=e.split("-").map(w=>parseInt(w,10)),y=jr(wd(new Date(g,v-1,1)),"yyyy-MM-dd"),b=jr(bd(new Date(g,v-1,1)),"yyyy-MM-dd");return{from:y,to:b}},[e]),f=async()=>{o(!0);try{const g=await nPe(d.from,d.to),v=[];for(const y of g){const b=Yt(De,"inventory_batches",y.batchId),w=await ei(b);if(!w.exists())continue;const P=w.data();v.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:P.status??"PENDIENTE",purchasePrice:Number(P.purchasePrice||0),salePrice:Number(P.salePrice||0),supplier:P.supplier})}a(v)}catch(g){console.error(g),c(" Error al cargar liquidaciones")}finally{o(!1)}};x.useEffect(()=>{f()},[e]);const A=async g=>{confirm("Marcar este lote como PAGADO?")&&(await Nre(g),a(y=>y.map(b=>b.batchId===g?{...b,status:"PAGADO"}:b)))},h=x.useMemo(()=>{const g=n.reduce((w,P)=>w+P.soldQty,0),v=n.reduce((w,P)=>w+P.soldAmount,0),y=n.reduce((w,P)=>w+P.soldQty*P.purchasePrice,0),b=v-y;return{q:g,amt:v,cogs:y,profit:b}},[n]),m=x.useMemo(()=>{const g=new Map;for(const v of n){const y=v.productName||"(sin nombre)";g.has(y)||g.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const b=g.get(y);b.qty+=v.soldQty,b.revenue+=v.soldAmount;const w=v.soldQty*v.purchasePrice;b.cogs+=w,b.profit=b.revenue-b.cogs}return Array.from(g.values()).sort((v,y)=>v.productName.localeCompare(y.productName))},[n]),p=async()=>{if(!u.current)return;const g=u.current;g.classList.add("force-pdf-colors");try{const[{default:v},{jsPDF:y}]=await Promise.all([qh(()=>Promise.resolve().then(()=>S6),void 0),qh(()=>Promise.resolve().then(()=>Tk),void 0)]),w=(await v(g,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),P=new y("p","mm","a4"),j=190,_=P.getImageProperties(w),I=j,E=_.height*I/_.width;P.addImage(w,"PNG",10,10,I,E),P.save(`liquidaciones_${e}.pdf`)}catch(v){console.error(v),alert("No se pudo generar el PDF")}finally{g.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),i.jsx("button",{onClick:p,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),i.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:g=>r(g.target.value)}),i.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),i.jsxs("div",{ref:u,children:[i.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",h.q]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",xh(h.amt)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",xh(h.cogs)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",xh(h.profit)]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Proveedor"}),i.jsx("th",{className:"p-2 border",children:"Vendido"}),i.jsx("th",{className:"p-2 border",children:"Monto vendido"}),i.jsx("th",{className:"p-2 border",children:"COGS"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:s?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(g=>{const v=g.soldQty*g.purchasePrice,y=g.soldAmount-v;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:g.batchDate}),i.jsx("td",{className:"p-2 border",children:g.productName}),i.jsx("td",{className:"p-2 border",children:g.supplier||"-"}),i.jsx("td",{className:"p-2 border",children:g.soldQty}),i.jsx("td",{className:"p-2 border",children:xh(g.soldAmount)}),i.jsx("td",{className:"p-2 border",children:xh(v)}),i.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:xh(y)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${g.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status})}),i.jsx("td",{className:"p-2 border",children:g.status==="PENDIENTE"&&i.jsx("button",{onClick:()=>A(g.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},g.batchId)})})]})}),i.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),i.jsx("th",{className:"p-2 border",children:"Ingreso"}),i.jsx("th",{className:"p-2 border",children:"COGS"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),i.jsx("tbody",{children:m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):m.map(g=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:g.productName}),i.jsx("td",{className:"p-2 border",children:g.qty}),i.jsx("td",{className:"p-2 border",children:xh(g.revenue)}),i.jsx("td",{className:"p-2 border",children:xh(g.cogs)}),i.jsx("td",{className:`p-2 border ${g.profit>=0?"text-green-700":"text-red-700"}`,children:xh(g.profit)})]},g.productName))})]})})]}),l&&i.jsx("p",{className:"mt-2 text-sm",children:l})]})}const Lr=t=>`C$${Number(t??0).toFixed(2)}`,u4e=()=>jr(new Date,"yyyy-MM-dd"),Yn=t=>Number(t||0).toFixed(3);function d4e(){const[t,e]=x.useState(()=>{const X=new Date,oe=new Date(X.getFullYear(),X.getMonth(),1);return jr(oe,"yyyy-MM-dd")}),[r,n]=x.useState(u4e()),[a,s]=x.useState(!0),[o,l]=x.useState([]),[c,u]=x.useState([]),[d,f]=x.useState([]),[A,h]=x.useState(!1),[m,p]=x.useState(null),[g,v]=x.useState(0),[y,b]=x.useState(0),[w,P]=x.useState({}),[j,_]=x.useState({}),{refreshKey:I,refresh:E}=vc(),[F,k]=x.useState({}),[B,R]=x.useState({}),[Y,me]=x.useState(!1),pe=()=>me(X=>!X),[he,ge]=x.useState(!1),se=()=>ge(X=>!X),[je,Te]=x.useState(!1),[D,K]=x.useState(!1),[z,Q]=x.useState(!1),[J,ee]=x.useState(!1),[M,G]=x.useState(!1),[ne,ve]=x.useState(!1),V=()=>Te(X=>!X),qe=()=>K(X=>!X),ie=()=>Q(X=>!X),re=()=>ee(X=>!X),Fe=()=>G(X=>!X),de=()=>ve(X=>!X),[we,Le]=x.useState("");x.useEffect(()=>{(async()=>{s(!0);const oe=er(At(De,"salesV2"),ur("date",">=",t),ur("date","<=",r)),L=await Lt(oe),Ae=[];L.forEach(S=>{const O=S.data(),U=O.date??"";if(Array.isArray(O.items)&&O.items.length>0){O.items.forEach((q,ae)=>{const fe=String(q.productName??"(sin nombre)"),Ue=Number(q.qty??0),Ze=Number(q.lineFinal??0)||Math.max(0,Number(q.unitPrice||0)*Ue-Number(q.discount||0));Ae.push({id:`${S.id}#${ae}`,date:U,productName:fe,quantity:Ue,amount:Ze,allocations:Array.isArray(q.allocations)?q.allocations:O.allocations,avgUnitCost:Number(q.avgUnitCost??O.avgUnitCost??0),measurement:q.measurement??O.measurement??"",type:O.type??"CONTADO"})});return}Ae.push({id:S.id,date:U,productName:O.productName??"(sin nombre)",quantity:Number(O.quantity??0),amount:Number(O.amount??O.amountCharged??0),allocations:Array.isArray(O.allocations)?O.allocations:[],avgUnitCost:Number(O.avgUnitCost??0),measurement:O.measurement??"",type:O.type??"CONTADO"})}),l(Ae);const Ee=er(At(De,"expenses"),ur("date",">=",t),ur("date","<=",r)),Oe=await Lt(Ee),Be=[];Oe.forEach(S=>{const O=S.data();Be.push({id:S.id,date:O.date??"",category:O.category??"(sin categora)",description:O.description??"",amount:Number(O.amount??0),status:O.status??"PAGADO",createdAt:O.createdAt})}),u(Be),s(!1)})()},[t,r,I]),x.useMemo(()=>{const X=o.reduce((Oe,Be)=>Oe+(Be.amount||0),0);let oe=0;o.forEach(Oe=>{var Be;(Be=Oe.allocations)!=null&&Be.length?oe+=Oe.allocations.reduce((S,O)=>S+Number(O.lineCost||0),0):Oe.avgUnitCost&&Oe.quantity&&(oe+=Number(Oe.avgUnitCost)*Number(Oe.quantity))});const L=X-oe,Ae=c.reduce((Oe,Be)=>Oe+(Be.amount||0),0),Ee=L-Ae;return{revenue:X,cogsReal:oe,grossProfit:L,expensesSum:Ae,netProfit:Ee}},[o,c]);const Ge=x.useMemo(()=>we?o.filter(X=>(X.productName||"")===we):o,[o,we]),ft=x.useMemo(()=>{const X=Ge.reduce((Oe,Be)=>Oe+(Be.amount||0),0);let oe=0;Ge.forEach(Oe=>{var Be;(Be=Oe.allocations)!=null&&Be.length?oe+=Oe.allocations.reduce((S,O)=>S+Number(O.lineCost||0),0):Oe.avgUnitCost&&Oe.quantity&&(oe+=Number(Oe.avgUnitCost)*Number(Oe.quantity))});const L=X-oe,Ae=c.reduce((Oe,Be)=>Oe+(Be.amount||0),0),Ee=L-Ae;return{revenue:X,cogsReal:oe,grossProfit:L,expensesSum:Ae,netProfit:Ee}},[Ge,c]),ht=x.useMemo(()=>{const X=Ge.filter(Be=>Be.type==="CONTADO"),oe=X.reduce((Be,S)=>Be+(S.amount||0),0);let L=0;X.forEach(Be=>{var S;(S=Be.allocations)!=null&&S.length?L+=Be.allocations.reduce((O,U)=>O+Number(U.lineCost||0),0):Be.avgUnitCost&&Be.quantity&&(L+=Number(Be.avgUnitCost)*Number(Be.quantity))});const Ae=oe-L,Ee=c.reduce((Be,S)=>Be+(S.amount||0),0),Oe=Ae-Ee;return{revenue:oe,cogsReal:L,grossProfit:Ae,expensesSum:Ee,netProfit:Oe}},[Ge,c]),xt=x.useMemo(()=>{const X=Ge.filter(Ee=>Ee.type==="CREDITO"),oe=X.reduce((Ee,Oe)=>Ee+(Oe.amount||0),0);let L=0;X.forEach(Ee=>{var Oe;(Oe=Ee.allocations)!=null&&Oe.length?L+=Ee.allocations.reduce((Be,S)=>Be+Number(S.lineCost||0),0):Ee.avgUnitCost&&Ee.quantity&&(L+=Number(Ee.avgUnitCost)*Number(Ee.quantity))});const Ae=oe-L;return{revenue:oe,cogsReal:L,grossProfit:Ae}},[Ge]),jt=X=>String(X??"").toLowerCase().trim(),kt=X=>Number(X.qty??X.quantity??0),wt=X=>["lb","lbs","libra","libras"].includes(jt(X)),Ve=X=>["unidad","unidades","ud","uds","pieza","piezas"].includes(jt(X)),Pe=X=>X?typeof X=="string"?X:X!=null&&X.toDate?jr(X.toDate(),"yyyy-MM-dd"):"":"";x.useEffect(()=>{(async()=>{h(!0);try{const oe=await Lt(At(De,"customers_pollo")),L={};oe.forEach(St=>{const Zt=St.data();L[St.id]=String(Zt.name??"(sin nombre)")});const Ae=await Lt(At(De,"ar_movements_pollo")),Ee={},Oe={},Be={},S={},O={},U=new Set,q={},ae={};let fe=0;Ae.forEach(St=>{var dn,Vn,an;const Zt=St.data(),Er=String(Zt.customerId??"").trim();if(!Er)return;const Nr=Number(Zt.amount??0);Ee[Er]=(Ee[Er]||0)+Nr;const Dr=String(Zt.type??"").toUpperCase(),nn=String(Zt.debtStatus??Zt.creditStatus??Zt.cycleStatus??Zt.status??"").toUpperCase().trim(),pn=["PAGADA","PAGADO","CERRADA","CERRADO","LIQUIDADA","LIQUIDADO"].includes(nn),Yr=Zt.createdAt??null;if(Dr==="ABONO"){fe+=Math.abs(Nr);const Je=(dn=Zt==null?void 0:Zt.ref)!=null&&dn.saleId?String(Zt.ref.saleId):"";Je?(q[Je]=(q[Je]||0)+Math.abs(Nr),U.add(Je)):ae[Er]=(ae[Er]||0)+Math.abs(Nr);const Bt=Be[Er],Ft=!(Bt!=null&&Bt.ts)||(Yr!=null&&Yr.toDate&&((Vn=Bt.ts)!=null&&Vn.toDate)?Yr.toDate()>Bt.ts.toDate():!1);(!Bt||Ft)&&(Be[Er]={amount:Math.abs(Nr),date:Zt.date??"",ts:Yr})}if(Dr==="CARGO"){const Je=(an=Zt==null?void 0:Zt.ref)!=null&&an.saleId?String(Zt.ref.saleId):"";Je&&(S[Er]||(S[Er]=new Set),S[Er].add(Je),pn||(O[Er]||(O[Er]=new Set),O[Er].add(Je)),U.add(Je)),pn||(Oe[Er]=(Oe[Er]||0)+Math.abs(Nr))}});const Ue=new Map;await Promise.all(Array.from(U).map(async St=>{const Zt=await ei(Yt(De,"salesV2",St));Zt.exists()&&Ue.set(St,Zt.data())}));let Ze=0;const lt=St=>{const Zt=Number(St.qty??St.quantity??0);return Number(St.lineFinal??0)||Math.max(0,Number(St.unitPrice||0)*Zt-Number(St.discount||0))},Qe=St=>{if(Array.isArray(St.items)&&St.items.length>0){let Dr=0,nn=0;return St.items.forEach(pn=>{const Yr=Number(pn.qty??pn.quantity??0);if(Dr+=lt(pn),Array.isArray(pn.allocations)&&pn.allocations.length>0)nn+=pn.allocations.reduce((dn,Vn)=>dn+Number(Vn.lineCost||0),0);else{const dn=Number(pn.avgUnitCost??St.avgUnitCost??0);nn+=dn*Yr}}),{total:Dr,cogs:nn}}const Zt=Number(St.quantity??0),Er=Number(St.amount??St.amountCharged??0)||0;let Nr=0;return Array.isArray(St.allocations)&&St.allocations.length>0?Nr=St.allocations.reduce((Dr,nn)=>Dr+Number(nn.lineCost||0),0):St.avgUnitCost&&(Nr=Number(St.avgUnitCost)*Zt),{total:Er,cogs:Nr}},tt=new Map;Ue.forEach((St,Zt)=>{const{total:Er,cogs:Nr}=Qe(St);tt.set(Zt,{total:Er,cogs:Nr,grossProfit:Er-Nr})});const ut={},Pt={};Object.keys(q).forEach(St=>{const Zt=tt.get(St);if(!(Zt!=null&&Zt.total))return;const Er=Number(q[St]||0);Pt[St]=Er;const Nr=Math.min(1,Er/Zt.total),Dr=Zt.grossProfit*Nr;ut[St]=Dr,Ze+=Dr}),Object.keys(ae).forEach(St=>{const Zt=S[St];if(!Zt||Zt.size===0)return;let Er=0,Nr=0,Dr=0,nn=0;Zt.forEach(an=>{const Je=tt.get(an);Je&&(Er+=Je.total,Nr+=Je.grossProfit,Pt[an]&&(Dr+=Math.min(Je.total,Pt[an])),nn+=ut[an]||0)});const pn=Math.max(0,Er-Dr),Yr=Math.max(0,Nr-nn);if(!pn||!Yr)return;const dn=Number(ae[St]||0),Vn=Math.min(1,dn/pn);Ze+=Yr*Vn});const Ct=[];Object.keys(Ee).forEach(St=>{const Zt=Number(Ee[St]||0);if(Zt<=0)return;const Er=new Map;let Nr=0,Dr=0,nn="";(O[St]||new Set).forEach(Vn=>{const an=Ue.get(Vn);if(!an)return;const Je=String(an.date??"");Je&&(!nn||Je>nn)&&(nn=Je),(Array.isArray(an.items)&&an.items.length>0?an.items:[{productName:an.productName,qty:an.quantity,unitPrice:an.unitPrice,discount:an.discount,lineFinal:an.amount??an.amountCharged,measurement:an.measurement}]).forEach(Ft=>{const hr=String(Ft.productName??"(sin nombre)"),dr=Number(Ft.qty??Ft.quantity??0),lr=String(Ft.measurement??""),dt=Number(Ft.lineFinal??0)||Math.max(0,Number(Ft.unitPrice||0)*dr-Number(Ft.discount||0));wt(lr)?Nr+=dr:Dr+=dr;const Et=`${hr}||${lr}`,bt=Er.get(Et)||{productName:hr,qty:0,amount:0,measurement:lr};bt.qty+=dr,bt.amount+=dt,Er.set(Et,bt)})});const Yr=Be[St],dn=Number(Oe[St]||0);Ct.push({customerId:St,name:L[St]||"(sin nombre)",balance:Zt,globalBalance:dn>0?dn:Zt,lbs:Nr,units:Dr,lastPaymentAmount:Number((Yr==null?void 0:Yr.amount)||0),lastSaleDate:nn||"",lastPaymentDate:Pe((Yr==null?void 0:Yr.ts)||(Yr==null?void 0:Yr.date)),products:Array.from(Er.values()).sort((Vn,an)=>Vn.productName.localeCompare(an.productName))})});const It=Ct.filter(St=>St.products.length);It.sort((St,Zt)=>Zt.balance-St.balance),f(It),v(fe),b(Ze)}catch(oe){console.error("Error cargando saldos pendientes:",oe),f([]),v(0)}finally{h(!1)}})()},[I]),x.useEffect(()=>{(async()=>{try{const oe=await Lt(er(At(De,"inventory_batches"))),L=dS(t,"yyyy-MM-dd",new Date),Ae=dS(r,"yyyy-MM-dd",new Date),Ee=jr(wd(L),"yyyy-MM-dd"),Oe=jr(bd(Ae),"yyyy-MM-dd"),Be={};oe.forEach(S=>{var Ze;const O=S.data(),U=String(O.productName??"(sin nombre)"),q=Number(O.quantity??0),ae=Number(O.remaining??0),fe=(Ze=O==null?void 0:O.date)!=null&&Ze.toDate?jr(O.date.toDate(),"yyyy-MM-dd"):String((O==null?void 0:O.date)??(O==null?void 0:O.createdAt)??""),Ue=fe&&fe>=Ee&&fe<=Oe;Be[U]||(Be[U]={incomingQty:0,remainingQty:0}),Ue&&(Be[U].incomingQty+=q),Be[U].remainingQty+=ae}),P(Be)}catch(oe){console.error("Error cargando inventario:",oe),P({})}})()},[I,t,r]),x.useMemo(()=>o.reduce((X,oe)=>wt(oe.measurement)?X+kt(oe):X,0),[o]),x.useMemo(()=>Ge.reduce((X,oe)=>wt(oe.measurement)?X+kt(oe):X,0),[Ge]);const be=x.useMemo(()=>Ge.filter(X=>X.type==="CONTADO"),[Ge]),ce=x.useMemo(()=>Ge.filter(X=>X.type==="CREDITO"),[Ge]),te=x.useMemo(()=>be.reduce((X,oe)=>X+(oe.amount||0),0),[be]),Ne=x.useMemo(()=>ce.reduce((X,oe)=>X+(oe.amount||0),0),[ce]),Re=x.useMemo(()=>d.reduce((X,oe)=>X+Number(oe.balance||0),0),[d]),ye=x.useMemo(()=>ht.revenue,[ht.revenue]),Xe=x.useMemo(()=>te,[te]),mt=x.useMemo(()=>te+g,[te,g]),rt=x.useMemo(()=>ht.grossProfit+y,[ht.grossProfit,y]),ue=x.useMemo(()=>ht.netProfit+y,[ht.netProfit,y]),_e=x.useMemo(()=>be.reduce((X,oe)=>wt(oe.measurement)?X+kt(oe):X,0),[be]),We=x.useMemo(()=>ce.reduce((X,oe)=>wt(oe.measurement)?X+kt(oe):X,0),[ce]);x.useMemo(()=>o.reduce((X,oe)=>Ve(oe.measurement)?X+kt(oe):X,0),[o]),x.useMemo(()=>Ge.reduce((X,oe)=>Ve(oe.measurement)?X+kt(oe):X,0),[Ge]);const ot=x.useMemo(()=>be.reduce((X,oe)=>Ve(oe.measurement)?X+kt(oe):X,0),[be]),Ce=x.useMemo(()=>ce.reduce((X,oe)=>Ve(oe.measurement)?X+kt(oe):X,0),[ce]),$e=x.useMemo(()=>Array.from(new Set(o.map(X=>X.productName||"(sin nombre)"))).sort(),[o]),gt=x.useMemo(()=>{var oe;const X=new Map;for(const L of Ge){const Ae=L.productName||"(sin nombre)";X.has(Ae)||X.set(Ae,{productName:Ae,units:0,revenue:0,cogs:0,profit:0,firstDate:L.date||"",lastDate:L.date||""});const Ee=X.get(Ae);Ee.units+=Number(L.quantity||0),Ee.revenue+=Number(L.amount||0),(!Ee.firstDate||L.date<(Ee.firstDate||L.date))&&(Ee.firstDate=L.date),(!Ee.lastDate||L.date>(Ee.lastDate||L.date))&&(Ee.lastDate=L.date);let Oe=0;(oe=L.allocations)!=null&&oe.length?Oe=L.allocations.reduce((Be,S)=>Be+Number(S.lineCost||0),0):L.avgUnitCost&&(Oe=Number(L.avgUnitCost)*Number(L.quantity||0)),Ee.cogs+=Oe,Ee.profit=Ee.revenue-Ee.cogs}return Array.from(X.values()).sort((L,Ae)=>L.productName.localeCompare(Ae.productName))},[Ge]),Kt=x.useMemo(()=>[...gt].sort((X,oe)=>oe.units-X.units).slice(0,3).map((X,oe)=>({idx:oe+1,name:X.productName,units:X.units})),[gt]),Ut=X=>k(oe=>({...oe,[X]:!oe[X]})),Jt=X=>R(oe=>({...oe,[X]:!oe[X]})),it=()=>{const X=new $r({unit:"pt",format:"a4"}),oe="Dashboard Financiero",L=`Rango: ${t} a ${r}`,Ae=we?`Producto: ${we}`:"Producto: Todos";X.setFontSize(16),X.text(oe,40,40),X.setFontSize(10),X.text(L,40,58),X.text(Ae,40,72);let Ee=90;const Oe=()=>{var S;Ee=(S=X.lastAutoTable)!=null&&S.finalY?X.lastAutoTable.finalY+18:Ee+18},Be=(S,O)=>{O.length&&(X.setFontSize(11),X.text(S,40,Ee),Ee+=12,j0(X,{startY:Ee,head:[["KPI","Valor"]],body:O,styles:{fontSize:9},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),Oe())};Be("KPIs Generales",[["Ventas (rango)",Lr(ft.revenue)],["Costo",Lr(ft.cogsReal)],["Utilidad Bruta",Lr(ft.grossProfit)],["Gastos",Lr(ft.expensesSum)],["Utilidad Neta",Lr(ft.netProfit)]]),Be("KPIs Cash",[["Ventas Cash",Lr(ye)],["Costo Cash",Lr(ht.cogsReal)],["Utilidad Bruta Cash",Lr(ht.grossProfit)]]),Be("KPIs Crdito",[["Ventas Crdito",Lr(xt.revenue)],["Costo Crdito",Lr(xt.cogsReal)],["Utilidad Bruta Crdito",Lr(xt.grossProfit)]]),Be("Fondos y Utilidades",[["CxC",Lr(Re)],["Recaudacin (Abonos)",Lr(g)],["Recolectado Cash + Abonos",Lr(mt)],["Utilidad Neta Crdito (Caja)",Lr(y)],["Utilidad Bruta Cash + Crdito",Lr(rt)],["Gastos",Lr(ht.expensesSum)],["Utilidad Neta Cash + Crdito",Lr(ue)]]),Be("KPIs de Volumen y Ventas",[["Ventas Cash",Lr(Xe)],["Ventas Crdito",Lr(Ne)],["Libras Cash",Yn(_e)],["Libras Crdito",Yn(We)],["Libras Cash + Crdito",Yn(_e+We)],["Unidades Cash",Yn(ot)],["Unidades Crdito",Yn(Ce)],["Unidades Cash + Crdito",Yn(ot+Ce)]]),Kt.length>0&&(X.setFontSize(11),X.text("Top productos por unidades",40,Ee),Ee+=12,j0(X,{startY:Ee,head:[["#","Producto","Cantidad"]],body:Kt.map(S=>[String(S.idx),S.name,Yn(S.units)]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),Oe()),j0(X,{startY:Ee,head:[["Cliente","Libras","Unidades","Saldo Global","ltimo abono","Saldo pendiente","Fecha ult. abono"]],body:d.map(S=>[S.name,Yn(S.lbs),Yn(S.units),Lr(S.globalBalance),Lr(S.lastPaymentAmount),Lr(S.balance),S.lastPaymentDate||""]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]},didDrawPage:S=>{S.pageNumber>1&&(X.setFontSize(10),X.text(oe,40,30))}}),Oe(),j0(X,{startY:Ee,head:[["Producto","Ingresado","Disponibilidad","Fechas","Cantidad","Venta","Costo","Utilidad"]],body:gt.map(S=>{var O,U;return[S.productName,Yn(((O=w[S.productName])==null?void 0:O.incomingQty)||0),Yn(((U=w[S.productName])==null?void 0:U.remainingQty)||0),S.firstDate&&S.lastDate?S.firstDate===S.lastDate?S.firstDate:`${S.firstDate}  ${S.lastDate}`:"",Yn(S.units),Lr(S.revenue),Lr(S.cogs),Lr(S.profit)]}),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),Oe(),j0(X,{startY:Ee,head:[["Fecha","Categora","Descripcin","Monto","Estado"]],body:c.map(S=>[S.date,S.category,S.description||"",Lr(S.amount),S.status||""]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),X.save(`dashboard_${t}_a_${r}.pdf`)};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Dashboard Financiero"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:it,className:"px-3 py-2 rounded-lg text-sm bg-gray-900 text-white hover:bg-black",children:"Exportar PDF"}),i.jsx(xc,{onClick:E,loading:a})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:t,onChange:X=>e(X.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:r,onChange:X=>n(X.target.value)})]})]}),a?i.jsx("p",{children:"Cargando"}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:V,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Kpi Financiero"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Ventas: ",i.jsx("b",{children:Lr(ft.revenue)}),"  Utilidad Neta:"," ",i.jsx("b",{children:Lr(ft.netProfit)})]})]}),i.jsx("div",{className:"text-gray-500",children:je?"Cerrar":"Ver"})]}),je&&i.jsxs("div",{className:"mt-3",children:[i.jsx("div",{className:"flex gap-2 mb-2 items-center",children:i.jsxs("select",{className:"w-full border rounded px-2 py-2 text-sm",value:we,onChange:X=>Le(X.target.value),children:[i.jsx("option",{value:"",children:"Todos los productos"}),$e.map(X=>i.jsx("option",{value:X,children:X},X))]})}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"rounded-3xl bg-white shadow-xl border border-gray-100 p-3 sm:p-4 space-y-3",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between text-left",onClick:re,children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm text-gray-800",children:"Ventas cash - Credito"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Resumen"})]}),i.jsx("span",{className:"text-xs text-gray-500",children:J?"Cerrar":"Ver"})]}),J&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[i.jsx(os,{title:"Ventas",subtitle:"Ventas cash",value:Lr(ye),valueClass:"text-[#1E4D2B]"}),i.jsx(os,{title:"Costo",value:Lr(ht.cogsReal)}),i.jsx(os,{title:"Utilidad Bruta Cash",value:Lr(ht.grossProfit),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[i.jsx(os,{title:"Ventas Crdito",value:Lr(xt.revenue)}),i.jsx(os,{title:"Costo",value:Lr(xt.cogsReal),negative:!0}),i.jsx(os,{title:"Utilidad Bruta Crdito",value:Lr(xt.grossProfit),positive:!0})]})]})]}),i.jsxs("div",{className:"rounded-3xl bg-white shadow-xl border border-gray-100 p-3 sm:p-4 space-y-3",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between text-left",onClick:Fe,children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm text-gray-800",children:"Fondos"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Liquidez"})]}),i.jsx("span",{className:"text-xs text-gray-500",children:M?"Cerrar":"Ver"})]}),M&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[i.jsx(os,{title:"CxC",value:Lr(Re)}),i.jsx(os,{title:"Recaudacin (Abonos)",value:Lr(g)}),i.jsx(os,{title:"Recolectado Cash + Abonos",value:Lr(mt),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx(os,{title:"Utilidad Neta Crdito (Caja)",value:Lr(y),valueClass:"text-[#BF5700]"}),i.jsx(os,{title:"Utilidad Bruta Cash + Crdito",value:Lr(rt),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx(os,{title:"Gastos",value:Lr(ht.expensesSum),negative:!0}),i.jsx(os,{title:"Utilidad Neta Cash + Crdito",value:Lr(ue),positive:!0})]})]})]}),i.jsxs("div",{className:"rounded-3xl bg-white shadow-xl border border-gray-100 p-3 sm:p-4 space-y-3",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between text-left",onClick:de,children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm text-gray-800",children:"Detalles"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Mtricas adicionales"})]}),i.jsx("span",{className:"text-xs text-gray-500",children:ne?"Cerrar":"Ver"})]}),ne&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(Il,{title:"Ventas Cash",value:Lr(Xe)}),i.jsx(Il,{title:"Ventas Crdito",value:Lr(Ne)}),i.jsx(Il,{title:"Libras Cash",value:Yn(_e)}),i.jsx(Il,{title:"Libras Crdito",value:Yn(We)}),i.jsx(Il,{title:"Unidades Cash",value:Yn(ot)}),i.jsx(Il,{title:"Unidades Crdito",value:Yn(Ce)})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[i.jsx(Il,{title:"Libras Cash + Credito",value:Yn(_e+We)}),i.jsx(Il,{title:"Unidades Cash + Credito",value:Yn(ot+Ce)}),i.jsx(GV,{title:"Productos ms vendidos",items:Kt.map(X=>({key:`${X.idx}`,label:`${X.idx}. ${X.name}`,value:`(${Yn(X.units)})`}))})]})]})]})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(os,{title:"Ventas Cash",value:Lr(ye),positive:!0}),i.jsx(os,{title:"Costo",value:Lr(ht.cogsReal),negative:!0}),i.jsx(os,{title:"Utilidad Bruta Cash",value:Lr(ht.grossProfit),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(os,{title:"Ventas Crdito",value:Lr(xt.revenue),positive:!0}),i.jsx(os,{title:"Costo",value:Lr(xt.cogsReal),negative:!0}),i.jsx(os,{title:"Utilidad Bruta Crdito",value:Lr(xt.grossProfit),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(os,{title:"CxC",value:Lr(Re),negative:!0}),i.jsx(os,{title:"Recaudacin (Abonos)",value:Lr(g),positive:!0}),i.jsx(os,{title:"Recolectado Cash + Abonos",value:Lr(mt),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-4 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(os,{title:"Utilidad Neta Crdito (Caja)",value:Lr(y),valueClass:"text-[#BF5700]"}),i.jsx(os,{title:"Utilidad Bruta Cash + Crdito",value:Lr(rt),positive:!0}),i.jsx(os,{title:"Gastos",value:Lr(ht.expensesSum),negative:!0}),i.jsx(os,{title:"Utilidad Neta Cash + Crdito",value:Lr(ue),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(Il,{title:"Ventas Cash",value:Lr(Xe)}),i.jsx(Il,{title:"Ventas Crdito",value:Lr(Ne)}),i.jsx(Il,{title:"Libras Cash",value:Yn(_e)}),i.jsx(Il,{title:"Libras Crdito",value:Yn(We)}),i.jsx(Il,{title:"Unidades Cash",value:Yn(ot)}),i.jsx(Il,{title:"Unidades Crdito",value:Yn(Ce)})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[i.jsx(Il,{title:"Libras Cash + Credito",value:Yn(_e+We)}),i.jsx(Il,{title:"Unidades Cash + Credito",value:Yn(ot+Ce)}),i.jsx(GV,{title:"Productos ms vendidos",items:Kt.map(X=>({key:`${X.idx}`,label:`${X.idx}. ${X.name}`,value:`(${Yn(X.units)})`}))})]})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:qe,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsx("div",{className:"font-semibold",children:"Saldos pendientes"}),i.jsx("div",{className:"text-gray-500",children:D?"Cerrar":"Ver"})]}),D&&i.jsx("div",{className:"border rounded-2xl p-3 sm:p-4 bg-gray-50 mt-3",children:A?i.jsx("div",{className:"text-sm text-gray-600",children:"Cargando saldos"}):d.length===0?i.jsx("div",{className:"text-sm text-gray-600",children:"Sin saldos pendientes."}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-white",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Libras"}),i.jsx("th",{className:"border p-2",children:"Unidades"}),i.jsx("th",{className:"border p-2",children:"Saldo Global"}),i.jsx("th",{className:"border p-2",children:"ltimo abono"}),i.jsx("th",{className:"border p-2",children:"Saldo pendiente"}),i.jsx("th",{className:"border p-2",children:"Fecha ult. abono"}),i.jsx("th",{className:"border p-2",children:"Ver"})]})}),i.jsx("tbody",{children:d.map(X=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1 text-left",children:X.name}),i.jsx("td",{className:"border p-1",children:Yn(X.lbs)}),i.jsx("td",{className:"border p-1",children:Yn(X.units)}),i.jsx("td",{className:"border p-1",children:Lr(X.globalBalance)}),i.jsx("td",{className:"border p-1",children:Lr(X.lastPaymentAmount)}),i.jsx("td",{className:"border p-1",children:Lr(X.balance)}),i.jsx("td",{className:"border p-1",children:X.lastPaymentDate||""}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",onClick:()=>p(X),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},X.customerId))})]})})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:ie,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsx("div",{className:"font-semibold",children:"Ventas y Gastos"}),i.jsx("div",{className:"text-gray-500",children:z?"Cerrar":"Ver"})]}),z&&i.jsxs("div",{className:"mt-3",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Ventas"}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Ingresado Lb/Un"}),i.jsx("th",{className:"border p-2",children:"Disponibilidad"}),i.jsx("th",{className:"border p-2",children:"Fecha Venta"}),i.jsx("th",{className:"border p-2",children:"Cantidad Lb/Un"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Costo"}),i.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),i.jsxs("tbody",{children:[gt.map(X=>{var oe,L;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:X.productName}),i.jsx("td",{className:"border p-1",children:Yn(((oe=w[X.productName])==null?void 0:oe.incomingQty)||0)}),i.jsx("td",{className:"border p-1",children:Yn(((L=w[X.productName])==null?void 0:L.remainingQty)||0)}),i.jsx("td",{className:"border p-1",children:X.firstDate&&X.lastDate?X.firstDate===X.lastDate?X.firstDate:`${X.firstDate}  ${X.lastDate}`:""}),i.jsx("td",{className:"border p-1",children:Yn(X.units)}),i.jsx("td",{className:"border p-1",children:Lr(X.revenue)}),i.jsx("td",{className:"border p-1",children:Lr(X.cogs)}),i.jsx("td",{className:`border p-1 ${X.profit>=0?"text-green-700":"text-red-700"}`,children:Lr(X.profit)})]},X.productName)}),gt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]})}),i.jsxs("div",{className:"md:hidden mb-6",children:[i.jsxs("button",{type:"button",onClick:pe,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Ventas por producto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[gt.length," productos"]})]}),i.jsx("div",{className:"text-gray-500",children:Y?"Cerrar":"Ver"})]}),Y&&i.jsx("div",{className:"space-y-2 mt-3",children:gt.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin datos en el rango seleccionado."}):gt.map(X=>{var Ae,Ee,Oe,Be;const oe=!!F[X.productName],L=X.firstDate&&X.lastDate?X.firstDate===X.lastDate?X.firstDate:`${X.firstDate}  ${X.lastDate}`:"";return i.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>Ut(X.productName),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:X.productName}),i.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Libras/Unidades"}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendidas: ",i.jsx("b",{children:Yn(X.units)}),"  Disponible:"," ",i.jsx("b",{className:((Ae=w[X.productName])==null?void 0:Ae.remainingQty)>0?"text-green-700":"text-red-700",children:Yn(((Ee=w[X.productName])==null?void 0:Ee.remainingQty)||0)})]})]}),i.jsx("div",{className:"text-gray-500 text-xs pt-0.10",children:oe?"Cerrar":"Ver"})]}),oe&&i.jsx("div",{className:"px-3 pb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(Lu,{label:"Lb/Un Ingresadas",value:Yn(((Oe=w[X.productName])==null?void 0:Oe.incomingQty)||0)}),i.jsx(Lu,{label:"Lb/Un Disponibles",value:Yn(((Be=w[X.productName])==null?void 0:Be.remainingQty)||0)}),i.jsx(Lu,{label:"Fechas Venta",value:L}),i.jsx(Lu,{label:"Lb/Un Vendidas",value:Yn(X.units)}),i.jsx(Lu,{label:"Facturado al costo",value:Lr(X.cogs)}),i.jsx(Lu,{label:"Monto Venta",value:Lr(X.revenue)}),i.jsx(Lu,{label:"Utilidad bruta",value:Lr(X.profit),valueClass:X.profit>=0?"text-green-700 font-semibold":"text-red-700 font-semibold"})]})})]},X.productName)})})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Categora"}),i.jsx("th",{className:"border p-2",children:"Descripcin"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Estado"})]})}),i.jsxs("tbody",{children:[c.map(X=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:X.date}),i.jsx("td",{className:"border p-1",children:X.category}),i.jsx("td",{className:"border p-1",children:X.description}),i.jsx("td",{className:"border p-1",children:Lr(X.amount)}),i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${X.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:X.status})})]},X.id)),c.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})}),i.jsxs("div",{className:"md:hidden mb-6",children:[i.jsxs("button",{type:"button",onClick:se,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Gastos del periodo"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[c.length," registros"]})]}),i.jsx("div",{className:"text-gray-500",children:he?"Cerrar":"Abrir"})]}),he&&i.jsx("div",{className:"space-y-2 mt-3",children:c.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin gastos en el rango seleccionado."}):c.map(X=>{const oe=!!B[X.id],L=X.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return i.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>Jt(X.id),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:X.category}),i.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] ${L}`,children:X.status})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[X.date,"  ",i.jsx("b",{children:Lr(X.amount)})]})]}),i.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:oe?"Cerrar":"Ver"})]}),oe&&i.jsx("div",{className:"px-3 pb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[i.jsx(Lu,{label:"Fecha",value:X.date}),i.jsx(Lu,{label:"Categora",value:X.category}),i.jsx(Lu,{label:"Descripcin",value:X.description||""}),i.jsx(Lu,{label:"Monto",value:Lr(X.amount)}),i.jsx(Lu,{label:"Estado",value:X.status||""})]})})]},X.id)})})]})]})]})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:m.name}),i.jsx("button",{type:"button",onClick:()=>p(null),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Libras/Unidades"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Fecha Venta"})]})}),i.jsx("tbody",{children:m.products.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"border p-2 text-center text-gray-500",children:"Sin productos asociados."})}):m.products.map(X=>i.jsxs("tr",{children:[i.jsx("td",{className:"border p-1",children:X.productName}),i.jsx("td",{className:"border p-1 text-center",children:Yn(X.qty)}),i.jsx("td",{className:"border p-1 text-center",children:Lr(X.amount)}),i.jsx("td",{className:"border p-1 text-center",children:m.lastSaleDate||""})]},`${X.productName}-${X.measurement}`))})]})})]})})]})}function os({title:t,value:e,positive:r,negative:n,valueClass:a,subtitle:s}){const o=a||(r?"text-[#568203]":n?"text-[#AB274F]":"");return i.jsxs("div",{className:"border rounded-2xl p-3 bg-white",children:[i.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),s?i.jsx("div",{className:"text-[11px] sm:text-[12px] text-gray-400",children:s}):null,i.jsx("div",{className:`text-[26px] sm:text-[30px] font-bold ${o}`,children:e})]})}function Il({title:t,value:e}){return i.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[i.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),i.jsx("div",{className:"text-[18px] sm:text-[20px] font-semibold",children:e})]})}function GV({title:t,items:e}){return i.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[i.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),i.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?i.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>i.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}function Lu({label:t,value:e,valueClass:r}){return i.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:t}),i.jsx("div",{className:`text-sm mt-0.5 ${r||""}`,children:e})]})}const kC=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],lx=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function f4e(){const{refreshKey:t,refresh:e}=vc(),[r,n]=x.useState(jr(wd(new Date),"yyyy-MM-dd")),[a,s]=x.useState(jr(bd(new Date),"yyyy-MM-dd")),[o,l]=x.useState(jr(new Date,"yyyy-MM-dd")),[c,u]=x.useState(""),[d,f]=x.useState(""),[A,h]=x.useState(0),[m,p]=x.useState("PENDIENTE"),[g,v]=x.useState(""),[y,b]=x.useState([]),[w,P]=x.useState(!0),[j,_]=x.useState(""),[I,E]=x.useState(null),[F,k]=x.useState(""),[B,R]=x.useState(""),[Y,me]=x.useState(""),[pe,he]=x.useState(0),[ge,se]=x.useState("PENDIENTE"),[je,Te]=x.useState(""),[D,K]=x.useState(!1),z=()=>K(de=>!de),[Q,J]=x.useState(null),ee=de=>J(we=>we===de?null:de);x.useEffect(()=>{(async()=>{P(!0),_("");try{const de=er(At(De,"expenses"),bn("date","desc")),we=await Lt(de),Le=[];we.forEach(Ge=>{const ft=Ge.data();Le.push({id:Ge.id,date:ft.date||jr(new Date,"yyyy-MM-dd"),category:ft.category||"",description:ft.description||"",amount:Number(ft.amount||0),status:ft.status||"PENDIENTE",notes:ft.notes||"",createdAt:ft.createdAt??mr.now()})}),b(Le)}catch(de){console.error(de),_(" Error al cargar gastos")}finally{P(!1)}})()},[t]);const M=x.useMemo(()=>y.filter(de=>!(r&&de.date<r||a&&de.date>a)),[y,r,a]),G=x.useMemo(()=>{const de=M.reduce((Ge,ft)=>Ge+(ft.amount||0),0),we=M.filter(Ge=>Ge.status==="PAGADO").reduce((Ge,ft)=>Ge+(ft.amount||0),0),Le=de-we;return{total:de,pagado:we,pendiente:Le}},[M]),ne=()=>{l(jr(new Date,"yyyy-MM-dd")),u(""),f(""),h(0),p("PENDIENTE"),v("")},ve=async de=>{if(de.preventDefault(),_(""),!c)return _("Selecciona una categora.");if(!d.trim())return _("Ingresa una descripcin.");if(!A||A<=0)return _("Ingresa un monto vlido.");try{const we={date:o,category:c,description:d.trim(),amount:Number(Number(A||0).toFixed(2)),status:m,notes:g||"",createdAt:mr.now()},Le=await Hn(At(De,"expenses"),we);b(Ge=>[{id:Le.id,...we},...Ge]),ne(),_(" Gasto registrado")}catch(we){console.error(we),_(" Error al guardar gasto")}},V=de=>{_(""),E(de.id),k(de.date),R(de.category||""),me(de.description||""),he(Number(de.amount||0)),se(de.status||"PENDIENTE"),Te(de.notes||"")},qe=()=>{E(null),k(""),R(""),me(""),he(0),se("PENDIENTE"),Te("")},ie=async()=>{if(I){if(!B)return _("Selecciona una categora.");if(!Y.trim())return _("Ingresa una descripcin.");if(!pe||pe<=0)return _("Ingresa un monto vlido.");try{const de={date:F,category:B,description:Y.trim(),amount:Number(Number(pe||0).toFixed(2)),status:ge,notes:je||""};await Cn(Yt(De,"expenses",I),de),b(we=>we.map(Le=>Le.id===I?{...Le,...de}:Le)),qe(),_(" Gasto actualizado")}catch(de){console.error(de),_(" Error al actualizar gasto")}}},re=async de=>{if(confirm(`Eliminar el gasto "${de.description}"?`))try{await Dn(Yt(De,"expenses",de.id)),b(Le=>Le.filter(Ge=>Ge.id!==de.id)),_(" Gasto borrado")}catch(Le){console.error(Le),_(" Error al borrar gasto")}},Fe=de=>de==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return i.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Gastos (Pollo)"}),i.jsx(xc,{onClick:e,loading:w})]}),i.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:de=>n(de.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:de=>s(de.target.value)})]})]}),i.jsxs("div",{className:"sm:ml-auto text-sm bg-gray-50 border rounded-xl p-3",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",lx(G.total)]}),i.jsxs("div",{children:["Pagado: ",lx(G.pagado)]}),i.jsxs("div",{children:["Pendiente: ",lx(G.pendiente)]})]})]}),i.jsxs("div",{className:"md:hidden mb-4",children:[i.jsxs("button",{type:"button",onClick:z,className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white border rounded-2xl",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Crear gasto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha: ",o,"  Monto: ",A===0?"":lx(A)]})]}),i.jsx("div",{className:"text-gray-500",children:D?"":""})]}),D&&i.jsxs("form",{onSubmit:ve,className:"mt-3 bg-white p-4 rounded-2xl shadow-2xl border grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:o,onChange:de=>l(de.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:de=>u(de.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),kC.map(de=>i.jsx("option",{value:de,children:de},de))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:de=>f(de.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:A===0?"":A,onChange:de=>{const we=String(de.target.value||"").replace(",","."),Le=parseFloat(we);h(Number.isFinite(Le)?Math.max(0,Le):0)},placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:de=>p(de.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:de=>v(de.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),i.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:ne,children:"Limpiar"})]})]})]}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("form",{onSubmit:ve,className:"bg-white p-4 rounded-2xl shadow-2xl border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:o,onChange:de=>l(de.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:de=>u(de.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),kC.map(de=>i.jsx("option",{value:de,children:de},de))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:de=>f(de.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:A===0?"":A,onChange:de=>{const we=String(de.target.value||"").replace(",","."),Le=parseFloat(we);h(Number.isFinite(Le)?Math.max(0,Le):0)},placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:de=>p(de.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:de=>v(de.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),i.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:ne,children:"Limpiar"})]})]})}),i.jsx("div",{className:"block md:hidden space-y-3",children:w?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):M.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin gastos en el rango seleccionado."}):M.map(de=>{const we=Q===de.id,Le=I===de.id;return i.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full text-left px-3 py-3 flex items-start justify-between bg-white",onClick:()=>ee(de.id),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:de.description}),i.jsxs("div",{className:"text-xs text-gray-500",children:[de.category||"","  ",de.date]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-bold",children:lx(de.amount)}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Fe(de.status)}`,children:de.status})]})]}),we&&i.jsxs("div",{className:"p-3",children:[i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:de.notes?de.notes:""}),Le?i.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm",children:[i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:F,onChange:Ge=>k(Ge.target.value)}),i.jsxs("select",{className:"w-full border p-2 rounded",value:B,onChange:Ge=>R(Ge.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),kC.map(Ge=>i.jsx("option",{value:Ge,children:Ge},Ge))]}),i.jsx("input",{className:"w-full border p-2 rounded",value:Y,onChange:Ge=>me(Ge.target.value)}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(pe)?"":pe,onChange:Ge=>{const ft=String(Ge.target.value||"").replace(",","."),ht=parseFloat(ft);he(Number.isFinite(ht)?Math.max(0,ht):0)}}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ge,onChange:Ge=>se(Ge.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:je,onChange:Ge=>Te(Ge.target.value),maxLength:500}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:qe,children:"Cancelar"})]})]}):i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>V(de),children:"Editar"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>re(de),children:"Borrar"})]})]})]},de.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded-2xl shadow-2xl border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:w?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):M.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):M.map(de=>{const we=I===de.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:we?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:F,onChange:Le=>k(Le.target.value)}):de.date}),i.jsx("td",{className:"p-2 border",children:we?i.jsxs("select",{className:"w-full border p-1 rounded",value:B,onChange:Le=>R(Le.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),kC.map(Le=>i.jsx("option",{value:Le,children:Le},Le))]}):de.category||""}),i.jsx("td",{className:"p-2 border",children:we?i.jsx("input",{className:"w-full border p-1 rounded",value:Y,onChange:Le=>me(Le.target.value)}):i.jsx("span",{title:de.description,children:de.description.length>45?de.description.slice(0,45)+"":de.description})}),i.jsx("td",{className:"p-2 border",children:we?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(pe)?"":pe,onChange:Le=>{const Ge=String(Le.target.value||"").replace(",","."),ft=parseFloat(Ge);he(Number.isFinite(ft)?Math.max(0,ft):0)}}):lx(de.amount)}),i.jsx("td",{className:"p-2 border",children:we?i.jsxs("select",{className:"w-full border p-1 rounded",value:ge,onChange:Le=>se(Le.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Fe(de.status)}`,children:de.status})}),i.jsx("td",{className:"p-2 border",children:we?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:je,onChange:Le=>Te(Le.target.value),maxLength:500}):i.jsx("span",{title:de.notes||"",children:(de.notes||"").length>45?(de.notes||"").slice(0,45)+"":de.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:we?i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:qe,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>V(de),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>re(de),children:"Borrar"})]})})})]},de.id)})})]})}),j&&i.jsx("p",{className:"mt-2 text-sm",children:j})]})}function jS(t){return(t||"").trim().toLowerCase()}async function Hre(){const t=await Lt(At(De,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),a=jS(n.name??n.productName);a&&e.set(a,r.id)}),e}async function h4e(t=!1){const e=await Hre(),r=await Lt(At(De,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const a of r.docs){n.checked++;const s=a.data(),o=jS(s.productName);if(!o){n.missingName++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"missingName"});continue}const l=e.get(o);if(!l){n.withoutMatch++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"withoutMatch"});continue}if(s.productId===l){n.alreadyOk++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"alreadyOk"});continue}t||await Cn(Yt(De,"inventory_batches",a.id),{productId:l}),n.fixed++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function A4e(t,e=!1){const r=jS(t),a=(await Hre()).get(r);if(!a)throw new Error(`No existe un producto activo con nombre "${t}".`);const s=await Lt(At(De,"inventory_batches"));let o=0;for(const l of s.docs){const c=l.data();jS(c.productName)===r&&c.productId!==a&&(e||await Cn(Yt(De,"inventory_batches",l.id),{productId:a}),o++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${o} lote(s)`),o}function m4e(){const[t,e]=x.useState(!1),[r,n]=x.useState(""),a=async()=>{try{e(!0),n("");const c=await h4e(!1);n(` Hecho. Revisados: ${c.checked}, Corregidos: ${c.fixed}, Ok: ${c.alreadyOk}, Sin nombre: ${c.missingName}, Sin match: ${c.withoutMatch}. (Mira consola para detalles)`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}},[s,o]=x.useState(""),l=async()=>{if(!s.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const c=await A4e(s.trim(),!1);n(` Hecho. Corregidos ${c} lote(s) para "${s}".`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}};return i.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[i.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",i.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),i.jsx("div",{className:"space-y-2",children:i.jsx("button",{onClick:a,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),i.jsx("hr",{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),i.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:s,onChange:c=>o(c.target.value)}),i.jsx("button",{onClick:l,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&i.jsx("p",{className:"text-sm",children:r})]})}const nu=t=>`C$${Number(t||0).toFixed(2)}`,cx=t=>Number(t||0).toFixed(3),p4e=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),A5=()=>{const t=new Date;return jr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},FC=()=>jr(new Date,"yyyy-MM-dd");function g4e({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=x.useState(A5()),[o,l]=x.useState(FC()),[c,u]=x.useState(""),d=x.useMemo(()=>{const ce=new Map;return n.forEach(te=>ce.set(te.productId,{id:te.productId,name:te.productName})),Array.from(ce.values()).sort((te,Ne)=>te.name.localeCompare(Ne.name))},[n]),f=x.useMemo(()=>n.filter(ce=>!(a&&ce.date<a||o&&ce.date>o||c&&ce.productId!==c)),[n,a,o,c]),[A,h]=x.useState(FC()),[m,p]=x.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[g,v]=x.useState(""),[y,b]=x.useState([]);x.useEffect(()=>{b(ce=>{const te=ce.filter(Ne=>f.some(Re=>Re.id===Ne));return te.length===0&&f.length>0?f.map(Ne=>Ne.id):te})},[f]);const[w,P]=x.useState([]),[j,_]=x.useState([]),[I,E]=x.useState(!1),[F,k]=x.useState(A5()),[B,R]=x.useState(FC());x.useEffect(()=>{(async()=>{try{E(!0);const ce=er(At(De,"expenses"),bn("date","desc")),te=await Lt(ce),Ne=[];te.forEach(Re=>{const ye=Re.data();Ne.push({id:Re.id,date:ye.date,description:ye.description,amount:Number(ye.amount||0)})}),P(Ne)}catch(ce){console.error(ce)}finally{E(!1)}})()},[]);const Y=x.useMemo(()=>w.filter(ce=>!(!ce.date||F&&ce.date<F||B&&ce.date>B)),[w,F,B]),[me,pe]=x.useState([]),[he,ge]=x.useState(!1),[se,je]=x.useState(""),[Te,D]=x.useState("DEBITO"),[K,z]=x.useState(""),Q=()=>{const ce=Number(K);!se.trim()||!isFinite(ce)||ce<=0||(pe(te=>[...te,{id:`${Date.now()}_${te.length+1}`,description:se.trim(),type:Te,amount:Number(ce.toFixed(2))}]),je(""),z(""))},[J,ee]=x.useState(null),[M,G]=x.useState(""),[ne,ve]=x.useState("DEBITO"),[V,qe]=x.useState(""),ie=ce=>{ee(ce.id),G(ce.description),ve(ce.type),qe(ce.amount.toFixed(2))},re=()=>{ee(null),G(""),ve("DEBITO"),qe("")},Fe=()=>{if(!J)return;const ce=Number(V);!isFinite(ce)||ce<=0||(pe(te=>te.map(Ne=>Ne.id===J?{...Ne,description:M.trim(),type:ne,amount:Number(ce.toFixed(2))}:Ne)),re())},de=ce=>{pe(te=>te.filter(Ne=>Ne.id!==ce)),J===ce&&re()},we=(ce,te)=>{b(Ne=>te?[...new Set([...Ne,ce])]:Ne.filter(Re=>Re!==ce))},Le=ce=>{b(ce?f.map(te=>te.id):[])},Ge=(ce,te)=>{_(Ne=>te?[...new Set([...Ne,ce])]:Ne.filter(Re=>Re!==ce))},ft=x.useMemo(()=>f.filter(ce=>y.includes(ce.id)),[f,y]),ht=x.useMemo(()=>me.filter(ce=>ce.type==="DEBITO").reduce((ce,te)=>ce+te.amount,0),[me]),xt=x.useMemo(()=>me.filter(ce=>ce.type==="CREDITO").reduce((ce,te)=>ce+te.amount,0),[me]),jt=x.useMemo(()=>{let ce=0,te=0,Ne=0,Re=0;for(const mt of ft){p4e(mt.unit)?ce+=Number(mt.quantity||0):te+=Number(mt.quantity||0);const rt=mt.expectedTotal??Number((Number(mt.quantity||0)*Number(mt.salePrice||0)).toFixed(2)),ue=mt.invoiceTotal!==void 0&&mt.invoiceTotal!==null?Number(mt.invoiceTotal):Number((Number(mt.quantity||0)*Number(mt.purchasePrice||0)).toFixed(2));Ne+=Number(rt||0),Re+=Number(ue||0)}const ye=Y.filter(mt=>j.includes(mt.id)).reduce((mt,rt)=>mt+Number(rt.amount||0),0),Xe=Ne-ye-ht+xt;return{totalLbs:ce,totalUnits:te,totalExpected:Number(Ne.toFixed(2)),totalInvoiced:Number(Re.toFixed(2)),totalGastos:Number(ye.toFixed(2)),debits:Number(ht.toFixed(2)),credits:Number(xt.toFixed(2)),finalAmount:Number(Xe.toFixed(2)),grossProfit:Number((Ne-Re).toFixed(2))}},[ft,Y,j,ht,xt]),[kt,wt]=x.useState(!1),[Ve,Pe]=x.useState(""),be=async()=>{if(Pe(""),ft.length===0){Pe("Selecciona al menos 1 lote pagado.");return}try{wt(!0);const ce={number:m.trim(),date:A,description:g.trim(),status:"PENDIENTE",createdAt:mr.now(),totalLbs:Number(cx(jt.totalLbs)),totalUnits:Number(cx(jt.totalUnits)),totalAmount:jt.totalExpected,invoiceTotal:jt.totalInvoiced,totalExpenses:jt.totalGastos,totalDebits:jt.debits,totalCredits:jt.credits,finalAmount:jt.finalAmount,batches:ft.map(te=>{var Ne;return{id:te.id,productId:te.productId,productName:te.productName,unit:te.unit,quantity:Number(cx(te.quantity)),salePrice:Number(Number(te.salePrice||0).toFixed(2)),purchasePrice:Number(Number(te.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(te.quantity||0)*Number(te.salePrice||0)).toFixed(2)),invoiceTotal:te.invoiceTotal!==void 0&&te.invoiceTotal!==null?Number(te.invoiceTotal):Number((Number(te.quantity||0)*Number(te.purchasePrice||0)).toFixed(2)),batchDate:te.date,paidAt:(Ne=te.paidAt)!=null&&Ne.toDate?jr(te.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:Y.filter(te=>j.includes(te.id)).map(te=>({id:te.id,date:te.date||null,description:te.description||"",amount:Number(Number(te.amount||0).toFixed(2))})),adjustments:me.map(te=>({id:te.id,description:te.description,type:te.type,amount:Number(te.amount.toFixed(2))}))};await Hn(At(De,"invoices"),ce),Pe(" Factura creada."),r()}catch(ce){console.error(ce),Pe(` Error al crear factura: ${(ce==null?void 0:ce.message)||"desconocido"}`)}finally{wt(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),i.jsx("button",{type:"button",onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:A,onChange:ce=>h(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:m,onChange:ce=>p(ce.target.value),placeholder:"FAC-001"})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:g,onChange:ce=>v(ce.target.value),placeholder:"Comentarios de la factura"})]})]}),i.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:i.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ce=>s(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:o,onChange:ce=>l(ce.target.value)})]}),i.jsxs("div",{className:"min-w-[220px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:c,onChange:ce=>u(ce.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),d.map(ce=>i.jsx("option",{value:ce.id,children:ce.name},ce.id))]})]}),i.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{s(A5()),l(FC()),u("")},children:"Quitar filtro"})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),i.jsxs("label",{className:"text-sm flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:f.length>0&&y.length===f.length,onChange:ce=>Le(ce.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),f.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):i.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha lote"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Cantidad"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),i.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),i.jsx("tbody",{children:f.map(ce=>{var Xe;const te=y.includes(ce.id),Ne=ce.expectedTotal??Number((Number(ce.quantity||0)*Number(ce.salePrice||0)).toFixed(2)),Re=ce.invoiceTotal!==void 0&&ce.invoiceTotal!==null?Number(ce.invoiceTotal):Number((Number(ce.quantity||0)*Number(ce.purchasePrice||0)).toFixed(2)),ye=Ne-Re;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:te,onChange:mt=>we(ce.id,mt.target.checked)})}),i.jsx("td",{className:"p-2 border",children:ce.date}),i.jsx("td",{className:"p-2 border",children:ce.productName}),i.jsx("td",{className:"p-2 border",children:(ce.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:cx(ce.quantity)}),i.jsx("td",{className:"p-2 border",children:nu(ce.salePrice)}),i.jsx("td",{className:"p-2 border",children:nu(Re)}),i.jsx("td",{className:"p-2 border",children:nu(Ne)}),i.jsx("td",{className:"p-2 border",children:nu(ye)}),i.jsx("td",{className:"p-2 border",children:(Xe=ce.paidAt)!=null&&Xe.toDate?jr(ce.paidAt.toDate(),"yyyy-MM-dd"):""})]},ce.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),I&&i.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),i.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:F,onChange:ce=>k(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:B,onChange:ce=>R(ce.target.value)})]})]})]}),Y.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):i.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:Y.map(ce=>{const te=j.includes(ce.id);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:te,onChange:Ne=>Ge(ce.id,Ne.target.checked)})}),i.jsx("td",{className:"p-2 border",children:ce.date||""}),i.jsx("td",{className:"p-2 border",children:ce.description||""}),i.jsx("td",{className:"p-2 border",children:nu(Number(ce.amount||0))})]},ce.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),i.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ge(!0),children:"Crear Cargo"})]}),me.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):i.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:me.map(ce=>{const te=J===ce.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:te?i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:M,onChange:Ne=>G(Ne.target.value)}):i.jsx("span",{title:ce.description,children:ce.description.length>60?`${ce.description.slice(0,60)}`:ce.description})}),i.jsx("td",{className:"p-2 border",children:te?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ne,onChange:Ne=>ve(Ne.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ce.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ce.type})}),i.jsx("td",{className:"p-2 border",children:te?i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:V,onChange:Ne=>qe(Ne.target.value)}):nu(ce.amount)}),i.jsx("td",{className:"p-2 border",children:te?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:Fe,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:re,children:"Cancelar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>de(ce.id),children:"Eliminar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>ie(ce),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>de(ce.id),children:"Eliminar"})]})})]},ce.id)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total libras: ",i.jsx("strong",{children:cx(jt.totalLbs)})]}),i.jsxs("div",{children:["Total unidades: ",i.jsx("strong",{children:cx(jt.totalUnits)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total facturado (costo):"," ",i.jsx("strong",{children:nu(jt.totalInvoiced)})]}),i.jsxs("div",{children:["Total esperado (ventas):"," ",i.jsx("strong",{children:nu(jt.totalExpected)})]}),i.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",i.jsx("strong",{children:nu(jt.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:nu(jt.totalGastos)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:nu(jt.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:nu(jt.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",i.jsx("span",{className:"text-blue-700",children:nu(jt.finalAmount)})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:kt,onClick:be,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:kt?"Creando":"Crear factura"}),i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Ve&&i.jsx("span",{className:"text-sm ml-2",children:Ve})]}),kt&&i.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),he&&i.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),i.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>ge(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:se,onChange:ce=>je(ce.target.value),placeholder:"Detalle del cargo"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Te,onChange:ce=>D(ce.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:K,onChange:ce=>z(ce.target.value),placeholder:"0.00"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Q,children:"Agregar"})})]})]})})]})}const Uu=t=>`C$ ${Number(t||0).toFixed(2)}`,Nc=t=>Number(t||0).toFixed(3),x4e=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function v4e(){const[t,e]=x.useState([]),[r,n]=x.useState(!0),[a,s]=x.useState(!1),[o,l]=x.useState(null),[c,u]=x.useState(jr(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[d,f]=x.useState(jr(new Date,"yyyy-MM-dd")),[A,h]=x.useState(""),[m,p]=x.useState(!1),{refreshKey:g,refresh:v}=vc(),[y,b]=x.useState(!1),w=()=>b(R=>!R),[P,j]=x.useState(null),_=R=>j(Y=>Y===R?null:R);x.useEffect(()=>{(async()=>{n(!0);const R=er(At(De,"inventory_batches"),ur("status","==","PAGADO"),bn("date","desc")),Y=await Lt(R),me=[];Y.forEach(pe=>{const he=pe.data(),ge=Number(he.quantity||0),se=Number(he.remaining||0),je=Number(he.purchasePrice||0),Te=Number(he.salePrice||0),D=Number((ge*je).toFixed(2)),K=Number((ge*Te).toFixed(2));me.push({id:pe.id,productId:he.productId,productName:he.productName,category:he.category,unit:he.unit,quantity:ge,remaining:se,purchasePrice:je,salePrice:Te,invoiceTotal:he.invoiceTotal!=null?Number(he.invoiceTotal):D,expectedTotal:he.expectedTotal!=null?Number(he.expectedTotal):K,date:he.date,status:he.status,paidAt:he.paidAt})}),e(me),n(!1)})()},[g]);const I=x.useMemo(()=>t.filter(R=>!(c&&R.date<c||d&&R.date>d||A&&R.productId!==A)),[t,c,d,A]),E=x.useMemo(()=>{let R=0,Y=0,me=0,pe=0,he=0,ge=0;for(const se of I)x4e(se.unit)?(R+=se.quantity,Y+=se.remaining):(me+=se.quantity,pe+=se.remaining),he+=Number(se.expectedTotal||0),ge+=Number(se.invoiceTotal||0);return{lbsIng:R,lbsRem:Y,udsIng:me,udsRem:pe,totalEsperado:he,totalFact:ge,gross:he-ge}},[I]),F=R=>{l(R),s(!0)},k=async()=>{if(o)try{const R=Yt(De,"inventory_batches",o.id);await Cn(R,{status:"PENDIENTE",remaining:o.quantity});const Y=At(De,"salesV2"),me=await Lt(er(Y,ur("batchId","==",o.id))),pe=await Lt(er(Y,ur("productName","==",o.productName),ur("date","==",o.date))),he=[...me.docs,...pe.docs];for(const ge of he)await Dn(Yt(De,"salesV2",ge.id));s(!1),l(null),v()}catch(R){console.error("Error al marcar pendiente:",R)}},B=x.useMemo(()=>{const R=new Map;return t.forEach(Y=>R.set(Y.productId,{id:Y.productId,name:Y.productName})),Array.from(R.values()).sort((Y,me)=>Y.name.localeCompare(me.name))},[t]);return i.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),i.jsx(xc,{onClick:v,loading:r})]}),i.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:R=>u(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:R=>f(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:R=>h(R.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),B.map(R=>i.jsx("option",{value:R.id,children:R.name},R.id))]})]}),i.jsx("button",{type:"button",className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h("")},children:"Quitar filtro"})]}),i.jsx("button",{type:"button",className:"sm:ml-auto px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>p(!0),children:"Crear factura"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"md:hidden",children:[i.jsxs("button",{type:"button",onClick:w,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Totales"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Libras: ",i.jsx("b",{children:Nc(E.lbsIng)}),"  Restantes:"," ",i.jsx("b",{children:Nc(E.lbsRem)})]})]}),i.jsx("div",{className:"text-gray-500",children:y?"":""})]}),y&&i.jsx("div",{className:"mt-3 bg-gray-50 p-3 rounded-2xl shadow-2xl border text-base",children:i.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Nc(E.lbsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Nc(E.udsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Uu(E.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Nc(E.lbsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Nc(E.udsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Uu(E.totalFact)]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Uu(E.gross)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",I.length.toLocaleString()]})]})})]}),i.jsx("div",{className:"hidden md:block bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Nc(E.lbsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Nc(E.udsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Uu(E.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Nc(E.lbsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Nc(E.udsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Uu(E.totalFact)]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Uu(E.gross)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",I.length.toLocaleString()]})]})})]}),i.jsx("div",{className:"block md:hidden space-y-3",children:r?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):I.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin lotes pagados"}):I.map(R=>{var me;const Y=P===R.id;return i.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>_(R.id),className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:R.productName}),i.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[(R.category||"").toUpperCase(),"  ",R.date," "," ",(R.unit||"").toUpperCase()]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-bold",children:Uu(R.expectedTotal||0)}),i.jsx("div",{className:"text-[11px] text-gray-500",children:Y?"Detalles":"Esperado"})]})]}),Y&&i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ingresado"}),i.jsx("div",{className:"font-semibold",children:Nc(R.quantity)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:Nc(R.remaining)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Costo"}),i.jsx("div",{className:"font-semibold",children:Uu(R.invoiceTotal||0)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Fecha pago"}),i.jsx("div",{className:"font-semibold",children:(me=R.paidAt)!=null&&me.toDate?jr(R.paidAt.toDate(),"yyyy-MM-dd"):""})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>F(R),children:"Marcar PENDIENTE"})})]})]},R.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow-2xl border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Ingresado"}),i.jsx("th",{className:"p-2 border",children:"Restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Compra"}),i.jsx("th",{className:"p-2 border",children:"Precio Venta"}),i.jsx("th",{className:"p-2 border",children:"Total factura"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Fecha pago"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):I.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):I.map(R=>{var Y;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:R.date}),i.jsx("td",{className:"p-2 border",children:(R.category||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:R.productName}),i.jsx("td",{className:"p-2 border",children:(R.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:Nc(R.quantity)}),i.jsx("td",{className:"p-2 border",children:Nc(R.remaining)}),i.jsx("td",{className:"p-2 border",children:Uu(R.purchasePrice)}),i.jsx("td",{className:"p-2 border",children:Uu(R.salePrice)}),i.jsx("td",{className:"p-2 border",children:Uu(R.invoiceTotal||0)}),i.jsx("td",{className:"p-2 border",children:Uu(R.expectedTotal||0)}),i.jsx("td",{className:"p-2 border",children:(Y=R.paidAt)!=null&&Y.toDate?jr(R.paidAt.toDate(),"yyyy-MM-dd"):""}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>F(R),children:"Marcar PENDIENTE"})})]},R.id)})})]})}),m&&i.jsx(g4e,{paidBatches:t,onClose:()=>p(!1),onCreated:()=>p(!1)}),a&&o&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-3",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),i.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",i.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded-xl",children:"Confirmar"})]})]})})]})}const Eo=t=>`C$ ${(Number(t)||0).toFixed(2)}`,y4e=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function OC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function b4e(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function w4e(t){const e="ROP",r=OC(t.subcat).slice(0,3)||"GEN",n=b4e(t.gender),a=OC(t.color).slice(0,3)||"COL",s=OC(t.size)||"TLL",o=OC(t.brand).slice(0,4)||"BRD",l=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${a}-${s}-${o}-${l}`}const dy=/^[A-Za-z0-9._-]{0,32}$/;function N4e(){const[t,e]=x.useState([]),[r,n]=x.useState([]),[a,s]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState(jr(wd(new Date),"yyyy-MM-dd")),[d,f]=x.useState(jr(bd(new Date),"yyyy-MM-dd")),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState(jr(new Date,"yyyy-MM-dd")),[y,b]=x.useState(0),[w,P]=x.useState(0),[j,_]=x.useState(0),[I,E]=x.useState(0),[F,k]=x.useState(0),[B,R]=x.useState(""),[Y,me]=x.useState(""),[pe,he]=x.useState(""),[ge,se]=x.useState(""),[je,Te]=x.useState(""),[D,K]=x.useState(""),[z,Q]=x.useState(""),[J,ee]=x.useState(!1),[M,G]=x.useState(""),[ne,ve]=x.useState("Camisa"),[V,qe]=x.useState(null),[ie,re]=x.useState(""),[Fe,de]=x.useState(0),[we,Le]=x.useState(0),[Ge,ft]=x.useState(0),[ht,xt]=x.useState(0),[jt,kt]=x.useState(0),[wt,Ve]=x.useState(""),[Pe,be]=x.useState(""),[ce,te]=x.useState(""),[Ne,Re]=x.useState(""),[ye,Xe]=x.useState(""),[mt,rt]=x.useState(""),[ue,_e]=x.useState(""),[We,ot]=x.useState(null),[Ce,$e]=x.useState({x:0,y:0}),[gt,Kt]=x.useState(!1);x.useEffect(()=>{const O=()=>ot(null),U=q=>q.key==="Escape"&&ot(null);return document.addEventListener("click",O),document.addEventListener("keydown",U),()=>{document.removeEventListener("click",O),document.removeEventListener("keydown",U)}},[]);const Ut=(O,U,q=192,ae=160)=>{let Ue=O;O+q+8>window.innerWidth&&(Ue=O-q),Ue=Math.max(8,Math.min(Ue,window.innerWidth-q-8));let Ze=U;return U+ae+8>window.innerHeight&&(Ze=window.innerHeight-ae-8),Ze=Math.max(8,Math.min(Ze,window.innerHeight-ae-8)),{x:Ue,y:Ze}},Jt=(O,U)=>{O.stopPropagation();const q=O.currentTarget.getBoundingClientRect(),ae=q.right,fe=q.bottom,Ue=Ut(ae,fe);$e(Ue),ot(Ze=>Ze===U?null:U)};x.useEffect(()=>{const O=()=>ot(null),U=q=>{q.key==="Escape"&&ot(null)};return document.addEventListener("click",O),document.addEventListener("keydown",U),()=>{document.removeEventListener("click",O),document.removeEventListener("keydown",U)}},[]),x.useEffect(()=>{if(!We)return;const O=()=>ot(null);return window.addEventListener("scroll",O,!0),window.addEventListener("resize",O),()=>{window.removeEventListener("scroll",O,!0),window.removeEventListener("resize",O)}},[We]),x.useEffect(()=>{(async()=>{const O=await Lt(At(De,"products_clothes")),U=[];O.forEach(Ue=>{const Ze=Ue.data();U.push({id:Ue.id,name:Ze.name??"(sin nombre)",category:Ze.category??"(sin categora)",measurement:Ze.measurement??"unidad",price:Number(Ze.price??0),sku:Ze.sku||"",size:Ze.size||"",color:Ze.color||"",gender:Ze.gender||"",brand:Ze.brand||""})}),e(U);const q=er(At(De,"inventory_clothes_batches"),bn("date","desc")),ae=await Lt(q),fe=[];ae.forEach(Ue=>{const Ze=Ue.data();fe.push({id:Ue.id,productId:Ze.productId,productName:Ze.productName,category:Ze.category,unit:Ze.unit,quantity:Number(Ze.quantity||0),remaining:Number(Ze.remaining??Ze.quantity??0),purchasePrice:Number(Ze.purchasePrice||0),salePrice:Number(Ze.salePrice||0),invoiceTotal:Number(Ze.invoiceTotal??Number(Ze.quantity||0)*Number(Ze.purchasePrice||0)),expectedTotal:Number(Ze.expectedTotal??Number(Ze.quantity||0)*Number(Ze.salePrice||0)),date:Ze.date,createdAt:Ze.createdAt,status:Ze.status,notes:Ze.notes||"",sku:Ze.sku||"",size:Ze.size||"",color:Ze.color||"",gender:Ze.gender||"",brand:Ze.brand||"",clientCode:Ze.clientCode||""})}),n(fe),s(!1)})()},[]),x.useEffect(()=>{const O=t.find(U=>U.id===m);O&&(_(Number(O.price||0)),O.sku&&me(O.sku),O.size&&he(U=>U||O.size),O.color&&se(U=>U||O.color),O.gender&&Te(U=>U||O.gender),O.brand&&K(U=>U||O.brand))},[m,t]),x.useEffect(()=>{E(Math.floor(y*w*100)/100)},[y,w]),x.useEffect(()=>{k(Math.floor(y*j*100)/100)},[y,j]),x.useEffect(()=>{const O=t.find(ae=>ae.id===m);if(O!=null&&O.sku){me(O.sku);return}const U=J&&ne?ne:(O==null?void 0:O.category)||"";if(!U&&!je&&!ge&&!pe&&!D){me("");return}const q=w4e({subcat:U,gender:je||"",color:ge||"",size:pe||"",brand:D||""});me(q)},[J,ne,m,je,ge,pe,D,t]);const it=x.useMemo(()=>r.filter(O=>!(c&&O.date<c||d&&O.date>d||A&&O.productId!==A)),[r,c,d,A]),X=x.useMemo(()=>{const O=it.reduce((fe,Ue)=>fe+(Ue.invoiceTotal||0),0),U=it.reduce((fe,Ue)=>fe+(Ue.expectedTotal||0),0),q=it.reduce((fe,Ue)=>fe+Ue.quantity,0),ae=it.reduce((fe,Ue)=>fe+Ue.remaining,0);return{udsIng:q,udsRem:ae,totalFacturado:O,totalEsperado:U}},[it]),oe=async O=>{O.preventDefault(),l("");const U=!!m&&!J,q=t.find(Ze=>Ze.id===m),ae=U?(q==null?void 0:q.name)||"":M||"",fe=U?(q==null?void 0:q.category)||"":ne||"General",Ue=U&&(q==null?void 0:q.measurement)||"unidad";if(!ae||y<=0||w<=0){l("Completa nombre/cantidad/costo.");return}if(z&&!dy.test(z)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const Ze=await Hn(At(De,"inventory_clothes_batches"),{productId:U?q.id:"",productName:ae,category:fe,unit:Ue,quantity:y,remaining:y,purchasePrice:w,salePrice:j,invoiceTotal:I,expectedTotal:F,date:g,createdAt:mr.now(),status:"PENDIENTE",notes:B||"",sku:Y||"",size:pe||"",color:ge||"",gender:je||"",brand:D||"",clientCode:z||""});n(lt=>[{id:Ze.id,productId:U?q.id:"",productName:ae,category:fe,unit:Ue,quantity:y,remaining:y,purchasePrice:w,salePrice:j,invoiceTotal:I,expectedTotal:F,date:g,createdAt:mr.now(),status:"PENDIENTE",notes:B||"",sku:Y||"",size:pe||"",color:ge||"",gender:je||"",brand:D||"",clientCode:z||""},...lt]),l(" Lote de ropa creado"),p(""),v(jr(new Date,"yyyy-MM-dd")),b(0),P(0),_(0),E(0),k(0),R(""),me(""),he(""),se(""),Te(""),K(""),Q(""),ee(!1),G(""),ve("Camisa")}catch(Ze){console.error(Ze),l(" Error al crear lote")}},L=async O=>{confirm(`Marcar PAGADO el lote del ${O.date} (${O.productName})?`)&&(await Cn(Yt(De,"inventory_clothes_batches",O.id),{status:"PAGADO"}),n(q=>q.map(ae=>ae.id===O.id?{...ae,status:"PAGADO"}:ae)))},Ae=O=>{qe(O.id),re(O.date),de(O.quantity),Le(O.purchasePrice),ft(O.salePrice),xt(Number((O.quantity*O.purchasePrice).toFixed(2))),kt(Number((O.quantity*O.salePrice).toFixed(2))),Ve(O.notes||""),be(O.sku||""),te(O.size||""),Re(O.color||""),Xe(O.gender||""),rt(O.brand||""),_e(O.clientCode||"")},Ee=()=>{qe(null),re(""),de(0),Le(0),ft(0),xt(0),kt(0),Ve(""),be(""),te(""),Re(""),Xe(""),rt(""),_e("")};x.useEffect(()=>{V&&xt(Math.floor(Fe*we*100)/100)},[V,Fe,we]),x.useEffect(()=>{V&&kt(Math.floor(Fe*Ge*100)/100)},[V,Fe,Ge]);const Oe=async()=>{if(!V)return;const O=r.find(fe=>fe.id===V);if(!O)return;const U=Math.max(0,O.quantity-O.remaining),q=Math.max(0,Fe-U);if(ue&&!dy.test(ue)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const ae=Yt(De,"inventory_clothes_batches",V);await Cn(ae,{date:ie,quantity:Fe,purchasePrice:we,salePrice:Ge,invoiceTotal:ht,expectedTotal:jt,notes:wt,remaining:q,sku:Pe,size:ce,color:Ne,gender:ye||"",brand:mt||"",clientCode:ue||""}),n(fe=>fe.map(Ue=>Ue.id===V?{...Ue,date:ie,quantity:Fe,purchasePrice:we,salePrice:Ge,invoiceTotal:ht,expectedTotal:jt,notes:wt,remaining:q,sku:Pe,size:ce,color:Ne,gender:ye||"",brand:mt||"",clientCode:ue||""}:Ue)),Ee(),l(" Lote actualizado")},Be=async O=>{confirm(`Eliminar el lote del ${O.date} (${O.productName})?`)&&(await Dn(Yt(De,"inventory_clothes_batches",O.id)),n(q=>q.filter(ae=>ae.id!==O.id)),l(" Lote eliminado"))},S=()=>{const O=(c?`Desde ${c}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),U=Ue=>(Ue||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),q=it.map(Ue=>`
      <tr>
        <td>${Ue.date}</td>
        <td>${(Ue.category||"").toUpperCase()}</td>
        <td>${U(Ue.productName)}</td>
        <td>${U(Ue.sku||"")}</td>
        <td>${U(Ue.size||"")}</td>
        <td>${U(Ue.color||"")}</td>
        <td>${U(Ue.clientCode||"")}</td>
        <td>${U(Ue.gender||"")}</td>
        <td>${(Ue.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${Ue.quantity.toFixed(0)}</td>
        <td style="text-align:right">${Ue.remaining.toFixed(0)}</td>
        <td style="text-align:right">${Eo(Ue.purchasePrice)}</td>
        <td style="text-align:right">${Eo(Ue.salePrice)}</td>
        <td style="text-align:right">${Eo(Ue.invoiceTotal||0)}</td>
        <td style="text-align:right">${Eo(Ue.expectedTotal||0)}</td>
        <td>${U((Ue.notes||"").slice(0,120))}</td>
        <td>${Ue.status}</td>
      </tr>`).join(""),ae=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${O}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${X.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${X.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${Eo(X.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${Eo(X.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${Eo(Number((X.totalEsperado-X.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${q||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,fe=window.open("","_blank");fe&&(fe.document.open(),fe.document.write(ae),fe.document.close())};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Kt(!0),type:"button",children:"Crear Inventario"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:O=>u(O.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:O=>f(O.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:O=>h(O.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),t.map(O=>i.jsxs("option",{value:O.id,children:[O.name,"  ",O.category]},O.id))]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h("")},children:"Quitar filtro"}),i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:S,children:"Imprimir PDF"})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",X.udsIng.toFixed(0)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",X.udsRem.toFixed(0)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Eo(X.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Eo(X.totalFacturado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Eo(Number((X.totalEsperado-X.totalFacturado).toFixed(2)))]})]})}),i.jsx("div",{className:"bg-white rounded shadow border",children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),i.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):it.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):it.map(O=>{const U=V===O.id;return i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 md:p-3 border align-top",children:U?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ie,onChange:q=>re(q.target.value)}):O.date}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(O.category||"").toUpperCase()}),i.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:i.jsx("span",{className:"block truncate",title:O.productName,children:O.productName})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:U?i.jsx("input",{className:"w-full border p-1 rounded",value:Pe,onChange:q=>be(q.target.value)}):i.jsx("span",{className:"block truncate",title:O.sku||"",children:O.sku||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:U?i.jsx("input",{className:"w-full border p-1 rounded",value:ce,onChange:q=>te(q.target.value)}):O.size||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:U?i.jsx("input",{className:"w-full border p-1 rounded",value:Ne,onChange:q=>Re(q.target.value)}):O.color||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:U?i.jsx("input",{className:"w-full border p-1 rounded",value:ue,onChange:q=>{const ae=q.target.value;dy.test(ae)&&_e(ae)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):i.jsx("span",{className:"block truncate",title:O.clientCode||"",children:O.clientCode||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:U?i.jsx("select",{className:"w-full border p-1 rounded",value:ye,onChange:q=>Xe(q.target.value),children:y4e.map(q=>i.jsx("option",{value:q,children:q||""},q))}):O.gender||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(O.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:U?i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(Fe)?"":Fe,onChange:q=>de(Math.max(0,parseInt(q.target.value||"0",10)))}):O.quantity.toFixed(0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:U?O.remaining:O.remaining.toFixed(0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:U?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(we)?"":we,onChange:q=>Le(Math.max(0,parseFloat(q.target.value||"0")))}):Eo(O.purchasePrice)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:U?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Ge)?"":Ge,onChange:q=>ft(Math.max(0,parseFloat(q.target.value||"0")))}):Eo(O.salePrice)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Eo(U?ht:O.invoiceTotal||0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Eo(U?jt:O.expectedTotal||0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:U?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:wt,onChange:q=>Ve(q.target.value),maxLength:500}):i.jsx("span",{className:"block truncate",title:O.notes||"",children:O.notes||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${O.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:O.status})}),i.jsx("td",{className:"p-2 md:p-3 border align-top",children:U?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Oe,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ee,children:"Cancelar"})]}):i.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:q=>Jt(q,O.id),children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),i.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),i.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},O.id)})})]})})}),We&&xu.createPortal(i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>ot(null),className:"fixed inset-0 z-[60]"}),i.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:Ce.x,top:Ce.y},onClick:O=>O.stopPropagation(),role:"menu","aria-orientation":"vertical",children:i.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const O=it.find(U=>U.id===We);return(O==null?void 0:O.status)==="PENDIENTE"?i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{ot(null),L(O)},children:" Pagar"}):null})(),i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const O=it.find(U=>U.id===We);O&&(ot(null),Ae(O))},children:" Editar"}),i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const O=it.find(U=>U.id===We);O&&(ot(null),Be(O))},children:" Borrar"})]})})]}),document.body),gt&&xu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Kt(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Kt(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:oe,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:O=>p(O.target.value),children:[i.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(O=>i.jsxs("option",{value:O.id,children:[O.name,"  ",O.category,"  ",O.sku?`SKU: ${O.sku}`:""]},O.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:g,onChange:O=>v(O.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:O=>b(Math.max(0,parseInt(O.target.value||"0",10))),placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:O=>P(Math.max(0,parseFloat(O.target.value||"0")))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:j===0?"":j,onChange:O=>_(Math.max(0,parseFloat(O.target.value||"0")))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Y,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:pe,readOnly:!0,onChange:O=>he(O.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ge,readOnly:!0,onChange:O=>se(O.target.value),placeholder:"Negro, Azul, Rojo"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:je,readOnly:!0,onChange:O=>Te(O.target.value),placeholder:"Masculino, Femenino, Otro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:D,onChange:O=>K(O.target.value),placeholder:"Shein, Usado, Otro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:z,onChange:O=>{const U=O.target.value;dy.test(U)&&Q(U)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!dy.test(z)&&z.length>0&&i.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:B,onChange:O=>R(O.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[B.length,"/500"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Eo(I),readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Eo(F),readOnly:!0})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Kt(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),o&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const C4e=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],_4e=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],E4e=["XS","S","M","L","XL","2XL"],S4e=["2","4","6","8","10","12","14"],I4e=["26","28","30","32","34","36","38"],j4e=["Shein","Usado","Otro"],P4e=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function DC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function B4e(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function T4e(t){const e="ROP",r=DC(t.subcat).slice(0,3)||"GEN",n=B4e(t.gender),a=DC(t.color).slice(0,3)||"COL",s=DC(t.size)||"TLL",o=DC(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${a}-${s}-${o}`}const k4e=/^[A-Za-z0-9._-]{0,32}$/;function F4e(){const[t,e]=x.useState(""),[r,n]=x.useState("Camisa"),[a,s]=x.useState(""),[o,l]=x.useState(""),[c,u]=x.useState("Shein"),[d,f]=x.useState(""),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState(""),[y,b]=x.useState(""),[w,P]=x.useState("0"),[j,_]=x.useState(""),[I,E]=x.useState(""),F=x.useMemo(()=>{const Q=Number(w||0),J=Number(y||0);return Math.floor(Q*J*100)/100},[w,y]),[k,B]=x.useState([]),[R,Y]=x.useState(!0),[me,pe]=x.useState(""),{refreshKey:he,refresh:ge}=vc(),[se,je]=x.useState(!1),Te=x.useMemo(()=>r.toLowerCase()==="jean"?I4e:d==="NINO"||d==="NINA"?S4e:E4e,[r,d]);x.useEffect(()=>{p(T4e({subcat:r,gender:d,color:o,size:a,brand:c}))},[r,d,o,a,c]),x.useEffect(()=>{(async()=>{Y(!0);const Q=er(At(De,"products_clothes"),bn("createdAt","desc")),J=await Lt(Q),ee=[];J.forEach(M=>{const G=M.data();ee.push({id:M.id,name:G.name??"(sin nombre)",category:G.category??"",measurement:G.measurement??"unidad",sku:G.sku??"",size:G.size||"",color:G.color||"",brand:G.brand||"",gender:G.gender||"",clientCode:G.clientCode||"",notes:G.notes||"",createdAt:G.createdAt??mr.now()})}),B(ee),Y(!1)})()},[he]);const D=()=>{e(""),n("Camisa"),s(""),l(""),u("Shein"),f(""),h(""),v(""),b(""),P("0"),_(""),E("")},K=async Q=>{if(Q.preventDefault(),pe(""),!t.trim()){pe("Ingresa el nombre del producto.");return}if(A&&!k4e.test(A)){pe("Cdigo del cliente invlido");return}const J=Number(w||0),ee=Number(y||0);if(J<0){pe("La cantidad de piezas debe ser 0 o mayor.");return}if(ee<0){pe("El precio de venta no puede ser negativo.");return}try{const M=await Hn(At(De,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:o||"",brand:c||"",gender:d||"",clientCode:A||"",notes:g||"",createdAt:mr.now(),price:ee||0});if(B(G=>[{id:M.id,name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:o||"",brand:c||"",gender:d||"",clientCode:A||"",notes:g||"",createdAt:mr.now()},...G]),J>0){const G=new Date().toISOString().slice(0,10),ne=j||G;await Hn(At(De,"inventory_clothes_batches"),{productId:M.id,productName:t.trim(),category:r,unit:"unidad",quantity:J,remaining:J,purchasePrice:0,salePrice:ee||0,invoiceTotal:0,expectedTotal:F||0,date:ne,createdAt:mr.now(),status:"PENDIENTE",notes:I||"",sku:m||"",size:a||"",color:o||"",gender:d||"",brand:c||"",clientCode:A||""})}pe(J>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),D()}catch(M){console.error(M),pe(" Error al crear producto")}},z=async Q=>{confirm(`Eliminar el producto "${Q.name}"?`)&&(await Dn(Yt(De,"products_clothes",Q.id)),B(ee=>ee.filter(M=>M.id!==Q.id)))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(xc,{onClick:ge,loading:R}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{je(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),se&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),i.jsxs("form",{onSubmit:K,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:Q=>e(Q.target.value),placeholder:"Ej: Blusa floral"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),i.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:Q=>n(Q.target.value),children:C4e.map(Q=>i.jsx("option",{value:Q,children:Q},Q))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),i.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:Q=>f(Q.target.value),children:P4e.map(Q=>i.jsx("option",{value:Q,children:Q||""},Q))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:Q=>s(Q.target.value),children:[i.jsx("option",{value:"",children:""}),Te.map(Q=>i.jsx("option",{value:Q,children:Q},Q))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:Q=>l(Q.target.value),children:[i.jsx("option",{value:"",children:""}),_4e.map(Q=>i.jsx("option",{value:Q,children:Q},Q))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),i.jsx("select",{className:"w-full border p-2 rounded",value:c,onChange:Q=>u(Q.target.value),children:j4e.map(Q=>i.jsx("option",{value:Q,children:Q},Q))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:m,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),i.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:Q=>h(Q.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:y,onChange:Q=>b(Q.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:w,onChange:Q=>P(Q.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:j,onChange:Q=>_(Q.target.value)})]}),i.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(F)?"":F.toFixed(2)]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[i.jsx("button",{type:"button",onClick:D,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),i.jsx("button",{type:"button",onClick:()=>je(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Subcat."}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Talla"}),i.jsx("th",{className:"p-2 border",children:"Color"}),i.jsx("th",{className:"p-2 border",children:"Marca"}),i.jsx("th",{className:"p-2 border",children:"Gnero"}),i.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:R?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):k.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):k.map(Q=>{var J;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(J=Q.createdAt)!=null&&J.toDate?Q.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border",children:Q.category}),i.jsx("td",{className:"p-2 border",children:Q.name}),i.jsx("td",{className:"p-2 border",children:Q.sku}),i.jsx("td",{className:"p-2 border",children:Q.size||""}),i.jsx("td",{className:"p-2 border",children:Q.color||""}),i.jsx("td",{className:"p-2 border",children:Q.brand||""}),i.jsx("td",{className:"p-2 border",children:Q.gender||""}),i.jsx("td",{className:"p-2 border",children:Q.clientCode||""}),i.jsx("td",{className:"p-2 border",children:Q.notes||""}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>z(Q),children:"Borrar"})})]},Q.id)})})]})}),me&&i.jsx("p",{className:"mt-2 text-sm",children:me})]})}async function O4e(t){const{productId:e,quantity:r,saleDate:n,saleId:a}=t,s=Math.max(0,Math.floor(Number(r||0)));if(!e||s<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const o=er(At(De,"inventory_clothes_batches"),ur("productId","==",e)),u=(await Lt(o)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,A)=>{var v,y;const h=String(f.data.date||""),m=String(A.data.date||"");if(h!==m)return h<m?-1:1;const p=((v=f.data.createdAt)==null?void 0:v.seconds)??0,g=((y=A.data.createdAt)==null?void 0:y.seconds)??0;return p-g}).map(f=>Yt(De,"inventory_clothes_batches",f.id)),d=[];return await ki(De,async f=>{const A=await Promise.all(u.map(m=>f.get(m)));let h=s;for(let m=0;m<u.length&&h>0;m++){const p=u[m],g=A[m];if(!g.exists())continue;const v=g.data(),y=Math.max(0,Math.floor(Number(v.quantity||0))),b=Number.isFinite(Number(v.remaining))?Math.max(0,Math.floor(Number(v.remaining||0))):y;if(b<=0)continue;const w=Math.min(b,h),P=Math.max(0,b-w);f.update(p,{remaining:P}),d.push({batchId:p.id,qty:w,batchDate:String(v.date||""),productName:String(v.productName||"")}),h-=w}if(h>0)throw new Error(`Inventario insuficiente. Faltan ${h} unidades.`);if(a)for(const m of d)await Hn(At(De,"batch_clothes_allocations"),{saleId:a,saleDate:n,productId:e,productName:m.productName??"",batchId:m.batchId,batchDate:m.batchDate??"",quantity:m.qty,createdAt:mr.now()})}),{allocations:d}}async function Dk(t){const e=Yt(De,"sales_clothes",t),r=await ei(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)&&n.items.length>0){const l={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const c of Object.keys(n.allocationsByItem)){const u=n.allocationsByItem[c],d=String((u==null?void 0:u.productId)||c||"");if(!d)continue;const f=Array.isArray(u==null?void 0:u.allocations)?u.allocations:[];l[d]=f.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const c of n.allocationsByItem){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];l[u]=d.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const c of n.items){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Math.max(0,Math.floor(Number((c==null?void 0:c.qty)||(c==null?void 0:c.quantity)||0))),f=Array.isArray(c==null?void 0:c.allocations)?c.allocations.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))})):l[u]||[];a.push({productId:u,productName:String((c==null?void 0:c.productName)||""),qty:d,allocations:f.length?f:void 0})}}else{const l=n.item||{},c=String(l.productId||n.productId||""),u=Math.max(0,Math.floor(Number(l.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];c&&u>0&&a.push({productId:c,productName:String(l.productName||n.productName||""),qty:u,allocations:d.length?d:void 0})}return a.length===0?(await ki(De,async l=>{l.delete(e)}),{restored:0}):a.every(l=>Array.isArray(l.allocations)&&l.allocations.length>0)?(await ki(De,async c=>{const u=[];for(const f of a)for(const A of f.allocations||[])u.push({ref:Yt(De,"inventory_clothes_batches",A.batchId),addBack:Math.max(0,Math.floor(Number(A.qty||0)))});const d=await Promise.all(u.map(f=>c.get(f.ref)));for(let f=0;f<u.length;f++){const A=d[f];if(!A.exists())continue;const h=A.data(),m=Math.max(0,Math.floor(Number(h.remaining||0)));c.update(u[f].ref,{remaining:m+u[f].addBack})}c.delete(e)}),{restored:a.reduce((c,u)=>c+(u.allocations||[]).reduce((d,f)=>d+f.qty,0),0)}):(await ki(De,async l=>{const c={};for(const h of a){if(!h.productId||h.qty<=0)continue;const m=er(At(De,"inventory_clothes_batches"),ur("productId","==",h.productId)),g=(await Lt(m)).docs.map(v=>{const y=v.data(),b=Math.max(0,Math.floor(Number(y.quantity||0))),w=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):b;return{id:v.id,date:String(y.date||""),quantity:b,remaining:w}}).sort((v,y)=>v.date.localeCompare(y.date));c[h.productId]=g}const u=[];for(const h of a){if(!h.productId||h.qty<=0)continue;if(Array.isArray(h.allocations)&&h.allocations.length>0){for(const g of h.allocations)u.push({id:g.batchId,addBack:Math.max(0,Math.floor(Number(g.qty||0)))});continue}const m=c[h.productId]||[];let p=h.qty;for(const g of m){if(p<=0)break;const v=Math.max(0,g.quantity-g.remaining);if(v<=0)continue;const y=Math.min(v,p);u.push({id:g.id,addBack:y}),p-=y}for(const g of m){if(p<=0)break;const v=Math.min(p,h.qty);u.push({id:g.id,addBack:v}),p-=v}}const d={};for(const h of u)d[h.id]=(d[h.id]||0)+Math.max(0,Math.floor(Number(h.addBack||0)));const f=Object.keys(d).map(h=>Yt(De,"inventory_clothes_batches",h)),A=await Promise.all(f.map(h=>l.get(h)));for(let h=0;h<f.length;h++){const m=A[h];if(!m.exists())continue;const p=m.data(),g=Math.max(0,Math.floor(Number(p.remaining||0))),v=Math.max(0,Math.floor(Number(d[f[h].id]||0)));l.update(f[h],{remaining:g+v})}l.delete(e)}),{restored:a.reduce((l,c)=>l+c.qty,0)})}const KV=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],vh=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function RC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function qV(t){const e=er(At(De,"ar_movements"),ur("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Dn(Yt(De,"ar_movements",n.id))))}function D4e(){const[t,e]=x.useState(!1),[r,n]=x.useState(!1),[a,s]=x.useState(null),[o,l]=x.useState([]),c=async X=>{e(!0),n(!0),s(X),l([]);try{const L=(await Lt(er(At(De,"sales_clothes"),ur("__name__","==",X)))).docs[0],Ae=L==null?void 0:L.data(),Oe=(Array.isArray(Ae==null?void 0:Ae.items)?Ae.items:Ae!=null&&Ae.item?[Ae.item]:[]).map(Be=>({productName:String(Be.productName||""),qty:Number(Be.qty||0),unitPrice:Number(Be.unitPrice||0),discount:Number(Be.discount||0),total:Number(Be.total||0)}));l(Oe)}catch(oe){console.error(oe)}finally{n(!1)}},[u,d]=x.useState(""),[f,A]=x.useState("+505 "),[h,m]=x.useState(""),[p,g]=x.useState(""),[v,y]=x.useState("ACTIVO"),[b,w]=x.useState(0),[P,j]=x.useState([]),[_,I]=x.useState(!0),[E,F]=x.useState(""),[k,B]=x.useState(null),[R,Y]=x.useState(""),[me,pe]=x.useState("+505 "),[he,ge]=x.useState(""),[se,je]=x.useState(""),[Te,D]=x.useState("ACTIVO"),[K,z]=x.useState(0),[Q,J]=x.useState(!1),[ee,M]=x.useState(null),[G,ne]=x.useState(!1),[ve,V]=x.useState([]),[qe,ie]=x.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[re,Fe]=x.useState(!1),[de,we]=x.useState(0),[Le,Ge]=x.useState(new Date().toISOString().slice(0,10)),[ft,ht]=x.useState(""),[xt,jt]=x.useState(!1),[kt,wt]=x.useState(null),[Ve,Pe]=x.useState(""),[be,ce]=x.useState(0),[te,Ne]=x.useState(""),[Re,ye]=x.useState(!1);x.useEffect(()=>{(async()=>{const X=er(At(De,"customers_clothes"),bn("createdAt","desc")),oe=await Lt(X),L=[];oe.forEach(Ae=>{const Ee=Ae.data();L.push({id:Ae.id,name:Ee.name??"",phone:Ee.phone??"+505 ",place:Ee.place??"",notes:Ee.notes??"",status:Ee.status??"ACTIVO",creditLimit:Number(Ee.creditLimit??0),createdAt:Ee.createdAt??mr.now(),balance:0})});for(const Ae of L)try{const Ee=er(At(De,"ar_movements"),ur("customerId","==",Ae.id)),Oe=await Lt(Ee);let Be=0;Oe.forEach(S=>Be+=Number(S.data().amount||0)),Ae.balance=Be}catch{Ae.balance=0}j(L),I(!1)})()},[]);const Xe=()=>{d(""),A("+505 "),m(""),g(""),y("ACTIVO"),w(0)},mt=async X=>{if(X.preventDefault(),F(""),!u.trim()){F("Ingresa el nombre.");return}const oe=RC(f);if(oe.length<6){F("Telfono incompleto.");return}try{const L=await Hn(At(De,"customers_clothes"),{name:u.trim(),phone:oe,place:h||"",notes:p||"",status:v,creditLimit:Number(b||0),createdAt:mr.now()});j(Ae=>[{id:L.id,name:u.trim(),phone:oe,place:h||"",notes:p||"",status:v,creditLimit:Number(b||0),createdAt:mr.now(),balance:0},...Ae]),Xe(),ye(!1),F(" Cliente creado")}catch(L){console.error(L),F(" Error al crear cliente")}},rt=X=>{B(X.id),Y(X.name),pe(X.phone||"+505 "),ge(X.place||""),je(X.notes||""),D(X.status||"ACTIVO"),z(Number(X.creditLimit||0))},ue=()=>{B(null),Y(""),pe("+505 "),ge(""),je(""),D("ACTIVO"),z(0)},_e=async()=>{if(!k)return;const X=RC(me);if(!R.trim()){F("Ingresa el nombre.");return}try{await Cn(Yt(De,"customers_clothes",k),{name:R.trim(),phone:X,place:he||"",notes:se||"",status:Te,creditLimit:Number(K||0)}),j(oe=>oe.map(L=>L.id===k?{...L,name:R.trim(),phone:X,place:he||"",notes:se||"",status:Te,creditLimit:Number(K||0)}:L)),ue(),F(" Cliente actualizado")}catch(oe){console.error(oe),F(" Error al actualizar")}},We=async X=>{if(confirm(`Eliminar al cliente "${X.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{I(!0);const L=er(At(De,"sales_clothes"),ur("customerId","==",X.id)),Ae=await Lt(L);for(const Be of Ae.docs){const S=Be.id;try{await Dk(S)}catch(O){console.warn("restoreSaleAndDeleteClothes error",O);try{await Dn(Yt(De,"sales_clothes",S))}catch{}}await qV(S)}const Ee=er(At(De,"ar_movements"),ur("customerId","==",X.id)),Oe=await Lt(Ee);await Promise.all(Oe.docs.map(Be=>Dn(Yt(De,"ar_movements",Be.id)))),await Dn(Yt(De,"customers_clothes",X.id)),j(Be=>Be.filter(S=>S.id!==X.id)),F(" Cliente eliminado y prendas devueltas al inventario")}catch(L){console.error(L),F(" No se pudo eliminar el cliente.")}finally{I(!1)}},ot=async X=>{M(X),V([]),ie({saldoActual:0,totalAbonado:0,totalCargos:0}),J(!0),Fe(!1),we(0),Ge(new Date().toISOString().slice(0,10)),ht(""),wt(null),ne(!0);try{const oe=er(At(De,"ar_movements"),ur("customerId","==",X.id)),L=await Lt(oe),Ae=[];L.forEach(Ee=>{var Be,S;const Oe=Ee.data();Ae.push({id:Ee.id,date:Oe.date??((S=(Be=Oe.createdAt)==null?void 0:Be.toDate)!=null&&S.call(Be)?Oe.createdAt.toDate().toISOString().slice(0,10):""),type:Oe.type??"CARGO",amount:Number(Oe.amount||0),ref:Oe.ref||{},comment:Oe.comment||"",createdAt:Oe.createdAt})}),Ae.sort((Ee,Oe)=>{var O,U;if(Ee.date!==Oe.date)return Ee.date.localeCompare(Oe.date);const Be=((O=Ee.createdAt)==null?void 0:O.seconds)||0,S=((U=Oe.createdAt)==null?void 0:U.seconds)||0;return Be-S}),V(Ae),Ce(Ae)}catch(oe){console.error(oe),F(" No se pudo cargar el estado de cuenta")}finally{ne(!1)}},Ce=X=>{const oe=X.reduce((Ee,Oe)=>Ee+(Number(Oe.amount)||0),0),L=X.filter(Ee=>Number(Ee.amount)<0).reduce((Ee,Oe)=>Ee+Math.abs(Number(Oe.amount)||0),0),Ae=X.filter(Ee=>Number(Ee.amount)>0).reduce((Ee,Oe)=>Ee+Number(Oe.amount)||0,0);ie({saldoActual:oe,totalAbonado:L,totalCargos:Ae})},$e=async()=>{if(!ee)return;F("");const X=Number(de||0);if(!(X>0)){F("Ingresa un monto de abono mayor a 0.");return}const oe=parseFloat(X.toFixed(2));if(!Le){F("Selecciona la fecha del abono.");return}try{jt(!0);const L={customerId:ee.id,type:"ABONO",amount:-oe,date:Le,comment:ft||"",createdAt:mr.now()},Ee={id:(await Hn(At(De,"ar_movements"),L)).id,date:Le,type:"ABONO",amount:-oe,comment:ft||"",createdAt:mr.now()},Oe=[...ve,Ee].sort((Be,S)=>{var q,ae;if(Be.date!==S.date)return Be.date.localeCompare(S.date);const O=((q=Be.createdAt)==null?void 0:q.seconds)||0,U=((ae=S.createdAt)==null?void 0:ae.seconds)||0;return O-U});V(Oe),Ce(Oe),j(Be=>Be.map(S=>S.id===ee.id?{...S,balance:(S.balance||0)-oe}:S)),M(Be=>Be&&{...Be,balance:(Be.balance||0)-oe}),we(0),ht(""),Ge(new Date().toISOString().slice(0,10)),Fe(!1),F(" Abono registrado")}catch(L){console.error(L),F(" Error al registrar el abono")}finally{jt(!1)}},gt=X=>{wt(X.id),Pe(X.date||new Date().toISOString().slice(0,10)),ce(Math.abs(Number(X.amount||0))),Ne(X.comment||"")},Kt=()=>{wt(null),Pe(""),ce(0),Ne("")},Ut=async()=>{if(!kt)return;const X=ve.findIndex(Ee=>Ee.id===kt);if(X===-1)return;const oe=ve[X],L=Number(be||0);if(!(L>0)){F("El monto debe ser mayor a 0.");return}const Ae=oe.type==="ABONO"?-parseFloat(L.toFixed(2)):+parseFloat(L.toFixed(2));try{await Cn(Yt(De,"ar_movements",kt),{date:Ve,amount:Ae,comment:te||""});const Ee=[...ve];Ee[X]={...oe,date:Ve,amount:Ae,comment:te||""},Ee.sort((Be,S)=>{var q,ae;if(Be.date!==S.date)return Be.date.localeCompare(S.date);const O=((q=Be.createdAt)==null?void 0:q.seconds)||0,U=((ae=S.createdAt)==null?void 0:ae.seconds)||0;return O-U}),V(Ee),Ce(Ee);const Oe=Ee.reduce((Be,S)=>Be+(Number(S.amount)||0),0);j(Be=>Be.map(S=>S.id===(ee==null?void 0:ee.id)?{...S,balance:Oe}:S)),M(Be=>Be&&{...Be,balance:Oe}),Kt(),F(" Movimiento actualizado")}catch(Ee){console.error(Ee),F(" Error al actualizar movimiento")}},Jt=async X=>{var L,Ae;if(confirm(`Eliminar este movimiento (${X.type==="ABONO"?"Abono":"Compra"}) del ${X.date}?${X.type==="CARGO"&&((L=X.ref)!=null&&L.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(I(!0),X.type==="CARGO"&&((Ae=X.ref)!=null&&Ae.saleId)){try{await Dk(X.ref.saleId)}catch(Be){console.warn("restoreSaleAndDeleteClothes error",Be),I(!1),F(" No se pudo devolver inventario de la venta.");return}await qV(X.ref.saleId)}else await Dn(Yt(De,"ar_movements",X.id));const Ee=ve.filter(Be=>{var S,O;return X.type==="CARGO"&&((S=X.ref)!=null&&S.saleId)?((O=Be.ref)==null?void 0:O.saleId)!==X.ref.saleId:Be.id!==X.id});V(Ee),Ce(Ee);const Oe=Ee.reduce((Be,S)=>Be+(Number(S.amount)||0),0);j(Be=>Be.map(S=>S.id===(ee==null?void 0:ee.id)?{...S,balance:Oe}:S)),M(Be=>Be&&{...Be,balance:Oe}),F(" Movimiento eliminado")}catch(Ee){console.error(Ee),F(" Error al eliminar movimiento")}finally{I(!1)}},it=x.useMemo(()=>[...P].sort((X,oe)=>{var L,Ae;return X.status!==oe.status?X.status==="BLOQUEADO"?1:-1:(((L=oe.createdAt)==null?void 0:L.seconds)||0)-(((Ae=X.createdAt)==null?void 0:Ae.seconds)||0)}),[P]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ye(!0),type:"button",children:"Crear Cliente"})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:_?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):it.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):it.map(X=>{var L;const oe=k===X.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(L=X.createdAt)!=null&&L.toDate?X.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border",children:oe?i.jsx("input",{className:"w-full border p-1 rounded",value:R,onChange:Ae=>Y(Ae.target.value)}):X.name}),i.jsx("td",{className:"p-2 border",children:oe?i.jsx("input",{className:"w-full border p-1 rounded",value:me,onChange:Ae=>pe(RC(Ae.target.value))}):X.phone}),i.jsx("td",{className:"p-2 border",children:oe?i.jsxs("select",{className:"w-full border p-1 rounded",value:he,onChange:Ae=>ge(Ae.target.value),children:[i.jsx("option",{value:"",children:""}),KV.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))]}):X.place||""}),i.jsx("td",{className:"p-2 border",children:oe?i.jsxs("select",{className:"w-full border p-1 rounded",value:Te,onChange:Ae=>D(Ae.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${X.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:X.status})}),i.jsx("td",{className:"p-2 border",children:oe?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(K)?"":K,onChange:Ae=>z(Math.max(0,Number(Ae.target.value||0)))}):vh(X.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:vh(X.balance||0)}),i.jsx("td",{className:"p-2 border",children:oe?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:se,onChange:Ae=>je(Ae.target.value),maxLength:500}):i.jsx("span",{title:X.notes||"",children:(X.notes||"").length>40?(X.notes||"").slice(0,40)+"":X.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:oe?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:_e,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ue,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>rt(X),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>We(X),children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>ot(X),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},X.id)})})]})}),E&&i.jsx("p",{className:"mt-2 text-sm",children:E}),Re&&xu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ye(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ye(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:mt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:u,onChange:X=>d(X.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:X=>A(RC(X.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:X=>m(X.target.value),children:[i.jsx("option",{value:"",children:""}),KV.map(X=>i.jsx("option",{value:X,children:X},X))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:v,onChange:X=>y(X.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:X=>w(Math.max(0,Number(X.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:p,onChange:X=>g(X.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ye(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),Q&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(ee==null?void 0:ee.name)||""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{we(0),Ge(new Date().toISOString().slice(0,10)),ht(""),Fe(!0)},children:"Abonar"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>J(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:vh(qe.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:vh(qe.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:vh(qe.saldoActual)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:G?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ve.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):ve.map(X=>{var L,Ae;const oe=kt===X.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:oe?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Ve,onChange:Ee=>Pe(Ee.target.value)}):X.date||""}),i.jsx("td",{className:"p-2 border",children:X.amount>=0?(L=X.ref)!=null&&L.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>c(X.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(Ae=X.ref)!=null&&Ae.saleId?`Venta #${X.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:oe?i.jsx("input",{className:"w-full border p-1 rounded",value:te,onChange:Ee=>Ne(Ee.target.value),placeholder:"Comentario"}):i.jsx("span",{title:X.comment||"",children:(X.comment||"").length>40?(X.comment||"").slice(0,40)+"":X.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:oe?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(be)?"":be,onChange:Ee=>{const Oe=Number(Ee.target.value||0),Be=Number.isFinite(Oe)?Math.max(0,parseFloat(Oe.toFixed(2))):0;ce(Be)},placeholder:"0.00",title:X.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):vh(X.amount)}),i.jsx("td",{className:"p-2 border",children:oe?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ut,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Kt,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>gt(X),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Jt(X),children:"Borrar"})]})})]},X.id)})})]})})]})}),re&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(ee==null?void 0:ee.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Le,onChange:X=>Ge(X.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:de===0?"":de,onChange:X=>{const oe=Number(X.target.value||0),L=Number.isFinite(oe)?Math.max(0,parseFloat(oe.toFixed(2))):0;we(L)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ft,onChange:X=>ht(X.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ft.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Fe(!1),disabled:xt,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:$e,disabled:xt,children:xt?"Guardando...":"Guardar abono"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):o.map((X,oe)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:X.productName}),i.jsx("td",{className:"p-2 border text-right",children:X.qty}),i.jsx("td",{className:"p-2 border text-right",children:vh(X.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:vh(X.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:vh(X.total)})]},oe))})]})})]})})]})}const ux=t=>`C$ ${(Number(t)||0).toFixed(2)}`,R4e=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function M4e(t){if(!t)return 0;const e=er(At(De,"inventory_clothes_batches"),ur("productId","==",t)),r=await Lt(e);let n="0000-00-00",a=-1,s=0;return r.forEach(o=>{const l=o.data(),c=String(l.date||"0000-00-00"),u=Number(l.salePrice||0),d=l.createdAt,f=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;c>n?(n=c,a=f,s=u):c===n&&f>a&&(a=f,s=u)}),Number(s||0)}async function zV(t){if(!t)return 0;const e=er(At(De,"inventory_clothes_batches"),ur("productId","==",t)),r=await Lt(e);let n=0;return r.forEach(a=>n+=Number(a.data().remaining||0)),n}function WV(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function L4e({role:t="",roles:e}={role:""}){const r=e&&e.length?e:t;mn(r,"admin"),mn(r,"vendedor_ropa");const[n,a]=x.useState([]),[s,o]=x.useState([]),[l,c]=x.useState({}),[u,d]=x.useState("CONTADO"),[f,A]=x.useState(""),[h,m]=x.useState(""),[p,g]=x.useState(new Date().toISOString().slice(0,10)),[v,y]=x.useState(""),[b,w]=x.useState([]),P=x.useMemo(()=>b.reduce((de,we)=>de+(we.qty||0),0),[b]),j=x.useMemo(()=>{const de=b.reduce((we,Le)=>{const Ge=Math.max(0,(Number(Le.unitPrice)||0)*(Le.qty||0)-(Number(Le.discount)||0));return we+Ge},0);return Math.floor(de*100)/100},[b]),[_,I]=x.useState(0),[E,F]=x.useState(""),[k,B]=x.useState(!1),[R,Y]=x.useState(!1),[me,pe]=x.useState(""),[he,ge]=x.useState("+505 "),[se,je]=x.useState(""),[Te,D]=x.useState(""),[K,z]=x.useState("ACTIVO"),[Q,J]=x.useState(0),ee=()=>{pe(""),ge("+505 "),je(""),D(""),z("ACTIVO"),J(0)};x.useEffect(()=>{(async()=>{const de=er(At(De,"customers_clothes"),bn("createdAt","desc")),we=await Lt(de),Le=[];we.forEach(wt=>{const Ve=wt.data();Le.push({id:wt.id,name:Ve.name??"",phone:Ve.phone??"+505 ",place:Ve.place??"",status:Ve.status??"ACTIVO",creditLimit:Number(Ve.creditLimit??0),balance:0})});for(const wt of Le)try{const Ve=er(At(De,"ar_movements"),ur("customerId","==",wt.id)),Pe=await Lt(Ve);let be=0;Pe.forEach(ce=>be+=Number(ce.data().amount||0)),wt.balance=be}catch{wt.balance=0}a(Le);const Ge=er(At(De,"products_clothes"),bn("createdAt","desc")),ft=await Lt(Ge),ht=[];ft.forEach(wt=>{const Ve=wt.data();ht.push({id:wt.id,name:Ve.name??"(sin nombre)",sku:Ve.sku??""})}),o(ht);const xt=er(At(De,"inventory_clothes_batches"),ur("remaining",">",0)),jt=await Lt(xt),kt={};jt.forEach(wt=>{const Ve=wt.data(),Pe=Ve.productId||"",be=Number(Ve.remaining||0);Pe&&(kt[Pe]=(kt[Pe]||0)+be)}),c(kt)})()},[]);const M=x.useMemo(()=>n.find(de=>de.id===f),[n,f]),G=(M==null?void 0:M.balance)||0,ne=u==="CREDITO"?G+Math.max(0,Number(j||0))-Math.max(0,Number(_||0)):0,ve=async de=>{if(!de)return;if(b.some(ht=>ht.productId===de)){y("");return}const we=s.find(ht=>ht.id===de);if(!we){y("");return}let Le=await M4e(de);Le||(Le=Number((we==null?void 0:we.price)||0));const Ge=await zV(de),ft={productId:de,productName:we.name||"",sku:we.sku||"",unitPrice:Number(Le)||0,available:Number(Ge)||0,qty:0,discount:0};w(ht=>[...ht,ft]),y("")},V=(de,we)=>{w(Le=>Le.map(Ge=>{if(Ge.productId!==de)return Ge;if(we==="")return{...Ge,qty:0};const ft=Math.max(0,Math.floor(Number(we)));return{...Ge,qty:ft}}))},qe=(de,we)=>{w(Le=>Le.map(Ge=>{if(Ge.productId!==de)return Ge;if(we==="")return{...Ge,discount:0};const ft=Math.max(0,Math.floor(Number(we)));return{...Ge,discount:ft}}))},ie=de=>w(we=>we.filter(Le=>Le.productId!==de)),re=async()=>{if(!p)return"Selecciona la fecha.";if(b.length===0)return"Agrega al menos un producto.";const de=b.filter(we=>(we.qty||0)>0);if(de.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(j>0))return"El total debe ser mayor a cero.";if(u==="CONTADO"){if(!h.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!f)return"Selecciona un cliente (crdito).";if(_<0)return"El pago inicial no puede ser negativo.";if(_>j)return"El pago inicial no puede superar el total.";if((M==null?void 0:M.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const we of de){const Le=await zV(we.productId);if(we.qty>Le)return`Inventario insuficiente para "${we.productName}". Disponible: ${Le} unidades.`;const Ge=(Number(we.unitPrice)||0)*(we.qty||0),ft=Number(we.discount)||0;if(!Number.isInteger(ft)||ft<0)return`El descuento en "${we.productName}" debe ser entero y  0.`;if(ft>Ge)return`El descuento en "${we.productName}" no puede exceder C$ ${Ge.toFixed(2)}.`}return null},Fe=async de=>{de.preventDefault(),F("");const we=await re();if(we){F(" "+we);return}try{B(!0);const Le=b.filter(xt=>(xt.qty||0)>0).map(xt=>{const jt=(Number(xt.unitPrice)||0)*(xt.qty||0),kt=Math.max(0,Math.floor(Number(xt.discount)||0)),wt=Math.max(0,jt-kt);return{productId:xt.productId,productName:xt.productName,sku:xt.sku||"",qty:xt.qty,unitPrice:Number(xt.unitPrice)||0,discount:kt,total:Math.floor(wt*100)/100}}),Ge={type:u,date:p,createdAt:mr.now(),itemsTotal:Number(j)||0,total:Number(j)||0,quantity:Number(P)||0,items:Le};u==="CONTADO"?Ge.customerName=h.trim():(Ge.customerId=f,Ge.downPayment=Number(_)||0);const ft=await Hn(At(De,"sales_clothes"),Ge);if(u==="CREDITO"&&f){const xt={customerId:f,date:p,createdAt:mr.now(),ref:{saleId:ft.id}};await Hn(At(De,"ar_movements"),{...xt,type:"CARGO",amount:Number(j)||0}),Number(_)>0&&await Hn(At(De,"ar_movements"),{...xt,type:"ABONO",amount:-Number(_)})}const ht={};for(const xt of Le)if(xt.qty>0){const{allocations:jt}=await O4e({productId:xt.productId,quantity:xt.qty,saleDate:p,saleId:ft.id});ht[xt.productId]={productId:xt.productId,allocations:jt}}await Cn(Yt(De,"sales_clothes",ft.id),{allocationsByItem:ht}),d("CONTADO"),A(""),m(""),g(new Date().toISOString().slice(0,10)),w([]),I(0),u==="CREDITO"&&f&&a(xt=>xt.map(jt=>jt.id===f?{...jt,balance:(jt.balance||0)+(Number(j)||0)-(Number(_)||0)}:jt)),F(" Venta registrada"),(async()=>{const xt=er(At(De,"inventory_clothes_batches"),ur("remaining",">",0)),jt=await Lt(xt),kt={};jt.forEach(wt=>{const Ve=wt.data(),Pe=Ve.productId||"",be=Number(Ve.remaining||0);Pe&&(kt[Pe]=(kt[Pe]||0)+be)}),c(kt)})()}catch(Le){console.error(Le),F(" Error al guardar la venta")}finally{B(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),i.jsxs("form",{onSubmit:Fe,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:u,onChange:de=>d(de.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),u==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:h,onChange:de=>m(de.target.value)})]}):i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 border p-2 rounded",value:f,onChange:de=>A(de.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),n.map(de=>i.jsxs("option",{value:de.status==="ACTIVO"?de.id:"",disabled:de.status==="BLOQUEADO",children:[de.name," | ",de.phone," | Saldo: ",ux(de.balance||0)]},de.id))]}),i.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>Y(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:ux(G)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:_===0?"":_,onChange:de=>I(Math.max(0,Number(de.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:ux(ne)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:p,onChange:de=>g(de.target.value)})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:v,onChange:async de=>{const we=de.target.value;y(we),await ve(we)},children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),s.map(de=>{const we=b.some(ft=>ft.productId===de.id),Le=l[de.id]||0,Ge=we||Le<=0;return i.jsxs("option",{value:Ge?"":de.id,disabled:Ge,children:[de.name," ",de.sku?` ${de.sku}`:""," ",Le>0?`(disp: ${Le})`:"(sin stock)",we?" (seleccionado)":""]},de.id)})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"border rounded overflow-hidden",children:[i.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[i.jsx("div",{className:"col-span-4",children:"Producto"}),i.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),i.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),i.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),i.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),i.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),i.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),b.length===0?i.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):b.map(de=>{const we=Math.max(0,(de.available||0)-(de.qty||0)),Le=(Number(de.unitPrice)||0)*(de.qty||0),Ge=Math.max(0,Le-(Number(de.discount)||0));return i.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[i.jsx("div",{className:"col-span-4",children:i.jsxs("div",{className:"font-medium",children:[de.productName,de.sku?`  ${de.sku}`:""]})}),i.jsx("div",{className:"col-span-2 text-right",children:ux(de.unitPrice)}),i.jsx("div",{className:"col-span-2 text-right",children:we}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(de.qty)||de.qty===0?"":de.qty,onChange:ft=>V(de.productId,ft.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(de.discount)||de.discount===0?"":de.discount,onChange:ft=>qe(de.productId,ft.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),i.jsx("div",{className:"col-span-1 text-right",children:ux(Ge)}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>ie(de.productId),title:"Quitar producto",children:""})})]},de.productId)})]}),b.length>0&&i.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),i.jsx("span",{className:"font-semibold",children:P})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total: "}),i.jsx("span",{className:"font-semibold",children:ux(j)})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:k,children:k?"Guardando...":"Registrar venta"})})]}),E&&i.jsx("p",{className:"mt-2 text-sm",children:E}),R&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:me,onChange:de=>pe(de.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:he,onChange:de=>ge(WV(de.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:se,onChange:de=>je(de.target.value),children:[i.jsx("option",{value:"",children:""}),R4e.map(de=>i.jsx("option",{value:de,children:de},de))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:K,onChange:de=>z(de.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Q===0?"":Q,onChange:de=>J(Math.max(0,Number(de.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Te,onChange:de=>D(de.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ee(),Y(!1)},children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(F(""),!me.trim()){F("Ingresa el nombre del nuevo cliente.");return}const de=WV(he);try{const we=await Hn(At(De,"customers_clothes"),{name:me.trim(),phone:de,place:se||"",notes:Te||"",status:K,creditLimit:Number(Q||0),createdAt:mr.now()}),Le={id:we.id,name:me.trim(),phone:de,place:se||"",status:K,creditLimit:Number(Q||0),balance:0};a(Ge=>[Le,...Ge]),A(we.id),ee(),Y(!1),F(" Cliente creado")}catch(we){console.error(we),F(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),k&&i.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[i.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const ro=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function lE(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?jr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function U4e(t,e){const r=lE(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(o=>({productId:String(o.productId||""),productName:String(o.productName||""),sku:o.sku||"",qty:Number(o.qty||0),unitPrice:Number(o.unitPrice??(Number(o.total||0)/Math.max(1,Number(o.qty||0))||0)),discount:Number(o.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},a=Number(t.quantity??n.qty??0),s=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??s??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:a,unitPrice:Number(n.unitPrice??(s&&a?s/a:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function Q4e(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let o=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const A=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(o+=A*f.cost),f.qtyLeft-=A,d-=A}}return o}function V4e(){const{refreshKey:t,refresh:e}=vc(),[r,n]=x.useState(jr(wd(new Date),"yyyy-MM-dd")),[a,s]=x.useState(jr(bd(new Date),"yyyy-MM-dd")),[o,l]=x.useState([]),[c,u]=x.useState([]),[d,f]=x.useState([]),[A,h]=x.useState([]),[m,p]=x.useState([]),[g,v]=x.useState([]),[y,b]=x.useState(!0),[w,P]=x.useState(""),[j,_]=x.useState(!1),[I,E]=x.useState(null),[F,k]=x.useState([]),[B,R]=x.useState(!1),[Y,me]=x.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});x.useEffect(()=>{(async()=>{b(!0),P("");try{const D=await Lt(At(De,"sales_clothes")),K=[],z=[];D.forEach(ie=>{const re=ie.data(),Fe=U4e(re,ie.id);Fe&&(Fe.date<=a&&K.push(Fe),Fe.date>=r&&Fe.date<=a&&z.push(Fe))}),u(K),l(z);const Q=await Lt(At(De,"inventory_clothes_batches")),J=[];Q.forEach(ie=>{const re=ie.data(),Fe=lE(re);!Fe||Fe>a||J.push({id:ie.id,productId:re.productId,productName:re.productName||"",date:Fe,quantity:Number(re.quantity||0),remaining:Number(re.remaining||0),purchasePrice:Number(re.purchasePrice||0)})}),f(J);const ee=await Lt(At(De,"expenses_clothes")),M=[];ee.forEach(ie=>{const re=ie.data(),Fe=lE(re);Fe&&Fe>=r&&Fe<=a&&M.push({id:ie.id,date:Fe,category:re.category||"",description:re.description||"",amount:Number(re.amount||0),status:re.status||""})}),h(M);const G=await Lt(At(De,"ar_movements")),ne=[],ve={};G.forEach(ie=>{const re=ie.data(),Fe=lE(re);if(!Fe)return;const de=re.customerId,we=Number(re.amount||0);de&&(ve[de]=(ve[de]||0)+we),re.type==="ABONO"&&Fe>=r&&Fe<=a&&ne.push({id:ie.id,customerId:de,type:"ABONO",amount:we,date:Fe})}),p(ne);const V=await Lt(At(De,"customers_clothes")),qe=[];V.forEach(ie=>{const re=ie.data();qe.push({id:ie.id,name:re.name||"",balance:ve[ie.id]||0})}),v(qe)}catch(D){console.error(D),P(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const pe=x.useMemo(()=>{try{return Q4e(d,c,r,a)}catch(D){return console.error(D),0}},[d,c,r,a]),he=x.useMemo(()=>{const D=o.reduce((ve,V)=>ve+(V.total||0),0),K=A.reduce((ve,V)=>ve+(V.amount||0),0),z=D-pe,Q=z-K,J=m.reduce((ve,V)=>ve+Math.abs(V.amount||0),0),ee=g.filter(ve=>(ve.balance||0)>0),M=ee.reduce((ve,V)=>ve+(V.balance||0),0);let G=0,ne=0;for(const ve of o){const V=(ve.items||[]).reduce((qe,ie)=>qe+(Number(ie.qty)||0),0);ve.type==="CONTADO"?G+=V:ne+=V}return{ventasTotales:D,costoMercaderia:pe,gastosPeriodo:K,gananciaAntes:z,gananciaDespues:Q,abonosRecibidos:J,saldosPendientes:M,clientesConSaldo:ee.length,prendasCash:G,prendasCredito:ne}},[o,A,m,g,pe]),ge=x.useMemo(()=>{const D={};for(const K of o){if(K.type!=="CREDITO"||!K.customerId)continue;const z=(K.items||[]).reduce((Q,J)=>Q+(Number(J.qty)||0),0);D[K.customerId]=(D[K.customerId]||0)+z}return g.filter(K=>(K.balance||0)>0).map(K=>({customerId:K.id,name:K.name,prendasCredito:D[K.id]||0,saldo:K.balance||0})).sort((K,z)=>z.saldo-K.saldo)},[g,o]),se=x.useMemo(()=>{const D={};return g.forEach(K=>D[K.id]=K.name),D},[g]),je=x.useMemo(()=>[...o].sort((D,K)=>K.date.localeCompare(D.date)).map(D=>{var Q;const K=(D.items||[]).reduce((J,ee)=>J+(Number(ee.qty)||0),0);let z="Cash";return D.type==="CREDITO"&&D.customerId?z=se[D.customerId]||"":D.type==="CONTADO"&&(z=((Q=D.customerName)==null?void 0:Q.trim())||"Cash"),{id:D.id,date:D.date,type:D.type==="CREDITO"?"Crdito":"Cash",customer:z,piezas:K,total:Number(D.total||0)}}),[o,se]),Te=async D=>{_(!0),E({id:D.customerId,name:D.name}),k([]),R(!0),me({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const K=[];let z=0,Q=0,J=0;for(const ne of o)if(!(ne.type!=="CREDITO"||ne.customerId!==D.customerId))for(const ve of ne.items||[]){const V=Number(ve.qty||0),qe=Number(ve.unitPrice||0),ie=V*qe,re=Math.max(0,Number(ve.discount||0)),Fe=Math.max(0,ie-re);K.push({saleId:ne.id,date:ne.date,productName:ve.productName,sku:ve.sku||"",qty:V,unitPrice:qe,lineTotal:ie,discount:re,lineFinal:Fe}),z+=ie,Q+=re,J+=Fe}let ee=0;for(const ne of m)ne.customerId===D.customerId&&(ee+=Math.abs(ne.amount||0));const M=g.find(ne=>ne.id===D.customerId),G=(M==null?void 0:M.balance)||0;k(K),me({totalBruto:z,totalDescuento:Q,totalFiado:J,saldoActual:G,abonadoPeriodo:ee})}catch(K){console.error(K),P(" No se pudo cargar el detalle del cliente.")}finally{R(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),i.jsx(xc,{onClick:e,loading:y})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:D=>n(D.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:D=>s(D.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:ro(he.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:ro(he.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:ro(he.gananciaAntes)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),i.jsx("div",{className:"text-xl font-semibold",children:ro(he.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:ro(he.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:ro(he.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:ro(he.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:he.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:he.prendasCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),i.jsx("div",{className:"text-xl font-semibold",children:he.prendasCredito})]})]}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):ge.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):ge.map(D=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:D.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Te({customerId:D.customerId,name:D.name}),title:"Ver piezas fiadas del periodo",children:D.prendasCredito})}),i.jsx("td",{className:"p-2 border font-semibold",children:ro(D.saldo)})]},D.customerId))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Piezas"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):je.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):je.map(D=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:D.date}),i.jsx("td",{className:"p-2 border",children:D.customer}),i.jsx("td",{className:"p-2 border",children:D.type}),i.jsx("td",{className:"p-2 border",children:D.piezas}),i.jsx("td",{className:"p-2 border",children:ro(D.total)})]},D.id))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((D,K)=>D.date.localeCompare(K.date)).map(D=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:D.date}),i.jsx("td",{className:"p-2 border",children:D.category||""}),i.jsx("td",{className:"p-2 border",children:D.description?i.jsx("span",{title:D.description,children:D.description.length>40?D.description.slice(0,40)+"":D.description}):""}),i.jsx("td",{className:"p-2 border",children:ro(D.amount)}),i.jsx("td",{className:"p-2 border",children:D.status||""})]},D.id))})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w}),j&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(I==null?void 0:I.name)||""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>_(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:ro(Y.totalBruto)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:ro(Y.totalDescuento)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:ro(Y.totalFiado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:ro(Y.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:ro(Y.abonadoPeriodo)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha compra"}),i.jsx("th",{className:"p-2 border",children:"Pieza"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Cant."}),i.jsx("th",{className:"p-2 border",children:"P. Unit"}),i.jsx("th",{className:"p-2 border",children:"Monto"})," ",i.jsx("th",{className:"p-2 border",children:"Descuento"})," ",i.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),i.jsx("tbody",{children:B?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):F.sort((D,K)=>D.date.localeCompare(K.date)).map((D,K)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:D.date}),i.jsx("td",{className:"p-2 border",children:D.productName}),i.jsx("td",{className:"p-2 border",children:D.sku||""}),i.jsx("td",{className:"p-2 border",children:D.qty}),i.jsx("td",{className:"p-2 border",children:ro(D.unitPrice)}),i.jsx("td",{className:"p-2 border",children:ro(D.lineTotal)}),i.jsx("td",{className:"p-2 border",children:ro(D.discount)}),i.jsx("td",{className:"p-2 border",children:ro(D.lineFinal)})]},`${D.saleId}-${K}`))})]})})]})})]})}const XV=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],MC=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function H4e(){const[t,e]=x.useState(jr(wd(new Date),"yyyy-MM-dd")),[r,n]=x.useState(jr(bd(new Date),"yyyy-MM-dd")),[a,s]=x.useState(jr(new Date,"yyyy-MM-dd")),[o,l]=x.useState(""),[c,u]=x.useState(""),[d,f]=x.useState(0),[A,h]=x.useState("PENDIENTE"),[m,p]=x.useState(""),[g,v]=x.useState([]),[y,b]=x.useState(!0),[w,P]=x.useState(""),[j,_]=x.useState(null),[I,E]=x.useState(""),[F,k]=x.useState(""),[B,R]=x.useState(""),[Y,me]=x.useState(0),[pe,he]=x.useState("PENDIENTE"),[ge,se]=x.useState("");x.useEffect(()=>{(async()=>{b(!0);try{const M=er(At(De,"expenses_clothes"),bn("date","desc")),G=await Lt(M),ne=[];G.forEach(ve=>{const V=ve.data();ne.push({id:ve.id,date:V.date||jr(new Date,"yyyy-MM-dd"),category:V.category||"",description:V.description||"",amount:Number(V.amount||0),status:V.status||"PENDIENTE",notes:V.notes||"",createdAt:V.createdAt??mr.now()})}),v(ne)}catch(M){console.error(M),P(" Error al cargar gastos")}finally{b(!1)}})()},[]);const je=x.useMemo(()=>g.filter(M=>!(t&&M.date<t||r&&M.date>r)),[g,t,r]),Te=x.useMemo(()=>{const M=je.reduce((ve,V)=>ve+(V.amount||0),0),G=je.filter(ve=>ve.status==="PAGADO").reduce((ve,V)=>ve+(V.amount||0),0),ne=M-G;return{total:M,pagado:G,pendiente:ne}},[je]),D=()=>{s(jr(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),h("PENDIENTE"),p("")},K=async M=>{if(M.preventDefault(),P(""),!o){P("Selecciona una categora.");return}if(!c.trim()){P("Ingresa una descripcin.");return}if(!d||d<=0){P("Ingresa un monto vlido.");return}try{const G=await Hn(At(De,"expenses_clothes"),{date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:mr.now()});v(ne=>[{id:G.id,date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:mr.now()},...ne]),D(),P(" Gasto registrado")}catch(G){console.error(G),P(" Error al guardar gasto")}},z=M=>{_(M.id),E(M.date),k(M.category||""),R(M.description||""),me(Number(M.amount||0)),he(M.status||"PENDIENTE"),se(M.notes||"")},Q=()=>{_(null),E(""),k(""),R(""),me(0),he("PENDIENTE"),se("")},J=async()=>{if(j){if(!F){P("Selecciona una categora.");return}if(!B.trim()){P("Ingresa una descripcin.");return}if(!Y||Y<=0){P("Ingresa un monto vlido.");return}try{await Cn(Yt(De,"expenses_clothes",j),{date:I,category:F,description:B.trim(),amount:Number(Y.toFixed(2)),status:pe,notes:ge||""}),v(M=>M.map(G=>G.id===j?{...G,date:I,category:F,description:B.trim(),amount:Number(Y.toFixed(2)),status:pe,notes:ge||""}:G)),Q(),P(" Gasto actualizado")}catch(M){console.error(M),P(" Error al actualizar gasto")}}},ee=async M=>{confirm(`Eliminar el gasto "${M.description}"?`)&&(await Dn(Yt(De,"expenses_clothes",M.id)),v(ne=>ne.filter(ve=>ve.id!==M.id)),P(" Gasto borrado"))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:M=>e(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:M=>n(M.target.value)})]}),i.jsxs("div",{className:"ml-auto text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",MC(Te.total)]}),i.jsxs("div",{children:["Pagado: ",MC(Te.pagado)]}),i.jsxs("div",{children:["Pendiente: ",MC(Te.pendiente)]})]})]}),i.jsxs("form",{onSubmit:K,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:M=>s(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:M=>l(M.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),XV.map(M=>i.jsx("option",{value:M,children:M},M))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:M=>u(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:M=>f(Math.max(0,Number(M.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:M=>h(M.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:M=>p(M.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):je.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):je.slice().sort((M,G)=>M.date.localeCompare(G.date)).map(M=>{const G=j===M.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:G?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:I,onChange:ne=>E(ne.target.value)}):M.date}),i.jsx("td",{className:"p-2 border",children:G?i.jsxs("select",{className:"w-full border p-1 rounded",value:F,onChange:ne=>k(ne.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),XV.map(ne=>i.jsx("option",{value:ne,children:ne},ne))]}):M.category||""}),i.jsx("td",{className:"p-2 border",children:G?i.jsx("input",{className:"w-full border p-1 rounded",value:B,onChange:ne=>R(ne.target.value)}):i.jsx("span",{title:M.description,children:M.description.length>40?M.description.slice(0,40)+"":M.description})}),i.jsx("td",{className:"p-2 border",children:G?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Y)?"":Y,onChange:ne=>me(Math.max(0,Number(ne.target.value||0)))}):MC(M.amount)}),i.jsx("td",{className:"p-2 border",children:G?i.jsxs("select",{className:"w-full border p-1 rounded",value:pe,onChange:ne=>he(ne.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:M.status})}),i.jsx("td",{className:"p-2 border",children:G?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ge,onChange:ne=>se(ne.target.value),maxLength:500}):i.jsx("span",{title:M.notes||"",children:(M.notes||"").length>40?(M.notes||"").slice(0,40)+"":M.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:G?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:J,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Q,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>z(M),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ee(M),children:"Borrar"})]})})})]},M.id)})})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w})]})}const kd=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function $4e(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?jr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function G4e(t,e){const r=$4e(t);if(!r)return null;const n=t.item||{},a=Number((n==null?void 0:n.qty)??t.quantity??0)||0,s=Number((n==null?void 0:n.total)??t.total??0)||0,o=Number((n==null?void 0:n.unitPrice)??(a>0?s/a:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||a||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:a,unitPrice:o,total:a*o}}}async function K4e(t,e){if(e<=0)return;const r=er(At(De,"inventory_clothes_batches"),ur("productId","==",t)),n=await Lt(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((o,l)=>o.date.localeCompare(l.date));let s=e;for(const o of a){if(s<=0)break;if(o.remaining<=0)continue;const l=Math.min(o.remaining,s);s-=l,await Cn(Yt(De,"inventory_clothes_batches",o.id),{remaining:Math.max(0,Number((o.remaining-l).toFixed(0)))})}s>0&&console.warn("consumeFIFO: falt inventario",s)}async function q4e(t,e){if(e<=0)return;const r=er(At(De,"inventory_clothes_batches"),ur("productId","==",t)),n=await Lt(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((o,l)=>o.date.localeCompare(l.date));let s=e;for(const o of a){if(s<=0)break;const l=Math.max(0,o.quantity-o.remaining);if(l<=0)continue;const c=Math.min(l,s);s-=c,await Cn(Yt(De,"inventory_clothes_batches",o.id),{remaining:Number((o.remaining+c).toFixed(0))})}s>0&&console.warn("restoreFIFO: no se devolvi todo",s)}async function $re(t){const e=er(At(De,"ar_movements"),ur("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Dn(Yt(De,"ar_movements",n.id))))}async function z4e(t,e,r){if(await $re(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:mr.now(),ref:{saleId:t.id}},{addDoc:a}=await qh(async()=>{const{addDoc:o}=await Promise.resolve().then(()=>kye);return{addDoc:o}},void 0);await a(At(De,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const s=Math.max(0,Number(r??t.downPayment??0));s>0&&await a(At(De,"ar_movements"),{...n,type:"ABONO",amount:-s})}function W4e(){const[t,e]=x.useState(!1),[r,n]=x.useState(!1),[a,s]=x.useState(null),[o,l]=x.useState([]),c=async ie=>{e(!0),n(!0),s(ie),l([]);try{const Fe=(await Lt(er(At(De,"sales_clothes"),ur("__name__","==",ie)))).docs[0],de=Fe==null?void 0:Fe.data(),Le=(Array.isArray(de==null?void 0:de.items)?de.items:de!=null&&de.item?[de.item]:[]).map(Ge=>({productName:String(Ge.productName||""),qty:Number(Ge.qty||0),unitPrice:Number(Ge.unitPrice||0),discount:Number(Ge.discount||0),total:Number(Ge.total||0)}));l(Le)}catch(re){console.error(re)}finally{n(!1)}},[u,d]=x.useState(jr(new Date,"yyyy-MM-01")),[f,A]=x.useState(jr(new Date,"yyyy-MM-dd")),[h,m]=x.useState([]),[p,g]=x.useState([]),[v,y]=x.useState(!0),[b,w]=x.useState(""),[P,j]=x.useState(""),[_,I]=x.useState(""),[E,F]=x.useState(null),[k,B]=x.useState(!1),[R,Y]=x.useState(null),[me,pe]=x.useState(0),he=15,[ge,se]=x.useState(1),je=x.useMemo(()=>{const ie={};return h.forEach(re=>ie[re.id]=re.name),ie},[h]);x.useEffect(()=>{(async()=>{y(!0),w("");try{const ie=await Lt(At(De,"customers_clothes")),re=[];ie.forEach(we=>re.push({id:we.id,name:we.data().name||""})),m(re);const Fe=await Lt(er(At(De,"sales_clothes"),bn("createdAt","desc"))),de=[];Fe.forEach(we=>{const Le=G4e(we.data(),we.id);Le&&Le.date>=u&&Le.date<=f&&de.push(Le)}),g(de.sort((we,Le)=>Le.date.localeCompare(we.date))),se(1)}catch(ie){console.error(ie),w(" Error cargando transacciones.")}finally{y(!1)}})()},[u,f]);const Te=x.useMemo(()=>p.filter(ie=>!(P&&ie.customerId!==P||_&&ie.type!==_)),[p,P,_]),D=x.useMemo(()=>{let ie=0,re=0,Fe=0,de=0;for(const we of Te)we.type==="CONTADO"?(ie+=we.item.qty,Fe+=we.total):(re+=we.item.qty,de+=we.total);return{piezasCash:ie,piezasCredito:re,montoCash:Fe,montoCredito:de}},[Te]),K=Math.max(1,Math.ceil(Te.length/he)),z=x.useMemo(()=>{const ie=(ge-1)*he;return Te.slice(ie,ie+he)},[Te,ge]),Q=ie=>{F(null),Y(ie),pe(ie.item.qty||0),B(!0)},J=async ie=>{if(F(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await Dk(ie.id),await $re(ie.id),g(re=>re.filter(Fe=>Fe.id!==ie.id)),w(" Venta eliminada")}catch(re){console.error(re),w(" No se pudo eliminar la venta.")}finally{y(!1)}},ee=async()=>{if(!R)return;const ie=Number(R.item.qty||0),re=Math.max(1,Math.floor(Number(me)||0));if(re===ie){B(!1);return}const Fe=Number(R.item.unitPrice||0),de=Number((Fe*re).toFixed(2));try{y(!0);const we=re-ie;we>0?await K4e(R.item.productId,we):we<0&&await q4e(R.item.productId,-we);const Le=Yt(De,"sales_clothes",R.id);await Cn(Le,{quantity:re,total:de,itemsTotal:de,"item.qty":re,"item.total":de,updatedAt:mr.now()});const Ge=Math.min(Number(R.downPayment||0),de);await z4e(R,de,Ge),g(ft=>ft.map(ht=>ht.id===R.id?{...ht,quantity:re,total:de,item:{...ht.item,qty:re,total:de},downPayment:Ge}:ht)),w(" Venta actualizada"),B(!1)}catch(we){console.error(we),w(" No se pudo actualizar la venta.")}finally{y(!1)}},M=()=>{const ie=`Reporte de transacciones (Ropa)  ${u} a ${f}`,re=Le=>(Le||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Fe=Te.map(Le=>{const Ge=Le.customerName||(Le.customerId?je[Le.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Le.date}</td>
          <td>${re(Ge)}</td>
          <td>${Le.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Le.item.qty}</td>
          <td style="text-align:right">${kd(Le.total)}</td>
        </tr>`}).join(""),de=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${re(ie)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${re(ie)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${D.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${D.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${kd(D.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${kd(D.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${Fe||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,we=window.open("","_blank");we&&(we.document.open(),we.document.write(de),we.document.close())},G=()=>se(1),ne=()=>se(ie=>Math.max(1,ie-1)),ve=()=>se(ie=>Math.min(K,ie+1)),V=()=>se(K),qe=()=>{const ie=[];if(K<=7)for(let Fe=1;Fe<=K;Fe++)ie.push(Fe);else{const Fe=Math.max(1,ge-2),de=Math.min(K,ge+2);ie.push(1),Fe>2&&ie.push(-1);for(let we=Fe;we<=de;we++)we!==1&&we!==K&&ie.push(we);de<K-1&&ie.push(-2),ie.push(K)}return i.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:G,disabled:ge===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ne,disabled:ge===1,children:" Anterior"}),ie.map((Fe,de)=>typeof Fe=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${Fe===ge?"bg-blue-600 text-white":""}`,onClick:()=>se(Fe),children:Fe},de):i.jsx("span",{className:"px-2",children:""},de)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ve,disabled:ge===K,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:V,disabled:ge===K,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",ge," de ",K,"  ",Te.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ie=>{d(ie.target.value),se(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:ie=>{A(ie.target.value),se(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:P,onChange:ie=>{j(ie.target.value),se(1)},children:[i.jsx("option",{value:"",children:"Todos"}),h.map(ie=>i.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:_,onChange:ie=>{I(ie.target.value),se(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:M,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:D.piezasCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:D.piezasCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:kd(D.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:kd(D.montoCredito)})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Piezas"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:v?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):z.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):z.map(ie=>{const re=ie.customerName||(ie.customerId?je[ie.customerId]:"")||"Nombre cliente";return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ie.date}),i.jsx("td",{className:"p-2 border",children:re}),i.jsx("td",{className:"p-2 border",children:ie.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>c(ie.id),children:ie.item.qty})}),i.jsx("td",{className:"p-2 border",children:kd(ie.total)}),i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>F(Fe=>Fe===ie.id?null:ie.id),title:"Acciones",children:""}),E===ie.id&&i.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>Q(ie),children:"Editar"}),i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>J(ie),children:"Eliminar"})]})]})]},ie.id)})})]}),qe()]}),b&&i.jsx("p",{className:"mt-2 text-sm",children:b}),k&&R&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[i.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),i.jsxs("div",{className:"font-semibold",children:[R.item.productName," ",R.item.sku?` ${R.item.sku}`:""]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),i.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:me,onChange:ie=>pe(Math.max(1,Math.floor(Number(ie.target.value||0))))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),i.jsx("div",{className:"text-lg font-semibold",children:kd(R.item.unitPrice)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),i.jsx("div",{className:"text-lg font-semibold",children:kd(Number(R.item.unitPrice)*Number(me||0))})]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{B(!1),Y(null)},children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ee,children:"Guardar cambios"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):o.map((ie,re)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:ie.productName}),i.jsx("td",{className:"p-2 border text-right",children:ie.qty}),i.jsx("td",{className:"p-2 border text-right",children:kd(ie.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:kd(ie.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:kd(ie.total)})]},re))})]})})]})})]})}const YV=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Cc=t=>`C$ ${(Number(t)||0).toFixed(2)}`,a0=t=>Math.round((Number(t)||0)*100)/100,X4e=new Set(["PAGADA","PAGADO","CERRADA","CERRADO","LIQUIDADA","LIQUIDADO"]),fy=t=>{const e=String(t||"").trim().toUpperCase();return X4e.has(e)?"PAGADA":"PENDIENTE"};function LC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function JV(t){const e=er(At(De,"ar_movements_pollo"),ur("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Dn(Yt(De,"ar_movements_pollo",n.id))))}function Y4e({role:t="",roles:e,sellerPolloId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),o=mn(a,"vendedor_pollo"),l=mn(a,"admin"),[c,u]=x.useState([]),[d,f]=x.useState(!1),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState(""),[y,b]=x.useState(""),[w,P]=x.useState(!1),[j,_]=x.useState(!1),[I,E]=x.useState(null),[F,k]=x.useState([]),B=async ke=>{var yt;P(!0),_(!0),E(ke),k([]);try{const Nt=await ei(Yt(De,"salesV2",ke));let ct=null;if(Nt.exists()?ct=Nt.data():ct=(yt=(await Lt(er(At(De,"salesV2"),ur("name","==",ke)))).docs[0])==null?void 0:yt.data(),!ct){k([]);return}let Xt=[];if(Array.isArray(ct.items)&&ct.items.length>0)Xt=ct.items;else if(ct.items&&typeof ct.items=="object")try{Xt=Object.values(ct.items)}catch{Xt=[]}else ct.item?Xt=[ct.item]:Array.isArray(ct.products)&&ct.products.length>0?Xt=ct.products:Array.isArray(ct.lines)&&ct.lines.length>0?Xt=ct.lines:Array.isArray(ct.detalles)&&ct.detalles.length>0?Xt=ct.detalles:(ct.productName||ct.product)&&(Xt=[{productName:ct.productName||ct.product||"",qty:ct.qty??ct.quantity??ct.lbs??0,unitPrice:ct.unitPrice??ct.price??0,discount:ct.discount??0,total:ct.total??ct.amount??0}]);const zt=Ar=>{if(Ar==null)return NaN;if(typeof Ar=="number")return Ar;let Qr=String(Ar).trim();if(!Qr)return NaN;if(Qr=Qr.replace(/[^0-9.,-]/g,""),!Qr)return NaN;Qr.indexOf(".")>-1&&Qr.indexOf(",")>-1?Qr=Qr.replace(/,/g,""):Qr.indexOf(",")>-1&&Qr.indexOf(".")===-1&&(Qr=Qr.replace(/,/g,"."));const vn=Number(Qr);return Number.isNaN(vn)?NaN:vn},xr=new Set;for(const Ar of Xt)if(Array.isArray(Ar==null?void 0:Ar.allocations))for(const Qr of Ar.allocations){const vn=String((Qr==null?void 0:Qr.batchId)||"").trim();vn&&xr.add(vn)}else if(Ar!=null&&Ar.allocations&&typeof Ar.allocations=="object")try{for(const Qr of Object.values(Ar.allocations)){const vn=String((Qr==null?void 0:Qr.batchId)||"").trim();vn&&xr.add(vn)}}catch{}if(Array.isArray(ct==null?void 0:ct.allocations))for(const Ar of ct.allocations){const Qr=String((Ar==null?void 0:Ar.batchId)||"").trim();Qr&&xr.add(Qr)}const cr={};xr.size>0&&await Promise.all(Array.from(xr).map(async Ar=>{try{const Qr=await ei(Yt(De,"inventory_batches",Ar));if(Qr.exists()){const vn=Qr.data();cr[Ar]=Number(vn.salePrice??vn.sale_price??vn.price??0)}}catch{}}));const yr=new Set;for(const Ar of Xt){const Qr=String(Ar.productId||"").trim();Qr&&yr.add(Qr)}const Tr={};yr.size>0&&await Promise.all(Array.from(yr).map(async Ar=>{try{const Qr=await ei(Yt(De,"products",Ar));if(Qr.exists()){const vn=Qr.data();Tr[Ar]=Number(vn.salePrice??vn.price??0)}}catch{}}));const sn=Xt.map(Ar=>{const Qr=String(Ar.productName||Ar.product||Ar.name||"(sin nombre)"),vn=Number(Ar.qty??Ar.quantity??Ar.lbs??Ar.weight??0)||0,Aa=zt(Ar.total??Ar.lineFinal??Ar.amount??Ar.monto??Ar.line_total)||0;let On=0;const Vr=[Ar.unitPrice,Ar.unitPricePackage,Ar.salePrice,Ar.sale_price,Ar.price,Ar.unit_price,Ar.pricePerUnit,Ar.price_per_unit];for(const Ls of Vr){const Tn=zt(Ls);if(!Number.isNaN(Tn)&&Tn!==0){On=Tn;break}}if(!On){const Ls=(ct==null?void 0:ct.salePrice)??(ct==null?void 0:ct.sale_price)??(ct==null?void 0:ct.unitPrice)??(ct==null?void 0:ct.unit_price)??(ct==null?void 0:ct.price)??(ct==null?void 0:ct.pricePerUnit),Tn=zt(Ls);!Number.isNaN(Tn)&&Tn!==0&&(On=Tn)}if(!On){const Ls=Array.isArray(Ar.allocations)?Ar.allocations[0]:Ar.allocations&&typeof Ar.allocations=="object"?Object.values(Ar.allocations)[0]:null,Tn=Ls?String(Ls.batchId||"").trim():"";Tn&&cr[Tn]&&(On=cr[Tn]||0)}!On&&Ar.productId&&(On=Tr[String(Ar.productId)]||0),(!On||On===0)&&Aa>0&&vn>0&&(On=Aa/vn);const Yi=zt(Ar.discount??Ar.desc??0)||0;let Ms=Aa;return(!Ms||Ms===0)&&(Ms=Number(On*vn||0)),Ms=Number(Ms)||0,{productName:Qr,qty:vn,unitPrice:On,discount:Yi,total:Ms}});k(sn)}catch(Nt){console.error(Nt)}finally{_(!1)}},[R,Y]=x.useState(""),[me,pe]=x.useState("+505 "),[he,ge]=x.useState(""),[se,je]=x.useState(""),[Te,D]=x.useState("ACTIVO"),[K,z]=x.useState(0),[Q,J]=x.useState(""),[ee,M]=x.useState(0),[G,ne]=x.useState([]),[ve,V]=x.useState(!0),[qe,ie]=x.useState(""),[re,Fe]=x.useState(null),[de,we]=x.useState(""),[Le,Ge]=x.useState("+505 "),[ft,ht]=x.useState(""),[xt,jt]=x.useState(""),[kt,wt]=x.useState("ACTIVO"),[Ve,Pe]=x.useState(0),[be,ce]=x.useState(""),[te,Ne]=x.useState(!1),[Re,ye]=x.useState(null),[Xe,mt]=x.useState(!1),[rt,ue]=x.useState([]),[_e,We]=x.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[ot,Ce]=x.useState(!1),[$e,gt]=x.useState(0),[Kt,Ut]=x.useState(new Date().toISOString().slice(0,10)),[Jt,it]=x.useState(""),[X,oe]=x.useState(!1),[L,Ae]=x.useState(null),[Ee,Oe]=x.useState(""),[Be,S]=x.useState(0),[O,U]=x.useState(""),[q,ae]=x.useState(null),[fe,Ue]=x.useState(!1),[Ze,lt]=x.useState(null),[Qe,tt]=x.useState(!1),[ut,Pt]=x.useState(!1),[Ct,It]=x.useState(null);x.useEffect(()=>{(async()=>{try{if(V(!0),o&&!s){ne([]),ie(" Este usuario no tiene vendedor asociado (sellerPolloId vaco).");return}const ke=await Lt(At(De,"sellers_candies")),yt=[];ke.forEach(zt=>{const xr=zt.data();yt.push({id:zt.id,name:String(xr.name||"")})}),u(yt);const Nt=o?er(At(De,"customers_pollo"),ur("vendorId","==",s),bn("createdAt","desc")):er(At(De,"customers_pollo"),bn("createdAt","desc")),ct=await Lt(Nt),Xt=[];ct.forEach(zt=>{const xr=zt.data();Xt.push({id:zt.id,name:xr.name??"",phone:xr.phone??"+505 ",place:xr.place??"",notes:xr.notes??"",status:xr.status??"ACTIVO",creditLimit:Number(xr.creditLimit??0),createdAt:xr.createdAt??mr.now(),balance:0,vendorId:xr.vendorId||"",vendorName:xr.vendorName||"",initialDebt:Number(xr.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const zt of Xt)try{const xr=er(At(De,"ar_movements_pollo"),ur("customerId","==",zt.id)),cr=await Lt(xr);let yr=0,Tr=null,sn=!1;cr.forEach(Aa=>{var Yi,Ms,Ls;const On=Aa.data(),Vr=Number(On.amount||0);if(yr+=Vr,Vr>0&&fy(On.debtStatus??On.creditStatus??On.cycleStatus??On.status)==="PENDIENTE"&&(sn=!0),Vr<0){const Tn=On.date??((Ms=(Yi=On.createdAt)==null?void 0:Yi.toDate)!=null&&Ms.call(Yi)?On.createdAt.toDate().toISOString().slice(0,10):""),ii=(Ls=On.createdAt)!=null&&Ls.seconds?Number(On.createdAt.seconds):0;(!Tr||ii>=Tr.ts)&&(Tr={date:Tn,amount:Math.abs(Vr),ts:ii})}});const Ar=Number(zt.initialDebt||0),Qr=a0(Ar+yr);zt.balance=Qr,(sn||Qr>0)&&Tr?(zt.lastAbonoDate=Tr.date,zt.lastAbonoAmount=Tr.amount):(zt.lastAbonoDate="",zt.lastAbonoAmount=0)}catch{zt.balance=Number(zt.initialDebt||0),zt.lastAbonoDate="",zt.lastAbonoAmount=0}ne(Xt)}catch(ke){console.error(ke),ie(" Error cargando clientes.")}finally{V(!1)}})()},[o,s]);const St=()=>{Y(""),pe("+505 "),ge(""),je(""),D("ACTIVO"),z(0),J(""),M(0)},Zt=async ke=>{var Xt;if(ke.preventDefault(),ie(""),!R.trim()){ie("Ingresa el nombre.");return}const yt=LC(me);if(yt.length<6){ie("Telfono incompleto.");return}const Nt=o?s:String(Q||""),ct=Nt&&((Xt=c.find(zt=>zt.id===Nt))==null?void 0:Xt.name)||"";try{const zt=Number(ee||0),xr=await Hn(At(De,"customers_pollo"),{name:R.trim(),phone:yt,place:he||"",notes:se||"",status:Te,creditLimit:Number(K||0),vendorId:Nt,vendorName:ct,initialDebt:zt,createdAt:mr.now()});ne(cr=>[{id:xr.id,name:R.trim(),phone:yt,place:he||"",notes:se||"",status:Te,creditLimit:Number(K||0),vendorId:Nt,vendorName:ct,initialDebt:zt,createdAt:mr.now(),balance:zt,lastAbonoDate:"",lastAbonoAmount:0},...cr]),St(),Ue(!1),ie(" Cliente creado")}catch(zt){console.error(zt),ie(" Error al crear cliente")}},Er=ke=>{if(o){ie(" No permitido: vendedores no editan clientes desde el listado.");return}Fe(ke.id),we(ke.name),Ge(ke.phone||"+505 "),ht(ke.place||""),jt(ke.notes||""),wt(ke.status||"ACTIVO"),Pe(Number(ke.creditLimit||0)),ce(String(ke.vendorId||""))},Nr=()=>{Fe(null),we(""),Ge("+505 "),ht(""),jt(""),wt("ACTIVO"),Pe(0),ce("")},Dr=async()=>{var xr;if(o){ie(" No permitido.");return}if(!re)return;const ke=LC(Le);if(!de.trim()){ie("Ingresa el nombre.");return}const yt=G.find(cr=>cr.id===re),Nt=String((yt==null?void 0:yt.vendorId)||""),ct=o?s:String(be||"");if(o&&Nt&&Nt!==s){ie(" Este cliente pertenece a otro vendedor.");return}if(l&&Nt&&ct&&Nt!==ct){ie(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const Xt=o?s:String(be||""),zt=Xt&&((xr=c.find(cr=>cr.id===Xt))==null?void 0:xr.name)||"";try{await Cn(Yt(De,"customers_pollo",re),{name:de.trim(),phone:ke,place:ft||"",notes:xt||"",status:kt,creditLimit:Number(Ve||0),vendorId:Xt,vendorName:zt}),ne(cr=>cr.map(yr=>yr.id===re?{...yr,name:de.trim(),phone:ke,place:ft||"",notes:xt||"",status:kt,creditLimit:Number(Ve||0),vendorId:Xt,vendorName:zt}:yr)),Nr(),ie(" Cliente actualizado")}catch(cr){console.error(cr),ie(" Error al actualizar")}},nn=async ke=>{if(confirm(`Eliminar al cliente "${ke.name}"?
Se borrarn todas sus ventas y movimientos.`))try{V(!0);const Nt=er(At(De,"salesV2"),ur("customerId","==",ke.id)),ct=await Lt(Nt);for(const xr of ct.docs){const cr=xr.id;try{await Dn(Yt(De,"salesV2",cr))}catch(yr){console.warn("delete sale error",yr)}await JV(cr)}const Xt=er(At(De,"ar_movements_pollo"),ur("customerId","==",ke.id)),zt=await Lt(Xt);await Promise.all(zt.docs.map(xr=>Dn(Yt(De,"ar_movements_pollo",xr.id)))),await Dn(Yt(De,"customers_pollo",ke.id)),ne(xr=>xr.filter(cr=>cr.id!==ke.id)),ie(" Cliente eliminado y registros borrados")}catch(Nt){console.error(Nt),ie(" No se pudo eliminar el cliente.")}finally{V(!1)}},pn=(ke,yt)=>{const Nt=ke.reduce((xr,cr)=>xr+(Number(cr.amount)||0),0),ct=ke.filter(xr=>Number(xr.amount)<0).reduce((xr,cr)=>xr+Math.abs(Number(cr.amount)||0),0),Xt=ke.filter(xr=>Number(xr.amount)>0).reduce((xr,cr)=>xr+(Number(cr.amount)||0),0),zt=Number(yt||0)+Nt;We({saldoActual:zt,totalAbonado:ct,totalCargos:Number(yt||0)+Xt,saldoRestante:zt})},Yr=async ke=>{ye(ke),ue([]),We({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),Ne(!0),tt(!1),Pt(!1),It(null),Ce(!1),gt(0),Ut(new Date().toISOString().slice(0,10)),it(""),Ae(null),mt(!0);try{const yt=er(At(De,"ar_movements_pollo"),ur("customerId","==",ke.id)),Nt=await Lt(yt),ct=[];Nt.forEach(Xt=>{var yr,Tr;const zt=Xt.data(),xr=zt.date??((Tr=(yr=zt.createdAt)==null?void 0:yr.toDate)!=null&&Tr.call(yr)?zt.createdAt.toDate().toISOString().slice(0,10):""),cr=Number(zt.amount||0);ct.push({id:Xt.id,date:xr,type:zt.type??(cr<0?"ABONO":"CARGO"),amount:cr,ref:zt.ref||{},comment:zt.comment||"",createdAt:zt.createdAt,debtStatus:fy(zt.debtStatus??zt.creditStatus??zt.cycleStatus??zt.status)})}),ct.sort((Xt,zt)=>{var yr,Tr;if(Xt.date!==zt.date)return Xt.date.localeCompare(zt.date);const xr=((yr=Xt.createdAt)==null?void 0:yr.seconds)||0,cr=((Tr=zt.createdAt)==null?void 0:Tr.seconds)||0;return xr-cr}),ue(ct),pn(ct,Number(ke.initialDebt||0))}catch(yt){console.error(yt),ie(" No se pudo cargar el estado de cuenta")}finally{mt(!1)}},dn=(ke,yt)=>a0(yt||0)>0?!0:ke.some(Nt=>Nt.type==="CARGO"&&fy(Nt.debtStatus)==="PENDIENTE"),Vn=ke=>{const yt=ke.filter(Nt=>Number(Nt.amount)<0).map(Nt=>{var ct;return{date:Nt.date,amount:Math.abs(Number(Nt.amount||0)),ts:((ct=Nt.createdAt)==null?void 0:ct.seconds)||0}}).sort((Nt,ct)=>(Nt.ts||0)-(ct.ts||0));return yt.length?yt[yt.length-1]:null},an=async()=>{if(!Re)return;ie("");const ke=Number($e||0);if(!(ke>0)){ie("Ingresa un monto de abono mayor a 0.");return}const yt=parseFloat(ke.toFixed(2));if(!Kt){ie("Selecciona la fecha del abono.");return}try{oe(!0);const Nt={customerId:Re.id,type:"ABONO",amount:-yt,date:Kt,comment:Jt||"",createdAt:mr.now()},Xt={id:(await Hn(At(De,"ar_movements_pollo"),Nt)).id,date:Kt,type:"ABONO",amount:-yt,comment:Jt||"",createdAt:mr.now()},zt=[...rt,Xt].sort((Tr,sn)=>{var vn,Aa;if(Tr.date!==sn.date)return Tr.date.localeCompare(sn.date);const Ar=((vn=Tr.createdAt)==null?void 0:vn.seconds)||0,Qr=((Aa=sn.createdAt)==null?void 0:Aa.seconds)||0;return Ar-Qr});ue(zt),pn(zt,Number(Re.initialDebt||0));const xr=zt.reduce((Tr,sn)=>Tr+(Number(sn.amount)||0),0),cr=a0(Number(Re.initialDebt||0)+xr),yr=dn(zt,cr);ne(Tr=>Tr.map(sn=>{if(sn.id!==Re.id)return sn;const Ar=a0((sn.balance||0)-yt);return{...sn,balance:Ar,lastAbonoDate:yr?Kt:"",lastAbonoAmount:yr?yt:0}})),ye(Tr=>Tr&&{...Tr,balance:a0((Tr.balance||0)-yt),lastAbonoDate:yr?Kt:"",lastAbonoAmount:yr?yt:0}),gt(0),it(""),Ut(new Date().toISOString().slice(0,10)),Ce(!1),ie(" Abono registrado")}catch(Nt){console.error(Nt),ie(" Error al registrar el abono")}finally{oe(!1)}},Je=ke=>{Ae(ke.id),Oe(ke.date||new Date().toISOString().slice(0,10)),S(Math.abs(Number(ke.amount||0))),U(ke.comment||"")},Bt=()=>{Ae(null),Oe(""),S(0),U("")},Ft=async()=>{if(!L||!Re)return;const ke=rt.findIndex(Xt=>Xt.id===L);if(ke===-1)return;const yt=rt[ke],Nt=Number(Be||0);if(!(Nt>0)){ie("El monto debe ser mayor a 0.");return}const ct=yt.type==="ABONO"?-parseFloat(Nt.toFixed(2)):+parseFloat(Nt.toFixed(2));try{await Cn(Yt(De,"ar_movements_pollo",L),{date:Ee,amount:ct,comment:O||""});const Xt=[...rt];Xt[ke]={...yt,date:Ee,amount:ct,comment:O||""},Xt.sort((Tr,sn)=>{var vn,Aa;if(Tr.date!==sn.date)return Tr.date.localeCompare(sn.date);const Ar=((vn=Tr.createdAt)==null?void 0:vn.seconds)||0,Qr=((Aa=sn.createdAt)==null?void 0:Aa.seconds)||0;return Ar-Qr}),ue(Xt),pn(Xt,Number(Re.initialDebt||0));const zt=Xt.reduce((Tr,sn)=>Tr+(Number(sn.amount)||0),0),xr=a0(Number(Re.initialDebt||0)+zt),cr=dn(Xt,xr),yr=cr?Vn(Xt):null;ne(Tr=>Tr.map(sn=>sn.id===Re.id?{...sn,balance:xr,lastAbonoDate:cr&&yr?yr.date:"",lastAbonoAmount:cr&&yr?yr.amount:0}:sn)),ye(Tr=>Tr&&{...Tr,balance:xr,lastAbonoDate:cr&&yr?yr.date:"",lastAbonoAmount:cr&&yr?yr.amount:0}),Bt(),ie(" Movimiento actualizado")}catch(Xt){console.error(Xt),ie(" Error al actualizar movimiento")}},hr=async ke=>{var Nt,ct;if(confirm(`Eliminar este movimiento (${ke.type==="ABONO"?"Abono":"Compra"}) del ${ke.date}?${ke.type==="CARGO"&&((Nt=ke.ref)!=null&&Nt.saleId)?`
Se borrarn los registros de esa venta.`:""}`)&&Re)try{if(V(!0),ke.type==="CARGO"&&((ct=ke.ref)!=null&&ct.saleId)){try{await Dn(Yt(De,"salesV2",ke.ref.saleId))}catch(Tr){console.warn("delete sale error",Tr),V(!1),ie(" No se pudo borrar la venta asociada.");return}await JV(ke.ref.saleId)}else await Dn(Yt(De,"ar_movements_pollo",ke.id));const Xt=rt.filter(Tr=>{var sn,Ar;return ke.type==="CARGO"&&((sn=ke.ref)!=null&&sn.saleId)?((Ar=Tr.ref)==null?void 0:Ar.saleId)!==ke.ref.saleId:Tr.id!==ke.id});ue(Xt),pn(Xt,Number(Re.initialDebt||0));const zt=Xt.reduce((Tr,sn)=>Tr+(Number(sn.amount)||0),0),xr=a0(Number(Re.initialDebt||0)+zt),cr=dn(Xt,xr),yr=cr?Vn(Xt):null;ne(Tr=>Tr.map(sn=>sn.id===Re.id?{...sn,balance:xr,lastAbonoDate:cr&&yr?yr.date:"",lastAbonoAmount:cr&&yr?yr.amount:0}:sn)),ye(Tr=>Tr&&{...Tr,balance:xr,lastAbonoDate:cr&&yr?yr.date:"",lastAbonoAmount:cr&&yr?yr.amount:0}),It(null),ie(" Movimiento eliminado")}catch(Xt){console.error(Xt),ie(" Error al eliminar movimiento")}finally{V(!1)}},dr=async ke=>{if(ke.type!=="CARGO")return;const yt=fy(ke.debtStatus)==="PAGADA"?"PENDIENTE":"PAGADA";try{ae(ke.id),await Cn(Yt(De,"ar_movements_pollo",ke.id),{debtStatus:yt});const Nt=rt.map(ct=>ct.id===ke.id?{...ct,debtStatus:yt}:ct);if(ue(Nt),Re){pn(Nt,Number(Re.initialDebt||0));const ct=Nt.reduce((cr,yr)=>cr+(Number(yr.amount)||0),0),Xt=a0(Number(Re.initialDebt||0)+ct),zt=dn(Nt,Xt),xr=zt?Vn(Nt):null;ne(cr=>cr.map(yr=>yr.id===Re.id?{...yr,balance:Xt,lastAbonoDate:zt&&xr?xr.date:"",lastAbonoAmount:zt&&xr?xr.amount:0}:yr)),ye(cr=>cr&&{...cr,balance:Xt,lastAbonoDate:zt&&xr?xr.date:"",lastAbonoAmount:zt&&xr?xr.amount:0})}ie(yt==="PAGADA"?" Compra marcada como pagada":" Compra marcada como pendiente")}catch(Nt){console.error(Nt),ie(" No se pudo actualizar el estado de la compra")}finally{ae(null)}},lr=x.useMemo(()=>[...G].sort((ke,yt)=>{var Nt,ct;return ke.status!==yt.status?ke.status==="BLOQUEADO"?1:-1:(((Nt=yt.createdAt)==null?void 0:Nt.seconds)||0)-(((ct=ke.createdAt)==null?void 0:ct.seconds)||0)}),[G]),dt=ke=>ke==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",Et=x.useMemo(()=>{const ke=A.trim().toLowerCase(),yt=g.trim()===""?null:Number(g),Nt=y.trim()===""?null:Number(y);return lr.filter(ct=>{const Xt=!ke||String(ct.name||"").toLowerCase().includes(ke),zt=!m||ct.status===m,xr=Number(ct.balance||0),cr=yt===null||!Number.isNaN(yt)&&xr>=yt,yr=Nt===null||!Number.isNaN(Nt)&&xr<=Nt;return Xt&&zt&&cr&&yr})},[lr,A,m,g,y]),bt=x.useMemo(()=>Et.reduce((ke,yt)=>ke+Number(yt.balance||0),0),[Et]),Tt=x.useMemo(()=>Et.filter(ke=>ke.status==="ACTIVO").length,[Et]),Ht=Et.length,Dt=()=>{h(""),p(""),v(""),b("")};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Pollo)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{Ue(!0),o&&J(s)},type:"button",children:"Crear Cliente"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-white shadow-sm",children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-600",children:"Saldo pendiente"}),i.jsx("div",{className:"text-2xl font-semibold",children:Cc(bt)}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Calculado sobre los clientes filtrados"})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white shadow-sm",children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-600",children:"Clientes activos"}),i.jsx("div",{className:"text-2xl font-semibold",children:Tt}),i.jsxs("p",{className:"text-[11px] text-gray-500 mt-1",children:["De un total de ",Ht]})]})]}),i.jsxs("div",{className:"bg-white border rounded shadow-sm p-4 mb-4",children:[i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Filtrar cliente"}),i.jsx("input",{className:"w-full border rounded px-3 py-2",placeholder:"Nombre, telfono o nota",value:A,onChange:ke=>h(ke.target.value)})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded border bg-gray-50 hover:bg-gray-100",onClick:()=>f(ke=>!ke),children:d?"Ocultar filtros":"Ms filtros"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded border bg-white hover:bg-gray-50",onClick:Dt,children:"Limpiar"})]})]}),d&&i.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2",value:m,onChange:ke=>p(ke.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"ACTIVO",children:"Activo"}),i.jsx("option",{value:"BLOQUEADO",children:"Bloqueado"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Saldo mnimo"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-3 py-2",value:g,onChange:ke=>v(ke.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Saldo mximo"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-3 py-2",value:y,onChange:ke=>b(ke.target.value),placeholder:"0.00"})]})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:ve?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):Et.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):Et.map(ke=>{var Nt;const yt=re===ke.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(Nt=ke.createdAt)!=null&&Nt.toDate?ke.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border text-left",children:yt?i.jsx("input",{className:"w-full border p-1 rounded",value:de,onChange:ct=>we(ct.target.value)}):i.jsx("div",{className:"font-medium",children:ke.name})}),i.jsx("td",{className:"p-2 border",children:yt?i.jsx("input",{className:"w-full border p-1 rounded",value:Le,onChange:ct=>Ge(LC(ct.target.value))}):ke.phone}),i.jsx("td",{className:"p-2 border",children:yt?i.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:o?s:be,onChange:ct=>ce(ct.target.value),disabled:o,title:"Vendedor asociado",children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(ct=>i.jsx("option",{value:ct.id,children:ct.name},ct.id))]}):ke.vendorName||""}),i.jsx("td",{className:"p-2 border",children:yt?i.jsxs("select",{className:"w-full border p-1 rounded",value:ft,onChange:ct=>ht(ct.target.value),children:[i.jsx("option",{value:"",children:""}),YV.map(ct=>i.jsx("option",{value:ct,children:ct},ct))]}):ke.place||""}),i.jsx("td",{className:"p-2 border",children:yt?i.jsxs("select",{className:"w-full border p-1 rounded",value:kt,onChange:ct=>wt(ct.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${dt(ke.status)}`,children:ke.status})}),i.jsx("td",{className:"p-2 border",children:yt?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ve)?"":Ve,onChange:ct=>Pe(Math.max(0,Number(ct.target.value||0)))}):Cc(ke.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:Cc(ke.balance||0)}),i.jsx("td",{className:"p-2 border",children:yt?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:xt,onChange:ct=>jt(ct.target.value),maxLength:500}):i.jsx("span",{title:ke.notes||"",children:(ke.notes||"").length>40?(ke.notes||"").slice(0,40)+"":ke.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:yt?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Dr,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Nr,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Er(ke),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>nn(ke),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Yr(ke),children:"Estado de cuenta"})]})})})]},ke.id)})})]})}),i.jsx("div",{className:"md:hidden space-y-2",children:ve?i.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Cargando"}):Et.length===0?i.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Sin clientes"}):Et.map(ke=>i.jsxs("div",{className:"border rounded-lg bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-base",children:ke.name}),i.jsx("div",{className:"text-xs text-gray-600",children:ke.phone||""}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Vendedor:"," ",i.jsx("span",{className:"font-medium",children:ke.vendorName||""})]})]}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${dt(ke.status)}`,children:ke.status})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Saldo"}),i.jsx("div",{className:"font-semibold",children:Cc(ke.balance||0)})]}),i.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Lmite"}),i.jsx("div",{className:"font-semibold",children:Cc(ke.creditLimit||0)})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["ltimo abono:"," ",i.jsx("span",{className:"font-medium",children:ke.lastAbonoDate?`${ke.lastAbonoDate} (${Cc(ke.lastAbonoAmount||0)})`:""})]}),ke.notes?i.jsxs("div",{className:"mt-2 text-xs text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:"Nota:"})," ",(ke.notes||"").length>80?(ke.notes||"").slice(0,80)+"":ke.notes]}):null,i.jsxs("div",{className:"mt-3 flex gap-2 flex-wrap",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",onClick:()=>Yr(ke),children:"Estado de cuenta"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-yellow-600 text-white text-sm",onClick:()=>Er(ke),disabled:o,title:o?"Vendedor no edita":"Editar",children:"Editar"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-red-600 text-white text-sm disabled:opacity-50",onClick:()=>nn(ke),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"})]})]},ke.id))})]}),qe&&i.jsx("p",{className:"mt-2 text-sm",children:qe}),fe&&xu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ue(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ue(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:Zt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:R,onChange:ke=>Y(ke.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:me,onChange:ke=>pe(LC(ke.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:he,onChange:ke=>ge(ke.target.value),children:[i.jsx("option",{value:"",children:""}),YV.map(ke=>i.jsx("option",{value:ke,children:ke},ke))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Te,onChange:ke=>D(ke.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o?s:Q,onChange:ke=>J(ke.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(ke=>i.jsx("option",{value:ke.id,children:ke.name},ke.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ee===0?"":ee,onChange:ke=>M(Math.max(0,Number(ke.target.value||0))),placeholder:"Ej: 1500"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:K===0?"":K,onChange:ke=>z(Math.max(0,Number(ke.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:se,onChange:ke=>je(ke.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[se.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ue(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),te&&xu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[50]",style:{zIndex:50},children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ne(!1)}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-full max-w-5xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 gap-3",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(Re==null?void 0:Re.name)||""]}),i.jsxs("div",{className:"flex gap-2 shrink-0",children:[i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{gt(0),Ut(new Date().toISOString().slice(0,10)),it(""),Ce(!0)},children:"Abonar"}),i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),i.jsx("div",{className:"text-xl font-semibold",children:Cc(Number((Re==null?void 0:Re.initialDebt)||0))})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Cc(_e.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:Cc(_e.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:Cc(_e.saldoRestante)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Estado compra"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:Xe?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):rt.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):rt.map(ke=>{var ct;const yt=L===ke.id,Nt=fy(ke.debtStatus);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:yt?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Ee,onChange:Xt=>Oe(Xt.target.value)}):ke.date||""}),i.jsx("td",{className:"p-2 border",children:ke.amount>=0?(ct=ke.ref)!=null&&ct.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",onClick:()=>B(ke.ref.saleId),children:"COMPRA (Ver detalle)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (Ver detalle)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:ke.type==="CARGO"?i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Nt==="PAGADA"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:Nt==="PAGADA"?"Pagada":"Pendiente"}):""}),i.jsx("td",{className:"p-2 border",children:yt?i.jsx("input",{className:"w-full border p-1 rounded",value:O,onChange:Xt=>U(Xt.target.value)}):i.jsx("span",{title:ke.comment||"",children:(ke.comment||"").length>40?(ke.comment||"").slice(0,40)+"":ke.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:yt?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Be)?"":Be,onChange:Xt=>S(Number(Xt.target.value||0))}):Cc(ke.amount)}),i.jsx("td",{className:"p-2 border",children:yt?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ft,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Bt,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Je(ke),children:"Editar"}),ke.type==="CARGO"&&i.jsx("button",{type:"button",className:`px-2 py-1 rounded text-white ${Nt==="PAGADA"?"bg-gray-600 hover:bg-gray-700":"bg-emerald-600 hover:bg-emerald-700"} disabled:opacity-50`,onClick:()=>dr(ke),disabled:q===ke.id,children:Nt==="PAGADA"?"Marcar pendiente":"Marcar pagada"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>hr(ke),children:"Borrar"})]})})]},ke.id)})})]})})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",style:{zIndex:60},children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," "]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>P(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:j?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):F.map((ke,yt)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:ke.productName}),i.jsx("td",{className:"p-2 border text-right",children:ke.qty}),i.jsx("td",{className:"p-2 border text-right",children:Cc(ke.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Cc(ke.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Cc(ke.total)})]},yt))})]})})]})})]}),document.body),ot&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[90]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(Re==null?void 0:Re.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Kt,onChange:ke=>Ut(ke.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:$e===0?"":$e,onChange:ke=>{const yt=Number(ke.target.value||0),Nt=Number.isFinite(yt)?Math.max(0,parseFloat(yt.toFixed(2))):0;gt(Nt)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Jt,onChange:ke=>it(ke.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[Jt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ce(!1),disabled:X,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:an,disabled:X,children:X?"Guardando...":"Guardar abono"})]})]})})]})}function J4e(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function Z4e(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var e3e=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t3e=function(t){e3e(e,t);function e(r,n){var a=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),J4e(s,a.prototype),Z4e(s),s}return e}(Error),r3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hc=function(t){r3e(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(t3e),n3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ii=function(t){n3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Hc),a3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xn=function(t){a3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Hc),Gre=function(){function t(e){if(this.binarizer=e,e===null)throw new xn("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var s=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),s3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qi=function(t){s3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Hc),i3e=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),ds=function(){function t(){}return t.arraycopy=function(e,r,n,a,s){for(;s--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),o3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k6=function(t){o3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Hc),l3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZV=function(t){l3e(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(k6),c3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mo=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new xn("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new ZV(r);if(n>e)throw new ZV(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var s=c3e(e),o=s.next();!o.done;o=s.next()){var l=o.value;a=31*a+l}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,s=new Int32Array(a);return ds.arraycopy(e,r,s,0,a),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,s=e.length-1;a<=s;){var o=s+a>>1,l=n(r,e[o]);if(l>0)a=o+1;else if(l<0)s=o-1;else return o}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),Wn=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Lo=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);ds.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=n[a];s&=~((1<<(e&31))-1);for(var o=n.length;s===0;){if(++a===o)return r;s=n[a]}var l=a*32+Wn.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=~n[a];s&=~((1<<(e&31))-1);for(var o=n.length;s===0;){if(++a===o)return r;s=~n[a]}var l=a*32+Wn.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new xn;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),s=this.bits,o=n;o<=a;o++){var l=o>n?0:e&31,c=o<a?31:r&31,u=(2<<c)-(1<<l);s[o]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new xn;if(r===e)return!0;r--;for(var a=Math.floor(e/32),s=Math.floor(r/32),o=this.bits,l=a;l<=s;l++){var c=l>a?0:e&31,u=l<s?31:r&31,d=(2<<u)-(1<<c)&4294967295;if((o[l]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new xn("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new xn("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var s=0;s<a;s++){for(var o=0,l=0;l<8;l++)this.get(e)&&(o|=1<<7-l),e++;r[n+s]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,s=0;s<n;s++){var o=a[s];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-s]=o}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,s=1;s<n;s++){var u=e[s];c|=u<<32-l,e[s-1]=c,c=u>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&mo.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+mo.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),Rk;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Rk||(Rk={}));const fs=Rk;var u3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fr=function(t){u3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Hc),d3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oa;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Oa||(Oa={}));var Ao=function(){function t(e,r,n){for(var a,s,o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,d=c.length;u!==d;u++){var f=c[u];t.VALUES_TO_ECI.set(f,this)}try{for(var A=d3e(o),h=A.next();!h.done;h=A.next()){var m=h.value;t.NAME_TO_ECI.set(m,this)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Fr("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new Fr("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new Fr("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Oa.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Oa.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Oa.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Oa.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Oa.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Oa.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Oa.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Oa.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Oa.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Oa.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Oa.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Oa.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Oa.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Oa.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Oa.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Oa.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Oa.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Oa.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Oa.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Oa.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Oa.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Oa.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Oa.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Oa.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Oa.Big5,28,"Big5"),t.GB18030=new t(Oa.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Oa.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),f3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cE=function(t){f3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Hc),fd=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Ao?e:Ao.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",s=0,o=e.length;s<o;s++){var l=e[s].toString(16);l.length<2&&(l="0"+l),a+="%"+l}return decodeURIComponent(a)}if(n.equals(Ao.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new cE("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Ao.UTF8)||e.equals(Ao.ISO8859_1)||e.equals(Ao.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],s=0;s<n.length;s++)a.push(n[s].charCodeAt(0));return new Uint8Array(a)},t}(),la=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return fd.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(fs.CHARACTER_SET)!==void 0)return r.get(fs.CHARACTER_SET).toString();for(var n=e.length,a=!0,s=!0,o=!0,l=0,c=0,u=0,d=0,f=0,A=0,h=0,m=0,p=0,g=0,v=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<n&&(a||s||o);b++){var w=e[b]&255;o&&(l>0?w&128?l--:o=!1:w&128&&(w&64?(l++,w&32?(l++,w&16?(l++,w&8?o=!1:d++):u++):c++):o=!1)),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&v++),s&&(f>0?w<64||w===127||w>252?s=!1:f--:w===128||w===160||w>239?s=!1:w>160&&w<224?(A++,m=0,h++,h>p&&(p=h)):w>127?(f++,h=0,m++,m>g&&(g=m)):(h=0,m=0))}return o&&l>0&&(o=!1),s&&f>0&&(s=!1),o&&(y||c+u+d>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||p>=3||g>=3)?t.SHIFT_JIS:a&&s?p===2&&A===2||v*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:s?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function s(l,c,u,d,f,A){if(l==="%%")return"%";if(r[++a]!==void 0){l=d?parseInt(d.substr(1)):void 0;var h=f?parseInt(f.substr(1)):void 0,m;switch(A){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(l);break;case"p":m=parseFloat(r[a]).toPrecision(l);break;case"e":m=parseFloat(r[a]).toExponential(l);break;case"x":m=parseInt(r[a]).toString(h||16);break;case"d":m=parseFloat(parseInt(r[a],h||10).toPrecision(l)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(h);for(var p=parseInt(u),g=u&&u[0]+""=="0"?"0":" ";m.length<p;)m=c!==void 0?m+g:g+m;return m}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,s)},t.getBytes=function(e,r){return fd.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Ao.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Ao.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Ao.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),$n=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=la.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),qf=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new xn("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),s=0;s<r;s++)for(var o=e[s],l=0;l<n;l++)o[l]&&a.set(l,s);return a},t.parseFromString=function(e,r,n){if(e===null)throw new xn("stringRepresentation cannot be null");for(var a=new Array(e.length),s=0,o=0,l=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(s>o){if(l===-1)l=s-o;else if(s-o!==l)throw new xn("row lengths do not match");o=s,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[s]=!0,s++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[s]=!1,s++;else throw new xn("illegal character encountered: "+e.substring(u));if(s>o){if(l===-1)l=s-o;else if(s-o!==l)throw new xn("row lengths do not match");c++}for(var d=new t(l,c),f=0;f<s;f++)a[f]&&d.set(Math.floor(f%l),Math.floor(f/l));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new xn("input matrix dimensions do not match");for(var r=new Lo(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,s=0,o=this.height;s<o;s++)for(var l=s*n,c=e.getRow(s,r).getBitArray(),u=0;u<n;u++)a[l+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new xn("Left and top must be nonnegative");if(a<1||n<1)throw new xn("Height and width must be at least 1");var s=e+n,o=r+a;if(o>this.height||s>this.width)throw new xn("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,u=r;u<o;u++)for(var d=u*l,f=e;f<s;f++)c[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new Lo(this.width):r.clear();for(var n=this.rowSize,a=this.bits,s=e*n,o=0;o<n;o++)r.setBulk(o*32,a[s+o]);return r},t.prototype.setRow=function(e,r){ds.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new Lo(e),a=new Lo(e),s=0,o=Math.floor((r+1)/2);s<o;s++)n=this.getRow(s,n),a=this.getRow(r-1-s,a),n.reverse(),a.reverse(),this.setRow(s,a),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,s=e,o=r,l=-1,c=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var f=a[u*n+d];if(f!==0){if(u<o&&(o=u),u>c&&(c=u),d*32<s){for(var A=0;!(f<<31-A&4294967295);)A++;d*32+A<s&&(s=d*32+A)}if(d*32+31>l){for(var A=31;!(f>>>A);)A--;d*32+A>l&&(l=d*32+A)}}}return l<s||c<o?null:Int32Array.from([s,o,l-s+1,c-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,s=n%e*32,o=r[n],l=0;!(o<<31-l&4294967295);)l++;return s+=l,Int32Array.from([s,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),s=Math.floor(n%e)*32,o=r[n],l=31;!(o>>>l);)l--;return s+=l,Int32Array.from([s,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&mo.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+mo.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new $n,s=0,o=this.height;s<o;s++){for(var l=0,c=this.width;l<c;l++)a.append(this.get(l,s)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),h3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tr=function(t){h3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Hc),A3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m3e=function(t){A3e(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),s=a.getWidth();n==null||n.getSize()<s?n=new Lo(s):n.clear(),this.initArrays(s);for(var o=a.getRow(r,this.luminances),l=this.buckets,c=0;c<s;c++)l[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(l);if(s<3)for(var c=0;c<s;c++)(o[c]&255)<u&&n.set(c);else for(var d=o[0]&255,f=o[1]&255,c=1;c<s-1;c++){var A=o[c+1]&255;(f*4-d-A)/2<u&&n.set(c),d=f,f=A}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),s=new qf(n,a);this.initArrays(n);for(var o=this.buckets,l=1;l<5;l++)for(var c=Math.floor(a*l/5),u=r.getRow(c,this.luminances),d=Math.floor(n*4/5),f=Math.floor(n/5);f<d;f++){var A=u[f]&255;o[A>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(o),m=r.getMatrix(),l=0;l<a;l++)for(var p=l*n,f=0;f<n;f++){var A=m[p+f]&255;A<h&&s.set(f,l)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,s=0,o=0,l=0;l<n;l++)r[l]>o&&(s=l,o=r[l]),r[l]>a&&(a=r[l]);for(var c=0,u=0,l=0;l<n;l++){var d=l-s,f=r[l]*d*d;f>u&&(c=l,u=f)}if(s>c){var A=s;s=c,c=A}if(c-s<=n/16)throw new tr;for(var h=c-1,m=-1,l=c-1;l>s;l--){var p=l-s,f=p*p*(c-l)*(a-r[l]);f>m&&(h=l,m=f)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(i3e),p3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kre=function(t){p3e(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&o++;var l=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&l++;var c=e.calculateBlackPoints(s,o,l,n,a),u=new qf(n,a);e.calculateThresholdForBlock(s,o,l,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,s,o,l,c){for(var u=o-e.BLOCK_SIZE,d=s-e.BLOCK_SIZE,f=0;f<a;f++){var A=f<<e.BLOCK_SIZE_POWER;A>u&&(A=u);for(var h=e.cap(f,2,a-3),m=0;m<n;m++){var p=m<<e.BLOCK_SIZE_POWER;p>d&&(p=d);for(var g=e.cap(m,2,n-3),v=0,y=-2;y<=2;y++){var b=l[h+y];v+=b[g-2]+b[g-1]+b[g]+b[g+1]+b[g+2]}var w=v/25;e.thresholdBlock(r,p,A,w,s,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,s,o,l){for(var c=0,u=a*o+n;c<e.BLOCK_SIZE;c++,u+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=s&&l.set(n+d,a+c)},e.calculateBlackPoints=function(r,n,a,s,o){for(var l=o-e.BLOCK_SIZE,c=s-e.BLOCK_SIZE,u=new Array(a),d=0;d<a;d++){u[d]=new Int32Array(n);var f=d<<e.BLOCK_SIZE_POWER;f>l&&(f=l);for(var A=0;A<n;A++){var h=A<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var m=0,p=255,g=0,v=0,y=f*s+h;v<e.BLOCK_SIZE;v++,y+=s){for(var b=0;b<e.BLOCK_SIZE;b++){var w=r[y+b]&255;m+=w,w<p&&(p=w),w>g&&(g=w)}if(g-p>e.MIN_DYNAMIC_RANGE)for(v++,y+=s;v<e.BLOCK_SIZE;v++,y+=s)for(var b=0;b<e.BLOCK_SIZE;b++)m+=r[y+b]&255}var P=m>>e.BLOCK_SIZE_POWER*2;if(g-p<=e.MIN_DYNAMIC_RANGE&&(P=p/2,d>0&&A>0)){var j=(u[d-1][A]+2*u[d][A-1]+u[d-1][A-1])/4;p<j&&(P=j)}u[d][A]=P}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(m3e),Bw=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new cE("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new cE("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new cE("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new $n,n=0;n<this.height;n++){for(var a=this.getRow(n,e),s=0;s<this.width;s++){var o=a[s]&255,l=void 0;o<64?l="#":o<128?l="+":o<192?l=".":l=" ",r.append(l)}r.append(`
`)}return r.toString()},t}(),g3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xj=function(t){g3e(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),s=this.getWidth(),o=0;o<s;o++)a[o]=255-(a[o]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=255-(r[s]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,s){return new e(this.delegate.crop(r,n,a,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Bw),x3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v3e=function(t){x3e(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,s){s===void 0&&(s=!1);var o=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var l=0,c=0,u=r.length;l<u;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var A=r[l],h=r[l+1],m=r[l+2];d=306*A+601*h+117*m+512>>10}o[c]=d}else for(var l=0,c=0,p=r.length;l<p;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var A=r[l],h=r[l+1],m=r[l+2];d=306*A+601*h+117*m+512>>10}o[c]=255-d}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new xn("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(s))*o+Math.abs(Math.sin(s))*l),u=Math.ceil(Math.abs(Math.sin(s))*o+Math.abs(Math.cos(s))*l);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(s),a.drawImage(this.canvas,o/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Xj(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Bw),y3e=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Zl=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},ec=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},b3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h1=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Zl(this,void 0,void 0,function(){var e,r,n,a,s,o,l,c,u,d,f,A;return ec(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=b3e(e),a=n.next();!a.done;a=n.next())s=a.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device "+(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:o,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(A=n.return)&&A.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Zl(this,void 0,void 0,function(){var e;return ec(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new y3e(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Zl(this,void 0,void 0,function(){var r;return ec(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Zl(this,void 0,void 0,function(){return ec(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Zl(this,void 0,void 0,function(){var n,a;return ec(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Zl(this,void 0,void 0,function(){var n;return ec(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Zl(this,void 0,void 0,function(){var n,a;return ec(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return a=s.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Zl(this,void 0,void 0,function(){return ec(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Zl(this,void 0,void 0,function(){var a,s;return ec(this,function(o){switch(o.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Zl(this,void 0,void 0,function(){var a;return ec(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=s.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Zl(this,void 0,void 0,function(){var a;return ec(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=s.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Zl(this,void 0,void 0,function(){var n;return ec(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Zl(this,void 0,void 0,function(){return ec(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ii("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ii("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Ii("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Ii("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Ii("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Ii("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ii("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ii("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ii("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Ii("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Zl(this,void 0,void 0,function(){return ec(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Zl(this,void 0,void 0,function(){return ec(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(o,l){if(a._stopAsyncDecode){l(new tr("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);o(c)}catch(A){var u=r&&A instanceof tr,d=A instanceof qi||A instanceof Fr,f=d&&n;if(u||f)return setTimeout(s,a._timeBetweenDecodingAttempts,o,l);l(A)}};return new Promise(function(o,l){return s(o,l)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var o=c instanceof qi||c instanceof Fr,l=c instanceof tr;(o||l)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new v3e(n,r),s=new Kre(a);return new Gre(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),Kl=function(){function t(e,r,n,a,s,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=ds.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=s,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=s,this.resultMetadata=null,o==null?this.timestamp=ds.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);ds.arraycopy(r,0,n,0,r.length),ds.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Mk;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Mk||(Mk={}));const gn=Mk;var Lk;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Lk||(Lk={}));const Al=Lk;var Yj=function(){function t(e,r,n,a,s,o){s===void 0&&(s=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Hy=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new xn;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),rm=function(){function t(e,r){if(r.length===0)throw new xn;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),ds.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,s=r.length;a!==s;a++){var o=r[a];n=Hy.addOrSubtract(n,o)}return n}n=r[0];for(var l=r.length,c=this.field,a=1;a<l;a++)n=Hy.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new xn("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),o=n.length-r.length;ds.arraycopy(n,0,s,0,o);for(var l=o;l<n.length;l++)s[l]=Hy.addOrSubtract(r[l-o],n[l]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new xn("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,o=new Int32Array(n+s-1),l=this.field,c=0;c<n;c++)for(var u=r[c],d=0;d<s;d++)o[c+d]=Hy.addOrSubtract(o[c+d],l.multiply(u,a[d]));return new t(l,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),s=this.coefficients,o=0;o<r;o++)a[o]=n.multiply(s[o],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new xn;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,s=new Int32Array(a+e),o=this.field,l=0;l<a;l++)s[l]=o.multiply(n[l],r);return new t(o,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new xn("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new xn("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,s=e.getCoefficient(e.getDegree()),o=r.inverse(s);a.getDegree()>=e.getDegree()&&!a.isZero();){var l=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),o),u=e.multiplyByMonomial(l,c),d=r.buildMonomial(l,c);n=n.addOrSubtract(d),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),w3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qre=function(t){w3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Hc),N3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kc=function(t){N3e(e,t);function e(r,n,a){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=a;for(var o=new Int32Array(n),l=1,c=0;c<n;c++)o[c]=l,l*=2,l>=n&&(l^=r,l&=n-1);s.expTable=o;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[o[c]]=c;return s.logTable=u,s.zero=new rm(s,Int32Array.from([0])),s.one=new rm(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new xn;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new rm(this,a)},e.prototype.inverse=function(r){if(r===0)throw new qre;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Wn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Hy),C3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UC=function(t){C3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Hc),_3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tw=function(t){_3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Hc),Jj=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new rm(n,e),s=new Int32Array(r),o=!0,l=0;l<r;l++){var c=a.evaluateAt(n.exp(l+n.getGeneratorBase()));s[s.length-1-l]=c,c!==0&&(o=!1)}if(!o)for(var u=new rm(n,s),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=d[0],A=d[1],h=this.findErrorLocations(f),m=this.findErrorMagnitudes(A,h),l=0;l<h.length;l++){var p=e.length-1-n.log(h[l]);if(p<0)throw new UC("Bad error location");e[p]=kc.addOrSubtract(e[p],m[l])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=this.field,o=e,l=r,c=s.getZero(),u=s.getOne();l.getDegree()>=(n/2|0);){var d=o,f=c;if(o=l,c=u,o.isZero())throw new UC("r_{i-1} was zero");l=d;for(var A=s.getZero(),h=o.getCoefficient(o.getDegree()),m=s.inverse(h);l.getDegree()>=o.getDegree()&&!l.isZero();){var p=l.getDegree()-o.getDegree(),g=s.multiply(l.getCoefficient(l.getDegree()),m);A=A.addOrSubtract(s.buildMonomial(p,g)),l=l.addOrSubtract(o.multiplyByMonomial(p,g))}if(u=A.multiply(c).addOrSubtract(f),l.getDegree()>=o.getDegree())throw new Tw("Division algorithm failed to reduce polynomial?")}var v=u.getCoefficient(0);if(v===0)throw new UC("sigmaTilde(0) was zero");var y=s.inverse(v),b=u.multiplyScalar(y),w=l.multiplyScalar(y);return[b,w]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,s=this.field,o=1;o<s.getSize()&&a<r;o++)e.evaluateAt(o)===0&&(n[a]=s.inverse(o),a++);if(a!==r)throw new UC("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),s=this.field,o=0;o<n;o++){for(var l=s.inverse(r[o]),c=1,u=0;u<n;u++)if(o!==u){var d=s.multiply(r[u],l),f=d&1?d&-2:d|1;c=s.multiply(c,f)}a[o]=s.multiply(e.evaluateAt(l),s.inverse(c)),s.getGeneratorBase()!==0&&(a[o]=s.multiply(a[o],l))}return a},t}(),tl;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(tl||(tl={}));var eH=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),s=t.convertBoolArrayToByteArray(a),o=t.getEncodedData(a),l=new Yj(s,o,null,null);return l.setNumBits(a.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=tl.UPPER,a=tl.UPPER,s="",o=0;o<r;)if(a===tl.BINARY){if(r-o<5)break;var l=t.readCode(e,o,5);if(o+=5,l===0){if(r-o<11)break;l=t.readCode(e,o,11)+31,o+=11}for(var c=0;c<l;c++){if(r-o<8){o=r;break}var u=t.readCode(e,o,8);s+=la.castAsNonUtf8Char(u),o+=8}a=n}else{var d=a===tl.DIGIT?4:5;if(r-o<d)break;var u=t.readCode(e,o,d);o+=d;var f=t.getCharacter(a,u);f.startsWith("CTRL_")?(n=a,a=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(s+=f,a=n)}return s},t.getTable=function(e){switch(e){case"L":return tl.LOWER;case"P":return tl.PUNCT;case"M":return tl.MIXED;case"D":return tl.DIGIT;case"B":return tl.BINARY;case"U":default:return tl.UPPER}},t.getCharacter=function(e,r){switch(e){case tl.UPPER:return t.UPPER_TABLE[r];case tl.LOWER:return t.LOWER_TABLE[r];case tl.MIXED:return t.MIXED_TABLE[r];case tl.PUNCT:return t.PUNCT_TABLE[r];case tl.DIGIT:return t.DIGIT_TABLE[r];default:throw new Tw("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=kc.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=kc.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=kc.AZTEC_DATA_10):(n=12,r=kc.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),s=e.length/n;if(s<a)throw new Fr;for(var o=e.length%n,l=new Int32Array(s),c=0;c<s;c++,o+=n)l[c]=t.readCode(e,o,n);try{var u=new Jj(r);u.decode(l,s-a)}catch(g){throw new Fr(g)}for(var d=(1<<n)-1,f=0,c=0;c<a;c++){var A=l[c];if(A===0||A===d)throw new Fr;(A===1||A===d-1)&&f++}for(var h=new Array(a*n-f),m=0,c=0;c<a;c++){var A=l[c];if(A===1||A===d-1)h.fill(A>1,m,m+n-1),m+=n-1;else for(var p=n-1;p>=0;--p)h[m++]=(A&1<<p)!==0}return h},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,s=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var l=0;l<s.length;l++)s[l]=l;else for(var c=a+1+2*Wn.truncDivision(Wn.truncDivision(a,2)-1,15),u=a/2,d=Wn.truncDivision(c,2),l=0;l<u;l++){var f=l+Wn.truncDivision(l,15);s[u-l-1]=d-f-1,s[u+l]=d+f+1}for(var l=0,A=0;l<n;l++){for(var h=(n-l)*4+(r?9:12),m=l*2,p=a-1-m,g=0;g<h;g++)for(var v=g*2,y=0;y<2;y++)o[A+v+y]=e.get(s[m+y],s[m+g]),o[A+2*h+v+y]=e.get(s[m+g],s[p-y]),o[A+4*h+v+y]=e.get(s[p-y],s[p-g]),o[A+6*h+v+y]=e.get(s[p-g],s[m+y]);A+=h*8}return o},t.readCode=function(e,r,n){for(var a=0,s=r;s<r+n;s++)a<<=1,e[s]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),ga=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var s=e-n,o=r-a;return Math.sqrt(s*s+o*o)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var s=e[n];r+=s}return r},t}(),Uk=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Zr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*Uk.floatToIntBits(this.x)+Uk.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),s,o,l;if(n>=r&&n>=a?(o=e[0],s=e[1],l=e[2]):a>=n&&a>=r?(o=e[1],s=e[0],l=e[2]):(o=e[2],s=e[0],l=e[1]),this.crossProductZ(s,o,l)<0){var c=s;s=l,l=c}e[0]=s,e[1]=o,e[2]=l},t.distance=function(e,r){return ga.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,s=r.y;return(n.x-a)*(e.y-s)-(n.y-s)*(e.x-a)},t}(),F6=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),E3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S3e=function(t){E3e(e,t);function e(r,n,a,s,o){var l=t.call(this,r,n)||this;return l.compact=a,l.nbDatablocks=s,l.nbLayers=o,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(F6),Qk=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=a-s,this.downInit=a+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new tr}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,s=!1,o=!0,l=!1,c=!1,u=!1,d=!1,f=!1,A=this.width,h=this.height;o;){o=!1;for(var m=!0;(m||!c)&&r<A;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,o=!0,c=!0):c||r++;if(r>=A){s=!0;break}for(var p=!0;(p||!u)&&a<h;)p=this.containsBlackPoint(e,r,a,!0),p?(a++,o=!0,u=!0):u||a++;if(a>=h){s=!0;break}for(var g=!0;(g||!d)&&e>=0;)g=this.containsBlackPoint(n,a,e,!1),g?(e--,o=!0,d=!0):d||e--;if(e<0){s=!0;break}for(var v=!0;(v||!f)&&n>=0;)v=this.containsBlackPoint(e,r,n,!0),v?(n--,o=!0,f=!0):f||n--;if(n<0){s=!0;break}o&&(l=!0)}if(!s&&l){for(var y=r-e,b=null,w=1;b===null&&w<y;w++)b=this.getBlackPointOnSegment(e,a-w,e+w,a);if(b==null)throw new tr;for(var P=null,w=1;P===null&&w<y;w++)P=this.getBlackPointOnSegment(e,n+w,e+w,n);if(P==null)throw new tr;for(var j=null,w=1;j===null&&w<y;w++)j=this.getBlackPointOnSegment(r,n+w,r-w,n);if(j==null)throw new tr;for(var _=null,w=1;_===null&&w<y;w++)_=this.getBlackPointOnSegment(r,a-w,r-w,a);if(_==null)throw new tr;return this.centerEdges(_,b,j,P)}else throw new tr},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var s=ga.round(ga.distance(e,r,n,a)),o=(n-e)/s,l=(a-r)/s,c=this.image,u=0;u<s;u++){var d=ga.round(e+u*o),f=ga.round(r+u*l);if(c.get(d,f))return new Zr(d,f)}return null},t.prototype.centerEdges=function(e,r,n,a){var s=e.getX(),o=e.getY(),l=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),f=a.getX(),A=a.getY(),h=t.CORR;return s<this.width/2?[new Zr(f-h,A+h),new Zr(l+h,c+h),new Zr(u-h,d-h),new Zr(s+h,o-h)]:[new Zr(f+h,A+h),new Zr(l+h,c-h),new Zr(u-h,d+h),new Zr(s-h,o-h)]},t.prototype.containsBlackPoint=function(e,r,n,a){var s=this.image;if(a){for(var o=e;o<=r;o++)if(s.get(o,n))return!0}else for(var l=e;l<=r;l++)if(s.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),tH=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),s=!0,o=0;o<r.length&&s;o+=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>a)throw new tr;s=!1,l===-1?(r[o]=0,s=!0):l===n&&(r[o]=n-1,s=!0),c===-1?(r[o+1]=0,s=!0):c===a&&(r[o+1]=a-1,s=!0)}s=!0;for(var o=r.length-2;o>=0&&s;o-=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>a)throw new tr;s=!1,l===-1?(r[o]=0,s=!0):l===n&&(r[o]=n-1,s=!0),c===-1?(r[o+1]=0,s=!0):c===a&&(r[o+1]=a-1,s=!0)}},t}(),zre=function(){function t(e,r,n,a,s,o,l,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=s,this.a32=o,this.a13=l,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,s,o,l,c,u,d,f,A,h,m,p,g){var v=t.quadrilateralToSquare(e,r,n,a,s,o,l,c),y=t.squareToQuadrilateral(u,d,f,A,h,m,p,g);return y.times(v)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,s=this.a13,o=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,A=0;A<r;A+=2){var h=e[A],m=e[A+1],p=s*h+c*m+f;e[A]=(n*h+o*m+u)/p,e[A+1]=(a*h+l*m+d)/p}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,s=this.a13,o=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,A=e.length,h=0;h<A;h++){var m=e[h],p=r[h],g=s*m+c*p+f;e[h]=(n*m+o*p+u)/g,r[h]=(a*m+l*p+d)/g}},t.squareToQuadrilateral=function(e,r,n,a,s,o,l,c){var u=e-n+s-l,d=r-a+o-c;if(u===0&&d===0)return new t(n-e,s-n,e,a-r,o-a,r,0,0,1);var f=n-s,A=l-s,h=a-o,m=c-o,p=f*m-A*h,g=(u*m-A*d)/p,v=(f*d-u*h)/p;return new t(n-e+g*n,l-e+v*l,e,a-r+g*a,c-r+v*c,r,g,v,1)},t.quadrilateralToSquare=function(e,r,n,a,s,o,l,c){return t.squareToQuadrilateral(e,r,n,a,s,o,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),I3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),j3e=function(t){I3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,s,o,l,c,u,d,f,A,h,m,p,g,v,y,b,w){var P=zre.quadrilateralToQuadrilateral(s,o,l,c,u,d,f,A,h,m,p,g,v,y,b,w);return this.sampleGridWithTransform(r,n,a,P)},e.prototype.sampleGridWithTransform=function(r,n,a,s){if(n<=0||a<=0)throw new tr;for(var o=new qf(n,a),l=new Float32Array(2*n),c=0;c<a;c++){for(var u=l.length,d=c+.5,f=0;f<u;f+=2)l[f]=f/2+.5,l[f+1]=d;s.transformPoints(l),tH.checkAndNudgePoints(r,l);try{for(var f=0;f<u;f+=2)r.get(Math.floor(l[f]),Math.floor(l[f+1]))&&o.set(f/2,c)}catch{throw new tr}}return o},e}(tH),O6=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new j3e,t}(),_c=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Zr(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),P3e=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new S3e(s,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new tr;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,s=0;s<4;s++){var o=n[(this.shift+s)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,o,l){var c=(s>>r-2<<1)+(s&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(Wn.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new tr},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var s=n-a,o=new Int32Array(n),l=n-1;l>=0;--l)o[l]=e&15,e>>=4;try{var c=new Jj(kc.AZTEC_PARAM);c.decode(o,s)}catch{throw new tr}for(var u=0,l=0;l<a;l++)u=(u<<4)+o[l];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,s=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(r,o,1,-1),c=this.getFirstDifferent(n,o,1,1),u=this.getFirstDifferent(a,o,-1,1),d=this.getFirstDifferent(s,o,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(l,c,u,d))break}r=l,n=c,a=u,s=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new tr;this.compact=this.nbCenterLayers===5;var A=new Zr(r.getX()+.5,r.getY()-.5),h=new Zr(n.getX()+.5,n.getY()+.5),m=new Zr(a.getX()-.5,a.getY()+.5),p=new Zr(s.getX()-.5,s.getY()-.5);return this.expandSquare([A,h,m,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var s=new Qk(this.image).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{var o=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new _c(o+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new _c(o+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new _c(o-7,l+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new _c(o-7,l-7),!1,-1,-1).toResultPoint()}var c=ga.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=ga.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var s=new Qk(this.image,15,c,u).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{e=this.getFirstDifferent(new _c(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new _c(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new _c(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new _c(c-7,u-7),!1,-1,-1).toResultPoint()}return c=ga.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=ga.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new _c(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,s){var o=O6.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,u=l/2+this.nbCenterLayers;return o.sampleGrid(e,l,l,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,s=this.distanceResultPoint(e,r),o=s/n,l=e.getX(),c=e.getY(),u=o*(r.getX()-e.getX())/s,d=o*(r.getY()-e.getY())/s,f=0;f<n;f++)this.image.get(ga.round(l+f*u),ga.round(c+f*d))&&(a|=1<<n-f-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var s=3;e=new _c(e.getX()-s,e.getY()+s),r=new _c(r.getX()-s,r.getY()-s),n=new _c(n.getX()+s,n.getY()-s),a=new _c(a.getX()+s,a.getY()+s);var o=this.getColor(a,e);if(o===0)return!1;var l=this.getColor(e,r);return l!==o||(l=this.getColor(r,n),l!==o)?!1:(l=this.getColor(n,a),l===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,o=0,l=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),f=0;f<d;f++)l+=a,c+=s,this.image.get(ga.round(l),ga.round(c))!==u&&o++;var A=o/n;return A>.1&&A<.9?0:A<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var s=e.getX()+n,o=e.getY()+a;this.isValid(s,o)&&this.image.get(s,o)===r;)s+=n,o+=a;for(s-=n,o-=a;this.isValid(s,o)&&this.image.get(s,o)===r;)s+=n;for(s-=n;this.isValid(s,o)&&this.image.get(s,o)===r;)o+=a;return o-=a,new _c(s,o)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),s=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new Zr(l+a*s,c+a*o),d=new Zr(l-a*s,c-a*o);s=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new Zr(l+a*s,c+a*o),A=new Zr(l-a*s,c-a*o),h=[u,f,d,A];return h},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=ga.round(e.getX()),n=ga.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return ga.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return ga.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Wn.truncDivision(this.nbLayers-4,8)+1)+15},t}(),PS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new P3e(e.getBlackMatrix()),s=null,o=null;try{var l=a.detectMirror(!1);s=l.getPoints(),this.reportFoundResultPoints(r,s),o=new eH().decode(l)}catch(f){n=f}if(o==null)try{var l=a.detectMirror(!0);s=l.getPoints(),this.reportFoundResultPoints(r,s),o=new eH().decode(l)}catch(f){throw n??f}var c=new Kl(o.getText(),o.getRawBytes(),o.getNumBits(),s,gn.AZTEC,ds.currentTimeMillis()),u=o.getByteSegments();u!=null&&c.putMetadata(Al.BYTE_SEGMENTS,u);var d=o.getECLevel();return d!=null&&c.putMetadata(Al.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(fs.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,s,o){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),B3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){B3e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new PS,r)||this}return e})(h1);var xo=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(fs.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),s=this.doDecode(a,r),o=s.getResultMetadata(),l=270;o!==null&&o.get(Al.ORIENTATION)===!0&&(l=l+o.get(Al.ORIENTATION)%360),s.putMetadata(Al.ORIENTATION,l);var c=s.getResultPoints();if(c!==null)for(var u=a.getHeight(),d=0;d<c.length;d++)c[d]=new Zr(u-c[d].getY()-1,c[d].getX());return s}else throw new tr}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),s=new Lo(n),o=r&&r.get(fs.TRY_HARDER)===!0,l=Math.max(1,a>>(o?8:5)),c;o?c=a:c=15;for(var u=Math.trunc(a/2),d=0;d<c;d++){var f=Math.trunc((d+1)/2),A=(d&1)===0,h=u+l*(A?f:-f);if(h<0||h>=a)break;try{s=e.getBlackRow(h,s)}catch{continue}for(var m=function(y){if(y===1&&(s.reverse(),r&&r.get(fs.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;r.forEach(function(j,_){return b.set(_,j)}),b.delete(fs.NEED_RESULT_POINT_CALLBACK),r=b}try{var w=p.decodeRow(h,s,r);if(y===1){w.putMetadata(Al.ORIENTATION,180);var P=w.getResultPoints();P!==null&&(P[0]=new Zr(n-P[0].getX()-1,P[0].getY()),P[1]=new Zr(n-P[1].getX()-1,P[1].getY()))}return{value:w}}catch{}},p=this,g=0;g<2;g++){var v=m(g);if(typeof v=="object")return v.value}}throw new tr},t.recordPattern=function(e,r,n){for(var a=n.length,s=0;s<a;s++)n[s]=0;var o=e.getSize();if(r>=o)throw new tr;for(var l=!e.get(r),c=0,u=r;u<o;){if(e.get(u)!==l)n[c]++;else{if(++c===a)break;n[c]=1,l=!l}u++}if(!(c===a||c===a-1&&u===o))throw new tr},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,s=e.get(r);r>0&&a>=0;)e.get(--r)!==s&&(a--,s=!s);if(a>=0)throw new tr;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,o=0,l=0;l<a;l++)s+=e[l],o+=r[l];if(s<o)return Number.POSITIVE_INFINITY;var c=s/o;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],A=r[d]*c,h=f>A?f-A:A-f;if(h>n)return Number.POSITIVE_INFINITY;u+=h}return u/s},t}(),T3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rH=function(t){T3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),s=0,o=Int32Array.from([0,0,0,0,0,0]),l=a,c=!1,u=6,d=a;d<n;d++)if(r.get(d)!==c)o[s]++;else{if(s===u-1){for(var f=e.MAX_AVG_VARIANCE,A=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var m=xo.patternMatchVariance(o,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,A=h)}if(A>=0&&r.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,A]);l+=o[0]+o[1],o=o.slice(2,o.length),o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,c=!c}throw new tr},e.decodeCode=function(r,n,a){xo.recordPattern(r,a,n);for(var s=e.MAX_AVG_VARIANCE,o=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,o=l)}if(o>=0)return o;throw new tr},e.prototype.decodeRow=function(r,n,a){var s=a&&a.get(fs.ASSUME_GS1)===!0,o=e.findStartPattern(n),l=o[2],c=0,u=new Uint8Array(20);u[c++]=l;var d;switch(l){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new Fr}for(var f=!1,A=!1,h="",m=o[0],p=o[1],g=Int32Array.from([0,0,0,0,0,0]),v=0,y=0,b=l,w=0,P=!0,j=!1,_=!1;!f;){var I=A;switch(A=!1,v=y,y=e.decodeCode(n,g,p),u[c++]=y,y!==e.CODE_STOP&&(P=!0),y!==e.CODE_STOP&&(w++,b+=w*y),m=p,p+=g.reduce(function(he,ge){return he+ge},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Fr}switch(d){case e.CODE_CODE_A:if(y<64)_===j?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),_=!1;else if(y<96)_===j?h+=String.fromCharCode(y-64):h+=String.fromCharCode(y+64),_=!1;else switch(y!==e.CODE_STOP&&(P=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!j&&_?(j=!0,_=!1):j&&_?(j=!1,_=!1):_=!0;break;case e.CODE_SHIFT:A=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(y<96)_===j?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),_=!1;else switch(y!==e.CODE_STOP&&(P=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!j&&_?(j=!0,_=!1):j&&_?(j=!1,_=!1):_=!0;break;case e.CODE_SHIFT:A=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==e.CODE_STOP&&(P=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}I&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var E=p-m;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-m)/2),!1))throw new tr;if(b-=w*v,b%103!==v)throw new qi;var F=h.length;if(F===0)throw new tr;F>0&&P&&(d===e.CODE_CODE_C?h=h.substring(0,F-2):h=h.substring(0,F-1));for(var k=(o[1]+o[0])/2,B=m+E/2,R=u.length,Y=new Uint8Array(R),me=0;me<R;me++)Y[me]=u[me];var pe=[new Zr(k,r),new Zr(B,r)];return new Kl(h,Y,0,pe,gn.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(xo),k3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nH=function(t){k3e(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),f=n.getNextSet(d[1]),A=n.getSize(),h,m;do{e.recordPattern(n,f,u);var p=e.toNarrowWidePattern(u);if(p<0)throw new tr;h=e.patternToChar(p),this.decodeRowResult+=h,m=f;try{for(var g=(s=void 0,m5(u)),v=g.next();!v.done;v=g.next()){var y=v.value;f+=y}}catch(R){s={error:R}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(s)throw s.error}}f=n.getNextSet(f)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=m5(u),P=w.next();!P.done;P=w.next()){var y=P.value;b+=y}}catch(R){l={error:R}}finally{try{P&&!P.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}var j=f-m-b;if(f!==A&&j*2<b)throw new tr;if(this.usingCheckDigit){for(var _=this.decodeRowResult.length-1,I=0,E=0;E<_;E++)I+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(E));if(this.decodeRowResult.charAt(_)!==e.ALPHABET_STRING.charAt(I%43))throw new qi;this.decodeRowResult=this.decodeRowResult.substring(0,_)}if(this.decodeRowResult.length===0)throw new tr;var F;this.extendedMode?F=e.decodeExtended(this.decodeRowResult):F=this.decodeRowResult;var k=(d[1]+d[0])/2,B=m+b/2;return new Kl(F,null,0,[new Zr(k,r),new Zr(B,r)],gn.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),s=r.getNextSet(0),o=0,l=s,c=!1,u=n.length,d=s;d<a;d++)if(r.get(d)!==c)n[o]++;else{if(o===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,c=!c}throw new tr},e.toNarrowWidePattern=function(r){var n,a,s=r.length,o=0,l;do{var c=2147483647;try{for(var u=(n=void 0,m5(r)),d=u.next();!d.done;d=u.next()){var f=d.value;f<c&&f>o&&(c=f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}o=c,l=0;for(var A=0,h=0,m=0;m<s;m++){var f=r[m];f>o&&(h|=1<<s-1-m,l++,A+=f)}if(l===3){for(var m=0;m<s&&l>0;m++){var f=r[m];if(f>o&&(l--,f*2>=A))return-1}return h}}while(l>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new tr},e.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var o=r.charAt(s);if(o==="+"||o==="$"||o==="%"||o==="/"){var l=r.charAt(s+1),c="\0";switch(o){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new Fr;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new Fr;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new Fr;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new Fr;break}a+=c,s++}else a+=o}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(xo),F3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aH=function(t){F3e(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),A=this.counters;A.fill(0),this.decodeRowResult="";var h,m;do{e.recordPattern(n,d,A);var p=this.toPattern(A);if(p<0)throw new tr;h=this.patternToChar(p),this.decodeRowResult+=h,m=d;try{for(var g=(s=void 0,p5(A)),v=g.next();!v.done;v=g.next()){var y=v.value;d+=y}}catch(E){s={error:E}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(s)throw s.error}}d=n.getNextSet(d)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=p5(A),P=w.next();!P.done;P=w.next()){var y=P.value;b+=y}}catch(E){l={error:E}}finally{try{P&&!P.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}if(d===f||!n.get(d))throw new tr;if(this.decodeRowResult.length<2)throw new tr;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var j=this.decodeExtended(this.decodeRowResult),_=(u[1]+u[0])/2,I=m+b/2;return new Kl(j,null,0,[new Zr(_,r),new Zr(I,r)],gn.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var s=this.counters,o=a,l=!1,c=s.length,u=0,d=a;d<n;d++)if(r.get(d)!==l)s[u]++;else{if(u===c-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new tr},e.prototype.toPattern=function(r){var n,a,s=0;try{for(var o=p5(r),l=o.next();!l.done;l=o.next()){var c=l.value;s+=c}}catch(m){n={error:m}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var u=0,d=r.length,f=0;f<d;f++){var A=Math.round(r[f]*9/s);if(A<1||A>4)return-1;if(f&1)u<<=A;else for(var h=0;h<A;h++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new tr},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var o=r.charAt(s);if(o>="a"&&o<="d"){if(s>=n-1)throw new Fr;var l=r.charAt(s+1),c="\0";switch(o){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new Fr;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new Fr;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new Fr;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new Fr;break}a+=c,s++}else a+=o}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var s=1,o=0,l=n-1;l>=0;l--)o+=s*e.ALPHABET_STRING.indexOf(r.charAt(l)),++s>a&&(s=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new qi},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(xo),O3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sH=function(t){O3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var s,o,l=this.decodeStart(n),c=this.decodeEnd(n),u=new $n;e.decodeMiddle(n,l[1],c[0],u);var d=u.toString(),f=null;a!=null&&(f=a.get(fs.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var A=d.length,h=!1,m=0;try{for(var p=D3e(f),g=p.next();!g.done;g=p.next()){var v=g.value;if(A===v){h=!0;break}v>m&&(m=v)}}catch(w){s={error:w}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}if(!h&&A>m&&(h=!0),!h)throw new Fr;var y=[new Zr(l[1],r),new Zr(c[0],r)],b=new Kl(d,null,0,y,gn.ITF,new Date().getTime());return b},e.decodeMiddle=function(r,n,a,s){var o=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),l.fill(0),c.fill(0);n<a;){xo.recordPattern(r,n,o);for(var u=0;u<5;u++){var d=2*u;l[u]=o[d],c[u]=o[d+1]}var f=e.decodeDigit(l);s.append(f.toString()),f=this.decodeDigit(c),s.append(f.toString()),o.forEach(function(A){n+=A})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var s=n-1;a>0&&s>=0&&!r.get(s);s--)a--;if(a!==0)throw new tr},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new tr;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof tr&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var s=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-s,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var s=a.length,o=new Int32Array(s),l=r.getSize(),c=!1,u=0,d=n;o.fill(0);for(var f=n;f<l;f++)if(r.get(f)!==c)o[u]++;else{if(u===s-1){if(xo.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=o[0]+o[1],ds.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,c=!c}throw new tr},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,s=e.PATTERNS.length,o=0;o<s;o++){var l=e.PATTERNS[o],c=xo.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=o):c===n&&(a=-1)}if(a>=0)return a%10;throw new tr},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(xo),R3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ov=function(t){R3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,s=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,o);var l=a[0];s=a[1];var c=l-(s-l);c>=0&&(n=r.isRange(c,l,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Fr;a+=o}a*=3;for(var s=n-2;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Fr;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,s){return this.findGuardPattern(r,n,a,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,a,s,o){var l=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,d=s.length,f=a,A=n;A<l;A++)if(r.get(A)!==f)o[c]++;else{if(c===d-1){if(xo.patternMatchVariance(o,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,A]);u+=o[0]+o[1];for(var h=o.slice(2,o.length),m=0;m<c-1;m++)o[m]=h[m];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,f=!f}throw new tr},e.decodeDigit=function(r,n,a,s){this.recordPattern(r,a,n);for(var o=this.MAX_AVG_VARIANCE,l=-1,c=s.length,u=0;u<c;u++){var d=s[u],f=xo.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,l=u)}if(l>=0)return l;throw new tr},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(xo),M3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L3e=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new Zr((n[0]+n[1])/2,e),new Zr(s,e)],u=new Kl(o,null,0,c,gn.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<5&&c<l;d++){var f=Ov.decodeDigit(e,o,c,Ov.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var A=(a=void 0,M3e(o)),h=A.next();!h.done;h=A.next()){var m=h.value;c+=m}}catch(g){a={error:g}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f>=10&&(u|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new tr;var p=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==p)throw new tr;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new tr},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Al.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),s=n%100,o=s<10?"0"+s:s.toString();return r+a+"."+o},t}(),U3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q3e=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new Zr((n[0]+n[1])/2,e),new Zr(s,e)],u=new Kl(o,null,0,c,gn.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<2&&c<l;d++){var f=Ov.decodeDigit(e,o,c,Ov.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var A=(a=void 0,U3e(o)),h=A.next();!h.done;h=A.next()){var m=h.value;c+=m}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f>=10&&(u|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new tr;if(parseInt(n.toString())%4!==u)throw new tr;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Al.ISSUE_NUMBER,parseInt(e)]])},t}(),V3e=function(){function t(){}return t.decodeRow=function(e,r,n){var a=Ov.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new L3e;return s.decodeRow(e,r,a)}catch{var o=new Q3e;return o.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),H3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),co=function(t){H3e(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],s=new Int32Array(a.length),o=0;o<a.length;o++)s[o]=a[a.length-o-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,a){var s=e.findStartGuardPattern(n),o=a==null?null:a.get(fs.NEED_RESULT_POINT_CALLBACK);if(o!=null){var l=new Zr((s[0]+s[1])/2,r);o.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,s,this.decodeRowStringBuffer),u=c.rowOffset,d=c.resultString;if(o!=null){var f=new Zr(u,r);o.foundPossibleResultPoint(f)}var A=e.decodeEnd(n,u);if(o!=null){var h=new Zr((A[0]+A[1])/2,r);o.foundPossibleResultPoint(h)}var m=A[1],p=m+(m-A[0]);if(p>=n.getSize()||!n.isRange(m,p,!1))throw new tr;var g=d.toString();if(g.length<8)throw new Fr;if(!e.checkChecksum(g))throw new qi;var v=(s[1]+s[0])/2,y=(A[1]+A[0])/2,b=this.getBarcodeFormat(),w=[new Zr(v,r),new Zr(y,r)],P=new Kl(g,null,0,w,b,new Date().getTime()),j=0;try{var _=V3e.decodeRow(r,n,A[1]);P.putMetadata(Al.UPC_EAN_EXTENSION,_.getText()),P.putAllMetadata(_.getResultMetadata()),P.addResultPoints(_.getResultPoints()),j=_.getText().length}catch{}var I=a==null?null:a.get(fs.ALLOWED_EAN_EXTENSIONS);if(I!=null){var E=!1;for(var F in I)if(j.toString()===F){E=!0;break}if(!E)throw new tr}return b===gn.EAN_13||gn.UPC_A,P},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Fr;a+=o}a*=3;for(var s=n-2;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Fr;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Ov),$3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vk=function(t){$3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],A=0,h=0;h<6&&f<d;h++){var m=co.decodeDigit(r,u,f,co.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var p=(s=void 0,iH(u)),g=p.next();!g.done;g=p.next()){var v=g.value;f+=v}}catch(P){s={error:P}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}m>=10&&(A|=1<<5-h)}a=e.determineFirstDigit(a,A);var y=co.findGuardPattern(r,f,!0,co.MIDDLE_PATTERN,new Int32Array(co.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var h=0;h<6&&f<d;h++){var m=co.decodeDigit(r,u,f,co.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var b=(l=void 0,iH(u)),w=b.next();!w.done;w=b.next()){var v=w.value;f+=v}}catch(_){l={error:_}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return gn.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new tr},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(co),G3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lH=function(t){G3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],A=0;A<4&&f<d;A++){var h=co.decodeDigit(r,u,f,co.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var m=(s=void 0,oH(u)),p=m.next();!p.done;p=m.next()){var g=p.value;f+=g}}catch(w){s={error:w}}finally{try{p&&!p.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}}var v=co.findGuardPattern(r,f,!0,co.MIDDLE_PATTERN,new Int32Array(co.MIDDLE_PATTERN.length).fill(0));f=v[1];for(var A=0;A<4&&f<d;A++){var h=co.decodeDigit(r,u,f,co.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var y=(l=void 0,oH(u)),b=y.next();!b.done;b=y.next()){var g=b.value;f+=g}}catch(j){l={error:j}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return gn.EAN_8},e}(co),K3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cH=function(t){K3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new Vk,r}return e.prototype.getBarcodeFormat=function(){return gn.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new Kl(n.substring(1),null,null,r.getResultPoints(),gn.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new tr},e.prototype.reset=function(){this.ean13Reader.reset()},e}(co),q3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uH=function(t){q3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l=this.decodeMiddleCounters.map(function(g){return g});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),u=n[1],d=0,f=0;f<6&&u<c;f++){var A=e.decodeDigit(r,l,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);try{for(var h=(s=void 0,z3e(l)),m=h.next();!m.done;m=h.next()){var p=m.value;u+=p}}catch(g){s={error:g}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(s)throw s.error}}A>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new $n(a),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return co.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][s]){r.insert(0,"0"+a),r.append("0"+s);return}throw tr.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return gn.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new $n;a.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(s),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(s);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(co),W3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g5=function(t){W3e(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(fs.POSSIBLE_FORMATS),s=[];return a!=null&&(a.indexOf(gn.EAN_13)>-1&&s.push(new Vk),a.indexOf(gn.UPC_A)>-1&&s.push(new cH),a.indexOf(gn.EAN_8)>-1&&s.push(new lH),a.indexOf(gn.UPC_E)>-1&&s.push(new uH)),s.length===0&&(s.push(new Vk),s.push(new cH),s.push(new lH),s.push(new uH)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,a){var s,o;try{for(var l=dH(this.readers),c=l.next();!c.done;c=l.next()){var u=c.value;try{var d=u.decodeRow(r,n,a),f=d.getBarcodeFormat()===gn.EAN_13&&d.getText().charAt(0)==="0",A=a==null?null:a.get(fs.POSSIBLE_FORMATS),h=A==null||A.includes(gn.UPC_A);if(f&&h){var m=d.getRawBytes(),p=new Kl(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),gn.UPC_A);return p.putAllMetadata(d.getResultMetadata()),p}return d}catch{}}}catch(g){s={error:g}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(s)throw s.error}}throw new tr},e.prototype.reset=function(){var r,n;try{for(var a=dH(this.readers),s=a.next();!s.done;s=a.next()){var o=s.value;o.reset()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(xo),X3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y3e=function(t){X3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var s=this.getValidRowData(n);if(!s)throw new tr;var o=this.codaBarDecodeRow(s.row);if(!o)throw new tr;return new Kl(o,null,0,[new Zr(s.left,r),new Zr(s.right,r)],gn.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var s=n.lastIndexOf(!0);if(s<=a)return null;n=n.slice(a,s+1);for(var o=[],l=n[0],c=1,u=1;u<n.length;u++)n[u]===l?c++:(l=n[u],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:a,right:s}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(c,u){return(c+u)/2},0));r.length>0;){var s=r.splice(0,8).splice(0,7),o=s.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(xo),J3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Z3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rp=function(t){J3e(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(xo.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new tr},e.count=function(r){return ga.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,s=n[0],o=1;o<r.length;o++)n[o]>s&&(s=n[o],a=o);r[a]++},e.decrement=function(r,n){for(var a=0,s=n[0],o=1;o<r.length;o++)n[o]<s&&(s=n[o],a=o);r[a]--},e.isFinderPattern=function(r){var n,a,s=r[0]+r[1],o=s+r[2]+r[3],l=s/o;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=Z3e(r),f=d.next();!f.done;f=d.next()){var A=f.value;A>u&&(u=A),A<c&&(c=A)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(xo),BS=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),Wre=function(){function t(e,r,n,a,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Zr(n,s)),this.resultPoints.push(new Zr(a,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),e5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gx=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,s,o=0;try{for(var l=e5e(e),c=l.next();!c.done;c=l.next()){var u=c.value;o+=u}}catch(y){a={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}for(var d=0,f=0,A=e.length,h=0;h<A-1;h++){var m=void 0;for(m=1,f|=1<<h;m<e[h];m++,f&=~(1<<h)){var p=t.combins(o-m-1,A-h-2);if(n&&f===0&&o-m-(A-h-1)>=A-h-1&&(p-=t.combins(o-m-(A-h),A-h-2)),A-h-1>1){for(var g=0,v=o-m-(A-h-2);v>r;v--)g+=t.combins(o-m-v-1,A-h-3);p-=g*(A-1-h)}else o-m>r&&p--;d+=p}o-=m}return d},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var s=1,o=1,l=e;l>n;l--)s*=l,o<=a&&(s/=o,o++);for(;o<=a;)s/=o,o++;return s},t}(),t5e=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new Lo(n),s=0,o=e[0],l=o.getRightChar().getValue(),c=11;c>=0;--c)l&1<<c&&a.set(s),s++;for(var c=1;c<e.length;++c){for(var u=e[c],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&a.set(s),s++;if(u.getRightChar()!==null)for(var A=u.getRightChar().getValue(),f=11;f>=0;--f)A&1<<f&&a.set(s),s++}return a},t}(),$m=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),D6=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),r5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fd=function(t){r5e(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(D6),n5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gm=function(t){n5e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return a?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(D6),a5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dx=function(t){a5e(e,t);function e(r,n,a){var s=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new Fr;return s.firstDigit=n,s.secondDigit=a,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(D6),QC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s5e=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,s,o,l,c,u;if(!e)return null;if(e.length<2)throw new tr;var d=e.substring(0,2);try{for(var f=QC(t.TWO_DIGIT_DATA_LENGTH),A=f.next();!A.done;A=f.next()){var h=A.value;if(h[0]===d)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,h[2],e):t.processFixedAI(2,h[1],e)}}catch(j){r={error:j}}finally{try{A&&!A.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new tr;var m=e.substring(0,3);try{for(var p=QC(t.THREE_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var h=g.value;if(h[0]===m)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,h[2],e):t.processFixedAI(3,h[1],e)}}catch(j){a={error:j}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}try{for(var v=QC(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=v.next();!y.done;y=v.next()){var h=y.value;if(h[0]===m)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(j){o={error:j}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(o)throw o.error}}if(e.length<4)throw new tr;var b=e.substring(0,4);try{for(var w=QC(t.FOUR_DIGIT_DATA_LENGTH),P=w.next();!P.done;P=w.next()){var h=P.value;if(h[0]===b)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(j){c={error:j}}finally{try{P&&!P.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}throw new tr},t.processFixedAI=function(e,r,n){if(n.length<e)throw new tr;var a=n.substring(0,e);if(n.length<e+r)throw new tr;var s=n.substring(e,e+r),o=n.substring(e+r),l="("+a+")"+s,c=t.parseFieldsInGeneralPurpose(o);return c==null?l:l+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var o=n.substring(e,s),l=n.substring(s),c="("+a+")"+o,u=t.parseFieldsInGeneralPurpose(l);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),uE=function(){function t(e){this.buffer=new $n,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var s=this.decodeGeneralPurposeField(n,a),o=s5e.parseFieldsInGeneralPurpose(s.getNewString());if(o!=null&&e.append(o),s.isRemaining()?a=""+s.getRemainingValue():a=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new dx(this.information.getSize(),dx.FNC1,dx.FNC1):new dx(this.information.getSize(),r-1,dx.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,s=(n-8)%11;return new dx(e+7,a,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,s=0;s<n;++s)e.get(r+s)&&(a|=1<<n-s-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Gm(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Gm(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Gm(this.current.getPosition(),this.buffer.toString()):r=new Gm(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new $m(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Gm(this.current.getPosition(),this.buffer.toString());return new $m(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $m(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Gm(this.current.getPosition(),this.buffer.toString());return new $m(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $m(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Gm(this.current.getPosition(),this.buffer.toString());return new $m(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $m(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Fd(e+5,Fd.FNC1);if(r>=5&&r<15)return new Fd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Fd(e+7,""+(n+1));if(n>=90&&n<116)return new Fd(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),s;switch(a){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new Fr}return new Fd(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Fd(e+5,Fd.FNC1);if(r>=5&&r<15)return new Fd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Fd(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Tw("Decoding invalid alphanumeric value: "+n)}return new Fd(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Xre=function(){function t(e){this.information=e,this.generalDecoder=new uE(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),i5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hd=function(t){i5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var s=0;s<4;++s){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,s=0;s<13;s++){var o=r.charAt(s+n).charCodeAt(0)-48;a+=s&1?o:3*o}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(Xre),o5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),l5e=function(t){o5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new $n;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Hd),c5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u5e=function(t){c5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new $n;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Xre),d5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dE=function(t){d5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,s);for(var o=this.checkWeight(s),l=1e5,c=0;c<5;++c)o/l===0&&r.append("0"),l/=10;r.append(o)},e}(Hd),f5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yre=function(t){f5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+dE.GTIN_SIZE+e.WEIGHT_SIZE)throw new tr;var r=new $n;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+dE.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(dE),h5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A5e=function(t){h5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(Yre),m5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p5e=function(t){m5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(Yre),g5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x5e=function(t){g5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Hd.GTIN_SIZE)throw new tr;var r=new $n;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Hd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Hd.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Hd),v5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),y5e=function(t){v5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Hd.GTIN_SIZE)throw new tr;var r=new $n;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Hd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Hd.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Hd.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Hd),b5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),s0=function(t){b5e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.dateCode=a,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new tr;var r=new $n;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var s=a%32;a/=32;var o=a%12+1;a/=12;var l=a;l/10===0&&r.append("0"),r.append(l),o/10===0&&r.append("0"),r.append(o),s/10===0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(dE);function w5e(t){try{if(t.get(1))return new l5e(t);if(!t.get(2))return new u5e(t);var e=uE.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new A5e(t);case 5:return new p5e(t)}var r=uE.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new x5e(t);case 13:return new y5e(t)}var n=uE.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new s0(t,"310","11");case 57:return new s0(t,"320","11");case 58:return new s0(t,"310","13");case 59:return new s0(t,"320","13");case 60:return new s0(t,"310","15");case 61:return new s0(t,"320","15");case 62:return new s0(t,"310","17");case 63:return new s0(t,"320","17")}}catch(a){throw console.log(a),new Tw("unknown decoder: "+t)}}var fH=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),N5e=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,s){r.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),C5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),i0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_5e=function(t){C5e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(l){if(l instanceof tr){if(!this.pairs.length)throw new tr;a=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new tr},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,s,o=n;o<this.rows.length;o++){var l=this.rows[o];this.pairs.length=0;try{for(var c=(a=void 0,i0(r)),u=c.next();!u.done;u=c.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(A){a={error:A}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(l);try{return this.checkRows(f,o+1)}catch(A){console.log(A)}}}throw new tr},e.isValidSequence=function(r){var n,a;try{for(var s=i0(e.FINDER_PATTERN_SEQUENCES),o=s.next();!o.done;o=s.next()){var l=o.value;if(!(r.length>l.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==l[u]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,s=!1,o=!1;a<this.rows.length;){var l=this.rows[a];if(l.getRowNumber()>r){o=l.isEquivalent(this.pairs);break}s=l.isEquivalent(this.pairs),a++}o||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new N5e(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,s,o,l,c,u;try{for(var d=i0(n),f=d.next();!f.done;f=d.next()){var A=f.value;if(A.getPairs().length!==r.length){var h=!0;try{for(var m=(o=void 0,i0(A.getPairs())),p=m.next();!p.done;p=m.next()){var g=p.value,v=!1;try{for(var y=(c=void 0,i0(r)),b=y.next();!b.done;b=y.next()){var w=b.value;if(fH.equals(g,w)){v=!0;break}}}catch(P){c={error:P}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}v||(h=!1)}}catch(P){o={error:P}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}}}}catch(P){a={error:P}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,s,o,l,c,u;try{for(var d=i0(n),f=d.next();!f.done;f=d.next()){var A=f.value,h=!0;try{for(var m=(o=void 0,i0(r)),p=m.next();!p.done;p=m.next()){var g=p.value,v=!1;try{for(var y=(c=void 0,i0(A.getPairs())),b=y.next();!b.done;b=y.next()){var w=b.value;if(g.equals(w)){v=!0;break}}}catch(P){c={error:P}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}if(!v){h=!1;break}}}catch(P){o={error:P}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}if(h)return!0}}catch(P){a={error:P}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=t5e.buildBitArray(r),a=w5e(n),s=a.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),l=r[r.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],l[0],l[1]];return new Kl(s,null,null,c,gn.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var s=a.getChecksumPortion(),o=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);s+=c.getLeftChar().getChecksumPortion(),o++;var u=c.getRightChar();u!=null&&(s+=u.getChecksumPortion(),o++)}s%=211;var d=211*(o-4)+s;return d===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var s=n.length%2===0;this.startFromEven&&(s=!s);var o,l=!0,c=-1;do this.findNextPair(r,n,c),o=this.parseFoundFinderPattern(r,a,s),o===null?c=e.getNextSecondBar(r,this.startEnd[0]):l=!1;while(l);var u=this.decodeDataCharacter(r,o,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new tr;var d;try{d=this.decodeDataCharacter(r,o,s,!1)}catch(f){d=null,console.log(f)}return new fH(u,d,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var o=r.getSize(),l;if(a>=0)l=a;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;l<o&&(d=!r.get(l),!!d);)l++;for(var f=0,A=l,h=l;h<o;h++)if(r.get(h)!==d)s[f]++;else{if(f===3){if(u&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=A,this.startEnd[1]=h;return}u&&e.reverseCounters(s),A+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,d=!d}throw new tr},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var s=r[a];r[a]=r[n-a-1],r[n-a-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,a){var s,o,l;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,s=this.startEnd[0]-c,o=c,l=this.startEnd[1]}else o=this.startEnd[0],l=r.getNextUnset(this.startEnd[1]+1),s=l-this.startEnd[1];var u=this.getDecodeFinderCounters();ds.arraycopy(u,0,u,1,u.length-1),u[0]=s;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new Wre(d,[o,l],o,l,n)},e.prototype.decodeDataCharacter=function(r,n,a,s){for(var o=this.getDataCharacterCounters(),l=0;l<o.length;l++)o[l]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var c=0,u=o.length-1;c<u;c++,u--){var d=o[c];o[c]=o[u],o[u]=d}}var f=17,A=ga.sum(new Int32Array(o))/f,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(A-h)/h>.3)throw new tr;for(var m=this.getOddCounts(),p=this.getEvenCounts(),g=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var y=1*o[c]/A,b=y+.5;if(b<1){if(y<.3)throw new tr;b=1}else if(b>8){if(y>8.7)throw new tr;b=8}var w=c/2;c&1?(p[w]=b,v[w]=y-b):(m[w]=b,g[w]=y-b)}this.adjustOddEvenCounts(f);for(var P=4*n.getValue()+(a?0:2)+(s?0:1)-1,j=0,_=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(n,a,s)){var I=e.WEIGHTS[P][2*c];_+=m[c]*I}j+=m[c]}for(var E=0,c=p.length-1;c>=0;c--)if(e.isNotA1left(n,a,s)){var I=e.WEIGHTS[P][2*c+1];E+=p[c]*I}var F=_+E;if(j&1||j>13||j<4)throw new tr;var k=(13-j)/2,B=e.SYMBOL_WIDEST[k],R=9-B,Y=Gx.getRSSvalue(m,B,!0),me=Gx.getRSSvalue(p,R,!1),pe=e.EVEN_TOTAL_SUBSET[k],he=e.GSUM[k],ge=Y*pe+me+he;return new BS(ge,F)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=ga.sum(new Int32Array(this.getOddCounts())),a=ga.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1;n>13?o=!0:n<4&&(s=!0);var l=!1,c=!1;a>13?c=!0:a<4&&(l=!0);var u=n+a-r,d=(n&1)===1,f=(a&1)===0;if(u===1)if(d){if(f)throw new tr;o=!0}else{if(!f)throw new tr;c=!0}else if(u===-1)if(d){if(f)throw new tr;s=!0}else{if(!f)throw new tr;l=!0}else if(u===0){if(d){if(!f)throw new tr;n<a?(s=!0,c=!0):(o=!0,l=!0)}else if(f)throw new tr}else throw new tr;if(s){if(o)throw new tr;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new tr;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(rp),E5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S5e=function(t){E5e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=a,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(BS),I5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hH=function(t){I5e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var f=x5(this.possibleLeftPairs),A=f.next();!A.done;A=f.next()){var h=A.value;if(h.getCount()>1)try{for(var m=(l=void 0,x5(this.possibleRightPairs)),p=m.next();!p.done;p=m.next()){var g=p.value;if(g.getCount()>1&&e.checkChecksum(h,g))return e.constructResult(h,g)}}catch(v){l={error:v}}finally{try{p&&!p.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}}}catch(v){s={error:v}}finally{try{A&&!A.done&&(o=f.return)&&o.call(f)}finally{if(s)throw s.error}}throw new tr},e.addOrTally=function(r,n){var a,s;if(n!=null){var o=!1;try{for(var l=x5(r),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),o=!0;break}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),s=new String(a).toString(),o=new $n,l=13-s.length;l>0;l--)o.append("0");o.append(s);for(var c=0,l=0;l<13;l++){var u=o.charAt(l).charCodeAt(0)-48;c+=l&1?u:3*u}c=10-c%10,c===10&&(c=0),o.append(c.toString());var d=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new Kl(o.toString(),null,0,[d[0],d[1],f[0],f[1]],gn.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,a===s},e.prototype.decodePair=function(r,n,a,s){try{var o=this.findFinderPattern(r,n),l=this.parseFoundFinderPattern(r,a,n,o),c=s==null?null:s.get(fs.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(o[0]+o[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new Zr(u,a))}var d=this.decodeDataCharacter(r,l,!0),f=this.decodeDataCharacter(r,l,!1);return new S5e(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)xo.recordPatternInReverse(r,n.getStartEnd()[0],s);else{xo.recordPattern(r,n.getStartEnd()[1]+1,s);for(var l=0,c=s.length-1;l<c;l++,c--){var u=s[l];s[l]=s[c],s[c]=u}}for(var d=a?16:15,f=ga.sum(new Int32Array(s))/d,A=this.getOddCounts(),h=this.getEvenCounts(),m=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var g=s[l]/f,v=Math.floor(g+.5);v<1?v=1:v>8&&(v=8);var y=Math.floor(l/2);l&1?(h[y]=v,p[y]=g-v):(A[y]=v,m[y]=g-v)}this.adjustOddEvenCounts(a,d);for(var b=0,w=0,l=A.length-1;l>=0;l--)w*=9,w+=A[l],b+=A[l];for(var P=0,j=0,l=h.length-1;l>=0;l--)P*=9,P+=h[l],j+=h[l];var _=w+3*P;if(a){if(b&1||b>12||b<4)throw new tr;var I=(12-b)/2,E=e.OUTSIDE_ODD_WIDEST[I],F=9-E,k=Gx.getRSSvalue(A,E,!1),B=Gx.getRSSvalue(h,F,!0),R=e.OUTSIDE_EVEN_TOTAL_SUBSET[I],Y=e.OUTSIDE_GSUM[I];return new BS(k*R+B+Y,_)}else{if(j&1||j>10||j<4)throw new tr;var I=(10-j)/2,E=e.INSIDE_ODD_WIDEST[I],F=9-E,k=Gx.getRSSvalue(A,E,!0),B=Gx.getRSSvalue(h,F,!1),me=e.INSIDE_ODD_TOTAL_SUBSET[I],Y=e.INSIDE_GSUM[I];return new BS(B*me+k+Y,_)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=r.getSize(),o=!1,l=0;l<s&&(o=!r.get(l),n!==o);)l++;for(var c=0,u=l,d=l;d<s;d++)if(r.get(d)!==o)a[c]++;else{if(c===3){if(rp.isFinderPattern(a))return[u,d];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,o=!o}throw new tr},e.prototype.parseFoundFinderPattern=function(r,n,a,s){for(var o=r.get(s[0]),l=s[0]-1;l>=0&&o!==r.get(l);)l--;l++;var c=s[0]-l,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);ds.arraycopy(u,0,d,1,u.length-1),d[0]=c;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),A=l,h=s[1];return a&&(A=r.getSize()-1-A,h=r.getSize()-1-h),new Wre(f,[l,s[1]],A,h,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=ga.sum(new Int32Array(this.getOddCounts())),s=ga.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1,c=!1,u=!1;r?(a>12?l=!0:a<4&&(o=!0),s>12?u=!0:s<4&&(c=!0)):(a>11?l=!0:a<5&&(o=!0),s>10?u=!0:s<4&&(c=!0));var d=a+s-n,f=(a&1)===(r?1:0),A=(s&1)===1;if(d===1)if(f){if(A)throw new tr;l=!0}else{if(!A)throw new tr;u=!0}else if(d===-1)if(f){if(A)throw new tr;o=!0}else{if(!A)throw new tr;c=!0}else if(d===0){if(f){if(!A)throw new tr;a<s?(o=!0,u=!0):(l=!0,c=!0)}else if(A)throw new tr}else throw new tr;if(o){if(l)throw new tr;rp.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&rp.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new tr;rp.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&rp.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(rp),j5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kx=function(t){j5e(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(fs.POSSIBLE_FORMATS):null,s=r&&r.get(fs.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(fs.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(gn.EAN_13)||a.includes(gn.UPC_A)||a.includes(gn.EAN_8)||a.includes(gn.UPC_E))&&n.readers.push(new g5(r)),a.includes(gn.CODE_39)&&n.readers.push(new nH(s,o)),a.includes(gn.CODE_93)&&n.readers.push(new aH),a.includes(gn.CODE_128)&&n.readers.push(new rH),a.includes(gn.ITF)&&n.readers.push(new sH),a.includes(gn.CODABAR)&&n.readers.push(new Y3e),a.includes(gn.RSS_14)&&n.readers.push(new hH),a.includes(gn.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new _5e))),n.readers.length===0&&(n.readers.push(new g5(r)),n.readers.push(new nH),n.readers.push(new aH),n.readers.push(new g5(r)),n.readers.push(new rH),n.readers.push(new sH),n.readers.push(new hH)),n}return e.prototype.decodeRow=function(r,n,a){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,a)}catch{}throw new tr},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(xo),P5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){P5e(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Kx(n),r,n)||this}return e})(h1);var AH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ia=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),wa=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),B5e=function(){function t(e,r,n,a,s,o){var l,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=s,this.ecBlocks=o;var u=0,d=o.getECCodewords(),f=o.getECBlocks();try{for(var A=AH(f),h=A.next();!h.done;h=A.next()){var m=h.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(p){l={error:p}}finally{try{h&&!h.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if(e&1||r&1)throw new Fr;try{for(var s=AH(t.VERSIONS),o=s.next();!o.done;o=s.next()){var l=o.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===r)return l}}catch(c){n={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}throw new Fr},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Ia(5,new wa(1,3))),new t(2,12,12,10,10,new Ia(7,new wa(1,5))),new t(3,14,14,12,12,new Ia(10,new wa(1,8))),new t(4,16,16,14,14,new Ia(12,new wa(1,12))),new t(5,18,18,16,16,new Ia(14,new wa(1,18))),new t(6,20,20,18,18,new Ia(18,new wa(1,22))),new t(7,22,22,20,20,new Ia(20,new wa(1,30))),new t(8,24,24,22,22,new Ia(24,new wa(1,36))),new t(9,26,26,24,24,new Ia(28,new wa(1,44))),new t(10,32,32,14,14,new Ia(36,new wa(1,62))),new t(11,36,36,16,16,new Ia(42,new wa(1,86))),new t(12,40,40,18,18,new Ia(48,new wa(1,114))),new t(13,44,44,20,20,new Ia(56,new wa(1,144))),new t(14,48,48,22,22,new Ia(68,new wa(1,174))),new t(15,52,52,24,24,new Ia(42,new wa(2,102))),new t(16,64,64,14,14,new Ia(56,new wa(2,140))),new t(17,72,72,16,16,new Ia(36,new wa(4,92))),new t(18,80,80,18,18,new Ia(48,new wa(4,114))),new t(19,88,88,20,20,new Ia(56,new wa(4,144))),new t(20,96,96,22,22,new Ia(68,new wa(4,174))),new t(21,104,104,24,24,new Ia(56,new wa(6,136))),new t(22,120,120,18,18,new Ia(68,new wa(6,175))),new t(23,132,132,20,20,new Ia(62,new wa(8,163))),new t(24,144,144,22,22,new Ia(62,new wa(8,156),new wa(2,155))),new t(25,8,18,6,16,new Ia(7,new wa(1,5))),new t(26,8,32,6,14,new Ia(11,new wa(1,10))),new t(27,12,26,10,24,new Ia(14,new wa(1,16))),new t(28,12,36,10,16,new Ia(18,new wa(1,22))),new t(29,16,36,14,16,new Ia(24,new wa(1,32))),new t(30,16,48,14,22,new Ia(28,new wa(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),T5e=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new Fr;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new qf(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return B5e.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,s=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),l=!1,c=!1,u=!1,d=!1;do if(n===s&&a===0&&!l)e[r++]=this.readCorner1(s,o)&255,n-=2,a+=2,l=!0;else if(n===s-2&&a===0&&o&3&&!c)e[r++]=this.readCorner2(s,o)&255,n-=2,a+=2,c=!0;else if(n===s+4&&a===2&&!(o&7)&&!u)e[r++]=this.readCorner3(s,o)&255,n-=2,a+=2,u=!0;else if(n===s-2&&a===0&&(o&7)===4&&!d)e[r++]=this.readCorner4(s,o)&255,n-=2,a+=2,d=!0;else{do n<s&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,o)&255),n+=2,a-=2;while(n<s&&a>=0);n+=3,a+=1}while(n<s||a<o);if(r!==this.version.getTotalCodewords())throw new Fr;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var s=0;return this.readModule(e-2,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r,n,a)&&(s|=1),s<<=1,this.readModule(e,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e,r,n,a)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new xn("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),o=r/a|0,l=n/s|0,c=o*a,u=l*s,d=new qf(u,c),f=0;f<o;++f)for(var A=f*a,h=0;h<l;++h)for(var m=h*s,p=0;p<a;++p)for(var g=f*(a+2)+1+p,v=A+p,y=0;y<s;++y){var b=h*(s+2)+1+y;if(e.get(b,g)){var w=m+y;d.set(w,v)}}return d},t}(),mH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k5e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,s,o,l=r.getECBlocks(),c=0,u=l.getECBlocks();try{for(var d=mH(u),f=d.next();!f.done;f=d.next()){var A=f.value;c+=A.getCount()}}catch(Y){n={error:Y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var h=new Array(c),m=0;try{for(var p=mH(u),g=p.next();!g.done;g=p.next())for(var A=g.value,v=0;v<A.getCount();v++){var y=A.getDataCodewords(),b=l.getECCodewords()+y;h[m++]=new t(y,new Uint8Array(b))}}catch(Y){s={error:Y}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}for(var w=h[0].codewords.length,P=w-l.getECCodewords(),j=P-1,_=0,v=0;v<j;v++)for(var I=0;I<m;I++)h[I].codewords[v]=e[_++];for(var E=r.getVersionNumber()===24,F=E?8:m,I=0;I<F;I++)h[I].codewords[P-1]=e[_++];for(var k=h[0].codewords.length,v=P;v<k;v++)for(var I=0;I<m;I++){var B=E?(I+8)%m:I,R=E&&B>7?v-1:v;h[B].codewords[R]=e[_++]}if(_!==e.length)throw new xn;return h},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Jre=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new xn(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,s=this.bytes;if(n>0){var o=8-n,l=e<o?e:o,c=o-l,u=255>>8-l<<c;r=(s[a]&u)>>c,e-=l,n+=l,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|s[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(s[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),ao;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(ao||(ao={}));var F5e=function(){function t(){}return t.decode=function(e){var r=new Jre(e),n=new $n,a=new $n,s=new Array,o=ao.ASCII_ENCODE;do if(o===ao.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,a);else{switch(o){case ao.C40_ENCODE:this.decodeC40Segment(r,n);break;case ao.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case ao.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case ao.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case ao.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new Fr}o=ao.ASCII_ENCODE}while(o!==ao.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new Yj(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var s=e.readBits(8);if(s===0)throw new Fr;if(s<=128)return a&&(s+=128),r.append(String.fromCharCode(s-1)),ao.ASCII_ENCODE;if(s===129)return ao.PAD_ENCODE;if(s<=229){var o=s-130;o<10&&r.append("0"),r.append(""+o)}else switch(s){case 230:return ao.C40_ENCODE;case 231:return ao.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return ao.ANSIX12_ENCODE;case 239:return ao.TEXT_ENCODE;case 240:return ao.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new Fr;break}}while(e.available()>0);return ao.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Fr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new Fr}s=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),s=0;break;default:throw new Fr}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Fr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new Fr}s=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),s=0}else throw new Fr;break;default:throw new Fr}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var o=n[s];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new Fr;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,s=Math.floor(a/1600);n[0]=s,a-=s*1600,s=Math.floor(a/40),n[1]=s,n[2]=a-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),a++),o;if(s===0?o=e.available()/8|0:s<250?o=s:o=250*(s-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new Fr;for(var l=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new Fr;l[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(l);try{r.append(fd.decode(l,la.ISO88591))}catch(u){throw new Tw("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),O5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D5e=function(){function t(){this.rsDecoder=new Jj(kc.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new T5e(e),s=a.getVersion(),o=a.readCodewords(),l=k5e.getDataBlocks(o,s),c=0;try{for(var u=O5e(l),d=u.next();!d.done;d=u.next()){var f=d.value;c+=f.getNumDataCodewords()}}catch(b){r={error:b}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var A=new Uint8Array(c),h=l.length,m=0;m<h;m++){var p=l[m],g=p.getCodewords(),v=p.getNumDataCodewords();this.correctErrors(g,v);for(var y=0;y<v;y++)A[y*h+m]=g[y]}return F5e.decode(A)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new qi}for(var a=0;a<r;a++)e[a]=n[a]},t}(),R5e=function(){function t(e){this.image=e,this.rectangleDetector=new Qk(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new tr;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],s=r[2],o=r[3],l=this.transitionsBetween(n,o)+1,c=this.transitionsBetween(s,o)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var u=t.sampleGrid(this.image,n,a,s,o,l,c);return new F6(u,[n,a,s,o])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new Zr(e.getX()+a,e.getY()+s)},t.moveAway=function(e,r,n){var a=e.getX(),s=e.getY();return a<r?a-=1:a+=1,s<n?s-=1:s+=1,new Zr(a,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],s=e[2],o=this.transitionsBetween(r,n),l=this.transitionsBetween(n,a),c=this.transitionsBetween(a,s),u=this.transitionsBetween(s,r),d=o,f=[s,r,n,a];return d>l&&(d=l,f[0]=r,f[1]=n,f[2]=a,f[3]=s),d>c&&(d=c,f[0]=n,f[1]=a,f[2]=s,f[3]=r),d>u&&(f[0]=a,f[1]=s,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s),l=t.shiftPoint(n,a,(o+1)*4),c=t.shiftPoint(a,n,(o+1)*4),u=this.transitionsBetween(l,r),d=this.transitionsBetween(c,s);return u<d?(e[0]=r,e[1]=n,e[2]=a,e[3]=s):(e[0]=n,e[1]=a,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s),l=this.transitionsBetween(n,s),c=t.shiftPoint(r,n,(l+1)*4),u=t.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(c,s),l=this.transitionsBetween(u,s);var d=new Zr(s.getX()+(a.getX()-n.getX())/(o+1),s.getY()+(a.getY()-n.getY())/(o+1)),f=new Zr(s.getX()+(r.getX()-n.getX())/(l+1),s.getY()+(r.getY()-n.getY())/(l+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var A=this.transitionsBetween(c,d)+this.transitionsBetween(u,d),h=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return A>h?d:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(a,s)+1,c=t.shiftPoint(r,n,l*4),u=t.shiftPoint(a,n,o*4);o=this.transitionsBetween(c,s)+1,l=this.transitionsBetween(u,s)+1,(o&1)===1&&(o+=1),(l&1)===1&&(l+=1);var d=(r.getX()+n.getX()+a.getX()+s.getX())/4,f=(r.getY()+n.getY()+a.getY()+s.getY())/4;r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),a=t.moveAway(a,d,f),s=t.moveAway(s,d,f);var A,h;return c=t.shiftPoint(r,n,l*4),c=t.shiftPoint(c,s,o*4),A=t.shiftPoint(n,r,l*4),A=t.shiftPoint(A,a,o*4),u=t.shiftPoint(a,s,l*4),u=t.shiftPoint(u,n,o*4),h=t.shiftPoint(s,a,l*4),h=t.shiftPoint(h,r,o*4),[c,A,u,h]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,s,o,l){var c=O6.getInstance();return c.sampleGrid(e,o,l,.5,.5,o-.5,.5,o-.5,l-.5,.5,l-.5,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),s=Math.trunc(r.getX()),o=Math.trunc(r.getY()),l=Math.abs(o-a)>Math.abs(s-n);if(l){var c=n;n=a,a=c,c=s,s=o,o=c}for(var u=Math.abs(s-n),d=Math.abs(o-a),f=-u/2,A=a<o?1:-1,h=n<s?1:-1,m=0,p=this.image.get(l?a:n,l?n:a),g=n,v=a;g!==s;g+=h){var y=this.image.get(l?v:g,l?g:v);if(y!==p&&(m++,p=y),f+=d,f>0){if(v===o)break;v+=A,f-=u}}return m},t}(),TS=function(){function t(){this.decoder=new D5e}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(fs.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),a=t.NO_POINTS}else{var o=new R5e(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var l=n.getRawBytes(),c=new Kl(n.getText(),l,8*l.length,a,gn.DATA_MATRIX,ds.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata(Al.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&c.putMetadata(Al.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new tr;var a=this.moduleSize(r,e),s=r[1],o=n[1],l=r[0],c=n[0],u=(c-l+1)/a,d=(o-s+1)/a;if(u<=0||d<=0)throw new tr;var f=a/2;s+=f,l+=f;for(var A=new qf(u,d),h=0;h<d;h++)for(var m=s+h*a,p=0;p<u;p++)e.get(l+p*a,m)&&A.set(p,h);return A},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],s=e[1];a<n&&r.get(a,s);)a++;if(a===n)throw new tr;var o=a-e[0];if(o===0)throw new tr;return o},t.NO_POINTS=[],t}(),M5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){M5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new TS,r)||this}return e})(h1);var qx;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(qx||(qx={}));var L5e=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Ii(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new xn;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(qx.L,"L",1),t.M=new t(qx.M,"M",0),t.Q=new t(qx.Q,"Q",3),t.H=new t(qx.H,"H",2),t}(),U5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zre=function(){function t(e){this.errorCorrectionLevel=L5e.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return Wn.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,s=Number.MAX_SAFE_INTEGER,o=0;try{for(var l=U5e(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var u=c.value,d=u[0];if(d===e||d===r)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<s&&(o=u[1],s=f),e!==r&&(f=t.numBitsDiffering(r,d),f<s&&(o=u[1],s=f))}}catch(A){n={error:A}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return s<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),Q5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qt=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var s=Q5e(a),o=s.next();!o.done;o=s.next()){var l=o.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),et=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),V5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kp=function(){function t(e,r){for(var n,a,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var l=0,c=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();try{for(var d=V5e(u),f=d.next();!f.done;f=d.next()){var A=f.value;l+=A.getCount()*(A.getDataCodewords()+c)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Fr;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Fr}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new xn;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var s=t.VERSION_DECODE_INFO[a];if(s===e)return t.getVersionForNumber(a+7);var o=Zre.numBitsDiffering(e,s);o<r&&(n=a+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new qf(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var s=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Qt(7,new et(1,19)),new Qt(10,new et(1,16)),new Qt(13,new et(1,13)),new Qt(17,new et(1,9))),new t(2,Int32Array.from([6,18]),new Qt(10,new et(1,34)),new Qt(16,new et(1,28)),new Qt(22,new et(1,22)),new Qt(28,new et(1,16))),new t(3,Int32Array.from([6,22]),new Qt(15,new et(1,55)),new Qt(26,new et(1,44)),new Qt(18,new et(2,17)),new Qt(22,new et(2,13))),new t(4,Int32Array.from([6,26]),new Qt(20,new et(1,80)),new Qt(18,new et(2,32)),new Qt(26,new et(2,24)),new Qt(16,new et(4,9))),new t(5,Int32Array.from([6,30]),new Qt(26,new et(1,108)),new Qt(24,new et(2,43)),new Qt(18,new et(2,15),new et(2,16)),new Qt(22,new et(2,11),new et(2,12))),new t(6,Int32Array.from([6,34]),new Qt(18,new et(2,68)),new Qt(16,new et(4,27)),new Qt(24,new et(4,19)),new Qt(28,new et(4,15))),new t(7,Int32Array.from([6,22,38]),new Qt(20,new et(2,78)),new Qt(18,new et(4,31)),new Qt(18,new et(2,14),new et(4,15)),new Qt(26,new et(4,13),new et(1,14))),new t(8,Int32Array.from([6,24,42]),new Qt(24,new et(2,97)),new Qt(22,new et(2,38),new et(2,39)),new Qt(22,new et(4,18),new et(2,19)),new Qt(26,new et(4,14),new et(2,15))),new t(9,Int32Array.from([6,26,46]),new Qt(30,new et(2,116)),new Qt(22,new et(3,36),new et(2,37)),new Qt(20,new et(4,16),new et(4,17)),new Qt(24,new et(4,12),new et(4,13))),new t(10,Int32Array.from([6,28,50]),new Qt(18,new et(2,68),new et(2,69)),new Qt(26,new et(4,43),new et(1,44)),new Qt(24,new et(6,19),new et(2,20)),new Qt(28,new et(6,15),new et(2,16))),new t(11,Int32Array.from([6,30,54]),new Qt(20,new et(4,81)),new Qt(30,new et(1,50),new et(4,51)),new Qt(28,new et(4,22),new et(4,23)),new Qt(24,new et(3,12),new et(8,13))),new t(12,Int32Array.from([6,32,58]),new Qt(24,new et(2,92),new et(2,93)),new Qt(22,new et(6,36),new et(2,37)),new Qt(26,new et(4,20),new et(6,21)),new Qt(28,new et(7,14),new et(4,15))),new t(13,Int32Array.from([6,34,62]),new Qt(26,new et(4,107)),new Qt(22,new et(8,37),new et(1,38)),new Qt(24,new et(8,20),new et(4,21)),new Qt(22,new et(12,11),new et(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Qt(30,new et(3,115),new et(1,116)),new Qt(24,new et(4,40),new et(5,41)),new Qt(20,new et(11,16),new et(5,17)),new Qt(24,new et(11,12),new et(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Qt(22,new et(5,87),new et(1,88)),new Qt(24,new et(5,41),new et(5,42)),new Qt(30,new et(5,24),new et(7,25)),new Qt(24,new et(11,12),new et(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Qt(24,new et(5,98),new et(1,99)),new Qt(28,new et(7,45),new et(3,46)),new Qt(24,new et(15,19),new et(2,20)),new Qt(30,new et(3,15),new et(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Qt(28,new et(1,107),new et(5,108)),new Qt(28,new et(10,46),new et(1,47)),new Qt(28,new et(1,22),new et(15,23)),new Qt(28,new et(2,14),new et(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Qt(30,new et(5,120),new et(1,121)),new Qt(26,new et(9,43),new et(4,44)),new Qt(28,new et(17,22),new et(1,23)),new Qt(28,new et(2,14),new et(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Qt(28,new et(3,113),new et(4,114)),new Qt(26,new et(3,44),new et(11,45)),new Qt(26,new et(17,21),new et(4,22)),new Qt(26,new et(9,13),new et(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Qt(28,new et(3,107),new et(5,108)),new Qt(26,new et(3,41),new et(13,42)),new Qt(30,new et(15,24),new et(5,25)),new Qt(28,new et(15,15),new et(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Qt(28,new et(4,116),new et(4,117)),new Qt(26,new et(17,42)),new Qt(28,new et(17,22),new et(6,23)),new Qt(30,new et(19,16),new et(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Qt(28,new et(2,111),new et(7,112)),new Qt(28,new et(17,46)),new Qt(30,new et(7,24),new et(16,25)),new Qt(24,new et(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Qt(30,new et(4,121),new et(5,122)),new Qt(28,new et(4,47),new et(14,48)),new Qt(30,new et(11,24),new et(14,25)),new Qt(30,new et(16,15),new et(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Qt(30,new et(6,117),new et(4,118)),new Qt(28,new et(6,45),new et(14,46)),new Qt(30,new et(11,24),new et(16,25)),new Qt(30,new et(30,16),new et(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Qt(26,new et(8,106),new et(4,107)),new Qt(28,new et(8,47),new et(13,48)),new Qt(30,new et(7,24),new et(22,25)),new Qt(30,new et(22,15),new et(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Qt(28,new et(10,114),new et(2,115)),new Qt(28,new et(19,46),new et(4,47)),new Qt(28,new et(28,22),new et(6,23)),new Qt(30,new et(33,16),new et(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Qt(30,new et(8,122),new et(4,123)),new Qt(28,new et(22,45),new et(3,46)),new Qt(30,new et(8,23),new et(26,24)),new Qt(30,new et(12,15),new et(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Qt(30,new et(3,117),new et(10,118)),new Qt(28,new et(3,45),new et(23,46)),new Qt(30,new et(4,24),new et(31,25)),new Qt(30,new et(11,15),new et(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Qt(30,new et(7,116),new et(7,117)),new Qt(28,new et(21,45),new et(7,46)),new Qt(30,new et(1,23),new et(37,24)),new Qt(30,new et(19,15),new et(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Qt(30,new et(5,115),new et(10,116)),new Qt(28,new et(19,47),new et(10,48)),new Qt(30,new et(15,24),new et(25,25)),new Qt(30,new et(23,15),new et(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Qt(30,new et(13,115),new et(3,116)),new Qt(28,new et(2,46),new et(29,47)),new Qt(30,new et(42,24),new et(1,25)),new Qt(30,new et(23,15),new et(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Qt(30,new et(17,115)),new Qt(28,new et(10,46),new et(23,47)),new Qt(30,new et(10,24),new et(35,25)),new Qt(30,new et(19,15),new et(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Qt(30,new et(17,115),new et(1,116)),new Qt(28,new et(14,46),new et(21,47)),new Qt(30,new et(29,24),new et(19,25)),new Qt(30,new et(11,15),new et(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Qt(30,new et(13,115),new et(6,116)),new Qt(28,new et(14,46),new et(23,47)),new Qt(30,new et(44,24),new et(7,25)),new Qt(30,new et(59,16),new et(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Qt(30,new et(12,121),new et(7,122)),new Qt(28,new et(12,47),new et(26,48)),new Qt(30,new et(39,24),new et(14,25)),new Qt(30,new et(22,15),new et(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Qt(30,new et(6,121),new et(14,122)),new Qt(28,new et(6,47),new et(34,48)),new Qt(30,new et(46,24),new et(10,25)),new Qt(30,new et(2,15),new et(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Qt(30,new et(17,122),new et(4,123)),new Qt(28,new et(29,46),new et(14,47)),new Qt(30,new et(49,24),new et(10,25)),new Qt(30,new et(24,15),new et(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Qt(30,new et(4,122),new et(18,123)),new Qt(28,new et(13,46),new et(32,47)),new Qt(30,new et(48,24),new et(14,25)),new Qt(30,new et(42,15),new et(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Qt(30,new et(20,117),new et(4,118)),new Qt(28,new et(40,47),new et(7,48)),new Qt(30,new et(43,24),new et(22,25)),new Qt(30,new et(10,15),new et(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Qt(30,new et(19,118),new et(6,119)),new Qt(28,new et(18,47),new et(31,48)),new Qt(30,new et(34,24),new et(34,25)),new Qt(30,new et(20,15),new et(61,16)))],t}(),jo;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(jo||(jo={}));var pH=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[jo.DATA_MASK_000,new t(jo.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[jo.DATA_MASK_001,new t(jo.DATA_MASK_001,function(e,r){return(e&1)===0})],[jo.DATA_MASK_010,new t(jo.DATA_MASK_010,function(e,r){return r%3===0})],[jo.DATA_MASK_011,new t(jo.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[jo.DATA_MASK_100,new t(jo.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[jo.DATA_MASK_101,new t(jo.DATA_MASK_101,function(e,r){return e*r%6===0})],[jo.DATA_MASK_110,new t(jo.DATA_MASK_110,function(e,r){return e*r%6<3})],[jo.DATA_MASK_111,new t(jo.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),H5e=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new Fr;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),s=0,o=a-7,n=a-1;n>=o;n--)s=this.copyBit(8,n,s);for(var r=a-8;r<a;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=Zre.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Fr},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return kp.getVersionForNumber(r);for(var n=0,a=e-11,s=5;s>=0;s--)for(var o=e-9;o>=a;o--)n=this.copyBit(o,s,n);var l=kp.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var o=5;o>=0;o--)for(var s=e-9;s>=a;s--)n=this.copyBit(o,s,n);if(l=kp.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new Fr},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=pH.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var s=r.buildFunctionPattern(),o=!0,l=new Uint8Array(r.getTotalCodewords()),c=0,u=0,d=0,f=a-1;f>0;f-=2){f===6&&f--;for(var A=0;A<a;A++)for(var h=o?a-1-A:A,m=0;m<2;m++)s.get(f-m,h)||(d++,u<<=1,this.bitMatrix.get(f-m,h)&&(u|=1),d===8&&(l[c++]=u,d=0,u=0));o=!o}if(c!==r.getTotalCodewords())throw new Fr;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=pH.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,s=e.getHeight();a<s;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),gH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$5e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,s,o,l;if(e.length!==r.getTotalCodewords())throw new xn;var c=r.getECBlocksForLevel(n),u=0,d=c.getECBlocks();try{for(var f=gH(d),A=f.next();!A.done;A=f.next()){var h=A.value;u+=h.getCount()}}catch(R){a={error:R}}finally{try{A&&!A.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}var m=new Array(u),p=0;try{for(var g=gH(d),v=g.next();!v.done;v=g.next())for(var h=v.value,y=0;y<h.getCount();y++){var b=h.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;m[p++]=new t(b,new Uint8Array(w))}}catch(R){o={error:R}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}for(var P=m[0].codewords.length,j=m.length-1;j>=0;){var _=m[j].codewords.length;if(_===P)break;j--}j++;for(var I=P-c.getECCodewordsPerBlock(),E=0,y=0;y<I;y++)for(var F=0;F<p;F++)m[F].codewords[y]=e[E++];for(var F=j;F<p;F++)m[F].codewords[I]=e[E++];for(var k=m[0].codewords.length,y=I;y<k;y++)for(var F=0;F<p;F++){var B=F<j?y:y+1;m[F].codewords[B]=e[E++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Wu;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Wu||(Wu={}));var gs=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new xn;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Wu.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Wu.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Wu.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Wu.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Wu.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Wu.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Wu.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Wu.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Wu.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Wu.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),G5e=function(){function t(){}return t.decode=function(e,r,n,a){var s=new Jre(e),o=new $n,l=new Array,c=-1,u=-1;try{var d=null,f=!1,A=void 0;do{if(s.available()<4)A=gs.TERMINATOR;else{var h=s.readBits(4);A=gs.forBits(h)}switch(A){case gs.TERMINATOR:break;case gs.FNC1_FIRST_POSITION:case gs.FNC1_SECOND_POSITION:f=!0;break;case gs.STRUCTURED_APPEND:if(s.available()<16)throw new Fr;c=s.readBits(8),u=s.readBits(8);break;case gs.ECI:var m=t.parseECIValue(s);if(d=Ao.getCharacterSetECIByValue(m),d===null)throw new Fr;break;case gs.HANZI:var p=s.readBits(4),g=s.readBits(A.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(s,o,g);break;default:var v=s.readBits(A.getCharacterCountBits(r));switch(A){case gs.NUMERIC:t.decodeNumericSegment(s,o,v);break;case gs.ALPHANUMERIC:t.decodeAlphanumericSegment(s,o,v,f);break;case gs.BYTE:t.decodeByteSegment(s,o,v,d,l,a);break;case gs.KANJI:t.decodeKanjiSegment(s,o,v);break;default:throw new Fr}break}}while(A!==gs.TERMINATOR)}catch{throw new Fr}return new Yj(e,o.toString(),l.length===0?null:l,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new Fr;for(var a=new Uint8Array(2*n),s=0;n>0;){var o=e.readBits(13),l=o/96<<8&4294967295|o%96;l<959?l+=41377:l+=42657,a[s]=l>>8&255,a[s+1]=l&255,s+=2,n--}try{r.append(fd.decode(a,la.GB2312))}catch(c){throw new Fr(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new Fr;for(var a=new Uint8Array(2*n),s=0;n>0;){var o=e.readBits(13),l=o/192<<8&4294967295|o%192;l<7936?l+=33088:l+=49472,a[s]=l>>8,a[s+1]=l,s+=2,n--}try{r.append(fd.decode(a,la.SHIFT_JIS))}catch(c){throw new Fr(c)}},t.decodeByteSegment=function(e,r,n,a,s,o){if(8*n>e.available())throw new Fr;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var u;a===null?u=la.guessEncoding(l,o):u=a.getName();try{r.append(fd.decode(l,u))}catch(d){throw new Fr(d)}s.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Fr;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var s=r.length();n>1;){if(e.available()<11)throw new Fr;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new Fr;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var l=s;l<r.length();l++)r.charAt(l)==="%"&&(l<r.length()-1&&r.charAt(l+1)==="%"?r.deleteCharAt(l+1):r.setCharAt(l,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new Fr;var a=e.readBits(10);if(a>=1e3)throw new Fr;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new Fr;var s=e.readBits(7);if(s>=100)throw new Fr;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new Fr;var o=e.readBits(4);if(o>=10)throw new Fr;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new Fr},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),ene=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),xH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K5e=function(){function t(){this.rsDecoder=new Jj(kc.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(qf.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new H5e(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new ene(!0)),s}catch(o){throw a!==null?a:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,s,o,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=$5e.getDataBlocks(u,l,c),f=0;try{for(var A=xH(d),h=A.next();!h.done;h=A.next()){var m=h.value;f+=m.getNumDataCodewords()}}catch(j){n={error:j}}finally{try{h&&!h.done&&(a=A.return)&&a.call(A)}finally{if(n)throw n.error}}var p=new Uint8Array(f),g=0;try{for(var v=xH(d),y=v.next();!y.done;y=v.next()){var m=y.value,b=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(b,w);for(var P=0;P<w;P++)p[g++]=b[P]}}catch(j){s={error:j}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}return G5e.decode(p,l,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new qi}for(var a=0;a<r;a++)e[a]=n[a]},t}(),q5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z5e=function(t){q5e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=(this.getX()+n)/2,o=(this.getY()+r)/2,l=(this.estimatedModuleSize+a)/2;return new e(s,o,l)},e}(Zr),W5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X5e=function(){function t(e,r,n,a,s,o,l){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=s,this.moduleSize=o,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,s=this.startY+r/2,o=new Int32Array(3),l=this.image,c=0;c<r;c++){var u=s+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<a&&!l.get(d,u);)d++;for(var f=0;d<a;){if(l.get(d,u))if(f===1)o[1]++;else if(f===2){if(this.foundPatternCross(o)){var A=this.handlePossibleCenter(o,u,d);if(A!==null)return A}o[0]=o[2],o[1]=1,o[2]=0,f=1}else o[++f]++;else f===1&&f++,o[f]++;d++}if(this.foundPatternCross(o)){var A=this.handlePossibleCenter(o,u,a);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new tr},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var s=this.image,o=s.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(r,c)&&l[1]<=n;)l[1]++,c++;if(c===o||l[1]>n)return NaN;for(;c<o&&!s.get(r,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var u=l[0]+l[1]+l[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,s,o=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,l,2*e[1],o);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=W5e(this.possibleCenters),f=d.next();!f.done;f=d.next()){var A=f.value;if(A.aboutEquals(u,c,l))return A.combineEstimate(c,l,u)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var h=new z5e(l,c,u);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},t}(),Y5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),J5e=function(t){Y5e(e,t);function e(r,n,a,s){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=a,o.count=s,s===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=this.count+1,o=(this.count*this.getX()+n)/s,l=(this.count*this.getY()+r)/s,c=(this.count*this.estimatedModuleSize+a)/s;return new e(o,l,c,s)},e}(Zr),Z5e=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),hy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eBe=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(fs.TRY_HARDER)!==void 0,n=e!=null&&e.get(fs.PURE_BARCODE)!==void 0,a=this.image,s=a.getHeight(),o=a.getWidth(),l=Math.floor(3*s/(4*t.MAX_MODULES));(l<t.MIN_SKIP||r)&&(l=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),d=l-1;d<s&&!c;d+=l){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,A=0;A<o;A++)if(a.get(A,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var h=this.handlePossibleCenter(u,d,A,n);if(h===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-l,A=o-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var h=this.handlePossibleCenter(u,d,o,n);h===!0&&(l=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var p=this.selectBestPatterns();return Zr.orderBestPatterns(p),new Z5e(p)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var s=r/7,o=s/2;return Math.abs(s-e[0])<o&&Math.abs(s-e[1])<o&&Math.abs(3*s-e[2])<3*o&&Math.abs(s-e[3])<o&&Math.abs(s-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var s=this.getCrossCheckStateCount(),o=0,l=this.image;e>=o&&r>=o&&l.get(r-o,e-o);)s[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!l.get(r-o,e-o)&&s[1]<=n;)s[1]++,o++;if(e<o||r<o||s[1]>n)return!1;for(;e>=o&&r>=o&&l.get(r-o,e-o)&&s[0]<=n;)s[0]++,o++;if(s[0]>n)return!1;var c=l.getHeight(),u=l.getWidth();for(o=1;e+o<c&&r+o<u&&l.get(r+o,e+o);)s[2]++,o++;if(e+o>=c||r+o>=u)return!1;for(;e+o<c&&r+o<u&&!l.get(r+o,e+o)&&s[3]<n;)s[3]++,o++;if(e+o>=c||r+o>=u||s[3]>=n)return!1;for(;e+o<c&&r+o<u&&l.get(r+o,e+o)&&s[4]<n;)s[4]++,o++;if(s[4]>=n)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-a)<2*a&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var s=this.image,o=s.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(r,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(r,c);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!s.get(r,c)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&s.get(r,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var s=this.image,o=s.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(c,r);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(c,r)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(c,r)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(c,r);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!s.get(c,r)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&s.get(c,r)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,Math.floor(o),e[2],s);if(!isNaN(l)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(l),e[2],s),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(l),Math.floor(o),e[2],s)))){for(var c=s/7,u=!1,d=this.possibleCenters,f=0,A=d.length;f<A;f++){var h=d[f];if(h.aboutEquals(c,l,o)){d[f]=h.combineEstimate(l,o,c),u=!0;break}}if(!u){var m=new J5e(o,l,c);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var s=hy(this.possibleCenters),o=s.next();!o.done;o=s.next()){var l=o.value;if(l.getCount()>=t.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,s=0,o=0,l=this.possibleCenters.length;try{for(var c=hy(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(s++,o+=d.getEstimatedModuleSize())}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(s<3)return!1;var f=o/l,A=0;try{for(var h=hy(this.possibleCenters),m=h.next();!m.done;m=h.next()){var d=m.value;A+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}return A<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,a,s=this.possibleCenters.length;if(s<3)throw new tr;var o=this.possibleCenters,l;if(s>3){var c=0,u=0;try{for(var d=hy(this.possibleCenters),f=d.next();!f.done;f=d.next()){var A=f.value,h=A.getEstimatedModuleSize();c+=h,u+=h*h}}catch(P){e={error:P}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}l=c/s;var m=Math.sqrt(u/s-l*l);o.sort(function(P,j){var _=Math.abs(j.getEstimatedModuleSize()-l),I=Math.abs(P.getEstimatedModuleSize()-l);return _<I?-1:_>I?1:0});for(var p=Math.max(.2*l,m),g=0;g<o.length&&o.length>3;g++){var v=o[g];Math.abs(v.getEstimatedModuleSize()-l)>p&&(o.splice(g,1),g--)}}if(o.length>3){var c=0;try{for(var y=hy(o),b=y.next();!b.done;b=y.next()){var w=b.value;c+=w.getEstimatedModuleSize()}}catch(j){n={error:j}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}l=c/o.length,o.sort(function(j,_){if(_.getCount()===j.getCount()){var I=Math.abs(_.getEstimatedModuleSize()-l),E=Math.abs(j.getEstimatedModuleSize()-l);return I<E?1:I>E?-1:0}else return _.getCount()-j.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),tBe=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(fs.NEED_RESULT_POINT_CALLBACK);var r=new eBe(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),s=this.calculateModuleSize(r,n,a);if(s<1)throw new tr("No pattern found in proccess finder.");var o=t.computeDimension(r,n,a,s),l=kp.getProvisionalVersionForDimension(o),c=l.getDimensionForVersion()-7,u=null;if(l.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+a.getX(),f=n.getY()-r.getY()+a.getY(),A=1-3/c,h=Math.floor(r.getX()+A*(d-r.getX())),m=Math.floor(r.getY()+A*(f-r.getY())),p=4;p<=16;p<<=1)try{u=this.findAlignmentInRegion(s,h,m,p);break}catch(b){if(!(b instanceof tr))throw b}var g=t.createTransform(r,n,a,u,o),v=t.sampleGrid(this.image,g,o),y;return u===null?y=[a,r,n]:y=[a,r,n,u],new F6(v,y)},t.createTransform=function(e,r,n,a,s){var o=s-3.5,l,c,u,d;return a!==null?(l=a.getX(),c=a.getY(),u=o-3,d=u):(l=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=o,d=o),zre.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,u,d,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=O6.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var s=ga.round(Zr.distance(e,r)/a),o=ga.round(Zr.distance(e,n)/a),l=Math.floor((s+o)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new tr("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,a),o=1,l=e-(n-e);l<0?(o=e/(e-l),l=0):l>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*o);return o=1,c<0?(o=r/(r-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*o),s+=this.sizeOfBlackWhiteBlackRun(e,r,l,c),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var s=Math.abs(a-r)>Math.abs(n-e);if(s){var o=e;e=r,r=o,o=n,n=a,a=o}for(var l=Math.abs(n-e),c=Math.abs(a-r),u=-l/2,d=e<n?1:-1,f=r<a?1:-1,A=0,h=n+d,m=e,p=r;m!==h;m+=d){var g=s?p:m,v=s?m:p;if(A===1===this.image.get(g,v)){if(A===2)return ga.distance(m,p,e,r);A++}if(u+=c,u>0){if(p===a)break;p+=f,u-=l}}return A===2?ga.distance(n+d,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var s=Math.floor(a*e),o=Math.max(0,r-s),l=Math.min(this.image.getWidth()-1,r+s);if(l-o<e*3)throw new tr("Alignment top exceeds estimated module size.");var c=Math.max(0,n-s),u=Math.min(this.image.getHeight()-1,n+s);if(u-c<e*3)throw new tr("Alignment bottom exceeds estimated module size.");var d=new X5e(this.image,o,c,l-o,u-c,e,this.resultPointCallback);return d.find()},t}(),kS=function(){function t(){this.decoder=new K5e}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(fs.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),a=t.NO_POINTS}else{var o=new tBe(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),a=o.getPoints()}n.getOther()instanceof ene&&n.getOther().applyMirroredCorrection(a);var l=new Kl(n.getText(),n.getRawBytes(),void 0,a,gn.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata(Al.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&l.putMetadata(Al.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(l.putMetadata(Al.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(Al.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new tr;var a=this.moduleSize(r,e),s=r[1],o=n[1],l=r[0],c=n[0];if(l>=c||s>=o)throw new tr;if(o-s!==c-l&&(c=l+(o-s),c>=e.getWidth()))throw new tr;var u=Math.round((c-l+1)/a),d=Math.round((o-s+1)/a);if(u<=0||d<=0)throw new tr;if(d!==u)throw new tr;var f=Math.floor(a/2);s+=f,l+=f;var A=l+Math.floor((u-1)*a)-c;if(A>0){if(A>f)throw new tr;l-=A}var h=s+Math.floor((d-1)*a)-o;if(h>0){if(h>f)throw new tr;s-=h}for(var m=new qf(u,d),p=0;p<d;p++)for(var g=s+Math.floor(p*a),v=0;v<u;v++)e.get(l+Math.floor(v*a),g)&&m.set(v,p);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),s=e[0],o=e[1],l=!0,c=0;s<a&&o<n;){if(l!==r.get(s,o)){if(++c===5)break;l=!l}s++,o++}if(s===a||o===n)throw new tr;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),rBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ua=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return ga.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),s=0;try{for(var o=rBe(e),l=o.next();!l.done;l=o.next()){var c=l.value;a[s++]=c}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=mo.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),nBe=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),aBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sBe=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),s=t.detect(n,a);return s.length||(a=a.clone(),a.rotate180(),s=t.detect(n,a)),new nBe(a,s)},t.detect=function(e,r){for(var n,a,s=new Array,o=0,l=0,c=!1;o<r.getHeight();){var u=t.findVertices(r,o,l);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(n=void 0,aBe(s)),f=d.next();!f.done;f=d.next()){var A=f.value;A[1]!=null&&(o=Math.trunc(Math.max(o,A[1].getY()))),A[3]!=null&&(o=Math.max(o,Math.trunc(A[3].getY())))}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(c=!0,s.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),o=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),o=Math.trunc(u[4].getY()))}return s},t.findVertices=function(e,r,n){var a=e.getHeight(),s=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,a,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,a,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,s,o){for(var l=new Array(4),c=!1,u=new Int32Array(o.length);a<r;a+=t.ROW_STEP){var d=t.findGuardPattern(e,s,a,n,!1,o,u);if(d!=null){for(;a>0;){var f=t.findGuardPattern(e,s,--a,n,!1,o,u);if(f!=null)d=f;else{a++;break}}l[0]=new Zr(d[0],a),l[1]=new Zr(d[1],a),c=!0;break}}var A=a+1;if(c){for(var h=0,f=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);A<r;A++){var d=t.findGuardPattern(e,f[0],A,n,!1,o,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,h=0;else{if(h>t.SKIPPED_ROW_COUNT_MAX)break;h++}}A-=h+1,l[2]=new Zr(f[0],A),l[3]=new Zr(f[1],A)}return A-a<t.BARCODE_MIN_HEIGHT&&mo.fill(l,null),l},t.findGuardPattern=function(e,r,n,a,s,o,l){mo.fillWithin(l,0,l.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,f=0,A=o.length,h=s;d<a;d++){var m=e.get(d,n);if(m!==h)l[f]++;else{if(f===A-1){if(t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],ds.arraycopy(l,2,l,0,f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,h=!h}}return f===A-1&&t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,o=0,l=0;l<a;l++)s+=e[l],o+=r[l];if(s<o)return 1/0;var c=s/o;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],A=r[d]*c,h=f>A?f-A:A-f;if(h>n)return 1/0;u+=h}return u/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),iBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vp=function(){function t(e,r){if(r.length===0)throw new xn;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),ds.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var s=iBe(this.coefficients),o=s.next();!o.done;o=s.next()){var l=o.value;a=this.field.add(a,l)}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new xn("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),o=n.length-r.length;ds.arraycopy(n,0,s,0,o);for(var l=o;l<n.length;l++)s[l]=this.field.add(r[l-o],n[l]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new xn("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new xn("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,o=new Int32Array(n+s-1),l=0;l<n;l++)for(var c=r[l],u=0;u<s;u++)o[l+u]=this.field.add(o[l+u],this.field.multiply(c,a[u]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new xn;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new $n,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),oBe=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new xn;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new qre;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),lBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cBe=function(t){lBe(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var s=1,o=0;o<r;o++)a.expTable[o]=s,s=s*n%r;for(var o=0;o<r-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new vp(a,new Int32Array([0])),a.one=new vp(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new xn;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new vp(this,a)},e.PDF417_GF=new e(ua.NUMBER_OF_CODEWORDS,3),e}(oBe),uBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dBe=function(){function t(){this.field=cBe.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,s,o=new vp(this.field,e),l=new Int32Array(r),c=!1,u=r;u>0;u--){var d=o.evaluateAt(this.field.exp(u));l[r-u]=d,d!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(n!=null)try{for(var A=uBe(n),h=A.next();!h.done;h=A.next()){var m=h.value,p=this.field.exp(e.length-1-m),g=new vp(this.field,new Int32Array([this.field.subtract(0,p),1]));f=f.multiply(g)}}catch(I){a={error:I}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}for(var v=new vp(this.field,l),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),v,r),b=y[0],w=y[1],P=this.findErrorLocations(b),j=this.findErrorMagnitudes(w,b,P),u=0;u<P.length;u++){var _=e.length-1-this.field.log(P[u]);if(_<0)throw qi.getChecksumInstance();e[_]=this.field.subtract(e[_],j[u])}return P.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=e,o=r,l=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(n/2);){var u=s,d=l;if(s=o,l=c,s.isZero())throw qi.getChecksumInstance();o=u;for(var f=this.field.getZero(),A=s.getCoefficient(s.getDegree()),h=this.field.inverse(A);o.getDegree()>=s.getDegree()&&!o.isZero();){var m=o.getDegree()-s.getDegree(),p=this.field.multiply(o.getCoefficient(o.getDegree()),h);f=f.add(this.field.buildMonomial(m,p)),o=o.subtract(s.multiplyByMonomial(m,p))}c=f.multiply(l).subtract(d).negative()}var g=c.getCoefficient(0);if(g===0)throw qi.getChecksumInstance();var v=this.field.inverse(g),y=c.multiply(v),b=o.multiply(v);return[y,b]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,s=1;s<this.field.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=this.field.inverse(s),a++);if(a!==r)throw qi.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),s=new Int32Array(a),o=1;o<=a;o++)s[a-o]=this.field.multiply(o,r.getCoefficient(o));for(var l=new vp(this.field,s),c=n.length,u=new Int32Array(c),o=0;o<c;o++){var d=this.field.inverse(n[o]),f=this.field.subtract(0,e.evaluateAt(d)),A=this.field.inverse(l.evaluateAt(d));u[o]=this.field.multiply(f,A)}return u},t}(),Hk=function(){function t(e,r,n,a,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,s)}return t.prototype.constructor_1=function(e,r,n,a,s){var o=r==null||n==null,l=a==null||s==null;if(o&&l)throw new tr;o?(r=new Zr(0,a.getY()),n=new Zr(0,s.getY())):l&&(a=new Zr(e.getWidth()-1,r.getY()),s=new Zr(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,s=this.bottomLeft,o=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var d=new Zr(c.getX(),u);n?a=d:o=d}if(r>0){var f=n?this.bottomLeft:this.bottomRight,A=Math.trunc(f.getY()+r);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);var h=new Zr(f.getX(),A);n?s=h:l=h}return new t(this.image,a,s,o,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),fBe=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),R6=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(o,l,c,u,d,f){if(o==="%%")return"%";if(r[++n]!==void 0){o=u?parseInt(u.substr(1)):void 0;var A=d?parseInt(d.substr(1)):void 0,h;switch(f){case"s":h=r[n];break;case"c":h=r[n][0];break;case"f":h=parseFloat(r[n]).toFixed(o);break;case"p":h=parseFloat(r[n]).toPrecision(o);break;case"e":h=parseFloat(r[n]).toExponential(o);break;case"x":h=parseInt(r[n]).toString(A||16);break;case"d":h=parseFloat(parseInt(r[n],A||10).toPrecision(o)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(A);for(var m=parseInt(c),p=c&&c[0]+""=="0"?"0":" ";h.length<m;)h=l!==void 0?h+p:p+h;return h}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),hBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tne=function(){function t(e){this.boundingBox=new Hk(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new R6,a=0;try{for(var s=hBe(this.codewords),o=s.next();!o.done;o=s.next()){var l=o.value;if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),ABe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mBe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s},$y=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,s=function(f,A){var h={getKey:function(){return f},getValue:function(){return A}};h.getValue()>n?(n=h.getValue(),a=[],a.push(h.getKey())):h.getValue()===n&&a.push(h.getKey())};try{for(var o=ABe(this.values.entries()),l=o.next();!l.done;l=o.next()){var c=mBe(l.value,2),u=c[0],d=c[1];s(u,d)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return ua.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),pBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vH=function(t){pBe(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=v5(this.getCodewords()),s=a.next();!s.done;s=a.next()){var o=s.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),s=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=-1,d=1,f=0,A=l;A<c;A++)if(n[A]!=null){var h=n[A],m=h.getRowNumber()-u;if(m===0)f++;else if(m===1)d=Math.max(d,f),f=1,u=h.getRowNumber();else if(m<0||h.getRowNumber()>=r.getRowCount()||m>A)n[A]=null;else{var p=void 0;d>2?p=(d-2)*m:p=m;for(var g=p>=A,v=1;v<=p&&!g;v++)g=n[A-v]!=null;g?n[A]=null:(u=h.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var s=new Int32Array(a.getRowCount());try{for(var o=v5(this.getCodewords()),l=o.next();!l.done;l=o.next()){var c=l.value;if(c!=null){var u=c.getRowNumber();if(u>=s.length)continue;s[u]++}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.getCodewords(),u=-1,d=o;d<l;d++)if(c[d]!=null){var f=c[d];f.setRowNumberAsRowIndicatorColumn();var A=f.getRowNumber()-u;A===0||(A===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?c[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),s=new $y,o=new $y,l=new $y,c=new $y;try{for(var u=v5(a),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var A=f.getValue()%30,h=f.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:o.setValue(A*3+1);break;case 1:c.setValue(A/3),l.setValue(A%3);break;case 2:s.setValue(A+1);break}}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(s.getValue().length===0||o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<ua.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>ua.MAX_ROWS_IN_BARCODE)return null;var m=new fBe(s.getValue()[0],o.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var s=r[a];if(r[a]!=null){var o=s.getValue()%30,l=s.getRowNumber();if(l>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:o+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(tne),gBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xBe=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=ua.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,o=this.barcodeColumnCount+1;o>0&&s<this.ADJUST_ROW_NUMBER_SKIP;o--){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,o=1;o<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;o++){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,s;if(this.detectionResultColumns[e-1]!=null){var o=n[r],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=l[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=l[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=l[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=l[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=l[r+2],u[13]=c[r+2]);try{for(var d=gBe(u),f=d.next();!f.done;f=d.next()){var A=f.value;if(t.adjustRowNumber(o,A))return}}catch(h){a={error:h}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new R6,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[a].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),vBe=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),yBe=function(){function t(){}return t.initialize=function(){for(var e=0;e<ua.SYMBOL_TABLE.length;e++)for(var r=ua.SYMBOL_TABLE[e],n=r&1,a=0;a<ua.BARS_IN_MODULE;a++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(ua.BARS_IN_MODULE)),t.RATIOS_TABLE[e][ua.BARS_IN_MODULE-a-1]=Math.fround(s/ua.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=ga.sum(e),n=new Int32Array(ua.BARS_IN_MODULE),a=0,s=0,o=0;o<ua.MODULES_IN_CODEWORD;o++){var l=r/(2*ua.MODULES_IN_CODEWORD)+o*r/ua.MODULES_IN_CODEWORD;s+e[a]<=l&&(s+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return ua.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=ga.sum(e),n=new Array(ua.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var s=Uk.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,u=t.RATIOS_TABLE[l],d=0;d<ua.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-n[d]);if(c+=Math.fround(f*f),c>=s)break}c<s&&(s=c,o=ua.SYMBOL_TABLE[l])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(ua.SYMBOL_TABLE.length).map(function(e){return new Array(ua.BARS_IN_MODULE)}),t}(),bBe=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),yH=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),wBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NBe=function(t){wBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Hc),CBe=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new NBe;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new k6;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),_Be=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),EBe=function(t){_Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Hc),SBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IBe=function(t){SBe(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new xn("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new EBe;a=Wn.MAX_VALUE}this.buf=mo.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new k6;this.ensureCapacity(this.count+a),ds.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return mo.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(CBe),qa;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(qa||(qa={}));function rne(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var VC;function g0(t){if(typeof VC>"u"&&(VC=rne()),VC===null)throw new Error("BigInt is not supported!");return VC(t)}function jBe(){var t=[];t[0]=g0(1);var e=g0(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var PBe=function(){function t(){}return t.decode=function(e,r){var n=new $n(""),a=Ao.ISO8859_1;n.enableDecoding(a);for(var s=1,o=e[s++],l=new bBe;s<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(o,e,a,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:Ao.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Fr;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)o=e[s++];else throw Fr.getFormatInstance()}if(n.length()===0)throw Fr.getFormatInstance();var c=new Yj(null,n.toString(),null,r);return c.setOther(l),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Fr.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)a[s]=e[r];n.setSegmentIndex(Wn.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new $n;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var l=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new $n;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new $n;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new $n;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new $n;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(Wn.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var A=new $n;r=t.numericCompaction(e,r+1,A),n.setTimestamp(yH.parseLong(A.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new $n;r=t.numericCompaction(e,r+1,h),n.setChecksum(Wn.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new $n;r=t.numericCompaction(e,r+1,m),n.setFileSize(yH.parseLong(m.toString()));break;default:throw Fr.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw Fr.getFormatInstance()}if(l!==-1){var p=r-l;n.isLastSegment()&&p--,n.setOptionalData(mo.copyOfRange(e,l,l+p))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),o=0,l=!1;r<e[0]&&!l;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[o]=c/30,a[o+1]=c%30,o+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],s[o]=c,o++;break}}return t.decodeTextCompaction(a,s,o,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var s=qa.ALPHA,o=qa.ALPHA,l=0;l<n;){var c=e[l],u="";switch(s){case qa.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:s=qa.LOWER;break;case t.ML:s=qa.MIXED;break;case t.PS:o=s,s=qa.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=qa.ALPHA;break}break;case qa.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:o=s,s=qa.ALPHA_SHIFT;break;case t.ML:s=qa.MIXED;break;case t.PS:o=s,s=qa.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=qa.ALPHA;break}break;case qa.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:s=qa.PUNCT;break;case 26:u=" ";break;case t.LL:s=qa.LOWER;break;case t.AL:s=qa.ALPHA;break;case t.PS:o=s,s=qa.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=qa.ALPHA;break}break;case qa.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=qa.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=qa.ALPHA;break}break;case qa.ALPHA_SHIFT:if(s=o,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=qa.ALPHA;break}break;case qa.PUNCT_SHIFT:if(s=o,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=qa.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=qa.ALPHA;break}break}u!==""&&a.append(u),l++}},t.byteCompaction=function(e,r,n,a,s){var o=new IBe,l=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=r[a++];a<r[0]&&!u;)switch(d[l++]=f,c=900*c+f,f=r[a++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(l%5===0&&l>0){for(var A=0;A<6;++A)o.write(Number(g0(c)>>g0(8*(5-A))));c=0,l=0}break}a===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=f);for(var h=0;h<l;h++)o.write(d[h]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var m=r[a++];if(m<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(l%5===0&&l>0){for(var A=0;A<6;++A)o.write(Number(g0(c)>>g0(8*(5-A))));c=0,l=0}}break}return s.append(fd.decode(o.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,s=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var l=e[r++];if(r===e[0]&&(s=!0),l<t.TEXT_COMPACTION_MODE_LATCH)o[a]=l,a++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&a>0&&(n.append(t.decodeBase900toBase10(o,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=g0(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*g0(e[a]);var s=n.toString();if(s.charAt(0)!=="1")throw new Fr;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=rne()?jBe():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),Ay=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BBe=function(){function t(){}return t.decode=function(e,r,n,a,s,o,l){for(var c=new Hk(e,r,n,a,s),u=null,d=null,f,A=!0;;A=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,o,l)),a!=null&&(d=t.getRowIndicatorColumn(e,c,a,!1,o,l)),f=t.merge(u,d),f==null)throw tr.getNotFoundInstance();var h=f.getBoundingBox();if(A&&h!=null&&(h.getMinY()<c.getMinY()||h.getMaxY()>c.getMaxY()))c=h;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,d);for(var p=u!=null,g=1;g<=m;g++){var v=p?g:m-g;if(f.getDetectionResultColumn(v)===void 0){var y=void 0;v===0||v===m?y=new vH(c,v===0):y=new tne(c),f.setDetectionResultColumn(v,y);for(var b=-1,w=b,P=c.getMinY();P<=c.getMaxY();P++){if(b=t.getStartColumn(f,v,P,p),b<0||b>c.getMaxX()){if(w===-1)continue;b=w}var j=t.detectCodeword(e,c.getMinX(),c.getMaxX(),p,b,P,o,l);j!=null&&(y.setCodeword(P,j),w=b,o=Math.min(o,j.getWidth()),l=Math.max(l,j.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=Hk.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new xBe(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var s=t.getMax(a),o=0;try{for(var l=Ay(a),c=l.next();!c.done;c=l.next()){var u=c.value;if(o+=s-u,u>0)break}}catch(h){r={error:h}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),f=0;o>0&&d[f]==null;f++)o--;for(var A=0,f=a.length-1;f>=0&&(A+=s-a[f],!(a[f]>0));f--);for(var f=d.length-1;A>0&&d[f]==null;f--)A--;return e.getBoundingBox().addMissingRows(o,A,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var s=Ay(e),o=s.next();!o.done;o=s.next()){var l=o.value;a=Math.max(a,l)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,s,o){for(var l=new vH(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var A=t.detectCodeword(e,0,e.getWidth(),a,d,f,s,o);A!=null&&(l.setCodeword(f,A),a?d=A.getStartX():d=A.getEndX())}return l},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(s<1||s>ua.MAX_CODEWORDS_IN_BARCODE)throw tr.getNotFoundInstance();n.setValue(s)}else a[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],o=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[l][c+1].getValue(),d=l*e.getBarcodeColumnCount()+c;u.length===0?n.push(d):u.length===1?a[d]=u[0]:(o.push(d),s.push(u))}for(var f=new Array(s.length),A=0;A<f.length;A++)f[A]=s[A];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,ua.toIntArray(n),ua.toIntArray(o),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,s){for(var o=new Int32Array(a.length),l=100;l-- >0;){for(var c=0;c<o.length;c++)r[a[c]]=s[c][o[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof qi;if(!u)throw d}if(o.length===0)throw qi.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<s[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw qi.getChecksumInstance()}throw qi.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,s,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<o.length;l++)for(var c=0;c<o[l].length;c++)o[l][c]=new $y;var u=0;try{for(var d=Ay(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var A=f.value;if(A!=null)try{for(var h=(a=void 0,Ay(A.getCodewords())),m=h.next();!m.done;m=h.next()){var p=m.value;if(p!=null){var g=p.getRowNumber();if(g>=0){if(g>=o.length)continue;o[g][u].setValue(p.getValue())}}}}catch(v){a={error:v}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}u++}}catch(v){r={error:v}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var s,o,l=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-l);){r-=l;try{for(var d=(s=void 0,Ay(e.getDetectionResultColumn(r).getCodewords())),f=d.next();!f.done;f=d.next()){var A=f.value;if(A!=null)return(a?A.getEndX():A.getStartX())+l*u*(A.getEndX()-A.getStartX())}}catch(h){s={error:h}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,s,o,l,c){s=t.adjustCodewordStartColumn(e,r,n,a,s,o);var u=t.getModuleBitCount(e,r,n,a,s,o);if(u==null)return null;var d,f=ga.sum(u);if(a)d=s+f;else{for(var A=0;A<u.length/2;A++){var h=u[A];u[A]=u[u.length-1-A],u[u.length-1-A]=h}d=s,s=d-f}if(!t.checkCodewordSkew(f,l,c))return null;var m=yBe.getDecodedValue(u),p=ua.getCodeword(m);return p===-1?null:new vBe(s,d,t.getCodewordBucketNumber(m),p)},t.getModuleBitCount=function(e,r,n,a,s,o){for(var l=s,c=new Int32Array(8),u=0,d=a?1:-1,f=a;(a?l<n:l>=r)&&u<c.length;)e.get(l,o)===f?(c[u]++,l+=d):(u++,f=!f);return u===c.length||l===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,s,o){for(var l=s,c=a?-1:1,u=0;u<2;u++){for(;(a?l>=r:l<n)&&a===e.get(l,o);){if(Math.abs(s-l)>t.CODEWORD_SKEW_SIZE)return s;l+=c}c=-c,a=!a}return l},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw Fr.getFormatInstance();var a=1<<r+1,s=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var o=PBe.decode(e,""+r);return o.setErrorsCorrected(s),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw qi.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw Fr.getFormatInstance();var n=e[0];if(n>e.length)throw Fr.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw Fr.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new R6,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var s=e[n][a];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new dBe,t}(),TBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw tr.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof Fr||n instanceof qi?tr.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,s,o=new Array,l=sBe.detectMultiple(e,r,n);try{for(var c=TBe(l.getPoints()),u=c.next();!u.done;u=c.next()){var d=u.value,f=BBe.decode(l.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),A=new Kl(f.getText(),f.getRawBytes(),void 0,d,gn.PDF_417);A.putMetadata(Al.ERROR_CORRECTION_LEVEL,f.getECLevel());var h=f.getOther();h!=null&&A.putMetadata(Al.PDF417_EXTRA_METADATA,h),o.push(A)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return o.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?Wn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*ua.MODULES_IN_CODEWORD/ua.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*ua.MODULES_IN_CODEWORD/ua.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*ua.MODULES_IN_CODEWORD/ua.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*ua.MODULES_IN_CODEWORD/ua.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),kBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bH=function(t){kBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Hc),wH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nne=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(fs.TRY_HARDER)!==void 0,n=e==null?null:e.get(fs.POSSIBLE_FORMATS),a=new Array;if(n!=null){var s=n.some(function(o){return o===gn.UPC_A||o===gn.UPC_E||o===gn.EAN_13||o===gn.EAN_8||o===gn.CODABAR||o===gn.CODE_39||o===gn.CODE_93||o===gn.CODE_128||o===gn.ITF||o===gn.RSS_14||o===gn.RSS_EXPANDED});s&&!r&&a.push(new Kx(e)),n.includes(gn.QR_CODE)&&a.push(new kS),n.includes(gn.DATA_MATRIX)&&a.push(new TS),n.includes(gn.AZTEC)&&a.push(new PS),n.includes(gn.PDF_417)&&a.push(new FS),s&&r&&a.push(new Kx(e))}a.length===0&&(r||a.push(new Kx(e)),a.push(new kS),a.push(new TS),a.push(new PS),a.push(new FS),r&&a.push(new Kx(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=wH(this.readers),a=n.next();!a.done;a=n.next()){var s=a.value;s.reset()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new bH("No readers where selected, nothing can be read.");try{for(var a=wH(this.readers),s=a.next();!s.done;s=a.next()){var o=s.value;try{return o.decode(e,this.hints)}catch(l){if(l instanceof bH)continue}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new tr("No MultiFormat Readers were able to detect the code.")},t}(),FBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){FBe(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,s=new nne;return s.setHints(r),a=t.call(this,s,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(h1);var OBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){OBe(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new FS,r)||this}return e})(h1);var DBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){DBe(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new kS,r)||this}return e})(h1);var $k;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})($k||($k={}));const HC=$k;var ane=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new rm(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,s=r.length;s<=e;s++){var o=n.multiply(new rm(a,Int32Array.from([1,a.exp(s-1+a.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new xn("No error correction bytes");var n=e.length-r;if(n<=0)throw new xn("No data bytes provided");var a=this.buildGenerator(r),s=new Int32Array(n);ds.arraycopy(e,0,s,0,n);var o=new rm(this.field,s);o=o.multiplyByMonomial(r,1);for(var l=o.divide(a)[1],c=l.getCoefficients(),u=r-c.length,d=0;d<u;d++)e[n+d]=0;ds.arraycopy(c,0,e,n+u,c.length)},t}(),Gy=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s-1;o++)for(var l=n[o],c=0;c<a-1;c++){var u=l[c];u===l[c+1]&&u===n[o+1][c]&&u===n[o+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var l=0;l<a;l++){var c=n[o];l+6<a&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&r++,o+6<s&&n[o][l]===1&&n[o+1][l]===0&&n[o+2][l]===1&&n[o+3][l]===1&&n[o+4][l]===1&&n[o+5][l]===0&&n[o+6][l]===1&&(t.isWhiteVertical(n,l,o-4,o)||t.isWhiteVertical(n,l,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var s=n;s<a;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var l=n[o],c=0;c<a;c++)l[c]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var a,s;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,a=(s&1)+s%3;break;case 6:s=n*r,a=(s&1)+s%3&1;break;case 7:s=n*r,a=s%3+(n+r&1)&1;break;default:throw new xn("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),o=e.getArray(),l=0;l<a;l++){for(var c=0,u=-1,d=0;d<s;d++){var f=r?o[l][d]:o[d][l];f===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=f)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),RBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MBe=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=RBe(this.bytes),s=a.next();!s.done;s=a.next()){var o=s.value;mo.fill(o,e)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var s=this.bytes[n],o=r.bytes[n],l=0,c=this.width;l<c;++l)if(s[l]!==o[l])return!1;return!0},t.prototype.toString=function(){for(var e=new $n,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],s=0,o=this.width;s<o;++s)switch(a[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Gk=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new $n;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),LBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ps=function(t){LBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Hc),NH=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,a,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,a,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new Lo;t.makeTypeInfoBits(e,r,a);for(var s=0,o=a.getSize();s<o;++s){var l=a.get(a.getSize()-1-s),c=t.TYPE_INFO_COORDINATES[s],u=c[0],d=c[1];if(n.setBoolean(u,d,l),s<8){var f=n.getWidth()-s-1,A=8;n.setBoolean(f,A,l)}else{var f=8,A=n.getHeight()-7+(s-8);n.setBoolean(f,A,l)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new Lo;t.makeVersionInfoBits(e,n);for(var a=6*3-1,s=0;s<6;++s)for(var o=0;o<3;++o){var l=n.get(a);a--,r.setBoolean(s,r.getHeight()-11+o,l),r.setBoolean(r.getHeight()-11+o,s,l)}}},t.embedDataBits=function(e,r,n){for(var a=0,s=-1,o=n.getWidth()-1,l=n.getHeight()-1;o>0;){for(o===6&&(o-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var u=o-c;if(t.isEmpty(n.get(u,l))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,r!==255&&Gy.getDataMaskBit(r,u,l)&&(d=!d),n.setBoolean(u,l,d)}}l+=s}s=-s,l+=s,o-=2}if(a!==e.getSize())throw new ps("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Wn.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new xn("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Gk.isValidMaskPattern(r))throw new ps("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var s=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(s,10);var o=new Lo;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new ps("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new ps("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new ps;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new ps;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new ps;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var s=t.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(e+o,r+a,s[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var s=t.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(e+o,r+a,s[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,o=a.length;s!==o;s++){var l=a[s];if(l>=0)for(var c=0;c!==o;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,l))&&t.embedPositionAdjustmentPattern(u-2,l-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),UBe=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),CH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Gy.applyMaskPenaltyRule1(e)+Gy.applyMaskPenaltyRule2(e)+Gy.applyMaskPenaltyRule3(e)+Gy.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(HC.CHARACTER_SET)!==void 0;s&&(a=n.get(HC.CHARACTER_SET).toString());var o=this.chooseMode(e,a),l=new Lo;if(o===gs.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=Ao.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(o,l);var u=new Lo;this.appendBytes(e,o,u,a);var d;if(n!==null&&n.get(HC.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(HC.QR_VERSION).toString(),10);d=kp.getVersionForNumber(f);var A=this.calculateBitsNeeded(o,l,u,d);if(!this.willFit(A,d,r))throw new ps("Data too big for requested version")}else d=this.recommendVersion(r,o,l,u);var h=new Lo;h.appendBitArray(l);var m=o===gs.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,o,h),h.appendBitArray(u);var p=d.getECBlocksForLevel(r),g=d.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(g,h);var v=this.interleaveWithECBytes(h,d.getTotalCodewords(),g,p.getNumBlocks()),y=new Gk;y.setECLevel(r),y.setMode(o),y.setVersion(d);var b=d.getDimensionForVersion(),w=new MBe(b,b),P=this.chooseMaskPattern(v,r,d,w);return y.setMaskPattern(P),NH.buildMatrix(v,r,d,P,w),y.setMatrix(w),y},t.recommendVersion=function(e,r,n,a){var s=this.calculateBitsNeeded(r,n,a,kp.getVersionForNumber(1)),o=this.chooseVersion(s,e),l=this.calculateBitsNeeded(r,n,a,o);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Ao.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return gs.KANJI;for(var n=!1,a=!1,s=0,o=e.length;s<o;++s){var l=e.charAt(s);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)a=!0;else return gs.BYTE}return a?gs.ALPHANUMERIC:n?gs.NUMERIC:gs.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=fd.encode(e,Ao.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var s=r[a]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var s=Number.MAX_SAFE_INTEGER,o=-1,l=0;l<Gk.NUM_MASK_PATTERNS;l++){NH.buildMatrix(e,r,n,l,a);var c=this.calculateMaskPenalty(a);c<s&&(s=c,o=l)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=kp.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new ps("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),o=s.getTotalECCodewords(),l=a-o,c=(e+7)/8;return l>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new ps("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var a=s;a<8;a++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),a=0;a<o;++a)r.appendBits(a&1?17:236,8);if(r.getSize()!==n)throw new ps("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,s,o){if(a>=n)throw new ps("Block ID too large");var l=e%n,c=n-l,u=Math.floor(e/n),d=u+1,f=Math.floor(r/n),A=f+1,h=u-f,m=d-A;if(h!==m)throw new ps("EC bytes mismatch");if(n!==c+l)throw new ps("RS blocks mismatch");if(e!==(f+h)*c+(A+m)*l)throw new ps("Total bytes mismatch");a<c?(s[0]=f,o[0]=h):(s[0]=A,o[0]=m)},t.interleaveWithECBytes=function(e,r,n,a){var s,o,l,c;if(e.getSizeInBytes()!==n)throw new ps("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,A=new Array,h=0;h<a;++h){var m=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,h,m,p);var g=m[0],v=new Uint8Array(g);e.toBytes(8*u,v,0,g);var y=t.generateECBytes(v,p[0]);A.push(new UBe(v,y)),d=Math.max(d,g),f=Math.max(f,y.length),u+=m[0]}if(n!==u)throw new ps("Data bytes does not match offset");for(var b=new Lo,h=0;h<d;++h)try{for(var w=(s=void 0,CH(A)),P=w.next();!P.done;P=w.next()){var j=P.value,v=j.getDataBytes();h<v.length&&b.appendBits(v[h],8)}}catch(F){s={error:F}}finally{try{P&&!P.done&&(o=w.return)&&o.call(w)}finally{if(s)throw s.error}}for(var h=0;h<f;++h)try{for(var _=(l=void 0,CH(A)),I=_.next();!I.done;I=_.next()){var j=I.value,y=j.getErrorCorrectionBytes();h<y.length&&b.appendBits(y[h],8)}}catch(F){l={error:F}}finally{try{I&&!I.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}if(r!==b.getSizeInBytes())throw new ps("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),s=0;s<n;s++)a[s]=e[s]&255;new ane(kc.QR_CODE_FIELD_256).encode(a,r);for(var o=new Uint8Array(r),s=0;s<r;s++)o[s]=a[n+s];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new ps(e+" is bigger than "+((1<<s)-1));a.appendBits(e,s)},t.appendBytes=function(e,r,n,a){switch(r){case gs.NUMERIC:t.appendNumericBytes(e,n);break;case gs.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case gs.BYTE:t.append8BitBytes(e,n,a);break;case gs.KANJI:t.appendKanjiBytes(e,n);break;default:throw new ps("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getDigit(e.charAt(a));if(a+2<n){var o=t.getDigit(e.charAt(a+1)),l=t.getDigit(e.charAt(a+2));r.appendBits(s*100+o*10+l,10),a+=3}else if(a+1<n){var o=t.getDigit(e.charAt(a+1));r.appendBits(s*10+o,7),a+=2}else r.appendBits(s,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getAlphanumericCode(e.charCodeAt(a));if(s===-1)throw new ps;if(a+1<n){var o=t.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new ps;r.appendBits(s*45+o,11),a+=2}else r.appendBits(s,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=fd.encode(e,n)}catch(c){throw new ps(c)}for(var s=0,o=a.length;s!==o;s++){var l=a[s];r.appendBits(l,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=fd.encode(e,Ao.SJIS)}catch(f){throw new ps(f)}for(var a=n.length,s=0;s<a;s+=2){var o=n[s]&255,l=n[s+1]&255,c=o<<8&4294967295|l,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new ps("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(gs.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Ao.UTF8.getName(),t})();var QBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){QBe(e,t);function e(r,n,a,s,o,l,c,u){var d=t.call(this,l,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=a,d.left=s,d.top=o,s+l>n||o+c>a)throw new xn("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(l,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new xn("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return ds.arraycopy(this.yuvData,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,s=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ds.arraycopy(this.yuvData,o,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;ds.arraycopy(this.yuvData,o,s,c,r),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),s=this.yuvData,o=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*r,u=0;u<r;u++){var d=s[o+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,s=0,o=this.top*this.dataWidth+this.left;s<n;s++,o+=this.dataWidth)for(var l=o+r/2,c=o,u=o+r-1;c<l;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}},e.prototype.invert=function(){return new Xj(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Bw);var VBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){VBe(e,t);function e(r,n,a,s,o,l,c){var u=t.call(this,n,a)||this;if(u.dataWidth=s,u.dataHeight=o,u.left=l,u.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*a,f=new Uint8ClampedArray(d),A=0;A<d;A++){var h=r[A],m=h>>16&255,p=h>>7&510,g=h&255;f[A]=(m+p+g)/4&255}u.luminances=f}else u.luminances=r;if(s===void 0&&(u.dataWidth=n),o===void 0&&(u.dataHeight=a),l===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new xn("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new xn("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return ds.arraycopy(this.luminances,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,s=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ds.arraycopy(this.luminances,o,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;ds.arraycopy(this.luminances,o,s,c,r),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.luminances,a,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new Xj(this)},e})(Bw);var HBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$Be=function(t){HBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(Ao),GBe=function(){function t(){}return t.ISO_8859_1=Ao.ISO8859_1,t}(),Kk,KBe=301,qBe=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=KBe);return{LOG:t,ALOG:e}};Kk=qBe([],[]),Kk.LOG;Kk.ALOG;var _H;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(_H||(_H={}));var EH=129,sne=230,zBe=231,WBe=235,XBe=236,YBe=237,JBe=238,ZBe=239,eTe=240,y5=254,tTe=254,SH="[)>05",IH="[)>06",jH="",Da=0,nl=1,rc=2,so=3,To=4,Tl=5,rTe=function(){function t(){}return t.prototype.getEncodingMode=function(){return Da},t.prototype.encode=function(e){var r=$d.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=$d.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case Tl:e.writeCodeword(zBe),e.signalEncoderChange(Tl);return;case nl:e.writeCodeword(sne),e.signalEncoderChange(nl);return;case so:e.writeCodeword(JBe),e.signalEncoderChange(so);break;case rc:e.writeCodeword(ZBe),e.signalEncoderChange(rc);break;case To:e.writeCodeword(eTe),e.signalEncoderChange(To);break;default:throw new Error("Illegal mode: "+a)}else $d.isExtendedASCII(n)?(e.writeCodeword(WBe),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if($d.isDigit(e)&&$d.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),nTe=function(){function t(){}return t.prototype.getEncodingMode=function(){return Tl},t.prototype.encode=function(e){var r=new $n;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=$d.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Da);break}}var s=r.length()-1,o=1,l=e.getCodewordCount()+s+o;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(s<=249)r.setCharAt(0,la.getCharAt(s));else if(s<=1555)r.setCharAt(0,la.getCharAt(Math.floor(s/250)+249)),r.insert(1,la.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),M6=function(){function t(){}return t.prototype.getEncodingMode=function(){return nl},t.prototype.encodeMaximal=function(e){for(var r=new $n,n=0,a=e.pos,s=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(a=e.pos,s=r.length())}if(s!==r.length()){var l=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(sne),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new $n;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),s=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+s;e.updateSymbolInfo(o);var l=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new $n;for(r.length()%3===2&&l!==2&&(a=this.backtrackOneCharacter(e,r,c,a));r.length()%3===1&&(a>3||l!==1);)a=this.backtrackOneCharacter(e,r,c,a);break}var u=r.length();if(u%3===0){var d=$d.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Da);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var s=r.length(),o=r.toString().substring(0,s-a);r.setLengthToZero(),r.append(o),e.pos--;var l=e.getCurrentChar();return a=this.encodeChar(l,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,s=e.getCodewordCount()+n;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(y5)}else if(o===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(y5),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(y5)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Da)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,s=new $n;return s.append(n),s.append(a),s.toString()},t}(),aTe=function(){function t(){}return t.prototype.getEncodingMode=function(){return To},t.prototype.encode=function(e){for(var r=new $n;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var s=r.toString().substring(4);r.setLengthToZero(),r.append(s);var o=$d.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Da);break}}}r.append(la.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,l=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),u=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}u?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(l)}finally{e.signalEncoderChange(Da)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(la.getCharAt(e-64)):$d.illegalCharacter(la.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,s=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(a<<12)+(s<<6)+o,c=l>>16&255,u=l>>8&255,d=l&255,f=new $n;return f.append(c),r>=2&&f.append(u),r>=3&&f.append(d),f.toString()},t}(),sTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iTe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ca=function(){function t(e,r,n,a,s,o,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=s,this.dataRegions=o,this.rsBlockData=l,this.rsBlockError=c}return t.lookup=function(e,r,n,a,s){var o,l;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!0);try{for(var c=iTe(lTe),u=c.next();!u.done;u=c.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){o={error:f}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(o)throw o.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),oTe=function(t){sTe(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(Ca),lTe=[new Ca(!1,3,5,8,8,1),new Ca(!1,5,7,10,10,1),new Ca(!0,5,7,16,6,1),new Ca(!1,8,10,12,12,1),new Ca(!0,10,11,14,6,2),new Ca(!1,12,12,14,14,1),new Ca(!0,16,14,24,10,1),new Ca(!1,18,14,16,16,1),new Ca(!1,22,18,18,18,1),new Ca(!0,22,18,16,10,2),new Ca(!1,30,20,20,20,1),new Ca(!0,32,24,16,14,2),new Ca(!1,36,24,22,22,1),new Ca(!1,44,28,24,24,1),new Ca(!0,49,28,22,14,2),new Ca(!1,62,36,14,14,4),new Ca(!1,86,42,16,16,4),new Ca(!1,114,48,18,18,4),new Ca(!1,144,56,20,20,4),new Ca(!1,174,68,22,22,4),new Ca(!1,204,84,24,24,4,102,42),new Ca(!1,280,112,14,14,16,140,56),new Ca(!1,368,144,16,16,16,92,36),new Ca(!1,456,192,18,18,16,114,48),new Ca(!1,576,224,20,20,16,144,56),new Ca(!1,696,272,22,22,16,174,68),new Ca(!1,816,336,24,24,16,136,56),new Ca(!1,1050,408,18,18,36,175,68),new Ca(!1,1304,496,20,20,36,163,62),new oTe],cTe=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(l){return l.charCodeAt(0)}),n=new $n,a=0,s=r.length;a<s;a++){var o=String.fromCharCode(r[a]&255);if(o==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new $n,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ca.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),uTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dTe=function(t){uTe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return so},e.prototype.encode=function(r){for(var n=new $n;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var s=n.length();if(s%3===0){this.writeNextTriplet(r,n);var o=$d.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(Da);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):$d.illegalCharacter(la.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),s=n.length();r.pos-=s,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(tTe),r.getNewEncoding()<0&&r.signalEncoderChange(Da)},e}(M6),fTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hTe=function(t){fTe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return rc},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}(M6),$d=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=EH+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,s){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!1);var o=new M6,l=[new rTe,o,new hTe,new dTe,new aTe,new nTe],c=new cTe(e);c.setSymbolShape(r),c.setSizeConstraints(n,a),e.startsWith(SH)&&e.endsWith(jH)?(c.writeCodeword(XBe),c.setSkipAtEnd(2),c.pos+=SH.length):e.startsWith(IH)&&e.endsWith(jH)&&(c.writeCodeword(YBe),c.setSkipAtEnd(2),c.pos+=IH.length);var u=Da;for(s&&(o.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();d<f&&u!==Da&&u!==Tl&&u!==To&&c.writeCodeword("");var A=c.getCodewords();for(A.length()<f&&A.append(EH);A.length()<f;)A.append(this.randomize253State(A.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===so&&a===so){for(var s=Math.min(r+3,e.length),o=r;o<s;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Da}else if(n===To&&a===To){for(var s=Math.min(r+4,e.length),o=r;o<s;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Da}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===Da?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var s=0,o=new Uint8Array(6),l=[];;){if(r+s===e.length){mo.fill(o,0),mo.fill(l,0);var c=this.findMinimums(a,l,Wn.MAX_VALUE,o),u=this.getMinimumCount(o);if(l[Da]===c)return Da;if(u===1){if(o[Tl]>0)return Tl;if(o[To]>0)return To;if(o[rc]>0)return rc;if(o[so]>0)return so}return nl}var d=e.charCodeAt(r+s);if(s++,this.isDigit(d)?a[Da]+=.5:this.isExtendedASCII(d)?(a[Da]=Math.ceil(a[Da]),a[Da]+=2):(a[Da]=Math.ceil(a[Da]),a[Da]++),this.isNativeC40(d)?a[nl]+=2/3:this.isExtendedASCII(d)?a[nl]+=8/3:a[nl]+=4/3,this.isNativeText(d)?a[rc]+=2/3:this.isExtendedASCII(d)?a[rc]+=8/3:a[rc]+=4/3,this.isNativeX12(d)?a[so]+=2/3:this.isExtendedASCII(d)?a[so]+=13/3:a[so]+=10/3,this.isNativeEDIFACT(d)?a[To]+=3/4:this.isExtendedASCII(d)?a[To]+=17/4:a[To]+=13/4,this.isSpecialB256(d)?a[Tl]+=4:a[Tl]++,s>=4){if(mo.fill(o,0),mo.fill(l,0),this.findMinimums(a,l,Wn.MAX_VALUE,o),l[Da]<this.min(l[Tl],l[nl],l[rc],l[so],l[To]))return Da;if(l[Tl]<l[Da]||l[Tl]+1<this.min(l[nl],l[rc],l[so],l[To]))return Tl;if(l[To]+1<this.min(l[Tl],l[nl],l[rc],l[so],l[Da]))return To;if(l[rc]+1<this.min(l[Tl],l[nl],l[To],l[so],l[Da]))return rc;if(l[so]+1<this.min(l[Tl],l[nl],l[To],l[rc],l[Da]))return so;if(l[nl]+1<this.min(l[Da],l[Tl],l[To],l[rc])){if(l[nl]<l[so])return nl;if(l[nl]===l[so]){for(var f=r+s+1;f<e.length;){var A=e.charCodeAt(f);if(this.isX12TermSep(A))return so;if(!this.isNativeX12(A))break;f++}return nl}}}}},t.min=function(e,r,n,a,s){var o=Math.min(e,Math.min(r,Math.min(n,a)));return s===void 0?o:Math.min(o,s)},t.findMinimums=function(e,r,n,a){for(var s=0;s<6;s++){var o=r[s]=Math.ceil(e[s]);n>o&&(n=o,mo.fill(a,0)),n===o&&(a[s]=a[s]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=Wn.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),b5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PH=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return fd.encode(e,this.charset)!=null}catch{return!1}},t}(),ATe=function(){function t(e,r,n){var a,s,o,l,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(E){return new PH($Be.forName(E))}),this.encoders=[];var d=[];d.push(new PH(GBe.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),A=0;A<e.length;A++){var h=!1;try{for(var m=(a=void 0,b5(d)),p=m.next();!p.done;p=m.next()){var g=p.value,v=e.charAt(A),y=v.charCodeAt(0);if(y===n||g.canEncode(v)){h=!0;break}}}catch(E){a={error:E}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!h)try{for(var b=(o=void 0,b5(this.ENCODERS)),w=b.next();!w.done;w=b.next()){var g=w.value;if(g.canEncode(e.charAt(A))){d.push(g),h=!0;break}}}catch(E){o={error:E}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(o)throw o.error}}h||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var P=0;try{for(var j=b5(d),_=j.next();!_.done;_=j.next()){var g=_.value;this.encoders[P++]=g}}catch(E){c={error:E}}finally{try{_&&!_.done&&(u=j.return)&&u.call(j)}finally{if(c)throw c.error}}}var I=-1;if(r!=null){for(var A=0;A<this.encoders.length;A++)if(this.encoders[A]!=null&&r.name===this.encoders[A].name){I=A;break}}this.priorityEncoderIndex=I}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return fd.encode(la.getCharAt(e),this.encoders[r].name)},t}(),mTe=3,pTe=function(){function t(e,r,n){this.fnc1=n;var a=new ATe(e,r,n);if(a.length()===1)for(var s=0;s<this.bytes.length;s++){var o=e.charAt(s).charCodeAt(0);this.bytes[s]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new $n,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,s,o){var l=e.charAt(a).charCodeAt(0),c=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(l===o||r.canEncode(l,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),u=c+1);for(var d=c;d<u;d++)(l===o||r.canEncode(l,d))&&this.addEdge(n,a+1,new BH(l,r,d,s,o))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,s=new BH[a+1][r.length()];this.addEdges(e,r,s,0,null,n);for(var o=1;o<=a;o++){for(var l=0;l<r.length();l++)s[o][l]!=null&&o<a&&this.addEdges(e,r,s,o,s[o][l],n);for(var l=0;l<r.length();l++)s[o-1][l]=null}for(var c=-1,u=Wn.MAX_VALUE,l=0;l<r.length();l++)if(s[a][l]!=null){var d=s[a][l];d.cachedTotalSize<u&&(u=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],A=s[a][c];A!=null;){if(A.isFNC1())f.unshift(1e3);else for(var h=r.encode(A.c,A.encoderIndex),o=h.length-1;o>=0;o--)f.unshift(h[o]&255);var m=A.previous===null?0:A.previous.encoderIndex;m!==A.encoderIndex&&f.unshift(256+r.getECIValue(A.encoderIndex)),A=A.previous}for(var p=[],o=0;o<p.length;o++)p[o]=f[o];return p},t}(),BH=function(){function t(e,r,n,a,s){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=s,this.c=e===s?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,l=a===null?0:a.encoderIndex;l!==n&&(o+=mTe),a!=null&&(o+=a.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),gTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var TH;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(TH||(TH={}));(function(t){gTe(e,t);function e(r,n,a,s,o){var l=t.call(this,r,n,a)||this;return l.shape=s,l.macroId=o,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(pTe);var xTe=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),kH=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),vTe=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),yTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L6=function(t){yTe(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.value=n,s.bitCount=a,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+Wn.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(vTe),bTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wTe=function(t){bTe(e,t);function e(r,n,a){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=a,s}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(L6);function NTe(t,e,r){return new wTe(t,e,r)}function my(t,e,r){return new L6(t,e,r)}var CTe=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],nm=0,OS=1,od=2,ine=3,Mf=4,_Te=new L6(null,0,0),w5=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],ETe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function STe(t){var e,r;try{for(var n=ETe(t),a=n.next();!a.done;a=n.next()){var s=a.value;mo.fill(s,-1)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[nm][Mf]=0,t[OS][Mf]=0,t[OS][nm]=28,t[ine][Mf]=0,t[od][Mf]=0,t[od][nm]=15,t}var one=STe(mo.createInt32Array(6,6)),ITe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jTe=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var s=w5[this.mode][e];a=my(a,s&65535,s>>16),n+=s>>16}var o=e===od?4:5;return a=my(a,r,o),new t(a,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===od?4:5;return n=my(n,one[this.mode][e],a),n=my(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===Mf||this.mode===od){var s=w5[n][nm];r=my(r,s&65535,s>>16),a+=s>>16,n=nm}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(r,n,this.binaryShiftByteCount+1,a+o);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=NTe(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(w5[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())a.unshift(s);var o=new Lo;try{for(var l=ITe(a),c=l.next();!c.done;c=l.next()){var u=c.value;u.appendTo(o,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return la.format("%s bits=%d bytes=%d",CTe[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(_Te,nm,0,0),t}();function PTe(t){var e=la.getCharCode(" "),r=la.getCharCode("."),n=la.getCharCode(",");t[nm][e]=1;for(var a=la.getCharCode("Z"),s=la.getCharCode("A"),o=s;o<=a;o++)t[nm][o]=o-s+2;t[OS][e]=1;for(var l=la.getCharCode("z"),c=la.getCharCode("a"),o=c;o<=l;o++)t[OS][o]=o-c+2;t[od][e]=1;for(var u=la.getCharCode("9"),d=la.getCharCode("0"),o=d;o<=u;o++)t[od][o]=o-d+2;t[od][n]=12,t[od][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],A=0;A<f.length;A++)t[ine][la.getCharCode(f[A])]=A;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],A=0;A<h.length;A++)la.getCharCode(h[A])>0&&(t[Mf][la.getCharCode(h[A])]=A);return t}var N5=PTe(mo.createInt32Array(5,256)),$C=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BTe=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=la.getCharCode(" "),r=la.getCharCode(`
`),n=kH.singletonList(jTe.INITIAL_STATE),a=0;a<this.text.length;a++){var s=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case la.getCharCode("\r"):s=o===r?2:0;break;case la.getCharCode("."):s=o===e?3:0;break;case la.getCharCode(","):s=o===e?4:0;break;case la.getCharCode(":"):s=o===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,a,s),a++):n=this.updateStateListForChar(n,a)}var l=kH.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,s=[];try{for(var o=$C(e),l=o.next();!l.done;l=o.next()){var c=l.value;this.updateStateForChar(c,r,s)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,s=N5[e.getMode()][a]>0,o=null,l=0;l<=Mf;l++){var c=N5[l][a];if(c>0){if(o==null&&(o=e.endBinaryShift(r)),!s||l===e.getMode()||l===od){var u=o.latchAndAppend(l,c);n.push(u)}if(!s&&one[e.getMode()][l]>=0){var d=o.shiftAndAppend(l,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||N5[e.getMode()][a]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var a,s,o=[];try{for(var l=$C(e),c=l.next();!c.done;c=l.next()){var u=c.value;this.updateStateForPair(u,r,n,o)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,a){var s=e.endBinaryShift(r);if(a.push(s.latchAndAppend(Mf,n)),e.getMode()!==Mf&&a.push(s.shiftAndAppend(Mf,n)),n===3||n===4){var o=s.latchAndAppend(od,16-n).latchAndAppend(od,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(l)}},t.simplifyStates=function(e){var r,n,a,s,o=[];try{for(var l=$C(e),c=l.next();!c.done;c=l.next()){var u=c.value,d=!0,f=function(g){if(g.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(g)&&(o=o.filter(function(v){return v!==g}))};try{for(var A=(a=void 0,$C(o)),h=A.next();!h.done;h=A.next()){var m=h.value,p=f(m);if(p==="break")break}}catch(g){a={error:g}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}d&&o.push(u)}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t}(),TTe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new BTe(e).encode(),s=Wn.truncDivision(a.getSize()*r,100)+11,o=a.getSize()+s,l,c,u,d,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new xn(la.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,l),d=t.WORD_SIZE[c];var A=u-u%d;if(f=t.stuffBits(a,d),f.getSize()+s>A)throw new xn("Data to large for user specified layer");if(l&&f.getSize()>d*64)throw new xn("Data to large for user specified layer")}else{d=0,f=null;for(var h=0;;h++){if(h>t.MAX_NB_BITS)throw new xn("Data too large for an Aztec code");if(l=h<=3,c=l?h+1:h,u=t.totalBitsInLayer(c,l),!(o>u)){(f==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],f=t.stuffBits(a,d));var A=u-u%d;if(!(l&&f.getSize()>d*64)&&f.getSize()+s<=A)break}}}var m=t.generateCheckWords(f,u,d),p=f.getSize()/d,g=t.generateModeMessage(l,c,p),v=(l?11:14)+c*4,y=new Int32Array(v),b;if(l){b=v;for(var h=0;h<y.length;h++)y[h]=h}else{b=v+1+2*Wn.truncDivision(Wn.truncDivision(v,2)-1,15);for(var w=Wn.truncDivision(v,2),P=Wn.truncDivision(b,2),h=0;h<w;h++){var j=h+Wn.truncDivision(h,15);y[w-h-1]=P-j-1,y[w+h]=P+j+1}}for(var _=new qf(b),h=0,I=0;h<c;h++){for(var E=(c-h)*4+(l?9:12),F=0;F<E;F++)for(var k=F*2,B=0;B<2;B++)m.get(I+k+B)&&_.set(y[h*2+B],y[h*2+F]),m.get(I+E*2+k+B)&&_.set(y[h*2+F],y[v-1-h*2-B]),m.get(I+E*4+k+B)&&_.set(y[v-1-h*2-B],y[v-1-h*2-F]),m.get(I+E*6+k+B)&&_.set(y[v-1-h*2-F],y[h*2+B]);I+=E*8}if(t.drawModeMessage(_,l,b,g),l)t.drawBullsEye(_,Wn.truncDivision(b,2),5);else{t.drawBullsEye(_,Wn.truncDivision(b,2),7);for(var h=0,F=0;h<Wn.truncDivision(v,2)-1;h+=15,F+=16)for(var B=Wn.truncDivision(b,2)&1;B<b;B+=2)_.set(Wn.truncDivision(b,2)-F,B),_.set(Wn.truncDivision(b,2)+F,B),_.set(B,Wn.truncDivision(b,2)-F),_.set(B,Wn.truncDivision(b,2)+F)}var R=new xTe;return R.setCompact(l),R.setSize(b),R.setLayers(c),R.setCodeWords(p),R.setMatrix(_),R},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var s=r-a;s<=r+a;s++)e.set(s,r-a),e.set(s,r+a),e.set(r-a,s),e.set(r+a,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new Lo;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var s=Wn.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var l=s-3+o;a.get(o)&&e.set(l,s-5),a.get(o+7)&&e.set(s+5,l),a.get(20-o)&&e.set(l,s+5),a.get(27-o)&&e.set(s-5,l)}else for(var o=0;o<10;o++){var l=s-5+o+Wn.truncDivision(o,5);a.get(o)&&e.set(l,s-7),a.get(o+10)&&e.set(s+7,l),a.get(29-o)&&e.set(l,s+7),a.get(39-o)&&e.set(s-7,l)}},t.generateCheckWords=function(e,r,n){var a,s,o=e.getSize()/n,l=new ane(t.getGF(n)),c=Wn.truncDivision(r,n),u=t.bitsToWords(e,n,c);l.encode(u,c-o);var d=r%n,f=new Lo;f.appendBits(0,d);try{for(var A=TTe(Array.from(u)),h=A.next();!h.done;h=A.next()){var m=h.value;f.appendBits(m,n)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}return f},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),s,o;for(s=0,o=e.getSize()/r;s<o;s++){for(var l=0,c=0;c<r;c++)l|=e.get(s*r+c)?1<<r-c-1:0;a[s]=l}return a},t.getGF=function(e){switch(e){case 4:return kc.AZTEC_PARAM;case 6:return kc.AZTEC_DATA_6;case 8:return kc.AZTEC_DATA_8;case 10:return kc.AZTEC_DATA_10;case 12:return kc.AZTEC_DATA_12;default:throw new xn("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new Lo,a=e.getSize(),s=(1<<r)-2,o=0;o<a;o+=r){for(var l=0,c=0;c<r;c++)(o+c>=a||e.get(o+c))&&(l|=1<<r-1-c);(l&s)===s?(n.appendBits(l&s,r),o--):l&s?n.appendBits(l,r):(n.appendBits(l|1,r),o--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var kTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FTe=function(t){kTe(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var s=new Uint8ClampedArray(n*a),o=0,l=0,c=r.length;o<c;o+=4,l++){var u=void 0,d=r[o+3];if(d===0)u=255;else{var f=r[o],A=r[o+1],h=r[o+2];u=306*f+601*A+117*h+512>>10}s[l]=u}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new xn("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Xj(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);n.width=l,n.height=c;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(l/2,c/2),u.rotate(a),u.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Bw);function lne(){return typeof navigator<"u"}function OTe(){return lne()&&!!navigator.mediaDevices}function DTe(){return!!(OTe()&&navigator.mediaDevices.enumerateDevices)}var zx=function(){return zx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},zx.apply(this,arguments)},$s=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},Gs=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},C5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RTe={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},A1=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=zx(zx({},RTe),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(fs.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return $s(this,void 0,void 0,function(){return Gs(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,a=e.getVideoTracks();try{for(var s=C5(a),o=s.next();!o.done;o=s.next()){var l=o.value;if(t.mediaStreamIsTorchCompatibleTrack(l))return!0}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ii("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ii("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new FTe(e),n=new Kre(r);return new Gre(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new Ii("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,s=n.height;return r.style.width=a+"px",r.style.height=s+"px",r.width=a,r.height=s,r},t.tryPlayVideo=function(e){return $s(this,void 0,void 0,function(){var r;return Gs(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return $s(this,void 0,void 0,function(){var e,r,n,a,s,o,l,c,u,d,f,A;return Gs(this,function(h){switch(h.label){case 0:if(!lne())throw new Error("Can't enumerate devices, navigator is not present.");if(!DTe())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=C5(e),a=n.next();!a.done;a=n.next())s=a.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device ".concat(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:o,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(A=n.return)&&A.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.findDeviceById=function(e){return $s(this,void 0,void 0,function(){var r;return Gs(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return $s(this,void 0,void 0,function(){var n;return Gs(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(s,o){var l=setTimeout(function(){t.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",c))},r),c=function(){t.tryPlayVideo(e).then(function(u){clearTimeout(l),e.removeEventListener("canplay",c),s(u)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),$s(this,void 0,void 0,function(){var a;return Gs(this,function(s){switch(s.label){case 0:return a=t.prepareVideoElement(r),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return s.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var a=1e4,s=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",o),n())},a),o=function(){clearTimeout(s),e.removeEventListener("load",o),r()};e.addEventListener("load",o)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new Ii("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return $s(this,void 0,void 0,function(){var r;return Gs(this,function(n){switch(n.label){case 0:if(!e)throw new Ii("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return $s(this,void 0,void 0,function(){var r;return Gs(this,function(n){switch(n.label){case 0:if(!e)throw new Ii("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return $s(this,void 0,void 0,function(){var a,s;return Gs(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,o.sent()];case 4:throw s=o.sent(),t.disposeMediaStream(a),s;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return $s(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,A,h=this;return Gs(this,function(m){switch(m.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,a)];case 1:return s=m.sent(),o=function(){t.disposeMediaStream(e),t.cleanVideoSource(s)},l=this.scan(s,n,o),c=e.getVideoTracks(),u=zx(zx({},l),{stop:function(){l.stop()},streamVideoConstraintsApply:function(p,g){return $s(this,void 0,void 0,function(){var v,y,b,w,P,j,_;return Gs(this,function(I){switch(I.label){case 0:v=g?c.filter(g):c,I.label=1;case 1:I.trys.push([1,6,7,8]),y=C5(v),b=y.next(),I.label=2;case 2:return b.done?[3,5]:(w=b.value,[4,w.applyConstraints(p)]);case 3:I.sent(),I.label=4;case 4:return b=y.next(),[3,2];case 5:return[3,8];case 6:return P=I.sent(),j={error:P},[3,8];case 7:try{b&&!b.done&&(_=y.return)&&_.call(y)}finally{if(j)throw j.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(p){return c.find(p).getConstraints()},streamVideoSettingsGet:function(p){return c.find(p).getSettings()},streamVideoCapabilitiesGet:function(p){return c.find(p).getCapabilities()}}),d=t.mediaStreamIsTorchCompatible(e),d&&(f=c==null?void 0:c.find(function(p){return t.mediaStreamIsTorchCompatibleTrack(p)}),A=function(p){return $s(h,void 0,void 0,function(){return Gs(this,function(g){switch(g.label){case 0:return[4,t.mediaStreamSetTorch(f,p)];case 1:return g.sent(),[2]}})})},u.switchTorch=A,u.stop=function(){return $s(h,void 0,void 0,function(){return Gs(this,function(p){switch(p.label){case 0:return l.stop(),[4,A(!1)];case 1:return p.sent(),[2]}})})}),[2,u]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return $s(this,void 0,void 0,function(){var a,s;return Gs(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return $s(this,void 0,void 0,function(){var n,a;return Gs(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Ii("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return $s(this,void 0,void 0,function(){var n,a,s,o;return Gs(this,function(l){switch(l.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Ii("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},s=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,s)];case 1:return l.sent(),o=this.scan(n,r,a),[2,o]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return $s(this,void 0,void 0,function(){var n;return Gs(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return $s(this,void 0,void 0,function(){var n,a,s;return Gs(this,function(o){switch(o.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return s=o.sent(),[2,s];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return $s(this,void 0,void 0,function(){var n,a;return Gs(this,function(s){switch(s.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return $s(this,void 0,void 0,function(){var r,n;return Gs(this,function(a){switch(a.label){case 0:if(!e)throw new Ii("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return $s(this,void 0,void 0,function(){var r,n;return Gs(this,function(a){switch(a.label){case 0:if(!e)throw new Ii("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,a){var s=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(o,l){s.scan(e,function(c,u,d){if(c){o(c),d.stop();return}if(u){if(u instanceof tr&&r||u instanceof qi&&n||u instanceof Fr&&a)return;d.stop(),l(u)}})})},t.prototype.scan=function(e,r,n){var a=this;t.checkCallbackFnOrThrow(r);var s=t.createCaptureCanvas(e),o;try{o=s.getContext("2d",{willReadFrequently:!0})}catch{o=s.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var l=function(){o=void 0,s=void 0},c=!1,u,d=function(){c=!0,clearTimeout(u),l(),n&&n()},f={stop:d},A=function(){if(!c)try{t.drawImageOnCanvas(o,e);var h=a.decodeFromCanvas(s);r(h,void 0,f),u=setTimeout(A,a.options.delayBetweenScanSuccess)}catch(v){r(void 0,v,f);var m=v instanceof qi,p=v instanceof Fr,g=v instanceof tr;if(m||p||g){u=setTimeout(A,a.options.delayBetweenScanAttempts);return}l(),n&&n(v)}};return A(),f},t.prototype._decodeOnLoadImage=function(e){return $s(this,void 0,void 0,function(){var r;return Gs(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return $s(this,void 0,void 0,function(){var r;return Gs(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),MTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){MTe(e,t);function e(r,n){return t.call(this,new PS,r,n)||this}return e})(A1);var LTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){LTe(e,t);function e(r,n){return t.call(this,new Kx(r),r,n)||this}return e})(A1);var UTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){UTe(e,t);function e(r,n){return t.call(this,new TS,r,n)||this}return e})(A1);var QTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),C2=function(t){QTe(e,t);function e(r,n){var a=this,s=new nne;return s.setHints(r),a=t.call(this,s,r,n)||this,a.reader=s,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(fs.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(A1),VTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){VTe(e,t);function e(r,n){return t.call(this,new FS,r,n)||this}return e})(A1);var HTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){HTe(e,t);function e(r,n){return t.call(this,new kS,r,n)||this}return e})(A1);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var DS={};DS.version="0.18.5";var cne=1252,$Te=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],U6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Q6=function(t){$Te.indexOf(t)!=-1&&(cne=U6[0]=t)};function GTe(){Q6(1252)}var zd=function(t){Q6(t)};function V6(){zd(1200),GTe()}function FH(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function KTe(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function une(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Ky=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?KTe(t.slice(2)):e==254&&r==255?une(t.slice(2)):e==65279?t.slice(1):t},GC=function(e){return String.fromCharCode(e)},OH=function(e){return String.fromCharCode(e)},_2,M0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function E2(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),o=(r&3)<<4|n>>4,a=t.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),e+=M0.charAt(s)+M0.charAt(o)+M0.charAt(l)+M0.charAt(c);return e}function Nu(t){var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=M0.indexOf(t.charAt(u++)),o=M0.indexOf(t.charAt(u++)),r=s<<2|o>>4,e+=String.fromCharCode(r),l=M0.indexOf(t.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=M0.indexOf(t.charAt(u++)),a=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var Gn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),NA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function pm(t){return Gn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function DH(t){return Gn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var uu=function(e){return Gn?NA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Zj(t){if(typeof ArrayBuffer>"u")return uu(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function jm(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function qTe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function H6(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return H6(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Mo=Gn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:NA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function zTe(t){for(var e=[],r=0,n=t.length+250,a=pm(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=t.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(e.push(a.slice(0,r)),r=0,a=pm(65535),n=65530)}return e.push(a.slice(0,r)),Mo(e)}var hc=/\u0000/g,qy=/[\u0001-\u0006]/g;function dv(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Wd(t,e){var r=""+t;return r.length>=e?r:Ai("0",e-r.length)+r}function $6(t,e){var r=""+t;return r.length>=e?r:Ai(" ",e-r.length)+r}function RS(t,e){var r=""+t;return r.length>=e?r:r+Ai(" ",e-r.length)}function WTe(t,e){var r=""+Math.round(t);return r.length>=e?r:Ai("0",e-r.length)+r}function XTe(t,e){var r=""+t;return r.length>=e?r:Ai("0",e-r.length)+r}var RH=Math.pow(2,32);function fx(t,e){if(t>RH||t<-RH)return WTe(t,e);var r=Math.round(t);return XTe(r,e)}function MS(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var MH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],_5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function YTe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var wn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},LH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},JTe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function LS(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<e&&(f=Math.floor(a),l=f*o+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=o,o=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var A=Math.floor(n*l/d);return[A,n*l-A*d,d]}function yp(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,o=[],l={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=ake(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var dne=new Date(1899,11,31,0,0,0),ZTe=dne.getTime(),eke=new Date(1900,2,1,0,0,0);function fne(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=eke&&(r+=24*60*60*1e3),(r-(ZTe+(t.getTimezoneOffset()-dne.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function G6(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function tke(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function rke(t){var e=t<0?12:11,r=G6(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function nke(t){var e=G6(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function S2(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=rke(t):e===10?r=t.toFixed(10).substr(0,12):r=nke(t),G6(tke(r.toUpperCase()))}function sg(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):S2(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return gd(14,fne(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function ake(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function ske(t,e,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return _5[r.m-1][1];case 5:return _5[r.m-1][0];default:return _5[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return MH[r.q][0];default:return MH[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Wd(r.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(a=Wd(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Wd(c,u):"";return d}function L0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var hne=/%/g;function ike(t,e,r){var n=e.replace(hne,""),a=e.length-n.length;return zh(t,n,r*Math.pow(10,2*a))+Ai("%",a)}function oke(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return zh(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Ane(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Ane(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var mne=/# (\?+)( ?)\/( ?)(\d+)/;function lke(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?Ai(" ",t[1].length+1+t[4].length):$6(o,t[1].length)+t[2]+"/"+t[3]+Wd(l,t[4].length))}function cke(t,e,r){return r+(e===0?"":""+e)+Ai(" ",t[1].length+2+t[4].length)}var pne=/^#*0*\.([0#]+)/,gne=/\).*[0#]/,xne=/\(###\) ###\\?-####/;function ic(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function UH(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function QH(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function uke(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function dke(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Gu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(gne)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Gu("n",n,r):"("+Gu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return oke(t,e,r);if(e.indexOf("%")!==-1)return ike(t,e,r);if(e.indexOf("E")!==-1)return Ane(e,r);if(e.charCodeAt(0)===36)return"$"+Gu(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+fx(c,e.length);if(e.match(/^[#?]+$/))return a=fx(r,0),a==="0"&&(a=""),a.length>e.length?a:ic(e.substr(0,e.length-a.length))+a;if(s=e.match(mne))return lke(s,c,u);if(e.match(/^#+0+$/))return u+fx(c,e.length-e.indexOf("0"));if(s=e.match(pne))return a=UH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+ic(s[1])).replace(/\.$/,"."+ic(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+Ai("0",ic(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+UH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+L0(fx(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Gu(t,e,-r):L0(""+(Math.floor(r)+uke(r,s[1].length)))+"."+Wd(QH(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Gu(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=dv(Gu(t,e.replace(/[\\-]/g,""),r)),o=0,dv(dv(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<a.length?a.charAt(o++):m==="0"?"0":""}));if(e.match(xne))return a=Gu(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=LS(c,Math.pow(10,o)-1,!1),a=""+u,d=zh("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=RS(l[2],o),d.length<s[4].length&&(d=ic(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=LS(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?$6(l[1],o)+s[2]+"/"+s[3]+RS(l[2],o):Ai(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=fx(r,0),e.length<=a.length?a:ic(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=e.indexOf(".")-o,A=e.length-a.length-f;return ic(e.substr(0,f)+a+e.substr(e.length-A))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=QH(r,s[1].length),r<0?"-"+Gu(t,e,-r):L0(dke(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Wd(0,3-m.length):"")+m})+"."+Wd(o,s[1].length);switch(e){case"###,##0.00":return Gu(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=L0(fx(c,0));return h!=="0"?u+h:"";case"###,###.00":return Gu(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Gu(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function fke(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return zh(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function hke(t,e,r){var n=e.replace(hne,""),a=e.length-n.length;return zh(t,n,r*Math.pow(10,2*a))+Ai("%",a)}function vne(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+vne(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function If(t,e,r){if(t.charCodeAt(0)===40&&!e.match(gne)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?If("n",n,r):"("+If("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return fke(t,e,r);if(e.indexOf("%")!==-1)return hke(t,e,r);if(e.indexOf("E")!==-1)return vne(e,r);if(e.charCodeAt(0)===36)return"$"+If(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Wd(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:ic(e.substr(0,e.length-a.length))+a;if(s=e.match(mne))return cke(s,c,u);if(e.match(/^#+0+$/))return u+Wd(c,e.length-e.indexOf("0"));if(s=e.match(pne))return a=(""+r).replace(/^([^\.]+)$/,"$1."+ic(s[1])).replace(/\.$/,"."+ic(s[1])),a=a.replace(/\.(\d*)$/,function(m,p){return"."+p+Ai("0",ic(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+L0(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+If(t,e,-r):L0(""+r)+"."+Ai("0",s[1].length);if(s=e.match(/^#,#*,#0/))return If(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=dv(If(t,e.replace(/[\\-]/g,""),r)),o=0,dv(dv(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<a.length?a.charAt(o++):m==="0"?"0":""}));if(e.match(xne))return a=If(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=LS(c,Math.pow(10,o)-1,!1),a=""+u,d=zh("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=RS(l[2],o),d.length<s[4].length&&(d=ic(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=LS(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?$6(l[1],o)+s[2]+"/"+s[3]+RS(l[2],o):Ai(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:ic(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=e.indexOf(".")-o,A=e.length-a.length-f;return ic(e.substr(0,f)+a+e.substr(e.length-A))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+If(t,e,-r):L0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Wd(0,3-m.length):"")+m})+"."+Wd(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var h=L0(""+c);return h!=="0"?u+h:"";default:if(e.match(/\.[0#?]*$/))return If(t,e.slice(0,e.lastIndexOf(".")),r)+ic(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function zh(t,e,r){return(r|0)===r?If(t,e,r):Gu(t,e,r)}function Ake(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var yne=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function m1(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":MS(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(yne))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function mke(t,e,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,f,A="H";o<t.length;)switch(l=t.charAt(o)){case"G":if(!MS(t,o))throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++o;break;case"\\":var h=t.charAt(++o),m=h==="("||h===")"?h:"t";a[a.length]={t:m,v:h},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(u==null&&(u=yp(e,r,t.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=yp(e,r),u==null))return"";for(s=l;++o<t.length&&t.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=A),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(u==null&&(u=yp(e,r)),t.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",A="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",o+=5,A="h"):t.substr(o,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",o+=5,A="h"):(p.t="t",++o),u==null&&p.t==="T")return"";a[a.length]=p,c=l;break;case"[":for(s=l;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(yne)){if(u==null&&(u=yp(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",m1(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<t.length&&(l=t.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"t",v:l},++o;break}var g=0,v=0,y;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=A,c="h",g<1&&(g=1);break;case"s":(y=a[o].v.match(/\.0+$/))&&(v=Math.max(v,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[o].v.match(/[Hh]/)&&(g=1),g<2&&a[o].v.match(/[Mm]/)&&(g=2),g<3&&a[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",w;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=ske(a[o].t.charCodeAt(0),a[o].v,u,v),a[o].t="t";break;case"n":case"?":for(w=o+1;a[w]!=null&&((l=a[w].t)==="?"||l==="D"||(l===" "||l==="t")&&a[w+1]!=null&&(a[w+1].t==="?"||a[w+1].t==="t"&&a[w+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[w].v==="/"||a[w].v===" "&&a[w+1]!=null&&a[w+1].t=="?"));)a[o].v+=a[w].v,a[w]={v:"",t:";"},++w;b+=a[o].v,o=w-1;break;case"G":a[o].t="t",a[o].v=sg(e,r);break}var P="",j,_;if(b.length>0){b.charCodeAt(0)==40?(j=e<0&&b.charCodeAt(0)===45?-e:e,_=zh("n",b,j)):(j=e<0&&n>1?-e:e,_=zh("n",b,j),j<0&&a[0]&&a[0].t=="t"&&(_=_.substr(1),a[0].v="-"+a[0].v)),w=_.length-1;var I=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){I=o;break}var E=a.length;if(I===a.length&&_.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(w>=a[o].v.length-1?(w-=a[o].v.length,a[o].v=_.substr(w+1,a[o].v.length)):w<0?a[o].v="":(a[o].v=_.substr(0,w+1),w=-1),a[o].t="t",E=o);w>=0&&E<a.length&&(a[E].v=_.substr(0,w+1)+a[E].v)}else if(I!==a.length&&_.indexOf("E")===-1){for(w=_.indexOf(".")-1,o=I;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===I?a[o].v.indexOf(".")-1:a[o].v.length-1,P=a[o].v.substr(d+1);d>=0;--d)w>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(P=_.charAt(w--)+P);a[o].v=P,a[o].t="t",E=o}for(w>=0&&E<a.length&&(a[E].v=_.substr(0,w+1)+a[E].v),w=_.indexOf(".")+1,o=I;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==I)){for(d=a[o].v.indexOf(".")>-1&&o===I?a[o].v.indexOf(".")+1:0,P=a[o].v.substr(0,d);d<a[o].v.length;++d)w<_.length&&(P+=_.charAt(w++));a[o].v=P,a[o].t="t",E=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(j=n>1&&e<0&&o>0&&a[o-1].v==="-"?-e:e,a[o].v=zh(a[o].t,a[o].v,j),a[o].t="t");var F="";for(o=0;o!==a.length;++o)a[o]!=null&&(F+=a[o].v);return F}var VH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function HH(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function pke(t,e){var r=Ake(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(VH),l=r[1].match(VH);return HH(e,o)?[n,r[0]]:HH(e,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function gd(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:wn)[t],n==null&&(n=r.table&&r.table[LH[t]]||wn[LH[t]]),n==null&&(n=JTe[t]||"General");break}if(MS(n,0))return sg(e,r);e instanceof Date&&(e=fne(e,r.date1904));var a=pke(n,e);if(MS(a[1]))return sg(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return mke(a[1],e,r,a[0])}function Wh(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(wn[r]==null){e<0&&(e=r);continue}if(wn[r]==t){e=r;break}}e<0&&(e=391)}return wn[e]=t,e}function eP(t){for(var e=0;e!=392;++e)t[e]!==void 0&&Wh(t[e],e)}function p1(){wn=YTe()}var gke={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},bne=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function xke(t){var e=typeof t=="number"?wn[t]:t;return e=e.replace(bne,"(\\d+)"),new RegExp("^"+e+"$")}function vke(t,e,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(e.match(bne)||[]).forEach(function(f,A){var h=parseInt(r[A+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=h;break;case"d":s=h;break;case"h":o=h;break;case"s":c=h;break;case"m":o>=0?l=h:a=h;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var yke=function(){var t={};t.version="1.2.0";function e(){for(var _=0,I=new Array(256),E=0;E!=256;++E)_=E,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,I[E]=_;return typeof Int32Array<"u"?new Int32Array(I):I}var r=e();function n(_){var I=0,E=0,F=0,k=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)k[F]=_[F];for(F=0;F!=256;++F)for(E=_[F],I=256+F;I<4096;I+=256)E=k[I]=E>>>8^_[E&255];var B=[];for(F=1;F!=16;++F)B[F-1]=typeof Int32Array<"u"?k.subarray(F*256,F*256+256):k.slice(F*256,F*256+256);return B}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],A=a[7],h=a[8],m=a[9],p=a[10],g=a[11],v=a[12],y=a[13],b=a[14];function w(_,I){for(var E=I^-1,F=0,k=_.length;F<k;)E=E>>>8^r[(E^_.charCodeAt(F++))&255];return~E}function P(_,I){for(var E=I^-1,F=_.length-15,k=0;k<F;)E=b[_[k++]^E&255]^y[_[k++]^E>>8&255]^v[_[k++]^E>>16&255]^g[_[k++]^E>>>24]^p[_[k++]]^m[_[k++]]^h[_[k++]]^A[_[k++]]^f[_[k++]]^d[_[k++]]^u[_[k++]]^c[_[k++]]^l[_[k++]]^o[_[k++]]^s[_[k++]]^r[_[k++]];for(F+=15;k<F;)E=E>>>8^r[(E^_[k++])&255];return~E}function j(_,I){for(var E=I^-1,F=0,k=_.length,B=0,R=0;F<k;)B=_.charCodeAt(F++),B<128?E=E>>>8^r[(E^B)&255]:B<2048?(E=E>>>8^r[(E^(192|B>>6&31))&255],E=E>>>8^r[(E^(128|B&63))&255]):B>=55296&&B<57344?(B=(B&1023)+64,R=_.charCodeAt(F++)&1023,E=E>>>8^r[(E^(240|B>>8&7))&255],E=E>>>8^r[(E^(128|B>>2&63))&255],E=E>>>8^r[(E^(128|R>>6&15|(B&3)<<4))&255],E=E>>>8^r[(E^(128|R&63))&255]):(E=E>>>8^r[(E^(224|B>>12&15))&255],E=E>>>8^r[(E^(128|B>>6&63))&255],E=E>>>8^r[(E^(128|B&63))&255]);return~E}return t.table=r,t.bstr=w,t.buf=P,t.str=j,t}(),hn=function(){var e={};e.version="1.2.1";function r(S,O){for(var U=S.split("/"),q=O.split("/"),ae=0,fe=0,Ue=Math.min(U.length,q.length);ae<Ue;++ae){if(fe=U[ae].length-q[ae].length)return fe;if(U[ae]!=q[ae])return U[ae]<q[ae]?-1:1}return U.length-q.length}function n(S){if(S.charAt(S.length-1)=="/")return S.slice(0,-1).indexOf("/")===-1?S:n(S.slice(0,-1));var O=S.lastIndexOf("/");return O===-1?S:S.slice(0,O+1)}function a(S){if(S.charAt(S.length-1)=="/")return a(S.slice(0,-1));var O=S.lastIndexOf("/");return O===-1?S:S.slice(O+1)}function s(S,O){typeof O=="string"&&(O=new Date(O));var U=O.getHours();U=U<<6|O.getMinutes(),U=U<<5|O.getSeconds()>>>1,S.write_shift(2,U);var q=O.getFullYear()-1980;q=q<<4|O.getMonth()+1,q=q<<5|O.getDate(),S.write_shift(2,q)}function o(S){var O=S.read_shift(2)&65535,U=S.read_shift(2)&65535,q=new Date,ae=U&31;U>>>=5;var fe=U&15;U>>>=4,q.setMilliseconds(0),q.setFullYear(U+1980),q.setMonth(fe-1),q.setDate(ae);var Ue=O&31;O>>>=5;var Ze=O&63;return O>>>=6,q.setHours(O),q.setMinutes(Ze),q.setSeconds(Ue<<1),q}function l(S){ul(S,0);for(var O={},U=0;S.l<=S.length-4;){var q=S.read_shift(2),ae=S.read_shift(2),fe=S.l+ae,Ue={};switch(q){case 21589:U=S.read_shift(1),U&1&&(Ue.mtime=S.read_shift(4)),ae>5&&(U&2&&(Ue.atime=S.read_shift(4)),U&4&&(Ue.ctime=S.read_shift(4))),Ue.mtime&&(Ue.mt=new Date(Ue.mtime*1e3));break}S.l=fe,O[q]=Ue}return O}var c;function u(){return c||(c={})}function d(S,O){if(S[0]==80&&S[1]==75)return We(S,O);if((S[0]|32)==109&&(S[1]|32)==105)return X(S,O);if(S.length<512)throw new Error("CFB file size "+S.length+" < 512");var U=3,q=512,ae=0,fe=0,Ue=0,Ze=0,lt=0,Qe=[],tt=S.slice(0,512);ul(tt,0);var ut=f(tt);switch(U=ut[0],U){case 3:q=512;break;case 4:q=4096;break;case 0:if(ut[1]==0)return We(S,O);default:throw new Error("Major Version: Expected 3 or 4 saw "+U)}q!==512&&(tt=S.slice(0,q),ul(tt,28));var Pt=S.slice(0,q);A(tt,U);var Ct=tt.read_shift(4,"i");if(U===3&&Ct!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ct);tt.l+=4,Ue=tt.read_shift(4,"i"),tt.l+=4,tt.chk("00100000","Mini Stream Cutoff Size: "),Ze=tt.read_shift(4,"i"),ae=tt.read_shift(4,"i"),lt=tt.read_shift(4,"i"),fe=tt.read_shift(4,"i");for(var It=-1,St=0;St<109&&(It=tt.read_shift(4,"i"),!(It<0));++St)Qe[St]=It;var Zt=h(S,q);g(lt,fe,Zt,q,Qe);var Er=y(Zt,Ue,Qe,q);Er[Ue].name="!Directory",ae>0&&Ze!==R&&(Er[Ze].name="!MiniFAT"),Er[Qe[0]].name="!FAT",Er.fat_addrs=Qe,Er.ssz=q;var Nr={},Dr=[],nn=[],pn=[];b(Ue,Er,Zt,Dr,ae,Nr,nn,Ze),m(nn,pn,Dr),Dr.shift();var Yr={FileIndex:nn,FullPaths:pn};return O&&O.raw&&(Yr.raw={header:Pt,sectors:Zt}),Yr}function f(S){if(S[S.l]==80&&S[S.l+1]==75)return[0,0];S.chk(Y,"Header Signature: "),S.l+=16;var O=S.read_shift(2,"u");return[S.read_shift(2,"u"),O]}function A(S,O){var U=9;switch(S.l+=2,U=S.read_shift(2)){case 9:if(O!=3)throw new Error("Sector Shift: Expected 9 saw "+U);break;case 12:if(O!=4)throw new Error("Sector Shift: Expected 12 saw "+U);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+U)}S.chk("0600","Mini Sector Shift: "),S.chk("000000000000","Reserved: ")}function h(S,O){for(var U=Math.ceil(S.length/O)-1,q=[],ae=1;ae<U;++ae)q[ae-1]=S.slice(ae*O,(ae+1)*O);return q[U-1]=S.slice(U*O),q}function m(S,O,U){for(var q=0,ae=0,fe=0,Ue=0,Ze=0,lt=U.length,Qe=[],tt=[];q<lt;++q)Qe[q]=tt[q]=q,O[q]=U[q];for(;Ze<tt.length;++Ze)q=tt[Ze],ae=S[q].L,fe=S[q].R,Ue=S[q].C,Qe[q]===q&&(ae!==-1&&Qe[ae]!==ae&&(Qe[q]=Qe[ae]),fe!==-1&&Qe[fe]!==fe&&(Qe[q]=Qe[fe])),Ue!==-1&&(Qe[Ue]=q),ae!==-1&&q!=Qe[q]&&(Qe[ae]=Qe[q],tt.lastIndexOf(ae)<Ze&&tt.push(ae)),fe!==-1&&q!=Qe[q]&&(Qe[fe]=Qe[q],tt.lastIndexOf(fe)<Ze&&tt.push(fe));for(q=1;q<lt;++q)Qe[q]===q&&(fe!==-1&&Qe[fe]!==fe?Qe[q]=Qe[fe]:ae!==-1&&Qe[ae]!==ae&&(Qe[q]=Qe[ae]));for(q=1;q<lt;++q)if(S[q].type!==0){if(Ze=q,Ze!=Qe[Ze])do Ze=Qe[Ze],O[q]=O[Ze]+"/"+O[q];while(Ze!==0&&Qe[Ze]!==-1&&Ze!=Qe[Ze]);Qe[q]=-1}for(O[0]+="/",q=1;q<lt;++q)S[q].type!==2&&(O[q]+="/")}function p(S,O,U){for(var q=S.start,ae=S.size,fe=[],Ue=q;U&&ae>0&&Ue>=0;)fe.push(O.slice(Ue*B,Ue*B+B)),ae-=B,Ue=fp(U,Ue*4);return fe.length===0?rr(0):Mo(fe).slice(0,S.size)}function g(S,O,U,q,ae){var fe=R;if(S===R){if(O!==0)throw new Error("DIFAT chain shorter than expected")}else if(S!==-1){var Ue=U[S],Ze=(q>>>2)-1;if(!Ue)return;for(var lt=0;lt<Ze&&(fe=fp(Ue,lt*4))!==R;++lt)ae.push(fe);g(fp(Ue,q-4),O-1,U,q,ae)}}function v(S,O,U,q,ae){var fe=[],Ue=[];ae||(ae=[]);var Ze=q-1,lt=0,Qe=0;for(lt=O;lt>=0;){ae[lt]=!0,fe[fe.length]=lt,Ue.push(S[lt]);var tt=U[Math.floor(lt*4/q)];if(Qe=lt*4&Ze,q<4+Qe)throw new Error("FAT boundary crossed: "+lt+" 4 "+q);if(!S[tt])break;lt=fp(S[tt],Qe)}return{nodes:fe,data:t$([Ue])}}function y(S,O,U,q){var ae=S.length,fe=[],Ue=[],Ze=[],lt=[],Qe=q-1,tt=0,ut=0,Pt=0,Ct=0;for(tt=0;tt<ae;++tt)if(Ze=[],Pt=tt+O,Pt>=ae&&(Pt-=ae),!Ue[Pt]){lt=[];var It=[];for(ut=Pt;ut>=0;){It[ut]=!0,Ue[ut]=!0,Ze[Ze.length]=ut,lt.push(S[ut]);var St=U[Math.floor(ut*4/q)];if(Ct=ut*4&Qe,q<4+Ct)throw new Error("FAT boundary crossed: "+ut+" 4 "+q);if(!S[St]||(ut=fp(S[St],Ct),It[ut]))break}fe[Pt]={nodes:Ze,data:t$([lt])}}return fe}function b(S,O,U,q,ae,fe,Ue,Ze){for(var lt=0,Qe=q.length?2:0,tt=O[S].data,ut=0,Pt=0,Ct;ut<tt.length;ut+=128){var It=tt.slice(ut,ut+128);ul(It,64),Pt=It.read_shift(2),Ct=J6(It,0,Pt-Qe),q.push(Ct);var St={name:Ct,type:It.read_shift(1),color:It.read_shift(1),L:It.read_shift(4,"i"),R:It.read_shift(4,"i"),C:It.read_shift(4,"i"),clsid:It.read_shift(16),state:It.read_shift(4,"i"),start:0,size:0},Zt=It.read_shift(2)+It.read_shift(2)+It.read_shift(2)+It.read_shift(2);Zt!==0&&(St.ct=w(It,It.l-8));var Er=It.read_shift(2)+It.read_shift(2)+It.read_shift(2)+It.read_shift(2);Er!==0&&(St.mt=w(It,It.l-8)),St.start=It.read_shift(4,"i"),St.size=It.read_shift(4,"i"),St.size<0&&St.start<0&&(St.size=St.type=0,St.start=R,St.name=""),St.type===5?(lt=St.start,ae>0&&lt!==R&&(O[lt].name="!StreamData")):St.size>=4096?(St.storage="fat",O[St.start]===void 0&&(O[St.start]=v(U,St.start,O.fat_addrs,O.ssz)),O[St.start].name=St.name,St.content=O[St.start].data.slice(0,St.size)):(St.storage="minifat",St.size<0?St.size=0:lt!==R&&St.start!==R&&O[lt]&&(St.content=p(St,O[lt].data,(O[Ze]||{}).data))),St.content&&ul(St.content,0),fe[Ct]=St,Ue.push(St)}}function w(S,O){return new Date((cu(S,O+4)/1e7*Math.pow(2,32)+cu(S,O)/1e7-11644473600)*1e3)}function P(S,O){return u(),d(c.readFileSync(S),O)}function j(S,O){var U=O&&O.type;switch(U||Gn&&Buffer.isBuffer(S)&&(U="buffer"),U||"base64"){case"file":return P(S,O);case"base64":return d(uu(Nu(S)),O);case"binary":return d(uu(S),O)}return d(S,O)}function _(S,O){var U=O||{},q=U.root||"Root Entry";if(S.FullPaths||(S.FullPaths=[]),S.FileIndex||(S.FileIndex=[]),S.FullPaths.length!==S.FileIndex.length)throw new Error("inconsistent CFB structure");S.FullPaths.length===0&&(S.FullPaths[0]=q+"/",S.FileIndex[0]={name:q,type:5}),U.CLSID&&(S.FileIndex[0].clsid=U.CLSID),I(S)}function I(S){var O="Sh33tJ5";if(!hn.find(S,"/"+O)){var U=rr(4);U[0]=55,U[1]=U[3]=50,U[2]=54,S.FileIndex.push({name:O,type:2,content:U,size:4,L:69,R:69,C:69}),S.FullPaths.push(S.FullPaths[0]+O),E(S)}}function E(S,O){_(S);for(var U=!1,q=!1,ae=S.FullPaths.length-1;ae>=0;--ae){var fe=S.FileIndex[ae];switch(fe.type){case 0:q?U=!0:(S.FileIndex.pop(),S.FullPaths.pop());break;case 1:case 2:case 5:q=!0,isNaN(fe.R*fe.L*fe.C)&&(U=!0),fe.R>-1&&fe.L>-1&&fe.R==fe.L&&(U=!0);break;default:U=!0;break}}if(!(!U&&!O)){var Ue=new Date(1987,1,19),Ze=0,lt=Object.create?Object.create(null):{},Qe=[];for(ae=0;ae<S.FullPaths.length;++ae)lt[S.FullPaths[ae]]=!0,S.FileIndex[ae].type!==0&&Qe.push([S.FullPaths[ae],S.FileIndex[ae]]);for(ae=0;ae<Qe.length;++ae){var tt=n(Qe[ae][0]);q=lt[tt],q||(Qe.push([tt,{name:a(tt).replace("/",""),type:1,clsid:pe,ct:Ue,mt:Ue,content:null}]),lt[tt]=!0)}for(Qe.sort(function(Ct,It){return r(Ct[0],It[0])}),S.FullPaths=[],S.FileIndex=[],ae=0;ae<Qe.length;++ae)S.FullPaths[ae]=Qe[ae][0],S.FileIndex[ae]=Qe[ae][1];for(ae=0;ae<Qe.length;++ae){var ut=S.FileIndex[ae],Pt=S.FullPaths[ae];if(ut.name=a(Pt).replace("/",""),ut.L=ut.R=ut.C=-(ut.color=1),ut.size=ut.content?ut.content.length:0,ut.start=0,ut.clsid=ut.clsid||pe,ae===0)ut.C=Qe.length>1?1:-1,ut.size=0,ut.type=5;else if(Pt.slice(-1)=="/"){for(Ze=ae+1;Ze<Qe.length&&n(S.FullPaths[Ze])!=Pt;++Ze);for(ut.C=Ze>=Qe.length?-1:Ze,Ze=ae+1;Ze<Qe.length&&n(S.FullPaths[Ze])!=n(Pt);++Ze);ut.R=Ze>=Qe.length?-1:Ze,ut.type=1}else n(S.FullPaths[ae+1]||"")==n(Pt)&&(ut.R=ae+1),ut.type=2}}}function F(S,O){var U=O||{};if(U.fileType=="mad")return oe(S,U);switch(E(S),U.fileType){case"zip":return Ce(S,U)}var q=function(Ct){for(var It=0,St=0,Zt=0;Zt<Ct.FileIndex.length;++Zt){var Er=Ct.FileIndex[Zt];if(Er.content){var Nr=Er.content.length;Nr>0&&(Nr<4096?It+=Nr+63>>6:St+=Nr+511>>9)}}for(var Dr=Ct.FullPaths.length+3>>2,nn=It+7>>3,pn=It+127>>7,Yr=nn+St+Dr+pn,dn=Yr+127>>7,Vn=dn<=109?0:Math.ceil((dn-109)/127);Yr+dn+Vn+127>>7>dn;)Vn=++dn<=109?0:Math.ceil((dn-109)/127);var an=[1,Vn,dn,pn,Dr,St,It,0];return Ct.FileIndex[0].size=It<<6,an[7]=(Ct.FileIndex[0].start=an[0]+an[1]+an[2]+an[3]+an[4]+an[5])+(an[6]+7>>3),an}(S),ae=rr(q[7]<<9),fe=0,Ue=0;{for(fe=0;fe<8;++fe)ae.write_shift(1,me[fe]);for(fe=0;fe<8;++fe)ae.write_shift(2,0);for(ae.write_shift(2,62),ae.write_shift(2,3),ae.write_shift(2,65534),ae.write_shift(2,9),ae.write_shift(2,6),fe=0;fe<3;++fe)ae.write_shift(2,0);for(ae.write_shift(4,0),ae.write_shift(4,q[2]),ae.write_shift(4,q[0]+q[1]+q[2]+q[3]-1),ae.write_shift(4,0),ae.write_shift(4,4096),ae.write_shift(4,q[3]?q[0]+q[1]+q[2]-1:R),ae.write_shift(4,q[3]),ae.write_shift(-4,q[1]?q[0]-1:R),ae.write_shift(4,q[1]),fe=0;fe<109;++fe)ae.write_shift(-4,fe<q[2]?q[1]+fe:-1)}if(q[1])for(Ue=0;Ue<q[1];++Ue){for(;fe<236+Ue*127;++fe)ae.write_shift(-4,fe<q[2]?q[1]+fe:-1);ae.write_shift(-4,Ue===q[1]-1?R:Ue+1)}var Ze=function(Ct){for(Ue+=Ct;fe<Ue-1;++fe)ae.write_shift(-4,fe+1);Ct&&(++fe,ae.write_shift(-4,R))};for(Ue=fe=0,Ue+=q[1];fe<Ue;++fe)ae.write_shift(-4,he.DIFSECT);for(Ue+=q[2];fe<Ue;++fe)ae.write_shift(-4,he.FATSECT);Ze(q[3]),Ze(q[4]);for(var lt=0,Qe=0,tt=S.FileIndex[0];lt<S.FileIndex.length;++lt)tt=S.FileIndex[lt],tt.content&&(Qe=tt.content.length,!(Qe<4096)&&(tt.start=Ue,Ze(Qe+511>>9)));for(Ze(q[6]+7>>3);ae.l&511;)ae.write_shift(-4,he.ENDOFCHAIN);for(Ue=fe=0,lt=0;lt<S.FileIndex.length;++lt)tt=S.FileIndex[lt],tt.content&&(Qe=tt.content.length,!(!Qe||Qe>=4096)&&(tt.start=Ue,Ze(Qe+63>>6)));for(;ae.l&511;)ae.write_shift(-4,he.ENDOFCHAIN);for(fe=0;fe<q[4]<<2;++fe){var ut=S.FullPaths[fe];if(!ut||ut.length===0){for(lt=0;lt<17;++lt)ae.write_shift(4,0);for(lt=0;lt<3;++lt)ae.write_shift(4,-1);for(lt=0;lt<12;++lt)ae.write_shift(4,0);continue}tt=S.FileIndex[fe],fe===0&&(tt.start=tt.size?tt.start-1:R);var Pt=fe===0&&U.root||tt.name;if(Qe=2*(Pt.length+1),ae.write_shift(64,Pt,"utf16le"),ae.write_shift(2,Qe),ae.write_shift(1,tt.type),ae.write_shift(1,tt.color),ae.write_shift(-4,tt.L),ae.write_shift(-4,tt.R),ae.write_shift(-4,tt.C),tt.clsid)ae.write_shift(16,tt.clsid,"hex");else for(lt=0;lt<4;++lt)ae.write_shift(4,0);ae.write_shift(4,tt.state||0),ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(4,tt.start),ae.write_shift(4,tt.size),ae.write_shift(4,0)}for(fe=1;fe<S.FileIndex.length;++fe)if(tt=S.FileIndex[fe],tt.size>=4096)if(ae.l=tt.start+1<<9,Gn&&Buffer.isBuffer(tt.content))tt.content.copy(ae,ae.l,0,tt.size),ae.l+=tt.size+511&-512;else{for(lt=0;lt<tt.size;++lt)ae.write_shift(1,tt.content[lt]);for(;lt&511;++lt)ae.write_shift(1,0)}for(fe=1;fe<S.FileIndex.length;++fe)if(tt=S.FileIndex[fe],tt.size>0&&tt.size<4096)if(Gn&&Buffer.isBuffer(tt.content))tt.content.copy(ae,ae.l,0,tt.size),ae.l+=tt.size+63&-64;else{for(lt=0;lt<tt.size;++lt)ae.write_shift(1,tt.content[lt]);for(;lt&63;++lt)ae.write_shift(1,0)}if(Gn)ae.l=ae.length;else for(;ae.l<ae.length;)ae.write_shift(1,0);return ae}function k(S,O){var U=S.FullPaths.map(function(lt){return lt.toUpperCase()}),q=U.map(function(lt){var Qe=lt.split("/");return Qe[Qe.length-(lt.slice(-1)=="/"?2:1)]}),ae=!1;O.charCodeAt(0)===47?(ae=!0,O=U[0].slice(0,-1)+O):ae=O.indexOf("/")!==-1;var fe=O.toUpperCase(),Ue=ae===!0?U.indexOf(fe):q.indexOf(fe);if(Ue!==-1)return S.FileIndex[Ue];var Ze=!fe.match(qy);for(fe=fe.replace(hc,""),Ze&&(fe=fe.replace(qy,"!")),Ue=0;Ue<U.length;++Ue)if((Ze?U[Ue].replace(qy,"!"):U[Ue]).replace(hc,"")==fe||(Ze?q[Ue].replace(qy,"!"):q[Ue]).replace(hc,"")==fe)return S.FileIndex[Ue];return null}var B=64,R=-2,Y="d0cf11e0a1b11ae1",me=[208,207,17,224,161,177,26,225],pe="00000000000000000000000000000000",he={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:R,FREESECT:-1,HEADER_SIGNATURE:Y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:pe,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ge(S,O,U){u();var q=F(S,U);c.writeFileSync(O,q)}function se(S){for(var O=new Array(S.length),U=0;U<S.length;++U)O[U]=String.fromCharCode(S[U]);return O.join("")}function je(S,O){var U=F(S,O);switch(O&&O.type||"buffer"){case"file":return u(),c.writeFileSync(O.filename,U),U;case"binary":return typeof U=="string"?U:se(U);case"base64":return E2(typeof U=="string"?U:se(U));case"buffer":if(Gn)return Buffer.isBuffer(U)?U:NA(U);case"array":return typeof U=="string"?uu(U):U}return U}var Te;function D(S){try{var O=S.InflateRaw,U=new O;if(U._processChunk(new Uint8Array([3,0]),U._finishFlushFlag),U.bytesRead)Te=S;else throw new Error("zlib does not expose bytesRead")}catch(q){console.error("cannot use native zlib: "+(q.message||q))}}function K(S,O){if(!Te)return ue(S,O);var U=Te.InflateRaw,q=new U,ae=q._processChunk(S.slice(S.l),q._finishFlushFlag);return S.l+=q.bytesRead,ae}function z(S){return Te?Te.deflateRawSync(S):ce(S)}var Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ee=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function M(S){var O=(S<<1|S<<11)&139536|(S<<5|S<<15)&558144;return(O>>16|O>>8|O)&255}for(var G=typeof Uint8Array<"u",ne=G?new Uint8Array(256):[],ve=0;ve<256;++ve)ne[ve]=M(ve);function V(S,O){var U=ne[S&255];return O<=8?U>>>8-O:(U=U<<8|ne[S>>8&255],O<=16?U>>>16-O:(U=U<<8|ne[S>>16&255],U>>>24-O))}function qe(S,O){var U=O&7,q=O>>>3;return(S[q]|(U<=6?0:S[q+1]<<8))>>>U&3}function ie(S,O){var U=O&7,q=O>>>3;return(S[q]|(U<=5?0:S[q+1]<<8))>>>U&7}function re(S,O){var U=O&7,q=O>>>3;return(S[q]|(U<=4?0:S[q+1]<<8))>>>U&15}function Fe(S,O){var U=O&7,q=O>>>3;return(S[q]|(U<=3?0:S[q+1]<<8))>>>U&31}function de(S,O){var U=O&7,q=O>>>3;return(S[q]|(U<=1?0:S[q+1]<<8))>>>U&127}function we(S,O,U){var q=O&7,ae=O>>>3,fe=(1<<U)-1,Ue=S[ae]>>>q;return U<8-q||(Ue|=S[ae+1]<<8-q,U<16-q)||(Ue|=S[ae+2]<<16-q,U<24-q)||(Ue|=S[ae+3]<<24-q),Ue&fe}function Le(S,O,U){var q=O&7,ae=O>>>3;return q<=5?S[ae]|=(U&7)<<q:(S[ae]|=U<<q&255,S[ae+1]=(U&7)>>8-q),O+3}function Ge(S,O,U){var q=O&7,ae=O>>>3;return U=(U&1)<<q,S[ae]|=U,O+1}function ft(S,O,U){var q=O&7,ae=O>>>3;return U<<=q,S[ae]|=U&255,U>>>=8,S[ae+1]=U,O+8}function ht(S,O,U){var q=O&7,ae=O>>>3;return U<<=q,S[ae]|=U&255,U>>>=8,S[ae+1]=U&255,S[ae+2]=U>>>8,O+16}function xt(S,O){var U=S.length,q=2*U>O?2*U:O+5,ae=0;if(U>=O)return S;if(Gn){var fe=DH(q);if(S.copy)S.copy(fe);else for(;ae<S.length;++ae)fe[ae]=S[ae];return fe}else if(G){var Ue=new Uint8Array(q);if(Ue.set)Ue.set(S);else for(;ae<U;++ae)Ue[ae]=S[ae];return Ue}return S.length=q,S}function jt(S){for(var O=new Array(S),U=0;U<S;++U)O[U]=0;return O}function kt(S,O,U){var q=1,ae=0,fe=0,Ue=0,Ze=0,lt=S.length,Qe=G?new Uint16Array(32):jt(32);for(fe=0;fe<32;++fe)Qe[fe]=0;for(fe=lt;fe<U;++fe)S[fe]=0;lt=S.length;var tt=G?new Uint16Array(lt):jt(lt);for(fe=0;fe<lt;++fe)Qe[ae=S[fe]]++,q<ae&&(q=ae),tt[fe]=0;for(Qe[0]=0,fe=1;fe<=q;++fe)Qe[fe+16]=Ze=Ze+Qe[fe-1]<<1;for(fe=0;fe<lt;++fe)Ze=S[fe],Ze!=0&&(tt[fe]=Qe[Ze+16]++);var ut=0;for(fe=0;fe<lt;++fe)if(ut=S[fe],ut!=0)for(Ze=V(tt[fe],q)>>q-ut,Ue=(1<<q+4-ut)-1;Ue>=0;--Ue)O[Ze|Ue<<ut]=ut&15|fe<<4;return q}var wt=G?new Uint16Array(512):jt(512),Ve=G?new Uint16Array(32):jt(32);if(!G){for(var Pe=0;Pe<512;++Pe)wt[Pe]=0;for(Pe=0;Pe<32;++Pe)Ve[Pe]=0}(function(){for(var S=[],O=0;O<32;O++)S.push(5);kt(S,Ve,32);var U=[];for(O=0;O<=143;O++)U.push(8);for(;O<=255;O++)U.push(9);for(;O<=279;O++)U.push(7);for(;O<=287;O++)U.push(8);kt(U,wt,288)})();var be=function(){for(var O=G?new Uint8Array(32768):[],U=0,q=0;U<ee.length-1;++U)for(;q<ee[U+1];++q)O[q]=U;for(;q<32768;++q)O[q]=29;var ae=G?new Uint8Array(259):[];for(U=0,q=0;U<J.length-1;++U)for(;q<J[U+1];++q)ae[q]=U;function fe(Ze,lt){for(var Qe=0;Qe<Ze.length;){var tt=Math.min(65535,Ze.length-Qe),ut=Qe+tt==Ze.length;for(lt.write_shift(1,+ut),lt.write_shift(2,tt),lt.write_shift(2,~tt&65535);tt-- >0;)lt[lt.l++]=Ze[Qe++]}return lt.l}function Ue(Ze,lt){for(var Qe=0,tt=0,ut=G?new Uint16Array(32768):[];tt<Ze.length;){var Pt=Math.min(65535,Ze.length-tt);if(Pt<10){for(Qe=Le(lt,Qe,+(tt+Pt==Ze.length)),Qe&7&&(Qe+=8-(Qe&7)),lt.l=Qe/8|0,lt.write_shift(2,Pt),lt.write_shift(2,~Pt&65535);Pt-- >0;)lt[lt.l++]=Ze[tt++];Qe=lt.l*8;continue}Qe=Le(lt,Qe,+(tt+Pt==Ze.length)+2);for(var Ct=0;Pt-- >0;){var It=Ze[tt];Ct=(Ct<<5^It)&32767;var St=-1,Zt=0;if((St=ut[Ct])&&(St|=tt&-32768,St>tt&&(St-=32768),St<tt))for(;Ze[St+Zt]==Ze[tt+Zt]&&Zt<250;)++Zt;if(Zt>2){It=ae[Zt],It<=22?Qe=ft(lt,Qe,ne[It+1]>>1)-1:(ft(lt,Qe,3),Qe+=5,ft(lt,Qe,ne[It-23]>>5),Qe+=3);var Er=It<8?0:It-4>>2;Er>0&&(ht(lt,Qe,Zt-J[It]),Qe+=Er),It=O[tt-St],Qe=ft(lt,Qe,ne[It]>>3),Qe-=3;var Nr=It<4?0:It-2>>1;Nr>0&&(ht(lt,Qe,tt-St-ee[It]),Qe+=Nr);for(var Dr=0;Dr<Zt;++Dr)ut[Ct]=tt&32767,Ct=(Ct<<5^Ze[tt])&32767,++tt;Pt-=Zt-1}else It<=143?It=It+48:Qe=Ge(lt,Qe,1),Qe=ft(lt,Qe,ne[It]),ut[Ct]=tt&32767,++tt}Qe=ft(lt,Qe,0)-1}return lt.l=(Qe+7)/8|0,lt.l}return function(lt,Qe){return lt.length<8?fe(lt,Qe):Ue(lt,Qe)}}();function ce(S){var O=rr(50+Math.floor(S.length*1.1)),U=be(S,O);return O.slice(0,U)}var te=G?new Uint16Array(32768):jt(32768),Ne=G?new Uint16Array(32768):jt(32768),Re=G?new Uint16Array(128):jt(128),ye=1,Xe=1;function mt(S,O){var U=Fe(S,O)+257;O+=5;var q=Fe(S,O)+1;O+=5;var ae=re(S,O)+4;O+=4;for(var fe=0,Ue=G?new Uint8Array(19):jt(19),Ze=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],lt=1,Qe=G?new Uint8Array(8):jt(8),tt=G?new Uint8Array(8):jt(8),ut=Ue.length,Pt=0;Pt<ae;++Pt)Ue[Q[Pt]]=fe=ie(S,O),lt<fe&&(lt=fe),Qe[fe]++,O+=3;var Ct=0;for(Qe[0]=0,Pt=1;Pt<=lt;++Pt)tt[Pt]=Ct=Ct+Qe[Pt-1]<<1;for(Pt=0;Pt<ut;++Pt)(Ct=Ue[Pt])!=0&&(Ze[Pt]=tt[Ct]++);var It=0;for(Pt=0;Pt<ut;++Pt)if(It=Ue[Pt],It!=0){Ct=ne[Ze[Pt]]>>8-It;for(var St=(1<<7-It)-1;St>=0;--St)Re[Ct|St<<It]=It&7|Pt<<3}var Zt=[];for(lt=1;Zt.length<U+q;)switch(Ct=Re[de(S,O)],O+=Ct&7,Ct>>>=3){case 16:for(fe=3+qe(S,O),O+=2,Ct=Zt[Zt.length-1];fe-- >0;)Zt.push(Ct);break;case 17:for(fe=3+ie(S,O),O+=3;fe-- >0;)Zt.push(0);break;case 18:for(fe=11+de(S,O),O+=7;fe-- >0;)Zt.push(0);break;default:Zt.push(Ct),lt<Ct&&(lt=Ct);break}var Er=Zt.slice(0,U),Nr=Zt.slice(U);for(Pt=U;Pt<286;++Pt)Er[Pt]=0;for(Pt=q;Pt<30;++Pt)Nr[Pt]=0;return ye=kt(Er,te,286),Xe=kt(Nr,Ne,30),O}function rt(S,O){if(S[0]==3&&!(S[1]&3))return[pm(O),2];for(var U=0,q=0,ae=DH(O||1<<18),fe=0,Ue=ae.length>>>0,Ze=0,lt=0;!(q&1);){if(q=ie(S,U),U+=3,q>>>1)q>>1==1?(Ze=9,lt=5):(U=mt(S,U),Ze=ye,lt=Xe);else{U&7&&(U+=8-(U&7));var Qe=S[U>>>3]|S[(U>>>3)+1]<<8;if(U+=32,Qe>0)for(!O&&Ue<fe+Qe&&(ae=xt(ae,fe+Qe),Ue=ae.length);Qe-- >0;)ae[fe++]=S[U>>>3],U+=8;continue}for(;;){!O&&Ue<fe+32767&&(ae=xt(ae,fe+32767),Ue=ae.length);var tt=we(S,U,Ze),ut=q>>>1==1?wt[tt]:te[tt];if(U+=ut&15,ut>>>=4,!(ut>>>8&255))ae[fe++]=ut;else{if(ut==256)break;ut-=257;var Pt=ut<8?0:ut-4>>2;Pt>5&&(Pt=0);var Ct=fe+J[ut];Pt>0&&(Ct+=we(S,U,Pt),U+=Pt),tt=we(S,U,lt),ut=q>>>1==1?Ve[tt]:Ne[tt],U+=ut&15,ut>>>=4;var It=ut<4?0:ut-2>>1,St=ee[ut];for(It>0&&(St+=we(S,U,It),U+=It),!O&&Ue<Ct&&(ae=xt(ae,Ct+100),Ue=ae.length);fe<Ct;)ae[fe]=ae[fe-St],++fe}}}return O?[ae,U+7>>>3]:[ae.slice(0,fe),U+7>>>3]}function ue(S,O){var U=S.slice(S.l||0),q=rt(U,O);return S.l+=q[1],q[0]}function _e(S,O){if(S)typeof console<"u"&&console.error(O);else throw new Error(O)}function We(S,O){var U=S;ul(U,0);var q=[],ae=[],fe={FileIndex:q,FullPaths:ae};_(fe,{root:O.root});for(var Ue=U.length-4;(U[Ue]!=80||U[Ue+1]!=75||U[Ue+2]!=5||U[Ue+3]!=6)&&Ue>=0;)--Ue;U.l=Ue+4,U.l+=4;var Ze=U.read_shift(2);U.l+=6;var lt=U.read_shift(4);for(U.l=lt,Ue=0;Ue<Ze;++Ue){U.l+=20;var Qe=U.read_shift(4),tt=U.read_shift(4),ut=U.read_shift(2),Pt=U.read_shift(2),Ct=U.read_shift(2);U.l+=8;var It=U.read_shift(4),St=l(U.slice(U.l+ut,U.l+ut+Pt));U.l+=ut+Pt+Ct;var Zt=U.l;U.l=It+4,ot(U,Qe,tt,fe,St),U.l=Zt}return fe}function ot(S,O,U,q,ae){S.l+=2;var fe=S.read_shift(2),Ue=S.read_shift(2),Ze=o(S);if(fe&8257)throw new Error("Unsupported ZIP encryption");for(var lt=S.read_shift(4),Qe=S.read_shift(4),tt=S.read_shift(4),ut=S.read_shift(2),Pt=S.read_shift(2),Ct="",It=0;It<ut;++It)Ct+=String.fromCharCode(S[S.l++]);if(Pt){var St=l(S.slice(S.l,S.l+Pt));(St[21589]||{}).mt&&(Ze=St[21589].mt),((ae||{})[21589]||{}).mt&&(Ze=ae[21589].mt)}S.l+=Pt;var Zt=S.slice(S.l,S.l+Qe);switch(Ue){case 8:Zt=K(S,tt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ue)}var Er=!1;fe&8&&(lt=S.read_shift(4),lt==134695760&&(lt=S.read_shift(4),Er=!0),Qe=S.read_shift(4),tt=S.read_shift(4)),Qe!=O&&_e(Er,"Bad compressed size: "+O+" != "+Qe),tt!=U&&_e(Er,"Bad uncompressed size: "+U+" != "+tt),Ae(q,Ct,Zt,{unsafe:!0,mt:Ze})}function Ce(S,O){var U=O||{},q=[],ae=[],fe=rr(1),Ue=U.compression?8:0,Ze=0,lt=0,Qe=0,tt=0,ut=0,Pt=S.FullPaths[0],Ct=Pt,It=S.FileIndex[0],St=[],Zt=0;for(lt=1;lt<S.FullPaths.length;++lt)if(Ct=S.FullPaths[lt].slice(Pt.length),It=S.FileIndex[lt],!(!It.size||!It.content||Ct=="Sh33tJ5")){var Er=tt,Nr=rr(Ct.length);for(Qe=0;Qe<Ct.length;++Qe)Nr.write_shift(1,Ct.charCodeAt(Qe)&127);Nr=Nr.slice(0,Nr.l),St[ut]=yke.buf(It.content,0);var Dr=It.content;Ue==8&&(Dr=z(Dr)),fe=rr(30),fe.write_shift(4,67324752),fe.write_shift(2,20),fe.write_shift(2,Ze),fe.write_shift(2,Ue),It.mt?s(fe,It.mt):fe.write_shift(4,0),fe.write_shift(-4,St[ut]),fe.write_shift(4,Dr.length),fe.write_shift(4,It.content.length),fe.write_shift(2,Nr.length),fe.write_shift(2,0),tt+=fe.length,q.push(fe),tt+=Nr.length,q.push(Nr),tt+=Dr.length,q.push(Dr),fe=rr(46),fe.write_shift(4,33639248),fe.write_shift(2,0),fe.write_shift(2,20),fe.write_shift(2,Ze),fe.write_shift(2,Ue),fe.write_shift(4,0),fe.write_shift(-4,St[ut]),fe.write_shift(4,Dr.length),fe.write_shift(4,It.content.length),fe.write_shift(2,Nr.length),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(4,0),fe.write_shift(4,Er),Zt+=fe.l,ae.push(fe),Zt+=Nr.length,ae.push(Nr),++ut}return fe=rr(22),fe.write_shift(4,101010256),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(2,ut),fe.write_shift(2,ut),fe.write_shift(4,Zt),fe.write_shift(4,tt),fe.write_shift(2,0),Mo([Mo(q),Mo(ae),fe])}var $e={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function gt(S,O){if(S.ctype)return S.ctype;var U=S.name||"",q=U.match(/\.([^\.]+)$/);return q&&$e[q[1]]||O&&(q=(U=O).match(/[\.\\]([^\.\\])+$/),q&&$e[q[1]])?$e[q[1]]:"application/octet-stream"}function Kt(S){for(var O=E2(S),U=[],q=0;q<O.length;q+=76)U.push(O.slice(q,q+76));return U.join(`\r
`)+`\r
`}function Ut(S){var O=S.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Qe){var tt=Qe.charCodeAt(0).toString(16).toUpperCase();return"="+(tt.length==1?"0"+tt:tt)});O=O.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),O.charAt(0)==`
`&&(O="=0D"+O.slice(1)),O=O.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var U=[],q=O.split(`\r
`),ae=0;ae<q.length;++ae){var fe=q[ae];if(fe.length==0){U.push("");continue}for(var Ue=0;Ue<fe.length;){var Ze=76,lt=fe.slice(Ue,Ue+Ze);lt.charAt(Ze-1)=="="?Ze--:lt.charAt(Ze-2)=="="?Ze-=2:lt.charAt(Ze-3)=="="&&(Ze-=3),lt=fe.slice(Ue,Ue+Ze),Ue+=Ze,Ue<fe.length&&(lt+="="),U.push(lt)}}return U.join(`\r
`)}function Jt(S){for(var O=[],U=0;U<S.length;++U){for(var q=S[U];U<=S.length&&q.charAt(q.length-1)=="=";)q=q.slice(0,q.length-1)+S[++U];O.push(q)}for(var ae=0;ae<O.length;++ae)O[ae]=O[ae].replace(/[=][0-9A-Fa-f]{2}/g,function(fe){return String.fromCharCode(parseInt(fe.slice(1),16))});return uu(O.join(`\r
`))}function it(S,O,U){for(var q="",ae="",fe="",Ue,Ze=0;Ze<10;++Ze){var lt=O[Ze];if(!lt||lt.match(/^\s*$/))break;var Qe=lt.match(/^(.*?):\s*([^\s].*)$/);if(Qe)switch(Qe[1].toLowerCase()){case"content-location":q=Qe[2].trim();break;case"content-type":fe=Qe[2].trim();break;case"content-transfer-encoding":ae=Qe[2].trim();break}}switch(++Ze,ae.toLowerCase()){case"base64":Ue=uu(Nu(O.slice(Ze).join("")));break;case"quoted-printable":Ue=Jt(O.slice(Ze));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ae)}var tt=Ae(S,q.slice(U.length),Ue,{unsafe:!0});fe&&(tt.ctype=fe)}function X(S,O){if(se(S.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var U=O&&O.root||"",q=(Gn&&Buffer.isBuffer(S)?S.toString("binary"):se(S)).split(`\r
`),ae=0,fe="";for(ae=0;ae<q.length;++ae)if(fe=q[ae],!!/^Content-Location:/i.test(fe)&&(fe=fe.slice(fe.indexOf("file")),U||(U=fe.slice(0,fe.lastIndexOf("/")+1)),fe.slice(0,U.length)!=U))for(;U.length>0&&(U=U.slice(0,U.length-1),U=U.slice(0,U.lastIndexOf("/")+1),fe.slice(0,U.length)!=U););var Ue=(q[1]||"").match(/boundary="(.*?)"/);if(!Ue)throw new Error("MAD cannot find boundary");var Ze="--"+(Ue[1]||""),lt=[],Qe=[],tt={FileIndex:lt,FullPaths:Qe};_(tt);var ut,Pt=0;for(ae=0;ae<q.length;++ae){var Ct=q[ae];Ct!==Ze&&Ct!==Ze+"--"||(Pt++&&it(tt,q.slice(ut,ae),U),ut=ae)}return tt}function oe(S,O){var U=O||{},q=U.boundary||"SheetJS";q="------="+q;for(var ae=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+q.slice(2)+'"',"","",""],fe=S.FullPaths[0],Ue=fe,Ze=S.FileIndex[0],lt=1;lt<S.FullPaths.length;++lt)if(Ue=S.FullPaths[lt].slice(fe.length),Ze=S.FileIndex[lt],!(!Ze.size||!Ze.content||Ue=="Sh33tJ5")){Ue=Ue.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Zt){return"_x"+Zt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Zt){return"_u"+Zt.charCodeAt(0).toString(16)+"_"});for(var Qe=Ze.content,tt=Gn&&Buffer.isBuffer(Qe)?Qe.toString("binary"):se(Qe),ut=0,Pt=Math.min(1024,tt.length),Ct=0,It=0;It<=Pt;++It)(Ct=tt.charCodeAt(It))>=32&&Ct<128&&++ut;var St=ut>=Pt*4/5;ae.push(q),ae.push("Content-Location: "+(U.root||"file:///C:/SheetJS/")+Ue),ae.push("Content-Transfer-Encoding: "+(St?"quoted-printable":"base64")),ae.push("Content-Type: "+gt(Ze,Ue)),ae.push(""),ae.push(St?Ut(tt):Kt(tt))}return ae.push(q+`--\r
`),ae.join(`\r
`)}function L(S){var O={};return _(O,S),O}function Ae(S,O,U,q){var ae=q&&q.unsafe;ae||_(S);var fe=!ae&&hn.find(S,O);if(!fe){var Ue=S.FullPaths[0];O.slice(0,Ue.length)==Ue?Ue=O:(Ue.slice(-1)!="/"&&(Ue+="/"),Ue=(Ue+O).replace("//","/")),fe={name:a(O),type:2},S.FileIndex.push(fe),S.FullPaths.push(Ue),ae||hn.utils.cfb_gc(S)}return fe.content=U,fe.size=U?U.length:0,q&&(q.CLSID&&(fe.clsid=q.CLSID),q.mt&&(fe.mt=q.mt),q.ct&&(fe.ct=q.ct)),fe}function Ee(S,O){_(S);var U=hn.find(S,O);if(U){for(var q=0;q<S.FileIndex.length;++q)if(S.FileIndex[q]==U)return S.FileIndex.splice(q,1),S.FullPaths.splice(q,1),!0}return!1}function Oe(S,O,U){_(S);var q=hn.find(S,O);if(q){for(var ae=0;ae<S.FileIndex.length;++ae)if(S.FileIndex[ae]==q)return S.FileIndex[ae].name=a(U),S.FullPaths[ae]=U,!0}return!1}function Be(S){E(S,!0)}return e.find=k,e.read=j,e.parse=d,e.write=je,e.writeFile=ge,e.utils={cfb_new:L,cfb_add:Ae,cfb_del:Ee,cfb_mov:Oe,cfb_gc:Be,ReadShift:Eb,CheckField:Hne,prep_blob:ul,bconcat:Mo,use_zlib:D,_deflateRaw:ce,_inflateRaw:ue,consts:he},e}();function bke(t){return typeof t=="string"?Zj(t):Array.isArray(t)?qTe(t):t}function kw(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Zj(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Lf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([bke(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=jm(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function wke(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function xi(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function $H(t,e){for(var r=[],n=xi(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function tP(t){for(var e=[],r=xi(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function rP(t){for(var e=[],r=xi(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function Nke(t){for(var e=[],r=xi(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var US=new Date(1899,11,30,0,0,0);function yo(t,e){var r=t.getTime(),n=US.getTime()+(t.getTimezoneOffset()-US.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var wne=new Date,Cke=US.getTime()+(wne.getTimezoneOffset()-US.getTimezoneOffset())*6e4,GH=wne.getTimezoneOffset();function nP(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Cke),e.getTimezoneOffset()!==GH&&e.setTime(e.getTime()+(e.getTimezoneOffset()-GH)*6e4),e}function _ke(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var KH=new Date("2017-02-19T19:06:09.000Z"),Nne=isNaN(KH.getFullYear())?new Date("2/19/17"):KH,Eke=Nne.getFullYear()==2017;function Ns(t,e){var r=new Date(t);if(Eke)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Nne.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function ig(t,e){if(Gn&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Lf(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Lf(une(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Lf(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Lf(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function Cs(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Cs(t[r]));return e}function Ai(t,e){for(var r="";r.length<e;)r+=t;return r}function tf(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var Ske=["january","february","march","april","may","june","july","august","september","october","november","december"];function Dv(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&Ske.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var Ike=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],l=1;l<s.length;++l)o.push(a),o.push(s[l]);return o}}();function Cne(t){return t?t.content&&t.type?ig(t.content,!0):t.data?Ky(t.data):t.asNodeBuffer&&Gn?Ky(t.asNodeBuffer().toString("binary")):t.asBinary?Ky(t.asBinary()):t._data&&t._data.getContent?Ky(ig(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function _ne(t){if(!t)return null;if(t.data)return FH(t.data);if(t.asNodeBuffer&&Gn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?FH(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function jke(t){return t&&t.name.slice(-4)===".bin"?_ne(t):Cne(t)}function Ju(t,e){for(var r=t.FullPaths||xi(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function K6(t,e){var r=Ju(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Vi(t,e,r){if(!r)return jke(K6(t,e));if(!e)return null;try{return Vi(t,e)}catch{return null}}function du(t,e,r){if(!r)return Cne(K6(t,e));if(!e)return null;try{return du(t,e)}catch{return null}}function Pke(t,e,r){return _ne(K6(t,e))}function qH(t){for(var e=t.FullPaths||xi(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Qn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Gn?n=NA(r):n=zTe(r),hn.utils.cfb_add(t,e,n)}hn.utils.cfb_add(t,e,r)}else t.file(e,r)}function q6(){return hn.utils.cfb_new()}function Ene(t,e){switch(e.type){case"base64":return hn.read(t,{type:"base64"});case"binary":return hn.read(t,{type:"binary"});case"buffer":case"array":return hn.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function zy(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Mi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Bke=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,zH=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Tke=/<[^>]*>/g,ql=Mi.match(zH)?zH:Tke,kke=/<\w*:/,Fke=/<(\/?)\w+:/;function _n(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var o=t.match(Bke),l=0,c="",u=0,d="",f="",A=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(A=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+A,f.length-A),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var h=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[h]&&d.slice(l-3,l)=="ext")continue;n[h]=c,n[h.toLowerCase()]=c}}return n}function rh(t){return t.replace(Fke,"<$1")}var Sne={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},z6=tP(Sne),fa=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(l,c){return Sne[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,o)+r(a.slice(o+3))}}(),W6=/[&<>'"]/g,Oke=/[\u0000-\u0008\u000b-\u001f]/g;function Ha(t){var e=t+"";return e.replace(W6,function(r){return z6[r]}).replace(Oke,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function WH(t){return Ha(t).replace(/ /g,"_x0020_")}var Ine=/[\u0000-\u001f]/g;function X6(t){var e=t+"";return e.replace(W6,function(r){return z6[r]}).replace(/\n/g,"<br/>").replace(Ine,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Dke(t){var e=t+"";return e.replace(W6,function(r){return z6[r]}).replace(Ine,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var XH=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Rke(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function vs(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function E5(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=t.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function YH(t){var e=pm(2*t.length),r,n,a=1,s=0,o=0,l;for(n=0;n<t.length;n+=a)a=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function JH(t){return NA(t,"binary").toString("utf8")}var KC="foo bar baz",Xa=Gn&&(JH(KC)==E5(KC)&&JH||YH(KC)==E5(KC)&&YH)||E5,Lf=Gn?function(t){return NA(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},I2=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),jne=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),Mke=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Lke=/<\/?(?:vt:)?variant>/g,Uke=/<(?:vt:)([^>]*)>([\s\S]*)</;function ZH(t,e){var r=_n(t),n=t.match(Mke(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var o=s.replace(Lke,"").match(Uke);o&&a.push({v:Xa(o[2]),t:o[1]})}),a}var Pne=/(^\s|\s$|\n)/;function fl(t,e){return"<"+t+(e.match(Pne)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function j2(t){return xi(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Br(t,e,r){return"<"+t+(r!=null?j2(r):"")+(e!=null?(e.match(Pne)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function qk(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function Qke(t,e){switch(typeof t){case"string":var r=Br("vt:lpwstr",Ha(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Br((t|0)==t?"vt:i4":"vt:r8",Ha(String(t)));case"boolean":return Br("vt:bool",t?"true":"false")}if(t instanceof Date)return Br("vt:filetime",qk(t));throw new Error("Unable to serialize "+t)}function Y6(t){if(Gn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Xa(jm(H6(t)));throw new Error("Bad input format: expected Buffer or string")}var P2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,po={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Pg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],lu={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Vke(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function Hke(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,o=n?-e:e;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var e$=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},t$=Gn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:NA(e)})):e$(t)}:e$,r$=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(Mh(t,a)));return n.join("").replace(hc,"")},J6=Gn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(hc,""):r$(t,e,r)}:r$,n$=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},Bne=Gn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):n$(t,e,r)}:n$,a$=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(jx(t,a)));return n.join("")},Fw=Gn?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):a$(e,r,n)}:a$,Tne=function(t,e){var r=cu(t,e);return r>0?Fw(t,e+4,e+4+r-1):""},kne=Tne,Fne=function(t,e){var r=cu(t,e);return r>0?Fw(t,e+4,e+4+r-1):""},One=Fne,Dne=function(t,e){var r=2*cu(t,e);return r>0?Fw(t,e+4,e+4+r-1):""},Rne=Dne,Mne=function(e,r){var n=cu(e,r);return n>0?J6(e,r+4,r+4+n):""},Lne=Mne,Une=function(t,e){var r=cu(t,e);return r>0?Fw(t,e+4,e+4+r):""},Qne=Une,Vne=function(t,e){return Vke(t,e)},QS=Vne,Z6=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Gn&&(kne=function(e,r){if(!Buffer.isBuffer(e))return Tne(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},One=function(e,r){if(!Buffer.isBuffer(e))return Fne(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Rne=function(e,r){if(!Buffer.isBuffer(e))return Dne(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},Lne=function(e,r){if(!Buffer.isBuffer(e))return Mne(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},Qne=function(e,r){if(!Buffer.isBuffer(e))return Une(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},QS=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):Vne(e,r)},Z6=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var jx=function(t,e){return t[e]},Mh=function(t,e){return t[e+1]*256+t[e]},$ke=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},cu=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},fp=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Gke=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Eb(t,e){var r="",n,a,s=[],o,l,c,u;switch(e){case"dbcs":if(u=this.l,Gn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(Mh(this,u)),u+=2;t*=2;break;case"utf8":r=Fw(this,this.l,this.l+t);break;case"utf16le":t*=2,r=J6(this,this.l,this.l+t);break;case"wstr":return Eb.call(this,t,"dbcs");case"lpstr-ansi":r=kne(this,this.l),t=4+cu(this,this.l);break;case"lpstr-cp":r=One(this,this.l),t=4+cu(this,this.l);break;case"lpwstr":r=Rne(this,this.l),t=4+2*cu(this,this.l);break;case"lpp4":t=4+cu(this,this.l),r=Lne(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+cu(this,this.l),r=Qne(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(o=jx(this,this.l+t++))!==0;)s.push(GC(o));r=s.join("");break;case"_wstr":for(t=0,r="";(o=Mh(this,this.l+t))!==0;)s.push(GC(o)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=jx(this,u),this.l=u+1,l=Eb.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(GC(Mh(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=jx(this,u),this.l=u+1,l=Eb.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(GC(jx(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=jx(this,this.l),this.l++,n;case 2:return n=(e==="i"?$ke:Mh)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?fp:Gke)(this,this.l),this.l+=4,n):(a=cu(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=QS(this,this.l):a=QS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=Bne(this,this.l,t);break}}return this.l+=t,r}var Kke=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},qke=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},zke=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function Wke(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)zke(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var o=e.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,Kke(this,e,this.l);break;case 8:if(n=8,r==="f"){Hke(this,e,this.l);break}case 16:break;case-4:n=4,qke(this,e,this.l);break}return this.l+=n,this}function Hne(t,e){var r=Bne(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function ul(t,e){t.l=e,t.read_shift=Eb,t.chk=Hne,t.write_shift=Wke}function Gl(t,e){t.l+=e}function rr(t){var e=pm(t);return ul(e,0),e}function CA(t,e,r){if(t){var n,a,s;ul(t,t.l||0);for(var o=t.length,l=0,c=0;t.l<o;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var u=D2[l]||D2[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;c=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=c,e(d,u,l))return}}}function Uc(){var t=[],e=Gn?256:2048,r=function(u){var d=rr(u);return ul(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},o=function(){return a(),Mo(t)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:o,_bufs:t}}function pr(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=D2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=t.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&Z6(r)&&t.push(r)}}function Sb(t,e,r){var n=Cs(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function s$(t,e,r){var n=Cs(t);return n.s=Sb(n.s,e.s,r),n.e=Sb(n.e,e.s,r),n}function Ib(t,e){if(t.cRel&&t.c<0)for(t=Cs(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Cs(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Nn(t);return!t.cRel&&t.cRel!=null&&(r=Jke(r)),!t.rRel&&t.rRel!=null&&(r=Xke(r)),r}function S5(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Ys(t.s.c)+":"+(t.e.cRel?"":"$")+Ys(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Di(t.s.r)+":"+(t.e.rRel?"":"$")+Di(t.e.r):Ib(t.s,e.biff)+":"+Ib(t.e,e.biff)}function eR(t){return parseInt(Yke(t),10)-1}function Di(t){return""+(t+1)}function Xke(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Yke(t){return t.replace(/\$(\d+)$/,"$1")}function tR(t){for(var e=Zke(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Ys(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Jke(t){return t.replace(/^([A-Z])/,"$$$1")}function Zke(t){return t.replace(/^\$([A-Z])/,"$1")}function eFe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Js(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function Nn(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Qc(t){var e=t.indexOf(":");return e==-1?{s:Js(t),e:Js(t)}:{s:Js(t.slice(0,e)),e:Js(t.slice(e+1))}}function Rn(t,e){return typeof e>"u"||typeof e=="number"?Rn(t.s,t.e):(typeof t!="string"&&(t=Nn(t)),typeof e!="string"&&(e=Nn(e)),t==e?t:t+":"+e)}function ha(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function i$(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=gd(t.z,r?yo(e):e)}catch{}try{return t.w=gd((t.XF||{}).numFmtId||(r?14:0),r?yo(e):e)}catch{return""+e}}function lA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?_A[t.v]||t.v:e==null?i$(t,t.v):i$(t,e))}function Pm(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function $ne(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Js(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=ha(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var A=0;A!=e[f].length;++A)if(!(typeof e[f][A]>"u")){var h={v:e[f][A]},m=o+f,p=l+A;if(u.s.r>m&&(u.s.r=m),u.s.c>p&&(u.s.c=p),u.e.r<m&&(u.e.r=m),u.e.c<p&&(u.e.c=p),e[f][A]&&typeof e[f][A]=="object"&&!Array.isArray(e[f][A])&&!(e[f][A]instanceof Date))h=e[f][A];else if(Array.isArray(h.v)&&(h.f=e[f][A][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||wn[14],n.cellDates?(h.t="d",h.w=gd(h.z,yo(h.v))):(h.t="n",h.v=yo(h.v),h.w=gd(h.z,h.v))):h.t="s";if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(h.z=s[m][p].z),s[m][p]=h;else{var g=Nn({c:p,r:m});s[g]&&s[g].z&&(h.z=s[g].z),s[g]=h}}}return u.s.c<1e7&&(s["!ref"]=Rn(u)),s}function g1(t,e){return $ne(null,t,e)}function tFe(t){return t.read_shift(4,"i")}function rf(t,e){return e||(e=rr(4)),e.write_shift(4,t),e}function Vl(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Uo(t,e){var r=!1;return e==null&&(r=!0,e=rr(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function rFe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function nFe(t,e){return e||(e=rr(4)),e.write_shift(2,0),e.write_shift(2,0),e}function rR(t,e){var r=t.l,n=t.read_shift(1),a=Vl(t),s=[],o={t:a,h:a};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push(rFe(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=r+e,o}function aFe(t,e){var r=!1;return e==null&&(r=!0,e=rr(15+4*t.t.length)),e.write_shift(1,0),Uo(t.t,e),r?e.slice(0,e.l):e}var sFe=rR;function iFe(t,e){var r=!1;return e==null&&(r=!0,e=rr(23+4*t.t.length)),e.write_shift(1,1),Uo(t.t,e),e.write_shift(4,1),nFe({},e),r?e.slice(0,e.l):e}function Nd(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Bg(t,e){return e==null&&(e=rr(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Tg(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function kg(t,e){return e==null&&(e=rr(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var oFe=Vl,Gne=Uo;function nR(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function VS(t,e){var r=!1;return e==null&&(r=!0,e=rr(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var lFe=Vl,zk=nR,aR=VS;function sR(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?QS([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):fp(e,0)>>2;return r?a/100:a}function Kne(t,e){e==null&&(e=rr(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function qne(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function cFe(t,e){return e||(e=rr(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Fg=qne,x1=cFe;function Ul(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function og(t,e){return(e||rr(8)).write_shift(8,t,"f")}function uFe(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=Fp[a];u&&(e.rgb=T2(u));break;case 2:e.rgb=T2([o,l,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function HS(t,e){if(e||(e=rr(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function dFe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function fFe(t,e){e||(e=rr(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function zne(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function hFe(t){return zne(t,1)}function AFe(t){return zne(t,2)}var iR=2,jc=3,qC=11,o$=12,$S=19,zC=64,mFe=65,pFe=71,gFe=4108,xFe=4126,Fo=80,Wne=81,vFe=[Fo,Wne],Wk={1:{n:"CodePage",t:iR},2:{n:"Category",t:Fo},3:{n:"PresentationFormat",t:Fo},4:{n:"ByteCount",t:jc},5:{n:"LineCount",t:jc},6:{n:"ParagraphCount",t:jc},7:{n:"SlideCount",t:jc},8:{n:"NoteCount",t:jc},9:{n:"HiddenCount",t:jc},10:{n:"MultimediaClipCount",t:jc},11:{n:"ScaleCrop",t:qC},12:{n:"HeadingPairs",t:gFe},13:{n:"TitlesOfParts",t:xFe},14:{n:"Manager",t:Fo},15:{n:"Company",t:Fo},16:{n:"LinksUpToDate",t:qC},17:{n:"CharacterCount",t:jc},19:{n:"SharedDoc",t:qC},22:{n:"HyperlinksChanged",t:qC},23:{n:"AppVersion",t:jc,p:"version"},24:{n:"DigSig",t:mFe},26:{n:"ContentType",t:Fo},27:{n:"ContentStatus",t:Fo},28:{n:"Language",t:Fo},29:{n:"Version",t:Fo},255:{},2147483648:{n:"Locale",t:$S},2147483651:{n:"Behavior",t:$S},1919054434:{}},Xk={1:{n:"CodePage",t:iR},2:{n:"Title",t:Fo},3:{n:"Subject",t:Fo},4:{n:"Author",t:Fo},5:{n:"Keywords",t:Fo},6:{n:"Comments",t:Fo},7:{n:"Template",t:Fo},8:{n:"LastAuthor",t:Fo},9:{n:"RevNumber",t:Fo},10:{n:"EditTime",t:zC},11:{n:"LastPrinted",t:zC},12:{n:"CreatedDate",t:zC},13:{n:"ModifiedDate",t:zC},14:{n:"PageCount",t:jc},15:{n:"WordCount",t:jc},16:{n:"CharCount",t:jc},17:{n:"Thumbnail",t:pFe},18:{n:"Application",t:Fo},19:{n:"DocSecurity",t:jc},255:{},2147483648:{n:"Locale",t:$S},2147483651:{n:"Behavior",t:$S},1919054434:{}},l$={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},yFe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function bFe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var wFe=bFe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Fp=Cs(wFe),_A={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Xne={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Yk={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},WC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function oR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function NFe(t){var e=oR();if(!t||!t.match)return e;var r={};if((t.match(ql)||[]).forEach(function(n){var a=_n(n);switch(a[0].replace(kke,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[Yk[a.ContentType]]!==void 0&&e[Yk[a.ContentType]].push(a.PartName);break}}),e.xmlns!==po.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function Yne(t,e){var r=Nke(Yk),n=[],a;n[n.length]=Mi,n[n.length]=Br("Types",null,{xmlns:po.CT,"xmlns:xsd":po.xsd,"xmlns:xsi":po.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Br("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=Br("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:WC[c][e.bookType]||WC[c].xlsx}))},o=function(c){(t[c]||[]).forEach(function(u){n[n.length]=Br("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:WC[c][e.bookType]||WC[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=Br("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Xn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function B2(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function jb(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(ql)||[]).forEach(function(a){var s=_n(a);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:zy(s.Target,e);r[l]=o,n[s.Id]=o}}),r["!id"]=n,r}function fv(t){var e=[Mi,Br("Relationships",null,{xmlns:po.RELS})];return xi(t["!id"]).forEach(function(r){e[e.length]=Br("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function La(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Xn.HLINK,Xn.XPATH,Xn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var CFe="application/vnd.oasis.opendocument.spreadsheet";function _Fe(t,e){for(var r=Y6(t),n,a;n=P2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=_n(n[0],!1),a.path=="/"&&a.type!==CFe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function EFe(t){var e=[Mi];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function c$(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function SFe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function IFe(t){var e=[Mi];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(c$(t[r][0],t[r][1])),e.push(SFe("",t[r][0]));return e.push(c$("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Jne(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+DS.version+"</meta:generator></office:meta></office:document-meta>"}var hd=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],jFe=function(){for(var t=new Array(hd.length),e=0;e<hd.length;++e){var r=hd[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function Zne(t){var e={};t=Xa(t);for(var r=0;r<hd.length;++r){var n=hd[r],a=t.match(jFe[r]);a!=null&&a.length>0&&(e[n[1]]=fa(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=Ns(e[n[1]]))}return e}function I5(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=Ha(e),n[n.length]=r?Br(t,e,r):fl(t,e))}function eae(t,e){var r=e||{},n=[Mi,Br("cp:coreProperties",null,{"xmlns:cp":po.CORE_PROPS,"xmlns:dc":po.dc,"xmlns:dcterms":po.dcterms,"xmlns:dcmitype":po.dcmitype,"xmlns:xsi":po.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&I5("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:qk(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&I5("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:qk(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=hd.length;++s){var o=hd[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:t?t[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&I5(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Op=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],tae=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function rae(t,e,r,n){var a=[];if(typeof t=="string")a=ZH(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var o=typeof e=="string"?ZH(e,n).map(function(d){return d.v}):e,l=0,c=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function PFe(t,e,r){var n={};return e||(e={}),t=Xa(t),Op.forEach(function(a){var s=(t.match(I2(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=fa(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var o=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&rae(n.HeadingPairs,n.TitlesOfParts,e,r),e}function nae(t){var e=[],r=Br;return t||(t={}),t.Application="SheetJS",e[e.length]=Mi,e[e.length]=Br("Properties",null,{xmlns:po.EXT_PROPS,"xmlns:vt":po.vt}),Op.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Ha(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Ha(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var BFe=/<[^>]+>[^<]*/g;function TFe(t,e){var r={},n="",a=t.match(BFe);if(a)for(var s=0;s!=a.length;++s){var o=a[s],l=_n(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=fa(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=fa(d);break;case"bool":r[n]=vs(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ns(d);break;case"cy":case"error":r[n]=fa(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(e.WTF)throw new Error(o)}}}return r}function aae(t){var e=[Mi,Br("Properties",null,{xmlns:po.CUST_PROPS,"xmlns:vt":po.vt})];if(!t)return e.join("");var r=1;return xi(t).forEach(function(a){++r,e[e.length]=Br("property",Qke(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Ha(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Jk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},j5;function kFe(t,e,r){j5||(j5=tP(Jk)),e=j5[e]||e,t[e]=r}function FFe(t,e){var r=[];return xi(Jk).map(function(n){for(var a=0;a<hd.length;++a)if(hd[a][1]==n)return hd[a];for(a=0;a<Op.length;++a)if(Op[a][1]==n)return Op[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(fl(Jk[n[1]]||n[1],a))}}),Br("DocumentProperties",r.join(""),{xmlns:lu.o})}function OFe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&xi(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<hd.length;++o)if(s==hd[o][1])return;for(o=0;o<Op.length;++o)if(s==Op[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(Br(WH(s),l,{"dt:dt":c}))}}),e&&xi(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(Br(WH(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+lu.o+'">'+a.join("")+"</"+n+">"}function lR(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function DFe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=rr(8);return o.write_shift(4,n),o.write_shift(4,a),o}function sae(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function iae(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function oae(t,e,r){return e===31?iae(t):sae(t,e,r)}function Zk(t,e,r){return oae(t,e,r===!1?0:4)}function RFe(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return oae(t,e,0)}function MFe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(hc,""),t.l-a&2&&(t.l+=2)}return r}function LFe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(hc,"");return r}function UFe(t){var e=t.l,r=GS(t,Wne);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=GS(t,jc);return[r,n]}function QFe(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(UFe(t));return r}function u$(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),o=t.read_shift(4);n[s]=t.read_shift(o,e===1200?"utf16le":"utf8").replace(hc,"").replace(qy,"!"),e===1200&&o%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function lae(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function VFe(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function GS(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==o$&&n!==e&&vFe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===o$?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return sae(t,n,4).replace(hc,"");case 31:return iae(t);case 64:return lR(t);case 65:return lae(t);case 71:return VFe(t);case 80:return Zk(t,n,!s.raw).replace(hc,"");case 81:return RFe(t,n).replace(hc,"");case 4108:return QFe(t);case 4126:case 4127:return n==4127?MFe(t):LFe(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function d$(t,e){var r=rr(4),n=rr(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=rr(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=DFe(e);break;case 31:case 80:for(n=rr(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Mo([r,n])}function f$(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=a;++o){var d=t.read_shift(4),f=t.read_shift(4);s[o]=[d,f+r]}s.sort(function(y,b){return y[1]-b[1]});var A={};for(o=0;o!=a;++o){if(t.l!==s[o][1]){var h=!0;if(o>0&&e)switch(e[s[o-1][0]].t){case 2:t.l+2===s[o][1]&&(t.l+=2,h=!1);break;case 80:t.l<=s[o][1]&&(t.l=s[o][1],h=!1);break;case 4108:t.l<=s[o][1]&&(t.l=s[o][1],h=!1);break}if((!e||o==0)&&t.l<=s[o][1]&&(h=!1,t.l=s[o][1]),h)throw new Error("Read Error: Expected address "+s[o][1]+" at "+t.l+" :"+o)}if(e){var m=e[s[o][0]];if(A[m.n]=GS(t,m.t,{raw:!0}),m.p==="version"&&(A[m.n]=String(A[m.n]>>16)+"."+("0000"+String(A[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(A[m.n]){case 0:A[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:zd(l=A[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+A[m.n])}}else if(s[o][0]===1){if(l=A.CodePage=GS(t,iR),zd(l),c!==-1){var p=t.l;t.l=s[c][1],u=u$(t,l),t.l=p}}else if(s[o][0]===0){if(l===0){c=o,t.l=s[o+1][1];continue}u=u$(t,l)}else{var g=u[s[o][0]],v;switch(t[t.l]){case 65:t.l+=4,v=lae(t);break;case 30:t.l+=4,v=Zk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,v=Zk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,v=t.read_shift(4,"i");break;case 19:t.l+=4,v=t.read_shift(4);break;case 5:t.l+=4,v=t.read_shift(8,"f");break;case 11:t.l+=4,v=_i(t,4);break;case 64:t.l+=4,v=Ns(lR(t));break;default:throw new Error("unparsed value: "+t[t.l])}A[g]=v}}return t.l=r+n,A}var cae=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function HFe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function h$(t,e,r){var n=rr(8),a=[],s=[],o=8,l=0,c=rr(8),u=rr(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!e){u=rr(8),u.write_shift(4,0),a.unshift(u);var d=[rr(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var f=t[l][0];for(c=rr(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Mo(d),s.unshift(c),o+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(cae.indexOf(t[l][0])>-1||tae.indexOf(t[l][0])>-1)&&t[l][1]!=null){var A=t[l][1],h=0;if(e){h=+e[t[l][0]];var m=r[h];if(m.p=="version"&&typeof A=="string"){var p=A.split(".");A=(+p[0]<<16)+(+p[1]||0)}c=d$(m.t,A)}else{var g=HFe(A);g==-1&&(g=31,A=String(A)),c=d$(g,A)}s.push(c),u=rr(8),u.write_shift(4,e?h:2+l),a.push(u),o+=8+c.length}var v=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,v),v+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),Mo([n].concat(a).concat(s))}function A$(t,e,r){var n=t.content;if(!n)return{};ul(n,0);var a,s,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==hn.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),c=n.read_shift(4));var f=f$(n,e),A={SystemIdentifier:u};for(var h in f)A[h]=f[h];if(A.FMTID=s,a===1)return A;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=f$(n,null)}catch{}for(h in m)A[h]=m[h];return A.FMTID=[s,o],A}function m$(t,e,r,n,a,s){var o=rr(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,hn.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,a?68:48);var c=h$(t,r,n);if(l.push(c),a){var u=h$(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Mo(l)}function o0(t,e){return t.read_shift(e),null}function $Fe(t,e){e||(e=rr(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function GFe(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function _i(t,e){return t.read_shift(e)===1}function oc(t,e){return e||(e=rr(2)),e.write_shift(2,+!!t),e}function Hi(t){return t.read_shift(2,"u")}function Zu(t,e){return e||(e=rr(2)),e.write_shift(2,t),e}function uae(t,e){return GFe(t,e,Hi)}function KFe(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function dae(t,e,r){return r||(r=rr(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Ow(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?t.read_shift(n,a):"";return o}function qFe(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),o=0,l,c={};a&&(o=t.read_shift(2)),n&&(l=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*o),n&&(t.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function zFe(t){var e=t.t||"",r=rr(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=rr(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return Mo(a)}function lg(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Dw(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):lg(t,n,r)}function Og(t,e,r){if(r.biff>5)return Dw(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function fae(t,e,r){return r||(r=rr(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function WFe(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function XFe(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(hc,"");return n&&(t.l+=24),a}function YFe(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=t.read_shift(s>>1,"utf16le").replace(hc,"");return r+o}function JFe(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return XFe(t);case"0303000000000000c000000000000046":return YFe(t);default:throw new Error("Unsupported Moniker "+r)}}function XC(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(hc,""):"";return r}function p$(t,e){e||(e=rr(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function ZFe(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,o,l,c,u="",d,f;a&16&&(s=XC(t,r-t.l)),a&128&&(o=XC(t,r-t.l)),(a&257)===257&&(l=XC(t,r-t.l)),(a&257)===1&&(c=JFe(t,r-t.l)),a&8&&(u=XC(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(f=lR(t)),t.l=r;var A=o||l||c||"";A&&u&&(A+="#"+u),A||(A="#"+u),a&2&&A.charAt(0)=="/"&&A.charAt(1)!="/"&&(A="file://"+A);var h={Target:A};return d&&(h.guid=d),f&&(h.time=f),s&&(h.Tooltip=s),h}function eOe(t){var e=rr(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)e.write_shift(4,o[r]);if(s==28)n=n.slice(1),p$(n,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&p$(a>-1?n.slice(a+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function hae(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function Aae(t,e){var r=hae(t);return r[3]=0,r}function nh(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function cg(t,e,r,n){return n||(n=rr(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function tOe(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function rOe(t,e,r){return e===0?"":Og(t,e,r)}function nOe(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),o=t.read_shift(n,"i");return[a,s,o]}function mae(t){var e=t.read_shift(2),r=sR(t);return[e,r]}function aOe(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=Ow(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function aP(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function pae(t,e){return e||(e=rr(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function gae(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var sOe=gae;function xae(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function iOe(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function oOe(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function jl(t){t.l+=2,t.l+=t.read_shift(2)}var lOe={0:jl,4:jl,5:jl,6:jl,7:oOe,8:jl,9:jl,10:jl,11:jl,12:jl,13:iOe,14:jl,15:jl,16:jl,17:jl,18:jl,19:jl,20:jl,21:xae};function cOe(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(lOe[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function YC(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function cR(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=rr(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function uOe(t,e){return e===0||t.read_shift(2),1200}function dOe(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=Og(t,0,r);return t.read_shift(e+n-t.l),a}function fOe(t,e){var r=!e||e.biff==8,n=rr(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function hOe(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function AOe(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=Ow(t,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:s,name:o}}function mOe(t,e){var r=!e||e.biff>=8?2:1,n=rr(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function pOe(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],o=0;o!=a&&t.l<r;++o)s.push(qFe(t));return s.Count=n,s.Unique=a,s}function gOe(t,e){var r=rr(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=zFe(t[a]);var s=Mo([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function xOe(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function vOe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function yOe(t){var e=tOe(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function bOe(t){return t.read_shift(2),t.read_shift(4)}function g$(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function wOe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function NOe(){var t=rr(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function COe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function _Oe(t){var e=rr(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function EOe(){}function SOe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Ow(t,0,r),n}function IOe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=rr(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function jOe(t){var e=nh(t);return e.isst=t.read_shift(4),e}function POe(t,e,r,n){var a=rr(10);return cg(t,e,n,a),a.write_shift(4,r),a}function BOe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=nh(t);r.biff==2&&t.l++;var s=Dw(t,n-t.l,r);return a.val=s,a}function TOe(t,e,r,n,a){var s=!a||a.biff==8,o=rr(8+ +s+(1+s)*r.length);return cg(t,e,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function kOe(t,e,r){var n=t.read_shift(2),a=Og(t,0,r);return[n,a]}function FOe(t,e,r,n){var a=r&&r.biff==5;n||(n=rr(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var OOe=Og;function x$(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),o=t.read_shift(a),l=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:l},e:{r:o,c}}}function DOe(t,e){var r=e.biff==8||!e.biff?4:2,n=rr(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function ROe(t){var e=t.read_shift(2),r=t.read_shift(2),n=mae(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function MOe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(mae(t));if(t.l!==r)throw new Error("MulRK read error");var o=t.read_shift(2);if(s.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:s}}function LOe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var o=t.read_shift(2);if(s.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:s}}function UOe(t,e,r,n){var a={},s=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(4),c=t.read_shift(2);return a.patternType=yFe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function QOe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=UOe(t,e,n.fStyle,r),n}function v$(t,e,r,n){var a=r&&r.biff==5;n||(n=rr(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function VOe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function HOe(t){var e=rr(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function y$(t,e,r){var n=nh(t);(r.biff==2||e==9)&&++t.l;var a=KFe(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function $Oe(t,e,r,n,a,s){var o=rr(8);return cg(t,e,n,o),dae(r,s,o),o}function GOe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=nh(t),a=Ul(t);return n.val=a,n}function KOe(t,e,r,n){var a=rr(14);return cg(t,e,n,a),og(r,a),a}var b$=rOe;function qOe(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=lg(t,s),l=[];n>t.l;)l.push(Dw(t));return[s,a,o,l]}function w$(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=aOe(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var zOe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function N$(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=lg(t,o,r);a&32&&(u=zOe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var f=n==t.l||l===0||!(d>0)?[]:c8e(t,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function vae(t,e,r){if(r.biff<8)return WOe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(nOe(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function WOe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Ow(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function XOe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=lg(t,n,r),o=lg(t,a,r);return[s,o]}function YOe(t,e,r){var n=gae(t);t.l++;var a=t.read_shift(1);return e-=8,[u8e(t,e,r),a,n]}function C$(t,e,r){var n=sOe(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,o8e(t,e,r)]}function JOe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function ZOe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),l=Og(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},l,o,s]}}function eDe(t,e,r){return ZOe(t,e,r)}function tDe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(aP(t));return r}function rDe(t){var e=rr(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)pae(t[r],e);return e}function nDe(t,e,r){if(r&&r.biff<8)return sDe(t,e,r);var n=xae(t),a=cOe(t,e-22,n[1]);return{cmo:n,ft:a}}var aDe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function sDe(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var o=[];return o.push((aDe[n]||Gl)(t,e,r)),{cmo:[a,n,s],ft:o}}function iDe(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:o=WFe(t,6,r);var l=t.read_shift(2);t.read_shift(2),Hi(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],f=lg(t,t.lens[u+1]-t.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function oDe(t,e){var r=aP(t);t.l+=16;var n=ZFe(t,e-24);return[r,n]}function lDe(t){var e=rr(24),r=Js(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return Mo([e,eOe(t[1])])}function cDe(t,e){t.read_shift(2);var r=aP(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(hc,""),[r,n]}function uDe(t){var e=t[1].Tooltip,r=rr(10+2*(e.length+1));r.write_shift(2,2048);var n=Js(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function dDe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=l$[r]||r,r=t.read_shift(2),e[1]=l$[r]||r,e}function fDe(t){return t||(t=rr(4)),t.write_shift(2,1),t.write_shift(2,1),t}function hDe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(Aae(t));return r}function ADe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(Aae(t));return r}function mDe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function yae(t,e,r){if(!r.cellStyles)return Gl(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function pDe(t,e){var r=rr(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function gDe(t,e){var r={};return e<32||(t.l+=16,r.header=Ul(t),r.footer=Ul(t),t.l+=2),r}function xDe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function vDe(t){for(var e=rr(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var yDe=nh,bDe=uae,wDe=Dw;function NDe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function CDe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=nh(t);++t.l;var a=Og(t,e-7,r);return n.t="str",n.val=a,n}function _De(t){var e=nh(t);++t.l;var r=Ul(t);return e.t="n",e.val=r,e}function EDe(t,e,r){var n=rr(15);return Uw(n,t,e),n.write_shift(8,r,"f"),n}function SDe(t){var e=nh(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function IDe(t,e,r){var n=rr(9);return Uw(n,t,e),n.write_shift(2,r),n}function jDe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function PDe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function BDe(t,e,r){var n=t.l+e,a=nh(t),s=t.read_shift(2),o=lg(t,s,r);return t.l=n,a.t="str",a.val=o,a}var TDe=[2,3,48,49,131,139,140,245],eF=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=tP({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=pm(1);switch(c.type){case"base64":d=uu(Nu(l));break;case"binary":d=uu(l);break;case"buffer":case"array":d=l;break}ul(d,0);var f=d.read_shift(1),A=!!(f&136),h=!1,m=!1;switch(f){case 2:break;case 3:break;case 48:h=!0,A=!0;break;case 49:h=!0,A=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,g=521;f==2&&(p=d.read_shift(2)),d.l+=3,f!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(g=d.read_shift(2));var v=d.read_shift(2),y=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=t[d[d.l]]),d.l+=1,d.l+=2),m&&(d.l+=36);for(var b=[],w={},P=Math.min(d.length,f==2?521:g-10-(h?264:0)),j=m?32:11;d.l<P&&d[d.l]!=13;)switch(w={},w.name=_2.utils.decode(y,d.slice(d.l,d.l+j)).replace(/[\u0000\r\n].*$/g,""),d.l+=j,w.type=String.fromCharCode(d.read_shift(1)),f!=2&&!m&&(w.offset=d.read_shift(4)),w.len=d.read_shift(1),f==2&&(w.offset=d.read_shift(2)),w.dec=d.read_shift(1),w.name.length&&b.push(w),f!=2&&(d.l+=m?13:14),w.type){case"B":(!h||w.len!=8)&&c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var _=0,I=0;for(u[0]=[],I=0;I!=b.length;++I)u[0][I]=b[I].name;for(;p-- >0;){if(d[d.l]===42){d.l+=v;continue}for(++d.l,u[++_]=[],I=0,I=0;I!=b.length;++I){var E=d.slice(d.l,d.l+b[I].len);d.l+=b[I].len,ul(E,0);var F=_2.utils.decode(y,E);switch(b[I].type){case"C":F.trim().length&&(u[_][I]=F.replace(/\s+$/,""));break;case"D":F.length===8?u[_][I]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):u[_][I]=F;break;case"F":u[_][I]=parseFloat(F.trim());break;case"+":case"I":u[_][I]=m?E.read_shift(-4,"i")^2147483648:E.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":u[_][I]=!0;break;case"N":case"F":u[_][I]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!A)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[_][I]="##MEMO##"+(m?parseInt(F.trim(),10):E.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(u[_][I]=+F||0);break;case"@":u[_][I]=new Date(E.read_shift(-8,"f")-621356832e5);break;case"T":u[_][I]=new Date((E.read_shift(4)-2440588)*864e5+E.read_shift(4));break;case"Y":u[_][I]=E.read_shift(4,"i")/1e4+E.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][I]=-E.read_shift(-8,"f");break;case"B":if(h&&b[I].len==8){u[_][I]=E.read_shift(8,"f");break}case"G":case"P":E.l+=b[I].len;break;case"0":if(b[I].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[I].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=g1(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return Pm(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&zd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Uc(),f=zS(l,{header:1,raw:!0,cellDates:!0}),A=f[0],h=f.slice(1),m=l["!cols"]||[],p=0,g=0,v=0,y=1;for(p=0;p<A.length;++p){if(((m[p]||{}).DBF||{}).name){A[p]=m[p].DBF.name,++v;continue}if(A[p]!=null){if(++v,typeof A[p]=="number"&&(A[p]=A[p].toString(10)),typeof A[p]!="string")throw new Error("DBF Invalid column name "+A[p]+" |"+typeof A[p]+"|");if(A.indexOf(A[p])!==p){for(g=0;g<1024;++g)if(A.indexOf(A[p]+"_"+g)==-1){A[p]+="_"+g;break}}}}var b=ha(l["!ref"]),w=[],P=[],j=[];for(p=0;p<=b.e.c-b.s.c;++p){var _="",I="",E=0,F=[];for(g=0;g<h.length;++g)h[g][p]!=null&&F.push(h[g][p]);if(F.length==0||A[p]==null){w[p]="?";continue}for(g=0;g<F.length;++g){switch(typeof F[g]){case"number":I="B";break;case"string":I="C";break;case"boolean":I="L";break;case"object":I=F[g]instanceof Date?"D":"C";break;default:I="C"}E=Math.max(E,String(F[g]).length),_=_&&_!=I?"C":I}E>250&&(E=250),I=((m[p]||{}).DBF||{}).type,I=="C"&&m[p].DBF.len>E&&(E=m[p].DBF.len),_=="B"&&I=="N"&&(_="N",j[p]=m[p].DBF.dec,E=m[p].DBF.len),P[p]=_=="C"||I=="N"?E:s[_]||0,y+=P[p],w[p]=_}var k=d.next(32);for(k.write_shift(4,318902576),k.write_shift(4,h.length),k.write_shift(2,296+32*v),k.write_shift(2,y),p=0;p<4;++p)k.write_shift(4,0);for(k.write_shift(4,0|(+e[cne]||3)<<8),p=0,g=0;p<A.length;++p)if(A[p]!=null){var B=d.next(32),R=(A[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);B.write_shift(1,R,"sbcs"),B.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),B.write_shift(4,g),B.write_shift(1,P[p]||s[w[p]]||0),B.write_shift(1,j[p]||0),B.write_shift(1,2),B.write_shift(4,0),B.write_shift(1,0),B.write_shift(4,0),B.write_shift(4,0),g+=P[p]||s[w[p]]||0}var Y=d.next(264);for(Y.write_shift(4,13),p=0;p<65;++p)Y.write_shift(4,0);for(p=0;p<h.length;++p){var me=d.next(y);for(me.write_shift(1,0),g=0;g<A.length;++g)if(A[g]!=null)switch(w[g]){case"L":me.write_shift(1,h[p][g]==null?63:h[p][g]?84:70);break;case"B":me.write_shift(8,h[p][g]||0,"f");break;case"N":var pe="0";for(typeof h[p][g]=="number"&&(pe=h[p][g].toFixed(j[g]||0)),v=0;v<P[g]-pe.length;++v)me.write_shift(1,32);me.write_shift(1,pe,"sbcs");break;case"D":h[p][g]?(me.write_shift(4,("0000"+h[p][g].getFullYear()).slice(-4),"sbcs"),me.write_shift(2,("00"+(h[p][g].getMonth()+1)).slice(-2),"sbcs"),me.write_shift(2,("00"+h[p][g].getDate()).slice(-2),"sbcs")):me.write_shift(8,"00000000","sbcs");break;case"C":var he=String(h[p][g]!=null?h[p][g]:"").slice(0,P[g]);for(me.write_shift(1,he,"sbcs"),v=0;v<P[g]-he.length;++v)me.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),bae=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+xi(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(A,h){var m=t[h];return typeof m=="number"?OH(m):m},n=function(A,h,m){var p=h.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?A:OH(p)};t["|"]=254;function a(A,h){switch(h.type){case"base64":return s(Nu(A),h);case"binary":return s(A,h);case"buffer":return s(Gn&&Buffer.isBuffer(A)?A.toString("binary"):jm(A),h);case"array":return s(ig(A),h)}throw new Error("Unrecognized type "+h.type)}function s(A,h){var m=A.split(/[\n\r]+/),p=-1,g=-1,v=0,y=0,b=[],w=[],P=null,j={},_=[],I=[],E=[],F=0,k;for(+h.codepage>=0&&zd(+h.codepage);v!==m.length;++v){F=0;var B=m[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),R=B.replace(/;;/g,"\0").split(";").map(function(Q){return Q.replace(/\u0000/g,";")}),Y=R[0],me;if(B.length>0)switch(Y){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":R[1].charAt(0)=="P"&&w.push(B.slice(3).replace(/;;/g,";"));break;case"C":var pe=!1,he=!1,ge=!1,se=!1,je=-1,Te=-1;for(y=1;y<R.length;++y)switch(R[y].charAt(0)){case"A":break;case"X":g=parseInt(R[y].slice(1))-1,he=!0;break;case"Y":for(p=parseInt(R[y].slice(1))-1,he||(g=0),k=b.length;k<=p;++k)b[k]=[];break;case"K":me=R[y].slice(1),me.charAt(0)==='"'?me=me.slice(1,me.length-1):me==="TRUE"?me=!0:me==="FALSE"?me=!1:isNaN(tf(me))?isNaN(Dv(me).getDate())||(me=Ns(me)):(me=tf(me),P!==null&&m1(P)&&(me=nP(me))),pe=!0;break;case"E":se=!0;var D=hv(R[y].slice(1),{r:p,c:g});b[p][g]=[b[p][g],D];break;case"S":ge=!0,b[p][g]=[b[p][g],"S5S"];break;case"G":break;case"R":je=parseInt(R[y].slice(1))-1;break;case"C":Te=parseInt(R[y].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+B)}if(pe&&(b[p][g]&&b[p][g].length==2?b[p][g][0]=me:b[p][g]=me,P=null),ge){if(se)throw new Error("SYLK shared formula cannot have own formula");var K=je>-1&&b[je][Te];if(!K||!K[1])throw new Error("SYLK shared formula cannot find base");b[p][g][1]=Lae(K[1],{r:p-je,c:g-Te})}break;case"F":var z=0;for(y=1;y<R.length;++y)switch(R[y].charAt(0)){case"X":g=parseInt(R[y].slice(1))-1,++z;break;case"Y":for(p=parseInt(R[y].slice(1))-1,k=b.length;k<=p;++k)b[k]=[];break;case"M":F=parseInt(R[y].slice(1))/20;break;case"F":break;case"G":break;case"P":P=w[parseInt(R[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(E=R[y].slice(1).split(" "),k=parseInt(E[0],10);k<=parseInt(E[1],10);++k)F=parseInt(E[2],10),I[k-1]=F===0?{hidden:!0}:{wch:F},gm(I[k-1]);break;case"C":g=parseInt(R[y].slice(1))-1,I[g]||(I[g]={});break;case"R":p=parseInt(R[y].slice(1))-1,_[p]||(_[p]={}),F>0?(_[p].hpt=F,_[p].hpx=Mv(F)):F===0&&(_[p].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+B)}z<1&&(P=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+B)}}return _.length>0&&(j["!rows"]=_),I.length>0&&(j["!cols"]=I),h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),[b,j]}function o(A,h){var m=a(A,h),p=m[0],g=m[1],v=g1(p,h);return xi(g).forEach(function(y){v[y]=g[y]}),v}function l(A,h){return Pm(o(A,h),h)}function c(A,h,m,p){var g="C;Y"+(m+1)+";X"+(p+1)+";K";switch(A.t){case"n":g+=A.v||0,A.f&&!A.F&&(g+=";E"+mR(A.f,{r:m,c:p}));break;case"b":g+=A.v?"TRUE":"FALSE";break;case"e":g+=A.w||A.v;break;case"d":g+='"'+(A.w||A.v)+'"';break;case"s":g+='"'+A.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(A,h){h.forEach(function(m,p){var g="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?g+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=k2(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=F2(m.wpx)),typeof m.wch=="number"&&(g+=Math.round(m.wch))),g.charAt(g.length-1)!=" "&&A.push(g)})}function d(A,h){h.forEach(function(m,p){var g="F;";m.hidden?g+="M0;":m.hpt?g+="M"+20*m.hpt+";":m.hpx&&(g+="M"+20*O2(m.hpx)+";"),g.length>2&&A.push(g+"R"+(p+1))})}function f(A,h){var m=["ID;PWXL;N;E"],p=[],g=ha(A["!ref"]),v,y=Array.isArray(A),b=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),A["!cols"]&&u(m,A["!cols"]),A["!rows"]&&d(m,A["!rows"]),m.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var w=g.s.r;w<=g.e.r;++w)for(var P=g.s.c;P<=g.e.c;++P){var j=Nn({r:w,c:P});v=y?(A[w]||[])[P]:A[j],!(!v||v.v==null&&(!v.f||v.F))&&p.push(c(v,A,w,P))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),wae=function(){function t(s,o){switch(o.type){case"base64":return e(Nu(s),o);case"binary":return e(s,o);case"buffer":return e(Gn&&Buffer.isBuffer(s)?s.toString("binary"):jm(s),o);case"array":return e(ig(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var A=l[d].trim().split(","),h=A[0],m=A[1];++d;for(var p=l[d]||"";(p.match(/["]/g)||[]).length&1&&d<l.length-1;)p+=`
`+l[++d];switch(p=p.trim(),+h){case-1:if(p==="BOT"){f[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[c][u]=!0:p==="FALSE"?f[c][u]=!1:isNaN(tf(m))?isNaN(Dv(m).getDate())?f[c][u]=m:f[c][u]=Ns(m):f[c][u]=tf(m),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(s,o){return g1(t(s,o),o)}function n(s,o){return Pm(r(s,o),o)}var a=function(){var s=function(c,u,d,f,A){c.push(u),c.push(d+","+f),c.push('"'+A.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=ha(c["!ref"]),f,A=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var h=d.s.r;h<=d.e.r;++h){o(u,-1,0,"BOT");for(var m=d.s.c;m<=d.e.c;++m){var p=Nn({r:h,c:m});if(f=A?(c[h]||[])[m]:c[p],!f){o(u,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,g,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=gd(f.z||wn[14],yo(Ns(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var v=`\r
`,y=u.join(v);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Nae=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,A){for(var h=f.split(`
`),m=-1,p=-1,g=0,v=[];g!==h.length;++g){var y=h[g].trim().split(":");if(y[0]==="cell"){var b=Js(y[1]);if(v.length<=b.r)for(m=v.length;m<=b.r;++m)v[m]||(v[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":v[m][p]=t(y[3]);break;case"v":v[m][p]=+y[3];break;case"vtf":var w=y[y.length-1];case"vtc":switch(y[3]){case"nl":v[m][p]=!!+y[4];break;default:v[m][p]=+y[4];break}y[2]=="vtf"&&(v[m][p]=[v[m][p],w])}}}return A&&A.sheetRows&&(v=v.slice(0,A.sheetRows)),v}function n(f,A){return g1(r(f,A),A)}function a(f,A){return Pm(n(f,A),A)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var A=[],h=[],m,p="",g=Qc(f["!ref"]),v=Array.isArray(f),y=g.s.r;y<=g.e.r;++y)for(var b=g.s.c;b<=g.e.c;++b)if(p=Nn({r:y,c:b}),m=v?(f[y]||[])[b]:f[p],!(!m||m.v==null||m.t==="z")){switch(h=["cell",p,"t"],m.t){case"s":case"str":h.push(e(m.v));break;case"n":m.f?(h[2]="vtf",h[3]="n",h[4]=m.v,h[5]=e(m.f)):(h[2]="v",h[3]=m.v);break;case"b":h[2]="vt"+(m.f?"f":"c"),h[3]="nl",h[4]=m.v?"1":"0",h[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var w=yo(Ns(m.v));h[2]="vtc",h[3]="nd",h[4]=""+w,h[5]=m.w||gd(m.z||wn[14],w);break;case"e":continue}A.push(h.join(":"))}return A.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),A.push("valueformat:1:text-wiki"),A.join(`
`)}function d(f){return[s,o,l,o,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Rv=function(){function t(d,f,A,h,m){m.raw?f[A][h]=d:d===""||(d==="TRUE"?f[A][h]=!0:d==="FALSE"?f[A][h]=!1:isNaN(tf(d))?isNaN(Dv(d).getDate())?f[A][h]=d:f[A][h]=Ns(d):f[A][h]=tf(d))}function e(d,f){var A=f||{},h=[];if(!d||d.length===0)return h;for(var m=d.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var g=10,v=0,y=0;y<=p;++y)v=m[y].indexOf(" "),v==-1?v=m[y].length:v++,g=Math.max(g,v);for(y=0;y<=p;++y){h[y]=[];var b=0;for(t(m[y].slice(0,g).trim(),h,y,b,A),b=1;b<=(m[y].length-g)/10+1;++b)t(m[y].slice(g+(b-1)*10,g+b*10).trim(),h,y,b,A)}return A.sheetRows&&(h=h.slice(0,A.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},A=!1,h=0,m=0;h<d.length;++h)(m=d.charCodeAt(h))==34?A=!A:!A&&m in r&&(f[m]=(f[m]||0)+1);m=[];for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h]);if(!m.length){f=n;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h])}return m.sort(function(p,g){return p[0]-g[0]||n[p[1]]-n[g[1]]}),r[m.pop()[1]]||44}function s(d,f){var A=f||{},h="",m=A.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(h=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(h=d.charAt(4),d=d.slice(6)):h=a(d.slice(0,1024)):A&&A.FS?h=A.FS:h=a(d.slice(0,1024));var g=0,v=0,y=0,b=0,w=0,P=h.charCodeAt(0),j=!1,_=0,I=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var E=A.dateNF!=null?xke(A.dateNF):null;function F(){var k=d.slice(b,w),B={};if(k.charAt(0)=='"'&&k.charAt(k.length-1)=='"'&&(k=k.slice(1,-1).replace(/""/g,'"')),k.length===0)B.t="z";else if(A.raw)B.t="s",B.v=k;else if(k.trim().length===0)B.t="s",B.v=k;else if(k.charCodeAt(0)==61)k.charCodeAt(1)==34&&k.charCodeAt(k.length-1)==34?(B.t="s",B.v=k.slice(2,-1).replace(/""/g,'"')):qRe(k)?(B.t="n",B.f=k.slice(1)):(B.t="s",B.v=k);else if(k=="TRUE")B.t="b",B.v=!0;else if(k=="FALSE")B.t="b",B.v=!1;else if(!isNaN(y=tf(k)))B.t="n",A.cellText!==!1&&(B.w=k),B.v=y;else if(!isNaN(Dv(k).getDate())||E&&k.match(E)){B.z=A.dateNF||wn[14];var R=0;E&&k.match(E)&&(k=vke(k,A.dateNF,k.match(E)||[]),R=1),A.cellDates?(B.t="d",B.v=Ns(k,R)):(B.t="n",B.v=yo(Ns(k,R))),A.cellText!==!1&&(B.w=gd(B.z,B.v instanceof Date?yo(B.v):B.v)),A.cellNF||delete B.z}else B.t="s",B.v=k;if(B.t=="z"||(A.dense?(m[g]||(m[g]=[]),m[g][v]=B):m[Nn({c:v,r:g})]=B),b=w+1,I=d.charCodeAt(b),p.e.c<v&&(p.e.c=v),p.e.r<g&&(p.e.r=g),_==P)++v;else if(v=0,++g,A.sheetRows&&A.sheetRows<=g)return!0}e:for(;w<d.length;++w)switch(_=d.charCodeAt(w)){case 34:I===34&&(j=!j);break;case P:case 10:case 13:if(!j&&F())break e;break}return w-b>0&&F(),m["!ref"]=Rn(p),m}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):g1(e(d,f),f)}function l(d,f){var A="",h=f.type=="string"?[0,0,0,0]:NR(d,f);switch(f.type){case"base64":A=Nu(d);break;case"binary":A=d;break;case"buffer":f.codepage==65001?A=d.toString("utf8"):f.codepage&&typeof _2<"u"||(A=Gn&&Buffer.isBuffer(d)?d.toString("binary"):jm(d));break;case"array":A=ig(d);break;case"string":A=d;break;default:throw new Error("Unrecognized type "+f.type)}return h[0]==239&&h[1]==187&&h[2]==191?A=Xa(A.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?A=Xa(A):f.type=="binary"&&typeof _2<"u",A.slice(0,19)=="socialcalc:version:"?Nae.to_sheet(f.type=="string"?A:Xa(A),f):o(A,f)}function c(d,f){return Pm(l(d,f),f)}function u(d){for(var f=[],A=ha(d["!ref"]),h,m=Array.isArray(d),p=A.s.r;p<=A.e.r;++p){for(var g=[],v=A.s.c;v<=A.e.c;++v){var y=Nn({r:p,c:v});if(h=m?(d[p]||[])[v]:d[y],!h||h.v==null){g.push("          ");continue}for(var b=(h.w||(lA(h),h.w)||"").slice(0,10);b.length<10;)b+=" ";g.push(b+(v===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function kDe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=bae.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Rv.to_workbook(t,e)}}var Dp=function(){function t(D,K,z){if(D){ul(D,D.l||0);for(var Q=z.Enum||je;D.l<D.length;){var J=D.read_shift(2),ee=Q[J]||Q[65535],M=D.read_shift(2),G=D.l+M,ne=ee.f&&ee.f(D,M,z);if(D.l=G,K(ne,ee,J))return}}}function e(D,K){switch(K.type){case"base64":return r(uu(Nu(D)),K);case"binary":return r(uu(D),K);case"buffer":case"array":return r(D,K)}throw"Unsupported type "+K.type}function r(D,K){if(!D)return D;var z=K||{},Q=z.dense?[]:{},J="Sheet1",ee="",M=0,G={},ne=[],ve=[],V={s:{r:0,c:0},e:{r:0,c:0}},qe=z.sheetRows||0;if(D[2]==0&&(D[3]==8||D[3]==9)&&D.length>=16&&D[14]==5&&D[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(D[2]==2)z.Enum=je,t(D,function(de,we,Le){switch(Le){case 0:z.vers=de,de>=4096&&(z.qpro=!0);break;case 6:V=de;break;case 204:de&&(ee=de);break;case 222:ee=de;break;case 15:case 51:z.qpro||(de[1].v=de[1].v.slice(1));case 13:case 14:case 16:Le==14&&(de[2]&112)==112&&(de[2]&15)>1&&(de[2]&15)<15&&(de[1].z=z.dateNF||wn[14],z.cellDates&&(de[1].t="d",de[1].v=nP(de[1].v))),z.qpro&&de[3]>M&&(Q["!ref"]=Rn(V),G[J]=Q,ne.push(J),Q=z.dense?[]:{},V={s:{r:0,c:0},e:{r:0,c:0}},M=de[3],J=ee||"Sheet"+(M+1),ee="");var Ge=z.dense?(Q[de[0].r]||[])[de[0].c]:Q[Nn(de[0])];if(Ge){Ge.t=de[1].t,Ge.v=de[1].v,de[1].z!=null&&(Ge.z=de[1].z),de[1].f!=null&&(Ge.f=de[1].f);break}z.dense?(Q[de[0].r]||(Q[de[0].r]=[]),Q[de[0].r][de[0].c]=de[1]):Q[Nn(de[0])]=de[1];break}},z);else if(D[2]==26||D[2]==14)z.Enum=Te,D[2]==14&&(z.qpro=!0,D.l=0),t(D,function(de,we,Le){switch(Le){case 204:J=de;break;case 22:de[1].v=de[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(de[3]>M&&(Q["!ref"]=Rn(V),G[J]=Q,ne.push(J),Q=z.dense?[]:{},V={s:{r:0,c:0},e:{r:0,c:0}},M=de[3],J="Sheet"+(M+1)),qe>0&&de[0].r>=qe)break;z.dense?(Q[de[0].r]||(Q[de[0].r]=[]),Q[de[0].r][de[0].c]=de[1]):Q[Nn(de[0])]=de[1],V.e.c<de[0].c&&(V.e.c=de[0].c),V.e.r<de[0].r&&(V.e.r=de[0].r);break;case 27:de[14e3]&&(ve[de[14e3][0]]=de[14e3][1]);break;case 1537:ve[de[0]]=de[1],de[0]==M&&(J=de[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+D[2]);if(Q["!ref"]=Rn(V),G[ee||J]=Q,ne.push(ee||J),!ve.length)return{SheetNames:ne,Sheets:G};for(var ie={},re=[],Fe=0;Fe<ve.length;++Fe)G[ne[Fe]]?(re.push(ve[Fe]||ne[Fe]),ie[ve[Fe]]=G[ve[Fe]]||G[ne[Fe]]):(re.push(ve[Fe]),ie[ve[Fe]]={"!ref":"A1"});return{SheetNames:re,Sheets:ie}}function n(D,K){var z=K||{};if(+z.codepage>=0&&zd(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var Q=Uc(),J=ha(D["!ref"]),ee=Array.isArray(D),M=[];kr(Q,0,s(1030)),kr(Q,6,c(J));for(var G=Math.min(J.e.r,8191),ne=J.s.r;ne<=G;++ne)for(var ve=Di(ne),V=J.s.c;V<=J.e.c;++V){ne===J.s.r&&(M[V]=Ys(V));var qe=M[V]+ve,ie=ee?(D[ne]||[])[V]:D[qe];if(!(!ie||ie.t=="z"))if(ie.t=="n")(ie.v|0)==ie.v&&ie.v>=-32768&&ie.v<=32767?kr(Q,13,h(ne,V,ie.v)):kr(Q,14,p(ne,V,ie.v));else{var re=lA(ie);kr(Q,15,f(ne,V,re.slice(0,239)))}}return kr(Q,1),Q.end()}function a(D,K){var z=K||{};if(+z.codepage>=0&&zd(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var Q=Uc();kr(Q,0,o(D));for(var J=0,ee=0;J<D.SheetNames.length;++J)(D.Sheets[D.SheetNames[J]]||{})["!ref"]&&kr(Q,27,se(D.SheetNames[J],ee++));var M=0;for(J=0;J<D.SheetNames.length;++J){var G=D.Sheets[D.SheetNames[J]];if(!(!G||!G["!ref"])){for(var ne=ha(G["!ref"]),ve=Array.isArray(G),V=[],qe=Math.min(ne.e.r,8191),ie=ne.s.r;ie<=qe;++ie)for(var re=Di(ie),Fe=ne.s.c;Fe<=ne.e.c;++Fe){ie===ne.s.r&&(V[Fe]=Ys(Fe));var de=V[Fe]+re,we=ve?(G[ie]||[])[Fe]:G[de];if(!(!we||we.t=="z"))if(we.t=="n")kr(Q,23,F(ie,Fe,M,we.v));else{var Le=lA(we);kr(Q,22,_(ie,Fe,M,Le.slice(0,239)))}}++M}}return kr(Q,1),Q.end()}function s(D){var K=rr(2);return K.write_shift(2,D),K}function o(D){var K=rr(26);K.write_shift(2,4096),K.write_shift(2,4),K.write_shift(4,0);for(var z=0,Q=0,J=0,ee=0;ee<D.SheetNames.length;++ee){var M=D.SheetNames[ee],G=D.Sheets[M];if(!(!G||!G["!ref"])){++J;var ne=Qc(G["!ref"]);z<ne.e.r&&(z=ne.e.r),Q<ne.e.c&&(Q=ne.e.c)}}return z>8191&&(z=8191),K.write_shift(2,z),K.write_shift(1,J),K.write_shift(1,Q),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(1,1),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(4,0),K}function l(D,K,z){var Q={s:{c:0,r:0},e:{c:0,r:0}};return K==8&&z.qpro?(Q.s.c=D.read_shift(1),D.l++,Q.s.r=D.read_shift(2),Q.e.c=D.read_shift(1),D.l++,Q.e.r=D.read_shift(2),Q):(Q.s.c=D.read_shift(2),Q.s.r=D.read_shift(2),K==12&&z.qpro&&(D.l+=2),Q.e.c=D.read_shift(2),Q.e.r=D.read_shift(2),K==12&&z.qpro&&(D.l+=2),Q.s.c==65535&&(Q.s.c=Q.e.c=Q.s.r=Q.e.r=0),Q)}function c(D){var K=rr(8);return K.write_shift(2,D.s.c),K.write_shift(2,D.s.r),K.write_shift(2,D.e.c),K.write_shift(2,D.e.r),K}function u(D,K,z){var Q=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(Q[0].c=D.read_shift(1),Q[3]=D.read_shift(1),Q[0].r=D.read_shift(2),D.l+=2):(Q[2]=D.read_shift(1),Q[0].c=D.read_shift(2),Q[0].r=D.read_shift(2)),Q}function d(D,K,z){var Q=D.l+K,J=u(D,K,z);if(J[1].t="s",z.vers==20768){D.l++;var ee=D.read_shift(1);return J[1].v=D.read_shift(ee,"utf8"),J}return z.qpro&&D.l++,J[1].v=D.read_shift(Q-D.l,"cstr"),J}function f(D,K,z){var Q=rr(7+z.length);Q.write_shift(1,255),Q.write_shift(2,K),Q.write_shift(2,D),Q.write_shift(1,39);for(var J=0;J<Q.length;++J){var ee=z.charCodeAt(J);Q.write_shift(1,ee>=128?95:ee)}return Q.write_shift(1,0),Q}function A(D,K,z){var Q=u(D,K,z);return Q[1].v=D.read_shift(2,"i"),Q}function h(D,K,z){var Q=rr(7);return Q.write_shift(1,255),Q.write_shift(2,K),Q.write_shift(2,D),Q.write_shift(2,z,"i"),Q}function m(D,K,z){var Q=u(D,K,z);return Q[1].v=D.read_shift(8,"f"),Q}function p(D,K,z){var Q=rr(13);return Q.write_shift(1,255),Q.write_shift(2,K),Q.write_shift(2,D),Q.write_shift(8,z,"f"),Q}function g(D,K,z){var Q=D.l+K,J=u(D,K,z);if(J[1].v=D.read_shift(8,"f"),z.qpro)D.l=Q;else{var ee=D.read_shift(2);w(D.slice(D.l,D.l+ee),J),D.l+=ee}return J}function v(D,K,z){var Q=K&32768;return K&=-32769,K=(Q?D:0)+(K>=8192?K-16384:K),(Q?"":"$")+(z?Ys(K):Di(K))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(D,K){ul(D,0);for(var z=[],Q=0,J="",ee="",M="",G="";D.l<D.length;){var ne=D[D.l++];switch(ne){case 0:z.push(D.read_shift(8,"f"));break;case 1:ee=v(K[0].c,D.read_shift(2),!0),J=v(K[0].r,D.read_shift(2),!1),z.push(ee+J);break;case 2:{var ve=v(K[0].c,D.read_shift(2),!0),V=v(K[0].r,D.read_shift(2),!1);ee=v(K[0].c,D.read_shift(2),!0),J=v(K[0].r,D.read_shift(2),!1),z.push(ve+V+":"+ee+J)}break;case 3:if(D.l<D.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(D.read_shift(2));break;case 6:{for(var qe="";ne=D[D.l++];)qe+=String.fromCharCode(ne);z.push('"'+qe.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:G=z.pop(),M=z.pop(),z.push(["AND","OR"][ne-20]+"("+M+","+G+")");break;default:if(ne<32&&b[ne])G=z.pop(),M=z.pop(),z.push(M+b[ne]+G);else if(y[ne]){if(Q=y[ne][1],Q==69&&(Q=D[D.l++]),Q>z.length){console.error("WK1 bad formula parse 0x"+ne.toString(16)+":|"+z.join("|")+"|");return}var ie=z.slice(-Q);z.length-=Q,z.push(y[ne][0]+"("+ie.join(",")+")")}else return ne<=7?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=24?console.error("WK1 unsupported op "+ne.toString(16)):ne<=30?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=115?console.error("WK1 unsupported function opcode "+ne.toString(16)):console.error("WK1 unrecognized opcode "+ne.toString(16))}}z.length==1?K[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function P(D){var K=[{c:0,r:0},{t:"n",v:0},0];return K[0].r=D.read_shift(2),K[3]=D[D.l++],K[0].c=D[D.l++],K}function j(D,K){var z=P(D);return z[1].t="s",z[1].v=D.read_shift(K-4,"cstr"),z}function _(D,K,z,Q){var J=rr(6+Q.length);J.write_shift(2,D),J.write_shift(1,z),J.write_shift(1,K),J.write_shift(1,39);for(var ee=0;ee<Q.length;++ee){var M=Q.charCodeAt(ee);J.write_shift(1,M>=128?95:M)}return J.write_shift(1,0),J}function I(D,K){var z=P(D);z[1].v=D.read_shift(2);var Q=z[1].v>>1;if(z[1].v&1)switch(Q&7){case 0:Q=(Q>>3)*5e3;break;case 1:Q=(Q>>3)*500;break;case 2:Q=(Q>>3)/20;break;case 3:Q=(Q>>3)/200;break;case 4:Q=(Q>>3)/2e3;break;case 5:Q=(Q>>3)/2e4;break;case 6:Q=(Q>>3)/16;break;case 7:Q=(Q>>3)/64;break}return z[1].v=Q,z}function E(D,K){var z=P(D),Q=D.read_shift(4),J=D.read_shift(4),ee=D.read_shift(2);if(ee==65535)return Q===0&&J===3221225472?(z[1].t="e",z[1].v=15):Q===0&&J===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var M=ee&32768;return ee=(ee&32767)-16446,z[1].v=(1-M*2)*(J*Math.pow(2,ee+32)+Q*Math.pow(2,ee)),z}function F(D,K,z,Q){var J=rr(14);if(J.write_shift(2,D),J.write_shift(1,z),J.write_shift(1,K),Q==0)return J.write_shift(4,0),J.write_shift(4,0),J.write_shift(2,65535),J;var ee=0,M=0,G=0,ne=0;return Q<0&&(ee=1,Q=-Q),M=Math.log2(Q)|0,Q/=Math.pow(2,M-31),ne=Q>>>0,ne&2147483648||(Q/=2,++M,ne=Q>>>0),Q-=ne,ne|=2147483648,ne>>>=0,Q*=Math.pow(2,32),G=Q>>>0,J.write_shift(4,G),J.write_shift(4,ne),M+=16383+(ee?32768:0),J.write_shift(2,M),J}function k(D,K){var z=E(D);return D.l+=K-14,z}function B(D,K){var z=P(D),Q=D.read_shift(4);return z[1].v=Q>>6,z}function R(D,K){var z=P(D),Q=D.read_shift(8,"f");return z[1].v=Q,z}function Y(D,K){var z=R(D);return D.l+=K-10,z}function me(D,K){return D[D.l+K-1]==0?D.read_shift(K,"cstr"):""}function pe(D,K){var z=D[D.l++];z>K-1&&(z=K-1);for(var Q="";Q.length<z;)Q+=String.fromCharCode(D[D.l++]);return Q}function he(D,K,z){if(!(!z.qpro||K<21)){var Q=D.read_shift(1);D.l+=17,D.l+=1,D.l+=2;var J=D.read_shift(K-21,"cstr");return[Q,J]}}function ge(D,K){for(var z={},Q=D.l+K;D.l<Q;){var J=D.read_shift(2);if(J==14e3){for(z[J]=[0,""],z[J][0]=D.read_shift(2);D[D.l];)z[J][1]+=String.fromCharCode(D[D.l]),D.l++;D.l++}}return z}function se(D,K){var z=rr(5+D.length);z.write_shift(2,14e3),z.write_shift(2,K);for(var Q=0;Q<D.length;++Q){var J=D.charCodeAt(Q);z[z.l++]=J>127?95:J}return z[z.l++]=0,z}var je={0:{n:"BOF",f:Hi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:A},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:me},222:{n:"SHEETNAMELP",f:pe},65535:{n:""}},Te={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:j},23:{n:"NUMBER17",f:E},24:{n:"NUMBER18",f:I},25:{n:"FORMULA19",f:k},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ge},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:B},38:{n:"??"},39:{n:"NUMBER27",f:R},40:{n:"FORMULA28",f:Y},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:me},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:he},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function FDe(t){var e={},r=t.match(ql),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=_n(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=U6[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var ODe=function(){var t=I2("t"),e=I2("rPr");function r(s){var o=s.match(t);if(!o)return{t:"s",v:""};var l={t:"s",v:fa(o[1])},c=s.match(e);return c&&(l.s=FDe(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),DDe=function(){var e=/(\r\n|\n)/g;function r(a,s,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),o.push("</b>")),a.i&&(s.push("<i>"),o.push("</i>")),a.strike&&(s.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),RDe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,MDe=/<(?:\w+:)?r>/,LDe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function uR(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=fa(Xa(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Xa(t),r&&(n.h=X6(n.t))):t.match(MDe)&&(n.r=Xa(t),n.t=fa(Xa((t.replace(LDe,"").match(RDe)||[]).join("").replace(ql,""))),r&&(n.h=DDe(ODe(n.r)))),n):{t:""}}var UDe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,QDe=/<(?:\w+:)?(?:si|sstItem)>/g,VDe=/<\/(?:\w+:)?(?:si|sstItem)>/;function HDe(t,e){var r=[],n="";if(!t)return r;var a=t.match(UDe);if(a){n=a[2].replace(QDe,"").split(VDe);for(var s=0;s!=n.length;++s){var o=uR(n[s].trim(),e);o!=null&&(r[r.length]=o)}a=_n(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var $De=/^\s|\s$|[\t\n\r]/;function Cae(t,e){if(!e.bookSST)return"";var r=[Mi];r[r.length]=Br("sst",null,{xmlns:Pg[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match($De)&&(s+=' xml:space="preserve"'),s+=">"+Ha(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function GDe(t){return[t.read_shift(4),t.read_shift(4)]}function KDe(t,e){var r=[],n=!1;return CA(t,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function qDe(t,e){return e||(e=rr(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var zDe=aFe;function WDe(t){var e=Uc();pr(e,159,qDe(t));for(var r=0;r<t.length;++r)pr(e,19,zDe(t[r]));return pr(e,160),e.end()}function _ae(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function Xh(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function XDe(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=Xh(t,4),e.U=Xh(t,4),e.W=Xh(t,4),e}function YDe(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function JDe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(YDe(t));return e}function ZDe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function e6e(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=Xh(t,4),e.U=Xh(t,4),e.W=Xh(t,4),e}function t6e(t){var e=e6e(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function Eae(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function Sae(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function r6e(t){var e=Xh(t);switch(e.Minor){case 2:return[e.Minor,n6e(t)];case 3:return[e.Minor,a6e()];case 4:return[e.Minor,s6e(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function n6e(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=Eae(t,r),a=Sae(t,t.length-t.l);return{t:"Std",h:n,v:a}}function a6e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function s6e(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(ql,function(s){var o=_n(s);switch(rh(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function i6e(t,e){var r={},n=r.EncryptionVersionInfo=Xh(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=Eae(t,a),e-=a,r.EncryptionVerifier=Sae(t,e),r}function o6e(t){var e={},r=e.EncryptionVersionInfo=Xh(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function dR(t){var e=0,r,n=_ae(t),a=n.length+1,s,o,l,c,u;for(r=pm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^o;return e^52811}var Iae=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},s=function(o){for(var l=e[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=_ae(o),c=s(l),u=l.length,d=pm(16),f=0;f!=16;++f)d[f]=0;var A,h,m;for((u&1)===1&&(A=c>>8,d[u]=a(t[0],A),--u,A=c&255,h=l[l.length-1],d[u]=a(h,A));u>0;)--u,A=c>>8,d[u]=a(l[u],A),--u,A=c&255,d[u]=a(l[u],A);for(u=15,m=15-l.length;m>0;)A=c>>8,d[u]=a(t[m],A),--u,--m,A=c&255,d[u]=a(l[u],A),--u,--m;return d}}(),l6e=function(t,e,r,n,a){a||(a=e),n||(n=Iae(t));var s,o;for(s=0;s!=e.length;++s)o=e[s],o^=n[r],o=(o>>5|o<<3)&255,a[s]=o,++r;return[a,r,n]},c6e=function(t){var e=0,r=Iae(t);return function(n){var a=l6e("",n,e,r);return e=a[1],a[0]}};function u6e(t,e,r,n){var a={key:Hi(t),verificationBytes:Hi(t)};return r.password&&(a.verifier=dR(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=c6e(r.password)),a}function d6e(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=o6e(t):n.Data=i6e(t,e),n}function f6e(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?d6e(t,e-2,n):u6e(t,r.biff>=8?e:e-2,r,n),n}var jae=function(){function t(a,s){switch(s.type){case"base64":return e(Nu(a),s);case"binary":return e(a,s);case"buffer":return e(Gn&&Buffer.isBuffer(a)?a.toString("binary"):jm(a),s);case"array":return e(ig(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var A=/\\\w+\b/g,h=0,m,p=-1;m=A.exec(d);){switch(m[0]){case"\\cell":var g=d.slice(h,A.lastIndex-m[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var v={v:g,t:"s"};Array.isArray(l)?l[f][p]=v:l[Nn({r:f,c:p})]=v}break}h=A.lastIndex}p>u.e.c&&(u.e.c=p)}),l["!ref"]=Rn(u),l}function r(a,s){return Pm(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=ha(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=Nn({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(lA(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function h6e(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function T2(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function A6e(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),o=a-s;if(o===0)return[0,0,e];var l=0,c=0,u=a+s;switch(c=o/(u>1?2-u:u),a){case e:l=((r-n)/o+6)%6;break;case r:l=(n-e)/o+2;break;case n:l=(e-r)/o+4;break}return[l/6,c,u/2]}function m6e(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,o=[s,s,s],l=6*e,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function KS(t,e){if(e===0)return t;var r=A6e(h6e(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),T2(m6e(r))}var Pae=6,p6e=15,g6e=1,Ll=Pae;function k2(t){return Math.floor((t+Math.round(128/Ll)/256)*Ll)}function F2(t){return Math.floor((t-5)/Ll*100+.5)/100}function qS(t){return Math.round((t*Ll+5)/Ll*256)/256}function P5(t){return qS(F2(k2(t)))}function fR(t){var e=Math.abs(t-P5(t)),r=Ll;if(e>.005)for(Ll=g6e;Ll<p6e;++Ll)Math.abs(t-P5(t))<=e&&(e=Math.abs(t-P5(t)),r=Ll);Ll=r}function gm(t){t.width?(t.wpx=k2(t.width),t.wch=F2(t.wpx),t.MDW=Ll):t.wpx?(t.wch=F2(t.wpx),t.width=qS(t.wch),t.MDW=Ll):typeof t.wch=="number"&&(t.width=qS(t.wch),t.wpx=k2(t.width),t.MDW=Ll),t.customWidth&&delete t.customWidth}var x6e=96,Bae=x6e;function O2(t){return t*96/Bae}function Mv(t){return t*Bae/96}var v6e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function y6e(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(ql)||[]).forEach(function(o){var l=_n(o);switch(rh(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=vs(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=vs(l.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function b6e(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(ql)||[]).forEach(function(o){var l=_n(o);switch(rh(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function w6e(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(ql)||[]).forEach(function(o){var l=_n(o);switch(rh(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Xa(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?vs(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?vs(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?vs(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?vs(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?vs(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?vs(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?vs(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=U6[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=vs(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=Fp[a.color.index];a.color.index==81&&(c=Fp[1]),c||(c=Fp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=KS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function N6e(t,e,r){e.NumberFmt=[];for(var n=xi(wn),a=0;a<n.length;++a)e.NumberFmt[n[a]]=wn[n[a]];var s=t[0].match(ql);if(s)for(a=0;a<s.length;++a){var o=_n(s[a]);switch(rh(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=fa(Xa(o.formatCode)),c=parseInt(o.numFmtId,10);if(e.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=l}Wh(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function C6e(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Br("numFmt",null,{numFmtId:n,formatCode:Ha(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Br("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var JC=["numFmtId","fillId","fontId","borderId","xfId"],ZC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function _6e(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(ql)||[]).forEach(function(s){var o=_n(s),l=0;switch(rh(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<JC.length;++l)n[JC[l]]&&(n[JC[l]]=parseInt(n[JC[l]],10));for(l=0;l<ZC.length;++l)n[ZC[l]]&&(n[ZC[l]]=vs(n[ZC[l]]));if(e.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[l]){n.numFmtId=l;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=vs(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function E6e(t){var e=[];return e[e.length]=Br("cellXfs",null),t.forEach(function(r){e[e.length]=Br("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Br("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var S6e=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(e))&&N6e(f,d,u),(f=l.match(a))&&w6e(f,d,c,u),(f=l.match(n))&&b6e(f,d,c,u),(f=l.match(s))&&y6e(f,d,c,u),(f=l.match(r))&&_6e(f,d,u),d}}();function Tae(t,e){var r=[Mi,Br("styleSheet",null,{xmlns:Pg[0],"xmlns:vt":po.vt})],n;return t.SSF&&(n=C6e(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=E6e(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function I6e(t,e){var r=t.read_shift(2),n=Vl(t);return[r,n]}function j6e(t,e,r){r||(r=rr(6+4*e.length)),r.write_shift(2,t),Uo(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function P6e(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=dFe(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(n.underline=o);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=uFe(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Vl(t),n}function B6e(t,e){e||(e=rr(25+4*32)),e.write_shift(2,t.sz*20),fFe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),HS(t.color,e);var n=0;return n=2,e.write_shift(1,n),Uo(t.name,e),e.length>e.l?e.slice(0,e.l):e}var T6e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],B5,k6e=Gl;function _$(t,e){e||(e=rr(4*3+8*7+16*1)),B5||(B5=tP(T6e));var r=B5[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(HS({auto:1},e),HS({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function F6e(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function kae(t,e,r){r||(r=rr(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function py(t,e){return e||(e=rr(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var O6e=Gl;function D6e(t,e){return e||(e=rr(51)),e.write_shift(1,0),py(null,e),py(null,e),py(null,e),py(null,e),py(null,e),e.length>e.l?e.slice(0,e.l):e}function R6e(t,e){return e||(e=rr(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),VS(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function M6e(t,e,r){var n=rr(2052);return n.write_shift(4,t),VS(e,n),VS(r,n),n.length>n.l?n.slice(0,n.l):n}function L6e(t,e,r){var n={};n.NumberFmt=[];for(var a in wn)n.NumberFmt[a]=wn[a];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return CA(t,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],Wh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=KS(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function U6e(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(pr(t,615,rf(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&pr(t,44,j6e(a,e[a]))}),pr(t,616))}}function Q6e(t){var e=1;pr(t,611,rf(e)),pr(t,43,B6e({sz:12,color:{theme:1},name:"Calibri",family:2})),pr(t,612)}function V6e(t){var e=2;pr(t,603,rf(e)),pr(t,45,_$({patternType:"none"})),pr(t,45,_$({patternType:"gray125"})),pr(t,604)}function H6e(t){var e=1;pr(t,613,rf(e)),pr(t,46,D6e()),pr(t,614)}function $6e(t){var e=1;pr(t,626,rf(e)),pr(t,47,kae({numFmtId:0},65535)),pr(t,627)}function G6e(t,e){pr(t,617,rf(e.length)),e.forEach(function(r){pr(t,47,kae(r,0))}),pr(t,618)}function K6e(t){var e=1;pr(t,619,rf(e)),pr(t,48,R6e({xfId:0,name:"Normal"})),pr(t,620)}function q6e(t){var e=0;pr(t,505,rf(e)),pr(t,506)}function z6e(t){var e=0;pr(t,508,M6e(e,"TableStyleMedium9","PivotStyleMedium4")),pr(t,509)}function W6e(t,e){var r=Uc();return pr(r,278),U6e(r,t.SSF),Q6e(r),V6e(r),H6e(r),$6e(r),G6e(r,e.cellXfs),K6e(r),q6e(r),z6e(r),pr(r,279),r.end()}var X6e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Y6e(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(ql)||[]).forEach(function(a){var s=_n(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[X6e.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function J6e(){}function Z6e(){}var eRe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,tRe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,rRe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function nRe(t,e,r){e.themeElements={};var n;[["clrScheme",eRe,Y6e],["fontScheme",tRe,J6e],["fmtScheme",rRe,Z6e]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var aRe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Fae(t,e){(!t||t.length===0)&&(t=hR());var r,n={};if(!(r=t.match(aRe)))throw new Error("themeElements not found in theme");return nRe(r[0],n,e),n.raw=t,n}function hR(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Mi];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function sRe(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var o;try{o=Ene(s,{type:"array"})}catch{return}var l=du(o,"theme/theme/theme1.xml",!0);if(l)return Fae(l,r)}}function iRe(t){return t.read_shift(4)}function oRe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=lRe(t,4);break;case 2:e.xclrValue=hae(t);break;case 3:e.xclrValue=iRe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function lRe(t,e){return Gl(t,e)}function cRe(t,e){return Gl(t,e)}function uRe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=oRe(t);break;case 6:n[1]=cRe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function dRe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(uRe(t,r-t.l));return{ixfe:n,ext:s}}function fRe(t,e){e.forEach(function(r){switch(r[0]){}})}function hRe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Vl(t)}}function ARe(t){var e=rr(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Uo(t.name,e),e.slice(0,e.l)}function mRe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function pRe(t){var e=rr(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function gRe(t,e){var r=rr(8+2*e.length);return r.write_shift(4,t),Uo(e,r),r.slice(0,r.l)}function xRe(t){return t.l+=4,t.read_shift(4)!=0}function vRe(t,e){var r=rr(8);return r.write_shift(4,t),r.write_shift(4,1),r}function yRe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],o=!1,l=2;return CA(t,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function bRe(){var t=Uc();return pr(t,332),pr(t,334,rf(1)),pr(t,335,ARe({name:"XLDAPR",version:12e4,flags:3496657072})),pr(t,336),pr(t,339,gRe(1,"XLDAPR")),pr(t,52),pr(t,35,rf(514)),pr(t,4096,rf(0)),pr(t,4097,Zu(1)),pr(t,36),pr(t,53),pr(t,340),pr(t,337,vRe(1)),pr(t,51,pRe([[1,0]])),pr(t,338),pr(t,333),t.end()}function wRe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,o;return t.replace(ql,function(l){var c=_n(l);switch(rh(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function Oae(){var t=[Mi];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function NRe(t){var e=[];if(!t)return e;var r=1;return(t.match(ql)||[]).forEach(function(n){var a=_n(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function CRe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Nn(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function _Re(t,e,r){var n=[];return CA(t,function(s,o,l){switch(l){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function ERe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;CA(t,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function SRe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var Wx=1024;function Dae(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Br("xml",null,{"xmlns:v":lu.v,"xmlns:o":lu.o,"xmlns:x":lu.x,"xmlns:mv":lu.mv}).replace(/\/>/,">"),Br("o:shapelayout",Br("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Br("v:shapetype",[Br("v:stroke",null,{joinstyle:"miter"}),Br("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Wx<t*1e3;)Wx+=1e3;return e.forEach(function(s){var o=Js(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Br("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Br("v:fill",c,l),d={on:"t",obscured:"t"};++Wx,a=a.concat(["<v:shape"+j2({id:"_x0000_s"+Wx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Br("v:shadow",null,d),Br("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",fl("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),fl("x:AutoFill","False"),fl("x:Row",String(o.r)),fl("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function E$(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(o){var l=Js(o.ref);if(a?(t[l.r]||(t[l.r]=[]),s=t[l.r][l.c]):s=t[o.ref],!s){s={t:"z"},a?t[l.r][l.c]=s:t[o.ref]=s;var c=ha(t["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=Rn(c);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function IRe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=_n(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Js(c.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),A=!!f&&!!f[1]&&uR(f[1])||{r:"",t:"",h:""};u.r=A.r,A.r=="<t></t>"&&(A.t=A.h=""),u.t=(A.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=A.h),n.push(u)}}}}),n}function Rae(t){var e=[Mi,Br("comments",null,{xmlns:Pg[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=Ha(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Ha(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(fl("t",Ha(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;e.push(fl("t",Ha(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function jRe(t,e){var r=[],n=!1,a={},s=0;return t.replace(ql,function(l,c){var u=_n(l);switch(rh(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function PRe(t,e,r){var n=[Mi,Br("ThreadedComments",null,{xmlns:po.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push(Br("threadedComment",fl("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function BRe(t,e){var r=[],n=!1;return t.replace(ql,function(s){var o=_n(s);switch(rh(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function TRe(t){var e=[Mi,Br("personList",null,{xmlns:po.TCMNT,"xmlns:x":Pg[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Br("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function kRe(t){var e={};e.iauthor=t.read_shift(4);var r=Fg(t);return e.rfx=r.s,e.ref=Nn(r.s),t.l+=16,e}function FRe(t,e){return e==null&&(e=rr(36)),e.write_shift(4,t[1].iauthor),x1(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var ORe=Vl;function DRe(t){return Uo(t.slice(0,54))}function RRe(t,e){var r=[],n=[],a={},s=!1;return CA(t,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function MRe(t){var e=Uc(),r=[];return pr(e,628),pr(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),pr(e,632,DRe(a.a)))})}),pr(e,631),pr(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Js(n[0]),e:Js(n[0])};pr(e,635,FRe([s,a])),a.t&&a.t.length>0&&pr(e,637,iFe(a)),pr(e,636),delete a.iauthor})}),pr(e,634),pr(e,629),e.end()}var LRe="application/vnd.ms-office.vbaProject";function URe(t){var e=hn.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");hn.utils.cfb_add(e,a,t.FileIndex[n].content)}}),hn.write(e)}function QRe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&hn.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var Mae=["xlsb","xlsm","xlam","biff8","xla"];function VRe(){return{"!type":"dialog"}}function HRe(){return{"!type":"dialog"}}function $Re(){return{"!type":"macro"}}function GRe(){return{"!type":"macro"}}var hv=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,a+(l?"":"$")+Ys(d)+(c?"":"$")+Di(u)}return function(a,s){return e=s,a.replace(t,r)}}(),AR=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,mR=function(){return function(e,r){return e.replace(AR,function(n,a,s,o,l,c){var u=tR(o)-(s?0:r.c),d=eR(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",A=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+A})}}();function Lae(t,e){return t.replace(AR,function(r,n,a,s,o,l){return n+(a=="$"?a+s:Ys(tR(s)+e.c))+(o=="$"?o+l:Di(eR(l)+e.r))})}function KRe(t,e,r){var n=Qc(e),a=n.s,s=Js(r),o={r:s.r-a.r,c:s.c-a.c};return Lae(t,o)}function qRe(t){return t.length!=1}function S$(t){return t.replace(/_xlfn\./g,"")}function Li(t){t.l+=1}function xm(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Uae(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Qae(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),o=xm(t),l=xm(t);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Qae(t){var e=xm(t),r=xm(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function zRe(t,e,r){if(r.biff<8)return Qae(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=xm(t),o=xm(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function Vae(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return WRe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=xm(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function WRe(t){var e=xm(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function XRe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function YRe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return JRe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function JRe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function ZRe(t,e,r){var n=(t[t.l++]&96)>>5,a=Uae(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function eMe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=Uae(t,s,r);return[n,a,o]}function tMe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function rMe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function nMe(t,e,r){var n=(t[t.l++]&96)>>5,a=zRe(t,e-1,r);return[n,a]}function aMe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function I$(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function sMe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function iMe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function oMe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function lMe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function cMe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Hae(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function uMe(t){return t.read_shift(2),Hae(t)}function dMe(t){return t.read_shift(2),Hae(t)}function fMe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=Vae(t,0,r);return[n,a]}function hMe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=YRe(t,0,r);return[n,a]}function AMe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=Vae(t,0,r);return[n,a,s]}function mMe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[x8e[a],Kae[a],n]}function pMe(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:gMe(t);return[a,(s[0]===0?Kae:g8e)[s[1]]]}function gMe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function xMe(t,e,r){t.l+=r&&r.biff==2?3:4}function vMe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function yMe(t){return t.l++,_A[t.read_shift(1)]}function bMe(t){return t.l++,t.read_shift(2)}function wMe(t){return t.l++,t.read_shift(1)!==0}function NMe(t){return t.l++,Ul(t)}function CMe(t,e,r){return t.l++,Ow(t,e-1,r)}function _Me(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=_i(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=_A[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Ul(t);break;case 2:r[1]=Og(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function EMe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Fg:aP)(t));return a}function SMe(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=_Me(t,r.biff);return o}function IMe(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function jMe(t,e,r){if(r.biff==5)return PMe(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function PMe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function BMe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function TMe(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function kMe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function FMe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var OMe=Gl,DMe=Gl,RMe=Gl;function Rw(t,e,r){return t.l+=2,[XRe(t)]}function pR(t){return t.l+=6,[]}var MMe=Rw,LMe=pR,UMe=pR,QMe=Rw;function $ae(t){return t.l+=2,[Hi(t),t.read_shift(2)&1]}var VMe=Rw,HMe=$ae,$Me=pR,GMe=Rw,KMe=Rw,qMe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function zMe(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),o=qMe[r>>2&31];return{ixti:e,coltype:r&3,rt:o,idx:n,c:a,C:s}}function WMe(t){return t.l+=2,[t.read_shift(4)]}function XMe(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function YMe(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function JMe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function ZMe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function e8e(t){return t.l+=4,[0,0]}var j$={1:{n:"PtgExp",f:vMe},2:{n:"PtgTbl",f:RMe},3:{n:"PtgAdd",f:Li},4:{n:"PtgSub",f:Li},5:{n:"PtgMul",f:Li},6:{n:"PtgDiv",f:Li},7:{n:"PtgPower",f:Li},8:{n:"PtgConcat",f:Li},9:{n:"PtgLt",f:Li},10:{n:"PtgLe",f:Li},11:{n:"PtgEq",f:Li},12:{n:"PtgGe",f:Li},13:{n:"PtgGt",f:Li},14:{n:"PtgNe",f:Li},15:{n:"PtgIsect",f:Li},16:{n:"PtgUnion",f:Li},17:{n:"PtgRange",f:Li},18:{n:"PtgUplus",f:Li},19:{n:"PtgUminus",f:Li},20:{n:"PtgPercent",f:Li},21:{n:"PtgParen",f:Li},22:{n:"PtgMissArg",f:Li},23:{n:"PtgStr",f:CMe},26:{n:"PtgSheet",f:XMe},27:{n:"PtgEndSheet",f:YMe},28:{n:"PtgErr",f:yMe},29:{n:"PtgBool",f:wMe},30:{n:"PtgInt",f:bMe},31:{n:"PtgNum",f:NMe},32:{n:"PtgArray",f:aMe},33:{n:"PtgFunc",f:mMe},34:{n:"PtgFuncVar",f:pMe},35:{n:"PtgName",f:IMe},36:{n:"PtgRef",f:fMe},37:{n:"PtgArea",f:ZRe},38:{n:"PtgMemArea",f:BMe},39:{n:"PtgMemErr",f:OMe},40:{n:"PtgMemNoMem",f:DMe},41:{n:"PtgMemFunc",f:TMe},42:{n:"PtgRefErr",f:kMe},43:{n:"PtgAreaErr",f:tMe},44:{n:"PtgRefN",f:hMe},45:{n:"PtgAreaN",f:nMe},46:{n:"PtgMemAreaN",f:JMe},47:{n:"PtgMemNoMemN",f:ZMe},57:{n:"PtgNameX",f:jMe},58:{n:"PtgRef3d",f:AMe},59:{n:"PtgArea3d",f:eMe},60:{n:"PtgRefErr3d",f:FMe},61:{n:"PtgAreaErr3d",f:rMe},255:{}},t8e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},r8e={1:{n:"PtgElfLel",f:$ae},2:{n:"PtgElfRw",f:GMe},3:{n:"PtgElfCol",f:MMe},6:{n:"PtgElfRwV",f:KMe},7:{n:"PtgElfColV",f:QMe},10:{n:"PtgElfRadical",f:VMe},11:{n:"PtgElfRadicalS",f:$Me},13:{n:"PtgElfColS",f:LMe},15:{n:"PtgElfColSV",f:UMe},16:{n:"PtgElfRadicalLel",f:HMe},25:{n:"PtgList",f:zMe},29:{n:"PtgSxName",f:WMe},255:{}},n8e={0:{n:"PtgAttrNoop",f:e8e},1:{n:"PtgAttrSemi",f:cMe},2:{n:"PtgAttrIf",f:oMe},4:{n:"PtgAttrChoose",f:sMe},8:{n:"PtgAttrGoto",f:iMe},16:{n:"PtgAttrSum",f:xMe},32:{n:"PtgAttrBaxcel",f:I$},33:{n:"PtgAttrBaxcel",f:I$},64:{n:"PtgAttrSpace",f:uMe},65:{n:"PtgAttrSpaceSemi",f:dMe},128:{n:"PtgAttrIfError",f:lMe},255:{}};function Mw(t,e,r,n){if(n.biff<8)return Gl(t,e);for(var a=t.l+e,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=SMe(t,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=EMe(t,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=t.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return e=a-t.l,e!==0&&s.push(Gl(t,e)),s}function Lw(t,e,r){for(var n=t.l+e,a,s,o=[];n!=t.l;)e=n-t.l,s=t[t.l],a=j$[s]||j$[t8e[s]],(s===24||s===25)&&(a=(s===24?r8e:n8e)[t[t.l+1]]),!a||!a.f?Gl(t,e):o.push([a.n,a.f(t,e,r)]);return o}function a8e(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var s8e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function i8e(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Gae(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function P$(t,e,r){var n=Gae(t,e,r);return n=="#REF"?n:i8e(n,r)}function Rl(t,e,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,A=0,h,m="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",v=0,y=t[0].length;v<y;++v){var b=t[0][v];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=Ai(" ",t[0][p][1][1]);break;case 1:g=Ai("\r",t[0][p][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+g,p=-1}l.push(u+s8e[b[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Sb(b[1][1],o,a),l.push(Ib(d,s));break;case"PtgRefN":d=r?Sb(b[1][1],r,a):b[1][1],l.push(Ib(d,s));break;case"PtgRef3d":f=b[1][1],d=Sb(b[1][2],o,a),m=P$(n,f,a),l.push(m+"!"+Ib(d,s));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],P=b[1][1];w||(w=0),w&=127;var j=w==0?[]:l.slice(-w);l.length-=w,P==="User"&&(P=j.shift()),l.push(P+"("+j.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":h=s$(b[1][1],r?{s:r}:o,a),l.push(S5(h,a));break;case"PtgArea":h=s$(b[1][1],o,a),l.push(S5(h,a));break;case"PtgArea3d":f=b[1][1],h=b[1][2],m=P$(n,f,a),l.push(m+"!"+S5(h,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":A=b[1][2];var _=(n.names||[])[A-1]||(n[0]||[])[A],I=_?_.Name:"SH33TJSNAME"+String(A);I&&I.slice(0,6)=="_xlfn."&&!a.xlfn&&(I=I.slice(6)),l.push(I);break;case"PtgNameX":var E=b[1][1];A=b[1][2];var F;if(a.biff<=5)E<0&&(E=-E),n[E]&&(F=n[E][A]);else{var k="";if(((n[E]||[])[0]||[])[0]==14849||(((n[E]||[])[0]||[])[0]==1025?n[E][A]&&n[E][A].itab>0&&(k=n.SheetNames[n[E][A].itab-1]+"!"):k=n.SheetNames[A-1]+"!"),n[E]&&n[E][A])k+=n[E][A].Name;else if(n[0]&&n[0][A])k+=n[0][A].Name;else{var B=(Gae(n,E,a)||"").split(";;");B[A-1]?k=B[A-1]:k+="SH33TJSERRX"}l.push(k);break}F||(F={Name:"SH33TJSERRY"}),l.push(F.Name);break;case"PtgParen":var R="(",Y=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:R=Ai(" ",t[0][p][1][1])+R;break;case 3:R=Ai("\r",t[0][p][1][1])+R;break;case 4:Y=Ai(" ",t[0][p][1][1])+Y;break;case 5:Y=Ai("\r",t[0][p][1][1])+Y;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(R+l.pop()+Y);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var me={c:r.c,r:r.r};if(n.sharedf[Nn(d)]){var pe=n.sharedf[Nn(d)];l.push(Rl(pe,o,me,n,a))}else{var he=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Rl(u[1],o,me,n,a)),he=!0;break}he||l.push(b[1])}break;case"PtgArray":l.push("{"+a8e(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var ge=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&ge.indexOf(t[0][v][0])==-1){b=t[0][p];var se=!0;switch(b[1][0]){case 4:se=!1;case 0:g=Ai(" ",b[1][1]);break;case 5:se=!1;case 1:g=Ai("\r",b[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((se?g:"")+l.pop()+(se?"":g)),p=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function o8e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,o=t.read_shift(a);if(o==65535)return[[],Gl(t,e-2)];var l=Lw(t,o,r);return e!==o+a&&(s=Mw(t,e-o-a,l,r)),t.l=n,[l,s]}function l8e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,o=t.read_shift(a);if(o==65535)return[[],Gl(t,e-2)];var l=Lw(t,o,r);return e!==o+a&&(s=Mw(t,e-o-a,l,r)),t.l=n,[l,s]}function c8e(t,e,r,n){var a=t.l+e,s=Lw(t,n,r),o;return a!==t.l&&(o=Mw(t,a-t.l,s,r)),[s,o]}function u8e(t,e,r){var n=t.l+e,a,s=t.read_shift(2),o=Lw(t,s,r);return s==65535?[[],Gl(t,e-2)]:(e!==s+2&&(a=Mw(t,n-s-2,o,r)),[o,a])}function d8e(t){var e;if(Mh(t,t.l+6)!==65535)return[Ul(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function f8e(t){if(t==null){var e=rr(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return og(t);return og(0)}function T5(t,e,r){var n=t.l+e,a=nh(t);r.biff==2&&++t.l;var s=d8e(t),o=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=l8e(t,n-t.l,r);return{cell:a,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function h8e(t,e,r,n,a){var s=cg(e,r,a),o=f8e(t.v),l=rr(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=rr(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var f=Mo([s,o,l,u]);return f}function sP(t,e,r){var n=t.read_shift(4),a=Lw(t,n,r),s=t.read_shift(4),o=s>0?Mw(t,s,a,r):null;return[a,o]}var A8e=sP,iP=sP,m8e=sP,p8e=sP,g8e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Kae={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},x8e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function B$(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function v8e(t){var e="of:="+t.replace(AR,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function k5(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function y8e(t){return t.replace(/\./,"!")}var Pb={},Av={},Bb=typeof Map<"u";function gR(t,e,r){var n=0,a=t.length;if(r){if(Bb?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Bb?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(Bb?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function oP(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Ll=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=F2(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=qS(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Rp(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Bm(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){Wh(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function qae(t,e,r,n,a,s){try{n.cellNF&&(t.z=wn[e])}catch(l){if(n.WTF)throw l}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Ns(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(wn[e]==null&&Wh(gke[e]||"General",e),t.t==="e")t.w=t.w||_A[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=S2(t.v);else if(t.t==="d"){var o=yo(t.v);(o|0)===o?t.w=o.toString(10):t.w=S2(o)}else{if(t.v===void 0)return"";t.w=sg(t.v,Av)}else t.t==="d"?t.w=gd(e,yo(t.v),Av):t.w=gd(e,t.v,Av)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=KS(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=KS(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function b8e(t,e,r){if(t&&t["!ref"]){var n=ha(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function w8e(t,e){var r=ha(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Rn(r))}var N8e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,C8e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,_8e=/<(?:\w:)?hyperlink [^>]*>/mg,E8e=/"(\w*:\w*)"/,S8e=/<(?:\w:)?col\b[^>]*[\/]?>/g,I8e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,j8e=/<(?:\w:)?pageMargins[^>]*\/>/g,zae=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,P8e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,B8e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function T8e(t,e,r,n,a,s,o){if(!t)return t;n||(n={"!id":{}});var l=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=t.match(C8e);f?(u=t.slice(0,f.index),d=t.slice(f.index+f[0].length)):u=d=t;var A=u.match(zae);A?xR(A[0],l,a,r):(A=u.match(P8e))&&F8e(A[0],A[1]||"",l,a,r);var h=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var m=u.slice(h,h+50).match(E8e);m&&w8e(l,m[1])}var p=u.match(B8e);p&&p[1]&&q8e(p[1],a);var g=[];if(e.cellStyles){var v=u.match(S8e);v&&V8e(g,v)}f&&X8e(f[1],l,e,c,s,o);var y=d.match(I8e);y&&(l["!autofilter"]=$8e(y[0]));var b=[],w=d.match(N8e);if(w)for(h=0;h!=w.length;++h)b[h]=ha(w[h].slice(w[h].indexOf('"')+1));var P=d.match(_8e);P&&L8e(l,P,n);var j=d.match(j8e);if(j&&(l["!margins"]=U8e(_n(j[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=Rn(c)),e.sheetRows>0&&l["!ref"]){var _=ha(l["!ref"]);e.sheetRows<=+_.e.r&&(_.e.r=e.sheetRows-1,_.e.r>c.e.r&&(_.e.r=c.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>c.e.c&&(_.e.c=c.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Rn(_))}return g.length>0&&(l["!cols"]=g),b.length>0&&(l["!merges"]=b),l}function k8e(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Rn(t[r])+'"/>';return e+"</mergeCells>"}function xR(t,e,r,n){var a=_n(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=fa(Xa(a.codeName)))}function F8e(t,e,r,n,a){xR(t.slice(0,t.indexOf(">")),r,n,a)}function O8e(t,e,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=Lf(Ha(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+Br("outlinePr",null,u)}!s&&!l||(a[a.length]=Br("sheetPr",l,o))}var D8e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],R8e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function M8e(t){var e={sheet:1};return D8e.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),R8e.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=dR(t.password).toString(16).toUpperCase()),Br("sheetProtection",null,e)}function L8e(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=_n(Xa(e[a]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+fa(s.location))):(s.Target="#"+fa(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=ha(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=Nn({c:u,r:c});n?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function U8e(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Q8e(t){return Rp(t),Br("pageMargins",null,t)}function V8e(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=_n(e[n],!0);a.hidden&&(a.hidden=vs(a.hidden));var s=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,fR(a.width)),gm(a);s<=o;)t[s++]=Cs(a)}}function H8e(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=Br("col",null,oP(a,n)));return r[r.length]="</cols>",r.join("")}function $8e(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function G8e(t,e,r,n){var a=typeof t.ref=="string"?t.ref:Rn(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Qc(a);o.s.r==o.e.r&&(o.e.r=Qc(e["!ref"]).e.r,a=Rn(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Br("autoFilter",null,{ref:a})}var K8e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function q8e(t,e){e.Views||(e.Views=[{}]),(t.match(K8e)||[]).forEach(function(r,n){var a=_n(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),vs(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function z8e(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Br("sheetViews",Br("sheetView",null,a),{})}function W8e(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=_A[t.v];break;case"d":n&&n.cellDates?a=Ns(t.v,-1).toISOString():(t=Cs(t),t.t="n",a=""+(t.v=yo(Ns(t.v)))),typeof t.z>"u"&&(t.z=wn[14]);break;default:a=t.v;break}var l=fl("v",Ha(a)),c={r:e},u=Bm(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=fl("v",""+gR(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=Br("f",Ha(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),Br("c",l,c)}var X8e=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=I2("v"),o=I2("f");return function(c,u,d,f,A,h){for(var m=0,p="",g=[],v=[],y=0,b=0,w=0,P="",j,_,I=0,E=0,F,k,B=0,R=0,Y=Array.isArray(h.CellXf),me,pe=[],he=[],ge=Array.isArray(u),se=[],je={},Te=!1,D=!!d.sheetStubs,K=c.split(e),z=0,Q=K.length;z!=Q;++z){p=K[z].trim();var J=p.length;if(J!==0){var ee=0;e:for(m=0;m<J;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(d&&d.cellStyles){if(_=_n(p.slice(ee,m),!0),I=_.r!=null?parseInt(_.r,10):I+1,E=-1,d.sheetRows&&d.sheetRows<I)continue;je={},Te=!1,_.ht&&(Te=!0,je.hpt=parseFloat(_.ht),je.hpx=Mv(je.hpt)),_.hidden=="1"&&(Te=!0,je.hidden=!0),_.outlineLevel!=null&&(Te=!0,je.level=+_.outlineLevel),Te&&(se[I-1]=je)}break;case"<":ee=m;break}if(ee>=m)break;if(_=_n(p.slice(ee,m),!0),I=_.r!=null?parseInt(_.r,10):I+1,E=-1,!(d.sheetRows&&d.sheetRows<I)){f.s.r>I-1&&(f.s.r=I-1),f.e.r<I-1&&(f.e.r=I-1),d&&d.cellStyles&&(je={},Te=!1,_.ht&&(Te=!0,je.hpt=parseFloat(_.ht),je.hpx=Mv(je.hpt)),_.hidden=="1"&&(Te=!0,je.hidden=!0),_.outlineLevel!=null&&(Te=!0,je.level=+_.outlineLevel),Te&&(se[I-1]=je)),g=p.slice(m).split(t);for(var M=0;M!=g.length&&g[M].trim().charAt(0)=="<";++M);for(g=g.slice(M),m=0;m!=g.length;++m)if(p=g[m].trim(),p.length!==0){if(v=p.match(r),y=m,b=0,w=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,v!=null&&v.length===2){for(y=0,P=v[1],b=0;b!=P.length&&!((w=P.charCodeAt(b)-64)<1||w>26);++b)y=26*y+w;--y,E=y}else++E;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,_=_n(p.slice(0,b),!0),_.r||(_.r=Nn({r:I-1,c:E})),P=p.slice(b),j={t:""},(v=P.match(s))!=null&&v[1]!==""&&(j.v=fa(v[1])),d.cellFormula){if((v=P.match(o))!=null&&v[1]!==""){if(j.f=fa(Xa(v[1])).replace(/\r\n/g,`
`),d.xlfn||(j.f=S$(j.f)),v[0].indexOf('t="array"')>-1)j.F=(P.match(a)||[])[1],j.F.indexOf(":")>-1&&pe.push([ha(j.F),j.F]);else if(v[0].indexOf('t="shared"')>-1){k=_n(v[0]);var G=fa(Xa(v[1]));d.xlfn||(G=S$(G)),he[parseInt(k.si,10)]=[k,G,_.r]}}else(v=P.match(/<f[^>]*\/>/))&&(k=_n(v[0]),he[k.si]&&(j.f=KRe(he[k.si][1],he[k.si][2],_.r)));var ne=Js(_.r);for(b=0;b<pe.length;++b)ne.r>=pe[b][0].s.r&&ne.r<=pe[b][0].e.r&&ne.c>=pe[b][0].s.c&&ne.c<=pe[b][0].e.c&&(j.F=pe[b][1])}if(_.t==null&&j.v===void 0)if(j.f||j.F)j.v=0,j.t="n";else if(D)j.t="z";else continue;else j.t=_.t||"n";switch(f.s.c>E&&(f.s.c=E),f.e.c<E&&(f.e.c=E),j.t){case"n":if(j.v==""||j.v==null){if(!D)continue;j.t="z"}else j.v=parseFloat(j.v);break;case"s":if(typeof j.v>"u"){if(!D)continue;j.t="z"}else F=Pb[parseInt(j.v,10)],j.v=F.t,j.r=F.r,d.cellHTML&&(j.h=F.h);break;case"str":j.t="s",j.v=j.v!=null?Xa(j.v):"",d.cellHTML&&(j.h=X6(j.v));break;case"inlineStr":v=P.match(n),j.t="s",v!=null&&(F=uR(v[1]))?(j.v=F.t,d.cellHTML&&(j.h=F.h)):j.v="";break;case"b":j.v=vs(j.v);break;case"d":d.cellDates?j.v=Ns(j.v,1):(j.v=yo(Ns(j.v,1)),j.t="n");break;case"e":(!d||d.cellText!==!1)&&(j.w=j.v),j.v=Xne[j.v];break}if(B=R=0,me=null,Y&&_.s!==void 0&&(me=h.CellXf[_.s],me!=null&&(me.numFmtId!=null&&(B=me.numFmtId),d.cellStyles&&me.fillId!=null&&(R=me.fillId))),qae(j,B,R,d,A,h),d.cellDates&&Y&&j.t=="n"&&m1(wn[B])&&(j.t="d",j.v=nP(j.v)),_.cm&&d.xlmeta){var ve=(d.xlmeta.Cell||[])[+_.cm-1];ve&&ve.type=="XLDAPR"&&(j.D=!0)}if(ge){var V=Js(_.r);u[V.r]||(u[V.r]=[]),u[V.r][V.c]=j}else u[_.r]=j}}}}se.length>0&&(u["!rows"]=se)}}();function Y8e(t,e,r,n){var a=[],s=[],o=ha(t["!ref"]),l="",c,u="",d=[],f=0,A=0,h=t["!rows"],m=Array.isArray(t),p={r:u},g,v=-1;for(A=o.s.c;A<=o.e.c;++A)d[A]=Ys(A);for(f=o.s.r;f<=o.e.r;++f){for(s=[],u=Di(f),A=o.s.c;A<=o.e.c;++A){c=d[A]+u;var y=m?(t[f]||[])[A]:t[c];y!==void 0&&(l=W8e(y,c,t,e))!=null&&s.push(l)}(s.length>0||h&&h[f])&&(p={r:u},h&&h[f]&&(g=h[f],g.hidden&&(p.hidden=1),v=-1,g.hpx?v=O2(g.hpx):g.hpt&&(v=g.hpt),v>-1&&(p.ht=v,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),a[a.length]=Br("row",s.join(""),p))}if(h)for(;f<h.length;++f)h&&h[f]&&(p={r:f+1},g=h[f],g.hidden&&(p.hidden=1),v=-1,g.hpx?v=O2(g.hpx):g.hpt&&(v=g.hpt),v>-1&&(p.ht=v,p.customHeight=1),g.level&&(p.outlineLevel=g.level),a[a.length]=Br("row","",p));return a.join("")}function Wae(t,e,r,n){var a=[Mi,Br("worksheet",null,{xmlns:Pg[0],"xmlns:r":po.r})],s=r.SheetNames[t],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=ha(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Rn(d)}n||(n={}),c["!comments"]=[];var f=[];O8e(c,r,t,e,a),a[a.length]=Br("dimension",null,{ref:u}),a[a.length]=z8e(c,e,t,r),e.sheetFormat&&(a[a.length]=Br("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=H8e(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=Y8e(c,e),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=M8e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=G8e(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=k8e(c["!merges"]));var A=-1,h,m=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(h={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=La(n,-1,Ha(p[1].Target).replace(/#.*$/,""),Xn.HLINK),h["r:id"]="rId"+m),(A=p[1].Target.indexOf("#"))>-1&&(h.location=Ha(p[1].Target.slice(A+1))),p[1].Tooltip&&(h.tooltip=Ha(p[1].Tooltip)),a[a.length]=Br("hyperlink",null,h))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=Q8e(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=fl("ignoredErrors",Br("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(m=La(n,-1,"../drawings/drawing"+(t+1)+".xml",Xn.DRAW),a[a.length]=Br("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=f),c["!comments"].length>0&&(m=La(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Xn.VML),a[a.length]=Br("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function J8e(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function Z8e(t,e,r){var n=rr(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=O2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var f=-1,A=-1,h=d<<10;h<d+1<<10;++h){u.c=h;var m=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Nn(u)];m&&(f<0&&(f=h),A=h)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,A))}var p=n.l;return n.l=c,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}function eLe(t,e,r,n){var a=Z8e(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&pr(t,0,a)}var tLe=Fg,rLe=x1;function nLe(){}function aLe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=oFe(t),r}function sLe(t,e,r){r==null&&(r=rr(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return HS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Gne(t,r),r.slice(0,r.l)}function iLe(t){var e=Nd(t);return[e]}function oLe(t,e,r){return r==null&&(r=rr(8)),Bg(e,r)}function lLe(t){var e=Tg(t);return[e]}function cLe(t,e,r){return r==null&&(r=rr(4)),kg(e,r)}function uLe(t){var e=Nd(t),r=t.read_shift(1);return[e,r,"b"]}function dLe(t,e,r){return r==null&&(r=rr(9)),Bg(e,r),r.write_shift(1,t.v?1:0),r}function fLe(t){var e=Tg(t),r=t.read_shift(1);return[e,r,"b"]}function hLe(t,e,r){return r==null&&(r=rr(5)),kg(e,r),r.write_shift(1,t.v?1:0),r}function ALe(t){var e=Nd(t),r=t.read_shift(1);return[e,r,"e"]}function mLe(t,e,r){return r==null&&(r=rr(9)),Bg(e,r),r.write_shift(1,t.v),r}function pLe(t){var e=Tg(t),r=t.read_shift(1);return[e,r,"e"]}function gLe(t,e,r){return r==null&&(r=rr(8)),kg(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function xLe(t){var e=Nd(t),r=t.read_shift(4);return[e,r,"s"]}function vLe(t,e,r){return r==null&&(r=rr(12)),Bg(e,r),r.write_shift(4,e.v),r}function yLe(t){var e=Tg(t),r=t.read_shift(4);return[e,r,"s"]}function bLe(t,e,r){return r==null&&(r=rr(8)),kg(e,r),r.write_shift(4,e.v),r}function wLe(t){var e=Nd(t),r=Ul(t);return[e,r,"n"]}function NLe(t,e,r){return r==null&&(r=rr(16)),Bg(e,r),og(t.v,r),r}function Xae(t){var e=Tg(t),r=Ul(t);return[e,r,"n"]}function CLe(t,e,r){return r==null&&(r=rr(12)),kg(e,r),og(t.v,r),r}function _Le(t){var e=Nd(t),r=sR(t);return[e,r,"n"]}function ELe(t,e,r){return r==null&&(r=rr(12)),Bg(e,r),Kne(t.v,r),r}function SLe(t){var e=Tg(t),r=sR(t);return[e,r,"n"]}function ILe(t,e,r){return r==null&&(r=rr(8)),kg(e,r),Kne(t.v,r),r}function jLe(t){var e=Nd(t),r=rR(t);return[e,r,"is"]}function PLe(t){var e=Nd(t),r=Vl(t);return[e,r,"str"]}function BLe(t,e,r){return r==null&&(r=rr(12+4*t.v.length)),Bg(e,r),Uo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function TLe(t){var e=Tg(t),r=Vl(t);return[e,r,"str"]}function kLe(t,e,r){return r==null&&(r=rr(8+4*t.v.length)),kg(e,r),Uo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function FLe(t,e,r){var n=t.l+e,a=Nd(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"b"];if(r.cellFormula){t.l+=2;var l=iP(t,n-t.l,r);o[3]=Rl(l,null,a,r.supbooks,r)}else t.l=n;return o}function OLe(t,e,r){var n=t.l+e,a=Nd(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"e"];if(r.cellFormula){t.l+=2;var l=iP(t,n-t.l,r);o[3]=Rl(l,null,a,r.supbooks,r)}else t.l=n;return o}function DLe(t,e,r){var n=t.l+e,a=Nd(t);a.r=r["!row"];var s=Ul(t),o=[a,s,"n"];if(r.cellFormula){t.l+=2;var l=iP(t,n-t.l,r);o[3]=Rl(l,null,a,r.supbooks,r)}else t.l=n;return o}function RLe(t,e,r){var n=t.l+e,a=Nd(t);a.r=r["!row"];var s=Vl(t),o=[a,s,"str"];if(r.cellFormula){t.l+=2;var l=iP(t,n-t.l,r);o[3]=Rl(l,null,a,r.supbooks,r)}else t.l=n;return o}var MLe=Fg,LLe=x1;function ULe(t,e){return e==null&&(e=rr(4)),e.write_shift(4,t),e}function QLe(t,e){var r=t.l+e,n=Fg(t),a=nR(t),s=Vl(t),o=Vl(t),l=Vl(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function VLe(t,e){var r=rr(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));x1({s:Js(t[0]),e:Js(t[0])},r),aR("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return Uo(a||"",r),Uo(t[1].Tooltip||"",r),Uo("",r),r.slice(0,r.l)}function HLe(){}function $Le(t,e,r){var n=t.l+e,a=qne(t),s=t.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=A8e(t,n-t.l,r);o[1]=l}else t.l=n;return o}function GLe(t,e,r){var n=t.l+e,a=Fg(t),s=[a];if(r.cellFormula){var o=p8e(t,n-t.l,r);s[1]=o,t.l=n}else t.l=n;return s}function KLe(t,e,r){r==null&&(r=rr(18));var n=oP(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var Yae=["left","right","top","bottom","header","footer"];function qLe(t){var e={};return Yae.forEach(function(r){e[r]=Ul(t)}),e}function zLe(t,e){return e==null&&(e=rr(6*8)),Rp(t),Yae.forEach(function(r){og(t[r],e)}),e}function WLe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function XLe(t,e,r){r==null&&(r=rr(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function YLe(t){var e=rr(24);return e.write_shift(4,4),e.write_shift(4,1),x1(t,e),e}function JLe(t,e){return e==null&&(e=rr(16*4+2)),e.write_shift(2,t.password?dR(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function ZLe(){}function eUe(){}function tUe(t,e,r,n,a,s,o){if(!t)return t;var l=e||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,A=!1,h,m,p,g,v,y,b,w,P,j=[];l.biff=12,l["!row"]=0;var _=0,I=!1,E=[],F={},k=l.supbooks||a.supbooks||[[]];if(k.sharedf=F,k.arrayf=E,k.SheetNames=a.SheetNames||a.Sheets.map(function(ge){return ge.name}),!l.supbooks&&(l.supbooks=k,a.Names))for(var B=0;B<a.Names.length;++B)k[0][B+1]=a.Names[B];var R=[],Y=[],me=!1;D2[16]={n:"BrtShortReal",f:Xae};var pe;if(CA(t,function(se,je,Te){if(!A)switch(Te){case 148:u=se;break;case 0:h=se,l.sheetRows&&l.sheetRows<=h.r&&(A=!0),w=Di(g=h.r),l["!row"]=h.r,(se.hidden||se.hpt||se.level!=null)&&(se.hpt&&(se.hpx=Mv(se.hpt)),Y[se.r]=se);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:se[2]},se[2]){case"n":m.v=se[1];break;case"s":b=Pb[se[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!se[1];break;case"e":m.v=se[1],l.cellText!==!1&&(m.w=_A[m.v]);break;case"str":m.t="s",m.v=se[1];break;case"is":m.t="s",m.v=se[1].t;break}if((p=o.CellXf[se[0].iStyleRef])&&qae(m,p.numFmtId,null,l,s,o),v=se[0].c==-1?v+1:se[0].c,l.dense?(c[g]||(c[g]=[]),c[g][v]=m):c[Ys(v)+w]=m,l.cellFormula){for(I=!1,_=0;_<E.length;++_){var D=E[_];h.r>=D[0].s.r&&h.r<=D[0].e.r&&v>=D[0].s.c&&v<=D[0].e.c&&(m.F=Rn(D[0]),I=!0)}!I&&se.length>3&&(m.f=se[3])}if(d.s.r>h.r&&(d.s.r=h.r),d.s.c>v&&(d.s.c=v),d.e.r<h.r&&(d.e.r=h.r),d.e.c<v&&(d.e.c=v),l.cellDates&&p&&m.t=="n"&&m1(wn[p.numFmtId])){var K=yp(m.v);K&&(m.t="d",m.v=new Date(K.y,K.m-1,K.d,K.H,K.M,K.S,K.u))}pe&&(pe.type=="XLDAPR"&&(m.D=!0),pe=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;m={t:"z",v:void 0},v=se[0].c==-1?v+1:se[0].c,l.dense?(c[g]||(c[g]=[]),c[g][v]=m):c[Ys(v)+w]=m,d.s.r>h.r&&(d.s.r=h.r),d.s.c>v&&(d.s.c=v),d.e.r<h.r&&(d.e.r=h.r),d.e.c<v&&(d.e.c=v),pe&&(pe.type=="XLDAPR"&&(m.D=!0),pe=void 0);break;case 176:j.push(se);break;case 49:pe=((l.xlmeta||{}).Cell||[])[se-1];break;case 494:var z=n["!id"][se.relId];for(z?(se.Target=z.Target,se.loc&&(se.Target+="#"+se.loc),se.Rel=z):se.relId==""&&(se.Target="#"+se.loc),g=se.rfx.s.r;g<=se.rfx.e.r;++g)for(v=se.rfx.s.c;v<=se.rfx.e.c;++v)l.dense?(c[g]||(c[g]=[]),c[g][v]||(c[g][v]={t:"z",v:void 0}),c[g][v].l=se):(y=Nn({c:v,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=se);break;case 426:if(!l.cellFormula)break;E.push(se),P=l.dense?c[g][v]:c[Ys(v)+w],P.f=Rl(se[1],d,{r:h.r,c:v},k,l),P.F=Rn(se[0]);break;case 427:if(!l.cellFormula)break;F[Nn(se[0].s)]=se[1],P=l.dense?c[g][v]:c[Ys(v)+w],P.f=Rl(se[1],d,{r:h.r,c:v},k,l);break;case 60:if(!l.cellStyles)break;for(;se.e>=se.s;)R[se.e--]={width:se.w/256,hidden:!!(se.flags&1),level:se.level},me||(me=!0,fR(se.w/256)),gm(R[se.e+1]);break;case 161:c["!autofilter"]={ref:Rn(se)};break;case 476:c["!margins"]=se;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),se.name&&(a.Sheets[r].CodeName=se.name),(se.above||se.left)&&(c["!outline"]={above:se.above,left:se.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),se.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!je.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+Te.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Rn(u||d)),l.sheetRows&&c["!ref"]){var he=ha(c["!ref"]);l.sheetRows<=+he.e.r&&(he.e.r=l.sheetRows-1,he.e.r>d.e.r&&(he.e.r=d.e.r),he.e.r<he.s.r&&(he.s.r=he.e.r),he.e.c>d.e.c&&(he.e.c=d.e.c),he.e.c<he.s.c&&(he.s.c=he.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Rn(he))}return j.length>0&&(c["!merges"]=j),R.length>0&&(c["!cols"]=R),Y.length>0&&(c["!rows"]=Y),c}function rUe(t,e,r,n,a,s,o){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=Cs(e),e.z=e.z||wn[14],e.v=yo(Ns(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=Bm(a.cellXfs,e,a),e.l&&s["!links"].push([Nn(c),e.l]),e.c&&s["!comments"].push([Nn(c),e.c]),e.t){case"s":case"str":return a.bookSST?(l=gR(a.Strings,e.v,a.revStrings),c.t="s",c.v=l,o?pr(t,18,bLe(e,c)):pr(t,7,vLe(e,c))):(c.t="str",o?pr(t,17,kLe(e,c)):pr(t,6,BLe(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?pr(t,13,ILe(e,c)):pr(t,2,ELe(e,c)):o?pr(t,16,CLe(e,c)):pr(t,5,NLe(e,c)),!0;case"b":return c.t="b",o?pr(t,15,hLe(e,c)):pr(t,4,dLe(e,c)),!0;case"e":return c.t="e",o?pr(t,14,gLe(e,c)):pr(t,3,mLe(e,c)),!0}return o?pr(t,12,cLe(e,c)):pr(t,1,oLe(e,c)),!0}function nUe(t,e,r,n){var a=ha(e["!ref"]||"A1"),s,o="",l=[];pr(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=Di(d),eLe(t,e,a,d);var f=!1;if(d<=a.e.r)for(var A=a.s.c;A<=a.e.c;++A){d===a.s.r&&(l[A]=Ys(A)),s=l[A]+o;var h=c?(e[d]||[])[A]:e[s];if(!h){f=!1;continue}f=rUe(t,h,d,A,n,e,f)}}pr(t,146)}function aUe(t,e){!e||!e["!merges"]||(pr(t,177,ULe(e["!merges"].length)),e["!merges"].forEach(function(r){pr(t,176,LLe(r))}),pr(t,178))}function sUe(t,e){!e||!e["!cols"]||(pr(t,390),e["!cols"].forEach(function(r,n){r&&pr(t,60,KLe(n,r))}),pr(t,391))}function iUe(t,e){!e||!e["!ref"]||(pr(t,648),pr(t,649,YLe(ha(e["!ref"]))),pr(t,650))}function oUe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=La(r,-1,n[1].Target.replace(/#.*$/,""),Xn.HLINK);pr(t,494,VLe(n,a))}}),delete e["!links"]}function lUe(t,e,r,n){if(e["!comments"].length>0){var a=La(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Xn.VML);pr(t,551,aR("rId"+a)),e["!legacy"]=a}}function cUe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:Rn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Qc(s);l.s.r==l.e.r&&(l.e.r=Qc(e["!ref"]).e.r,s=Rn(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),pr(t,161,x1(ha(s))),pr(t,162)}}function uUe(t,e,r){pr(t,133),pr(t,137,XLe(e,r)),pr(t,138),pr(t,134)}function dUe(t,e){e["!protect"]&&pr(t,535,JLe(e["!protect"]))}function fUe(t,e,r,n){var a=Uc(),s=r.SheetNames[t],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=ha(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],pr(a,129),(r.vbaraw||o["!outline"])&&pr(a,147,sLe(l,o["!outline"])),pr(a,148,rLe(c)),uUe(a,o,r.Workbook),sUe(a,o),nUe(a,o,t,e),dUe(a,o),cUe(a,o,r,t),aUe(a,o),oUe(a,o,n),o["!margins"]&&pr(a,476,zLe(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&iUe(a,o),lUe(a,o,t,n),pr(a,130),a.end()}function hUe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(e[+o[1]]=r?+o[2]:o[2])});var a=fa((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function AUe(t,e,r,n,a,s){var o=s||{"!type":"chart"};if(!t)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var A=hUe(f);d.s.r=d.s.c=0,d.e.c=l,u=Ys(l),A[0].forEach(function(h,m){o[u+Di(m)]={t:"n",v:h,z:A[1]},c=m}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=Rn(d)),o}function mUe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=t.match(zae);return l&&xR(l[0],s,a,r),(o=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function pUe(t,e){t.l+=10;var r=Vl(t);return{name:r}}function gUe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return CA(t,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var vR=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],xUe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],vUe=[],yUe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function T$(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=vs(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function k$(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=vs(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function Jae(t){k$(t.WBProps,vR),k$(t.CalcPr,yUe),T$(t.WBView,xUe),T$(t.Sheets,vUe),Av.date1904=vs(t.WBProps.date1904)}function bUe(t){return!t.Workbook||!t.Workbook.WBProps?"false":vs(t.Workbook.WBProps.date1904)?"true":"false"}var wUe="][*?/\\".split("");function Zae(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return wUe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function NUe(t,e,r){t.forEach(function(n,a){Zae(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=e&&e[a]&&e[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function CUe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];NUe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)b8e(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var _Ue=/<\w+:workbook/;function EUe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},o=0;if(t.replace(ql,function(c,u){var d=_n(c);switch(rh(d[0])){case"<?xml":break;case"<workbook":c.match(_Ue)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":vR.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=vs(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Xa(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=fa(Xa(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Xa(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),vs(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=fa(Xa(t.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Pg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Jae(r),r}function ese(t){var e=[Mi];e[e.length]=Br("workbook",null,{xmlns:Pg[0],"xmlns:r":po.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(vR.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Br("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:Ha(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=Br("sheet",null,o)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=Br("definedName",Ha(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function SUe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=zk(t),r.name=Vl(t),r}function IUe(t,e){return e||(e=rr(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),aR(t.strRelID,e),Uo(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function jUe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?Vl(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function PUe(t,e){e||(e=rr(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),Gne(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function BUe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function TUe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=lFe(t),o=m8e(t,0,r),l=nR(t);t.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function kUe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],D2[16]={n:"BrtFRTArchID$",f:BUe},CA(t,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=Rl(c.Ptg,null,null,o,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),Jae(r),r.Names=s,r.supbooks=o,r}function FUe(t,e){pr(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};pr(t,156,IUe(a))}pr(t,144)}function OUe(t,e){e||(e=rr(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Uo("SheetJS",e),Uo(DS.version,e),Uo(DS.version,e),Uo("7262",e),e.length>e.l?e.slice(0,e.l):e}function DUe(t,e){e||(e=rr(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function RUe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(pr(t,135),pr(t,158,DUe(a)),pr(t,136))}}function MUe(t,e){var r=Uc();return pr(r,131),pr(r,128,OUe()),pr(r,153,PUe(t.Workbook&&t.Workbook.WBProps||null)),RUe(r,t),FUe(r,t),pr(r,132),r.end()}function LUe(t,e,r){return e.slice(-4)===".bin"?kUe(t,r):EUe(t,r)}function UUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?tUe(t,n,r,a,s,o,l):T8e(t,n,r,a,s,o,l)}function QUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?gUe(t,n,r,a,s):mUe(t,n,r,a,s)}function VUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?$Re():GRe()}function HUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?VRe():HRe()}function $Ue(t,e,r,n){return e.slice(-4)===".bin"?L6e(t,r,n):S6e(t,r,n)}function GUe(t,e,r){return Fae(t,r)}function KUe(t,e,r){return e.slice(-4)===".bin"?KDe(t,r):HDe(t,r)}function qUe(t,e,r){return e.slice(-4)===".bin"?RRe(t,r):IRe(t,r)}function zUe(t,e,r){return e.slice(-4)===".bin"?_Re(t):NRe(t)}function WUe(t,e,r,n){return r.slice(-4)===".bin"?ERe(t,e,r,n):void 0}function XUe(t,e,r){return e.slice(-4)===".bin"?yRe(t,e,r):wRe(t,e,r)}function YUe(t,e,r){return(e.slice(-4)===".bin"?MUe:ese)(t)}function JUe(t,e,r,n,a){return(e.slice(-4)===".bin"?fUe:Wae)(t,r,n,a)}function ZUe(t,e,r){return(e.slice(-4)===".bin"?W6e:Tae)(t,r)}function e7e(t,e,r){return(e.slice(-4)===".bin"?WDe:Cae)(t,r)}function t7e(t,e,r){return(e.slice(-4)===".bin"?MRe:Rae)(t)}function r7e(t){return(t.slice(-4)===".bin"?bRe:Oae)()}var tse=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,rse=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Od(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(tse),s,o,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(rse),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),n[l]=s[2].slice(1,s[2].length-1));return n}function n7e(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(tse),a,s,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(rse),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),r[o]=a[2].slice(1,a[2].length-1));return r}var Tb;function a7e(t,e){var r=Tb[t]||fa(t);return r==="General"?sg(e):gd(r,e)}function s7e(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=vs(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Ns(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[fa(e)]=a}function i7e(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||_A[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=S2(t.v):t.w=sg(t.v):t.w=a7e(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=Tb[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&m1(n)){var a=yp(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function o7e(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=v6e[n.Pattern]||n.Pattern)}t[e.ID]=e}function l7e(t,e,r,n,a,s,o,l,c,u){var d="General",f=n.StyleID,A={};u=u||{};var h=[],m=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&h.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=vs(t);break;case"String":n.t="s",n.r=XH(fa(t)),n.v=t.indexOf("<")>-1?fa(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Ns(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=fa(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Xne[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=XH(e||t));break}if(i7e(n,d,u),u.cellFormula!==!1)if(n.Formula){var p=fa(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=hv(p,a),delete n.Formula,n.ArrayRange=="RC"?n.F=hv("RC:RC",a):n.ArrayRange&&(n.F=hv(n.ArrayRange,a),c.push([ha(n.F),n.F]))}else for(m=0;m<c.length;++m)a.r>=c[m][0].s.r&&a.r<=c[m][0].e.r&&a.c>=c[m][0].s.c&&a.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(h.forEach(function(g){!A.patternType&&g.patternType&&(A.patternType=g.patternType)}),n.s=A),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function c7e(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function F5(t,e){var r=e||{};p1();var n=Ky(Y6(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Xa(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=Cs(r);return o.type="string",Rv.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(we){a.indexOf("<"+we)>=0&&(s=!0)}),s)return z7e(n,r);Tb={"General Number":"General","General Date":wn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":wn[15],"Short Date":wn[14],"Long Time":wn[19],"Medium Time":wn[18],"Short Time":wn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:wn[2],Standard:wn[4],Percent:wn[10],Scientific:wn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],A=r.dense?[]:{},h="",m={},p={},g=Od('<Data ss:Type="String">'),v=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},P={},j={},_="",I=0,E=[],F={},k={},B=0,R=[],Y=[],me={},pe=[],he,ge=!1,se=[],je=[],Te={},D=0,K=0,z={Sheets:[],WBProps:{date1904:!1}},Q={};P2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var J="";l=P2.exec(n);)switch(l[3]=(J=l[3]).toLowerCase()){case"data":if(J=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?l7e(n.slice(v,l.index),_,g,c[c.length-1][0]=="comment"?me:m,{c:y,r:b},P,pe[y],p,se,r):(_="",g=Od(l[0]),v=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(Y.length>0&&(m.c=Y),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(A[b]||(A[b]=[]),A[b][y]=m):A[Ys(y)+Di(b)]=m),m.HRef&&(m.l={Target:fa(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(D=y+(parseInt(m.MergeAcross,10)|0),K=b+(parseInt(m.MergeDown,10)|0),E.push({s:{c:y,r:b},e:{c:D,r:K}})),!r.sheetStubs)m.MergeAcross?y=D+1:++y;else if(m.MergeAcross||m.MergeDown){for(var ee=y;ee<=D;++ee)for(var M=b;M<=K;++M)(ee>y||M>b)&&(r.dense?(A[M]||(A[M]=[]),A[M][ee]={t:"z"}):A[Ys(ee)+Di(M)]={t:"z"});y=D+1}else++y;else m=n7e(l[0]),m.Index&&(y=+m.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),l[0].slice(-2)==="/>"&&++y,Y=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),l[0].slice(-2)==="/>"&&(p=Od(l[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=Od(l[0]),p.Index&&(b=+p.Index-1),Te={},(p.AutoFitHeight=="0"||p.Height)&&(Te.hpx=parseInt(p.Height,10),Te.hpt=O2(Te.hpx),je[b]=Te),p.Hidden=="1"&&(Te.hidden=!0,je[b]=Te));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(h),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(A["!ref"]=Rn(w),r.sheetRows&&r.sheetRows<=w.e.r&&(A["!fullref"]=A["!ref"],w.e.r=r.sheetRows-1,A["!ref"]=Rn(w))),E.length&&(A["!merges"]=E),pe.length>0&&(A["!cols"]=pe),je.length>0&&(A["!rows"]=je),d[h]=A}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([l[3],!1]),u=Od(l[0]),h=fa(u.Name),A=r.dense?[]:{},E=[],se=[],je=[],Q={name:h,Hidden:0},z.Sheets.push(Q);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),pe=[],ge=!1}break;case"style":l[1]==="/"?o7e(P,j,r):j=Od(l[0]);break;case"numberformat":j.nf=fa(Od(l[0]).Format||"General"),Tb[j.nf]&&(j.nf=Tb[j.nf]);for(var G=0;G!=392&&wn[G]!=j.nf;++G);if(G==392){for(G=57;G!=392;++G)if(wn[G]==null){Wh(j.nf,G);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(he=Od(l[0]),he.Hidden&&(he.hidden=!0,delete he.Hidden),he.Width&&(he.wpx=parseInt(he.Width,10)),!ge&&he.wpx>10){ge=!0,Ll=Pae;for(var ne=0;ne<pe.length;++ne)pe[ne]&&gm(pe[ne])}ge&&gm(he),pe[he.Index-1||pe.length]=he;for(var ve=0;ve<+he.Span;++ve)pe[pe.length]=Cs(he);break;case"namedrange":if(l[1]==="/")break;z.Names||(z.Names=[]);var V=_n(l[0]),qe={Name:V.Name,Ref:hv(V.RefersTo.slice(1),{r:0,c:0})};z.Sheets.length>0&&(qe.Sheet=z.Sheets.length-1),z.Names.push(qe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=n.slice(I,l.index):I=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;j.Interior=Od(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?kFe(F,J,n.slice(B,l.index)):B=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));c7e(me),Y.push(me)}else c.push([l[3],!1]),u=Od(l[0]),me={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var ie=Od(l[0]);A["!autofilter"]={ref:hv(ie.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return M$(n,r);var re=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:re=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:re=!1}break;case"excelworkbook":switch(l[3]){case"date1904":z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:re=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:re=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(B,l.index)){case"SheetHidden":Q.Hidden=1;break;case"SheetVeryHidden":Q.Hidden=2;break}else B=l.index+l[0].length;break;case"header":A["!margins"]||Rp(A["!margins"]={},"xlml"),isNaN(+_n(l[0]).Margin)||(A["!margins"].header=+_n(l[0]).Margin);break;case"footer":A["!margins"]||Rp(A["!margins"]={},"xlml"),isNaN(+_n(l[0]).Margin)||(A["!margins"].footer=+_n(l[0]).Margin);break;case"pagemargins":var Fe=_n(l[0]);A["!margins"]||Rp(A["!margins"]={},"xlml"),isNaN(+Fe.Top)||(A["!margins"].top=+Fe.Top),isNaN(+Fe.Left)||(A["!margins"].left=+Fe.Left),isNaN(+Fe.Right)||(A["!margins"].right=+Fe.Right),isNaN(+Fe.Bottom)||(A["!margins"].bottom=+Fe.Bottom);break;case"displayrighttoleft":z.Views||(z.Views=[]),z.Views[0]||(z.Views[0]={}),z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:re=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:re=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:re=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:re=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:re=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:re=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:re=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:re=!1}break;case"smarttags":break;default:re=!1;break}if(re||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?s7e(k,J,R,n.slice(B,l.index)):(R=l,B=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var de={};return!r.bookSheets&&!r.bookProps&&(de.Sheets=d),de.SheetNames=f,de.Workbook=z,de.SSF=Cs(wn),de.Props=F,de.Custprops=k,de}function tF(t,e){switch(bR(e=e||{}),e.type||"base64"){case"base64":return F5(Nu(t),e);case"binary":case"buffer":case"file":return F5(t,e);case"array":return F5(jm(t),e)}}function u7e(t,e){var r=[];return t.Props&&r.push(FFe(t.Props,e)),t.Custprops&&r.push(OFe(t.Props,t.Custprops)),r.join("")}function d7e(){return""}function f7e(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(Br("NumberFormat",null,{"ss:Format":Ha(wn[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(Br("Style",s.join(""),o))}),Br("Styles",r.join(""))}function nse(t){return Br("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+mR(t.Ref,{r:0,c:0})})}function h7e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(nse(a)))}return Br("Names",r.join(""))}function A7e(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(nse(l)))}return s.join("")}function m7e(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(Br("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(Br("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(Br("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Br("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(fl("ProtectContents","True")),t["!protect"].objects&&a.push(fl("ProtectObjects","True")),t["!protect"].scenarios&&a.push(fl("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(fl("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(fl("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":Br("WorksheetOptions",a.join(""),{xmlns:lu.x})}function p7e(t){return t.map(function(e){var r=Rke(e.t||""),n=Br("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Br("Comment",n,{"ss:Author":e.a})}).join("")}function g7e(t,e,r,n,a,s,o){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+Ha(mR(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var c=Js(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=Ha(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=Ha(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",A="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",A=String(t.v);break;case"b":f="Boolean",A=t.v?"1":"0";break;case"e":f="Error",A=_A[t.v];break;case"d":f="DateTime",A=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||wn[14]);break;case"s":f="String",A=Dke(t.v||"");break}var h=Bm(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+h),l["ss:Index"]=o.c+1;var m=t.v!=null?A:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+m+"</Data>";return(t.c||[]).length>0&&(p+=p7e(t.c)),Br("Cell",p,l)}function x7e(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Mv(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function v7e(t,e,r,n){if(!t["!ref"])return"";var a=ha(t["!ref"]),s=t["!merges"]||[],o=0,l=[];t["!cols"]&&t["!cols"].forEach(function(g,v){gm(g);var y=!!g.width,b=oP(v,g),w={"ss:Index":v+1};y&&(w["ss:Width"]=k2(b.width)),g.hidden&&(w["ss:Hidden"]="1"),l.push(Br("Column",null,w))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[x7e(u,(t["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var A=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>f)&&!(s[o].s.r>u)&&!(s[o].e.c<f)&&!(s[o].e.r<u)){(s[o].s.c!=f||s[o].s.r!=u)&&(A=!0);break}if(!A){var h={r:u,c:f},m=Nn(h),p=c?(t[u]||[])[f]:t[m];d.push(g7e(p,m,t,e,r,n,h))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function y7e(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],o=s?A7e(s,e,t,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?v7e(s,e,t,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(m7e(s,e,t,r)),n.join("")}function b7e(t,e){e||(e={}),t.SSF||(t.SSF=Cs(wn)),t.SSF&&(p1(),eP(t.SSF),e.revssf=rP(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Bm(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(u7e(t,e)),r.push(d7e()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Br("Worksheet",y7e(n,e,t),{"ss:Name":Ha(t.SheetNames[n])}));return r[2]=f7e(t,e),r[3]=h7e(t),Mi+Br("Workbook",r.join(""),{xmlns:lu.ss,"xmlns:o":lu.o,"xmlns:x":lu.x,"xmlns:ss":lu.ss,"xmlns:dt":lu.dt,"xmlns:html":lu.html})}function w7e(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=hFe(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=AFe(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var N7e=[60,1084,2066,2165,2175];function C7e(t,e,r,n,a){var s=n,o=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=s;for(var c=Mh(r,r.l),u=rF[c],d=0;u!=null&&N7e.indexOf(c)>-1;)s=Mh(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=rF[c=Mh(r,r.l)];var f=Mo(o);ul(f,0);var A=0;f.lens=[];for(var h=0;h<o.length;++h)f.lens.push(A),A+=o[h].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,a)}function Cf(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=wn[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||_A[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=S2(t.v):t.w=sg(t.v):t.w=gd(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&m1(wn[n]||String(n))){var a=yp(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function e_(t,e,r){return{v:t,ixfe:e,t:r}}function _7e(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},o={},l=null,c=[],u="",d={},f,A="",h,m,p,g,v={},y=[],b,w,P=[],j=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},I={},E=function(ce){return ce<8?Fp[ce]:ce<64&&j[ce-8]||Fp[ce]},F=function(ce,te,Ne){var Re=te.XF.data;if(!(!Re||!Re.patternType||!Ne||!Ne.cellStyles)){te.s={},te.s.patternType=Re.patternType;var ye;(ye=T2(E(Re.icvFore)))&&(te.s.fgColor={rgb:ye}),(ye=T2(E(Re.icvBack)))&&(te.s.bgColor={rgb:ye})}},k=function(ce,te,Ne){if(!(Te>1)&&!(Ne.sheetRows&&ce.r>=Ne.sheetRows)){if(Ne.cellStyles&&te.XF&&te.XF.data&&F(ce,te,Ne),delete te.ixfe,delete te.XF,f=ce,A=Nn(ce),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),ce.r<o.s.r&&(o.s.r=ce.r),ce.c<o.s.c&&(o.s.c=ce.c),ce.r+1>o.e.r&&(o.e.r=ce.r+1),ce.c+1>o.e.c&&(o.e.c=ce.c+1),Ne.cellFormula&&te.f){for(var Re=0;Re<y.length;++Re)if(!(y[Re][0].s.c>ce.c||y[Re][0].s.r>ce.r)&&!(y[Re][0].e.c<ce.c||y[Re][0].e.r<ce.r)){te.F=Rn(y[Re][0]),(y[Re][0].s.c!=ce.c||y[Re][0].s.r!=ce.r)&&delete te.f,te.f&&(te.f=""+Rl(y[Re][1],o,ce,se,B));break}}Ne.dense?(a[ce.r]||(a[ce.r]=[]),a[ce.r][ce.c]=te):a[A]=te}},B={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(B.password=e.password);var R,Y=[],me=[],pe=[],he=[],ge=!1,se=[];se.SheetNames=B.snames,se.sharedf=B.sharedf,se.arrayf=B.arrayf,se.names=[],se.XTI=[];var je=0,Te=0,D=0,K=[],z=[],Q;B.codepage=1200,zd(1200);for(var J=!1;t.l<t.length-1;){var ee=t.l,M=t.read_shift(2);if(M===0&&je===10)break;var G=t.l===t.length?0:t.read_shift(2),ne=rF[M];if(ne&&ne.f){if(e.bookSheets&&je===133&&M!==133)break;if(je=M,ne.r===2||ne.r==12){var ve=t.read_shift(2);if(G-=2,!B.enc&&ve!==M&&((ve&255)<<8|ve>>8)!==M)throw new Error("rt mismatch: "+ve+"!="+M);ne.r==12&&(t.l+=10,G-=10)}var V={};if(M===10?V=ne.f(t,G,B):V=C7e(M,ne,t,G,B),Te==0&&[9,521,1033,2057].indexOf(je)===-1)continue;switch(M){case 34:r.opts.Date1904=_.WBProps.date1904=V;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(B.enc||(t.l=0),B.enc=V,!e.password)throw new Error("File is password-protected");if(V.valid==null)throw new Error("Encryption scheme unsupported");if(!V.valid)throw new Error("Password is incorrect");break;case 92:B.lastuser=V;break;case 66:var qe=Number(V);switch(qe){case 21010:qe=1200;break;case 32768:qe=1e4;break;case 32769:qe=1252;break}zd(B.codepage=qe),J=!0;break;case 317:B.rrtabid=V;break;case 25:B.winlocked=V;break;case 439:r.opts.RefreshAll=V;break;case 12:r.opts.CalcCount=V;break;case 16:r.opts.CalcDelta=V;break;case 17:r.opts.CalcIter=V;break;case 13:r.opts.CalcMode=V;break;case 14:r.opts.CalcPrecision=V;break;case 95:r.opts.CalcSaveRecalc=V;break;case 15:B.CalcRefMode=V;break;case 2211:r.opts.FullCalc=V;break;case 129:V.fDialog&&(a["!type"]="dialog"),V.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),V.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:P.push(V);break;case 430:se.push([V]),se[se.length-1].XTI=[];break;case 35:case 547:se[se.length-1].push(V);break;case 24:case 536:Q={Name:V.Name,Ref:Rl(V.rgce,o,null,se,B)},V.itab>0&&(Q.Sheet=V.itab-1),se.names.push(Q),se[0]||(se[0]=[],se[0].XTI=[]),se[se.length-1].push(V),V.Name=="_xlnm._FilterDatabase"&&V.itab>0&&V.rgce&&V.rgce[0]&&V.rgce[0][0]&&V.rgce[0][0][0]=="PtgArea3d"&&(z[V.itab-1]={ref:Rn(V.rgce[0][0][1][2])});break;case 22:B.ExternCount=V;break;case 23:se.length==0&&(se[0]=[],se[0].XTI=[]),se[se.length-1].XTI=se[se.length-1].XTI.concat(V),se.XTI=se.XTI.concat(V);break;case 2196:if(B.biff<8)break;Q!=null&&(Q.Comment=V[1]);break;case 18:a["!protect"]=V;break;case 19:V!==0&&B.WTF&&console.error("Password verifier: "+V);break;case 133:s[V.pos]=V,B.snames.push(V.name);break;case 10:{if(--Te)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=Rn(o),e.sheetRows&&e.sheetRows<=o.e.r){var ie=o.e.r;o.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Rn(o),o.e.r=ie}o.e.r++,o.e.c++}Y.length>0&&(a["!merges"]=Y),me.length>0&&(a["!objects"]=me),pe.length>0&&(a["!cols"]=pe),he.length>0&&(a["!rows"]=he),_.Sheets.push(I)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(B.biff===8&&(B.biff={9:2,521:3,1033:4}[M]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[V.BIFFVer]||8),B.biffguess=V.BIFFVer==0,V.BIFFVer==0&&V.dt==4096&&(B.biff=5,J=!0,zd(B.codepage=28591)),B.biff==8&&V.BIFFVer==0&&V.dt==16&&(B.biff=2),Te++)break;if(a=e.dense?[]:{},B.biff<8&&!J&&(J=!0,zd(B.codepage=e.codepage||1252)),B.biff<5||V.BIFFVer==0&&V.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var re={pos:t.l-G,name:u};s[re.pos]=re,B.snames.push(u)}else u=(s[ee]||{name:""}).name;V.dt==32&&(a["!type"]="chart"),V.dt==64&&(a["!type"]="macro"),Y=[],me=[],B.arrayf=y=[],pe=[],he=[],ge=!1,I={Hidden:(s[ee]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[V.r]||[])[V.c]:a[Nn({c:V.c,r:V.r})])&&++V.c,b={ixfe:V.ixfe,XF:P[V.ixfe]||{},v:V.val,t:"n"},D>0&&(b.z=K[b.ixfe>>8&63]),Cf(b,e,r.opts.Date1904),k({c:V.c,r:V.r},b,e);break;case 5:case 517:b={ixfe:V.ixfe,XF:P[V.ixfe],v:V.val,t:V.t},D>0&&(b.z=K[b.ixfe>>8&63]),Cf(b,e,r.opts.Date1904),k({c:V.c,r:V.r},b,e);break;case 638:b={ixfe:V.ixfe,XF:P[V.ixfe],v:V.rknum,t:"n"},D>0&&(b.z=K[b.ixfe>>8&63]),Cf(b,e,r.opts.Date1904),k({c:V.c,r:V.r},b,e);break;case 189:for(var Fe=V.c;Fe<=V.C;++Fe){var de=V.rkrec[Fe-V.c][0];b={ixfe:de,XF:P[de],v:V.rkrec[Fe-V.c][1],t:"n"},D>0&&(b.z=K[b.ixfe>>8&63]),Cf(b,e,r.opts.Date1904),k({c:Fe,r:V.r},b,e)}break;case 6:case 518:case 1030:{if(V.val=="String"){l=V;break}if(b=e_(V.val,V.cell.ixfe,V.tt),b.XF=P[b.ixfe],e.cellFormula){var we=V.formula;if(we&&we[0]&&we[0][0]&&we[0][0][0]=="PtgExp"){var Le=we[0][0][1][0],Ge=we[0][0][1][1],ft=Nn({r:Le,c:Ge});v[ft]?b.f=""+Rl(V.formula,o,V.cell,se,B):b.F=((e.dense?(a[Le]||[])[Ge]:a[ft])||{}).F}else b.f=""+Rl(V.formula,o,V.cell,se,B)}D>0&&(b.z=K[b.ixfe>>8&63]),Cf(b,e,r.opts.Date1904),k(V.cell,b,e),l=V}break;case 7:case 519:if(l)l.val=V,b=e_(V,l.cell.ixfe,"s"),b.XF=P[b.ixfe],e.cellFormula&&(b.f=""+Rl(l.formula,o,l.cell,se,B)),D>0&&(b.z=K[b.ixfe>>8&63]),Cf(b,e,r.opts.Date1904),k(l.cell,b,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(V);var ht=Nn(V[0].s);if(h=e.dense?(a[V[0].s.r]||[])[V[0].s.c]:a[ht],e.cellFormula&&h){if(!l||!ht||!h)break;h.f=""+Rl(V[1],o,V[0],se,B),h.F=Rn(V[0])}}break;case 1212:{if(!e.cellFormula)break;if(A){if(!l)break;v[Nn(l.cell)]=V[0],h=e.dense?(a[l.cell.r]||[])[l.cell.c]:a[Nn(l.cell)],(h||{}).f=""+Rl(V[0],o,f,se,B)}}break;case 253:b=e_(c[V.isst].t,V.ixfe,"s"),c[V.isst].h&&(b.h=c[V.isst].h),b.XF=P[b.ixfe],D>0&&(b.z=K[b.ixfe>>8&63]),Cf(b,e,r.opts.Date1904),k({c:V.c,r:V.r},b,e);break;case 513:e.sheetStubs&&(b={ixfe:V.ixfe,XF:P[V.ixfe],t:"z"},D>0&&(b.z=K[b.ixfe>>8&63]),Cf(b,e,r.opts.Date1904),k({c:V.c,r:V.r},b,e));break;case 190:if(e.sheetStubs)for(var xt=V.c;xt<=V.C;++xt){var jt=V.ixfe[xt-V.c];b={ixfe:jt,XF:P[jt],t:"z"},D>0&&(b.z=K[b.ixfe>>8&63]),Cf(b,e,r.opts.Date1904),k({c:xt,r:V.r},b,e)}break;case 214:case 516:case 4:b=e_(V.val,V.ixfe,"s"),b.XF=P[b.ixfe],D>0&&(b.z=K[b.ixfe>>8&63]),Cf(b,e,r.opts.Date1904),k({c:V.c,r:V.r},b,e);break;case 0:case 512:Te===1&&(o=V);break;case 252:c=V;break;case 1054:if(B.biff==4){K[D++]=V[1];for(var kt=0;kt<D+163&&wn[kt]!=V[1];++kt);kt>=163&&Wh(V[1],D+163)}else Wh(V[1],V[0]);break;case 30:{K[D++]=V;for(var wt=0;wt<D+163&&wn[wt]!=V;++wt);wt>=163&&Wh(V,D+163)}break;case 229:Y=Y.concat(V);break;case 93:me[V.cmo[0]]=B.lastobj=V;break;case 438:B.lastobj.TxO=V;break;case 127:B.lastobj.ImData=V;break;case 440:for(g=V[0].s.r;g<=V[0].e.r;++g)for(p=V[0].s.c;p<=V[0].e.c;++p)h=e.dense?(a[g]||[])[p]:a[Nn({c:p,r:g})],h&&(h.l=V[1]);break;case 2048:for(g=V[0].s.r;g<=V[0].e.r;++g)for(p=V[0].s.c;p<=V[0].e.c;++p)h=e.dense?(a[g]||[])[p]:a[Nn({c:p,r:g})],h&&h.l&&(h.l.Tooltip=V[1]);break;case 28:{if(B.biff<=5&&B.biff>=2)break;h=e.dense?(a[V[0].r]||[])[V[0].c]:a[Nn(V[0])];var Ve=me[V[2]];h||(e.dense?(a[V[0].r]||(a[V[0].r]=[]),h=a[V[0].r][V[0].c]={t:"z"}):h=a[Nn(V[0])]={t:"z"},o.e.r=Math.max(o.e.r,V[0].r),o.s.r=Math.min(o.s.r,V[0].r),o.e.c=Math.max(o.e.c,V[0].c),o.s.c=Math.min(o.s.c,V[0].c)),h.c||(h.c=[]),m={a:V[1],t:Ve.TxO.t},h.c.push(m)}break;case 2173:fRe(P[V.ixfe],V.ext);break;case 125:{if(!B.cellStyles)break;for(;V.e>=V.s;)pe[V.e--]={width:V.w/256,level:V.level||0,hidden:!!(V.flags&1)},ge||(ge=!0,fR(V.w/256)),gm(pe[V.e+1])}break;case 520:{var Pe={};V.level!=null&&(he[V.r]=Pe,Pe.level=V.level),V.hidden&&(he[V.r]=Pe,Pe.hidden=!0),V.hpt&&(he[V.r]=Pe,Pe.hpt=V.hpt,Pe.hpx=Mv(V.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Rp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[M]]=V;break;case 161:a["!margins"]||Rp(a["!margins"]={}),a["!margins"].header=V.header,a["!margins"].footer=V.footer;break;case 574:V.RTL&&(_.Views[0].RTL=!0);break;case 146:j=V;break;case 2198:R=V;break;case 140:w=V;break;case 442:u?I.CodeName=V||I.name:_.WBProps.CodeName=V||"ThisWorkbook";break}}else ne||console.error("Missing Info for XLS Record 0x"+M.toString(16)),t.l+=G}return r.SheetNames=xi(s).sort(function(be,ce){return Number(be)-Number(ce)}).map(function(be){return s[be].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&z.forEach(function(be,ce){r.Sheets[r.SheetNames[ce]]["!autofilter"]=be}),r.Strings=c,r.SSF=Cs(wn),B.enc&&(r.Encryption=B.enc),R&&(r.Themes=R),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),se.names.length>0&&(_.Names=se.names),r.Workbook=_,r}var kb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function E7e(t,e,r){var n=hn.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=A$(n,Wk,kb.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var o=hn.find(t,"/!SummaryInformation");if(o&&o.size>0)try{var l=A$(o,Xk,kb.SI);for(var c in l)e[c]==null&&(e[c]=l[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(rae(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function S7e(t,e){var r=[],n=[],a=[],s=0,o,l=$H(Wk,"n"),c=$H(Xk,"n");if(t.Props)for(o=xi(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=xi(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)cae.indexOf(a[s][0])>-1||tae.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&hn.utils.cfb_add(e,"/SummaryInformation",m$(n,kb.SI,c,Xk)),(r.length||u.length)&&hn.utils.cfb_add(e,"/DocumentSummaryInformation",m$(r,kb.DSI,l,Wk,u.length?u:null,kb.UDI))}function ase(t,e){e||(e={}),bR(e),V6(),e.codepage&&Q6(e.codepage);var r,n;if(t.FullPaths){if(hn.find(t,"/encryption"))throw new Error("File is password-protected");r=hn.find(t,"!CompObj"),n=hn.find(t,"/Workbook")||hn.find(t,"/Book")}else{switch(e.type){case"base64":t=uu(Nu(t));break;case"binary":t=uu(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}ul(t,0),n={content:t}}var a,s;if(r&&w7e(r),e.bookProps&&!e.bookSheets)a={};else{var o=Gn?"buffer":"array";if(n&&n.content)a=_7e(n.content,e);else if((s=hn.find(t,"PerfectOffice_MAIN"))&&s.content)a=Dp.to_workbook(s.content,(e.type=o,e));else if((s=hn.find(t,"NativeContent_MAIN"))&&s.content)a=Dp.to_workbook(s.content,(e.type=o,e));else throw(s=hn.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&hn.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=URe(t))}var l={};return t.FullPaths&&E7e(t,l,e),a.Props=a.Custprops=l,e.bookFiles&&(a.cfb=t),a}function I7e(t,e){var r=e||{},n=hn.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return hn.utils.cfb_add(n,a,sse(t,r)),r.biff==8&&(t.Props||t.Custprops)&&S7e(t,n),r.biff==8&&t.vbaraw&&QRe(n,hn.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var D2={0:{f:J8e},1:{f:iLe},2:{f:_Le},3:{f:ALe},4:{f:uLe},5:{f:wLe},6:{f:PLe},7:{f:xLe},8:{f:RLe},9:{f:DLe},10:{f:FLe},11:{f:OLe},12:{f:lLe},13:{f:SLe},14:{f:pLe},15:{f:fLe},16:{f:Xae},17:{f:TLe},18:{f:yLe},19:{f:rR},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:TUe},40:{},42:{},43:{f:P6e},44:{f:I6e},45:{f:k6e},46:{f:O6e},47:{f:F6e},48:{},49:{f:tFe},50:{},51:{f:mRe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:yae},62:{f:jLe},63:{f:CRe},64:{f:ZLe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Gl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:WLe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:aLe},148:{f:tLe,p:16},151:{f:HLe},152:{},153:{f:jUe},154:{},155:{},156:{f:SUe},157:{},158:{},159:{T:1,f:GDe},160:{T:-1},161:{T:1,f:Fg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:MLe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:hRe},336:{T:-1},337:{f:xRe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:zk},357:{},358:{},359:{},360:{T:1},361:{},362:{f:vae},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:$Le},427:{f:GLe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:qLe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:nLe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:QLe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:zk},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:ORe},633:{T:1},634:{T:-1},635:{T:1,f:kRe},636:{T:-1},637:{f:sFe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:pUe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:eUe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},rF={6:{f:T5},10:{f:o0},12:{f:Hi},13:{f:Hi},14:{f:_i},15:{f:_i},16:{f:Ul},17:{f:_i},18:{f:_i},19:{f:Hi},20:{f:b$},21:{f:b$},23:{f:vae},24:{f:N$},25:{f:_i},26:{},27:{},28:{f:eDe},29:{},34:{f:_i},35:{f:w$},38:{f:Ul},39:{f:Ul},40:{f:Ul},41:{f:Ul},42:{f:_i},43:{f:_i},47:{f:f6e},49:{f:SOe},51:{f:Hi},60:{},61:{f:wOe},64:{f:_i},65:{f:EOe},66:{f:Hi},77:{},80:{},81:{},82:{},85:{f:Hi},89:{},90:{},91:{},92:{f:dOe},93:{f:nDe},94:{},95:{f:_i},96:{},97:{},99:{f:_i},125:{f:yae},128:{f:VOe},129:{f:hOe},130:{f:Hi},131:{f:_i},132:{f:_i},133:{f:AOe},134:{},140:{f:dDe},141:{f:Hi},144:{},146:{f:ADe},151:{},152:{},153:{},154:{},155:{},156:{f:Hi},157:{},158:{},160:{f:bDe},161:{f:gDe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:MOe},190:{f:LOe},193:{f:o0},197:{},198:{},199:{},200:{},201:{},202:{f:_i},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Hi},220:{},221:{f:_i},222:{},224:{f:QOe},225:{f:uOe},226:{f:o0},227:{},229:{f:tDe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:pOe},253:{f:jOe},255:{f:xOe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:uae},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:_i},353:{f:o0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:qOe},431:{f:_i},432:{},433:{},434:{},437:{},438:{f:iDe},439:{f:_i},440:{f:oDe},441:{},442:{f:Dw},443:{},444:{f:Hi},445:{},446:{},448:{f:o0},449:{f:bOe,r:2},450:{f:o0},512:{f:x$},513:{f:yDe},515:{f:GOe},516:{f:BOe},517:{f:y$},519:{f:wDe},520:{f:vOe},523:{},545:{f:C$},549:{f:g$},566:{},574:{f:COe},638:{f:ROe},659:{},1048:{},1054:{f:kOe},1084:{},1212:{f:YOe},2048:{f:cDe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:YC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:o0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:mDe,r:12},2173:{f:dRe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:_i,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:XOe,r:12},2197:{},2198:{f:sRe,r:12},2199:{},2200:{},2201:{},2202:{f:JOe,r:12},2203:{f:o0},2204:{},2205:{},2206:{},2207:{},2211:{f:yOe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Hi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:xDe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:hDe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:x$},1:{},2:{f:SDe},3:{f:_De},4:{f:CDe},5:{f:y$},7:{f:jDe},8:{},9:{f:YC},11:{},22:{f:Hi},30:{f:OOe},31:{},32:{},33:{f:C$},36:{},37:{f:g$},50:{f:PDe},62:{},52:{},67:{},68:{f:Hi},69:{},86:{},126:{},127:{f:NDe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:BDe},223:{},234:{},354:{},421:{},518:{f:T5},521:{f:YC},536:{f:N$},547:{f:w$},561:{},579:{},1030:{f:T5},1033:{f:YC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function kr(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,o=t.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&Z6(r)&&t.push(r)}}function j7e(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return kr(t,e,r,a);var s=e;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function Uw(t,e,r){return t||(t=rr(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function P7e(t,e,r,n){var a=rr(9);return Uw(a,t,e),dae(r,n||"b",a),a}function B7e(t,e,r){var n=rr(8+2*r.length);return Uw(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function T7e(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?yo(Ns(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?kr(t,2,IDe(r,n,a)):kr(t,3,EDe(r,n,a));return;case"b":case"e":kr(t,5,P7e(r,n,e.v,e.t));return;case"s":case"str":kr(t,4,B7e(r,n,(e.v||"").slice(0,255)));return}kr(t,1,Uw(null,r,n))}function k7e(t,e,r,n){var a=Array.isArray(e),s=ha(e["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=Rn(s)}for(var u=s.s.r;u<=s.e.r;++u){l=Di(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Ys(d)),o=c[d]+l;var f=a?(e[u]||[])[d]:e[o];f&&T7e(t,f,u,d)}}}function F7e(t,e){for(var r=e||{},n=Uc(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return kr(n,r.biff==4?1033:r.biff==3?521:9,cR(t,16,r)),k7e(n,t.Sheets[t.SheetNames[a]],a,r),kr(n,10),n.end()}function O7e(t,e,r){kr(t,49,IOe({sz:12,name:"Arial"},r))}function D7e(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&kr(t,1054,FOe(a,e[a],r))})}function R7e(t,e){var r=rr(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),kr(t,2151,r),r=rr(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),pae(ha(e["!ref"]||"A1"),r),r.write_shift(4,4),kr(t,2152,r)}function M7e(t,e){for(var r=0;r<16;++r)kr(t,224,v$({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){kr(t,224,v$(n,0,e))})}function L7e(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];kr(t,440,lDe(n)),n[1].Tooltip&&kr(t,2048,uDe(n))}delete e["!links"]}function U7e(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&kr(t,125,pDe(oP(a,n),a))})}}function Q7e(t,e,r,n,a){var s=16+Bm(a.cellXfs,e,a);if(e.v==null&&!e.bf){kr(t,513,cg(r,n,s));return}if(e.bf)kr(t,6,h8e(e,r,n,a,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?yo(Ns(e.v)):e.v;kr(t,515,KOe(r,n,o,s));break;case"b":case"e":kr(t,517,$Oe(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=gR(a.Strings,e.v,a.revStrings);kr(t,253,POe(r,n,l,s))}else kr(t,516,TOe(r,n,(e.v||"").slice(0,255),s,a));break;default:kr(t,513,cg(r,n,s))}}function V7e(t,e,r){var n=Uc(),a=r.SheetNames[t],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,f="",A=[],h=ha(s["!ref"]||"A1"),m=u?65536:16384;if(h.e.c>255||h.e.r>=m){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,m-1)}kr(n,2057,cR(r,16,e)),kr(n,13,Zu(1)),kr(n,12,Zu(100)),kr(n,15,oc(!0)),kr(n,17,oc(!1)),kr(n,16,og(.001)),kr(n,95,oc(!0)),kr(n,42,oc(!1)),kr(n,43,oc(!1)),kr(n,130,Zu(1)),kr(n,128,HOe()),kr(n,131,oc(!1)),kr(n,132,oc(!1)),u&&U7e(n,s["!cols"]),kr(n,512,DOe(h,e)),u&&(s["!links"]=[]);for(var p=h.s.r;p<=h.e.r;++p){f=Di(p);for(var g=h.s.c;g<=h.e.c;++g){p===h.s.r&&(A[g]=Ys(g)),d=A[g]+f;var v=c?(s[p]||[])[g]:s[d];v&&(Q7e(n,v,p,g,e),u&&v.l&&s["!links"].push([d,v.l]))}}var y=l.CodeName||l.name||a;return u&&kr(n,574,_Oe((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&kr(n,229,rDe(s["!merges"])),u&&L7e(n,s),kr(n,442,fae(y)),u&&R7e(n,s),kr(n,10),n.end()}function H7e(t,e,r){var n=Uc(),a=(t||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(kr(n,2057,cR(t,5,r)),r.bookType=="xla"&&kr(n,135),kr(n,225,l?Zu(1200):null),kr(n,193,$Fe(2)),c&&kr(n,191),c&&kr(n,192),kr(n,226),kr(n,92,fOe("SheetJS",r)),kr(n,66,Zu(l?1200:1252)),l&&kr(n,353,Zu(0)),l&&kr(n,448),kr(n,317,vDe(t.SheetNames.length)),l&&t.vbaraw&&kr(n,211),l&&t.vbaraw){var u=o.CodeName||"ThisWorkbook";kr(n,442,fae(u))}kr(n,156,Zu(17)),kr(n,25,oc(!1)),kr(n,18,oc(!1)),kr(n,19,Zu(0)),l&&kr(n,431,oc(!1)),l&&kr(n,444,Zu(0)),kr(n,61,NOe()),kr(n,64,oc(!1)),kr(n,141,Zu(0)),kr(n,34,oc(bUe(t)=="true")),kr(n,14,oc(!0)),l&&kr(n,439,oc(!1)),kr(n,218,Zu(0)),O7e(n,t,r),D7e(n,t.SSF,r),M7e(n,r),l&&kr(n,352,oc(!1));var d=n.end(),f=Uc();l&&kr(f,140,fDe()),l&&r.Strings&&j7e(f,252,gOe(r.Strings)),kr(f,10);var A=f.end(),h=Uc(),m=0,p=0;for(p=0;p<t.SheetNames.length;++p)m+=(l?12:11)+(l?2:1)*t.SheetNames[p].length;var g=d.length+m+A.length;for(p=0;p<t.SheetNames.length;++p){var v=s[p]||{};kr(h,133,mOe({pos:g,hs:v.Hidden||0,dt:0,name:t.SheetNames[p]},r)),g+=e[p].length}var y=h.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return d.length&&b.push(d),y.length&&b.push(y),A.length&&b.push(A),Mo(b)}function $7e(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Cs(wn)),t&&t.SSF&&(p1(),eP(t.SSF),r.revssf=rP(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,wR(r),r.cellXfs=[],Bm(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=V7e(a,r,t);return n.unshift(H7e(t,n,r)),Mo(n)}function sse(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Qc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return $7e(t,e);case 4:case 3:case 2:return F7e(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function F$(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),o=a.index,l=s&&s.index||t.length,c=Ike(t.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,A=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(o=0;o<c.length;++o){var p=c[o].trim(),g=p.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var v=p.split(/<\/t[dh]>/i);for(l=0;l<v.length;++l){var y=v[l].trim();if(y.match(/<t[dh]/i)){for(var b=y,w=0;b.charAt(0)=="<"&&(w=b.indexOf(">"))>-1;)b=b.slice(w+1);for(var P=0;P<m.length;++P){var j=m[P];j.s.c==d&&j.s.r<u&&u<=j.e.r&&(d=j.e.c+1,P=-1)}var _=_n(y.slice(0,y.indexOf(">")));A=_.colspan?+_.colspan:1,((f=+_.rowspan)>1||A>1)&&m.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+A-1}});var I=_.t||_["data-t"]||"";if(!b.length){d+=A;continue}if(b=jne(b),h.s.r>u&&(h.s.r=u),h.e.r<u&&(h.e.r=u),h.s.c>d&&(h.s.c=d),h.e.c<d&&(h.e.c=d),!b.length){d+=A;continue}var E={t:"s",v:b};r.raw||!b.trim().length||I=="s"||(b==="TRUE"?E={t:"b",v:!0}:b==="FALSE"?E={t:"b",v:!1}:isNaN(tf(b))?isNaN(Dv(b).getDate())||(E={t:"d",v:Ns(b)},r.cellDates||(E={t:"n",v:yo(E.v)}),E.z=r.dateNF||wn[14]):E={t:"n",v:tf(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=E):n[Nn({r:u,c:d})]=E,d+=A}}}}return n["!ref"]=Rn(h),m.length&&(n["!merges"]=m),n}function G7e(t,e,r,n){for(var a=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Nn({r,c:o}),f=n.dense?(t[r]||[])[o]:t[d],A=f&&f.v!=null&&(f.h||X6(f.w||(lA(f),f.w)||""))||"",h={};l>1&&(h.rowspan=l),c>1&&(h.colspan=c),n.editable?A='<span contenteditable="true">'+A+"</span>":f&&(h["data-t"]=f&&f.t||"z",f.v!=null&&(h["data-v"]=f.v),f.z!=null&&(h["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(A='<a href="'+f.l.Target+'">'+A+"</a>")),h.id=(n.id||"sjs")+"-"+d,s.push(Br("td",A,h))}}var m="<tr>";return m+s.join("")+"</tr>"}var K7e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',q7e="</body></html>";function z7e(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Pm(F$(r[0],e),e);var n=_R();return r.forEach(function(a,s){ER(n,F$(a,e),"Sheet"+(s+1))}),n}function W7e(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function ise(t,e){var r=e||{},n=r.header!=null?r.header:K7e,a=r.footer!=null?r.footer:q7e,s=[n],o=Qc(t["!ref"]);r.dense=Array.isArray(t),s.push(W7e(t,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(G7e(t,o,l,r));return s.push("</table>"+a),s.join("")}function ose(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?Js(n.origin):n.origin;a=o.r,s=o.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=Qc(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],A=0,h=t["!rows"]||(t["!rows"]=[]),m=0,p=0,g=0,v=0,y=0,b=0;for(t["!cols"]||(t["!cols"]=[]);m<l.length&&p<c;++m){var w=l[m];if(O$(w)){if(n.display)continue;h[p]={hidden:!0}}var P=w.children;for(g=v=0;g<P.length;++g){var j=P[g];if(!(n.display&&O$(j))){var _=j.hasAttribute("data-v")?j.getAttribute("data-v"):j.hasAttribute("v")?j.getAttribute("v"):jne(j.innerHTML),I=j.getAttribute("data-z")||j.getAttribute("z");for(A=0;A<f.length;++A){var E=f[A];E.s.c==v+s&&E.s.r<p+a&&p+a<=E.e.r&&(v=E.e.c+1-s,A=-1)}b=+j.getAttribute("colspan")||1,((y=+j.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:p+a,c:v+s},e:{r:p+a+(y||1)-1,c:v+s+(b||1)-1}});var F={t:"s",v:_},k=j.getAttribute("data-t")||j.getAttribute("t")||"";_!=null&&(_.length==0?F.t=k||"z":n.raw||_.trim().length==0||k=="s"||(_==="TRUE"?F={t:"b",v:!0}:_==="FALSE"?F={t:"b",v:!1}:isNaN(tf(_))?isNaN(Dv(_).getDate())||(F={t:"d",v:Ns(_)},n.cellDates||(F={t:"n",v:yo(F.v)}),F.z=n.dateNF||wn[14]):F={t:"n",v:tf(_)})),F.z===void 0&&I!=null&&(F.z=I);var B="",R=j.getElementsByTagName("A");if(R&&R.length)for(var Y=0;Y<R.length&&!(R[Y].hasAttribute("href")&&(B=R[Y].getAttribute("href"),B.charAt(0)!="#"));++Y);B&&B.charAt(0)!="#"&&(F.l={Target:B}),n.dense?(t[p+a]||(t[p+a]=[]),t[p+a][v+s]=F):t[Nn({c:v+s,r:p+a})]=F,u.e.c<v+s&&(u.e.c=v+s),v+=b}}++p}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,p-1+a),t["!ref"]=Rn(u),p>=c&&(t["!fullref"]=Rn((u.e.r=l.length-m+p-1+a,u))),t}function lse(t,e){var r=e||{},n=r.dense?[]:{};return ose(n,t,e)}function X7e(t,e){return Pm(lse(t,e),e)}function O$(t){var e="",r=Y7e(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Y7e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function J7e(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=fa(e.replace(/<[^>]*>/g,""));return[r]}var D$={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function cse(t,e){var r=e||{},n=Y6(t),a=[],s,o,l={name:""},c="",u=0,d,f,A={},h=[],m=r.dense?[]:{},p,g,v={value:""},y="",b=0,w=[],P=-1,j=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},I=0,E={},F=[],k={},B=0,R=0,Y=[],me=1,pe=1,he=[],ge={Names:[]},se={},je=["",""],Te=[],D={},K="",z=0,Q=!1,J=!1,ee=0;for(P2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=P2.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?m["!ref"]=Rn(_):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(m["!fullref"]=m["!ref"],_.e.r=r.sheetRows-1,m["!ref"]=Rn(_)),F.length&&(m["!merges"]=F),Y.length&&(m["!rows"]=Y),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),h.push(d.name),A[d.name]=m,J=!1):p[0].charAt(p[0].length-2)!=="/"&&(d=_n(p[0],!1),P=j=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,m=r.dense?[]:{},F=[],Y=[],J=!0);break;case"table-row-group":p[1]==="/"?--I:++I;break;case"table-row":case"":if(p[1]==="/"){P+=me,me=1;break}if(f=_n(p[0],!1),f.?P=f.-1:P==-1&&(P=0),me=+f["number-rows-repeated"]||1,me<10)for(ee=0;ee<me;++ee)I>0&&(Y[P+ee]={level:I});j=-1;break;case"covered-table-cell":p[1]!=="/"&&++j,r.sheetStubs&&(r.dense?(m[P]||(m[P]=[]),m[P][j]={t:"z"}):m[Nn({r:P,c:j})]={t:"z"}),y="",w=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++j,v=_n(p[0],!1),pe=parseInt(v["number-columns-repeated"]||"1",10),g={t:"z",v:null},v.formula&&r.cellFormula!=!1&&(g.f=B$(fa(v.formula))),(v.||v["value-type"])=="string"&&(g.t="s",g.v=fa(v["string-value"]||""),r.dense?(m[P]||(m[P]=[]),m[P][j]=g):m[Nn({r:P,c:j})]=g),j+=pe-1;else if(p[1]!=="/"){++j,y="",b=0,w=[],pe=1;var M=me?P+me-1:P;if(j>_.e.c&&(_.e.c=j),j<_.s.c&&(_.s.c=j),P<_.s.r&&(_.s.r=P),M>_.e.r&&(_.e.r=M),v=_n(p[0],!1),Te=[],D={},g={t:v.||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=fa(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(B=parseInt(v["number-matrix-rows-spanned"],10)||0,R=parseInt(v["number-matrix-columns-spanned"],10)||0,k={s:{r:P,c:j},e:{r:P+B-1,c:j+R-1}},g.F=Rn(k),he.push([k,g.F])),v.formula)g.f=B$(v.formula);else for(ee=0;ee<he.length;++ee)P>=he[ee][0].s.r&&P<=he[ee][0].e.r&&j>=he[ee][0].s.c&&j<=he[ee][0].e.c&&(g.F=he[ee][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(B=parseInt(v["number-rows-spanned"],10)||0,R=parseInt(v["number-columns-spanned"],10)||0,k={s:{r:P,c:j},e:{r:P+B-1,c:j+R-1}},F.push(k)),v["number-columns-repeated"]&&(pe=parseInt(v["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=vs(v["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(v.value);break;case"percentage":g.t="n",g.v=parseFloat(v.value);break;case"currency":g.t="n",g.v=parseFloat(v.value);break;case"date":g.t="d",g.v=Ns(v["date-value"]),r.cellDates||(g.t="n",g.v=yo(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=_ke(v["time-value"])/86400,r.cellDates&&(g.t="d",g.v=nP(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(v.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",v["string-value"]!=null&&(y=fa(v["string-value"]),w=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(Q=!1,g.t==="s"&&(g.v=y||"",w.length&&(g.R=w),Q=b==0),se.Target&&(g.l=se),Te.length>0&&(g.c=Te,Te=[]),y&&r.cellText!==!1&&(g.w=y),Q&&(g.t="z",delete g.v),(!Q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=P))for(var G=0;G<me;++G){if(pe=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(m[P+G]||(m[P+G]=[]),m[P+G][j]=G==0?g:Cs(g);--pe>0;)m[P+G][j+pe]=Cs(g);else for(m[Nn({r:P+G,c:j})]=g;--pe>0;)m[Nn({r:P+G,c:j+pe})]=Cs(g);_.e.c<=j&&(_.e.c=j)}pe=parseInt(v["number-columns-repeated"]||"1",10),j+=pe-1,pe=0,g={},y="",w=[]}se={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s;D.t=y,w.length&&(D.R=w),D.a=K,Te.push(D)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);K="",z=0,y="",b=0,w=[];break;case"creator":p[1]==="/"?K=n.slice(z,p.index):z=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);y="",b=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(E[l.name]=c,(s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&(c="",l=_n(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=_n(p[0],!1),c+=D$[p[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=_n(p[0],!1),c+=D$[p[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":o=_n(p[0],!1),je=k5(o["cell-range-address"]);var ne={Name:o.name,Ref:je[0]+"!"+je[1]};J&&(ne.Sheet=h.length),ge.Names.push(ne);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!v||!v["string-value"])){var ve=J7e(n.slice(b,p.index));y=(y.length>0?y+`
`:"")+ve[0]}else _n(p[0],!1),b=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{je=k5(_n(p[0])["target-range-address"]),A[je[0]]["!autofilter"]={ref:je[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(se=_n(p[0],!1),!se.href)break;se.Target=fa(se.href),delete se.href,se.Target.charAt(0)=="#"&&se.Target.indexOf(".")>-1?(je=k5(se.Target.slice(1)),se.Target="#"+je[0]+"!"+je[1]):se.Target.match(/^\.\.[\\\/]/)&&(se.Target=se.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var V={Sheets:A,SheetNames:h,Workbook:ge};return r.bookSheets&&delete V.Sheets,V}function R$(t,e){e=e||{},Ju(t,"META-INF/manifest.xml")&&_Fe(Vi(t,"META-INF/manifest.xml"),e);var r=du(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=cse(Xa(r),e);return Ju(t,"meta.xml")&&(n.Props=Zne(Vi(t,"meta.xml"))),n}function M$(t,e){return cse(t,e)}var Z7e=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+j2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Mi+e}}(),L$=function(){var t=function(s){return Ha(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+Ha(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=Qc(s["!ref"]||"A1"),A=s["!merges"]||[],h=0,m=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",g=s["!rows"]||[];for(u=0;u<f.s.r;++u)p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=f.e.r;++u){for(p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<f.s.c;++d)c.push(e);for(;d<=f.e.c;++d){var v=!1,y={},b="";for(h=0;h!=A.length;++h)if(!(A[h].s.c>d)&&!(A[h].s.r>u)&&!(A[h].e.c<d)&&!(A[h].e.r<u)){(A[h].s.c!=d||A[h].s.r!=u)&&(v=!0),y["table:number-columns-spanned"]=A[h].e.c-A[h].s.c+1,y["table:number-rows-spanned"]=A[h].e.r-A[h].s.r+1;break}if(v){c.push(r);continue}var w=Nn({r:u,c:d}),P=m?(s[u]||[])[d]:s[w];if(P&&P.f&&(y["table:formula"]=Ha(v8e(P.f)),P.F&&P.F.slice(0,w.length)==w)){var j=Qc(P.F);y["table:number-matrix-columns-spanned"]=j.e.c-j.s.c+1,y["table:number-matrix-rows-spanned"]=j.e.r-j.s.r+1}if(!P){c.push(e);continue}switch(P.t){case"b":b=P.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=P.v?"true":"false";break;case"n":b=P.w||String(P.v||0),y["office:value-type"]="float",y["office:value"]=P.v||0;break;case"s":case"str":b=P.v==null?"":P.v,y["office:value-type"]="string";break;case"d":b=P.w||Ns(P.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=Ns(P.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(e);continue}var _=t(b);if(P.l&&P.l.Target){var I=P.l.Target;I=I.charAt(0)=="#"?"#"+y8e(I.slice(1)):I,I.charAt(0)!="#"&&!I.match(/^\w+:/)&&(I="../"+I),_=Br("text:a",_,{"xlink:href":I.replace(/&/g,"&amp;")})}c.push("          "+Br("table:table-cell",Br("text:p",_,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;gm(f),f.ods=l;var A=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+A+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[Mi],u=j2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=j2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Jne().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(n(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function use(t,e){if(e.bookType=="fods")return L$(t,e);var r=q6(),n="",a=[],s=[];return n="mimetype",Qn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Qn(r,n,L$(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Qn(r,n,Z7e(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Qn(r,n,Mi+Jne()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Qn(r,n,IFe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Qn(r,n,EFe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ug(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function nF(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Xa(jm(t))}function e9e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):uu(Lf(t))}function t9e(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function vm(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function U$(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function r9e(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function n9e(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function R2(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Ra(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function pi(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function pa(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=R2(t,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:o=4,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=R2(t,r),l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function rl(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(Ra(n*8+a.type)),a.type==2&&e.push(Ra(a.data.length)),e.push(a.data))})}),vm(e)}function yR(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Ku(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=R2(t,n),s=pa(t.slice(n[0],n[0]+a));n[0]+=a;var o={id:pi(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=pa(l.data),u=pi(c[3][0].data);o.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(o.merge=pi(s[3][0].data)>>>0>0),r.push(o)}return r}function hx(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Ra(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Ra(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:Ra(o.data.length)}],n[2].push({data:rl(o.meta),type:2})});var s=rl(n);e.push(Ra(s.length)),e.push(s),a.forEach(function(o){return e.push(o)})}),vm(e)}function a9e(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=R2(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var o=e[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=e[r[0]],l>1&&(o|=e[r[0]+1]<<8),l>2&&(o|=e[r[0]+2]<<16),l>3&&(o|=e[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(e.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[vm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=vm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function qu(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(a9e(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return vm(e)}function Ax(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=Ra(n),o=s.length;e.push(s),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return vm(e)}function s9e(t,e,r,n){var a=ug(t),s=a.getUint32(4,!0),o=(n>1?12:8)+U$(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(o,!0),o+=4),o+=U$(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(o,!0),o+=4),s&32&&(u=a.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var f;switch(t[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:e[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:e[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return f}function i9e(t,e,r){var n=ug(t),a=n.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=r9e(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(o=n.getUint32(s,!0),s+=4);var f;switch(t[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return f}function O5(t,e){var r=new Uint8Array(32),n=ug(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,n9e(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function D5(t,e){var r=new Uint8Array(32),n=ug(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function o9e(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return s9e(t,e,r,t[0]);case 5:return i9e(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Ol(t){var e=pa(t);return R2(e[1][0].data)}function Q$(t,e){var r=pa(e.data),n=pi(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(o){var l=pa(o.data),c=pi(l[1][0].data)>>>0;switch(n){case 1:s[c]=nF(l[3][0].data);break;case 8:{var u=t[Ol(l[9][0].data)][0],d=pa(u.data),f=t[Ol(d[1][0].data)][0],A=pi(f.meta[1][0].data);if(A!=2001)throw new Error("2000 unexpected reference to ".concat(A));var h=pa(f.data);s[c]=h[3].map(function(m){return nF(m.data)}).join("")}break}}),s}function l9e(t,e){var r,n,a,s,o,l,c,u,d,f,A,h,m,p,g=pa(t),v=pi(g[1][0].data)>>>0,y=pi(g[2][0].data)>>>0,b=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&pi(g[8][0].data)>0||!1,w,P;if((s=(a=g[7])==null?void 0:a[0])!=null&&s.data&&e!=0)w=(l=(o=g[7])==null?void 0:o[0])==null?void 0:l.data,P=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=g[4])==null?void 0:d[0])!=null&&f.data&&e!=1)w=(h=(A=g[4])==null?void 0:A[0])==null?void 0:h.data,P=(p=(m=g[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var j=b?4:1,_=ug(w),I=[],E=0;E<w.length/2;++E){var F=_.getUint16(E*2,!0);F<65535&&I.push([E,F])}if(I.length!=y)throw"Expected ".concat(y," cells, found ").concat(I.length);var k=[];for(E=0;E<I.length-1;++E)k[I[E][0]]=P.subarray(I[E][1]*j,I[E+1][1]*j);return I.length>=1&&(k[I[I.length-1][0]]=P.subarray(I[I.length-1][1]*j)),{R:v,cells:k}}function c9e(t,e){var r,n=pa(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?pi(n[7][0].data)>>>0>0?1:0:-1,s=yR(n[5],function(o){return l9e(o,a)});return{nrows:pi(n[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function u9e(t,e,r){var n,a=pa(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(pi(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(pi(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Rn(s);var o=pa(a[4][0].data),l=Q$(t,t[Ol(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?Q$(t,t[Ol(o[17][0].data)][0]):[],u=pa(o[3][0].data),d=0;u[1].forEach(function(f){var A=pa(f.data),h=t[Ol(A[2][0].data)][0],m=pi(h.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=c9e(t,h);p.data.forEach(function(g,v){g.forEach(function(y,b){var w=Nn({r:d+v,c:b}),P=o9e(y,l,c);P&&(r[w]=P)})}),d+=p.nrows})}function d9e(t,e){var r=pa(e.data),n={"!ref":"A1"},a=t[Ol(r[2][0].data)],s=pi(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return u9e(t,a[0],n),n}function f9e(t,e){var r,n=pa(e.data),a={name:(r=n[1])!=null&&r[0]?nF(n[1][0].data):"",sheets:[]},s=yR(n[2],Ol);return s.forEach(function(o){t[o].forEach(function(l){var c=pi(l.meta[1][0].data);c==6e3&&a.sheets.push(d9e(t,l))})}),a}function h9e(t,e){var r=_R(),n=pa(e.data),a=yR(n[1],Ol);if(a.forEach(function(s){t[s].forEach(function(o){var l=pi(o.meta[1][0].data);if(l==2){var c=f9e(t,o);c.sheets.forEach(function(u,d){ER(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function R5(t){var e,r,n,a,s={},o=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=qu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Ku(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&pi(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=pi(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return h9e(s,l)}function A9e(t,e,r){var n,a,s,o;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&pi(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=ug(t[7][0].data),d=0,f=[],A=ug(t[4][0].data),h=0,m=[],p=0;p<e.length;++p){if(e[p]==null){u.setUint16(p*2,65535,!0),A.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),A.setUint16(p*2,h,!0);var g,v;switch(typeof e[p]){case"string":g=O5({t:"s",v:e[p]},r),v=D5({t:"s",v:e[p]},r);break;case"number":g=O5({t:"n",v:e[p]},r),v=D5({t:"n",v:e[p]},r);break;case"boolean":g=O5({t:"b",v:e[p]},r),v=D5({t:"b",v:e[p]},r);break;default:throw new Error("Unsupported value "+e[p])}f.push(g),d+=g.length,m.push(v),h+=v.length,++c}for(t[2][0].data=Ra(c);p<t[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),A.setUint16(p*2,65535,!0);return t[6][0].data=vm(f),t[3][0].data=vm(m),c}function m9e(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Qc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Rn(n)));var s=zS(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(K){return K.forEach(function(z){typeof z=="string"&&o.push(z)})});var l={},c=[],u=hn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(K,z){return[K,u.FullPaths[z]]}).forEach(function(K){var z=K[0],Q=K[1];if(z.type==2&&z.name.match(/\.iwa/)){var J=z.content,ee=qu(J),M=Ku(ee);M.forEach(function(G){c.push(G.id),l[G.id]={deps:[],location:Q,type:pi(G.messages[0].meta[1][0].data)}})}}),c.sort(function(K,z){return K-z});var d=c.filter(function(K){return K>1}).map(function(K){return[K,Ra(K)]});u.FileIndex.map(function(K,z){return[K,u.FullPaths[z]]}).forEach(function(K){var z=K[0];if(K[1],!!z.name.match(/\.iwa/)){var Q=Ku(qu(z.content));Q.forEach(function(J){J.messages.forEach(function(ee){d.forEach(function(M){J.messages.some(function(G){return pi(G.meta[1][0].data)!=11006&&t9e(G.data,M[1])})&&l[M[0]].deps.push(J.id)})})})}});for(var f=hn.find(u,l[1].location),A=Ku(qu(f.content)),h,m=0;m<A.length;++m){var p=A[m];p.id==1&&(h=p)}var g=Ol(pa(h.messages[0].data)[1][0].data);for(f=hn.find(u,l[g].location),A=Ku(qu(f.content)),m=0;m<A.length;++m)p=A[m],p.id==g&&(h=p);for(g=Ol(pa(h.messages[0].data)[2][0].data),f=hn.find(u,l[g].location),A=Ku(qu(f.content)),m=0;m<A.length;++m)p=A[m],p.id==g&&(h=p);for(g=Ol(pa(h.messages[0].data)[2][0].data),f=hn.find(u,l[g].location),A=Ku(qu(f.content)),m=0;m<A.length;++m)p=A[m],p.id==g&&(h=p);var v=pa(h.messages[0].data);{v[6][0].data=Ra(n.e.r+1),v[7][0].data=Ra(n.e.c+1);var y=Ol(v[46][0].data),b=hn.find(u,l[y].location),w=Ku(qu(b.content));{for(var P=0;P<w.length&&w[P].id!=y;++P);if(w[P].id!=y)throw"Bad ColumnRowUIDMapArchive";var j=pa(w[P].messages[0].data);j[1]=[],j[2]=[],j[3]=[];for(var _=0;_<=n.e.c;++_){var I=[];I[1]=I[2]=[{type:0,data:Ra(_+420690)}],j[1].push({type:2,data:rl(I)}),j[2].push({type:0,data:Ra(_)}),j[3].push({type:0,data:Ra(_)})}j[4]=[],j[5]=[],j[6]=[];for(var E=0;E<=n.e.r;++E)I=[],I[1]=I[2]=[{type:0,data:Ra(E+726270)}],j[4].push({type:2,data:rl(I)}),j[5].push({type:0,data:Ra(E)}),j[6].push({type:0,data:Ra(E)});w[P].messages[0].data=rl(j)}b.content=Ax(hx(w)),b.size=b.content.length,delete v[46];var F=pa(v[4][0].data);{F[7][0].data=Ra(n.e.r+1);var k=pa(F[1][0].data),B=Ol(k[2][0].data);b=hn.find(u,l[B].location),w=Ku(qu(b.content));{if(w[0].id!=B)throw"Bad HeaderStorageBucket";var R=pa(w[0].messages[0].data);for(E=0;E<s.length;++E){var Y=pa(R[2][0].data);Y[1][0].data=Ra(E),Y[4][0].data=Ra(s[E].length),R[2][E]={type:R[2][0].type,data:rl(Y)}}w[0].messages[0].data=rl(R)}b.content=Ax(hx(w)),b.size=b.content.length;var me=Ol(F[2][0].data);b=hn.find(u,l[me].location),w=Ku(qu(b.content));{if(w[0].id!=me)throw"Bad HeaderStorageBucket";for(R=pa(w[0].messages[0].data),_=0;_<=n.e.c;++_)Y=pa(R[2][0].data),Y[1][0].data=Ra(_),Y[4][0].data=Ra(n.e.r+1),R[2][_]={type:R[2][0].type,data:rl(Y)};w[0].messages[0].data=rl(R)}b.content=Ax(hx(w)),b.size=b.content.length;var pe=Ol(F[4][0].data);(function(){for(var K=hn.find(u,l[pe].location),z=Ku(qu(K.content)),Q,J=0;J<z.length;++J){var ee=z[J];ee.id==pe&&(Q=ee)}var M=pa(Q.messages[0].data);{M[3]=[];var G=[];o.forEach(function(V,qe){G[1]=[{type:0,data:Ra(qe)}],G[2]=[{type:0,data:Ra(1)}],G[3]=[{type:2,data:e9e(V)}],M[3].push({type:2,data:rl(G)})})}Q.messages[0].data=rl(M);var ne=hx(z),ve=Ax(ne);K.content=ve,K.size=K.content.length})();var he=pa(F[3][0].data);{var ge=he[1][0];delete he[2];var se=pa(ge.data);{var je=Ol(se[2][0].data);(function(){for(var K=hn.find(u,l[je].location),z=Ku(qu(K.content)),Q,J=0;J<z.length;++J){var ee=z[J];ee.id==je&&(Q=ee)}var M=pa(Q.messages[0].data);{delete M[6],delete he[7];var G=new Uint8Array(M[5][0].data);M[5]=[];for(var ne=0,ve=0;ve<=n.e.r;++ve){var V=pa(G);ne+=A9e(V,s[ve],o),V[1][0].data=Ra(ve),M[5].push({data:rl(V),type:2})}M[1]=[{type:0,data:Ra(n.e.c+1)}],M[2]=[{type:0,data:Ra(n.e.r+1)}],M[3]=[{type:0,data:Ra(ne)}],M[4]=[{type:0,data:Ra(n.e.r+1)}]}Q.messages[0].data=rl(M);var qe=hx(z),ie=Ax(qe);K.content=ie,K.size=K.content.length})()}ge.data=rl(se)}F[3][0].data=rl(he)}v[4][0].data=rl(F)}h.messages[0].data=rl(v);var Te=hx(A),D=Ax(Te);return f.content=D,f.size=f.content.length,u}function dse(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function bR(t){dse([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function wR(t){dse([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function p9e(t){return Xn.WS.indexOf(t)>-1?"sheet":t==Xn.CS?"chart":t==Xn.DS?"dialog":t==Xn.MS?"macro":t&&t.length?t:"sheet"}function g9e(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,p9e(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function x9e(t,e,r,n,a,s,o,l,c,u,d,f){try{s[n]=jb(du(t,r,!0),e);var A=Vi(t,e),h;switch(l){case"sheet":h=UUe(A,e,a,c,s[n],u,d,f);break;case"chart":if(h=QUe(A,e,a,c,s[n],u,d,f),!h||!h["!drawel"])break;var m=zy(h["!drawel"].Target,e),p=B2(m),g=SRe(du(t,m,!0),jb(du(t,p,!0),m)),v=zy(g,m),y=B2(v);h=AUe(du(t,v,!0),v,c,jb(du(t,y,!0),v),u,h);break;case"macro":h=VUe(A,e,a,c,s[n],u,d,f);break;case"dialog":h=HUe(A,e,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=h;var b=[];s&&s[n]&&xi(s[n]).forEach(function(w){var P="";if(s[n][w].Type==Xn.CMNT){P=zy(s[n][w].Target,e);var j=qUe(Vi(t,P,!0),P,c);if(!j||!j.length)return;E$(h,j,!1)}s[n][w].Type==Xn.TCMNT&&(P=zy(s[n][w].Target,e),b=b.concat(jRe(Vi(t,P,!0),c)))}),b&&b.length&&E$(h,b,!0,c.people||[])}catch(w){if(c.WTF)throw w}}function Qu(t){return t.charAt(0)=="/"?t.slice(1):t}function v9e(t,e){if(p1(),e=e||{},bR(e),Ju(t,"META-INF/manifest.xml")||Ju(t,"objectdata.xml"))return R$(t,e);if(Ju(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof R5<"u"){if(t.FileIndex)return R5(t);var r=hn.utils.cfb_new();return qH(t).forEach(function(Y){Qn(r,Y,Pke(t,Y))}),R5(r)}throw new Error("Unsupported NUMBERS file")}if(!Ju(t,"[Content_Types].xml"))throw Ju(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Ju(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=qH(t),a=NFe(du(t,"[Content_Types].xml")),s=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Vi(t,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Vi(t,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(Pb=[],a.sst)try{Pb=KUe(Vi(t,Qu(a.sst)),a.sst,e)}catch(Y){if(e.WTF)throw Y}e.cellStyles&&a.themes.length&&(c=GUe(du(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=$Ue(Vi(t,Qu(a.style)),a.style,c,e))}a.links.map(function(Y){try{var me=jb(du(t,B2(Qu(Y))),Y);return WUe(Vi(t,Qu(Y)),me,Y,e)}catch{}});var d=LUe(Vi(t,Qu(a.workbooks[0])),a.workbooks[0],e),f={},A="";a.coreprops.length&&(A=Vi(t,Qu(a.coreprops[0]),!0),A&&(f=Zne(A)),a.extprops.length!==0&&(A=Vi(t,Qu(a.extprops[0]),!0),A&&PFe(A,f,e)));var h={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(A=du(t,Qu(a.custprops[0]),!0),A&&(h=TFe(A,e)));var m={};if((e.bookSheets||e.bookProps)&&(d.Sheets?o=d.Sheets.map(function(me){return me.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),e.bookProps&&(m.Props=f,m.Custprops=h),e.bookSheets&&typeof o<"u"&&(m.SheetNames=o),e.bookSheets?m.SheetNames:e.bookProps))return m;o={};var p={};e.bookDeps&&a.calcchain&&(p=zUe(Vi(t,Qu(a.calcchain)),a.calcchain));var g=0,v={},y,b;{var w=d.Sheets;f.Worksheets=w.length,f.SheetNames=[];for(var P=0;P!=w.length;++P)f.SheetNames[P]=w[P].name}var j=s?"bin":"xml",_=a.workbooks[0].lastIndexOf("/"),I=(a.workbooks[0].slice(0,_+1)+"_rels/"+a.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");Ju(t,I)||(I="xl/_rels/workbook."+j+".rels");var E=jb(du(t,I,!0),I.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=XUe(Vi(t,Qu(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=BRe(Vi(t,Qu(a.people[0])),e)),E&&(E=g9e(E,d.Sheets));var F=Vi(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var k="sheet";if(E&&E[g]?(y="xl/"+E[g][1].replace(/[\/]?xl\//,""),Ju(t,y)||(y=E[g][1]),Ju(t,y)||(y=I.replace(/_rels\/.*$/,"")+E[g][1]),k=E[g][2]):(y="xl/worksheets/sheet"+(g+1-F)+"."+j,y=y.replace(/sheet0\./,"sheet.")),b=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var B=!1,R=0;R!=e.sheets.length;++R)typeof e.sheets[R]=="number"&&e.sheets[R]==g&&(B=1),typeof e.sheets[R]=="string"&&e.sheets[R].toLowerCase()==f.SheetNames[g].toLowerCase()&&(B=1);if(!B)continue e}}x9e(t,y,b,f.SheetNames[g],g,v,o,k,e,d,c,u)}return m={Directory:a,Workbook:d,Props:f,Custprops:h,Deps:p,Sheets:o,SheetNames:f.SheetNames,Strings:Pb,Styles:u,Themes:c,SSF:Cs(wn)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(Y,me){Y=Y.replace(/^Root Entry[\/]/,""),m.keys.push(Y),m.files[Y]=t.FileIndex[me]}))),e&&e.bookVBA&&(a.vba.length>0?m.vbaraw=Vi(t,Qu(a.vba[0]),!0):a.defaults&&a.defaults.bin===LRe&&(m.vbaraw=Vi(t,"xl/vbaProject.bin",!0))),m}function y9e(t,e){var r=e||{},n="Workbook",a=hn.find(t,n);try{if(n="/!DataSpaces/Version",a=hn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(XDe(a.content),n="/!DataSpaces/DataSpaceMap",a=hn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=JDe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=hn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=ZDe(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=hn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);t6e(a.content)}catch{}if(n="/EncryptionInfo",a=hn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=r6e(a.content);if(n="/EncryptedPackage",a=hn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function b9e(t,e){return e.bookType=="ods"?use(t,e):e.bookType=="numbers"?m9e(t,e):e.bookType=="xlsb"?w9e(t,e):N9e(t,e)}function w9e(t,e){Wx=1024,t&&!t.SSF&&(t.SSF=Cs(wn)),t&&t.SSF&&(p1(),eP(t.SSF),e.revssf=rP(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Bb?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=Mae.indexOf(e.bookType)>-1,a=oR();wR(e=e||{});var s=q6(),o="",l=0;if(e.cellXfs=[],Bm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Qn(s,o,eae(t.Props,e)),a.coreprops.push(o),La(e.rels,2,o,Xn.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,Qn(s,o,nae(t.Props)),a.extprops.push(o),La(e.rels,3,o,Xn.EXT_PROPS),t.Custprops!==t.Props&&xi(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Qn(s,o,aae(t.Custprops)),a.custprops.push(o),La(e.rels,4,o,Xn.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},f=t.Sheets[t.SheetNames[l-1]],A=(f||{})["!type"]||"sheet";switch(A){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Qn(s,o,JUe(l-1,o,e,t,d)),a.sheets.push(o),La(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Xn.WS[0])}if(f){var h=f["!comments"],m=!1,p="";h&&h.length>0&&(p="xl/comments"+l+"."+r,Qn(s,p,t7e(h,p)),a.comments.push(p),La(d,-1,"../comments"+l+"."+r,Xn.CMNT),m=!0),f["!legacy"]&&m&&Qn(s,"xl/drawings/vmlDrawing"+l+".vml",Dae(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&Qn(s,B2(o),fv(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Qn(s,o,e7e(e.Strings,o,e)),a.strs.push(o),La(e.wbrels,-1,"sharedStrings."+r,Xn.SST)),o="xl/workbook."+r,Qn(s,o,YUe(t,o)),a.workbooks.push(o),La(e.rels,1,o,Xn.WB),o="xl/theme/theme1.xml",Qn(s,o,hR(t.Themes,e)),a.themes.push(o),La(e.wbrels,-1,"theme/theme1.xml",Xn.THEME),o="xl/styles."+r,Qn(s,o,ZUe(t,o,e)),a.styles.push(o),La(e.wbrels,-1,"styles."+r,Xn.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Qn(s,o,t.vbaraw),a.vba.push(o),La(e.wbrels,-1,"vbaProject.bin",Xn.VBA)),o="xl/metadata."+r,Qn(s,o,r7e(o)),a.metadata.push(o),La(e.wbrels,-1,"metadata."+r,Xn.XLMETA),Qn(s,"[Content_Types].xml",Yne(a,e)),Qn(s,"_rels/.rels",fv(e.rels)),Qn(s,"xl/_rels/workbook."+r+".rels",fv(e.wbrels)),delete e.revssf,delete e.ssf,s}function N9e(t,e){Wx=1024,t&&!t.SSF&&(t.SSF=Cs(wn)),t&&t.SSF&&(p1(),eP(t.SSF),e.revssf=rP(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Bb?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=Mae.indexOf(e.bookType)>-1,a=oR();wR(e=e||{});var s=q6(),o="",l=0;if(e.cellXfs=[],Bm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Qn(s,o,eae(t.Props,e)),a.coreprops.push(o),La(e.rels,2,o,Xn.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,Qn(s,o,nae(t.Props)),a.extprops.push(o),La(e.rels,3,o,Xn.EXT_PROPS),t.Custprops!==t.Props&&xi(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Qn(s,o,aae(t.Custprops)),a.custprops.push(o),La(e.rels,4,o,Xn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var f={"!id":{}},A=t.Sheets[t.SheetNames[l-1]],h=(A||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Qn(s,o,Wae(l-1,e,t,f)),a.sheets.push(o),La(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Xn.WS[0])}if(A){var m=A["!comments"],p=!1,g="";if(m&&m.length>0){var v=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(v=!0)})}),v&&(g="xl/threadedComments/threadedComment"+l+"."+r,Qn(s,g,PRe(m,d,e)),a.threadedcomments.push(g),La(f,-1,"../threadedComments/threadedComment"+l+"."+r,Xn.TCMNT)),g="xl/comments"+l+"."+r,Qn(s,g,Rae(m)),a.comments.push(g),La(f,-1,"../comments"+l+"."+r,Xn.CMNT),p=!0}A["!legacy"]&&p&&Qn(s,"xl/drawings/vmlDrawing"+l+".vml",Dae(l,A["!comments"])),delete A["!comments"],delete A["!legacy"]}f["!id"].rId1&&Qn(s,B2(o),fv(f))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Qn(s,o,Cae(e.Strings,e)),a.strs.push(o),La(e.wbrels,-1,"sharedStrings."+r,Xn.SST)),o="xl/workbook."+r,Qn(s,o,ese(t)),a.workbooks.push(o),La(e.rels,1,o,Xn.WB),o="xl/theme/theme1.xml",Qn(s,o,hR(t.Themes,e)),a.themes.push(o),La(e.wbrels,-1,"theme/theme1.xml",Xn.THEME),o="xl/styles."+r,Qn(s,o,Tae(t,e)),a.styles.push(o),La(e.wbrels,-1,"styles."+r,Xn.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Qn(s,o,t.vbaraw),a.vba.push(o),La(e.wbrels,-1,"vbaProject.bin",Xn.VBA)),o="xl/metadata."+r,Qn(s,o,Oae()),a.metadata.push(o),La(e.wbrels,-1,"metadata."+r,Xn.XLMETA),d.length>1&&(o="xl/persons/person.xml",Qn(s,o,TRe(d)),a.people.push(o),La(e.wbrels,-1,"persons/person.xml",Xn.PEOPLE)),Qn(s,"[Content_Types].xml",Yne(a,e)),Qn(s,"_rels/.rels",fv(e.rels)),Qn(s,"xl/_rels/workbook."+r+".rels",fv(e.wbrels)),delete e.revssf,delete e.ssf,s}function NR(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Nu(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function C9e(t,e){return hn.find(t,"EncryptedPackage")?y9e(t,e):ase(t,e)}function _9e(t,e){var r,n=t,a=e||{};return a.type||(a.type=Gn&&Buffer.isBuffer(t)?"buffer":"base64"),r=Ene(n,a),v9e(r,a)}function fse(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return tF(t.slice(r),e);default:break e}return Rv.to_workbook(t,e)}function E9e(t,e){var r="",n=NR(t,e);switch(e.type){case"base64":r=Nu(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=ig(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Xa(r)),e.type="binary",fse(r,e)}function S9e(t,e){var r=t;return e.type=="base64"&&(r=Nu(r)),r=_2.utils.decode(1200,r.slice(2),"str"),e.type="binary",fse(r,e)}function I9e(t){return t.match(/[^\x00-\x7F]/)?Lf(t):t}function M5(t,e,r,n){return n?(r.type="string",Rv.to_workbook(t,r)):Rv.to_workbook(e,r)}function M2(t,e){V6();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return M2(new Uint8Array(t),(r=Cs(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Av={},r.dateNF&&(Av.dateNF=r.dateNF),r.type||(r.type=Gn&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Gn?"buffer":"binary",n=wke(t),typeof Uint8Array<"u"&&!Gn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=I9e(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Cs(r),r.type="array",M2(H6(n),r)}switch((a=NR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return C9e(hn.read(n,r),r);break;case 9:if(a[1]<=8)return ase(n,r);break;case 60:return tF(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return kDe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return wae.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?_9e(n,r):M5(t,n,r,s);case 239:return a[3]===60?tF(n,r):M5(t,n,r,s);case 255:if(a[1]===254)return S9e(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Dp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Dp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return eF.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return jae.to_workbook(n,r);break;case 10:case 13:case 32:return E9e(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return TDe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?eF.to_workbook(n,r):M5(t,n,r,s)}function hse(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return kw(e.file,hn.write(t,{type:Gn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return hn.write(t,e)}function j9e(t,e){var r=Cs(e||{}),n=b9e(t,r);return P9e(n,r)}function P9e(t,e){var r={},n=Gn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?hn.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(Zj(a))}return e.password&&typeof encrypt_agile<"u"?hse(encrypt_agile(a,e.password),e):e.type==="file"?kw(e.file,a):e.type=="string"?Xa(a):a}function B9e(t,e){var r=e||{},n=I7e(t,r);return hse(n,r)}function jf(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return E2(Lf(n));case"binary":return Lf(n);case"string":return t;case"file":return kw(e.file,n,"utf8");case"buffer":return Gn?NA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):jf(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function T9e(t,e){switch(e.type){case"base64":return E2(t);case"binary":return t;case"string":return t;case"file":return kw(e.file,t,"binary");case"buffer":return Gn?NA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function t_(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?E2(r):e.type=="string"?Xa(r):r;case"file":return kw(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function lP(t,e){V6(),CUe(t);var r=Cs(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=lP(t,r);return r.type="array",Zj(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return jf(b7e(t,r),r);case"slk":case"sylk":return jf(bae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return jf(ise(t.Sheets[t.SheetNames[a]],r),r);case"txt":return T9e(Ase(t.Sheets[t.SheetNames[a]],r),r);case"csv":return jf(CR(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return jf(wae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return t_(eF.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return jf(Rv.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return jf(jae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return jf(Nae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return jf(use(t,r),r);case"wk1":return t_(Dp.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return t_(Dp.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),t_(sse(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),B9e(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return j9e(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function k9e(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function aF(t,e,r){var n={};return n.type="file",n.file=e,k9e(n),lP(t,n)}function F9e(t,e,r,n,a,s,o,l){var c=Di(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,A=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(A,"__rowNum__",{value:r,enumerable:!1})}catch{A.__rowNum__=r}else A.__rowNum__=r;if(!o||t[r])for(var h=e.s.c;h<=e.e.c;++h){var m=o?t[r][h]:t[n[h]+c];if(m===void 0||m.t===void 0){if(u===void 0)continue;s[h]!=null&&(A[s[h]]=u);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[h]!=null){if(p==null)if(m.t=="e"&&p===null)A[s[h]]=null;else if(u!==void 0)A[s[h]]=u;else if(d&&p===null)A[s[h]]=null;else continue;else A[s[h]]=d&&(m.t!=="n"||m.t==="n"&&l.rawNumbers!==!1)?p:lA(m,p,l);p!=null&&(f=!1)}}return{row:A,isempty:f}}function zS(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=ha(d);break;case"number":c=ha(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Di(c.s.r),A=[],h=[],m=0,p=0,g=Array.isArray(t),v=c.s.r,y=0,b={};g&&!t[v]&&(t[v]=[]);var w=u.skipHidden&&t["!cols"]||[],P=u.skipHidden&&t["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(w[y]||{}).hidden)switch(A[y]=Ys(y),r=g?t[v][y]:t[A[y]+f],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=A[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=lA(r,null,u),p=b[o]||0,!p)b[o]=1;else{do l=o+"_"+p++;while(b[l]);b[o]=p,b[l]=1}s[y]=l}for(v=c.s.r+a;v<=c.e.r;++v)if(!(P[v]||{}).hidden){var j=F9e(t,c,v,A,n,s,g,u);(j.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(h[m++]=j.row)}return h.length=m,h}var V$=/"/g;function O9e(t,e,r,n,a,s,o,l){for(var c=!0,u=[],d="",f=Di(r),A=e.s.c;A<=e.e.c;++A)if(n[A]){var h=l.dense?(t[r]||[])[A]:t[n[A]+f];if(h==null)d="";else if(h.v!=null){c=!1,d=""+(l.rawNumbers&&h.t=="n"?h.v:lA(h,null,l));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||p===34||l.forceQuotes){d='"'+d.replace(V$,'""')+'"';break}d=="ID"&&(d='"ID"')}else h.f!=null&&!h.F?(c=!1,d="="+h.f,d.indexOf(",")>=0&&(d='"'+d.replace(V$,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function CR(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=ha(t["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(t);for(var A=n.skipHidden&&t["!cols"]||[],h=n.skipHidden&&t["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(A[m]||{}).hidden||(f[m]=Ys(m));for(var p=0,g=a.s.r;g<=a.e.r;++g)(h[g]||{}).hidden||(d=O9e(t,a,g,f,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?l:"")+d)));return delete n.dense,r.join("")}function Ase(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=CR(t,e);return r}function D9e(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=ha(t["!ref"]),s="",o=[],l,c=[],u=Array.isArray(t);for(l=a.s.c;l<=a.e.c;++l)o[l]=Ys(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=Di(d),l=a.s.c;l<=a.e.c;++l)if(e=o[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function mse(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Js(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+e.length-1+a}};if(s["!ref"]){var f=ha(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+e.length-1+a)}else o==-1&&(o=0,d.e.r=e.length-1+a);var A=n.header||[],h=0;e.forEach(function(p,g){xi(p).forEach(function(v){(h=A.indexOf(v))==-1&&(A[h=A.length]=v);var y=p[v],b="z",w="",P=Nn({c:l+h,r:o+g+a});u=L2(s,P),y&&typeof y=="object"&&!(y instanceof Date)?s[P]=y:(typeof y=="number"?b="n":typeof y=="boolean"?b="b":typeof y=="string"?b="s":y instanceof Date?(b="d",n.cellDates||(b="n",y=yo(y)),w=n.dateNF||wn[14]):y===null&&n.nullError&&(b="e",y=0),u?(u.t=b,u.v=y,delete u.w,delete u.R,w&&(u.z=w)):s[P]=u={t:b,v:y},w&&(u.z=w))})}),d.e.c=Math.max(d.e.c,l+A.length-1);var m=Di(o);if(a)for(h=0;h<A.length;++h)s[Ys(h+l)+m]={t:"s",v:A[h]};return s["!ref"]=Rn(d),s}function R9e(t,e){return mse(null,t,e)}function L2(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Js(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?L2(t,Nn(e)):L2(t,Nn({r:e,c:r||0}))}function M9e(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function _R(){return{SheetNames:[],Sheets:{}}}function ER(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=o+a)!=-1;++a);}if(Zae(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function L9e(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=M9e(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function U9e(t,e){return t.z=e,t}function pse(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Q9e(t,e,r){return pse(t,"#"+e,r)}function V9e(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function H9e(t,e,r,n){for(var a=typeof e!="string"?e:ha(e),s=typeof e=="string"?e:Rn(e),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=L2(t,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var zs={encode_col:Ys,encode_row:Di,encode_cell:Nn,encode_range:Rn,decode_col:tR,decode_row:eR,split_cell:eFe,decode_cell:Js,decode_range:Qc,format_cell:lA,sheet_add_aoa:$ne,sheet_add_json:mse,sheet_add_dom:ose,aoa_to_sheet:g1,json_to_sheet:R9e,table_to_sheet:lse,table_to_book:X7e,sheet_to_csv:CR,sheet_to_txt:Ase,sheet_to_json:zS,sheet_to_html:ise,sheet_to_formulae:D9e,sheet_to_row_object_array:zS,sheet_get_cell:L2,book_new:_R,book_append_sheet:ER,book_set_sheet_visibility:L9e,cell_set_number_format:U9e,cell_set_hyperlink:pse,cell_set_internal_link:Q9e,cell_add_comment:V9e,sheet_set_array_formula:H9e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const L5=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function za(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Ch(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function l0(t,e=1){const r=Math.floor(Ch(t,e));return r>0?r:e}function $9e(t){return Object.values(t||{}).every(r=>za(r)==="")}function Km(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(za(a),a));for(const a of e){const s=n.get(za(a));if(s!=null)return t[s]}}function G9e({open:t,code:e,onClose:r}){return t?i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-lg border p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"font-bold text-lg",children:"Cdigo de barras"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-3",children:[i.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Valor"}),i.jsx("div",{className:"text-xl font-mono font-semibold break-all",children:e})]}),i.jsx("div",{className:"mt-3 flex gap-2 justify-end",children:i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>{var n;try{(n=navigator.clipboard)==null||n.writeText(e)}catch{}},children:"Copiar"})})]})}):null}function K9e({open:t,onClose:e,onDetected:r}){const n=x.useRef(null),a=x.useRef(null),[s,o]=x.useState(""),l=x.useRef("");return x.useEffect(()=>{if(!t)return;let c=!1;const u=new C2,d=()=>{var A,h,m;try{(A=a.current)==null||A.stop()}catch{}a.current=null;try{const p=(h=n.current)==null?void 0:h.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{o("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const A=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,h=>{if(!c&&h){const m=String(h.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=A}catch(A){const h=String((A==null?void 0:A.message)||""),m=String((A==null?void 0:A.name)||"");h.toLowerCase().includes("permission")||m==="NotAllowedError"?o("Permiso de cmara denegado."):m==="NotFoundError"||h.toLowerCase().includes("notfound")?o("No se encontr cmara en este dispositivo."):h.toLowerCase().includes("secure")||h.toLowerCase().includes("https")?o("La cmara requiere HTTPS (sitio seguro)."):o(h||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function q9e(){const{refreshKey:t,refresh:e}=vc(),[r,n]=x.useState(!0),[a,s]=x.useState(""),[o,l]=x.useState([]),[c,u]=x.useState(""),[d,f]=x.useState(""),[A,h]=x.useState(0),[m,p]=x.useState(1),[g,v]=x.useState(""),[y,b]=x.useState(""),[w,P]=x.useState(null),[j,_]=x.useState(""),[I,E]=x.useState(""),[F,k]=x.useState(0),[B,R]=x.useState(1),[Y,me]=x.useState(""),[pe,he]=x.useState(""),[ge,se]=x.useState(""),[je,Te]=x.useState(""),[D,K]=x.useState(""),[z,Q]=x.useState(!1),[J,ee]=x.useState(""),[M,G]=x.useState(!1),[ne,ve]=x.useState("create"),[V,qe]=x.useState(!1),[ie,re]=x.useState(""),[Fe,de]=x.useState([]),[we,Le]=x.useState([]),[Ge,ft]=x.useState(!1),[ht,xt]=x.useState(!1);x.useEffect(()=>{var oe;const it=window.matchMedia("(max-width: 900px)"),X=()=>xt(it.matches);return X(),(oe=it.addEventListener)==null||oe.call(it,"change",X),()=>{var L;return(L=it.removeEventListener)==null?void 0:L.call(it,"change",X)}},[]);const[jt,kt]=x.useState(!0),[wt,Ve]=x.useState(!0);x.useEffect(()=>{ht?(kt(!1),Ve(!1)):(kt(!0),Ve(!0))},[ht]);const[Pe,be]=x.useState(null),ce=x.useRef(!1),te=x.useRef(null);x.useEffect(()=>{n(!0),s("");const it=At(De,"products_candies"),X=er(it,bn("name","asc")),oe=dd(X,L=>{const Ae=[],Ee={};L.forEach(S=>{const O=S.data(),U=String(O.barcode||"").trim()||void 0;U&&(Ee[S.id]=U),Ae.push({id:S.id,name:O.name||"",category:O.category||"",providerPrice:Number(O.providerPrice||0),unitsPerPackage:Number(O.unitsPerPackage||1),barcode:U,packaging:String(O.packaging||O.empaque||"").trim()||void 0,createdAt:O.createdAt})});const Oe=Ne.current||{};let Be=!1;for(const S of Object.keys(Ee))if((Ee[S]||"")!==(Oe[S]||"")){Be=!0;break}l(Ae),Ne.current=Ee,n(!1),!Re.current&&Be&&(s(" Catlogo actualizado."),setTimeout(()=>s(""),3e3)),Re.current=!1},L=>{console.error(L),s(" Error sincronizando catlogo de dulces."),n(!1)});return()=>oe()},[t]);const Ne=x.useRef({}),Re=x.useRef(!0),ye=x.useMemo(()=>{const it=za(ge),X=String(je||"").trim(),oe=String(D||"").trim().toLowerCase();return oe?o.filter(L=>String(L.packaging||"").trim().toLowerCase()===oe):!it&&!X?o:o.filter(L=>{const Ae=`${L.category} ${L.name}`.toLowerCase(),Ee=it?Ae.includes(it):!0,Oe=String(L.barcode||""),Be=X?Oe.includes(X):!0;return Ee&&Be})},[o,ge,je,D]),Xe=x.useMemo(()=>{const it=new Set;return o.forEach(X=>{const oe=String(X.category||"").trim();oe&&it.add(oe)}),Array.from(it).sort((X,oe)=>X.localeCompare(oe,"es"))},[o]),mt=()=>{u(""),f(""),h(0),p(1),v(""),b("")},rt=async it=>{if(it.preventDefault(),ce.current||r)return;s("");const X=String(c||"").trim(),oe=String(d||"").trim(),L=Math.max(0,Ch(A,0)),Ae=l0(m,1),Ee=String(g||"").trim();if(!X)return s(" La categora es requerida.");if(!oe)return s(" El nombre del producto es requerido.");if(L<=0)return s(" El precio proveedor debe ser > 0.");if(Ae<=0)return s(" Und x paquete debe ser > 0.");const Oe=`${za(X)}::${za(oe)}`,Be=Date.now();if(te.current&&te.current.key===Oe&&Be-te.current.ts<4e3){s(" Ya se est creando este producto.");return}if(o.some(O=>za(O.category)===za(X)&&za(O.name)===za(oe)))return s(" Ya existe un producto con esa categora y nombre.");if(Ee&&o.some(U=>String(U.barcode||"")===Ee))return s(" Ya existe un producto con ese cdigo de barras.");ce.current=!0,te.current={key:Oe,ts:Be};try{if(n(!0),!(await Lt(er(At(De,"products_candies"),ur("category","==",X),ur("name","==",oe),lS(1)))).empty){s(" Ya existe un producto con esa categora y nombre.");return}if(Ee&&!(await Lt(er(At(De,"products_candies"),ur("barcode","==",Ee),lS(1)))).empty){s(" Ya existe un producto con ese cdigo de barras.");return}const U={category:X,name:oe,providerPrice:L,unitsPerPackage:Ae,createdAt:mr.now()};Ee&&(U.barcode=Ee);const q=String(y||"").trim();q&&(U.packaging=q),await Hn(At(De,"products_candies"),U),s(" Producto creado."),mt()}catch(O){console.error(O),s(" Error creando producto.")}finally{n(!1),ce.current=!1}},ue=it=>{P(it.id),_(it.category),E(it.name),k(it.providerPrice),R(it.unitsPerPackage||1),me(String(it.barcode||"")),he(String(it.packaging||"")),s("")},_e=()=>{P(null),_(""),E(""),k(0),R(1),me(""),he("")},We=async()=>{if(!w)return;s("");const it=String(j||"").trim(),X=String(I||"").trim(),oe=Math.max(0,Ch(F,0)),L=l0(B,1),Ae=String(Y||"").trim(),Ee=String(pe||"").trim();if(!it)return s(" La categora es requerida.");if(!X)return s(" El nombre del producto es requerido.");if(oe<=0)return s(" El precio proveedor debe ser > 0.");if(L<=0)return s(" Und x paquete debe ser > 0.");if(o.some(Be=>Be.id!==w&&za(Be.category)===za(it)&&za(Be.name)===za(X)))return s(" Ya existe otro producto con esa categora y nombre.");if(Ae&&o.some(S=>S.id!==w&&String(S.barcode||"")===Ae))return s(" Ya existe otro producto con ese cdigo de barras.");try{n(!0);const Be={category:it,name:X,providerPrice:oe,unitsPerPackage:L,updatedAt:mr.now()};Be.barcode=Ae||"",Be.packaging=Ee||"",await Cn(Yt(De,"products_candies",w),Be),l(S=>S.map(O=>O.id===w?{...O,category:it,name:X,providerPrice:oe,unitsPerPackage:L,barcode:Ae||void 0,packaging:Ee||void 0}:O).sort((O,U)=>O.name.localeCompare(U.name,"es"))),ht&&s(" Producto guardado."),_e()}catch(Be){console.error(Be),s(" Error actualizando producto.")}finally{n(!1)}},ot=async it=>{if(confirm(`Eliminar "${it.name}" (${it.category}) del catlogo?`))try{n(!0),await Dn(Yt(De,"products_candies",it.id)),l(oe=>oe.filter(L=>L.id!==it.id)),s(" Producto eliminado.")}catch(oe){console.error(oe),s(" Error eliminando producto.")}finally{n(!1)}},Ce=()=>{const it=[{Id:"",Categoria:"Gomitas",Producto:"Gomita Fresa",PrecioProveedor:120,UnidadesPorPaquete:24,Empaque:"Tarro",Codigo:"7445074183182"}],X=zs.json_to_sheet(it),oe=zs.book_new();zs.book_append_sheet(oe,X,"Productos");const L=lP(oe,{type:"array",bookType:"xlsx"}),Ae=new Blob([L],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Ee=URL.createObjectURL(Ae),Oe=document.createElement("a");Oe.href=Ee,Oe.download="template_productos_dulces.xlsx",document.body.appendChild(Oe),Oe.click(),Oe.remove(),URL.revokeObjectURL(Ee)},$e=it=>{const X=[],oe=[];it.forEach((Ae,Ee)=>{if(!Ae||typeof Ae!="object"||$9e(Ae))return;const Oe=String(Km(Ae,["Id","ID","productId","docId"])??"").trim(),Be=String(Km(Ae,["Categoria","Categora","Category","cat","category"])??"").trim(),S=String(Km(Ae,["Producto","Product","Nombre","Name","producto","name"])??"").trim(),O=Km(Ae,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Precio","Costo","providerPrice"]),U=Km(Ae,["UnidadesPorPaquete","Und x Paquete","UnitsPerPackage","UPP","unitsPerPackage"]),q=Km(Ae,["Codigo","Cdigo","Barcode","barcode","EAN","UPC","Code"]),ae=String(q??"").trim(),fe=Km(Ae,["Empaque","Packaging","PackagingType","Pack","Formato"]),Ue=String(fe??"").trim(),Ze=Math.max(0,Ch(O,0)),lt=l0(U,1),Qe=Ee+2;Be||oe.push(`Fila ${Qe}: falta Categoria.`),S||oe.push(`Fila ${Qe}: falta Producto/Nombre.`),Ze<=0&&oe.push(`Fila ${Qe}: PrecioProveedor debe ser > 0.`),lt<=0&&oe.push(`Fila ${Qe}: UnidadesPorPaquete debe ser > 0.`),Be&&S&&Ze>0&&lt>0&&X.push({id:Oe||void 0,category:Be,name:S,providerPrice:Ze,unitsPerPackage:lt,barcode:ae||void 0,packaging:Ue||void 0,_raw:Ae})});const L=new Map;for(const Ae of X){const Ee=Ae.id?`id::${Ae.id}`:`${za(Ae.category)}::${za(Ae.name)}`;L.set(Ee,Ae)}return{rows:Array.from(L.values()),errors:oe}},gt=async it=>{if(s(""),Le([]),de([]),re((it==null?void 0:it.name)||""),!it)return;const X=it.name.toLowerCase(),oe=X.endsWith(".xlsx")||X.endsWith(".xls"),L=X.endsWith(".csv");if(!oe&&!L){Le(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{ft(!0);const Ae=new FileReader,Ee=await new Promise((ae,fe)=>{Ae.onerror=()=>fe(new Error("No se pudo leer el archivo.")),Ae.onload=()=>ae(Ae.result),Ae.readAsArrayBuffer(it)}),Oe=M2(new Uint8Array(Ee),{type:"array"}),Be=Oe.SheetNames[0],S=Oe.Sheets[Be],O=zs.sheet_to_json(S,{defval:""}),{rows:U,errors:q}=$e(O);de(U),Le(q),U.length===0&&q.length===0&&Le(["No se encontraron filas vlidas para importar."])}catch(Ae){console.error(Ae),Le(["Error leyendo el archivo. Revis que no est corrupto."])}finally{ft(!1)}},Kt=(it,X)=>{de(oe=>{const L=[...oe],Ae=L[it];return Ae?(L[it]={...Ae,...X},L):oe})},Ut=async()=>{if(s(""),we.length>0){s(" Correg los errores antes de importar.");return}if(Fe.length===0){s(" No hay filas para importar.");return}try{ft(!0);const it={},X={},oe={};o.forEach(Oe=>{it[Oe.id]=Oe,X[`${za(Oe.category)}::${za(Oe.name)}`]=Oe;const Be=String(Oe.barcode||"").trim();Be&&(oe[Be]=Oe)});const L=Zd(De);let Ae=0,Ee=0;for(const Oe of Fe){const Be=String(Oe.category||"").trim(),S=String(Oe.name||"").trim(),O=Math.max(0,Ch(Oe.providerPrice,0)),U=l0(Oe.unitsPerPackage,1),q=String(Oe.barcode||"").trim();if(!Be||!S||O<=0||U<=0)continue;let ae;if(Oe.id&&it[Oe.id])ae=it[Oe.id];else{const fe=`${za(Be)}::${za(S)}`;ae=X[fe]}if(!ae&&q&&oe[q]&&(ae=oe[q]),ae){const fe={category:Be,name:S,providerPrice:O,unitsPerPackage:U,updatedAt:mr.now()};Oe.barcode!=null&&(fe.barcode=q||""),Oe.packaging!=null&&(fe.packaging=String(Oe.packaging||"")||""),L.update(Yt(De,"products_candies",ae.id),fe),Ee+=1}else{const fe=Yt(At(De,"products_candies")),Ue={category:Be,name:S,providerPrice:O,unitsPerPackage:U,createdAt:mr.now()};q&&(Ue.barcode=q),Oe.packaging&&(Ue.packaging=Oe.packaging),L.set(fe,Ue),Ae+=1}}await L.commit(),s(` Importacin lista. Creados: ${Ae}, Actualizados: ${Ee}`),qe(!1),de([]),Le([]),re(""),e()}catch(it){console.error(it),s(" Error importando productos a Firestore.")}finally{ft(!1)}},Jt=x.useMemo(()=>{const it=new Set(o.map(Ee=>Ee.id)),X=new Set(o.map(Ee=>`${za(Ee.category)}::${za(Ee.name)}`)),oe=new Set(o.map(Ee=>String(Ee.barcode||"").trim()).filter(Boolean));let L=0,Ae=0;for(const Ee of Fe){if(Ee.id&&it.has(Ee.id)){L+=1;continue}const Oe=`${za(Ee.category)}::${za(Ee.name)}`;if(X.has(Oe)){L+=1;continue}const Be=String(Ee.barcode||"").trim();if(Be&&oe.has(Be)){L+=1;continue}Ae+=1}return{willCreate:Ae,willUpdate:L,total:Fe.length}},[Fe,o]);return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Catalogo"}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(xc,{onClick:e,loading:r||Ge}),!ht&&i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{qe(!0),de([]),Le([]),re("")},children:"Importar"})]})})]}),ht&&i.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-900 text-white",onClick:()=>kt(it=>!it),children:jt?"Ocultar creacin":"Crear producto"}),i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{qe(!0),de([]),Le([]),re("")},children:"Importar"}),i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-200",onClick:()=>Ve(it=>!it),children:wt?"Ocultar filtros":"Mostrar filtros"}),wt&&i.jsxs("div",{className:"bg-white p-3 rounded shadow-sm border",children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:D,onChange:it=>K(it.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),jt&&i.jsxs("form",{onSubmit:rt,className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Categora"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:it=>u(it.target.value),placeholder:"Ej: Gomitas"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:d,onChange:it=>f(it.target.value),placeholder:"Ej: Gomita Fresa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:it=>b(it.target.value),children:[i.jsx("option",{value:"",children:"Seleccionar"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio proveedor (paq)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(A)?"":A,onChange:it=>h(Math.max(0,Ch(it.target.value,0)))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Und x paquete"}),i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:m,onChange:it=>p(l0(it.target.value,1))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo (opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"w-full border rounded px-2 py-1",value:g,onChange:it=>v(it.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white hover:bg-black whitespace-nowrap",onClick:()=>{ve("create"),G(!0)},children:"Escanear"})]})]}),i.jsxs("div",{className:"md:col-span-6 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:mt,children:"Limpiar"}),i.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",disabled:r,children:"Crear producto"})]})]}),wt&&i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-3 flex flex-col md:flex-row gap-3 items-center text-sm",children:[i.jsxs("div",{className:"w-full md:w-1/2",children:[i.jsx("label",{className:"block font-semibold",children:"Buscar"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:ge,onChange:it=>se(it.target.value),placeholder:"Buscar por categora o producto"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:D,onChange:it=>K(it.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),i.jsxs("div",{className:"w-full md:w-1/2",children:[i.jsx("label",{className:"block font-semibold",children:"Buscar por cdigo"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:je,onChange:it=>Te(it.target.value),placeholder:"Ej: 7445074183182"}),i.jsx("div",{className:"mt-2 md:mt-0",children:i.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ve("search"),G(!0),Ve(!0)},children:"Escanear producto"})}),i.jsx("div",{className:"mt-2 md:mt-0",children:i.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{se(""),Te("")},children:"Limpiar filtros"})})]}),i.jsxs("div",{className:"w-full md:w-auto text-right",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Productos en catlogo"}),i.jsx("div",{className:"text-lg font-semibold",children:ye.length})]})]}),ht?i.jsx("div",{className:"space-y-2",children:r?i.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Cargando"}):ye.length===0?i.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Sin productos."}):ye.map(it=>{const X=w===it.id,oe=Pe===it.id,L=!!String(it.barcode||"").trim();return i.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>be(Ae=>Ae===it.id?null:it.id),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-bold truncate",children:it.name}),i.jsx("div",{className:"text-xs text-gray-600 truncate",children:it.category})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),i.jsx("div",{className:"font-bold tabular-nums",children:L5(it.providerPrice)})]})]}),oe&&i.jsx("div",{className:"px-3 pb-3 border-t",children:i.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Categora"}),X?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:j,onChange:Ae=>_(Ae.target.value)}):i.jsx("div",{className:"font-semibold",children:it.category})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Und x paquete"}),X?i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:B,onChange:Ae=>R(l0(Ae.target.value,1))}):i.jsx("div",{className:"font-semibold text-right tabular-nums",children:it.unitsPerPackage})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Empaque"}),X?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:pe,onChange:Ae=>he(Ae.target.value),children:[i.jsx("option",{value:"",children:"Seleccionar"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):i.jsx("div",{className:"font-semibold",children:it.packaging||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),X?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(F)?"":F,onChange:Ae=>k(Math.max(0,Ch(Ae.target.value,0)))}):i.jsx("div",{className:"font-semibold tabular-nums",children:L5(it.providerPrice)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Cdigo"}),X?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-1",value:Y,onChange:Ae=>me(Ae.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ve("edit"),G(!0)},children:"Escanear"})]}):L?i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{ee(String(it.barcode||"").trim()),Q(!0)},children:"Ver cdigo"}):i.jsx("div",{className:"text-gray-600",children:"No"})]})]}),i.jsx("div",{className:"pt-2 flex gap-2",children:X?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-blue-600 text-white",onClick:We,type:"button",children:"Guardar"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ve("edit"),G(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-200",onClick:_e,type:"button",children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400",onClick:()=>ue(it),type:"button",children:"Editar"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-red-600 text-white",onClick:()=>ot(it),type:"button",children:"Borrar"})]})})]})})]},it.id)})}):i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1050px] w-full text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),i.jsx("th",{className:"p-2 border text-center",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ye.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin productos."})}):ye.map(it=>{const X=w===it.id,oe=!!String(it.barcode||"").trim();return i.jsxs("tr",{className:"align-top",children:[i.jsx("td",{className:"p-2 border",children:X?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:j,onChange:L=>_(L.target.value)}):it.category}),i.jsx("td",{className:"p-2 border",children:X?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:L=>E(L.target.value)}):it.name}),i.jsx("td",{className:"p-2 border",children:X?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:pe,onChange:L=>he(L.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):it.packaging||""}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:X?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(F)?"":F,onChange:L=>k(Math.max(0,Ch(L.target.value,0)))}):L5(it.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:X?i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:B,onChange:L=>R(l0(L.target.value,1))}):it.unitsPerPackage}),i.jsx("td",{className:"p-2 border text-center",children:X?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("input",{className:"w-44 border rounded px-2 py-1",value:Y,onChange:L=>me(L.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-800 text-white hover:bg-black",onClick:()=>{ve("edit"),G(!0)},children:"Escanear"})]}):oe?i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{ee(String(it.barcode||"").trim()),Q(!0)},children:"S"}):i.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:"No"})}),i.jsx("td",{className:"p-2 border",children:X?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:We,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:_e,type:"button",children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",onClick:()=>ue(it),type:"button",children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ot(it),type:"button",children:"Borrar"})]})})]},it.id)})})]})}),a?ht&&a===" Producto guardado."?i.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 text-sm",children:a}),i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white",onClick:()=>{s(""),_e(),G(!1)},children:"Aceptar"})]}):i.jsx("p",{className:"mt-2 text-sm",children:a}):null,i.jsx(G9e,{open:z,code:J,onClose:()=>Q(!1)}),i.jsx(K9e,{open:M,onClose:()=>G(!1),onDetected:async it=>{const X=String(it||"").trim();if(X){if(ne==="edit"&&w){if(o.some(L=>L.id!==w&&String(L.barcode||"")===X)){s(" Ya existe otro producto con ese cdigo de barras."),me(X),G(!1);return}try{await Cn(Yt(De,"products_candies",w),{barcode:X}),l(L=>L.map(Ae=>Ae.id===w?{...Ae,barcode:X}:Ae)),me(X),ht&&s(" Producto guardado.")}catch(L){console.error(L),s(" Error guardando cdigo de barras.")}finally{G(!1)}return}if(ne==="search"){Te(X),G(!1);return}ne==="create"?v(it):me(it)}}}),V&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Importar productos (.xlsx / .csv)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>qe(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),i.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas (flexible): Id (opcional), Categoria, Producto/Nombre, PrecioProveedor, UnidadesPorPaquete, Empaque (opcional), Codigo (opcional)."})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Ce,type:"button",children:"Descargar template .xlsx"})]}),i.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:it=>{var X;return gt(((X=it.target.files)==null?void 0:X[0])||null)}}),ie&&i.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",i.jsx("b",{children:ie})]}),Ge&&i.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),we.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[i.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),i.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:we.slice(0,50).map((it,X)=>i.jsx("li",{children:it},X))})]}),i.jsxs("div",{className:"bg-white border rounded p-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Jt.total," filas (Crear:"," ",Jt.willCreate," / Actualizar:"," ",Jt.willUpdate,")"]})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:Ut,disabled:Ge||Fe.length===0||we.length>0,type:"button",children:"Importar a Firestore"})]}),i.jsxs("div",{className:"overflow-x-auto border rounded",children:[i.jsxs("table",{className:"min-w-[1250px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Codigo (opcional)"}),i.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),i.jsx("tbody",{children:Fe.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):Fe.slice(0,300).map((it,X)=>{const oe=it.id?o.some(Oe=>Oe.id===it.id):!1,L=o.some(Oe=>`${za(Oe.category)}::${za(Oe.name)}`==`${za(it.category)}::${za(it.name)}`),Ae=it.barcode?o.some(Oe=>String(Oe.barcode||"")===it.barcode):!1,Ee=oe||L||Ae;return i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:it.id||"",onChange:Oe=>Kt(X,{id:Oe.target.value.trim()||void 0}),placeholder:"docId (si quers update exacto)"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:it.category,onChange:Oe=>Kt(X,{category:Oe.target.value}),list:"categories-list"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-72 border rounded px-2 py-1",value:it.name,onChange:Oe=>Kt(X,{name:Oe.target.value})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(it.providerPrice)?"":it.providerPrice,onChange:Oe=>Kt(X,{providerPrice:Math.max(0,Ch(Oe.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:it.unitsPerPackage,onChange:Oe=>Kt(X,{unitsPerPackage:l0(Oe.target.value,1)})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:it.packaging||"",onChange:Oe=>Kt(X,{packaging:Oe.target.value.trim()||void 0}),placeholder:"Tarro, Bolsa..."})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:it.barcode||"",onChange:Oe=>Kt(X,{barcode:Oe.target.value.trim()||void 0}),placeholder:"EAN/UPC (opcional)"})}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${Ee?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:Ee?"ACTUALIZA":"CREA"})})]},`${it.id||""}-${X}`)})})]}),i.jsx("datalist",{id:"categories-list",children:Xe.map(it=>i.jsx("option",{value:it},it))})]}),Fe.length>300&&i.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",Fe.length," filas (el import importa todas)."]})]})]})})]})}function gse(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=Number(t.totalUnits||0),n=Number(t.quantity||0),a=Number(t.packages||0);return r>0?Math.floor(r):n>0?Math.floor(n):a>0?Math.floor(a*e):0}function U5(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):gse(t)}const xse=t=>Math.max(0,Math.floor(Number(t??0)));function z9e(t){return xse(t.packages??t.totalPackages??t.packs??t.packagesInitial??t.initialPackages??0)}function W9e(t){return xse(t.remainingPackages??t.remainingPacks??t.packsRemaining??t.packagesRemaining??t.remaining_packages??0)}async function X9e(t){const e=Yt(De,"candy_main_orders",t);if((await ei(e)).exists())return e;const n=er(At(De,"candy_main_orders"),ur("orderId","==",t)),a=await Lt(n);return a.empty?null:Yt(De,"candy_main_orders",a.docs[0].id)}async function Q5(t){if(!t)return;const e=await X9e(t);if(!e)return;const r=er(At(De,"inventory_candies"),ur("orderId","==",t)),n=await Lt(r),a=new Map;n.forEach(l=>{const c=l.data(),u=String(c.productId||"");if(!u)return;const d=z9e(c),f=W9e(c),A=Math.max(1,Math.floor(Number(c.unitsPerPackage||1))),h=Number(c.providerPrice||0),m=Number(c.unitPriceRivas||0),p=Number(c.unitPriceSanJorge||0),g=Number(c.unitPriceIsla||0),v=h*d,y=m*d,b=p*d,w=g*d,P=y-v,j=b-v,_=w-v;a.has(u)||a.set(u,{productId:u,name:String(c.productName||""),category:String(c.category||""),unitsPerPackage:A,providerPrice:h,marginRivas:typeof c.marginRivas=="number"?Number(c.marginRivas):void 0,marginSanJorge:typeof c.marginSanJorge=="number"?Number(c.marginSanJorge):void 0,marginIsla:typeof c.marginIsla=="number"?Number(c.marginIsla):void 0,packages:0,remainingPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,unitPriceRivas:m||0,unitPriceSanJorge:p||0,unitPriceIsla:g||0,gainRivas:0,gainSanJorge:0,gainIsla:0});const I=a.get(u);I.packages+=d,I.remainingPackages+=f,I.subtotal+=v,I.totalRivas+=y,I.totalSanJorge+=b,I.totalIsla+=w,I.gainRivas+=P,I.gainSanJorge+=j,I.gainIsla+=_,I.providerPrice=h,I.unitPriceRivas=m||I.unitPriceRivas,I.unitPriceSanJorge=p||I.unitPriceSanJorge,I.unitPriceIsla=g||I.unitPriceIsla,I.unitsPerPackage=A||I.unitsPerPackage,I.name=String(c.productName||I.name),I.category=String(c.category||I.category)});const s=Array.from(a.values()).map(l=>({id:l.productId,name:l.name,category:l.category,providerPrice:l.providerPrice,unitsPerPackage:l.unitsPerPackage,packages:l.packages,remainingPackages:l.remainingPackages,marginRivas:l.marginRivas??void 0,marginSanJorge:l.marginSanJorge??void 0,marginIsla:l.marginIsla??void 0,subtotal:l.subtotal,totalRivas:l.totalRivas,totalSanJorge:l.totalSanJorge,totalIsla:l.totalIsla,unitPriceRivas:l.unitPriceRivas,unitPriceSanJorge:l.unitPriceSanJorge,unitPriceIsla:l.unitPriceIsla,gainRivas:l.gainRivas,gainSanJorge:l.gainSanJorge,gainIsla:l.gainIsla})),o=s.reduce((l,c)=>l+Number(c.packages||0),0);await Cn(e,{totalPackages:o,items:s})}function Y9e(t){const e=t==null?void 0:t.allocationsByItem;if(!e)return null;const r=[];if(Array.isArray(e))for(const n of e){const a=Array.isArray(n==null?void 0:n.allocations)?n.allocations:[];for(const s of a){const o=String(s.inventorySellerId||""),l=Math.max(0,Math.floor(Number(s.units??s.qty??s.quantity??0)));!o||l<=0||r.push({inventorySellerId:o,units:l})}}else if(typeof e=="object")for(const n of Object.keys(e)){const a=e[n],s=Array.isArray(a==null?void 0:a.allocations)?a.allocations:[];for(const o of s){const l=String(o.inventorySellerId||""),c=Math.max(0,Math.floor(Number(o.units??o.qty??o.quantity??0)));!l||c<=0||r.push({inventorySellerId:l,units:c})}}return r.length?{allocations:r}:null}async function U2(t){const e=t.split("#")[0],r=Yt(De,"sales_candies",e),n=await ei(r);if(!n.exists())throw new Error("La venta no existe.");const a=n.data(),s=Y9e(a);if(s&&s.allocations.length>0){let u=0;return await ki(De,async d=>{const f={};for(const p of s.allocations){const g=p.inventorySellerId,v=Math.max(0,Math.floor(Number(p.units||0)));!g||v<=0||(f[g]=(f[g]||0)+v,u+=v)}const h=Object.keys(f).map(p=>Yt(De,"inventory_candies_sellers",p)),m=await Promise.all(h.map(p=>d.get(p)));for(let p=0;p<h.length;p++){const g=m[p];if(!g.exists())continue;const v=g.data(),y=Number(v.remainingUnits??v.remaining??0),b=Math.max(0,Math.floor(Number(f[h[p].id]||0))),w=y+b,P=Math.max(1,Math.floor(Number(v.unitsPerPackage||1))),j=Math.floor(w/P);d.update(h[p],{remainingUnits:w,remainingPackages:j})}d.delete(r)}),{restored:u}}const o=[];if(Array.isArray(a.items)&&a.items.length>0){const u={};if(a.allocationsByItem&&typeof a.allocationsByItem=="object")for(const d of Object.keys(a.allocationsByItem)){const f=a.allocationsByItem[d],A=String((f==null?void 0:f.productId)||d||"");if(!A)continue;const h=Array.isArray(f==null?void 0:f.allocations)?f.allocations:[];u[A]=h.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(a.allocationsByItem))for(const d of a.allocationsByItem){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const A=Array.isArray(d==null?void 0:d.allocations)?d.allocations:[];u[f]=A.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}for(const d of a.items){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const A=Math.max(0,Math.floor(Number((d==null?void 0:d.qty)||(d==null?void 0:d.quantity)||0))),h=Array.isArray(d==null?void 0:d.allocations)?d.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):u[f]||[];o.push({productId:f,productName:String((d==null?void 0:d.productName)||""),qty:A,allocations:h.length?h:void 0})}}else{const u=a.item||{},d=String(u.productId||a.productId||""),f=Math.max(0,Math.floor(Number(u.qty??a.quantity??0))),A=Array.isArray(a.allocations)?a.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):[];d&&f>0&&o.push({productId:d,productName:String(u.productName||a.productName||""),qty:f,allocations:A.length?A:void 0})}if(o.length===0)return await ki(De,async u=>{u.delete(r)}),{restored:0};if(o.every(u=>Array.isArray(u.allocations)&&u.allocations.length>0)){let u=0;return await ki(De,async d=>{const f=[];for(const h of o)for(const m of h.allocations||[]){const p=Math.max(0,Math.floor(Number(m.qty||0)));u+=p,f.push({ref:Yt(De,"inventory_candies",m.batchId),addBack:p})}const A=await Promise.all(f.map(h=>d.get(h.ref)));for(let h=0;h<f.length;h++){const m=A[h];if(!m.exists())continue;const p=m.data(),g=U5(p),v=Math.max(0,Math.floor(Number(f[h].addBack||0))),y=g+v,b=Math.max(1,Math.floor(Number(p.unitsPerPackage||1))),w=Math.floor(y/b);d.update(f[h].ref,{remaining:y,remainingPackages:w,packages:w})}d.delete(r)}),{restored:u}}let c=0;return await ki(De,async u=>{const d={};for(const p of o){if(!p.productId||p.qty<=0)continue;const g=er(At(De,"inventory_candies"),ur("productId","==",p.productId)),y=(await Lt(g)).docs.map(b=>{const w=b.data(),P=gse(w),j=U5(w);return{id:b.id,date:String(w.date||""),baseUnits:P,remaining:j}}).sort((b,w)=>b.date.localeCompare(w.date));d[p.productId]=y}const f=[];for(const p of o){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const y of p.allocations){const b=Math.max(0,Math.floor(Number(y.qty||0)));c+=b,f.push({id:y.batchId,addBack:b})}continue}const g=d[p.productId]||[];let v=p.qty;for(const y of g){if(v<=0)break;const b=Math.max(0,y.baseUnits-y.remaining);if(b<=0)continue;const w=Math.min(b,v);f.push({id:y.id,addBack:w}),c+=w,v-=w}for(const y of g){if(v<=0)break;const b=Math.min(v,p.qty);f.push({id:y.id,addBack:b}),c+=b,v-=b}}const A={};for(const p of f)A[p.id]=(A[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const h=Object.keys(A).map(p=>Yt(De,"inventory_candies",p)),m=await Promise.all(h.map(p=>u.get(p)));for(let p=0;p<h.length;p++){const g=m[p];if(!g.exists())continue;const v=g.data(),y=U5(v),b=Math.max(0,Math.floor(Number(A[h[p].id]||0))),w=y+b,P=Math.max(1,Math.floor(Number(v.unitsPerPackage||1))),j=Math.floor(w/P);u.update(h[p],{remaining:w,remainingPackages:j,packages:j})}u.delete(r)}),{restored:c}}async function J9e(t){return U2(t)}const tc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function V5(t){return isFinite(t)?Math.round(t):0}function Dd(t){return t.unitsPerPackage>0&&t.totalUnits>0?Math.floor(t.totalUnits/t.unitsPerPackage):Math.max(0,Math.floor(Number(t.packages||0)))}function H5(t){return typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages)?Math.max(0,Math.floor(t.remainingPackages)):t.unitsPerPackage>0?Math.max(0,Math.floor(Number(t.remaining||0)/t.unitsPerPackage)):0}function Z9e(t,e){var o,l;const r=String(t.date||""),n=String(e.date||"");if(r!==n)return n.localeCompare(r);const a=((o=t.createdAt)==null?void 0:o.seconds)??0;return(((l=e.createdAt)==null?void 0:l.seconds)??0)-a}function eQe(){const[t,e]=x.useState([]),[r,n]=x.useState([]),[a,s]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState(jr(wd(new Date),"yyyy-MM-dd")),[d,f]=x.useState(jr(bd(new Date),"yyyy-MM-dd")),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState(null),[y,b]=x.useState(""),[w,P]=x.useState(0),[j,_]=x.useState(!1),[I,E]=x.useState(""),[F,k]=x.useState(""),[B,R]=x.useState([]);x.useEffect(()=>{(async()=>{try{s(!0);const J=await Lt(At(De,"products_candies")),ee=[];J.forEach(ve=>{const V=ve.data();ee.push({id:ve.id,name:V.name??"(sin nombre)",category:V.category??"(sin categora)"})}),e(ee);const M=er(At(De,"inventory_candies"),bn("date","desc")),G=await Lt(M),ne=[];G.forEach(ve=>{const V=ve.data(),qe=Number(V.unitsPerPackage||0),ie=Number(V.totalUnits??V.quantity??(V.packages||0)*(V.unitsPerPackage||0)),re=Number(V.remaining??V.totalUnits??ie??0);ne.push({id:ve.id,productId:V.productId,productName:V.productName,category:V.category,measurement:V.measurement??"unidad",packages:Number(V.packages||0),unitsPerPackage:qe,totalUnits:ie,remaining:re,remainingPackages:typeof V.remainingPackages=="number"?Number(V.remainingPackages):void 0,providerPrice:Number(V.providerPrice||0),subtotal:Number(V.subtotal||0),totalRivas:Number(V.totalRivas||0),totalSanJorge:Number(V.totalSanJorge||0),totalIsla:Number(V.totalIsla||0),gainRivas:Number(V.gainRivas||0),gainSanJorge:Number(V.gainSanJorge||0),gainIsla:Number(V.gainIsla||0),unitPriceRivas:Number(V.unitPriceRivas||0),unitPriceSanJorge:Number(V.unitPriceSanJorge||0),unitPriceIsla:Number(V.unitPriceIsla||0),date:V.date,createdAt:V.createdAt,status:V.status??"PENDIENTE",orderId:V.orderId??null})}),n(ne)}catch(J){console.error(J),l(" Error cargando inventario.")}finally{s(!1)}})()},[]);const Y=x.useMemo(()=>r.filter(J=>!(c&&J.date<c||d&&J.date>d||A&&J.productId!==A||m&&String(J.category||"")!==m)),[r,c,d,A,m]),me=x.useMemo(()=>{const J=new Set;for(const ee of t)ee.category&&J.add(ee.category);return Array.from(J).sort((ee,M)=>ee.localeCompare(M))},[t]),pe=x.useMemo(()=>{const J=Y.reduce((V,qe)=>V+Dd(qe),0),ee=Y.reduce((V,qe)=>V+H5(qe),0),M=Y.reduce((V,qe)=>{const ie=Dd(qe);return V+Number(qe.providerPrice||0)*ie},0),G=Y.reduce((V,qe)=>{const ie=Dd(qe);return V+Number(qe.unitPriceRivas||0)*ie},0),ne=Y.reduce((V,qe)=>{const ie=Dd(qe);return V+Number(qe.unitPriceSanJorge||0)*ie},0),ve=Y.reduce((V,qe)=>{const ie=Dd(qe);return V+Number(qe.unitPriceIsla||0)*ie},0);return{totalPaquetes:J,totalPaquetesRestantes:ee,totalSubtotal:M,totalRivas:G,totalSJ:ne,totalIsla:ve}},[Y]),he=x.useMemo(()=>{let J=0,ee=0;for(const M of Y)M.status==="PENDIENTE"&&(J+=1),M.status==="PAGADO"&&(ee+=1);return{totalLotes:Y.length,pendientes:J,pagados:ee}},[Y]),ge=x.useMemo(()=>{const J=new Map;for(const M of Y){const G=String(M.productId||"");G&&(J.has(G)||J.set(G,{batches:[]}),J.get(G).batches.push(M))}const ee=[];for(const[M,G]of J.entries()){const ne=[...G.batches].sort(Z9e),ve=ne[0],V=ne.reduce((jt,kt)=>jt+Dd(kt),0),qe=ne.reduce((jt,kt)=>jt+H5(kt),0),ie=Number((ve==null?void 0:ve.providerPrice)||0),re=Number((ve==null?void 0:ve.unitPriceRivas)||0),Fe=Number((ve==null?void 0:ve.unitPriceIsla)||0),de=ne.reduce((jt,kt)=>{const wt=Dd(kt);return jt+Number(kt.providerPrice||0)*wt},0),we=ne.reduce((jt,kt)=>{const wt=Dd(kt);return jt+Number(kt.unitPriceRivas||0)*wt},0),Le=ne.reduce((jt,kt)=>{const wt=Dd(kt);return jt+Number(kt.unitPriceIsla||0)*wt},0),Ge=we-de,ft=Le-de;let ht="",xt;for(const jt of ne)(!ht||String(jt.date||"")>ht)&&(ht=String(jt.date||""),xt=jt.createdAt);ee.push({productId:M,productName:(ve==null?void 0:ve.productName)||"",category:(ve==null?void 0:ve.category)||"",totalPackages:V,remainingPackages:qe,providerPrice:ie,unitPriceRivas:re,unitPriceIsla:Fe,subtotal:de,totalRivas:we,totalIsla:Le,gainRivas:Ge,gainIsla:ft,lastDate:ht,lastCreatedAt:xt,batchCount:ne.length})}return ee.sort((M,G)=>String(G.lastDate).localeCompare(String(M.lastDate))),ee},[Y]),se=J=>{v(J.id),b(J.date),P(J.providerPrice),l("")},je=()=>{v(null),b(""),P(0)},Te=async()=>{if(!g)return;const J=r.find(Le=>Le.id===g);if(!J)return;if(w<0){l("El precio proveedor no puede ser negativo.");return}const ee=Dd(J),M=w*ee,G=ee>0?M/.8:0,ne=ee>0?M/.85:0,ve=ee>0?M/.7:0,V=G-M,qe=ne-M,ie=ve-M,re=ee>0?V5(G/ee):0,Fe=ee>0?V5(ne/ee):0,de=ee>0?V5(ve/ee):0,we=Yt(De,"inventory_candies",g);await Cn(we,{date:y,providerPrice:w,subtotal:M,totalRivas:G,totalSanJorge:ne,totalIsla:ve,gainRivas:V,gainSanJorge:qe,gainIsla:ie,unitPriceRivas:re,unitPriceSanJorge:Fe,unitPriceIsla:de}),n(Le=>Le.map(Ge=>Ge.id===g?{...Ge,date:y,providerPrice:w,subtotal:M,totalRivas:G,totalSanJorge:ne,totalIsla:ve,gainRivas:V,gainSanJorge:qe,gainIsla:ie,unitPriceRivas:re,unitPriceSanJorge:Fe,unitPriceIsla:de}:Ge)),J.orderId&&await Q5(String(J.orderId)),l(" Lote de dulces actualizado"),je()},D=async J=>{confirm(`Marcar PAGADO el lote del ${J.date} (${J.productName})?`)&&(await Cn(Yt(De,"inventory_candies",J.id),{status:"PAGADO"}),n(M=>M.map(G=>G.id===J.id?{...G,status:"PAGADO"}:G)),l(" Lote marcado como pagado"))},K=async J=>{confirm(`Eliminar el lote del ${J.date} (${J.productName})?`)&&(await Dn(Yt(De,"inventory_candies",J.id)),n(M=>M.filter(G=>G.id!==J.id)),J.orderId&&await Q5(String(J.orderId)),l(" Lote eliminado"))},z=async(J,ee)=>{try{s(!0),l("");const M=er(At(De,"inventory_candies"),ur("productId","==",J),bn("date","desc")),G=await Lt(M),ne=[];G.forEach(ve=>{const V=ve.data(),qe=Number(V.unitsPerPackage||0),ie=Number(V.totalUnits??V.quantity??(V.packages||0)*(V.unitsPerPackage||0)),re=Number(V.remaining??V.totalUnits??ie??0);ne.push({id:ve.id,productId:V.productId,productName:V.productName,category:V.category,measurement:V.measurement??"unidad",packages:Number(V.packages||0),unitsPerPackage:qe,totalUnits:ie,remaining:re,remainingPackages:typeof V.remainingPackages=="number"?Number(V.remainingPackages):void 0,providerPrice:Number(V.providerPrice||0),subtotal:Number(V.subtotal||0),totalRivas:Number(V.totalRivas||0),totalSanJorge:Number(V.totalSanJorge||0),totalIsla:Number(V.totalIsla||0),gainRivas:Number(V.gainRivas||0),gainSanJorge:Number(V.gainSanJorge||0),gainIsla:Number(V.gainIsla||0),unitPriceRivas:Number(V.unitPriceRivas||0),unitPriceSanJorge:Number(V.unitPriceSanJorge||0),unitPriceIsla:Number(V.unitPriceIsla||0),date:V.date,createdAt:V.createdAt,status:V.status??"PENDIENTE",orderId:V.orderId??null})}),E(J),k(ee),R(ne),_(!0)}catch(M){console.error(M),l(" Error abriendo detalle del producto.")}finally{s(!1)}},Q=async(J,ee)=>{const M=r.filter(ne=>ne.productId===J);if(confirm(`Eliminar COMPLETAMENTE "${ee}"?
Esto eliminar ${M.length} lote(s) de este producto.`))try{s(!0),l("");const ne=Array.from(new Set(M.map(ve=>ve.orderId?String(ve.orderId):"").filter(Boolean)));for(const ve of M)await Dn(Yt(De,"inventory_candies",ve.id));n(ve=>ve.filter(V=>V.productId!==J)),l(" Producto eliminado (todos sus lotes).");for(const ve of ne)await Q5(ve);j&&I===J&&(_(!1),R([]),E(""),k(""))}catch(ne){console.error(ne),l(" Error eliminando lotes del producto.")}finally{s(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Productos"})}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:J=>u(J.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:J=>f(J.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[220px]",children:[i.jsx("label",{className:"font-semibold",children:"Categora"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:J=>p(J.target.value),children:[i.jsx("option",{value:"",children:"Todas"}),me.map(J=>i.jsx("option",{value:J,children:J},J))]})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:J=>h(J.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),t.map(J=>i.jsxs("option",{value:J.id,children:[J.name,"  ",J.category]},J.id))]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h(""),p("")},children:"Quitar filtro"})]}),i.jsx("div",{className:"bg-gray-50 p-2 rounded shadow border mb-2 text-xs md:text-sm",children:i.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes totales:"})," ",he.totalLotes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes pendientes:"})," ",he.pendientes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes pagados:"})," ",he.pagados]})]})}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-1 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes ingresados:"})," ",pe.totalPaquetes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",pe.totalPaquetesRestantes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Sub total:"})," ",tc(pe.totalSubtotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Rivas:"})," ",tc(pe.totalRivas)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total San Jorge:"})," ",tc(pe.totalSJ)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Isla:"})," ",tc(pe.totalIsla)]})]})}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Subtotal"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"ltima fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-center",children:"Opciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Cargando"})}):ge.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Sin productos"})}):ge.map(J=>i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 border",children:J.category||""}),i.jsxs("td",{className:"p-2 border max-w-[260px]",children:[i.jsx("span",{className:"block truncate",title:J.productName,children:J.productName}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lotes: ",J.batchCount]})]}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:J.totalPackages}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:J.remainingPackages}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:tc(J.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:tc(J.unitPriceRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:tc(J.unitPriceIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:tc(J.subtotal)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:tc(J.totalRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:tc(J.totalIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:tc(J.gainRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:tc(J.gainIsla)}),i.jsx("td",{className:"p-2 border",children:J.lastDate||""}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>z(J.productId,J.productName),children:"Detalle"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Q(J.productId,J.productName),children:"Borrar"})]})})]},J.productId))})]})})}),o&&i.jsx("p",{className:"mt-2 text-sm",children:o}),j&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold",children:"Detalle del producto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[i.jsx("span",{className:"font-semibold",children:"Producto:"})," ",F||""," ",i.jsxs("span",{className:"ml-2",children:[i.jsx("span",{className:"font-semibold",children:"ID:"})," ",I]})]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{_(!1),R([]),E(""),k(""),je()},children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes ingresados"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border text-right",children:"Unidades"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio venta Rivas"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio venta Isla"}),i.jsx("th",{className:"p-2 border",children:"Nmero orden"}),i.jsx("th",{className:"p-2 border",children:"Status"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:B.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center text-gray-500",children:"Sin lotes"})}):B.map(J=>{const ee=g===J.id,M=Dd(J),G=H5(J);return i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 border align-top",children:ee?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:y,onChange:ne=>b(ne.target.value)}):J.date}),i.jsx("td",{className:"p-2 border align-top",children:J.category||""}),i.jsxs("td",{className:"p-2 border align-top max-w-[260px]",children:[i.jsx("span",{className:"block truncate",title:J.productName,children:J.productName}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lote ID: ",J.id]})]}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:M}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:G}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:J.totalUnits}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:ee?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(w)?"":w,onChange:ne=>P(Math.max(0,parseFloat(ne.target.value||"0")))}):tc(J.providerPrice)}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:tc(J.unitPriceRivas)}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:tc(J.unitPriceIsla)}),i.jsx("td",{className:"p-2 border align-top",children:J.orderId?String(J.orderId):""}),i.jsx("td",{className:"p-2 border align-top",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${J.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:J.status})}),i.jsx("td",{className:"p-2 border align-top",children:ee?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Te,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:je,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[J.status==="PENDIENTE"&&i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:()=>D(J),children:"Pagar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-black hover:bg-yellow-500 text-xs",onClick:()=>se(J),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>K(J),children:"Borrar"})]})})]},J.id)})})]})}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>Q(I,F),children:"Borrar producto (todos los lotes)"})})]})})]})}const $5=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],So=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function gy(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function H$(t){const e=er(At(De,"ar_movements"),ur("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Dn(Yt(De,"ar_movements",n.id))))}function tQe({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),o=mn(a,"vendedor_dulces"),l=mn(a,"admin"),[c,u]=x.useState([]),[d,f]=x.useState(!1),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState(""),[y,b]=x.useState(""),[w,P]=x.useState(!1),[j,_]=x.useState(!1),[I,E]=x.useState(null),[F,k]=x.useState([]),B=async dt=>{var Et;P(!0),_(!0),E(dt),k([]);try{const bt=await ei(Yt(De,"sales_candies",dt));let Tt=null;bt.exists()?Tt=bt.data():Tt=(Et=(await Lt(er(At(De,"sales_candies"),ur("name","==",dt)))).docs[0])==null?void 0:Et.data();const Dt=(Array.isArray(Tt==null?void 0:Tt.items)?Tt.items:Tt!=null&&Tt.item?[Tt.item]:[]).map(ke=>({productName:String(ke.productName||""),qty:Number(ke.qty||0),unitPrice:Number(ke.unitPrice||0),discount:Number(ke.discount||0),total:Number(ke.total||0)}));k(Dt)}catch(bt){console.error(bt)}finally{_(!1)}},[R,Y]=x.useState(""),[me,pe]=x.useState("+505 "),[he,ge]=x.useState(""),[se,je]=x.useState(""),[Te,D]=x.useState("ACTIVO"),[K,z]=x.useState(0),[Q,J]=x.useState(""),[ee,M]=x.useState(0),[G,ne]=x.useState([]),[ve,V]=x.useState(!0),[qe,ie]=x.useState(""),[re,Fe]=x.useState(null),[de,we]=x.useState(""),[Le,Ge]=x.useState("+505 "),[ft,ht]=x.useState(""),[xt,jt]=x.useState(""),[kt,wt]=x.useState("ACTIVO"),[Ve,Pe]=x.useState(0),[be,ce]=x.useState(""),[te,Ne]=x.useState(!1),[Re,ye]=x.useState(null),[Xe,mt]=x.useState(!1),[rt,ue]=x.useState([]),[_e,We]=x.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[ot,Ce]=x.useState(!1),[$e,gt]=x.useState(0),[Kt,Ut]=x.useState(new Date().toISOString().slice(0,10)),[Jt,it]=x.useState(""),[X,oe]=x.useState(!1),[L,Ae]=x.useState(null),[Ee,Oe]=x.useState(""),[Be,S]=x.useState(0),[O,U]=x.useState(""),[q,ae]=x.useState(!1),[fe,Ue]=x.useState(null),[Ze,lt]=x.useState(!1),[Qe,tt]=x.useState(!1),[ut,Pt]=x.useState(null);x.useEffect(()=>{(async()=>{try{if(V(!0),o&&!s){ne([]),ie(" Este usuario no tiene vendedor asociado (sellerCandyId vaco).");return}const dt=await Lt(At(De,"sellers_candies")),Et=[];dt.forEach(Dt=>{const ke=Dt.data(),yt=String(ke.status||"ACTIVO");yt==="ACTIVO"&&Et.push({id:Dt.id,name:String(ke.name||""),status:yt})}),u(Et);const bt=o?er(At(De,"customers_candies"),ur("vendorId","==",s),bn("createdAt","desc")):er(At(De,"customers_candies"),bn("createdAt","desc")),Tt=await Lt(bt),Ht=[];Tt.forEach(Dt=>{const ke=Dt.data();Ht.push({id:Dt.id,name:ke.name??"",phone:ke.phone??"+505 ",place:ke.place??"",notes:ke.notes??"",status:ke.status??"ACTIVO",creditLimit:Number(ke.creditLimit??0),createdAt:ke.createdAt??mr.now(),balance:0,sellerId:ke.sellerId||"",vendorId:ke.vendorId||"",vendorName:ke.vendorName||"",initialDebt:Number(ke.initialDebt||0),initialDebtDate:String(ke.initialDebtDate||"").trim(),lastAbonoDate:"",lastAbonoAmount:0})});for(const Dt of Ht)try{const ke=er(At(De,"ar_movements"),ur("customerId","==",Dt.id)),yt=await Lt(ke);let Nt=0,ct=null;const Xt=[];yt.forEach(cr=>{var Ar,Qr,vn;const yr=cr.data(),Tr=Number(yr.amount||0);Nt+=Tr;const sn=yr.date??((Qr=(Ar=yr.createdAt)==null?void 0:Ar.toDate)!=null&&Qr.call(Ar)?yr.createdAt.toDate().toISOString().slice(0,10):"");if(Xt.push({id:cr.id,date:sn,type:yr.type??(Tr<0?"ABONO":"CARGO"),amount:Tr,ref:yr.ref||{},comment:yr.comment||"",createdAt:yr.createdAt}),Tr<0){const Aa=(vn=yr.createdAt)!=null&&vn.seconds?Number(yr.createdAt.seconds):0;(!ct||Aa>=ct.ts)&&(ct={date:sn,amount:Math.abs(Tr),ts:Aa})}});const zt=Number(Dt.initialDebt||0),xr=Dr(zt,String(Dt.initialDebtDate||""),Xt);Dt.balance=xr+Nt,ct?(Dt.lastAbonoDate=ct==null?void 0:ct.date,Dt.lastAbonoAmount=ct==null?void 0:ct.amount):(Dt.lastAbonoDate="",Dt.lastAbonoAmount=0)}catch{Dt.balance=Number(Dt.initialDebt||0),Dt.lastAbonoDate="",Dt.lastAbonoAmount=0}ne(Ht)}catch(dt){console.error(dt),ie(" Error cargando clientes.")}finally{V(!1)}})()},[o,s]);const Ct=()=>{Y(""),pe("+505 "),ge(""),je(""),D("ACTIVO"),z(0),J(""),M(0)},It=async dt=>{var Ht;if(dt.preventDefault(),ie(""),!R.trim()){ie("Ingresa el nombre.");return}const Et=gy(me);if(Et.length<6){ie("Telfono incompleto.");return}const bt=o?s:String(Q||"").trim(),Tt=bt&&((Ht=c.find(Dt=>Dt.id===bt))==null?void 0:Ht.name)||"";try{const Dt=Number(ee||0),ke=await Hn(At(De,"customers_candies"),{name:R.trim(),phone:Et,place:he||"",notes:se||"",status:Te,creditLimit:Number(K||0),vendorId:bt,vendorName:Tt,initialDebt:Dt,createdAt:mr.now()});ne(yt=>[{id:ke.id,name:R.trim(),phone:Et,place:he||"",notes:se||"",status:Te,creditLimit:Number(K||0),vendorId:bt,vendorName:Tt,initialDebt:Dt,createdAt:mr.now(),balance:Dt,lastAbonoDate:"",lastAbonoAmount:0},...yt]),Ct(),ae(!1),ie(" Cliente creado")}catch(Dt){console.error(Dt),ie(" Error al crear cliente")}},St=dt=>{if(o){ie(" No permitido: vendedores no editan clientes desde el listado.");return}Fe(dt.id),we(dt.name),Ge(dt.phone||"+505 "),ht(dt.place||""),jt(dt.notes||""),wt(dt.status||"ACTIVO"),Pe(Number(dt.creditLimit||0)),ce(String(dt.vendorId||""))},Zt=()=>{Fe(null),we(""),Ge("+505 "),ht(""),jt(""),wt("ACTIVO"),Pe(0),ce("")},Er=async()=>{var ke;if(o){ie(" No permitido.");return}if(!re)return;const dt=gy(Le);if(!de.trim()){ie("Ingresa el nombre.");return}const Et=G.find(yt=>yt.id===re),bt=String((Et==null?void 0:Et.vendorId)||""),Tt=o?s:String(be||"");if(o&&bt&&bt!==s){ie(" Este cliente pertenece a otro vendedor.");return}if(l&&bt&&Tt&&bt!==Tt){ie(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const Ht=o?s:String(be||""),Dt=Ht&&((ke=c.find(yt=>yt.id===Ht))==null?void 0:ke.name)||"";try{await Cn(Yt(De,"customers_candies",re),{name:de.trim(),phone:dt,place:ft||"",notes:xt||"",status:kt,creditLimit:Number(Ve||0),vendorId:Ht,vendorName:Dt}),ne(yt=>yt.map(Nt=>Nt.id===re?{...Nt,name:de.trim(),phone:dt,place:ft||"",notes:xt||"",status:kt,creditLimit:Number(Ve||0),vendorId:Ht,vendorName:Dt}:Nt)),Zt(),ie(" Cliente actualizado")}catch(yt){console.error(yt),ie(" Error al actualizar")}},Nr=async dt=>{if(confirm(`Eliminar al cliente "${dt.name}"?
Se devolvern al inventario todos los dulces de sus compras y se borrarn sus movimientos.`))try{V(!0);const bt=er(At(De,"sales_candies"),ur("customerId","==",dt.id)),Tt=await Lt(bt);for(const ke of Tt.docs){const yt=ke.id;try{await U2(yt)}catch(Nt){console.warn("restoreSaleAndDeleteCandy error",Nt);try{await Dn(Yt(De,"sales_candies",yt))}catch{}}await H$(yt)}const Ht=er(At(De,"ar_movements"),ur("customerId","==",dt.id)),Dt=await Lt(Ht);await Promise.all(Dt.docs.map(ke=>Dn(Yt(De,"ar_movements",ke.id)))),await Dn(Yt(De,"customers_candies",dt.id)),ne(ke=>ke.filter(yt=>yt.id!==dt.id)),ie(" Cliente eliminado y dulces devueltos al inventario")}catch(bt){console.error(bt),ie(" No se pudo eliminar el cliente.")}finally{V(!1)}},Dr=(dt,Et,bt)=>{const Tt=Number(dt||0);if(!Tt)return 0;const Ht=String(Et||"").trim();return Ht&&bt.some(ke=>{var zt;const yt=Number(ke.amount||0);if(!(yt>0))return!1;const Nt=Math.abs(yt-Tt)<.01,ct=String(ke.date||"").trim()===Ht,Xt=!!((zt=ke.ref)!=null&&zt.saleId);return Nt&&ct&&Xt})?0:Tt},nn=(dt,Et,bt)=>{const Tt=dt.reduce((Nt,ct)=>Nt+(Number(ct.amount)||0),0),Ht=dt.filter(Nt=>Number(Nt.amount)<0).reduce((Nt,ct)=>Nt+Math.abs(Number(ct.amount)||0),0),Dt=dt.filter(Nt=>Number(Nt.amount)>0).reduce((Nt,ct)=>Nt+(Number(ct.amount)||0),0),ke=Dr(Et,bt,dt),yt=Number(ke||0)+Tt;We({saldoActual:yt,totalAbonado:Ht,totalCargos:Number(ke||0)+Dt,saldoRestante:yt})},pn=async dt=>{ye(dt),ue([]),We({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),Ne(!0),lt(!1),tt(!1),Pt(null),Ce(!1),gt(0),Ut(new Date().toISOString().slice(0,10)),it(""),Ae(null),mt(!0);try{const Et=er(At(De,"ar_movements"),ur("customerId","==",dt.id)),bt=await Lt(Et),Tt=[];bt.forEach(Ht=>{var Nt,ct;const Dt=Ht.data(),ke=Dt.date??((ct=(Nt=Dt.createdAt)==null?void 0:Nt.toDate)!=null&&ct.call(Nt)?Dt.createdAt.toDate().toISOString().slice(0,10):""),yt=Number(Dt.amount||0);Tt.push({id:Ht.id,date:ke,type:Dt.type??(yt<0?"ABONO":"CARGO"),amount:yt,ref:Dt.ref||{},comment:Dt.comment||"",createdAt:Dt.createdAt})}),Tt.sort((Ht,Dt)=>{var Nt,ct;if(Ht.date!==Dt.date)return Ht.date.localeCompare(Dt.date);const ke=((Nt=Ht.createdAt)==null?void 0:Nt.seconds)||0,yt=((ct=Dt.createdAt)==null?void 0:ct.seconds)||0;return ke-yt}),ue(Tt),nn(Tt,Number(dt.initialDebt||0),String(dt.initialDebtDate||""))}catch(Et){console.error(Et),ie(" No se pudo cargar el estado de cuenta")}finally{mt(!1)}},Yr=dt=>{const Et=dt.filter(bt=>Number(bt.amount)<0).map(bt=>{var Tt;return{date:bt.date,amount:Math.abs(Number(bt.amount||0)),ts:((Tt=bt.createdAt)==null?void 0:Tt.seconds)||0}}).sort((bt,Tt)=>(bt.ts||0)-(Tt.ts||0));return Et.length?Et[Et.length-1]:null},dn=x.useMemo(()=>Dr(Number((Re==null?void 0:Re.initialDebt)||0),String((Re==null?void 0:Re.initialDebtDate)||""),rt),[Re==null?void 0:Re.initialDebt,Re==null?void 0:Re.initialDebtDate,rt]),Vn=async()=>{if(!Re)return;ie("");const dt=Number($e||0);if(!(dt>0)){ie("Ingresa un monto de abono mayor a 0.");return}const Et=parseFloat(dt.toFixed(2));if(!Kt){ie("Selecciona la fecha del abono.");return}try{oe(!0);const bt={customerId:Re.id,type:"ABONO",amount:-Et,date:Kt,comment:Jt||"",createdAt:mr.now()},Ht={id:(await Hn(At(De,"ar_movements"),bt)).id,date:Kt,type:"ABONO",amount:-Et,comment:Jt||"",createdAt:mr.now()},Dt=[...rt,Ht].sort((ct,Xt)=>{var cr,yr;if(ct.date!==Xt.date)return ct.date.localeCompare(Xt.date);const zt=((cr=ct.createdAt)==null?void 0:cr.seconds)||0,xr=((yr=Xt.createdAt)==null?void 0:yr.seconds)||0;return zt-xr});ue(Dt),nn(Dt,Number(Re.initialDebt||0),String(Re.initialDebtDate||""));const ke=Dt.reduce((ct,Xt)=>ct+(Number(Xt.amount)||0),0),yt=Dr(Number(Re.initialDebt||0),String(Re.initialDebtDate||""),Dt),Nt=Number(yt||0)+ke;ne(ct=>ct.map(Xt=>Xt.id!==Re.id?Xt:{...Xt,balance:Nt,lastAbonoDate:Kt,lastAbonoAmount:Et})),ye(ct=>ct&&{...ct,balance:Nt,lastAbonoDate:Kt,lastAbonoAmount:Et}),gt(0),it(""),Ut(new Date().toISOString().slice(0,10)),Ce(!1),ie(" Abono registrado")}catch(bt){console.error(bt),ie(" Error al registrar el abono")}finally{oe(!1)}},an=dt=>{Ae(dt.id),Oe(dt.date||new Date().toISOString().slice(0,10)),S(Math.abs(Number(dt.amount||0))),U(dt.comment||"")},Je=()=>{Ae(null),Oe(""),S(0),U("")},Bt=async()=>{if(!L||!Re)return;const dt=rt.findIndex(Ht=>Ht.id===L);if(dt===-1)return;const Et=rt[dt],bt=Number(Be||0);if(!(bt>0)){ie("El monto debe ser mayor a 0.");return}const Tt=Et.type==="ABONO"?-parseFloat(bt.toFixed(2)):+parseFloat(bt.toFixed(2));try{await Cn(Yt(De,"ar_movements",L),{date:Ee,amount:Tt,comment:O||""});const Ht=[...rt];Ht[dt]={...Et,date:Ee,amount:Tt,comment:O||""},Ht.sort((ct,Xt)=>{var cr,yr;if(ct.date!==Xt.date)return ct.date.localeCompare(Xt.date);const zt=((cr=ct.createdAt)==null?void 0:cr.seconds)||0,xr=((yr=Xt.createdAt)==null?void 0:yr.seconds)||0;return zt-xr}),ue(Ht),nn(Ht,Number(Re.initialDebt||0),String(Re.initialDebtDate||""));const Dt=Ht.reduce((ct,Xt)=>ct+(Number(Xt.amount)||0),0),ke=Dr(Number(Re.initialDebt||0),String(Re.initialDebtDate||""),Ht),yt=Number(ke||0)+Dt,Nt=Yr(Ht);ne(ct=>ct.map(Xt=>Xt.id===Re.id?{...Xt,balance:yt,lastAbonoDate:(Nt==null?void 0:Nt.date)||"",lastAbonoAmount:(Nt==null?void 0:Nt.amount)||0}:Xt)),ye(ct=>ct&&{...ct,balance:yt,lastAbonoDate:(Nt==null?void 0:Nt.date)||"",lastAbonoAmount:(Nt==null?void 0:Nt.amount)||0}),Je(),ie(" Movimiento actualizado")}catch(Ht){console.error(Ht),ie(" Error al actualizar movimiento")}},Ft=async dt=>{var bt,Tt;if(confirm(`Eliminar este movimiento (${dt.type==="ABONO"?"Abono":"Compra"}) del ${dt.date}?${dt.type==="CARGO"&&((bt=dt.ref)!=null&&bt.saleId)?`
Se devolvern al inventario los dulces de esa venta.`:""}`)&&Re)try{if(V(!0),dt.type==="CARGO"&&((Tt=dt.ref)!=null&&Tt.saleId)){try{await U2(dt.ref.saleId)}catch(ct){console.warn("restoreSaleAndDeleteCandy error",ct),V(!1),ie(" No se pudo devolver inventario de la venta.");return}await H$(dt.ref.saleId)}else await Dn(Yt(De,"ar_movements",dt.id));const Ht=rt.filter(ct=>{var Xt,zt;return dt.type==="CARGO"&&((Xt=dt.ref)!=null&&Xt.saleId)?((zt=ct.ref)==null?void 0:zt.saleId)!==dt.ref.saleId:ct.id!==dt.id});ue(Ht),nn(Ht,Number(Re.initialDebt||0),String(Re.initialDebtDate||""));const Dt=Ht.reduce((ct,Xt)=>ct+(Number(Xt.amount)||0),0),ke=Dr(Number(Re.initialDebt||0),String(Re.initialDebtDate||""),Ht),yt=Number(ke||0)+Dt,Nt=Yr(Ht);ne(ct=>ct.map(Xt=>Xt.id===Re.id?{...Xt,balance:yt,lastAbonoDate:(Nt==null?void 0:Nt.date)||"",lastAbonoAmount:(Nt==null?void 0:Nt.amount)||0}:Xt)),ye(ct=>ct&&{...ct,balance:yt,lastAbonoDate:(Nt==null?void 0:Nt.date)||"",lastAbonoAmount:(Nt==null?void 0:Nt.amount)||0}),Pt(null),ie(" Movimiento eliminado")}catch(Ht){console.error(Ht),ie(" Error al eliminar movimiento")}finally{V(!1)}},hr=x.useMemo(()=>[...G].sort((dt,Et)=>{var bt,Tt;return dt.status!==Et.status?dt.status==="BLOQUEADO"?1:-1:(((bt=Et.createdAt)==null?void 0:bt.seconds)||0)-(((Tt=dt.createdAt)==null?void 0:Tt.seconds)||0)}),[G]),dr=dt=>dt==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",lr=x.useMemo(()=>{const dt=A.trim().toLowerCase(),Et=g.trim()===""?null:Number(g),bt=y.trim()===""?null:Number(y);return hr.filter(Tt=>{const Ht=!dt||String(Tt.name||"").toLowerCase().includes(dt),Dt=!m||Tt.status===m,ke=Number(Tt.balance||0),yt=Et===null||!Number.isNaN(Et)&&ke>=Et,Nt=bt===null||!Number.isNaN(bt)&&ke<=bt;return Ht&&Dt&&yt&&Nt})},[hr,A,m,g,y]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Dulces)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{ae(!0),o&&J(s)},type:"button",children:"Crear Cliente"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border w-full md:w-auto",onClick:()=>f(dt=>!dt),children:d?"Ocultar filtros":"Mostrar filtros"}),d&&i.jsxs("div",{className:"mt-2 bg-white border rounded-xl p-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cliente"}),i.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:dt=>h(dt.target.value),placeholder:"Buscar por nombre"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:dt=>p(dt.target.value||""),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mn."}),i.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:g,onChange:dt=>v(dt.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mx."}),i.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:y,onChange:dt=>b(dt.target.value),placeholder:""})]})]}),i.jsx("div",{className:"md:col-span-4 flex flex-wrap gap-2 justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border",onClick:()=>{h(""),p(""),v(""),b("")},children:"Limpiar"})})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:ve?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):lr.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):lr.map(dt=>{var bt;const Et=re===dt.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(bt=dt.createdAt)!=null&&bt.toDate?dt.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border text-left",children:Et?i.jsx("input",{className:"w-full border p-1 rounded",value:de,onChange:Tt=>we(Tt.target.value)}):i.jsx("div",{className:"font-medium",children:dt.name})}),i.jsx("td",{className:"p-2 border",children:Et?i.jsx("input",{className:"w-full border p-1 rounded",value:Le,onChange:Tt=>Ge(gy(Tt.target.value))}):dt.phone}),i.jsx("td",{className:"p-2 border",children:Et?i.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:o?s:be,onChange:Tt=>ce(Tt.target.value),disabled:o,title:"Vendedor asociado",children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Tt=>i.jsx("option",{value:Tt.id,children:Tt.name},Tt.id))]}):dt.vendorName||""}),i.jsx("td",{className:"p-2 border",children:Et?i.jsxs("select",{className:"w-full border p-1 rounded",value:ft,onChange:Tt=>ht(Tt.target.value),children:[i.jsx("option",{value:"",children:""}),$5.map(Tt=>i.jsx("option",{value:Tt,children:Tt},Tt))]}):dt.place||""}),i.jsx("td",{className:"p-2 border",children:Et?i.jsxs("select",{className:"w-full border p-1 rounded",value:kt,onChange:Tt=>wt(Tt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${dr(dt.status)}`,children:dt.status})}),i.jsx("td",{className:"p-2 border",children:Et?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ve)?"":Ve,onChange:Tt=>Pe(Math.max(0,Number(Tt.target.value||0)))}):So(dt.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:So(dt.balance||0)}),i.jsx("td",{className:"p-2 border",children:Et?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:xt,onChange:Tt=>jt(Tt.target.value),maxLength:500}):i.jsx("span",{title:dt.notes||"",children:(dt.notes||"").length>40?(dt.notes||"").slice(0,40)+"":dt.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:Et?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Er,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Zt,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>St(dt),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>Nr(dt),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>pn(dt),children:"Estado de cuenta"})]})})})]},dt.id)})})]})}),i.jsx("div",{className:"md:hidden",children:ve?i.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):lr.length===0?i.jsx("div",{className:"p-4 text-center text-sm",children:"Sin clientes"}):i.jsx("div",{className:"space-y-2",children:lr.map(dt=>{const Et=fe===dt.id,bt=re===dt.id,Tt=i.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${dr(dt.status)}`,children:dt.status});return i.jsxs("div",{className:"border rounded-2xl shadow-sm bg-white overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{ie(""),!bt&&Ue(Ht=>Ht===dt.id?null:dt.id)},children:[i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx("div",{className:"truncate font-semibold",children:dt.name})}),i.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Pendiente"}),i.jsx("div",{className:"font-semibold leading-4",children:So(dt.balance||0)})]}),Tt]})]}),Et&&i.jsxs("div",{className:"px-3 pb-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"ltimo abono"}),i.jsx("div",{className:"font-medium",children:dt.lastAbonoDate?dt.lastAbonoDate:""}),i.jsx("div",{className:"text-[12px] text-gray-700",children:dt.lastAbonoAmount?So(dt.lastAbonoAmount):""})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo pendiente"}),i.jsx("div",{className:"text-lg font-bold",children:So(dt.balance||0)})]})]}),bt?i.jsxs("div",{className:"mt-3 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded-xl",value:de,onChange:Ht=>we(Ht.target.value)})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded-xl",value:Le,onChange:Ht=>Ge(gy(Ht.target.value))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:kt,onChange:Ht=>wt(Ht.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:ft,onChange:Ht=>ht(Ht.target.value),children:[i.jsx("option",{value:"",children:""}),$5.map(Ht=>i.jsx("option",{value:Ht,children:Ht},Ht))]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:o?s:be,onChange:Ht=>ce(Ht.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Ht=>i.jsx("option",{value:Ht.id,children:Ht.name},Ht.id))]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lmite"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(Ve)?"":Ve,onChange:Ht=>Pe(Math.max(0,Number(Ht.target.value||0)))})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded-xl min-h-24 resize-y",value:xt,onChange:Ht=>jt(Ht.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:Er,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:()=>{Zt(),Ue(null)},type:"button",children:"Cancelar"})]})]}):i.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>St(dt),type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>Nr(dt),disabled:!l,title:l?"Borrar":"Solo admin",type:"button",children:"Borrar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>pn(dt),type:"button",children:"Estado"})]})]})]},dt.id)})})})]}),qe&&i.jsx("p",{className:"mt-2 text-sm",children:qe}),q&&xu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ae(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ae(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:It,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:R,onChange:dt=>Y(dt.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:me,onChange:dt=>pe(gy(dt.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:he,onChange:dt=>ge(dt.target.value),children:[i.jsx("option",{value:"",children:""}),$5.map(dt=>i.jsx("option",{value:dt,children:dt},dt))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Te,onChange:dt=>D(dt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o?s:Q,onChange:dt=>J(dt.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(dt=>i.jsx("option",{value:dt.id,children:dt.name},dt.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ee===0?"":ee,onChange:dt=>M(Math.max(0,Number(dt.target.value||0))),placeholder:"Ej: 1500"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:K===0?"":K,onChange:dt=>z(Math.max(0,Number(dt.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:se,onChange:dt=>je(dt.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[se.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ae(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),te&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4 max-h-[92vh] overflow-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(Re==null?void 0:Re.name)||""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{gt(0),Ut(new Date().toISOString().slice(0,10)),it(""),Ce(!0)},children:"Abonar"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"hidden md:block",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),i.jsx("div",{className:"text-xl font-semibold",children:So(Number(dn||0))})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:So(_e.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:So(_e.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:So(_e.saldoRestante)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:Xe?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):rt.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):rt.map(dt=>{var bt,Tt;const Et=L===dt.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Et?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Ee,onChange:Ht=>Oe(Ht.target.value)}):dt.date||""}),i.jsx("td",{className:"p-2 border",children:dt.amount>=0?(bt=dt.ref)!=null&&bt.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver dulces de esta compra",onClick:()=>B(dt.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(Tt=dt.ref)!=null&&Tt.saleId?`Venta #${dt.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:Et?i.jsx("input",{className:"w-full border p-1 rounded",value:O,onChange:Ht=>U(Ht.target.value),placeholder:"Comentario"}):i.jsx("span",{title:dt.comment||"",children:(dt.comment||"").length>40?(dt.comment||"").slice(0,40)+"":dt.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:Et?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Be)?"":Be,onChange:Ht=>{const Dt=Number(Ht.target.value||0),ke=Number.isFinite(Dt)?Math.max(0,parseFloat(Dt.toFixed(2))):0;S(ke)},placeholder:"0.00"}):So(dt.amount)}),i.jsx("td",{className:"p-2 border",children:Et?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Bt,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Je,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>an(dt),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Ft(dt),children:"Borrar"})]})})]},dt.id)})})]})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>lt(dt=>!dt),children:[i.jsx("div",{className:"font-semibold",children:"Estado de cuenta"}),i.jsx("div",{className:"text-sm text-gray-500",children:Ze?"Ocultar":"Ver"})]}),Ze&&i.jsxs("div",{className:"px-3 pb-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Deuda inicial"}),i.jsx("div",{className:"font-bold",children:So(Number(dn||0))})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo actual"}),i.jsx("div",{className:"font-bold",children:So(_e.saldoActual)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Total abonado"}),i.jsx("div",{className:"font-bold",children:So(_e.totalAbonado)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo restante"}),i.jsx("div",{className:"font-bold",children:So(_e.saldoRestante)})]})]})]}),i.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>tt(dt=>!dt),children:[i.jsx("div",{className:"font-semibold",children:"Movimientos"}),i.jsx("div",{className:"text-sm text-gray-500",children:Qe?"Ocultar":"Ver"})]}),Qe&&i.jsx("div",{className:"px-3 pb-3 space-y-2",children:Xe?i.jsx("div",{className:"text-center text-sm p-3",children:"Cargando"}):rt.length===0?i.jsx("div",{className:"text-center text-sm p-3",children:"Sin movimientos"}):rt.map(dt=>{var Dt;const Et=ut===dt.id,bt=L===dt.id,Tt=dt.amount>=0?"CARGO":"ABONO",Ht=dt.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700";return i.jsxs("div",{className:"border rounded-2xl overflow-hidden bg-white",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{bt||Pt(ke=>ke===dt.id?null:dt.id)},children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Fecha"}),i.jsx("div",{className:"font-semibold",children:dt.date||""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${Ht}`,children:Tt}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Monto"}),i.jsx("div",{className:"font-semibold",children:So(dt.amount)})]})]})]}),Et&&i.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Referencia"}),i.jsx("div",{className:"font-medium",children:(Dt=dt.ref)!=null&&Dt.saleId?`Venta #${dt.ref.saleId}`:""})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),bt?i.jsx("input",{className:"w-full border p-2 rounded-xl",value:O,onChange:ke=>U(ke.target.value),placeholder:"Comentario"}):i.jsx("div",{className:"font-medium",children:(dt.comment||"").trim()||""})]}),bt&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded-xl",value:Ee,onChange:ke=>Oe(ke.target.value)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(Be)?"":Be,onChange:ke=>{const yt=Number(ke.target.value||0),Nt=Number.isFinite(yt)?Math.max(0,parseFloat(yt.toFixed(2))):0;S(Nt)}})]})]}),bt?i.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:Bt,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:Je,type:"button",children:"Cancelar"})]}):i.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>an(dt),type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700",onClick:()=>Ft(dt),type:"button",children:"Borrar"})]})]})]},dt.id)})})]})]}),ot&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(Re==null?void 0:Re.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Kt,onChange:dt=>Ut(dt.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:$e===0?"":$e,onChange:dt=>{const Et=Number(dt.target.value||0),bt=Number.isFinite(Et)?Math.max(0,parseFloat(Et.toFixed(2))):0;gt(bt)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Jt,onChange:dt=>it(dt.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[Jt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ce(!1),disabled:X,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Vn,disabled:X,children:X?"Guardando...":"Guardar abono"})]})]})})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Dulces vendidos"," ",I?` #${I}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>P(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:j?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):F.map((dt,Et)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:dt.productName}),i.jsx("td",{className:"p-2 border text-right",children:dt.qty}),i.jsx("td",{className:"p-2 border text-right",children:So(dt.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:So(dt.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:So(dt.total)})]},Et))})]})})]})})]})}const Ec=t=>`C$ ${(Number(t)||0).toFixed(2)}`,rQe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas","Pull","Tilgue","Balge","Santa Cruz","Moyogalpa","Santo Domingo","San Jos del Sur","San Fernando","Merida","La Paloma","San Lorenzo","San Carlos","San Miguel"];function nQe(t){switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function aQe(t){switch(t){case"Rivas":return"RIVAS";case"San Jorge":return"SAN_JORGE";case"Isla Ometepe":return"ISLA";default:return"RIVAS"}}function sQe(t){const{saleId:e,date:r,customerName:n,branch:a,items:s,total:o,vendorName:l,vendorCommissionPercent:c,vendorCommissionAmount:u}=t,d=new $r;let f=12;if(d.setFontSize(16),d.text("Multiservicios Ortiz",10,f),f+=6,d.setFontSize(12),d.text("Recibo de venta certificada",10,f),f+=8,d.setFontSize(12),d.text(`Fecha: ${r}`,10,f),f+=5,d.text(`Cliente: ${n||"Cliente Mostrador"}`,10,f),f+=5,d.text(`Sucursal: ${nQe(a)}`,10,f),f+=5,d.text(`Autorizado: ${e}`,10,f),f+=5,l&&(d.text(`Vendedor: ${l}`,10,f),f+=5),typeof c=="number"){const A=Number(u||0).toFixed(2),h=c.toFixed(2);d.text(`Comisin vendedor: ${h}%  C$ ${A}`,10,f),f+=8}else f+=3;d.setFontSize(12),d.text("Producto",10,f),d.text("Paquetes",110,f,{align:"right"}),d.text("Precio.",150,f,{align:"right"}),d.text("Subtotal",190,f,{align:"right"}),f+=4,d.line(10,f,190,f),f+=4,s.forEach(A=>{f>270&&(d.addPage(),f=12);const h=(A.productName||"").length>50?A.productName.slice(0,47)+"...":A.productName;d.text(h,10,f),d.text(String(A.qty),110,f,{align:"right"}),d.text(`C$ ${Number(A.unitPrice||0).toFixed(2)}`,150,f,{align:"right"}),d.text(`C$ ${Number(A.total||0).toFixed(2)}`,190,f,{align:"right"}),f+=5}),f+=4,d.line(10,f,190,f),f+=6,d.setFontSize(13),d.text(`Total: C$ ${Number(o||0).toFixed(2)}`,190,f,{align:"right"}),f+=6,d.setFontSize(9),d.text("Gracias por su compra.",10,f),d.save(`venta_dulces_${e}.pdf`)}async function $$(t,e){if(!t||!e)return 0;const r=er(At(De,"inventory_candies_sellers"),ur("sellerId","==",e),ur("productId","==",t)),n=await Lt(r);let a=0;return n.forEach(s=>{const o=s.data(),l=Number(o.remainingUnits??o.remaining??o.totalUnits??0);l>0&&(a+=l)}),a}const G$=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)};async function iQe(t){const{productId:e,vendorId:r,quantityUnits:n,saleDate:a,saleId:s}=t;let o=Math.max(0,Math.floor(Number(n||0)));const l=[];if(!e||!r||o<=0)return{allocations:[]};const c=er(At(De,"inventory_candies_sellers"),ur("sellerId","==",r),ur("productId","==",e),ur("remainingUnits",">",0),bn("date","asc"),bn("createdAt","asc")),u=await Lt(c);for(const d of u.docs){if(o<=0)break;const f=d.data(),A=Number(f.remainingUnits||0);if(A<=0)continue;const h=Math.min(A,o),m=A-h,p=Math.max(1,Math.floor(Number(f.unitsPerPackage||1))),g=Math.floor(m/p);await Cn(d.ref,{remainingUnits:m,remainingPackages:g}),l.push({inventorySellerId:d.id,productId:e,units:h,saleDate:a,saleId:s}),o-=h}return o>0&&console.warn("[allocateSaleFIFOCandyFromVendor] No alcanz el inventario del vendedor, faltaron unidades.",{productId:e,vendorId:r,remaining:o}),{allocations:l}}function K$(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function oQe({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t;mn(a,"admin"),mn(a,"vendedor_dulces");const[s,o]=x.useState([]),[l,c]=x.useState([]),[u,d]=x.useState([]),[f,A]=x.useState({}),[h,m]=x.useState("CONTADO"),[p,g]=x.useState("RIVAS"),[v,y]=x.useState(""),[b,w]=x.useState(""),[P,j]=x.useState(G$()),[_,I]=x.useState(""),[E,F]=x.useState(!1),[k,B]=x.useState(""),[R,Y]=x.useState([]),[me,pe]=x.useState(!0),[he,ge]=x.useState(!1),se=x.useMemo(()=>R.reduce((L,Ae)=>L+(Ae.qtyPackages||0),0),[R]),je=x.useMemo(()=>R.reduce((L,Ae)=>L+(Ae.qtyPackages||0)*(Ae.unitsPerPackage||1),0),[R]),Te=x.useMemo(()=>{const L=R.reduce((Ae,Ee)=>{const Oe=(Number(Ee.pricePerPackage)||0)*(Ee.qtyPackages||0),Be=Number(Ee.discount)||0,S=Math.max(0,Oe-Be);return Ae+S},0);return Math.floor(L*100)/100},[R]),[D,K]=x.useState(0),[z,Q]=x.useState(""),[J,ee]=x.useState(!1),[M,G]=x.useState(!1),[ne,ve]=x.useState(""),[V,qe]=x.useState("+505 "),[ie,re]=x.useState(""),[Fe,de]=x.useState(""),[we,Le]=x.useState("ACTIVO"),[Ge,ft]=x.useState(0),[ht,xt]=x.useState(""),jt=()=>{ve(""),qe("+505 "),re(""),de(""),Le("ACTIVO"),ft(0)},[kt,wt]=x.useState(!1),Ve=async L=>{const Ae=String(L||"").trim();if(!Ae)return;const Ee=Jt.find(O=>String(O.barcode||"")===Ae),Oe=Jt.find(O=>String(O.sku||"")===Ae),Be=Jt.find(O=>String(O.id||"")===Ae),S=Ee||Oe||Be||null;S?(await ot(S.id),Q(" Producto agregado desde escner."),setTimeout(()=>Q(""),2500)):(Q(" Cdigo no corresponde a ningn producto disponible."),setTimeout(()=>Q(""),2500))};function Pe({open:L,onClose:Ae,onDetected:Ee}){const Oe=x.useRef(null),Be=x.useRef(null),[S,O]=x.useState(""),U=x.useRef("");return x.useEffect(()=>{if(!L)return;let q=!1;const ae=new C2,fe=()=>{var Ze,lt,Qe;try{(Ze=Be.current)==null||Ze.stop()}catch{}Be.current=null;try{const tt=(lt=Oe.current)==null?void 0:lt.srcObject;try{(Qe=tt==null?void 0:tt.getTracks)==null||Qe.call(tt).forEach(ut=>ut.stop())}catch{}}catch{}try{Oe.current&&(Oe.current.srcObject=null)}catch{}};return(async()=>{O("");try{if(!Oe.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(Qe=>Qe.stop())}catch{}const Ze=await ae.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},Oe.current,lt=>{if(!q&&lt){const Qe=String(lt.getText()||"").trim().replace(/\s+/g,"");if(!Qe||Qe===U.current)return;U.current=Qe,fe(),Ee(Qe),Ae()}});Be.current=Ze}catch(Ze){const lt=String((Ze==null?void 0:Ze.message)||""),Qe=String((Ze==null?void 0:Ze.name)||"");lt.toLowerCase().includes("permission")||Qe==="NotAllowedError"?O("Permiso de cmara denegado."):Qe==="NotFoundError"||lt.toLowerCase().includes("notfound")?O("No se encontr cmara en este dispositivo."):lt.toLowerCase().includes("secure")||lt.toLowerCase().includes("https")?O("La cmara requiere HTTPS (sitio seguro)."):O(lt||"No se pudo iniciar el escner.")}})(),()=>{var Ze;q=!0;try{(Ze=Be.current)==null||Ze.stop()}catch{}Be.current=null}},[L,Ae,Ee]),L?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ae,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:Oe,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),S&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:S}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}const be=x.useMemo(()=>s.find(L=>L.id===v),[s,v]),ce=x.useMemo(()=>E&&_?s.filter(L=>(L.vendorId??L.sellerId??"")===_):s,[s,E,_]),te=(be==null?void 0:be.balance)||0,Ne=h==="CREDITO"?te+Math.max(0,Number(Te||0))-Math.max(0,Number(D||0)):0,Re=x.useMemo(()=>{if(h!=="CREDITO")return 0;const L=Math.max(0,Number(te||0))+Math.max(0,Number(Te||0));return Math.floor(L*100)/100},[h,te,Te]),ye=L=>{const Ae=Math.max(0,Number(L||0));return Math.min(Ae,Re)},Xe=x.useMemo(()=>u.find(L=>L.id===_)||null,[u,_]),mt=(Xe==null?void 0:Xe.commissionPercent)||0,rt=x.useMemo(()=>{const L=R.reduce((Ae,Ee)=>Ae+Number(Ee.margenVendedor||0),0);return Number(L.toFixed(2))},[R]);x.useEffect(()=>{(async()=>{const L=er(At(De,"customers_candies"),bn("createdAt","desc")),Ae=await Lt(L),Ee=[];Ae.forEach(O=>{const U=O.data();Ee.push({id:O.id,name:U.name??"",phone:U.phone??"+505 ",place:U.place??"",status:U.status??"ACTIVO",creditLimit:Number(U.creditLimit??0),balance:0,sellerId:U.sellerId??U.vendorId??"",vendorId:U.vendorId??U.sellerId??""})});for(const O of Ee)try{const U=er(At(De,"ar_movements"),ur("customerId","==",O.id)),q=await Lt(U);let ae=0;q.forEach(Ue=>ae+=Number(Ue.data().amount||0));const fe=Number(O.initialDebt||0);O.balance=ae+fe}catch{O.balance=0}o(Ee);const Oe=er(At(De,"products_candies"),bn("createdAt","desc")),Be=await Lt(Oe),S=[];Be.forEach(O=>{const U=O.data();S.push({id:O.id,name:U.name??"(sin nombre)",sku:U.sku??"",unitsPerPackage:Number(U.unitsPerPackage??1),barcode:String(U.barcode||""),priceRivas:Number(U.unitPriceRivas??0),priceSanJorge:Number(U.unitPriceSanJorge??0),priceIsla:Number(U.unitPriceIsla??0),providerPrice:Number(U.providerPrice??0),providerPricePerUnit:Number(U.providerPricePerUnit??0)})}),c(S);try{const O=await Lt(At(De,"sellers_candies")),U=[];O.forEach(q=>{const ae=q.data(),fe=ae.branch||"Rivas",Ue=aQe(fe);U.push({id:q.id,name:ae.name??"(sin nombre)",branch:Ue,branchLabel:fe,commissionPercent:Number(ae.commissionPercent??0)})}),d(U)}catch(O){console.error("Error cargando vendedores:",O)}A({})})()},[]),x.useEffect(()=>{var Ae,Ee;const L=e&&e.length?e:t;if(L&&((Ae=L.includes)!=null&&Ae.call(L,"vendedor_dulces"))&&r){I(r),F(!0);try{localStorage.setItem("pos_vendorId",r),localStorage.setItem("pos_role","VENDEDOR")}catch{}return}if(L&&((Ee=L.includes)!=null&&Ee.call(L,"admin"))){F(!1);return}try{const Oe=localStorage.getItem("pos_vendorId")||"",Be=localStorage.getItem("pos_role")||"";Oe&&I(Oe),Be.toUpperCase()==="VENDEDOR"&&F(!0)}catch{}},[t,r]);const ue=async L=>{if(!L){A({});return}const Ae=er(At(De,"inventory_candies_sellers"),ur("sellerId","==",L)),Ee=await Lt(Ae),Oe={};Ee.forEach(Be=>{const S=Be.data(),O=S.productId||"";if(!O)return;const U=Number(S.remainingUnits??S.remaining??S.totalUnits??0);U<=0||(Oe[O]=(Oe[O]||0)+U)}),A(Oe),Y(Be=>{const S=[];for(const O of Be){const U=Oe[O.productId]??0;U>0&&S.push({...O,availableUnits:U})}return S})};x.useEffect(()=>{if(!_){A({});return}const L=u.find(Ae=>Ae.id===_);L&&g(L.branch),ue(_)},[_,u]),x.useEffect(()=>{Y(L=>L.map(Ae=>{const Ee=l.find(Be=>Be.id===Ae.productId);if(!Ee)return Ae;const Oe=p==="RIVAS"?Ee.priceRivas:p==="SAN_JORGE"?Ee.priceSanJorge:Ee.priceIsla;return{...Ae,pricePerPackage:Number(Oe)||0}}))},[p,l]);async function _e(L){const{productId:Ae,vendorId:Ee,branch:Oe}=L;if(!Ae||!Ee)return 0;const Be=er(At(De,"inventory_candies_sellers"),ur("sellerId","==",Ee),ur("productId","==",Ae)),S=await Lt(Be);if(S.empty)return 0;const O=S.docs[0].data(),U=Number(O.unitPriceVendor??0);if(U>0)return U;const q=Number(Oe==="RIVAS"?O.unitPriceRivas??0:Oe==="SAN_JORGE"?O.unitPriceSanJorge??0:O.unitPriceIsla??0);return Number(q||0)}const We=L=>{const Ae=Number(mt||0),Ee=Number(L||0)*Ae/100;return Math.max(0,Number(Ee.toFixed(2)))},ot=async L=>{var fe;if(!L)return;if(!_){Q("Selecciona primero el vendedor para usar su inventario."),B("");return}if(R.some(Ue=>Ue.productId===L)){B("");return}const Ae=l.find(Ue=>Ue.id===L);if(!Ae){B("");return}const Ee=await $$(L,_),Oe=((fe=u.find(Ue=>Ue.id===_))==null?void 0:fe.branch)??p,Be=await _e({productId:L,vendorId:_,branch:Oe}),O=await(async Ue=>{const{productId:Ze,vendorId:lt}=Ue;if(!Ze||!lt)return 0;try{const Qe=er(At(De,"inventory_candies_sellers"),ur("sellerId","==",lt),ur("productId","==",Ze)),tt=await Lt(Qe);if(tt.empty)return 0;const ut=tt.docs[0].data();return Number(ut.providerPrice??0)}catch{return 0}})({productId:L,vendorId:_}),U=(()=>{const Ue=Number(Ae.providerPrice||0);if(Ue>0)return Ue;const Ze=Number(Ae.providerPricePerUnit||0);return Ze>0?Ze*Number(Ae.unitsPerPackage||1):0})(),q=Number(O||0)>0?Number(O||0):Number(U||0),ae={productId:L,productName:Ae.name||"",sku:Ae.sku||"",unitsPerPackage:Ae.unitsPerPackage||1,pricePerPackage:Number(Be)||0,availableUnits:Number(Ee)||0,qtyPackages:0,discount:0,providerPricePerPackage:Number(q)||0,margenVendedor:0,uBruta:0};Y(Ue=>[...Ue,ae]),B("")},Ce=(L,Ae)=>{Y(Ee=>Ee.map(Oe=>{if(Oe.productId!==L)return Oe;if(Ae==="")return{...Oe,qtyPackages:0};const Be=Math.max(0,Math.floor(Number(Ae))),S=f[L]??Oe.availableUnits??0,O=Math.max(1,Number(Oe.unitsPerPackage||1)),U=Math.floor(S/O);let q=Be;Be>U&&(q=U,Q(` Solo hay ${U} paquetes disponibles.`),setTimeout(()=>Q(""),2500));const ae=Number(Oe.pricePerPackage||0)*q,fe=Number(Oe.providerPricePerPackage||0)*q,Ue=ae-fe,Ze=We(Ue);return{...Oe,qtyPackages:q,margenVendedor:Ze,uBruta:Ue}}))},$e=(L,Ae)=>{Y(Ee=>Ee.map(Oe=>{if(Oe.productId!==L)return Oe;if(Ae==="")return{...Oe,discount:0};const Be=Math.max(0,Math.floor(Number(Ae))),S=Oe.qtyPackages||0,O=Number(Oe.pricePerPackage||0)*S,U=Number(Oe.providerPricePerPackage||0)*S,q=O-U,ae=We(q);return{...Oe,discount:Be,margenVendedor:ae,uBruta:q}}))},gt=L=>Y(Ae=>Ae.filter(Ee=>Ee.productId!==L)),Kt=async()=>{if(!P)return"Selecciona la fecha.";if(!_)return"Selecciona el vendedor para esta venta.";if(R.length===0)return"Agrega al menos un producto.";const L=R.filter(Ae=>(Ae.qtyPackages||0)>0);if(L.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(Te>0))return"El total debe ser mayor a cero.";if(h==="CONTADO"){if(!b.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!v)return"Selecciona un cliente (crdito).";if(D<0)return"El pago inicial no puede ser negativo.";if(D>Re)return"El pago inicial no puede superar el saldo a deber (saldo actual + venta).";if((be==null?void 0:be.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const Ae of L){const Ee=Ae.unitsPerPackage||1,Oe=(Ae.qtyPackages||0)*Ee,Be=await $$(Ae.productId,_),S=Math.floor(Be/Ee);if(Oe>Be)return`Inventario insuficiente en el pedido del vendedor para "${Ae.productName}". Disponible: ${S} paquetes.`;const O=(Number(Ae.pricePerPackage)||0)*(Ae.qtyPackages||0),U=Number(Ae.discount)||0;if(!Number.isInteger(U)||U<0)return`El descuento en "${Ae.productName}" debe ser entero y  0.`;if(U>O)return`El descuento en "${Ae.productName}" no puede exceder C$ ${O.toFixed(2)}.`}return null},Ut=async L=>{L.preventDefault(),Q("");const Ae=await Kt();if(Ae){Q(" "+Ae);return}try{ee(!0);const Ee=R.filter(U=>(U.qtyPackages||0)>0).map(U=>{const q=U.unitsPerPackage||1,ae=U.qtyPackages||0,fe=ae*q,Ue=(Number(U.pricePerPackage)||0)*(ae||0),Ze=Math.max(0,Math.floor(Number(U.discount)||0)),lt=Math.max(0,Ue-Ze),Qe=Number(U.providerPricePerPackage||0),tt=Qe*ae,ut=Ue-tt,Pt=We(ut);return{productId:U.productId,productName:U.productName,sku:U.sku||"",qty:fe,packages:ae,unitsPerPackage:q,branch:p,unitPricePackage:Number(U.pricePerPackage)||0,discount:Ze,total:Math.floor(lt*100)/100,providerPricePerPackage:Qe,margenVendedor:Pt,uBruta:ut}}),Oe={type:h,branch:p,date:P,createdAt:mr.now(),itemsTotal:Number(Te)||0,total:Number(Te)||0,quantity:Number(je)||0,packagesTotal:Number(se)||0,items:Ee,vendorId:_},Be=u.find(U=>U.id===_);Be&&(Oe.vendorName=Be.name,Oe.vendorBranch=Be.branch,Oe.vendorBranchLabel=Be.branchLabel,Oe.vendorCommissionPercent=Be.commissionPercent||0,Oe.vendorCommissionAmount=rt||0),h==="CONTADO"?Oe.customerName=b.trim():(Oe.customerId=v,Oe.downPayment=Number(D)||0);const S=await Hn(At(De,"sales_candies"),Oe);if(h==="CONTADO"){const U=(b||"").trim();if(U)try{await Hn(At(De,"cash_customers"),{name:U,date:P,branch:p,vendorId:_,createdAt:mr.now()})}catch(q){console.warn("No se pudo guardar cash_customer:",q)}}if(h==="CREDITO"&&v){const U={customerId:v,date:P,createdAt:mr.now(),ref:{saleId:S.id}};await Hn(At(De,"ar_movements"),{...U,type:"CARGO",amount:Number(Te)||0}),Number(D)>0&&await Hn(At(De,"ar_movements"),{...U,type:"ABONO",amount:-Number(D)})}const O={};for(const U of Ee)if(U.qty>0){const{allocations:q}=await iQe({productId:U.productId,vendorId:_,quantityUnits:U.qty,saleDate:P,saleId:S.id});O[U.productId]={productId:U.productId,vendorId:_,allocations:q}}await Cn(Yt(De,"sales_candies",S.id),{allocationsByItem:O});try{const U=h==="CONTADO"?b.trim()||"Cliente Mostrador":(be==null?void 0:be.name)||"Cliente crdito";sQe({saleId:S.id,date:P,customerName:U,branch:p,items:Ee.map(q=>({productName:q.productName,qty:q.packages,unitPrice:q.unitPricePackage,total:q.total})),total:Number(Te)||0,vendorName:Be==null?void 0:Be.name,vendorCommissionPercent:(Be==null?void 0:Be.commissionPercent)||0,vendorCommissionAmount:rt})}catch(U){console.error("Error generando voucher PDF:",U)}m("CONTADO"),y(""),w(""),j(G$()),Y([]),K(0),h==="CREDITO"&&v&&o(U=>U.map(q=>q.id===v?{...q,balance:(q.balance||0)+(Number(Te)||0)-(Number(D)||0)}:q)),Q(" Venta de dulces registrada"),_?await ue(_):A({})}catch(Ee){console.error(Ee),Q(" Error al guardar la venta de dulces")}finally{ee(!1)}},Jt=x.useMemo(()=>l.filter(L=>{const Ae=f[L.id]||0,Ee=Math.max(1,Number(L.unitsPerPackage||1));return Math.floor(Ae/Ee)>0}).sort((L,Ae)=>(L.name||"").localeCompare(Ae.name||"")),[l,f]),[it,X]=x.useState(""),oe=x.useMemo(()=>{const L=String(it||"").trim().toLowerCase();return L?Jt.filter(Ae=>`${Ae.name||""} ${Ae.sku||""}`.toLowerCase().includes(L)||String(Ae.id||"").includes(L)):Jt},[it,Jt]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Ventas (Dulces)"})}),i.jsxs("form",{onSubmit:Ut,className:"bg-white p-3 sm:p-4 rounded shadow border mb-6",children:[i.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:L=>m(L.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),h==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:b,onChange:L=>w(L.target.value)})]}):i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsxs("select",{className:"w-full sm:flex-1 border p-2 rounded",value:v,onChange:L=>y(L.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),ce.map(L=>i.jsxs("option",{value:L.status==="ACTIVO"?L.id:"",disabled:L.status==="BLOQUEADO",children:[L.name," | ",L.phone," | Saldo: ",Ec(L.balance||0)]},L.id))]}),i.jsx("button",{type:"button",className:"w-full sm:w-auto px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>G(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:Ec(te)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:Re,className:"w-full border p-2 rounded",value:D===0?"":D,onChange:L=>{const Ae=ye(L.target.value);K(Ae)},placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:Ec(Ne)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:P,onChange:L=>j(L.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:L=>{I(L.target.value),Y([])},disabled:E,children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(L=>i.jsxs("option",{value:L.id,children:[L.name,"  ",L.branchLabel,"  ",L.commissionPercent.toFixed(2),"%"," comisin"]},L.id))]}),E&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor fijado por el usuario logueado."})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Lista de precios / Sucursal"}),i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"RIVAS",checked:p==="RIVAS",readOnly:!0,disabled:!0}),i.jsx("span",{children:"Rivas"})]}),i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"SAN_JORGE",checked:p==="SAN_JORGE",readOnly:!0,disabled:!0}),i.jsx("span",{children:"San Jorge"})]}),i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"ISLA",checked:p==="ISLA",readOnly:!0,disabled:!0}),i.jsx("span",{children:"Isla de Ometepe"})]})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"La sucursal se toma automticamente del vendedor seleccionado."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:it,onChange:L=>X(L.target.value),disabled:!_}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>wt(!0),disabled:!_,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[i.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),i.jsxs("select",{className:"w-full border p-2 rounded",value:k,onChange:async L=>{const Ae=L.target.value;B(Ae),await ot(Ae)},disabled:!_,children:[i.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),oe.map(L=>{const Ae=R.some(S=>S.productId===L.id),Ee=f[L.id]||0,Oe=Math.max(1,Number(L.unitsPerPackage||1)),Be=Math.floor(Ee/Oe);return Be<=0?null:i.jsxs("option",{value:Ae?"":L.id,disabled:Ae,children:[L.name," ",L.sku?` ${L.sku}`:""," (disp: ",Be," ","paq.)",Ae?" ":""]},L.id)})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"El selector solo muestra productos disponibles del pedido del vendedor seleccionado (sin ceros)."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("div",{className:"border rounded overflow-hidden min-w-[860px]",children:[i.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[i.jsx("div",{className:"col-span-4",children:"Producto"}),i.jsx("div",{className:"col-span-2 text-right",children:"Precio (paq.)"}),i.jsx("div",{className:"col-span-2 text-right",children:"Existencias (paq.)"}),i.jsx("div",{className:"col-span-1 text-right",children:"Cantidad (paq.)"}),i.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),i.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),i.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),R.length===0?i.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):R.map(L=>{const Ae=f[L.productId]??L.availableUnits??0,Ee=L.unitsPerPackage?Math.floor(Ae/L.unitsPerPackage):0,Oe=Math.max(0,Ee-(L.qtyPackages||0)),Be=(Number(L.pricePerPackage)||0)*(L.qtyPackages||0),S=Math.max(0,Be-(Number(L.discount)||0));return i.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[i.jsx("div",{className:"col-span-4",children:i.jsxs("div",{className:"font-medium",children:[L.productName,L.sku?`  ${L.sku}`:""]})}),i.jsx("div",{className:"col-span-2 text-right",children:Ec(L.pricePerPackage)}),i.jsxs("div",{className:"col-span-2 text-right",children:[Oe," paq."]}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(L.qtyPackages)||L.qtyPackages===0?"":L.qtyPackages,onChange:O=>Ce(L.productId,O.target.value),inputMode:"numeric",placeholder:"0"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(L.discount)||L.discount===0?"":L.discount,onChange:O=>$e(L.productId,O.target.value),inputMode:"numeric",placeholder:"0"})}),i.jsx("div",{className:"col-span-1 text-right",children:Ec(S)}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>gt(L.productId),title:"Quitar producto",children:""})})]},L.productId)})]})}),R.length>0&&i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-6 mt-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes totales: "}),i.jsx("span",{className:"font-semibold",children:se})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total: "}),i.jsx("span",{className:"font-semibold",children:Ec(Te)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Comisin vendedor: "}),i.jsxs("span",{className:"font-semibold",children:[Ec(rt)," ",mt?`(${mt.toFixed(2)}%)`:""]})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:J,children:J?"Guardando...":"Registrar venta"})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[i.jsxs("button",{type:"button",onClick:()=>pe(L=>!L),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Datos de venta",i.jsx("span",{className:"text-lg",children:me?"":"+"})]}),me&&i.jsxs("div",{className:"p-3 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:P,onChange:L=>j(L.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:L=>m(L.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),h==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (Cash)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mario Bergoglio",value:b,onChange:L=>w(L.target.value)})]}):i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("select",{className:"w-full border p-2 rounded",value:v,onChange:L=>y(L.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),ce.map(L=>i.jsxs("option",{value:L.status==="ACTIVO"?L.id:"",disabled:L.status==="BLOQUEADO",children:[L.name," | Saldo: ",Ec(L.balance||0)]},L.id))]}),i.jsx("button",{type:"button",className:"w-full px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>G(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-base font-semibold",children:Ec(te)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-base font-semibold",children:Ec(Ne)})]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:Re,className:"w-full border p-2 rounded",value:D===0?"":D,onChange:L=>{const Ae=ye(L.target.value);K(Ae)},placeholder:"0.00"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:L=>{I(L.target.value),Y([])},disabled:E,children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(L=>i.jsxs("option",{value:L.id,children:[L.name,"  "," ",L.commissionPercent.toFixed(2),"%"]},L.id))]}),E&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor Logueado en esta app."})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[i.jsxs("button",{type:"button",onClick:()=>ge(L=>!L),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Agrega Productos",i.jsx("span",{className:"text-lg",children:he?"":"+"})]}),he&&i.jsxs("div",{className:"p-3 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Productos"}),i.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:it,onChange:L=>X(L.target.value),disabled:!_}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>wt(!0),disabled:!_,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[i.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),i.jsxs("select",{className:"w-full border p-2 rounded",value:k,onChange:async L=>{const Ae=L.target.value;B(Ae),await ot(Ae)},disabled:!_,children:[i.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),oe.map(L=>{const Ae=R.some(S=>S.productId===L.id),Ee=f[L.id]||0,Oe=Math.max(1,Number(L.unitsPerPackage||1)),Be=Math.floor(Ee/Oe);return Be<=0?null:i.jsxs("option",{value:Ae?"":L.id,disabled:Ae,children:[L.name," ",L.sku?` ${L.sku}`:""," (disp:"," ",Be," paq.)",Ae?" ":""]},L.id)})]})]}),R.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"No hay productos agregados."}):i.jsx("div",{className:"space-y-2",children:R.map(L=>{const Ae=f[L.productId]??L.availableUnits??0,Ee=L.unitsPerPackage?Math.floor(Ae/L.unitsPerPackage):0,Oe=Math.max(0,Ee-(L.qtyPackages||0)),Be=(Number(L.pricePerPackage)||0)*(L.qtyPackages||0),S=Math.max(0,Be-(Number(L.discount)||0));return i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50 space-y-2",children:[i.jsxs("div",{className:"font-semibold leading-tight",children:[L.productName,L.sku?`  ${L.sku}`:""]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"p-2 rounded border bg-white",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio x Paquete"}),i.jsx("div",{className:"font-bold",children:Ec(L.pricePerPackage)})]}),i.jsxs("div",{className:"p-2 rounded border bg-white",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencias"}),i.jsxs("div",{className:"font-bold",children:[Oe," paq."]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Cantidad Paquetes"}),i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(L.qtyPackages)||L.qtyPackages===0?"":L.qtyPackages,onChange:O=>Ce(L.productId,O.target.value),inputMode:"numeric",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Descuento"}),i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(L.discount)||L.discount===0?"":L.discount,onChange:O=>$e(L.productId,O.target.value),inputMode:"numeric",placeholder:"0"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"font-regular text-gray-600",children:["Total ",Ec(S)]}),i.jsxs("div",{className:"font-regular text-gray-600",children:["Comision ",Ec(L.margenVendedor||0)]}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg bg-red-100 hover:bg-red-200",onClick:()=>gt(L.productId),children:"Quitar"})]})]},L.productId)})}),R.length>0&&i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:se})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),i.jsx("div",{className:"font-semibold",children:Ec(Te)})]})]})]})]}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl hover:bg-blue-700 disabled:opacity-60",disabled:J,children:J?"Guardando...":"Registrar venta"})]})]}),z&&i.jsx("p",{className:"mt-2 text-sm",children:z}),M&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-2 sm:p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[98%] sm:w-[95%] max-w-xl p-3 sm:p-4 max-h-[92vh] overflow-auto",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:ne,onChange:L=>ve(L.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:V,onChange:L=>qe(K$(L.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ie,onChange:L=>re(L.target.value),children:[i.jsx("option",{value:"",children:""}),rQe.map(L=>i.jsx("option",{value:L,children:L},L))]})]}),!E&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ht,onChange:L=>xt(L.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.filter(L=>(L.status??"ACTIVO")==="ACTIVO").map(L=>i.jsxs("option",{value:L.id,children:[L.name,"  ",L.branchLabel]},L.id))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Fe,onChange:L=>de(L.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2",children:[i.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{jt(),G(!1)},children:"Cancelar"}),i.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{var Ee;const L=E?_||r:ht;if(!L){Q("Selecciona el vendedor para asociar este cliente.");return}if(Q(""),!ne.trim()){Q("Ingresa el nombre del nuevo cliente.");return}const Ae=K$(V);try{const Oe=await Hn(At(De,"customers_candies"),{name:ne.trim(),phone:Ae,place:ie||"",notes:Fe||"",status:we,creditLimit:Number(Ge||0),createdAt:mr.now(),sellerId:L,vendorId:L,vendorName:((Ee=u.find(S=>S.id===L))==null?void 0:Ee.name)||""}),Be={id:Oe.id,name:ne.trim(),phone:Ae,place:ie||"",status:we,creditLimit:Number(Ge||0),balance:0,sellerId:L};o(S=>[Be,...S]),y(Oe.id),jt(),G(!1),Q(" Cliente creado")}catch(Oe){console.error(Oe),Q(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),i.jsx(Pe,{open:kt,onClose:()=>wt(!1),onDetected:Ve}),J&&i.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-2",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[i.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const q$=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],r_=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function lQe(){const[t,e]=x.useState(jr(wd(new Date),"yyyy-MM-dd")),[r,n]=x.useState(jr(bd(new Date),"yyyy-MM-dd")),[a,s]=x.useState(jr(new Date,"yyyy-MM-dd")),[o,l]=x.useState(""),[c,u]=x.useState(""),[d,f]=x.useState(0),[A,h]=x.useState("PENDIENTE"),[m,p]=x.useState(""),[g,v]=x.useState([]),[y,b]=x.useState(!0),[w,P]=x.useState(""),[j,_]=x.useState(null),[I,E]=x.useState(""),[F,k]=x.useState(""),[B,R]=x.useState(""),[Y,me]=x.useState(0),[pe,he]=x.useState("PENDIENTE"),[ge,se]=x.useState("");x.useEffect(()=>{(async()=>{b(!0);try{const M=er(At(De,"expenses_candies"),bn("date","desc")),G=await Lt(M),ne=[];G.forEach(ve=>{const V=ve.data();ne.push({id:ve.id,date:V.date||jr(new Date,"yyyy-MM-dd"),category:V.category||"",description:V.description||"",amount:Number(V.amount||0),status:V.status||"PENDIENTE",notes:V.notes||"",createdAt:V.createdAt??mr.now()})}),v(ne)}catch(M){console.error(M),P(" Error al cargar gastos")}finally{b(!1)}})()},[]);const je=x.useMemo(()=>g.filter(M=>!(t&&M.date<t||r&&M.date>r)),[g,t,r]),Te=x.useMemo(()=>{const M=je.reduce((ve,V)=>ve+(V.amount||0),0),G=je.filter(ve=>ve.status==="PAGADO").reduce((ve,V)=>ve+(V.amount||0),0),ne=M-G;return{total:M,pagado:G,pendiente:ne}},[je]),D=()=>{s(jr(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),h("PENDIENTE"),p("")},K=async M=>{if(M.preventDefault(),P(""),!o){P("Selecciona una categora.");return}if(!c.trim()){P("Ingresa una descripcin.");return}if(!d||d<=0){P("Ingresa un monto vlido.");return}try{const G=await Hn(At(De,"expenses_candies"),{date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:mr.now()});v(ne=>[{id:G.id,date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:mr.now()},...ne]),D(),P(" Gasto registrado")}catch(G){console.error(G),P(" Error al guardar gasto")}},z=M=>{_(M.id),E(M.date),k(M.category||""),R(M.description||""),me(Number(M.amount||0)),he(M.status||"PENDIENTE"),se(M.notes||"")},Q=()=>{_(null),E(""),k(""),R(""),me(0),he("PENDIENTE"),se("")},J=async()=>{if(j){if(!F){P("Selecciona una categora.");return}if(!B.trim()){P("Ingresa una descripcin.");return}if(!Y||Y<=0){P("Ingresa un monto vlido.");return}try{await Cn(Yt(De,"expenses_candies",j),{date:I,category:F,description:B.trim(),amount:Number(Y.toFixed(2)),status:pe,notes:ge||""}),v(M=>M.map(G=>G.id===j?{...G,date:I,category:F,description:B.trim(),amount:Number(Y.toFixed(2)),status:pe,notes:ge||""}:G)),Q(),P(" Gasto actualizado")}catch(M){console.error(M),P(" Error al actualizar gasto")}}},ee=async M=>{confirm(`Eliminar el gasto "${M.description}"?`)&&(await Dn(Yt(De,"expenses_candies",M.id)),v(ne=>ne.filter(ve=>ve.id!==M.id)),P(" Gasto borrado"))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Dulces)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:M=>e(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:M=>n(M.target.value)})]}),i.jsxs("div",{className:"ml-auto text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",r_(Te.total)]}),i.jsxs("div",{children:["Pagado: ",r_(Te.pagado)]}),i.jsxs("div",{children:["Pendiente: ",r_(Te.pendiente)]})]})]}),i.jsxs("form",{onSubmit:K,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:M=>s(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:M=>l(M.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),q$.map(M=>i.jsx("option",{value:M,children:M},M))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:M=>u(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:M=>f(Math.max(0,Number(M.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:M=>h(M.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:M=>p(M.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):je.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):je.slice().sort((M,G)=>M.date.localeCompare(G.date)).map(M=>{const G=j===M.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:G?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:I,onChange:ne=>E(ne.target.value)}):M.date}),i.jsx("td",{className:"p-2 border",children:G?i.jsxs("select",{className:"w-full border p-1 rounded",value:F,onChange:ne=>k(ne.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),q$.map(ne=>i.jsx("option",{value:ne,children:ne},ne))]}):M.category||""}),i.jsx("td",{className:"p-2 border",children:G?i.jsx("input",{className:"w-full border p-1 rounded",value:B,onChange:ne=>R(ne.target.value)}):i.jsx("span",{title:M.description,children:M.description.length>40?M.description.slice(0,40)+"":M.description})}),i.jsx("td",{className:"p-2 border",children:G?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Y)?"":Y,onChange:ne=>me(Math.max(0,Number(ne.target.value||0)))}):r_(M.amount)}),i.jsx("td",{className:"p-2 border",children:G?i.jsxs("select",{className:"w-full border p-1 rounded",value:pe,onChange:ne=>he(ne.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:M.status})}),i.jsx("td",{className:"p-2 border",children:G?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ge,onChange:ne=>se(ne.target.value),maxLength:500}):i.jsx("span",{title:M.notes||"",children:(M.notes||"").length>40?(M.notes||"").slice(0,40)+"":M.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:G?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:J,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Q,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>z(M),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ee(M),children:"Borrar"})]})})})]},M.id)})})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w})]})}const Sc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function cQe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?jr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function uQe(t,e){var s,o,l;const r=cQe(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((c,u)=>c+(Number(u.packages??u.qty??u.quantity??0)||0),0),a=Number(t.total??t.itemsTotal??0)||0):(n=Number(t.packagesTotal??t.quantity??((s=t.item)==null?void 0:s.packages)??((o=t.item)==null?void 0:o.qty)??0)||0,a=Number(t.total??((l=t.item)==null?void 0:l.total)??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),vendorId:t.vendorId||void 0,vendorName:t.vendorName||t.vendor||void 0,vendorCommissionPercent:Number(t.vendorCommissionPercent||0)||0,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}async function dQe(t){const e=(t||"").trim();if(!e)return;const r=er(At(De,"ar_movements"),ur("ref.saleId","==",e)),n=await Lt(r);await Promise.all(n.docs.map(a=>Dn(Yt(De,"ar_movements",a.id))))}function fQe({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=mn(n,"vendedor_dulces"),s=mn(n,"admin"),o=s?8:7,[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,A]=x.useState(null),[h,m]=x.useState([]),p=async we=>{c(!0),d(!0),A(we),m([]);try{const Le=await ei(Yt(De,"sales_candies",we)),Ge=Le.exists()?Le.data():null;if(!Ge){m([]);return}const ht=(Array.isArray(Ge==null?void 0:Ge.items)?Ge.items:Ge!=null&&Ge.item?[Ge.item]:[]).map(xt=>({productName:String(xt.productName||""),qty:Number(xt.packages??xt.qty??xt.quantity??0),unitPrice:Number(xt.unitPricePackage??xt.unitPrice??0),discount:Number(xt.discount||0),total:Number(xt.total??xt.lineFinal??0)}));m(ht)}catch(Le){console.error(Le)}finally{d(!1)}},[g,v]=x.useState(jr(new Date,"yyyy-MM-01")),[y,b]=x.useState(jr(new Date,"yyyy-MM-dd")),[w,P]=x.useState([]),[j,_]=x.useState([]),[I,E]=x.useState([]),[F,k]=x.useState(!0),[B,R]=x.useState(""),[Y,me]=x.useState(""),[pe,he]=x.useState(""),[ge,se]=x.useState(null),je=15,[Te,D]=x.useState(1),K=x.useMemo(()=>{const we={};return w.forEach(Le=>we[Le.id]=Le.name),we},[w]),z=x.useMemo(()=>{const we={};return I.forEach(Le=>{we[Le.id]=Le}),we},[I]),Q=we=>{const Le=Number(we.vendorCommissionAmount||0);if(Le>0)return Le;if(!we.vendorId)return 0;const Ge=z[we.vendorId];if(!Ge||!Ge.commissionPercent)return 0;const ft=(Number(we.total)||0)*(Number(Ge.commissionPercent)||0)/100;return Number(ft.toFixed(2))};x.useEffect(()=>{(async()=>{k(!0),R("");try{const we=await Lt(At(De,"customers_candies")),Le=[];we.forEach(jt=>Le.push({id:jt.id,name:jt.data().name||""})),P(Le);const Ge=await Lt(At(De,"sellers_candies")),ft=[];Ge.forEach(jt=>{const kt=jt.data();ft.push({id:jt.id,name:kt.name||"",commissionPercent:Number(kt.commissionPercent||0)})}),E(ft);const ht=await Lt(er(At(De,"sales_candies"),bn("createdAt","desc"))),xt=[];ht.forEach(jt=>{const kt=uQe(jt.data(),jt.id);kt&&kt.date>=g&&kt.date<=y&&xt.push(kt)}),_(xt.sort((jt,kt)=>kt.date.localeCompare(jt.date))),D(1)}catch(we){console.error(we),R(" Error cargando transacciones.")}finally{k(!1)}})()},[g,y]);const J=x.useMemo(()=>j.filter(we=>!(a&&(!e||!we.vendorId||we.vendorId!==e)||Y&&we.customerId!==Y||pe&&we.type!==pe)),[j,Y,pe,a,e]),ee=x.useMemo(()=>{let we=0,Le=0,Ge=0,ft=0;for(const ht of J)ht.type==="CONTADO"?(we+=ht.quantity,Ge+=ht.total):(Le+=ht.quantity,ft+=ht.total);return{packsCash:we,packsCredito:Le,montoCash:Ge,montoCredito:ft}},[J]),M=Math.max(1,Math.ceil(J.length/je)),G=x.useMemo(()=>{const we=(Te-1)*je;return J.slice(we,we+je)},[J,Te]),ne=x.useMemo(()=>f&&j.find(we=>we.id===f)||null,[f,j]),ve=async we=>{if(s&&(se(null),!!window.confirm("Eliminar esta venta de dulces? Se restaurar el inventario asociado.")))try{k(!0);const Le=we.id.split("#")[0];await U2(Le),await dQe(Le),_(Ge=>Ge.filter(ft=>ft.id!==we.id)),R(" Venta eliminada y saldo del cliente ajustado")}catch(Le){console.error(Le),R(" No se pudo eliminar la venta.")}finally{k(!1)}},V=()=>{const we=`Ventas del dia  ${g} a ${y}`,Le=xt=>(xt||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Ge=J.map(xt=>{const jt=xt.customerName||(xt.customerId?K[xt.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${xt.date}</td>
          <td>${Le(jt)}</td>
          <td>${xt.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${xt.quantity}</td>
          <td style="text-align:right">${Sc(xt.total)}</td>
        </tr>`}).join(""),ft=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Le(we)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Le(we)}</h1>
      <div class="kpis">
        <div><b>Paquetes Cash:</b> ${ee.packsCash}</div>
        <div><b>Paquetes Crdito:</b> ${ee.packsCredito}</div>
        <div><b>Monto Cash:</b> ${Sc(ee.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Sc(ee.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Paquetes</th><th>Monto</th>
      </tr></thead><tbody>
      ${Ge||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,ht=window.open("","_blank");ht&&(ht.document.open(),ht.document.write(ft),ht.document.close())},qe=()=>D(1),ie=()=>D(we=>Math.max(1,we-1)),re=()=>D(we=>Math.min(M,we+1)),Fe=()=>D(M),de=()=>{const we=[];if(M<=7)for(let Ge=1;Ge<=M;Ge++)we.push(Ge);else{const Ge=Math.max(1,Te-2),ft=Math.min(M,Te+2);we.push(1),Ge>2&&we.push(-1);for(let ht=Ge;ht<=ft;ht++)ht!==1&&ht!==M&&we.push(ht);ft<M-1&&we.push(-2),we.push(M)}return i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:qe,disabled:Te===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ie,disabled:Te===1,children:" Anterior"}),we.map((Ge,ft)=>typeof Ge=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${Ge===Te?"bg-blue-600 text-white":""}`,onClick:()=>D(Ge),children:Ge},ft):i.jsx("span",{className:"px-2",children:""},ft)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:re,disabled:Te===M,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Fe,disabled:Te===M,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",Te," de ",M,"  ",J.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:we=>{v(we.target.value),D(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:we=>{b(we.target.value),D(1)}})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:Y,onChange:we=>{me(we.target.value),D(1)},children:[i.jsx("option",{value:"",children:"Todos"}),w.map(we=>i.jsx("option",{value:we.id,children:we.name},we.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:pe,onChange:we=>{he(we.target.value),D(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:V,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:ee.packsCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:ee.packsCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Sc(ee.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Sc(ee.montoCredito)})]})]}),i.jsxs("div",{className:"block md:hidden space-y-3",children:[F?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):G.length===0?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):G.map(we=>{const Le=we.customerName||(we.customerId?K[we.customerId]:"")||"Nombre cliente",Ge=Q(we);return i.jsx("div",{className:"bg-white border rounded-xl shadow",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:Le}),i.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:we.date})]}),i.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[i.jsx("span",{className:`px-2 py-1 rounded-full border ${we.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:we.type==="CREDITO"?"Crdito":"Cash"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Paquetes:"})," ",i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:ft=>{ft.preventDefault(),p(we.id)},title:"Ver detalle",children:we.quantity})]}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Monto:"})," ",Sc(we.total)]})]})]}),i.jsx("div",{className:"text-gray-500 mt-1",children:i.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),i.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("span",{className:"font-medium text-right",children:Le})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha"}),i.jsx("span",{className:"font-medium",children:we.date})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("span",{className:"font-medium",children:we.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes"}),i.jsx("span",{className:"font-medium",children:i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(we.id),title:"Ver detalle",children:we.quantity})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Monto"}),i.jsx("span",{className:"font-semibold",children:Sc(we.total)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("span",{className:"font-medium",children:Ge>0?Sc(Ge):""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("span",{className:"font-medium",children:we.vendorName||""})]}),s&&i.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>se(ft=>ft===we.id?null:we.id),children:" Acciones"}),ge===we.id&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ve(we),children:"Eliminar"})]})]})})]})},we.id)}),i.jsx("div",{className:"bg-white p-3 rounded shadow border",children:de()})]}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Comisin"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),s&&i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:F?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Cargando"})}):G.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Sin transacciones en el rango."})}):G.map(we=>{const Le=we.customerName||(we.customerId?K[we.customerId]:"")||"Nombre cliente",Ge=Q(we);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:we.date}),i.jsx("td",{className:"p-2 border",children:Le}),i.jsx("td",{className:"p-2 border",children:we.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(we.id),children:we.quantity})}),i.jsx("td",{className:"p-2 border",children:Sc(we.total)}),i.jsx("td",{className:"p-2 border",children:Ge>0?Sc(Ge):""}),i.jsx("td",{className:"p-2 border",children:we.vendorName||""}),s&&i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>se(ft=>ft===we.id?null:we.id),title:"Acciones",children:""}),ge===we.id&&i.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>ve(we),children:"Eliminar"})})]})]},we.id)})})]}),de()]}),B&&i.jsx("p",{className:"mt-2 text-sm",children:B}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Productos/paquetes vendidos"," ",f?` #${f}`:""]}),ne&&i.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:["Comisin de vendedor:"," ",i.jsx("span",{className:"font-semibold",children:Q(ne)>0?Sc(Q(ne)):""})]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:u?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):h.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):h.map((we,Le)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:we.productName}),i.jsx("td",{className:"p-2 border text-right",children:we.qty}),i.jsx("td",{className:"p-2 border text-right",children:Sc(we.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Sc(we.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Sc(we.total)})]},Le))})]})})]})})]})}const cn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Wy(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?jr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function hQe(t){if(Array.isArray(t==null?void 0:t.items))return t.items.map(n=>{const a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(n==null?void 0:n.lineFinal)??0)/a:0)||0;return{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0),uBruta:Number((n==null?void 0:n.uBruta)??(n==null?void 0:n.grossProfit)??0)}});if(t!=null&&t.item){const n=t.item,a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(t==null?void 0:t.total)??0)/a:0)||0;return[{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0),uBruta:Number((n==null?void 0:n.uBruta)??(n==null?void 0:n.grossProfit)??0)}]}const e=Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,r=e>0?Number((t==null?void 0:t.total)||0)/e:0;return e>0?[{productId:String((t==null?void 0:t.productId)||""),productName:String((t==null?void 0:t.productName)||""),sku:(t==null?void 0:t.sku)||"",qty:e,unitPrice:Number(r||0),discount:Number((t==null?void 0:t.discount)||0),vendorCommissionAmount:Number((t==null?void 0:t.vendorCommissionAmount)??(t==null?void 0:t.commissionAmount)??0),uBruta:Number((t==null?void 0:t.uBruta)??(t==null?void 0:t.grossProfit)??0)}]:[]}function AQe(t,e){const r=Wy(t);if(!r)return null;const n=t.vendorId||t.sellerId||void 0,a=t.vendorName||t.sellerName||void 0,s=hQe(t);let o=Number(t.total??t.itemsTotal??0)||s.reduce((l,c)=>{const u=(Number(c.qty||0)||0)*(Number(c.unitPrice||0)||0),d=Math.max(0,Number(c.discount||0)),f=Math.max(0,u-d);return l+f},0);return o=Number(o||0),{id:e,date:r,type:t.type||"CONTADO",total:o,items:s,customerId:t.customerId||void 0,customerName:t.customerName||void 0,vendorId:n,vendorName:a,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}function mQe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let o=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const A=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(o+=A*f.cost),f.qtyLeft-=A,d-=A}}return o}async function pQe(t){const e=er(At(De,"ar_movements"),ur("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Dn(Yt(De,"ar_movements",n.id))))}function gQe(){const{refreshKey:t,refresh:e}=vc(),[r,n]=x.useState(jr(wd(new Date),"yyyy-MM-dd")),[a,s]=x.useState(jr(bd(new Date),"yyyy-MM-dd")),[o,l]=x.useState([]),[c,u]=x.useState([]),[d,f]=x.useState([]),[A,h]=x.useState([]),[m,p]=x.useState([]),[g,v]=x.useState([]),[y,b]=x.useState(!0),[w,P]=x.useState(""),[j,_]=x.useState([]),[I,E]=x.useState({}),[F,k]=x.useState({}),[B,R]=x.useState(!1),[Y,me]=x.useState(null),[pe,he]=x.useState([]),[ge,se]=x.useState(!1),[je,Te]=x.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0}),[D,K]=x.useState(!1),[z,Q]=x.useState(""),[J,ee]=x.useState([]),[M,G]=x.useState(!1),[ne,ve]=x.useState("CASH"),[V,qe]=x.useState(1),ie=10,[re,Fe]=x.useState(!1),[de,we]=x.useState(null);x.useEffect(()=>{(async()=>{try{const ye=await Lt(At(De,"sellers_candies")),Xe=[];ye.forEach(mt=>{const rt=mt.data();Xe.push({id:mt.id,name:rt.name||"",commissionPercent:Number(rt.commissionPercent||0)})}),_(Xe)}catch(ye){console.error("Error cargando sellers_candies",ye)}})()},[]);const Le=x.useMemo(()=>{const ye={};return j.forEach(Xe=>{ye[Xe.id]=Xe}),ye},[j]);x.useEffect(()=>{(async()=>{b(!0),P("");try{const ye=await Lt(At(De,"sales_candies")),Xe=[],mt=[];ye.forEach(X=>{const oe=X.data(),L=AQe(oe,X.id);L&&(L.date<=a&&Xe.push(L),L.date>=r&&L.date<=a&&mt.push(L))}),u(Xe),l(mt);const rt=await Lt(At(De,"inventory_candies")),ue=[];rt.forEach(X=>{const oe=X.data(),L=Wy(oe);if(!L||L>a)return;const Ae=Math.max(1,Math.floor(Number(oe.unitsPerPackage||1))),Ee=Number(oe.totalUnits??oe.quantity??0),Oe=Number(oe.packages??0),Be=Number(oe.remaining??0),S=Number(oe.remainingPackages??0),O=Oe>0?Oe:Ee>0?Math.floor(Ee/Ae):0,U=S>0?S:Be>0?Math.floor(Be/Ae):0;ue.push({id:X.id,productId:oe.productId,productName:oe.productName||"",date:L,quantity:Number(O||0),remaining:Number(U||0),purchasePrice:Number(oe.providerPrice||oe.purchasePrice||0),unitsPerPackage:Ae})}),f(ue);const _e=await Lt(At(De,"expenses_candies")),We=[];_e.forEach(X=>{const oe=X.data(),L=Wy(oe);L&&L>=r&&L<=a&&We.push({id:X.id,date:L,category:oe.category||"",description:oe.description||"",amount:Number(oe.amount||0),status:oe.status||""})}),h(We);const ot=await Lt(At(De,"ar_movements")),Ce=[],$e={};ot.forEach(X=>{const oe=X.data(),L=Wy(oe);if(!L)return;const Ae=oe.customerId,Ee=Number(oe.amount||0);Ae&&($e[Ae]=($e[Ae]||0)+Ee),oe.type==="ABONO"&&L>=r&&L<=a&&Ce.push({id:X.id,customerId:Ae,type:"ABONO",amount:Ee,date:L})}),p(Ce);const gt=await Lt(At(De,"customers_candies")),Kt=[];gt.forEach(X=>{const oe=X.data();Kt.push({id:X.id,name:oe.name||"",balance:$e[X.id]||0})}),v(Kt);const Ut=await Lt(At(De,"inventory_candies_sellers")),Jt={},it={};Ut.forEach(X=>{const oe=X.data(),L=Wy(oe);if(!L||L<r||L>a)return;const Ae=oe.sellerId||oe.vendorId||"NO_VENDOR",Ee=oe.productName||"",Oe=oe.sku||"",Be=Math.max(1,Math.floor(Number(oe.unitsPerPackage||1))),S=Number(oe.totalUnits??0),O=Number(oe.packages??0),U=Number(oe.remainingUnits??oe.remaining??0),q=Number(oe.remainingPackages??0),ae=O>0?O:S>0?Math.floor(S/Be):0,fe=q>0?q:U>0?Math.floor(U/Be):0,Ue=Number(oe.totalVendor??0),Ze=Number(oe.uVendor??0),lt=Number(oe.subtotal??0),Qe=Number(oe.uBruta??0),tt=ae,ut=tt>0?Ue/tt:0,Pt=tt>0?Ze/tt:0,Ct=tt>0?lt/tt:0,It=tt>0?Qe>0?Qe/tt:ut-Ct:0;if(Jt[Ae]||(Jt[Ae]={associated:[],remaining:[]}),ae>0){const St=ae,Zt=St*ut,Er=St*Ct,Nr=Zt,Dr=St*Pt,nn=St*It;Jt[Ae].associated.push({saleId:X.id,date:L,productId:oe.productId||oe.id||"",productName:Ee,sku:Oe,qty:St,unitPrice:ut,costTotal:Er,lineTotal:Zt,discount:0,lineFinal:Nr,grossProfit:nn,vendorCommissionAmount:Dr,type:"ASSOCIATED"}),it[Ae]=(it[Ae]||0)+St}if(fe>0){const St=fe,Zt=St*ut,Er=St*Ct,Nr=Zt,Dr=St*Pt,nn=St*It;Jt[Ae].remaining.push({saleId:X.id,date:L,productId:oe.productId||oe.id||"",productName:Ee,sku:Oe,qty:St,unitPrice:ut,costTotal:Er,lineTotal:Zt,discount:0,lineFinal:Nr,grossProfit:nn,vendorCommissionAmount:Dr,type:"REMAINING"})}}),E(Jt),k(it)}catch(ye){console.error(ye),P(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const Ge=x.useCallback((ye,Xe)=>{const mt=Number(Xe.vendorCommissionAmount||0)||0;if(mt>0)return mt;const rt=Number(ye.vendorCommissionAmount||0)||0;if(rt<=0)return 0;const ue=Number(Xe.qty||0),_e=Number(Xe.unitPrice||0),We=ue*_e,ot=Math.max(0,Number(Xe.discount||0)),Ce=Math.max(0,We-ot);return!Ce||!ye.total?0:rt*Ce/ye.total},[]),ft=x.useMemo(()=>{try{return mQe(d,c,r,a)}catch(ye){return console.error(ye),0}},[d,c,r,a]),ht=x.useMemo(()=>{const ye=o.reduce((Ut,Jt)=>Ut+(Jt.total||0),0),Xe=A.reduce((Ut,Jt)=>Ut+(Jt.amount||0),0),mt=ye-ft,rt=mt-Xe;let ue=0;for(const Ut of o)for(const Jt of Ut.items||[]){const it=Number(Jt.uBruta||0);Number.isFinite(it)&&(ue+=it)}const _e=m.reduce((Ut,Jt)=>Ut+Math.abs(Jt.amount||0),0),We=g.filter(Ut=>(Ut.balance||0)>0),ot=We.reduce((Ut,Jt)=>Ut+(Jt.balance||0),0);let Ce=0,$e=0,gt=0,Kt=0;for(const Ut of o){const Jt=(Ut.items||[]).reduce((X,oe)=>X+(Number(oe.qty)||0),0),it=(Ut.items||[]).reduce((X,oe)=>X+Ge(Ut,oe),0);Ut.type==="CONTADO"?(Ce+=Jt,gt+=it):($e+=Jt,Kt+=it)}return{ventasTotales:ye,costoMercaderia:ft,gastosPeriodo:Xe,gananciaAntes:mt,utilidadBrutaOrdenes:ue,gananciaDespues:rt,abonosRecibidos:_e,saldosPendientes:ot,clientesConSaldo:We.length,paquetesCash:Ce,paquetesCredito:$e,comisionCash:gt,comisionCredito:Kt}},[o,A,m,g,ft,Ge,I]),xt=x.useMemo(()=>{const ye={},Xe={};for(const mt of o)if(!(mt.type!=="CREDITO"||!mt.customerId))for(const rt of mt.items||[]){const ue=Number(rt.qty||0),_e=Number(rt.unitPrice||0),We=ue*_e,ot=Math.max(0,Number(rt.discount||0)),Ce=Math.max(0,We-ot);ye[mt.customerId]=(ye[mt.customerId]||0)+ue,Xe[mt.customerId]=(Xe[mt.customerId]||0)+Ce}return g.filter(mt=>(mt.balance||0)>0).map(mt=>({customerId:mt.id,name:mt.name,paquetesAsociados:ye[mt.id]||0,saldoTotal:Xe[mt.id]||0,saldoPendiente:mt.balance||0})).sort((mt,rt)=>rt.saldoPendiente-mt.saldoPendiente)},[g,o]),jt=x.useMemo(()=>{const ye={};return g.forEach(Xe=>ye[Xe.id]=Xe.name),ye},[g]),kt=x.useMemo(()=>[...o].sort((ye,Xe)=>Xe.date.localeCompare(ye.date)).map(ye=>{var ue;const Xe=(ye.items||[]).reduce((_e,We)=>_e+(Number(We.qty)||0),0);let mt="Cash";ye.type==="CREDITO"&&ye.customerId?mt=jt[ye.customerId]||"":ye.type==="CONTADO"&&(mt=((ue=ye.customerName)==null?void 0:ue.trim())||"Cash");const rt=Xe>0?ye.total/Xe:0;return{id:ye.id,date:ye.date,type:ye.type==="CREDITO"?"Crdito":"Cash",customer:mt,paquetes:Xe,total:Number(ye.total||0),avgPrice:rt}}),[o,jt]),wt=x.useMemo(()=>{var Xe,mt;const ye=new Map;for(const rt of o){const ue=rt.vendorId||"NO_VENDOR",_e=rt.vendorName||((Xe=Le[ue])==null?void 0:Xe.name)||"Sin vendedor";ye.has(ue)||ye.set(ue,{vendorId:ue,vendorName:_e,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0});const We=ye.get(ue);for(const ot of rt.items||[]){const Ce=Number(ot.qty||0),$e=Number(ot.unitPrice||0),gt=Ce*$e,Kt=Math.max(0,Number(ot.discount||0)),Ut=Math.max(0,gt-Kt),Jt=Ge(rt,ot);rt.type==="CONTADO"?(We.paquetesVendidos+=Ce,We.totalVendido+=Ut,We.comisionCash+=Jt):(We.paquetesFiados+=Ce,We.totalFiado+=Ut,We.comisionCredito+=Jt)}}for(const[rt,ue]of Object.entries(F)){const _e=ye.get(rt),We=(_e==null?void 0:_e.vendorName)||((mt=Le[rt])==null?void 0:mt.name)||"Sin vendedor",ot=_e||{vendorId:rt,vendorName:We,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0};ot.paquetesAsociados=ue,ot.paquetesRestantes=Math.max(ue-ot.paquetesVendidos-ot.paquetesFiados,0),ye.set(rt,ot)}return Array.from(ye.values()).sort((rt,ue)=>ue.totalVendido+ue.totalFiado-(rt.totalVendido+rt.totalFiado))},[o,F,Le,Ge]),Ve=async ye=>{R(!0),me({id:ye.customerId,name:ye.name}),he([]),se(!0),Te({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const Xe=[];let mt=0,rt=0,ue=0;for(const Ce of o)if(!(Ce.type!=="CREDITO"||Ce.customerId!==ye.customerId))for(const $e of Ce.items||[]){const gt=Number($e.qty||0),Kt=Number($e.unitPrice||0),Ut=gt*Kt,Jt=Math.max(0,Number($e.discount||0)),it=Math.max(0,Ut-Jt);Xe.push({saleId:Ce.id,date:Ce.date,productName:$e.productName,sku:$e.sku||"",qty:gt,unitPrice:Kt,lineTotal:Ut,discount:Jt,lineFinal:it}),mt+=Ut,rt+=Jt,ue+=it}let _e=0;for(const Ce of m)Ce.customerId===ye.customerId&&(_e+=Math.abs(Ce.amount||0));const We=g.find(Ce=>Ce.id===ye.customerId),ot=(We==null?void 0:We.balance)||0;he(Xe),Te({totalBruto:mt,totalDescuento:rt,totalFiado:ue,saldoActual:ot,abonadoPeriodo:_e})}catch(Xe){console.error(Xe),P(" No se pudo cargar el detalle del cliente.")}finally{se(!1)}},Pe=(ye,Xe,mt)=>{K(!0),ve(mt),qe(1);let rt="";mt==="ASSOCIATED"?rt=`Paquetes asociados  ${Xe}`:mt==="REMAINING"?rt=`Paquetes restantes  ${Xe}`:mt==="CASH"?rt=`Paquetes vendidos (Cash)  ${Xe}`:rt=`Paquetes fiados (Crdito)  ${Xe}`,Q(rt),ee([]),G(!0);try{if(mt==="ASSOCIATED"||mt==="REMAINING"){const _e=I[ye],We=mt==="ASSOCIATED"?(_e==null?void 0:_e.associated)||[]:(_e==null?void 0:_e.remaining)||[];ee([...We].sort((ot,Ce)=>(Ce.qty||0)-(ot.qty||0))),G(!1);return}const ue=[];for(const _e of o)if(((_e.vendorId||"NO_VENDOR")===ye||!_e.vendorId&&ye==="NO_VENDOR")&&!(mt==="CASH"&&_e.type!=="CONTADO")&&!(mt==="CREDIT"&&_e.type!=="CREDITO"))for(const ot of _e.items||[]){const Ce=Number(ot.qty||0),$e=Number(ot.unitPrice||0),gt=Ce*$e,Kt=Math.max(0,Number(ot.discount||0)),Ut=Math.max(0,gt-Kt),Jt=Ge(_e,ot);ue.push({saleId:_e.id,date:_e.date,productName:ot.productName,sku:ot.sku||"",qty:Ce,unitPrice:$e,lineTotal:gt,discount:Kt,lineFinal:Ut,vendorCommissionAmount:Jt,type:mt})}ee(ue.sort((_e,We)=>_e.date.localeCompare(We.date)))}catch(ue){console.error(ue),P(" No se pudo cargar el detalle del vendedor.")}finally{G(!1)}},be=x.useMemo(()=>ne!=="ASSOCIATED"&&ne!=="REMAINING"?1:Math.max(1,Math.ceil(J.length/ie)),[ne,J.length]),ce=x.useMemo(()=>{if(ne!=="ASSOCIATED"&&ne!=="REMAINING")return J;const ye=(V-1)*ie;return J.slice(ye,ye+ie)},[ne,V,J]),te=ne==="ASSOCIATED"||ne==="REMAINING"?10:8;x.useEffect(()=>{ne!=="ASSOCIATED"&&ne!=="REMAINING"||V>be&&qe(be)},[ne,V,be]);const Ne=ye=>{const Xe=o.find(mt=>mt.id===ye)||null;we(Xe),Fe(!0)},Re=async ye=>{if(window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{await U2(ye),await pQe(ye),l(Xe=>Xe.filter(mt=>mt.id!==ye)),u(Xe=>Xe.filter(mt=>mt.id!==ye)),Fe(!1),we(null)}catch(Xe){console.error(Xe),alert("No se pudo eliminar la venta. Revisa la consola para ms detalles.")}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Dulces)"}),i.jsx(xc,{onClick:e,loading:y})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:ye=>n(ye.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ye=>s(ye.target.value)})]})]}),i.jsx("div",{className:"md:hidden mb-4",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",open:!0,children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"KPIs"}),i.jsx("div",{className:"p-3",children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:cn(ht.utilidadBrutaOrdenes||0)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:cn(ht.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:ht.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:ht.paquetesCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),i.jsx("div",{className:"text-xl font-semibold",children:ht.paquetesCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.comisionCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.comisionCredito)})]})]})})]})}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:cn(ht.utilidadBrutaOrdenes||0)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:cn(ht.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:ht.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:ht.paquetesCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),i.jsx("div",{className:"text-xl font-semibold",children:ht.paquetesCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.comisionCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(ht.comisionCredito)})]})]}),i.jsx("div",{className:"md:hidden mb-6",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"Consolidado clientes y vendedores"}),i.jsxs("div",{className:"p-3",children:[i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border",children:"Saldo total"}),i.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):xt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):xt.map(ye=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ye.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ve({customerId:ye.customerId,name:ye.name}),title:"Ver paquetes fiados del periodo",children:ye.paquetesAsociados})}),i.jsx("td",{className:"p-2 border",children:cn(ye.saldoTotal)}),i.jsx("td",{className:"p-2 border font-semibold",children:cn(ye.saldoPendiente)})]},ye.customerId))})]})}),i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Consolidado vendedores"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):wt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):wt.map(ye=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ye.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Pe(ye.vendorId,ye.vendorName,"ASSOCIATED"),children:ye.paquetesAsociados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Pe(ye.vendorId,ye.vendorName,"REMAINING"),children:ye.paquetesRestantes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Pe(ye.vendorId,ye.vendorName,"CASH"),children:ye.paquetesVendidos})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:cn(ye.totalVendido)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:cn(ye.comisionCash)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Pe(ye.vendorId,ye.vendorName,"CREDIT"),children:ye.paquetesFiados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:cn(ye.totalFiado)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:cn(ye.comisionCredito)})]},ye.vendorId))})]})})]})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Paquetes asociados (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo total (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):xt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):xt.map(ye=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ye.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ve({customerId:ye.customerId,name:ye.name}),title:"Ver paquetes fiados del periodo",children:ye.paquetesAsociados})}),i.jsx("td",{className:"p-2 border",children:cn(ye.saldoTotal)}),i.jsx("td",{className:"p-2 border font-semibold",children:cn(ye.saldoPendiente)})]},ye.customerId))})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Consolidado vendedores"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):wt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):wt.map(ye=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ye.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Pe(ye.vendorId,ye.vendorName,"ASSOCIATED"),children:ye.paquetesAsociados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Pe(ye.vendorId,ye.vendorName,"REMAINING"),children:ye.paquetesRestantes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Pe(ye.vendorId,ye.vendorName,"CASH"),children:ye.paquetesVendidos})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:cn(ye.totalVendido)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:cn(ye.comisionCash)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Pe(ye.vendorId,ye.vendorName,"CREDIT"),children:ye.paquetesFiados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:cn(ye.totalFiado)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:cn(ye.comisionCredito)})]},ye.vendorId))})]})}),i.jsx("div",{className:"md:hidden mb-6",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"Transacciones y gastos"}),i.jsxs("div",{className:"p-3",children:[i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):kt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):kt.map(ye=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ye.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ye.customer}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ye.type}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ne(ye.id),children:ye.paquetes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:cn(ye.avgPrice)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:cn(ye.total)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>Re(ye.id),children:"Eliminar"})})]},ye.id))})]})}),i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((ye,Xe)=>ye.date.localeCompare(Xe.date)).map(ye=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ye.date}),i.jsx("td",{className:"p-2 border",children:ye.category||""}),i.jsx("td",{className:"p-2 border",children:ye.description?i.jsx("span",{title:ye.description,children:ye.description.length>40?ye.description.slice(0,40)+"":ye.description}):""}),i.jsx("td",{className:"p-2 border",children:cn(ye.amount)}),i.jsx("td",{className:"p-2 border",children:ye.status||""})]},ye.id))})]})})]})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):kt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):kt.map(ye=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ye.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ye.customer}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ye.type}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ne(ye.id),children:ye.paquetes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:cn(ye.avgPrice)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:cn(ye.total)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>Re(ye.id),children:"Eliminar"})})]},ye.id))})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((ye,Xe)=>ye.date.localeCompare(Xe.date)).map(ye=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ye.date}),i.jsx("td",{className:"p-2 border",children:ye.category||""}),i.jsx("td",{className:"p-2 border",children:ye.description?i.jsx("span",{title:ye.description,children:ye.description.length>40?ye.description.slice(0,40)+"":ye.description}):""}),i.jsx("td",{className:"p-2 border",children:cn(ye.amount)}),i.jsx("td",{className:"p-2 border",children:ye.status||""})]},ye.id))})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w}),B&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle cliente  ",(Y==null?void 0:Y.name)||""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>R(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total bruto (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(je.totalBruto)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(je.totalDescuento)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto total fiado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(je.totalFiado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(je.abonadoPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:cn(je.saldoActual)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha compra"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Descuento"}),i.jsx("th",{className:"p-2 border",children:"Monto final"})]})}),i.jsx("tbody",{children:ge?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):pe.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin paquetes fiados en el periodo."})}):pe.sort((ye,Xe)=>ye.date.localeCompare(Xe.date)).map((ye,Xe)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ye.date}),i.jsx("td",{className:"p-2 border",children:ye.productName}),i.jsx("td",{className:"p-2 border",children:ye.qty}),i.jsx("td",{className:"p-2 border",children:cn(ye.unitPrice)}),i.jsx("td",{className:"p-2 border",children:cn(ye.lineTotal)}),i.jsx("td",{className:"p-2 border",children:cn(ye.discount)}),i.jsx("td",{className:"p-2 border",children:cn(ye.lineFinal)})]},`${ye.saleId}-${Xe}`))})]})})]})}),D&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:z}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>K(!1),children:"Cerrar"})]}),(ne==="ASSOCIATED"||ne==="REMAINING")&&!M&&i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2 text-sm",children:[i.jsxs("div",{className:"text-gray-600",children:["Pgina ",V," de ",be]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded border bg-white hover:bg-gray-50 disabled:opacity-50",onClick:()=>qe(ye=>Math.max(1,ye-1)),disabled:V<=1,children:"Anterior"}),i.jsx("button",{className:"px-3 py-1 rounded border bg-white hover:bg-gray-50 disabled:opacity-50",onClick:()=>qe(ye=>Math.min(be,ye+1)),disabled:V>=be,children:"Siguiente"})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha Orden"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),ne==="ASSOCIATED"||ne==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"p-2 border",children:"Costo"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]}):i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Descuento"}),i.jsx("th",{className:"p-2 border",children:"Monto final"}),ne==="ASSOCIATED"||ne==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Utilidad vendedor"})]}):i.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),i.jsx("tbody",{children:M?i.jsx("tr",{children:i.jsx("td",{colSpan:te,className:"p-4 text-center",children:"Cargando"})}):J.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:te,className:"p-4 text-center",children:"Sin paquetes para este vendedor en el periodo."})}):ce.map((ye,Xe)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ye.date}),i.jsx("td",{className:"p-2 border",children:ye.productName}),i.jsx("td",{className:"p-2 border",children:ye.qty}),i.jsx("td",{className:"p-2 border",children:cn(ye.unitPrice)}),ne==="ASSOCIATED"||ne==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border",children:cn(ye.costTotal??0)}),i.jsx("td",{className:"p-2 border",children:cn(ye.lineTotal)})]}):i.jsx("td",{className:"p-2 border",children:cn(ye.lineTotal)}),i.jsx("td",{className:"p-2 border",children:cn(ye.discount)}),i.jsx("td",{className:"p-2 border",children:cn(ye.lineFinal)}),ne==="ASSOCIATED"||ne==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border",children:cn(ye.grossProfit||0)}),i.jsx("td",{className:"p-2 border",children:cn(ye.vendorCommissionAmount)})]}):i.jsx("td",{className:"p-2 border",children:cn(ye.vendorCommissionAmount)})]},`${ye.saleId}-${Xe}`))})]})})]})}),re&&de&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-4xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle de venta  ",de.date]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Fe(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto mb-3",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),i.jsx("tbody",{children:(de.items||[]).map((ye,Xe)=>{const mt=Number(ye.qty||0),rt=Number(ye.unitPrice||0),ue=mt*rt,_e=Ge(de,ye);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ye.productName}),i.jsx("td",{className:"p-2 border",children:mt}),i.jsx("td",{className:"p-2 border",children:cn(rt)}),i.jsx("td",{className:"p-2 border",children:cn(ue)}),i.jsx("td",{className:"p-2 border",children:cn(_e)})]},Xe)})})]})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-semibold",children:"Total venta:"}),cn(de.total)]}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>Re(de.id),children:"Eliminar venta"})]})]})})]})}const z$=["Rivas","Isla Ometepe","San Jorge"];function xQe(){const{refreshKey:t,refresh:e}=vc(),[r,n]=x.useState([]),[a,s]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState(!1),[d,f]=x.useState(""),[A,h]=x.useState("0"),[m,p]=x.useState("Rivas"),[g,v]=x.useState(null),[y,b]=x.useState(""),[w,P]=x.useState("0"),[j,_]=x.useState("Rivas");x.useEffect(()=>{(async()=>{s(!0),l("");try{const Y=er(At(De,"sellers_candies"),bn("name","asc")),me=await Lt(Y),pe=[];me.forEach(he=>{const ge=he.data();pe.push({id:he.id,name:ge.name||"",commissionPercent:Number(ge.commissionPercent||0),branch:ge.branch||"Rivas",createdAt:ge.createdAt||mr.now()})}),n(pe)}catch(Y){console.error(Y),l(" Error cargando vendedores.")}finally{s(!1)}})()},[t]);const I=()=>{f(""),h("0"),p("Rivas")},E=async Y=>{Y.preventDefault(),l("");const me=d.trim();if(!me){l("Ingresa el nombre y apellido del vendedor.");return}const pe=Number(A||0);if(pe<0){l("El margen no puede ser negativo.");return}try{const he={name:me,commissionPercent:pe,branch:m,createdAt:mr.now()},ge=await Hn(At(De,"sellers_candies"),he);n(se=>[{id:ge.id,...he},...se]),l(" Vendedor creado correctamente."),I(),u(!1)}catch(he){console.error(he),l(" Error al crear el vendedor.")}},F=Y=>{v(Y.id),b(Y.name),P(Y.commissionPercent.toString()),_(Y.branch)},k=()=>{v(null),b(""),P("0"),_("Rivas")},B=async()=>{if(!g)return;l("");const Y=y.trim();if(!Y){l("El nombre y apellido no pueden estar vacos.");return}const me=Number(w||0);if(me<0){l("El margen no puede ser negativo.");return}try{await Cn(Yt(De,"sellers_candies",g),{name:Y,commissionPercent:me,branch:j}),n(pe=>pe.map(he=>he.id===g?{...he,name:Y,commissionPercent:me,branch:j}:he)),l(" Vendedor actualizado."),k()}catch(pe){console.error(pe),l(" Error al actualizar el vendedor.")}},R=async Y=>{if(window.confirm(`Eliminar al vendedor "${Y.name}"? Esta accin no se puede deshacer.`))try{await Dn(Yt(De,"sellers_candies",Y.id)),n(pe=>pe.filter(he=>he.id!==Y.id)),l(" Vendedor eliminado.")}catch(pe){console.error(pe),l(" Error al eliminar el vendedor.")}};return i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Vendedores de Dulces"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(xc,{onClick:e,loading:a}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>u(!0),children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo vendedor"]})]})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo vendedor de dulces"}),i.jsxs("form",{onSubmit:E,className:"space-y-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre y apellido"}),i.jsx("input",{className:"w-full border p-2 rounded",value:d,onChange:Y=>f(Y.target.value),placeholder:"Ej: Juan Prez"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Margen del vendedor (% sobre U Aproximada)"}),i.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border p-2 rounded",value:A,onChange:Y=>h(Y.target.value),placeholder:"Ej: 30"}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Este porcentaje YA NO es comisin sobre venta. Se aplica as: U. Vendedor = U. Aproximada  (margen/100). U. Inversionista = U. Aproximada  U. Vendedor."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Sucursal"}),i.jsx("select",{className:"w-full border p-2 rounded",value:m,onChange:Y=>p(Y.target.value),children:z$.map(Y=>i.jsx("option",{value:Y,children:Y},Y))})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[i.jsx("button",{type:"button",onClick:()=>{I(),u(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar vendedor"})]})]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-3",children:i.jsxs("table",{className:"min-w-[700px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Nombre y apellido"}),i.jsx("th",{className:"p-2 border",children:"Margen (% U Aproximada)"}),i.jsx("th",{className:"p-2 border",children:"Sucursal"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):r.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin vendedores registrados."})}):r.map(Y=>{const me=g===Y.id;return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:me?i.jsx("input",{className:"border p-1 rounded text-xs w-full",value:y,onChange:pe=>b(pe.target.value)}):Y.name}),i.jsx("td",{className:"p-2 border",children:me?i.jsx("input",{type:"number",step:"0.01",min:0,className:"border p-1 rounded text-xs w-24 text-right",value:w,onChange:pe=>P(pe.target.value)}):`${Y.commissionPercent.toFixed(2)} %`}),i.jsx("td",{className:"p-2 border",children:me?i.jsx("select",{className:"border p-1 rounded text-xs",value:j,onChange:pe=>_(pe.target.value),children:z$.map(pe=>i.jsx("option",{value:pe,children:pe},pe))}):Y.branch}),i.jsx("td",{className:"p-2 border",children:me?i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:B,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:k,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs",onClick:()=>F(Y),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>R(Y),children:"Borrar"})]})})]},Y.id)})})]})}),o&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const _a=t=>Math.max(0,Math.floor(Number(t||0)));function SR(t){return Math.max(1,_a(t.unitsPerPackage||1))}function vQe(t){const e=Number(t.remaining);if(Number.isFinite(e)&&e>0)return Math.floor(e);const r=SR(t),n=Number(t.totalUnits||0),a=Number(t.quantity||0),s=Number(t.packages||0);return n>0?Math.floor(n):a>0?Math.floor(a):s>0?Math.floor(s*r):0}async function vse(t){const{orderId:e,productId:r}=t;let n=_a(t.packagesToReturn);if(!e||!r||n<=0)return;const a=er(At(De,"inventory_candies"),ur("orderId","==",e),ur("productId","==",r),bn("createdAt","asc")),s=await Lt(a);if(s.empty)return;const o=s.docs.map(l=>l.ref);await ki(De,async l=>{const c=await Promise.all(o.map(u=>l.get(u)));for(let u=0;u<o.length&&n>0;u++){const d=c[u];if(!d.exists())continue;const f=d.data(),A=SR(f),h=n*A,p=_a(f.remaining??0)+h,g=Math.floor(p/A);l.update(o[u],{remaining:p,remainingPackages:g,packages:g,updatedAt:mr.now()}),n=0}})}async function yse(t){const{orderId:e,productId:r}=t,n=_a(t.packagesToReturn);if(!e||!r||n<=0)return;const a=Yt(De,"candy_main_orders",e);await ki(De,async s=>{const o=await s.get(a);if(!o.exists())return;const l=o.data(),c=Array.isArray(l.items)?l.items:[];let u=!1;const d=c.map(f=>String((f==null?void 0:f.id)||"")!==String(r)?f:(u=!0,{...f,remainingPackages:_a(f.remainingPackages)+n}));u&&s.update(a,{items:d,updatedAt:mr.now()})})}function sF(t){if(!Array.isArray(t))return[];const e=[];for(const r of t){const n=String((r==null?void 0:r.batchId)||""),a=String((r==null?void 0:r.masterOrderId)||(r==null?void 0:r.orderId)||""),s=_a((r==null?void 0:r.units)??(r==null?void 0:r.qty)??(r==null?void 0:r.quantity)??0),o=Math.max(1,_a((r==null?void 0:r.unitsPerPackage)||1));!n||!a||s<=0||e.push({batchId:n,masterOrderId:a,units:s,unitsPerPackage:o})}return e}function Q2(t,e){const r=_a(t),n=Math.max(1,_a(e));return Math.floor(r/n)}async function yQe(t){const e=String(t.productId||"");let r=_a(t.packagesToAllocate);if(!e||r<=0)return{allocations:[]};const n=er(At(De,"inventory_candies"),ur("productId","==",e)),a=await Lt(n);if(a.empty)throw new Error("No hay inventario para este producto.");const o=a.docs.map(c=>({id:c.id,data:c.data()})).sort((c,u)=>{var m,p;const d=String(c.data.date||""),f=String(u.data.date||"");if(d!==f)return d<f?-1:1;const A=((m=c.data.createdAt)==null?void 0:m.seconds)??0,h=((p=u.data.createdAt)==null?void 0:p.seconds)??0;return A-h}).map(c=>Yt(De,"inventory_candies",c.id)),l=[];return await ki(De,async c=>{const u=await Promise.all(o.map(g=>c.get(g))),d=[];let f=r;for(let g=0;g<o.length&&f>0;g++){const v=o[g],y=u[g];if(!y.exists())continue;const b=y.data(),w=SR(b),P=vQe(b);if(P<=0)continue;const j=Math.floor(P/w);if(j<=0)continue;const _=Math.min(j,f),I=_*w,E=Math.max(0,P-I),F=Math.floor(E/w),k=String(b.orderId||"");if(!k)throw new Error("Lote sin orderId (orden maestra).");l.push({batchId:v.id,masterOrderId:k,units:I,unitsPerPackage:w}),d.push({ref:v,newRemUnits:E,newRemPacks:F}),f-=_}if(f>0)throw new Error(`Inventario insuficiente. Faltan ${f} paquetes.`);const A={};for(const g of l){const v=Q2(g.units,g.unitsPerPackage);A[g.masterOrderId]=(A[g.masterOrderId]||0)+v}const h=Object.keys(A),m=h.map(g=>Yt(De,"candy_main_orders",g)),p=await Promise.all(m.map(g=>c.get(g)));for(let g=0;g<d.length;g++){const v=d[g];c.update(v.ref,{remaining:v.newRemUnits,remainingPackages:v.newRemPacks,packages:v.newRemPacks,updatedAt:mr.now()})}for(let g=0;g<m.length;g++){const v=p[g];if(!v.exists())throw new Error("Orden maestra no existe.");const y=v.data(),b=Array.isArray(y.items)?y.items:[],w=_a(A[h[g]]||0);if(w<=0)continue;let P=!1;const j=b.map(_=>{if(String((_==null?void 0:_.id)||"")!==e)return _;const I=_a(_.remainingPackages);if(I<w)throw new Error("Orden maestra sin paquetes suficientes.");return P=!0,{..._,remainingPackages:I-w}});P&&c.update(m[g],{items:j,updatedAt:mr.now()})}}),{allocations:l}}async function bQe(t){const e=String(t.vendorInventoryId||"");let r=_a(t.packagesToReturn);if(!e)throw new Error("vendorInventoryId requerido");if(r<=0)return{restoredPackages:0,mode:"noop"};const n=Yt(De,"inventory_candies_sellers",e),a=await ei(n);if(!a.exists())throw new Error("No existe la orden del vendedor");const s=a.data(),o=String(s.productId||"");if(!o)throw new Error("La orden del vendedor no tiene productId");if(!sF(s.masterAllocations||s.allocations||s.allocationsByBatch).length){const u=String(s.orderId||"");if(!u)throw new Error("La orden del vendedor no tiene orderId");return await vse({orderId:u,productId:o,packagesToReturn:r}),await yse({orderId:u,productId:o,packagesToReturn:r}),{restoredPackages:r,mode:"legacy"}}let c=0;return await ki(De,async u=>{const d=await u.get(n);if(!d.exists())throw new Error("No existe la orden del vendedor");const f=d.data(),A=String(f.productId||"");if(!A)throw new Error("Doc vendedor sin productId");let h=sF(f.masterAllocations||f.allocations||f.allocationsByBatch);if(!h.length)throw new Error("No hay masterAllocations guardadas en este doc (no se puede restaurar blindado).");const m=[];let p=r;for(let E=h.length-1;E>=0&&p>0;E--){const F=h[E],k=Math.max(1,_a(F.unitsPerPackage||1)),B=Q2(F.units,k);if(B<=0)continue;const R=Math.min(B,p),Y=R*k;m.push({batchId:F.batchId,masterOrderId:F.masterOrderId,units:Y,unitsPerPackage:k}),p-=R}const g=r-p;if(g<=0)return;c=g;const v=m.map(E=>Yt(De,"inventory_candies",E.batchId)),y={};for(const E of m){const F=Q2(E.units,E.unitsPerPackage);F>0&&(y[E.masterOrderId]=(y[E.masterOrderId]||0)+F)}const w=Object.keys(y).map(E=>Yt(De,"candy_main_orders",E)),[P,j]=await Promise.all([Promise.all(v.map(E=>u.get(E))),Promise.all(w.map(E=>u.get(E)))]);for(let E=0;E<m.length;E++){const F=m[E],k=P[E];if(!k.exists())continue;const B=k.data(),R=Math.max(1,_a(F.unitsPerPackage||B.unitsPerPackage||1)),Y=_a(F.units),pe=_a(B.remaining??0)+Y,he=Math.floor(pe/R);u.update(v[E],{remaining:pe,remainingPackages:he,packages:he,updatedAt:mr.now()})}for(let E=0;E<w.length;E++){const F=j[E];if(!F.exists())continue;const k=w[E].id,B=_a(y[k]||0);if(B<=0)continue;const R=F.data(),Y=Array.isArray(R.items)?R.items:[];let me=!1;const pe=Y.map(he=>String((he==null?void 0:he.id)||"")!==String(A)?he:(me=!0,{...he,remainingPackages:_a(he.remainingPackages)+B}));me&&u.update(w[E],{items:pe,updatedAt:mr.now()})}const _=new Map;for(const E of m){const F=`${E.batchId}__${E.masterOrderId}__${E.unitsPerPackage}`;_.set(F,(_.get(F)||0)+_a(E.units))}const I=[];for(const E of h){const F=Math.max(1,_a(E.unitsPerPackage||1)),k=`${E.batchId}__${E.masterOrderId}__${F}`,B=_a(_.get(k)||0);if(B<=0){I.push(E);continue}const Y=_a(E.units)-B;Y>0&&I.push({...E,units:Y,unitsPerPackage:F}),_.delete(k)}u.update(n,{masterAllocations:I,updatedAt:mr.now()})}),{restoredPackages:c,mode:"blind"}}async function W$(t){if(!t)throw new Error("vendorInventoryId requerido");const e=Yt(De,"inventory_candies_sellers",t),r=await ei(e);if(!r.exists())throw new Error("No existe la orden del vendedor");const n=r.data(),a=String(n.productId||""),s=_a(n.packages||n.remainingPackages||0),o=sF(n.masterAllocations||n.allocations||n.allocationsByBatch);if(!o.length){const c=String(n.orderId||"");if(!c)throw new Error("La orden del vendedor no tiene orderId");if(!a)throw new Error("La orden del vendedor no tiene productId");return s<=0?(await ki(De,async u=>{u.delete(e)}),{restoredPackages:0,mode:"legacy"}):(await vse({orderId:c,productId:a,packagesToReturn:s}),await yse({orderId:c,productId:a,packagesToReturn:s}),await ki(De,async u=>{u.delete(e)}),{restoredPackages:s,mode:"legacy"})}let l=0;return await ki(De,async c=>{const u={};for(const g of o){const v=Math.max(1,_a(g.unitsPerPackage||1)),y=_a(g.units),b=Q2(y,v);b>0&&(u[g.masterOrderId]=(u[g.masterOrderId]||0)+b)}const d=o.map(g=>Yt(De,"inventory_candies",g.batchId)),A=Object.keys(u).map(g=>Yt(De,"candy_main_orders",g)),[h,m]=await Promise.all([Promise.all(d.map(g=>c.get(g))),Promise.all(A.map(g=>c.get(g)))]);let p=0;for(let g=0;g<o.length;g++){const v=o[g],y=h[g];if(!y.exists())continue;const b=y.data(),w=Math.max(1,_a(v.unitsPerPackage||b.unitsPerPackage||1)),P=_a(v.units),_=_a(b.remaining??0)+P,I=Math.floor(_/w);c.update(d[g],{remaining:_,remainingPackages:I,packages:I,updatedAt:mr.now()});const E=Q2(P,w);E>0&&(p+=E)}for(let g=0;g<A.length;g++){const v=m[g];if(!v.exists())continue;const y=A[g].id,b=_a(u[y]||0);if(b<=0)continue;const w=v.data(),P=Array.isArray(w.items)?w.items:[];let j=!1;const _=P.map(I=>String((I==null?void 0:I.id)||"")!==String(a)?I:(j=!0,{...I,remainingPackages:_a(I.remainingPackages)+b}));j&&c.update(A[g],{items:_,updatedAt:mr.now()})}c.delete(e),l=p}),{restoredPackages:l,mode:"blind"}}const G5=t=>`C$ ${(Number(t)||0).toFixed(2)}`,bse=(t,e)=>`${t}__${e}`,wQe=t=>t?typeof t=="string"?t:t!=null&&t.seconds?new Date(t.seconds*1e3).toISOString().slice(0,10):t!=null&&t.toDate?t.toDate().toISOString().slice(0,10):"":"",NQe=t=>{const e=t.sellerId||"",r=wQe(t.date);return e&&r?bse(e,r):t.orderId?t.orderId:t.id},X$=(t,e=!1)=>{if(!t)return null;const r=new Date(t);return Number.isNaN(r.getTime())?null:(e?r.setHours(23,59,59,999):r.setHours(0,0,0,0),r)},CQe=t=>{var e,r;if((e=t.createdAt)!=null&&e.toDate)return t.createdAt.toDate();if((r=t.createdAt)!=null&&r.seconds)return new Date(t.createdAt.seconds*1e3);if(t.date){const n=new Date(t.date);if(!Number.isNaN(n.getTime()))return n}return null},Y$=t=>{const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"},iF=t=>{const e=Number(t||0);return!isFinite(e)||e<0?0:e},J$=(t,e)=>{const r=iF(e),n=Number(t||0)*(r/100),a=Number(t||0)-n;return{vendorMarginPercent:r,uVendor:n,uInvestor:a}},Z$=(t,e)=>e?e==="RIVAS"?t.unitPriceRivas||0:e==="SAN_JORGE"?t.unitPriceSanJorge||0:t.unitPriceIsla||0:t.unitPriceIsla||0,eG=(t,e)=>e?e==="RIVAS"?t.grossProfitPerPackRivas||0:e==="SAN_JORGE"?t.grossProfitPerPackSanJorge||0:t.grossProfitPerPackIsla||0:t.grossProfitPerPackIsla||0,tG=(t,e)=>e?e==="RIVAS"?t.uApproxPerPackRivas||0:e==="SAN_JORGE"?t.uApproxPerPackSanJorge||0:t.uApproxPerPackIsla||0:t.uApproxPerPackIsla||0;function _Qe({open:t,onClose:e,orders:r,rows:n,setRows:a,isAdmin:s,currentUserEmail:o,currentUserName:l,sellerCandyId:c,sellers:u,products:d,transferAgg:f,setTransferAgg:A,setTransferRowDeltas:h}){const[m,p]=x.useState(!1),[g,v]=x.useState([]),[y,b]=x.useState(""),[w,P]=x.useState(""),[j,_]=x.useState(""),[I,E]=x.useState(""),[F,k]=x.useState("0"),[B,R]=x.useState(""),[Y,me]=x.useState(!1),[pe,he]=x.useState(""),[ge,se]=x.useState(!1),[je,Te]=x.useState(""),[D,K]=x.useState(()=>new Date().toISOString().slice(0,10)),[z,Q]=x.useState(""),[J,ee]=x.useState(()=>{const Pe=new Date;return new Date(Pe.getFullYear(),Pe.getMonth(),1).toISOString().slice(0,10)}),[M,G]=x.useState(()=>new Date().toISOString().slice(0,10)),ne=x.useMemo(()=>{const Pe={};return u.forEach(be=>{Pe[be.id]=be}),Pe},[u]),ve=x.useMemo(()=>{const Pe={};return d.forEach(be=>{Pe[be.id]=be}),Pe},[d]),V=je&&ne[je]||null,qe=x.useMemo(()=>r.map(Pe=>Pe.orderKey),[r]),ie=x.useMemo(()=>{const Pe={};return r.forEach(be=>Pe[be.orderKey]=be),Pe},[r]),re=n,Fe=x.useMemo(()=>{const Pe={};return re.forEach(be=>{const ce=NQe(be),te=new Set;ce&&te.add(ce),be.orderId&&te.add(String(be.orderId)),te.add(be.id),te.forEach(Ne=>{Pe[Ne]||(Pe[Ne]=[]),Pe[Ne].push(be)})}),Pe},[re]),de=x.useMemo(()=>y?Fe[y]||[]:[],[Fe,y]),we=x.useMemo(()=>de.filter(Pe=>{const be=Pe.remainingPackages??Pe.remaining??Pe.packages??0;return Number(be||0)>0}),[de]),Le=x.useMemo(()=>{const Pe=z.trim().toLowerCase();return Pe?we.filter(be=>`${be.category||""} ${be.productName||""}`.toLowerCase().trim().includes(Pe)):we},[we,z]),Ge=x.useMemo(()=>w&&re.find(Pe=>Pe.id===w)||null,[re,w]),ft=x.useMemo(()=>{if(Ge!=null&&Ge.sellerId)return Ge.sellerId;const Pe=ie[y];return(Pe==null?void 0:Pe.sellerId)||""},[Ge,ie,y]),ht=x.useMemo(()=>j?Fe[j]||[]:[],[Fe,j]),xt=x.useMemo(()=>Ge?ht.filter(Pe=>Pe.productId===Ge.productId):[],[ht,Ge]),jt=async()=>{try{p(!0);let Pe=[];if(!s&&c){const be=er(At(De,"inventory_transfers_candies"),ur("fromSellerId","==",c),bn("createdAt","desc")),ce=er(At(De,"inventory_transfers_candies"),ur("toSellerId","==",c),bn("createdAt","desc")),[te,Ne]=await Promise.all([Lt(be),Lt(ce)]),Re=new Set,ye=Xe=>{Xe.forEach(mt=>{if(Re.has(mt.id))return;Re.add(mt.id);const rt=mt.data();Pe.push({id:mt.id,...rt})})};ye(te),ye(Ne),Pe.sort((Xe,mt)=>{var _e,We;const rt=((_e=Xe.createdAt)==null?void 0:_e.seconds)||0;return(((We=mt.createdAt)==null?void 0:We.seconds)||0)-rt})}else{const be=er(At(De,"inventory_transfers_candies"),bn("createdAt","desc"));(await Lt(be)).forEach(te=>{const Ne=te.data();Pe.push({id:te.id,...Ne})})}v(Pe)}catch{he(" Error cargando traslados.")}finally{p(!1)}};x.useEffect(()=>{t&&jt()},[t]);const kt=x.useMemo(()=>{const Pe=X$(J),be=X$(M,!0);return g.filter(ce=>{const te=CQe(ce);return te?!(Pe&&te<Pe||be&&te>be):!0})},[g,J,M]);x.useEffect(()=>{Q("")},[y]),x.useEffect(()=>{if(ge){if(!je){const Pe=ie[y];Pe!=null&&Pe.sellerId&&Te(Pe.sellerId)}D||K(new Date().toISOString().slice(0,10))}},[ge,je,D,ie,y]);const wt=()=>{b(""),P(""),_(""),E(""),k("0"),R(""),se(!1),Te(""),K(new Date().toISOString().slice(0,10))},Ve=async()=>{if(!s){he("No tienes permiso para hacer traslados.");return}he("");const Pe=Number(F||0);if(!(Pe>0)){he("La cantidad de paquetes debe ser mayor a 0.");return}if(!B.trim()){he("Debes escribir el motivo de la movida.");return}if(!y||!w){he("Selecciona el pedido origen y el producto.");return}const be=ge;if(!be&&!j){he("Selecciona el pedido destino.");return}if(be){if(!je){he("Selecciona el vendedor de la nueva orden.");return}if(!D){he("Selecciona la fecha de la nueva orden.");return}}const ce=!be&&j&&ie[j]||null;if(!be&&!ce){he("Selecciona un pedido destino vlido.");return}const te=ce?ne[ce.sellerId]||{id:ce.sellerId||"",name:ce.sellerName||"",email:ce.sellerEmail||"",branch:ce.branch,branchLabel:ce.branchLabel,commissionPercent:ce.vendorMarginPercent??ce.commissionPercent??0}:null,Ne=n.find(Ce=>Ce.id===w)||null,Re=!be&&I&&n.find(Ce=>Ce.id===I)||null;if(!Ne){he("No se encontr la fila origen/destino.");return}if(!be&&Re&&w===I){he("Origen y destino no pueden ser el mismo.");return}if(!be&&Re&&Ne.productId!==Re.productId){he("El producto destino no coincide con el producto origen.");return}if(Number(Ne.remainingPackages||0)<Pe){he("El origen no tiene suficientes paquetes disponibles.");return}const ye=be?V:null;if(be&&!ye){he("Selecciona un vendedor destino vlido.");return}const Xe=ve[Ne.productId]||null,mt=be?Y$((ye==null?void 0:ye.branch)||(ye==null?void 0:ye.branchLabel)):void 0,rt=!be&&!I&&!!ce,ue=be||rt;let _e=null,We=null,ot="";if(be&&ye){const Ce=iF(ye.commissionPercent??0),$e=mt,gt=Number((Xe==null?void 0:Xe.unitsPerPackage)??Ne.unitsPerPackage??0),Kt=gt>0?gt*Pe:0;Xe?Z$(Xe,$e):Number(Ne.unitPriceRivas||Ne.unitPriceIsla||0);const Jt=(Xe?eG(Xe,$e):Number(Ne.grossProfit||0)/Math.max(1,Ne.packages||1))*Pe,it=Xe?Number(Xe.logisticAllocatedPerPack||0)*Pe:Number(Ne.logisticAllocated||0),oe=(Xe?tG(Xe,$e):Number(Ne.uAproximada||0)/Math.max(1,Ne.packages||1))*Pe,L=J$(Jt,Ce),Ae=Number(Jt||0)-Number(it||0)-Number(L.uVendor||0),Ee=((Xe==null?void 0:Xe.unitPriceRivas)||Ne.unitPriceRivas||0)*Pe,Oe=((Xe==null?void 0:Xe.unitPriceSanJorge)||Ne.unitPriceSanJorge||0)*Pe,Be=((Xe==null?void 0:Xe.unitPriceIsla)||Ne.unitPriceIsla||0)*Pe;ot=bse(ye.id,D),_e={sellerId:ye.id,sellerName:ye.name,sellerEmail:ye.email||"",branch:$e||"",branchLabel:ye.branchLabel||"",productId:Ne.productId,productName:Ne.productName,category:Ne.category,orderId:ot,date:D,packages:Pe,unitsPerPackage:gt,totalUnits:Kt,remainingPackages:Pe,remainingUnits:Kt,totalRivas:Ee,totalSanJorge:Oe,totalIsla:Be,unitPriceRivas:(Xe==null?void 0:Xe.unitPriceRivas)||Ne.unitPriceRivas||0,unitPriceSanJorge:(Xe==null?void 0:Xe.unitPriceSanJorge)||Ne.unitPriceSanJorge||0,unitPriceIsla:(Xe==null?void 0:Xe.unitPriceIsla)||Ne.unitPriceIsla||0,grossProfit:Jt,logisticAllocated:it,vendorMarginPercent:L.vendorMarginPercent,uVendor:L.uVendor,uInvestor:L.uInvestor,uAproximada:oe,uNeta:Ae,providerPrice:Ne.providerPrice,transferDelta:0}}if(rt&&ce){const Ce=iF((te==null?void 0:te.commissionPercent)??ce.vendorMarginPercent??0),$e=Y$((te==null?void 0:te.branch)||(te==null?void 0:te.branchLabel)||ce.branch||ce.branchLabel),gt=Number((Xe==null?void 0:Xe.unitsPerPackage)??Ne.unitsPerPackage??0),Kt=gt>0?gt*Pe:0;Xe?Z$(Xe,$e):Number(Ne.unitPriceRivas||Ne.unitPriceIsla||0);const Jt=(Xe?eG(Xe,$e):Number(Ne.grossProfit||0)/Math.max(1,Ne.packages||1))*Pe,it=Xe?Number(Xe.logisticAllocatedPerPack||0)*Pe:Number(Ne.logisticAllocated||0),oe=(Xe?tG(Xe,$e):Number(Ne.uAproximada||0)/Math.max(1,Ne.packages||1))*Pe,L=J$(Jt,Ce),Ae=Number(Jt||0)-Number(it||0)-Number(L.uVendor||0),Ee=((Xe==null?void 0:Xe.unitPriceRivas)||Ne.unitPriceRivas||0)*Pe,Oe=((Xe==null?void 0:Xe.unitPriceSanJorge)||Ne.unitPriceSanJorge||0)*Pe,Be=((Xe==null?void 0:Xe.unitPriceIsla)||Ne.unitPriceIsla||0)*Pe;We={sellerId:ce.sellerId,sellerName:(te==null?void 0:te.name)||ce.sellerName||"",sellerEmail:(te==null?void 0:te.email)||ce.sellerEmail||"",branch:$e||ce.branch||"",branchLabel:(te==null?void 0:te.branchLabel)||ce.branchLabel||"",productId:Ne.productId,productName:Ne.productName,category:Ne.category,orderId:ce.orderKey||j,date:ce.date||new Date().toISOString().slice(0,10),packages:Pe,unitsPerPackage:gt,totalUnits:Kt,remainingPackages:Pe,remainingUnits:Kt,totalRivas:Ee,totalSanJorge:Oe,totalIsla:Be,unitPriceRivas:(Xe==null?void 0:Xe.unitPriceRivas)||Ne.unitPriceRivas||0,unitPriceSanJorge:(Xe==null?void 0:Xe.unitPriceSanJorge)||Ne.unitPriceSanJorge||0,unitPriceIsla:(Xe==null?void 0:Xe.unitPriceIsla)||Ne.unitPriceIsla||0,grossProfit:Jt,logisticAllocated:it,vendorMarginPercent:L.vendorMarginPercent,uVendor:L.uVendor,uInvestor:L.uInvestor,uAproximada:oe,uNeta:Ae,providerPrice:Ne.providerPrice,transferDelta:0}}try{me(!0);const Ce=Yt(De,"inventory_candies_sellers",Ne.id),$e=be||rt?Yt(At(De,"inventory_candies_sellers")):Yt(De,"inventory_candies_sellers",Re.id),gt=mr.now(),Kt=new Date().toISOString().slice(0,10);let Ut=null;await ki(De,async Jt=>{const it=await Jt.get(Ce);if(!it.exists())throw new Error("Orden origen no existe.");const X=it.data(),oe=Number(X.remainingPackages||0);if(oe<Pe)throw new Error("Origen no tiene suficientes paquetes.");let L=null;if(!be&&!rt){const O=await Jt.get($e);if(!O.exists())throw new Error("Orden destino no existe.");L=O.data()}const Ae=Number(X.unitsPerPackage||Ne.unitsPerPackage||0),Ee=Ae>0?Pe*Ae:0,Oe=Number(X.transferDelta||0);Jt.update(Ce,{packages:Math.max(0,Number(X.packages||0)-Pe),remainingPackages:oe-Pe,...Ae>0?{remainingUnits:Number(X.remainingUnits||0)-Ee}:{},updatedAt:gt,transferDelta:Oe-Pe});let Be=null;if(be){const O={..._e,createdAt:gt,updatedAt:gt,remainingPackages:Pe,remainingUnits:Number((_e==null?void 0:_e.unitsPerPackage)||0)>0?Pe*Number((_e==null?void 0:_e.unitsPerPackage)||0):_e==null?void 0:_e.remainingUnits,transferDelta:0};Jt.set($e,O),Be=O,Ut={id:$e.id,...O}}else if(rt&&We){const O={...We,createdAt:gt,updatedAt:gt,remainingPackages:Pe,remainingUnits:Number(We.unitsPerPackage||0)>0?Pe*Number(We.unitsPerPackage||0):We.remainingUnits,transferDelta:0};Jt.set($e,O),Be=O,Ut={id:$e.id,...O}}else{const O=L,U=Number(O.unitsPerPackage||Ne.unitsPerPackage||0),q=U>0?Pe*U:0,ae=Number(O.transferDelta||0);Jt.update($e,{packages:Math.max(0,Number(O.packages||0)+Pe),remainingPackages:Number(O.remainingPackages||0)+Pe,...U>0?{remainingUnits:Number(O.remainingUnits||0)+q}:{},updatedAt:gt,transferDelta:ae+Pe}),Be={...O,remainingPackages:Number(O.remainingPackages||0)+Pe,remainingUnits:U>0?Number(O.remainingUnits||0)+q:O.remainingUnits,sellerId:O.sellerId,sellerName:O.sellerName,orderId:O.orderId||(Re==null?void 0:Re.id)||"",transferDelta:ae+Pe}}const S=Yt(At(De,"inventory_transfers_candies"));Jt.set(S,{createdAt:gt,date:Kt,createdByEmail:(o||"").trim(),createdByName:String(l||"").trim(),productId:String(X.productId||""),productName:String(X.productName||""),packagesMoved:Pe,providerPrice:Number(X.providerPrice||0),unitPriceRivas:Number(X.unitPriceRivas||0),unitPriceIsla:Number(X.unitPriceIsla||0),fromSellerId:String(X.sellerId||""),fromSellerName:String(X.sellerName||""),fromOrderKey:String(X.orderId||Ne.id||""),fromOrderLabel:String(X.orderId||Ne.id||""),toSellerId:be?(ye==null?void 0:ye.id)||"":String((Be==null?void 0:Be.sellerId)||""),toSellerName:be?(ye==null?void 0:ye.name)||"":String((Be==null?void 0:Be.sellerName)||""),toOrderKey:be?ot:String((Be==null?void 0:Be.orderId)||j||""),toOrderLabel:be?ot:String((Be==null?void 0:Be.orderId)||j||""),fromVendorRowId:Ne.id,toVendorRowId:be||rt?$e.id:Re.id,comment:B.trim(),destRowWasNew:ue})}),a(Jt=>{const it=Jt.reduce((X,oe)=>{if(oe.id===Ne.id){const L=Number(oe.unitsPerPackage||0),Ae=L>0?Pe*L:0;return X.push({...oe,packages:Math.max(0,Number(oe.packages||0)-Pe),remainingPackages:Number(oe.remainingPackages||0)-Pe,remainingUnits:L>0?Number(oe.remainingUnits||0)-Ae:oe.remainingUnits,transferDelta:Number(oe.transferDelta||0)-Pe}),X}if(!be&&Re&&oe.id===Re.id){const L=Number(oe.unitsPerPackage||0),Ae=L>0?Pe*L:0;return X.push({...oe,packages:Math.max(0,Number(oe.packages||0)+Pe),remainingPackages:Number(oe.remainingPackages||0)+Pe,remainingUnits:L>0?Number(oe.remainingUnits||0)+Ae:oe.remainingUnits,transferDelta:Number(oe.transferDelta||0)+Pe}),X}return X.push(oe),X},[]);return Ut?[...it,Ut]:it}),await jt(),A(Jt=>{const it={...Jt},X=y,oe=be?ot:j;return X&&(it[X]=it[X]||{out:0,in:0},it[X].out+=Pe),oe&&(it[oe]=it[oe]||{out:0,in:0},it[oe].in+=Pe),it}),h(Jt=>{const it={...Jt};if(Ne.id&&(it[Ne.id]=(it[Ne.id]||0)-Pe),!ue){const X=rt||be?Ut==null?void 0:Ut.id:Re==null?void 0:Re.id;X&&(it[X]=(it[X]||0)+Pe)}return it}),wt(),he(" Traslado realizado.")}catch(Ce){he((Ce==null?void 0:Ce.message)||" Error realizando el traslado.")}finally{me(!1)}};return t?i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[55]",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-7xl max-h-[90vh] overflow-y-auto text-sm relative",children:[Y&&i.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:i.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando traslado..."})}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Traslado de paquetes"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{e(),wt()},type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[i.jsx("div",{className:"text-sm font-semibold mb-2",children:"Crear traslado (requiere motivo)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pedido origen"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:y,onChange:Pe=>{b(Pe.target.value),P(""),_(""),E(""),k("0")},disabled:!s,children:[i.jsx("option",{value:"",children:"Selecciona"}),qe.map(Pe=>{const be=ie[Pe];return i.jsxs("option",{value:Pe,children:["Vendedor: ",(be==null?void 0:be.sellerName)||"","  Existencias:"," ",(be==null?void 0:be.totalRemainingPackages)||"0"," Paquetes - Fecha Orden:"," ",(be==null?void 0:be.date)||""]},Pe)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (desde el pedido origen)"}),i.jsx("input",{type:"text",className:"mt-1 mb-2 w-full border p-2 rounded text-sm",placeholder:"Buscar producto...",value:z,onChange:Pe=>Q(Pe.target.value),disabled:!s||!y}),i.jsxs("select",{className:"w-full border p-2 rounded",value:w,onChange:Pe=>{P(Pe.target.value),_(""),E(""),k("0")},disabled:!s||!y,children:[i.jsx("option",{value:"",children:"Selecciona"}),Le.map(Pe=>i.jsxs("option",{value:Pe.id,children:[Pe.productName,"  Existencias:"," ",Number(Pe.remainingPackages??Pe.packages??0)," Paquetes - Precio Costo: $",Pe.providerPrice]},Pe.id))]})]}),!ge&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pedido destino"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:j,onChange:Pe=>{_(Pe.target.value),E("")},disabled:!s||!w,children:[i.jsx("option",{value:"",children:"Selecciona"}),qe.filter(Pe=>Pe!==y).map(Pe=>{const be=ie[Pe];return i.jsxs("option",{value:Pe,children:["Vendedor: ",(be==null?void 0:be.sellerName)||"","  Existencias:"," ",(be==null?void 0:be.totalRemainingPackages)||"0"," - Fecha Orden:"," ",(be==null?void 0:be.date)||""]},Pe)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto destino (mismo producto)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:I,onChange:Pe=>E(Pe.target.value),disabled:!s||!j||!Ge,children:[i.jsx("option",{value:"",children:"Selecciona"}),xt.map(Pe=>i.jsxs("option",{value:Pe.id,children:["Tipo: ",Pe.category," - ",Pe.productName,"  Existencias:"," ",Number(Pe.remainingPackages??Pe.packages??0),"Paquetes - Precio Costo: $",Pe.providerPrice]},Pe.id))]}),j&&Ge&&xt.length===0&&i.jsx("div",{className:"text-xs text-red-600 mt-1",children:" El pedido destino no tiene este producto. Si dejas este campo vaco se crear automticamente al moverlo."}),j&&i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este campo es opcional; salo solo si el pedido ya tiene el producto y quieres sumar a esa fila."})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:ge,onChange:Pe=>{const be=Pe.target.checked;se(be),be&&(_(""),E(""))},disabled:!s}),i.jsx("span",{className:"text-sm font-semibold",children:"Crear nueva orden destino (independiente)"})]}),ge&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor destino (nueva orden)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:je,onChange:Pe=>Te(Pe.target.value),disabled:!s,children:[i.jsx("option",{value:"",children:"Selecciona"}),u.map(Pe=>i.jsxs("option",{value:Pe.id,disabled:Pe.id===ft,children:[Pe.name,Pe.id===ft?" (origen)":""]},Pe.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de la nueva orden"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:D,onChange:Pe=>K(Pe.target.value),disabled:!s}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esta orden ser independiente. Asegrate de usar una fecha que no tenga otro pedido activo para el mismo vendedor."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad paquetes a mover"}),i.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:F,onChange:Pe=>k(Pe.target.value),disabled:!s||!w||!ge&&!j})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Motivo de movida (obligatorio)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:B,onChange:Pe=>R(Pe.target.value),disabled:!s,placeholder:"Ej: Se cambi de ruta por reorganizacin",maxLength:250})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",onClick:wt,disabled:!s||Y,children:"Limpiar"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",onClick:Ve,disabled:!s||Y||!w||!ge&&!j||Number(F||0)<=0||!B.trim(),children:"Hacer traslado"})]}),pe&&i.jsx("div",{className:"text-sm text-red-600 mt-2",children:pe})]}),i.jsxs("div",{className:"bg-white rounded border overflow-x-auto",children:[i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between p-2",children:[i.jsx("div",{className:"text-lg font-semibold",children:"Historial de traslados"}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:J,onChange:Pe=>ee(Pe.target.value)}),i.jsx("span",{className:"text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:M,onChange:Pe=>G(Pe.target.value)}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:jt,disabled:m,type:"button",children:m?"Cargando...":"Recargar"})]})]}),i.jsxs("table",{className:"min-w-[1400px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha y hora"}),i.jsx("th",{className:"p-2 border",children:"Usuario"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Cantidad paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio Rivas"}),i.jsx("th",{className:"p-2 border",children:"Precio Isla"}),i.jsx("th",{className:"p-2 border",children:"Movido a vendedor"}),i.jsx("th",{className:"p-2 border",children:"Movido a orden"}),i.jsx("th",{className:"p-2 border",children:"Motivo de movida"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Cargando"})}):kt.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Sin traslados"})}):kt.map(Pe=>{var Ne,Re;const be=((Re=(Ne=Pe.createdAt)==null?void 0:Ne.toDate)==null?void 0:Re.call(Ne))||(Pe.createdAt?new Date(Pe.createdAt.seconds*1e3):null),ce=be?`${be.toISOString().slice(0,10)} ${be.toISOString().slice(11,19)}`:Pe.date||"",te=(Pe.createdByName||"").trim()||(Pe.createdByEmail||"").trim()||"";return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:ce}),i.jsx("td",{className:"p-2 border",children:te}),i.jsx("td",{className:"p-2 border text-left",children:Pe.productName||""}),i.jsx("td",{className:"p-2 border",children:Number(Pe.packagesMoved||0)}),i.jsx("td",{className:"p-2 border",children:G5(Pe.providerPrice||0)}),i.jsx("td",{className:"p-2 border",children:G5(Pe.unitPriceRivas||0)}),i.jsx("td",{className:"p-2 border",children:G5(Pe.unitPriceIsla||0)}),i.jsx("td",{className:"p-2 border",children:Pe.toSellerName||""}),i.jsx("td",{className:"p-2 border",children:Pe.toOrderLabel||Pe.toOrderKey||""}),i.jsx("td",{className:"p-2 border text-left",children:Pe.comment||""})]},Pe.id)})})]})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Nota: el traslado mueve EXISTENCIA (remainingPackages/remainingUnits) del pedido origen al destino."})]})}):null}const Ks=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function rG(t){const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"}const Ui=t=>Math.max(0,Math.floor(Number(t||0))),nG=t=>{const e=String(t??"");return/[,"\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e},EQe=t=>{const e=[];let r=[],n="",a=!1;for(let s=0;s<t.length;s++){const o=t[s];if(a){o==='"'?t[s+1]==='"'?(n+='"',s++):a=!1:n+=o;continue}if(o==='"'){a=!0;continue}if(o===","){r.push(n),n="";continue}if(o===`
`){r.push(n),n="",r.some(l=>String(l??"").trim()!=="")&&e.push(r),r=[];continue}o!=="\r"&&(n+=o)}return r.push(n),r.some(s=>String(s??"").trim()!=="")&&e.push(r),e},np=t=>{const e=Number(t||0);return!isFinite(e)||e<0?0:e},Rd=(t,e)=>{const r=np(e),n=Number(t||0)*(r/100),a=Number(t||0)-n;return{vendorMarginPercent:r,uVendor:n,uInvestor:a}};function SQe({role:t="",sellerCandyId:e="",currentUserEmail:r,roles:n}){const{refreshKey:a,refresh:s}=vc(),o=n&&n.length?n:t,l=!o||mn(o,"admin"),c=mn(o,"vendedor_dulces"),u=(r||"").trim().toLowerCase(),d=!l&&c,[f,A]=x.useState(!0),[h,m]=x.useState(""),[p,g]=x.useState([]),[v,y]=x.useState([]),[b,w]=x.useState({}),[P,j]=x.useState([]),_=x.useRef({});x.useEffect(()=>{const Je={};P.forEach(Bt=>{Je[Bt.id]=Bt}),_.current=Je},[P]);const[I,E]=x.useState(!1),[F,k]=x.useState(null),[B,R]=x.useState(""),[Y,me]=x.useState(""),[pe,he]=x.useState(""),[ge,se]=x.useState("0"),[je,Te]=x.useState([]),[D,K]=x.useState(""),[z,Q]=x.useState(""),[J,ee]=x.useState(!1),[M,G]=x.useState(!1),[ne,ve]=x.useState(!1),V=20,[qe,ie]=x.useState(1),re=20,[Fe,de]=x.useState(1),[we,Le]=x.useState({}),[Ge,ft]=x.useState(!1),[ht,xt]=x.useState({}),[jt,kt]=x.useState({}),[wt,Ve]=x.useState(!1),Pe=x.useMemo(()=>p.find(Je=>Je.id===B)||null,[B,p]);Pe==null||Pe.branch,x.useEffect(()=>{!I||!B||!je.length||Te(Je=>Je.map(Bt=>{const Ft=v.find(ct=>ct.id===Bt.productId)||null,hr=p.find(ct=>ct.id===B)||null,dr=hr==null?void 0:hr.branch,lr=Ui(Bt.packages),dt=Ft?rt(Ft,dr):Number(Bt.pricePerPackage||0),bt=(Ft?ue(Ft,dr):0)*lr,Tt=Ft?Ft.logisticAllocatedPerPack*lr:Number(Bt.logisticAllocated||0),Dt=(Ft?_e(Ft,dr):0)*lr,yt=We(B),Nt=Rd(bt,yt);return{...Bt,pricePerPackage:dt,totalExpected:dt*lr,grossProfit:bt,logisticAllocated:Tt,vendorMarginPercent:Nt.vendorMarginPercent,uAproximada:Dt,uVendor:Nt.uVendor,uInvestor:Nt.uInvestor,totalRivas:((Ft==null?void 0:Ft.unitPriceRivas)||Bt.unitPriceRivas||0)*lr,totalSanJorge:((Ft==null?void 0:Ft.unitPriceSanJorge)||Bt.unitPriceSanJorge||0)*lr,totalIsla:((Ft==null?void 0:Ft.unitPriceIsla)||Bt.unitPriceIsla||0)*lr,unitPriceRivas:(Ft==null?void 0:Ft.unitPriceRivas)||Bt.unitPriceRivas||0,unitPriceSanJorge:(Ft==null?void 0:Ft.unitPriceSanJorge)||Bt.unitPriceSanJorge||0,unitPriceIsla:(Ft==null?void 0:Ft.unitPriceIsla)||Bt.unitPriceIsla||0}}))},[I,B,je.length,v,p]);const be=x.useMemo(()=>!c||!u?null:p.find(Je=>(Je.email||"").trim().toLowerCase()===u)||null,[c,u,p]);x.useMemo(()=>new Set(je.map(Je=>Je.productId)),[je]);const ce=x.useMemo(()=>v.filter(Je=>(b[Je.id]??0)>1).sort((Je,Bt)=>`${Je.category} ${Je.name}`.localeCompare(`${Bt.category} ${Bt.name}`)),[v,b]),te=x.useMemo(()=>{const Je=D.trim().toLowerCase();return Je?ce.filter(Bt=>`${Bt.category??""} ${Bt.name??""}`.toLowerCase().includes(Je)):ce},[ce,D]),Ne=x.useMemo(()=>v.find(Je=>Je.id===pe)||null,[pe,v]),Re=x.useMemo(()=>c&&be?P.filter(Je=>Je.sellerId===be.id):P,[P,c,be]),ye=async()=>{try{const Je=At(De,"inventory_transfers_candies"),Bt=(bt,Tt,Ht,Dt)=>{Tt&&(bt[Tt]=bt[Tt]||{out:0,in:0},bt[Tt][Ht]+=Dt)},Ft=(bt,Tt,Ht)=>{const Dt=String(Tt||"");Dt&&(bt[Dt]=(bt[Dt]||0)+Ht)},hr={},dr={},lr=_.current,dt=bt=>{var ct,Xt;if(bt.destRowWasNew!=null)return!!bt.destRowWasNew;const Tt=String(bt.toVendorRowId||"");if(!Tt)return!1;const Ht=lr[Tt];if(!Ht)return!1;const Dt=Number(((ct=Ht.createdAt)==null?void 0:ct.seconds)??0),ke=Number(((Xt=bt.createdAt)==null?void 0:Xt.seconds)??0),yt=Dt>0&&ke>0&&Math.abs(Dt-ke)<=1,Nt=Math.max(0,Number(Ht.packages||0))===Math.max(0,Number(bt.packagesMoved||0));return yt&&Nt},Et=bt=>{const Tt=bt.data(),Ht=Number(Tt.packagesMoved||0);Ht>0&&(Bt(hr,String(Tt.fromOrderKey||""),"out",Ht),Bt(hr,String(Tt.toOrderKey||""),"in",Ht),Ft(dr,Tt.fromVendorRowId,-Ht),dt(Tt)||Ft(dr,Tt.toVendorRowId,Ht))};if(!c)(await Lt(Je)).forEach(Et);else{const bt=er(Je,ur("fromSellerId","==",e)),Tt=er(Je,ur("toSellerId","==",e)),[Ht,Dt]=await Promise.all([Lt(bt),Lt(Tt)]),ke=new Set,yt=Nt=>{Nt.forEach(ct=>{ke.has(ct.id)||(ke.add(ct.id),Et(ct))})};yt(Ht.docs),yt(Dt.docs)}xt(hr),kt(dr)}catch(Je){console.error(Je),xt({}),kt({})}};x.useEffect(()=>{(async()=>{A(!0),m("");try{const Je=await Lt(er(At(De,"sellers_candies"),bn("name","asc"))),Bt=[];Je.forEach(Dt=>{const ke=Dt.data(),yt=ke.branch||ke.branchLabel||ke.route||ke.sucursal||ke.location||"";Bt.push({id:Dt.id,name:ke.name||"",email:ke.email||"",commissionPercent:Number(ke.commissionPercent||0),branch:rG(yt),branchLabel:yt})}),g(Bt);const Ft=await Lt(er(At(De,"candy_main_orders"),bn("createdAt","desc"))),hr={},dr={},lr=(Dt,ke)=>`${Dt}#${String(ke).padStart(10,"0")}`;Ft.forEach(Dt=>{var Xt;const ke=Dt.data(),yt=Number(((Xt=ke.createdAt)==null?void 0:Xt.seconds)??0),Nt=String(ke.date||""),ct=Array.isArray(ke.items)?ke.items:[];for(const zt of ct){const xr=String(zt.id||zt.productId||"");if(!xr)continue;const cr=Ui(zt.remainingPackages??zt.remainingPacks??0);cr>0&&(hr[xr]=(hr[xr]||0)+cr);const yr=Math.max(1,Ui(zt.packages??0)),Tr=Number(zt.providerPrice??zt.provider_price??zt.priceProvider??zt.costProvider??0),sn=Number(zt.unitPriceRivas||0),Ar=Number(zt.unitPriceSanJorge||0),Qr=Number(zt.unitPriceIsla||0),vn=Number(zt.gainRivas??zt.grossProfitRivas??zt.grossProfit??0),Aa=Number(zt.gainSanJorge??zt.grossProfitSanJorge??zt.grossProfit??0),On=Number(zt.gainIsla??zt.grossProfitIsla??zt.grossProfit??0),Vr=Number(zt.logisticAllocated??zt.prorrateo??zt.prorrateoLogistico??zt.gastos??0),Ms=Number(zt.uAproximada??zt.uApprox??zt.netProfit??zt.vendorProfit??zt.gainVendor??0)/yr,Ls=Vr/yr,Tn={id:xr,name:String(zt.name||zt.productName||""),category:String(zt.category||""),unitsPerPackage:Ui(zt.unitsPerPackage??0),providerPrice:Tr,unitPriceRivas:sn,unitPriceSanJorge:Ar,unitPriceIsla:Qr,grossProfitPerPackRivas:vn/yr,grossProfitPerPackSanJorge:Aa/yr,grossProfitPerPackIsla:On/yr,uApproxPerPackRivas:Ms,uApproxPerPackSanJorge:Ms,uApproxPerPackIsla:Ms,logisticAllocatedPerPack:Ls,key:lr(Nt,yt)},ii=dr[xr];(!ii||Tn.key>ii.key)&&(dr[xr]=Tn)}});const dt=await Lt(c?er(At(De,"inventory_candies_sellers"),ur("sellerId","==",e),bn("createdAt","desc")):er(At(De,"inventory_candies_sellers"),bn("createdAt","desc"))),Et={};Object.keys(hr).forEach(Dt=>{const ke=Ui(hr[Dt]);Et[Dt]=Math.max(0,ke)}),w(Et);const bt=Object.keys(dr).map(Dt=>{const ke=dr[Dt];return{id:ke.id,name:ke.name,category:ke.category,unitsPerPackage:ke.unitsPerPackage,providerPrice:ke.providerPrice,unitPriceRivas:ke.unitPriceRivas,unitPriceSanJorge:ke.unitPriceSanJorge,unitPriceIsla:ke.unitPriceIsla,grossProfitPerPackRivas:ke.grossProfitPerPackRivas,grossProfitPerPackSanJorge:ke.grossProfitPerPackSanJorge,grossProfitPerPackIsla:ke.grossProfitPerPackIsla,uApproxPerPackRivas:ke.uApproxPerPackRivas,uApproxPerPackSanJorge:ke.uApproxPerPackSanJorge,uApproxPerPackIsla:ke.uApproxPerPackIsla,logisticAllocatedPerPack:ke.logisticAllocatedPerPack,existingPacks:Et[ke.id]??0}}).sort((Dt,ke)=>`${Dt.category} ${Dt.name}`.localeCompare(`${ke.category} ${ke.name}`));y(bt);const Tt=[];dt.forEach(Dt=>{const ke=Dt.data(),yt=Object.prototype.hasOwnProperty.call(ke,"transferDelta"),Nt=Bt.find(Tr=>Tr.id===ke.sellerId)||null,ct=np(ke.vendorMarginPercent??ke.vendorMargin??ke.commissionPercent??(Nt==null?void 0:Nt.commissionPercent)??0),Xt=Number(ke.uAproximada??ke.uApprox??ke.netProfit??ke.uAprox??ke.uApproxTotal??0),zt=ke.uVendor??ke.vendorProfit??ke.gainVendor??0,xr=ke.uVendor!=null,cr=Rd(Number(ke.grossProfit??ke.gainVendor??0),ct),yr=xr?{uAproximada:Number(Xt||0),vendorMarginPercent:ct,uVendor:Number(zt||0),uInvestor:Number(Xt||0)-Number(zt||0)}:{uAproximada:Number(Xt||0),vendorMarginPercent:cr.vendorMarginPercent,uVendor:cr.uVendor,uInvestor:cr.uInvestor};Tt.push({id:Dt.id,sellerId:ke.sellerId,sellerName:ke.sellerName||"",productId:ke.productId,productName:ke.productName||"",category:ke.category||"",orderId:ke.orderId||null,packages:Number(ke.packages||0),unitsPerPackage:Number(ke.unitsPerPackage||0),totalUnits:Number(ke.totalUnits||0),remainingPackages:Number(ke.remainingPackages||0),remainingUnits:Number(ke.remainingUnits||0),totalRivas:Number(ke.totalRivas||0),totalSanJorge:Number(ke.totalSanJorge||0),totalIsla:Number(ke.totalIsla||0),unitPriceRivas:Number(ke.unitPriceRivas||0),unitPriceSanJorge:Number(ke.unitPriceSanJorge||0),unitPriceIsla:Number(ke.unitPriceIsla||0),grossProfit:Number(ke.grossProfit??ke.gainVendor??0),logisticAllocated:Number(ke.logisticAllocated??ke.gastos??ke.gasto??0),vendorMarginPercent:yr.vendorMarginPercent,uAproximada:yr.uAproximada,uVendor:yr.uVendor,uInvestor:yr.uInvestor,vendorProfit:Number(ke.vendorProfit??yr.uVendor??0),transferDelta:yt&&typeof ke.transferDelta=="number"?Number(ke.transferDelta||0):void 0,subtotal:Number(ke.subtotal||0),providerPrice:Number(ke.providerPrice||0),date:ke.date||"",createdAt:ke.createdAt||mr.now()})});const Ht={};Tt.forEach(Dt=>{Ht[Dt.id]=Dt}),_.current=Ht,j(Tt),await ye()}catch(Je){console.error(Je),m(" Error cargando datos de vendedores / pedidos.")}finally{A(!1)}})()},[a,t,e]);const Xe=(Je,Bt)=>`${Je}__${Bt}`,mt=Je=>Je.orderId||Xe(Je.sellerId,Je.date),rt=(Je,Bt)=>Bt?Bt==="RIVAS"?Je.unitPriceRivas||0:Bt==="SAN_JORGE"?Je.unitPriceSanJorge||0:Je.unitPriceIsla||0:Je.unitPriceIsla||Je.unitPriceRivas||Je.unitPriceSanJorge||0,ue=(Je,Bt)=>Bt?Bt==="RIVAS"?Je.grossProfitPerPackRivas||0:Bt==="SAN_JORGE"?Je.grossProfitPerPackSanJorge||0:Je.grossProfitPerPackIsla||0:Je.grossProfitPerPackIsla||Je.grossProfitPerPackRivas||Je.grossProfitPerPackSanJorge||0,_e=(Je,Bt)=>Bt?Bt==="RIVAS"?Je.uApproxPerPackRivas||0:Bt==="SAN_JORGE"?Je.uApproxPerPackSanJorge||0:Je.uApproxPerPackIsla||0:Je.uApproxPerPackIsla||Je.uApproxPerPackRivas||Je.uApproxPerPackSanJorge||0,We=Je=>{const Bt=p.find(Ft=>Ft.id===Je)||null;return np((Bt==null?void 0:Bt.commissionPercent)??0)},ot=Je=>{const Bt=jt[Je.id];return typeof Bt=="number"&&Number.isFinite(Bt)?Bt:typeof Je.transferDelta=="number"?Number(Je.transferDelta||0):0},Ce=Je=>{const Bt=Math.max(0,Number(Je.packages||0)),Ft=ot(Je);return Math.max(0,Bt+Ft)},$e=x.useMemo(()=>{const Je=new Map;for(const Ft of Re){const hr=mt(Ft),dr=Je.get(hr)||{orderKey:hr,sellerId:Ft.sellerId,sellerName:Ft.sellerName,date:Ft.date,totalPackages:0,totalActivePackages:0,totalRemainingPackages:0,totalExpected:0,totalExpectedActive:0,grossProfit:0,grossProfitActive:0,vendorProfit:0,vendorProfitActive:0,gastos:0,gastosActive:0,transferredOut:0,transferredIn:0},lr=Math.max(0,Number(Ft.packages||0)),dt=Math.max(0,Number(Ft.remainingPackages||0)),Et=Ce(Ft),bt=lr>0?Et/lr:1;dr.totalPackages+=lr,dr.totalRemainingPackages+=dt,dr.totalActivePackages+=Et;const Tt=p.find(Ar=>Ar.id===Ft.sellerId)||null,Ht=Tt==null?void 0:Tt.branch,Dt=v.find(Ar=>Ar.id===String(Ft.productId))||null,ke=Dt?rt(Dt,Ht):Number(Ht==="RIVAS"?Ft.unitPriceRivas||0:Ht==="SAN_JORGE"?Ft.unitPriceSanJorge||0:Ft.unitPriceIsla||0),yt=ke*lr,Nt=ke*Et;dr.totalExpected+=Number(yt||0),dr.totalExpectedActive+=Number(Nt||0);const ct=Dt?ue(Dt,Ht):lr>0?Number(Ft.grossProfit||0)/lr:0,Xt=ct*lr,zt=ct*Et;dr.grossProfit+=Number(Xt||0),dr.grossProfitActive+=Number(zt||0);const xr=typeof(Dt==null?void 0:Dt.logisticAllocatedPerPack)=="number"?Number(Dt.logisticAllocatedPerPack||0):(()=>{const Ar=Number(Ft.logisticAllocated??Ft.gastos??Ft.gasto??0),Qr=lr>0?lr:Et||1;return Qr>0?Ar/Qr:0})(),cr=xr*lr,yr=xr*Et;dr.gastos=(dr.gastos||0)+Number(cr||0),dr.gastosActive=(dr.gastosActive||0)+Number(yr||0);const Tr=We(Ft.sellerId),sn=Rd(Xt,Tr);dr.vendorProfit+=Number(sn.uVendor||0),dr.vendorProfitActive+=Number(sn.uVendor||0)*bt,Je.set(hr,dr)}const Bt=[];for(const Ft of Je.values()){const hr=ht[Ft.orderKey]||{out:0,in:0};Ft.transferredOut=hr.out||0,Ft.transferredIn=hr.in||0,Number.isFinite(Ft.totalExpectedActive)||(Ft.totalExpectedActive=Ft.totalExpected),Number.isFinite(Ft.grossProfitActive)||(Ft.grossProfitActive=Ft.grossProfit),Number.isFinite(Ft.vendorProfitActive)||(Ft.vendorProfitActive=Ft.vendorProfit),Number.isFinite(Ft.gastosActive||0)||(Ft.gastosActive=Ft.gastos),Bt.push(Ft)}return Bt.sort((Ft,hr)=>(hr.date||"").localeCompare(Ft.date||"")),Bt},[Re,p,ht,v,jt]),gt=x.useMemo(()=>Math.max(1,Math.ceil($e.length/V)),[$e.length]);x.useEffect(()=>{qe>gt&&ie(gt)},[gt]);const Kt=x.useMemo(()=>{const Je=(qe-1)*V;return $e.slice(Je,Je+V)},[$e,qe]),Ut=()=>ie(Je=>Math.max(1,Je-1)),Jt=()=>ie(Je=>Math.min(gt,Je+1)),it=x.useMemo(()=>{const Je=z.trim().toLowerCase();return Je?je.filter(Bt=>{const Ft=String(Bt.productName||"").toLowerCase(),hr=String(Bt.category||"").toLowerCase();return Ft.includes(Je)||hr.includes(Je)}):je},[je,z]),X=x.useMemo(()=>Math.max(1,Math.ceil(it.length/re)),[it.length]);x.useEffect(()=>{Fe>X&&de(X)},[X]);const oe=x.useMemo(()=>{const Je=(Fe-1)*re;return it.slice(Je,Je+re)},[it,Fe]),L=x.useMemo(()=>{const Je=new Map;for(const Bt of oe){const Ft=(Bt.category||"Sin categora").trim()||"Sin categora",hr=Je.get(Ft)||[];hr.push(Bt),Je.set(Ft,hr)}return Array.from(Je.entries())},[oe]),Ae=Je=>{Le(Bt=>({...Bt,[Je]:!Bt[Je]}))},Ee=()=>de(Je=>Math.max(1,Je-1)),Oe=()=>de(Je=>Math.min(X,Je+1)),Be=Je=>{const Bt=Math.max(0,Number(Je.packages||0)),Ft=Number(Je.transferDelta||0);return Math.max(0,Bt+Ft)},S=Je=>{const Bt=Math.max(0,Number(Je.packages||0)),Ft=Be(Je);return Bt===0?Ft>0?1:0:Ft/Bt},O=(Je,Bt)=>Number(Bt||0)*S(Je),U=Je=>Number(Je.logisticAllocated??Je.logisticAllocated??Je.gastos??Je.gasto??0),q=Je=>{const Bt=O(Je,Number(Je.totalExpected||0)),Ft=O(Je,Number(Je.grossProfit||0)),hr=O(Je,U(Je)),dr=O(Je,Number(Je.uVendor||0)),lr=Ft-hr-dr;return{totalExpected:Bt,grossProfit:Ft,gastos:hr,uVendor:dr,uNeta:lr}},ae=x.useMemo(()=>je.reduce((Je,Bt)=>{const Ft=Math.max(0,Number(Bt.packages||0)),hr=Be(Bt),dr=q(Bt);return Je.totalPackages+=Ft,Je.totalActivePackages+=hr,Je.totalExpected+=dr.totalExpected,Je.grossProfit+=dr.grossProfit,Je.gastosTotal+=dr.gastos,Je.uVendor+=dr.uVendor,Je},{totalPackages:0,totalActivePackages:0,totalExpected:0,grossProfit:0,gastosTotal:0,uVendor:0}),[je]),fe=x.useMemo(()=>ae.grossProfit-ae.gastosTotal-ae.uVendor,[ae.grossProfit,ae.gastosTotal,ae.uVendor]),Ue=()=>{k(null),R(""),me(""),he(""),se("0"),Te([]),K(""),de(1)},Ze=()=>{m(""),Ue(),c&&be&&R(be.id);const Je=new Date,Bt=Je.getFullYear(),Ft=String(Je.getMonth()+1).padStart(2,"0"),hr=String(Je.getDate()).padStart(2,"0");me(`${Bt}-${Ft}-${hr}`),E(!0)},lt=()=>{E(!1)},Qe=Je=>{m(""),Ue(),k(Je);const[Bt,Ft]=Je.split("__");R(Bt||""),me(Ft||"");const hr=Re.filter(Et=>mt(Et)===Je),dr=p.find(Et=>Et.id===Bt)||null,lr=dr==null?void 0:dr.branch,dt=hr.map(Et=>{const bt=v.find(Tr=>Tr.id===String(Et.productId))||null,Tt=Number(Et.unitPriceRivas||(bt==null?void 0:bt.unitPriceRivas)||0),Ht=Number(Et.unitPriceSanJorge||(bt==null?void 0:bt.unitPriceSanJorge)||0),Dt=Number(Et.unitPriceIsla||(bt==null?void 0:bt.unitPriceIsla)||0),ke=Number(Et.packages||0),yt=lr==="RIVAS"?Tt:lr==="SAN_JORGE"?Ht:Dt,Nt=Number(Et.totalRivas||0),ct=Number(Et.totalSanJorge||0),Xt=Number(Et.totalIsla||0),zt=lr==="RIVAS"?Nt:lr==="SAN_JORGE"?ct:Xt,xr=np(Et.vendorMarginPercent??We(Bt)),cr=Rd(Number(Et.grossProfit||0),xr),yr=Number(Et.logisticAllocated??Et.gastos??0)||(bt?bt.logisticAllocatedPerPack*ke:0);return{id:Et.id,productId:String(Et.productId||""),productName:Et.productName||(bt==null?void 0:bt.name)||"",category:Et.category||(bt==null?void 0:bt.category)||"",unitsPerPackage:Number(Et.unitsPerPackage||(bt==null?void 0:bt.unitsPerPackage)||0),packages:ke,totalExpected:zt,pricePerPackage:yt,grossProfit:Number(Et.grossProfit||0),logisticAllocated:yr,vendorMarginPercent:cr.vendorMarginPercent,uAproximada:Number(Et.uAproximada||0),uVendor:Number(Et.uVendor??cr.uVendor??0),uInvestor:Number(Et.uInvestor??cr.uInvestor??0),totalRivas:Nt,totalSanJorge:ct,totalIsla:Xt,unitPriceRivas:Tt,unitPriceSanJorge:Ht,unitPriceIsla:Dt,providerPrice:Number(Et.providerPrice||0),remainingPackages:Number(Et.remainingPackages||0),transferDelta:ot(Et)}});Te(dt),E(!0)},tt=()=>{if(m(""),!B)return m(" Seleccion un vendedor.");if(!Y)return m(" Seleccion una fecha.");if(!pe)return m(" Seleccion un producto.");const Je=Ui(ge);if(Je<=0)return m(" Paquetes debe ser > 0.");const Bt=v.find(Nt=>Nt.id===pe);if(!Bt)return m(" Producto no encontrado.");if(je.some(Nt=>Nt.productId===Bt.id))return m(" Ese producto ya est agregado al pedido.");const Ft=p.find(Nt=>Nt.id===B)||null,hr=Ft==null?void 0:Ft.branch,dr=rt(Bt,hr),lr=ue(Bt,hr),Et=_e(Bt,hr)*Je,bt=dr*Je,Tt=lr*Je,Ht=Bt.logisticAllocatedPerPack*Je,Dt=We(B),ke=Rd(Tt,Dt),yt={id:`tmp_${Date.now()}_${Math.random().toString(16).slice(2)}`,productId:Bt.id,productName:Bt.name,category:Bt.category,unitsPerPackage:Bt.unitsPerPackage,packages:Je,totalExpected:bt,pricePerPackage:dr,grossProfit:Tt,logisticAllocated:Ht,providerPrice:Bt.providerPrice,vendorMarginPercent:ke.vendorMarginPercent,uAproximada:Et,uVendor:ke.uVendor,uInvestor:ke.uInvestor,totalRivas:(Bt.unitPriceRivas||0)*Je,totalSanJorge:(Bt.unitPriceSanJorge||0)*Je,totalIsla:(Bt.unitPriceIsla||0)*Je,unitPriceRivas:Bt.unitPriceRivas||0,unitPriceSanJorge:Bt.unitPriceSanJorge||0,unitPriceIsla:Bt.unitPriceIsla||0,remainingPackages:Je,transferDelta:0};Te(Nt=>[yt,...Nt]),he(""),se("0"),de(1)},ut=Je=>{Te(Bt=>Bt.filter(Ft=>Ft.id!==Je))},Pt=(Je,Bt)=>{const Ft=Math.max(0,Ui(Bt));Te(hr=>hr.map(dr=>{if(dr.id!==Je)return dr;const lr=v.find(zt=>zt.id===dr.productId),dt=p.find(zt=>zt.id===B)||null,Et=dt==null?void 0:dt.branch,bt=lr?rt(lr,Et):dr.pricePerPackage||0,Ht=(lr?ue(lr,Et):0)*Ft,Dt=lr?lr.logisticAllocatedPerPack*Ft:dr.logisticAllocated||0,yt=(lr?_e(lr,Et):0)*Ft,Nt=dr.vendorMarginPercent!=null?dr.vendorMarginPercent:We(B),ct=Rd(Ht,Nt),Xt=String(dr.id||"").startsWith("tmp_")||Number(dr.remainingPackages||0)===Number(dr.packages||0);return{...dr,packages:Ft,pricePerPackage:bt,totalExpected:bt*Ft,grossProfit:Ht,logisticAllocated:Dt,providerPrice:(lr==null?void 0:lr.providerPrice)??dr.providerPrice??Number(dr.providerPrice||0),vendorMarginPercent:ct.vendorMarginPercent,uAproximada:yt,uVendor:ct.uVendor,uInvestor:ct.uInvestor,totalRivas:((lr==null?void 0:lr.unitPriceRivas)||dr.unitPriceRivas||0)*Ft,totalSanJorge:((lr==null?void 0:lr.unitPriceSanJorge)||dr.unitPriceSanJorge||0)*Ft,totalIsla:((lr==null?void 0:lr.unitPriceIsla)||dr.unitPriceIsla||0)*Ft,remainingPackages:Xt?Ft:dr.remainingPackages}}))},Ct=(Je,Bt)=>{const Ft=np(Bt);Te(hr=>hr.map(dr=>{if(dr.id!==Je)return dr;const lr=v.find(yt=>yt.id===dr.productId),dt=p.find(yt=>yt.id===B)||null,Et=dt==null?void 0:dt.branch,bt=Ui(dr.packages),Ht=(lr?_e(lr,Et):0)*bt,Dt=Number(dr.grossProfit||0),ke=Rd(Dt,Ft);return{...dr,vendorMarginPercent:ke.vendorMarginPercent,uAproximada:Ht,uVendor:ke.uVendor,uInvestor:ke.uInvestor}}))},It=async()=>{if(l&&!M)try{G(!0),m("");const Je=P;if(!Je.length){m(" No hay documentos para actualizar.");return}const Bt=Et=>v.find(bt=>bt.id===Et)||null,Ft=Et=>{const bt=p.find(Tt=>Tt.id===Et)||null;return bt==null?void 0:bt.branch},hr=(Et,bt)=>Math.abs(Number(Et||0)-Number(bt||0))>.01;let dr=Zd(De),lr=0,dt=0;for(const Et of Je){const bt=Ft(Et.sellerId)||"ISLA",Tt=Math.max(1,Number(Et.unitsPerPackage||0)||1),Ht=Number(Et.totalUnits||0),Dt=Number(Et.remainingUnits||0),yt=Math.max(0,Ht-Dt)/Tt,Nt=Number(Et.remainingPackages||0),ct=Math.max(0,Nt+yt),Xt=Bt(String(Et.productId||"")),zt=Xt&&ct>0?ue(Xt,bt)*ct:Number(Et.grossProfit||0),xr=Xt&&ct>0?Xt.logisticAllocatedPerPack*ct:Number(Et.logisticAllocated||0),cr=Xt?_e(Xt,bt):0,yr=ct>0?cr*ct:0,Tr=Et.vendorMarginPercent!=null?np(Et.vendorMarginPercent):We(Et.sellerId),sn=Rd(zt,Tr),Ar=sn.uVendor,Qr=sn.uInvestor,vn=zt-xr-Ar;if(!(hr(Et.packages,ct)||Et.uVendor==null||Et.uNeta==null||Et.uAproximada==null||Et.uInvestor==null||Et.logisticAllocated==null||hr(Et.uVendor,Ar)||hr(Et.uNeta,vn)||hr(Et.uAproximada,yr)||hr(Et.uInvestor,Qr)||hr(Et.logisticAllocated,xr)))continue;const On=Yt(De,"inventory_candies_sellers",Et.id);dr.update(On,{packages:ct,vendorMarginPercent:Tr,grossProfit:zt,logisticAllocated:xr,uAproximada:yr,uVendor:Ar,uInvestor:Qr,uNeta:vn,vendorProfit:Ar,updatedAt:mr.now()}),lr+=1,dt+=1,lr>=400&&(await dr.commit(),dr=Zd(De),lr=0)}lr>0&&await dr.commit(),m(` Actualizados ${dt} documentos.`),s()}catch(Je){console.error(Je),m(" Error actualizando documentos.")}finally{G(!1)}},St=(Je,Bt,Ft="text/plain;charset=utf-8")=>{const hr=new Blob([Bt],{type:Ft}),dr=URL.createObjectURL(hr),lr=document.createElement("a");lr.href=dr,lr.download=Je,document.body.appendChild(lr),lr.click(),lr.remove(),URL.revokeObjectURL(dr)},Zt=()=>{if(!l){m(" Solo admin puede exportar CSV.");return}const Je=["Vendedor","Sucursal","Fecha","Producto ID","Producto","Categora","Paquetes","Paquetes restantes","Precio paquete","Precio proveedor","Total esperado","U. Bruta","U. Vendedor","U. Neta","P. Rivas","P. San Jorge","P. Isla","Total Rivas","Total San Jorge","Total Isla","Unidades x paquete","vendorMarginPercent","uVendor"],Bt=p.find(lr=>lr.id===B)||null,Ft=(Bt==null?void 0:Bt.branch)||rG(Bt==null?void 0:Bt.branchLabel)||"",hr=[Je.join(","),...je.map(lr=>{const{totalExpected:dt,grossProfit:Et,uVendor:bt,uNeta:Tt}=q(lr);return[(Bt==null?void 0:Bt.name)||"",String(Ft),Y||"",lr.productId,lr.productName,lr.category,String(Number(lr.packages||0)),String(Number(lr.remainingPackages||0)),String(Number(lr.pricePerPackage||0).toFixed(2)),String(Number(lr.providerPrice||0).toFixed(2)),String(Number(dt||0).toFixed(2)),String(Number(Et||0).toFixed(2)),String(Number(bt||0).toFixed(2)),String(Number(Tt||0).toFixed(2)),String(Number(lr.unitPriceRivas||0).toFixed(2)),String(Number(lr.unitPriceSanJorge||0).toFixed(2)),String(Number(lr.unitPriceIsla||0).toFixed(2)),String(Number(lr.totalRivas||0).toFixed(2)),String(Number(lr.totalSanJorge||0).toFixed(2)),String(Number(lr.totalIsla||0).toFixed(2)),String(Number(lr.unitsPerPackage||0)),String(Number(lr.vendorMarginPercent||0).toFixed(2)),String(Number(lr.uVendor||0).toFixed(2))].map(nG).join(",")})].join(`
`),dr=`vendor_order_items_${((Bt==null?void 0:Bt.name)||"vendedor").replace(/\s+/g,"_")}_${Y||"sin_fecha"}.csv`;St(dr,hr,"text/csv;charset=utf-8")},Er=()=>{const Je=["productId","productName","category","Existentes","Paquetes","vendorMarginPercent","uNeta"],Bt=v.map(hr=>({id:hr.id,name:hr.name,category:hr.category,existentes:Number(hr.existingPacks||0)})).filter(hr=>hr.existentes>0).sort((hr,dr)=>`${hr.category} ${hr.name}`.localeCompare(`${dr.category} ${dr.name}`)),Ft=[Je.join(","),...Bt.map(hr=>[hr.id,hr.name,hr.category,String(hr.existentes),"","",""].map(nG).join(","))].join(`
`);St("plantilla_productos_orden_maestra.csv",Ft,"text/csv;charset=utf-8")},Nr=async Je=>{try{m("");const Bt=await Je.text(),Ft=EQe(Bt);if(!Ft.length)return m(" Archivo vaco.");const hr=Ft[0].map(Dt=>String(Dt||"").trim().toLowerCase()),dr=hr.findIndex(Dt=>Dt==="productid"||Dt==="producto id"||Dt==="id"),lr=hr.findIndex(Dt=>Dt==="paquetes"||Dt==="packages"),dt=hr.findIndex(Dt=>Dt==="vendormarginpercent"||Dt==="vendor_margin_percent"||Dt==="marginvendorpercent"||Dt==="margen"||Dt==="margen vendedor"||Dt==="margen_del_vendedor");if(dr<0||lr<0)return m(" Plantilla invlida: debe tener columnas productId y Paquetes.");if(!B)return m(" Seleccion un vendedor antes de importar.");if(!Y)return m(" Seleccion una fecha antes de importar.");const Et=p.find(Dt=>Dt.id===B)||null,bt=Et==null?void 0:Et.branch,Tt=We(B),Ht=[];for(let Dt=1;Dt<Ft.length;Dt++){const ke=Ft[Dt]||[],yt=String(ke[dr]||"").trim();if(!yt)continue;const Nt=Ui(ke[lr]);if(Nt<=0)continue;const ct=v.find(Vr=>Vr.id===yt);if(!ct)continue;const Xt=dt>=0?np(ke[dt]):0,zt=dt>=0&&String(ke[dt]??"").trim()!==""?Xt:Tt,xr=rt(ct,bt),cr=ue(ct,bt),yr=xr*Nt,Tr=cr*Nt,sn=ct.logisticAllocatedPerPack*Nt,Qr=_e(ct,bt)*Nt,vn=Rd(Tr,zt),Aa=je.find(Vr=>Vr.productId===yt);if(Aa){const Vr=dt>=0&&String(ke[dt]??"").trim()!==""?zt:Aa.vendorMarginPercent,Yi=Rd(Tr,Vr);Te(Ms=>Ms.map(Ls=>Ls.id===Aa.id?{...Ls,packages:Nt,pricePerPackage:xr,totalExpected:yr,grossProfit:Tr,logisticAllocated:sn,vendorMarginPercent:Yi.vendorMarginPercent,uAproximada:Qr,uVendor:Yi.uVendor,uInvestor:Yi.uInvestor,totalRivas:(ct.unitPriceRivas||0)*Nt,totalSanJorge:(ct.unitPriceSanJorge||0)*Nt,totalIsla:(ct.unitPriceIsla||0)*Nt}:Ls));continue}const On={id:`tmp_${Date.now()}_${Math.random().toString(16).slice(2)}`,productId:ct.id,productName:ct.name,category:ct.category,unitsPerPackage:ct.unitsPerPackage,packages:Nt,pricePerPackage:xr,totalExpected:yr,grossProfit:Tr,logisticAllocated:sn,providerPrice:ct.providerPrice,vendorMarginPercent:vn.vendorMarginPercent,uAproximada:Qr,uVendor:vn.uVendor,uInvestor:vn.uInvestor,totalRivas:(ct.unitPriceRivas||0)*Nt,totalSanJorge:(ct.unitPriceSanJorge||0)*Nt,totalIsla:(ct.unitPriceIsla||0)*Nt,unitPriceRivas:ct.unitPriceRivas||0,unitPriceSanJorge:ct.unitPriceSanJorge||0,unitPriceIsla:ct.unitPriceIsla||0,remainingPackages:Nt};Ht.push(On)}if(!Ht.length)return m(" No se encontraron filas con Paquetes > 0.");Te(Dt=>[...Ht,...Dt]),de(1),m(` Importados ${Ht.length} productos desde plantilla.`)}catch(Bt){console.error(Bt),m(" Error importando archivo.")}},Dr=async()=>{try{if(m(""),d)return m(" Solo lectura.");if(!B)return m(" Seleccion un vendedor.");if(!Y)return m(" Seleccion una fecha.");if(!je.length)return m(" Agreg al menos 1 producto.");const Je=p.find(bt=>bt.id===B)||null;if(!Je)return m(" Vendedor invlido.");const Bt=Je.branch,Ft=F?Re.filter(bt=>mt(bt)===F):[],hr=new Map;Ft.forEach(bt=>hr.set(String(bt.productId),bt));for(const bt of je){const Tt=Ui(bt.packages),Ht=F?hr.get(bt.productId):null,Dt=Ht?Ui(Ht.packages):0,ke=Tt-Dt;if(ke>0){const yt=b[bt.productId]??0;if(ke>yt)return m(` "${bt.productName}" excede existencias de orden maestra. Existentes: ${yt} (faltan ${ke})`)}}ee(!0);const dr=mr.now(),lr=Xe(B,Y),dt=We(B);if(F){const bt=new Set(je.map(Dt=>String(Dt.id||""))),Tt=Ft.filter(Dt=>!bt.has(String(Dt.id||""))),Ht=[];for(const Dt of Tt)await W$(Dt.id),Ht.push(Dt.id);Ht.length&&j(Dt=>Dt.filter(ke=>!Ht.includes(ke.id)));for(const Dt of je){const ke=hr.get(Dt.productId);if(!ke)continue;const yt=Ui(Dt.packages),Nt=Ui(ke.packages),ct=yt-Nt;if(ct<0){const Xt=Math.abs(ct),zt=Ui(ke.remainingPackages);if(Xt>zt)return m(` No pods bajar "${Dt.productName}" en ${Xt} porque solo quedan ${zt} paquetes restantes.`);await bQe({vendorInventoryId:ke.id,packagesToReturn:Xt})}}}const Et=new Map;for(const bt of je){const Tt=Ui(bt.packages),Ht=F?hr.get(bt.productId):null,Dt=Ht?Ui(Ht.packages):0,ke=Tt-Dt;if(ke>0){const{allocations:yt}=await yQe({productId:bt.productId,packagesToAllocate:ke});Et.set(bt.productId,yt||[])}}await ki(De,async bt=>{for(const Tt of je){const Ht=Ui(Tt.packages),Dt=Ui(Tt.unitsPerPackage),ke=Ht*Dt,yt=F?hr.get(Tt.productId):null,Nt=yt?Ui(yt.packages):0,ct=yt?Ui(yt.remainingPackages):0,Xt=Ht-Nt,zt=yt?Math.max(0,ct+Xt):Ht,xr=zt*Dt,cr=v.find(Gc=>Gc.id===Tt.productId),yr=cr?rt(cr,Bt):Number(Tt.pricePerPackage||0),sn=(cr?ue(cr,Bt):0)*Ht,Ar=cr?cr.logisticAllocatedPerPack*Ht:Tt.logisticAllocated||0,vn=(cr?_e(cr,Bt):0)*Ht,Aa=Tt.vendorMarginPercent!=null?Tt.vendorMarginPercent:dt,On=Rd(sn,Aa),Vr=Number(sn||0)-Number(Ar||0)-Number(On.uVendor||0),Yi=((cr==null?void 0:cr.unitPriceRivas)||Tt.unitPriceRivas||0)*Ht,Ms=((cr==null?void 0:cr.unitPriceSanJorge)||Tt.unitPriceSanJorge||0)*Ht,Ls=((cr==null?void 0:cr.unitPriceIsla)||Tt.unitPriceIsla||0)*Ht,Tn={sellerId:Je.id,sellerName:Je.name,sellerEmail:Je.email||"",branch:Je.branch||"",branchLabel:Je.branchLabel||"",productId:Tt.productId,productName:Tt.productName,category:Tt.category,orderId:lr,date:Y,createdAt:dr,packages:Ht,unitsPerPackage:Dt,totalUnits:ke,remainingPackages:zt,remainingUnits:xr,totalRivas:Yi,totalSanJorge:Ms,totalIsla:Ls,unitPriceRivas:(cr==null?void 0:cr.unitPriceRivas)||Tt.unitPriceRivas||0,unitPriceSanJorge:(cr==null?void 0:cr.unitPriceSanJorge)||Tt.unitPriceSanJorge||0,unitPriceIsla:(cr==null?void 0:cr.unitPriceIsla)||Tt.unitPriceIsla||0,grossProfit:sn,logisticAllocated:Ar,vendorMarginPercent:On.vendorMarginPercent,uVendor:On.uVendor,uNeta:Vr,uAproximada:vn,uInvestor:On.uInvestor,providerPrice:Number(Tt.providerPrice??(cr==null?void 0:cr.providerPrice)??0),vendorProfit:On.uVendor,transferDelta:yt?Number(yt.transferDelta||0):0},ii=Et.get(Tt.productId)||[];if(F)if(String(Tt.id||"").startsWith("tmp_")){const Gc=Yt(At(De,"inventory_candies_sellers"));Tn.masterAllocations=ii,bt.set(Gc,Tn)}else{const Gc=Yt(De,"inventory_candies_sellers",Tt.id);ii.length>0&&(Tn.masterAllocations=hee(...ii)),bt.set(Gc,Tn,{merge:!0})}else{const Gc=Yt(At(De,"inventory_candies_sellers"));Tn.masterAllocations=ii,bt.set(Gc,Tn)}}}),m(" Pedido guardado."),E(!1),Ue(),s()}catch(Je){console.error(Je),m(" Error guardando el pedido.")}finally{ee(!1)}},nn=async Je=>{try{if(m(""),!l)return m(" Solo admin.");ee(!0);const Bt=Re.filter(Ft=>mt(Ft)===Je);for(const Ft of Bt)await W$(Ft.id);m(" Pedido eliminado."),s()}catch(Bt){console.error(Bt),m(" Error eliminando pedido.")}finally{ee(!1)}},pn=Ro.useRef(null),Yr=()=>{var Je;if(d)return m(" Solo lectura.");if(!B)return m(" Seleccion un vendedor.");if(!Y)return m(" Seleccion una fecha.");(Je=pn.current)==null||Je.click()},dn=async Je=>{var Ft;const Bt=(Ft=Je.target.files)==null?void 0:Ft[0];Je.target.value="",Bt&&await Nr(Bt)},Vn=!l,an=l?11:8;return i.jsxs("div",{className:"p-3 md:p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-3 mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-lg md:text-2xl font-semibold",children:"rdenes de Vendedor (Dulces)"}),i.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Pedidos agrupados por vendedor + fecha. U. Bruta viene de la orden maestra. U. Neta = U. Bruta - Gastos - U. Vendedor."})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(xc,{onClick:s}),l&&i.jsx("button",{onClick:()=>Ve(!0),className:"px-3 py-2 rounded bg-amber-600 text-white text-sm hover:bg-amber-700",children:"Traslados"}),!d&&i.jsx("button",{onClick:Ze,className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"+ Nuevo pedido"})]})]}),h&&!I&&i.jsx("div",{className:"mb-3 p-2 rounded border text-sm bg-white",children:h}),f?i.jsx("div",{className:"p-4 text-sm text-gray-600",children:"Cargando"}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"hidden md:block bg-white border rounded",children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-700",children:["Total pedidos: ",i.jsx("b",{children:$e.length})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:()=>{if(!I){m(" Abr un pedido para exportar productos asociados.");return}Zt()},children:"Exportar asociados"}),l&&i.jsx(i.Fragment,{children:i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:It,disabled:M,children:M?"Actualizando campos...":"Actualizar campos calculados"})})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2 border-b",children:"Fecha"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"P. Asociados"}),i.jsx("th",{className:"text-right p-2 border-b",children:"P. Restantes"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"Total esperado"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"U. Bruta"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Trasl. Salida"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Trasl. Entrada"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Acciones"})]})}),i.jsxs("tbody",{children:[Kt.map(Je=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-2 border-b",children:Je.date}),i.jsx("td",{className:"p-2 border-b",children:Je.sellerName}),i.jsx("td",{className:"p-2 border-b text-right",children:Je.totalPackages}),i.jsx("td",{className:"p-2 border-b text-right",children:Je.totalRemainingPackages}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:Ks(Je.totalExpectedActive??Je.totalExpected)}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:Ks(Je.grossProfitActive??Je.grossProfit)}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:Ks((Je.gastosActive??Je.gastos)||0)}),i.jsx("td",{className:"p-2 border-b text-right",children:Ks(Je.vendorProfitActive??Je.vendorProfit)}),i.jsx("td",{className:"p-2 border-b text-right",children:Je.transferredOut}),i.jsx("td",{className:"p-2 border-b text-right",children:Je.transferredIn}),i.jsx("td",{className:"p-2 border-b",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded bg-gray-900 text-white text-xs hover:bg-black",onClick:()=>Qe(Je.orderKey),children:"Ver / Editar"}),l&&i.jsx("button",{className:"px-3 py-1.5 rounded bg-red-600 text-white text-xs hover:bg-red-700",onClick:()=>{confirm("Eliminar este pedido completo?")&&nn(Je.orderKey)},children:"Eliminar"})]})})]},Je.orderKey)),!Kt.length&&i.jsx("tr",{children:i.jsx("td",{className:"p-3 text-sm text-gray-600",colSpan:an,children:"No hay pedidos."})})]})]})}),i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Pgina ",qe," / ",gt]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:Ut,disabled:qe<=1,children:""}),i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:Jt,disabled:qe>=gt,children:""})]})]})]}),i.jsxs("div",{className:"md:hidden space-y-2",children:[i.jsxs("div",{className:"bg-white border rounded p-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-700",children:["Total pedidos: ",i.jsx("b",{children:$e.length})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:[qe,"/",gt]})]}),Kt.map(Je=>i.jsxs("div",{className:"bg-white border rounded",role:"button",tabIndex:0,onClick:()=>Qe(Je.orderKey),onKeyDown:Bt=>{(Bt.key==="Enter"||Bt.key===" ")&&(Bt.preventDefault(),Qe(Je.orderKey))},children:[i.jsxs("div",{className:"p-2 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold",children:Je.sellerName}),i.jsx("div",{className:"text-xs text-gray-600",children:Je.date})]}),l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm text-red-600",onClick:Bt=>{Bt.stopPropagation(),confirm("Eliminar este pedido completo?")&&nn(Je.orderKey)},children:"Eliminar"})]}),i.jsx("div",{className:"px-2 pb-2",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"P. Asociados"}),i.jsx("div",{className:"font-semibold",children:Je.totalPackages})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"P. Restantes"}),i.jsx("div",{className:"font-semibold",children:Je.totalRemainingPackages})]}),l&&i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"font-semibold",children:Ks(Je.totalExpectedActive??Je.totalExpected)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"font-semibold",children:Ks(Je.vendorProfitActive??Je.vendorProfit)})]})]})})]},Je.orderKey)),!Kt.length&&i.jsx("div",{className:"p-3 text-sm text-gray-600 bg-white border rounded",children:"No hay pedidos."}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm",onClick:Ut,disabled:qe<=1,children:""}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm",onClick:Jt,disabled:qe>=gt,children:""})]})]})]}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3 md:p-6",children:i.jsxs("div",{className:"bg-white w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded shadow relative",children:[J&&i.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:i.jsx("div",{className:"text-sm font-semibold",children:"Guardando"})}),i.jsxs("div",{className:"p-3 md:p-5 border-b flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:F?"Editar pedido":"Nuevo pedido"}),i.jsx("div",{className:"text-xs text-gray-600",children:"U. Bruta viene de Orden Maestra. U. Vendedor e Inversionista se calculan aqu. U. Neta = U. Bruta - Gastos - U. Vendedor."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:lt,children:"Cerrar"}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",onClick:Dr,children:"Guardar"})]})]}),i.jsxs("div",{className:"p-3 md:p-5 space-y-3",children:[i.jsxs("button",{type:"button",className:"md:hidden w-full px-3 py-2 rounded border text-sm flex items-center justify-between",onClick:()=>ve(Je=>!Je),children:[i.jsx("span",{children:"Filtros y KPIs"}),i.jsx("span",{children:ne?"":"+"})]}),i.jsxs("div",{className:`${ne?"block":"hidden"} md:block space-y-3`,children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Vendedor"}),i.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:B,onChange:Je=>R(Je.target.value),disabled:Vn,children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),p.map(Je=>i.jsxs("option",{value:Je.id,children:[Je.name," ",Je.branch?`(${Je.branch})`:""]},Je.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded p-2 text-sm",value:Y,onChange:Je=>me(Je.target.value)})]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:Er,children:"Plantilla"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:Yr,children:"Importar CSV"}),i.jsx("input",{ref:pn,type:"file",accept:".csv,text/csv",className:"hidden",onChange:dn})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2",children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. asociados"}),i.jsx("div",{className:"text-lg font-semibold",children:ae.totalPackages})]}),l&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"text-lg font-semibold",children:Ks(ae.totalExpected)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:Ks(ae.grossProfit)})]})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"text-lg font-semibold",children:Ks(ae.uVendor)})]}),l&&i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Neta"}),i.jsx("div",{className:"text-lg font-semibold",children:Ks(fe)})]})]})]}),i.jsxs("div",{className:"border rounded p-3 space-y-2",children:[i.jsxs("button",{type:"button",className:"md:hidden w-full px-3 py-2 rounded border text-sm flex items-center justify-between",onClick:()=>ft(Je=>!Je),children:[i.jsx("span",{children:"Agregar producto"}),i.jsx("span",{children:Ge?"":"+"})]}),i.jsxs("div",{className:`${Ge?"block":"hidden"} md:block space-y-2`,children:[i.jsx("div",{className:"text-sm font-semibold hidden md:block",children:"Agregar producto"}),i.jsxs("div",{className:"grid md:grid-cols-4 gap-2",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Buscar"}),i.jsx("input",{className:"w-full border rounded p-2 text-sm",value:D,onChange:Je=>K(Je.target.value),placeholder:"Buscar por categora o nombre"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),i.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:pe,onChange:Je=>he(Je.target.value),children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),te.map(Je=>i.jsxs("option",{value:Je.id,children:[Je.category," - ",Je.name," (exist:"," ",b[Je.id]??0,")"]},Je.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("input",{className:"w-full border rounded p-2 text-sm",value:ge,onChange:Je=>se(Je.target.value),inputMode:"numeric"})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{className:"w-full px-3 py-2 rounded bg-gray-900 text-white text-sm hover:bg-black",onClick:tt,disabled:!Ne,children:"Agregar"})})]})]})]}),i.jsxs("div",{className:"border rounded",children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm font-semibold",children:["Productos asociados (",je.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Buscar producto",value:z,onChange:Je=>{Q(Je.target.value),de(1)}}),l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:Zt,disabled:!je.length,children:"Exportar CSV"})]})]}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1400px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2 border-b",children:"Categora"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Producto"}),i.jsxs("th",{className:"text-right p-2 border-b",children:["P. Asociados"," "]}),i.jsx("th",{className:"text-right p-2 border-b",children:"P. Restantes"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"Precio prov."}),i.jsx("th",{className:"text-right p-2 border-b",children:"Precio/paq"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Total esperado"}),l&&i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"text-right p-2 border-b",children:"U. Bruta"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Neta"})]}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Margen (%)"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Acciones"})]})}),i.jsxs("tbody",{children:[oe.map(Je=>{const{totalExpected:Bt,grossProfit:Ft,gastos:hr,uVendor:dr,uNeta:lr}=q(Je);return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-2 border-b",children:Je.category}),i.jsx("td",{className:"p-2 border-b",children:Je.productName}),i.jsx("td",{className:"p-2 border-b text-right",children:d?i.jsx("span",{children:Je.packages}):i.jsx("input",{className:"w-20 border rounded p-1 text-right",value:String(Je.packages),onChange:dt=>Pt(Je.id,dt.target.value),inputMode:"numeric"})}),i.jsx("td",{className:"p-2 border-b text-right",children:Je.remainingPackages}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:Ks(Je.providerPrice||0)}),i.jsx("td",{className:"p-2 border-b text-right",children:Ks(Je.pricePerPackage)}),i.jsx("td",{className:"p-2 border-b text-right",children:Ks(Bt)}),l&&i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border-b text-right",children:Ks(Ft)}),i.jsx("td",{className:"p-2 border-b text-right",children:Ks(hr)}),i.jsx("td",{className:"p-2 border-b text-right",children:Ks(lr)})]}),i.jsx("td",{className:"p-2 border-b text-right",children:Ks(dr)}),i.jsx("td",{className:"p-2 border-b text-right",children:d?i.jsxs("span",{children:[Number(Je.vendorMarginPercent??We(B)).toFixed(2),"%"]}):i.jsx("input",{type:"number",step:"0.01",min:0,className:"w-20 border rounded p-1 text-right",value:String(Je.vendorMarginPercent??We(B)),onChange:dt=>Ct(Je.id,dt.target.value),inputMode:"decimal"})}),i.jsx("td",{className:"p-2 border-b",children:!d&&i.jsx("button",{className:"px-3 py-1.5 rounded bg-red-600 text-white text-xs hover:bg-red-700",onClick:()=>ut(Je.id),children:"Quitar"})})]},Je.id)}),!oe.length&&i.jsx("tr",{children:i.jsx("td",{className:"p-3 text-sm text-gray-600",colSpan:l?13:9,children:"No hay productos asociados."})})]})]})}),i.jsxs("div",{className:"md:hidden p-3 space-y-2",children:[L.map(([Je,Bt])=>{const Ft=!!we[Je];return i.jsxs("div",{className:"border rounded",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-2 flex items-center justify-between text-sm",onClick:()=>Ae(Je),children:[i.jsx("span",{className:"font-semibold",children:Je}),i.jsxs("span",{className:"text-xs text-gray-600",children:[Bt.length," ",Bt.length===1?"producto":"productos"]})]}),Ft&&i.jsx("div",{className:"px-3 pb-3 space-y-2",children:Bt.map(hr=>{const{totalExpected:dr,grossProfit:lr,gastos:dt,uVendor:Et,uNeta:bt}=q(hr);return i.jsxs("div",{className:"border rounded p-2 text-xs space-y-2",children:[i.jsx("div",{className:"font-semibold text-sm",children:hr.productName}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes"}),d?i.jsx("div",{className:"font-semibold",children:hr.packages}):i.jsx("input",{className:"w-full border rounded p-1 text-right",value:String(hr.packages),onChange:Tt=>Pt(hr.id,Tt.target.value),inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:hr.remainingPackages})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Precio/paq"}),i.jsx("div",{className:"font-semibold",children:Ks(hr.pricePerPackage)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"font-semibold",children:Ks(dr)})]}),l&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta"}),i.jsx("div",{className:"font-semibold",children:Ks(lr)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Gastos"}),i.jsx("div",{className:"font-semibold",children:Ks(dt)})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"font-semibold",children:Ks(Et)})]}),l&&i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Neta"}),i.jsx("div",{className:"font-semibold",children:Ks(bt)})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-gray-600",children:"Margen (%)"}),d?i.jsxs("div",{className:"font-semibold",children:[Number(hr.vendorMarginPercent??We(B)).toFixed(2),"%"]}):i.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border rounded p-1 text-right",value:String(hr.vendorMarginPercent??We(B)),onChange:Tt=>Ct(hr.id,Tt.target.value),inputMode:"decimal"})]}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>ut(hr.id),children:"Quitar"})]})]},hr.id)})})]},Je)}),!oe.length&&i.jsx("div",{className:"p-3 text-sm text-gray-600 text-center",children:"No hay productos asociados."})]}),i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Pgina items ",Fe," / ",X]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:Ee,disabled:Fe<=1,children:""}),i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:Oe,disabled:Fe>=X,children:""})]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center md:justify-between",children:[i.jsx("div",{className:"text-xs text-gray-600",children:F?i.jsxs(i.Fragment,{children:["Editando: ",i.jsx("b",{children:F})]}):i.jsx(i.Fragment,{children:"Nuevo pedido (an no guardado)"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:lt,children:"Cancelar"}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",onClick:Dr,children:"Guardar pedido"})]})]}),h&&i.jsx("div",{className:"text-sm text-gray-700",children:h})]})]})}),i.jsx(_Qe,{open:wt,onClose:()=>Ve(!1),orders:$e,rows:P,setRows:j,isAdmin:l,currentUserEmail:r||"",currentUserName:"",sellerCandyId:e,sellers:p,products:v,transferAgg:ht,setTransferAgg:xt,setTransferRowDeltas:kt})]})}const zn=t=>Math.max(0,Math.floor(Number(t)||0)),Fb=t=>Math.round(t||0);function wse(t){const e=Math.max(1,zn(t.unitsPerPackage||1)),r=zn(t.totalUnits||0),n=zn(t.quantity||0),a=zn(t.packages||0);return r>0?r:n>0?n:a>0?a*e:0}function IQe(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):wse(t)}function aG(t){const e=Number(t.remainingPackages);if(Number.isFinite(e))return Math.max(0,Math.floor(e));const r=Math.max(1,zn(t.unitsPerPackage||1)),n=IQe(t);return Math.max(0,Math.floor(n/r))}function jQe(t){const e=Math.max(1,zn(t.unitsPerPackage||1)),r=wse(t);return Math.max(0,Math.floor(r/e))}function Ob(t){return String(t??"").trim().toLowerCase().replace(/\s+/g," ")}function _f(t){const e=String(t??"").trim();if(!e)return 0;const r=e.replace(/,/g,"."),n=Number(r);return Number.isFinite(n)?n:0}function yh(t,e){const r={};Object.keys(t||{}).forEach(n=>r[Ob(n)]=t[n]);for(const n of e){const a=r[Ob(n)];if(a!=null&&String(a).trim()!=="")return a}}function qm(t,e,r){const n=t*e,a=Math.min(Math.max(r.marginR,0),99.9)/100,s=Math.min(Math.max(r.marginSJ,0),99.9)/100,o=Math.min(Math.max(r.marginIsla,0),99.9)/100,l=e>0&&a<1?n/(1-a):n,c=e>0&&s<1?n/(1-s):n,u=e>0&&o<1?n/(1-o):n,d=l-n,f=c-n,A=u-n,h=e>0?Fb(l/e):0,m=e>0?Fb(c/e):0,p=e>0?Fb(u/e):0;return{subtotal:n,totalRivas:l,totalSanJorge:c,totalIsla:u,gainRivas:d,gainSanJorge:f,gainIsla:A,unitPriceRivas:h,unitPriceSanJorge:m,unitPriceIsla:p}}function PQe(t){return Number(t.gainRivas||0)}function BQe(t){return Number(t.gainIsla||0)}function K5(t,e,r){const n=PQe(t),a=BQe(t),s=Number(t.subtotal||0),o=e>0&&r>0?e*s/r:0;return{...t,grossProfit:n,grossProfitIsla:a,logisticAllocated:o}}function TQe(){const{refreshKey:t,refresh:e}=vc(),[r,n]=x.useState(""),[a,s]=x.useState(!0),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,f]=x.useState([]),[A,h]=x.useState(!1),[m,p]=x.useState([]),[g,v]=x.useState({}),[y,b]=x.useState(!1),[w,P]=x.useState(null),[j,_]=x.useState(""),[I,E]=x.useState(""),[F,k]=x.useState("20"),[B,R]=x.useState("15"),[Y,me]=x.useState("30"),[pe,he]=x.useState("0"),[ge,se]=x.useState([]),[je,Te]=x.useState(""),[D,K]=x.useState(""),[z,Q]=x.useState(""),[J,ee]=x.useState("1"),[M,G]=x.useState("0"),[ne,ve]=x.useState("DATOS"),[V,qe]=x.useState(""),[ie,re]=x.useState(1),Fe=15,de=x.useMemo(()=>Math.max(1,Math.ceil(m.length/Fe)),[m.length]);x.useEffect(()=>re(1),[m.length]);const we=x.useMemo(()=>{const L=(ie-1)*Fe;return m.slice(L,L+Fe)},[m,ie]),Le=x.useMemo(()=>{const L=new Set;for(const Ae of d){const Ee=String(Ae.category||"").trim();Ee&&L.add(Ee)}return Array.from(L).sort((Ae,Ee)=>Ae.localeCompare(Ee,"es"))},[d]);x.useEffect(()=>{!je&&Le.length>0&&Te(Le[0])},[Le]);const Ge=async()=>{h(!0);try{const L=await Lt(er(At(De,"products_candies"),bn("createdAt","desc"))),Ae=[];L.forEach(Ee=>{const Oe=Ee.data();Ae.push({id:Ee.id,name:String(Oe.name??"").trim(),category:String(Oe.category??"").trim()||"Caramelo",providerPrice:Number(Oe.providerPrice??0),unitsPerPackage:Number(Oe.unitsPerPackage??1)})}),f(Ae)}catch(L){console.error(L),n(" Error cargando catlogo de dulces.")}finally{h(!1)}};x.useEffect(()=>{Ge()},[t]);const ft=x.useMemo(()=>(je.trim().length>0?d.filter(Ae=>Ae.category===je):d).sort((Ae,Ee)=>Ae.name.localeCompare(Ee.name,"es")),[d,je]);x.useEffect(()=>{if(!D){Q(""),ee("1");return}const L=d.find(Ae=>Ae.id===D);L&&(Q(String(L.providerPrice??0)),ee(String(L.unitsPerPackage??1)))},[D,d]);const ht=()=>{P(null),_(""),E(""),se([]),Te(Le[0]||""),K(""),Q(""),G("0"),ee("1"),k("20"),R("15"),me("30"),he("0"),ve("DATOS"),qe("")},xt=()=>{if(n(""),!D){n("Selecciona un producto del catlogo.");return}const L=d.find(ae=>ae.id===D);if(!L){n("Producto de catlogo no encontrado (refresca).");return}const Ae=Number(L.providerPrice||0),Ee=zn(M||0),Oe=zn(L.unitsPerPackage||0);if(Ae<0){n("El precio proveedor no puede ser negativo.");return}if(Ee<=0){n("Los paquetes deben ser mayor que 0.");return}if(Oe<=0){n("Las unidades por paquete deben ser mayor que 0.");return}const Be=Number(F||0),S=Number(B||0),O=Number(Y||0),U=qm(Ae,Ee,{marginR:Be,marginSJ:S,marginIsla:O});if(ge.find(ae=>ae.id===L.id))se(ae=>ae.map(fe=>{if(fe.id!==L.id)return fe;const Ue=zn(fe.packages||0)+Ee,Ze=qm(Ae,Ue,{marginR:Number(fe.marginRivas??Be),marginSJ:Number(fe.marginSanJorge??S),marginIsla:Number(fe.marginIsla??O)}),Qe=zn(fe.remainingPackages??fe.packages)+Ee;return{...fe,providerPrice:Ae,unitsPerPackage:Oe,packages:Ue,remainingPackages:Qe,...Ze}}));else{const ae={id:L.id,name:L.name,category:L.category,providerPrice:Ae,packages:Ee,unitsPerPackage:Oe,marginRivas:Be,marginSanJorge:S,marginIsla:O,subtotal:U.subtotal,totalRivas:U.totalRivas,totalSanJorge:U.totalSanJorge,totalIsla:U.totalIsla,gainRivas:U.gainRivas,gainSanJorge:U.gainSanJorge,gainIsla:U.gainIsla,unitPriceRivas:U.unitPriceRivas,unitPriceSanJorge:U.unitPriceSanJorge,unitPriceIsla:U.unitPriceIsla,remainingPackages:Ee};se(fe=>[...fe,ae])}K(""),G("0"),ve("ITEMS")},jt=L=>{se(Ae=>Ae.filter(Ee=>Ee.id!==L))},kt=(L,Ae,Ee)=>{se(Oe=>Oe.map(Be=>{if(Be.id!==L)return Be;let S={...Be};if(Ae==="packages"&&(S.packages=zn(Ee||0)),Ae==="unitsPerPackage"&&(S.unitsPerPackage=zn(Ee||0)),Ae==="marginRivas"&&(S.marginRivas=Number(Ee||0)),Ae==="marginIsla"&&(S.marginIsla=Number(Ee||0)),Ae==="marginSanJorge"&&(S.marginSanJorge=Number(Ee||0)),Ae==="packages"||Ae==="marginRivas"||Ae==="marginIsla"||Ae==="marginSanJorge"){const O=qm(S.providerPrice,S.packages,{marginR:Number(S.marginRivas||0),marginSJ:Number(S.marginSanJorge||0),marginIsla:Number(S.marginIsla||0)});S={...S,...O}}return(S.remainingPackages===void 0||S.remainingPackages===null)&&(S.remainingPackages=S.packages),S}))},wt=x.useMemo(()=>{const L=ge.reduce((S,O)=>S+zn(O.packages),0),Ae=ge.reduce((S,O)=>S+Number(O.subtotal||0),0),Ee=ge.reduce((S,O)=>S+Number(O.totalRivas||0),0),Oe=ge.reduce((S,O)=>S+Number(O.totalSanJorge||0),0),Be=ge.reduce((S,O)=>S+Number(O.totalIsla||0),0);return{totalPackages:L,subtotal:Ae,totalRivas:Ee,totalSanJorge:Oe,totalIsla:Be}},[ge]),Ve=x.useMemo(()=>{const L=Math.max(0,_f(pe||0)),Ae=Number(wt.subtotal||0),Ee=ge.map(O=>K5(O,L,Ae)),Oe=Ee.reduce((O,U)=>O+Number(U.grossProfit||0),0),Be=Ee.reduce((O,U)=>O+Number(U.grossProfitIsla||0),0),S=Ee.reduce((O,U)=>O+Number(U.logisticAllocated||0),0);return{items:Ee,logisticsTotal:L,grossTotal:Oe,grossIslaTotal:Be,logisticAllocatedTotal:S}},[ge,pe,wt.subtotal]),Pe=x.useMemo(()=>{const L=String(V||"").trim().toLowerCase();return L?Ve.items.filter(Ae=>{const Ee=String(Ae.name||"").toLowerCase(),Oe=String(Ae.category||"").toLowerCase();return Ee.includes(L)||Oe.includes(L)}):Ve.items},[Ve.items,V]),[be,ce]=x.useState(1),te=15,Ne=x.useMemo(()=>Math.max(1,Math.ceil(Pe.length/te)),[Pe.length]);x.useEffect(()=>ce(1),[Pe.length]);const Re=x.useMemo(()=>{const L=(be-1)*te;return Pe.slice(L,L+te)},[Pe,be]),[ye,Xe]=x.useState({});x.useEffect(()=>Xe({}),[Pe.length]);const[mt,rt]=x.useState({});x.useEffect(()=>{const L={};for(const Ae of m)Ae&&Ae.id&&(L[Ae.id]=!1);rt(L)},[m]);const ue=x.useMemo(()=>({totalPackages:wt.totalPackages,subtotalCosto:wt.subtotal,esperadoRivas:wt.totalRivas,esperadoIsla:wt.totalIsla,gastosLogisticos:Ve.logisticsTotal,utilidadBrutaRivas:Ve.grossTotal,utilidadBrutaIsla:Ve.grossIslaTotal}),[wt,Ve]),_e=()=>{if(n(""),!d.length){n(" No hay catlogo cargado para generar plantilla.");return}const L=Number(F||0),Ae=Number(Y||0),Ee=d.slice().sort((q,ae)=>q.name.localeCompare(ae.name,"es")).map(q=>({Producto:q.name,Paquetes:"","Margen rivas":L,"Margen Isla":Ae,"P. unidad Rivas":"","P. unidad Isla":""})),Oe=[{Campo:"Gastos logisticos",Valor:_f(pe||0)}],Be=zs.book_new(),S=zs.json_to_sheet(Ee),O=zs.json_to_sheet(Oe);zs.book_append_sheet(Be,S,"Productos"),zs.book_append_sheet(Be,O,"Config");const U=I&&String(I).trim()||new Date().toISOString().slice(0,10);aF(Be,`plantilla_orden_maestra_${U}.xlsx`)},We=()=>{if(n(""),!Ve.items.length){n(" No hay items para exportar.");return}const L=Ve.items.slice().sort((S,O)=>S.name.localeCompare(O.name,"es")).map(S=>({Categora:S.category,Producto:S.name,Paquetes:zn(S.packages),"Paquetes restantes":zn(S.remainingPackages??S.packages),"Und x Paquete":zn(S.unitsPerPackage),"Precio proveedor":Number(S.providerPrice||0),Facturado:Number(S.subtotal||0),"Esperado Rivas":Number(S.totalRivas||0),"Esperado Isla":Number(S.totalIsla||0),"MV Rivas":Number(S.marginRivas||0),"MV Isla":Number(S.marginIsla||0),"Utilidad Bruta":Number(S.grossProfit||0),"Utilidad Bruta Isla":Number(S.grossProfitIsla||0),"Prorrateo logistico":Number(S.logisticAllocated||0),"Precio Rivas":Number(S.unitPriceRivas||0),"Precio Isla":Number(S.unitPriceIsla||0)})),Ae=[{KPI:"Paquetes totales",Valor:ue.totalPackages},{KPI:"Subtotal costo",Valor:ue.subtotalCosto},{KPI:"Esperado Rivas",Valor:ue.esperadoRivas},{KPI:"Esperado Isla",Valor:ue.esperadoIsla},{KPI:"Gastos logsticos",Valor:ue.gastosLogisticos},{KPI:"Utilidad Bruta Rivas",Valor:ue.utilidadBrutaRivas},{KPI:"Utilidad Bruta Isla",Valor:ue.utilidadBrutaIsla}],Ee=zs.book_new();zs.book_append_sheet(Ee,zs.json_to_sheet(L),"Productos"),zs.book_append_sheet(Ee,zs.json_to_sheet(Ae),"Resumen");const Oe=I&&String(I).trim()||new Date().toISOString().slice(0,10),Be=j&&String(j).trim()||`Orden_${Oe}`;aF(Ee,`orden_maestra_${Be.replace(/[^\w\-]+/g,"_")}_${Oe}.xlsx`)},ot=x.useRef(null),[Ce,$e]=x.useState(!1),gt=()=>{var L;if(!d.length){n(" Catlogo no cargado todava. Esper y prob de nuevo.");return}(L=ot.current)==null||L.click()},Kt=async L=>{var Ee;const Ae=(Ee=L.target.files)==null?void 0:Ee[0];if(Ae){L.target.value="",$e(!0),n("");try{const Oe=await Ae.arrayBuffer(),Be=M2(Oe,{type:"array"}),S=Be.SheetNames||[],O=Be.Sheets.Productos||Be.Sheets.Plantilla||Be.Sheets[S[0]];if(!O){n(" No se encontr hoja de Productos/Plantilla.");return}const U=zs.sheet_to_json(O,{defval:""});if(!U.length){n(" El Excel viene vaco.");return}let q=0;const ae=Be.Sheets.Config;if(ae){const Qe=zs.sheet_to_json(ae,{defval:""}),tt=new Map;for(const ut of Qe){const Pt=Ob(yh(ut,["Campo","Key","Nombre"])??""),Ct=yh(ut,["Valor","Value"]);Pt&&tt.set(Pt,Ct)}tt.has("gastos logisticos")&&(q=Math.max(0,_f(tt.get("gastos logisticos"))))}else for(const Qe of U){const tt=yh(Qe,["Gastos","Gasto","Gastos logisticos","Logistica"]),ut=_f(tt);if(ut>0){q=ut;break}}he(String(q||0));const fe=new Map;for(const Qe of d)fe.set(Ob(Qe.name),Qe);const Ue=[],Ze=new Map;for(let Qe=0;Qe<U.length;Qe++){const tt=U[Qe],ut=yh(tt,["Producto","Product","Nombre","Name"]),Pt=yh(tt,["Paquetes","Packages"]),Ct=yh(tt,["Margen rivas","Margen Rivas","MV Rivas"]),It=yh(tt,["Margen Isla","Margen isla","MV Isla"]),St=yh(tt,["P. unidad Rivas","P unidad Rivas","Precio Rivas"]),Zt=yh(tt,["P. unidad Isla","P unidad Isla","Precio Isla"]),Er=Ob(ut);if(!Er)continue;const Nr=fe.get(Er);if(!Nr){Ue.push(`Fila ${Qe+2}: Producto no existe en catlogo: "${String(ut).trim()}".`);continue}const Dr=Math.floor(_f(Pt));if(Dr<=0){Ue.push(`Fila ${Qe+2}: "Paquetes" invlido para "${Nr.name}".`);continue}const nn=String(Ct??"").trim()!==""?_f(Ct):Number(F||0),pn=String(It??"").trim()!==""?_f(It):Number(Y||0),Yr=Math.floor(_f(St)),dn=Math.floor(_f(Zt)),Vn=Ze.get(Nr.id);Vn?Ze.set(Nr.id,{packages:Vn.packages+Dr,mR:nn,mI:pn,puR:Yr>0?Yr:Vn.puR,puI:dn>0?dn:Vn.puI}):Ze.set(Nr.id,{packages:Dr,mR:nn,mI:pn,puR:Yr>0?Yr:void 0,puI:dn>0?dn:void 0})}const lt=[];Ze.forEach((Qe,tt)=>{const ut=d.find(dn=>dn.id===tt);if(!ut)return;const Pt=Number(ut.providerPrice||0),Ct=Math.max(1,zn(ut.unitsPerPackage||1)),It=Math.max(1,zn(Qe.packages)),St=Pt*It,Zt=Number(Qe.puR||0),Er=Number(Qe.puI||0),Nr=Zt>0||Er>0;let Dr=Qe.mR,nn=Qe.mI;const pn=Number(B||0);let Yr;if(Nr){const dn=qm(Pt,It,{marginR:Dr,marginSJ:pn,marginIsla:nn}),Vn=Zt>0?Zt*It:dn.totalRivas,an=Er>0?Er*It:dn.totalIsla,Je=Bt=>{if(!Number.isFinite(Bt)||Bt<=0)return 0;const Ft=(1-St/Bt)*100;return Math.min(Math.max(Ft,0),99.9)};Zt>0&&(Dr=Je(Vn)),Er>0&&(nn=Je(an)),Yr={subtotal:St,totalRivas:Vn,totalSanJorge:dn.totalSanJorge,totalIsla:an,gainRivas:Vn-St,gainSanJorge:dn.gainSanJorge,gainIsla:an-St,unitPriceRivas:It>0?Fb(Vn/It):0,unitPriceSanJorge:dn.unitPriceSanJorge,unitPriceIsla:It>0?Fb(an/It):0}}else Yr=qm(Pt,It,{marginR:Dr,marginSJ:pn,marginIsla:nn});lt.push({id:ut.id,name:ut.name,category:ut.category,providerPrice:Pt,packages:It,unitsPerPackage:Ct,marginRivas:Dr,marginSanJorge:pn,marginIsla:nn,subtotal:Yr.subtotal,totalRivas:Yr.totalRivas,totalSanJorge:Yr.totalSanJorge,totalIsla:Yr.totalIsla,gainRivas:Yr.gainRivas,gainSanJorge:Yr.gainSanJorge,gainIsla:Yr.gainIsla,unitPriceRivas:Yr.unitPriceRivas,unitPriceSanJorge:Yr.unitPriceSanJorge,unitPriceIsla:Yr.unitPriceIsla,remainingPackages:It})}),se(Qe=>{const tt=new Map;Qe.forEach(ut=>tt.set(ut.id,ut));for(const ut of lt){const Pt=tt.get(ut.id);if(!Pt)tt.set(ut.id,ut);else{const Ct=zn(Pt.packages)+zn(ut.packages),It=qm(Pt.providerPrice,Ct,{marginR:ut.marginRivas,marginSJ:Number(Pt.marginSanJorge||0),marginIsla:ut.marginIsla});tt.set(ut.id,{...Pt,packages:Ct,marginRivas:ut.marginRivas,marginIsla:ut.marginIsla,remainingPackages:zn(Pt.remainingPackages??Pt.packages)+zn(ut.packages),...It})}}return Array.from(tt.values()).sort((ut,Pt)=>ut.name.localeCompare(Pt.name,"es"))}),ve("ITEMS"),Ue.length?(n(` Importado con detalles. Errores: ${Ue.length}.`),console.warn("Errores import:",Ue)):n(` Importacin lista: ${lt.length} productos agregados.`)}catch(Oe){console.error(Oe),n(" Error importando Excel. Revis hojas: Productos + Config (o Plantilla).")}finally{$e(!1)}}};x.useEffect(()=>{(async()=>{s(!0);try{const L=er(At(De,"candy_main_orders"),bn("createdAt","desc")),Ae=await Lt(L),Ee=[];Ae.forEach(S=>{const O=S.data();Ee.push({id:S.id,name:O.name??"",date:O.date??"",totalPackages:Number(O.totalPackages??0),subtotal:Number(O.subtotal??0),totalRivas:Number(O.totalRivas??0),totalSanJorge:Number(O.totalSanJorge??0),totalIsla:Number(O.totalIsla??0),marginRivas:Number(O.marginRivas??20),marginSanJorge:Number(O.marginSanJorge??15),marginIsla:Number(O.marginIsla??30),logisticsCost:Number(O.logisticsCost??0),createdAt:O.createdAt??mr.now()})}),p(Ee);const Oe=await Lt(At(De,"inventory_candies")),Be={};Oe.forEach(S=>{const O=S.data(),U=O.orderId;if(!U)return;const q=jQe(O),ae=aG(O);Be[U]||(Be[U]={orderId:U,totalPackages:0,remainingPackages:0}),Be[U].totalPackages+=q,Be[U].remainingPackages+=ae}),v(Be)}catch(L){console.error(L),n(" Error cargando pedidos generales.")}finally{s(!1)}})()},[t]);const Ut=L=>{var Ae;return L.date?L.date:(Ae=L.createdAt)!=null&&Ae.toDate?L.createdAt.toDate().toISOString().slice(0,10):""},Jt=async L=>{if(L.preventDefault(),n(""),l(!0),!ge.length){n("Agrega al menos un producto a la orden.");return}try{const Ae=new Date().toISOString().slice(0,10),Ee=I||Ae,Oe=Number(F||0),Be=Number(B||0),S=Number(Y||0),O=Math.max(0,_f(pe||0));for(const Qe of ge){if(!String(Qe.name||"").trim()){n("Hay un producto sin nombre en el pedido.");return}if(Number(Qe.providerPrice||0)<0){n(`El precio proveedor no puede ser negativo (producto: ${Qe.name}).`);return}if(zn(Qe.packages)<=0){n(`Los paquetes deben ser mayor que 0 (producto: ${Qe.name}).`);return}if(zn(Qe.unitsPerPackage)<=0){n(`Las unidades por paquete deben ser mayor que 0 (producto: ${Qe.name}).`);return}}const U=Number(wt.subtotal||0),q=ge.map(Qe=>K5(Qe,O,U)),ae={totalPackages:wt.totalPackages,subtotal:wt.subtotal,totalRivas:wt.totalRivas,totalSanJorge:wt.totalSanJorge,totalIsla:wt.totalIsla},fe={name:j||`Pedido ${Ee}`,date:Ee,totalPackages:ae.totalPackages,subtotal:ae.subtotal,totalRivas:ae.totalRivas,totalSanJorge:ae.totalSanJorge,totalIsla:ae.totalIsla,marginRivas:Oe,marginSanJorge:Be,marginIsla:S,logisticsCost:O,uBrutaGlobal:Ve.grossTotal,items:q};if(w){await Cn(Yt(De,"candy_main_orders",w),{...fe});for(const ut of q){const Pt=await Lt(er(At(De,"inventory_candies"),ur("orderId","==",w),ur("productId","==",ut.id))),Ct=Math.max(1,zn(ut.unitsPerPackage||1)),It=zn(ut.packages)*Ct;if(Pt.empty)await Hn(At(De,"inventory_candies"),{productId:ut.id,productName:ut.name,category:ut.category,measurement:"unidad",quantity:It,remaining:It,packages:zn(ut.packages),remainingPackages:zn(ut.packages),unitsPerPackage:Ct,totalUnits:It,providerPrice:ut.providerPrice,subtotal:ut.subtotal,totalRivas:ut.totalRivas,totalSanJorge:ut.totalSanJorge,totalIsla:ut.totalIsla,gainRivas:ut.gainRivas,gainSanJorge:ut.gainSanJorge,gainIsla:ut.gainIsla,unitPriceRivas:ut.unitPriceRivas,unitPriceSanJorge:ut.unitPriceSanJorge,unitPriceIsla:ut.unitPriceIsla,date:Ee,createdAt:mr.now(),status:"PENDIENTE",orderId:w});else for(const St of Pt.docs){const Zt=St.data(),Er=zn(Zt.totalUnits??0),Nr=zn(Zt.remaining??Er),Dr=It-Er,nn=Math.max(0,Nr+Dr),pn=Math.max(0,Math.floor(nn/Ct));await Cn(Yt(De,"inventory_candies",St.id),{productName:ut.name,category:ut.category,unitsPerPackage:Ct,totalUnits:It,quantity:It,remaining:nn,packages:zn(ut.packages),remainingPackages:pn,providerPrice:ut.providerPrice,subtotal:ut.subtotal,totalRivas:ut.totalRivas,totalSanJorge:ut.totalSanJorge,totalIsla:ut.totalIsla,gainRivas:ut.gainRivas,gainSanJorge:ut.gainSanJorge,gainIsla:ut.gainIsla,unitPriceRivas:ut.unitPriceRivas,unitPriceSanJorge:ut.unitPriceSanJorge,unitPriceIsla:ut.unitPriceIsla,date:Ee})}}const Qe=await Lt(er(At(De,"inventory_candies"),ur("orderId","==",w))),tt=new Set(q.map(ut=>ut.id));for(const ut of Qe.docs){const Pt=ut.data(),Ct=String(Pt.productId||"");Ct&&!tt.has(Ct)&&await Dn(Yt(De,"inventory_candies",ut.id))}p(ut=>ut.map(Pt=>Pt.id===w?{...Pt,name:fe.name,date:fe.date,totalPackages:fe.totalPackages,subtotal:fe.subtotal,totalRivas:fe.totalRivas,totalSanJorge:fe.totalSanJorge,totalIsla:fe.totalIsla,marginRivas:fe.marginRivas,marginSanJorge:fe.marginSanJorge,marginIsla:fe.marginIsla,logisticsCost:fe.logisticsCost}:Pt)),n(" Orden maestra actualizada (pedido + inventario)."),ht(),b(!1),e();return}const Ze=(await Hn(At(De,"candy_main_orders"),{...fe,createdAt:mr.now()})).id,lt=Zd(De);for(const Qe of q){const tt=Math.max(1,zn(Qe.unitsPerPackage||1)),ut=zn(Qe.packages)*tt,Pt=Yt(At(De,"inventory_candies"));lt.set(Pt,{productId:Qe.id,productName:Qe.name,category:Qe.category,measurement:"unidad",quantity:ut,remaining:ut,packages:zn(Qe.packages),remainingPackages:zn(Qe.packages),unitsPerPackage:tt,totalUnits:ut,providerPrice:Qe.providerPrice,subtotal:Qe.subtotal,totalRivas:Qe.totalRivas,totalSanJorge:Qe.totalSanJorge,totalIsla:Qe.totalIsla,gainRivas:Qe.gainRivas,gainSanJorge:Qe.gainSanJorge,gainIsla:Qe.gainIsla,unitPriceRivas:Qe.unitPriceRivas,unitPriceSanJorge:Qe.unitPriceSanJorge,unitPriceIsla:Qe.unitPriceIsla,date:Ee,createdAt:mr.now(),status:"PENDIENTE",orderId:Ze})}await lt.commit(),n(" Orden maestra creada y registrada en inventario."),ht(),b(!1),e()}catch(Ae){console.error(Ae),n(" Error al guardar orden maestra.")}finally{l(!1)}},it=async L=>{try{s(!0),n(""),P(L.id),_(L.name),E(L.date),k(String(L.marginRivas??20)),R(String(L.marginSanJorge??15)),me(String(L.marginIsla??30));const Ae=Number(L.logisticsCost??0);he(String(Ae||0)),ve("DATOS");const Ee=Yt(De,"candy_main_orders",L.id),Oe=await ei(Ee);if(!Oe.exists()){n(" No se encontr la orden.");return}const Be=Oe.data(),S=Array.isArray(Be.items)?Be.items:[],O=await Lt(er(At(De,"inventory_candies"),ur("orderId","==",L.id))),U={};O.forEach(ae=>{const fe=ae.data(),Ue=String(fe.productId||"");if(!Ue)return;const Ze=aG(fe);U[Ue]=(U[Ue]||0)+Ze});const q=S.map(ae=>{const fe=d.find(Pt=>Pt.id===ae.id),Ue=Number((fe==null?void 0:fe.providerPrice)??ae.providerPrice??0),Ze=Math.max(1,zn((fe==null?void 0:fe.unitsPerPackage)??ae.unitsPerPackage??1)),lt=Number(ae.marginRivas??0),Qe=Number(ae.marginSanJorge??Number(B||0)),tt=Number(ae.marginIsla??0),ut=qm(Ue,zn(ae.packages||0),{marginR:lt,marginSJ:Qe,marginIsla:tt});return{...ae,name:String((fe==null?void 0:fe.name)??ae.name??"").trim(),category:String((fe==null?void 0:fe.category)??ae.category??"Caramelo").trim(),providerPrice:Ue,unitsPerPackage:Ze,remainingPackages:U[ae.id]??ae.remainingPackages??ae.packages??0,...ut}});se(q),b(!0)}catch(Ae){console.error(Ae),n(" Error al abrir orden maestra.")}finally{s(!1)}},X=async L=>{if(confirm(`Eliminar la orden "${L.name}" y todo su inventario asociado?`)){n("");try{const Ee=await Lt(er(At(De,"inventory_candies"),ur("orderId","==",L.id)));for(const Oe of Ee.docs)await Dn(Yt(De,"inventory_candies",Oe.id));await Dn(Yt(De,"candy_main_orders",L.id)),p(Oe=>Oe.filter(Be=>Be.id!==L.id)),n(" Orden maestra eliminada."),e()}catch(Ee){console.error(Ee),n(" Error al eliminar orden maestra.")}}},oe=async()=>{if(!c)try{u(!0),n("");const L=await Lt(At(De,"candy_main_orders"));let Ae=Zd(De),Ee=0,Oe=0;const Be=(S,O)=>Math.abs(Number(S||0)-Number(O||0))>.01;L.forEach(S=>{const O=S.data(),U=Array.isArray(O.items)?O.items:[];if(!U.length)return;const q=U.reduce((Qe,tt)=>Qe+Number(tt.subtotal||0),0);let ae=Number(O.logisticsCost??O.gastosLogisticos??O.gastos??0);if(Number.isFinite(ae)||(ae=0),!ae){const Qe=U.reduce((tt,ut)=>tt+Number(ut.logisticAllocated??0),0);ae=Number(Qe||0)}const fe=U.map(Qe=>K5(Qe,ae,q)),Ue=fe.reduce((Qe,tt)=>Qe+Number(tt.grossProfit||0),0);if(!(Be(O.logisticsCost,ae)||Be(O.uBrutaGlobal,Ue)||fe.some((Qe,tt)=>{const ut=U[tt]||{};return Be(ut.logisticAllocated,Qe.logisticAllocated)||Be(ut.grossProfit,Qe.grossProfit)||Be(ut.grossProfitIsla,Qe.grossProfitIsla)})))return;const lt=Yt(De,"candy_main_orders",S.id);Ae.update(lt,{logisticsCost:ae,uBrutaGlobal:Ue,items:fe,updatedAt:mr.now()}),Ee+=1,Oe+=1,Ee>=400&&(Ae.commit(),Ae=Zd(De),Ee=0)}),Ee>0&&await Ae.commit(),n(` Ordenes maestras actualizadas: ${Oe}`),e()}catch(L){console.error(L),n(" Error actualizando prorrateo de rdenes maestras.")}finally{u(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes Maestras"})}),i.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i.jsx("div",{}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(xc,{onClick:e,loading:a||A}),i.jsx("button",{className:"inline-flex items-center gap-2 bg-gray-200 text-gray-800 px-2 md:px-3 py-2 rounded-2xl hover:bg-gray-300 disabled:opacity-60",onClick:oe,disabled:c,children:c?"Actualizando prorrateo...":"Actualizar prorrateo"}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-2 md:px-3 py-2 rounded-2xl hover:bg-indigo-700 w-full md:w-auto max-w-[220px] justify-center",onClick:()=>{ht(),b(!0)},children:[i.jsx("span",{className:"items-center gap-4 inline-block bg-indigo-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nueva Orden"]})]})]}),r&&i.jsx("p",{className:"mt-2 text-sm",children:r})]}),y&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"relative bg-white p-4 md:p-6 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[o&&i.jsx("div",{className:"absolute inset-0 bg-white/70 z-50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white border rounded-xl px-4 py-3 shadow flex items-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-semibold",children:"Guardando orden"})]})}),i.jsxs("div",{className:"sticky top-0 bg-white z-20 pb-3 border-b",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-lg md:text-xl font-bold",children:w?"Editar Orden Maestra":"Nueva Orden Maestra"}),i.jsx("div",{className:"ml-auto flex gap-2",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:o,onClick:()=>{ht(),b(!1)},children:"Cerrar"})})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-1 gap-2",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold",children:"Gastos logsticos (orden)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:pe,onChange:L=>he(L.target.value),placeholder:"0",min:0})]})}),i.jsx("div",{className:"md:hidden mt-3",children:i.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.jsx("button",{type:"button",onClick:()=>ve("DATOS"),className:`px-2 py-2 rounded text-xs font-semibold border ${ne==="DATOS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Datos"}),i.jsx("button",{type:"button",onClick:()=>ve("AGREGAR"),className:`px-2 py-2 rounded text-xs font-semibold border ${ne==="AGREGAR"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Agregar"}),i.jsxs("button",{type:"button",onClick:()=>ve("ITEMS"),className:`px-2 py-2 rounded text-xs font-semibold border ${ne==="ITEMS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:["Items (",ge.length,")"]}),i.jsx("button",{type:"button",onClick:()=>ve("TOTALES"),className:`px-2 py-2 rounded text-xs font-semibold border ${ne==="TOTALES"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Totales"})]})})]}),i.jsxs("form",{onSubmit:Jt,className:"space-y-4 pt-4",children:[i.jsx("input",{ref:ot,type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:Kt}),i.jsx("div",{className:`${ne==="DATOS"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de Orden"}),i.jsx("input",{className:"w-full border p-2 rounded",value:j,onChange:L=>_(L.target.value),placeholder:"Ej: Pedido enero 19"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:I,onChange:L=>E(L.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Rivas"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:F,onChange:L=>k(L.target.value)})]}),i.jsx("input",{type:"hidden",value:B,readOnly:!0}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Isla Ometepe"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:Y,onChange:L=>me(L.target.value)})]})]})}),i.jsx("div",{className:`${ne==="AGREGAR"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora (dinmica)"}),i.jsx("select",{className:"w-full border p-2 rounded",value:je,onChange:L=>{Te(L.target.value),K("")},disabled:A,children:Le.length===0?i.jsx("option",{value:"",children:A?"Cargando...":"No hay categoras en catlogo"}):Le.map(L=>i.jsx("option",{value:L,children:L},L))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (catlogo)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:D,onChange:L=>K(L.target.value),children:[i.jsx("option",{value:"",children:A?"Cargando catlogo...":"Selecciona producto"}),ft.map(L=>i.jsx("option",{value:L.id,children:L.name},L.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor (paq)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:z,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),i.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:M,onChange:L=>G(L.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:J,readOnly:!0})]})]}),i.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-end gap-2 mt-3",children:i.jsx("button",{type:"button",onClick:xt,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto"})})]})}),i.jsxs("div",{className:"hidden md:flex items-center justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:_e,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",title:"Descarga plantilla (Productos + Config)",children:"Descargar plantilla"}),i.jsx("button",{type:"button",onClick:gt,disabled:Ce,className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",title:"Importa desde Excel (Productos + Config)",children:Ce?"Importando...":"Importar Excel"}),i.jsx("button",{type:"button",onClick:We,className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",title:"Exporta la orden actual (Productos + Resumen)",children:"Exportar Excel"})]}),i.jsx("div",{className:`${ne==="ITEMS"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"mb-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Items:"," ",i.jsx("span",{className:"font-semibold",children:ge.length}),V.trim()?i.jsxs(i.Fragment,{children:[" "," Mostrando"," ",i.jsx("span",{className:"font-semibold",children:Pe.length})]}):null]}),i.jsx("input",{value:V,onChange:L=>qe(L.target.value),placeholder:"Buscar producto o categora",className:"w-full md:w-80 border rounded px-3 py-2 text-sm"})]}),i.jsxs("div",{className:"hidden md:block",children:[i.jsx("div",{className:"overflow-x-auto border rounded pb-5",children:i.jsxs("table",{className:"min-w-[1400px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2",children:"Categora"}),i.jsx("th",{className:"text-left p-2",children:"Producto"}),i.jsx("th",{className:"text-right p-2",children:"Paquetes"}),i.jsx("th",{className:"text-right p-2",children:"Restantes"}),i.jsx("th",{className:"text-right p-2",children:"Und x Paq"}),i.jsx("th",{className:"text-right p-2",children:"Precio prov"}),i.jsx("th",{className:"text-right p-2",children:"Facturado"}),i.jsx("th",{className:"text-right p-2",children:"Esperado Rivas"}),i.jsx("th",{className:"text-right p-2",children:"Esperado Isla"}),i.jsx("th",{className:"text-right p-2",children:"MV Rivas"}),i.jsx("th",{className:"text-right p-2",children:"MV Isla"}),i.jsx("th",{className:"text-right p-2",children:"U. Bruta Rivas"}),i.jsx("th",{className:"text-right p-2",children:"U. Bruta Isla"}),i.jsx("th",{className:"text-right p-2",children:"Prorrateo"}),i.jsx("th",{className:"text-right p-2",children:"Precio Rivas"}),i.jsx("th",{className:"text-right p-2",children:"Precio Isla"}),i.jsx("th",{className:"text-center p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[Re.map(L=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:L.category}),i.jsx("td",{className:"p-2 font-semibold",children:L.name}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:L.packages,onChange:Ae=>kt(L.id,"packages",Ae.target.value)})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("span",{className:"inline-block min-w-[60px] text-right",children:zn(L.remainingPackages??L.packages)})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:L.unitsPerPackage,onChange:Ae=>kt(L.id,"unitsPerPackage",Ae.target.value)})}),i.jsx("td",{className:"p-2 text-right",children:Number(L.providerPrice||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(L.subtotal||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(L.totalRivas||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(L.totalIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",className:"w-16 border rounded p-1 text-right",value:Number(L.marginRivas??0),onChange:Ae=>kt(L.id,"marginRivas",Ae.target.value)})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",className:"w-16 border rounded p-1 text-right",value:Number(L.marginIsla??0),onChange:Ae=>kt(L.id,"marginIsla",Ae.target.value)})}),i.jsx("td",{className:"p-2 text-right",children:Number(L.grossProfit||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(L.grossProfitIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(L.logisticAllocated||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(L.unitPriceRivas||0)}),i.jsx("td",{className:"p-2 text-right",children:Number(L.unitPriceIsla||0)}),i.jsx("td",{className:"p-2 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>jt(L.id),children:"Quitar"})})]},L.id)),Pe.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center text-gray-500",children:"No hay productos en la orden."})})]})]})}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando"," ",Math.min((be-1)*te+1,Pe.length),"-",Math.min(be*te,Pe.length)," ","de ",Pe.length]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:be<=1,onClick:()=>ce(L=>Math.max(1,L-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),i.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[be," / ",Ne]}),i.jsx("button",{type:"button",disabled:be>=Ne,onClick:()=>ce(L=>Math.min(Ne,L+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]}),i.jsx("div",{className:"md:hidden space-y-3",children:Pe.length===0?i.jsx("div",{className:"p-4 border rounded bg-gray-50 text-gray-600",children:"No hay productos en esta orden."}):Pe.map(L=>i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-base leading-tight truncate",children:L.name}),i.jsx("div",{className:"text-xs text-gray-500 truncate",children:L.category})]}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>jt(L.id),children:"Quitar"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:L.packages,onChange:Ae=>kt(L.id,"packages",Ae.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes restantes"}),i.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:L.remainingPackages??L.packages,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Und x Paquete"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:L.unitsPerPackage,onChange:Ae=>kt(L.id,"unitsPerPackage",Ae.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Precio proveedor"}),i.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Number(L.providerPrice||0).toFixed(2),readOnly:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"MV Rivas (%)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:L.marginRivas??0,onChange:Ae=>kt(L.id,"marginRivas",Ae.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"MV Isla (%)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:L.marginIsla??0,onChange:Ae=>kt(L.id,"marginIsla",Ae.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Facturado"}),i.jsx("div",{className:"font-semibold",children:Number(L.subtotal||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(L.totalRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Isla"}),i.jsx("div",{className:"font-semibold",children:Number(L.totalIsla||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prorrateo logstico"}),i.jsx("div",{className:"font-semibold",children:Number(L.logisticAllocated||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(L.grossProfit||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta Isla"}),i.jsx("div",{className:"font-semibold",children:Number(L.grossProfitIsla||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Precio Rivas (paq)"}),i.jsx("div",{className:"font-semibold",children:L.unitPriceRivas})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Precio Isla (paq)"}),i.jsx("div",{className:"font-semibold",children:L.unitPriceIsla})]})]})]},L.id))})]})}),i.jsxs("div",{className:`${ne==="TOTALES"?"block":"hidden"} md:block`,children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"text-lg font-semibold",children:ue.totalPackages})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (facturado)"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(ue.subtotalCosto||0).toFixed(2)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado (Rivas / Isla)"}),i.jsxs("div",{className:"text-sm font-semibold",children:["Rivas: ",Number(ue.esperadoRivas||0).toFixed(2),i.jsx("br",{}),"Isla: ",Number(ue.esperadoIsla||0).toFixed(2)]})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos logsticos"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(ue.gastosLogisticos||0).toFixed(2)})]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Rivas"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(ue.utilidadBrutaRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Isla"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(ue.utilidadBrutaIsla||0).toFixed(2)})]})]}),i.jsx("div",{className:"mt-3 border rounded p-3 bg-white",children:i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:We,disabled:!Ve.items.length,title:"Exporta la orden actual (productos + resumen)",children:"Exportar orden a Excel"})})})]})]}),i.jsxs("div",{className:"sticky bottom-0 bg-white pt-3 mt-4 border-t",children:[i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:ht,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar orden"}),i.jsx("button",{type:"button",onClick:()=>{ht(),b(!1)},className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cerrar"}),i.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:o||ge.length===0,children:o?"Guardando...":"Guardar orden"})]}),i.jsx("div",{className:"md:hidden mt-2",children:i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>{ve(ne==="DATOS"&&!w?"AGREGAR":ne==="DATOS"||ne==="AGREGAR"?"ITEMS":ne==="ITEMS"?"TOTALES":"DATOS")},children:"Siguiente"})})]})]})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"md:hidden space-y-3",children:a?i.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Cargando"}):m.length===0?i.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Sin ordenes maestras."}):m.map(L=>{const Ae=g[L.id],Ee=Ut(L),Oe=L.totalPackages>0?(L.subtotal/L.totalPackages).toFixed(2):"0.00",Be=Number(L.logisticsCost||0),S=Number(L.totalRivas||0)-Number(L.subtotal||0);return i.jsxs("div",{className:"border rounded-xl p-3 bg-white shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xs text-gray-500",children:Ee}),i.jsx("div",{className:"font-semibold text-base leading-tight",children:L.name})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-xs",onClick:()=>it(L),children:"Ver"}),i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>X(L),children:"Borrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:L.totalPackages})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:Ae?Ae.remainingPackages:0})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. Proveedor"}),i.jsx("div",{className:"font-semibold",children:Oe})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),i.jsx("div",{className:"font-semibold",children:Number(L.subtotal||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Esperado Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(L.totalRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Esperado Isla"}),i.jsx("div",{className:"font-semibold",children:Number(L.totalIsla||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Gastos log."}),i.jsx("div",{className:"font-semibold",children:Be.toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta (est)"}),i.jsx("div",{className:"font-semibold",children:S.toFixed(2)})]})]})]},L.id)})}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:[i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Proveedor"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Esperado Rivas"}),i.jsx("th",{className:"p-2 border",children:"Esperado Isla"}),i.jsx("th",{className:"p-2 border",children:"Gastos log."}),i.jsx("th",{className:"p-2 border",children:"U. Bruta (est)"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin ordenes maestras."})}):we.map(L=>{const Ae=g[L.id],Ee=Ut(L),Oe=L.totalPackages>0?(L.subtotal/L.totalPackages).toFixed(2):"0.00",Be=Number(L.logisticsCost||0),S=Number(L.totalRivas||0)-Number(L.subtotal||0);return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:Ee}),i.jsx("td",{className:"p-2 border text-left",children:L.name}),i.jsx("td",{className:"p-2 border",children:L.totalPackages}),i.jsx("td",{className:"p-2 border",children:Ae?Ae.remainingPackages:0}),i.jsx("td",{className:"p-2 border",children:Oe}),i.jsx("td",{className:"p-2 border",children:Number(L.subtotal||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(L.totalRivas||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(L.totalIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Be.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:S.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>it(L),children:"Ver / Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>X(L),children:"Borrar"})]})})]},L.id)})})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",Math.min((ie-1)*Fe+1,m.length),"-",Math.min(ie*Fe,m.length)," de ",m.length]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:ie<=1,onClick:()=>re(L=>Math.max(1,L-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),i.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[ie," / ",de]}),i.jsx("button",{type:"button",disabled:ie>=de,onClick:()=>re(L=>Math.min(de,L+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]})]})]})}const c0=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function q5(t){const e=Number(t.packages||0),r=Number(t.providerPrice||0),n=Number(t.unitsPerPackage||0),a=r*e,s=e>0&&n>0?e*n:1,o=Number(t.marginRivas||0),l=Number(t.marginSanJorge||0),c=Number(t.marginIsla||0),u=a*(1+o/100),d=a*(1+l/100),f=a*(1+c/100),A=u-a,h=d-a,m=f-a,p=u/s,g=d/s,v=f/s;return{...t,subtotal:Number(a.toFixed(2)),totalRivas:Number(u.toFixed(2)),totalSanJorge:Number(d.toFixed(2)),totalIsla:Number(f.toFixed(2)),gainRivas:Number(A.toFixed(2)),gainSanJorge:Number(h.toFixed(2)),gainIsla:Number(m.toFixed(2)),unitPriceRivas:Number(p.toFixed(2)),unitPriceSanJorge:Number(g.toFixed(2)),unitPriceIsla:Number(v.toFixed(2))}}function sG(t){return t.reduce((e,r)=>(e.totalPackages+=Number(r.packages||0),e.subtotal+=Number(r.subtotal||0),e.totalRivas+=Number(r.totalRivas||0),e.totalSanJorge+=Number(r.totalSanJorge||0),e.totalIsla+=Number(r.totalIsla||0),e),{totalPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0})}function Ic(t,e=0){const r=Number(t);return Number.isFinite(r)?r:e}function z5(t){const{margin:e,gain:r,subtotal:n,orderMargin:a}=t;if(e!=null&&Number.isFinite(Number(e)))return Number(e);const s=Number(n||0),o=Number(r);return Number.isFinite(o)&&s>0?o/s*100:Number(a||0)}function kQe(){var Q,J,ee;const[t,e]=x.useState([]),[r,n]=x.useState({}),[a,s]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState(jr(wd(new Date),"yyyy-MM-dd")),[d,f]=x.useState(jr(bd(new Date),"yyyy-MM-dd")),[A,h]=x.useState(!1),[m,p]=x.useState(!1),[g,v]=x.useState(null),[y,b]=x.useState([]),[w,P]=x.useState(0),[j,_]=x.useState(0),[I,E]=x.useState(0),[F,k]=x.useState(""),[B,R]=x.useState(""),[Y,me]=x.useState(0),[pe,he]=x.useState(0),[ge,se]=x.useState(1);x.useEffect(()=>{(async()=>{try{s(!0),l("");const M=er(At(De,"candy_main_orders"),bn("createdAt","desc")),G=await Lt(M),ne=[];G.forEach(qe=>{const ie=qe.data();ne.push({id:qe.id,name:ie.name??"",date:ie.date??"",totalPackages:Number(ie.totalPackages??0),subtotal:Number(ie.subtotal??0),totalRivas:Number(ie.totalRivas??0),totalSanJorge:Number(ie.totalSanJorge??0),totalIsla:Number(ie.totalIsla??0),marginRivas:Number(ie.marginRivas??0),marginSanJorge:Number(ie.marginSanJorge??0),marginIsla:Number(ie.marginIsla??0),createdAt:ie.createdAt??mr.now()})}),e(ne);const ve=await Lt(er(At(De,"inventory_candies"))),V={};ve.forEach(qe=>{const ie=qe.data(),re=ie.orderId;if(!re)return;const Fe=Number(ie.unitsPerPackage||1)||1,de=Number(ie.totalUnits??(ie.packages||0)*Fe),we=Math.round(de/Fe),Le=Number(ie.remaining??ie.totalUnits??de),Ge=Number(ie.remainingPackages??NaN),ft=Number.isFinite(Ge)?Math.round(Ge):Math.round(Le/Fe);V[re]||(V[re]={orderId:re,totalPackages:0,remainingPackages:0}),V[re].totalPackages+=we,V[re].remainingPackages+=ft}),n(V)}catch(M){console.error(M),l(" Error cargando inventario de pedidos.")}finally{s(!1)}})()},[]);const je=x.useMemo(()=>t.filter(M=>{var ne;const G=M.date||((ne=M.createdAt)!=null&&ne.toDate?M.createdAt.toDate().toISOString().slice(0,10):"");return!(!G||c&&G<c||d&&G>d)}),[t,c,d]),Te=x.useMemo(()=>{let M=0,G=0,ne=0,ve=0,V=0,qe=0;for(const ie of je){M+=ie.totalPackages,G+=ie.subtotal,ne+=ie.totalRivas,ve+=ie.totalSanJorge,V+=ie.totalIsla;const re=r[ie.id];re&&(qe+=re.remainingPackages)}return{totalPaquetes:M,totalSubtotal:G,totalRivas:ne,totalSJ:ve,totalIsla:V,totalPaquetesRestantes:qe,totalPedidos:je.length}},[je,r]),D=async(M,G,ne)=>{if(!g)return;const ve=Number(ne||0),V=y.map(re=>re.id!==M?re:q5({...re,[G]:ve}));b(V);const qe=V.find(re=>re.id===M);if(!qe)return;const ie=sG(V);try{await Cn(Yt(De,"products_candies",M),{marginRivas:qe.marginRivas,marginSanJorge:qe.marginSanJorge,marginIsla:qe.marginIsla,subtotal:qe.subtotal,totalRivas:qe.totalRivas,totalSanJorge:qe.totalSanJorge,totalIsla:qe.totalIsla,unitPriceRivas:qe.unitPriceRivas,unitPriceSanJorge:qe.unitPriceSanJorge,unitPriceIsla:qe.unitPriceIsla,gainRivas:qe.gainRivas,gainSanJorge:qe.gainSanJorge,gainIsla:qe.gainIsla}),await Cn(Yt(De,"candy_main_orders",g.id),{totalPackages:ie.totalPackages,subtotal:Number(ie.subtotal.toFixed(2)),totalRivas:Number(ie.totalRivas.toFixed(2)),totalSanJorge:Number(ie.totalSanJorge.toFixed(2)),totalIsla:Number(ie.totalIsla.toFixed(2))}),v(re=>re&&{...re,totalPackages:ie.totalPackages,subtotal:Number(ie.subtotal.toFixed(2)),totalRivas:Number(ie.totalRivas.toFixed(2)),totalSanJorge:Number(ie.totalSanJorge.toFixed(2)),totalIsla:Number(ie.totalIsla.toFixed(2))}),l(" Mrgenes del producto actualizados.")}catch(re){console.error(re),l(" Error actualizando mrgenes del producto.")}},K=async()=>{if(g)try{l("");const M=Number.isFinite(w)&&w!==0?w:g.marginRivas||0,G=Number.isFinite(j)&&j!==0?j:g.marginSanJorge||0,ne=Number.isFinite(I)&&I!==0?I:g.marginIsla||0,ve=q5({id:"tmp",name:F.trim(),category:B.trim(),providerPrice:Number(Y||0),packages:Number(pe||0),unitsPerPackage:Number(ge||1),marginRivas:Number(M||0),marginSanJorge:Number(G||0),marginIsla:Number(ne||0),subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,gainRivas:0,gainSanJorge:0,gainIsla:0,unitPriceRivas:0,unitPriceSanJorge:0,unitPriceIsla:0,remainingPackages:Number(pe||0)}),V=await Hn(At(De,"products_candies"),{orderId:g.id,inventoryDate:g.date||"",name:ve.name,category:ve.category,providerPrice:ve.providerPrice,packages:ve.packages,unitsPerPackage:ve.unitsPerPackage,marginRivas:ve.marginRivas,marginSanJorge:ve.marginSanJorge,marginIsla:ve.marginIsla,gainRivas:ve.gainRivas,gainSanJorge:ve.gainSanJorge,gainIsla:ve.gainIsla,subtotal:ve.subtotal,totalRivas:ve.totalRivas,totalSanJorge:ve.totalSanJorge,totalIsla:ve.totalIsla,unitPriceRivas:ve.unitPriceRivas,unitPriceSanJorge:ve.unitPriceSanJorge,unitPriceIsla:ve.unitPriceIsla,createdAt:mr.now()}),ie=[{...ve,id:V.id},...y];b(ie);const re=sG(ie);await Cn(Yt(De,"candy_main_orders",g.id),{totalPackages:re.totalPackages,subtotal:Number(re.subtotal.toFixed(2)),totalRivas:Number(re.totalRivas.toFixed(2)),totalSanJorge:Number(re.totalSanJorge.toFixed(2)),totalIsla:Number(re.totalIsla.toFixed(2))}),v(Fe=>Fe&&{...Fe,totalPackages:re.totalPackages,subtotal:Number(re.subtotal.toFixed(2)),totalRivas:Number(re.totalRivas.toFixed(2)),totalSanJorge:Number(re.totalSanJorge.toFixed(2)),totalIsla:Number(re.totalIsla.toFixed(2))}),P(0),_(0),E(0),k(""),R(""),me(0),he(0),se(1),l(" Producto agregado con mrgenes por sucursal.")}catch(M){console.error(M),l(" Error agregando producto al pedido.")}},z=async M=>{try{v(M),b([]),h(!0),p(!0),l("");const G=await Lt(er(At(De,"inventory_candies"),ur("orderId","==",M.id))),ne={};G.forEach(qe=>{const ie=qe.data(),re=ie.productId;if(!re)return;const Fe=Number(ie.unitsPerPackage||1)||1,de=Number(ie.remaining??ie.totalUnits??0),we=Number(ie.remainingPackages??NaN),Le=Number.isFinite(we)?Math.round(we):Math.round(de/Fe);ne[re]=(ne[re]||0)+Le});const ve=await Lt(er(At(De,"products_candies"),ur("orderId","==",M.id))),V=[];ve.forEach(qe=>{const ie=qe.data(),re=Ic(ie.providerPrice,0),Fe=Ic(ie.packages,0),de=ie.subtotal??re*Fe,we=z5({margin:ie.marginRivas,gain:ie.gainRivas,subtotal:de,orderMargin:M.marginRivas||0}),Le=z5({margin:ie.marginSanJorge,gain:ie.gainSanJorge,subtotal:de,orderMargin:M.marginSanJorge||0}),Ge=z5({margin:ie.marginIsla,gain:ie.gainIsla,subtotal:de,orderMargin:M.marginIsla||0}),ft=q5({id:qe.id,name:ie.name??"",category:ie.category??"",providerPrice:re,packages:Fe,unitsPerPackage:Ic(ie.unitsPerPackage,1),marginRivas:Number(we||0),marginSanJorge:Number(Le||0),marginIsla:Number(Ge||0),subtotal:Ic(ie.subtotal,0),totalRivas:Ic(ie.totalRivas,0),totalSanJorge:Ic(ie.totalSanJorge,0),totalIsla:Ic(ie.totalIsla,0),gainRivas:Ic(ie.gainRivas,0),gainSanJorge:Ic(ie.gainSanJorge,0),gainIsla:Ic(ie.gainIsla,0),unitPriceRivas:Ic(ie.unitPriceRivas,0),unitPriceSanJorge:Ic(ie.unitPriceSanJorge,0),unitPriceIsla:Ic(ie.unitPriceIsla,0),remainingPackages:ne[qe.id]??Ic(ie.packages,0)});V.push(ft)}),b(V)}catch(G){console.error(G),l(" Error cargando productos del pedido.")}finally{p(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Ordenes Maestras"})}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:M=>u(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:M=>f(M.target.value)})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f("")},children:"Quitar filtro"}),i.jsxs("div",{className:"ml-auto text-xs md:text-sm text-gray-600",children:["Cantidad de pedidos:"," ",i.jsx("span",{className:"font-semibold",children:Te.totalPedidos})]})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes totales:"})," ",Te.totalPaquetes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Te.totalPaquetesRestantes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Subtotal total:"})," ",c0(Te.totalSubtotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Rivas (todo):"})," ",c0(Te.totalRivas)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total San Jorge (todo):"})," ",c0(Te.totalSJ)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Isla (todo):"})," ",c0(Te.totalIsla)]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-2",children:i.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. prom. Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. prom. San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. prom. Isla"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):je.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin pedidos generales en este rango."})}):je.map(M=>{var ie;const G=M.totalPackages>0?Math.round(M.totalRivas/M.totalPackages):0,ne=M.totalPackages>0?Math.round(M.totalSanJorge/M.totalPackages):0,ve=M.totalPackages>0?Math.round(M.totalIsla/M.totalPackages):0,V=M.date||((ie=M.createdAt)!=null&&ie.toDate?M.createdAt.toDate().toISOString().slice(0,10):""),qe=r[M.id];return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:V}),i.jsx("td",{className:"p-2 border",children:M.name}),i.jsx("td",{className:"p-2 border",children:M.totalPackages}),i.jsx("td",{className:"p-2 border",children:qe?qe.remainingPackages:0}),i.jsx("td",{className:"p-2 border",children:M.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:G}),i.jsx("td",{className:"p-2 border",children:ne}),i.jsx("td",{className:"p-2 border",children:ve}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>z(M),children:"Ver pedido"})})]},M.id)})})]})}),A&&g&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h3",{className:"text-xl font-bold",children:["Detalle: ",g.name]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:()=>{h(!1),v(null),b([]),l("")},children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 text-xs md:text-sm",children:[i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Fecha del pedido"}),i.jsx("div",{className:"font-semibold",children:g.date||((Q=g.createdAt)!=null&&Q.toDate?g.createdAt.toDate().toISOString().slice(0,10):"")})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"font-semibold",children:((J=r[g.id])==null?void 0:J.totalPackages)??g.totalPackages})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes restantes"}),i.jsx("div",{className:"font-semibold",children:((ee=r[g.id])==null?void 0:ee.remainingPackages)??0})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Subtotal (proveedor)"}),i.jsx("div",{className:"font-semibold",children:c0(g.subtotal)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),i.jsx("div",{className:"font-semibold",children:c0(g.totalRivas)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total San Jorge"}),i.jsx("div",{className:"font-semibold",children:c0(g.totalSanJorge)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total Isla"}),i.jsx("div",{className:"font-semibold",children:c0(g.totalIsla)})]})]}),i.jsxs("div",{className:"bg-white border rounded p-3 mb-4",children:[i.jsx("div",{className:"font-semibold mb-2",children:"Agregar producto"}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-end text-xs",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen Rivas"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:w,onChange:M=>P(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen SJ"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:j,onChange:M=>_(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen Isla"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:I,onChange:M=>E(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Producto"}),i.jsx("input",{className:"border rounded px-2 py-1 w-56",value:F,onChange:M=>k(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Categora"}),i.jsx("input",{className:"border rounded px-2 py-1 w-40",value:B,onChange:M=>R(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"P. proveedor (paq)"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-32 text-right",value:Y,onChange:M=>me(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Paquetes"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:pe,onChange:M=>he(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Und x Paq"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:ge,onChange:M=>se(Number(M.target.value||1))})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:K,children:"Agregar producto"})]})]}),i.jsx("h4",{className:"font-semibold mb-2",children:"Productos del pedido"}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Und x Paq"}),i.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),i.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Isla"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Cargando productos"})}):y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Este pedido no tiene productos registrados."})}):y.map(M=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:M.name}),i.jsx("td",{className:"p-2 border",children:M.category}),i.jsx("td",{className:"p-2 border",children:M.packages}),i.jsx("td",{className:"p-2 border",children:M.remainingPackages??M.packages}),i.jsx("td",{className:"p-2 border",children:M.unitsPerPackage}),i.jsx("td",{className:"p-2 border",children:M.providerPrice.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:M.marginRivas??0,onChange:G=>D(M.id,"marginRivas",G.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:M.marginSanJorge??0,onChange:G=>D(M.id,"marginSanJorge",G.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:M.marginIsla??0,onChange:G=>D(M.id,"marginIsla",G.target.value)})}),i.jsx("td",{className:"p-2 border",children:M.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.unitPriceRivas}),i.jsx("td",{className:"p-2 border",children:M.unitPriceSanJorge}),i.jsx("td",{className:"p-2 border",children:M.unitPriceIsla})]},M.id))})]})}),o&&i.jsx("p",{className:"mt-3 text-sm",children:o})]})}),o&&!A&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const es=t=>Math.round((Number(t)||0)*100)/100,mx=t=>Math.round((Number(t)||0)*1e3)/1e3,Yo=t=>Number(t??0).toFixed(2),zm=t=>Number(t??0).toFixed(3);async function FQe(t){if(!t)return;const e=er(At(De,"ar_movements"),ur("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Dn(Yt(De,"ar_movements",n.id))))}const OQe=(t,e)=>{var h;const r=t.date??((h=t.timestamp)!=null&&h.toDate?jr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",o=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0,u=t.processedDate??t.closureDate??"";if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),v=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(v||0)>0&&(y=es(c*Number(v||0)/l)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:es(v),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(m==null?void 0:m.allocations)?m.allocations:t.allocations,avgUnitCost:Number((m==null?void 0:m.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((m==null?void 0:m.cogsAmount)??0),type:s,vendorId:o,vendorCommissionAmount:y,processedDate:u||""}});const d=Number(t.packagesTotal??t.quantity??0),f=Number(t.amount??t.amountCharged??t.total??0)||0;let A=0;return A=es(Number(t.vendorCommissionAmount??0)||0),[{id:e,productName:t.productName??"(sin nombre)",quantity:d,amount:f,amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount,type:s,vendorId:o,vendorCommissionAmount:A,processedDate:u||""}]};function DQe({role:t,currentUserEmail:e,sellerCandyId:r,roles:n}){const[a,s]=x.useState([]),[o,l]=x.useState(null),[c,u]=x.useState(!0),[d,f]=x.useState(""),[A,h]=x.useState("ALL"),m=jr(new Date,"yyyy-MM-dd"),[p,g]=x.useState(m),[v,y]=x.useState(m),[b,w]=x.useState("ALL"),[P,j]=x.useState(null),[_,I]=x.useState(0),[E,F]=x.useState(0),[k,B]=x.useState(""),[R,Y]=x.useState(0),[me,pe]=x.useState("0"),he=x.useRef(null),ge=n&&n.length?n:t,se=!ge||mn(ge,"admin"),je=mn(ge,"vendedor_dulces"),Te=(e||"").trim().toLowerCase(),[D,K]=x.useState([]);x.useEffect(()=>{if(!p||!v)return;u(!0);const te=er(At(De,"sales_candies"),ur("date",">=",p),ur("date","<=",v),bn("date","asc")),Ne=dd(te,Re=>{const ye=[];Re.forEach(Xe=>{const mt=OQe(Xe.data(),Xe.id);ye.push(...mt)}),s(ye),u(!1)},Re=>{console.error("Error cargando ventas por periodo:",Re),s([]),u(!1)});return()=>Ne()},[p,v]),x.useEffect(()=>{(async()=>{const Ne=er(At(De,"daily_closures_candies"),ur("date","==",m)),Re=await Lt(Ne);if(Re.empty)l(null);else{const ye=Re.docs[0];l({id:ye.id,...ye.data()})}})()},[m]),x.useEffect(()=>{(async()=>{try{const Ne=await Lt(At(De,"sellers_candies")),Re=[];Ne.forEach(ye=>{const Xe=ye.data();Re.push({id:ye.id,name:Xe.name||"",commissionPercent:Number(Xe.commissionPercent||0)})}),K(Re)}catch(Ne){console.error("Error cargando sellers_candies",Ne)}})()},[]);const z=te=>es(Number(te.vendorCommissionAmount??0)||0),Q=Ro.useMemo(()=>{let te=[...a];return A==="FLOTANTE"&&(te=te.filter(Ne=>Ne.status==="FLOTANTE")),A==="PROCESADA"&&(te=te.filter(Ne=>Ne.status==="PROCESADA")),se&&b!=="ALL"&&(te=te.filter(Ne=>(Ne.vendorId||"")===b)),je&&(r?te=te.filter(Ne=>(Ne.vendorId||"")===r):Te?te=te.filter(Ne=>(Ne.sellerEmail||"").toLowerCase()===Te):te=[]),te},[A,a,se,b,je,r,Te]),J=Ro.useMemo(()=>Q.filter(te=>te.status==="FLOTANTE").length,[Q]),ee=Ro.useMemo(()=>Q.filter(te=>te.status==="PROCESADA").length,[Q]),M=Ro.useMemo(()=>Q.filter(te=>te.type==="CREDITO").length,[Q]),G=Ro.useMemo(()=>Q.filter(te=>te.type!=="CREDITO").length,[Q]),ne=mx(Q.reduce((te,Ne)=>te+(Ne.quantity||0),0)),ve=es(Q.reduce((te,Ne)=>te+Number(Ne.cogsAmount??0),0)),V=es(Q.reduce((te,Ne)=>te+(Ne.amount||0),0)),qe=es(V-ve);let ie=0,re=0,Fe=0,de=0,we=0,Le=0,Ge=0;Q.forEach(te=>{const Ne=Number(te.amount||0),Re=Number(te.amountReceived||0),ye=z(te);we+=ye,te.type==="CREDITO"?(ie+=te.quantity||0,Fe+=Ne-Re,Ge+=ye):(re+=te.quantity||0,de+=Ne,Le+=ye)}),Fe=es(Fe),de=es(de),we=es(we),Le=es(Le),Ge=es(Ge);const ft=Ro.useMemo(()=>{const te={};for(const Ne of Q){const Re=(Ne.vendorId||"").trim();if(!Re||Ne.type==="CREDITO")continue;const ye=z(Ne);if(!te[Re]){const Xe=D.find(mt=>mt.id===Re);te[Re]={vendorId:Re,name:(Xe==null?void 0:Xe.name)||Ne.userEmail||"(sin vendedor)",total:0}}te[Re].total=es(te[Re].total+ye)}return Object.values(te).filter(Ne=>Ne.total>0).sort((Ne,Re)=>Re.total-Ne.total)},[Q,D]),ht=Ro.useMemo(()=>{const te={};for(const Ne of Q){const Re=(Ne.vendorId||"").trim();if(!Re||Ne.type!=="CREDITO")continue;const ye=z(Ne);if(!te[Re]){const Xe=D.find(mt=>mt.id===Re);te[Re]={vendorId:Re,name:(Xe==null?void 0:Xe.name)||Ne.userEmail||"(sin vendedor)",total:0}}te[Re].total=es(te[Re].total+ye)}return Object.values(te).filter(Ne=>Ne.total>0).sort((Ne,Re)=>Re.total-Ne.total)},[Q,D]),xt={};Q.forEach(te=>{const Ne=te.productName||"(sin nombre)";xt[Ne]||(xt[Ne]={totalQuantity:0,totalAmount:0,totalCommission:0}),xt[Ne].totalQuantity=mx(xt[Ne].totalQuantity+(te.quantity||0)),xt[Ne].totalAmount=es(xt[Ne].totalAmount+(te.amount||0)),xt[Ne].totalCommission=es(xt[Ne].totalCommission+z(te))});const jt=Object.entries(xt).map(([te,Ne])=>({productName:te,totalQuantity:Ne.totalQuantity,totalAmount:Ne.totalAmount,totalCommission:Ne.totalCommission})),kt=async()=>{if(se)try{const te=Q.filter(_e=>_e.status==="FLOTANTE");if(te.length===0){f("No hay ventas flotantes para procesar en este perodo.");return}const Ne={totalCharged:es(te.reduce((_e,We)=>_e+(We.amount||0),0)),totalSuggested:es(te.reduce((_e,We)=>_e+(We.amountSuggested||0),0)),totalUnits:mx(te.reduce((_e,We)=>_e+(We.quantity||0),0)),totalCOGS:es(te.reduce((_e,We)=>_e+Number(We.cogsAmount??0),0))},Re=es(Ne.totalCharged-Ne.totalSuggested),ye=es(Ne.totalCharged-Ne.totalCOGS),Xe=te.reduce((_e,We)=>{const ot=Number(We.quantity||0),Ce=Number(We.amount||0),$e=Number(We.vendorCommissionAmount||0);return We.type==="CREDITO"?(_e.packsCredit+=ot,_e.amountCredit+=Ce,_e.comCredit+=$e):(_e.packsCash+=ot,_e.amountCash+=Ce,_e.comCash+=$e),_e},{packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0}),mt={totalPacksCash:mx(Xe.packsCash),totalPacksCredit:mx(Xe.packsCredit),totalAmountCash:es(Xe.amountCash),totalAmountCredit:es(Xe.amountCredit),totalCommissionCash:es(Xe.comCash),totalCommissionCredit:es(Xe.comCredit)},rt=await Hn(At(De,"daily_closures_candies"),{date:m,createdAt:mr.now(),periodStart:p,periodEnd:v,totalCharged:Ne.totalCharged,totalSuggested:Ne.totalSuggested,totalDifference:Re,totalUnits:Ne.totalUnits,totalCOGS:Ne.totalCOGS,grossProfit:ye,...mt,products:te.map(_e=>({productName:_e.productName,quantity:_e.quantity,amount:_e.amount})),sales:te.map(_e=>({id:_e.id,productName:_e.productName,quantity:_e.quantity,amount:_e.amount,amountSuggested:_e.amountSuggested,userEmail:_e.userEmail,clientName:_e.clientName,amountReceived:_e.amountReceived,change:_e.change,status:_e.status,cogsAmount:_e.cogsAmount??0,avgUnitCost:_e.avgUnitCost??null,allocations:_e.allocations??[],date:_e.date,type:_e.type??"CONTADO",vendorId:_e.vendorId??"",vendorCommissionAmount:Number(_e.vendorCommissionAmount??0)||0,processedDate:m})),productSummary:Object.entries(te.reduce((_e,We)=>{const ot=We.productName||"(sin nombre)";return _e[ot]||(_e[ot]={totalQuantity:0,totalAmount:0}),_e[ot].totalQuantity=mx(_e[ot].totalQuantity+(We.quantity||0)),_e[ot].totalAmount=es(_e[ot].totalAmount+(We.amount||0)),_e},{})).map(([_e,We])=>({productName:_e,totalQuantity:We.totalQuantity,totalAmount:We.totalAmount}))}),ue=Zd(De);te.forEach(_e=>{ue.update(Yt(De,"sales_candies",_e.id.split("#")[0]),{status:"PROCESADA",closureId:rt.id,closureDate:m,processedDate:m,processedAt:mr.now()})}),await ue.commit(),f(` Cierre guardado. Ventas procesadas: ${te.length}. (Proceso: ${m})`)}catch(te){console.error(te),f(" Error al guardar el cierre de dulces.")}},wt=async te=>{if(se&&window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await Cn(Yt(De,"sales_candies",te.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null,processedDate:null,processedAt:null}),f(" Venta revertida a FLOTANTE.")}catch(Ne){console.error(Ne),f(" No se pudo revertir la venta.")}},Ve=te=>{se&&(j(te),I(te.quantity),F(te.amount),B(te.clientName),Y(te.amountReceived),pe(te.change))},Pe=async()=>{if(!(!P||!se))try{await Cn(Yt(De,"sales_candies",P.id.split("#")[0]),{packagesTotal:_,amount:E,amountCharged:E,clientName:k,amountReceived:R,change:me}),j(null),f(" Venta de dulces actualizada.")}catch(te){console.error(te),f(" No se pudo actualizar la venta de dulces.")}},be=async te=>{if(se&&window.confirm("Eliminar esta venta? Se restaurar el stock (paquetes) en los lotes asignados."))try{const Ne=te.split("#")[0],{restored:Re}=await J9e(Ne);await FQe(Ne),f(` Venta eliminada. Stock restaurado (unidades internas): ${Number(Re).toFixed(2)}. Estado de cuenta ajustado.`)}catch(Ne){console.error(Ne),f(" No se pudo eliminar la venta de dulces.")}},ce=async()=>{if(he.current){he.current.classList.add("force-pdf-colors"),he.current.classList.add("pdf-print-mode");try{const Ne=(await Sg(he.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),Re=new $r;Re.addImage(Ne,"PNG",10,10,190,0),Re.save(`cierre_dulces_${p}_a_${v}_proc_${m}.pdf`)}finally{he.current.classList.remove("pdf-print-mode"),he.current.classList.remove("force-pdf-colors")}}};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),i.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas de Dulces - Proceso: ",m]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Desde:"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:p,onChange:te=>g(te.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Hasta:"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:v,onChange:te=>y(te.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Filtrar:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:te=>h(te.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),se&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Vendedor:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:b,onChange:te=>w(te.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),D.map(te=>i.jsx("option",{value:te.id,children:te.name||te.id},te.id))]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas flotantes"}),i.jsx("div",{className:"text-2xl font-bold",children:J}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas procesadas"}),i.jsx("div",{className:"text-2xl font-bold",children:ee}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsx("div",{className:"text-2xl font-bold",children:M}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsx("div",{className:"text-2xl font-bold",children:G}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash (perodo)"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Yo(Le)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito (perodo)"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Yo(Ge)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CASH del perodo)"}),ft.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:ft.map(te=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:te.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Yo(te.total)]})]},te.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CRDITO del perodo)"}),ht.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:ht.map(te=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:te.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Yo(te.total)]})]},te.vendorId))})]})]}),c?i.jsx("p",{children:"Cargando ventas..."}):i.jsxs("div",{ref:he,children:[i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Estado"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Fecha proceso"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[Q.map(te=>{const Ne=z(te),Re=(te.processedDate||"").trim();return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${te.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:te.status})}),i.jsx("td",{className:"border p-1",children:te.productName}),i.jsx("td",{className:"border p-1",children:te.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:zm(te.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Yo(te.amount)]}),i.jsx("td",{className:"border p-1",children:Ne>0?`C$${Yo(Ne)}`:""}),i.jsx("td",{className:"border p-1",children:te.date}),i.jsx("td",{className:"border p-1",children:Re||""}),i.jsx("td",{className:"border p-1",children:te.userEmail}),i.jsx("td",{className:"border p-1",children:te.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2 justify-center",children:se?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ve(te),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>be(te.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):te.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2 justify-center",children:se?i.jsx("button",{onClick:()=>wt(te.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):i.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},te.id)}),Q.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden space-y-3 mb-4",children:[Q.map(te=>{const Ne=z(te),Re=(te.processedDate||"").trim();return i.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[i.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:te.productName}),i.jsxs("div",{className:"text-xs text-gray-500",children:[te.type==="CREDITO"?"Crdito":"Cash","  ",te.date]})]}),i.jsxs("div",{className:"text-right shrink-0 ml-3",children:[i.jsxs("div",{className:"font-bold",children:["C$",Yo(te.amount)]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${te.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:te.status})]})]}),i.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes"}),i.jsx("strong",{children:zm(te.quantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("strong",{children:Ne>0?`C$${Yo(Ne)}`:""})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha proceso"}),i.jsx("strong",{children:Re||""})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("strong",{className:"text-right break-all",children:te.userEmail})]}),i.jsx("div",{className:"pt-2",children:te.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2",children:se?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ve(te),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>be(te.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):te.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2",children:se?i.jsx("button",{onClick:()=>wt(te.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},te.id)}),Q.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm mb-4",children:[i.jsxs("div",{children:["Total paquetes crdito: ",i.jsx("strong",{children:zm(ie)})]}),i.jsxs("div",{children:["Total paquetes cash: ",i.jsx("strong",{children:zm(re)})]}),i.jsxs("div",{children:["Total pendiente crdito:"," ",i.jsxs("strong",{children:["C$",Yo(Fe)]})]}),i.jsxs("div",{children:["Total cobrado cash: ",i.jsxs("strong",{children:["C$",Yo(de)]})]}),i.jsxs("div",{children:["Total comisin: ",i.jsxs("strong",{children:["C$",Yo(we)]})]})]}),(ve>0||qe!==V)&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[i.jsxs("div",{children:["Costo total (COGS): ",i.jsxs("strong",{children:["C$",Yo(ve)]})]}),i.jsxs("div",{children:["Ganancia antes de gasto:"," ",i.jsxs("strong",{children:["C$",Yo(qe)]})]}),i.jsxs("div",{children:["Total paquetes (visibles):"," ",i.jsx("strong",{children:zm(ne)})]})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes"}),i.jsx("th",{className:"border p-2",children:"Total dinero"}),i.jsx("th",{className:"border p-2",children:"Comisin"})]})}),i.jsxs("tbody",{children:[jt.map(te=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:te.productName}),i.jsx("td",{className:"border p-1",children:zm(te.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Yo(te.totalAmount)]}),i.jsx("td",{className:"border p-1",children:te.totalCommission>0?`C$${Yo(te.totalCommission)}`:""})]},te.productName)),jt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden space-y-2",children:[jt.map(te=>i.jsxs("div",{className:"border rounded-xl bg-white shadow-sm p-3",children:[i.jsx("div",{className:"font-semibold",children:te.productName}),i.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total paquetes"}),i.jsx("strong",{children:zm(te.totalQuantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total dinero"}),i.jsxs("strong",{children:["C$",Yo(te.totalAmount)]})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("strong",{children:te.totalCommission>0?`C$${Yo(te.totalCommission)}`:""})]})]})]},te.productName)),jt.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin datos para consolidar."})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[se&&i.jsx("button",{onClick:kt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del perodo"}),i.jsx("button",{onClick:ce,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),P&&se&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta de dulces"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[P.productName,"  ",P.userEmail]}),i.jsx("label",{className:"text-sm",children:"Paquetes"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:_,onChange:te=>I(parseFloat(te.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Monto cobrado"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:te=>F(parseFloat(te.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Cliente"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:k,onChange:te=>B(te.target.value)}),i.jsx("label",{className:"text-sm",children:"Paga con"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:R,onChange:te=>Y(parseFloat(te.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Vuelto"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:me,onChange:te=>pe(te.target.value)}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{onClick:()=>j(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),i.jsx("button",{onClick:Pe,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const bh=t=>`C$ ${(Number(t)||0).toFixed(2)}`,au=t=>Math.round((Number(t)||0)*100)/100;function RQe(t){if(!t)return"";switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function MQe(t){return t.toISOString().slice(0,10)}function LQe(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`}function UQe(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth()+1,1),r=new Date(e.getTime()-24*60*60*1e3);return MQe(r)}function QQe(){const[t,e]=x.useState(LQe()),[r,n]=x.useState(UQe()),[a,s]=x.useState(!1),[o,l]=x.useState(""),[c,u]=x.useState({}),[d,f]=x.useState({}),[A,h]=x.useState([]),[m,p]=x.useState([]),[g,v]=x.useState({}),[y,b]=x.useState(!1),[w,P]=x.useState(null),[j,_]=x.useState(null),I=x.useMemo(()=>w&&A.find(pe=>pe.vendorId===w)||null,[w,A]),E=x.useMemo(()=>{var pe;return!w||!j?[]:((pe=g[w])==null?void 0:pe[j])||[]},[w,j,g]),F=x.useMemo(()=>au(A.reduce((pe,he)=>pe+(he.totalSoldMoney||0),0)),[A]),k=x.useMemo(()=>au(A.reduce((pe,he)=>pe+(he.totalCreditMoney||0),0)),[A]);x.useEffect(()=>{(async()=>{try{const pe=await Lt(At(De,"sellers_candies")),he={};pe.forEach(je=>{const Te=je.data(),D=Te.branch||"Rivas";let K="RIVAS";D==="San Jorge"?K="SAN_JORGE":D==="Isla Ometepe"&&(K="ISLA"),he[je.id]={id:je.id,name:Te.name??"(sin nombre)",branch:K,branchLabel:D,commissionPercent:Number(Te.commissionPercent??0)}});const ge=await Lt(At(De,"products_candies")),se={};ge.forEach(je=>{const Te=je.data();se[je.id]={id:je.id,name:Te.name??"(sin nombre)"}}),u(he),f(se)}catch(pe){console.error(pe),l(" Error cargando catlogos de vendedores/productos.")}})()},[]);const B=async()=>{if(!t||!r){l("Selecciona rango de fechas vlido.");return}if(!Object.keys(c).length){l("Cargando vendedores, intenta de nuevo en unos segundos.");return}s(!0),l("");try{const pe={},he={},ge=er(At(De,"inventory_candies_sellers"),ur("date",">=",t),ur("date","<=",r)),se=await Lt(ge),je={},Te={},D={},K={};se.forEach(de=>{var ot,Ce;const we=de.data(),Le=we.sellerId||"";if(!Le)return;const Ge=we.productId||"",ft=we.productName||((ot=d[Ge])==null?void 0:ot.name)||"(sin nombre)",ht=Math.max(1,Math.floor(Number(we.unitsPerPackage||1))),xt=Number(we.totalUnits??0),jt=Number(we.packages??0),kt=Number(we.remainingUnits??we.remaining??0),wt=Number(we.remainingPackages??0),Ve=jt>0?jt:xt>0?Math.floor(xt/ht):0,Pe=wt>0?wt:kt>0?Math.floor(kt/ht):0;je[Le]=(je[Le]||0)+Ve,Te[Le]=(Te[Le]||0)+Pe;const be=we.orderId||we.vendorOrderId||we.orderNumber||we.order||de.id;D[Le]||(D[Le]=new Set),D[Le].add(be);const ce=((Ce=c[Le])==null?void 0:Ce.name)||we.sellerName||"(sin vendedor)",te=String(we.date||""),Ne=Number(we.totalVendor??0),Re=Number(we.gainVendor??0),ye=jt>0?jt:xt>0?Math.floor(xt/ht):0,Xe=ye>0?Ne/ye:0,mt=ye>0?Re/ye:0,rt=au(Ve*Xe),ue=au(Ve*mt),_e=au(Pe*Xe),We=au(Pe*mt);K[Le]||(K[Le]={ordered:[],remaining:[]}),Ve>0&&K[Le].ordered.push({date:te,vendorName:ce,productName:ft,packages:Ve,totalMoney:rt,vendorCommission:ue}),Pe>0&&K[Le].remaining.push({date:te,vendorName:ce,productName:ft,packages:Pe,totalMoney:_e,vendorCommission:We})});const z={};Object.keys(D).forEach(de=>{z[de]=D[de].size});const Q=er(At(De,"sales_candies"),ur("date",">=",t),ur("date","<=",r)),J=await Lt(Q),ee={},M={},G={},ne={},ve={},V={};J.forEach(de=>{const we=de.data(),Le=we.date||"",Ge=we.vendorId||we.sellerId||"";if(!Ge)return;const ft=c[Ge],ht=we.vendorName||(ft==null?void 0:ft.name)||"(sin vendedor)",xt=Number(we.vendorCommissionPercent??(ft==null?void 0:ft.commissionPercent)??0)||0,jt=Array.isArray(we.items)?we.items:[];if(!jt.length)return;const kt=String(we.type||"").toUpperCase()==="CREDITO";ve[Ge]||(ve[Ge]={sold:[],credit:[]}),jt.forEach(wt=>{var rt;const Ve=wt.productName||((rt=d[wt.productId||""])==null?void 0:rt.name)||"(sin nombre)",Pe=wt.packages??wt.qty??wt.quantity??0,be=Number(Pe||0);if(be<=0)return;const ce=Number(wt.unitPricePackage??wt.unitPrice??0)||0,te=Math.max(0,Number(wt.discount||0)),Ne=be*ce,Re=au(Math.max(0,Ne-te));if(Re<=0)return;console.log("DBG",{isCredit:kt,vendorId:Ge,commissionPercent:xt,lineFinal:Re,storedItemCommission:Number(wt.vendorCommissionAmount??0)});let ye=0;const Xe=Number(wt.vendorCommissionAmount??0);Xe?ye=au(Xe):xt>0&&(ye=au(Re*xt/100)),kt?(M[Ge]=(M[Ge]||0)+be,ne[Ge]=(ne[Ge]||0)+Re):(ee[Ge]=(ee[Ge]||0)+be,G[Ge]=(G[Ge]||0)+Re),kt?he[Ge]=(he[Ge]||0)+ye:pe[Ge]=(pe[Ge]||0)+ye,kt?ve[Ge].credit.push({date:Le,vendorName:ht,productName:Ve,packages:be,totalMoney:Re,vendorCommission:0}):ve[Ge].sold.push({date:Le,vendorName:ht,productName:Ve,packages:be,totalMoney:Re,vendorCommission:ye});const mt=Ve;V[mt]||(V[mt]={productName:Ve,packages:0,totalMoney:0}),V[mt].packages+=be,V[mt].totalMoney+=Re})});const qe=new Set([...Object.keys(je),...Object.keys(Te),...Object.keys(ee),...Object.keys(M)]),ie=[],re={};qe.forEach(de=>{var Pe,be,ce,te;const we=c[de],Le=(we==null?void 0:we.name)||"(sin vendedor)",Ge=we?we.branchLabel||RQe(we.branch):"",ft=je[de]||0,ht=Te[de]||0,xt=ee[de]||0,jt=M[de]||0,kt=au(G[de]||0),wt=au(ne[de]||0),Ve=z[de]||0;ie.push({vendorId:de,vendorName:Le,branchLabel:Ge,orderedPackages:ft,remainingPackages:ht,soldPackages:xt,creditPackages:jt,totalSoldMoney:kt,totalCreditMoney:wt,ordersCreated:Ve,commissionCash:au(pe[de]||0),commissionCredit:0}),re[de]={ordered:(((Pe=K[de])==null?void 0:Pe.ordered)||[]).sort((Ne,Re)=>Ne.date.localeCompare(Re.date)),remaining:(((be=K[de])==null?void 0:be.remaining)||[]).sort((Ne,Re)=>Ne.date.localeCompare(Re.date)),sold:(((ce=ve[de])==null?void 0:ce.sold)||[]).sort((Ne,Re)=>Ne.date.localeCompare(Re.date)),credit:(((te=ve[de])==null?void 0:te.credit)||[]).sort((Ne,Re)=>Ne.date.localeCompare(Re.date))}}),ie.sort((de,we)=>de.vendorName.localeCompare(we.vendorName,"es")),h(ie),v(re);const Fe=Object.values(V).map(de=>({productName:de.productName,packages:de.packages,totalMoney:au(de.totalMoney)})).sort((de,we)=>we.packages-de.packages).slice(0,10);p(Fe),ie.length||l("Sin datos para el rango seleccionado.")}catch(pe){console.error(pe),l(" Error cargando consolidado de vendedores.")}finally{s(!1)}};x.useEffect(()=>{Object.keys(c).length&&B()},[c]);const R=(pe,he)=>{P(pe),_(he),b(!0)},Y=()=>{b(!1),P(null),_(null)},me=()=>{if(!A.length){l("No hay datos para exportar.");return}const pe=["Vendedor","Sucursal","Paquetes ordenados","Paquetes restantes","Paquetes vendidos","Paquetes fiados","Total vendidos (C$)","Comisin Cash (C$)","Total fiado (C$)","Comisin Crdito (C$)","rdenes creadas"],he=A.map(D=>[D.vendorName,D.branchLabel,D.orderedPackages.toString(),D.remainingPackages.toString(),D.soldPackages.toString(),D.creditPackages.toString(),D.totalSoldMoney.toFixed(2),D.commissionCash.toFixed(2),D.totalCreditMoney.toFixed(2),D.commissionCredit.toFixed(2),D.ordersCreated.toString()]),ge=[pe,...he].map(D=>D.map(K=>`"${String(K).replace(/"/g,'""')}"`).join(",")).join(`
`),se=new Blob([ge],{type:"text/csv;charset=utf-8;"}),je=URL.createObjectURL(se),Te=document.createElement("a");Te.href=je,Te.download=`consolidado_vendedores_dulces_${t}_a_${r}.csv`,Te.click(),URL.revokeObjectURL(je)};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Consolidado por Vendedor - Dulces"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-1",children:"Desde"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:t,onChange:pe=>e(pe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-1",children:"Hasta"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:r,onChange:pe=>n(pe.target.value)})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{type:"button",onClick:B,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",disabled:a,children:a?"Cargando...":"Aplicar filtros"})}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{type:"button",onClick:me,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Exportar CSV"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm",children:[i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:bh(F)})]}),i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Credito"}),i.jsx("div",{className:"text-xl font-semibold",children:bh(k)})]}),i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Vendedores con Inventario"}),i.jsx("div",{className:"text-xl font-semibold",children:A.length})]})]}),i.jsx("div",{className:"overflow-x-auto mb-6",children:i.jsxs("table",{className:"min-w-full border text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes ordenados"}),i.jsx("th",{className:"border p-2",children:"Paquetes restantes"}),i.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),i.jsx("th",{className:"border p-2",children:"Paquetes fiados"}),i.jsx("th",{className:"border p-2",children:"Total vendidos (C$)"}),i.jsx("th",{className:"border p-2",children:"Comisin Cash (C$)"}),i.jsx("th",{className:"border p-2",children:"Total fiado (C$)"}),i.jsx("th",{className:"border p-2",children:"Comisin Crdito (C$)"}),i.jsx("th",{className:"border p-2",children:"rdenes creadas"})]})}),i.jsxs("tbody",{children:[A.map(pe=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:pe.vendorName}),i.jsx("td",{className:"border p-1",children:pe.branchLabel}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>R(pe.vendorId,"ordered"),children:pe.orderedPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>R(pe.vendorId,"remaining"),children:pe.remainingPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>R(pe.vendorId,"sold"),children:pe.soldPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>R(pe.vendorId,"credit"),children:pe.creditPackages})}),i.jsx("td",{className:"border p-1",children:bh(pe.totalSoldMoney)}),i.jsx("td",{className:"border p-1",children:bh(pe.commissionCash)}),i.jsx("td",{className:"border p-1",children:bh(pe.totalCreditMoney)}),i.jsx("td",{className:"border p-1",children:bh(pe.commissionCredit)}),i.jsx("td",{className:"border p-1",children:pe.ordersCreated})]},pe.vendorId)),A.length===0&&!a&&i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-3 text-center text-gray-500",children:"Sin datos para mostrar."})})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Top 10 productos ms vendidos (paquetes)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-xs shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"#"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),i.jsx("th",{className:"border p-2",children:"Total dinero (C$)"})]})}),i.jsxs("tbody",{children:[m.map((pe,he)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:he+1}),i.jsx("td",{className:"border p-1",children:pe.productName}),i.jsx("td",{className:"border p-1",children:pe.packages}),i.jsx("td",{className:"border p-1",children:bh(pe.totalMoney)})]},pe.productName)),m.length===0&&!a&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin productos para mostrar."})})]})]})})]}),o&&i.jsx("p",{className:"mt-2 text-sm text-gray-700",children:o}),y&&j&&w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[95%] max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-lg",children:["Detalle"," ",j==="ordered"?"Paquetes ordenados":j==="remaining"?"Paquetes restantes":j==="sold"?"Paquetes vendidos":"Paquetes fiados"]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[I==null?void 0:I.vendorName,"  ",I==null?void 0:I.branchLabel]})]}),i.jsx("button",{onClick:Y,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-sm",children:"Cerrar"})]}),i.jsx("div",{className:"flex-1 overflow-auto p-4",children:i.jsxs("table",{className:"min-w-full border text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Total dinero (C$)"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Comisin vendedor (C$)"})]})}),i.jsxs("tbody",{children:[E.map((pe,he)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:pe.date}),i.jsx("td",{className:"border p-1",children:pe.productName}),i.jsx("td",{className:"border p-1",children:pe.packages}),i.jsx("td",{className:"border p-1",children:bh(pe.totalMoney)}),i.jsx("td",{className:"border p-1",children:pe.vendorName}),i.jsx("td",{className:"border p-1",children:bh(pe.vendorCommission)})]},he)),E.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin registros para mostrar."})})]})]})})]})})]})}const Pl=t=>`C$${Number(t||0).toFixed(2)}`,n_=t=>Number(t||0).toFixed(3),W5=()=>{const t=new Date;return jr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},a_=()=>jr(new Date,"yyyy-MM-dd");function VQe({transactions:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=x.useState([]),o=x.useMemo(()=>{const ue={};return a.forEach(_e=>{_e.email&&(ue[_e.email.trim().toLowerCase()]=_e)}),ue},[a]);x.useEffect(()=>{(async()=>{try{const ue=er(At(De,"sellers_candies"),bn("name","asc")),_e=await Lt(ue),We=[];_e.forEach(ot=>{const Ce=ot.data();We.push({id:ot.id,name:Ce.name||"",email:Ce.email||"",commissionPercent:Number(Ce.commissionPercent||0)})}),s(We)}catch(ue){console.error(ue)}})()},[]);const[l,c]=x.useState(W5()),[u,d]=x.useState(a_()),[f,A]=x.useState(""),[h,m]=x.useState(""),p=x.useMemo(()=>{const ue=new Map;return n.forEach(_e=>{const We=_e.productId||_e.productName;ue.set(We,{key:We,name:_e.productName})}),Array.from(ue.values()).sort((_e,We)=>_e.name.localeCompare(We.name))},[n]),g=x.useMemo(()=>{const ue=new Map;return n.forEach(_e=>{const We=(_e.sellerEmail||"").trim().toLowerCase();if(!We)return;const ot=o[We],Ce=(ot==null?void 0:ot.name)||_e.vendorName||We;ue.set(We,{email:We,label:Ce})}),Array.from(ue.values()).sort((_e,We)=>_e.label.localeCompare(We.label))},[n,o]),v=x.useMemo(()=>n.filter(ue=>!(l&&ue.date<l||u&&ue.date>u||f&&(ue.productId||ue.productName)!==f||h&&(ue.sellerEmail||"").trim().toLowerCase()!==h)),[n,l,u,f,h]),[y,b]=x.useState(a_()),[w,P]=x.useState(()=>`FAC-CANDY-${Date.now().toString().slice(-6)}`),[j,_]=x.useState(""),[I,E]=x.useState("0"),[F,k]=x.useState(()=>v.map(ue=>ue.id));x.useEffect(()=>{k(ue=>ue.filter(_e=>v.some(We=>We.id===_e)))},[v]);const[B,R]=x.useState([]),[Y,me]=x.useState([]),[pe,he]=x.useState(!1),[ge,se]=x.useState(W5()),[je,Te]=x.useState(a_());x.useEffect(()=>{(async()=>{try{he(!0);const ue=er(At(De,"expensesCandies"),bn("date","desc")),_e=await Lt(ue),We=[];_e.forEach(ot=>{const Ce=ot.data();We.push({id:ot.id,date:Ce.date,description:Ce.description,amount:Number(Ce.amount||0)})}),R(We)}catch(ue){console.error(ue)}finally{he(!1)}})()},[]);const D=x.useMemo(()=>B.filter(ue=>!(!ue.date||ge&&ue.date<ge||je&&ue.date>je)),[B,ge,je]),[K,z]=x.useState([]),[Q,J]=x.useState(!1),[ee,M]=x.useState(""),[G,ne]=x.useState("DEBITO"),[ve,V]=x.useState(""),qe=()=>{const ue=Number(ve);!ee.trim()||!isFinite(ue)||ue<=0||(z(_e=>[..._e,{id:`${Date.now()}_${_e.length+1}`,description:ee.trim(),type:G,amount:Number(ue.toFixed(2))}]),M(""),V(""))},[ie,re]=x.useState(null),[Fe,de]=x.useState(""),[we,Le]=x.useState("DEBITO"),[Ge,ft]=x.useState(""),ht=ue=>{re(ue.id),de(ue.description),Le(ue.type),ft(ue.amount.toFixed(2))},xt=()=>{re(null),de(""),Le("DEBITO"),ft("")},jt=()=>{if(!ie)return;const ue=Number(Ge);!isFinite(ue)||ue<=0||(z(_e=>_e.map(We=>We.id===ie?{...We,description:Fe.trim(),type:we,amount:Number(ue.toFixed(2))}:We)),xt())},kt=ue=>{z(_e=>_e.filter(We=>We.id!==ue)),ie===ue&&xt()},wt=(ue,_e)=>{k(We=>_e?[...new Set([...We,ue])]:We.filter(ot=>ot!==ue))},Ve=ue=>{k(ue?v.map(_e=>_e.id):[])},Pe=(ue,_e)=>{me(We=>_e?[...new Set([...We,ue])]:We.filter(ot=>ot!==ue))},be=x.useMemo(()=>v.filter(ue=>F.includes(ue.id)),[v,F]),ce=x.useMemo(()=>K.filter(ue=>ue.type==="DEBITO").reduce((ue,_e)=>ue+_e.amount,0),[K]),te=x.useMemo(()=>K.filter(ue=>ue.type==="CREDITO").reduce((ue,_e)=>ue+_e.amount,0),[K]),Ne=x.useMemo(()=>{let ue=0,_e=0,We=0,ot=0;for(const Jt of be){const it=Number(Jt.packages||0),X=Number(Jt.cogsAmount||0),oe=Number(Jt.amount||0);ue+=it,_e+=X,We+=oe;const L=(Jt.sellerEmail||"").trim().toLowerCase(),Ae=o[L],Ee=Number((Ae==null?void 0:Ae.commissionPercent)||0),Oe=oe*Ee/100;ot+=Oe}const Ce=D.filter(Jt=>Y.includes(Jt.id)).reduce((Jt,it)=>Jt+Number(it.amount||0),0),$e=We-_e,gt=We-Ce-ce+te-ot,Kt=Number(I||0),Ut=We*Kt/100;return{totalPackages:Number(n_(ue)),totalProvider:Number(_e.toFixed(2)),totalSale:Number(We.toFixed(2)),totalGastos:Number(Ce.toFixed(2)),debits:Number(ce.toFixed(2)),credits:Number(te.toFixed(2)),grossProfit:Number($e.toFixed(2)),finalAmount:Number(gt.toFixed(2)),totalCommissionVendors:Number(ot.toFixed(2)),branchProfit:Number(Ut.toFixed(2)),branchFactor:Kt}},[be,D,Y,ce,te,o,I]),[Re,ye]=x.useState(!1),[Xe,mt]=x.useState(""),rt=async()=>{if(mt(""),be.length===0){mt("Selecciona al menos 1 transaccin procesada.");return}try{ye(!0);const ue={number:w.trim(),date:y,description:j.trim(),status:"PENDIENTE",createdAt:mr.now(),totalPackages:Ne.totalPackages,totalProvider:Ne.totalProvider,totalSale:Ne.totalSale,totalExpenses:Ne.totalGastos,totalDebits:Ne.debits,totalCredits:Ne.credits,grossProfit:Ne.grossProfit,totalCommissionVendors:Ne.totalCommissionVendors,branchFactorPercent:Ne.branchFactor,branchProfit:Ne.branchProfit,finalAmount:Ne.finalAmount,transactions:be.map(_e=>{const We=Number(_e.packages||0)||1,ot=Number(_e.cogsAmount||0),Ce=Number(_e.amount||0),$e=ot/We,gt=Ce/We,Kt=(_e.sellerEmail||"").trim().toLowerCase(),Ut=o[Kt],Jt=Number((Ut==null?void 0:Ut.commissionPercent)||0),it=Ce*Jt/100;return{id:_e.id,date:_e.date,productId:_e.productId||null,productName:_e.productName,vendorName:_e.vendorName,sellerEmail:_e.sellerEmail||null,packages:Number(n_(_e.packages)),providerPricePack:Number($e.toFixed(4)),salePricePack:Number(gt.toFixed(4)),totalProvider:Number(ot.toFixed(2)),totalSale:Number(Ce.toFixed(2)),commissionPercent:Jt,commissionAmount:Number(it.toFixed(2))}}),expenses:D.filter(_e=>Y.includes(_e.id)).map(_e=>({id:_e.id,date:_e.date||null,description:_e.description||"",amount:Number(Number(_e.amount||0).toFixed(2))})),adjustments:K.map(_e=>({id:_e.id,description:_e.description,type:_e.type,amount:Number(_e.amount.toFixed(2))}))};await Hn(At(De,"invoicesCandies"),ue),mt(" Factura de dulces creada."),r()}catch(ue){console.error(ue),mt(` Error al crear factura: ${(ue==null?void 0:ue.message)||"desconocido"}`)}finally{ye(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura CandyShop"}),i.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y,onChange:ue=>b(ue.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:ue=>P(ue.target.value),placeholder:"FAC-CANDY-001"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Factor sucursal (%)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:I,onChange:ue=>E(ue.target.value),placeholder:"Ej: 30"}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Se aplica sobre el total de ventas para calcular la ganancia de sucursal."})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:j,onChange:ue=>_(ue.target.value),placeholder:"Comentarios de la factura"})]})]}),i.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:i.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Desde (transaccin)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:ue=>c(ue.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Hasta (transaccin)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ue=>d(ue.target.value)})]}),i.jsxs("div",{className:"min-w-[180px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:f,onChange:ue=>A(ue.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),p.map(ue=>i.jsx("option",{value:ue.key,children:ue.name},ue.key))]})]}),i.jsxs("div",{className:"min-w-[180px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Vendedor"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:h,onChange:ue=>m(ue.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),g.map(ue=>i.jsx("option",{value:ue.email,children:ue.label},ue.email))]})]}),i.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(W5()),d(a_()),A(""),m("")},children:"Quitar filtro"})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Transacciones procesadas"}),i.jsxs("label",{className:"text-sm flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:v.length>0&&F.length===v.length,onChange:ue=>Ve(ue.target.checked)}),"Seleccionar todas (sobre el filtro)"]})]}),v.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay transacciones procesadas en el filtro actual."}):i.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total proveedor"}),i.jsx("th",{className:"p-2 border",children:"Total venta"}),i.jsx("th",{className:"p-2 border",children:"Comisin venta"})]})}),i.jsx("tbody",{children:v.map(ue=>{const _e=F.includes(ue.id),We=Number(ue.packages||0)||1,ot=Number(ue.cogsAmount||0),Ce=Number(ue.amount||0),$e=ot/We,gt=Ce/We,Kt=(ue.sellerEmail||"").trim().toLowerCase(),Ut=o[Kt],Jt=Number((Ut==null?void 0:Ut.commissionPercent)||0),it=Ce*Jt/100;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:_e,onChange:X=>wt(ue.id,X.target.checked)})}),i.jsx("td",{className:"p-2 border",children:ue.date}),i.jsx("td",{className:"p-2 border",children:(Ut==null?void 0:Ut.name)||ue.vendorName}),i.jsx("td",{className:"p-2 border",children:ue.productName}),i.jsx("td",{className:"p-2 border",children:n_(ue.packages)}),i.jsx("td",{className:"p-2 border",children:Pl($e)}),i.jsx("td",{className:"p-2 border",children:Pl(gt)}),i.jsx("td",{className:"p-2 border",children:Pl(ot)}),i.jsx("td",{className:"p-2 border",children:Pl(Ce)}),i.jsx("td",{className:"p-2 border",children:Jt>0?`${Pl(it)} (${Jt.toFixed(2)}%)`:""})]},ue.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),pe&&i.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),i.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:ge,onChange:ue=>se(ue.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:je,onChange:ue=>Te(ue.target.value)})]})]})]}),D.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):i.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:D.map(ue=>{const _e=Y.includes(ue.id);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:_e,onChange:We=>Pe(ue.id,We.target.checked)})}),i.jsx("td",{className:"p-2 border",children:ue.date||""}),i.jsx("td",{className:"p-2 border",children:ue.description||""}),i.jsx("td",{className:"p-2 border",children:Pl(Number(ue.amount||0))})]},ue.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),i.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>J(!0),children:"Crear Cargo"})]}),K.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):i.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:K.map(ue=>{const _e=ie===ue.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:_e?i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:Fe,onChange:We=>de(We.target.value)}):i.jsx("span",{title:ue.description,children:ue.description.length>60?`${ue.description.slice(0,60)}`:ue.description})}),i.jsx("td",{className:"p-2 border",children:_e?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:we,onChange:We=>Le(We.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ue.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ue.type})}),i.jsx("td",{className:"p-2 border",children:_e?i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Ge,onChange:We=>ft(We.target.value)}):Pl(ue.amount)}),i.jsx("td",{className:"p-2 border",children:_e?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:jt,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:xt,children:"Cancelar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>kt(ue.id),children:"Eliminar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>ht(ue),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>kt(ue.id),children:"Eliminar"})]})})]},ue.id)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[i.jsx("div",{className:"space-y-1",children:i.jsxs("div",{children:["Total paquetes: ",i.jsx("strong",{children:n_(Ne.totalPackages)})]})}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total proveedor (costo):"," ",i.jsx("strong",{children:Pl(Ne.totalProvider)})]}),i.jsxs("div",{children:["Total venta: ",i.jsx("strong",{children:Pl(Ne.totalSale)})]}),i.jsxs("div",{children:["Ganancia bruta (venta  costo):"," ",i.jsx("strong",{children:Pl(Ne.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:Pl(Ne.totalGastos)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:Pl(Ne.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:Pl(Ne.credits)})]}),i.jsxs("div",{children:["Comisin total vendedores:"," ",i.jsx("strong",{children:Pl(Ne.totalCommissionVendors)})]}),i.jsxs("div",{children:["Ganancia sucursal (ventas  factor):"," ",i.jsx("strong",{children:Pl(Ne.branchProfit)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (ventas  gastos  dbitos + crditos  comisin vendedores):"," ",i.jsx("span",{className:"text-blue-700",children:Pl(Ne.finalAmount)})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{disabled:Re,onClick:rt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Re?"Creando":"Crear factura"}),i.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Xe&&i.jsx("span",{className:"text-sm ml-2",children:Xe})]}),Re&&i.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),Q&&i.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg_WHITE w-full max-w-lg rounded-xl shadow-xl p-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),i.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>J(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:ee,onChange:ue=>M(ue.target.value),placeholder:"Detalle del cargo"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:G,onChange:ue=>ne(ue.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:ve,onChange:ue=>V(ue.target.value),placeholder:"0.00"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:qe,children:"Agregar"})})]})]})})]})}const Fa=t=>`C$ ${Number(t??0).toFixed(2)}`,s_=t=>Number(t??0).toFixed(3);function X5(t){const e=t.transactions||[];let r=Number(t.totalPackages??0),n=Number(t.totalProvider??0),a=Number(t.totalSale??0),s=Number(t.totalCommissionVendors??0);if(e.length>0&&(a===0||r===0)){r=0,n=0,a=0,s=0;for(const v of e){const y=Number(v.packages??0);r+=y,n+=Number(v.totalProvider??y*(v.providerPricePack??0)),a+=Number(v.totalSale??y*(v.salePricePack??0));const b=v.commissionAmount??Number(v.totalSale??0)*Number(v.commissionPercent??0)/100;s+=Number(b||0)}}const o=t.expenses||[],l=t.adjustments||[],c=t.totalExpenses!==void 0?Number(t.totalExpenses):o.reduce((v,y)=>v+Number(y.amount||0),0),u=l.filter(v=>v.type==="DEBITO").reduce((v,y)=>v+Number(y.amount||0),0),d=l.filter(v=>v.type==="CREDITO").reduce((v,y)=>v+Number(y.amount||0),0),f=t.totalDebits!==void 0?Number(t.totalDebits):u,A=t.totalCredits!==void 0?Number(t.totalCredits):d,h=a-n,m=Number(t.branchFactorPercent??0),p=t.branchProfit!==void 0?Number(t.branchProfit):Number((h*m/100).toFixed(2)),g=t.finalAmount!==void 0?Number(t.finalAmount):a-s-c-f+A;return{totalPackages:r,totalProvider:n,totalSale:a,commissionTotal:s,expenses:c,debits:f,credits:A,grossProfit:h,branchProfit:p,finalAmount:g}}function iG(t){const e=t.transactions||[];if(e.length===0)return"";const r=Array.from(new Set(e.map(n=>n.vendorName||"Sin nombre")));return r.length===1?r[0]:"Varios"}function HQe(){const[t,e]=x.useState([]),[r,n]=x.useState(!0),[a,s]=x.useState(null),o=x.useRef(null),[l,c]=x.useState(!1),u=async()=>{n(!0);const h=er(At(De,"invoicesCandies"),bn("date","desc")),m=await Lt(h),p=[];m.forEach(g=>{const v=g.data();p.push({id:g.id,date:v.date,number:v.number,description:v.description,status:v.status||"PENDIENTE",totalPackages:v.totalPackages||0,totalProvider:v.totalProvider||0,totalSale:v.totalSale||0,totalExpenses:v.totalExpenses||0,totalDebits:v.totalDebits||0,totalCredits:v.totalCredits||0,totalCommissionVendors:v.totalCommissionVendors||0,finalAmount:v.finalAmount||0,branchFactorPercent:v.branchFactorPercent||0,branchProfit:v.branchProfit||0,transactions:(v.transactions||[]).map(y=>({id:y.id,date:y.date,vendorId:y.vendorId||null,vendorName:y.vendorName||"Sin nombre",sellerEmail:y.sellerEmail||null,productId:y.productId,productName:y.productName||"Sin nombre",packages:Number(y.packages||0),providerPricePack:Number(y.providerPricePack||0),salePricePack:Number(y.salePricePack||0),totalProvider:Number(y.totalProvider||0),totalSale:Number(y.totalSale||0),commissionPercent:Number(y.commissionPercent||0),commissionAmount:Number(y.commissionAmount||0)})),expenses:(v.expenses||[]).map(y=>({id:y.id,description:y.description||"",date:y.date||null,amount:Number(y.amount||0)})),adjustments:(v.adjustments||[]).map(y=>({id:y.id,description:y.description||"",type:y.type||"DEBITO",amount:Number(y.amount||0)}))})}),e(p),n(!1)};x.useEffect(()=>{u()},[]);const d=async h=>{const m=h.status==="PAGADA"?"PENDIENTE":"PAGADA";await Cn(Yt(De,"invoicesCandies",h.id),{status:m}),e(p=>p.map(g=>g.id===h.id?{...g,status:m}:g)),(a==null?void 0:a.id)===h.id&&s({...h,status:m})},f=async h=>{if(window.confirm(`Eliminar factura del ${h.date}?`))try{await Dn(Yt(De,"invoicesCandies",h.id)),e(m=>m.filter(p=>p.id!==h.id)),(a==null?void 0:a.id)===h.id&&s(null)}catch(m){console.error(m),alert("No se pudo eliminar la factura.")}},A=async()=>{if(!o.current||!a)return;const h=o.current,m=await Sg(h,{backgroundColor:"#ffffff",onclone:b=>{const w=b.body;w.style.background="#ffffff",w.querySelectorAll("*").forEach(P=>{const j=b.defaultView.getComputedStyle(P);j.boxShadow&&j.boxShadow!=="none"&&(P.style.boxShadow="none")})},scale:2}),p=m.toDataURL("image/png"),g=new $r("p","mm","a4"),v=g.internal.pageSize.getWidth(),y=m.height*v/m.width;g.addImage(p,"PNG",0,0,v,y),g.save(`factura_candy_${a.number||a.date}.pdf`)};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[i.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Facturacin CandyShop"}),i.jsx("button",{className:"ml-auto bg-blue-600 text-white px-4 py-2 rounded-2xl hover:bg-blue-700 text-sm",onClick:()=>c(!0),children:"Crear factura Candy"})]}),l&&i.jsx(VQe,{onClose:()=>c(!1),onCreated:()=>{c(!1),u()}}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"N factura"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sub total (sin gastos/ajustes)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Gastos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Dbitos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Crditos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Estado"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin facturas"})}):t.map(h=>{const m=X5(h),p=iG(h);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.number||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:p}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fa(m.commissionTotal)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:s_(m.totalPackages)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fa(m.totalSale)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fa(m.expenses)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fa(m.debits)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fa(m.credits)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fa(m.finalAmount)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:h.status})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(h),children:"Ver"}),i.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>d(h),children:h.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>f(h),children:"Eliminar"})]})})]},h.id)})})]})}),a&&i.jsxs("div",{ref:o,className:"bg-white p-4 rounded shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),i.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),i.jsx("button",{onClick:A,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const h=X5(a),m=iG(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Vendedor:"})," ",m]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes:"})," ",s_(h.totalPackages)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total proveedor:"})," ",Fa(h.totalProvider)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Sub total ventas:"})," ",Fa(h.totalSale)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia bruta:"})," ",Fa(h.grossProfit)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Comisin vendedores:"})," ",Fa(h.commissionTotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",Fa(h.expenses)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",Fa(h.debits)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",Fa(h.credits)]})]})]})})(),i.jsx("h4",{className:"font-semibold mb-1",children:"Transacciones"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total venta"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin venta"})]})}),i.jsx("tbody",{children:(a.transactions||[]).length>0?(a.transactions||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.productName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:s_(h.packages)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fa(h.providerPricePack)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fa(h.salePricePack)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fa(h.totalProvider)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fa(h.totalSale)}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[Fa(h.commissionAmount||0),h.commissionPercent?` (${h.commissionPercent.toFixed(2)}%)`:""]})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin transacciones"})})})]})}),i.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"})]})}),i.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.description||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fa(h.amount)})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin gastos"})})})]})}),i.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo de cargo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"})]})}),i.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.description}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:h.type})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fa(h.amount)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:a.date})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin cargos extras"})})})]})}),(()=>{const h=X5(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total paquetes: ",i.jsx("strong",{children:s_(h.totalPackages)})]}),i.jsxs("div",{children:["Total proveedor: ",i.jsx("strong",{children:Fa(h.totalProvider)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Sub total ventas: ",i.jsx("strong",{children:Fa(h.totalSale)})]}),i.jsxs("div",{children:["Ganancia bruta: ",i.jsx("strong",{children:Fa(h.grossProfit)})]}),i.jsxs("div",{children:["Ganancia sucursal: ",i.jsx("strong",{children:Fa(h.branchProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Comisin vendedores:"," ",i.jsx("strong",{children:Fa(h.commissionTotal)})]}),i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:Fa(h.expenses)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:Fa(h.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:Fa(h.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[i.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Total (sub total  comisin  gastos  dbitos + crditos):"}),i.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:Fa(h.finalAmount)})]})})]})})()]})]})}const Ss=t=>Math.round((Number(t)||0)*100)/100,u0=t=>Math.round((Number(t)||0)*1e3)/1e3,no=t=>Number(t??0).toFixed(2),wh=t=>Number(t??0).toFixed(3),$Qe=(t,e)=>{var A;const r=t.date??((A=t.timestamp)!=null&&A.toDate?jr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",o=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0;if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((h,m)=>{const p=Number((h==null?void 0:h.packages)??(h==null?void 0:h.qty)??(h==null?void 0:h.quantity)??0),g=Number((h==null?void 0:h.lineFinal)??0)||Math.max(0,Number((h==null?void 0:h.unitPricePackage)||(h==null?void 0:h.unitPrice)||0)*p-Number((h==null?void 0:h.discount)||0));let v=0;return c>0&&l>0&&Number(g||0)>0&&(v=Ss(c*Number(g||0)/l)),{id:`${e}#${m}`,productName:String((h==null?void 0:h.productName)??"(sin nombre)"),quantity:p,amount:Ss(g),date:r,type:s,vendorId:o,userEmail:a,vendorCommissionAmount:v}});const u=Number(t.packagesTotal??t.quantity??0),d=Number(t.amount??t.amountCharged??t.total??0)||0,f=Ss(Number(t.vendorCommissionAmount??0)||0);return[{id:e,productName:String((t==null?void 0:t.productName)??"(sin nombre)"),quantity:u,amount:Ss(d),date:r,type:s,vendorId:o,userEmail:a,vendorCommissionAmount:f}]};function GQe({role:t,roles:e,currentUserEmail:r,sellerCandyId:n}){const a=e&&e.length?e:t,s=!a||mn(a,"admin"),o="daily_closures_candies",l="sales_candies",c="sellers_candies",[u,d]=x.useState(jr(Iee(new Date),"yyyy-MM-dd")),[f,A]=x.useState(jr(new Date,"yyyy-MM-dd")),[h,m]=x.useState(!0),[p,g]=x.useState([]),[v,y]=x.useState(null),[b,w]=x.useState(""),[P,j]=x.useState([]),[_,I]=x.useState("ALL"),[E,F]=x.useState({}),k=x.useRef(null);if(!s)return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Liquidaciones"}),i.jsx("p",{className:"text-sm text-red-600",children:"Acceso denegado: solo admin."})]});const B=async()=>{try{const ee=await Lt(At(De,c)),M=[];ee.forEach(G=>{const ne=G.data();M.push({id:G.id,name:ne.name||"",commissionPercent:Number(ne.commissionPercent||0)})}),j(M)}catch(ee){console.error("Error cargando sellers_candies",ee)}},R=async()=>{const ee=performance.now();try{m(!0);const M=er(At(De,o),ur("date",">=",u),ur("date","<=",f)),G=await Lt(M),ne=performance.now();console.log(" getDocs ms:",(ne-ee).toFixed(1),"docs:",G.size);const ve=[];G.forEach(re=>ve.push({id:re.id,...re.data()}));const V=performance.now();console.log(" parse+set ms:",(V-ne).toFixed(1),"rows:",ve.length),ve.sort((re,Fe)=>re.date<Fe.date?1:re.date>Fe.date?-1:0),g(ve),y(null);const qe=new Set;ve.forEach(re=>{(re.sales||[]).forEach(Fe=>{const de=String((Fe==null?void 0:Fe.id)??"").split("#")[0].trim();de&&qe.add(de)})});const ie=Array.from(qe).filter(re=>!E[re]);if(ie.length>0){const re={};for(const Fe of ie)try{const de=await ei(Yt(De,l,Fe));if(de.exists()){const we=de.data();re[Fe]=$Qe(we,Fe)}else re[Fe]=[]}catch(de){console.error("Error leyendo sale",Fe,de),re[Fe]=[]}F(Fe=>({...Fe,...re}))}}catch(M){console.error(M),w(" Error cargando liquidaciones.")}finally{m(!1)}};x.useEffect(()=>{B()},[]),x.useEffect(()=>{R()},[]);const Y=async ee=>{ee.preventDefault(),await R()},me=x.useMemo(()=>{const ee={};return P.forEach(M=>ee[M.id]=M.name||M.id),ee},[P]),pe=ee=>{const M=[];return(ee.sales||[]).forEach(G=>{const ne=String((G==null?void 0:G.id)??"").trim();if(!ne)return;const ve=ne.split("#")[0],qe=(E[ve]||[]).find(ie=>ie.id===ne);qe?M.push(qe):M.push({id:ne,productName:String((G==null?void 0:G.productName)??"(sin nombre)"),quantity:Number((G==null?void 0:G.quantity)??0),amount:Ss(Number((G==null?void 0:G.amount)??0)),date:String((G==null?void 0:G.date)??""),type:"CONTADO",vendorId:"",userEmail:String((G==null?void 0:G.userEmail)??"(sin vendedor)"),vendorCommissionAmount:0})}),M},he=ee=>_==="ALL"?ee:ee.filter(M=>(M.vendorId||"")===_),ge=x.useMemo(()=>p.map(ee=>{const M=he(pe(ee));let G=0,ne=0,ve=0,V=0,qe=0,ie=0;for(const re of M){const Fe=Number(re.quantity||0),de=Number(re.amount||0),we=Number(re.vendorCommissionAmount||0);re.type==="CREDITO"?(ne+=Fe,V+=de,ie+=we):(G+=Fe,ve+=de,qe+=we)}return{...ee,_sales:M,_packsCash:u0(G),_packsCredit:u0(ne),_amountCash:Ss(ve),_amountCredit:Ss(V),_comCash:Ss(qe),_comCredit:Ss(ie)}}),[p,E,_]),se=x.useMemo(()=>{let ee=0,M=0,G=0,ne=0,ve=0,V=0;for(const qe of ge)ee+=Number(qe._packsCash||0),M+=Number(qe._packsCredit||0),G+=Number(qe._amountCash||0),ne+=Number(qe._amountCredit||0),ve+=Number(qe._comCash||0),V+=Number(qe._comCredit||0);return{packsCash:u0(ee),packsCredit:u0(M),totalSales:Ss(G+ne),amountCash:Ss(G),amountCredit:Ss(ne),comCash:Ss(ve),comCredit:Ss(V)}},[ge]),je=x.useMemo(()=>{const ee={},M={};for(const G of ge){const ne=G._sales||[];for(const ve of ne){const V=(ve.vendorId||"").trim();if(!V)continue;const qe=me[V]||ve.userEmail||V,ie=Ss(Number(ve.vendorCommissionAmount||0));ve.type==="CREDITO"?(M[V]||(M[V]={vendorId:V,name:qe,total:0}),M[V].total=Ss(M[V].total+ie)):(ee[V]||(ee[V]={vendorId:V,name:qe,total:0}),ee[V].total=Ss(ee[V].total+ie))}}return{cashRows:Object.values(ee).filter(G=>G.total>0).sort((G,ne)=>ne.total-G.total),creditRows:Object.values(M).filter(G=>G.total>0).sort((G,ne)=>ne.total-G.total)}},[ge,me]),Te=x.useMemo(()=>P.map(ee=>({id:ee.id,label:ee.name||ee.id})).sort((ee,M)=>ee.label.localeCompare(M.label)),[P]),D=x.useMemo(()=>v&&ge.find(ee=>ee.id===v.id)||null,[v,ge]),K=x.useMemo(()=>D?D._sales||[]:[],[D]),z=x.useMemo(()=>{let ee=0,M=0,G=0,ne=0;for(const ve of K)ve.type==="CREDITO"?(M+=Number(ve.quantity||0),ne+=Number(ve.amount||0)):(ee+=Number(ve.quantity||0),G+=Number(ve.amount||0));return{packsCash:u0(ee),packsCredit:u0(M),amountCash:Ss(G),amountCredit:Ss(ne)}},[K]),Q=x.useMemo(()=>{const ee={};for(const M of K){const G=M.productName||"(sin nombre)";ee[G]||(ee[G]={productName:G,packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0});const ne=Number(M.quantity||0),ve=Number(M.amount||0),V=Number(M.vendorCommissionAmount||0);M.type==="CREDITO"?(ee[G].packsCredit=u0(ee[G].packsCredit+ne),ee[G].amountCredit=Ss(ee[G].amountCredit+ve),ee[G].comCredit=Ss(ee[G].comCredit+V)):(ee[G].packsCash=u0(ee[G].packsCash+ne),ee[G].amountCash=Ss(ee[G].amountCash+ve),ee[G].comCash=Ss(ee[G].comCash+V))}return Object.values(ee)},[K]),J=async()=>{if(!k.current||!D)return;const ee=k.current;ee.classList.add("force-pdf-colors");try{const G=(await Sg(ee,{backgroundColor:"#ffffff"})).toDataURL("image/png"),ne=new $r;ne.addImage(G,"PNG",10,10,190,0),ne.save(`liquidacion_${D.date}.pdf`)}finally{ee.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Liquidaciones"}),i.jsxs("form",{onSubmit:Y,className:"flex flex-wrap items-end gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ee=>d(ee.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:ee=>A(ee.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Vendedor"}),i.jsxs("select",{className:"border rounded px-2 py-1 min-w-[240px]",value:_,onChange:ee=>I(ee.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),Te.map(ee=>i.jsx("option",{value:ee.id,children:ee.label},ee.id))]})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"text-2xl font-bold",children:wh(se.packsCash)})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"text-2xl font-bold",children:wh(se.packsCredit)})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",no(se.totalSales)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",no(se.amountCash)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",no(se.amountCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",no(se.comCash)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",no(se.comCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),je.cashRows.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:je.cashRows.map(ee=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:ee.name}),i.jsxs("strong",{className:"ml-2",children:["C$",no(ee.total)]})]},ee.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),je.creditRows.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:je.creditRows.map(ee=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:ee.name}),i.jsxs("strong",{className:"ml-2",children:["C$",no(ee.total)]})]},ee.vendorId))})]})]}),h?i.jsx("p",{children:"Cargando..."}):ge.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):i.jsxs("table",{className:"min-w-full text-sm mb-6 shadow-lg p-4 bg-white border-gray-100",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total paquetes Cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Total Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Total Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"}),i.jsx("th",{className:"border p-2",children:"Opciones"})]})}),i.jsx("tbody",{children:ge.map(ee=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:ee.date}),i.jsx("td",{className:"border p-1",children:wh(ee._packsCash)}),i.jsx("td",{className:"border p-1",children:wh(ee._packsCredit)}),i.jsxs("td",{className:"border p-1",children:["C$",no(ee._amountCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",no(ee._amountCredit)]}),i.jsxs("td",{className:"border p-1",children:["C$",no(ee._comCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",no(ee._comCredit)]}),i.jsx("td",{className:"border p-1",children:i.jsx("div",{className:"flex items-center gap-2 justify-center",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>y(ee),children:"Ver detalle"})})})]},ee.id))})]}),D&&i.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",D.date]}),i.jsx("button",{onClick:()=>y(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),i.jsx("button",{onClick:J,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),i.jsxs("div",{ref:k,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[i.jsxs("div",{children:["Total Ventas cash:"," ",i.jsxs("strong",{children:["C$",no(z.amountCash)]})]}),i.jsxs("div",{children:["Total Ventas crdito:"," ",i.jsxs("strong",{children:["C$",no(z.amountCredit)]})]}),i.jsxs("div",{children:["Total paquetes cash:"," ",i.jsx("strong",{children:wh(z.packsCash)})]}),i.jsxs("div",{children:["Total paquetes crdito:"," ",i.jsx("strong",{children:wh(z.packsCredit)})]})]}),i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),K.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin ventas en este cierre."}):i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),i.jsx("tbody",{children:K.map((ee,M)=>{const G=ee.vendorId&&me[ee.vendorId]?me[ee.vendorId]:ee.userEmail,ne=Ss(Number(ee.vendorCommissionAmount||0));return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:G}),i.jsx("td",{className:"border p-1",children:ee.productName}),i.jsx("td",{className:"border p-1",children:ee.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:wh(ee.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",no(ee.amount)]}),i.jsx("td",{className:"border p-1",children:ne>0?`C$${no(ne)}`:""}),i.jsx("td",{className:"border p-1",children:ee.date||""})]},M)})})]}),i.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),Q.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin datos para consolidar."}):i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),i.jsx("tbody",{children:Q.map((ee,M)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:ee.productName}),i.jsx("td",{className:"border p-1",children:wh(ee.packsCash)}),i.jsx("td",{className:"border p-1",children:wh(ee.packsCredit)}),i.jsxs("td",{className:"border p-1",children:["C$",no(ee.amountCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",no(ee.amountCredit)]}),i.jsxs("td",{className:"border p-1",children:["C$",no(ee.comCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",no(ee.comCredit)]})]},M))})]})]})]}),b&&i.jsx("p",{className:"mt-3 text-sm",children:b})]})}const Or=t=>Math.round((Number(t)||0)*100)/100,Jo=t=>Math.round((Number(t)||0)*1e3)/1e3,Ir=t=>Number(t??0).toFixed(2),qs=t=>Number(t??0).toFixed(3),WS=t=>{const e=String(t||"").toUpperCase().trim();return e==="RIVAS"?"RIVAS":e==="SAN_JORGE"||e==="SANJORGE"||e==="SJ"?"SAN_JORGE":e==="ISLA"||e==="OMETEPE"?"ISLA":""},_r=t=>{const e=Number(t);return Number.isFinite(e)?e:0},KQe=t=>Math.max(0,Math.min(1,t));function oG({title:t,series:e,valuePrefix:r="C$"}){const u=e.map(b=>Number(b.value||0)),d=u.length?Math.min(...u):0,f=u.length?Math.max(...u):0,A=f-d||1,h=840,m=204,p=e.map((b,w)=>{const P=44+(e.length<=1?h/2:w/(e.length-1)*h),j=18+(1-(Number(b.value||0)-d)/A)*m;return{x:P,y:j,...b}}),g=p.map((b,w)=>`${w===0?"M":"L"} ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" "),v=p[p.length-1],y=v?v.value:0;return i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("div",{className:"font-semibold text-sm sm:text-base",children:t}),i.jsxs("div",{className:"text-xs text-gray-600 whitespace-nowrap",children:["ltimo: ",i.jsx("strong",{children:r+Ir(y)})]})]}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("svg",{viewBox:"0 0 900 260",className:"min-w-[720px] w-full h-auto",role:"img","aria-label":t,children:[[0,1,2,3].map(b=>{const w=18+b/3*m;return i.jsx("line",{x1:44,y1:w,x2:884,y2:w,stroke:"#e5e7eb",strokeWidth:"1"},b)}),i.jsxs("text",{x:8,y:28,fontSize:"12",fill:"#6b7280",children:[r,Ir(f)]}),i.jsxs("text",{x:8,y:18+m,fontSize:"12",fill:"#6b7280",children:[r,Ir(d)]}),i.jsx("path",{d:g,fill:"none",stroke:"#111827",strokeWidth:"2.5"}),p.map((b,w)=>i.jsx("circle",{cx:b.x,cy:b.y,r:"3.5",fill:"#111827"},w)),e.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("text",{x:44,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"start",children:e[0].label}),i.jsx("text",{x:884,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"end",children:e[e.length-1].label})]})]})})]})}function qQe({title:t,items:e}){const r=e.reduce((f,A)=>f+Number(A.value||0),0),n=240,a=86,s=120,o=120,l=r>0?r:1;let c=0;const u=["#111827","#374151","#6b7280","#9ca3af"],d=e.map((f,A)=>{const h=Math.max(0,Number(f.value||0)),m=c/l,p=h/l;c+=h;const g=m+p,v=m*Math.PI*2-Math.PI/2,y=g*Math.PI*2-Math.PI/2,b=s+a*Math.cos(v),w=o+a*Math.sin(v),P=s+a*Math.cos(y),j=o+a*Math.sin(y),_=p>.5?1:0;return{d:[`M ${s} ${o}`,`L ${b.toFixed(2)} ${w.toFixed(2)}`,`A ${a} ${a} 0 ${_} 1 ${P.toFixed(2)} ${j.toFixed(2)}`,"Z"].join(" "),fill:u[A%u.length],...f,frac:p}});return i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsx("div",{className:"font-semibold text-sm sm:text-base mb-2",children:t}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("div",{className:"w-full md:w-auto overflow-x-auto",children:i.jsxs("svg",{viewBox:`0 0 ${n} ${n}`,className:"min-w-[240px] w-[260px] h-auto",role:"img","aria-label":t,children:[d.map((f,A)=>i.jsx("path",{d:f.d,fill:f.fill},A)),i.jsx("circle",{cx:s,cy:o,r:"48",fill:"#ffffff"}),i.jsx("text",{x:s,y:o-4,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:"Total"}),i.jsxs("text",{x:s,y:o+16,textAnchor:"middle",fontSize:"14",fill:"#111827",fontWeight:"700",children:["C$",Ir(r)]})]})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.map((f,A)=>{const h=Number(f.value||0),m=KQe(h/(r||1))*100;return i.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"text-sm font-semibold truncate",children:f.label}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Ir(h)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[m.toFixed(1),"%"]}),i.jsx("div",{className:"h-2 bg-white border rounded-full mt-2 overflow-hidden",children:i.jsx("div",{className:"h-full",style:{width:`${m}%`,background:u[A%u.length]}})})]},f.label)})}),i.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Distribucin basada en ventas del perodo con los filtros actuales."})]})]})]})}const zQe=(t,e)=>{var g;const r=t.date??((g=t.timestamp)!=null&&g.toDate?jr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=String(t.processedDate??t.closureDate??"").trim(),a=t.status??"FLOTANTE",s=t.type||"CONTADO",o=String(t.vendorId??"").trim(),l=String(t.vendorName??"").trim()||String(t.userEmail??"").trim()||o||"(sin vendedor)",c=String(t.customerId??"").trim(),u=String(t.customerName??"").trim()||String(t.clientName??"").trim()||"",d=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,f=Number(t.vendorCommissionAmount??0)||0,A=WS(t.branch??t.vendorBranch);if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((v,y)=>{const b=Number((v==null?void 0:v.packages)??0)||0,w=Number((v==null?void 0:v.total)??0)||Math.max(0,Number((v==null?void 0:v.unitPricePackage)||0)*b-Number((v==null?void 0:v.discount)||0)),P=WS(v==null?void 0:v.branch)||A;let j=0;return f>0&&d>0&&w>0&&(j=Or(f*w/d)),{id:`${e}#${y}`,docId:e,productId:String((v==null?void 0:v.productId)??""),productName:String((v==null?void 0:v.productName)??"(sin nombre)"),date:r,processedDate:n,status:a,type:s,vendorId:o,vendorName:l,customerId:c,customerName:u,branch:P||"",packages:b,amount:Or(w),commission:Or(j)}});const h=Number(t.packagesTotal??0)||0,m=Number(t.total??t.amount??t.amountCharged??0)||0,p=Or(Number(t.vendorCommissionAmount??0)||0);return[{id:`${e}#0`,docId:e,productId:"",productName:"(sin nombre)",date:r,processedDate:n,status:a,type:s,vendorId:o,vendorName:l,customerId:c,customerName:u,branch:A||"",packages:h,amount:Or(m),commission:Or(p)}]};function WQe({role:t,roles:e}){var Be;const r=e&&e.length?e:t,n=!r||mn(r,"admin"),a=jr(new Date,"yyyy-MM-dd"),[s,o]=x.useState(a),[l,c]=x.useState(a),[u,d]=x.useState("TODAS"),[f,A]=x.useState("AMBAS"),[h,m]=x.useState("ALL"),[p,g]=x.useState("ALL"),[v,y]=x.useState(""),[b,w]=x.useState(""),[P,j]=x.useState(""),[_,I]=x.useState(""),[E,F]=x.useState("DIA"),[k,B]=x.useState(!0),[R,Y]=x.useState(""),[me,pe]=x.useState([]),[he,ge]=x.useState([]),[se,je]=x.useState([]),[Te,D]=x.useState({}),[K,z]=x.useState([]),[Q,J]=x.useState([]),[ee,M]=x.useState([]),[G,ne]=x.useState([]),[ve,V]=x.useState([]),[qe,ie]=x.useState([]),[re,Fe]=x.useState(""),[de,we]=x.useState(""),[Le,Ge]=x.useState(null),ft=x.useRef(null),[ht,xt]=x.useState([]),[jt,kt]=x.useState("DETALLE"),wt=x.useMemo(()=>{const S={};return Q.forEach(O=>S[O.id]=String(O.name||"").trim()),S},[Q]),Ve=x.useMemo(()=>{const S={};return he.forEach(O=>S[O.id]=O),S},[he]),Pe=S=>{const O=S.customerId?wt[S.customerId]:"";return(S.customerName||O||"").trim()||(S.customerId?wt[S.customerId]||S.customerId:"")||""};x.useEffect(()=>{if(!n)return;(async()=>{try{const O=await Lt(At(De,"inventory_candies")),U=[];O.forEach(q=>U.push({id:q.id,...q.data()})),xt(U)}catch(O){console.error("inventory_candies all error:",O),xt([])}})()},[n]),x.useEffect(()=>{(async()=>{try{const O=await Lt(At(De,"sellers_candies")),U=[];O.forEach(ae=>{const fe=ae.data();U.push({id:ae.id,name:String(fe.name||"").trim(),commissionPercent:Number(fe.commissionPercent||0),branch:fe.branch||""})});const q=new Map;U.forEach(ae=>q.set(ae.id,ae)),ge(Array.from(q.values()).sort((ae,fe)=>ae.name.localeCompare(fe.name)))}catch(O){console.error(O)}})()},[]),x.useEffect(()=>{if(!n||!s||!l)return;B(!0),Y("");const S=er(At(De,"sales_candies"),ur("date",">=",s),ur("date","<=",l),bn("date","asc")),O=dd(S,U=>{const q=[];U.forEach(ae=>q.push(...zQe(ae.data(),ae.id))),pe(q),B(!1)},U=>{console.error("sales_candies periodo error:",U),pe([]),B(!1),Y(" Error cargando ventas del perodo (revis ndices si aplica).")});return()=>O()},[n,s,l]),x.useEffect(()=>{if(!n)return;(async()=>{try{const O=er(At(De,"candy_main_orders"),ur("date",">=",s),ur("date","<=",l)),U=await Lt(O),q=[];U.forEach(ae=>q.push({id:ae.id,...ae.data()})),je(q)}catch(O){console.error("candy_main_orders error:",O),je([])}})()},[n,s,l]),x.useEffect(()=>{if(!n)return;(async()=>{try{const O=await Lt(er(At(De,"candy_main_orders"),bn("createdAt","desc"))),U={},q=(ae,fe)=>`${ae}#${String(fe).padStart(10,"0")}`;O.forEach(ae=>{var tt;const fe=ae.data(),Ue=Number(((tt=fe.createdAt)==null?void 0:tt.seconds)??0),Ze=String(fe.date||""),lt=q(Ze,Ue),Qe=Array.isArray(fe.items)?fe.items:[];for(const ut of Qe){const Pt=String(ut.id||ut.productId||"");if(!Pt)continue;const Ct={unitPriceRivas:Number(ut.unitPriceRivas||0),unitPriceSanJorge:Number(ut.unitPriceSanJorge||0),unitPriceIsla:Number(ut.unitPriceIsla||0),key:lt},It=U[Pt];(!It||Ct.key>It.key)&&(U[Pt]=Ct)}}),D(U)}catch(O){console.error("candy_main_orders catalog error:",O),D({})}})()},[n]),x.useEffect(()=>{if(!n)return;const S=er(At(De,"inventory_candies_sellers"),ur("date",">=",s),ur("date","<=",l)),O=dd(S,U=>{const q=[];U.forEach(ae=>q.push({id:ae.id,...ae.data()})),z(q)},U=>{console.error("inventory_candies_sellers error:",U),z([])});return()=>O()},[n,s,l]),x.useEffect(()=>{if(!n)return;(async()=>{try{const O=er(At(De,"expenses_candies"),ur("date",">=",s),ur("date","<=",l),bn("date","asc")),U=await Lt(O),q=[];U.forEach(ae=>q.push({id:ae.id,...ae.data()})),ne(q)}catch(O){console.warn("expenses_candies sin ndice, usando fallback:",O);try{const U=await Lt(At(De,"expenses_candies")),q=[];U.forEach(ae=>q.push({id:ae.id,...ae.data()})),ne(q.filter(ae=>String(ae.date||"")>=s&&String(ae.date||"")<=l))}catch(U){console.error(U),ne([])}}})()},[n,s,l]),x.useEffect(()=>{if(!n)return;(async()=>{try{const O=await Lt(At(De,"inventory_candies")),U=[];O.forEach(q=>U.push({id:q.id,...q.data()})),V(U)}catch(O){console.error("inventory_candies global error:",O),V([])}})()},[n]),x.useEffect(()=>{if(!n)return;(async()=>{try{const O=await Lt(At(De,"inventory_candies_sellers")),U=[];O.forEach(q=>U.push({id:q.id,...q.data()})),ie(U)}catch(O){console.error("inventory_candies_sellers global error:",O),ie([])}})()},[n]),x.useEffect(()=>{if(!n)return;const S=er(At(De,"customers_candies")),O=dd(S,U=>{const q=[];U.forEach(ae=>{var fe,Ue,Ze;return q.push({id:ae.id,name:String(((fe=ae.data())==null?void 0:fe.name)||"").trim(),initialDebt:Number(((Ue=ae.data())==null?void 0:Ue.initialDebt)||0),initialDebtDate:String(((Ze=ae.data())==null?void 0:Ze.initialDebtDate)||"").trim()})}),J(q)},U=>{console.error("customers_candies snapshot error:",U),J([])});return()=>O()},[n]),x.useEffect(()=>{if(!n)return;(async()=>{try{const O=er(At(De,"ar_movements"),ur("date","<=",l),bn("date","asc")),U=await Lt(O),q=[];U.forEach(ae=>q.push({id:ae.id,...ae.data()})),M(q)}catch(O){console.warn("ar_movements sin ndice, usando fallback:",O);try{const U=await Lt(At(De,"ar_movements")),q=[];U.forEach(ae=>q.push({id:ae.id,...ae.data()})),M(q.filter(ae=>String(ae.date||"")<=l))}catch(U){console.error(U),M([])}}})()},[n,l]);const be=x.useMemo(()=>{let S=[...me];if(u!=="TODAS"&&(S=S.filter(q=>q.status===u)),f==="CASH"&&(S=S.filter(q=>q.type==="CONTADO")),f==="CREDITO"&&(S=S.filter(q=>q.type==="CREDITO")),h!=="ALL"&&(S=S.filter(q=>(q.vendorId||"")===h)),p!=="ALL"&&(S=S.filter(q=>q.branch===p)),v.trim()){const q=v.trim().toLowerCase();S=S.filter(ae=>(ae.productName||"").toLowerCase().includes(q))}if(b.trim()){const q=b.trim().toLowerCase();S=S.filter(ae=>(Pe(ae)||"").toLowerCase().includes(q))}const O=P.trim()?Number(P):null,U=_.trim()?Number(_):null;return O!==null&&!Number.isNaN(O)&&(S=S.filter(q=>(q.amount||0)>=O)),U!==null&&!Number.isNaN(U)&&(S=S.filter(q=>(q.amount||0)<=U)),S},[me,u,f,h,p,v,b,P,_,wt]),ce=x.useMemo(()=>{let S=0,O=0,U=0,q=0,ae=0,fe=0;for(const Ze of be){const lt=_r(Ze.packages),Qe=_r(Ze.amount),tt=_r(Ze.commission);Ze.type==="CREDITO"?(O+=lt,q+=Qe,fe+=tt):(S+=lt,U+=Qe,ae+=tt)}const Ue=Or(U+q);return{packsCash:Jo(S),packsCredit:Jo(O),salesCash:Or(U),salesCredit:Or(q),salesTotal:Ue,commCash:Or(ae),commCredit:Or(fe),commTotal:Or(ae+fe)}},[be]),te=x.useMemo(()=>{let S=0,O=0,U=0,q=0,ae=0,fe=0;for(const Ue of se){const Ze=Array.isArray(Ue.items)?Ue.items:[];for(const lt of Ze)S+=_r(lt.totalRivas),O+=_r(lt.totalSanJorge),U+=_r(lt.totalIsla),q+=_r(lt.gainRivas),ae+=_r(lt.gainSanJorge),fe+=_r(lt.gainIsla)}return{expectedRivas:Or(S),expectedSanJorge:Or(O),expectedIsla:Or(U),grossRivas:Or(q),grossSanJorge:Or(ae),grossIsla:Or(fe),grossTotal:Or(q+ae+fe),expectedTotal:Or(S+O+U)}},[se]),Ne=x.useMemo(()=>{const S={RIVAS:{sales:0,packages:0},SAN_JORGE:{sales:0,packages:0},ISLA:{sales:0,packages:0}};for(const O of be){const U=O.branch;U&&(S[U].sales+=_r(O.amount),S[U].packages+=_r(O.packages))}return{RIVAS:{sales:Or(S.RIVAS.sales),packages:Jo(S.RIVAS.packages)},SAN_JORGE:{sales:Or(S.SAN_JORGE.sales),packages:Jo(S.SAN_JORGE.packages)},ISLA:{sales:Or(S.ISLA.sales),packages:Jo(S.ISLA.packages)}}},[be]),Re=x.useMemo(()=>({RIVAS:Or(Ne.RIVAS.sales-te.expectedRivas),SAN_JORGE:Or(Ne.SAN_JORGE.sales-te.expectedSanJorge),ISLA:Or(Ne.ISLA.sales-te.expectedIsla)}),[Ne,te]),ye=x.useMemo(()=>{const S={},O={};for(const ae of be){const fe=(ae.vendorId||"").trim();if(!fe)continue;const Ue=he.find(Qe=>Qe.id===fe),Ze=(Ue==null?void 0:Ue.name)||ae.vendorName||"(sin vendedor)",lt=_r(ae.commission);ae.type==="CREDITO"?(O[fe]||(O[fe]={vendorId:fe,name:Ze,total:0}),O[fe].total=Or(O[fe].total+lt)):(S[fe]||(S[fe]={vendorId:fe,name:Ze,total:0}),S[fe].total=Or(S[fe].total+lt))}const U=Object.values(S).sort((ae,fe)=>fe.total-ae.total),q=Object.values(O).sort((ae,fe)=>fe.total-ae.total);return{cashArr:U,creditArr:q}},[be,he]),Xe=x.useMemo(()=>{const S=(Ct,It)=>Ct.reduce((St,Zt)=>St+Number((Zt==null?void 0:Zt[It])??0),0),O=Ct=>{const It=Number(Ct);return Number.isFinite(It)?Math.floor(It):0},U=Ct=>{const It=Number((Ct==null?void 0:Ct.totalPackages)??0);if(It>0)return It;const St=Array.isArray(Ct==null?void 0:Ct.items)?Ct.items:[];return S(St,"packages")};let q=0,ae=0;for(const Ct of se){const It=Array.isArray(Ct.items)?Ct.items:[];if(It.length)for(const St of It)q+=Number((St==null?void 0:St.subtotal)??0);else q+=Number(Ct.subtotal??0);ae+=U(Ct)}let fe=0,Ue=0,Ze=0;const lt=Ct=>{const It=Number(Ct==null?void 0:Ct.remainingPackages);if(Number.isFinite(It)&&It>0)return Math.floor(It);const St=Math.max(1,O((Ct==null?void 0:Ct.unitsPerPackage)??1)),Zt=O((Ct==null?void 0:Ct.remainingUnits)??(Ct==null?void 0:Ct.remaining)??0);return Zt>0?Math.max(0,Math.floor(Zt/St)):0};for(const Ct of K)fe+=Number(Ct.subtotal??0),Ue+=Number(Ct.packages??0),Ze+=lt(Ct);const Qe=new Set(se.filter(Ct=>String(Ct.date||"")>=s&&String(Ct.date||"")<=l).map(Ct=>Ct.id));let tt=0;for(const Ct of ht){const It=String(Ct.orderId||"").trim();It&&Qe.has(It)&&(tt+=Number(Ct.remainingPackages??0))}const ut=ve.reduce((Ct,It)=>Ct+_r(It.remainingPackages),0),Pt=qe.reduce((Ct,It)=>Ct+_r(It.remainingPackages),0);return{providerTotalMaster:Or(q),providerTotalVendor:Or(fe),orderedPacksMaster:Jo(ae),remainingPacksMaster:Jo(tt),orderedPacksVendor:Jo(Ue),remainingPacksVendor:Jo(Ze),globalRemainingMaster:Jo(ut),globalRemainingVendor:Jo(Pt)}},[se,K,ht,s,l,ve,qe]),mt=x.useMemo(()=>{const S={};let O=0;for(const U of G){const q=String(U.date||"").trim();if(!q)continue;const ae=Math.max(0,_r(U.amount));O+=ae,S[q]=Or((S[q]||0)+ae)}return{total:Or(O),byDay:S}},[G]),rt=x.useMemo(()=>{let S=0;for(const O of se){const U=Array.isArray(O.items)?O.items:[];if(U.length)for(const q of U)S+=_r(q==null?void 0:q.subtotal);else S+=_r(O.subtotal)}return Or(S)},[se]),ue=x.useMemo(()=>{var lt;const S=Qe=>{const tt=Math.max(1,Math.floor(_r(Qe.unitsPerPackage||1))),ut=_r(Qe.totalUnits)>0?_r(Qe.totalUnits):_r(Qe.packages)*tt;let Pt=0;_r(Qe.remainingUnits)>0?Pt=_r(Qe.remainingUnits):_r(Qe.remainingPackages)>0?Pt=_r(Qe.remainingPackages)*tt:Pt=0;const Ct=Math.max(0,ut-Pt);return{orderedUnits:ut,remainingUnits:Pt,soldUnits:Ct,upp:tt}},O=Qe=>{const tt=Ve[Qe];return WS(tt==null?void 0:tt.branch)||"ISLA"},U=(Qe,tt)=>{var ut,Pt,Ct;return tt==="ISLA"?_r(((ut=Te[String(Qe.productId||"")])==null?void 0:ut.unitPriceIsla)??Qe.unitPriceIsla):tt==="RIVAS"?_r(((Pt=Te[String(Qe.productId||"")])==null?void 0:Pt.unitPriceRivas)??Qe.unitPriceRivas):tt==="SAN_JORGE"?_r(((Ct=Te[String(Qe.productId||"")])==null?void 0:Ct.unitPriceSanJorge)??Qe.unitPriceSanJorge):0},q=(Qe,tt)=>{const ut=Math.max(0,Math.floor(_r(Qe.packages))),Pt=U(Qe,tt),Ct=Or(Pt*ut);if(Ct>0)return Ct;const It=_r(Qe.totalVendor)||(tt==="ISLA"?_r(Qe.totalIsla):tt==="RIVAS"?_r(Qe.totalRivas):tt==="SAN_JORGE"?_r(Qe.totalSanJorge):0);if(It>0)return It;const St=_r(Qe.unitPriceVendor);if(St>0){const{orderedUnits:Zt}=S(Qe);return St*Zt}return 0},ae=(Qe,tt)=>{const ut=U(Qe,tt),{orderedUnits:Pt,upp:Ct}=S(Qe);if(ut>0&&Ct>0)return ut/Ct;const It=_r(Qe.unitPriceVendor);if(It>0)return It;const St=q(Qe,tt);return St>0&&Pt>0?St/Pt:0},fe=new Map;for(const Qe of K){const tt=String(Qe.orderId||"").trim(),ut=tt||`DOC:${Qe.id}`,Pt=String(Qe.sellerId||"").trim(),Ct=String(Qe.sellerName||"").trim()||Pt&&((lt=Ve[Pt])==null?void 0:lt.name)||""||"(sin vendedor)",It=String(Qe.date||"").trim(),St=Pt?O(Pt):"",{orderedUnits:Zt,remainingUnits:Er,soldUnits:Nr}=S(Qe),Dr=q(Qe,St),nn=ae(Qe,St),pn=nn>0?nn*Nr:Zt>0?Dr*Nr/Zt:0,Yr=Or(Dr-pn);fe.has(ut)||fe.set(ut,{orderKey:ut,orderId:tt||ut,date:It,sellerId:Pt,sellerName:Ct,branch:St,totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0,lines:[]});const dn=fe.get(ut);dn.lines.push({...Qe,orderedUnits:Zt,soldUnits:Nr,remainingUnits:Er,lineTotal:Or(Dr),lineSoldValue:Or(pn),lineRemainingValue:Or(Yr)}),dn.totalOrden+=Dr,dn.vendido+=pn,dn.restante+=Yr,dn.comision+=_r(Qe.uVendor??Qe.vendorProfit??Qe.gainVendor)}for(const Qe of fe.values())Qe.comision=Or(Qe.comision),Qe.totalEsperado=Or(Qe.totalOrden-Qe.comision),Qe.totalOrden=Or(Qe.totalOrden),Qe.vendido=Or(Qe.vendido),Qe.restante=Or(Qe.restante);const Ue=Array.from(fe.values()).sort((Qe,tt)=>Qe.date&&tt.date?Qe.date<tt.date?1:-1:tt.totalOrden-Qe.totalOrden),Ze=Ue.reduce((Qe,tt)=>(Qe.totalOrden+=_r(tt.totalOrden),Qe.vendido+=_r(tt.vendido),Qe.restante+=_r(tt.restante),Qe.comision+=_r(tt.comision),Qe.totalEsperado+=_r(tt.totalEsperado),Qe),{totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0});return{global:{totalOrden:Or(Ze.totalOrden),vendido:Or(Ze.vendido),restante:Or(Ze.restante),comision:Or(Ze.comision),totalEsperado:Or(Ze.totalEsperado)},orders:Ue}},[K,Ve,Te]),_e=x.useMemo(()=>{var q,ae,fe;let S=0,O=0;for(const Ue of K){const Ze=String(Ue.sellerId||"").trim(),lt=Ze?Ve[Ze]:void 0,Qe=WS(lt==null?void 0:lt.branch)||"ISLA",tt=Math.max(0,Math.floor(_r(Ue.packages)));if(!tt)continue;const ut=_r(Qe==="ISLA"?((q=Te[String(Ue.productId||"")])==null?void 0:q.unitPriceIsla)??Ue.unitPriceIsla:Qe==="RIVAS"?((ae=Te[String(Ue.productId||"")])==null?void 0:ae.unitPriceRivas)??Ue.unitPriceRivas:((fe=Te[String(Ue.productId||"")])==null?void 0:fe.unitPriceSanJorge)??Ue.unitPriceSanJorge);let Pt=Or(ut*tt);Pt||(Pt=_r(Qe==="ISLA"?Ue.totalIsla:Qe==="RIVAS"?Ue.totalRivas:Ue.totalSanJorge)),Pt&&(S+=Pt,O+=Pt)}const U=Or(_r(te.expectedIsla)-O);return{dispersedTotal:Or(S),dispersedIsla:Or(O),totalExistenteIsla:U}},[K,Ve,te.expectedIsla,Te]),We=x.useMemo(()=>({net:Or(K.reduce((O,U)=>{const q=U.uNeta,ae=_r(q);if(ae!==0||q===0)return O+ae;const fe=_r(U.grossProfit),Ue=_r(U.logisticAllocated??U.gastos??U.gasto),Ze=_r(U.uVendor??U.vendorProfit);return O+(fe-Ue-Ze)},0))}),[K]),ot=x.useMemo(()=>{let S=0,O=0,U=0;for(const q of be){if(q.type!=="CREDITO")continue;const ae=_r(q.amount),fe=_r(q.commission);S+=ae,O+=ae-fe}for(const q of ee){const ae=String(q.date||"").trim();if(!ae||ae<s||ae>l)continue;const fe=_r(q.amount);(q.type||(fe<0?"ABONO":"CARGO"))==="ABONO"&&(U+=Math.abs(fe))}return{cxc:Or(S),recaudado:Or(U),utilidadBruta:Or(O)}},[be,ee,s,l]),Ce=x.useMemo(()=>{if(!de)return null;const S=ue.orders.find(q=>q.orderKey===de);if(!S)return null;const O={};for(const q of S.lines){const ae=String(q.productName||"(sin nombre)");O[ae]||(O[ae]={productName:ae,asociados:0,vendidos:0,restantes:0});const fe=Math.max(0,Math.floor(_r(q.packages))),Ue=Math.max(1,Math.floor(_r(q.unitsPerPackage||1))),Ze=Math.max(0,Math.floor(_r(q.remainingPackages)||(_r(q.remainingUnits)>0?_r(q.remainingUnits)/Ue:0))),lt=Math.max(0,fe-Ze);O[ae].asociados+=fe,O[ae].vendidos+=lt,O[ae].restantes+=Ze}const U=Object.values(O).map(q=>({...q,asociados:Math.floor(q.asociados),vendidos:Math.floor(q.vendidos),restantes:Math.floor(q.restantes)})).sort((q,ae)=>ae.asociados-q.asociados);return{...S,products:U}},[de,ue.orders]),$e=x.useMemo(()=>{const S=ve.reduce((U,q)=>U+_r(q.remainingPackages),0),O=qe.reduce((U,q)=>U+_r(q.remainingPackages),0);return{masterRemainingPackages:Jo(S),vendorRemainingPackages:Jo(O)}},[ve,qe]),gt=x.useMemo(()=>{const S=new Map,O=q=>E==="DIA"?{key:q.date,label:q.date}:E==="VENDEDOR"?{key:q.vendorId||"",label:q.vendorName||""}:E==="PRODUCTO"?{key:q.productName||"",label:q.productName||""}:{key:q.branch||"",label:q.branch||""};for(const q of be){const{key:ae,label:fe}=O(q);S.has(ae)||S.set(ae,{key:ae,label:fe,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0,rows:[]});const Ue=S.get(ae);Ue.rows.push(q),q.type==="CREDITO"?(Ue.packsCredit+=_r(q.packages),Ue.salesCredit+=_r(q.amount),Ue.commCredit+=_r(q.commission)):(Ue.packsCash+=_r(q.packages),Ue.salesCash+=_r(q.amount),Ue.commCash+=_r(q.commission))}const U=Array.from(S.values()).map(q=>({...q,packsCash:Jo(q.packsCash),packsCredit:Jo(q.packsCredit),salesCash:Or(q.salesCash),salesCredit:Or(q.salesCredit),commCash:Or(q.commCash),commCredit:Or(q.commCredit)}));return E==="DIA"?U.sort((q,ae)=>q.key<ae.key?1:-1):U.sort((q,ae)=>ae.salesCash+ae.salesCredit-(q.salesCash+q.salesCredit)),U},[be,E]),Kt=x.useMemo(()=>{if(!re)return[];const S=gt.find(O=>O.key===re);return(S==null?void 0:S.rows)||[]},[re,gt]),Ut=x.useMemo(()=>{const S={};for(const O of Kt){const U=O.productName||"(sin nombre)";S[U]||(S[U]={productName:U,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0}),O.type==="CREDITO"?(S[U].packsCredit+=_r(O.packages),S[U].salesCredit+=_r(O.amount),S[U].commCredit+=_r(O.commission)):(S[U].packsCash+=_r(O.packages),S[U].salesCash+=_r(O.amount),S[U].commCash+=_r(O.commission))}return Object.values(S).map(O=>({...O,packsCash:Jo(O.packsCash),packsCredit:Jo(O.packsCredit),salesCash:Or(O.salesCash),salesCredit:Or(O.salesCredit),commCash:Or(O.commCash),commCredit:Or(O.commCredit)})).sort((O,U)=>U.salesCash+U.salesCredit-(O.salesCash+O.salesCredit))},[Kt]),Jt=x.useMemo(()=>{const S={},O=fe=>(wt[fe]||"").trim()||fe;for(const fe of Q){const Ue=String(fe.id||"").trim();Ue&&(S[Ue]={customerId:Ue,name:O(Ue),balance:0,lastPayment:"",lastPaymentAmount:0,initialDebt:_r(fe.initialDebt),initialDebtDate:String(fe.initialDebtDate||"").trim(),movements:[]})}for(const fe of ee){const Ue=String(fe.customerId||"").trim();if(!Ue)continue;const Ze=String(fe.date||"");Ze&&Ze>l||(S[Ue]||(S[Ue]={customerId:Ue,name:O(Ue),balance:0,lastPayment:"",lastPaymentAmount:0,initialDebt:0,initialDebtDate:"",movements:[]}),S[Ue].movements.push(fe))}const U=(fe,Ue,Ze)=>{const lt=Number(fe||0);if(!lt)return 0;const Qe=String(Ue||"").trim();return Qe&&Ze.some(ut=>{var Zt;const Pt=Number(ut.amount||0);if(!(Pt>0))return!1;const Ct=Math.abs(Pt-lt)<.01,It=String(ut.date||"").trim()===Qe,St=!!((Zt=ut.ref)!=null&&Zt.saleId);return Ct&&It&&St})?0:lt},q=Object.values(S).map(fe=>{const Ue=fe.movements.reduce((tt,ut)=>tt+_r(ut.amount),0),Ze=U(fe.initialDebt,fe.initialDebtDate,fe.movements);let lt="",Qe=0;for(const tt of fe.movements){const ut=tt.type||(_r(tt.amount)<0?"ABONO":"CARGO"),Pt=String(tt.date||"");if(ut==="ABONO"){const Ct=Math.abs(_r(tt.amount));(!lt||Pt>lt)&&(lt=Pt,Qe=Ct)}}return{customerId:fe.customerId,name:fe.name,balance:Or(Ze+Ue),lastPayment:lt,lastPaymentAmount:Or(Qe)}}).filter(fe=>fe.balance>0).sort((fe,Ue)=>Ue.balance-fe.balance),ae=Or(q.reduce((fe,Ue)=>fe+Ue.balance,0));return{count:q.length,totalPending:ae,list:q.slice(0,20)}},[ee,wt,Q,l]),it=x.useMemo(()=>{if(!Le)return[];const S=ee.filter(U=>(U.customerId||"").trim()===Le.customerId).filter(U=>!U.date||String(U.date)<=l).map(U=>({id:U.id,date:String(U.date||""),type:String(U.type||""),amount:Or(_r(U.amount))})).sort((U,q)=>U.date<q.date?-1:U.date>q.date?1:0);let O=0;return S.map(U=>{const q=U.type==="ABONO"?-U.amount:U.amount;return O=Or(O+q),{...U,running:O}})},[Le,ee,l]),X=x.useMemo(()=>Le?me.filter(S=>(S.customerId||"").trim()===Le.customerId).filter(S=>!S.date||String(S.date)<=l).sort((S,O)=>S.date<O.date?-1:S.date>O.date?1:0):[],[Le,me,l]),oe=x.useMemo(()=>{const S=Or(ce.salesTotal),O=Or(ce.commTotal),U=Or(mt.total),q=Or(S-O-U),ae=new Set;for(const tt of be)tt.date&&ae.add(tt.date);const fe=Math.max(1,ae.size),Ue=Or(S/fe),Ze=Or(O/fe),lt=Or(U/fe),Qe=Or(q/fe);return{ingreso:S,comision:O,gastos:U,gananciaNeta:q,daysCount:fe,ingresoDia:Ue,comisionDia:Ze,gastosDia:lt,netaDia:Qe}},[ce,mt.total,be]),L=x.useMemo(()=>{const S={};for(const ae of be){const fe=ae.date;fe&&(S[fe]||(S[fe]={date:fe,ingreso:0,comision:0}),S[fe].ingreso+=_r(ae.amount),S[fe].comision+=_r(ae.commission))}const O=Object.keys(S).sort((ae,fe)=>ae<fe?-1:1),U=O.map(ae=>({label:ae.slice(5),value:Or(S[ae].ingreso)})),q=O.map(ae=>{var Qe,tt;const fe=_r((Qe=S[ae])==null?void 0:Qe.ingreso),Ue=_r((tt=S[ae])==null?void 0:tt.comision),Ze=_r(mt.byDay[ae]||0),lt=fe-Ue-Ze;return{label:ae.slice(5),value:Or(lt)}});return{seriesIngreso:U,seriesNeta:q,datesCount:O.length}},[be,mt.byDay]),Ae=x.useMemo(()=>[{label:"Rivas",value:_r(Ne.RIVAS.sales)},{label:"San Jorge",value:_r(Ne.SAN_JORGE.sales)},{label:"Isla",value:_r(Ne.ISLA.sales)}].map(S=>({...S,value:Or(S.value)})),[Ne]),Ee=async()=>{if(ft.current){ft.current.classList.add("force-pdf-colors");try{const O=(await Sg(ft.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),U=new $r;U.addImage(O,"PNG",10,10,190,0),U.save(`data_center_dulces_${s}_a_${l}.pdf`)}finally{ft.current.classList.remove("force-pdf-colors")}}},Oe=()=>{const O=[["date","processedDate","status","type","vendorId","vendorName","branch","productName","packages","amount","commission","customerId","customerName"].join(","),...be.map(fe=>[fe.date,fe.processedDate||"",fe.status,fe.type,fe.vendorId,`"${String(fe.vendorName||"").replace(/"/g,'""')}"`,fe.branch||"",`"${String(fe.productName||"").replace(/"/g,'""')}"`,qs(fe.packages),Ir(fe.amount),Ir(fe.commission),fe.customerId||"",`"${String(Pe(fe)||"").replace(/"/g,'""')}"`].join(","))],U=new Blob([O.join(`
`)],{type:"text/csv;charset=utf-8;"}),q=URL.createObjectURL(U),ae=document.createElement("a");ae.href=q,ae.download=`data_center_dulces_${s}_a_${l}.csv`,ae.click(),URL.revokeObjectURL(q)};return n?i.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-0",children:[i.jsxs("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-2xl shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[i.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Data Center - Dulces"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-end",children:[i.jsx("button",{onClick:Ee,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-green-600 text-white hover:bg-green-700 transition-colors\r
              `,children:"Exportar PDF"}),i.jsx("button",{onClick:Oe,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-gray-800 text-white hover:bg-black transition-colors\r
              `,children:"Exportar CSV"})]})]}),i.jsx("div",{className:"rounded-2xl border border-gray-100 p-3 sm:p-4 mb-3 shadow-sm bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:s,onChange:S=>o(S.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:l,onChange:S=>c(S.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Estado"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:u,onChange:S=>d(S.target.value),children:[i.jsx("option",{value:"TODAS",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Procesada"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:f,onChange:S=>A(S.target.value),children:[i.jsx("option",{value:"AMBAS",children:"Ambas"}),i.jsx("option",{value:"CASH",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Vendedor"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:h,onChange:S=>m(S.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),he.map(S=>i.jsx("option",{value:S.id,children:S.name||S.id},S.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Sucursal"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:p,onChange:S=>g(S.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"RIVAS",children:"Rivas"}),i.jsx("option",{value:"SAN_JORGE",children:"San Jorge"}),i.jsx("option",{value:"ISLA",children:"Isla"})]})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Producto (opcional)"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:v,onChange:S=>y(S.target.value),placeholder:"Ej: Conitos"})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Cliente (opcional)"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:b,onChange:S=>w(S.target.value),placeholder:"Ej: Javier"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Monto min"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:P,onChange:S=>j(S.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Monto max"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:_,onChange:S=>I(S.target.value),placeholder:"999999"})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Agrupar por"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:E,onChange:S=>{Fe(""),F(S.target.value)},children:[i.jsx("option",{value:"DIA",children:"Da"}),i.jsx("option",{value:"VENDEDOR",children:"Vendedor"}),i.jsx("option",{value:"PRODUCTO",children:"Producto"}),i.jsx("option",{value:"SUCURSAL",children:"Sucursal"})]})]})]})}),i.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{we(""),kt("MACRO")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",jt==="MACRO"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Macro"}),i.jsx("button",{onClick:()=>{we(""),kt("DETALLE")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",jt==="DETALLE"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Detalle"})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Gastos del perodo (expenses_candies):"," ",i.jsxs("strong",{children:["C$",Ir(mt.total)]})]})]}),i.jsxs("div",{ref:ft,children:[jt==="MACRO"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ingreso (ventas)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(oe.ingreso)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin vendedor (ventas)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",Ir(oe.comision)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Ir(ce.commCash),"  Crdito: C$",Ir(ce.commCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos (expenses_candies)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",Ir(oe.gastos)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automtico por fechas"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia neta (real)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(oe.gananciaNeta)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ingreso  Comisin  Gastos"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Promedio neto por da"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(oe.netaDia)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Das con ventas: ",i.jsx("strong",{children:oe.daysCount})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[i.jsx(oG,{title:"Ventas por da (Ingreso)",series:L.seriesIngreso,valuePrefix:"C$"}),i.jsx(oG,{title:"Ganancia neta por da (real)",series:L.seriesNeta,valuePrefix:"C$"})]}),i.jsx("div",{className:"mb-6",children:i.jsx(qQe,{title:"Distribucin de ventas por sucursal",items:Ae})})]}),jt==="DETALLE"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:qs(ce.packsCash)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:qs(ce.packsCredit)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(ce.salesTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Ir(ce.salesCash),"  Crdito: C$",Ir(ce.salesCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(ce.commTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Ir(ce.commCash),"  Crdito: C$",Ir(ce.commCredit)]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Aprox. (rdenes maestras)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(te.grossIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",Ir(te.expectedIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Actual ventas (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",Ir(Ne.ISLA.sales)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Diferencia vs esperado (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",Ir(Re.ISLA)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado (precio proveedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(rt)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes maestras (perodo)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad neta (rdenes vendedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(We.net)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"U bruta  Gastos  U vendedor"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (maestras)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:qs(Xe.orderedPacksMaster)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",i.jsx("strong",{children:qs(Xe.remainingPacksMaster)})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",i.jsx("strong",{children:qs($e.masterRemainingPackages)})]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (rdenes vendedor)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:qs(Xe.orderedPacksVendor)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",i.jsx("strong",{children:qs(Xe.remainingPacksVendor)})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",i.jsx("strong",{children:qs($e.vendorRemainingPackages)})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado a precio proveedor (rdenes vendedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(Xe.providerTotalVendor)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Productos dispersados (precio venta)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(_e.dispersedTotal)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes de vendedores (perodo)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Dispersado Isla (precio venta)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(_e.dispersedIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Usado para Total existente"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total existente en productos (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(_e.totalExistenteIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esperado Isla  Dispersado Isla"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"CxC (ventas crdito)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(ot.cxc)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(ce.commCredit)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Recaudacin (abonos)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(ot.recaudado)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"abonos en ar_movements"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta crdito (ventas  comisin)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ir(ot.utilidadBruta)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Paquetes vendidos al crdito"})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-4 shadow-sm bg-white border-gray-100",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Global)"}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Basado en ",i.jsx("strong",{children:"precio de venta"})," (por sucursal del vendedor)"]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",i.jsxs("strong",{children:["C$",Ir(ue.global.totalOrden)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",i.jsxs("strong",{children:["C$",Ir(ue.global.vendido)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",i.jsxs("strong",{children:["C$",Ir(ue.global.restante)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",i.jsxs("strong",{children:["C$",Ir(ue.global.comision)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",i.jsxs("strong",{children:["C$",Ir(ue.global.totalEsperado)]})]})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Detalle por orden)"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Click/Tap en una orden para ver productos asociados/vendidos/restantes"})]}),ue.orders.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:""}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2",children:ue.orders.map(S=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:S.orderId}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:[S.sellerName," ",S.branch?` ${S.branch}`:""," ",S.date?` ${S.date}`:""]})]}),i.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>we(S.orderKey),children:"Ver"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.totalOrden)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendido"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.vendido)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restante"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.restante)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.comision)]})]})]})]},S.orderKey))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total orden"}),i.jsx("th",{className:"border p-2",children:"Vendido"}),i.jsx("th",{className:"border p-2",children:"Restante"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Total esperado"}),i.jsx("th",{className:"border p-2",children:"Accin"})]})}),i.jsx("tbody",{children:ue.orders.map(S=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:S.sellerName}),i.jsx("td",{className:"border p-2",children:S.branch||""}),i.jsx("td",{className:"border p-2",children:S.date||""}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.totalOrden)]}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.vendido)]}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.restante)]}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.comision)]}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.totalEsperado)]}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>we(S.orderKey),children:"Ver detalle"})})]},S.orderKey))})]})}),Ce&&i.jsxs("div",{className:"mt-4 rounded-2xl border-2 border-gray-100 p-3 sm:p-4 shadow-lg bg-white",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[i.jsxs("h4",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle orden vendedor  ",Ce.orderId]}),i.jsx("button",{onClick:()=>we(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",i.jsxs("strong",{children:["C$",Ir(Ce.totalOrden)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",i.jsxs("strong",{children:["C$",Ir(Ce.vendido)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",i.jsxs("strong",{children:["C$",Ir(Ce.restante)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",i.jsxs("strong",{children:["C$",Ir(Ce.comision)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",i.jsxs("strong",{children:["C$",Ir(Ce.totalEsperado)]})]})]}),i.jsx("h5",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Productos asociados (Nombre - Asociados - Vendidos - Restantes)"}),i.jsx("div",{className:"md:hidden space-y-2",children:Ce.products.map(S=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsx("div",{className:"font-semibold",children:S.productName}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Asociados"}),i.jsx("div",{className:"font-bold",children:S.asociados})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendidos"}),i.jsx("div",{className:"font-bold",children:S.vendidos})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-bold",children:S.restantes})]})]})]},S.productName))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Nombre producto"}),i.jsx("th",{className:"border p-2",children:"Asociados"}),i.jsx("th",{className:"border p-2",children:"Vendidos"}),i.jsx("th",{className:"border p-2",children:"Restantes"})]})}),i.jsxs("tbody",{children:[Ce.products.map(S=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:S.productName}),i.jsx("td",{className:"border p-2",children:S.asociados}),i.jsx("td",{className:"border p-2",children:S.vendidos}),i.jsx("td",{className:"border p-2",children:S.restantes})]},S.productName)),Ce.products.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Sin productos."})})]})]})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (maestras)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:qs($e.masterRemainingPackages)}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (vendedores)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:qs($e.vendorRemainingPackages)}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),ye.cashArr.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:ye.cashArr.map(S=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:S.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Ir(S.total)]})]},S.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),ye.creditArr.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:ye.creditArr.map(S=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:S.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Ir(S.total)]})]},S.vendorId))})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[i.jsxs("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:["Saldos pendientes (hasta ",l,")"]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm mb-3",children:[i.jsxs("div",{children:["Clientes con saldo: ",i.jsx("strong",{children:Jt.count})]}),i.jsxs("div",{children:["Saldo total pendiente:"," ",i.jsxs("strong",{children:["C$",Ir(Jt.totalPending)]})]}),i.jsx("div",{className:"text-gray-500",children:"*Muestra top 20 por monto"})]}),Jt.list.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:""}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2",children:Jt.list.map(S=>i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:S.name}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Ir(S.balance)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["ltimo abono: ",i.jsxs("b",{children:["C$",Ir(S.lastPaymentAmount)]})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha ult. abono:"," ",i.jsx("span",{className:"font-medium",children:S.lastPayment||""})]}),i.jsx("div",{className:"mt-2",children:i.jsx("button",{type:"button",onClick:()=>Ge(S),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},S.customerId))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Saldo pendiente"}),i.jsx("th",{className:"border p-2",children:"ltimo abono"}),i.jsx("th",{className:"border p-2",children:"Fecha ult. abono"}),i.jsx("th",{className:"border p-2",children:"Ver"})]})}),i.jsx("tbody",{children:Jt.list.map(S=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:S.name}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.balance)]}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.lastPaymentAmount)]}),i.jsx("td",{className:"border p-2",children:S.lastPayment||""}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{type:"button",onClick:()=>Ge(S),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},S.customerId))})]})})]})]}),i.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2",children:[i.jsxs("h3",{className:"font-semibold text-sm sm:text-base",children:["Tabla principal (Agrupar por: ",E,")"]}),i.jsx("span",{className:"text-xs text-gray-500 sm:ml-auto",children:"Tap/Click en Ver detalle para drill-down"})]}),k?i.jsx("p",{className:"text-sm",children:"Cargando..."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2 mb-6",children:gt.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."}):gt.map(S=>i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:S.label}),i.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>Fe(S.key),children:"Ver detalle"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"font-bold",children:qs(S.packsCash)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"font-bold",children:qs(S.packsCredit)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.salesCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.salesCredit)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.commCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.commCredit)]})]})]})]},S.key))}),i.jsx("div",{className:"hidden md:block overflow-x-auto mb-6 shadow-2xl rounded-xl border",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:E==="DIA"?"Da":E==="VENDEDOR"?"Vendedor":E==="PRODUCTO"?"Producto":"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"}),i.jsx("th",{className:"border p-2",children:"Opciones"})]})}),i.jsxs("tbody",{children:[gt.map(S=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:S.label}),i.jsx("td",{className:"border p-2",children:qs(S.packsCash)}),i.jsx("td",{className:"border p-2",children:qs(S.packsCredit)}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.salesCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.salesCredit)]}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.commCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.commCredit)]}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>Fe(S.key),children:"Ver detalle"})})]},S.key)),gt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."})})]})]})})]}),re&&i.jsxs("div",{className:"rounded-2xl shadow-lg p-3 sm:p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[i.jsxs("h2",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle "," ",((Be=gt.find(S=>S.key===re))==null?void 0:Be.label)||re]}),i.jsx("button",{onClick:()=>Fe(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas cash:"," ",i.jsxs("strong",{children:["C$",Ir(Kt.filter(S=>S.type==="CONTADO").reduce((S,O)=>S+_r(O.amount),0))]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas crdito:"," ",i.jsxs("strong",{children:["C$",Ir(Kt.filter(S=>S.type==="CREDITO").reduce((S,O)=>S+_r(O.amount),0))]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes cash:"," ",i.jsx("strong",{children:qs(Kt.filter(S=>S.type==="CONTADO").reduce((S,O)=>S+_r(O.packages),0))})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes crdito:"," ",i.jsx("strong",{children:qs(Kt.filter(S=>S.type==="CREDITO").reduce((S,O)=>S+_r(O.packages),0))})]})]}),i.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Ventas incluidas"}),i.jsx("div",{className:"md:hidden space-y-2 mb-4",children:Kt.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin detalle."}):Kt.map(S=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:S.productName}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Ir(S.amount)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendedor:"," ",i.jsx("span",{className:"font-medium",children:S.vendorName})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Tipo"}),i.jsx("div",{className:"font-bold",children:S.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Sucursal"}),i.jsx("div",{className:"font-bold",children:S.branch||""})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-bold",children:qs(S.packages)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.commission)]})]})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Fecha: ",S.date]})]},S.id))}),i.jsx("div",{className:"hidden md:block overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),i.jsxs("tbody",{children:[Kt.map(S=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2",children:S.vendorName}),i.jsx("td",{className:"border p-2",children:S.productName}),i.jsx("td",{className:"border p-2",children:S.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-2",children:S.branch||""}),i.jsx("td",{className:"border p-2",children:qs(S.packages)}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.amount)]}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.commission)]}),i.jsx("td",{className:"border p-2",children:S.date})]},S.id)),Kt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin detalle."})})]})]})}),i.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Consolidado por producto"}),i.jsx("div",{className:"md:hidden space-y-2",children:Ut.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin consolidado."}):Ut.map(S=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsx("div",{className:"font-semibold",children:S.productName}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paq cash"}),i.jsx("div",{className:"font-bold",children:qs(S.packsCash)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paq crdito"}),i.jsx("div",{className:"font-bold",children:qs(S.packsCredit)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.salesCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.salesCredit)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Com cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.commCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Com crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Ir(S.commCredit)]})]})]})]},S.productName))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),i.jsxs("tbody",{children:[Ut.map(S=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:S.productName}),i.jsx("td",{className:"border p-2",children:qs(S.packsCash)}),i.jsx("td",{className:"border p-2",children:qs(S.packsCredit)}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.salesCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.salesCredit)]}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.commCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Ir(S.commCredit)]})]},S.productName)),Ut.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sin consolidado."})})]})]})})]})]})]}),R&&i.jsx("p",{className:"mt-3 text-sm",children:R})]}),Le&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-lg",children:Le.name}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Saldo pendiente: ",i.jsxs("b",{children:["C$",Ir(Le.balance)]})]})]}),i.jsx("button",{type:"button",onClick:()=>Ge(null),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Saldo"})]})}),i.jsx("tbody",{children:it.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"border p-2 text-center text-gray-500",children:"Sin movimientos."})}):it.map(S=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:S.date||""}),i.jsx("td",{className:"border p-1",children:S.type||""}),i.jsxs("td",{className:"border p-1",children:["C$",Ir(S.amount)]}),i.jsxs("td",{className:"border p-1",children:["C$",Ir(S.running)]})]},S.id))})]})}),i.jsx("div",{className:"mt-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Monto"})]})}),i.jsx("tbody",{children:X.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"border p-2 text-center text-gray-500",children:"Sin ventas asociadas."})}):X.map(S=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:S.date||""}),i.jsx("td",{className:"border p-1",children:S.productName||""}),i.jsx("td",{className:"border p-1",children:S.vendorName||""}),i.jsx("td",{className:"border p-1",children:S.type||""}),i.jsxs("td",{className:"border p-1",children:["C$",Ir(S.amount)]})]},S.id))})]})})]})})]}):i.jsxs("div",{className:"max-w-5xl mx-auto p-3 sm:p-4 md:p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Data Center - Dulces"}),i.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No autorizado."})]})}function Nse(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=Nse(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Ga(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=Nse(t))&&(n&&(n+=" "),n+=e);return n}var XQe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function IR(t){if(typeof t!="string")return!1;var e=XQe;return e.includes(t)}var YQe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],JQe=new Set(YQe);function Cse(t){return typeof t!="string"?!1:JQe.has(t)}function _se(t){return typeof t=="string"&&t.startsWith("data-")}function zf(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Cse(r)||_se(r))&&(e[r]=t[r]);return e}function V2(t){if(t==null)return null;if(x.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return zf(e)}return typeof t=="object"&&!Array.isArray(t)?zf(t):null}function xd(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Cse(r)||_se(r)||IR(r))&&(e[r]=t[r]);return e}var ZQe=["children","width","height","viewBox","className","style","title","desc"];function oF(){return oF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oF.apply(null,arguments)}function eVe(t,e){if(t==null)return{};var r,n,a=tVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function tVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var jR=x.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=t,d=eVe(t,ZQe),f=s||{width:n,height:a,x:0,y:0},A=Ga("recharts-surface",o);return x.createElement("svg",oF({},xd(d),{className:A,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),x.createElement("title",null,c),x.createElement("desc",null,u),r)}),rVe=["children","className"];function lF(){return lF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lF.apply(null,arguments)}function nVe(t,e){if(t==null)return{};var r,n,a=aVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function aVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Ac=x.forwardRef((t,e)=>{var{children:r,className:n}=t,a=nVe(t,rVe),s=Ga("recharts-layer",n);return x.createElement("g",lF({className:s},xd(a),{ref:e}),r)}),Ese=x.createContext(null),sVe=()=>x.useContext(Ese);function ls(t){return function(){return t}}const Sse=Math.cos,XS=Math.sin,mf=Math.sqrt,YS=Math.PI,cP=2*YS,cF=Math.PI,uF=2*cF,ap=1e-6,iVe=uF-ap;function Ise(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function oVe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ise;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class lVe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ise:oVe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-e,u=a-r,d=o-e,f=l-r,A=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(A>ap)if(!(Math.abs(f*c-u*d)>ap)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let h=n-o,m=a-l,p=c*c+u*u,g=h*h+m*m,v=Math.sqrt(p),y=Math.sqrt(A),b=s*Math.tan((cF-Math.acos((p+A-g)/(2*v*y)))/2),w=b/y,P=b/v;Math.abs(w-1)>ap&&this._append`L${e+w*d},${r+w*f}`,this._append`A${s},${s},0,0,${+(f*h>d*m)},${this._x1=e+P*c},${this._y1=r+P*u}`}}arc(e,r,n,a,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,f=1^o,A=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ap||Math.abs(this._y1-d)>ap)&&this._append`L${u},${d}`,n&&(A<0&&(A=A%uF+uF),A>iVe?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:A>ap&&this._append`A${n},${n},0,${+(A>=cF)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function PR(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new lVe(e)}function BR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function jse(t){this._context=t}jse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function uP(t){return new jse(t)}function Pse(t){return t[0]}function Bse(t){return t[1]}function Tse(t,e){var r=ls(!0),n=null,a=uP,s=null,o=PR(l);t=typeof t=="function"?t:t===void 0?Pse:ls(t),e=typeof e=="function"?e:e===void 0?Bse:ls(e);function l(c){var u,d=(c=BR(c)).length,f,A=!1,h;for(n==null&&(s=a(h=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===A&&((A=!A)?s.lineStart():s.lineEnd()),A&&s.point(+t(f,u,c),+e(f,u,c));if(h)return s=null,h+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:ls(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:ls(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:ls(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function i_(t,e,r){var n=null,a=ls(!0),s=null,o=uP,l=null,c=PR(u);t=typeof t=="function"?t:t===void 0?Pse:ls(+t),e=typeof e=="function"?e:ls(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Bse:ls(+r);function u(f){var A,h,m,p=(f=BR(f)).length,g,v=!1,y,b=new Array(p),w=new Array(p);for(s==null&&(l=o(y=c())),A=0;A<=p;++A){if(!(A<p&&a(g=f[A],A,f))===v)if(v=!v)h=A,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=A-1;m>=h;--m)l.point(b[m],w[m]);l.lineEnd(),l.areaEnd()}v&&(b[A]=+t(g,A,f),w[A]=+e(g,A,f),l.point(n?+n(g,A,f):b[A],r?+r(g,A,f):w[A]))}if(y)return l=null,y+""||null}function d(){return Tse().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:ls(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:ls(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ls(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:ls(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:ls(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ls(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:ls(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class kse{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function cVe(t){return new kse(t,!0)}function uVe(t){return new kse(t,!1)}const TR={draw(t,e){const r=mf(e/YS);t.moveTo(r,0),t.arc(0,0,r,0,cP)}},dVe={draw(t,e){const r=mf(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},Fse=mf(1/3),fVe=Fse*2,hVe={draw(t,e){const r=mf(e/fVe),n=r*Fse;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},AVe={draw(t,e){const r=mf(e),n=-r/2;t.rect(n,n,r,r)}},mVe=.8908130915292852,Ose=XS(YS/10)/XS(7*YS/10),pVe=XS(cP/10)*Ose,gVe=-Sse(cP/10)*Ose,xVe={draw(t,e){const r=mf(e*mVe),n=pVe*r,a=gVe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const o=cP*s/5,l=Sse(o),c=XS(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},Y5=mf(3),vVe={draw(t,e){const r=-mf(e/(Y5*3));t.moveTo(0,r*2),t.lineTo(-Y5*r,-r),t.lineTo(Y5*r,-r),t.closePath()}},Vu=-.5,Hu=mf(3)/2,dF=1/mf(12),yVe=(dF/2+1)*3,bVe={draw(t,e){const r=mf(e/yVe),n=r/2,a=r*dF,s=n,o=r*dF+r,l=-s,c=o;t.moveTo(n,a),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Vu*n-Hu*a,Hu*n+Vu*a),t.lineTo(Vu*s-Hu*o,Hu*s+Vu*o),t.lineTo(Vu*l-Hu*c,Hu*l+Vu*c),t.lineTo(Vu*n+Hu*a,Vu*a-Hu*n),t.lineTo(Vu*s+Hu*o,Vu*o-Hu*s),t.lineTo(Vu*l+Hu*c,Vu*c-Hu*l),t.closePath()}};function wVe(t,e){let r=null,n=PR(a);t=typeof t=="function"?t:ls(t||TR),e=typeof e=="function"?e:ls(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:ls(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:ls(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function JS(){}function ZS(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Dse(t){this._context=t}Dse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ZS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ZS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function NVe(t){return new Dse(t)}function Rse(t){this._context=t}Rse.prototype={areaStart:JS,areaEnd:JS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ZS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function CVe(t){return new Rse(t)}function Mse(t){this._context=t}Mse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ZS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _Ve(t){return new Mse(t)}function Lse(t){this._context=t}Lse.prototype={areaStart:JS,areaEnd:JS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function EVe(t){return new Lse(t)}function lG(t){return t<0?-1:1}function cG(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(lG(s)+lG(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function uG(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function J5(t,e,r){var n=t._x0,a=t._y0,s=t._x1,o=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,o-l*r,s,o)}function eI(t){this._context=t}eI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:J5(this,this._t0,uG(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,J5(this,uG(this,r=cG(this,t,e)),r);break;default:J5(this,this._t0,r=cG(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Use(t){this._context=new Qse(t)}(Use.prototype=Object.create(eI.prototype)).point=function(t,e){eI.prototype.point.call(this,e,t)};function Qse(t){this._context=t}Qse.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function SVe(t){return new eI(t)}function IVe(t){return new Use(t)}function Vse(t){this._context=t}Vse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=dG(t),a=dG(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function dG(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function jVe(t){return new Vse(t)}function dP(t,e){this._context=t,this._t=e}dP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function PVe(t){return new dP(t,.5)}function BVe(t){return new dP(t,0)}function TVe(t){return new dP(t,1)}function dg(t,e){if((o=t.length)>1)for(var r=1,n,a,s=t[e[0]],o,l=s.length;r<o;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function fF(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function kVe(t,e){return t[e]}function FVe(t){const e=[];return e.key=t,e}function OVe(){var t=ls([]),e=fF,r=dg,n=kVe;function a(s){var o=Array.from(t.apply(this,arguments),FVe),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=BR(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:ls(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:ls(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?fF:typeof s=="function"?s:ls(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??dg,a):r},a}function DVe(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}dg(t,e)}}function RVe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}dg(t,e)}}function MVe(t,e){if(!(!((o=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],f=d[n][1]||0,A=d[n-1][1]||0,h=(f-A)/2,m=0;m<l;++m){var p=t[e[m]],g=p[n][1]||0,v=p[n-1][1]||0;h+=g-v}c+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,dg(t,e)}}var fP={},Hse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(Hse);var kR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(kR);var hP={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(hP);var AP={},$se={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})($se);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$se,r=hP;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],o=a.length;if(o===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<o;){const f=a[l];u?f==="\\"&&l+1<o?(l++,c+=a[l]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,s.push(c),c=""):c+=f:f==="["?(d=!0,c&&(s.push(c),c="")):f==="."?c&&(s.push(c),c=""):c+=f,l++}return c&&s.push(c),s}t.toPath=n})(AP);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hse,r=kR,n=hP,a=AP;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||e.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}t.get=s})(fP);var LVe=fP.get;const fg=pA(LVe);var UVe=4;function U0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:UVe,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function fi(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((a,s,o)=>{var l=r[o-1];return typeof l=="string"?a+l+s:l!==void 0?a+U0(l)+s:a+s},"")}var ml=t=>t===0?0:t>0?1:-1,Wf=t=>typeof t=="number"&&t!=+t,cA=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,fn=t=>(typeof t=="number"||t instanceof Number)&&!Wf(t),Xf=t=>fn(t)||typeof t=="string",QVe=0,H2=t=>{var e=++QVe;return"".concat(t||"").concat(e)},Hl=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!fn(e)&&typeof e!="string")return n;var s;if(cA(e)){if(r==null)return n;var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return Wf(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Gse=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function uo(t,e,r){return fn(t)&&fn(e)?U0(t+r*(e-t)):e}function VVe(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):fg(n,e))===r)}var Go=t=>t===null||typeof t>"u",Qw=t=>Go(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function HVe(t){return t!=null}function Vw(){}var $Ve=["type","size","sizeType"];function hF(){return hF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hF.apply(null,arguments)}function fG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fG(Object(r),!0).forEach(function(n){GVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GVe(t,e,r){return(e=KVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KVe(t){var e=qVe(t,"string");return typeof e=="symbol"?e:e+""}function qVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zVe(t,e){if(t==null)return{};var r,n,a=WVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function WVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Kse={symbolCircle:TR,symbolCross:dVe,symbolDiamond:hVe,symbolSquare:AVe,symbolStar:xVe,symbolTriangle:vVe,symbolWye:bVe},XVe=Math.PI/180,YVe=t=>{var e="symbol".concat(Qw(t));return Kse[e]||TR},JVe=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*XVe;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},ZVe=(t,e)=>{Kse["symbol".concat(Qw(t))]=e},FR=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=zVe(t,$Ve),s=hG(hG({},a),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var l=()=>{var A=YVe(o),h=wVe().type(A).size(JVe(r,n,o)),m=h();if(m!==null)return m},{className:c,cx:u,cy:d}=s,f=xd(s);return fn(u)&&fn(d)&&fn(r)?x.createElement("path",hF({},f,{className:Ga("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};FR.registerSymbol=ZVe;var qse=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,eHe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(x.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{IR(a)&&(n[a]=s=>r[a](r,s))}),n},tHe=(t,e,r)=>n=>(t(e,r,n),null),Hw=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];IR(a)&&typeof s=="function"&&(n||(n={}),n[a]=tHe(s,e,r))}),n};function AG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rHe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AG(Object(r),!0).forEach(function(n){nHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nHe(t,e,r){return(e=aHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aHe(t){var e=sHe(t,"string");return typeof e=="symbol"?e:e+""}function sHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xl(t,e){var r=rHe({},t),n=e,a=Object.keys(e),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}function tI(){return tI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tI.apply(null,arguments)}function mG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function iHe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mG(Object(r),!0).forEach(function(n){oHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oHe(t,e,r){return(e=lHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lHe(t){var e=cHe(t,"string");return typeof e=="symbol"?e:e+""}function cHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xu=32,uHe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function dHe(t){var{data:e,iconType:r,inactiveColor:n}=t,a=Xu/2,s=Xu/6,o=Xu/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return x.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:Xu,y2:a,className:"recharts-legend-icon"})}if(c==="line")return x.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Xu,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return x.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Xu/8,"h").concat(Xu,"v").concat(Xu*3/4,"h").concat(-Xu,"z"),className:"recharts-legend-icon"});if(x.isValidElement(e.legendIcon)){var d=iHe({},e);return delete d.legendIcon,x.cloneElement(e.legendIcon,d)}return x.createElement(FR,{fill:l,cx:a,cy:a,size:Xu,sizeType:"diameter",type:c})}function fHe(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=t,l={x:0,y:0,width:Xu,height:Xu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var A=d.formatter||a,h=Ga({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,p=A?A(d.value,d,f):d.value;return x.createElement("li",tI({className:h,style:c,key:"legend-item-".concat(f)},Hw(t,d,f)),x.createElement(jR,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(p," legend icon")},x.createElement(dHe,{data:d,iconType:o,inactiveColor:s})),x.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var hHe=t=>{var e=xl(t,uHe),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return x.createElement("ul",{className:"recharts-default-legend",style:s},x.createElement(fHe,tI({},e,{payload:r})))},zse={},Wse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}t.uniqBy=e})(Wse);var OR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(OR);var Xse={},mP={},Yse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(Yse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yse;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(mP);var Jse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(Jse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mP,r=Jse;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(Xse);var Zse={},eie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fP;function r(n){return function(a){return e.get(a,n)}}t.property=r})(eie);var tie={},DR={},rie={},RR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(RR);var MR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(MR);var LR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(LR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RR,r=MR,n=LR;function a(d,f,A){return typeof A!="function"?a(d,f,()=>{}):s(d,f,function h(m,p,g,v,y,b){const w=A(m,p,g,v,y,b);return w!==void 0?!!w:s(m,p,h,b)},new Map)}function s(d,f,A,h){if(f===d)return!0;switch(typeof f){case"object":return o(d,f,A,h);case"function":return Object.keys(f).length>0?s(d,{...f},A,h):n.eq(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function o(d,f,A,h){if(f==null)return!0;if(Array.isArray(f))return c(d,f,A,h);if(f instanceof Map)return l(d,f,A,h);if(f instanceof Set)return u(d,f,A,h);const m=Object.keys(f);if(d==null||r.isPrimitive(d))return m.length===0;if(m.length===0)return!0;if(h!=null&&h.has(f))return h.get(f)===d;h==null||h.set(f,d);try{for(let p=0;p<m.length;p++){const g=m[p];if(!r.isPrimitive(d)&&!(g in d)||f[g]===void 0&&d[g]!==void 0||f[g]===null&&d[g]!==null||!A(d[g],f[g],g,d,f,h))return!1}return!0}finally{h==null||h.delete(f)}}function l(d,f,A,h){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[m,p]of f.entries()){const g=d.get(m);if(A(g,p,m,d,f,h)===!1)return!1}return!0}function c(d,f,A,h){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const m=new Set;for(let p=0;p<f.length;p++){const g=f[p];let v=!1;for(let y=0;y<d.length;y++){if(m.has(y))continue;const b=d[y];let w=!1;if(A(b,g,p,d,f,h)&&(w=!0),w){m.add(y),v=!0;break}}if(!v)return!1}return!0}function u(d,f,A,h){return f.size===0?!0:d instanceof Set?c([...d],[...f],A,h):!1}t.isMatchWith=a,t.isSetMatch=u})(rie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rie;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(DR);var nie={},UR={},aie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(aie);var QR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(QR);var VR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",A="[object ArrayBuffer]",h="[object Object]",m="[object Error]",p="[object DataView]",g="[object Uint8Array]",v="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w="[object BigUint64Array]",P="[object Int8Array]",j="[object Int16Array]",_="[object Int32Array]",I="[object BigInt64Array]",E="[object Float32Array]",F="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=A,t.arrayTag=d,t.bigInt64ArrayTag=I,t.bigUint64ArrayTag=w,t.booleanTag=a,t.dataViewTag=p,t.dateTag=l,t.errorTag=m,t.float32ArrayTag=E,t.float64ArrayTag=F,t.functionTag=f,t.int16ArrayTag=j,t.int32ArrayTag=_,t.int8ArrayTag=P,t.mapTag=c,t.numberTag=n,t.objectTag=h,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=y,t.uint32ArrayTag=b,t.uint8ArrayTag=g,t.uint8ClampedArrayTag=v})(VR);var sie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(sie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aie,r=QR,n=VR,a=MR,s=sie;function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,A,h=new Map,m=void 0){const p=m==null?void 0:m(d,f,A,h);if(p!==void 0)return p;if(a.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const g=new Array(d.length);h.set(d,g);for(let v=0;v<d.length;v++)g[v]=l(d[v],v,A,h,m);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;h.set(d,g);for(const[v,y]of d)g.set(v,l(y,v,A,h,m));return g}if(d instanceof Set){const g=new Set;h.set(d,g);for(const v of d)g.add(l(v,void 0,A,h,m));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,g);for(let v=0;v<d.length;v++)g[v]=l(d[v],v,A,h,m);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,g),c(g,d,A,h,m),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return h.set(d,g),c(g,d,A,h,m),g}if(typeof Blob<"u"&&d instanceof Blob){const g=new Blob([d],{type:d.type});return h.set(d,g),c(g,d,A,h,m),g}if(d instanceof Error){const g=new d.constructor;return h.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,A,h,m),g}if(d instanceof Boolean){const g=new Boolean(d.valueOf());return h.set(d,g),c(g,d,A,h,m),g}if(d instanceof Number){const g=new Number(d.valueOf());return h.set(d,g),c(g,d,A,h,m),g}if(d instanceof String){const g=new String(d.valueOf());return h.set(d,g),c(g,d,A,h,m),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return h.set(d,g),c(g,d,A,h,m),g}return d}function c(d,f,A=d,h,m){const p=[...Object.keys(f),...e.getSymbols(f)];for(let g=0;g<p.length;g++){const v=p[g],y=Object.getOwnPropertyDescriptor(d,v);(y==null||y.writable)&&(d[v]=l(f[v],v,A,h,m))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=l,t.copyProperties=c})(UR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UR;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(nie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DR,r=nie;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})(tie);var iie={},oie={},lie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UR,r=VR;function n(a,s){return e.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(f,a),f}case r.argumentsTag:{const f={};return e.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}t.cloneDeepWith=n})(lie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lie;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(oie);var cie={},HR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(HR);var uie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QR;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(uie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kR,r=HR,n=uie,a=AP;function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=s})(cie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DR,r=hP,n=oie,a=fP,s=cie;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=o})(iie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OR,r=eie,n=tie,a=iie;function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=s})(Zse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wse,r=OR,n=Xse,a=Zse;function s(o,l=r.identity){return n.isArrayLikeObject(o)?e.uniqBy(Array.from(o),a.iteratee(l)):[]}t.uniqBy=s})(zse);var AHe=zse.uniqBy;const pG=pA(AHe);function die(t,e,r){return e===!0?pG(t,r):typeof e=="function"?pG(t,e):t}var fie={exports:{}},hie={},Aie={exports:{}},mie={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv=x;function mHe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pHe=typeof Object.is=="function"?Object.is:mHe,gHe=Lv.useState,xHe=Lv.useEffect,vHe=Lv.useLayoutEffect,yHe=Lv.useDebugValue;function bHe(t,e){var r=e(),n=gHe({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return vHe(function(){a.value=r,a.getSnapshot=e,Z5(a)&&s({inst:a})},[t,r,e]),xHe(function(){return Z5(a)&&s({inst:a}),t(function(){Z5(a)&&s({inst:a})})},[t]),yHe(r),r}function Z5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!pHe(t,r)}catch{return!0}}function wHe(t,e){return e()}var NHe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?wHe:bHe;mie.useSyncExternalStore=Lv.useSyncExternalStore!==void 0?Lv.useSyncExternalStore:NHe;Aie.exports=mie;var CHe=Aie.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pP=x,_He=CHe;function EHe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var SHe=typeof Object.is=="function"?Object.is:EHe,IHe=_He.useSyncExternalStore,jHe=pP.useRef,PHe=pP.useEffect,BHe=pP.useMemo,THe=pP.useDebugValue;hie.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=jHe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=BHe(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var m=o.value;if(a(m,h))return f=m}return f=h}if(m=f,SHe(d,h))return m;var p=n(h);return a!==void 0&&a(m,p)?(d=h,m):(d=h,f=p)}var u=!1,d,f,A=r===void 0?null:r;return[function(){return c(e())},A===null?void 0:function(){return c(A())}]},[e,r,n,a]);var l=IHe(t,s[0],s[1]);return PHe(function(){o.hasValue=!0,o.value=l},[l]),THe(l),l};fie.exports=hie;var kHe=fie.exports,$R=x.createContext(null),FHe=t=>t,hs=()=>{var t=x.useContext($R);return t?t.store.dispatch:FHe},fE=()=>{},OHe=()=>fE,DHe=(t,e)=>t===e;function on(t){var e=x.useContext($R);return kHe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:OHe,e?e.store.getState:fE,e?e.store.getState:fE,e?t:fE,DHe)}function RHe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function MHe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function LHe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var gG=t=>Array.isArray(t)?t:[t];function UHe(t){const e=Array.isArray(t[0])?t[0]:t;return LHe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function QHe(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var VHe=class{constructor(t){this.value=t}deref(){return this.value}},HHe=typeof WeakRef<"u"?WeakRef:VHe,$He=0,xG=1;function o_(){return{s:$He,v:void 0,o:null,p:null}}function pie(t,e={}){let r=o_();const{resultEqualityCheck:n}=e;let a,s=0;function o(){var f;let l=r;const{length:c}=arguments;for(let A=0,h=c;A<h;A++){const m=arguments[A];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=l.o;p===null&&(l.o=p=new WeakMap);const g=p.get(m);g===void 0?(l=o_(),p.set(m,l)):l=g}else{let p=l.p;p===null&&(l.p=p=new Map);const g=p.get(m);g===void 0?(l=o_(),p.set(m,l)):l=g}}const u=l;let d;if(l.s===xG)d=l.v;else if(d=t.apply(null,arguments),s++,n){const A=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;A!=null&&n(A,d)&&(d=A,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new HHe(d):d}return u.s=xG,u.v=d,d}return o.clearCache=()=>{r=o_(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function GHe(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),RHe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:A=[],argsMemoize:h=pie,argsMemoizeOptions:m=[]}=d,p=gG(A),g=gG(m),v=UHe(a),y=f(function(){return s++,u.apply(null,arguments)},...p),b=h(function(){o++;const P=QHe(v,arguments);return l=y.apply(null,P),l},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var qt=GHe(pie),KHe=Object.assign((t,e=qt)=>{MHe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>KHe}),gie={},xie={},vie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=e(n),l=e(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};t.compareValues=r})(vie);var yie={},GR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(GR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GR,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=a})(yie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vie,r=yie,n=AP;function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(h=>String(h));const u=(h,m)=>{let p=h;for(let g=0;g<m.length&&p!=null;++g)p=p[m[g]];return p},d=(h,m)=>m==null||h==null?m:typeof h=="object"&&"key"in h?Object.hasOwn(m,h.key)?m[h.key]:u(m,h.path):typeof h=="function"?h(m):Array.isArray(h)?u(m,h):typeof m=="object"?m[h]:m,f=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return s.map(h=>({original:h,criteria:f.map(m=>d(m,h))})).slice().sort((h,m)=>{for(let p=0;p<f.length;p++){const g=e.compareValues(h.criteria[p],m.criteria[p],l[p]);if(g!==0)return g}return 0}).map(h=>h.original)}t.orderBy=a})(xie);var bie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}t.flatten=e})(bie);var KR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HR,r=mP,n=RR,a=LR;function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}t.isIterateeCall=s})(KR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xie,r=bie,n=KR;function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,r.flatten(o),["asc"])}t.sortBy=a})(gie);var qHe=gie.sortBy;const gP=pA(qHe);var wie=t=>t.legend.settings,zHe=t=>t.legend.size,WHe=t=>t.legend.payload,XHe=qt([WHe,wie],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?gP(n,r):n});function YHe(){return on(XHe)}var l_=1;function Nie(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=x.useState({height:0,left:0,top:0,width:0}),n=x.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>l_||Math.abs(o.left-e.left)>l_||Math.abs(o.top-e.top)>l_||Math.abs(o.width-e.width)>l_)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function al(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var JHe=typeof Symbol=="function"&&Symbol.observable||"@@observable",vG=JHe,eB=()=>Math.random().toString(36).substring(7).split("").join("."),ZHe={INIT:`@@redux/INIT${eB()}`,REPLACE:`@@redux/REPLACE${eB()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${eB()}`},rI=ZHe;function qR(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Cie(t,e,r){if(typeof t!="function")throw new Error(al(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(al(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(al(1));return r(Cie)(t,e)}let n=t,a=e,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((g,v)=>{o.set(v,g)}))}function d(){if(c)throw new Error(al(3));return a}function f(g){if(typeof g!="function")throw new Error(al(4));if(c)throw new Error(al(5));let v=!0;u();const y=l++;return o.set(y,g),function(){if(v){if(c)throw new Error(al(6));v=!1,u(),o.delete(y),s=null}}}function A(g){if(!qR(g))throw new Error(al(7));if(typeof g.type>"u")throw new Error(al(8));if(typeof g.type!="string")throw new Error(al(17));if(c)throw new Error(al(9));try{c=!0,a=n(a,g)}finally{c=!1}return(s=o).forEach(y=>{y()}),g}function h(g){if(typeof g!="function")throw new Error(al(10));n=g,A({type:rI.REPLACE})}function m(){const g=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(al(11));function y(){const w=v;w.next&&w.next(d())}return y(),{unsubscribe:g(y)}},[vG](){return this}}}return A({type:rI.INIT}),{dispatch:A,subscribe:f,getState:d,replaceReducer:h,[vG]:m}}function e$e(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:rI.INIT})>"u")throw new Error(al(12));if(typeof r(void 0,{type:rI.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(al(13))})}function _ie(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let a;try{e$e(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],A=r[f],h=o[f],m=A(h,l);if(typeof m>"u")throw l&&l.type,new Error(al(14));u[f]=m,c=c||m!==h}return c=c||n.length!==Object.keys(o).length,c?u:o}}function nI(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function t$e(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(al(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=t.map(c=>c(o));return s=nI(...l)(a.dispatch),{...a,dispatch:s}}}function Eie(t){return qR(t)&&"type"in t&&typeof t.type=="string"}var Sie=Symbol.for("immer-nothing"),yG=Symbol.for("immer-draftable"),mc=Symbol.for("immer-state");function Gd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var pu=Object,Uv=pu.getPrototypeOf,aI="constructor",xP="prototype",AF="configurable",sI="enumerable",hE="writable",$2="value",uA=t=>!!t&&!!t[mc];function cf(t){var e;return t?Iie(t)||yP(t)||!!t[yG]||!!((e=t[aI])!=null&&e[yG])||bP(t)||wP(t):!1}var r$e=pu[xP][aI].toString(),bG=new WeakMap;function Iie(t){if(!t||!zR(t))return!1;const e=Uv(t);if(e===null||e===pu[xP])return!0;const r=pu.hasOwnProperty.call(e,aI)&&e[aI];if(r===Object)return!0;if(!Px(r))return!1;let n=bG.get(r);return n===void 0&&(n=Function.toString.call(r),bG.set(r,n)),n===r$e}function vP(t,e,r=!0){$w(t)===0?(r?Reflect.ownKeys(t):pu.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function $w(t){const e=t[mc];return e?e.type_:yP(t)?1:bP(t)?2:wP(t)?3:0}var wG=(t,e,r=$w(t))=>r===2?t.has(e):pu[xP].hasOwnProperty.call(t,e),mF=(t,e,r=$w(t))=>r===2?t.get(e):t[e],iI=(t,e,r,n=$w(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function n$e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var yP=Array.isArray,bP=t=>t instanceof Map,wP=t=>t instanceof Set,zR=t=>typeof t=="object",Px=t=>typeof t=="function",tB=t=>typeof t=="boolean";function a$e(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Ih=t=>t.copy_||t.base_,WR=t=>t.modified_?t.copy_:t.base_;function pF(t,e){if(bP(t))return new Map(t);if(wP(t))return new Set(t);if(yP(t))return Array[xP].slice.call(t);const r=Iie(t);if(e===!0||e==="class_only"&&!r){const n=pu.getOwnPropertyDescriptors(t);delete n[mc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l[hE]===!1&&(l[hE]=!0,l[AF]=!0),(l.get||l.set)&&(n[o]={[AF]:!0,[hE]:!0,[sI]:l[sI],[$2]:t[o]})}return pu.create(Uv(t),n)}else{const n=Uv(t);if(n!==null&&r)return{...t};const a=pu.create(n);return pu.assign(a,t)}}function XR(t,e=!1){return NP(t)||uA(t)||!cf(t)||($w(t)>1&&pu.defineProperties(t,{set:c_,add:c_,clear:c_,delete:c_}),pu.freeze(t),e&&vP(t,(r,n)=>{XR(n,!0)},!1)),t}function s$e(){Gd(2)}var c_={[$2]:s$e};function NP(t){return t===null||!zR(t)?!0:pu.isFrozen(t)}var oI="MapSet",gF="Patches",NG="ArrayMethods",jie={};function hg(t){const e=jie[t];return e||Gd(0,t),e}var CG=t=>!!jie[t],G2,Pie=()=>G2,i$e=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:CG(oI)?hg(oI):void 0,arrayMethodsPlugin_:CG(NG)?hg(NG):void 0});function _G(t,e){e&&(t.patchPlugin_=hg(gF),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function xF(t){vF(t),t.drafts_.forEach(o$e),t.drafts_=null}function vF(t){t===G2&&(G2=t.parent_)}var EG=t=>G2=i$e(G2,t);function o$e(t){const e=t[mc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function SG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[mc].modified_&&(xF(e),Gd(4)),cf(t)&&(t=IG(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[mc].base_,t,e)}else t=IG(e,r);return l$e(e,t,!0),xF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Sie?t:void 0}function IG(t,e){if(NP(e))return e;const r=e[mc];if(!r)return lI(e,t.handledSet_,t);if(!CP(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);kie(r,t)}return r.copy_}function l$e(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&XR(e,r)}function Bie(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var CP=(t,e)=>t.scope_===e,c$e=[];function Tie(t,e,r,n){const a=Ih(t),s=t.type_;if(n!==void 0&&mF(a,n,s)===e){iI(a,n,r,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;vP(a,(c,u)=>{if(uA(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const o=t.draftLocations_.get(e)??c$e;for(const l of o)iI(a,l,r,s)}function u$e(t,e,r){t.callbacks_.push(function(a){var l;const s=e;if(!s||!CP(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const o=WR(s);Tie(t,s.draft_??s,o,r),kie(s,a)})}function kie(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}Bie(t)}}function d$e(t,e,r){const{scope_:n}=t;if(uA(r)){const a=r[mc];CP(a,n)&&a.callbacks_.push(function(){AE(t);const o=WR(a);Tie(t,r,o,e)})}else cf(r)&&t.callbacks_.push(function(){const s=Ih(t);t.type_===3?s.has(r)&&lI(r,n.handledSet_,n):mF(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&lI(mF(t.copy_,e,t.type_),n.handledSet_,n)})}function lI(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||uA(t)||e.has(t)||!cf(t)||NP(t)||(e.add(t),vP(t,(n,a)=>{if(uA(a)){const s=a[mc];if(CP(s,r)){const o=WR(s);iI(t,n,o,t.type_),Bie(s)}}else cf(a)&&lI(a,e,r)})),t}function f$e(t,e){const r=yP(t),n={type_:r?1:0,scope_:e?e.scope_:Pie(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=cI;r&&(a=[n],s=K2);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,[l,n]}var cI={get(t,e){if(e===mc)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r!=null&&r.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const a=Ih(t);if(!wG(a,e,t.type_))return h$e(t,a,e);const s=a[e];if(t.finalized_||!cf(s)||n&&t.operationMethod&&(r!=null&&r.isMutatingArrayMethod(t.operationMethod))&&a$e(e))return s;if(s===rB(t.base_,e)){AE(t);const o=t.type_===1?+e:e,l=bF(t.scope_,s,t,o);return t.copy_[o]=l}return s},has(t,e){return e in Ih(t)},ownKeys(t){return Reflect.ownKeys(Ih(t))},set(t,e,r){const n=Fie(Ih(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=rB(Ih(t),e),s=a==null?void 0:a[mc];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(n$e(r,a)&&(r!==void 0||wG(t.base_,e,t.type_)))return!0;AE(t),yF(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),d$e(t,e,r)),!0},deleteProperty(t,e){return AE(t),rB(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),yF(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Ih(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[hE]:!0,[AF]:t.type_!==1||e!=="length",[sI]:n[sI],[$2]:r[e]}},defineProperty(){Gd(11)},getPrototypeOf(t){return Uv(t.base_)},setPrototypeOf(){Gd(12)}},K2={};for(let t in cI){let e=cI[t];K2[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}K2.deleteProperty=function(t,e){return K2.set.call(this,t,e,void 0)};K2.set=function(t,e,r){return cI.set.call(this,t[0],e,r,t[0])};function rB(t,e){const r=t[mc];return(r?Ih(r):t)[e]}function h$e(t,e,r){var a;const n=Fie(e,r);return n?$2 in n?n[$2]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function Fie(t,e){if(!(e in t))return;let r=Uv(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Uv(r)}}function yF(t){t.modified_||(t.modified_=!0,t.parent_&&yF(t.parent_))}function AE(t){t.copy_||(t.assigned_=new Map,t.copy_=pF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var A$e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(Px(r)&&!Px(n)){const o=n;n=r;const l=this;return function(u=o,...d){return l.produce(u,f=>n.call(this,f,...d))}}Px(n)||Gd(6),a!==void 0&&!Px(a)&&Gd(7);let s;if(cf(r)){const o=EG(this),l=bF(o,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?xF(o):vF(o)}return _G(o,a),SG(s,o)}else if(!r||!zR(r)){if(s=n(r),s===void 0&&(s=r),s===Sie&&(s=void 0),this.autoFreeze_&&XR(s,!0),a){const o=[],l=[];hg(gF).generateReplacementPatches_(r,s,{patches_:o,inversePatches_:l}),a(o,l)}return s}else Gd(1,r)},this.produceWithPatches=(r,n)=>{if(Px(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},tB(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),tB(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),tB(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){cf(e)||Gd(8),uA(e)&&(e=nf(e));const r=EG(this),n=bF(r,e,void 0);return n[mc].isManual_=!0,vF(r),n}finishDraft(e,r){const n=e&&e[mc];(!n||!n.isManual_)&&Gd(9);const{scope_:a}=n;return _G(a,r),SG(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=hg(gF).applyPatches_;return uA(e)?a(e,r):this.produce(e,s=>a(s,r))}};function bF(t,e,r,n){const[a,s]=bP(e)?hg(oI).proxyMap_(e,r):wP(e)?hg(oI).proxySet_(e,r):f$e(e,r);return((r==null?void 0:r.scope_)??Pie()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?u$e(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function nf(t){return uA(t)||Gd(10,t),Oie(t)}function Oie(t){if(!cf(t)||NP(t))return t;const e=t[mc];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=pF(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=pF(t,!0);return vP(r,(a,s)=>{iI(r,a,Oie(s))},n),e&&(e.finalized_=!1),r}var m$e=new A$e,Die=m$e.produce;function Rie(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var p$e=Rie(),g$e=Rie,x$e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?nI:nI.apply(null,arguments)};function vd(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(vu(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>Eie(n)&&n.type===t,r}var Mie=class Xy extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Xy.prototype)}static get[Symbol.species](){return Xy}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Xy(...e[0].concat(this)):new Xy(...e.concat(this))}};function jG(t){return cf(t)?Die(t,()=>{}):t}function u_(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function v$e(t){return typeof t=="boolean"}var y$e=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let o=new Mie;return r&&(v$e(r)?o.push(p$e):o.push(g$e(r.extraArgument))),o},Lie="RTK_autoBatch",Is=()=>t=>({payload:t,meta:{[Lie]:!0}}),PG=t=>e=>{setTimeout(e,t)},Uie=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,o=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:PG(10):t.type==="callback"?t.queueNotification:PG(t.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),A=n.subscribe(f);return l.add(d),()=>{A(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[Lie]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},b$e=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new Mie(t);return n&&a.push(Uie(typeof n=="object"?n:void 0)),a};function w$e(t){const e=y$e(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(qR(r))l=_ie(r);else throw new Error(vu(1));let c;typeof n=="function"?c=n(e):c=e();let u=nI;a&&(u=x$e({trace:!1,...typeof a=="object"&&a}));const d=t$e(...c),f=b$e(d);let A=typeof o=="function"?o(f):f();const h=u(...A);return Cie(l,s,h)}function Qie(t){const e={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(vu(28));if(l in e)throw new Error(vu(29));return e[l]=o,a},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function N$e(t){return typeof t=="function"}function C$e(t,e){let[r,n,a]=Qie(e),s;if(N$e(t))s=()=>jG(t());else{const l=jG(t);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(uA(d)){const h=f(d,c);return h===void 0?d:h}else{if(cf(d))return Die(d,A=>f(A,c));{const A=f(d,c);if(A===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return d},l)}return o.getInitialState=s,o}var _$e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",E$e=(t=21)=>{let e="",r=t;for(;r--;)e+=_$e[Math.random()*64|0];return e},S$e=Symbol.for("rtk-slice-createasyncthunk");function I$e(t,e){return`${t}/${e}`}function j$e({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[S$e];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(vu(11));const l=(typeof a.reducers=="function"?a.reducers(B$e()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,P){const j=typeof w=="string"?w:w.type;if(!j)throw new Error(vu(12));if(j in u.sliceCaseReducersByType)throw new Error(vu(13));return u.sliceCaseReducersByType[j]=P,d},addMatcher(w,P){return u.sliceMatchers.push({matcher:w,reducer:P}),d},exposeAction(w,P){return u.actionCreators[w]=P,d},exposeCaseReducer(w,P){return u.sliceCaseReducersByName[w]=P,d}};c.forEach(w=>{const P=l[w],j={reducerName:w,type:I$e(s,w),createNotation:typeof a.reducers=="function"};k$e(P)?O$e(j,P,d,e):T$e(j,P,d)});function f(){const[w={},P=[],j=void 0]=typeof a.extraReducers=="function"?Qie(a.extraReducers):[a.extraReducers],_={...w,...u.sliceCaseReducersByType};return C$e(a.initialState,I=>{for(let E in _)I.addCase(E,_[E]);for(let E of u.sliceMatchers)I.addMatcher(E.matcher,E.reducer);for(let E of P)I.addMatcher(E.matcher,E.reducer);j&&I.addDefaultCase(j)})}const A=w=>w,h=new Map,m=new WeakMap;let p;function g(w,P){return p||(p=f()),p(w,P)}function v(){return p||(p=f()),p.getInitialState()}function y(w,P=!1){function j(I){let E=I[w];return typeof E>"u"&&P&&(E=u_(m,j,v)),E}function _(I=A){const E=u_(h,P,()=>new WeakMap);return u_(E,I,()=>{const F={};for(const[k,B]of Object.entries(a.selectors??{}))F[k]=P$e(B,I,()=>u_(m,I,v),P);return F})}return{reducerPath:w,getSelectors:_,get selectors(){return _(j)},selectSlice:j}}const b={name:s,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...y(o),injectInto(w,{reducerPath:P,...j}={}){const _=P??o;return w.inject({reducerPath:_,reducer:g},j),{...b,...y(_,!0)}}};return b}}function P$e(t,e,r,n){function a(s,...o){let l=e(s);return typeof l>"u"&&n&&(l=r()),t(l,...o)}return a.unwrapped=t,a}var $c=j$e();function B$e(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function T$e({type:t,reducerName:e,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!F$e(n))throw new Error(vu(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?vd(t,o):vd(t))}function k$e(t){return t._reducerDefinitionType==="asyncThunk"}function F$e(t){return t._reducerDefinitionType==="reducerWithPrepare"}function O$e({type:t,reducerName:e},r,n,a){if(!a)throw new Error(vu(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=a(t,s,d);n.exposeAction(e,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:o||d_,pending:l||d_,rejected:c||d_,settled:u||d_})}function d_(){}var D$e="task",Vie="listener",Hie="completed",YR="cancelled",R$e=`task-${YR}`,M$e=`task-${Hie}`,wF=`${Vie}-${YR}`,L$e=`${Vie}-${Hie}`,_P=class{constructor(t){vr(this,"name","TaskAbortError");vr(this,"message");this.code=t,this.message=`${D$e} ${YR} (reason: ${t})`}},JR=(t,e)=>{if(typeof t!="function")throw new TypeError(vu(32))},uI=()=>{},$ie=(t,e=uI)=>(t.catch(e),t),Gie=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Mp=t=>{if(t.aborted)throw new _P(t.reason)};function Kie(t,e){let r=uI;return new Promise((n,a)=>{const s=()=>a(new _P(t.reason));if(t.aborted){s();return}r=Gie(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=uI})}var U$e=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof _P?"cancelled":"rejected",error:r}}finally{e==null||e()}},dI=t=>e=>$ie(Kie(t,e).then(r=>(Mp(t),r))),qie=t=>{const e=dI(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:mv}=Object,BG={},EP="listenerMiddleware",Q$e=(t,e)=>{const r=n=>Gie(t,()=>n.abort(t.reason));return(n,a)=>{JR(n);const s=new AbortController;r(s);const o=U$e(async()=>{Mp(t),Mp(s.signal);const l=await n({pause:dI(s.signal),delay:qie(s.signal),signal:s.signal});return Mp(s.signal),l},()=>s.abort(M$e));return a!=null&&a.autoJoin&&e.push(o.catch(uI)),{result:dI(t)(o),cancel(){s.abort(R$e)}}}},V$e=(t,e)=>{const r=async(n,a)=>{Mp(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(f,A)=>{A.unsubscribe(),c([f,A.getState(),A.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Kie(e,Promise.race(l));return Mp(e),c}finally{s()}};return(n,a)=>$ie(r(n,a))},zie=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=vd(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(vu(21));return JR(s),{predicate:a,type:e,effect:s}},Wie=mv(t=>{const{type:e,predicate:r,effect:n}=zie(t);return{id:E$e(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(vu(22))}}},{withTypes:()=>Wie}),TG=(t,e)=>{const{type:r,effect:n,predicate:a}=zie(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},NF=t=>{t.pending.forEach(e=>{e.abort(wF)})},H$e=(t,e)=>()=>{for(const r of e.keys())NF(r);t.clear()},kG=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},Xie=mv(vd(`${EP}/add`),{withTypes:()=>Xie}),$$e=vd(`${EP}/removeAll`),Yie=mv(vd(`${EP}/remove`),{withTypes:()=>Yie}),G$e=(...t)=>{console.error(`${EP}/error`,...t)},Gw=(t={})=>{const e=new Map,r=new Map,n=h=>{const m=r.get(h)??0;r.set(h,m+1)},a=h=>{const m=r.get(h)??1;m===1?r.delete(h):r.set(h,m-1)},{extra:s,onError:o=G$e}=t;JR(o);const l=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),m=>{h.unsubscribe(),m!=null&&m.cancelActive&&NF(h)}),c=h=>{const m=TG(e,h)??Wie(h);return l(m)};mv(c,{withTypes:()=>c});const u=h=>{const m=TG(e,h);return m&&(m.unsubscribe(),h.cancelActive&&NF(m)),!!m};mv(u,{withTypes:()=>u});const d=async(h,m,p,g)=>{const v=new AbortController,y=V$e(c,v.signal),b=[];try{h.pending.add(v),n(h),await Promise.resolve(h.effect(m,mv({},p,{getOriginalState:g,condition:(w,P)=>y(w,P).then(Boolean),take:y,delay:qie(v.signal),pause:dI(v.signal),extra:s,signal:v.signal,fork:Q$e(v.signal,b),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((w,P,j)=>{w!==v&&(w.abort(wF),j.delete(w))})},cancel:()=>{v.abort(wF),h.pending.delete(v)},throwIfCancelled:()=>{Mp(v.signal)}})))}catch(w){w instanceof _P||kG(o,w,{raisedBy:"effect"})}finally{await Promise.all(b),v.abort(L$e),a(h),h.pending.delete(v)}},f=H$e(e,r);return{middleware:h=>m=>p=>{if(!Eie(p))return m(p);if(Xie.match(p))return c(p.payload);if($$e.match(p)){f();return}if(Yie.match(p))return u(p.payload);let g=h.getState();const v=()=>{if(g===BG)throw new Error(vu(23));return g};let y;try{if(y=m(p),e.size>0){const b=h.getState(),w=Array.from(e.values());for(const P of w){let j=!1;try{j=P.predicate(p,b,g)}catch(_){j=!1,kG(o,_,{raisedBy:"predicate"})}j&&d(P,p,h,v)}}}finally{g=BG}return y},startListening:c,stopListening:u,clearListeners:f}};function vu(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var K$e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Jie=$c({name:"chartLayout",initialState:K$e,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:q$e,setLayout:z$e,setChartSize:W$e,setScale:X$e}=Jie.actions,Y$e=Jie.reducer;function Zie(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function ai(t){return Number.isFinite(t)}function ym(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function FG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FG(Object(r),!0).forEach(function(n){J$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function J$e(t,e,r){return(e=Z$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z$e(t){var e=eGe(t,"string");return typeof e=="symbol"?e:e+""}function eGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ws(t,e,r){return Go(t)||Go(e)?r:Xf(e)?fg(t,e,r):typeof e=="function"?e(t):r}var tGe=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=e;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&fn(t[s]))return Xx(Xx({},t),{},{[s]:t[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&fn(t[o]))return Xx(Xx({},t),{},{[o]:t[o]+(a||0)})}return t},Dg=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",OG=1e-4,rGe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-OG,s=Math.max(n[0],n[1])+OG,o=t(e[0]),l=t(e[r-1]);(o<a||o>s||l<a||l>s)&&t.domain([e[0],e[r-1]])}},nGe=(t,e)=>{if(!e||e.length!==2||!fn(e[0])||!fn(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!fn(t[0])||t[0]<r)&&(a[0]=r),(!fn(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},aGe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,o=0,l=0;l<r;++l){var c=t[l],u=c==null?void 0:c[a];if(u!=null){var d=u[1],f=u[0],A=Wf(d)?f:d;A>=0?(u[0]=s,u[1]=s+A,s=d):(u[0]=o,u[1]=o+A,o=d)}}}},sGe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,o=0;o<r;++o){var l=t[o],c=l==null?void 0:l[a];if(c!=null){var u=Wf(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},iGe={sign:aGe,expand:DVe,none:dg,silhouette:RVe,wiggle:MVe,positive:sGe},oGe=(t,e,r)=>{var n,a=(n=iGe[r])!==null&&n!==void 0?n:dg,s=OVe().keys(e).value((l,c)=>Number(ws(l,c,0))).order(fF).offset(a),o=s(t);return o.forEach((l,c)=>{l.forEach((u,d)=>{var f=ws(t[d],e[c],0);Array.isArray(f)&&f.length===2&&fn(f[0])&&fn(f[1])&&(u[0]=f[0],u[1]=f[1])})}),o};function lGe(t){return t==null?void 0:String(t)}var DG=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var l=ws(s,e.dataKey,e.scale.domain()[o]);return Go(l)?null:e.scale(l)-a/2+n},cGe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},uGe=t=>{var e=t.flat(2).filter(fn);return[Math.min(...e),Math.max(...e)]},dGe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],fGe=(t,e,r)=>{if(t!=null)return dGe(Object.keys(t).reduce((n,a)=>{var s=t[a];if(!s)return n;var{stackedData:o}=s,l=o.reduce((c,u)=>{var d=Zie(u,e,r),f=uGe(d);return!ai(f[0])||!ai(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},RG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fI=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=gP(e,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function LG(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return Xx(Xx({},e),{},{dataKey:r,payload:n,value:a,name:s})}function SP(t,e){if(t)return String(t);if(typeof e=="string")return e}var hGe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},AGe=(t,e)=>e==="centric"?t.angle:t.radius,EA=t=>t.layout.width,SA=t=>t.layout.height,mGe=t=>t.layout.scale,eoe=t=>t.layout.margin,IP=qt(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),jP=qt(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),toe="data-recharts-item-index",roe="data-recharts-item-id",Kw=60;function UG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function f_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UG(Object(r),!0).forEach(function(n){pGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pGe(t,e,r){return(e=gGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gGe(t){var e=xGe(t,"string");return typeof e=="symbol"?e:e+""}function xGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vGe=t=>t.brush.height;function yGe(t){var e=jP(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Kw;return r+a}return r},0)}function bGe(t){var e=jP(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Kw;return r+a}return r},0)}function wGe(t){var e=IP(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function NGe(t){var e=IP(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var wo=qt([EA,SA,eoe,vGe,yGe,bGe,wGe,NGe,wie,zHe],(t,e,r,n,a,s,o,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},f={top:(r.top||0)+o,bottom:(r.bottom||0)+l},A=f_(f_({},f),d),h=A.bottom;A.bottom+=n,A=tGe(A,c,u);var m=t-A.left-A.right,p=e-A.top-A.bottom;return f_(f_({brushBottom:h},A),{},{width:Math.max(m,0),height:Math.max(p,0)})}),CGe=qt(wo,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),ZR=qt(EA,SA,(t,e)=>({x:0,y:0,width:t,height:e})),_Ge=x.createContext(null),Su=()=>x.useContext(_Ge)!=null,PP=t=>t.brush,BP=qt([PP,wo,eoe],(t,e,r)=>({height:t.height,x:fn(t.x)?t.x:e.left,y:fn(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:fn(t.width)?t.width:e.width})),noe={},aoe={},soe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),p()};let A=null;const h=()=>{A!=null&&clearTimeout(A),A=setTimeout(()=>{A=null,f()},n)},m=()=>{A!==null&&(clearTimeout(A),A=null)},p=()=>{m(),o=void 0,l=null},g=()=>{d()},v=function(...y){if(a!=null&&a.aborted)return;o=this,l=y;const b=A==null;h(),c&&b&&d()};return v.schedule=h,v.cancel=p,v.flush=g,a==null||a.addEventListener("abort",p,{once:!0}),v}t.debounce=e})(soe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=soe;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const A=e.debounce(function(...p){d=n.apply(this,p),f=null},a,{edges:u}),h=function(...p){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,p),f=Date.now(),A.cancel(),A.schedule(),d):(A.apply(this,p),d)},m=()=>(A.flush(),d);return h.cancel=A.cancel,h.flush=m,h}t.debounce=r})(aoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aoe;function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return e.debounce(n,a,{leading:o,maxWait:a,trailing:l})}t.throttle=r})(noe);var EGe=noe.throttle;const SGe=pA(EGe);var QG=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>a[o++]))}},ioe=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:o}=r,l=cA(n)?t:Number(n),c=cA(a)?e:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},IGe={width:0,height:0,overflow:"visible"},jGe={width:0,overflowX:"visible"},PGe={height:0,overflowY:"visible"},BGe={},TGe=t=>{var{width:e,height:r}=t,n=cA(e),a=cA(r);return n&&a?IGe:n?jGe:a?PGe:BGe};function kGe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function CF(){return CF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CF.apply(null,arguments)}function VG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VG(Object(r),!0).forEach(function(n){FGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FGe(t,e,r){return(e=OGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OGe(t){var e=DGe(t,"string");return typeof e=="symbol"?e:e+""}function DGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ooe=x.createContext({width:-1,height:-1});function RGe(t){return ym(t.width)&&ym(t.height)}function loe(t){var{children:e,width:r,height:n}=t,a=x.useMemo(()=>({width:r,height:n}),[r,n]);return RGe(a)?x.createElement(ooe.Provider,{value:a},e):null}var eM=()=>x.useContext(ooe),MGe=x.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:A,onResize:h,style:m={}}=t,p=x.useRef(null),g=x.useRef();g.current=h,x.useImperativeHandle(e,()=>p.current);var[v,y]=x.useState({containerWidth:n.width,containerHeight:n.height}),b=x.useCallback((I,E)=>{y(F=>{var k=Math.round(I),B=Math.round(E);return F.containerWidth===k&&F.containerHeight===B?F:{containerWidth:k,containerHeight:B}})},[]);x.useEffect(()=>{if(p.current==null||typeof ResizeObserver>"u")return Vw;var I=B=>{var R,{width:Y,height:me}=B[0].contentRect;b(Y,me),(R=g.current)===null||R===void 0||R.call(g,Y,me)};d>0&&(I=SGe(I,d,{trailing:!0,leading:!1}));var E=new ResizeObserver(I),{width:F,height:k}=p.current.getBoundingClientRect();return b(F,k),E.observe(p.current),()=>{E.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:P}=v;QG(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:j,calculatedHeight:_}=ioe(w,P,{width:a,height:s,aspect:r,maxHeight:c});return QG(j!=null&&j>0||_!=null&&_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,j,_,a,s,o,l,r),x.createElement("div",{id:f?"".concat(f):void 0,className:Ga("recharts-responsive-container",A),style:HG(HG({},m),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:p},x.createElement("div",{style:TGe({width:a,height:s})},x.createElement(loe,{width:j,height:_},u)))}),$G=x.forwardRef((t,e)=>{var r=eM();if(ym(r.width)&&ym(r.height))return t.children;var{width:n,height:a}=kGe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=ioe(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return fn(s)&&fn(o)?x.createElement(loe,{width:s,height:o},t.children):x.createElement(MGe,CF({},t,{width:n,height:a,ref:e}))});function coe(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var TP=()=>{var t,e=Su(),r=on(CGe),n=on(BP),a=(t=on(PP))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},LGe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},UGe=()=>{var t;return(t=on(wo))!==null&&t!==void 0?t:LGe},uoe=()=>on(EA),doe=()=>on(SA),QGe=()=>on(t=>t.layout.margin),ya=t=>t.layout.layoutType,qw=()=>on(ya),VGe=()=>{var t=qw();return t!==void 0},kP=t=>{var e=hs(),r=Su(),{width:n,height:a}=t,s=eM(),o=n,l=a;return s&&(o=s.width>0?s.width:n,l=s.height>0?s.height:a),x.useEffect(()=>{!r&&ym(o)&&ym(l)&&e(W$e({width:o,height:l}))},[e,r,o,l]),null},foe=Symbol.for("immer-nothing"),GG=Symbol.for("immer-draftable"),Cu=Symbol.for("immer-state");function Kd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var q2=Object.getPrototypeOf;function Qv(t){return!!t&&!!t[Cu]}function Ag(t){var e;return t?hoe(t)||Array.isArray(t)||!!t[GG]||!!((e=t.constructor)!=null&&e[GG])||zw(t)||OP(t):!1}var HGe=Object.prototype.constructor.toString(),KG=new WeakMap;function hoe(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=KG.get(r);return n===void 0&&(n=Function.toString.call(r),KG.set(r,n)),n===HGe}function hI(t,e,r=!0){FP(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function FP(t){const e=t[Cu];return e?e.type_:Array.isArray(t)?1:zw(t)?2:OP(t)?3:0}function _F(t,e){return FP(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Aoe(t,e,r){const n=FP(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function $Ge(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function zw(t){return t instanceof Map}function OP(t){return t instanceof Set}function sp(t){return t.copy_||t.base_}function EF(t,e){if(zw(t))return new Map(t);if(OP(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=hoe(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Cu];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(q2(t),n)}else{const n=q2(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function tM(t,e=!1){return DP(t)||Qv(t)||!Ag(t)||(FP(t)>1&&Object.defineProperties(t,{set:h_,add:h_,clear:h_,delete:h_}),Object.freeze(t),e&&Object.values(t).forEach(r=>tM(r,!0))),t}function GGe(){Kd(2)}var h_={value:GGe};function DP(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var KGe={};function mg(t){const e=KGe[t];return e||Kd(0,t),e}var z2;function moe(){return z2}function qGe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function qG(t,e){e&&(mg("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function SF(t){IF(t),t.drafts_.forEach(zGe),t.drafts_=null}function IF(t){t===z2&&(z2=t.parent_)}function zG(t){return z2=qGe(z2,t)}function zGe(t){const e=t[Cu];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function WG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Cu].modified_&&(SF(e),Kd(4)),Ag(t)&&(t=AI(e,t),e.parent_||mI(e,t)),e.patches_&&mg("Patches").generateReplacementPatches_(r[Cu].base_,t,e.patches_,e.inversePatches_)):t=AI(e,r,[]),SF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==foe?t:void 0}function AI(t,e,r){if(DP(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[Cu];if(!a)return hI(e,(s,o)=>XG(t,a,e,s,o,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return mI(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let o=s,l=!1;a.type_===3&&(o=new Set(s),s.clear(),l=!0),hI(o,(c,u)=>XG(t,a,s,c,u,r,l),n),mI(t,s,!1),r&&t.patches_&&mg("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function XG(t,e,r,n,a,s,o){if(a==null||typeof a!="object"&&!o)return;const l=DP(a);if(!(l&&!o)){if(Qv(a)){const c=s&&e&&e.type_!==3&&!_F(e.assigned_,n)?s.concat(n):void 0,u=AI(t,a,c);if(Aoe(r,n,u),Qv(u))t.canAutoFreeze_=!1;else return}else o&&r.add(a);if(Ag(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&l)return;AI(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(zw(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&mI(t,a)}}}function mI(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&tM(e,r)}function WGe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:moe(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=rM;r&&(a=[n],s=W2);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var rM={get(t,e){if(e===Cu)return t;const r=sp(t);if(!_F(r,e))return XGe(t,r,e);const n=r[e];return t.finalized_||!Ag(n)?n:n===nB(t.base_,e)?(aB(t),t.copy_[e]=PF(n,t)):n},has(t,e){return e in sp(t)},ownKeys(t){return Reflect.ownKeys(sp(t))},set(t,e,r){const n=poe(sp(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=nB(sp(t),e),s=a==null?void 0:a[Cu];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if($Ge(r,a)&&(r!==void 0||_F(t.base_,e)))return!0;aB(t),jF(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return nB(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,aB(t),jF(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=sp(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Kd(11)},getPrototypeOf(t){return q2(t.base_)},setPrototypeOf(){Kd(12)}},W2={};hI(rM,(t,e)=>{W2[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});W2.deleteProperty=function(t,e){return W2.set.call(this,t,e,void 0)};W2.set=function(t,e,r){return rM.set.call(this,t[0],e,r,t[0])};function nB(t,e){const r=t[Cu];return(r?sp(r):t)[e]}function XGe(t,e,r){var a;const n=poe(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function poe(t,e){if(!(e in t))return;let r=q2(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=q2(r)}}function jF(t){t.modified_||(t.modified_=!0,t.parent_&&jF(t.parent_))}function aB(t){t.copy_||(t.copy_=EF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var YGe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Kd(6),n!==void 0&&typeof n!="function"&&Kd(7);let a;if(Ag(e)){const s=zG(this),o=PF(e,void 0);let l=!0;try{a=r(o),l=!1}finally{l?SF(s):IF(s)}return qG(s,n),WG(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===foe&&(a=void 0),this.autoFreeze_&&tM(a,!0),n){const s=[],o=[];mg("Patches").generateReplacementPatches_(e,a,s,o),n(s,o)}return a}else Kd(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,c=>e(c,...l));let n,a;return[this.produce(e,r,(o,l)=>{n=o,a=l}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ag(t)||Kd(8),Qv(t)&&(t=JGe(t));const e=zG(this),r=PF(t,void 0);return r[Cu].isManual_=!0,IF(e),r}finishDraft(t,e){const r=t&&t[Cu];(!r||!r.isManual_)&&Kd(9);const{scope_:n}=r;return qG(n,e),WG(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=mg("Patches").applyPatches_;return Qv(t)?n(t,e):this.produce(t,a=>n(a,e))}};function PF(t,e){const r=zw(t)?mg("MapSet").proxyMap_(t,e):OP(t)?mg("MapSet").proxySet_(t,e):WGe(t,e);return(e?e.scope_:moe()).drafts_.push(r),r}function JGe(t){return Qv(t)||Kd(10,t),goe(t)}function goe(t){if(!Ag(t)||DP(t))return t;const e=t[Cu];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=EF(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=EF(t,!0);return hI(r,(a,s)=>{Aoe(r,a,goe(s))},n),e&&(e.finalized_=!1),r}var ZGe=new YGe;ZGe.produce;var eKe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},xoe=$c({name:"legend",initialState:eKe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Is()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=nf(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:Is()},removeLegendPayload:{reducer(t,e){var r=nf(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:Is()}}}),{setLegendSize:YG,setLegendSettings:tKe,addLegendPayload:voe,replaceLegendPayload:yoe,removeLegendPayload:boe}=xoe.actions,rKe=xoe.reducer,nKe=["contextPayload"];function BF(){return BF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},BF.apply(null,arguments)}function JG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JG(Object(r),!0).forEach(function(n){aKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aKe(t,e,r){return(e=sKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sKe(t){var e=iKe(t,"string");return typeof e=="symbol"?e:e+""}function iKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oKe(t,e){if(t==null)return{};var r,n,a=lKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function lKe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function cKe(t){return t.value}function uKe(t){var{contextPayload:e}=t,r=oKe(t,nKe),n=die(e,t.payloadUniqBy,cKe),a=Vv(Vv({},r),{},{payload:n});return x.isValidElement(t.content)?x.cloneElement(t.content,a):typeof t.content=="function"?x.createElement(t.content,a):x.createElement(hHe,a)}function dKe(t,e,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Vv(Vv({},u),d)}function fKe(t){var e=hs();return x.useEffect(()=>{e(tKe(t))},[e,t]),null}function hKe(t){var e=hs();return x.useEffect(()=>(e(YG(t)),()=>{e(YG({width:0,height:0}))}),[e,t]),null}function AKe(t,e,r,n){return t==="vertical"&&fn(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var mKe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function TF(t){var e=xl(t,mKe),r=YHe(),n=sVe(),a=QGe(),{width:s,height:o,wrapperStyle:l,portal:c}=e,[u,d]=Nie([r]),f=uoe(),A=doe();if(f==null||A==null)return null;var h=f-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),m=AKe(e.layout,o,s,h),p=c?l:Vv(Vv({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||o||"auto"},dKe(l,e,a,f,A,u)),l),g=c??n;if(g==null||r==null)return null;var v=x.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},x.createElement(fKe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&x.createElement(hKe,{width:u.width,height:u.height}),x.createElement(uKe,BF({},e,m,{margin:a,chartWidth:f,chartHeight:A,contextPayload:r})));return xu.createPortal(v,g)}TF.displayName="Legend";function kF(){return kF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kF.apply(null,arguments)}function ZG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZG(Object(r),!0).forEach(function(n){pKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pKe(t,e,r){return(e=gKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gKe(t){var e=xKe(t,"string");return typeof e=="symbol"?e:e+""}function xKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vKe(t){return Array.isArray(t)&&Xf(t[0])&&Xf(t[1])?t.join(" ~ "):t}var yKe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:A=!1}=t,h=()=>{if(s&&s.length){var P={padding:0,margin:0},j=(l?gP(s,l):s).map((_,I)=>{if(_.type==="none")return null;var E=_.formatter||o||vKe,{value:F,name:k}=_,B=F,R=k;if(E){var Y=E(F,k,_,I,s);if(Array.isArray(Y))[B,R]=Y;else if(Y!=null)B=Y;else return null}var me=sB({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},n);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:me},Xf(R)?x.createElement("span",{className:"recharts-tooltip-item-name"},R):null,Xf(R)?x.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,x.createElement("span",{className:"recharts-tooltip-item-value"},B),x.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:P},j)}return null},m=sB({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=sB({margin:0},a),g=!Go(d),v=g?d:"",y=Ga("recharts-default-tooltip",c),b=Ga("recharts-tooltip-label",u);g&&f&&s!==void 0&&s!==null&&(v=f(d,s));var w=A?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",kF({className:y,style:m},w),x.createElement("p",{className:b,style:p},x.isValidElement(v)?v:"".concat(v)),h())},xy="recharts-tooltip-wrapper",bKe={visibility:"hidden"};function wKe(t){var{coordinate:e,translateX:r,translateY:n}=t;return Ga(xy,{["".concat(xy,"-right")]:fn(r)&&e&&fn(e.x)&&r>=e.x,["".concat(xy,"-left")]:fn(r)&&e&&fn(e.x)&&r<e.x,["".concat(xy,"-bottom")]:fn(n)&&e&&fn(e.y)&&n>=e.y,["".concat(xy,"-top")]:fn(n)&&e&&fn(e.y)&&n<e.y})}function eK(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(s&&fn(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(e[n])return o[n]?d:f;var A=c[n];if(A==null)return 0;if(o[n]){var h=d,m=A;return h<m?Math.max(f,A):Math.max(d,A)}if(u==null)return 0;var p=f+l,g=A+u;return p>g?Math.max(d,A):Math.max(f,A)}function NKe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function CKe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=t,u,d,f;return o.height>0&&o.width>0&&r?(d=eK({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=eK({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=NKe({translateX:d,translateY:f,useTranslate3d:l})):u=bKe,{cssProperties:u,cssClasses:wKe({translateX:d,translateY:f,coordinate:r})}}function tK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function A_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tK(Object(r),!0).forEach(function(n){FF(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FF(t,e,r){return(e=_Ke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _Ke(t){var e=EKe(t,"string");return typeof e=="symbol"?e:e+""}function EKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class SKe extends x.PureComponent{constructor(){super(...arguments),FF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),FF(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:A,viewBox:h,wrapperStyle:m,lastBoundingBox:p,innerRef:g,hasPortalFromProps:v}=this.props,{cssClasses:y,cssProperties:b}=CKe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:p.height,width:p.width},useTranslate3d:A,viewBox:h}),w=v?{}:A_(A_({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),P=A_(A_({},w),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},m);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:P,ref:g},s)}}var woe=()=>{var t;return(t=on(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function OF(){return OF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OF.apply(null,arguments)}function rK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rK(Object(r),!0).forEach(function(n){IKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IKe(t,e,r){return(e=jKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jKe(t){var e=PKe(t,"string");return typeof e=="symbol"?e:e+""}function PKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aK={curveBasisClosed:CVe,curveBasisOpen:_Ve,curveBasis:NVe,curveBumpX:cVe,curveBumpY:uVe,curveLinearClosed:EVe,curveLinear:uP,curveMonotoneX:SVe,curveMonotoneY:IVe,curveNatural:jVe,curveStep:PVe,curveStepAfter:TVe,curveStepBefore:BVe},pI=t=>ai(t.x)&&ai(t.y),sK=t=>t.base!=null&&pI(t.base)&&pI(t),vy=t=>t.x,yy=t=>t.y,BKe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(Qw(t));return(r==="curveMonotone"||r==="curveBump")&&e?aK["".concat(r).concat(e==="vertical"?"Y":"X")]:aK[r]||uP},TKe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,o=BKe(e,a),l=s?r.filter(pI):r,c;if(Array.isArray(n)){var u=r.map((h,m)=>nK(nK({},h),{},{base:n[m]}));a==="vertical"?c=i_().y(yy).x1(vy).x0(h=>h.base.x):c=i_().x(vy).y1(yy).y0(h=>h.base.y);var d=c.defined(sK).curve(o),f=s?u.filter(sK):u;return d(f)}a==="vertical"&&fn(n)?c=i_().y(yy).x1(vy).x0(n):fn(n)?c=i_().x(vy).y1(yy).y0(n):c=Tse().x(vy).y(yy);var A=c.defined(pI).curve(o);return A(l)},nM=t=>{var{className:e,points:r,path:n,pathRef:a}=t,s=qw();if((!r||!r.length)&&!n)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=r&&r.length?TKe(o):n;return x.createElement("path",OF({},zf(t),eHe(t),{className:Ga("recharts-curve",e),d:l===null?void 0:l,ref:a}))},kKe=["x","y","top","left","width","height","className"];function DF(){return DF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DF.apply(null,arguments)}function iK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function FKe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iK(Object(r),!0).forEach(function(n){OKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OKe(t,e,r){return(e=DKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DKe(t){var e=RKe(t,"string");return typeof e=="symbol"?e:e+""}function RKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MKe(t,e){if(t==null)return{};var r,n,a=LKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function LKe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var UKe=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),QKe=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=t,c=MKe(t,kKe),u=FKe({x:e,y:r,top:n,left:a,width:s,height:o},c);return!fn(e)||!fn(r)||!fn(s)||!fn(o)||!fn(n)||!fn(a)?null:x.createElement("path",DF({},xd(u),{className:Ga("recharts-cross",l),d:UKe(e,r,s,o,n,a)}))};function VKe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function oK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oK(Object(r),!0).forEach(function(n){HKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HKe(t,e,r){return(e=$Ke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Ke(t){var e=GKe(t,"string");return typeof e=="symbol"?e:e+""}function GKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KKe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Noe=(t,e,r)=>t.map(n=>"".concat(KKe(n)," ").concat(e,"ms ").concat(r)).join(","),qKe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),X2=(t,e)=>Object.keys(e).reduce((r,n)=>lK(lK({},r),{},{[n]:t(n,e[n])}),{});function cK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cK(Object(r),!0).forEach(function(n){zKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zKe(t,e,r){return(e=WKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WKe(t){var e=XKe(t,"string");return typeof e=="symbol"?e:e+""}function XKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gI=(t,e,r)=>t+(e-t)*r,RF=t=>{var{from:e,to:r}=t;return e!==r},Coe=(t,e,r)=>{var n=X2((a,s)=>{if(RF(s)){var[o,l]=t(s.from,s.to,s.velocity);return fo(fo({},s),{},{from:o,velocity:l})}return s},e);return r<1?X2((a,s)=>RF(s)&&n[a]!=null?fo(fo({},s),{},{velocity:gI(s.velocity,n[a].velocity,r),from:gI(s.from,n[a].from,r)}):s,e):Coe(t,n,r-1)};function YKe(t,e,r,n,a,s){var o,l=n.reduce((A,h)=>fo(fo({},A),{},{[h]:{from:t[h],velocity:0,to:e[h]}}),{}),c=()=>X2((A,h)=>h.from,l),u=()=>!Object.values(l).filter(RF).length,d=null,f=A=>{o||(o=A);var h=A-o,m=h/r.dt;l=Coe(r,l,m),a(fo(fo(fo({},t),e),c())),o=A,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{var A;(A=d)===null||A===void 0||A()})}function JKe(t,e,r,n,a,s,o){var l=null,c=a.reduce((f,A)=>{var h=t[A],m=e[A];return h==null||m==null?f:fo(fo({},f),{},{[A]:[h,m]})},{}),u,d=f=>{u||(u=f);var A=(f-u)/n,h=X2((p,g)=>gI(...g,r(A)),c);if(s(fo(fo(fo({},t),e),h)),A<1)l=o.setTimeout(d);else{var m=X2((p,g)=>gI(...g,r(1)),c);s(fo(fo(fo({},t),e),m))}};return()=>(l=o.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const ZKe=(t,e,r,n,a,s)=>{var o=qKe(t,e);return r==null?()=>(a(fo(fo({},t),e)),()=>{}):r.isStepper===!0?YKe(t,e,r,o,a,s):JKe(t,e,r,n,o,a,s)};var xI=1e-4,_oe=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Eoe=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),uK=(t,e)=>r=>{var n=_oe(t,e);return Eoe(n,r)},eqe=(t,e)=>r=>{var n=_oe(t,e),a=[...n.map((s,o)=>s*o).slice(1),0];return Eoe(a,r)},tqe=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},rqe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=tqe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},nqe=(t,e,r,n)=>{var a=uK(t,r),s=uK(e,n),o=eqe(t,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,A=0;A<8;++A){var h=a(f)-d,m=o(f);if(Math.abs(h-d)<xI||m<xI)return s(f);f=l(f-h/m)}return s(f)};return c.isStepper=!1,c},dK=function(){return nqe(...rqe(...arguments))},aqe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*a/1e3,A=c*a/1e3+o;return Math.abs(A-l)<xI&&Math.abs(f)<xI?[l,0]:[A,f]};return s.isStepper=!0,s.dt=a,s},sqe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return dK(t);case"spring":return aqe();default:if(t.split("(")[0]==="cubic-bezier")return dK(t)}return typeof t=="function"?t:null};function iqe(t){var e,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class oqe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function lqe(){return iqe(new oqe)}var cqe=x.createContext(lqe);function uqe(t,e){var r=x.useContext(cqe);return x.useMemo(()=>e??r(t),[t,e,r])}var dqe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),RP={isSsr:dqe()},fqe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},fK={t:0},iB={t:1};function MP(t){var e=xl(t,fqe),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!RP.isSsr:r,f=uqe(e.animationId,e.animationManager),[A,h]=x.useState(d?fK:iB),m=x.useRef(null);return x.useEffect(()=>{d||h(iB)},[d]),x.useEffect(()=>{if(!d||!n)return Vw;var p=ZKe(fK,iB,sqe(s),a,h,f.getTimeoutController()),g=()=>{m.current=p()};return f.start([c,o,g,a,l]),()=>{f.stop(),m.current&&m.current(),l()}},[d,n,a,s,o,c,l,f]),u(A.t)}function LP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=x.useRef(H2(e)),n=x.useRef(t);return n.current!==t&&(r.current=H2(e),n.current=t),r.current}var hqe=["radius"],Aqe=["radius"],hK,AK,mK,pK,gK,xK,vK,yK,bK,wK;function NK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function CK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NK(Object(r),!0).forEach(function(n){mqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mqe(t,e,r){return(e=pqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pqe(t){var e=gqe(t,"string");return typeof e=="symbol"?e:e+""}function gqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vI(){return vI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vI.apply(null,arguments)}function _K(t,e){if(t==null)return{};var r,n,a=xqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function xqe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Ef(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var EK=(t,e,r,n,a)=>{var s=U0(r),o=U0(n),l=Math.min(Math.abs(s)/2,Math.abs(o)/2),c=o>=0?1:-1,u=s>=0?1:-1,d=o>=0&&s>=0||o<0&&s<0?1:0,f;if(l>0&&a instanceof Array){for(var A=[0,0,0,0],h=0,m=4;h<m;h++)A[h]=a[h]>l?l:a[h];f=fi(hK||(hK=Ef(["M",",",""])),t,e+c*A[0]),A[0]>0&&(f+=fi(AK||(AK=Ef(["A ",",",",0,0,",",",",",""])),A[0],A[0],d,t+u*A[0],e)),f+=fi(mK||(mK=Ef(["L ",",",""])),t+r-u*A[1],e),A[1]>0&&(f+=fi(pK||(pK=Ef(["A ",",",",0,0,",`,
        `,",",""])),A[1],A[1],d,t+r,e+c*A[1])),f+=fi(gK||(gK=Ef(["L ",",",""])),t+r,e+n-c*A[2]),A[2]>0&&(f+=fi(xK||(xK=Ef(["A ",",",",0,0,",`,
        `,",",""])),A[2],A[2],d,t+r-u*A[2],e+n)),f+=fi(vK||(vK=Ef(["L ",",",""])),t+u*A[3],e+n),A[3]>0&&(f+=fi(yK||(yK=Ef(["A ",",",",0,0,",`,
        `,",",""])),A[3],A[3],d,t,e+n-c*A[3])),f+="Z"}else if(l>0&&a===+a&&a>0){var p=Math.min(l,a);f=fi(bK||(bK=Ef(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*p,p,p,d,t+u*p,e,t+r-u*p,e,p,p,d,t+r,e+c*p,t+r,e+n-c*p,p,p,d,t+r-u*p,e+n,t+u*p,e+n,p,p,d,t,e+n-c*p)}else f=fi(wK||(wK=Ef(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return f},SK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Soe=t=>{var e=xl(t,SK),r=x.useRef(null),[n,a]=x.useState(-1);x.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var he=r.current.getTotalLength();he&&a(he)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=e,{animationEasing:f,animationDuration:A,animationBegin:h,isAnimationActive:m,isUpdateAnimationActive:p}=e,g=x.useRef(l),v=x.useRef(c),y=x.useRef(s),b=x.useRef(o),w=x.useMemo(()=>({x:s,y:o,width:l,height:c,radius:u}),[s,o,l,c,u]),P=LP(w,"rectangle-");if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var j=Ga("recharts-rectangle",d);if(!p){var _=xd(e),{radius:I}=_,E=_K(_,hqe);return x.createElement("path",vI({},E,{x:U0(s),y:U0(o),width:U0(l),height:U0(c),radius:typeof u=="number"?u:void 0,className:j,d:EK(s,o,l,c,u)}))}var F=g.current,k=v.current,B=y.current,R=b.current,Y="0px ".concat(n===-1?1:n,"px"),me="".concat(n,"px 0px"),pe=Noe(["strokeDasharray"],A,typeof f=="string"?f:SK.animationEasing);return x.createElement(MP,{animationId:P,key:P,canBegin:n>0,duration:A,easing:f,isActive:p,begin:h},he=>{var ge=uo(F,l,he),se=uo(k,c,he),je=uo(B,s,he),Te=uo(R,o,he);r.current&&(g.current=ge,v.current=se,y.current=je,b.current=Te);var D;m?he>0?D={transition:pe,strokeDasharray:me}:D={strokeDasharray:Y}:D={strokeDasharray:me};var K=xd(e),{radius:z}=K,Q=_K(K,Aqe);return x.createElement("path",vI({},Q,{radius:typeof u=="number"?u:void 0,className:j,d:EK(je,Te,ge,se,u),ref:r,style:CK(CK({},D),e.style)}))})};function IK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IK(Object(r),!0).forEach(function(n){vqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vqe(t,e,r){return(e=yqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yqe(t){var e=bqe(t,"string");return typeof e=="symbol"?e:e+""}function bqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yI=Math.PI/180,wqe=t=>t*180/Math.PI,zi=(t,e,r,n)=>({x:t+Math.cos(-yI*n)*r,y:e+Math.sin(-yI*n)*r}),Ioe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Nqe=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},Cqe=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,o=Nqe({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:wqe(c),angleInRadian:c}},_qe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},Eqe=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return t+o*360},Sqe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=Cqe({x:r,y:n},e),{innerRadius:o,outerRadius:l}=e;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=_qe(e),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?jK(jK({},e),{},{radius:a,angle:Eqe(d,e)}):null};function joe(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,o=zi(e,r,n,a),l=zi(e,r,n,s);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}var PK,BK,TK,kK,FK,OK,DK;function MF(){return MF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MF.apply(null,arguments)}function bp(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Iqe=(t,e)=>{var r=ml(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},m_=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=t,u=l*(o?1:-1)+n,d=Math.asin(l/u)/yI,f=c?a:a+s*d,A=zi(e,r,u,f),h=zi(e,r,n,f),m=c?a-s*d:a,p=zi(e,r,u*Math.cos(d*yI),m);return{center:A,circleTangency:h,lineTangency:p,theta:d}},Poe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=t,l=Iqe(s,o),c=s+l,u=zi(e,r,a,s),d=zi(e,r,a,c),f=fi(PK||(PK=bp(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(l)>180),+(s>c),d.x,d.y);if(n>0){var A=zi(e,r,n,s),h=zi(e,r,n,c);f+=fi(BK||(BK=bp(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),h.x,h.y,n,n,+(Math.abs(l)>180),+(s<=c),A.x,A.y)}else f+=fi(TK||(TK=bp(["L ",","," Z"])),e,r);return f},jqe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=ml(u-c),{circleTangency:f,lineTangency:A,theta:h}=m_({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:m,lineTangency:p,theta:g}=m_({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-h-g;if(v<0)return o?fi(kK||(kK=bp(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),A.x,A.y,s,s,s*2,s,s,-s*2):Poe({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var y=fi(FK||(FK=bp(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),A.x,A.y,s,s,+(d<0),f.x,f.y,a,a,+(v>180),+(d<0),m.x,m.y,s,s,+(d<0),p.x,p.y);if(n>0){var{circleTangency:b,lineTangency:w,theta:P}=m_({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:j,lineTangency:_,theta:I}=m_({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),E=l?Math.abs(c-u):Math.abs(c-u)-P-I;if(E<0&&s===0)return"".concat(y,"L").concat(e,",").concat(r,"Z");y+=fi(OK||(OK=bp(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),_.x,_.y,s,s,+(d<0),j.x,j.y,n,n,+(E>180),+(d>0),b.x,b.y,s,s,+(d<0),w.x,w.y)}else y+=fi(DK||(DK=bp(["L",",","Z"])),e,r);return y},Pqe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Boe=t=>{var e=xl(t,Pqe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=e;if(s<a||u===d)return null;var A=Ga("recharts-sector",f),h=s-a,m=Hl(o,h,0,!0),p;return m>0&&Math.abs(u-d)<360?p=jqe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):p=Poe({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),x.createElement("path",MF({},xd(e),{className:A,d:p}))};function Bqe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(qse(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:o,angle:l}=e,c=zi(n,a,s,l),u=zi(n,a,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return joe(e)}}var Toe={},koe={},Foe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GR;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(Foe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Foe;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(koe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KR,r=koe;function n(a,s,o){o&&typeof o!="number"&&e.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}t.range=n})(Toe);var Tqe=Toe.range;const Ooe=pA(Tqe);function am(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kqe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function aM(t){let e,r,n;t.length!==2?(e=am,r=(l,c)=>am(t(l),c),n=(l,c)=>t(l)-c):(e=t===am||t===kqe?t:Fqe,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function Fqe(){return 0}function Doe(t){return t===null?NaN:+t}function*Oqe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Dqe=aM(am),Ww=Dqe.right;aM(Doe).center;class RK extends Map{constructor(e,r=Lqe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(MK(this,e))}has(e){return super.has(MK(this,e))}set(e,r){return super.set(Rqe(this,e),r)}delete(e){return super.delete(Mqe(this,e))}}function MK({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Rqe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Mqe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Lqe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Uqe(t=am){if(t===am)return Roe;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function Roe(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Qqe=Math.sqrt(50),Vqe=Math.sqrt(10),Hqe=Math.sqrt(2);function bI(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=Qqe?10:s>=Vqe?5:s>=Hqe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?bI(t,e,r*2):[l,c,u]}function LF(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,o]=n?bI(e,t,r):bI(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function UF(t,e,r){return e=+e,t=+t,r=+r,bI(t,e,r)[2]}function QF(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?UF(e,t,r):UF(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function LK(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function UK(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Moe(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?Roe:Uqe(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),A=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(e-u*f/c+A)),m=Math.min(n,Math.floor(e+(c-u)*f/c+A));Moe(t,e,h,m,a)}const s=t[e];let o=r,l=n;for(by(t,r,e),a(t[n],s)>0&&by(t,r,n);o<l;){for(by(t,o,l),++o,--l;a(t[o],s)<0;)++o;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?by(t,r,l):(++l,by(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function by(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function $qe(t,e,r){if(t=Float64Array.from(Oqe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return UK(t);if(e>=1)return LK(t);var n,a=(n-1)*e,s=Math.floor(a),o=LK(Moe(t,s).subarray(0,s+1)),l=UK(t.subarray(s+1));return o+(l-o)*(a-s)}}function Gqe(t,e,r=Doe){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),o=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return o+(l-o)*(a-s)}}function Kqe(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function Cd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function IA(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const VF=Symbol("implicit");function sM(){var t=new RK,e=[],r=[],n=VF;function a(s){let o=t.get(s);if(o===void 0){if(n!==VF)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new RK;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return sM(e,r).unknown(n)},Cd.apply(a,arguments),a}function iM(){var t=sM().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var A=e().length,h=a<n,m=h?a:n,p=h?n:a;s=(p-m)/Math.max(1,A-c+u*2),l&&(s=Math.floor(s)),m+=(p-m-s*(A-c))*d,o=s*(1-c),l&&(m=Math.round(m),o=Math.round(o));var g=Kqe(A).map(function(v){return m+s*v});return r(h?g.reverse():g)}return t.domain=function(A){return arguments.length?(e(A),f()):e()},t.range=function(A){return arguments.length?([n,a]=A,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(A){return[n,a]=A,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(A){return arguments.length?(l=!!A,f()):l},t.padding=function(A){return arguments.length?(c=Math.min(1,u=+A),f()):c},t.paddingInner=function(A){return arguments.length?(c=Math.min(1,A),f()):c},t.paddingOuter=function(A){return arguments.length?(u=+A,f()):u},t.align=function(A){return arguments.length?(d=Math.max(0,Math.min(1,A)),f()):d},t.copy=function(){return iM(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Cd.apply(f(),arguments)}function Loe(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Loe(e())},t}function qqe(){return Loe(iM.apply(null,arguments).paddingInner(1))}function oM(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Uoe(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Xw(){}var Y2=.7,wI=1/Y2,pv="\\s*([+-]?\\d+)\\s*",J2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zqe=/^#([0-9a-f]{3,8})$/,Wqe=new RegExp(`^rgb\\(${pv},${pv},${pv}\\)$`),Xqe=new RegExp(`^rgb\\(${Gf},${Gf},${Gf}\\)$`),Yqe=new RegExp(`^rgba\\(${pv},${pv},${pv},${J2}\\)$`),Jqe=new RegExp(`^rgba\\(${Gf},${Gf},${Gf},${J2}\\)$`),Zqe=new RegExp(`^hsl\\(${J2},${Gf},${Gf}\\)$`),eze=new RegExp(`^hsla\\(${J2},${Gf},${Gf},${J2}\\)$`),QK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oM(Xw,Z2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:VK,formatHex:VK,formatHex8:tze,formatHsl:rze,formatRgb:HK,toString:HK});function VK(){return this.rgb().formatHex()}function tze(){return this.rgb().formatHex8()}function rze(){return Qoe(this).formatHsl()}function HK(){return this.rgb().formatRgb()}function Z2(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=zqe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?$K(e):r===3?new Dc(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?p_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?p_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Wqe.exec(t))?new Dc(e[1],e[2],e[3],1):(e=Xqe.exec(t))?new Dc(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Yqe.exec(t))?p_(e[1],e[2],e[3],e[4]):(e=Jqe.exec(t))?p_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Zqe.exec(t))?qK(e[1],e[2]/100,e[3]/100,1):(e=eze.exec(t))?qK(e[1],e[2]/100,e[3]/100,e[4]):QK.hasOwnProperty(t)?$K(QK[t]):t==="transparent"?new Dc(NaN,NaN,NaN,0):null}function $K(t){return new Dc(t>>16&255,t>>8&255,t&255,1)}function p_(t,e,r,n){return n<=0&&(t=e=r=NaN),new Dc(t,e,r,n)}function nze(t){return t instanceof Xw||(t=Z2(t)),t?(t=t.rgb(),new Dc(t.r,t.g,t.b,t.opacity)):new Dc}function HF(t,e,r,n){return arguments.length===1?nze(t):new Dc(t,e,r,n??1)}function Dc(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}oM(Dc,HF,Uoe(Xw,{brighter(t){return t=t==null?wI:Math.pow(wI,t),new Dc(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Y2:Math.pow(Y2,t),new Dc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Dc(Lp(this.r),Lp(this.g),Lp(this.b),NI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GK,formatHex:GK,formatHex8:aze,formatRgb:KK,toString:KK}));function GK(){return`#${wp(this.r)}${wp(this.g)}${wp(this.b)}`}function aze(){return`#${wp(this.r)}${wp(this.g)}${wp(this.b)}${wp((isNaN(this.opacity)?1:this.opacity)*255)}`}function KK(){const t=NI(this.opacity);return`${t===1?"rgb(":"rgba("}${Lp(this.r)}, ${Lp(this.g)}, ${Lp(this.b)}${t===1?")":`, ${t})`}`}function NI(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Lp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wp(t){return t=Lp(t),(t<16?"0":"")+t.toString(16)}function qK(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new qd(t,e,r,n)}function Qoe(t){if(t instanceof qd)return new qd(t.h,t.s,t.l,t.opacity);if(t instanceof Xw||(t=Z2(t)),!t)return new qd;if(t instanceof qd)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(e===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new qd(o,l,c,t.opacity)}function sze(t,e,r,n){return arguments.length===1?Qoe(t):new qd(t,e,r,n??1)}function qd(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}oM(qd,sze,Uoe(Xw,{brighter(t){return t=t==null?wI:Math.pow(wI,t),new qd(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Y2:Math.pow(Y2,t),new qd(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Dc(oB(t>=240?t-240:t+120,a,n),oB(t,a,n),oB(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new qd(zK(this.h),g_(this.s),g_(this.l),NI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=NI(this.opacity);return`${t===1?"hsl(":"hsla("}${zK(this.h)}, ${g_(this.s)*100}%, ${g_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function zK(t){return t=(t||0)%360,t<0?t+360:t}function g_(t){return Math.max(0,Math.min(1,t||0))}function oB(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const lM=t=>()=>t;function ize(t,e){return function(r){return t+r*e}}function oze(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function lze(t){return(t=+t)==1?Voe:function(e,r){return r-e?oze(e,r,t):lM(isNaN(e)?r:e)}}function Voe(t,e){var r=e-t;return r?ize(t,r):lM(isNaN(t)?e:t)}const WK=function t(e){var r=lze(e);function n(a,s){var o=r((a=HF(a)).r,(s=HF(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=Voe(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function cze(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function uze(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dze(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=v1(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function fze(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function CI(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function hze(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=v1(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var $F=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lB=new RegExp($F.source,"g");function Aze(t){return function(){return t}}function mze(t){return function(e){return t(e)+""}}function pze(t,e){var r=$F.lastIndex=lB.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=$F.exec(t))&&(a=lB.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:CI(n,a)})),r=lB.lastIndex;return r<e.length&&(s=e.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?mze(c[0].x):Aze(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function v1(t,e){var r=typeof e,n;return e==null||r==="boolean"?lM(e):(r==="number"?CI:r==="string"?(n=Z2(e))?(e=n,WK):pze:e instanceof Z2?WK:e instanceof Date?fze:uze(e)?cze:Array.isArray(e)?dze:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?hze:CI)(t,e)}function cM(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function gze(t,e){e===void 0&&(e=t,t=v1);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function xze(t){return function(){return t}}function _I(t){return+t}var XK=[0,1];function uc(t){return t}function GF(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:xze(isNaN(e)?NaN:.5)}function vze(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function yze(t,e,r){var n=t[0],a=t[1],s=e[0],o=e[1];return a<n?(n=GF(a,n),s=r(o,s)):(n=GF(n,a),s=r(s,o)),function(l){return s(n(l))}}function bze(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=GF(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(l){var c=Ww(t,l,1,n)-1;return s[c](a[c](l))}}function Yw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function UP(){var t=XK,e=XK,r=v1,n,a,s,o=uc,l,c,u;function d(){var A=Math.min(t.length,e.length);return o!==uc&&(o=vze(t[0],t[A-1])),l=A>2?bze:yze,c=u=null,f}function f(A){return A==null||isNaN(A=+A)?s:(c||(c=l(t.map(n),e,r)))(n(o(A)))}return f.invert=function(A){return o(a((u||(u=l(e,t.map(n),CI)))(A)))},f.domain=function(A){return arguments.length?(t=Array.from(A,_I),d()):t.slice()},f.range=function(A){return arguments.length?(e=Array.from(A),d()):e.slice()},f.rangeRound=function(A){return e=Array.from(A),r=cM,d()},f.clamp=function(A){return arguments.length?(o=A?!0:uc,d()):o!==uc},f.interpolate=function(A){return arguments.length?(r=A,d()):r},f.unknown=function(A){return arguments.length?(s=A,f):s},function(A,h){return n=A,a=h,d()}}function uM(){return UP()(uc,uc)}function wze(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function EI(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Hv(t){return t=EI(Math.abs(t)),t?t[1]:NaN}function Nze(t,e){return function(r,n){for(var a=r.length,s=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Cze(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var _ze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ew(t){if(!(e=_ze.exec(t)))throw new Error("invalid format: "+t);var e;return new dM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ew.prototype=dM.prototype;function dM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}dM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Eze(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var SI;function Sze(t,e){var r=EI(t,e);if(!r)return SI=void 0,t.toPrecision(e);var n=r[0],a=r[1],s=a-(SI=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+EI(t,Math.max(0,e+s-1))[0]}function YK(t,e){var r=EI(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const JK={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:wze,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>YK(t*100,e),r:YK,s:Sze,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ZK(t){return t}var eq=Array.prototype.map,tq=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ize(t){var e=t.grouping===void 0||t.thousands===void 0?ZK:Nze(eq.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?ZK:Cze(eq.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,A){f=ew(f);var h=f.fill,m=f.align,p=f.sign,g=f.symbol,v=f.zero,y=f.width,b=f.comma,w=f.precision,P=f.trim,j=f.type;j==="n"?(b=!0,j="g"):JK[j]||(w===void 0&&(w=12),P=!0,j="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var _=(A&&A.prefix!==void 0?A.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():""),I=(g==="$"?n:/[%p]/.test(j)?o:"")+(A&&A.suffix!==void 0?A.suffix:""),E=JK[j],F=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function k(B){var R=_,Y=I,me,pe,he;if(j==="c")Y=E(B)+Y,B="";else{B=+B;var ge=B<0||1/B<0;if(B=isNaN(B)?c:E(Math.abs(B),w),P&&(B=Eze(B)),ge&&+B==0&&p!=="+"&&(ge=!1),R=(ge?p==="("?p:l:p==="-"||p==="("?"":p)+R,Y=(j==="s"&&!isNaN(B)&&SI!==void 0?tq[8+SI/3]:"")+Y+(ge&&p==="("?")":""),F){for(me=-1,pe=B.length;++me<pe;)if(he=B.charCodeAt(me),48>he||he>57){Y=(he===46?a+B.slice(me+1):B.slice(me))+Y,B=B.slice(0,me);break}}}b&&!v&&(B=e(B,1/0));var se=R.length+B.length+Y.length,je=se<y?new Array(y-se+1).join(h):"";switch(b&&v&&(B=e(je+B,je.length?y-Y.length:1/0),je=""),m){case"<":B=R+B+Y+je;break;case"=":B=R+je+B+Y;break;case"^":B=je.slice(0,se=je.length>>1)+R+B+Y+je.slice(se);break;default:B=je+R+B+Y;break}return s(B)}return k.toString=function(){return f+""},k}function d(f,A){var h=Math.max(-8,Math.min(8,Math.floor(Hv(A)/3)))*3,m=Math.pow(10,-h),p=u((f=ew(f),f.type="f",f),{suffix:tq[8+h/3]});return function(g){return p(m*g)}}return{format:u,formatPrefix:d}}var x_,fM,Hoe;jze({thousands:",",grouping:[3],currency:["$",""]});function jze(t){return x_=Ize(t),fM=x_.format,Hoe=x_.formatPrefix,x_}function Pze(t){return Math.max(0,-Hv(Math.abs(t)))}function Bze(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hv(e)/3)))*3-Hv(Math.abs(t)))}function Tze(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Hv(e)-Hv(t))+1}function $oe(t,e,r,n){var a=QF(t,e,r),s;switch(n=ew(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=Bze(a,o))&&(n.precision=s),Hoe(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=Tze(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=Pze(a))&&(n.precision=s-(n.type==="%")*2);break}}return fM(n)}function Tm(t){var e=t.domain;return t.ticks=function(r){var n=e();return LF(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return $oe(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=UF(o,l,r),u===c)return n[a]=o,n[s]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function Goe(){var t=uM();return t.copy=function(){return Yw(t,Goe())},Cd.apply(t,arguments),Tm(t)}function Koe(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,_I),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return Koe(t).unknown(e)},t=arguments.length?Array.from(t,_I):[0,1],Tm(r)}function qoe(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),t[r]=e.floor(a),t[n]=e.ceil(s),t}function rq(t){return Math.log(t)}function nq(t){return Math.exp(t)}function kze(t){return-Math.log(-t)}function Fze(t){return-Math.exp(-t)}function Oze(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Dze(t){return t===10?Oze:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Rze(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function aq(t){return(e,r)=>-t(-e,r)}function hM(t){const e=t(rq,nq),r=e.domain;let n=10,a,s;function o(){return a=Rze(n),s=Dze(n),r()[0]<0?(a=aq(a),s=aq(s),t(kze,Fze)):t(rq,nq),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let A=a(u),h=a(d),m,p;const g=l==null?10:+l;let v=[];if(!(n%1)&&h-A<g){if(A=Math.floor(A),h=Math.ceil(h),u>0){for(;A<=h;++A)for(m=1;m<n;++m)if(p=A<0?m/s(-A):m*s(A),!(p<u)){if(p>d)break;v.push(p)}}else for(;A<=h;++A)for(m=n-1;m>=1;--m)if(p=A>0?m/s(-A):m*s(A),!(p<u)){if(p>d)break;v.push(p)}v.length*2<g&&(v=LF(u,d,g))}else v=LF(A,h,Math.min(h-A,g)).map(s);return f?v.reverse():v},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=ew(c)).precision==null&&(c.trim=!0),c=fM(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(qoe(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function zoe(){const t=hM(UP()).domain([1,10]);return t.copy=()=>Yw(t,zoe()).base(t.base()),Cd.apply(t,arguments),t}function sq(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function iq(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function AM(t){var e=1,r=t(sq(e),iq(e));return r.constant=function(n){return arguments.length?t(sq(e=+n),iq(e)):e},Tm(r)}function Woe(){var t=AM(UP());return t.copy=function(){return Yw(t,Woe()).constant(t.constant())},Cd.apply(t,arguments)}function oq(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Mze(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Lze(t){return t<0?-t*t:t*t}function mM(t){var e=t(uc,uc),r=1;function n(){return r===1?t(uc,uc):r===.5?t(Mze,Lze):t(oq(r),oq(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Tm(e)}function pM(){var t=mM(UP());return t.copy=function(){return Yw(t,pM()).exponent(t.exponent())},Cd.apply(t,arguments),t}function Uze(){return pM.apply(null,arguments).exponent(.5)}function lq(t){return Math.sign(t)*t*t}function Qze(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Xoe(){var t=uM(),e=[0,1],r=!1,n;function a(s){var o=Qze(t(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return t.invert(lq(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,_I)).map(lq)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Xoe(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Cd.apply(a,arguments),Tm(a)}function Yoe(){var t=[],e=[],r=[],n;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=Gqe(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:e[Ww(r,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(am),a()},s.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Yoe().domain(t).range(e).unknown(n)},Cd.apply(s,arguments)}function Joe(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Ww(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Joe().domain([t,e]).range(a).unknown(s)},Cd.apply(Tm(o),arguments)}function Zoe(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[Ww(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Zoe().domain(t).range(e).unknown(r)},Cd.apply(a,arguments)}const cB=new Date,uB=new Date;function No(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},a.filter=s=>No(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),r&&(a.count=(s,o)=>(cB.setTime(+s),uB.setTime(+o),t(cB),t(uB),Math.floor(r(cB,uB))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const II=No(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);II.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?No(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):II);II.range;const Lh=1e3,ld=Lh*60,Uh=ld*60,dA=Uh*24,gM=dA*7,cq=dA*30,dB=dA*365,Np=No(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Lh)},(t,e)=>(e-t)/Lh,t=>t.getUTCSeconds());Np.range;const xM=No(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Lh)},(t,e)=>{t.setTime(+t+e*ld)},(t,e)=>(e-t)/ld,t=>t.getMinutes());xM.range;const vM=No(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ld)},(t,e)=>(e-t)/ld,t=>t.getUTCMinutes());vM.range;const yM=No(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Lh-t.getMinutes()*ld)},(t,e)=>{t.setTime(+t+e*Uh)},(t,e)=>(e-t)/Uh,t=>t.getHours());yM.range;const bM=No(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Uh)},(t,e)=>(e-t)/Uh,t=>t.getUTCHours());bM.range;const Jw=No(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ld)/dA,t=>t.getDate()-1);Jw.range;const QP=No(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/dA,t=>t.getUTCDate()-1);QP.range;const ele=No(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/dA,t=>Math.floor(t/dA));ele.range;function Rg(t){return No(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ld)/gM)}const VP=Rg(0),jI=Rg(1),Vze=Rg(2),Hze=Rg(3),$v=Rg(4),$ze=Rg(5),Gze=Rg(6);VP.range;jI.range;Vze.range;Hze.range;$v.range;$ze.range;Gze.range;function Mg(t){return No(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/gM)}const HP=Mg(0),PI=Mg(1),Kze=Mg(2),qze=Mg(3),Gv=Mg(4),zze=Mg(5),Wze=Mg(6);HP.range;PI.range;Kze.range;qze.range;Gv.range;zze.range;Wze.range;const wM=No(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());wM.range;const NM=No(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());NM.range;const fA=No(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());fA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:No(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});fA.range;const hA=No(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());hA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:No(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});hA.range;function tle(t,e,r,n,a,s){const o=[[Np,1,Lh],[Np,5,5*Lh],[Np,15,15*Lh],[Np,30,30*Lh],[s,1,ld],[s,5,5*ld],[s,15,15*ld],[s,30,30*ld],[a,1,Uh],[a,3,3*Uh],[a,6,6*Uh],[a,12,12*Uh],[n,1,dA],[n,2,2*dA],[r,1,gM],[e,1,cq],[e,3,3*cq],[t,1,dB]];function l(u,d,f){const A=d<u;A&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),m=h?h.range(u,+d+1):[];return A?m.reverse():m}function c(u,d,f){const A=Math.abs(d-u)/f,h=aM(([,,g])=>g).right(o,A);if(h===o.length)return t.every(QF(u/dB,d/dB,f));if(h===0)return II.every(Math.max(QF(u,d,f),1));const[m,p]=o[A/o[h-1][2]<o[h][2]/A?h-1:h];return m.every(p)}return[l,c]}const[Xze,Yze]=tle(hA,NM,HP,ele,bM,vM),[Jze,Zze]=tle(fA,wM,VP,Jw,yM,xM);function fB(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function hB(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function wy(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function eWe(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Ny(a),d=Cy(a),f=Ny(s),A=Cy(s),h=Ny(o),m=Cy(o),p=Ny(l),g=Cy(l),v=Ny(c),y=Cy(c),b={a:he,A:ge,b:se,B:je,c:null,d:mq,e:mq,f:NWe,g:kWe,G:OWe,H:yWe,I:bWe,j:wWe,L:rle,m:CWe,M:_We,p:Te,q:D,Q:xq,s:vq,S:EWe,u:SWe,U:IWe,V:jWe,w:PWe,W:BWe,x:null,X:null,y:TWe,Y:FWe,Z:DWe,"%":gq},w={a:K,A:z,b:Q,B:J,c:null,d:pq,e:pq,f:UWe,g:XWe,G:JWe,H:RWe,I:MWe,j:LWe,L:ale,m:QWe,M:VWe,p:ee,q:M,Q:xq,s:vq,S:HWe,u:$We,U:GWe,V:KWe,w:qWe,W:zWe,x:null,X:null,y:WWe,Y:YWe,Z:ZWe,"%":gq},P={a:F,A:k,b:B,B:R,c:Y,d:hq,e:hq,f:pWe,g:fq,G:dq,H:Aq,I:Aq,j:fWe,L:mWe,m:dWe,M:hWe,p:E,q:uWe,Q:xWe,s:vWe,S:AWe,u:sWe,U:iWe,V:oWe,w:aWe,W:lWe,x:me,X:pe,y:fq,Y:dq,Z:cWe,"%":gWe};b.x=j(r,b),b.X=j(n,b),b.c=j(e,b),w.x=j(r,w),w.X=j(n,w),w.c=j(e,w);function j(G,ne){return function(ve){var V=[],qe=-1,ie=0,re=G.length,Fe,de,we;for(ve instanceof Date||(ve=new Date(+ve));++qe<re;)G.charCodeAt(qe)===37&&(V.push(G.slice(ie,qe)),(de=uq[Fe=G.charAt(++qe)])!=null?Fe=G.charAt(++qe):de=Fe==="e"?" ":"0",(we=ne[Fe])&&(Fe=we(ve,de)),V.push(Fe),ie=qe+1);return V.push(G.slice(ie,qe)),V.join("")}}function _(G,ne){return function(ve){var V=wy(1900,void 0,1),qe=I(V,G,ve+="",0),ie,re;if(qe!=ve.length)return null;if("Q"in V)return new Date(V.Q);if("s"in V)return new Date(V.s*1e3+("L"in V?V.L:0));if(ne&&!("Z"in V)&&(V.Z=0),"p"in V&&(V.H=V.H%12+V.p*12),V.m===void 0&&(V.m="q"in V?V.q:0),"V"in V){if(V.V<1||V.V>53)return null;"w"in V||(V.w=1),"Z"in V?(ie=hB(wy(V.y,0,1)),re=ie.getUTCDay(),ie=re>4||re===0?PI.ceil(ie):PI(ie),ie=QP.offset(ie,(V.V-1)*7),V.y=ie.getUTCFullYear(),V.m=ie.getUTCMonth(),V.d=ie.getUTCDate()+(V.w+6)%7):(ie=fB(wy(V.y,0,1)),re=ie.getDay(),ie=re>4||re===0?jI.ceil(ie):jI(ie),ie=Jw.offset(ie,(V.V-1)*7),V.y=ie.getFullYear(),V.m=ie.getMonth(),V.d=ie.getDate()+(V.w+6)%7)}else("W"in V||"U"in V)&&("w"in V||(V.w="u"in V?V.u%7:"W"in V?1:0),re="Z"in V?hB(wy(V.y,0,1)).getUTCDay():fB(wy(V.y,0,1)).getDay(),V.m=0,V.d="W"in V?(V.w+6)%7+V.W*7-(re+5)%7:V.w+V.U*7-(re+6)%7);return"Z"in V?(V.H+=V.Z/100|0,V.M+=V.Z%100,hB(V)):fB(V)}}function I(G,ne,ve,V){for(var qe=0,ie=ne.length,re=ve.length,Fe,de;qe<ie;){if(V>=re)return-1;if(Fe=ne.charCodeAt(qe++),Fe===37){if(Fe=ne.charAt(qe++),de=P[Fe in uq?ne.charAt(qe++):Fe],!de||(V=de(G,ve,V))<0)return-1}else if(Fe!=ve.charCodeAt(V++))return-1}return V}function E(G,ne,ve){var V=u.exec(ne.slice(ve));return V?(G.p=d.get(V[0].toLowerCase()),ve+V[0].length):-1}function F(G,ne,ve){var V=h.exec(ne.slice(ve));return V?(G.w=m.get(V[0].toLowerCase()),ve+V[0].length):-1}function k(G,ne,ve){var V=f.exec(ne.slice(ve));return V?(G.w=A.get(V[0].toLowerCase()),ve+V[0].length):-1}function B(G,ne,ve){var V=v.exec(ne.slice(ve));return V?(G.m=y.get(V[0].toLowerCase()),ve+V[0].length):-1}function R(G,ne,ve){var V=p.exec(ne.slice(ve));return V?(G.m=g.get(V[0].toLowerCase()),ve+V[0].length):-1}function Y(G,ne,ve){return I(G,e,ne,ve)}function me(G,ne,ve){return I(G,r,ne,ve)}function pe(G,ne,ve){return I(G,n,ne,ve)}function he(G){return o[G.getDay()]}function ge(G){return s[G.getDay()]}function se(G){return c[G.getMonth()]}function je(G){return l[G.getMonth()]}function Te(G){return a[+(G.getHours()>=12)]}function D(G){return 1+~~(G.getMonth()/3)}function K(G){return o[G.getUTCDay()]}function z(G){return s[G.getUTCDay()]}function Q(G){return c[G.getUTCMonth()]}function J(G){return l[G.getUTCMonth()]}function ee(G){return a[+(G.getUTCHours()>=12)]}function M(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var ne=j(G+="",b);return ne.toString=function(){return G},ne},parse:function(G){var ne=_(G+="",!1);return ne.toString=function(){return G},ne},utcFormat:function(G){var ne=j(G+="",w);return ne.toString=function(){return G},ne},utcParse:function(G){var ne=_(G+="",!0);return ne.toString=function(){return G},ne}}}var uq={"-":"",_:" ",0:"0"},Ko=/^\s*\d+/,tWe=/^%/,rWe=/[\\^$*+?|[\]().{}]/g;function va(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function nWe(t){return t.replace(rWe,"\\$&")}function Ny(t){return new RegExp("^(?:"+t.map(nWe).join("|")+")","i")}function Cy(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function aWe(t,e,r){var n=Ko.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function sWe(t,e,r){var n=Ko.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function iWe(t,e,r){var n=Ko.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function oWe(t,e,r){var n=Ko.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function lWe(t,e,r){var n=Ko.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function dq(t,e,r){var n=Ko.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function fq(t,e,r){var n=Ko.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function cWe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function uWe(t,e,r){var n=Ko.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function dWe(t,e,r){var n=Ko.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function hq(t,e,r){var n=Ko.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function fWe(t,e,r){var n=Ko.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function Aq(t,e,r){var n=Ko.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function hWe(t,e,r){var n=Ko.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function AWe(t,e,r){var n=Ko.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function mWe(t,e,r){var n=Ko.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function pWe(t,e,r){var n=Ko.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function gWe(t,e,r){var n=tWe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function xWe(t,e,r){var n=Ko.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function vWe(t,e,r){var n=Ko.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function mq(t,e){return va(t.getDate(),e,2)}function yWe(t,e){return va(t.getHours(),e,2)}function bWe(t,e){return va(t.getHours()%12||12,e,2)}function wWe(t,e){return va(1+Jw.count(fA(t),t),e,3)}function rle(t,e){return va(t.getMilliseconds(),e,3)}function NWe(t,e){return rle(t,e)+"000"}function CWe(t,e){return va(t.getMonth()+1,e,2)}function _We(t,e){return va(t.getMinutes(),e,2)}function EWe(t,e){return va(t.getSeconds(),e,2)}function SWe(t){var e=t.getDay();return e===0?7:e}function IWe(t,e){return va(VP.count(fA(t)-1,t),e,2)}function nle(t){var e=t.getDay();return e>=4||e===0?$v(t):$v.ceil(t)}function jWe(t,e){return t=nle(t),va($v.count(fA(t),t)+(fA(t).getDay()===4),e,2)}function PWe(t){return t.getDay()}function BWe(t,e){return va(jI.count(fA(t)-1,t),e,2)}function TWe(t,e){return va(t.getFullYear()%100,e,2)}function kWe(t,e){return t=nle(t),va(t.getFullYear()%100,e,2)}function FWe(t,e){return va(t.getFullYear()%1e4,e,4)}function OWe(t,e){var r=t.getDay();return t=r>=4||r===0?$v(t):$v.ceil(t),va(t.getFullYear()%1e4,e,4)}function DWe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+va(e/60|0,"0",2)+va(e%60,"0",2)}function pq(t,e){return va(t.getUTCDate(),e,2)}function RWe(t,e){return va(t.getUTCHours(),e,2)}function MWe(t,e){return va(t.getUTCHours()%12||12,e,2)}function LWe(t,e){return va(1+QP.count(hA(t),t),e,3)}function ale(t,e){return va(t.getUTCMilliseconds(),e,3)}function UWe(t,e){return ale(t,e)+"000"}function QWe(t,e){return va(t.getUTCMonth()+1,e,2)}function VWe(t,e){return va(t.getUTCMinutes(),e,2)}function HWe(t,e){return va(t.getUTCSeconds(),e,2)}function $We(t){var e=t.getUTCDay();return e===0?7:e}function GWe(t,e){return va(HP.count(hA(t)-1,t),e,2)}function sle(t){var e=t.getUTCDay();return e>=4||e===0?Gv(t):Gv.ceil(t)}function KWe(t,e){return t=sle(t),va(Gv.count(hA(t),t)+(hA(t).getUTCDay()===4),e,2)}function qWe(t){return t.getUTCDay()}function zWe(t,e){return va(PI.count(hA(t)-1,t),e,2)}function WWe(t,e){return va(t.getUTCFullYear()%100,e,2)}function XWe(t,e){return t=sle(t),va(t.getUTCFullYear()%100,e,2)}function YWe(t,e){return va(t.getUTCFullYear()%1e4,e,4)}function JWe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Gv(t):Gv.ceil(t),va(t.getUTCFullYear()%1e4,e,4)}function ZWe(){return"+0000"}function gq(){return"%"}function xq(t){return+t}function vq(t){return Math.floor(+t/1e3)}var px,ile,ole;eXe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function eXe(t){return px=eWe(t),ile=px.format,px.parse,ole=px.utcFormat,px.utcParse,px}function tXe(t){return new Date(t)}function rXe(t){return t instanceof Date?+t:+new Date(+t)}function CM(t,e,r,n,a,s,o,l,c,u){var d=uM(),f=d.invert,A=d.domain,h=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),y=u("%b %d"),b=u("%B"),w=u("%Y");function P(j){return(c(j)<j?h:l(j)<j?m:o(j)<j?p:s(j)<j?g:n(j)<j?a(j)<j?v:y:r(j)<j?b:w)(j)}return d.invert=function(j){return new Date(f(j))},d.domain=function(j){return arguments.length?A(Array.from(j,rXe)):A().map(tXe)},d.ticks=function(j){var _=A();return t(_[0],_[_.length-1],j??10)},d.tickFormat=function(j,_){return _==null?P:u(_)},d.nice=function(j){var _=A();return(!j||typeof j.range!="function")&&(j=e(_[0],_[_.length-1],j??10)),j?A(qoe(_,j)):d},d.copy=function(){return Yw(d,CM(t,e,r,n,a,s,o,l,c,u))},d}function nXe(){return Cd.apply(CM(Jze,Zze,fA,wM,VP,Jw,yM,xM,Np,ile).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function aXe(){return Cd.apply(CM(Xze,Yze,hA,NM,HP,QP,bM,vM,Np,ole).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $P(){var t=0,e=1,r,n,a,s,o=uc,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(A){var h,m;return arguments.length?([h,m]=A,o=f(h,m),u):[o(0),o(1)]}}return u.range=d(v1),u.rangeRound=d(cM),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),u}}function km(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function lle(){var t=Tm($P()(uc));return t.copy=function(){return km(t,lle())},IA.apply(t,arguments)}function cle(){var t=hM($P()).domain([1,10]);return t.copy=function(){return km(t,cle()).base(t.base())},IA.apply(t,arguments)}function ule(){var t=AM($P());return t.copy=function(){return km(t,ule()).constant(t.constant())},IA.apply(t,arguments)}function _M(){var t=mM($P());return t.copy=function(){return km(t,_M()).exponent(t.exponent())},IA.apply(t,arguments)}function sXe(){return _M.apply(null,arguments).exponent(.5)}function dle(){var t=[],e=uc;function r(n){if(n!=null&&!isNaN(n=+n))return e((Ww(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(am),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>$qe(t,s/n))},r.copy=function(){return dle(e).domain(t)},IA.apply(r,arguments)}function GP(){var t=0,e=.5,r=1,n=1,a,s,o,l,c,u=uc,d,f=!1,A;function h(p){return isNaN(p=+p)?A:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e,r]=p,a=d(t=+t),s=d(e=+e),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,h):[t,e,r]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(u=p,h):u};function m(p){return function(g){var v,y,b;return arguments.length?([v,y,b]=g,u=gze(p,[v,y,b]),h):[u(0),u(.5),u(1)]}}return h.range=m(v1),h.rangeRound=m(cM),h.unknown=function(p){return arguments.length?(A=p,h):A},function(p){return d=p,a=p(t),s=p(e),o=p(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,h}}function fle(){var t=Tm(GP()(uc));return t.copy=function(){return km(t,fle())},IA.apply(t,arguments)}function hle(){var t=hM(GP()).domain([.1,1,10]);return t.copy=function(){return km(t,hle()).base(t.base())},IA.apply(t,arguments)}function Ale(){var t=AM(GP());return t.copy=function(){return km(t,Ale()).constant(t.constant())},IA.apply(t,arguments)}function EM(){var t=mM(GP());return t.copy=function(){return km(t,EM()).exponent(t.exponent())},IA.apply(t,arguments)}function iXe(){return EM.apply(null,arguments).exponent(.5)}const Yy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:iM,scaleDiverging:fle,scaleDivergingLog:hle,scaleDivergingPow:EM,scaleDivergingSqrt:iXe,scaleDivergingSymlog:Ale,scaleIdentity:Koe,scaleImplicit:VF,scaleLinear:Goe,scaleLog:zoe,scaleOrdinal:sM,scalePoint:qqe,scalePow:pM,scaleQuantile:Yoe,scaleQuantize:Joe,scaleRadial:Xoe,scaleSequential:lle,scaleSequentialLog:cle,scaleSequentialPow:_M,scaleSequentialQuantile:dle,scaleSequentialSqrt:sXe,scaleSequentialSymlog:ule,scaleSqrt:Uze,scaleSymlog:Woe,scaleThreshold:Zoe,scaleTime:nXe,scaleUtc:aXe,tickFormat:$oe},Symbol.toStringTag,{value:"Module"}));var jA=t=>t.chartData,KP=qt([jA],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),mle=(t,e,r,n)=>n?KP(t):jA(t),oXe=(t,e,r)=>r?KP(t):jA(t);function bm(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(ai(e)&&ai(r))return!0}return!1}function yq(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function ple(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(ai(r))a=r;else if(typeof r=="function")return;if(ai(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(bm(o))return o}}function lXe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(bm(n))return yq(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,o,l;if(a==="auto")e!=null&&(o=Math.min(...e));else if(fn(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&RG.test(a)){var c=RG.exec(a);if(c==null||c[1]==null||e==null)o=void 0;else{var u=+c[1];o=e[0]-u}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(fn(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&MG.test(s)){var d=MG.exec(s);if(d==null||d[1]==null||e==null)l=void 0;else{var f=+d[1];l=e[1]+f}}else l=e==null?void 0:e[1];var A=[o,l];if(bm(A))return e==null?A:yq(A,e,r)}}}var y1=1e9,cXe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},IM,Fs=!0,yd="[DecimalError] ",Up=yd+"Invalid argument: ",SM=yd+"Exponent out of range: ",b1=Math.floor,ip=Math.pow,uXe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fu,Oo=1e7,xs=7,gle=9007199254740991,BI=b1(gle/xs),qr={};qr.absoluteValue=qr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};qr.comparedTo=qr.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};qr.decimalPlaces=qr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*xs;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};qr.dividedBy=qr.div=function(t){return Yh(this,new this.constructor(t))};qr.dividedToIntegerBy=qr.idiv=function(t){var e=this,r=e.constructor;return ns(Yh(e,new r(t),0,1),r.precision)};qr.equals=qr.eq=function(t){return!this.cmp(t)};qr.exponent=function(){return Wi(this)};qr.greaterThan=qr.gt=function(t){return this.cmp(t)>0};qr.greaterThanOrEqualTo=qr.gte=function(t){return this.cmp(t)>=0};qr.isInteger=qr.isint=function(){return this.e>this.d.length-2};qr.isNegative=qr.isneg=function(){return this.s<0};qr.isPositive=qr.ispos=function(){return this.s>0};qr.isZero=function(){return this.s===0};qr.lessThan=qr.lt=function(t){return this.cmp(t)<0};qr.lessThanOrEqualTo=qr.lte=function(t){return this.cmp(t)<1};qr.logarithm=qr.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(fu))throw Error(yd+"NaN");if(r.s<1)throw Error(yd+(r.s?"NaN":"-Infinity"));return r.eq(fu)?new n(0):(Fs=!1,e=Yh(tw(r,s),tw(t,s),s),Fs=!0,ns(e,a))};qr.minus=qr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?yle(e,t):xle(e,(t.s=-t.s,t))};qr.modulo=qr.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(yd+"NaN");return r.s?(Fs=!1,e=Yh(r,t,0,1).times(t),Fs=!0,r.minus(e)):ns(new n(r),a)};qr.naturalExponential=qr.exp=function(){return vle(this)};qr.naturalLogarithm=qr.ln=function(){return tw(this)};qr.negated=qr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};qr.plus=qr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?xle(e,t):yle(e,(t.s=-t.s,t))};qr.precision=qr.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Up+t);if(e=Wi(a)+1,n=a.d.length-1,r=n*xs+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};qr.squareRoot=qr.sqrt=function(){var t,e,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(yd+"NaN")}for(t=Wi(l),Fs=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=Uf(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=b1((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(Yh(l,s,o+2)).times(.5),Uf(s.d).slice(0,o)===(e=Uf(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(ns(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;o+=4}return Fs=!0,ns(n,r)};qr.times=qr.mul=function(t){var e,r,n,a,s,o,l,c,u,d=this,f=d.constructor,A=d.d,h=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=A.length,u=h.length,c<u&&(s=A,A=h,h=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+h[n]*A[a-n-1]+e,s[a--]=l%Oo|0,e=l/Oo|0;s[a]=(s[a]+e)%Oo|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Fs?ns(t,f.precision):t};qr.toDecimalPlaces=qr.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Yf(t,0,y1),e===void 0?e=n.rounding:Yf(e,0,8),ns(r,t+Wi(r)+1,e))};qr.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=pg(n,!0):(Yf(t,0,y1),e===void 0?e=a.rounding:Yf(e,0,8),n=ns(new a(n),t+1,e),r=pg(n,!0,t+1)),r};qr.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?pg(a):(Yf(t,0,y1),e===void 0?e=s.rounding:Yf(e,0,8),n=ns(new s(a),t+Wi(a)+1,e),r=pg(n.abs(),!1,t+Wi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};qr.toInteger=qr.toint=function(){var t=this,e=t.constructor;return ns(new e(t),Wi(t)+1,e.rounding)};qr.toNumber=function(){return+this};qr.toPower=qr.pow=function(t){var e,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(fu);if(l=new c(l),!l.s){if(t.s<1)throw Error(yd+"Infinity");return l}if(l.eq(fu))return l;if(n=c.precision,t.eq(fu))return ns(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=l.s,o){if((r=d<0?-d:d)<=gle){for(a=new c(fu),e=Math.ceil(n/xs+4),Fs=!1;r%2&&(a=a.times(l),wq(a.d,e)),r=b1(r/2),r!==0;)l=l.times(l),wq(l.d,e);return Fs=!0,t.s<0?new c(fu).div(a):ns(a,n)}}else if(s<0)throw Error(yd+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Fs=!1,a=t.times(tw(l,n+u)),Fs=!0,a=vle(a),a.s=s,a};qr.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=Wi(a),n=pg(a,r<=s.toExpNeg||r>=s.toExpPos)):(Yf(t,1,y1),e===void 0?e=s.rounding:Yf(e,0,8),a=ns(new s(a),t,e),r=Wi(a),n=pg(a,t<=r||r<=s.toExpNeg,t)),n};qr.toSignificantDigits=qr.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Yf(t,1,y1),e===void 0?e=n.rounding:Yf(e,0,8)),ns(new n(r),t,e)};qr.toString=qr.valueOf=qr.val=qr.toJSON=qr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Wi(t),r=t.constructor;return pg(t,e<=r.toExpNeg||e>=r.toExpPos)};function xle(t,e){var r,n,a,s,o,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Fs?ns(e,f):e;if(c=t.d,u=e.d,o=t.e,a=e.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/xs),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Oo|0,c[s]%=Oo;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,Fs?ns(e,f):e}function Yf(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Up+t)}function Uf(t){var e,r,n,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)n=t[e]+"",r=xs-n.length,r&&(s+=x0(r)),s+=n;o=t[e],n=o+"",r=xs-n.length,r&&(s+=x0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Yh=function(){function t(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%Oo|0,o=s/Oo|0;return o&&n.unshift(o),n}function e(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*Oo+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,f,A,h,m,p,g,v,y,b,w,P,j,_,I,E=n.constructor,F=n.s==a.s?1:-1,k=n.d,B=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(yd+"Division by zero");for(c=n.e-a.e,_=B.length,P=k.length,h=new E(F),m=h.d=[],u=0;B[u]==(k[u]||0);)++u;if(B[u]>(k[u]||0)&&--c,s==null?y=s=E.precision:o?y=s+(Wi(n)-Wi(a))+1:y=s,y<0)return new E(0);if(y=y/xs+2|0,u=0,_==1)for(d=0,B=B[0],y++;(u<P||d)&&y--;u++)b=d*Oo+(k[u]||0),m[u]=b/B|0,d=b%B|0;else{for(d=Oo/(B[0]+1)|0,d>1&&(B=t(B,d),k=t(k,d),_=B.length,P=k.length),w=_,p=k.slice(0,_),g=p.length;g<_;)p[g++]=0;I=B.slice(),I.unshift(0),j=B[0],B[1]>=Oo/2&&++j;do d=0,l=e(B,p,_,g),l<0?(v=p[0],_!=g&&(v=v*Oo+(p[1]||0)),d=v/j|0,d>1?(d>=Oo&&(d=Oo-1),f=t(B,d),A=f.length,g=p.length,l=e(f,p,A,g),l==1&&(d--,r(f,_<A?I:B,A))):(d==0&&(l=d=1),f=B.slice()),A=f.length,A<g&&f.unshift(0),r(p,f,g),l==-1&&(g=p.length,l=e(B,p,_,g),l<1&&(d++,r(p,_<g?I:B,g))),g=p.length):l===0&&(d++,p=[0]),m[u++]=d,l&&p[0]?p[g++]=k[w]||0:(p=[k[w]],g=1);while((w++<P||p[0]!==void 0)&&y--)}return m[0]||m.shift(),h.e=c,ns(h,o?s+Wi(h)+1:s)}}();function vle(t,e){var r,n,a,s,o,l,c=0,u=0,d=t.constructor,f=d.precision;if(Wi(t)>16)throw Error(SM+Wi(t));if(!t.s)return new d(fu);for(Fs=!1,l=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(ip(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(fu),d.precision=l;;){if(a=ns(a.times(t),l),r=r.times(++c),o=s.plus(Yh(a,r,l)),Uf(o.d).slice(0,l)===Uf(s.d).slice(0,l)){for(;u--;)s=ns(s.times(s),l);return d.precision=f,e==null?(Fs=!0,ns(s,f)):s}s=o}}function Wi(t){for(var e=t.e*xs,r=t.d[0];r>=10;r/=10)e++;return e}function AB(t,e,r){if(e>t.LN10.sd())throw Fs=!0,r&&(t.precision=r),Error(yd+"LN10 precision limit exceeded");return ns(new t(t.LN10),e)}function x0(t){for(var e="";t--;)e+="0";return e}function tw(t,e){var r,n,a,s,o,l,c,u,d,f=1,A=10,h=t,m=h.d,p=h.constructor,g=p.precision;if(h.s<1)throw Error(yd+(h.s?"NaN":"-Infinity"));if(h.eq(fu))return new p(0);if(e==null?(Fs=!1,u=g):u=e,h.eq(10))return e==null&&(Fs=!0),AB(p,u);if(u+=A,p.precision=u,r=Uf(m),n=r.charAt(0),s=Wi(h),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(t),r=Uf(h.d),n=r.charAt(0),f++;s=Wi(h),n>1?(h=new p("0."+r),s++):h=new p(n+"."+r.slice(1))}else return c=AB(p,u+2,g).times(s+""),h=tw(new p(n+"."+r.slice(1)),u-A).plus(c),p.precision=g,e==null?(Fs=!0,ns(h,g)):h;for(l=o=h=Yh(h.minus(fu),h.plus(fu),u),d=ns(h.times(h),u),a=3;;){if(o=ns(o.times(d),u),c=l.plus(Yh(o,new p(a),u)),Uf(c.d).slice(0,u)===Uf(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(AB(p,u+2,g).times(s+""))),l=Yh(l,new p(f),u),p.precision=g,e==null?(Fs=!0,ns(l,g)):l;l=c,a+=2}}function bq(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=b1(r/xs),t.d=[],n=(r+1)%xs,r<0&&(n+=xs),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=xs;n<a;)t.d.push(+e.slice(n,n+=xs));e=e.slice(n),n=xs-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Fs&&(t.e>BI||t.e<-BI))throw Error(SM+r)}else t.s=0,t.e=0,t.d=[0];return t}function ns(t,e,r){var n,a,s,o,l,c,u,d,f=t.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=xs,a=e,u=f[d=0];else{if(d=Math.ceil((n+1)/xs),s=f.length,d>=s)return t;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=xs,a=n-xs+o}if(r!==void 0&&(s=ip(10,o-a-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/ip(10,o-a):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(s=Wi(t),f.length=1,e=e-s-1,f[0]=ip(10,(xs-e%xs)%xs),t.e=b1(-e/xs)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=ip(10,xs-n),f[d]=a>0?(u/ip(10,o-a)%ip(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Oo&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=Oo)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Fs&&(t.e>BI||t.e<-BI))throw Error(SM+Wi(t));return t}function yle(t,e){var r,n,a,s,o,l,c,u,d,f,A=t.constructor,h=A.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new A(t),Fs?ns(e,h):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(h/xs),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Oo-1;--c[s],c[a]+=Oo}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Fs?ns(e,h):e):new A(0)}function pg(t,e,r){var n,a=Wi(t),s=Uf(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+x0(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+x0(-a-1)+s,r&&(n=r-o)>0&&(s+=x0(n))):a>=o?(s+=x0(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+x0(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=x0(n))),t.s<0?"-"+s:s}function wq(t,e){if(t.length>e)return t.length=e,!0}function ble(t){var e,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Up+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return bq(o,s.toString())}else if(typeof s!="string")throw Error(Up+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,uXe.test(s))bq(o,s);else throw Error(Up+s)}if(a.prototype=qr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=ble,a.config=a.set=dXe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function dXe(t){if(!t||typeof t!="object")throw Error(yd+"Object expected");var e,r,n,a=["precision",1,y1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(b1(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Up+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Up+r+": "+n);return this}var IM=ble(cXe);fu=new IM(1);const Ua=IM;var fXe=t=>t,wle={},Nle=t=>t===wle,Nq=t=>function e(){return arguments.length===0||arguments.length===1&&Nle(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Cle=(t,e)=>t===1?e:Nq(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==wle).length;return s>=t?e(...n):Cle(t-s,Nq(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>Nle(d)?l.shift():d);return e(...u,...l)}))}),hXe=t=>Cle(t.length,t),KF=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},AXe=hXe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),mXe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return fXe;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}};function _le(t){var e;return t===0?e=1:e=Math.floor(new Ua(t).abs().log(10).toNumber())+1,e}function Ele(t,e,r){for(var n=new Ua(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var Sle=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},Ile=(t,e,r)=>{if(t.lte(0))return new Ua(0);var n=_le(t.toNumber()),a=new Ua(10).pow(n),s=t.div(a),o=n!==1?.05:.1,l=new Ua(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return e?new Ua(c.toNumber()):new Ua(Math.ceil(c.toNumber()))},pXe=(t,e,r)=>{var n=new Ua(1),a=new Ua(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new Ua(10).pow(_le(t)-1),a=new Ua(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new Ua(Math.floor(t)))}else t===0?a=new Ua(Math.floor((e-1)/2)):r||(a=new Ua(Math.floor(t)));var o=Math.floor((e-1)/2),l=mXe(AXe(c=>a.add(new Ua(c-o).mul(n)).toNumber()),KF);return l(0,e)},jle=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new Ua(0),tickMin:new Ua(0),tickMax:new Ua(0)};var o=Ile(new Ua(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new Ua(0):(l=new Ua(e).add(r).div(2),l=l.sub(new Ua(l).mod(o)));var c=Math.ceil(l.sub(e).div(o).toNumber()),u=Math.ceil(new Ua(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?jle(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new Ua(c).mul(o)),tickMax:l.add(new Ua(u).mul(o))})},gXe=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[l,c]=Sle([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...KF(0,a-1).map(()=>1/0)]:[...KF(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return pXe(l,a,s);var{step:d,tickMin:f,tickMax:A}=jle(l,c,o,s,0),h=Ele(f,A.add(new Ua(.1).mul(d)),d);return r>n?h.reverse():h},xXe=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=Sle([n,a]);if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(r,2),u=Ile(new Ua(l).sub(o).div(c-1),s,0),d=[...Ele(new Ua(o),new Ua(l),u),l];return s===!1&&(d=d.map(f=>Math.round(f))),n>a?d.reverse():d},Ple=t=>t.rootProps.maxBarSize,vXe=t=>t.rootProps.barGap,Ble=t=>t.rootProps.barCategoryGap,yXe=t=>t.rootProps.barSize,Zw=t=>t.rootProps.stackOffset,Tle=t=>t.rootProps.reverseStackOrder,jM=t=>t.options.chartName,PM=t=>t.rootProps.syncId,kle=t=>t.rootProps.syncMethod,BM=t=>t.options.eventEmitter,Ql={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},jh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ou={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},qP=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},bXe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:jh.angleAxisId,includeHidden:!1,name:void 0,reversed:jh.reversed,scale:jh.scale,tick:jh.tick,tickCount:void 0,ticks:void 0,type:jh.type,unit:void 0},wXe={allowDataOverflow:ou.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ou.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ou.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ou.scale,tick:ou.tick,tickCount:ou.tickCount,ticks:void 0,type:ou.type,unit:void 0},NXe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:jh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:jh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:jh.scale,tick:jh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},CXe={allowDataOverflow:ou.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ou.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ou.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ou.scale,tick:ou.tick,tickCount:ou.tickCount,ticks:void 0,type:"category",unit:void 0},TM=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?NXe:bXe,kM=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?CXe:wXe,zP=t=>t.polarOptions,FM=qt([EA,SA,wo],Ioe),Fle=qt([zP,FM],(t,e)=>{if(t!=null)return Hl(t.innerRadius,e,0)}),Ole=qt([zP,FM],(t,e)=>{if(t!=null)return Hl(t.outerRadius,e,e*.8)}),_Xe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},Dle=qt([zP],_Xe);qt([TM,Dle],qP);var Rle=qt([FM,Fle,Ole],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});qt([kM,Rle],qP);var Mle=qt([ya,zP,Fle,Ole,EA,SA],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=e;return{cx:Hl(o,a,a/2),cy:Hl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Rs=(t,e)=>e,eN=(t,e,r)=>r;function OM(t){return t==null?void 0:t.id}function Lle(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,o=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=OM(l);u.forEach((f,A)=>{var h=s==null||a?A:String(ws(f,s,null)),m=ws(f,l.dataKey,0),p;o.has(h)?p=o.get(h):p={},Object.assign(p,{[d]:m}),o.set(h,p)})}}),Array.from(o.values())}function WP(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var XP=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function YP(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function EXe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var Co=t=>{var e=ya(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},w1=t=>t.tooltip.settings.axisId;function Cq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function TI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cq(Object(r),!0).forEach(function(n){SXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SXe(t,e,r){return(e=IXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IXe(t){var e=jXe(t,"string");return typeof e=="symbol"?e:e+""}function jXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qF=[0,"auto"],Po={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Ule=(t,e)=>t.cartesianAxis.xAxis[e],PA=(t,e)=>{var r=Ule(t,e);return r??Po},Bo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:qF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Kw},Qle=(t,e)=>t.cartesianAxis.yAxis[e],BA=(t,e)=>{var r=Qle(t,e);return r??Bo},PXe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},DM=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??PXe},si=(t,e,r)=>{switch(e){case"xAxis":return PA(t,r);case"yAxis":return BA(t,r);case"zAxis":return DM(t,r);case"angleAxis":return TM(t,r);case"radiusAxis":return kM(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},BXe=(t,e,r)=>{switch(e){case"xAxis":return PA(t,r);case"yAxis":return BA(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},tN=(t,e,r)=>{switch(e){case"xAxis":return PA(t,r);case"yAxis":return BA(t,r);case"angleAxis":return TM(t,r);case"radiusAxis":return kM(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Vle=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function RM(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var MM=t=>t.graphicalItems.cartesianItems,TXe=qt([Rs,eN],RM),LM=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),rN=qt([MM,si,TXe],LM,{memoizeOptions:{resultEqualityCheck:YP}}),Hle=qt([rN],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(WP)),$le=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),kXe=qt([rN],$le),UM=t=>t.map(e=>e.data).filter(Boolean).flat(1),FXe=qt([rN],UM,{memoizeOptions:{resultEqualityCheck:YP}}),QM=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},VM=qt([FXe,mle],QM),HM=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:ws(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:ws(a,n)}))):t.map(n=>({value:n})),JP=qt([VM,si,rN],HM);function Gle(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function mE(t){if(Xf(t)||t instanceof Date){var e=Number(t);if(ai(e))return e}}function _q(t){if(Array.isArray(t)){var e=[mE(t[0]),mE(t[1])];return bm(e)?e:void 0}var r=mE(t);if(r!=null)return[r,r]}function AA(t){return t.map(mE).filter(HVe)}function OXe(t,e,r){return!r||typeof e!="number"||Wf(e)?[]:r.length?AA(r.flatMap(n=>{var a=ws(t,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!ai(s)||!ai(o)))return[e-s,e+o]})):[]}var _o=t=>{var e=Co(t),r=w1(t);return tN(t,e,r)},nN=qt([_o],t=>t==null?void 0:t.dataKey),DXe=qt([Hle,mle,_o],Lle),Kle=(t,e,r,n)=>{var a={},s=e.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},a);return Object.fromEntries(Object.entries(s).map(o=>{var[l,c]=o,u=n?[...c].reverse():c,d=u.map(OM);return[l,{stackedData:oGe(t,d,r),graphicalItems:u}]}))},zF=qt([DXe,Hle,Zw,Tle],Kle),qle=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var o=fGe(t,a,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},RXe=qt([si],t=>t.allowDataOverflow),$M=t=>{var e;if(t==null||!("domain"in t))return qF;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=AA(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:qF},GM=qt([si],$M),KM=qt([GM,RXe],ple),MXe=qt([zF,jA,Rs,KM],qle,{memoizeOptions:{resultEqualityCheck:XP}}),ZP=t=>t.errorBars,LXe=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>Gle(r,n)),kI=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},qM=(t,e,r,n,a)=>{var s,o;if(r.length>0&&t.forEach(l=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(v=>Gle(a,v)),A=ws(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),h=OXe(l,A,f);if(h.length>=2){var m=Math.min(...h),p=Math.max(...h);(s==null||m<s)&&(s=m),(o==null||p>o)&&(o=p)}var g=_q(A);g!=null&&(s=s==null?g[0]:Math.min(s,g[0]),o=o==null?g[1]:Math.max(o,g[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=_q(ws(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),ai(s)&&ai(o))return[s,o]},UXe=qt([VM,si,kXe,ZP,Rs],qM,{memoizeOptions:{resultEqualityCheck:XP}});function QXe(t){var{value:e}=t;if(Xf(e)||e instanceof Date)return e}var VXe=(t,e,r)=>{var n=t.map(QXe).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&Gse(n))?Ooe(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},zle=t=>t.referenceElements.dots,N1=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),HXe=qt([zle,Rs,eN],N1),Wle=t=>t.referenceElements.areas,$Xe=qt([Wle,Rs,eN],N1),Xle=t=>t.referenceElements.lines,GXe=qt([Xle,Rs,eN],N1),Yle=(t,e)=>{if(t!=null){var r=AA(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},KXe=qt(HXe,Rs,Yle),Jle=(t,e)=>{if(t!=null){var r=AA(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},qXe=qt([$Xe,Rs],Jle);function zXe(t){var e;if(t.x!=null)return AA([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:AA(r)}function WXe(t){var e;if(t.y!=null)return AA([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:AA(r)}var Zle=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?zXe(n):WXe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},XXe=qt([GXe,Rs],Zle),YXe=qt(KXe,XXe,qXe,(t,e,r)=>kI(t,r,e)),zM=(t,e,r,n,a,s,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?kI(n,s,a):kI(s,a);return lXe(e,u,t.allowDataOverflow)},JXe=qt([si,GM,KM,MXe,UXe,YXe,ya,Rs],zM,{memoizeOptions:{resultEqualityCheck:XP}}),ZXe=[0,1],WM=(t,e,r,n,a,s,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=t,u=Dg(e,s);if(u&&l==null){var d;return Ooe(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?VXe(n,t,u):a==="expand"?ZXe:o}},XM=qt([si,ya,VM,JP,Zw,Rs,JXe],WM),ece=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(Qw(s));return l in Yy?l:"point"}}},C1=qt([si,ya,Vle,jM,Rs],ece);function eYe(t){if(t!=null){if(t in Yy)return Yy[t]();var e="scale".concat(Qw(t));if(e in Yy)return Yy[e]()}}function YM(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=eYe(e);if(a!=null){var s=a.domain(r).range(n);return rGe(s),s}}}var JM=(t,e,r)=>{var n=$M(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&bm(t))return gXe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&bm(t))return xXe(t,e.tickCount,e.allowDecimals)}},ZM=qt([XM,tN,C1],JM),e8=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&bm(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],o=e[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return e},tYe=qt([si,XM,ZM,Rs],e8),rYe=qt(JP,si,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(AA(t.map(f=>f.value))).sort((f,A)=>f-A),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var o=s-a;if(o===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/o}}),tce=qt(rYe,ya,Ble,wo,(t,e,r,n,a)=>a,(t,e,r,n,a)=>{if(!ai(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var o=Hl(r,t*s),l=t*s/2;return l-o-(l-o)/s*o}return 0}),nYe=(t,e,r)=>{var n=PA(t,e);return n==null||typeof n.padding!="string"?0:tce(t,"xAxis",e,r,n.padding)},aYe=(t,e,r)=>{var n=BA(t,e);return n==null||typeof n.padding!="string"?0:tce(t,"yAxis",e,r,n.padding)},sYe=qt(PA,nYe,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),iYe=qt(BA,aYe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),oYe=qt([wo,sYe,BP,PP,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),lYe=qt([wo,ya,iYe,BP,PP,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),aN=(t,e,r,n)=>{var a;switch(e){case"xAxis":return oYe(t,r,n);case"yAxis":return lYe(t,r,n);case"zAxis":return(a=DM(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Dle(t);case"radiusAxis":return Rle(t,r);default:return}},rce=qt([si,aN],qP),e4=qt([si,C1,tYe,rce],YM);qt([rN,ZP,Rs],LXe);function nce(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var t4=(t,e)=>e,r4=(t,e,r)=>r,cYe=qt(IP,t4,r4,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(nce)),uYe=qt(jP,t4,r4,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(nce)),ace=(t,e)=>({width:t.width,height:e.height}),dYe=(t,e)=>{var r=typeof e.width=="number"?e.width:Kw;return{width:r,height:t.height}},sce=qt(wo,PA,ace),fYe=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},hYe=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},AYe=qt(SA,wo,cYe,t4,r4,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=ace(e,l);o==null&&(o=fYe(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),mYe=qt(EA,wo,uYe,t4,r4,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=dYe(e,l);o==null&&(o=hYe(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),pYe=(t,e)=>{var r=PA(t,e);if(r!=null)return AYe(t,r.orientation,r.mirror)},gYe=qt([wo,PA,pYe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),xYe=(t,e)=>{var r=BA(t,e);if(r!=null)return mYe(t,r.orientation,r.mirror)},vYe=qt([wo,BA,xYe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),ice=qt(wo,BA,(t,e)=>{var r=typeof e.width=="number"?e.width:Kw;return{width:r,height:t.height}}),Eq=(t,e,r)=>{switch(e){case"xAxis":return sce(t,r).width;case"yAxis":return ice(t,r).height;default:return}},oce=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=Dg(t,n),c=e.map(u=>u.value);if(o&&l&&s==="category"&&a&&Gse(c))return c}},t8=qt([ya,JP,si,Rs],oce),lce=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=Dg(t,n);if(o&&(a==="number"||s!=="auto"))return e.map(l=>l.value)}},r8=qt([ya,JP,tN,Rs],lce);qt([ya,BXe,C1,e4,t8,r8,aN,ZM,Rs],(t,e,r,n,a,s,o,l,c)=>{if(e!=null){var u=Dg(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}});var yYe=(t,e,r,n,a,s,o,l,c)=>{if(!(e==null||n==null)){var u=Dg(t,c),{type:d,ticks:f,tickCount:A}=e,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/h:0;m=c==="angleAxis"&&s!=null&&s.length>=2?ml(s[0]-s[1])*2*m:m;var p=f||a;if(p){var g=p.map((v,y)=>{var b=o?o.indexOf(v):v;return{index:y,coordinate:n(b)+m,value:v,offset:m}});return g.filter(v=>ai(v.coordinate))}return u&&l?l.map((v,y)=>({coordinate:n(v)+m,value:v,index:y,offset:m})).filter(v=>ai(v.coordinate)):n.ticks?n.ticks(A).map(v=>({coordinate:n(v)+m,value:v,offset:m})):n.domain().map((v,y)=>({coordinate:n(v)+m,value:o?o[v]:v,index:y,offset:m}))}},cce=qt([ya,tN,C1,e4,ZM,aN,t8,r8,Rs],yYe),bYe=(t,e,r,n,a,s,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=Dg(t,o),{tickCount:c}=e,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?ml(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Kv=qt([ya,tN,e4,aN,t8,r8,Rs],bYe),qv=qt(si,e4,(t,e)=>{if(!(t==null||e==null))return TI(TI({},t),{},{scale:e})}),wYe=qt([si,C1,XM,rce],YM);qt((t,e,r)=>DM(t,r),wYe,(t,e)=>{if(!(t==null||e==null))return TI(TI({},t),{},{scale:e})});var NYe=qt([ya,IP,jP],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),uce=t=>t.options.defaultTooltipEventType,dce=t=>t.options.validateTooltipEventTypes;function fce(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function n8(t,e){var r=uce(t),n=dce(t);return fce(e,r,n)}function CYe(t){return on(e=>n8(e,t))}var hce=(t,e)=>{var r,n=Number(e);if(!(Wf(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},_Ye=t=>t.tooltip.settings,P0={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},EYe={itemInteraction:{click:P0,hover:P0},axisInteraction:{click:P0,hover:P0},keyboardInteraction:P0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Ace=$c({name:"tooltip",initialState:EYe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Is()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=nf(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:Is()},removeTooltipEntrySettings:{reducer(t,e){var r=nf(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:Is()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:SYe,replaceTooltipEntrySettings:IYe,removeTooltipEntrySettings:jYe,setTooltipSettingsState:PYe,setActiveMouseOverItemIndex:mce,mouseLeaveItem:BYe,mouseLeaveChart:pce,setActiveClickItemIndex:TYe,setMouseOverAxisIndex:gce,setMouseClickAxisIndex:kYe,setSyncInteraction:WF,setKeyboardInteraction:XF}=Ace.actions,FYe=Ace.reducer;function Sq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function v_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sq(Object(r),!0).forEach(function(n){OYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OYe(t,e,r){return(e=DYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DYe(t){var e=RYe(t,"string");return typeof e=="symbol"?e:e+""}function RYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MYe(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function LYe(t){return t.index!=null}var xce=(t,e,r,n)=>{if(e==null)return P0;var a=MYe(t,e,r);if(a==null)return P0;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(LYe(a)){if(s)return v_(v_({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return v_(v_({},P0),{},{coordinate:a.coordinate})};function UYe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function QYe(t,e){var r=UYe(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),o=Math.max(n,a);return r>=s&&r<=o}function VYe(t,e,r){if(r==null||e==null)return!0;var n=ws(t,e);return n==null||!bm(r)?!0:QYe(n,r)}var a8=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!ai(s))return a;var o=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(o,Math.min(s,l)),u=e[c];return u==null||VYe(u,r,n)?String(c):null},vce=(t,e,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},yce=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},sN=t=>t.options.tooltipPayloadSearcher,_1=t=>t.tooltip;function Iq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Iq(Object(r),!0).forEach(function(n){HYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Iq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HYe(t,e,r){return(e=$Ye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Ye(t){var e=GYe(t,"string");return typeof e=="symbol"?e:e+""}function GYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KYe(t,e){return t??e}var bce=(t,e,r,n,a,s,o)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return t.reduce((A,h)=>{var m,{dataDefinedOnItem:p,settings:g}=h,v=KYe(p,l),y=Array.isArray(v)?Zie(v,u,d):v,b=(m=g==null?void 0:g.dataKey)!==null&&m!==void 0?m:n,w=g==null?void 0:g.nameKey,P;if(n&&Array.isArray(y)&&!Array.isArray(y[0])&&o==="axis"?P=VVe(y,n,a):P=s(y,e,c,w),Array.isArray(P))P.forEach(_=>{var I=jq(jq({},g),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});A.push(LG({tooltipEntrySettings:I,dataKey:_.dataKey,payload:_.payload,value:ws(_.payload,_.dataKey),name:_.name}))});else{var j;A.push(LG({tooltipEntrySettings:g,dataKey:b,payload:P,value:ws(P,b),name:(j=ws(P,w))!==null&&j!==void 0?j:g==null?void 0:g.name}))}return A},f)}},s8=qt([_o,ya,Vle,jM,Co],ece),qYe=qt([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),zYe=qt([Co,w1],RM),E1=qt([qYe,_o,zYe],LM,{memoizeOptions:{resultEqualityCheck:YP}}),WYe=qt([E1],t=>t.filter(WP)),XYe=qt([E1],UM,{memoizeOptions:{resultEqualityCheck:YP}}),S1=qt([XYe,jA],QM),YYe=qt([WYe,jA,_o],Lle),i8=qt([S1,_o,E1],HM),wce=qt([_o],$M),JYe=qt([_o],t=>t.allowDataOverflow),Nce=qt([wce,JYe],ple),ZYe=qt([E1],t=>t.filter(WP)),eJe=qt([YYe,ZYe,Zw,Tle],Kle),tJe=qt([eJe,jA,Co,Nce],qle),rJe=qt([E1],$le),nJe=qt([S1,_o,rJe,ZP,Co],qM,{memoizeOptions:{resultEqualityCheck:XP}}),aJe=qt([zle,Co,w1],N1),sJe=qt([aJe,Co],Yle),iJe=qt([Wle,Co,w1],N1),oJe=qt([iJe,Co],Jle),lJe=qt([Xle,Co,w1],N1),cJe=qt([lJe,Co],Zle),uJe=qt([sJe,cJe,oJe],kI),dJe=qt([_o,wce,Nce,tJe,nJe,uJe,ya,Co],zM),iN=qt([_o,ya,S1,i8,Zw,Co,dJe],WM),fJe=qt([iN,_o,s8],JM),hJe=qt([_o,iN,fJe,Co],e8),Cce=t=>{var e=Co(t),r=w1(t),n=!1;return aN(t,e,r,n)},_ce=qt([_o,Cce],qP),Ece=qt([_o,s8,hJe,_ce],YM),AJe=qt([ya,i8,_o,Co],oce),mJe=qt([ya,i8,_o,Co],lce),pJe=(t,e,r,n,a,s,o,l)=>{if(e){var{type:c}=e,u=Dg(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?ml(a[0]-a[1])*2*f:f,u&&o?o.map((A,h)=>({coordinate:n(A)+f,value:A,index:h,offset:f})):n.domain().map((A,h)=>({coordinate:n(A)+f,value:s?s[A]:A,index:h,offset:f}))}}},TA=qt([ya,_o,s8,Ece,Cce,AJe,mJe,Co],pJe),o8=qt([uce,dce,_Ye],(t,e,r)=>fce(r.shared,t,e)),Sce=t=>t.tooltip.settings.trigger,l8=t=>t.tooltip.settings.defaultIndex,oN=qt([_1,o8,Sce,l8],xce),gg=qt([oN,S1,nN,iN],a8),Ice=qt([TA,gg],hce),c8=qt([oN],t=>{if(t)return t.dataKey}),gJe=qt([oN],t=>{if(t)return t.graphicalItemId}),jce=qt([_1,o8,Sce,l8],yce),xJe=qt([EA,SA,ya,wo,TA,l8,jce,sN],vce),vJe=qt([oN,xJe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),yJe=qt([oN],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),bJe=qt([jce,gg,jA,nN,Ice,sN,o8],bce);qt([bJe],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function Pq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Bq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pq(Object(r),!0).forEach(function(n){wJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wJe(t,e,r){return(e=NJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NJe(t){var e=CJe(t,"string");return typeof e=="symbol"?e:e+""}function CJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Je=()=>on(_o),EJe=()=>{var t=_Je(),e=on(TA),r=on(Ece);return fI(!t||!r?void 0:Bq(Bq({},t),{},{scale:r}),e)};function Tq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tq(Object(r),!0).forEach(function(n){SJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SJe(t,e,r){return(e=IJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IJe(t){var e=jJe(t,"string");return typeof e=="symbol"?e:e+""}function jJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PJe=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},BJe=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:o}=n;return gx(gx(gx({},n),zi(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return gx(gx(gx({},n),zi(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function TJe(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var Pce=(t,e,r,n,a)=>{var s,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,u,d,f,A,h=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[o-1])===null||u===void 0?void 0:u.coordinate,m=(d=r[l])===null||d===void 0?void 0:d.coordinate,p=l>=o-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(A=r[l+1])===null||A===void 0?void 0:A.coordinate,g=void 0;if(!(h==null||m==null||p==null))if(ml(m-h)!==ml(p-m)){var v=[];if(ml(p-m)===ml(a[1]-a[0])){g=p;var y=m+a[1]-a[0];v[0]=Math.min(y,(y+h)/2),v[1]=Math.max(y,(y+h)/2)}else{g=h;var b=p+a[1]-a[0];v[0]=Math.min(m,(b+m)/2),v[1]=Math.max(m,(b+m)/2)}var w=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>w[0]&&t<=w[1]||t>=v[0]&&t<=v[1]){var P;return(P=r[l])===null||P===void 0?void 0:P.index}}else{var j=Math.min(h,p),_=Math.max(h,p);if(t>(j+m)/2&&t<=(_+m)/2){var I;return(I=r[l])===null||I===void 0?void 0:I.index}}}else if(e)for(var E=0;E<o;E++){var F=e[E];if(F!=null){var k=e[E+1],B=e[E-1];if(E===0&&k!=null&&t<=(F.coordinate+k.coordinate)/2||E===o-1&&B!=null&&t>(F.coordinate+B.coordinate)/2||E>0&&E<o-1&&B!=null&&k!=null&&t>(F.coordinate+B.coordinate)/2&&t<=(F.coordinate+k.coordinate)/2)return F.index}}return-1},kJe=()=>on(jM),u8=(t,e)=>e,Bce=(t,e,r)=>r,d8=(t,e,r,n)=>n,FJe=qt(TA,t=>gP(t,e=>e.coordinate)),f8=qt([_1,u8,Bce,d8],xce),h8=qt([f8,S1,nN,iN],a8),OJe=(t,e,r)=>{if(e!=null){var n=_1(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Tce=qt([_1,u8,Bce,d8],yce),FI=qt([EA,SA,ya,wo,TA,d8,Tce,sN],vce),DJe=qt([f8,FI],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),kce=qt([TA,h8],hce),RJe=qt([Tce,h8,jA,nN,kce,sN,u8],bce),MJe=qt([f8,h8],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),LJe=(t,e,r,n,a,s,o)=>{if(!(!t||!r||!n||!a)&&TJe(t,o)){var l=hGe(t,e),c=Pce(l,s,a,r,n),u=PJe(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},UJe=(t,e,r,n,a,s,o)=>{if(!(!t||!n||!a||!s||!r)){var l=Sqe(t,r);if(l){var c=AGe(l,e),u=Pce(c,o,s,n,a),d=BJe(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},QJe=(t,e,r,n,a,s,o,l)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?LJe(t,e,n,a,s,o,l):UJe(t,e,r,n,a,s,o)},VJe=qt(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),HJe=qt(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(Ql)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:EXe}});function kq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kq(Object(r),!0).forEach(function(n){$Je(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $Je(t,e,r){return(e=GJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GJe(t){var e=KJe(t,"string");return typeof e=="symbol"?e:e+""}function KJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qJe={},zJe={zIndexMap:Object.values(Ql).reduce((t,e)=>Fq(Fq({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),qJe)},WJe=new Set(Object.values(Ql));function XJe(t){return WJe.has(t)}var Fce=$c({name:"zIndex",initialState:zJe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Is()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!XJe(r)&&delete t.zIndexMap[r])},prepare:Is()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:Is()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:Is()}}}),{registerZIndexPortal:YJe,unregisterZIndexPortal:JJe,registerZIndexPortalElement:ZJe,unregisterZIndexPortalElement:eZe}=Fce.actions,tZe=Fce.reducer;function ah(t){var{zIndex:e,children:r}=t,n=VGe(),a=n&&e!==void 0&&e!==0,s=Su(),o=hs();x.useLayoutEffect(()=>a?(o(YJe({zIndex:e})),()=>{o(JJe({zIndex:e}))}):Vw,[o,e,a]);var l=on(c=>VJe(c,e,s));return a?l?xu.createPortal(r,l):null:r}function YF(){return YF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YF.apply(null,arguments)}function Oq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function y_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Oq(Object(r),!0).forEach(function(n){rZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rZe(t,e,r){return(e=nZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nZe(t){var e=aZe(t,"string");return typeof e=="symbol"?e:e+""}function aZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sZe(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return x.isValidElement(e)?x.cloneElement(e,n):x.createElement(r,n)}function iZe(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,f=r,A=n,h=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var m,p,g;if(d==="ScatterChart")m=f,p=QKe,g=Ql.cursorLine;else if(d==="BarChart")m=VKe(l,f,s,o),p=Soe,g=Ql.cursorRectangle;else if(l==="radial"&&qse(f)){var{cx:v,cy:y,radius:b,startAngle:w,endAngle:P}=joe(f);m={cx:v,cy:y,startAngle:w,endAngle:P,innerRadius:b,outerRadius:b},p=Boe,g=Ql.cursorLine}else m={points:Bqe(l,f,s)},p=nM,g=Ql.cursorLine;var j=typeof c=="object"&&"className"in c?c.className:void 0,_=y_(y_(y_(y_({stroke:"#ccc",pointerEvents:"none"},s),m),V2(c)),{},{payload:A,payloadIndex:h,className:Ga("recharts-tooltip-cursor",j)});return x.createElement(ah,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:g},x.createElement(sZe,{cursor:c,cursorComp:p,cursorProps:_}))}function oZe(t){var e=EJe(),r=UGe(),n=qw(),a=kJe();return e==null||r==null||n==null||a==null?null:x.createElement(iZe,YF({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var Oce=x.createContext(null),lZe=()=>x.useContext(Oce),Dce={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||c,A),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var A=0,h=f.length,m=new Array(h);A<h;A++)m[A]=f[A].fn;return m},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,A,h,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],v=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,A),!0;case 5:return g.fn.call(g.context,d,f,A,h),!0;case 6:return g.fn.call(g.context,d,f,A,h,m),!0}for(b=1,y=new Array(v-1);b<v;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var w=g.length,P;for(b=0;b<w;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),v){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,f);break;case 4:g[b].fn.call(g[b].context,d,f,A);break;default:if(!y)for(P=1,y=new Array(v-1);P<v;P++)y[P-1]=arguments[P];g[b].fn.apply(g[b].context,y)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,A){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var m=this._events[h];if(m.fn)m.fn===d&&(!A||m.once)&&(!f||m.context===f)&&o(this,h);else{for(var p=0,g=[],v=m.length;p<v;p++)(m[p].fn!==d||A&&!m[p].once||f&&m[p].context!==f)&&g.push(m[p]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(Dce);var cZe=Dce.exports;const uZe=pA(cZe);var rw=new uZe,JF="recharts.syncEvent.tooltip",Dq="recharts.syncEvent.brush";function Rce(t,e){if(e){var r=Number.parseInt(e,10);if(!Wf(r))return t==null?void 0:t[r]}}var dZe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Mce=$c({name:"options",initialState:dZe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),fZe=Mce.reducer,{createEventEmitter:hZe}=Mce.actions;function AZe(t){return t.tooltip.syncInteraction}var mZe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Lce=$c({name:"chartData",initialState:mZe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:Rq,setDataStartEndIndexes:pZe,setComputedData:Nit}=Lce.actions,gZe=Lce.reducer,xZe=["x","y"];function Mq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Mq(Object(r),!0).forEach(function(n){vZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vZe(t,e,r){return(e=yZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yZe(t){var e=bZe(t,"string");return typeof e=="symbol"?e:e+""}function bZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wZe(t,e){if(t==null)return{};var r,n,a=NZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function NZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function CZe(){var t=on(PM),e=on(BM),r=hs(),n=on(kle),a=on(TA),s=qw(),o=TP(),l=on(c=>c.rootProps.className);x.useEffect(()=>{if(t==null)return Vw;var c=(u,d,f)=>{if(e!==f&&t===u){if(n==="index"){var A;if(o&&d!==null&&d!==void 0&&(A=d.payload)!==null&&A!==void 0&&A.coordinate&&d.payload.sourceViewBox){var h=d.payload.coordinate,{x:m,y:p}=h,g=wZe(h,xZe),{x:v,y,width:b,height:w}=d.payload.sourceViewBox,P=xx(xx({},g),{},{x:o.x+(b?(m-v)/b:0)*o.width,y:o.y+(w?(p-y)/w:0)*o.height});r(xx(xx({},d),{},{payload:xx(xx({},d.payload),{},{coordinate:P})}))}else r(d);return}if(a!=null){var j;if(typeof n=="function"){var _={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},I=n(a,_);j=a[I]}else n==="value"&&(j=a.find(pe=>String(pe.value)===d.payload.label));var{coordinate:E}=d.payload;if(j==null||d.payload.active===!1||E==null||o==null){r(WF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:F,y:k}=E,B=Math.min(F,o.x+o.width),R=Math.min(k,o.y+o.height),Y={x:s==="horizontal"?j.coordinate:B,y:s==="horizontal"?R:j.coordinate},me=WF({active:d.payload.active,coordinate:Y,dataKey:d.payload.dataKey,index:String(j.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(me)}}};return rw.on(JF,c),()=>{rw.off(JF,c)}},[l,r,e,t,n,a,s,o])}function _Ze(){var t=on(PM),e=on(BM),r=hs();x.useEffect(()=>{if(t==null)return Vw;var n=(a,s,o)=>{e!==o&&t===a&&r(pZe(s))};return rw.on(Dq,n),()=>{rw.off(Dq,n)}},[r,e,t])}function EZe(){var t=hs();x.useEffect(()=>{t(hZe())},[t]),CZe(),_Ze()}function SZe(t,e,r,n,a,s){var o=on(h=>OJe(h,t,e)),l=on(BM),c=on(PM),u=on(kle),d=on(AZe),f=d==null?void 0:d.active,A=TP();x.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=WF({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:A,graphicalItemId:void 0});rw.emit(JF,c,h,l)}},[f,r,o,a,n,l,c,u,s,A])}function Lq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Uq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lq(Object(r),!0).forEach(function(n){IZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IZe(t,e,r){return(e=jZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jZe(t){var e=PZe(t,"string");return typeof e=="symbol"?e:e+""}function PZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BZe(t){return t.dataKey}function TZe(t,e){return x.isValidElement(t)?x.cloneElement(t,e):typeof t=="function"?x.createElement(t,e):x.createElement(yKe,e)}var Qq=[],kZe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Vq(t){var e,r,n=xl(t,kZe),{active:a,allowEscapeViewBox:s,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:A,position:h,reverseDirection:m,useTranslate3d:p,wrapperStyle:g,cursor:v,shared:y,trigger:b,defaultIndex:w,portal:P,axisId:j}=n,_=hs(),I=typeof w=="number"?String(w):w;x.useEffect(()=>{_(PYe({shared:y,trigger:b,axisId:j,active:a,defaultIndex:I}))},[_,y,b,j,a,I]);var E=TP(),F=woe(),k=CYe(y),{activeIndex:B,isActive:R}=(e=on(ee=>MJe(ee,k,b,I)))!==null&&e!==void 0?e:{},Y=on(ee=>RJe(ee,k,b,I)),me=on(ee=>kce(ee,k,b,I)),pe=on(ee=>DJe(ee,k,b,I)),he=Y,ge=lZe(),se=(r=a??R)!==null&&r!==void 0?r:!1,[je,Te]=Nie([he,se]),D=k==="axis"?me:void 0;SZe(k,b,pe,D,B,se);var K=P??ge;if(K==null||E==null||k==null)return null;var z=he??Qq;se||(z=Qq),u&&z.length&&(z=die(z.filter(ee=>ee.value!=null&&(ee.hide!==!0||n.includeHidden)),A,BZe));var Q=z.length>0,J=x.createElement(SKe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:d,active:se,coordinate:pe,hasPayload:Q,offset:f,position:h,reverseDirection:m,useTranslate3d:p,viewBox:E,wrapperStyle:g,lastBoundingBox:je,innerRef:Te,hasPortalFromProps:!!P},TZe(c,Uq(Uq({},n),{},{payload:z,label:D,active:se,activeIndex:B,coordinate:pe,accessibilityLayer:F})));return x.createElement(x.Fragment,null,xu.createPortal(J,K),se&&x.createElement(oZe,{cursor:v,tooltipEventType:k,coordinate:pe,payload:z,index:B}))}var lN=t=>null;lN.displayName="Cell";function FZe(t,e,r){return(e=OZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OZe(t){var e=DZe(t,"string");return typeof e=="symbol"?e:e+""}function DZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class RZe{constructor(e){FZe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Hq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function MZe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hq(Object(r),!0).forEach(function(n){LZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LZe(t,e,r){return(e=UZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UZe(t){var e=QZe(t,"string");return typeof e=="symbol"?e:e+""}function QZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VZe={cacheSize:2e3,enableCache:!0},Uce=MZe({},VZe),$q=new RZe(Uce.cacheSize),HZe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Gq="recharts_measurement_span";function $Ze(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var Kq=(t,e)=>{try{var r=document.getElementById(Gq);r||(r=document.createElement("span"),r.setAttribute("id",Gq),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,HZe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Db=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||RP.isSsr)return{width:0,height:0};if(!Uce.enableCache)return Kq(e,r);var n=$Ze(e,r),a=$q.get(n);if(a)return a;var s=Kq(e,r);return $q.set(n,s),s},Qce;function GZe(t,e,r){return(e=KZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KZe(t){var e=qZe(t,"string");return typeof e=="symbol"?e:e+""}function qZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zZe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,WZe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,XZe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},YZe=["cm","mm","pt","pc","in","Q","px"];function JZe(t){return YZe.includes(t)}var Yx="NaN";function ZZe(t,e){return t*XZe[e]}class il{static parse(e){var r,[,n,a]=(r=WZe.exec(e))!==null&&r!==void 0?r:[];return n==null?il.NaN:new il(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,Wf(e)&&(this.unit=""),r!==""&&!zZe.test(r)&&(this.num=NaN,this.unit=""),JZe(r)&&(this.num=ZZe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new il(NaN,""):new il(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new il(NaN,""):new il(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new il(NaN,""):new il(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new il(NaN,""):new il(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Wf(this.num)}}Qce=il;GZe(il,"NaN",new Qce(NaN,""));function Vce(t){if(t==null||t.includes(Yx))return Yx;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=qq.exec(e))!==null&&r!==void 0?r:[],o=il.parse(n??""),l=il.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Yx;e=e.replace(qq,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,f,A]=(u=zq.exec(e))!==null&&u!==void 0?u:[],h=il.parse(d??""),m=il.parse(A??""),p=f==="+"?h.add(m):h.subtract(m);if(p.isNaN())return Yx;e=e.replace(zq,p.toString())}return e}var Wq=/\(([^()]*)\)/;function eet(t){for(var e=t,r;(r=Wq.exec(e))!=null;){var[,n]=r;e=e.replace(Wq,Vce(n))}return e}function tet(t){var e=t.replace(/\s+/g,"");return e=eet(e),e=Vce(e),e}function ret(t){try{return tet(t)}catch{return Yx}}function mB(t){var e=ret(t.slice(5,-1));return e===Yx?"":e}var net=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],aet=["dx","dy","angle","className","breakAll"];function ZF(){return ZF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZF.apply(null,arguments)}function Xq(t,e){if(t==null)return{};var r,n,a=set(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function set(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Hce=/[ \f\n\r\t\v\u2028\u2029]+/,$ce=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];Go(e)||(r?a=e.toString().split(""):a=e.toString().split(Hce));var s=a.map(l=>({word:l,width:Db(l,n).width})),o=r?0:Db("",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function iet(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Gce=(t,e,r,n)=>t.reduce((a,s)=>{var{word:o,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(e==null||n||c.width+l+r<Number(e)))c.words.push(o),c.width+=l+r;else{var u={words:[o],width:l};a.push(u)}return a},[]),Kce=t=>t.reduce((e,r)=>e.width>r.width?e:r),oet="",Yq=(t,e,r,n,a,s,o,l)=>{var c=t.slice(0,e),u=$ce({breakAll:r,style:n,children:c+oet});if(!u)return[!1,[]];var d=Gce(u.wordsWithComputedWidth,s,o,l),f=d.length>a||Kce(d).width>Number(s);return[f,d]},cet=(t,e,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=t,u=fn(s),d=String(o),f=Gce(e,n,r,a);if(!u||a)return f;var A=f.length>s||Kce(f).width>Number(n);if(!A)return f;for(var h=0,m=d.length-1,p=0,g;h<=m&&p<=d.length-1;){var v=Math.floor((h+m)/2),y=v-1,[b,w]=Yq(d,y,c,l,s,n,r,a),[P]=Yq(d,v,c,l,s,n,r,a);if(!b&&!P&&(h=v+1),b&&P&&(m=v-1),!b&&P){g=w;break}p++}return g||f},Jq=t=>{var e=Go(t)?[]:t.toString().split(Hce);return[{words:e,width:void 0}]},uet=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=t;if((e||r)&&!RP.isSsr){var l,c,u=$ce({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return Jq(n);return cet({breakAll:s,children:n,maxLines:o,style:a},l,c,e,!!r)}return Jq(n)},qce="#808080",det={angle:0,breakAll:!1,capHeight:"0.71em",fill:qce,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},n4=x.forwardRef((t,e)=>{var r=xl(t,det),{x:n,y:a,lineHeight:s,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=Xq(r,net),A=x.useMemo(()=>uet({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:h,dy:m,angle:p,className:g,breakAll:v}=f,y=Xq(f,aet);if(!Xf(n)||!Xf(a)||A.length===0)return null;var b=Number(n)+(fn(h)?h:0),w=Number(a)+(fn(m)?m:0);if(!ai(b)||!ai(w))return null;var P;switch(d){case"start":P=mB("calc(".concat(o,")"));break;case"middle":P=mB("calc(".concat((A.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:P=mB("calc(".concat(A.length-1," * -").concat(s,")"));break}var j=[];if(c){var _=A[0].width,{width:I}=f;j.push("scale(".concat(fn(I)&&fn(_)?I/_:1,")"))}return p&&j.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),j.length&&(y.transform=j.join(" ")),x.createElement("text",ZF({},xd(y),{ref:e,x:b,y:w,className:Ga("recharts-text",g),textAnchor:u,fill:l.includes("url")?qce:l}),A.map((E,F)=>{var k=E.words.join(v?"":" ");return x.createElement("tspan",{x:b,dy:F===0?P:s,key:"".concat(k,"-").concat(F)},k)}))});n4.displayName="Text";var fet=["labelRef"],het=["content"];function Zq(t,e){if(t==null)return{};var r,n,a=Aet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Aet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function ez(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ei(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ez(Object(r),!0).forEach(function(n){met(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ez(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function met(t,e,r){return(e=pet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pet(t){var e=get(t,"string");return typeof e=="symbol"?e:e+""}function get(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ph(){return Ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ph.apply(null,arguments)}var zce=x.createContext(null),xet=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o,children:l}=t,c=x.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o}),[e,r,n,a,s,o]);return x.createElement(zce.Provider,{value:c},l)},Wce=()=>{var t=x.useContext(zce),e=TP();return t||coe(e)},vet=x.createContext(null),yet=()=>{var t=x.useContext(vet),e=on(Mle);return t||e},bet=t=>{var{value:e,formatter:r}=t,n=Go(t.children)?e:t.children;return typeof r=="function"?r(n):n},A8=t=>t!=null&&typeof t=="function",wet=(t,e)=>{var r=ml(e-t),n=Math.min(Math.abs(e-t),360);return r*n},Net=(t,e,r,n,a)=>{var{offset:s,className:o}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:A,clockWise:h}=a,m=(u+d)/2,p=wet(f,A),g=p>=0?1:-1,v,y;switch(e){case"insideStart":v=f+g*s,y=h;break;case"insideEnd":v=A-g*s,y=!h;break;case"end":v=A+g*s,y=h;break;default:throw new Error("Unsupported position ".concat(e))}y=p<=0?y:!y;var b=zi(l,c,m,v),w=zi(l,c,m,v+(y?1:-1)*359),P="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(w.x,",").concat(w.y),j=Go(t.id)?H2("recharts-radial-line-"):t.id;return x.createElement("text",Ph({},n,{dominantBaseline:"central",className:Ga("recharts-radial-bar-label",o)}),x.createElement("defs",null,x.createElement("path",{id:j,d:P})),x.createElement("textPath",{xlinkHref:"#".concat(j)},r))},Cet=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=zi(n,a,o+e,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var A=(s+o)/2,{x:h,y:m}=zi(n,a,A,u);return{x:h,y:m,textAnchor:"middle",verticalAnchor:"middle"}},eO=t=>"cx"in t&&fn(t.cx),_et=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!eO(r)&&(s=r);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=e,f=o,A=o+(c-u)/2,h=(f+A)/2,m=(c+u)/2,p=f+c/2,g=d>=0?1:-1,v=g*n,y=g>0?"end":"start",b=g>0?"start":"end",w=c>=0?1:-1,P=w*n,j=w>0?"end":"start",_=w>0?"start":"end";if(a==="top"){var I={x:f+c/2,y:l-v,textAnchor:"middle",verticalAnchor:y};return Ei(Ei({},I),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var E={x:A+u/2,y:l+d+v,textAnchor:"middle",verticalAnchor:b};return Ei(Ei({},E),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var F={x:h-P,y:l+d/2,textAnchor:j,verticalAnchor:"middle"};return Ei(Ei({},F),s?{width:Math.max(F.x-s.x,0),height:d}:{})}if(a==="right"){var k={x:h+m+P,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return Ei(Ei({},k),s?{width:Math.max(s.x+s.width-k.x,0),height:d}:{})}var B=s?{width:m,height:d}:{};return a==="insideLeft"?Ei({x:h+P,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},B):a==="insideRight"?Ei({x:h+m-P,y:l+d/2,textAnchor:j,verticalAnchor:"middle"},B):a==="insideTop"?Ei({x:f+c/2,y:l+v,textAnchor:"middle",verticalAnchor:b},B):a==="insideBottom"?Ei({x:A+u/2,y:l+d-v,textAnchor:"middle",verticalAnchor:y},B):a==="insideTopLeft"?Ei({x:f+P,y:l+v,textAnchor:_,verticalAnchor:b},B):a==="insideTopRight"?Ei({x:f+c-P,y:l+v,textAnchor:j,verticalAnchor:b},B):a==="insideBottomLeft"?Ei({x:A+P,y:l+d-v,textAnchor:_,verticalAnchor:y},B):a==="insideBottomRight"?Ei({x:A+u-P,y:l+d-v,textAnchor:j,verticalAnchor:y},B):a&&typeof a=="object"&&(fn(a.x)||cA(a.x))&&(fn(a.y)||cA(a.y))?Ei({x:o+Hl(a.x,m),y:l+Hl(a.y,d),textAnchor:"end",verticalAnchor:"end"},B):Ei({x:p,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},B)},Eet={angle:0,offset:5,zIndex:Ql.label,position:"middle",textBreakAll:!1};function v0(t){var e=xl(t,Eet),{viewBox:r,position:n,value:a,children:s,content:o,className:l="",textBreakAll:c,labelRef:u}=e,d=yet(),f=Wce(),A=n==="center"?f:d??f,h,m,p;if(r==null?h=A:eO(r)?h=r:h=coe(r),!h||Go(a)&&Go(s)&&!x.isValidElement(o)&&typeof o!="function")return null;var g=Ei(Ei({},e),{},{viewBox:h});if(x.isValidElement(o)){var{labelRef:v}=g,y=Zq(g,fet);return x.cloneElement(o,y)}if(typeof o=="function"){var{content:b}=g,w=Zq(g,het);if(m=x.createElement(o,w),x.isValidElement(m))return m}else m=bet(e);var P=xd(e);if(eO(h)){if(n==="insideStart"||n==="insideEnd"||n==="end")return Net(e,n,m,P,h);p=Cet(h,e.offset,e.position)}else p=_et(e,h);return x.createElement(ah,{zIndex:e.zIndex},x.createElement(n4,Ph({ref:u,className:Ga("recharts-label",l)},P,p,{textAnchor:iet(P.textAnchor)?P.textAnchor:p.textAnchor,breakAll:c}),m))}v0.displayName="Label";var Iet=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?x.createElement(v0,Ph({key:"label-implicit"},n)):Xf(t)?x.createElement(v0,Ph({key:"label-implicit",value:t},n)):x.isValidElement(t)?t.type===v0?x.cloneElement(t,Ei({key:"label-implicit"},n)):x.createElement(v0,Ph({key:"label-implicit",content:t},n)):A8(t)?x.createElement(v0,Ph({key:"label-implicit",content:t},n)):t&&typeof t=="object"?x.createElement(v0,Ph({},t,{key:"label-implicit"},n)):null};function jet(t){var{label:e,labelRef:r}=t,n=Wce();return Iet(e,n,r)||null}var Xce={},Yce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(Yce);var Jce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(Jce);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yce,r=Jce,n=mP;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(Xce);var Pet=Xce.last;const Bet=pA(Pet);var Tet=["valueAccessor"],ket=["dataKey","clockWise","id","textBreakAll","zIndex"];function OI(){return OI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OI.apply(null,arguments)}function tz(t,e){if(t==null)return{};var r,n,a=Fet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Fet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Oet=t=>Array.isArray(t.value)?Bet(t.value):t.value,Zce=x.createContext(void 0),Det=Zce.Provider,eue=x.createContext(void 0),Ret=eue.Provider;function Met(){return x.useContext(Zce)}function Let(){return x.useContext(eue)}function pE(t){var{valueAccessor:e=Oet}=t,r=tz(t,Tet),{dataKey:n,clockWise:a,id:s,textBreakAll:o,zIndex:l}=r,c=tz(r,ket),u=Met(),d=Let(),f=u||d;return!f||!f.length?null:x.createElement(ah,{zIndex:l??Ql.label},x.createElement(Ac,{className:"recharts-label-list"},f.map((A,h)=>{var m,p=Go(n)?e(A,h):ws(A&&A.payload,n),g=Go(s)?{}:{id:"".concat(s,"-").concat(h)};return x.createElement(v0,OI({key:"label-".concat(h)},xd(A),c,g,{fill:(m=r.fill)!==null&&m!==void 0?m:A.fill,parentViewBox:A.parentViewBox,value:p,textBreakAll:o,viewBox:A.viewBox,index:h,zIndex:0}))})))}pE.displayName="LabelList";function tue(t){var{label:e}=t;return e?e===!0?x.createElement(pE,{key:"labelList-implicit"}):x.isValidElement(e)||A8(e)?x.createElement(pE,{key:"labelList-implicit",content:e}):typeof e=="object"?x.createElement(pE,OI({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var rue=t=>t.graphicalItems.polarItems,Uet=qt([Rs,eN],RM),a4=qt([rue,si,Uet],LM),Qet=qt([a4],UM),s4=qt([Qet,KP],QM),Vet=qt([s4,si,a4],HM);qt([s4,si,a4],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,o=ws(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:ws(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var rz=()=>{},Het=qt([s4,si,a4,ZP,Rs],qM),$et=qt([si,GM,KM,rz,Het,rz,ya,Rs],zM),nue=qt([si,ya,s4,Vet,Zw,Rs,$et],WM),Get=qt([nue,si,C1],JM);qt([si,nue,Get,Rs],e8);var Ket={radiusAxis:{},angleAxis:{}},aue=$c({name:"polarAxis",initialState:Ket,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Cit,removeRadiusAxis:_it,addAngleAxis:Eit,removeAngleAxis:Sit}=aue.actions,qet=aue.reducer;function nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function az(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nz(Object(r),!0).forEach(function(n){zet(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zet(t,e,r){return(e=Wet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wet(t){var e=Xet(t,"string");return typeof e=="symbol"?e:e+""}function Xet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yet=(t,e)=>e,m8=qt([rue,Yet],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),Jet=[],p8=(t,e,r)=>(r==null?void 0:r.length)===0?Jet:r,sue=qt([KP,m8,p8],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>az(az({},e.presentationProps),s.props))),a!=null)return a}}),Zet=qt([sue,m8,p8],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,o=ws(n,e.nameKey,e.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:SP(o,e.dataKey),color:l,payload:n,type:e.legendType}})}),ett=qt([sue,m8,p8,wo],(t,e,r,n)=>{if(!(e==null||t==null))return rrt({offset:n,pieSettings:e,displayedData:t,cells:r})}),iue={exports:{}},as={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g8=Symbol.for("react.transitional.element"),x8=Symbol.for("react.portal"),i4=Symbol.for("react.fragment"),o4=Symbol.for("react.strict_mode"),l4=Symbol.for("react.profiler"),c4=Symbol.for("react.consumer"),u4=Symbol.for("react.context"),d4=Symbol.for("react.forward_ref"),f4=Symbol.for("react.suspense"),h4=Symbol.for("react.suspense_list"),A4=Symbol.for("react.memo"),m4=Symbol.for("react.lazy"),ttt=Symbol.for("react.view_transition"),rtt=Symbol.for("react.client.reference");function _d(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case g8:switch(t=t.type,t){case i4:case l4:case o4:case f4:case h4:case ttt:return t;default:switch(t=t&&t.$$typeof,t){case u4:case d4:case m4:case A4:return t;case c4:return t;default:return e}}case x8:return e}}}as.ContextConsumer=c4;as.ContextProvider=u4;as.Element=g8;as.ForwardRef=d4;as.Fragment=i4;as.Lazy=m4;as.Memo=A4;as.Portal=x8;as.Profiler=l4;as.StrictMode=o4;as.Suspense=f4;as.SuspenseList=h4;as.isContextConsumer=function(t){return _d(t)===c4};as.isContextProvider=function(t){return _d(t)===u4};as.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===g8};as.isForwardRef=function(t){return _d(t)===d4};as.isFragment=function(t){return _d(t)===i4};as.isLazy=function(t){return _d(t)===m4};as.isMemo=function(t){return _d(t)===A4};as.isPortal=function(t){return _d(t)===x8};as.isProfiler=function(t){return _d(t)===l4};as.isStrictMode=function(t){return _d(t)===o4};as.isSuspense=function(t){return _d(t)===f4};as.isSuspenseList=function(t){return _d(t)===h4};as.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===i4||t===l4||t===o4||t===f4||t===h4||typeof t=="object"&&t!==null&&(t.$$typeof===m4||t.$$typeof===A4||t.$$typeof===u4||t.$$typeof===c4||t.$$typeof===d4||t.$$typeof===rtt||t.getModuleId!==void 0)};as.typeOf=_d;iue.exports=as;var ntt=iue.exports,sz=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",iz=null,pB=null,oue=t=>{if(t===iz&&Array.isArray(pB))return pB;var e=[];return x.Children.forEach(t,r=>{Go(r)||(ntt.isFragment(r)?e=e.concat(oue(r.props.children)):e.push(r))}),pB=e,iz=t,e};function v8(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>sz(a)):n=[sz(e)],oue(t).forEach(a=>{var s=fg(a,"type.displayName")||fg(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var lue={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(lue);var att=lue.isPlainObject;const stt=pA(att);var oz,lz,cz,uz,dz;function fz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fz(Object(r),!0).forEach(function(n){itt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function itt(t,e,r){return(e=ott(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ott(t){var e=ltt(t,"string");return typeof e=="symbol"?e:e+""}function ltt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DI(){return DI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DI.apply(null,arguments)}function _y(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Az=(t,e,r,n,a)=>{var s=r-n,o;return o=fi(oz||(oz=_y(["M ",",",""])),t,e),o+=fi(lz||(lz=_y(["L ",",",""])),t+r,e),o+=fi(cz||(cz=_y(["L ",",",""])),t+r-s/2,e+a),o+=fi(uz||(uz=_y(["L ",",",""])),t+r-s/2-n,e+a),o+=fi(dz||(dz=_y(["L ",","," Z"])),t,e),o},ctt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},utt=t=>{var e=xl(t,ctt),{x:r,y:n,upperWidth:a,lowerWidth:s,height:o,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=e,A=x.useRef(null),[h,m]=x.useState(-1),p=x.useRef(a),g=x.useRef(s),v=x.useRef(o),y=x.useRef(r),b=x.useRef(n),w=LP(t,"trapezoid-");if(x.useEffect(()=>{if(A.current&&A.current.getTotalLength)try{var Y=A.current.getTotalLength();Y&&m(Y)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||o!==+o||a===0&&s===0||o===0)return null;var P=Ga("recharts-trapezoid",l);if(!f)return x.createElement("g",null,x.createElement("path",DI({},xd(e),{className:P,d:Az(r,n,a,s,o)})));var j=p.current,_=g.current,I=v.current,E=y.current,F=b.current,k="0px ".concat(h===-1?1:h,"px"),B="".concat(h,"px 0px"),R=Noe(["strokeDasharray"],u,c);return x.createElement(MP,{animationId:w,key:w,canBegin:h>0,duration:u,easing:c,isActive:f,begin:d},Y=>{var me=uo(j,a,Y),pe=uo(_,s,Y),he=uo(I,o,Y),ge=uo(E,r,Y),se=uo(F,n,Y);A.current&&(p.current=me,g.current=pe,v.current=he,y.current=ge,b.current=se);var je=Y>0?{transition:R,strokeDasharray:B}:{strokeDasharray:k};return x.createElement("path",DI({},xd(e),{className:P,d:Az(ge,se,me,pe,he),ref:A,style:hz(hz({},je),e.style)}))})},dtt=["option","shapeType","activeClassName"];function ftt(t,e){if(t==null)return{};var r,n,a=htt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function htt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function mz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function RI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mz(Object(r),!0).forEach(function(n){Att(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Att(t,e,r){return(e=mtt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mtt(t){var e=ptt(t,"string");return typeof e=="symbol"?e:e+""}function ptt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gtt(t,e){return RI(RI({},e),t)}function xtt(t,e){return t==="symbols"}function pz(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return x.createElement(Soe,r);case"trapezoid":return x.createElement(utt,r);case"sector":return x.createElement(Boe,r);case"symbols":if(xtt(e))return x.createElement(FR,r);break;case"curve":return x.createElement(nM,r);default:return null}}function vtt(t){return x.isValidElement(t)?t.props:t}function cue(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,a=ftt(t,dtt),s;if(x.isValidElement(e))s=x.cloneElement(e,RI(RI({},a),vtt(e)));else if(typeof e=="function")s=e(a,a.index);else if(stt(e)&&typeof e!="boolean"){var o=gtt(e,a);s=x.createElement(pz,{shapeType:r,elementProps:o})}else{var l=a;s=x.createElement(pz,{shapeType:r,elementProps:l})}return a.isActive?x.createElement(Ac,{className:n},s):s}var y8=(t,e,r)=>{var n=hs();return(a,s)=>o=>{t==null||t(a,s,o),n(mce({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},b8=t=>{var e=hs();return(r,n)=>a=>{t==null||t(r,n,a),e(BYe())}},w8=(t,e,r)=>{var n=hs();return(a,s)=>o=>{t==null||t(a,s,o),n(TYe({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function uue(t){var{tooltipEntrySettings:e}=t,r=hs(),n=Su(),a=x.useRef(null);return x.useLayoutEffect(()=>{n||(a.current===null?r(SYe(e)):a.current!==e&&r(IYe({prev:a.current,next:e})),a.current=e)},[e,r,n]),x.useLayoutEffect(()=>()=>{a.current&&(r(jYe(a.current)),a.current=null)},[r]),null}function ytt(t){var{legendPayload:e}=t,r=hs(),n=Su(),a=x.useRef(null);return x.useLayoutEffect(()=>{n||(a.current===null?r(voe(e)):a.current!==e&&r(yoe({prev:a.current,next:e})),a.current=e)},[r,n,e]),x.useLayoutEffect(()=>()=>{a.current&&(r(boe(a.current)),a.current=null)},[r]),null}function btt(t){var{legendPayload:e}=t,r=hs(),n=on(ya),a=x.useRef(null);return x.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(voe(e)):a.current!==e&&r(yoe({prev:a.current,next:e})),a.current=e)},[r,n,e]),x.useLayoutEffect(()=>()=>{a.current&&(r(boe(a.current)),a.current=null)},[r]),null}var gB,wtt=()=>{var[t]=x.useState(()=>H2("uid-"));return t},Ntt=(gB=zde.useId)!==null&&gB!==void 0?gB:wtt;function Ctt(t,e){var r=Ntt();return e||(t?"".concat(t,"-").concat(r):r)}var _tt=x.createContext(void 0),due=t=>{var{id:e,type:r,children:n}=t,a=Ctt("recharts-".concat(r),e);return x.createElement(_tt.Provider,{value:a},n(a))},Ett={cartesianItems:[],polarItems:[]},fue=$c({name:"graphicalItems",initialState:Ett,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Is()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=nf(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:Is()},removeCartesianGraphicalItem:{reducer(t,e){var r=nf(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:Is()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Is()},removePolarGraphicalItem:{reducer(t,e){var r=nf(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:Is()}}}),{addCartesianGraphicalItem:Stt,replaceCartesianGraphicalItem:Itt,removeCartesianGraphicalItem:jtt,addPolarGraphicalItem:Ptt,removePolarGraphicalItem:Btt}=fue.actions,Ttt=fue.reducer,ktt=t=>{var e=hs(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?e(Stt(t)):r.current!==t&&e(Itt({prev:r.current,next:t})),r.current=t},[e,t]),x.useLayoutEffect(()=>()=>{r.current&&(e(jtt(r.current)),r.current=null)},[e]),null},Ftt=x.memo(ktt);function Ott(t){var e=hs();return x.useLayoutEffect(()=>(e(Ptt(t)),()=>{e(Btt(t))}),[e,t]),null}var Dtt=["key"],Rtt=["onMouseEnter","onClick","onMouseLeave"],Mtt=["id"],Ltt=["id"];function gz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gz(Object(r),!0).forEach(function(n){Utt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Utt(t,e,r){return(e=Qtt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qtt(t){var e=Vtt(t,"string");return typeof e=="symbol"?e:e+""}function Vtt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wm(){return wm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wm.apply(null,arguments)}function p4(t,e){if(t==null)return{};var r,n,a=Htt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Htt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function $tt(t){var e=x.useMemo(()=>v8(t.children,lN),[t.children]),r=on(n=>Zet(n,t.id,e));return r==null?null:x.createElement(btt,{legendPayload:r})}var Gtt=x.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u,id:d}=t,f={dataDefinedOnItem:n.map(A=>A.tooltipPayload),positions:n.map(A=>A.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:e,nameKey:r,name:SP(l,e),hide:c,type:u,color:o,unit:"",graphicalItemId:d}};return x.createElement(uue,{tooltipEntrySettings:f})}),Ktt=(t,e)=>t>e?"start":t<e?"end":"middle",qtt=(t,e,r)=>Hl(typeof e=="function"?e(t):e,r,r*.8),ztt=(t,e,r)=>{var{top:n,left:a,width:s,height:o}=e,l=Ioe(s,o),c=a+Hl(t.cx,s,s/2),u=n+Hl(t.cy,o,o/2),d=Hl(t.innerRadius,l,0),f=qtt(r,t.outerRadius,l),A=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:A}},Wtt=(t,e)=>{var r=ml(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function Xtt(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Ytt=(t,e)=>{if(x.isValidElement(t))return x.cloneElement(t,e);if(typeof t=="function")return t(e);var r=Ga("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=p4(e,Dtt);return x.createElement(nM,wm({},a,{type:"linear",className:r}))},Jtt=(t,e,r)=>{if(x.isValidElement(t))return x.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),x.isValidElement(n)))return n;var a=Ga("recharts-pie-label-text",Xtt(t));return x.createElement(n4,wm({},e,{alignmentBaseline:"middle",className:a}),n)};function Ztt(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!e)return null;var l=zf(r),c=V2(a),u=V2(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,f=e.map((A,h)=>{var m=(A.startAngle+A.endAngle)/2,p=zi(A.cx,A.cy,A.outerRadius+d,m),g=mi(mi(mi(mi({},l),A),{},{stroke:"none"},c),{},{index:h,textAnchor:Ktt(p.x,A.cx)},p),v=mi(mi(mi(mi({},l),A),{},{fill:"none",stroke:A.fill},u),{},{index:h,points:[zi(A.cx,A.cy,A.outerRadius,m),p],key:"line"});return x.createElement(ah,{zIndex:Ql.label,key:"label-".concat(A.startAngle,"-").concat(A.endAngle,"-").concat(A.midAngle,"-").concat(h)},x.createElement(Ac,null,s&&Ytt(s,v),Jtt(a,g,ws(A,o))))});return x.createElement(Ac,{className:"recharts-pie-labels"},f)}function ert(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?x.createElement(tue,{label:a}):x.createElement(Ztt,{sectors:e,props:r,showLabels:n})}function trt(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:o}=t,l=on(gg),c=on(c8),u=on(gJe),{onMouseEnter:d,onClick:f,onMouseLeave:A}=a,h=p4(a,Rtt),m=y8(d,a.dataKey,o),p=b8(A),g=w8(f,a.dataKey,o);return e==null||e.length===0?null:x.createElement(x.Fragment,null,e.map((v,y)=>{if((v==null?void 0:v.startAngle)===0&&(v==null?void 0:v.endAngle)===0&&e.length!==1)return null;var b=u==null||u===o,w=String(y)===l&&(c==null||a.dataKey===c)&&b,P=l?n:null,j=r&&w?r:P,_=mi(mi({},v),{},{stroke:v.stroke,tabIndex:-1,[toe]:y,[roe]:o});return x.createElement(Ac,wm({key:"sector-".concat(v==null?void 0:v.startAngle,"-").concat(v==null?void 0:v.endAngle,"-").concat(v.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},Hw(h,v,y),{onMouseEnter:m(v,y),onMouseLeave:p(v,y),onClick:g(v,y)}),x.createElement(cue,wm({option:s??j,index:y,shapeType:"sector",isActive:w},_)))}))}function rrt(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,A=Math.abs(r.minAngle),h=Wtt(l,c),m=Math.abs(h),p=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,g=n.filter(j=>ws(j,u,0)!==0).length,v=(m>=360?g:g-1)*p,y=m-g*A-v,b=n.reduce((j,_)=>{var I=ws(_,u,0);return j+(fn(I)?I:0)},0),w;if(b>0){var P;w=n.map((j,_)=>{var I=ws(j,u,0),E=ws(j,d,_),F=ztt(r,s,j),k=(fn(I)?I:0)/b,B,R=mi(mi({},j),a&&a[_]&&a[_].props);_?B=P.endAngle+ml(h)*p*(I!==0?1:0):B=l;var Y=B+ml(h)*((I!==0?A:0)+k*y),me=(B+Y)/2,pe=(F.innerRadius+F.outerRadius)/2,he=[{name:E,value:I,payload:R,dataKey:u,type:f,graphicalItemId:r.id}],ge=zi(F.cx,F.cy,pe,me);return P=mi(mi(mi(mi({},r.presentationProps),{},{percent:k,cornerRadius:typeof o=="string"?parseFloat(o):o,name:E,tooltipPayload:he,midAngle:me,middleRadius:pe,tooltipPosition:ge},R),F),{},{value:I,dataKey:u,startAngle:B,endAngle:Y,payload:R,paddingAngle:ml(h)*p}),P})}return w}function nrt(t){var{showLabels:e,sectors:r,children:n}=t,a=x.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return x.createElement(Ret,{value:e?a:void 0},n)}function art(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:A}=e,h=LP(e,"recharts-pie-"),m=r.current,[p,g]=x.useState(!1),v=x.useCallback(()=>{typeof A=="function"&&A(),g(!1)},[A]),y=x.useCallback(()=>{typeof f=="function"&&f(),g(!0)},[f]);return x.createElement(nrt,{showLabels:!p,sectors:a},x.createElement(MP,{animationId:h,begin:o,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:v,key:h},b=>{var w=[],P=a&&a[0],j=P==null?void 0:P.startAngle;return a==null||a.forEach((_,I)=>{var E=m&&m[I],F=I>0?fg(_,"paddingAngle",0):0;if(E){var k=uo(E.endAngle-E.startAngle,_.endAngle-_.startAngle,b),B=mi(mi({},_),{},{startAngle:j+F,endAngle:j+k+F});w.push(B),j=B.endAngle}else{var{endAngle:R,startAngle:Y}=_,me=uo(0,R-Y,b),pe=mi(mi({},_),{},{startAngle:j+F,endAngle:j+me+F});w.push(pe),j=pe.endAngle}}),r.current=w,x.createElement(Ac,null,x.createElement(trt,{sectors:w,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),x.createElement(ert,{showLabels:!p,sectors:a,props:e}),e.children)}var srt={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ql.area};function irt(t){var{id:e}=t,r=p4(t,Mtt),{hide:n,className:a,rootTabIndex:s}=t,o=x.useMemo(()=>v8(t.children,lN),[t.children]),l=on(d=>ett(d,e,o)),c=x.useRef(null),u=Ga("recharts-pie",a);return n||l==null?(c.current=null,x.createElement(Ac,{tabIndex:s,className:u})):x.createElement(ah,{zIndex:t.zIndex},x.createElement(Gtt,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),x.createElement(Ac,{tabIndex:s,className:u},x.createElement(art,{props:mi(mi({},r),{},{sectors:l}),previousSectorsRef:c,id:e})))}function hue(t){var e=xl(t,srt),{id:r}=e,n=p4(e,Ltt),a=zf(n);return x.createElement(due,{id:r,type:"pie"},s=>x.createElement(x.Fragment,null,x.createElement(Ott,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),x.createElement($tt,wm({},n,{id:s})),x.createElement(irt,wm({},n,{id:s}))))}hue.displayName="Pie";function xz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xz(Object(r),!0).forEach(function(n){ort(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ort(t,e,r){return(e=lrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lrt(t){var e=crt(t,"string");return typeof e=="symbol"?e:e+""}function crt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Aue=0,urt={xAxis:{},yAxis:{},zAxis:{}},mue=$c({name:"cartesianAxis",initialState:urt,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Is()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:Is()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Is()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Is()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:Is()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Is()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Is()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:Is()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Is()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var o=[...s,n].slice(-3);t.yAxis[r]=vz(vz({},t.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:drt,replaceXAxis:frt,removeXAxis:hrt,addYAxis:Art,replaceYAxis:mrt,removeYAxis:prt,addZAxis:Iit,replaceZAxis:jit,removeZAxis:Pit,updateYAxisWidth:grt}=mue.actions,xrt=mue.reducer,vrt=qt([wo],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),yrt=qt([vrt,EA,SA],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),pue=()=>on(yrt),yz=(t,e,r)=>{var n=r??t;if(!Go(n))return Hl(n,e,0)},brt=(t,e,r)=>{var n={},a=t.filter(WP),s=t.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,A=f.map(m=>m.dataKey),h=yz(e,r,f[0].barSize);return{stackId:d,dataKeys:A,barSize:h}}),c=s.map(u=>{var d=[u.dataKey].filter(A=>A!=null),f=yz(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]};function bz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function b_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bz(Object(r),!0).forEach(function(n){wrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wrt(t,e,r){return(e=Nrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nrt(t){var e=Crt(t,"string");return typeof e=="symbol"?e:e+""}function Crt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _rt(t,e,r,n,a){var s=n.length;if(!(s<1)){var o=Hl(t,r,0,!0),l,c=[];if(ai(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((v,y)=>v+(y.barSize||0),0);f+=(s-1)*o,f>=r&&(f-=(s-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var A=(r-f)/2>>0,h={offset:A-o,size:0};l=n.reduce((v,y)=>{var b,w={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:h.offset+h.size+o,size:u?d:(b=y.barSize)!==null&&b!==void 0?b:0}},P=[...v,w];return h=P[P.length-1].position,P},c)}else{var m=Hl(e,r,0,!0);r-2*m-(s-1)*o<=0&&(o=0);var p=(r-2*m-(s-1)*o)/s;p>1&&(p>>=0);var g=ai(a)?Math.min(p,a):p;l=n.reduce((v,y,b)=>[...v,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:m+(p+o)*b+(p-g)/2,size:g}}],c)}return l}}var Ert=(t,e,r,n,a,s,o)=>{var l=Go(o)?e:o,c=_rt(r,n,a!==s?a:s,t,l);return a!==s&&c!=null&&(c=c.map(u=>b_(b_({},u),{},{position:b_(b_({},u.position),{},{offset:u.position.offset-a/2})}))),c},Srt=(t,e)=>{var r=OM(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}};function Irt(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&ai(t.zIndex)?t.zIndex:e}var gue=t=>{var{chartData:e}=t,r=hs(),n=Su();return x.useEffect(()=>n?()=>{}:(r(Rq(e)),()=>{r(Rq(void 0))}),[e,r,n]),null},wz={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},xue=$c({name:"brush",initialState:wz,reducers:{setBrushSettings(t,e){return e.payload==null?wz:e.payload}}}),{setBrushSettings:Bit}=xue.actions,jrt=xue.reducer;function Prt(t,e,r){return(e=Brt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Brt(t){var e=Trt(t,"string");return typeof e=="symbol"?e:e+""}function Trt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class N8{static create(e){return new N8(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}Prt(N8,"EPS",1e-4);function krt(t){return(t%180+180)%180}var Frt=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=krt(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Ort={dots:[],areas:[],lines:[]},vue=$c({name:"referenceElements",initialState:Ort,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=nf(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=nf(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=nf(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Tit,removeDot:kit,addArea:Fit,removeArea:Oit,addLine:Dit,removeLine:Rit}=vue.actions,Drt=vue.reducer,Rrt=x.createContext(void 0),Mrt=t=>{var{children:e}=t,[r]=x.useState("".concat(H2("recharts"),"-clip")),n=pue();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return x.createElement(Rrt.Provider,{value:r},x.createElement("defs",null,x.createElement("clipPath",{id:r},x.createElement("rect",{x:a,y:s,height:l,width:o}))),e)};function yue(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var a=t[n];a!==void 0&&r.push(a)}return r}function Lrt(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return Frt(n,r)}function Urt(t,e,r){var n=r==="width",{x:a,y:s,width:o,height:l}=t;return e===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function nw(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function Qrt(t,e){return yue(t,e+1)}function Vrt(t,e,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=e,c=0,u=1,d=o,f=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:yue(n,u)};var p=c,g,v=()=>(g===void 0&&(g=r(m,p)),g),y=m.coordinate,b=c===0||nw(t,y,v,d,l);b||(c=0,d=o,u+=1),b&&(d=y+t*(v()/2+a),c+=u)},A;u<=s.length;)if(A=f(),A)return A.v;return[]}function Hrt(t,e,r,n,a){var s=(n||[]).slice(),o=s.length;if(o===0)return[];for(var{start:l,end:c}=e,u=1;u<=o;u++){for(var d=(o-1)%u,f=l,A=!0,h=function(){var y=n[m],b=m,w,P=()=>(w===void 0&&(w=r(y,b)),w),j=y.coordinate,_=m===d||nw(t,j,P,f,c);if(!_)return A=!1,1;_&&(f=j+t*(P()/2+a))},m=d;m<o&&!h();m+=u);if(A){for(var p=[],g=d;g<o;g+=u)p.push(n[g]);return p}}return[]}function Nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nz(Object(r),!0).forEach(function(n){$rt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $rt(t,e,r){return(e=Grt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Grt(t){var e=Krt(t,"string");return typeof e=="symbol"?e:e+""}function Krt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qrt(t,e,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=e,{end:c}=e,u=function(A){var h=s[A],m,p=()=>(m===void 0&&(m=r(h,A)),m);if(A===o-1){var g=t*(h.coordinate+t*p()/2-c);s[A]=h=Fl(Fl({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate})}else s[A]=h=Fl(Fl({},h),{},{tickCoord:h.coordinate});if(h.tickCoord!=null){var v=nw(t,h.tickCoord,p,l,c);v&&(c=h.tickCoord-t*(p()/2+a),s[A]=Fl(Fl({},h),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return s}function zrt(t,e,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=e;if(s){var d=n[l-1],f=r(d,l-1),A=t*(d.coordinate+t*f/2-u);if(o[l-1]=d=Fl(Fl({},d),{},{tickCoord:A>0?d.coordinate-A*t:d.coordinate}),d.tickCoord!=null){var h=nw(t,d.tickCoord,()=>f,c,u);h&&(u=d.tickCoord-t*(f/2+a),o[l-1]=Fl(Fl({},d),{},{isShow:!0}))}}for(var m=s?l-1:l,p=function(y){var b=o[y],w,P=()=>(w===void 0&&(w=r(b,y)),w);if(y===0){var j=t*(b.coordinate-t*P()/2-c);o[y]=b=Fl(Fl({},b),{},{tickCoord:j<0?b.coordinate-j*t:b.coordinate})}else o[y]=b=Fl(Fl({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var _=nw(t,b.tickCoord,P,c,u);_&&(c=b.tickCoord+t*(P()/2+a),o[y]=Fl(Fl({},b),{},{isShow:!0}))}},g=0;g<m;g++)p(g);return o}function Wrt(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=t;if(!a||!a.length||!n)return[];if(fn(c)||RP.isSsr){var A;return(A=Qrt(a,fn(c)?c:0))!==null&&A!==void 0?A:[]}var h=[],m=l==="top"||l==="bottom"?"width":"height",p=d&&m==="width"?Db(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},g=(b,w)=>{var P=typeof u=="function"?u(b.value,w):b.value;return m==="width"?Lrt(Db(P,{fontSize:e,letterSpacing:r}),p,f):Db(P,{fontSize:e,letterSpacing:r})[m]},v=a.length>=2?ml(a[1].coordinate-a[0].coordinate):1,y=Urt(s,v,m);return c==="equidistantPreserveStart"?Vrt(v,y,g,a,o):c==="equidistantPreserveEnd"?Hrt(v,y,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=zrt(v,y,g,a,o,c==="preserveStartEnd"):h=qrt(v,y,g,a,o),h.filter(b=>b.isShow))}var Xrt=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},Yrt=["axisLine","width","height","className","hide","ticks","axisType"];function Jrt(t,e){if(t==null)return{};var r,n,a=Zrt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Zrt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function xg(){return xg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xg.apply(null,arguments)}function Cz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cz(Object(r),!0).forEach(function(n){ent(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ent(t,e,r){return(e=tnt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tnt(t){var e=rnt(t,"string");return typeof e=="symbol"?e:e+""}function rnt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qp={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ql.axis};function nnt(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=$i($i($i({},c),zf(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);u=$i($i({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var f=+(s==="left"&&!o||s==="right"&&o);u=$i($i({},u),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+a})}return x.createElement("line",xg({},u,{className:Ga("recharts-cartesian-axis-line",fg(l,"className"))}))}function ant(t,e,r,n,a,s,o,l,c){var u,d,f,A,h,m,p=l?-1:1,g=t.tickSize||o,v=fn(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,A=r+ +!l*a,f=A-p*g,m=f-p*c,h=v;break;case"left":f=A=t.coordinate,d=e+ +!l*n,u=d-p*g,h=u-p*c,m=v;break;case"right":f=A=t.coordinate,d=e+ +l*n,u=d+p*g,h=u+p*c,m=v;break;default:u=d=t.coordinate,A=r+ +l*a,f=A+p*g,m=f+p*c,h=v;break}return{line:{x1:u,y1:f,x2:d,y2:A},tick:{x:h,y:m}}}function snt(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function int(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function ont(t){var{option:e,tickProps:r,value:n}=t,a,s=Ga(r.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(e))a=x.cloneElement(e,$i($i({},r),{},{className:s}));else if(typeof e=="function")a=e($i($i({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=Ga(o,e==null?void 0:e.className)),a=x.createElement(n4,xg({},r,{className:o}),n)}return a}var lnt=x.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:f,x:A,y:h,width:m,height:p,tickSize:g,tickMargin:v,fontSize:y,letterSpacing:b,getTicksConfig:w,events:P,axisType:j}=t,_=Wrt($i($i({},w),{},{ticks:r}),y,b),I=snt(d,f),E=int(d,f),F=zf(w),k=V2(n),B={};typeof a=="object"&&(B=a);var R=$i($i({},F),{},{fill:"none"},B),Y=_.map(he=>$i({entry:he},ant(he,A,h,m,p,d,g,f,v))),me=Y.map(he=>{var{entry:ge,line:se}=he;return x.createElement(Ac,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ge.value,"-").concat(ge.coordinate,"-").concat(ge.tickCoord)},a&&x.createElement("line",xg({},R,se,{className:Ga("recharts-cartesian-axis-tick-line",fg(a,"className"))})))}),pe=Y.map((he,ge)=>{var{entry:se,tick:je}=he,Te=$i($i($i($i({textAnchor:I,verticalAnchor:E},F),{},{stroke:"none",fill:s},k),je),{},{index:ge,payload:se,visibleTicksCount:_.length,tickFormatter:o,padding:c},u);return x.createElement(Ac,xg({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(se.value,"-").concat(se.coordinate,"-").concat(se.tickCoord)},Hw(P,se,ge)),n&&x.createElement(ont,{option:n,tickProps:Te,value:"".concat(typeof o=="function"?o(se.value,ge):se.value).concat(l||"")}))});return x.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(j,"-ticks")},pe.length>0&&x.createElement(ah,{zIndex:Ql.label},x.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(j,"-tick-labels"),ref:e},pe)),me.length>0&&x.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(j,"-tick-lines")},me))}),cnt=x.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:o,ticks:l,axisType:c}=t,u=Jrt(t,Yrt),[d,f]=x.useState(""),[A,h]=x.useState(""),m=x.useRef(null);x.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var g;return Xrt({ticks:m.current,label:(g=t.labelRef)===null||g===void 0?void 0:g.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=x.useCallback(g=>{if(g){var v=g.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=v;var y=v[0];if(y){var b=window.getComputedStyle(y),w=b.fontSize,P=b.letterSpacing;(w!==d||P!==A)&&(f(w),h(P))}}},[d,A]);return o||n!=null&&n<=0||a!=null&&a<=0?null:x.createElement(ah,{zIndex:t.zIndex},x.createElement(Ac,{className:Ga("recharts-cartesian-axis",s)},x.createElement(nnt,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:zf(t)}),x.createElement(lnt,{ref:p,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:A,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),x.createElement(xet,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},x.createElement(jet,{label:t.label,labelRef:t.labelRef}),t.children)))}),C8=x.forwardRef((t,e)=>{var r=xl(t,Qp);return x.createElement(cnt,xg({},r,{ref:e}))});C8.displayName="CartesianAxis";var unt={},bue=$c({name:"errorBars",initialState:unt,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Mit,replaceErrorBar:Lit,removeErrorBar:Uit}=bue.actions,dnt=bue.reducer,fnt=["children"];function hnt(t,e){if(t==null)return{};var r,n,a=Ant(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ant(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var mnt={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},pnt=x.createContext(mnt);function gnt(t){var{children:e}=t,r=hnt(t,fnt);return x.createElement(pnt.Provider,{value:r},e)}function wue(t,e){var r,n,a=on(u=>PA(u,t)),s=on(u=>BA(u,e)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Po.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Bo.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function xnt(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=pue(),{needClipX:s,needClipY:o,needClip:l}=wue(e,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:f}=a;return x.createElement("clipPath",{id:"clipPath-".concat(n)},x.createElement("rect",{x:s?c:c-d/2,y:o?u:u-f/2,width:s?d:d*2,height:o?f:f*2}))}var vnt={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cN=x;function ynt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bnt=typeof Object.is=="function"?Object.is:ynt,wnt=cN.useSyncExternalStore,Nnt=cN.useRef,Cnt=cN.useEffect,_nt=cN.useMemo,Ent=cN.useDebugValue;vnt.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=Nnt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=_nt(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var m=o.value;if(a(m,h))return f=m}return f=h}if(m=f,bnt(d,h))return m;var p=n(h);return a!==void 0&&a(m,p)?(d=h,m):(d=h,f=p)}var u=!1,d,f,A=r===void 0?null:r;return[function(){return c(e())},A===null?void 0:function(){return c(A())}]},[e,r,n,a]);var l=wnt(t,s[0],s[1]);return Cnt(function(){o.hasValue=!0,o.value=l},[l]),Ent(l),l};function Snt(t){t()}function Int(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Snt(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var _z={notify(){},get:()=>[]};function jnt(t,e){let r,n=_z,a=0,s=!1;function o(p){d();const g=n.subscribe(p);let v=!1;return()=>{v||(v=!0,g(),f())}}function l(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=Int())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=_z)}function A(){s||(s=!0,d())}function h(){s&&(s=!1,f())}const m={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:A,tryUnsubscribe:h,getListeners:()=>n};return m}var Pnt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bnt=Pnt(),Tnt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",knt=Tnt(),Fnt=()=>Bnt||knt?x.useLayoutEffect:x.useEffect,Ont=Fnt();function Ez(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Dnt(t,e){if(Ez(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!Ez(t[r[a]],e[r[a]]))return!1;return!0}var xB=Symbol.for("react-redux-context"),vB=typeof globalThis<"u"?globalThis:{};function Rnt(){if(!x.createContext)return{};const t=vB[xB]??(vB[xB]=new Map);let e=t.get(x.createContext);return e||(e=x.createContext(null),t.set(x.createContext,e)),e}var Mnt=Rnt();function Lnt(t){const{children:e,context:r,serverState:n,store:a}=t,s=x.useMemo(()=>{const c=jnt(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=x.useMemo(()=>a.getState(),[a]);Ont(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||Mnt;return x.createElement(l.Provider,{value:s},e)}var Unt=Lnt,Qnt=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Vnt(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function _8(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(Qnt.has(n)){if(t[n]==null&&e[n]==null)continue;if(!Dnt(t[n],e[n]))return!1}else if(!Vnt(t[n],e[n]))return!1;return!0}function Lg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:Aue}function Ug(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:Aue}var Hnt="Invariant failed";function $nt(t,e){throw new Error(Hnt)}function tO(){return tO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tO.apply(null,arguments)}function MI(t){return x.createElement(cue,tO({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Gnt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(fn(e))return e;var s=fn(n)||Go(n);return s?e(n,a):(s||$nt(),r)}},Knt=(t,e,r)=>r,qnt=(t,e)=>e,uN=qt([MM,qnt],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),znt=qt([uN],t=>t==null?void 0:t.maxBarSize),Wnt=(t,e,r,n)=>n,Xnt=qt([ya,MM,Lg,Ug,Knt],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Ynt=(t,e,r)=>{var n=ya(t),a=Lg(t,e),s=Ug(t,e);if(!(a==null||s==null))return n==="horizontal"?zF(t,"yAxis",s,r):zF(t,"xAxis",a,r)},Jnt=(t,e)=>{var r=ya(t),n=Lg(t,e),a=Ug(t,e);if(!(n==null||a==null))return r==="horizontal"?Eq(t,"xAxis",n):Eq(t,"yAxis",a)},Znt=qt([Xnt,yXe,Jnt],brt),eat=(t,e,r)=>{var n,a,s=uN(t,e);if(s!=null){var o=Lg(t,e),l=Ug(t,e);if(!(o==null||l==null)){var c=ya(t),u=Ple(t),{maxBarSize:d}=s,f=Go(d)?u:d,A,h;return c==="horizontal"?(A=qv(t,"xAxis",o,r),h=Kv(t,"xAxis",o,r)):(A=qv(t,"yAxis",l,r),h=Kv(t,"yAxis",l,r)),(n=(a=fI(A,h,!0))!==null&&a!==void 0?a:f)!==null&&n!==void 0?n:0}}},Nue=(t,e,r)=>{var n=ya(t),a=Lg(t,e),s=Ug(t,e);if(!(a==null||s==null)){var o,l;return n==="horizontal"?(o=qv(t,"xAxis",a,r),l=Kv(t,"xAxis",a,r)):(o=qv(t,"yAxis",s,r),l=Kv(t,"yAxis",s,r)),fI(o,l)}},tat=qt([Znt,Ple,vXe,Ble,eat,Nue,znt],Ert),rat=(t,e,r)=>{var n=Lg(t,e);if(n!=null)return qv(t,"xAxis",n,r)},nat=(t,e,r)=>{var n=Ug(t,e);if(n!=null)return qv(t,"yAxis",n,r)},aat=(t,e,r)=>{var n=Lg(t,e);if(n!=null)return Kv(t,"xAxis",n,r)},sat=(t,e,r)=>{var n=Ug(t,e);if(n!=null)return Kv(t,"yAxis",n,r)},iat=qt([tat,uN],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),oat=qt([Ynt,uN],Srt),lat=qt([wo,ZR,rat,nat,aat,sat,iat,ya,oXe,Nue,oat,uN,Wnt],(t,e,r,n,a,s,o,l,c,u,d,f,A)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:p}=c;if(!(f==null||o==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:g}=f,v;if(g!=null&&g.length>0?v=g:v=h==null?void 0:h.slice(m,p+1),v!=null)return Rat({layout:l,barSettings:f,pos:o,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:v,offset:t,cells:A,dataStartIndex:m})}}),cat=["index"];function rO(){return rO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rO.apply(null,arguments)}function uat(t,e){if(t==null)return{};var r,n,a=dat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function dat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Cue=x.createContext(void 0),fat=t=>{var e=x.useContext(Cue);if(e!=null)return e.stackId;if(t!=null)return lGe(t)},hat=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Aat=t=>{var e=x.useContext(Cue);if(e!=null){var{stackId:r}=e;return"url(#".concat(hat(r,t),")")}},mat=t=>{var{index:e}=t,r=uat(t,cat),n=Aat(e);return x.createElement(Ac,rO({className:"recharts-bar-stack-layer",clipPath:n},r))},pat=["onMouseEnter","onMouseLeave","onClick"],gat=["value","background","tooltipPosition"],xat=["id"],vat=["onMouseEnter","onClick","onMouseLeave"];function mA(){return mA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mA.apply(null,arguments)}function Sz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sz(Object(r),!0).forEach(function(n){yat(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yat(t,e,r){return(e=bat(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bat(t){var e=wat(t,"string");return typeof e=="symbol"?e:e+""}function wat(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LI(t,e){if(t==null)return{};var r,n,a=Nat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Nat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Cat=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:SP(r,e),payload:t}]},_at=x.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:SP(s,e),hide:o,type:c,color:a,unit:l,graphicalItemId:u}};return x.createElement(uue,{tooltipEntrySettings:d})});function Eat(t){var e=on(gg),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=LI(s,pat),d=y8(o,n,s.id),f=b8(l),A=w8(c,n,s.id);if(!a||r==null)return null;var h=V2(a);return x.createElement(ah,{zIndex:Irt(a,Ql.barBackground)},r.map((m,p)=>{var{value:g,background:v,tooltipPosition:y}=m,b=LI(m,gat);if(!v)return null;var w=d(m,p),P=f(m,p),j=A(m,p),_=lc(lc(lc(lc(lc({option:a,isActive:String(p)===e},b),{},{fill:"#eee"},v),h),Hw(u,m,p)),{},{onMouseEnter:w,onMouseLeave:P,onClick:j,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return x.createElement(MI,mA({key:"background-bar-".concat(p)},_))}))}function Sat(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return lc(lc({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return x.createElement(Det,{value:e?a:void 0},r)}function Iat(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:o}=t,l=on(gg),c=on(c8),u=r&&String(s)===l&&(c==null||o===c),d=u?r:e;return u?x.createElement(ah,{zIndex:Ql.activeBar},x.createElement(MI,mA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))):x.createElement(MI,mA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))}function jat(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return x.createElement(MI,mA({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function Pat(t){var e,{data:r,props:n}=t,a=(e=zf(n))!==null&&e!==void 0?e:{},{id:s}=a,o=LI(a,xat),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:A}=n,h=LI(n,vat),m=y8(d,c,s),p=b8(A),g=w8(f,c,s);return r?x.createElement(x.Fragment,null,r.map((v,y)=>x.createElement(mat,mA({index:y,key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(y),className:"recharts-bar-rectangle"},Hw(h,v,y),{onMouseEnter:m(v,y),onMouseLeave:p(v,y),onClick:g(v,y)}),u?x.createElement(Iat,{shape:l,activeBar:u,baseProps:o,entry:v,index:y,dataKey:c}):x.createElement(jat,{shape:l,baseProps:o,entry:v,index:y,dataKey:c})))):null}function Bat(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,f=r.current,A=LP(e,"recharts-bar-"),[h,m]=x.useState(!1),p=!h,g=x.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),v=x.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return x.createElement(Sat,{showLabels:p,rects:n},x.createElement(MP,{animationId:A,begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:v,key:A},y=>{var b=y===1?n:n==null?void 0:n.map((w,P)=>{var j=f&&f[P];if(j)return lc(lc({},w),{},{x:uo(j.x,w.x,y),y:uo(j.y,w.y,y),width:uo(j.width,w.width,y),height:uo(j.height,w.height,y)});if(a==="horizontal"){var _=uo(0,w.height,y),I=uo(w.stackedBarStart,w.y,y);return lc(lc({},w),{},{y:I,height:_})}var E=uo(0,w.width,y),F=uo(w.stackedBarStart,w.x,y);return lc(lc({},w),{},{width:E,x:F})});return y>0&&(r.current=b??null),b==null?null:x.createElement(Ac,null,x.createElement(Pat,{props:e,data:b}))}),x.createElement(tue,{label:e.label}),e.children)}function Tat(t){var e=x.useRef(null);return x.createElement(Bat,{previousRectanglesRef:e,props:t})}var _ue=0,kat=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:ws(t,e)}};class Fat extends x.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=Ga("recharts-bar",a),f=u;return x.createElement(Ac,{className:d,id:u},l&&x.createElement("defs",null,x.createElement(xnt,{clipPathId:f,xAxisId:s,yAxisId:o})),x.createElement(Ac,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},x.createElement(Eat,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),x.createElement(Tat,this.props)))}}var Oat={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:_ue,xAxisId:0,yAxisId:0,zIndex:Ql.bar};function Dat(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:f}=wue(e,r),A=qw(),h=Su(),m=v8(t.children,lN),p=on(y=>lat(y,t.id,h,m));if(A!=="vertical"&&A!=="horizontal")return null;var g,v=p==null?void 0:p[0];return v==null||v.height==null||v.width==null?g=0:g=A==="vertical"?v.height/2:v.width/2,x.createElement(gnt,{xAxisId:e,yAxisId:r,data:p,dataPointFormatter:kat,errorBarOffset:g},x.createElement(Fat,mA({},t,{layout:A,needClip:f,data:p,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function Rat(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:A,cells:h,parentViewBox:m,dataStartIndex:p}=t,g=e==="horizontal"?l:o,v=d?g.scale.domain():null,y=cGe({numericAxis:g}),b=g.scale(y);return f.map((w,P)=>{var j,_,I,E,F,k;if(d){var B=d[P+p];if(B==null)return null;j=nGe(B,v)}else j=ws(w,r),Array.isArray(j)||(j=[y,j]);var R=Gnt(n,_ue)(j[1],P);if(e==="horizontal"){var Y,[me,pe]=[l.scale(j[0]),l.scale(j[1])];_=DG({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:w,index:P}),I=(Y=pe??me)!==null&&Y!==void 0?Y:void 0,E=a.size;var he=me-pe;if(F=Wf(he)?0:he,k={x:_,y:A.top,width:E,height:A.height},Math.abs(R)>0&&Math.abs(F)<Math.abs(R)){var ge=ml(F||R)*(Math.abs(R)-Math.abs(F));I-=ge,F+=ge}}else{var[se,je]=[o.scale(j[0]),o.scale(j[1])];if(_=se,I=DG({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:w,index:P}),E=je-se,F=a.size,k={x:A.left,y:I,width:A.width,height:F},Math.abs(R)>0&&Math.abs(E)<Math.abs(R)){var Te=ml(E||R)*(Math.abs(R)-Math.abs(E));E+=Te}}if(_==null||I==null||E==null||F==null)return null;var D=lc(lc({},w),{},{stackedBarStart:b,x:_,y:I,width:E,height:F,value:d?j:j[1],payload:w,background:k,tooltipPosition:{x:_+E/2,y:I+F/2},parentViewBox:m},h&&h[P]&&h[P].props);return D}).filter(Boolean)}function Mat(t){var e=xl(t,Oat),r=fat(e.stackId),n=Su();return x.createElement(due,{id:e.id,type:"bar"},a=>x.createElement(x.Fragment,null,x.createElement(ytt,{legendPayload:Cat(e)}),x.createElement(_at,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),x.createElement(Ftt,{type:"bar",id:a,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),x.createElement(ah,{zIndex:e.zIndex},x.createElement(Dat,mA({},e,{id:a})))))}var nO=x.memo(Mat,_8);nO.displayName="Bar";var Lat=["domain","range"],Uat=["domain","range"];function Iz(t,e){if(t==null)return{};var r,n,a=Qat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Qat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function jz(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Eue(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=Iz(t,Lat),{domain:s,range:o}=e,l=Iz(e,Uat);return!jz(r,s)||!jz(n,o)?!1:_8(a,l)}var Vat=["dangerouslySetInnerHTML","ticks","scale"],Hat=["id","scale"];function aO(){return aO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aO.apply(null,arguments)}function Pz(t,e){if(t==null)return{};var r,n,a=$at(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function $at(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Gat(t){var e=hs(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?e(drt(t)):r.current!==t&&e(frt({prev:r.current,next:t})),r.current=t},[t,e]),x.useLayoutEffect(()=>()=>{r.current&&(e(hrt(r.current)),r.current=null)},[e]),null}var Kat=t=>{var{xAxisId:e,className:r}=t,n=on(ZR),a=Su(),s="xAxis",o=on(v=>cce(v,s,e,a)),l=on(v=>sce(v,e)),c=on(v=>gYe(v,e)),u=on(v=>Ule(v,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:A}=t,h=Pz(t,Vat),{id:m,scale:p}=u,g=Pz(u,Hat);return x.createElement(C8,aO({},h,g,{x:c.x,y:c.y,width:l.width,height:l.height,className:Ga("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o,axisType:s}))},qat={allowDataOverflow:Po.allowDataOverflow,allowDecimals:Po.allowDecimals,allowDuplicatedCategory:Po.allowDuplicatedCategory,angle:Po.angle,axisLine:Qp.axisLine,height:Po.height,hide:!1,includeHidden:Po.includeHidden,interval:Po.interval,minTickGap:Po.minTickGap,mirror:Po.mirror,orientation:Po.orientation,padding:Po.padding,reversed:Po.reversed,scale:Po.scale,tick:Po.tick,tickCount:Po.tickCount,tickLine:Qp.tickLine,tickSize:Qp.tickSize,type:Po.type,xAxisId:0},zat=t=>{var e=xl(t,qat);return x.createElement(x.Fragment,null,x.createElement(Gat,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),x.createElement(Kat,e))},Sue=x.memo(zat,Eue);Sue.displayName="XAxis";var Wat=["dangerouslySetInnerHTML","ticks","scale"],Xat=["id","scale"];function sO(){return sO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sO.apply(null,arguments)}function Bz(t,e){if(t==null)return{};var r,n,a=Yat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Yat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Jat(t){var e=hs(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?e(Art(t)):r.current!==t&&e(mrt({prev:r.current,next:t})),r.current=t},[t,e]),x.useLayoutEffect(()=>()=>{r.current&&(e(prt(r.current)),r.current=null)},[e]),null}var Zat=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=x.useRef(null),o=x.useRef(null),l=on(ZR),c=Su(),u=hs(),d="yAxis",f=on(j=>ice(j,e)),A=on(j=>vYe(j,e)),h=on(j=>cce(j,d,e,c)),m=on(j=>Qle(j,e));if(x.useLayoutEffect(()=>{if(!(n!=="auto"||!f||A8(a)||x.isValidElement(a)||m==null)){var j=s.current;if(j){var _=j.getCalculatedWidth();Math.round(f.width)!==Math.round(_)&&u(grt({id:e,width:_}))}}},[h,f,u,a,e,n,m]),f==null||A==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:v}=t,y=Bz(t,Wat),{id:b,scale:w}=m,P=Bz(m,Xat);return x.createElement(C8,sO({},y,P,{ref:s,labelRef:o,x:A.x,y:A.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:Ga("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:h,axisType:d}))},est={allowDataOverflow:Bo.allowDataOverflow,allowDecimals:Bo.allowDecimals,allowDuplicatedCategory:Bo.allowDuplicatedCategory,angle:Bo.angle,axisLine:Qp.axisLine,hide:!1,includeHidden:Bo.includeHidden,interval:Bo.interval,minTickGap:Bo.minTickGap,mirror:Bo.mirror,orientation:Bo.orientation,padding:Bo.padding,reversed:Bo.reversed,scale:Bo.scale,tick:Bo.tick,tickCount:Bo.tickCount,tickLine:Qp.tickLine,tickSize:Qp.tickSize,type:Bo.type,width:Bo.width,yAxisId:0},tst=t=>{var e=xl(t,est);return x.createElement(x.Fragment,null,x.createElement(Jat,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),x.createElement(Zat,e))},Iue=x.memo(tst,Eue);Iue.displayName="YAxis";var rst=(t,e)=>e,E8=qt([rst,ya,Mle,Co,_ce,TA,FJe,wo],QJe),S8=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},jue=vd("mouseClick"),Pue=Gw();Pue.startListening({actionCreator:jue,effect:(t,e)=>{var r=t.payload,n=E8(e.getState(),S8(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(kYe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var iO=vd("mouseMove"),Bue=Gw(),w_=null;Bue.startListening({actionCreator:iO,effect:(t,e)=>{var r=t.payload;w_!==null&&cancelAnimationFrame(w_);var n=S8(r);w_=requestAnimationFrame(()=>{var a=e.getState(),s=n8(a,a.tooltip.settings.shared);if(s==="axis"){var o=E8(a,n);(o==null?void 0:o.activeIndex)!=null?e.dispatch(gce({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(pce())}w_=null})}});function nst(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var Tz={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Tue=$c({name:"rootProps",initialState:Tz,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:Tz.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),ast=Tue.reducer,{updateOptions:sst}=Tue.actions,kue=$c({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:ist}=kue.actions,ost=kue.reducer,Fue=vd("keyDown"),Oue=vd("focus"),I8=Gw();I8.startListening({actionCreator:Fue,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=a8(a,S1(r),nN(r),iN(r)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=TA(r);if(s==="Enter"){var u=FI(r,"axis","hover",String(a.index));e.dispatch(XF({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=NYe(r),f=d==="left-to-right"?1:-1,A=s==="ArrowRight"?1:-1,h=l+A*f;if(!(c==null||h>=c.length||h<0)){var m=FI(r,"axis","hover",String(h));e.dispatch(XF({active:!0,activeIndex:h.toString(),activeCoordinate:m}))}}}}}});I8.startListening({actionCreator:Oue,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=FI(r,"axis","hover",String(s));e.dispatch(XF({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var zu=vd("externalEvent"),Due=Gw(),yB=new Map;Due.startListening({actionCreator:zu,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=yB.get(a);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:vJe(l),activeDataKey:c8(l),activeIndex:gg(l),activeLabel:Ice(l),activeTooltipIndex:gg(l),isTooltipActive:yJe(l)};r(c,n)}finally{yB.delete(a)}});yB.set(a,o)}}});var lst=qt([_1],t=>t.tooltipItemPayloads),cst=qt([lst,sN,(t,e)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(l=>l.settings.graphicalItemId===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=e(s,r);return o}}}),Rue=vd("touchMove"),Mue=Gw();Mue.startListening({actionCreator:Rue,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=n8(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var o=E8(n,S8({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(gce({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(toe),f=(l=u.getAttribute(roe))!==null&&l!==void 0?l:void 0,A=E1(n).find(p=>p.id===f);if(d==null||A==null||f==null)return;var{dataKey:h}=A,m=cst(n,d,f);e.dispatch(mce({activeDataKey:h,activeIndex:d,activeCoordinate:m,activeGraphicalItemId:f}))}}}});var ust=_ie({brush:jrt,cartesianAxis:xrt,chartData:gZe,errorBars:dnt,graphicalItems:Ttt,layout:Y$e,legend:rKe,options:fZe,polarAxis:qet,polarOptions:ost,referenceElements:Drt,rootProps:ast,tooltip:FYe,zIndex:tZe}),dst=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return w$e({reducer:ust,preloadedState:e,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([Pue.middleware,Bue.middleware,I8.middleware,Due.middleware,Mue.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(Uie({type:"raf"}))},devTools:{serialize:{replacer:nst},name:"recharts-".concat(r)}})};function Lue(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=Su(),s=x.useRef(null);if(a)return r;s.current==null&&(s.current=dst(e,n));var o=$R;return x.createElement(Unt,{context:o,store:s.current},r)}function fst(t){var{layout:e,margin:r}=t,n=hs(),a=Su();return x.useEffect(()=>{a||(n(z$e(e)),n(q$e(r)))},[n,a,e,r]),null}var Uue=x.memo(fst,_8);function Que(t){var e=hs();return x.useEffect(()=>{e(sst(t))},[e,t]),null}function kz(t){var{zIndex:e,isPanorama:r}=t,n=x.useRef(null),a=hs();return x.useLayoutEffect(()=>(n.current&&a(ZJe({zIndex:e,element:n.current,isPanorama:r})),()=>{a(eZe({zIndex:e,isPanorama:r}))}),[a,e,r]),x.createElement("g",{tabIndex:-1,ref:n})}function Fz(t){var{children:e,isPanorama:r}=t,n=on(HJe);if(!n||n.length===0)return e;var a=n.filter(o=>o<0),s=n.filter(o=>o>0);return x.createElement(x.Fragment,null,a.map(o=>x.createElement(kz,{key:o,zIndex:o,isPanorama:r})),e,s.map(o=>x.createElement(kz,{key:o,zIndex:o,isPanorama:r})))}var hst=["children"];function Ast(t,e){if(t==null)return{};var r,n,a=mst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function mst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function UI(){return UI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UI.apply(null,arguments)}var pst={width:"100%",height:"100%",display:"block"},gst=x.forwardRef((t,e)=>{var r=uoe(),n=doe(),a=woe();if(!ym(r)||!ym(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=t,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0),x.createElement(jR,UI({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:pst,ref:e}),s)}),xst=t=>{var{children:e}=t,r=on(BP);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return x.createElement(jR,{width:n,height:a,x:o,y:s},e)},Oz=x.forwardRef((t,e)=>{var{children:r}=t,n=Ast(t,hst),a=Su();return a?x.createElement(xst,null,x.createElement(Fz,{isPanorama:!0},r)):x.createElement(gst,UI({ref:e},n),x.createElement(Fz,{isPanorama:!1},r))});function vst(){var t=hs(),[e,r]=x.useState(null),n=on(mGe);return x.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;ai(s)&&s!==n&&t(X$e(s))}},[e,t,n]),r}function Dz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yst(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dz(Object(r),!0).forEach(function(n){bst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bst(t,e,r){return(e=wst(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wst(t){var e=Nst(t,"string");return typeof e=="symbol"?e:e+""}function Nst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vg(){return vg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vg.apply(null,arguments)}var Cst=()=>(EZe(),null);function QI(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var _st=x.forwardRef((t,e)=>{var r,n,a=x.useRef(null),[s,o]=x.useState({containerWidth:QI((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:QI((n=t.style)===null||n===void 0?void 0:n.height)}),l=x.useCallback((u,d)=>{o(f=>{var A=Math.round(u),h=Math.round(d);return f.containerWidth===A&&f.containerHeight===h?f:{containerWidth:A,containerHeight:h}})},[]),c=x.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();l(d,f);var A=m=>{var{width:p,height:g}=m[0].contentRect;l(p,g)},h=new ResizeObserver(A);h.observe(u),a.current=h}},[e,l]);return x.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),x.createElement(x.Fragment,null,x.createElement(kP,{width:s.containerWidth,height:s.containerHeight}),x.createElement("div",vg({ref:c},t)))}),Est=x.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=x.useState({containerWidth:QI(r),containerHeight:QI(n)}),o=x.useCallback((c,u)=>{s(d=>{var f=Math.round(c),A=Math.round(u);return d.containerWidth===f&&d.containerHeight===A?d:{containerWidth:f,containerHeight:A}})},[]),l=x.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[e,o]);return x.createElement(x.Fragment,null,x.createElement(kP,{width:a.containerWidth,height:a.containerHeight}),x.createElement("div",vg({ref:l},t)))}),Sst=x.forwardRef((t,e)=>{var{width:r,height:n}=t;return x.createElement(x.Fragment,null,x.createElement(kP,{width:r,height:n}),x.createElement("div",vg({ref:e},t)))}),Ist=x.forwardRef((t,e)=>{var{width:r,height:n}=t;return cA(r)||cA(n)?x.createElement(Est,vg({},t,{ref:e})):x.createElement(Sst,vg({},t,{ref:e}))});function jst(t){return t===!0?_st:Ist}var Pst=x.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:A,onTouchEnd:h,onTouchMove:m,onTouchStart:p,style:g,width:v,responsive:y,dispatchTouchEvents:b=!0}=t,w=x.useRef(null),P=hs(),[j,_]=x.useState(null),[I,E]=x.useState(null),F=vst(),k=eM(),B=(k==null?void 0:k.width)>0?k.width:v,R=(k==null?void 0:k.height)>0?k.height:a,Y=x.useCallback(G=>{F(G),typeof e=="function"&&e(G),_(G),E(G),G!=null&&(w.current=G)},[F,e,_,E]),me=x.useCallback(G=>{P(jue(G)),P(zu({handler:s,reactEvent:G}))},[P,s]),pe=x.useCallback(G=>{P(iO(G)),P(zu({handler:u,reactEvent:G}))},[P,u]),he=x.useCallback(G=>{P(pce()),P(zu({handler:d,reactEvent:G}))},[P,d]),ge=x.useCallback(G=>{P(iO(G)),P(zu({handler:f,reactEvent:G}))},[P,f]),se=x.useCallback(()=>{P(Oue())},[P]),je=x.useCallback(G=>{P(Fue(G.key))},[P]),Te=x.useCallback(G=>{P(zu({handler:o,reactEvent:G}))},[P,o]),D=x.useCallback(G=>{P(zu({handler:l,reactEvent:G}))},[P,l]),K=x.useCallback(G=>{P(zu({handler:c,reactEvent:G}))},[P,c]),z=x.useCallback(G=>{P(zu({handler:A,reactEvent:G}))},[P,A]),Q=x.useCallback(G=>{P(zu({handler:p,reactEvent:G}))},[P,p]),J=x.useCallback(G=>{b&&P(Rue(G)),P(zu({handler:m,reactEvent:G}))},[P,b,m]),ee=x.useCallback(G=>{P(zu({handler:h,reactEvent:G}))},[P,h]),M=jst(y);return x.createElement(Oce.Provider,{value:j},x.createElement(Ese.Provider,{value:I},x.createElement(M,{width:B??(g==null?void 0:g.width),height:R??(g==null?void 0:g.height),className:Ga("recharts-wrapper",n),style:yst({position:"relative",cursor:"default",width:B,height:R},g),onClick:me,onContextMenu:Te,onDoubleClick:D,onFocus:se,onKeyDown:je,onMouseDown:K,onMouseEnter:pe,onMouseLeave:he,onMouseMove:ge,onMouseUp:z,onTouchEnd:ee,onTouchMove:J,onTouchStart:Q,ref:Y},x.createElement(Cst,null),r)))}),Bst=["width","height","responsive","children","className","style","compact","title","desc"];function Tst(t,e){if(t==null)return{};var r,n,a=kst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function kst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Vue=x.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:o,style:l,compact:c,title:u,desc:d}=t,f=Tst(t,Bst),A=zf(f);return c?x.createElement(x.Fragment,null,x.createElement(kP,{width:r,height:n}),x.createElement(Oz,{otherAttributes:A,title:u,desc:d},s)):x.createElement(Pst,{className:o,style:l,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},x.createElement(Oz,{otherAttributes:A,title:u,desc:d,ref:e},x.createElement(Mrt,null,s)))});function oO(){return oO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oO.apply(null,arguments)}var Fst={top:5,right:5,bottom:5,left:5},Ost={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Fst,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Dst=x.forwardRef(function(e,r){var n,a=xl(e.categoricalChartProps,Ost),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return x.createElement(Lue,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},x.createElement(gue,{chartData:u.data}),x.createElement(Uue,{layout:a.layout,margin:a.margin}),x.createElement(Que,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),x.createElement(Vue,oO({},a,{ref:r})))}),Rst=["axis","item"],Mst=x.forwardRef((t,e)=>x.createElement(Dst,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Rst,tooltipPayloadSearcher:Rce,categoricalChartProps:t,ref:e}));function Lst(t){var e=hs();return x.useEffect(()=>{e(ist(t))},[e,t]),null}var Ust=["layout"];function lO(){return lO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lO.apply(null,arguments)}function Qst(t,e){if(t==null)return{};var r,n,a=Vst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Vst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Hst={top:5,right:5,bottom:5,left:5},Hue={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Hst,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},$st=x.forwardRef(function(e,r){var n,a=xl(e.categoricalChartProps,Hue),{layout:s}=a,o=Qst(a,Ust),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return x.createElement(Lue,{preloadedState:{options:f},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},x.createElement(gue,{chartData:a.data}),x.createElement(Uue,{layout:s,margin:a.margin}),x.createElement(Que,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),x.createElement(Lst,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),x.createElement(Vue,lO({},o,{ref:r})))});function Rz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Mz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rz(Object(r),!0).forEach(function(n){Gst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gst(t,e,r){return(e=Kst(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kst(t){var e=qst(t,"string");return typeof e=="symbol"?e:e+""}function qst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zst=["item"],Wst=Mz(Mz({},Hue),{},{layout:"centric",startAngle:0,endAngle:360}),Xst=x.forwardRef((t,e)=>{var r=xl(t,Wst);return x.createElement($st,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:zst,tooltipPayloadSearcher:Rce,categoricalChartProps:r,ref:e})});const Yst="sellers_candies",N_="cash_deliveries_candies";function Na(t){const e=typeof t=="number"?t:parseFloat(String(t??"").replace(/,/g,""));return Number.isFinite(e)?e:0}function Ci(t){return Number.isFinite(t)?t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function C_(t,e){return t*e/100}function __(t,e,r){return t-e-r}function Lz(t){return t?jr(t.toDate(),"yyyy-MM-dd"):""}function E_(t){if(!t)return mr.fromDate(new Date);const[e,r,n]=t.split("-").map(s=>parseInt(s,10)),a=new Date(e,(r||1)-1,n||1,0,0,0,0);return mr.fromDate(a)}function Jst(){const t=new Date,[e,r]=x.useState(jr(wd(t),"yyyy-MM-dd")),[n,a]=x.useState(jr(bd(t),"yyyy-MM-dd")),[s,o]=x.useState([]),l=x.useMemo(()=>{const M=new Map;return s.forEach(G=>M.set(G.id,G)),M},[s]),[c,u]=x.useState([]),[d,f]=x.useState(!0),[A,h]=x.useState(()=>jr(new Date,"yyyy-MM-dd")),[m,p]=x.useState(""),[g,v]=x.useState(""),[y,b]=x.useState("0"),[w,P]=x.useState(""),[j,_]=x.useState(null),[I,E]=x.useState({}),F=x.useRef(null);x.useEffect(()=>{const M=er(At(De,Yst),bn("name","asc")),G=dd(M,ne=>{const ve=ne.docs.map(V=>{const qe=V.data();return{id:V.id,name:String((qe==null?void 0:qe.name)??""),branch:qe!=null&&qe.branch?String(qe.branch):"",commissionPercent:Na((qe==null?void 0:qe.commissionPercent)??0)}});o(ve)},()=>o([]));return()=>G()},[]),x.useEffect(()=>{f(!0);const M=E_(e),G=new Date(E_(n).toDate().getTime());G.setDate(G.getDate()+1);const ne=mr.fromDate(G),ve=er(At(De,N_),ur("date",">=",M),ur("date","<",ne),bn("date","desc")),V=dd(ve,qe=>{const ie=qe.docs.map(re=>{const Fe=re.data();return{id:re.id,date:Fe==null?void 0:Fe.date,sellerId:String((Fe==null?void 0:Fe.sellerId)??""),sellerName:String((Fe==null?void 0:Fe.sellerName)??""),amountDelivered:Na(Fe==null?void 0:Fe.amountDelivered),commissionPercent:Na(Fe==null?void 0:Fe.commissionPercent),commissionPaid:Na(Fe==null?void 0:Fe.commissionPaid),extraExpenses:Na(Fe==null?void 0:Fe.extraExpenses),totalFinal:Na(Fe==null?void 0:Fe.totalFinal),comment:String((Fe==null?void 0:Fe.comment)??""),createdAt:Fe==null?void 0:Fe.createdAt,updatedAt:Fe==null?void 0:Fe.updatedAt}});u(ie),f(!1)},qe=>{console.error("Firestore deliveries query error:",qe),u([]),f(!1),alert("Firestore query fall. Revis consola (probable ndice).")});return()=>V()},[e,n]);const k=x.useMemo(()=>m?l.get(m):void 0,[m,l]),B=Na((k==null?void 0:k.commissionPercent)??0),R=Na(g),Y=Na(y),me=C_(R,B),pe=__(R,me,Y),he=x.useMemo(()=>{var G;const M=new Map;for(const ne of c){const ve=ne.sellerId||ne.sellerName||"UNKNOWN",V=M.get(ve)??{sellerId:ne.sellerId,sellerName:ne.sellerName||((G=l.get(ne.sellerId))==null?void 0:G.name)||"Sin nombre",delivered:0,commission:0,totalFinal:0};V.delivered+=Na(ne.amountDelivered),V.commission+=Na(ne.commissionPaid),V.totalFinal+=Na(ne.totalFinal),M.set(ve,V)}return Array.from(M.values()).sort((ne,ve)=>ne.sellerName.localeCompare(ve.sellerName))},[c,l]),ge=x.useMemo(()=>{let M=0,G=0,ne=0,ve=0;for(const V of c)M+=Na(V.amountDelivered),G+=Na(V.commissionPaid),ne+=Na(V.extraExpenses),ve+=Na(V.totalFinal);return{delivered:M,commission:G,expenses:ne,totalFinal:ve}},[c]),se=x.useMemo(()=>he.map(M=>({name:M.sellerName,Entregado:Number(M.delivered.toFixed(2)),Comision:Number(M.commission.toFixed(2))})),[he]),je=x.useMemo(()=>[{name:"Total Entregado (Bruto)",value:Number(ge.delivered.toFixed(2))},{name:"Total Comisin",value:Number(ge.commission.toFixed(2))},{name:"Total Gastos",value:Number(ge.expenses.toFixed(2))}].filter(M=>M.value>0),[ge]),Te=["#3B82F6","#F59E0B","#EF4444"];async function D(){if(!m)return alert("Seleccion un vendedor.");if(R<=0)return alert("Ingres un Monto entregado vlido (> 0).");const M=l.get(m),G=(M==null?void 0:M.name)??"Sin nombre",ne=Na((M==null?void 0:M.commissionPercent)??0),ve=C_(R,ne),V=__(R,ve,Y);await Hn(At(De,N_),{date:E_(A),sellerId:m,sellerName:G,amountDelivered:R,commissionPercent:ne,commissionPaid:ve,extraExpenses:Y,totalFinal:V,comment:w??"",createdAt:mr.now()}),v(""),b("0"),P("")}function K(M){_(M.id),E({...M,dateInput:Lz(M.date)})}function z(){_(null),E({})}async function Q(M){const G=I,ne=String(G.sellerId??""),ve=l.get(ne),V=String(G.sellerName??(ve==null?void 0:ve.name)??"Sin nombre"),qe=Na(G.amountDelivered),ie=Na(G.extraExpenses),re=Na(G.commissionPercent??(ve==null?void 0:ve.commissionPercent)??0),Fe=C_(qe,re),de=__(qe,Fe,ie),we=E_(String(G.dateInput??Lz(G.date)));await Cn(Yt(De,N_,M),{date:we,sellerId:ne,sellerName:V,amountDelivered:qe,commissionPercent:re,commissionPaid:Fe,extraExpenses:ie,totalFinal:de,comment:String(G.comment??""),updatedAt:mr.now()}),z()}async function J(M){confirm("Eliminar este registro?")&&await Dn(Yt(De,N_,M))}async function ee(){if(!F.current)return;const M=await Sg(F.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",scrollX:0,scrollY:-window.scrollY}),G=M.toDataURL("image/png"),ne=new $r("p","mm","a4"),ve=ne.internal.pageSize.getWidth(),V=ne.internal.pageSize.getHeight(),qe=ve,ie=M.height*qe/M.width;let re=ie,Fe=0;for(ne.addImage(G,"PNG",0,Fe,qe,ie),re-=V;re>0;)ne.addPage(),Fe=-(ie-re),ne.addImage(G,"PNG",0,Fe,qe,ie),re-=V;ne.save(`Entregas_Dulces_${e}_a_${n}.pdf`)}return i.jsxs("div",{className:"p-3 md:p-6 max-w-7xl mx-auto space-y-3 md:space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg md:text-2xl font-black text-gray-900",children:"Control Contable - Entregas de Vendedores (Dulces)"}),i.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Periodo: ",i.jsx("span",{className:"font-bold",children:e})," "," ",i.jsx("span",{className:"font-bold",children:n})]})]}),i.jsx("button",{onClick:ee,className:"h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Exportar a PDF"})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Filtros de periodo"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",value:e,onChange:M=>r(M.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",value:n,onChange:M=>a(M.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]})]}),i.jsxs("div",{ref:F,className:"space-y-3 md:space-y-4",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"KPIs Consolidados"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Entradas (Neto)"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Ci(ge.totalFinal)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Entregado - Comisin - Gastos"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Comisiones"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Ci(ge.commission)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de comisin pagada"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Gastos extras"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Ci(ge.expenses)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de gastos registrados"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"Total entregado (Bruto)"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Ci(ge.delivered)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sin restar nada"})]})]}),i.jsx("div",{className:"font-black text-sm text-gray-900 mt-4 mb-2",children:"KPI Vendedores (sumatoria del periodo)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-[520px] w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[i.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Entregado"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Total final"})]})}),i.jsx("tbody",{children:he.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-2 text-gray-500",colSpan:4,children:"Sin datos en el periodo seleccionado."})}):he.map(M=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:M.sellerName}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",Ci(M.delivered)]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",Ci(M.commission)]}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",Ci(M.totalFinal)]})]},M.sellerId||M.sellerName))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Entregas y Comisin por vendedor (Barras)"}),i.jsx("div",{className:"w-full h-[320px]",children:i.jsx($G,{children:i.jsxs(Mst,{data:se,children:[i.jsx(Sue,{dataKey:"name",interval:0,angle:-12,height:70}),i.jsx(Iue,{}),i.jsx(Vq,{}),i.jsx(TF,{}),i.jsx(nO,{dataKey:"Entregado"}),i.jsx(nO,{dataKey:"Comision"})]})})})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Distribucin (Pastel)"}),i.jsx("div",{className:"w-full h-[320px]",children:i.jsx($G,{children:i.jsxs(Xst,{children:[i.jsx(hue,{data:je,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:je.map((M,G)=>i.jsx(lN,{fill:Te[G%Te.length]},G))}),i.jsx(Vq,{}),i.jsx(TF,{})]})})})]})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Agregar movimiento"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",value:A,onChange:M=>h(M.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),i.jsxs("select",{value:m,onChange:M=>p(M.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10 bg-white",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(M=>i.jsxs("option",{value:M.id,children:[M.name," ",M.branch?`(${M.branch})`:""]},M.id))]})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),i.jsx("input",{type:"number",inputMode:"decimal",value:g,onChange:M=>v(M.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin configurada"}),i.jsx("input",{value:`${B}%`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin pagada"}),i.jsx("input",{value:`$ ${Ci(me)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),i.jsx("input",{type:"number",inputMode:"decimal",value:y,onChange:M=>b(M.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Total final"}),i.jsx("input",{value:`$ ${Ci(pe)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-900 font-extrabold"})]}),i.jsxs("label",{className:"space-y-1 md:col-span-2",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),i.jsx("input",{value:w,onChange:M=>P(M.target.value),placeholder:"Opcional...",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{onClick:D,className:"w-full md:w-auto h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Guardar movimiento"})})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Registro detallado"}),d?i.jsx("div",{className:"text-sm text-gray-500",children:"Cargando..."}):c.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"No hay registros en el periodo."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[i.jsx("th",{className:"text-left p-2 font-black",children:"Fecha"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Monto entregado"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin %"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin pagada"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Total final"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Comentario"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Acciones"})]})}),i.jsx("tbody",{children:c.map(M=>{if(!(j===M.id))return i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:jr(M.date.toDate(),"yyyy-MM-dd")}),i.jsx("td",{className:"p-2 font-semibold",children:M.sellerName}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",Ci(M.amountDelivered)]}),i.jsxs("td",{className:"p-2 text-right",children:[Ci(M.commissionPercent),"%"]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",Ci(M.commissionPaid)]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",Ci(M.extraExpenses)]}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",Ci(M.totalFinal)]}),i.jsx("td",{className:"p-2",children:M.comment}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>K(M),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),i.jsx("button",{onClick:()=>J(M.id),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})})]},M.id);const ne=Na(I.amountDelivered??M.amountDelivered),ve=Na(I.commissionPercent??M.commissionPercent),V=Na(I.extraExpenses??M.extraExpenses),qe=C_(ne,ve),ie=__(ne,qe,V);return i.jsxs("tr",{className:"border-t bg-yellow-50/40",children:[i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"date",value:String(I.dateInput??""),onChange:re=>E(Fe=>({...Fe,dateInput:re.target.value})),className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2",children:i.jsxs("select",{value:String(I.sellerId??M.sellerId),onChange:re=>{const Fe=re.target.value,de=l.get(Fe);E(we=>({...we,sellerId:Fe,sellerName:(de==null?void 0:de.name)??"",commissionPercent:Na((de==null?void 0:de.commissionPercent)??0)}))},className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(re=>i.jsxs("option",{value:re.id,children:[re.name," ",re.branch?`(${re.branch})`:""]},re.id))]})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(ne),onChange:re=>E(Fe=>({...Fe,amountDelivered:Na(re.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(ve),onChange:re=>E(Fe=>({...Fe,commissionPercent:Na(re.target.value)})),className:"h-9 w-24 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsxs("td",{className:"p-2 text-right font-semibold",children:["$ ",Ci(qe)]}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(V),onChange:re=>E(Fe=>({...Fe,extraExpenses:Na(re.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",Ci(ie)]}),i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"text",value:String(I.comment??M.comment),onChange:re=>E(Fe=>({...Fe,comment:re.target.value})),className:"h-9 w-full px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Q(M.id),className:"h-8 px-3 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),i.jsx("button",{onClick:z,className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})})]},M.id)})})]})}),i.jsxs("div",{className:"md:hidden space-y-3",children:[c.map(M=>i.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-black text-gray-900",children:M.sellerName}),i.jsx("div",{className:"text-xs font-extrabold bg-gray-100 rounded-full px-3 py-1",children:jr(M.date.toDate(),"yyyy-MM-dd")})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Monto entregado"}),i.jsxs("div",{className:"font-extrabold",children:["$ ",Ci(M.amountDelivered)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin %"}),i.jsxs("div",{className:"font-semibold",children:[Ci(M.commissionPercent),"%"]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin pagada"}),i.jsxs("div",{className:"font-semibold",children:["$ ",Ci(M.commissionPaid)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Gastos"}),i.jsxs("div",{className:"font-semibold",children:["$ ",Ci(M.extraExpenses)]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Total final"}),i.jsxs("div",{className:"text-base font-black",children:["$ ",Ci(M.totalFinal)]})]}),M.comment?i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comentario"}),i.jsx("div",{className:"text-sm text-gray-800",children:M.comment})]}):null]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{onClick:()=>K(M),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),i.jsx("button",{onClick:()=>J(M.id),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})]},M.id)),j?i.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3",children:[i.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Editando registro"}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",value:String(I.dateInput??""),onChange:M=>E(G=>({...G,dateInput:M.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),i.jsxs("select",{value:String(I.sellerId??""),onChange:M=>{const G=M.target.value,ne=l.get(G);E(ve=>({...ve,sellerId:G,sellerName:(ne==null?void 0:ne.name)??"",commissionPercent:Na((ne==null?void 0:ne.commissionPercent)??0)}))},className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(M=>i.jsxs("option",{value:M.id,children:[M.name," ",M.branch?`(${M.branch})`:""]},M.id))]})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),i.jsx("input",{type:"number",value:String(I.amountDelivered??""),onChange:M=>E(G=>({...G,amountDelivered:Na(M.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),i.jsx("input",{type:"number",value:String(I.extraExpenses??""),onChange:M=>E(G=>({...G,extraExpenses:Na(M.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin %"}),i.jsx("input",{type:"number",value:String(I.commissionPercent??""),onChange:M=>E(G=>({...G,commissionPercent:Na(M.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),i.jsx("input",{type:"text",value:String(I.comment??""),onChange:M=>E(G=>({...G,comment:M.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Q(j),className:"flex-1 h-10 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),i.jsx("button",{onClick:z,className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})]})]}):null]})]})]})]})]})}const Wm=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Zst(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Uz(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function eit(t){const e=String(t||"").trim();if(!e)return 0;const r=Date.parse(e);return Number.isFinite(r)?r:0}function tit({open:t,onClose:e,onDetected:r}){const n=x.useRef(null),a=x.useRef(null),[s,o]=x.useState(""),l=x.useRef("");return x.useEffect(()=>{if(!t)return;let c=!1;const u=new C2,d=()=>{var A,h,m;try{(A=a.current)==null||A.stop()}catch{}a.current=null;try{const p=(h=n.current)==null?void 0:h.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{o("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const A=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,h=>{if(!c&&h){const m=String(h.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=A}catch(A){const h=String((A==null?void 0:A.message)||""),m=String((A==null?void 0:A.name)||"");h.toLowerCase().includes("permission")||m==="NotAllowedError"?o("Permiso de cmara denegado."):m==="NotFoundError"||h.toLowerCase().includes("notfound")?o("No se encontr cmara en este dispositivo."):h.toLowerCase().includes("secure")||h.toLowerCase().includes("https")?o("La cmara requiere HTTPS (sitio seguro)."):o(h||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function rit(){const{refreshKey:t,refresh:e}=vc(),[r,n]=x.useState(!0),[a,s]=x.useState(""),[o,l]=x.useState([]),[c,u]=x.useState(""),[d,f]=x.useState(""),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState("ANY"),[y,b]=x.useState(!1),[w,P]=x.useState({});x.useEffect(()=>{(async()=>{n(!0),s("");try{const ce=await Lt(er(At(De,"candy_main_orders"))),te=new Map;ce.forEach(Re=>{var _e,We,ot;const ye=Re.data(),Xe=eit(ye.date),mt=((We=(_e=ye==null?void 0:ye.createdAt)==null?void 0:_e.toMillis)==null?void 0:We.call(_e))||((ot=ye==null?void 0:ye.createdAt)!=null&&ot.seconds?ye.createdAt.seconds*1e3:0)||0,rt=Math.max(Xe,mt),ue=Array.isArray(ye.items)?ye.items:[];for(const Ce of ue){const $e=String((Ce==null?void 0:Ce.id)||(Ce==null?void 0:Ce.productId)||"").trim();if(!$e)continue;const gt=String((Ce==null?void 0:Ce.name)||(Ce==null?void 0:Ce.productName)||"").trim(),Kt=String((Ce==null?void 0:Ce.category)||"").trim(),Ut=Number((Ce==null?void 0:Ce.unitPriceIsla)||0),Jt=Number((Ce==null?void 0:Ce.unitPriceRivas)||0),it=Number((Ce==null?void 0:Ce.unitsPerPackage)||(Ce==null?void 0:Ce.unitsPerPack)||1),X=te.get($e);(!X||rt>=X._sortKey)&&te.set($e,{productId:$e,category:Kt,productName:gt,priceIsla:Ut,priceRivas:Jt,unitsPerPackage:it,_sortKey:rt})}});const Ne=Array.from(te.values()).sort((Re,ye)=>Re.productName.localeCompare(ye.productName,"es"));l(Ne)}catch(ce){console.error(ce),s(" Error cargando precios desde rdenes maestras."),l([])}finally{n(!1)}})()},[t]),x.useEffect(()=>{const ce=At(De,"products_candies"),te=er(ce),Ne=dd(te,Re=>{const ye={},Xe={},mt={},rt={};Re.forEach(ue=>{const _e=ue.data();ye[ue.id]=Number((_e==null?void 0:_e.providerPrice)||(_e==null?void 0:_e.providerPricePerUnit)||0),mt[ue.id]=Number((_e==null?void 0:_e.unitsPerPackage)||(_e==null?void 0:_e.unitsPerPack)||1)||1;const We=String((_e==null?void 0:_e.barcode)||"").trim();We&&(Xe[ue.id]=We);const ot=String((_e==null?void 0:_e.packaging)||(_e==null?void 0:_e.empaque)||"").trim();ot&&(rt[ue.id]=ot)});try{const ue=I.current||{};let _e=!1;for(const $e of Object.keys(Xe))if((Xe[$e]||"")!==(ue[$e]||"")){_e=!0;break}const We=F.current||{};let ot=!1;for(const $e of Object.keys(mt))if((mt[$e]||0)!==(We[$e]||0)){ot=!0;break}Y(ye),pe(mt);const Ce={...Xe,...ue};_(Ce),I.current=Ce,F.current={...mt},je(rt),l($e=>$e.map(gt=>({...gt,unitsPerPackage:mt[gt.productId]??gt.unitsPerPackage}))),!E.current&&_e&&(s(" Cdigo actualizado."),setTimeout(()=>s(""),3e3)),!E.current&&ot&&(s(" Unidades x paquete actualizadas."),setTimeout(()=>s(""),3e3)),E.current=!1}catch{Y(ye),pe(mt),_(_e=>({...Xe,..._e})),F.current={...mt},je(rt),l(_e=>_e.map(We=>({...We,unitsPerPackage:mt[We.productId]??We.unitsPerPackage})))}},Re=>console.error(Re));return()=>Ne()},[]);const[j,_]=x.useState({}),I=x.useRef({}),E=x.useRef(!0),F=x.useRef({}),k=x.useRef({}),B=x.useRef(!0),[R,Y]=x.useState({}),[me,pe]=x.useState({}),[he,ge]=x.useState({}),[se,je]=x.useState({}),[Te,D]=x.useState("");x.useEffect(()=>{const ce=At(De,"inventory_candies"),te=er(ce),Ne=dd(te,Re=>{try{const ye={};Re.forEach(mt=>{var Ce,$e,gt;const rt=mt.data(),ue=String(rt.productId||"").trim();if(!ue)return;const _e=Number(rt.unitsPerPackage||rt.unitsPerPack||0)||0,We=(($e=(Ce=rt==null?void 0:rt.createdAt)==null?void 0:Ce.toMillis)==null?void 0:$e.call(Ce))||((gt=rt==null?void 0:rt.createdAt)!=null&&gt.seconds?rt.createdAt.seconds*1e3:0)||0,ot=ye[ue];(!ot||We>=ot.ts)&&(ye[ue]={val:_e||0,ts:We})});const Xe={};for(const mt of Object.keys(ye))Xe[mt]=ye[mt].val||0;ge(Xe);try{const mt=k.current||{};let rt=!1;for(const ue of Object.keys(Xe))if((Xe[ue]||0)!==(mt[ue]||0)){rt=!0;break}k.current={...Xe},!B.current&&rt&&(s(" Inventario: unidades por paquete actualizadas."),setTimeout(()=>s(""),3e3)),B.current=!1}catch{}l(mt=>mt.map(rt=>({...rt,unitsPerPackage:Xe[rt.productId]??me[rt.productId]??rt.unitsPerPackage})))}catch(ye){console.error("inventory_candies snapshot error:",ye)}},Re=>console.error(Re));return()=>Ne()},[me]),x.useEffect(()=>{l(ce=>ce.map(te=>({...te,unitsPerPackage:he[te.productId]??me[te.productId]??te.unitsPerPackage})))},[me,he]);const K=x.useMemo(()=>{const ce=Zst(c),te=String(d||"").trim(),Ne=String(Te||"").trim().toLowerCase(),Re=A.trim()===""?null:Uz(A,NaN),ye=m.trim()===""?null:Uz(m,NaN);return o.filter(Xe=>{const mt=String(se[Xe.productId]||"").trim().toLowerCase();if(Ne)return mt===Ne;if(ce&&!`${Xe.category} ${Xe.productName}`.toLowerCase().includes(ce))return!1;if(te){const We=String(Xe.productId||""),ot=String(j[Xe.productId]||"");if(!We.includes(te)&&!ot.includes(te))return!1}const rt=g==="ISLA"?[Xe.priceIsla]:g==="RIVAS"?[Xe.priceRivas]:[Xe.priceIsla,Xe.priceRivas],ue=Re==null||!Number.isFinite(Re)?!0:rt.some(We=>We>=Re),_e=ye==null||!Number.isFinite(ye)?!0:rt.some(We=>We<=ye);return ue&&_e})},[o,c,A,m,g,j,Te,se]),z=x.useMemo(()=>{const ce=new Map;for(const te of K){const Ne=(te.category||"Sin categora").trim()||"Sin categora",Re=ce.get(Ne)||[];Re.push(te),ce.set(Ne,Re)}return Array.from(ce.entries()).sort(([te],[Ne])=>te.localeCompare(Ne,"es"))},[K]),Q=ce=>{P(te=>({...te,[ce]:!te[ce]}))},J=()=>{u(""),h(""),p(""),v("ANY"),D("")},[ee,M]=x.useState(!1),[G,ne]=x.useState("search"),[ve,V]=x.useState(null),[qe,ie]=x.useState(0),[re,Fe]=x.useState(0),[de,we]=x.useState(null),[Le,Ge]=x.useState(""),[ft,ht]=x.useState(""),xt=x.useMemo(()=>c.trim()!==""||A.trim()!==""||m.trim()!==""||g!=="ANY"||Te.trim()!=="",[c,A,m,g,Te]),[jt,kt]=x.useState(!1);x.useEffect(()=>{var Ne;const ce=window.matchMedia("(max-width: 900px)"),te=()=>kt(ce.matches);return te(),(Ne=ce.addEventListener)==null||Ne.call(ce,"change",te),()=>{var Re;return(Re=ce.removeEventListener)==null?void 0:Re.call(ce,"change",te)}},[]);const[wt,Ve]=x.useState(!1);x.useEffect(()=>{const ce=lj(ef,async te=>{if(!te)return Ve(!1);try{const Ne=await ei(Yt(De,"users",te.uid)),Re=Ne.exists()?Ne.data():null,ye=Re?Array.isArray(Re.roles)?Re.roles:Re.role?[Re.role]:[]:[];Ve(mn(ye,"admin"))}catch(Ne){console.error(Ne),Ve(!1)}});return()=>ce()},[]);const Pe=async ce=>{var te;if(G==="search"){f(ce);const Ne=Object.keys(j).find(Xe=>(j[Xe]||"")===ce),Re=(te=o.find(Xe=>String(Xe.productId||"").includes(ce)))==null?void 0:te.productId,ye=Ne||Re||null;ye&&(we(ye),b(!1)),M(!1);return}if(G==="edit"&&ve)try{const Ne=At(De,"products_candies"),Re=Yt(Ne,ve);await Cn(Re,{barcode:ce}),_(ye=>({...ye,[ve]:ce})),Ge(ce),M(!1),ne("search"),s(" Producto guardado.")}catch(Ne){console.error(Ne),s(" Error guardando el cdigo.")}},be=async ce=>{l(te=>te.map(Ne=>Ne.productId===ce?{...Ne,priceIsla:Number(qe||0),priceRivas:Number(re||0)}:Ne));try{const te=String(ft||"").trim();await Cn(Yt(At(De,"products_candies"),ce),{packaging:te||""}),je(Ne=>({...Ne,[ce]:te||""}))}catch(te){console.error("Error updating packaging:",te),s(" Error guardando empaque.")}V(null),s(jt?" Producto guardado.":"")};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Precio Ventas"}),i.jsx("div",{className:"flex gap-2",children:i.jsx(xc,{onClick:e,loading:r})})]}),i.jsxs("div",{className:"md:hidden mb-3",children:[i.jsxs("button",{type:"button",onClick:()=>b(ce=>!ce),className:`w-full px-3 py-3 rounded-xl border shadow-sm flex items-center justify-between ${xt?"bg-yellow-50 border-yellow-200":"bg-white"}`,children:[i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-semibold",children:"Filtros"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[xt?"Activos":"Ninguno","  ","Mostrando ",i.jsx("b",{children:K.length})]})]}),i.jsx("div",{className:"text-sm font-semibold",children:y?"Cerrar":"Abrir"})]}),y&&i.jsx("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:c,onChange:ce=>u(ce.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:Te,onChange:ce=>D(ce.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Buscar por EAN"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:d,onChange:ce=>f(ce.target.value),placeholder:"Cdigo EAN"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ne("search"),M(!0)},children:"Escanear"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{J(),f("")},children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>b(!1),children:"Aplicar"})]})]})})]}),i.jsxs("div",{className:"hidden md:block bg-white p-3 rounded shadow border mb-3 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Filtrar por producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:ce=>u(ce.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Te,onChange:ce=>D(ce.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio mn"}),i.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:A,onChange:ce=>h(ce.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio mx"}),i.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:m,onChange:ce=>p(ce.target.value),placeholder:"0"})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:J,children:"Limpiar"})})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Fuente: ",i.jsx("b",{children:"candy_main_orders.items[]"}),"  Muestra el"," ",i.jsx("b",{children:"ltimo precio"})," registrado por producto."]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Mostrando:"})," ",i.jsx("b",{children:K.length})]})]})]}),i.jsxs("div",{className:"md:hidden",children:[r?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):K.length===0?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):i.jsx("div",{className:"space-y-2",children:z.map(([ce,te])=>{const Ne=!!w[ce];return i.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>Q(ce),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[13px] font-semibold truncate",children:ce}),i.jsxs("div",{className:"text-[10px] text-gray-600 truncate",children:[te.length," ",te.length===1?"producto":"productos"]})]}),i.jsx("div",{className:"text-sm font-semibold",children:Ne?"":"+"})]}),Ne&&i.jsx("div",{className:"px-3 pb-3 border-t space-y-2",children:te.map(Re=>{const ye=de===Re.productId,Xe=ve===Re.productId,mt=R[Re.productId]||0,rt=Re.priceIsla-mt,ue=rt*.25;return i.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>we(_e=>_e===Re.productId?null:Re.productId),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[13px] font-semibold truncate",children:Re.productName}),i.jsx("div",{className:"text-[10px] text-gray-600 truncate",children:Re.category})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"P. Paquete"}),i.jsx("div",{className:"text-sm font-semibold tabular-nums",children:Wm(Re.priceIsla)})]})]}),ye&&i.jsx("div",{className:"px-3 pb-3 border-t",children:i.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Categora"}),i.jsx("div",{className:"text-sm",children:Re.category}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Unidades x paquete"}),i.jsx("div",{className:"text-sm",children:String(Re.unitsPerPackage||1)})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Unidad"}),i.jsx("div",{className:"text-sm tabular-nums",children:Wm(Re.priceIsla/(Re.unitsPerPackage||1))})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Paquete"}),Xe?i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:String(qe),onChange:_e=>ie(Number(_e.target.value||0))}):i.jsx("div",{className:"text-sm font-semibold tabular-nums",children:Wm(Re.priceIsla)})]})]}),i.jsxs("div",{children:[wt&&i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-sm tabular-nums",children:Wm(rt)})]}),i.jsxs("div",{className:"mt-1",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Comisin"}),i.jsx("div",{className:"text-sm tabular-nums",children:Wm(ue)})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Cdigo EAN"}),Xe?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:Le,readOnly:!0}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",onClick:()=>{ne("edit"),M(!0)},type:"button",children:"Escanear"})]}):i.jsx("div",{children:j[Re.productId]||""})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Tipo Empaque"}),Xe?i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:ft,onChange:_e=>ht(_e.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):i.jsx("div",{className:"text-sm",children:se[Re.productId]||""})]})]})]}),i.jsx("div",{className:"flex gap-2",children:Xe?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white",onClick:()=>{be(Re.productId),we(null)},type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ne("edit"),M(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200",onClick:()=>V(null),type:"button",children:"Cancelar"})]}):wt&&i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-3 py-2 rounded bg-yellow-400",onClick:()=>{V(Re.productId),ie(Re.priceIsla||0),Fe(Re.priceRivas||0),Ge(j[Re.productId]||""),ht(se[Re.productId]||"")},type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white",onClick:()=>l(_e=>_e.filter(We=>We.productId!==Re.productId)),type:"button",children:"Borrar"})]})})]})})]},Re.productId)})})]},ce)})}),a&&i.jsx("p",{className:"mt-2 text-sm",children:a})]}),i.jsx(tit,{open:ee,onClose:()=>M(!1),onDetected:Pe}),i.jsx("div",{className:"hidden md:block bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio Isla"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio Rivas"}),i.jsx("th",{className:"p-2 border text-right",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):K.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin resultados."})}):K.map(ce=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 border",children:ce.category}),i.jsx("td",{className:"p-2 border",children:ce.productName}),i.jsx("td",{className:"p-2 border",children:ve===ce.productId?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ft,onChange:te=>ht(te.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):se[ce.productId]||""}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ve===ce.productId?i.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(qe),onChange:te=>ie(Number(te.target.value||0))}):Wm(ce.priceIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ve===ce.productId?i.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(re),onChange:te=>Fe(Number(te.target.value||0))}):Wm(ce.priceRivas)}),i.jsx("td",{className:"p-2 border text-right",children:ve===ce.productId?i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white text-sm",onClick:()=>be(ce.productId),type:"button",children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 text-sm",onClick:()=>V(null),type:"button",children:"Cancelar"})]}):wt&&i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-sm",onClick:()=>{V(ce.productId),ie(ce.priceIsla||0),Fe(ce.priceRivas||0),Ge(j[ce.productId]||"")},type:"button",children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white text-sm",onClick:()=>{V(ce.productId),ne("edit"),M(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white text-sm",onClick:()=>l(te=>te.filter(Ne=>Ne.productId!==ce.productId)),type:"button",children:"Borrar"})]})})]},ce.productId))})]})}),a&&i.jsx("p",{className:"hidden md:block mt-2 text-sm",children:a})]})}const S_=["Cuaderno","Block","Lapicero","Lpiz","Tajador","Borrador","Corrector","Cartucheras"],Qz=["Lider","Scribe","Smarty","Pointer","Paper Mate","Otro"],bB=["Hombre","Mujer","Variado","NA"],nit=["Universitario Cocido","5 Materia","2 Materia","Doble Raya","Rayado","Cuadriculado","Subrayado","Sublineado","Liso"],Bl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function io(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function ac(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function gE(t,e=1){const r=Math.floor(ac(t,e));return r>0?r:e}function $ue(t){return!Number.isFinite(t)||t<=0?0:t}function wB(t){const e=String(t??"").trim();return e||""}function Md(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(io(a),a));for(const a of e){const s=n.get(io(a));if(s!=null)return t[s]}}function ait(t){return Object.values(t||{}).every(r=>io(r)==="")}function vx(t){const e=Math.max(0,ac(t.providerPrice,0)),r=Math.max(1,gE(t.quantity,1)),n=$ue(ac(t.margin,0)),a=Math.max(0,ac(t.salePrice,0)),s=n>0?e/n:e,o=a>0?a:s,l=o>0?e/o:n,c=e*r,u=(o-e)*r,d=o*r;return{providerPrice:e,quantity:r,margin:l,salePrice:o,facturado:c,gain:u,totalEsperado:d}}function sit(){const{refreshKey:t,refresh:e}=vc(),[r,n]=x.useState(!0),[a,s]=x.useState(""),[o,l]=x.useState([]),[c,u]=x.useState(!1),[d,f]=x.useState(""),[A,h]=x.useState(""),[m,p]=x.useState(""),[g,v]=x.useState(""),[y,b]=x.useState(!1),[w,P]=x.useState(null),[j,_]=x.useState(!1),[I,E]=x.useState(null),[F,k]=x.useState(S_[0]),[B,R]=x.useState(Qz[0]),[Y,me]=x.useState(""),[pe,he]=x.useState(0),[ge,se]=x.useState(1),[je,Te]=x.useState(.7),[D,K]=x.useState(0),[z,Q]=x.useState("NA"),[J,ee]=x.useState(""),[M,G]=x.useState(""),[ne,ve]=x.useState(!1),[V,qe]=x.useState(""),[ie,re]=x.useState([]),[Fe,de]=x.useState([]),[we,Le]=x.useState(!1);x.useEffect(()=>{(async()=>{n(!0),s("");try{const ue=await Lt(er(At(De,"products_stationery"))),_e=[];ue.forEach(We=>{const ot=We.data();_e.push({id:We.id,category:ot.category||"",brand:ot.brand||"",name:ot.name||"",providerPrice:Number(ot.providerPrice||0),quantity:Number(ot.quantity||1),facturado:Number(ot.facturado||0),margin:Number(ot.margin||0),salePrice:Number(ot.salePrice||0),gain:Number(ot.gain||0),gender:ot.gender||"NA",typeProduct:ot.typeProduct||"",code:ot.code??"",createdAt:ot.createdAt,updatedAt:ot.updatedAt,totalEsperado:Number(ot.totalEsperado||Number(ot.salePrice||0)*Number(ot.quantity||1))})}),l(_e)}catch(ue){console.error(ue),s(" Error cargando productos (papelera).")}finally{n(!1)}})()},[t]);const Ge=x.useMemo(()=>{const ue=io(d),_e=io(A),We=m.trim()===""?null:ac(m,NaN),ot=g.trim()===""?null:ac(g,NaN);return o.filter(Ce=>!(ue&&!`${Ce.category} ${Ce.name}`.toLowerCase().includes(ue)||_e&&!String(Ce.code||"").toLowerCase().includes(_e)||We!=null&&Number.isFinite(We)&&Ce.salePrice<We||ot!=null&&Number.isFinite(ot)&&Ce.salePrice>ot))},[o,d,A,m,g]),ft=x.useMemo(()=>d.trim()!==""||A.trim()!==""||m.trim()!==""||g.trim()!=="",[d,A,m,g]),ht=x.useMemo(()=>{const ue=o.length,_e=o.reduce((Ce,$e)=>Ce+($e.facturado||0),0),We=o.reduce((Ce,$e)=>Ce+Number($e.totalEsperado||Number($e.salePrice||0)*Number($e.quantity||1)),0),ot=o.reduce((Ce,$e)=>Ce+($e.gain||0),0);return{count:ue,sumFact:_e,sumEsperado:We,sumGain:ot}},[o]),xt=()=>{k(S_[0]),me(""),he(0),se(1),Te(.7),K(0),Q("NA"),ee(""),G(""),P(null)},jt=()=>{xt(),b(!0)},kt=ue=>{P(ue),k(ue.category||S_[0]),R(ue.brand||Qz[0]),me(ue.name||""),he(Number(ue.providerPrice||0)),se(Number(ue.quantity||1)),Te(Number(ue.margin||.7)),K(Number(ue.salePrice||0)),Q(ue.gender||"NA"),ee(ue.typeProduct||""),G(String(ue.code||"")),b(!0)},wt=async()=>{s("");const ue=String(F||"").trim(),_e=String(B||"").trim(),We=String(Y||"").trim(),{providerPrice:ot,quantity:Ce,margin:$e,salePrice:gt,facturado:Kt,totalEsperado:Ut,gain:Jt}=vx({providerPrice:pe,quantity:ge,margin:je,salePrice:D});if(!ue)return s(" Categora requerida.");if(!We)return s(" Producto requerido.");if(ot<=0)return s(" Precio proveedor debe ser > 0.");if(Ce<=0)return s(" Cantidad debe ser > 0.");if(gt<=0)return s(" Precio venta invlido.");if($e<=0)return s(" Margen invlido.");const it={category:ue,brand:_e,name:We,providerPrice:ot,quantity:Ce,facturado:Kt,margin:$e,salePrice:gt,gain:Jt,gender:z||"NA",typeProduct:String(J||"").trim(),code:wB(M)||null,updatedAt:mr.now(),totalEsperado:Ut};try{n(!0),w?(await Cn(Yt(De,"products_stationery",w.id),it),s(" Producto actualizado.")):(await Hn(At(De,"products_stationery"),{...it,createdAt:mr.now()}),s(" Producto creado.")),b(!1),P(null),xt(),e()}catch(X){console.error(X),s(" Error guardando producto.")}finally{n(!1)}},Ve=async()=>{var ue;try{const _e=new C2,We=await C2.listVideoInputDevices(),ot=(ue=We[We.length-1])==null?void 0:ue.deviceId;if(!ot)return null;const Ce=document.createElement("div");Ce.className="fixed inset-0 z-[9999] bg-black/70 flex items-center justify-center p-3";const $e=document.createElement("div");$e.className="bg-white w-full max-w-md rounded-xl overflow-hidden shadow-xl";const gt=document.createElement("div");gt.className="p-3 flex items-center justify-between border-b",gt.innerHTML="<div style='font-weight:700'>Escanear cdigo</div>";const Kt=document.createElement("button");Kt.textContent="Cerrar",Kt.className="px-3 py-1 rounded bg-gray-200";const Ut=document.createElement("div");Ut.className="p-3";const Jt=document.createElement("video");return Jt.style.width="100%",Jt.style.borderRadius="12px",Ut.appendChild(Jt),gt.appendChild(Kt),$e.appendChild(gt),$e.appendChild(Ut),Ce.appendChild($e),document.body.appendChild(Ce),await new Promise(async it=>{const X=()=>{Ce.remove(),it(null)};Kt.onclick=X;const oe=await _e.decodeFromVideoDevice(ot,Jt,L=>{if(L){const Ae=L.getText();try{oe.stop()}catch{}Ce.remove(),it(Ae)}})})}catch(_e){return console.error(_e),null}},Pe=async()=>{const ue=await Ve();ue&&G(ue)},be=async()=>{const ue=await Ve();if(!ue)return;const _e=o.find(We=>String(We.code||"")===String(ue));_e?(E(_e),_(!0),s("")):(E(null),_(!0),s(""))},ce=(ue,_e)=>{const We=ue.map($e=>({Id:$e.id,Categoria:$e.category,brand:$e.brand,Producto:$e.name,PrecioProveedor:$e.providerPrice,Cantidad:$e.quantity,Facturado:$e.facturado,TotalEsperado:$e.totalEsperado||$e.salePrice*$e.quantity,Margen:$e.margin,PrecioVenta:$e.salePrice,Ganancia:$e.gain,Genero:$e.gender,TipoProducto:$e.typeProduct,Codigo:$e.code||""})),ot=zs.json_to_sheet(We),Ce=zs.book_new();zs.book_append_sheet(Ce,ot,"Productos"),aF(Ce,_e)},te=()=>{const ue=[{Id:"",Categoria:"Cuaderno",brand:"Lider",Producto:"Cuaderno Norma 100 hojas",PrecioProveedor:120,Cantidad:12,Margen:.7,PrecioVenta:"",Genero:"NA",TipoProducto:"Universitario Cocido",Codigo:"1234567890123"}],_e=zs.json_to_sheet(ue),We=zs.book_new();zs.book_append_sheet(We,_e,"Productos");const ot=lP(We,{type:"array",bookType:"xlsx"}),Ce=new Blob([ot],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),$e=URL.createObjectURL(Ce),gt=document.createElement("a");gt.href=$e,gt.download="template_products_stationery.xlsx",document.body.appendChild(gt),gt.click(),gt.remove(),URL.revokeObjectURL($e)},Ne=ue=>{const _e=[],We=[];ue.forEach((Ce,$e)=>{if(!Ce||typeof Ce!="object"||ait(Ce))return;const gt=$e+2,Kt=String(Md(Ce,["Id","ID","docId","DocId"])??"").trim(),Ut=String(Md(Ce,["Categoria","Categora","Category","category"])??"").trim(),Jt=String(Md(Ce,["Brand","Marca","brand","marca"])??"").trim(),it=String(Md(Ce,["Producto","Product","Nombre","Name","name"])??"").trim(),X=Md(Ce,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Costo","providerPrice"]),oe=Md(Ce,["Cantidad","Qty","quantity","cantidad"]),L=Md(Ce,["Margen","Margin","margen","margin"]),Ae=Md(Ce,["PrecioVenta","Precio Venta","SalePrice","salePrice"]),Ee=String(Md(Ce,["Genero","Gnero","Gender","gender"])??"NA").trim(),Oe=String(Md(Ce,["TipoProducto","Tipo","TypeProduct","typeProduct","Tipo producto"])??"").trim(),Be=Md(Ce,["Codigo","Cdigo","Code","Barcode","code"]),S=wB(Be),O=Math.max(0,ac(X,0)),U=Math.max(1,gE(oe,1)),q=$ue(ac(L,0)),ae=Math.max(0,ac(Ae,0));Ut||We.push(`Fila ${gt}: falta Categoria.`),it||We.push(`Fila ${gt}: falta Producto.`),O<=0&&We.push(`Fila ${gt}: PrecioProveedor debe ser > 0.`),U<=0&&We.push(`Fila ${gt}: Cantidad debe ser > 0.`),q<=0&&ae<=0&&We.push(`Fila ${gt}: Margen debe ser > 0 (o enviar PrecioVenta).`);const Ue=bB.includes(Ee||"NA")?Ee:"NA";Ut&&it&&O>0&&U>0&&(q>0||ae>0)&&_e.push({id:Kt||void 0,category:Ut,brand:Jt,name:it,providerPrice:O,quantity:U,margin:q>0?q:.7,salePrice:ae>0?ae:void 0,gender:Ue,typeProduct:Oe,code:S||"",_raw:Ce})});const ot=new Map;for(const Ce of _e){const $e=Ce.id?`id::${Ce.id}`:`${io(Ce.category)}::${io(Ce.name)}`;ot.set($e,Ce)}return{rows:Array.from(ot.values()),errors:We}},Re=async ue=>{if(s(""),de([]),re([]),qe((ue==null?void 0:ue.name)||""),!ue)return;const _e=ue.name.toLowerCase(),We=_e.endsWith(".xlsx")||_e.endsWith(".xls"),ot=_e.endsWith(".csv");if(!We&&!ot){de(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{Le(!0);const Ce=new FileReader,$e=await new Promise((oe,L)=>{Ce.onerror=()=>L(new Error("No se pudo leer el archivo.")),Ce.onload=()=>oe(Ce.result),Ce.readAsArrayBuffer(ue)}),gt=M2(new Uint8Array($e),{type:"array"}),Kt=gt.SheetNames[0],Ut=gt.Sheets[Kt],Jt=zs.sheet_to_json(Ut,{defval:""}),{rows:it,errors:X}=Ne(Jt);re(it),de(X),it.length===0&&X.length===0&&de(["No se encontraron filas vlidas para importar."])}catch(Ce){console.error(Ce),de(["Error leyendo el archivo. Revis que no est corrupto."])}finally{Le(!1)}},ye=(ue,_e)=>{re(We=>{const ot=[...We],Ce=ot[ue];return Ce?(ot[ue]={...Ce,..._e},ot):We})},Xe=x.useMemo(()=>{const ue=new Set(o.map(Ce=>Ce.id)),_e=new Set(o.map(Ce=>`${io(Ce.category)}::${io(Ce.name)}`));let We=0,ot=0;for(const Ce of ie){if(Ce.id&&ue.has(Ce.id)){We+=1;continue}const $e=`${io(Ce.category)}::${io(Ce.name)}`;_e.has($e)?We+=1:ot+=1}return{total:ie.length,willCreate:ot,willUpdate:We}},[ie,o]),mt=async()=>{if(s(""),Fe.length>0){s(" Correg los errores antes de importar.");return}if(ie.length===0){s(" No hay filas para importar.");return}try{Le(!0);const ue={},_e={};o.forEach($e=>{ue[$e.id]=$e,_e[`${io($e.category)}::${io($e.name)}`]=$e});const We=Zd(De);let ot=0,Ce=0;for(const $e of ie){const gt=String($e.category||"").trim(),Kt=String($e.name||"").trim(),{providerPrice:Ut,quantity:Jt,margin:it,salePrice:X,facturado:oe,totalEsperado:L,gain:Ae}=vx({providerPrice:$e.providerPrice,quantity:$e.quantity,margin:$e.margin,salePrice:$e.salePrice});if(!gt||!Kt||Ut<=0||Jt<=0||X<=0||it<=0)continue;const Ee={category:gt,name:Kt,providerPrice:Ut,quantity:Jt,facturado:oe,totalEsperado:L,margin:it,salePrice:X,gain:Ae,gender:$e.gender||"NA",typeProduct:String($e.typeProduct||"").trim(),code:wB($e.code)||null,updatedAt:mr.now()};let Oe;if($e.id&&ue[$e.id])Oe=ue[$e.id];else{const Be=`${io(gt)}::${io(Kt)}`;Oe=_e[Be]}if(Oe)We.update(Yt(De,"products_stationery",Oe.id),Ee),Ce+=1;else{const Be=Yt(At(De,"products_stationery"));We.set(Be,{...Ee,createdAt:mr.now()}),ot+=1}}await We.commit(),s(` Importacin lista. Creados: ${ot}, Actualizados: ${Ce}`),ve(!1),re([]),de([]),qe(""),e()}catch(ue){console.error(ue),s(" Error importando productos a Firestore.")}finally{Le(!1)}},rt=()=>{f(""),h(""),p(""),v("")};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Papelera"}),i.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-900 text-white hover:bg-black",onClick:be,type:"button",children:"Escanear"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:jt,type:"button",children:"+ Nuevo"}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{ve(!0),re([]),de([]),qe("")},type:"button",children:"Importar (.xlsx)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ce(o,"products_stationery_todo.xlsx"),type:"button",children:"Exportar (todo)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ce(Ge,"products_stationery_filtrado.xlsx"),type:"button",children:"Exportar (filtrado)"}),i.jsx(xc,{onClick:e,loading:r||we})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[i.jsx(I_,{label:"Productos",value:ht.count}),i.jsx(I_,{label:"Facturado",value:Bl(ht.sumFact)}),i.jsx(I_,{label:"Esperado",value:Bl(ht.sumEsperado)}),i.jsx(I_,{label:"Ganancia",value:Bl(ht.sumGain)})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{className:`w-full md:w-auto px-3 py-2 rounded border bg-white hover:bg-gray-50 ${ft?"border-yellow-300 bg-yellow-50":""}`,type:"button",onClick:()=>u(ue=>!ue),children:[c?"Cerrar filtros":"Abrir filtros"," ",ft?"(activos)":""]}),c&&i.jsxs("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:d,onChange:ue=>f(ue.target.value),placeholder:"Ej: Cuaderno Norma"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:A,onChange:ue=>h(ue.target.value),placeholder:"Barcode"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta mn"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:m,onChange:ue=>p(ue.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta mx"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:g,onChange:ue=>v(ue.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"md:col-span-4 flex gap-2 justify-end",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:rt,children:"Limpiar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>u(!1),children:"Aplicar"})]})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-600",children:[i.jsxs("div",{children:["Mostrando: ",i.jsx("b",{children:Ge.length})]}),i.jsxs("div",{children:["Coleccin: ",i.jsx("b",{children:"products_stationery"})]})]})]})]}),i.jsx("div",{className:"md:hidden space-y-2",children:r?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):Ge.length===0?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):Ge.map(ue=>i.jsxs("div",{className:"bg-white border rounded-xl p-3 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-600",children:ue.category}),i.jsx("div",{className:"text-base font-bold leading-tight",children:ue.name}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Venta"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Bl(ue.salePrice)})]}),i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Esperado:"," ",i.jsx("b",{children:Bl(ue.totalEsperado||ue.salePrice*ue.quantity)})]}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Bl(ue.gain)})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Cdigo: ",i.jsx("b",{children:ue.code||""})]}),i.jsx("div",{className:"mt-2 flex gap-2",children:i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>kt(ue),children:"Editar"})})]},ue.id))}),i.jsx("div",{className:"hidden md:block bg-white border rounded overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Facturado"}),i.jsx("th",{className:"p-2 border text-right",children:"Esperado"}),i.jsx("th",{className:"p-2 border text-right",children:"Margen"}),i.jsx("th",{className:"p-2 border text-right",children:"Venta"}),i.jsx("th",{className:"p-2 border text-right",children:"Ganancia"}),i.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),i.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Cargando"})}):Ge.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Sin resultados."})}):Ge.map(ue=>i.jsxs("tr",{className:"align-top",children:[i.jsx("td",{className:"p-2 border",children:ue.category}),i.jsx("td",{className:"p-2 border",children:ue.name}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(ue.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ue.quantity}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(ue.facturado)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(ue.totalEsperado||ue.salePrice*ue.quantity)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Number(ue.margin||0).toFixed(2)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(ue.salePrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(ue.gain)}),i.jsx("td",{className:"p-2 border",children:ue.gender}),i.jsx("td",{className:"p-2 border",children:ue.typeProduct}),i.jsx("td",{className:"p-2 border",children:ue.code||""}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>kt(ue),children:"Editar"})})]},ue.id))})]})}),a&&i.jsx("p",{className:"mt-2 text-sm",children:a}),y&&i.jsxs(Vz,{onClose:()=>b(!1),title:w?"Editar producto":"Nuevo producto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Categora"}),i.jsx("select",{className:"w-full border rounded px-2 py-2",value:F,onChange:ue=>k(ue.target.value),children:S_.map(ue=>i.jsx("option",{value:ue,children:ue},ue))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:Y,onChange:ue=>me(ue.target.value),placeholder:"Ej: Cuaderno Norma..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio proveedor"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(pe)?"":pe,onChange:ue=>he(Math.max(0,ac(ue.target.value,0)))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cantidad"}),i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-2 text-right",value:ge,onChange:ue=>se(gE(ue.target.value,1))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Facturado (auto)"}),i.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:Bl(vx({providerPrice:pe,quantity:ge,margin:je,salePrice:D}).facturado)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Margen"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(je)?"":je,onChange:ue=>Te(Math.max(0,ac(ue.target.value,0)))}),i.jsx("div",{className:"text-[11px] text-gray-600 mt-1",children:"Ej: 0.70 / 0.80"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta (editable)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(vx({providerPrice:pe,quantity:ge,margin:je,salePrice:D}).salePrice)?"":vx({providerPrice:pe,quantity:ge,margin:je,salePrice:D}).salePrice,onChange:ue=>{K(Math.max(0,ac(ue.target.value,0)))}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Ganancia (auto)"}),i.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:Bl(vx({providerPrice:pe,quantity:ge,margin:je,salePrice:D}).gain)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Gnero"}),i.jsx("select",{className:"w-full border rounded px-2 py-2",value:z,onChange:ue=>Q(ue.target.value),children:bB.map(ue=>i.jsx("option",{value:ue,children:ue},ue))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo producto"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:J,onChange:ue=>ee(ue.target.value),children:[i.jsx("option",{value:"",children:""}),nit.map(ue=>i.jsx("option",{value:ue,children:ue},ue))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:M,onChange:ue=>G(ue.target.value),placeholder:"Escane o peg el cdigo"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:Pe,children:"Escanear"})]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:()=>{b(!1),P(null)},children:"Cancelar"}),i.jsx("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:wt,disabled:r,children:"Guardar"})]})]}),j&&i.jsx(Vz,{onClose:()=>_(!1),title:"Resultado de escaneo",children:I?i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-xs text-gray-600",children:I.category}),i.jsx("div",{className:"text-lg font-bold",children:I.name}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Precio venta"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Bl(I.salePrice)})]}),i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Bl(I.gain)})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Proveedor"}),i.jsx("div",{className:"font-semibold tabular-nums",children:Bl(I.providerPrice)})]}),i.jsxs("div",{className:"rounded-lg border p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Cantidad"}),i.jsx("div",{className:"font-semibold tabular-nums",children:I.quantity})]}),i.jsxs("div",{className:"rounded-lg border p-2 col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Cdigo"}),i.jsx("div",{className:"font-semibold tabular-nums",children:I.code||""})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{className:"px-4 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>{_(!1),kt(I)},children:"Editar"})})]}):i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-semibold",children:"No encontrado"}),i.jsxs("div",{className:"text-gray-600 mt-1",children:["Ese cdigo no existe en ",i.jsx("b",{children:"products_stationery"}),"."]})]})}),ne&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Importar papelera (.xlsx / .csv)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ve(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),i.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas: Id (opcional), Categoria, Producto, PrecioProveedor, Cantidad, Margen (o PrecioVenta), Genero, TipoProducto, Codigo."})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:te,type:"button",children:"Descargar template .xlsx"})]}),i.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:ue=>{var _e;return Re(((_e=ue.target.files)==null?void 0:_e[0])||null)}}),V&&i.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",i.jsx("b",{children:V})]}),we&&i.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),Fe.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[i.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),i.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:Fe.slice(0,60).map((ue,_e)=>i.jsx("li",{children:ue},_e))})]}),i.jsxs("div",{className:"bg-white border rounded p-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Xe.total," filas (Crear:"," ",Xe.willCreate," / Actualizar:"," ",Xe.willUpdate,")"]})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:mt,disabled:we||ie.length===0||Fe.length>0,type:"button",children:"Importar a Firestore"})]}),i.jsxs("div",{className:"overflow-x-auto border rounded",children:[i.jsxs("table",{className:"min-w-[1500px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Margen"}),i.jsx("th",{className:"p-2 border text-right",children:"PrecioVenta"}),i.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),i.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),i.jsx("tbody",{children:ie.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):ie.slice(0,300).map((ue,_e)=>{const We=ue.id?o.some($e=>$e.id===ue.id):!1,ot=o.some($e=>`${io($e.category)}::${io($e.name)}`==`${io(ue.category)}::${io(ue.name)}`),Ce=We||ot;return i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ue.id||"",onChange:$e=>ye(_e,{id:$e.target.value.trim()||void 0}),placeholder:"docId (update exacto)"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-44 border rounded px-2 py-1",value:ue.category,onChange:$e=>ye(_e,{category:$e.target.value})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-72 border rounded px-2 py-1",value:ue.name,onChange:$e=>ye(_e,{name:$e.target.value})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:ue.providerPrice,onChange:$e=>ye(_e,{providerPrice:Math.max(0,ac($e.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:ue.quantity,onChange:$e=>ye(_e,{quantity:gE($e.target.value,1)})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-24 border rounded px-2 py-1 text-right",value:ue.margin,onChange:$e=>ye(_e,{margin:Math.max(0,ac($e.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:ue.salePrice??"",onChange:$e=>ye(_e,{salePrice:Math.max(0,ac($e.target.value,0))||void 0}),placeholder:"Opcional"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("select",{className:"w-28 border rounded px-2 py-1",value:ue.gender,onChange:$e=>ye(_e,{gender:$e.target.value}),children:bB.map($e=>i.jsx("option",{value:$e,children:$e},$e))})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ue.typeProduct,onChange:$e=>ye(_e,{typeProduct:$e.target.value})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ue.code||"",onChange:$e=>ye(_e,{code:$e.target.value})})}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${Ce?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:Ce?"ACTUALIZA":"CREA"})})]},`${ue.id||""}-${_e}`)})})]}),ie.length>300&&i.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",ie.length," filas (importa todas)."]})]})]})]})})]})}function I_({label:t,value:e}){return i.jsxs("div",{className:"bg-white border rounded p-3 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-500",children:t}),i.jsx("div",{className:"text-lg font-extrabold",children:e})]})}function Vz({title:t,children:e,onClose:r}){return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-3xl p-4 relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:t}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),e]})})}const $u=t=>`C$ ${(Number(t)||0).toFixed(2)}`,d0=t=>Number(t||0).toFixed(3),NB=(t,e)=>{var a,s,o,l;const r=t._raw||{},n=t.customerName||r.customerName||((a=r.customer)==null?void 0:a.name)||r.clientName||((s=r.client)==null?void 0:s.name)||"";return t.type==="CONTADO"&&n?n:(t.customerId?e[t.customerId]:"")||t.customerName||r.customerName||((o=r.customer)==null?void 0:o.name)||r.clientName||((l=r.client)==null?void 0:l.name)||"Nombre cliente"},Hz=t=>{const e=t._raw||{},r=Kue(e)||t.date,n=Jx(r);return isFinite(n)?n:NaN},CB=t=>String((t==null?void 0:t.status)||"").toUpperCase()==="PROCESADA"||t!=null&&t.closureId||t!=null&&t.closureDate||t!=null&&t.processedDate?"PROCESADA":"FLOTANTE",iit=t=>String(t??"").toLowerCase().trim(),$z=t=>["lb","lbs","libra","libras"].includes(iit(t)),Gz=t=>Number((t==null?void 0:t.qty)??(t==null?void 0:t.quantity)??0)||0,oit=t=>t?Array.isArray(t.items)&&t.items.length>0?t.items.reduce((e,r)=>$z((r==null?void 0:r.measurement)??(t==null?void 0:t.measurement))?e+Gz(r):e,0):$z(t==null?void 0:t.measurement)?Gz(t):0:0;function Gue(t){if(!t)return"";if(t!=null&&t.toDate)return jr(t.toDate(),"yyyy-MM-dd");const e=String(t).trim();if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const r=["dd/MM/yyyy","d/M/yyyy","MM/dd/yyyy","M/d/yyyy","yyyy/MM/dd","yyyy-M-d","yyyy/M/d","yyyy-MM-dd'T'HH:mm:ss","yyyy-MM-dd'T'HH:mm:ss.SSSX"];for(const a of r){const s=dS(e,a,new Date);if(p6(s))return jr(s,"yyyy-MM-dd")}const n=new Date(e);return isNaN(n.getTime())?"":jr(n,"yyyy-MM-dd")}function Jx(t){const e=Gue(t);if(!e)return NaN;const r=dS(e,"yyyy-MM-dd",new Date);return p6(r)?r.getTime():NaN}function Kue(t){var n,a;const e=Gue(t==null?void 0:t.date),r=(n=t==null?void 0:t.createdAt)!=null&&n.toDate?t.createdAt.toDate():null;if(e&&r){const s=Jx(e),o=r.getTime();if(Math.abs(o-s)/(1e3*60*60*24)>30)return jr(r,"yyyy-MM-dd")}return e||((a=t==null?void 0:t.timestamp)!=null&&a.toDate?jr(t.timestamp.toDate(),"yyyy-MM-dd"):r?jr(r,"yyyy-MM-dd"):"")}function lit(t,e){var s,o,l,c;const r=Kue(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((u,d)=>u+(Number(d.qty??d.quantity??d.lbs??0)||0),0),a=Number(t.amount??t.total??0)||0):(n=Number(t.quantity??t.lbs??t.weight??0)||0,a=Number(t.amount??t.total??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||((s=t.customer)==null?void 0:s.id)||((o=t.customer)==null?void 0:o.customerId)||t.clientId||void 0,customerName:t.customerName||((l=t.customer)==null?void 0:l.name)||t.clientName||((c=t.client)==null?void 0:c.name)||void 0,_raw:t}}async function cit(t){const e=er(At(De,"ar_movements"),ur("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Dn(Yt(De,"ar_movements",n.id))))}function uit({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=mn(n,"vendedor_pollo"),s=mn(n,"admin");if(!(mn(n,"admin")||mn(n,"vendedor_pollo")||mn(n,"supervisor_pollo")||mn(n,"contador")))return i.jsx("div",{className:"p-6 max-w-4xl mx-auto text-center text-red-600",children:"Acceso restringido  Solo administradores, vendedores y supervisores de pollo."});const o=s?8:7,[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,A]=x.useState(null),[h,m]=x.useState([]),p=async be=>{c(!0),d(!0),A(be),m([]);try{const ce=await ei(Yt(De,"salesV2",be)),te=ce.exists()?ce.data():null;if(!te){m([]);return}let Ne=[];if(Array.isArray(te.items)&&te.items.length>0)Ne=te.items;else if(te.items&&typeof te.items=="object")try{Ne=Object.values(te.items)}catch{Ne=[]}else te.item?Ne=[te.item]:Array.isArray(te.products)&&te.products.length>0?Ne=te.products:Array.isArray(te.lines)&&te.lines.length>0?Ne=te.lines:Array.isArray(te.detalles)&&te.detalles.length>0?Ne=te.detalles:(te.productName||te.product)&&(Ne=[{productName:te.productName||te.product||"",qty:te.qty??te.quantity??te.lbs??0,unitPrice:te.unitPrice??te.price??0,discount:te.discount??0,total:te.total??te.amount??0}]);const Re=rt=>{if(rt==null)return NaN;if(typeof rt=="number")return rt;let ue=String(rt).trim();if(!ue)return NaN;if(ue=ue.replace(/[^0-9.,-]/g,""),!ue)return NaN;ue.indexOf(".")>-1&&ue.indexOf(",")>-1?ue=ue.replace(/,/g,""):ue.indexOf(",")>-1&&ue.indexOf(".")===-1&&(ue=ue.replace(/,/g,"."));const _e=Number(ue);return isNaN(_e)?NaN:_e},ye=new Set;for(const rt of Ne)if(Array.isArray(rt==null?void 0:rt.allocations))for(const ue of rt.allocations){const _e=String((ue==null?void 0:ue.batchId)||"").trim();_e&&ye.add(_e)}else if(rt!=null&&rt.allocations&&typeof rt.allocations=="object")try{for(const ue of Object.values(rt.allocations)){const _e=String((ue==null?void 0:ue.batchId)||"").trim();_e&&ye.add(_e)}}catch{}if(Array.isArray(te==null?void 0:te.allocations))for(const rt of te.allocations){const ue=String((rt==null?void 0:rt.batchId)||"").trim();ue&&ye.add(ue)}const Xe={};ye.size>0&&await Promise.all(Array.from(ye).map(async rt=>{try{const ue=await ei(Yt(De,"inventory_batches",rt));if(ue.exists()){const _e=ue.data();Xe[rt]=Number(_e.salePrice??_e.sale_price??_e.price??0)}}catch{}}));const mt=Ne.map(rt=>{const ue=String(rt.productName||rt.product||rt.name||"(sin nombre)"),_e=Number(rt.qty??rt.quantity??rt.lbs??rt.weight??0)||0,We=Re(rt.total??rt.lineFinal??rt.amount??rt.monto??rt.line_total)||0;let ot=0;const Ce=[rt.unitPrice,rt.unitPricePackage,rt.salePrice,rt.sale_price,rt.price,rt.unit_price,rt.pricePerUnit,rt.price_per_unit];for(const Kt of Ce){const Ut=Re(Kt);if(!isNaN(Ut)&&Ut!==0){ot=Ut;break}}if(!ot){const Kt=(te==null?void 0:te.salePrice)??(te==null?void 0:te.sale_price)??(te==null?void 0:te.unitPrice)??(te==null?void 0:te.unit_price)??(te==null?void 0:te.price)??(te==null?void 0:te.pricePerUnit),Ut=Re(Kt);!isNaN(Ut)&&Ut!==0&&(ot=Ut)}if(!ot){const Kt=Array.isArray(rt.allocations)?rt.allocations[0]:rt.allocations&&typeof rt.allocations=="object"?Object.values(rt.allocations)[0]:null,Ut=Kt?String(Kt.batchId||"").trim():"";Ut&&Xe[Ut]&&(ot=Xe[Ut]||0)}!ot&&rt.productId&&(ot=productPriceMap[String(rt.productId)]||0),(!ot||ot===0)&&We>0&&_e>0&&(ot=We/_e);const $e=Re(rt.discount??rt.desc??0)||0;let gt=We;return(!gt||gt===0)&&(gt=Number(ot*_e||0)),gt=Number(gt)||0,{productName:ue,qty:_e,unitPrice:ot,discount:$e,total:gt}});m(mt)}catch(ce){console.error(ce)}finally{d(!1)}},[g,v]=x.useState(jr(new Date,"yyyy-MM-01")),[y,b]=x.useState(jr(new Date,"yyyy-MM-dd")),[w,P]=x.useState([]),[j,_]=x.useState([]),[I,E]=x.useState([]),[F,k]=x.useState(!0),[B,R]=x.useState(""),{refreshKey:Y,refresh:me}=vc(),[pe,he]=x.useState(""),[ge,se]=x.useState(""),[je,Te]=x.useState("ALL"),[D,K]=x.useState(""),[z,Q]=x.useState(null),J=15,[ee,M]=x.useState(1),G=x.useMemo(()=>{const be={};return w.forEach(ce=>be[ce.id]=ce.name),be},[w]);x.useEffect(()=>{je!=="ALL"&&!I.includes(je)&&Te("ALL")},[I,je]),x.useEffect(()=>{(async()=>{k(!0),R("");try{const be=[];if(a&&e){const We=er(At(De,"customers_pollo"),ur("vendorId","==",e),bn("createdAt","desc"));(await Lt(We)).forEach(Ce=>be.push({id:Ce.id,name:Ce.data().name||""}))}else(await Lt(er(At(De,"customers_pollo"),bn("createdAt","desc")))).forEach(ot=>be.push({id:ot.id,name:ot.data().name||""}));P(be);const ce={};be.forEach(We=>{ce[We.id]=We.name});const[te,Ne,Re]=await Promise.all([Lt(er(At(De,"salesV2"),bn("timestamp","desc"))),Lt(er(At(De,"daily_closures"),bn("createdAt","desc"))),Lt(er(At(De,"ar_movements_pollo"),ur("date",">=",g),ur("date","<=",y)))]),ye=new Map;Re.forEach(We=>{var gt;const ot=We.data(),Ce=String(((gt=ot==null?void 0:ot.ref)==null?void 0:gt.saleId)||"").trim(),$e=String((ot==null?void 0:ot.customerId)||"").trim();Ce&&$e&&ye.set(Ce,$e)});const Xe=new Map;Ne.forEach(We=>{const ot=We.data(),Ce=Array.isArray(ot==null?void 0:ot.salesV2)?ot.salesV2:[];for(const $e of Ce){const gt=String(($e==null?void 0:$e.id)||"").trim();if(!gt)continue;const Kt=gt.split("#")[0];(String(($e==null?void 0:$e.status)||"").toUpperCase()==="PROCESADA"||$e!=null&&$e.closureDate||$e!=null&&$e.processedDate)&&Xe.set(Kt,{closureDate:$e==null?void 0:$e.closureDate,processedDate:$e==null?void 0:$e.processedDate})}});const mt=[];te.forEach(We=>{const ot=We.data(),Ce=Xe.get(We.id),$e=ye.get(We.id);!ot.customerId&&$e&&(ot.customerId=$e),!ot.customerName&&$e&&(ot.customerName=ce[$e]||""),Ce&&(ot.status="PROCESADA",!ot.closureDate&&Ce.closureDate&&(ot.closureDate=Ce.closureDate),!ot.processedDate&&Ce.processedDate&&(ot.processedDate=Ce.processedDate));const gt=lit(ot,We.id);gt&&mt.push(gt)});const rt=mt.sort((We,ot)=>ot.date.localeCompare(We.date));_(rt);const ue=Jx(g),_e=Jx(y);E(Array.from(new Set(rt.filter(We=>{const ot=Hz(We);return!(!isFinite(ot)||isFinite(ue)&&ot<ue||isFinite(_e)&&ot>_e)}).map(We=>{var ot,Ce,$e,gt;return((ot=We._raw)==null?void 0:ot.productName)||((gt=($e=(Ce=We._raw)==null?void 0:Ce.items)==null?void 0:$e[0])==null?void 0:gt.productName)||"(sin producto)"}))).sort()),M(1)}catch(be){console.error(be),R(" Error cargando transacciones.")}finally{k(!1)}})()},[g,y,Y]);const ne=x.useMemo(()=>{const be=Jx(g),ce=Jx(y);return j.filter(te=>{const Ne=Hz(te);return!(!isFinite(Ne)||isFinite(be)&&Ne<be||isFinite(ce)&&Ne>ce)})},[j,g,y]),ve=x.useMemo(()=>ne.filter(be=>{var ce,te,Ne,Re;if(pe&&be.customerId!==pe||ge&&be.type!==ge)return!1;if(je&&je!=="ALL"){const ye=((ce=be._raw)==null?void 0:ce.productName)||((Re=(Ne=(te=be._raw)==null?void 0:te.items)==null?void 0:Ne[0])==null?void 0:Re.productName)||"";if(!ye||ye!==je)return!1}return!(D&&CB(be._raw)!==D)}),[ne,pe,ge,je,D]),V=x.useMemo(()=>{let be=0,ce=0,te=0,Ne=0;for(const Xe of ve){const mt=oit(Xe._raw);Xe.type==="CONTADO"?(be+=mt,te+=Xe.total):(ce+=mt,Ne+=Xe.total)}const Re=be+ce,ye=te+Ne;return{packsCash:be,packsCredito:ce,packsTotal:Re,montoCash:te,montoCredito:Ne,montoTotal:ye}},[ve]),qe=x.useMemo(()=>{let be=0,ce=0;for(const Ne of ve)Ne.type==="CONTADO"?be+=Ne.quantity:ce+=Ne.quantity;const te=be+ce;return{unidadesCash:be,unidadesCredito:ce,unidadesTotal:te}},[ve]),ie=Math.max(1,Math.ceil(ve.length/J)),re=x.useMemo(()=>{const be=(ee-1)*J;return ve.slice(be,be+J)},[ve,ee]),[Fe,de]=x.useState(!0),[we,Le]=x.useState(!0),[Ge,ft]=x.useState(!0);x.useMemo(()=>f&&j.find(be=>be.id===f)||null,[f,j]);const ht=async be=>{if(s&&(Q(null),!!window.confirm("Eliminar esta venta? Se restaurar el inventario asociado.")))try{k(!0),await Cre(be.id),await cit(be.id),_(ce=>ce.filter(te=>te.id!==be.id)),R(" Venta eliminada")}catch(ce){console.error(ce),R(" No se pudo eliminar la venta.")}finally{k(!1)}},xt=()=>{const be=`Ventas del dia  ${g} a ${y}`,ce=ye=>(ye||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),te=ve.map(ye=>{var mt,rt,ue,_e;const Xe=NB(ye,G);return(mt=ye._raw)!=null&&mt.productName||(_e=(ue=(rt=ye._raw)==null?void 0:rt.items)==null?void 0:ue[0])!=null&&_e.productName,`<tr>
          <td>${ye.date}</td>
          <td>${ce(Xe)}</td>
          <td>${ye.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${ye.quantity}</td>
          <td style="text-align:right">${$u(ye.total)}</td>
        </tr>`}).join(""),Ne=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${ce(be)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${ce(be)}</h1>
      <div class="kpis">

      
        <div><b>Unidades Cash:</b> ${d0(qe.unidadesCash)}</div>
        <div><b>Unidades Crdito:</b> ${d0(qe.unidadesCredito)}</div>
        <div><b>Total Unidades:</b> ${d0(qe.unidadesTotal)}</div>
      </div>

      <div class="kpis">
        <div><b>Libras Cash:</b> ${V.packsCash}</div>
        <div><b>Libras Crdito:</b> ${V.packsCredito}</div>
        <div><b>Ventas Cash:</b> ${$u(V.montoCash)}</div>
        <div><b>Ventas Crdito:</b> ${$u(V.montoCredito)}</div>
      </div>

      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Libras</th><th>Ventas</th>
      </tr></thead><tbody>
      ${te||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,Re=window.open("","_blank");Re&&(Re.document.open(),Re.document.write(Ne),Re.document.close())},jt=()=>M(1),kt=()=>M(be=>Math.max(1,be-1)),wt=()=>M(be=>Math.min(ie,be+1)),Ve=()=>M(ie),Pe=()=>{const be=[];if(ie<=7)for(let te=1;te<=ie;te++)be.push(te);else{const te=Math.max(1,ee-2),Ne=Math.min(ie,ee+2);be.push(1),te>2&&be.push(-1);for(let Re=te;Re<=Ne;Re++)Re!==1&&Re!==ie&&be.push(Re);Ne<ie-1&&be.push(-2),be.push(ie)}return i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:jt,disabled:ee===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:kt,disabled:ee===1,children:" Anterior"}),be.map((te,Ne)=>typeof te=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${te===ee?"bg-blue-600 text-white":""}`,onClick:()=>M(te),children:te},Ne):i.jsx("span",{className:"px-2",children:""},Ne)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:wt,disabled:ee===ie,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ve,disabled:ee===ie,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",ee," de ",ie,"  ",ve.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),i.jsxs("div",{className:"bg-white border rounded shadow-sm mb-4",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left text-sm font-semibold",onClick:()=>de(be=>!be),"aria-expanded":Fe,children:[i.jsx("span",{children:"Filtros de bsqueda"}),i.jsx("span",{className:`transition-transform ${Fe?"rotate-180":""}`,children:""})]}),Fe&&i.jsx("div",{className:"p-4 border-t",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-7 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:be=>{v(be.target.value),M(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:be=>{b(be.target.value),M(1)}})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:pe,onChange:be=>{he(be.target.value),M(1)},children:[i.jsx("option",{value:"",children:"Todos"}),w.map(be=>i.jsx("option",{value:be.id,children:be.name},be.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:ge,onChange:be=>{se(be.target.value),M(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:je,onChange:be=>{Te(be.target.value),M(1)},children:[i.jsx("option",{value:"ALL",children:"Todos"}),I.map(be=>i.jsx("option",{value:be,children:be},be))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Estado"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:D,onChange:be=>{K(be.target.value),M(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"FLOTANTE",children:"FLOTANTE"}),i.jsx("option",{value:"PROCESADA",children:"PROCESADA"})]})]}),i.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:xt,children:"Exportar PDF"}),i.jsx("div",{className:"sm:col-span-2 lg:col-span-1 flex",children:i.jsx(xc,{onClick:me,loading:F,className:"w-full justify-center"})})]})})]}),i.jsxs("div",{className:"bg-white border rounded shadow-sm mb-4",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left text-sm font-semibold",onClick:()=>Le(be=>!be),"aria-expanded":we,children:[i.jsx("span",{children:"KPIs"}),i.jsx("span",{className:`transition-transform ${we?"rotate-180":""}`,children:""})]}),we&&i.jsx("div",{className:"p-4 border-t",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:d0(V.packsCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:d0(V.packsCredito)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:$u(V.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:$u(V.montoCredito)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Total"}),i.jsx("div",{className:"text-xl font-semibold",children:$u(V.montoTotal)})]})]})})]}),i.jsxs("div",{className:"bg-white border rounded shadow-sm",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left text-sm font-semibold",onClick:()=>ft(be=>!be),"aria-expanded":Ge,children:[i.jsx("span",{children:"Transacciones"}),i.jsx("span",{className:`transition-transform ${Ge?"rotate-180":""}`,children:""})]}),Ge&&i.jsxs("div",{className:"p-3 border-t space-y-4",children:[i.jsxs("div",{className:"block md:hidden space-y-3",children:[F?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):re.length===0?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):re.map(be=>{var Re,ye,Xe,mt;const ce=NB(be,G),te=((Re=be._raw)==null?void 0:Re.productName)||((mt=(Xe=(ye=be._raw)==null?void 0:ye.items)==null?void 0:Xe[0])==null?void 0:mt.productName)||"(sin producto)",Ne=CB(be._raw);return i.jsx("div",{className:"bg-white border rounded-xl shadow",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:ce}),i.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:be.date})]}),i.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[i.jsx("span",{className:`px-2 py-1 rounded-full border ${Ne==="PROCESADA"?"bg-blue-50 border-blue-200 text-blue-700":"bg-gray-50 border-gray-200 text-gray-700"}`,children:Ne}),i.jsx("span",{className:`px-2 py-1 rounded-full border ${be.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:be.type==="CREDITO"?"Crdito":"Cash"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Libras:"})," ",i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:rt=>{rt.preventDefault(),p(be.id)},title:"Ver detalle",children:d0(be.quantity)})]}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Monto:"})," ",$u(be.total)]})]})]}),i.jsx("div",{className:"text-gray-500 mt-1",children:i.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),i.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("span",{className:"font-medium text-right",children:ce})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Producto"}),i.jsx("span",{className:"font-medium text-right",children:te})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha"}),i.jsx("span",{className:"font-medium",children:be.date})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Estado"}),i.jsx("span",{className:"font-medium",children:Ne})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("span",{className:"font-medium",children:be.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Libras"}),i.jsx("span",{className:"font-medium",children:i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(be.id),title:"Ver detalle",children:d0(be.quantity)})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Monto"}),i.jsx("span",{className:"font-semibold",children:$u(be.total)})]}),i.jsx("div",{className:"flex items-center justify-between",children:s&&i.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2 w-full",children:[i.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>Q(rt=>rt===be.id?null:be.id),children:" Acciones"}),z===be.id&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ht(be),children:"Eliminar"})]})})]})})]})},be.id)}),i.jsx("div",{className:"bg-white p-3 rounded shadow border",children:Pe()})]}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Libras"}),i.jsx("th",{className:"p-2 border",children:"Ventas"}),s&&i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:F?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Cargando"})}):re.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Sin transacciones en el rango."})}):re.map(be=>{var Re,ye,Xe,mt;const ce=NB(be,G),te=((Re=be._raw)==null?void 0:Re.productName)||((mt=(Xe=(ye=be._raw)==null?void 0:ye.items)==null?void 0:Xe[0])==null?void 0:mt.productName)||"(sin producto)",Ne=CB(be._raw);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:be.date}),i.jsx("td",{className:"p-2 border",children:Ne}),i.jsx("td",{className:"p-2 border",children:ce}),i.jsx("td",{className:"p-2 border",children:te}),i.jsx("td",{className:"p-2 border",children:be.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(be.id),children:d0(be.quantity)})}),i.jsx("td",{className:"p-2 border",children:$u(be.total)}),s&&i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>Q(rt=>rt===be.id?null:be.id),title:"Acciones",children:""}),z===be.id&&i.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>ht(be),children:"Eliminar"})})]})]},be.id)})})]}),Pe()]})]})]}),B&&i.jsx("p",{className:"mt-2 text-sm",children:B}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{children:i.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," ",f?` #${f}`:""]})}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Libras"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:u?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):h.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):h.map((be,ce)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:be.productName}),i.jsx("td",{className:"p-2 border text-right",children:be.qty}),i.jsx("td",{className:"p-2 border text-right",children:$u(be.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:$u(be.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:$u(be.total)})]},ce))})]})})]})})]})}function dit(){const[t,e]=x.useState(!1);return x.useEffect(()=>{var a;const r=window.matchMedia("(max-width: 900px)"),n=()=>e(r.matches);return n(),(a=r.addEventListener)==null||a.call(r,"change",n),()=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"change",n)}},[]),t}function fit(){const[t,e]=x.useState(null),[r,n]=x.useState(""),[a,s]=x.useState([]),[o,l]=x.useState(""),[c,u]=x.useState(!0),d=dit(),f=x.useMemo(()=>d?i.jsx(Qye,{role:r,roles:a}):i.jsx(Uye,{role:r,roles:a}),[d,r,a]),A=(t==null?void 0:t.email)||"";if(x.useEffect(()=>{const m=lj(ef,async p=>{if(u(!0),p){e(p);try{const g=Yt(De,"users",p.uid),v=await ei(g);if(v.exists()){const y=v.data(),b=Array.isArray(y.roles)?y.roles:y.role?[y.role]:[],w=y.sellerCandyId||"";s(b),n(b[0]||""),l(w||"")}else n(""),s([]),l("")}catch{n(""),l("")}}else e(null),n(""),l("");u(!1)});return()=>m()},[]),c)return i.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const h=()=>{const m=a&&a.length?a:r;return mn(m,"admin")?i.jsx(Nh,{to:"financialDashboard",replace:!0}):mn(m,"vendedor_pollo")?i.jsx(Nh,{to:"salesV2",replace:!0}):mn(m,"supervisor_pollo")?i.jsx(Nh,{to:"batches",replace:!0}):mn(m,"contador")?i.jsx(Nh,{to:"batches",replace:!0}):mn(m,"vendedor_ropa")?i.jsx(Nh,{to:"salesClothes",replace:!0}):mn(m,"vendedor_dulces")?i.jsx(Nh,{to:"salesCandies",replace:!0}):i.jsx(Nh,{to:"/",replace:!0})};return i.jsx(v0e,{children:i.jsxs(XAe,{children:[i.jsx(Pn,{path:"/",element:i.jsx(Dye,{})}),i.jsxs(Pn,{path:"/admin",element:i.jsx(Un,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"],children:f}),children:[i.jsx(Pn,{index:!0,element:i.jsx(h,{})}),i.jsx(Pn,{path:"bills",element:i.jsx(Un,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(hPe,{role:r,roles:a})})}),i.jsx(Pn,{path:"salesV2",element:i.jsx(Un,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(RV,{user:t})})}),i.jsx(Pn,{path:"financialDashboard",element:i.jsx(Un,{allowedRoles:["admin","contador","supervisor_pollo"],children:i.jsx(d4e,{})})}),i.jsx(Pn,{path:"expenses",element:i.jsx(Un,{allowedRoles:["admin"],children:i.jsx(f4e,{})})}),i.jsx(Pn,{path:"transactionsPollo",element:i.jsx(Un,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(uit,{role:r,roles:a})})}),i.jsx(Pn,{path:"batches",element:i.jsx(Un,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(l4e,{role:r,roles:a})})}),i.jsx(Pn,{path:"paidBatches",element:i.jsx(Un,{allowedRoles:["admin"],children:i.jsx(v4e,{})})}),i.jsx(Pn,{path:"fix",element:i.jsx(Un,{allowedRoles:["admin"],children:i.jsx(m4e,{})})}),i.jsx(Pn,{path:"transactionclose",element:i.jsx(Un,{allowedRoles:["admin"],children:i.jsx(c4e,{})})}),i.jsx(Pn,{path:"billhistoric",element:i.jsx(Un,{allowedRoles:["admin"],children:i.jsx(APe,{})})}),i.jsx(Pn,{path:"users",element:i.jsx(Un,{allowedRoles:["admin"],children:i.jsx(mPe,{})})}),i.jsx(Pn,{path:"products",element:i.jsx(Un,{allowedRoles:["admin"],children:i.jsx(pPe,{})})}),i.jsx(Pn,{path:"customersPollo",element:i.jsx(Un,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(Y4e,{role:r,roles:a,currentUserEmail:A,sellerPolloId:o})})}),i.jsx(Pn,{path:"datacenter",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(WQe,{})})}),i.jsx(Pn,{path:"productsCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(q9e,{})})}),i.jsx(Pn,{path:"mainordersCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(TQe,{})})}),i.jsx(Pn,{path:"productsPricesCandies",element:i.jsx(Un,{roles:a,allowedRoles:["admin","vendedor_dulces"],children:i.jsx(rit,{})})}),i.jsx(Pn,{path:"inventoryMainOrderCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(kQe,{})})}),i.jsx(Pn,{path:"inventoryCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(eQe,{})})}),i.jsx(Pn,{path:"billingsCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(HQe,{})})}),i.jsx(Pn,{path:"cashDeliveries",element:i.jsx(Un,{allowedRoles:["admin"],children:i.jsx(Jst,{})})}),i.jsx(Pn,{path:"customersCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(tQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Pn,{path:"salesCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(oQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Pn,{path:"expensesCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(lQe,{})})}),i.jsx(Pn,{path:"dashboardCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(gQe,{})})}),i.jsx(Pn,{path:"transactionCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(fQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Pn,{path:"vendorsCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(xQe,{})})}),i.jsx(Pn,{path:"productsVendorsCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(SQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Pn,{path:"cierreVentasCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(DQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Pn,{path:"reporteCierresCandies",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(GQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Pn,{path:"consolidatedVendors",element:i.jsx(Un,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(QQe,{})})}),i.jsx(Pn,{path:"salesClothes",element:i.jsx(Un,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(L4e,{})})}),i.jsx(Pn,{path:"notebooksInventory",element:i.jsx(Un,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(sit,{})})}),i.jsx(Pn,{path:"TransactionsReportClothes",element:i.jsx(Un,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(W4e,{})})}),i.jsx(Pn,{path:"financialDashboardClothes",element:i.jsx(Un,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(V4e,{})})}),i.jsx(Pn,{path:"ExpensesClothes",element:i.jsx(Un,{allowedRoles:["admin"],children:i.jsx(H4e,{})})}),i.jsx(Pn,{path:"inventoryClothesBatches",element:i.jsx(Un,{allowedRoles:["admin"],children:i.jsx(N4e,{})})}),i.jsx(Pn,{path:"productsClothes",element:i.jsx(Un,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(F4e,{})})}),i.jsx(Pn,{path:"CustomersClothes",element:i.jsx(Un,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(D4e,{})})})]}),i.jsx(Pn,{path:"/salesV2",element:i.jsx(Un,{allowedRoles:["admin","vendedor_pollo","contador"],children:i.jsx(RV,{user:t})})}),i.jsx(Pn,{path:"*",element:i.jsx(Nh,{to:"/"})})]})})}Oye.then(t=>{console.info("Auth persistence mode:",t)}).catch(()=>{}).finally(()=>{_B.createRoot(document.getElementById("root")).render(i.jsx(Ro.StrictMode,{children:i.jsx(fit,{})}))});export{Qa as _,Ait as c,pA as g};
